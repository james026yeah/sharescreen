cscope 15 /work/cyher-air/jni/icu4c/common -q 0000012869 0002966463
	@bmpset.cpp

17 
	~"unicode/uty³s.h
"

18 
	~"unicode/uni£t.h
"

19 
	~"cmemÜy.h
"

20 
	~"bmp£t.h
"

22 
U_NAMESPACE_BEGIN


24 
	gBMPS‘
::
	$BMPS‘
(cÚ¡ 
št32_t
 *
·»ÁLi¡
, iÁ32_ˆ
·»ÁLi¡L’gth
) :

25 
	`li¡
(
·»ÁLi¡
), 
	$li¡L’gth
(
·»ÁLi¡L’gth
) {

26 
	`u´v_mem£t
(
asciiBy‹s
, 0, (asciiBytes));

27 
	`u´v_mem£t
(
bË7FF
, 0, (table7FF));

28 
	`u´v_mem£t
(
bmpBlockB™s
, 0, (bmpBlockBits));

37 
li¡4kS¹s
[0]=
	`fšdCodePošt
(0x800, 0, 
li¡L’gth
-1);

38 
št32_t
 
i
;

39 
i
=1; i<=0x10; ++i) {

40 
li¡4kS¹s
[
i
]=
	`fšdCodePošt
(i<<12,†i¡4kS¹s[i-1], 
li¡L’gth
-1);

42 
li¡4kS¹s
[0x11]=
li¡L’gth
-1;

44 
	`š™B™s
();

45 
	`ov”rideIÎeg®
();

46 
	}
}

48 
	gBMPS‘
::
	$BMPS‘
(cÚ¡ 
BMPS‘
 &
Ùh”BMPS‘
, cÚ¡ 
št32_t
 *
ÃwP¬’tLi¡
, iÁ32_ˆ
ÃwP¬’tLi¡L’gth
) :

49 
	`li¡
(
ÃwP¬’tLi¡
), 
	$li¡L’gth
(
ÃwP¬’tLi¡L’gth
) {

50 
	`u´v_memıy
(
asciiBy‹s
, 
Ùh”BMPS‘
.asciiBytes, (asciiBytes));

51 
	`u´v_memıy
(
bË7FF
, 
Ùh”BMPS‘
.table7FF, (table7FF));

52 
	`u´v_memıy
(
bmpBlockB™s
, 
Ùh”BMPS‘
.bmpBlockBits, (bmpBlockBits));

53 
	`u´v_memıy
(
li¡4kS¹s
, 
Ùh”BMPS‘
.list4kStarts, (list4kStarts));

54 
	}
}

56 
	gBMPS‘
::~
	$BMPS‘
() {

57 
	}
}

63 
	$£t32x64B™s
(
ušt32_t
 
bË
[64], 
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
) {

64 
št32_t
 
Ëad
=
¡¬t
>>6;

65 
št32_t
 
Œa
=
¡¬t
&0x3f;

68 
ušt32_t
 
b™s
=(ušt32_t)1<<
Ëad
;

69 if((
¡¬t
+1)==
lim™
) {

70 
bË
[
Œa
]|=
b™s
;

74 
št32_t
 
lim™L—d
=
lim™
>>6;

75 
št32_t
 
lim™T¿
=
lim™
&0x3f;

77 if(
Ëad
==
lim™L—d
) {

79 
Œa
<
lim™T¿
) {

80 
bË
[
Œa
++]|=
b™s
;

86 if(
Œa
>0) {

88 
bË
[
Œa
++]|=
b™s
;

89 } 
Œa
<64);

90 ++
Ëad
;

92 if(
Ëad
<
lim™L—d
) {

93 
b™s
=~((1<<
Ëad
)-1);

94 if(
lim™L—d
<0x20) {

95 
b™s
&=(1<<
lim™L—d
)-1;

97 
Œa
=0;rail<64; ++trail) {

98 
bË
[
Œa
]|=
b™s
;

101 
b™s
=1<<
lim™L—d
;

102 
Œa
=0;¿<
lim™T¿
; ++trail) {

103 
bË
[
Œa
]|=
b™s
;

106 
	}
}

108 
	gBMPS‘
::
	$š™B™s
() {

109 
UCh¬32
 
¡¬t
, 
lim™
;

110 
št32_t
 
li¡Index
=0;

114 
¡¬t
=
li¡
[
li¡Index
++];

115 if(
li¡Index
<
li¡L’gth
) {

116 
lim™
=
li¡
[
li¡Index
++];

118 
lim™
=0x110000;

120 if(
¡¬t
>=0x80) {

124 
asciiBy‹s
[
¡¬t
++]=1;

125 } 
¡¬t
<
lim™
 && start<0x80);

126 } 
lim™
<=0x80);

129 
¡¬t
<0x800) {

130 
	`£t32x64B™s
(
bË7FF
, 
¡¬t
, 
lim™
<=0x800 ?†imit : 0x800);

131 if(
lim™
>0x800) {

132 
¡¬t
=0x800;

136 
¡¬t
=
li¡
[
li¡Index
++];

137 if(
li¡Index
<
li¡L’gth
) {

138 
lim™
=
li¡
[
li¡Index
++];

140 
lim™
=0x110000;

145 
št32_t
 
mšS¹
=0x800;

146 
¡¬t
<0x10000) {

147 if(
lim™
>0x10000) {

148 
lim™
=0x10000;

151 if(
¡¬t
<
mšS¹
) {

152 
¡¬t
=
mšS¹
;

154 if(
¡¬t
<
lim™
) {

155 if(
¡¬t
&0x3f) {

157 
¡¬t
>>=6;

158 
bmpBlockB™s
[
¡¬t
&0x3f]|=0x10001<<(start>>6);

159 
¡¬t
=(start+1)<<6;

160 
mšS¹
=
¡¬t
;

162 if(
¡¬t
<
lim™
) {

163 if(
¡¬t
<(
lim™
&~0x3f)) {

165 
	`£t32x64B™s
(
bmpBlockB™s
, 
¡¬t
>>6, 
lim™
>>6);

168 if(
lim™
&0x3f) {

170 
lim™
>>=6;

171 
bmpBlockB™s
[
lim™
&0x3f]|=0x10001<<(limit>>6);

172 
lim™
=(limit+1)<<6;

173 
mšS¹
=
lim™
;

178 if(
lim™
==0x10000) {

182 
¡¬t
=
li¡
[
li¡Index
++];

183 if(
li¡Index
<
li¡L’gth
) {

184 
lim™
=
li¡
[
li¡Index
++];

186 
lim™
=0x110000;

189 
	}
}

199 
	gBMPS‘
::
	$ov”rideIÎeg®
() {

200 
ušt32_t
 
b™s
, 
mask
;

201 
št32_t
 
i
;

203 if(
	`cÚšsSlow
(0xfffd, 
li¡4kS¹s
[0xf],†ist4kStarts[0x10])) {

205 
i
=0x80; i<0xc0; ++i) {

206 
asciiBy‹s
[
i
]=1;

209 
b™s
=3;

210 
i
=0; i<64; ++i) {

211 
bË7FF
[
i
]|=
b™s
;

214 
b™s
=1;

215 
i
=0; i<32; ++i) {

216 
bmpBlockB™s
[
i
]|=
b™s
;

219 
mask
=~(0x10001<<0xd);

220 
b™s
=1<<0xd;

221 
i
=32; i<64; ++i) {

222 
bmpBlockB™s
[
i
]=(bmpBlockB™s[i]&
mask
)|
b™s
;

226 
mask
=~(0x10001<<0xd);

227 
i
=32; i<64; ++i) {

228 
bmpBlockB™s
[
i
]&=
mask
;

231 
	}
}

233 
št32_t
 
	gBMPS‘
::
	$fšdCodePošt
(
UCh¬32
 
c
, 
št32_t
 
lo
, iÁ32_ˆ
hi
) const {

246 ià(
c
 < 
li¡
[
lo
])

247  
lo
;

250 ià(
lo
 >ğ
hi
 || 
c
 >ğ
li¡
[hi-1])

251  
hi
;

255 
št32_t
 
i
 = (
lo
 + 
hi
) >> 1;

256 ià(
i
 =ğ
lo
) {

258 } ià(
c
 < 
li¡
[
i
]) {

259 
hi
 = 
i
;

261 
lo
 = 
i
;

264  
hi
;

265 
	}
}

267 
UBoŞ


268 
	gBMPS‘
::
	$cÚšs
(
UCh¬32
 
c
) const {

269 if((
ušt32_t
)
c
<=0x7f) {

270  (
UBoŞ
)
asciiBy‹s
[
c
];

271 } if((
ušt32_t
)
c
<=0x7ff) {

272  (
UBoŞ
)((
bË7FF
[
c
&0x3f]&((
ušt32_t
)1<<(c>>6)))!=0);

273 } if((
ušt32_t
)
c
<0xd800 || (c>=0xe000 && c<=0xffff)) {

274 
Ëad
=
c
>>12;

275 
ušt32_t
 
twoB™s
=(
bmpBlockB™s
[(
c
>>6)&0x3f]>>
Ëad
)&0x10001;

276 if(
twoB™s
<=1) {

279  (
UBoŞ
)
twoB™s
;

282  
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[
Ëad
],†ist4kStarts[lead+1]);

284 } if((
ušt32_t
)
c
<=0x10ffff) {

286  
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[0xd],†ist4kStarts[0x11]);

290  
FALSE
;

292 
	}
}

298 cÚ¡ 
UCh¬
 *

299 
	gBMPS‘
::
	$¥ª
(cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
lim™
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

300 
UCh¬
 
c
, 
c2
;

302 if(
¥ªCÚd™iÚ
) {

305 
c
=*
s
;

306 if(
c
<=0x7f) {

307 if(!
asciiBy‹s
[
c
]) {

310 } if(
c
<=0x7ff) {

311 if((
bË7FF
[
c
&0x3f]&((
ušt32_t
)1<<(c>>6)))==0) {

314 } if(
c
<0xd800 || c>=0xe000) {

315 
Ëad
=
c
>>12;

316 
ušt32_t
 
twoB™s
=(
bmpBlockB™s
[(
c
>>6)&0x3f]>>
Ëad
)&0x10001;

317 if(
twoB™s
<=1) {

320 if(
twoB™s
==0) {

325 if(!
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[
Ëad
],†ist4kStarts[lead+1])) {

329 } if(
c
>=0xdc00 || (
s
+1)==
lim™
 || (
c2
=s[1])<0xdc00 || c2>=0xe000) {

331 if(!
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[0xd],†ist4kStarts[0xe])) {

336 if(!
	`cÚšsSlow
(
	`U16_GET_SUPPLEMENTARY
(
c
, 
c2
), 
li¡4kS¹s
[0x10],†ist4kStarts[0x11])) {

339 ++
s
;

341 } ++
s
<
lim™
);

345 
c
=*
s
;

346 if(
c
<=0x7f) {

347 if(
asciiBy‹s
[
c
]) {

350 } if(
c
<=0x7ff) {

351 if((
bË7FF
[
c
&0x3f]&((
ušt32_t
)1<<(c>>6)))!=0) {

354 } if(
c
<0xd800 || c>=0xe000) {

355 
Ëad
=
c
>>12;

356 
ušt32_t
 
twoB™s
=(
bmpBlockB™s
[(
c
>>6)&0x3f]>>
Ëad
)&0x10001;

357 if(
twoB™s
<=1) {

360 if(
twoB™s
!=0) {

365 if(
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[
Ëad
],†ist4kStarts[lead+1])) {

369 } if(
c
>=0xdc00 || (
s
+1)==
lim™
 || (
c2
=s[1])<0xdc00 || c2>=0xe000) {

371 if(
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[0xd],†ist4kStarts[0xe])) {

376 if(
	`cÚšsSlow
(
	`U16_GET_SUPPLEMENTARY
(
c
, 
c2
), 
li¡4kS¹s
[0x10],†ist4kStarts[0x11])) {

379 ++
s
;

381 } ++
s
<
lim™
);

383  
s
;

384 
	}
}

387 cÚ¡ 
UCh¬
 *

388 
	gBMPS‘
::
	$¥ªBack
(cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
lim™
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

389 
UCh¬
 
c
, 
c2
;

391 if(
¥ªCÚd™iÚ
) {

394 
c
=*(--
lim™
);

395 if(
c
<=0x7f) {

396 if(!
asciiBy‹s
[
c
]) {

399 } if(
c
<=0x7ff) {

400 if((
bË7FF
[
c
&0x3f]&((
ušt32_t
)1<<(c>>6)))==0) {

403 } if(
c
<0xd800 || c>=0xe000) {

404 
Ëad
=
c
>>12;

405 
ušt32_t
 
twoB™s
=(
bmpBlockB™s
[(
c
>>6)&0x3f]>>
Ëad
)&0x10001;

406 if(
twoB™s
<=1) {

409 if(
twoB™s
==0) {

414 if(!
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[
Ëad
],†ist4kStarts[lead+1])) {

418 } if(
c
<0xdc00 || 
s
==
lim™
 || (
c2
=*(limit-1))<0xd800 || c2>=0xdc00) {

420 if(!
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[0xd],†ist4kStarts[0xe])) {

425 if(!
	`cÚšsSlow
(
	`U16_GET_SUPPLEMENTARY
(
c2
, 
c
), 
li¡4kS¹s
[0x10],†ist4kStarts[0x11])) {

428 --
lim™
;

430 if(
s
==
lim™
) {

431  
s
;

437 
c
=*(--
lim™
);

438 if(
c
<=0x7f) {

439 if(
asciiBy‹s
[
c
]) {

442 } if(
c
<=0x7ff) {

443 if((
bË7FF
[
c
&0x3f]&((
ušt32_t
)1<<(c>>6)))!=0) {

446 } if(
c
<0xd800 || c>=0xe000) {

447 
Ëad
=
c
>>12;

448 
ušt32_t
 
twoB™s
=(
bmpBlockB™s
[(
c
>>6)&0x3f]>>
Ëad
)&0x10001;

449 if(
twoB™s
<=1) {

452 if(
twoB™s
!=0) {

457 if(
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[
Ëad
],†ist4kStarts[lead+1])) {

461 } if(
c
<0xdc00 || 
s
==
lim™
 || (
c2
=*(limit-1))<0xd800 || c2>=0xdc00) {

463 if(
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[0xd],†ist4kStarts[0xe])) {

468 if(
	`cÚšsSlow
(
	`U16_GET_SUPPLEMENTARY
(
c2
, 
c
), 
li¡4kS¹s
[0x10],†ist4kStarts[0x11])) {

471 --
lim™
;

473 if(
s
==
lim™
) {

474  
s
;

478  
lim™
+1;

479 
	}
}

485 cÚ¡ 
ušt8_t
 *

486 
	gBMPS‘
::
	$¥ªUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

487 cÚ¡ 
ušt8_t
 *
lim™
=
s
+
Ëngth
;

488 
ušt8_t
 
b
=*
s
;

489 if((
št8_t
)
b
>=0) {

491 if(
¥ªCÚd™iÚ
) {

493 if(!
asciiBy‹s
[
b
] || ++
s
==
lim™
) {

494  
s
;

496 
b
=*
s
;

497 } (
št8_t
)
b
>=0);

500 if(
asciiBy‹s
[
b
] || ++
s
==
lim™
) {

501  
s
;

503 
b
=*
s
;

504 } (
št8_t
)
b
>=0);

506 
Ëngth
=(
št32_t
)(
lim™
-
s
);

509 if(
¥ªCÚd™iÚ
!=
USET_SPAN_NOT_CONTAINED
) {

510 
¥ªCÚd™iÚ
=
USET_SPAN_CONTAINED
;

513 cÚ¡ 
ušt8_t
 *
lim™0
=
lim™
;

525 
b
=*(
lim™
-1);

526 if((
št8_t
)
b
<0) {

528 if(
b
<0xc0) {

530 if(
Ëngth
>=2 && (
b
=*(
lim™
-2))>=0xe0) {

531 
lim™
-=2;

532 if(
asciiBy‹s
[0x80]!=
¥ªCÚd™iÚ
) {

533 
lim™0
=
lim™
;

535 } if(
b
<0xc0 && b>=0x80 && 
Ëngth
>=3 && (b=*(
lim™
-3))>=0xf0) {

537 
lim™
-=3;

538 if(
asciiBy‹s
[0x80]!=
¥ªCÚd™iÚ
) {

539 
lim™0
=
lim™
;

544 --
lim™
;

545 if(
asciiBy‹s
[0x80]!=
¥ªCÚd™iÚ
) {

546 
lim™0
=
lim™
;

551 
ušt8_t
 
t1
, 
t2
, 
t3
;

553 
s
<
lim™
) {

554 
b
=*
s
;

555 if(
b
<0xc0) {

557 if(
¥ªCÚd™iÚ
) {

559 if(!
asciiBy‹s
[
b
]) {

560  
s
;

561 } if(++
s
==
lim™
) {

562  
lim™0
;

564 
b
=*
s
;

565 } 
b
<0xc0);

568 if(
asciiBy‹s
[
b
]) {

569  
s
;

570 } if(++
s
==
lim™
) {

571  
lim™0
;

573 
b
=*
s
;

574 } 
b
<0xc0);

577 ++
s
;

578 if(
b
>=0xe0) {

579 if(
b
<0xf0) {

581 (
t1
=(
ušt8_t
)(
s
[0]-0x80)) <= 0x3f &&

582 (
t2
=(
ušt8_t
)(
s
[1]-0x80)) <= 0x3f

584 
b
&=0xf;

585 
ušt32_t
 
twoB™s
=(
bmpBlockB™s
[
t1
]>>
b
)&0x10001;

586 if(
twoB™s
<=1) {

589 if(
twoB™s
!=(
ušt32_t
)
¥ªCÚd™iÚ
) {

590  
s
-1;

594 
UCh¬32
 
c
=(
b
<<12)|(
t1
<<6)|
t2
;

595 if(
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[
b
],†i¡4kS¹s[b+1]è!ğ
¥ªCÚd™iÚ
) {

596  
s
-1;

599 
s
+=2;

603 (
t1
=(
ušt8_t
)(
s
[0]-0x80)) <= 0x3f &&

604 (
t2
=(
ušt8_t
)(
s
[1]-0x80)) <= 0x3f &&

605 (
t3
=(
ušt8_t
)(
s
[2]-0x80)) <= 0x3f

608 
UCh¬32
 
c
=((UCh¬32)(
b
-0xf0)<<18)|((UCh¬32)
t1
<<12)|(
t2
<<6)|
t3
;

609 ifĞĞ(0x10000<=
c
 && c<=0x10ffff) ?

610 
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[0x10],†ist4kStarts[0x11]) :

611 
asciiBy‹s
[0x80]

612 è!ğ
¥ªCÚd™iÚ


614  
s
-1;

616 
s
+=3;

621 (
t1
=(
ušt8_t
)(*
s
-0x80)) <= 0x3f

623 if((
US‘S·nCÚd™iÚ
)((
bË7FF
[
t1
]&((
ušt32_t
)1<<(
b
&0x1f)))!=0è!ğ
¥ªCÚd™iÚ
) {

624  
s
-1;

626 ++
s
;

634 if(
asciiBy‹s
[0x80]!=
¥ªCÚd™iÚ
) {

635  
s
-1;

639  
lim™0
;

640 
	}
}

649 
št32_t


650 
	gBMPS‘
::
	$¥ªBackUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

651 if(
¥ªCÚd™iÚ
!=
USET_SPAN_NOT_CONTAINED
) {

652 
¥ªCÚd™iÚ
=
USET_SPAN_CONTAINED
;

655 
ušt8_t
 
b
;

658 
b
=
s
[--
Ëngth
];

659 if((
št8_t
)
b
>=0) {

661 if(
¥ªCÚd™iÚ
) {

663 if(!
asciiBy‹s
[
b
]) {

664  
Ëngth
+1;

665 } if(
Ëngth
==0) {

668 
b
=
s
[--
Ëngth
];

669 } (
št8_t
)
b
>=0);

672 if(
asciiBy‹s
[
b
]) {

673  
Ëngth
+1;

674 } if(
Ëngth
==0) {

677 
b
=
s
[--
Ëngth
];

678 } (
št8_t
)
b
>=0);

682 
št32_t
 
´ev
=
Ëngth
;

683 
UCh¬32
 
c
;

684 if(
b
<0xc0) {

686 
c
=
	`utf8_´evCh¬SaãBody
(
s
, 0, &
Ëngth
, 
b
, -1);

687 if(
c
<0) {

688 
c
=0xfffd;

692 
c
=0xfffd;

695 if(
c
<=0x7ff) {

696 if((
US‘S·nCÚd™iÚ
)((
bË7FF
[
c
&0x3f]&((
ušt32_t
)1<<(c>>6)))!=0è!ğ
¥ªCÚd™iÚ
) {

697  
´ev
+1;

699 } if(
c
<=0xffff) {

700 
Ëad
=
c
>>12;

701 
ušt32_t
 
twoB™s
=(
bmpBlockB™s
[(
c
>>6)&0x3f]>>
Ëad
)&0x10001;

702 if(
twoB™s
<=1) {

705 if(
twoB™s
!=(
ušt32_t
)
¥ªCÚd™iÚ
) {

706  
´ev
+1;

710 if(
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[
Ëad
],†i¡4kS¹s[Ëad+1]è!ğ
¥ªCÚd™iÚ
) {

711  
´ev
+1;

715 if(
	`cÚšsSlow
(
c
, 
li¡4kS¹s
[0x10],†i¡4kS¹s[0x11]è!ğ
¥ªCÚd™iÚ
) {

716  
´ev
+1;

719 } 
Ëngth
>0);

721 
	}
}

723 
	gU_NAMESPACE_END


	@bmpset.h

17 #iâdeà
__BMPSET_H__


18 
	#__BMPSET_H__


	)

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/uni£t.h
"

23 
U_NAMESPACE_BEGIN


35 şas 
	cBMPS‘
 : 
public
 
UMemÜy
 {

36 
public
:

37 
BMPS‘
(cÚ¡ 
št32_t
 *
·»ÁLi¡
, iÁ32_ˆ
·»ÁLi¡L’gth
);

38 
BMPS‘
(cÚ¡ BMPS‘ &
Ùh”BMPS‘
, cÚ¡ 
št32_t
 *
ÃwP¬’tLi¡
, iÁ32_ˆ
ÃwP¬’tLi¡L’gth
);

39 
	mvœtu®
 ~
BMPS‘
();

41 
vœtu®
 
UBoŞ
 
	$cÚšs
(
UCh¬32
 
c
) const;

48 cÚ¡ 
UCh¬
 *
	$¥ª
(cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
lim™
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

55 cÚ¡ 
UCh¬
 *
	$¥ªBack
(cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
lim™
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

62 cÚ¡ 
ušt8_t
 *
	$¥ªUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

69 
št32_t
 
	$¥ªBackUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

71 
´iv©e
:

72 
	`š™B™s
();

73 
	`ov”rideIÎeg®
();

92 
št32_t
 
	$fšdCodePošt
(
UCh¬32
 
c
, 
št32_t
 
lo
, iÁ32_ˆ
hi
) const;

94 
šlše
 
UBoŞ
 
	$cÚšsSlow
(
UCh¬32
 
c
, 
št32_t
 
lo
, iÁ32_ˆ
hi
) const;

102 
UBoŞ
 
asciiBy‹s
[0xc0];

116 
ušt32_t
 
bË7FF
[64];

134 
ušt32_t
 
bmpBlockB™s
[64];

144 
št32_t
 
li¡4kS¹s
[18];

151 cÚ¡ 
št32_t
 *
li¡
;

152 
št32_t
 
li¡L’gth
;

155 
šlše
 
UBoŞ
 
BMPS‘
::
	$cÚšsSlow
(
UCh¬32
 
c
, 
št32_t
 
lo
, iÁ32_ˆ
hi
) const {

156  (
UBoŞ
)(
	`fšdCodePošt
(
c
, 
lo
, 
hi
) & 1);

157 
	}
}

159 
	gU_NAMESPACE_END


	@brkeng.cpp

8 
	~"unicode/uty³s.h
"

10 #ià!
UCONFIG_NO_BREAK_ITERATION


12 
	~"brk’g.h
"

13 
	~"diùbe.h
"

14 
	~"Œ›diù.h
"

15 
	~"unicode/uch¬.h
"

16 
	~"unicode/uni£t.h
"

17 
	~"unicode/ch¬™”.h
"

18 
	~"unicode/u»s.h
"

19 
	~"unicode/ud©a.h
"

20 
	~"unicode/put.h
"

21 
	~"unicode/u¡ršg.h
"

22 
	~"unicode/usüt.h
"

23 
	~"uveùÜ.h
"

24 
	~"umu‹x.h
"

25 
	~"u»simp.h
"

26 
	~"ubrkim¶.h
"

28 
U_NAMESPACE_BEGIN


34 
	gLªguageB»akEngše
::
	$LªguageB»akEngše
() {

35 
	}
}

37 
LªguageB»akEngše
::~
	$LªguageB»akEngše
() {

38 
	}
}

44 
LªguageB»akFaùÜy
::
	$LªguageB»akFaùÜy
() {

45 
	}
}

47 
LªguageB»akFaùÜy
::~
	$LªguageB»akFaùÜy
() {

48 
	}
}

54 
UnhªdËdEngše
::
	$UnhªdËdEngše
(
UE¼ÜCode
 & ) {

55 
št32_t
 
i
 = 0; i < (št32_t)((
fHªdËd
)/(fHandled[0])); ++i) {

56 
fHªdËd
[
i
] = 0;

58 
	}
}

60 
	gUnhªdËdEngše
::~
	$UnhªdËdEngše
() {

61 
št32_t
 
i
 = 0; i < (št32_t)((
fHªdËd
)/(fHandled[0])); ++i) {

62 ià(
fHªdËd
[
i
] != 0) {

63 
d–‘e
 
fHªdËd
[
i
];

66 
	}
}

68 
UBoŞ


69 
	gUnhªdËdEngše
::
	$hªdËs
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
) const {

70  (
b»akTy³
 >ğ0 && b»akTy³ < (
št32_t
)((
fHªdËd
)/(fHandled[0]))

71 && 
fHªdËd
[
b»akTy³
] !ğ0 && fHªdËd[b»akTy³]->
	`cÚšs
(
c
));

72 
	}
}

74 
št32_t


75 
	gUnhªdËdEngše
::
	$fšdB»aks
Ğ
UText
 *
‹xt
,

76 
št32_t
 
¡¬tPos
,

77 
št32_t
 
’dPos
,

78 
UBoŞ
 
»v”£
,

79 
št32_t
 
b»akTy³
,

80 
USck
 & ) const {

81 ià(
b»akTy³
 >ğ0 && b»akTy³ < (
št32_t
)((
fHªdËd
)/(fHandled[0]))) {

82 
UCh¬32
 
c
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

83 ià(
»v”£
) {

84 (
št32_t
)
	`u‹xt_g‘N©iveIndex
(
‹xt
è> 
¡¬tPos
 && 
fHªdËd
[
b»akTy³
]->
	`cÚšs
(
c
)) {

85 
c
 = 
	`u‹xt_´evious32
(
‹xt
);

89 (
št32_t
)
	`u‹xt_g‘N©iveIndex
(
‹xt
è< 
’dPos
 && 
fHªdËd
[
b»akTy³
]->
	`cÚšs
(
c
)) {

90 
	`u‹xt_Ãxt32
(
‹xt
);

91 
c
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

96 
	}
}

99 
	gUnhªdËdEngše
::
	$hªdËCh¬aù”
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
) {

100 ià(
b»akTy³
 >ğ0 && b»akTy³ < (
št32_t
)((
fHªdËd
)/(fHandled[0]))) {

101 ià(
fHªdËd
[
b»akTy³
] == 0) {

102 
fHªdËd
[
b»akTy³
] = 
Ãw
 
	`UnicodeS‘
();

103 ià(
fHªdËd
[
b»akTy³
] == 0) {

107 ià(!
fHªdËd
[
b»akTy³
]->
	`cÚšs
(
c
)) {

108 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

110 
št32_t
 
süt
 = 
	`u_g‘IÁPrİ”tyV®ue
(
c
, 
UCHAR_SCRIPT
);

111 
fHªdËd
[
b»akTy³
]->
	`­¶yIÁPrİ”tyV®ue
(
UCHAR_SCRIPT
, 
süt
, 
¡©us
);

114 
	}
}

120 
	gICULªguageB»akFaùÜy
::
	$ICULªguageB»akFaùÜy
(
UE¼ÜCode
 & ) {

121 
fEngšes
 = 0;

122 
	}
}

124 
	gICULªguageB»akFaùÜy
::~
	$ICULªguageB»akFaùÜy
() {

125 ià(
fEngšes
 != 0) {

126 
d–‘e
 
fEngšes
;

128 
	}
}

130 
U_NAMESPACE_END


131 
U_CDECL_BEGIN


132 
U_CALLCONV
 
	$_d–‘eEngše
(*
obj
) {

133 
	`d–‘e
 (cÚ¡ 
U_NAMESPACE_QUALIFIER
 
LªguageB»akEngše
 *è
obj
;

134 
	}
}

135 
U_CDECL_END


136 
U_NAMESPACE_BEGIN


138 cÚ¡ 
LªguageB»akEngše
 *

139 
	gICULªguageB»akFaùÜy
::
	$g‘EngšeFÜ
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
) {

140 
UBoŞ
 
ÃedsIn™
;

141 
št32_t
 
i
;

142 cÚ¡ 
LªguageB»akEngše
 *
lbe
 = 
NULL
;

143 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

148 
	`umtx_lock
(
NULL
);

149 
ÃedsIn™
 = (
UBoŞ
)(
fEngšes
 =ğ
NULL
);

150 ià(!
ÃedsIn™
) {

151 
i
 = 
fEngšes
->
	`size
();

152 --
i
 >= 0) {

153 
lbe
 = (cÚ¡ 
LªguageB»akEngše
 *)(
fEngšes
->
	`–em’tAt
(
i
));

154 ià(
lbe
 !ğ
NULL
 &&†be->
	`hªdËs
(
c
, 
b»akTy³
)) {

157 
lbe
 = 
NULL
;

160 
	`umtx_uÆock
(
NULL
);

162 ià(
lbe
 !ğ
NULL
) {

163  
lbe
;

166 ià(
ÃedsIn™
) {

167 
USck
 *
’gšes
 = 
Ãw
 
	`USck
(
_d–‘eEngše
, 
NULL
, 
¡©us
);

168 ià(
	`U_SUCCESS
(
¡©us
è&& 
’gšes
 =ğ
NULL
) {

169 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

171 ià(
	`U_FAILURE
(
¡©us
)) {

172 
d–‘e
 
’gšes
;

173 
’gšes
 = 
NULL
;

176 
	`umtx_lock
(
NULL
);

177 ià(
fEngšes
 =ğ
NULL
) {

178 
fEngšes
 = 
’gšes
;

179 
’gšes
 = 
NULL
;

181 
	`umtx_uÆock
(
NULL
);

182 
d–‘e
 
’gšes
;

186 ià(
fEngšes
 =ğ
NULL
) {

187  
NULL
;

192 cÚ¡ 
LªguageB»akEngše
 *
Ãwlbe
 = 
	`lßdEngšeFÜ
(
c
, 
b»akTy³
);

196 
	`umtx_lock
(
NULL
);

197 
i
 = 
fEngšes
->
	`size
();

198 --
i
 >= 0) {

199 
lbe
 = (cÚ¡ 
LªguageB»akEngše
 *)(
fEngšes
->
	`–em’tAt
(
i
));

200 ià(
lbe
 !ğ
NULL
 &&†be->
	`hªdËs
(
c
, 
b»akTy³
)) {

203 
lbe
 = 
NULL
;

205 ià(
lbe
 =ğ
NULL
 && 
Ãwlbe
 != NULL) {

206 
fEngšes
->
	`push
((*)
Ãwlbe
, 
¡©us
);

207 
lbe
 = 
Ãwlbe
;

208 
Ãwlbe
 = 
NULL
;

210 
	`umtx_uÆock
(
NULL
);

212 
d–‘e
 
Ãwlbe
;

214  
lbe
;

215 
	}
}

217 cÚ¡ 
LªguageB»akEngše
 *

218 
	gICULªguageB»akFaùÜy
::
	$lßdEngšeFÜ
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
) {

219 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

220 
USütCode
 
code
 = 
	`usüt_g‘Süt
(
c
, &
¡©us
);

221 ià(
	`U_SUCCESS
(
¡©us
)) {

222 cÚ¡ 
Com·ùTr›DiùiÚ¬y
 *
diù
 = 
	`lßdDiùiÚ¬yFÜ
(
code
, 
b»akTy³
);

223 ià(
diù
 !ğ
NULL
) {

224 cÚ¡ 
LªguageB»akEngše
 *
’gše
 = 
NULL
;

225 
code
) {

226 
USCRIPT_THAI
:

227 
’gše
 = 
Ãw
 
	`ThaiB»akEngše
(
diù
, 
¡©us
);

232 ià(
’gše
 =ğ
NULL
) {

233 
d–‘e
 
diù
;

235 ià(
	`U_FAILURE
(
¡©us
)) {

236 
d–‘e
 
’gše
;

237 
’gše
 = 
NULL
;

239  
’gše
;

242  
NULL
;

243 
	}
}

245 cÚ¡ 
Com·ùTr›DiùiÚ¬y
 *

246 
	gICULªguageB»akFaùÜy
::
	$lßdDiùiÚ¬yFÜ
(
USütCode
 
süt
, 
št32_t
 ) {

247 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

249 
diùnbuff
[256];

250 
ext
[4]={'\0'};

252 
UResourûBundË
 *
b
 = 
	`u»s_İ’
(
U_ICUDATA_BRKITR
, "", &
¡©us
);

253 
b
 = 
	`u»s_g‘ByKeyW™hF®lback
(b, "diùiÚ¬›s", b, &
¡©us
);

254 
b
 = 
	`u»s_g‘ByKeyW™hF®lback
(b, 
	`usüt_g‘ShÜtName
(
süt
), b, &
¡©us
);

255 
št32_t
 
diùÆ’gth
 = 0;

256 cÚ¡ 
UCh¬
 *
diùâame
 = 
	`u»s_g‘SŒšg
(
b
, &
diùÆ’gth
, &
¡©us
);

257 ià(
	`U_SUCCESS
(
¡©us
è&& (
size_t
)
diùÆ’gth
 >ğ(
diùnbuff
)) {

258 
diùÆ’gth
 = 0;

259 
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

261 ià(
	`U_SUCCESS
(
¡©us
è&& 
diùâame
) {

262 
UCh¬
* 
extS¹
=
	`u_¡rchr
(
diùâame
, 0x002e);

263 
Ën
 = 0;

264 if(
extS¹
!=
NULL
){

265 
Ën
 = ()(
extS¹
-
diùâame
);

266 
	`u_UCh¬sToCh¬s
(
extS¹
+1, 
ext
, (ext));

267 
	`u_UCh¬sToCh¬s
(
diùâame
, 
diùnbuff
, 
Ën
);

269 
diùnbuff
[
Ën
]=0;

271 
	`u»s_şo£
(
b
);

272 
UD©aMemÜy
 *
fe
 = 
	`ud©a_İ’
(
U_ICUDATA_BRKITR
, 
ext
, 
diùnbuff
, &
¡©us
);

273 ià(
	`U_SUCCESS
(
¡©us
)) {

274 cÚ¡ 
Com·ùTr›DiùiÚ¬y
 *
diù
 = 
Ãw
 
	`Com·ùTr›DiùiÚ¬y
(

275 
fe
, 
¡©us
);

276 ià(
	`U_SUCCESS
(
¡©us
è&& 
diù
 =ğ
NULL
) {

277 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

279 ià(
	`U_FAILURE
(
¡©us
)) {

280 
d–‘e
 
diù
;

281 
diù
 = 
NULL
;

283  
diù
;

285  
NULL
;

286 
	}
}

288 
	gU_NAMESPACE_END


	@brkeng.h

8 #iâdeà
BRKENG_H


9 
	#BRKENG_H


	)

11 
	~"unicode/uty³s.h
"

12 
	~"unicode/uobjeù.h
"

13 
	~"unicode/u‹xt.h
"

14 
	~"unicode/usüt.h
"

16 
U_NAMESPACE_BEGIN


18 
şass
 
	gUnicodeS‘
;

19 
şass
 
	gUSck
;

20 
şass
 
	gCom·ùTr›DiùiÚ¬y
;

35 şas 
	cLªguageB»akEngše
 : 
public
 
UMemÜy
 {

36 
public
:

42 
LªguageB»akEngše
();

47 
	mvœtu®
 ~
LªguageB»akEngše
();

58 
vœtu®
 
UBoŞ
 
	$hªdËs
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
) const = 0;

74 
vœtu®
 
št32_t
 
	$fšdB»aks
Ğ
UText
 *
‹xt
,

75 
št32_t
 
¡¬tPos
,

76 
št32_t
 
’dPos
,

77 
UBoŞ
 
»v”£
,

78 
št32_t
 
b»akTy³
,

79 
USck
 &
foundB»aks
 ) const = 0;

106 şas 
	cLªguageB»akFaùÜy
 : 
public
 
UMemÜy
 {

107 
public
:

113 
	`LªguageB»akFaùÜy
();

118 
vœtu®
 ~
	`LªguageB»akFaùÜy
();

132 
vœtu®
 cÚ¡ 
LªguageB»akEngše
 *
	`g‘EngšeFÜ
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
) = 0;

151 şas 
	cUnhªdËdEngše
 : 
public
 
LªguageB»akEngše
 {

152 
´iv©e
:

159 
UnicodeS‘
 *
fHªdËd
[4];

161 
public
:

167 
	`UnhªdËdEngše
(
UE¼ÜCode
 &
¡©us
);

172 
vœtu®
 ~
	`UnhªdËdEngše
();

183 
vœtu®
 
UBoŞ
 
	$hªdËs
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
) const;

199 
vœtu®
 
št32_t
 
	$fšdB»aks
Ğ
UText
 *
‹xt
,

200 
št32_t
 
¡¬tPos
,

201 
št32_t
 
’dPos
,

202 
UBoŞ
 
»v”£
,

203 
št32_t
 
b»akTy³
,

204 
USck
 &
foundB»aks
 ) const;

212 
vœtu®
 
	`hªdËCh¬aù”
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
);

225 şas 
	cICULªguageB»akFaùÜy
 : 
public
 
LªguageB»akFaùÜy
 {

226 
´iv©e
:

233 
USck
 *
fEngšes
;

235 
public
:

241 
	`ICULªguageB»akFaùÜy
(
UE¼ÜCode
 &
¡©us
);

246 
vœtu®
 ~
	`ICULªguageB»akFaùÜy
();

260 
vœtu®
 cÚ¡ 
LªguageB»akEngše
 *
	`g‘EngšeFÜ
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
);

262 
´Ùeùed
:

274 
vœtu®
 cÚ¡ 
LªguageB»akEngše
 *
	`lßdEngšeFÜ
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
);

285 
vœtu®
 cÚ¡ 
Com·ùTr›DiùiÚ¬y
 *
	`lßdDiùiÚ¬yFÜ
(
USütCode
 
süt
, 
št32_t
 
b»akTy³
);

289 
U_NAMESPACE_END


	@brkiter.cpp

21 
	~"unicode/uty³s.h
"

23 #ià!
UCONFIG_NO_BREAK_ITERATION


25 
	~"unicode/rbbi.h
"

26 
	~"unicode/brk™”.h
"

27 
	~"unicode/ud©a.h
"

28 
	~"unicode/u»s.h
"

29 
	~"unicode/u¡ršg.h
"

30 
	~"uşn_cmn.h
"

31 
	~"c¡ršg.h
"

32 
	~"umu‹x.h
"

33 
	~"£rvloc.h
"

34 
	~"locba£d.h
"

35 
	~"u»simp.h
"

36 
	~"uas£¹.h
"

37 
	~"ubrkim¶.h
"

46 
U_NAMESPACE_BEGIN


50 
B»akI‹¿tÜ
*

51 
	gB»akI‹¿tÜ
::
	$budIn¡ªû
(cÚ¡ 
LoÿË
& 
loc
, cÚ¡ *
ty³
, 
št32_t
 
kšd
, 
UE¼ÜCode
 &
¡©us
)

53 
âbuff
[256];

54 
ext
[4]={'\0'};

55 
aùu®LoÿË
[
ULOC_FULLNAME_CAPACITY
];

56 
št32_t
 
size
;

57 cÚ¡ 
UCh¬
* 
brkâame
 = 
NULL
;

58 
UResourûBundË
 
brkRuËsSck
;

59 
UResourûBundË
 
brkNameSck
;

60 
UResourûBundË
 *
brkRuËs
 = &
brkRuËsSck
;

61 
UResourûBundË
 *
brkName
 = &
brkNameSck
;

62 
RuËBa£dB»akI‹¿tÜ
 *
»suÉ
 = 
NULL
;

64 ià(
	`U_FAILURE
(
¡©us
))

65  
NULL
;

67 
	`u»s_š™SckObjeù
(
brkRuËs
);

68 
	`u»s_š™SckObjeù
(
brkName
);

71 
UResourûBundË
 *
b
 = 
	`u»s_İ’
(
U_ICUDATA_BRKITR
, 
loc
.
	`g‘Name
(), &
¡©us
);

74 if(
¡©us
==
U_USING_DEFAULT_WARNING
){

75 
¡©us
=
U_ZERO_ERROR
;

76 
	`u»s_İ’FlIn
(
b
, 
U_ICUDATA_BRKITR
, "", &
¡©us
);

80 ià(
	`U_SUCCESS
(
¡©us
)) {

81 
brkRuËs
 = 
	`u»s_g‘ByKeyW™hF®lback
(
b
, "bound¬›s", brkRuËs, &
¡©us
);

83 
brkName
 = 
	`u»s_g‘ByKeyW™hF®lback
(
brkRuËs
, 
ty³
, brkName, &
¡©us
);

85 
brkâame
 = 
	`u»s_g‘SŒšg
(
brkName
, &
size
, &
¡©us
);

86 
	`U_ASSERT
((
size_t
)
size
<(
âbuff
));

87 ià((
size_t
)
size
>=(
âbuff
)) {

88 
size
=0;

89 ià(
	`U_SUCCESS
(
¡©us
)) {

90 
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

95 ià(
	`U_SUCCESS
(
¡©us
è&& 
brkâame
) {

96 
	`u´v_¡ºıy
(
aùu®LoÿË
,

97 
	`u»s_g‘LoÿË
(
brkName
, &
¡©us
),

98 (
aùu®LoÿË
)/(actualLocale[0]));

100 
UCh¬
* 
extS¹
=
	`u_¡rchr
(
brkâame
, 0x002e);

101 
Ën
 = 0;

102 if(
extS¹
!=
NULL
){

103 
Ën
 = ()(
extS¹
-
brkâame
);

104 
	`u_UCh¬sToCh¬s
(
extS¹
+1, 
ext
, (ext));

105 
	`u_UCh¬sToCh¬s
(
brkâame
, 
âbuff
, 
Ën
);

107 
âbuff
[
Ën
]=0;

111 
	`u»s_şo£
(
brkRuËs
);

112 
	`u»s_şo£
(
brkName
);

114 
UD©aMemÜy
* 
fe
 = 
	`ud©a_İ’
(
U_ICUDATA_BRKITR
, 
ext
, 
âbuff
, &
¡©us
);

115 ià(
	`U_FAILURE
(
¡©us
)) {

116 
	`u»s_şo£
(
b
);

117  
NULL
;

121 
»suÉ
 = 
Ãw
 
	`RuËBa£dB»akI‹¿tÜ
(
fe
, 
¡©us
);

124 ià(
	`U_SUCCESS
(
¡©us
è&& 
»suÉ
 !ğ
NULL
) {

125 
	`U_LOCALE_BASED
(
locBa£d
, *(
B»akI‹¿tÜ
*)
»suÉ
);

126 
locBa£d
.
	`£tLoÿËIDs
(
	`u»s_g‘LoÿËByTy³
(
b
, 
ULOC_VALID_LOCALE
, &
¡©us
), 
aùu®LoÿË
);

127 
»suÉ
->
	`£tB»akTy³
(
kšd
);

130 
	`u»s_şo£
(
b
);

132 ià(
	`U_FAILURE
(
¡©us
è&& 
»suÉ
 !ğ
NULL
) {

133 
d–‘e
 
»suÉ
;

134  
NULL
;

137 ià(
»suÉ
 =ğ
NULL
) {

138 
	`ud©a_şo£
(
fe
);

139 ià(
	`U_SUCCESS
(
¡©us
)) {

140 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

144  
»suÉ
;

145 
	}
}

148 
B»akI‹¿tÜ
* 
U_EXPORT2


149 
	gB»akI‹¿tÜ
::
	$ü—‹WÜdIn¡ªû
(cÚ¡ 
LoÿË
& 
key
, 
UE¼ÜCode
& 
¡©us
)

151  
	`ü—‹In¡ªû
(
key
, 
UBRK_WORD
, 
¡©us
);

152 
	}
}

157 
B»akI‹¿tÜ
* 
U_EXPORT2


158 
	gB»akI‹¿tÜ
::
	$ü—‹LšeIn¡ªû
(cÚ¡ 
LoÿË
& 
key
, 
UE¼ÜCode
& 
¡©us
)

160  
	`ü—‹In¡ªû
(
key
, 
UBRK_LINE
, 
¡©us
);

161 
	}
}

166 
B»akI‹¿tÜ
* 
U_EXPORT2


167 
	gB»akI‹¿tÜ
::
	$ü—‹Ch¬aù”In¡ªû
(cÚ¡ 
LoÿË
& 
key
, 
UE¼ÜCode
& 
¡©us
)

169  
	`ü—‹In¡ªû
(
key
, 
UBRK_CHARACTER
, 
¡©us
);

170 
	}
}

175 
B»akI‹¿tÜ
* 
U_EXPORT2


176 
	gB»akI‹¿tÜ
::
	$ü—‹S’‹nûIn¡ªû
(cÚ¡ 
LoÿË
& 
key
, 
UE¼ÜCode
& 
¡©us
)

178  
	`ü—‹In¡ªû
(
key
, 
UBRK_SENTENCE
, 
¡©us
);

179 
	}
}

184 
B»akI‹¿tÜ
* 
U_EXPORT2


185 
	gB»akI‹¿tÜ
::
	$ü—‹T™ËIn¡ªû
(cÚ¡ 
LoÿË
& 
key
, 
UE¼ÜCode
& 
¡©us
)

187  
	`ü—‹In¡ªû
(
key
, 
UBRK_TITLE
, 
¡©us
);

188 
	}
}

193 cÚ¡ 
LoÿË
* 
U_EXPORT2


194 
	gB»akI‹¿tÜ
::
	$g‘AvaabËLoÿËs
(
št32_t
& 
couÁ
)

196  
LoÿË
::
	`g‘AvaabËLoÿËs
(
couÁ
);

197 
	}
}

205 
	gB»akI‹¿tÜ
::
	$B»akI‹¿tÜ
()

207 
fBufãrClÚe
 = 
FALSE
;

208 *
v®idLoÿË
 = *
aùu®LoÿË
 = 0;

209 
	}
}

211 
	gB»akI‹¿tÜ
::~
	$B»akI‹¿tÜ
()

213 
	}
}

220 #ià!
UCONFIG_NO_SERVICE


224 şas 
	cICUB»akI‹¿tÜFaùÜy
 : 
public
 
ICUResourûBundËFaùÜy
 {

225 
´Ùeùed
:

226 
vœtu®
 
UObjeù
* 
	$hªdËC»©e
(cÚ¡ 
LoÿË
& 
loc
, 
št32_t
 
kšd
, cÚ¡ 
ICUS”viû
* , 
UE¼ÜCode
& 
¡©us
) const {

227  
B»akI‹¿tÜ
::
	`makeIn¡ªû
(
loc
, 
kšd
, 
¡©us
);

229 
	}
};

233 şas 
	cICUB»akI‹¿tÜS”viû
 : 
public
 
ICULoÿËS”viû
 {

234 
public
:

235 
	$ICUB»akI‹¿tÜS”viû
()

236 : 
	`ICULoÿËS”viû
(
	`UNICODE_STRING
("Break Iterator", 14))

238 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

239 
	`»gi¡”FaùÜy
(
Ãw
 
	`ICUB»akI‹¿tÜFaùÜy
(), 
¡©us
);

242 
vœtu®
 
UObjeù
* 
	$şÚeIn¡ªû
(
UObjeù
* 
š¡ªû
) const {

243  ((
B»akI‹¿tÜ
*)
š¡ªû
)->
	`şÚe
();

244 
	}
}

246 
vœtu®
 
UObjeù
* 
	$hªdËDeçuÉ
(cÚ¡ 
ICUS”viûKey
& 
key
, 
UnicodeSŒšg
* , 
UE¼ÜCode
& 
¡©us
) const {

247 
LoÿËKey
& 
lkey
 = (LoÿËKey&)
key
;

248 
št32_t
 
kšd
 = 
lkey
.
	`kšd
();

249 
LoÿË
 
loc
;

250 
lkey
.
	`cu¼’tLoÿË
(
loc
);

251  
B»akI‹¿tÜ
::
	`makeIn¡ªû
(
loc
, 
kšd
, 
¡©us
);

252 
	}
}

254 
vœtu®
 
UBoŞ
 
	$isDeçuÉ
() const {

255  
	`couÁFaùÜ›s
() == 1;

256 
	}
}

261 
U_NAMESPACE_END


265 
U_NAMESPACE_QUALIFIER
 
ICULoÿËS”viû
* 
	ggS”viû
 = 
NULL
;

270 
U_CDECL_BEGIN


271 
UBoŞ
 
U_CALLCONV
 
	$b»ak™”©Ü_ş—nup
() {

272 #ià!
UCONFIG_NO_SERVICE


273 ià(
gS”viû
) {

274 
d–‘e
 
gS”viû
;

275 
gS”viû
 = 
NULL
;

278  
TRUE
;

279 
	}
}

280 
U_CDECL_END


281 
U_NAMESPACE_BEGIN


283 
ICULoÿËS”viû
*

284 
	$g‘S”viû
()

286 
UBoŞ
 
ÃedsIn™
;

287 
	`UMTX_CHECK
(
NULL
, (
UBoŞ
)(
gS”viû
 =ğNULL), 
ÃedsIn™
);

289 ià(
ÃedsIn™
) {

290 
ICULoÿËS”viû
 *
tS”viû
 = 
Ãw
 
	`ICUB»akI‹¿tÜS”viû
();

291 
	`umtx_lock
(
NULL
);

292 ià(
gS”viû
 =ğ
NULL
) {

293 
gS”viû
 = 
tS”viû
;

294 
tS”viû
 = 
NULL
;

295 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_BREAKITERATOR
, 
b»ak™”©Ü_ş—nup
);

297 
	`umtx_uÆock
(
NULL
);

298 
d–‘e
 
tS”viû
;

300  
gS”viû
;

301 
	}
}

305 
šlše
 
UBoŞ


306 
	$hasS”viû
()

308 
UBoŞ
 
»tV®
;

309 
	`UMTX_CHECK
(
NULL
, 
gS”viû
 !ğNULL, 
»tV®
);

310  
»tV®
;

311 
	}
}

315 
URegi¡ryKey
 
U_EXPORT2


316 
	gB»akI‹¿tÜ
::
	$»gi¡”In¡ªû
(
B»akI‹¿tÜ
* 
toAdİt
, cÚ¡ 
LoÿË
& 
loÿË
, 
UB»akI‹¿tÜTy³
 
kšd
, 
UE¼ÜCode
& 
¡©us
)

318 
ICULoÿËS”viû
 *
£rviû
 = 
	`g‘S”viû
();

319 ià(
£rviû
 =ğ
NULL
) {

320 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

321  
NULL
;

323  
£rviû
->
	`»gi¡”In¡ªû
(
toAdİt
, 
loÿË
, 
kšd
, 
¡©us
);

324 
	}
}

328 
UBoŞ
 
U_EXPORT2


329 
	gB»akI‹¿tÜ
::
	$uÄegi¡”
(
URegi¡ryKey
 
key
, 
UE¼ÜCode
& 
¡©us
)

331 ià(
	`U_SUCCESS
(
¡©us
)) {

332 ià(
	`hasS”viû
()) {

333  
gS”viû
->
	`uÄegi¡”
(
key
, 
¡©us
);

335 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

337  
FALSE
;

338 
	}
}

342 
SŒšgEnum”©iÚ
* 
U_EXPORT2


343 
	gB»akI‹¿tÜ
::
	$g‘AvaabËLoÿËs
()

345 
ICULoÿËS”viû
 *
£rviû
 = 
	`g‘S”viû
();

346 ià(
£rviû
 =ğ
NULL
) {

347  
NULL
;

349  
£rviû
->
	`g‘AvaabËLoÿËs
();

350 
	}
}

355 
B»akI‹¿tÜ
*

356 
	gB»akI‹¿tÜ
::
	$ü—‹In¡ªû
(cÚ¡ 
LoÿË
& 
loc
, 
št32_t
 
kšd
, 
UE¼ÜCode
& 
¡©us
)

358 ià(
	`U_FAILURE
(
¡©us
)) {

359  
NULL
;

362 #ià!
UCONFIG_NO_SERVICE


363 ià(
	`hasS”viû
()) {

364 
LoÿË
 
	`aùu®Loc
("");

365 
B»akI‹¿tÜ
 *
»suÉ
 = (B»akI‹¿tÜ*)
gS”viû
->
	`g‘
(
loc
, 
kšd
, &
aùu®Loc
, 
¡©us
);

376 ià(
	`U_SUCCESS
(
¡©us
è&& (
»suÉ
 !ğ
NULL
è&& *
aùu®Loc
.
	`g‘Name
() != 0) {

377 
	`U_LOCALE_BASED
(
locBa£d
, *
»suÉ
);

378 
locBa£d
.
	`£tLoÿËIDs
(
aùu®Loc
.
	`g‘Name
(),‡ctualLoc.getName());

380  
»suÉ
;

385  
	`makeIn¡ªû
(
loc
, 
kšd
, 
¡©us
);

387 
	}
}

391 
B»akI‹¿tÜ
*

392 
	gB»akI‹¿tÜ
::
	$makeIn¡ªû
(cÚ¡ 
LoÿË
& 
loc
, 
št32_t
 
kšd
, 
UE¼ÜCode
& 
¡©us
)

395 ià(
	`U_FAILURE
(
¡©us
)) {

396  
NULL
;

399 
B»akI‹¿tÜ
 *
»suÉ
 = 
NULL
;

400 
kšd
) {

401 
UBRK_CHARACTER
:

402 
»suÉ
 = 
B»akI‹¿tÜ
::
	`budIn¡ªû
(
loc
, "g¿pheme", 
kšd
, 
¡©us
);

404 
UBRK_WORD
:

405 
»suÉ
 = 
B»akI‹¿tÜ
::
	`budIn¡ªû
(
loc
, "wÜd", 
kšd
, 
¡©us
);

407 
UBRK_LINE
:

408 
»suÉ
 = 
B»akI‹¿tÜ
::
	`budIn¡ªû
(
loc
, "lše", 
kšd
, 
¡©us
);

410 
UBRK_SENTENCE
:

411 
»suÉ
 = 
B»akI‹¿tÜ
::
	`budIn¡ªû
(
loc
, "£Á’û", 
kšd
, 
¡©us
);

413 
UBRK_TITLE
:

414 
»suÉ
 = 
B»akI‹¿tÜ
::
	`budIn¡ªû
(
loc
, "t™Ë", 
kšd
, 
¡©us
);

417 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

420 ià(
	`U_FAILURE
(
¡©us
)) {

421  
NULL
;

424  
»suÉ
;

425 
	}
}

427 
LoÿË


428 
	gB»akI‹¿tÜ
::
	$g‘LoÿË
(
ULocD©aLoÿËTy³
 
ty³
, 
UE¼ÜCode
& 
¡©us
) const {

429 
	`U_LOCALE_BASED
(
locBa£d
, *
this
);

430  
locBa£d
.
	`g‘LoÿË
(
ty³
, 
¡©us
);

431 
	}
}

434 
	gB»akI‹¿tÜ
::
	$g‘LoÿËID
(
ULocD©aLoÿËTy³
 
ty³
, 
UE¼ÜCode
& 
¡©us
) const {

435 
	`U_LOCALE_BASED
(
locBa£d
, *
this
);

436  
locBa£d
.
	`g‘LoÿËID
(
ty³
, 
¡©us
);

437 
	}
}

439 
	gU_NAMESPACE_END


	@bytestream.cpp

7 
	~"unicode/uty³s.h
"

8 
	~"unicode/by‹¡»am.h
"

9 
	~"cmemÜy.h
"

11 
U_NAMESPACE_BEGIN


13 * 
	gBy‹Sšk
::
	$G‘Aµ’dBufãr
(
št32_t
 
mš_ÿ·c™y
,

14 
št32_t
 ,

15 * 
sü©ch
, 
št32_t
 
sü©ch_ÿ·c™y
,

16 
št32_t
* 
»suÉ_ÿ·c™y
) {

17 ià(
mš_ÿ·c™y
 < 1 || 
sü©ch_ÿ·c™y
 < min_capacity) {

18 *
»suÉ_ÿ·c™y
 = 0;

19  
NULL
;

21 *
»suÉ_ÿ·c™y
 = 
sü©ch_ÿ·c™y
;

22  
sü©ch
;

23 
	}
}

25 
	gBy‹Sšk
::
	$Flush
(è{
	}
}

27 
CheckedA¼ayBy‹Sšk
::
	$CheckedA¼ayBy‹Sšk
(* 
outbuf
, 
št32_t
 
ÿ·c™y
)

28 : 
	`outbuf_
(
outbuf
), 
	`ÿ·c™y_
(
ÿ·c™y
 < 0 ? 0 : capacity),

29 
	`size_
(0), 
	`­³nded_
(0), 
	$ov”æowed_
(
FALSE
) {

30 
	}
}

32 
	gCheckedA¼ayBy‹Sšk
& CheckedA¼ayBy‹Sšk::
	$Re£t
() {

33 
size_
 = 
­³nded_
 = 0;

34 
ov”æowed_
 = 
FALSE
;

35  *
this
;

36 
	}
}

38 
	gCheckedA¼ayBy‹Sšk
::
	$Aµ’d
(cÚ¡ * 
by‹s
, 
št32_t
 
n
) {

39 ià(
n
 <= 0) {

42 
­³nded_
 +ğ
n
;

43 
št32_t
 
avaabË
 = 
ÿ·c™y_
 - 
size_
;

44 ià(
n
 > 
avaabË
) {

45 
n
 = 
avaabË
;

46 
ov”æowed_
 = 
TRUE
;

48 ià(
n
 > 0 && 
by‹s
 !ğ(
outbuf_
 + 
size_
)) {

49 
	`u´v_memıy
(
outbuf_
 + 
size_
, 
by‹s
, 
n
);

51 
size_
 +ğ
n
;

52 
	}
}

54 * 
	gCheckedA¼ayBy‹Sšk
::
	$G‘Aµ’dBufãr
(
št32_t
 
mš_ÿ·c™y
,

55 
št32_t
 ,

56 * 
sü©ch
,

57 
št32_t
 
sü©ch_ÿ·c™y
,

58 
št32_t
* 
»suÉ_ÿ·c™y
) {

59 ià(
mš_ÿ·c™y
 < 1 || 
sü©ch_ÿ·c™y
 < min_capacity) {

60 *
»suÉ_ÿ·c™y
 = 0;

61  
NULL
;

63 
št32_t
 
avaabË
 = 
ÿ·c™y_
 - 
size_
;

64 ià(
avaabË
 >ğ
mš_ÿ·c™y
) {

65 *
»suÉ_ÿ·c™y
 = 
avaabË
;

66  
outbuf_
 + 
size_
;

68 *
»suÉ_ÿ·c™y
 = 
sü©ch_ÿ·c™y
;

69  
sü©ch
;

71 
	}
}

73 
	gU_NAMESPACE_END


	@caniter.cpp

8 
	~"unicode/uty³s.h
"

10 #ià!
UCONFIG_NO_NORMALIZATION


12 
	~"unicode/ÿn™”.h
"

13 
	~"unicode/nÜm®iz”2.h
"

14 
	~"unicode/uch¬.h
"

15 
	~"unicode/uni£t.h
"

16 
	~"unicode/u£t™”.h
"

17 
	~"unicode/u¡ršg.h
"

18 
	~"cmemÜy.h
"

19 
	~"hash.h
"

20 
	~"nÜm®iz”2im¶.h
"

58 
U_NAMESPACE_BEGIN


62 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
CªÚiÿlI‹¿tÜ
)

67 
CªÚiÿlI‹¿tÜ
::
	$CªÚiÿlI‹¿tÜ
(cÚ¡ 
UnicodeSŒšg
 &
sourûSŒ
, 
UE¼ÜCode
 &
¡©us
) :

68 
	`p›ûs
(
NULL
),

69 
	`p›ûs_Ëngth
(0),

70 
	`p›ûs_Ëngths
(
NULL
),

71 
	`cu¼’t
(
NULL
),

72 
	`cu¼’t_Ëngth
(0),

73 
	`nfd
(*
NÜm®iz”2FaùÜy
::
	`g‘NFDIn¡ªû
(
¡©us
)),

74 
	`nfcIm¶
(*
NÜm®iz”2FaùÜy
::
	$g‘NFCIm¶
(
¡©us
))

76 if(
	`U_SUCCESS
(
¡©us
è&& 
nfcIm¶
.
	`’su»CªÚI‹rD©a
(status)) {

77 
	`£tSourû
(
sourûSŒ
, 
¡©us
);

79 
	}
}

81 
	gCªÚiÿlI‹¿tÜ
::~
	$CªÚiÿlI‹¿tÜ
() {

82 
	`ş—nP›ûs
();

83 
	}
}

85 
	gCªÚiÿlI‹¿tÜ
::
	$ş—nP›ûs
() {

86 
št32_t
 
i
 = 0;

87 if(
p›ûs
 !ğ
NULL
) {

88 
i
 = 0; i < 
p›ûs_Ëngth
; i++) {

89 if(
p›ûs
[
i
] !ğ
NULL
) {

90 
d–‘e
[] 
p›ûs
[
i
];

93 
	`u´v_ä“
(
p›ûs
);

94 
p›ûs
 = 
NULL
;

95 
p›ûs_Ëngth
 = 0;

97 if(
p›ûs_Ëngths
 !ğ
NULL
) {

98 
	`u´v_ä“
(
p›ûs_Ëngths
);

99 
p›ûs_Ëngths
 = 
NULL
;

101 if(
cu¼’t
 !ğ
NULL
) {

102 
	`u´v_ä“
(
cu¼’t
);

103 
cu¼’t
 = 
NULL
;

104 
cu¼’t_Ëngth
 = 0;

106 
	}
}

111 
UnicodeSŒšg
 
	gCªÚiÿlI‹¿tÜ
::
	$g‘Sourû
() {

112  
sourû
;

113 
	}
}

118 
	gCªÚiÿlI‹¿tÜ
::
	$»£t
() {

119 
dÚe
 = 
FALSE
;

120 
i
 = 0; i < 
cu¼’t_Ëngth
; ++i) {

121 
cu¼’t
[
i
] = 0;

123 
	}
}

129 
UnicodeSŒšg
 
	gCªÚiÿlI‹¿tÜ
::
	$Ãxt
() {

130 
št32_t
 
i
 = 0;

132 ià(
dÚe
) {

133 
bufãr
.
	`£tToBogus
();

134  
bufãr
;

138 
bufãr
.
	`»move
();

142 
i
 = 0; i < 
p›ûs_Ëngth
; ++i) {

143 
bufãr
.
	`­³nd
(
p›ûs
[
i
][
cu¼’t
[i]]);

149 
i
 = 
cu¼’t_Ëngth
 - 1; ; --i) {

150 ià(
i
 < 0) {

151 
dÚe
 = 
TRUE
;

154 
cu¼’t
[
i
]++;

155 ià(
cu¼’t
[
i
] < 
p›ûs_Ëngths
[i]) ;

156 
cu¼’t
[
i
] = 0;

158  
bufãr
;

159 
	}
}

165 
	gCªÚiÿlI‹¿tÜ
::
	$£tSourû
(cÚ¡ 
UnicodeSŒšg
 &
ÃwSourû
, 
UE¼ÜCode
 &
¡©us
) {

166 
št32_t
 
li¡_Ëngth
 = 0;

167 
UCh¬32
 
ı
 = 0;

168 
št32_t
 
¡¬t
 = 0;

169 
št32_t
 
i
 = 0;

170 
UnicodeSŒšg
 *
li¡
 = 
NULL
;

172 
nfd
.
	`nÜm®ize
(
ÃwSourû
, 
sourû
, 
¡©us
);

173 if(
	`U_FAILURE
(
¡©us
)) {

176 
dÚe
 = 
FALSE
;

178 
	`ş—nP›ûs
();

181 ià(
ÃwSourû
.
	`Ëngth
() == 0) {

182 
p›ûs
 = (
UnicodeSŒšg
 **)
	`u´v_m®loc
((UnicodeString *));

183 
p›ûs_Ëngths
 = (
št32_t
*)
	`u´v_m®loc
(1 * (int32_t));

184 
p›ûs_Ëngth
 = 1;

185 
cu¼’t
 = (
št32_t
*)
	`u´v_m®loc
(1 * (int32_t));

186 
cu¼’t_Ëngth
 = 1;

187 ià(
p›ûs
 =ğ
NULL
 || 
p›ûs_Ëngths
 =ğNULL || 
cu¼’t
 == NULL) {

188 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

189 
CËªP¬tŸlIn™Ÿliz©iÚ
;

191 
cu¼’t
[0] = 0;

192 
p›ûs
[0] = 
Ãw
 
UnicodeSŒšg
[1];

193 
p›ûs_Ëngths
[0] = 1;

194 ià(
p›ûs
[0] == 0) {

195 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

196 
CËªP¬tŸlIn™Ÿliz©iÚ
;

202 
li¡
 = 
Ãw
 
UnicodeSŒšg
[
sourû
.
	`Ëngth
()];

203 ià(
li¡
 == 0) {

204 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

205 
CËªP¬tŸlIn™Ÿliz©iÚ
;

210 
i
 = 
	`UTF16_CHAR_LENGTH
(
sourû
.
	`ch¬32At
(0));

217 ; 
i
 < 
sourû
.
	`Ëngth
(); i +ğ
	`UTF16_CHAR_LENGTH
(
ı
)) {

218 
ı
 = 
sourû
.
	`ch¬32At
(
i
);

219 ià(
nfcIm¶
.
	`isCªÚSegm’tS¹”
(
ı
)) {

220 
sourû
.
	`exŒaù
(
¡¬t
, 
i
-¡¬t, 
li¡
[
li¡_Ëngth
++]);

221 
¡¬t
 = 
i
;

224 
sourû
.
	`exŒaù
(
¡¬t
, 
i
-¡¬t, 
li¡
[
li¡_Ëngth
++]);

228 
p›ûs
 = (
UnicodeSŒšg
 **)
	`u´v_m®loc
(
li¡_Ëngth
 * (UnicodeString *));

229 
p›ûs_Ëngth
 = 
li¡_Ëngth
;

230 
p›ûs_Ëngths
 = (
št32_t
*)
	`u´v_m®loc
(
li¡_Ëngth
 * (int32_t));

231 
cu¼’t
 = (
št32_t
*)
	`u´v_m®loc
(
li¡_Ëngth
 * (int32_t));

232 
cu¼’t_Ëngth
 = 
li¡_Ëngth
;

233 ià(
p›ûs
 =ğ
NULL
 || 
p›ûs_Ëngths
 =ğNULL || 
cu¼’t
 == NULL) {

234 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

235 
CËªP¬tŸlIn™Ÿliz©iÚ
;

238 
i
 = 0; i < 
cu¼’t_Ëngth
; i++) {

239 
cu¼’t
[
i
] = 0;

243 
i
 = 0; i < 
p›ûs_Ëngth
; ++i) {

245 
p›ûs
[
i
] = 
	`g‘Equiv®’ts
(
li¡
[i], 
p›ûs_Ëngths
[i], 
¡©us
);

248 
d–‘e
[] 
li¡
;

251 
CËªP¬tŸlIn™Ÿliz©iÚ
:

252 ià(
li¡
 !ğ
NULL
) {

253 
d–‘e
[] 
li¡
;

255 
	`ş—nP›ûs
();

256 
	}
}

264 
U_EXPORT2
 
	gCªÚiÿlI‹¿tÜ
::
	$³rmu‹
(
UnicodeSŒšg
 &
sourû
, 
UBoŞ
 
skZ”os
, 
HashbË
 *
»suÉ
, 
UE¼ÜCode
 &
¡©us
) {

265 if(
	`U_FAILURE
(
¡©us
)) {

269 
št32_t
 
i
 = 0;

274 ià(
sourû
.
	`Ëngth
(è<ğ2 && sourû.
	`couÁCh¬32
() <= 1) {

275 
UnicodeSŒšg
 *
toPut
 = 
Ãw
 
	`UnicodeSŒšg
(
sourû
);

277 ià(
toPut
 == 0) {

278 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

281 
»suÉ
->
	`put
(
sourû
, 
toPut
, 
¡©us
);

286 
UCh¬32
 
ı
;

287 
HashbË
 
	`sub³rmu‹
(
¡©us
);

288 if(
	`U_FAILURE
(
¡©us
)) {

291 
sub³rmu‹
.
	`£tV®ueD–‘”
(
uhash_d–‘eUnicodeSŒšg
);

293 
i
 = 0; i < 
sourû
.
	`Ëngth
(); i +ğ
	`UTF16_CHAR_LENGTH
(
ı
)) {

294 
ı
 = 
sourû
.
	`ch¬32At
(
i
);

295 cÚ¡ 
UHashEËm’t
 *
Ã
 = 
NULL
;

296 
št32_t
 
–
 = -1;

297 
UnicodeSŒšg
 
subP”mu‹SŒšg
 = 
sourû
;

302 ià(
skZ”os
 && 
i
 !ğ0 && 
	`u_g‘CombššgCÏss
(
ı
) == 0) {

307 
sub³rmu‹
.
	`»moveAÎ
();

311 
	`³rmu‹
(
subP”mu‹SŒšg
.
	`»¶aû
(
i
, 
	`UTF16_CHAR_LENGTH
(
ı
), 
NULL
, 0), 
skZ”os
, &
sub³rmu‹
, 
¡©us
);

313 if(
	`U_FAILURE
(
¡©us
)) {

320 
Ã
 = 
sub³rmu‹
.
	`ÃxtEËm’t
(
–
);

321 
Ã
 !ğ
NULL
) {

322 
UnicodeSŒšg
 *
³rmRes
 = (UnicodeSŒšg *)(
Ã
->
v®ue
.
poš‹r
);

323 
UnicodeSŒšg
 *
chSŒ
 = 
Ãw
 
	`UnicodeSŒšg
(
ı
);

325 ià(
chSŒ
 =ğ
NULL
) {

326 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

329 
chSŒ
->
	`­³nd
(*
³rmRes
);

331 
»suÉ
->
	`put
(*
chSŒ
, chSŒ, 
¡©us
);

332 
Ã
 = 
sub³rmu‹
.
	`ÃxtEËm’t
(
–
);

336 
	}
}

341 
UnicodeSŒšg
* 
	gCªÚiÿlI‹¿tÜ
::
	$g‘Equiv®’ts
(cÚ¡ 
UnicodeSŒšg
 &
£gm’t
, 
št32_t
 &
»suÉ_Ën
, 
UE¼ÜCode
 &
¡©us
) {

342 
HashbË
 
	`»suÉ
(
¡©us
);

343 
HashbË
 
	`³rmutiÚs
(
¡©us
);

344 
HashbË
 
	`basic
(
¡©us
);

345 ià(
	`U_FAILURE
(
¡©us
)) {

348 
»suÉ
.
	`£tV®ueD–‘”
(
uhash_d–‘eUnicodeSŒšg
);

349 
³rmutiÚs
.
	`£tV®ueD–‘”
(
uhash_d–‘eUnicodeSŒšg
);

350 
basic
.
	`£tV®ueD–‘”
(
uhash_d–‘eUnicodeSŒšg
);

352 
UCh¬
 
USeg
[256];

353 
št32_t
 
£gL’
 = 
£gm’t
.
	`exŒaù
(
USeg
, 256, 
¡©us
);

354 
	`g‘Equiv®’ts2
(&
basic
, 
USeg
, 
£gL’
, 
¡©us
);

360 cÚ¡ 
UHashEËm’t
 *
Ã
 = 
NULL
;

361 
št32_t
 
–
 = -1;

363 
Ã
 = 
basic
.
	`ÃxtEËm’t
(
–
);

365 
Ã
 !ğ
NULL
) {

367 
UnicodeSŒšg
 
™em
 = *((UnicodeSŒšg *)(
Ã
->
v®ue
.
poš‹r
));

369 
³rmutiÚs
.
	`»moveAÎ
();

370 
	`³rmu‹
(
™em
, 
CANITER_SKIP_ZEROES
, &
³rmutiÚs
, 
¡©us
);

371 cÚ¡ 
UHashEËm’t
 *
Ã2
 = 
NULL
;

372 
št32_t
 
–2
 = -1;

374 
Ã2
 = 
³rmutiÚs
.
	`ÃxtEËm’t
(
–2
);

376 
Ã2
 !ğ
NULL
) {

379 
UnicodeSŒšg
 
	`possibË
(*((UnicodeSŒšg *)(
Ã2
->
v®ue
.
poš‹r
)));

380 
UnicodeSŒšg
 
©‹m±
;

381 
nfd
.
	`nÜm®ize
(
possibË
, 
©‹m±
, 
¡©us
);

384 ià(
©‹m±
==
£gm’t
) {

387 
»suÉ
.
	`put
(
possibË
, 
Ãw
 
	`UnicodeSŒšg
ÕossibË), 
¡©us
);

392 
Ã2
 = 
³rmutiÚs
.
	`ÃxtEËm’t
(
–2
);

394 
Ã
 = 
basic
.
	`ÃxtEËm’t
(
–
);

398 if(
	`U_FAILURE
(
¡©us
)) {

403 
UnicodeSŒšg
 *
fš®ResuÉ
 = 
NULL
;

404 
št32_t
 
»suÉCouÁ
;

405 if((
»suÉCouÁ
 = 
»suÉ
.
	`couÁ
())) {

406 
fš®ResuÉ
 = 
Ãw
 
UnicodeSŒšg
[
»suÉCouÁ
];

407 ià(
fš®ResuÉ
 == 0) {

408 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

409  
NULL
;

413 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

414  
NULL
;

417 
»suÉ_Ën
 = 0;

418 
–
 = -1;

419 
Ã
 = 
»suÉ
.
	`ÃxtEËm’t
(
–
);

420 
Ã
 !ğ
NULL
) {

421 
fš®ResuÉ
[
»suÉ_Ën
++] = *((
UnicodeSŒšg
 *)(
Ã
->
v®ue
.
poš‹r
));

422 
Ã
 = 
»suÉ
.
	`ÃxtEËm’t
(
–
);

426  
fš®ResuÉ
;

427 
	}
}

429 
HashbË
 *
	gCªÚiÿlI‹¿tÜ
::
	$g‘Equiv®’ts2
(
HashbË
 *
flšResuÉ
, cÚ¡ 
UCh¬
 *
£gm’t
, 
št32_t
 
£gL’
, 
UE¼ÜCode
 &
¡©us
) {

431 ià(
	`U_FAILURE
(
¡©us
)) {

432  
NULL
;

437 
UnicodeSŒšg
 
	`toPut
(
£gm’t
, 
£gL’
);

439 
flšResuÉ
->
	`put
(
toPut
, 
Ãw
 
	`UnicodeSŒšg
ÑoPut), 
¡©us
);

441 
UnicodeS‘
 
¡¬ts
;

444 
UCh¬32
 
ı
;

445 
št32_t
 
i
 = 0; i < 
£gL’
; i +ğ
	`UTF16_CHAR_LENGTH
(
ı
)) {

447 
	`UTF_GET_CHAR
(
£gm’t
, 0, 
i
, 
£gL’
, 
ı
);

448 ià(!
nfcIm¶
.
	`g‘CªÚS¹S‘
(
ı
, 
¡¬ts
)) {

452 
UnicodeS‘I‹¿tÜ
 
	`™”
(
¡¬ts
);

453 
™”
.
	`Ãxt
()) {

454 
UCh¬32
 
ı2
 = 
™”
.
	`g‘Cod•ošt
();

455 
HashbË
 
	`»mašd”
(
¡©us
);

456 
»mašd”
.
	`£tV®ueD–‘”
(
uhash_d–‘eUnicodeSŒšg
);

457 ià(
	`exŒaù
(&
»mašd”
, 
ı2
, 
£gm’t
, 
£gL’
, 
i
, 
¡©us
è=ğ
NULL
) {

462 
UnicodeSŒšg
 
	`´efix
(
£gm’t
, 
i
);

463 
´efix
 +ğ
ı2
;

465 
št32_t
 
–
 = -1;

466 cÚ¡ 
UHashEËm’t
 *
Ã
 = 
»mašd”
.
	`ÃxtEËm’t
(
–
);

467 
Ã
 !ğ
NULL
) {

468 
UnicodeSŒšg
 
™em
 = *((UnicodeSŒšg *)(
Ã
->
v®ue
.
poš‹r
));

469 
UnicodeSŒšg
 *
toAdd
 = 
Ãw
 
	`UnicodeSŒšg
(
´efix
);

471 ià(
toAdd
 == 0) {

472 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

473  
NULL
;

475 *
toAdd
 +ğ
™em
;

476 
flšResuÉ
->
	`put
(*
toAdd
,oAdd, 
¡©us
);

480 
Ã
 = 
»mašd”
.
	`ÃxtEËm’t
(
–
);

486 if(
	`U_FAILURE
(
¡©us
)) {

487  
NULL
;

489  
flšResuÉ
;

490 
	}
}

497 
HashbË
 *
	gCªÚiÿlI‹¿tÜ
::
	$exŒaù
(
HashbË
 *
flšResuÉ
, 
UCh¬32
 
comp
, cÚ¡ 
UCh¬
 *
£gm’t
, 
št32_t
 
£gL’
, iÁ32_ˆ
£gm’tPos
, 
UE¼ÜCode
 &
¡©us
) {

502 ià(
	`U_FAILURE
(
¡©us
)) {

503  
NULL
;

506 
UnicodeSŒšg
 
	`‹mp
(
comp
);

507 
št32_t
 
šputL’
=
‹mp
.
	`Ëngth
();

508 
UnicodeSŒšg
 
decompSŒšg
;

509 
nfd
.
	`nÜm®ize
(
‹mp
, 
decompSŒšg
, 
¡©us
);

510 cÚ¡ 
UCh¬
 *
decomp
=
decompSŒšg
.
	`g‘Bufãr
();

511 
št32_t
 
decompL’
=
decompSŒšg
.
	`Ëngth
();

514 
UBoŞ
 
ok
 = 
FALSE
;

515 
UCh¬32
 
ı
;

516 
št32_t
 
decompPos
 = 0;

517 
UCh¬32
 
decompCp
;

518 
	`U16_NEXT
(
decomp
, 
decompPos
, 
decompL’
, 
decompCp
);

520 
št32_t
 
i
 = 
£gm’tPos
;

521 
i
 < 
£gL’
) {

522 
	`U16_NEXT
(
£gm’t
, 
i
, 
£gL’
, 
ı
);

524 ià(
ı
 =ğ
decompCp
) {

528 ià(
decompPos
 =ğ
decompL’
) {

529 
‹mp
.
	`­³nd
(
£gm’t
+
i
, 
£gL’
-i);

530 
ok
 = 
TRUE
;

533 
	`U16_NEXT
(
decomp
, 
decompPos
, 
decompL’
, 
decompCp
);

538 
‹mp
.
	`­³nd
(
ı
);

553 ià(!
ok
)

554  
NULL
;

558 ià(
šputL’
 =ğ
‹mp
.
	`Ëngth
()) {

559 
flšResuÉ
->
	`put
(
	`UnicodeSŒšg
(), 
Ãw
 UnicodeSŒšg(), 
¡©us
);

560  
flšResuÉ
;

565 
UnicodeSŒšg
 
ŒŸl
;

566 
nfd
.
	`nÜm®ize
(
‹mp
, 
ŒŸl
, 
¡©us
);

567 if(
	`U_FAILURE
(
¡©us
è|| 
ŒŸl
.
	`com·»
(
£gm’t
+
£gm’tPos
, 
£gL’
 - segmentPos) != 0) {

568  
NULL
;

571  
	`g‘Equiv®’ts2
(
flšResuÉ
, 
‹mp
.
	`g‘Bufãr
()+
šputL’
,emp.
	`Ëngth
()-šputL’, 
¡©us
);

572 
	}
}

574 
	gU_NAMESPACE_END


	@chariter.cpp

8 
	~"unicode/ch¬™”.h
"

10 
U_NAMESPACE_BEGIN


12 
	gFÜw¬dCh¬aù”I‹¿tÜ
::~
	$FÜw¬dCh¬aù”I‹¿tÜ
(è{
	}
}

13 
FÜw¬dCh¬aù”I‹¿tÜ
::
	$FÜw¬dCh¬aù”I‹¿tÜ
()

14 : 
	$UObjeù
()

15 {
	}
}

16 
FÜw¬dCh¬aù”I‹¿tÜ
::
	$FÜw¬dCh¬aù”I‹¿tÜ
(cÚ¡ 
FÜw¬dCh¬aù”I‹¿tÜ
 &
Ùh”
)

17 : 
	$UObjeù
(
Ùh”
)

18 {
	}
}

21 
Ch¬aù”I‹¿tÜ
::
	$Ch¬aù”I‹¿tÜ
()

22 : 
	`‹xtL’gth
(0), 
	`pos
(0), 
	`begš
(0), 
	$’d
(0) {

23 
	}
}

25 
	gCh¬aù”I‹¿tÜ
::
	$Ch¬aù”I‹¿tÜ
(
št32_t
 
Ëngth
)

26 : 
	`‹xtL’gth
(
Ëngth
), 
	`pos
(0), 
	`begš
(0), 
	$’d
(
Ëngth
) {

27 if(
‹xtL’gth
 < 0) {

28 
‹xtL’gth
 = 
’d
 = 0;

30 
	}
}

32 
	gCh¬aù”I‹¿tÜ
::
	$Ch¬aù”I‹¿tÜ
(
št32_t
 
Ëngth
, iÁ32_ˆ
pos™iÚ
)

33 : 
	`‹xtL’gth
(
Ëngth
), 
	`pos
(
pos™iÚ
), 
	`begš
(0), 
	$’d
(
Ëngth
) {

34 if(
‹xtL’gth
 < 0) {

35 
‹xtL’gth
 = 
’d
 = 0;

37 if(
pos
 < 0) {

38 
pos
 = 0;

39 } if(
pos
 > 
’d
) {

40 
pos
 = 
’d
;

42 
	}
}

44 
	gCh¬aù”I‹¿tÜ
::
	$Ch¬aù”I‹¿tÜ
(
št32_t
 
Ëngth
, iÁ32_ˆ
‹xtBegš
, iÁ32_ˆ
‹xtEnd
, iÁ32_ˆ
pos™iÚ
)

45 : 
	`‹xtL’gth
(
Ëngth
), 
	`pos
(
pos™iÚ
), 
	`begš
(
‹xtBegš
), 
	$’d
(
‹xtEnd
) {

46 if(
‹xtL’gth
 < 0) {

47 
‹xtL’gth
 = 0;

49 if(
begš
 < 0) {

50 
begš
 = 0;

51 } if(
begš
 > 
‹xtL’gth
) {

52 
begš
 = 
‹xtL’gth
;

54 if(
’d
 < 
begš
) {

55 
’d
 = 
begš
;

56 } if(
’d
 > 
‹xtL’gth
) {

57 
’d
 = 
‹xtL’gth
;

59 if(
pos
 < 
begš
) {

60 
pos
 = 
begš
;

61 } if(
pos
 > 
’d
) {

62 
pos
 = 
’d
;

64 
	}
}

66 
	gCh¬aù”I‹¿tÜ
::
	$Ch¬aù”I‹¿tÜ
(cÚ¡ 
Ch¬aù”I‹¿tÜ
 &
th©
) :

67 
	`FÜw¬dCh¬aù”I‹¿tÜ
(
th©
),

68 
	`‹xtL’gth
(
th©
.
‹xtL’gth
), 
	`pos
Ñh©.
pos
), 
	`begš
Ñh©.
begš
), 
	$’d
(
th©
.
’d
)

70 
	}
}

72 
	gCh¬aù”I‹¿tÜ
 &

73 
	gCh¬aù”I‹¿tÜ
::
İ”©Ü
=(cÚ¡ 
Ch¬aù”I‹¿tÜ
 &
th©
) {

74 
FÜw¬dCh¬aù”I‹¿tÜ
::
İ”©Ü
=(
th©
);

75 
	g‹xtL’gth
 = 
th©
.
‹xtL’gth
;

76 
	gpos
 = 
th©
.
pos
;

77 
	gbegš
 = 
th©
.
begš
;

78 
	g’d
 = 
th©
.
’d
;

79  *
	gthis
;

84 
UCh¬


85 
	gCh¬aù”I‹¿tÜ
::
	$fœ¡Po¡Inc
() {

86 
	`£tToS¹
();

87  
	`ÃxtPo¡Inc
();

88 
	}
}

90 
UCh¬32


91 
	gCh¬aù”I‹¿tÜ
::
	$fœ¡32Po¡Inc
() {

92 
	`£tToS¹
();

93  
	`Ãxt32Po¡Inc
();

94 
	}
}

96 
	gU_NAMESPACE_END


	@charstr.cpp

15 
	~"unicode/uty³s.h
"

16 
	~"ch¬¡r.h
"

17 
	~"cmemÜy.h
"

18 
	~"c¡ršg.h
"

20 
U_NAMESPACE_BEGIN


22 
	gCh¬SŒšg
 &Ch¬SŒšg::
	$cİyFrom
(cÚ¡ 
Ch¬SŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) {

23 if(
	`U_SUCCESS
(
”rÜCode
è&& 
this
!=&
s
 && 
	`’su»C­ac™y
(s.
Ën
+1, 0,ƒrrorCode)) {

24 
Ën
=
s
.len;

25 
	`u´v_memıy
(
bufãr
.
	`g‘AlŸs
(), 
s
.bufãr.g‘AlŸs(), 
Ën
+1);

27  *
this
;

28 
	}
}

30 
	gCh¬SŒšg
 &Ch¬SŒšg::
	$Œunÿ‹
(
št32_t
 
ÃwL’gth
) {

31 if(
ÃwL’gth
<0) {

32 
ÃwL’gth
=0;

34 if(
ÃwL’gth
<
Ën
) {

35 
bufãr
[
Ën
=
ÃwL’gth
]=0;

37  *
this
;

38 
	}
}

40 
	gCh¬SŒšg
 &Ch¬SŒšg::
	$­³nd
(
c
, 
UE¼ÜCode
 &
”rÜCode
) {

41 if(
	`’su»C­ac™y
(
Ën
+2, 0, 
”rÜCode
)) {

42 
bufãr
[
Ën
++]=
c
;

43 
bufãr
[
Ën
]=0;

45  *
this
;

46 
	}
}

48 
	gCh¬SŒšg
 &Ch¬SŒšg::
	$­³nd
(cÚ¡ *
s
, 
št32_t
 
sL’gth
, 
UE¼ÜCode
 &
”rÜCode
) {

49 if(
	`U_FAILURE
(
”rÜCode
)) {

50  *
this
;

52 if(
sL’gth
<-1 || (
s
==
NULL
 && sLength!=0)) {

53 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

54  *
this
;

56 if(
sL’gth
<0) {

57 
sL’gth
=
	`u´v_¡¾’
(
s
);

59 if(
sL’gth
>0) {

60 if(
s
==(
bufãr
.
	`g‘AlŸs
()+
Ën
)) {

62 if(
sL’gth
>=(
bufãr
.
	`g‘C­ac™y
()-
Ën
)) {

64 
”rÜCode
=
U_INTERNAL_PROGRAM_ERROR
;

66 
bufãr
[
Ën
+=
sL’gth
]=0;

68 } if(
bufãr
.
	`g‘AlŸs
()<=
s
 && s<(bufãr.g‘AlŸs()+
Ën
) &&

69 
sL’gth
>=(
bufãr
.
	`g‘C­ac™y
()-
Ën
)

73  
	`­³nd
(
	`Ch¬SŒšg
(
s
, 
sL’gth
, 
”rÜCode
),ƒrrorCode);

74 } if(
	`’su»C­ac™y
(
Ën
+
sL’gth
+1, 0, 
”rÜCode
)) {

75 
	`u´v_memıy
(
bufãr
.
	`g‘AlŸs
()+
Ën
, 
s
, 
sL’gth
);

76 
bufãr
[
Ën
+=
sL’gth
]=0;

79  *
this
;

80 
	}
}

82 *
	gCh¬SŒšg
::
	$g‘Aµ’dBufãr
(
št32_t
 
mšC­ac™y
,

83 
št32_t
 
desœedC­ac™yHšt
,

84 
št32_t
 &
»suÉC­ac™y
,

85 
UE¼ÜCode
 &
”rÜCode
) {

86 if(
	`U_FAILURE
(
”rÜCode
)) {

87 
»suÉC­ac™y
=0;

88  
NULL
;

90 
št32_t
 
­³ndC­ac™y
=
bufãr
.
	`g‘C­ac™y
()-
Ën
-1;

91 if(
­³ndC­ac™y
>=
mšC­ac™y
) {

92 
»suÉC­ac™y
=
­³ndC­ac™y
;

93  
bufãr
.
	`g‘AlŸs
()+
Ën
;

95 if(
	`’su»C­ac™y
(
Ën
+
mšC­ac™y
+1,†’+
desœedC­ac™yHšt
+1, 
”rÜCode
)) {

96 
»suÉC­ac™y
=
bufãr
.
	`g‘C­ac™y
()-
Ën
-1;

97  
bufãr
.
	`g‘AlŸs
()+
Ën
;

99 
»suÉC­ac™y
=0;

100  
NULL
;

101 
	}
}

103 
	gCh¬SŒšg
 &Ch¬SŒšg::
	$­³ndInv¬ŸÁCh¬s
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) {

104 if(
	`’su»C­ac™y
(
Ën
+
s
.
	`Ëngth
()+1, 0, 
”rÜCode
)) {

105 
Ën
+=
s
.
	`exŒaù
(0, 0x7fffffff, 
bufãr
.
	`g‘AlŸs
()+Ën, bufãr.
	`g‘C­ac™y
()-Ën, 
US_INV
);

107  *
this
;

108 
	}
}

110 
UBoŞ
 
	gCh¬SŒšg
::
	$’su»C­ac™y
(
št32_t
 
ÿ·c™y
,

111 
št32_t
 
desœedC­ac™yHšt
,

112 
UE¼ÜCode
 &
”rÜCode
) {

113 if(
	`U_FAILURE
(
”rÜCode
)) {

114  
FALSE
;

116 if(
ÿ·c™y
>
bufãr
.
	`g‘C­ac™y
()) {

117 if(
desœedC­ac™yHšt
==0) {

118 
desœedC­ac™yHšt
=
ÿ·c™y
+
bufãr
.
	`g‘C­ac™y
();

120 ifĞ(
desœedC­ac™yHšt
<=
ÿ·c™y
 || 
bufãr
.
	`»size
(desœedC­ac™yHšt, 
Ën
+1)==
NULL
) &&

121 
bufãr
.
	`»size
(
ÿ·c™y
, 
Ën
+1)==
NULL


123 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

124  
FALSE
;

127  
TRUE
;

128 
	}
}

130 
	gU_NAMESPACE_END


	@charstr.h

12 #iâdeà
CHARSTRING_H


13 
	#CHARSTRING_H


	)

15 
	~"unicode/uty³s.h
"

16 
	~"unicode/uni¡r.h
"

17 
	~"unicode/uobjeù.h
"

18 
	~"cmemÜy.h
"

20 
	gU_NAMESPACE_BEGIN


24 #ià!
defšed
(
U_DARWIN
)

25 
‹m¶©e
 
şass
 
U_COMMON_API
 
	gMaybeSckA¼ay
<, 40>;

39 şas 
	cU_COMMON_API
 
	mCh¬SŒšg
 : 
public
 
UMemÜy
 {

40 
public
:

41 
	$Ch¬SŒšg
(è: 
	$Ën
(0è{ 
bufãr
[0]=0; }

42 
	$Ch¬SŒšg
(cÚ¡ 
SŒšgP›û
 &
s
, 
UE¼ÜCode
 &
”rÜCode
è: 
	$Ën
(0) {

43 
bufãr
[0]=0;

44 
	`­³nd
(
s
, 
”rÜCode
);

45 
	}
}

46 
	$Ch¬SŒšg
(cÚ¡ 
Ch¬SŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
è: 
	$Ën
(0) {

47 
bufãr
[0]=0;

48 
	`­³nd
(
s
, 
”rÜCode
);

49 
	}
}

50 
	$Ch¬SŒšg
(cÚ¡ *
s
, 
št32_t
 
sL’gth
, 
UE¼ÜCode
 &
”rÜCode
è: 
	$Ën
(0) {

51 
bufãr
[0]=0;

52 
	`­³nd
(
s
, 
sL’gth
, 
”rÜCode
);

53 
	}
}

54 ~
	$Ch¬SŒšg
(è{
	}
}

62 
	gCh¬SŒšg
 &
cİyFrom
(cÚ¡ 
Ch¬SŒšg
 &
Ùh”
, 
UE¼ÜCode
 &
”rÜCode
);

64 
UBoŞ
 
	$isEm±y
(è{  
Ën
==0; 
	}
}

65 
št32_t
 
	$Ëngth
(ècÚ¡ {  
Ën
; 
	}
}

66 
	gİ”©Ü
[] (
št32_t
 
	gšdex
ècÚ¡ {  
	gbufãr
[
šdex
]; }

67 
SŒšgP›û
 
	$toSŒšgP›û
(ècÚ¡ {  
	`SŒšgP›û
(
bufãr
.
	`g‘AlŸs
(), 
Ën
); 
	}
}

69 cÚ¡ *
	$d©a
(ècÚ¡ {  
bufãr
.
	`g‘AlŸs
(); 
	}
}

70 *
	$d©a
(è{  
bufãr
.
	`g‘AlŸs
(); 
	}
}

72 
	gCh¬SŒšg
 &
	$ş—r
(è{ 
Ën
=0; 
bufãr
[0]=0;  *
this
; 
	}
}

73 
	gCh¬SŒšg
 &
Œunÿ‹
(
št32_t
 
ÃwL’gth
);

75 
	gCh¬SŒšg
 &
­³nd
(
c
, 
UE¼ÜCode
 &
”rÜCode
);

76 
	gCh¬SŒšg
 &
	$­³nd
(cÚ¡ 
SŒšgP›û
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) {

77  
	`­³nd
(
s
.
	`d©a
(), s.
	`Ëngth
(), 
”rÜCode
);

78 
	}
}

79 
	gCh¬SŒšg
 &
	$­³nd
(cÚ¡ 
Ch¬SŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) {

80  
	`­³nd
(
s
.
	`d©a
(), s.
	`Ëngth
(), 
”rÜCode
);

81 
	}
}

82 
	gCh¬SŒšg
 &
­³nd
(cÚ¡ *
s
, 
št32_t
 
sL’gth
, 
UE¼ÜCode
 &
¡©us
);

103 *
g‘Aµ’dBufãr
(
št32_t
 
mšC­ac™y
,

104 
št32_t
 
desœedC­ac™yHšt
,

105 
št32_t
 &
»suÉC­ac™y
,

106 
UE¼ÜCode
 &
”rÜCode
);

108 
	gCh¬SŒšg
 &
­³ndInv¬ŸÁCh¬s
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
);

110 
	g´iv©e
:

111 
MaybeSckA¼ay
<, 40> 
	gbufãr
;

112 
št32_t
 
	gËn
;

114 
UBoŞ
 
’su»C­ac™y
(
št32_t
 
ÿ·c™y
, iÁ32_ˆ
desœedC­ac™yHšt
, 
UE¼ÜCode
 &
”rÜCode
);

116 
Ch¬SŒšg
(cÚ¡ Ch¬SŒšg &
Ùh”
);

117 
	gCh¬SŒšg
 &
	gİ”©Ü
=(cÚ¡ 
Ch¬SŒšg
 &
Ùh”
);

120 
	gU_NAMESPACE_END


	@cmemory.c

21 
	~"unicode/uş—n.h
"

22 
	~"cmemÜy.h
"

23 
	~<¡dlib.h
>

26 cÚ¡ 
št32_t
 
	gz”oMem
[] = {0, 0, 0, 0, 0, 0};

29 cÚ¡ *
	gpCÚ‹xt
;

30 
UMemAÎocFn
 *
	gpAÎoc
;

31 
UMemR—ÎocFn
 *
	gpR—Îoc
;

32 
UMemF»eFn
 *
	gpF»e
;

36 
UBoŞ
 
	ggH—pInU£
;

38 
U_CAPI
 * 
U_EXPORT2


39 
	$u´v_m®loc
(
size_t
 
s
) {

40 ià(
s
 > 0) {

41 
gH—pInU£
 = 
TRUE
;

42 ià(
pAÎoc
) {

43  (*
pAÎoc
)(
pCÚ‹xt
, 
s
);

45  
	`m®loc
(
s
);

48  (*)
z”oMem
;

50 
	}
}

52 
U_CAPI
 * 
U_EXPORT2


53 
	$u´v_»®loc
(* 
bufãr
, 
size_t
 
size
) {

54 ià(
bufãr
 =ğ
z”oMem
) {

55  
	`u´v_m®loc
(
size
);

56 } ià(
size
 == 0) {

57 ià(
pF»e
) {

58 (*
pF»e
)(
pCÚ‹xt
, 
bufãr
);

60 
	`ä“
(
bufãr
);

62  (*)
z”oMem
;

64 
gH—pInU£
 = 
TRUE
;

65 ià(
pR—Îoc
) {

66  (*
pR—Îoc
)(
pCÚ‹xt
, 
bufãr
, 
size
);

68  
	`»®loc
(
bufãr
, 
size
);

71 
	}
}

73 
U_CAPI
 
U_EXPORT2


74 
	$u´v_ä“
(*
bufãr
) {

75 ià(
bufãr
 !ğ
z”oMem
) {

76 ià(
pF»e
) {

77 (*
pF»e
)(
pCÚ‹xt
, 
bufãr
);

79 
	`ä“
(
bufãr
);

82 
	}
}

84 
U_CAPI
 
U_EXPORT2


85 
	$u_£tMemÜyFunùiÚs
(cÚ¡ *
cÚ‹xt
, 
UMemAÎocFn
 *
a
, 
UMemR—ÎocFn
 *
r
, 
UMemF»eFn
 *
f
, 
UE¼ÜCode
 *
¡©us
)

87 ià(
	`U_FAILURE
(*
¡©us
)) {

90 ià(
a
==
NULL
 || 
r
==NULL || 
f
==NULL) {

91 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

94 ià(
gH—pInU£
) {

95 *
¡©us
 = 
U_INVALID_STATE_ERROR
;

98 
pCÚ‹xt
 = 
cÚ‹xt
;

99 
pAÎoc
 = 
a
;

100 
pR—Îoc
 = 
r
;

101 
pF»e
 = 
f
;

102 
	}
}

105 
U_CFUNC
 
UBoŞ
 
	$cmemÜy_ş—nup
() {

106 
pCÚ‹xt
 = 
NULL
;

107 
pAÎoc
 = 
NULL
;

108 
pR—Îoc
 = 
NULL
;

109 
pF»e
 = 
NULL
;

110 
gH—pInU£
 = 
FALSE
;

111  
TRUE
;

112 
	}
}

121 
U_CFUNC
 
UBoŞ
 
	$cmemÜy_šU£
() {

122  
gH—pInU£
;

123 
	}
}

	@cmemory.h

24 #iâdeà
CMEMORY_H


25 
	#CMEMORY_H


	)

27 
	~<¡ddef.h
>

28 
	~<¡ršg.h
>

29 
	~"unicode/uty³s.h
"

30 
	~"unicode/loÿÍoš‹r.h
"

32 
	#u´v_memıy
(
d¡
, 
¤c
, 
size
è
U_STANDARD_CPP_NAMESPACE
 
	`memıy
(d¡, src, size)

	)

33 
	#u´v_memmove
(
d¡
, 
¤c
, 
size
è
U_STANDARD_CPP_NAMESPACE
 
	`memmove
(d¡, src, size)

	)

34 
	#u´v_mem£t
(
bufãr
, 
m¬k
, 
size
è
U_STANDARD_CPP_NAMESPACE
 
	`mem£t
(bufãr, m¬k, size)

	)

35 
	#u´v_memcmp
(
bufãr1
, 
bufãr2
, 
size
è
U_STANDARD_CPP_NAMESPACE
 
	`memcmp
(bufãr1, bufãr2,size)

	)

37 
U_CAPI
 * 
U_EXPORT2


38 
u´v_m®loc
(
size_t
 
s
);

40 
U_CAPI
 * 
U_EXPORT2


41 
u´v_»®loc
(*
mem
, 
size_t
 
size
);

43 
U_CAPI
 
U_EXPORT2


44 
u´v_ä“
(*
mem
);

51 
	mt1
;

52 
	mt2
;

53 *
	mt3
;

54 } 
	tUAligÃdMemÜy
;

65 
	#U_POINTER_MASK_LSB
(
±r
, 
mask
è(((
±rdiff_t
)(*)ÕŒ)è& (mask))

	)

71 
	#U_ALIGNMENT_OFFSET
(
±r
è
	`U_POINTER_MASK_LSB
ÕŒ, (
UAligÃdMemÜy
è- 1)

	)

77 
	#U_ALIGNMENT_OFFSET_UP
(
±r
è((
UAligÃdMemÜy
è- 
	`U_ALIGNMENT_OFFSET
ÕŒ))

	)

83 
U_CFUNC
 
UBoŞ


84 
cmemÜy_šU£
();

91 
U_CFUNC
 
UBoŞ


92 
cmemÜy_ş—nup
();

94 #ifdeà
XP_CPLUSPLUS


96 
U_NAMESPACE_BEGIN


105 
	g‹m¶©e
<
ty³Çme
 
	gT
>

106 
şass
 
	gLoÿlMemÜy
 : 
public
 
LoÿlPoš‹rBa£
<
T
> {

107 
public
:

112 
ex¶ic™
 
LoÿlMemÜy
(
T
 *
p
=
NULL
è: 
LoÿlPoš‹rBa£
<T>(p) {}

116 ~
LoÿlMemÜy
() {

117 
u´v_ä“
(
LoÿlPoš‹rBa£
<
T
>::
±r
);

124 
adİtIn¡—d
(
T
 *
p
) {

125 
u´v_ä“
(
LoÿlPoš‹rBa£
<
T
>::
±r
);

126 
	gLoÿlPoš‹rBa£
<
	gT
>::
±r
=
p
;

136 
šlše
 
T
 *
®loÿ‹In¡—dAndRe£t
(
št32_t
 
ÃwC­ac™y
=1);

148 
šlše
 
T
 *
®loÿ‹In¡—dAndCİy
(
št32_t
 
ÃwC­ac™y
=1, iÁ32_ˆ
Ëngth
=0);

155 
	gT
 &
	gİ”©Ü
[](
±rdiff_t
 
	gi
ècÚ¡ {  
	gLoÿlPoš‹rBa£
<T>::
±r
[
i
]; }

158 
	g‹m¶©e
<
ty³Çme
 
	gT
>

159 
šlše
 
T
 *
	gLoÿlMemÜy
<
	gT
>::
	$®loÿ‹In¡—dAndRe£t
(
št32_t
 
ÃwC­ac™y
) {

160 if(
ÃwC­ac™y
>0) {

161 
T
 *
p
=(T *)
	`u´v_m®loc
(
ÃwC­ac™y
*(T));

162 if(
p
!=
NULL
) {

163 
	`u´v_mem£t
(
p
, 0, 
ÃwC­ac™y
*(
T
));

164 
	`u´v_ä“
(
LoÿlPoš‹rBa£
<
T
>::
±r
);

165 
LoÿlPoš‹rBa£
<
T
>::
±r
=
p
;

167  
p
;

169  
NULL
;

171 
	}
}

174 
	g‹m¶©e
<
ty³Çme
 
	gT
>

175 
šlše
 
T
 *
	gLoÿlMemÜy
<
	gT
>::
	$®loÿ‹In¡—dAndCİy
(
št32_t
 
ÃwC­ac™y
, iÁ32_ˆ
Ëngth
) {

176 if(
ÃwC­ac™y
>0) {

177 
T
 *
p
=(T *)
	`u´v_m®loc
(
ÃwC­ac™y
*(T));

178 if(
p
!=
NULL
) {

179 if(
Ëngth
>0) {

180 if(
Ëngth
>
ÃwC­ac™y
) {

181 
Ëngth
=
ÃwC­ac™y
;

183 
	`u´v_memıy
(
p
, 
LoÿlPoš‹rBa£
<
T
>::
±r
, 
Ëngth
*(T));

185 
	`u´v_ä“
(
LoÿlPoš‹rBa£
<
T
>::
±r
);

186 
LoÿlPoš‹rBa£
<
T
>::
±r
=
p
;

188  
p
;

190  
NULL
;

192 
	}
}

205 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
št32_t
 
	g¡ackC­ac™y
>

206 şas 
	cMaybeSckA¼ay
 {

207 
	mpublic
:

211 
	$MaybeSckA¼ay
(è: 
	`±r
(
¡ackA¼ay
), 
	`ÿ·c™y
(
¡ackC­ac™y
), 
	$ÃedToR–—£
(
FALSE
) {}

215 ~
	$MaybeSckA¼ay
(è{ 
	`»Ëa£A¼ay
(); 
	}
}

220 
št32_t
 
	$g‘C­ac™y
(ècÚ¡ {  
ÿ·c™y
; 
	}
}

225 
T
 *
	$g‘AlŸs
(ècÚ¡ {  
±r
; 
	}
}

230 
T
 *
	$g‘A¼ayLim™
(ècÚ¡ {  
	`g‘AlŸs
()+
ÿ·c™y
; 
	}
}

236 
İ”©Ü
 
	gT
 *(ècÚ¡ {  
	g±r
; }

243 
	gT
 &
	gİ”©Ü
[](
±rdiff_t
 
	gi
è{  
	g±r
[
i
]; }

250 
	$®ŸsIn¡—d
(
T
 *
Ùh”A¼ay
, 
št32_t
 
Ùh”C­ac™y
) {

251 if(
Ùh”A¼ay
!=
NULL
 && 
Ùh”C­ac™y
>0) {

252 
	`»Ëa£A¼ay
();

253 
±r
=
Ùh”A¼ay
;

254 
ÿ·c™y
=
Ùh”C­ac™y
;

255 
ÃedToR–—£
=
FALSE
;

257 
	}
};

268 
šlše
 
T
 *
»size
(
št32_t
 
ÃwC­ac™y
, iÁ32_ˆ
Ëngth
=0);

280 
šlše
 
T
 *
ÜphªOrClÚe
(
št32_t
 
Ëngth
, iÁ32_ˆ&
»suÉC­ac™y
);

281 
	g´iv©e
:

282 
T
 *
±r
;

283 
št32_t
 
	gÿ·c™y
;

284 
UBoŞ
 
	gÃedToR–—£
;

285 
T
 
	g¡ackA¼ay
[
¡ackC­ac™y
];

286 
	$»Ëa£A¼ay
() {

287 if(
ÃedToR–—£
) {

288 
	`u´v_ä“
(
±r
);

290 
	}
}

292 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
MaybeSckA¼ay
 & ) { 
FALSE
;};

293 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
MaybeSckA¼ay
 & ) { 
TRUE
;};

295 
	$MaybeSckA¼ay
(cÚ¡ 
MaybeSckA¼ay
 & ) {
	}
};

296 
	gİ”©Ü
=(cÚ¡ 
MaybeSckA¼ay
 & ) {};

308 #ià
U_HAVE_PLACEMENT_NEW


313 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
št32_t
 
	g¡ackC­ac™y
>

314 
šlše
 
T
 *
	gMaybeSckA¼ay
<
	gT
, 
	g¡ackC­ac™y
>::
	$»size
(
št32_t
 
ÃwC­ac™y
, iÁ32_ˆ
Ëngth
) {

315 if(
ÃwC­ac™y
>0) {

316 
T
 *
p
=(T *)
	`u´v_m®loc
(
ÃwC­ac™y
*(T));

317 if(
p
!=
NULL
) {

318 if(
Ëngth
>0) {

319 if(
Ëngth
>
ÿ·c™y
) {

320 
Ëngth
=
ÿ·c™y
;

322 if(
Ëngth
>
ÃwC­ac™y
) {

323 
Ëngth
=
ÃwC­ac™y
;

325 
	`u´v_memıy
(
p
, 
±r
, 
Ëngth
*(
T
));

327 
	`»Ëa£A¼ay
();

328 
±r
=
p
;

329 
ÿ·c™y
=
ÃwC­ac™y
;

330 
ÃedToR–—£
=
TRUE
;

332  
p
;

334  
NULL
;

336 
	}
}

338 
	g‹m¶©e
<
ty³Çme
 
	gT
, 
št32_t
 
	g¡ackC­ac™y
>

339 
šlše
 
T
 *
	gMaybeSckA¼ay
<
	gT
, 
	g¡ackC­ac™y
>::
	$ÜphªOrClÚe
(
št32_t
 
Ëngth
, iÁ32_ˆ&
»suÉC­ac™y
) {

340 
T
 *
p
;

341 if(
ÃedToR–—£
) {

342 
p
=
±r
;

343 } if(
Ëngth
<=0) {

344  
NULL
;

346 if(
Ëngth
>
ÿ·c™y
) {

347 
Ëngth
=
ÿ·c™y
;

349 
p
=(
T
 *)
	`u´v_m®loc
(
Ëngth
*(T));

350 if(
p
==
NULL
) {

351  
NULL
;

353 
	`u´v_memıy
(
p
, 
±r
, 
Ëngth
*(
T
));

355 
»suÉC­ac™y
=
Ëngth
;

356 
±r
=
¡ackA¼ay
;

357 
ÿ·c™y
=
¡ackC­ac™y
;

358 
ÃedToR–—£
=
FALSE
;

359  
p
;

360 
	}
}

372 
	g‹m¶©e
<
ty³Çme
 
	gH
,y³Çm
	gT
, 
št32_t
 
	g¡ackC­ac™y
>

373 şas 
	cMaybeSckH—d”AndA¼ay
 {

374 
	mpublic
:

378 
	$MaybeSckH—d”AndA¼ay
(è: 
	`±r
(&
¡ackH—d”
), 
	`ÿ·c™y
(
¡ackC­ac™y
), 
	$ÃedToR–—£
(
FALSE
) {}

382 ~
	$MaybeSckH—d”AndA¼ay
(è{ 
	`»Ëa£MemÜy
(); 
	}
}

387 
št32_t
 
	$g‘C­ac™y
(ècÚ¡ {  
ÿ·c™y
; 
	}
}

392 
H
 *
	$g‘AlŸs
(ècÚ¡ {  
±r
; 
	}
}

397 
T
 *
	$g‘A¼ayS¹
(ècÚ¡ {  
»š‹½»t_ÿ¡
<
T
 *>(
	`g‘AlŸs
()+1); 
	}
}

402 
T
 *
	$g‘A¼ayLim™
(ècÚ¡ {  
	`g‘A¼ayS¹
()+
ÿ·c™y
; 
	}
}

408 
İ”©Ü
 
	gH
 *(ècÚ¡ {  
	g±r
; }

415 
	gT
 &
	gİ”©Ü
[](
±rdiff_t
 
	gi
è{  
g‘A¼ayS¹
()[
i
]; }

422 
	$®ŸsIn¡—d
(
H
 *
Ùh”MemÜy
, 
št32_t
 
Ùh”C­ac™y
) {

423 if(
Ùh”MemÜy
!=
NULL
 && 
Ùh”C­ac™y
>0) {

424 
	`»Ëa£MemÜy
();

425 
±r
=
Ùh”MemÜy
;

426 
ÿ·c™y
=
Ùh”C­ac™y
;

427 
ÃedToR–—£
=
FALSE
;

429 
	}
};

441 
šlše
 
H
 *
»size
(
št32_t
 
ÃwC­ac™y
, iÁ32_ˆ
Ëngth
=0);

453 
šlše
 
H
 *
ÜphªOrClÚe
(
št32_t
 
Ëngth
, iÁ32_ˆ&
»suÉC­ac™y
);

454 
	g´iv©e
:

455 
H
 *
±r
;

456 
št32_t
 
	gÿ·c™y
;

457 
UBoŞ
 
	gÃedToR–—£
;

459 
H
 
	g¡ackH—d”
;

460 
T
 
	g¡ackA¼ay
[
¡ackC­ac™y
];

461 
	$»Ëa£MemÜy
() {

462 if(
ÃedToR–—£
) {

463 
	`u´v_ä“
(
±r
);

465 
	}
}

467 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
MaybeSckH—d”AndA¼ay
 & ) { 
FALSE
;};

468 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
MaybeSckH—d”AndA¼ay
 & ) { 
TRUE
;};

470 
	$MaybeSckH—d”AndA¼ay
(cÚ¡ 
MaybeSckH—d”AndA¼ay
 & ) {
	}
};

471 
	gİ”©Ü
=(cÚ¡ 
MaybeSckH—d”AndA¼ay
 & ) {};

478 #ià
U_HAVE_PLACEMENT_NEW


483 
	g‹m¶©e
<
ty³Çme
 
	gH
,y³Çm
	gT
, 
št32_t
 
	g¡ackC­ac™y
>

484 
šlše
 
H
 *
	gMaybeSckH—d”AndA¼ay
<
	gH
, 
	gT
, 
	g¡ackC­ac™y
>::
	$»size
(
št32_t
 
ÃwC­ac™y
,

485 
št32_t
 
Ëngth
) {

486 if(
ÃwC­ac™y
>=0) {

487 
H
 *
p
=(H *)
	`u´v_m®loc
((H)+
ÃwC­ac™y
*(
T
));

488 if(
p
!=
NULL
) {

489 if(
Ëngth
<0) {

490 
Ëngth
=0;

491 } if(
Ëngth
>0) {

492 if(
Ëngth
>
ÿ·c™y
) {

493 
Ëngth
=
ÿ·c™y
;

495 if(
Ëngth
>
ÃwC­ac™y
) {

496 
Ëngth
=
ÃwC­ac™y
;

499 
	`u´v_memıy
(
p
, 
±r
, (
H
)+
Ëngth
*(
T
));

500 
	`»Ëa£MemÜy
();

501 
±r
=
p
;

502 
ÿ·c™y
=
ÃwC­ac™y
;

503 
ÃedToR–—£
=
TRUE
;

505  
p
;

507  
NULL
;

509 
	}
}

511 
	g‹m¶©e
<
ty³Çme
 
	gH
,y³Çm
	gT
, 
št32_t
 
	g¡ackC­ac™y
>

512 
šlše
 
H
 *
	gMaybeSckH—d”AndA¼ay
<
	gH
, 
	gT
, 
	g¡ackC­ac™y
>::
	$ÜphªOrClÚe
(
št32_t
 
Ëngth
,

513 
št32_t
 &
»suÉC­ac™y
) {

514 
H
 *
p
;

515 if(
ÃedToR–—£
) {

516 
p
=
±r
;

518 if(
Ëngth
<0) {

519 
Ëngth
=0;

520 } if(
Ëngth
>
ÿ·c™y
) {

521 
Ëngth
=
ÿ·c™y
;

523 
p
=(
H
 *)
	`u´v_m®loc
((H)+
Ëngth
*(
T
));

524 if(
p
==
NULL
) {

525  
NULL
;

527 
	`u´v_memıy
(
p
, 
±r
, (
H
)+
Ëngth
*(
T
));

529 
»suÉC­ac™y
=
Ëngth
;

530 
±r
=&
¡ackH—d”
;

531 
ÿ·c™y
=
¡ackC­ac™y
;

532 
ÃedToR–—£
=
FALSE
;

533  
p
;

534 
	}
}

536 
	gU_NAMESPACE_END


	@cpputils.h

14 #iâdeà
CPPUTILS_H


15 
	#CPPUTILS_H


	)

17 
	~"unicode/uty³s.h
"

18 
	~"unicode/uni¡r.h
"

19 
	~"cmemÜy.h
"

26 
šlše
 
	$u´v_¬¿yCİy
(cÚ¡ * 
¤c
, * 
d¡
, 
št32_t
 
couÁ
)

27 { 
	`u´v_memıy
(
d¡
, 
¤c
, (
size_t
)(
couÁ
 * (*¤c))); 
	}
}

30 
šlše
 
	$u´v_¬¿yCİy
(cÚ¡ * 
¤c
, 
št32_t
 
¤cS¹
,

31 * 
d¡
, 
št32_t
 
d¡S¹
, iÁ32_ˆ
couÁ
)

32 { 
	`u´v_memıy
(
d¡
+
d¡S¹
, 
¤c
+
¤cS¹
, (
size_t
)(
couÁ
 * (*¤c))); 
	}
}

35 
šlše
 
	$u´v_¬¿yCİy
(cÚ¡ 
št8_t
* 
¤c
, iÁ8_t* 
d¡
, 
št32_t
 
couÁ
)

36 { 
	`u´v_memıy
(
d¡
, 
¤c
, (
size_t
)(
couÁ
 * (*¤c))); 
	}
}

39 
šlše
 
	$u´v_¬¿yCİy
(cÚ¡ 
št8_t
* 
¤c
, 
št32_t
 
¤cS¹
,

40 
št8_t
* 
d¡
, 
št32_t
 
d¡S¹
, iÁ32_ˆ
couÁ
)

41 { 
	`u´v_memıy
(
d¡
+
d¡S¹
, 
¤c
+
¤cS¹
, (
size_t
)(
couÁ
 * (*¤c))); 
	}
}

44 
šlše
 
	$u´v_¬¿yCİy
(cÚ¡ 
št16_t
* 
¤c
, iÁ16_t* 
d¡
, 
št32_t
 
couÁ
)

45 { 
	`u´v_memıy
(
d¡
, 
¤c
, (
size_t
)(
couÁ
 * (*¤c))); 
	}
}

48 
šlše
 
	$u´v_¬¿yCİy
(cÚ¡ 
št16_t
* 
¤c
, 
št32_t
 
¤cS¹
,

49 
št16_t
* 
d¡
, 
št32_t
 
d¡S¹
, iÁ32_ˆ
couÁ
)

50 { 
	`u´v_memıy
(
d¡
+
d¡S¹
, 
¤c
+
¤cS¹
, (
size_t
)(
couÁ
 * (*¤c))); 
	}
}

53 
šlše
 
	$u´v_¬¿yCİy
(cÚ¡ 
št32_t
* 
¤c
, iÁ32_t* 
d¡
, iÁ32_ˆ
couÁ
)

54 { 
	`u´v_memıy
(
d¡
, 
¤c
, (
size_t
)(
couÁ
 * (*¤c))); 
	}
}

57 
šlše
 
	$u´v_¬¿yCİy
(cÚ¡ 
št32_t
* 
¤c
, iÁ32_ˆ
¤cS¹
,

58 
št32_t
* 
d¡
, iÁ32_ˆ
d¡S¹
, iÁ32_ˆ
couÁ
)

59 { 
	`u´v_memıy
(
d¡
+
d¡S¹
, 
¤c
+
¤cS¹
, (
size_t
)(
couÁ
 * (*¤c))); 
	}
}

62 
šlše
 

63 
	$u´v_¬¿yCİy
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cS¹
,

64 
UCh¬
 *
d¡
, 
št32_t
 
d¡S¹
, iÁ32_ˆ
couÁ
)

65 { 
	`u´v_memıy
(
d¡
+
d¡S¹
, 
¤c
+
¤cS¹
, (
size_t
)(
couÁ
 * (*¤c))); 
	}
}

71 
šlše
 

72 
	$u´v_¬¿yCİy
(cÚ¡ 
U_NAMESPACE_QUALIFIER
 
UnicodeSŒšg
 *
¤c
, U_NAMESPACE_QUALIFIER UnicodeSŒšg *
d¡
, 
št32_t
 
couÁ
)

73 { 
couÁ
-- > 0è*
d¡
++ = *
¤c
++; 
	}
}

79 
šlše
 

80 
	$u´v_¬¿yCİy
(cÚ¡ 
U_NAMESPACE_QUALIFIER
 
UnicodeSŒšg
 *
¤c
, 
št32_t
 
¤cS¹
,

81 
U_NAMESPACE_QUALIFIER
 
UnicodeSŒšg
 *
d¡
, 
št32_t
 
d¡S¹
, iÁ32_ˆ
couÁ
)

82 { 
	`u´v_¬¿yCİy
(
¤c
+
¤cS¹
, 
d¡
+
d¡S¹
, 
couÁ
); 
	}
}

88 
šlše
 

89 
	$u´v_checkCªG‘Bufãr
(cÚ¡ 
U_NAMESPACE_QUALIFIER
 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) {

90 if(
	`U_SUCCESS
(
”rÜCode
è&& 
s
.
	`isBogus
()) {

91 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

93 
	}
}

	@cstring.c

24 
	~<¡dlib.h
>

25 
	~<¡dio.h
>

26 
	~"unicode/uty³s.h
"

27 
	~"cmemÜy.h
"

28 
	~"c¡ršg.h
"

29 
	~"uas£¹.h
"

49 
U_CAPI
 
U_EXPORT2


50 
	$u´v_touµ”
(
c
) {

51 #ià
U_CHARSET_FAMILY
==
U_EBCDIC_FAMILY


52 if(('a'<=
c
 && c<='i') || ('j'<=c && c<='r') || ('s'<=c && c<='z')) {

53 
c
=()(c+('A'-'a'));

56 if('a'<=
c
 && c<='z') {

57 
c
=()(c+('A'-'a'));

60  
c
;

61 
	}
}

74 
U_CAPI
 
U_EXPORT2


75 
	$u´v_tŞow”
(
c
) {

76 #ià
U_CHARSET_FAMILY
==
U_EBCDIC_FAMILY


77 if(('A'<=
c
 && c<='I') || ('J'<=c && c<='R') || ('S'<=c && c<='Z')) {

78 
c
=()(c+('a'-'A'));

81 if('A'<=
c
 && c<='Z') {

82 
c
=()(c+('a'-'A'));

85  
c
;

86 
	}
}

89 
U_CAPI
 
U_EXPORT2


90 
	$u´v_asci™Şow”
(
c
) {

91 if(0x41<=
c
 && c<=0x5a) {

92 
c
=()(c+0x20);

94  
c
;

95 
	}
}

97 
U_CAPI
 
U_EXPORT2


98 
	$u´v_ebcdiùŞow”
(
c
) {

99 ifĞ(0xc1<=(
ušt8_t
)
c
 && (uint8_t)c<=0xc9) ||

100 (0xd1<=(
ušt8_t
)
c
 && (uint8_t)c<=0xd9) ||

101 (0xe2<=(
ušt8_t
)
c
 && (uint8_t)c<=0xe9)

103 
c
=()(c-0x40);

105  
c
;

106 
	}
}

109 
U_CAPI
 * 
U_EXPORT2


110 
	$T_CSŒšg_toLow”Ca£
(* 
¡r
)

112 * 
ÜigPŒ
 = 
¡r
;

114 ià(
¡r
) {

116 *
¡r
 = ()
	`u´v_tŞow”
(*str);

117 *(
¡r
++));

120  
ÜigPŒ
;

121 
	}
}

123 
U_CAPI
 * 
U_EXPORT2


124 
	$T_CSŒšg_toUµ”Ca£
(* 
¡r
)

126 * 
ÜigPŒ
 = 
¡r
;

128 ià(
¡r
) {

130 *
¡r
 = ()
	`u´v_touµ”
(*str);

131 *(
¡r
++));

134  
ÜigPŒ
;

135 
	}
}

143 
U_CAPI
 
št32_t
 
U_EXPORT2


144 
	$T_CSŒšg_š‹g”ToSŒšg
(* 
bufãr
, 
št32_t
 
v
, iÁ32_ˆ
¿dix
)

146 
tbuf
[30];

147 
št32_t
 
tbx
 = (
tbuf
);

148 
ušt8_t
 
dig™
;

149 
št32_t
 
Ëngth
 = 0;

150 
ušt32_t
 
uv®
;

152 
	`U_ASSERT
(
¿dix
>=2 &&„adix<=16);

153 
uv®
 = (
ušt32_t
è
v
;

154 if(
v
<0 && 
¿dix
 == 10) {

156 
uv®
 = (
ušt32_t
)(-
v
);

157 
bufãr
[
Ëngth
++] = '-';

160 
tbx
 = (
tbuf
)-1;

161 
tbuf
[
tbx
] = 0;

163 
dig™
 = (
ušt8_t
)(
uv®
 % 
¿dix
);

164 
tbuf
[--
tbx
] = ()(
	`T_CSŒšg_™osOff£t
(
dig™
));

165 
uv®
 = uv® / 
¿dix
;

166 } 
uv®
 != 0);

169 
	`u´v_¡rıy
(
bufãr
+
Ëngth
, 
tbuf
+
tbx
);

170 
Ëngth
 +ğ(
tbuf
è- 
tbx
 -1;

171  
Ëngth
;

172 
	}
}

181 
U_CAPI
 
št32_t
 
U_EXPORT2


182 
	$T_CSŒšg_št64ToSŒšg
(* 
bufãr
, 
št64_t
 
v
, 
ušt32_t
 
¿dix
)

184 
tbuf
[30];

185 
št32_t
 
tbx
 = (
tbuf
);

186 
ušt8_t
 
dig™
;

187 
št32_t
 
Ëngth
 = 0;

188 
ušt64_t
 
uv®
;

190 
	`U_ASSERT
(
¿dix
>=2 &&„adix<=16);

191 
uv®
 = (
ušt64_t
è
v
;

192 if(
v
<0 && 
¿dix
 == 10) {

194 
uv®
 = (
ušt64_t
)(-
v
);

195 
bufãr
[
Ëngth
++] = '-';

198 
tbx
 = (
tbuf
)-1;

199 
tbuf
[
tbx
] = 0;

201 
dig™
 = (
ušt8_t
)(
uv®
 % 
¿dix
);

202 
tbuf
[--
tbx
] = ()(
	`T_CSŒšg_™osOff£t
(
dig™
));

203 
uv®
 = uv® / 
¿dix
;

204 } 
uv®
 != 0);

207 
	`u´v_¡rıy
(
bufãr
+
Ëngth
, 
tbuf
+
tbx
);

208 
Ëngth
 +ğ(
tbuf
è- 
tbx
 -1;

209  
Ëngth
;

210 
	}
}

213 
U_CAPI
 
št32_t
 
U_EXPORT2


214 
	$T_CSŒšg_¡ršgToIÁeg”
(cÚ¡ *
š‹g”SŒšg
, 
št32_t
 
¿dix
)

216 *
’d
;

217  
	`u´v_¡¹oul
(
š‹g”SŒšg
, &
’d
, 
¿dix
);

219 
	}
}

221 
U_CAPI
 
U_EXPORT2


222 
	$T_CSŒšg_¡ricmp
(cÚ¡ *
¡r1
, cÚ¡ *
¡r2
) {

223 if(
¡r1
==
NULL
) {

224 if(
¡r2
==
NULL
) {

229 } if(
¡r2
==
NULL
) {

233 
rc
;

234 
c1
, 
c2
;

237 
c1
=()*
¡r1
;

238 
c2
=()*
¡r2
;

239 if(
c1
==0) {

240 if(
c2
==0) {

245 } if(
c2
==0) {

249 
rc
=()()
	`u´v_tŞow”
(
c1
)-()()u´v_tŞow”(
c2
);

250 if(
rc
!=0) {

251  
rc
;

254 ++
¡r1
;

255 ++
¡r2
;

258 
	}
}

260 
U_CAPI
 
U_EXPORT2


261 
	$T_CSŒšg_¡ºicmp
(cÚ¡ *
¡r1
, cÚ¡ *
¡r2
, 
ušt32_t
 
n
) {

262 if(
¡r1
==
NULL
) {

263 if(
¡r2
==
NULL
) {

268 } if(
¡r2
==
NULL
) {

272 
rc
;

273 
c1
, 
c2
;

275 ; 
n
--;) {

276 
c1
=()*
¡r1
;

277 
c2
=()*
¡r2
;

278 if(
c1
==0) {

279 if(
c2
==0) {

284 } if(
c2
==0) {

288 
rc
=()()
	`u´v_tŞow”
(
c1
)-()()u´v_tŞow”(
c2
);

289 if(
rc
!=0) {

290  
rc
;

293 ++
¡r1
;

294 ++
¡r2
;

299 
	}
}

301 
U_CAPI
 * 
U_EXPORT2


302 
	$u´v_¡rdup
(cÚ¡ *
¤c
) {

303 
size_t
 
Ën
 = 
	`u´v_¡¾’
(
¤c
) + 1;

304 *
dup
 = (*è
	`u´v_m®loc
(
Ën
);

306 ià(
dup
) {

307 
	`u´v_memıy
(
dup
, 
¤c
, 
Ën
);

310  
dup
;

311 
	}
}

313 
U_CAPI
 * 
U_EXPORT2


314 
	$u´v_¡ºdup
(cÚ¡ *
¤c
, 
št32_t
 
n
) {

315 *
dup
;

317 if(
n
 < 0) {

318 
dup
 = 
	`u´v_¡rdup
(
¤c
);

320 
dup
 = (*)
	`u´v_m®loc
(
n
+1);

321 ià(
dup
) {

322 
	`u´v_memıy
(
dup
, 
¤c
, 
n
);

323 
dup
[
n
] = 0;

327  
dup
;

328 
	}
}

	@cstring.h

25 #iâdeà
CSTRING_H


26 
	#CSTRING_H
 1

	)

28 
	~"unicode/uty³s.h
"

29 
	~<¡ršg.h
>

30 
	~<¡dlib.h
>

31 
	~<ùy³.h
>

33 
	#u´v_¡rıy
(
d¡
, 
¤c
è
U_STANDARD_CPP_NAMESPACE
 
	`¡rıy
(d¡, src)

	)

34 
	#u´v_¡ºıy
(
d¡
, 
¤c
, 
size
è
U_STANDARD_CPP_NAMESPACE
 
	`¡ºıy
(d¡, src, size)

	)

35 
	#u´v_¡¾’
(
¡r
è
U_STANDARD_CPP_NAMESPACE
 
	`¡¾’
(¡r)

	)

36 
	#u´v_¡rcmp
(
s1
, 
s2
è
U_STANDARD_CPP_NAMESPACE
 
	`¡rcmp
(s1, s2)

	)

37 
	#u´v_¡ºcmp
(
s1
, 
s2
, 
n
è
U_STANDARD_CPP_NAMESPACE
 
	`¡ºcmp
(s1, s2,‚)

	)

38 
	#u´v_¡rÿt
(
d¡
, 
¤c
è
U_STANDARD_CPP_NAMESPACE
 
	`¡rÿt
(d¡, src)

	)

39 
	#u´v_¡ºÿt
(
d¡
, 
¤c
, 
n
è
U_STANDARD_CPP_NAMESPACE
 
	`¡ºÿt
(d¡, src,‚)

	)

40 
	#u´v_¡rchr
(
s
, 
c
è
U_STANDARD_CPP_NAMESPACE
 
	`¡rchr
(s, c)

	)

41 
	#u´v_¡r¡r
(
s
, 
c
è
U_STANDARD_CPP_NAMESPACE
 
	`¡r¡r
(s, c)

	)

42 
	#u´v_¡¼chr
(
s
, 
c
è
U_STANDARD_CPP_NAMESPACE
 
	`¡¼chr
(s, c)

	)

44 
U_CAPI
 
U_EXPORT2


45 
u´v_touµ”
(
c
);

48 
U_CAPI
 
U_EXPORT2


49 
u´v_asci™Şow”
(
c
);

51 
U_CAPI
 
U_EXPORT2


52 
u´v_ebcdiùŞow”
(
c
);

54 #ià
U_CHARSET_FAMILY
==
U_ASCII_FAMILY


55 
	#u´v_tŞow”
 
u´v_asci™Şow”


	)

56 #–ià
U_CHARSET_FAMILY
==
U_EBCDIC_FAMILY


57 
	#u´v_tŞow”
 
u´v_ebcdiùŞow”


	)

59 #”rÜ 
U_CHARSET_FAMILY
 
is
 
nÙ
 
v®id


62 
	#u´v_¡¹od
(
sourû
, 
’d
è
U_STANDARD_CPP_NAMESPACE
 
	`¡¹od
(sourû,ƒnd)

	)

63 
	#u´v_¡¹oul
(
¡r
, 
’d
, 
ba£
è
U_STANDARD_CPP_NAMESPACE
 
	`¡¹oul
(¡r,ƒnd, ba£)

	)

64 
	#u´v_¡¹Ş
(
¡r
, 
’d
, 
ba£
è
U_STANDARD_CPP_NAMESPACE
 
	`¡¹Ş
(¡r,ƒnd, ba£)

	)

65 #ifdeà
U_WINDOWS


66 #ià
defšed
(
__BORLANDC__
)

67 
	#u´v_¡ricmp
(
¡r1
, 
¡r2
è
U_STANDARD_CPP_NAMESPACE
 
	`¡ricmp
(¡r1, sŒ2)

	)

68 
	#u´v_¡ºicmp
(
¡r1
, 
¡r2
, 
n
è
U_STANDARD_CPP_NAMESPACE
 
	`¡ºicmp
(¡r1, sŒ2,‚)

	)

70 
	#u´v_¡ricmp
(
¡r1
, 
¡r2
è
U_STANDARD_CPP_NAMESPACE
 
	`_¡ricmp
(¡r1, sŒ2)

	)

71 
	#u´v_¡ºicmp
(
¡r1
, 
¡r2
, 
n
è
U_STANDARD_CPP_NAMESPACE
 
	`_¡ºicmp
(¡r1, sŒ2,‚)

	)

73 #–ià
defšed
(
POSIX
)

74 
	#u´v_¡ricmp
(
¡r1
, 
¡r2
è
U_STANDARD_CPP_NAMESPACE
 
	`¡rÿ£cmp
(¡r1, sŒ2)

	)

75 
	#u´v_¡ºicmp
(
¡r1
, 
¡r2
, 
n
è
U_STANDARD_CPP_NAMESPACE
 
	`¡ºÿ£cmp
(¡r1, sŒ2,‚)

	)

77 
	#u´v_¡ricmp
(
¡r1
, 
¡r2
è
	`T_CSŒšg_¡ricmp
(¡r1, sŒ2)

	)

78 
	#u´v_¡ºicmp
(
¡r1
, 
¡r2
, 
n
è
	`T_CSŒšg_¡ºicmp
(¡r1, sŒ2,‚)

	)

83 
	#T_CSŒšg_™osOff£t
(
a
è(×)<=9?('0'+×)):('A'+×)-10))

	)

85 
U_CAPI
 * 
U_EXPORT2


86 
u´v_¡rdup
(cÚ¡ *
¤c
);

96 
U_CAPI
 * 
U_EXPORT2


97 
u´v_¡ºdup
(cÚ¡ *
¤c
, 
št32_t
 
n
);

99 
U_CAPI
 * 
U_EXPORT2


100 
T_CSŒšg_toLow”Ca£
(* 
¡r
);

102 
U_CAPI
 * 
U_EXPORT2


103 
T_CSŒšg_toUµ”Ca£
(* 
¡r
);

105 
U_CAPI
 
št32_t
 
U_EXPORT2


106 
T_CSŒšg_š‹g”ToSŒšg
(*
bufãr
, 
št32_t
 
n
, iÁ32_ˆ
¿dix
);

108 
U_CAPI
 
št32_t
 
U_EXPORT2


109 
T_CSŒšg_št64ToSŒšg
(*
bufãr
, 
št64_t
 
n
, 
ušt32_t
 
¿dix
);

111 
U_CAPI
 
št32_t
 
U_EXPORT2


112 
T_CSŒšg_¡ršgToIÁeg”
(cÚ¡ *
š‹g”SŒšg
, 
št32_t
 
¿dix
);

114 
U_CAPI
 
U_EXPORT2


115 
T_CSŒšg_¡ricmp
(cÚ¡ *
¡r1
, cÚ¡ *
¡r2
);

117 
U_CAPI
 
U_EXPORT2


118 
T_CSŒšg_¡ºicmp
(cÚ¡ *
¡r1
, cÚ¡ *
¡r2
, 
ušt32_t
 
n
);

	@cwchar.c

17 
	~"unicode/uty³s.h
"

19 #ià!
U_HAVE_WCSCPY


21 
	~"cwch¬.h
"

23 
U_CAPI
 
wch¬_t
 *
	$u´v_wcsÿt
(
wch¬_t
 *
d¡
, cÚ¡ wch¬_ˆ*
¤c
) {

24 
wch¬_t
 *
¡¬t
=
d¡
;

25 *
d¡
!=0) {

26 ++
d¡
;

28 (*
d¡
=*
¤c
)!=0) {

29 ++
d¡
;

30 ++
¤c
;

32  
¡¬t
;

33 
	}
}

35 
U_CAPI
 
wch¬_t
 *
	$u´v_wcsıy
(
wch¬_t
 *
d¡
, cÚ¡ wch¬_ˆ*
¤c
) {

36 
wch¬_t
 *
¡¬t
=
d¡
;

37 (*
d¡
=*
¤c
)!=0) {

38 ++
d¡
;

39 ++
¤c
;

41  
¡¬t
;

42 
	}
}

44 
U_CAPI
 
size_t
 
	$u´v_wc¦’
(cÚ¡ 
wch¬_t
 *
¤c
) {

45 cÚ¡ 
wch¬_t
 *
¡¬t
=
¤c
;

46 *
¤c
!=0) {

47 ++
¤c
;

49  
¤c
-
¡¬t
;

50 
	}
}

	@cwchar.h

21 #iâdeà
__CWCHAR_H__


22 
	#__CWCHAR_H__


	)

24 
	~<¡ršg.h
>

25 
	~<¡dlib.h
>

26 
	~"unicode/uty³s.h
"

29 #ià
U_HAVE_WCHAR_H


30 
	~<wch¬.h
>

38 #ià
U_HAVE_WCSCPY


39 
	#u´v_wcsıy
 
wcsıy


	)

40 
	#u´v_wcsÿt
 
wcsÿt


	)

41 
	#u´v_wc¦’
 
wc¦’


	)

43 
U_CAPI
 
wch¬_t
* 
U_EXPORT2


44 
u´v_wcsıy
(
wch¬_t
 *
d¡
, cÚ¡ wch¬_ˆ*
¤c
);

45 
U_CAPI
 
wch¬_t
* 
U_EXPORT2


46 
u´v_wcsÿt
(
wch¬_t
 *
d¡
, cÚ¡ wch¬_ˆ*
¤c
);

47 
U_CAPI
 
size_t
 
U_EXPORT2


48 
u´v_wc¦’
(cÚ¡ 
wch¬_t
 *
¤c
);

52 
	#u´v_wc¡ombs
(
mb¡r
, 
wc¡r
, 
couÁ
è
U_STANDARD_CPP_NAMESPACE
 
	`wc¡ombs
(mb¡r, wc¡r, couÁ)

	)

53 
	#u´v_mb¡owcs
(
wc¡r
, 
mb¡r
, 
couÁ
è
U_STANDARD_CPP_NAMESPACE
 
	`mb¡owcs
(wc¡r, mb¡r, couÁ)

	)

	@dictbe.cpp

8 
	~"unicode/uty³s.h
"

10 #ià!
UCONFIG_NO_BREAK_ITERATION


12 
	~"brk’g.h
"

13 
	~"diùbe.h
"

14 
	~"unicode/uni£t.h
"

15 
	~"unicode/ch¬™”.h
"

16 
	~"unicode/ubrk.h
"

17 
	~"uveùÜ.h
"

18 
	~"Œ›diù.h
"

20 
U_NAMESPACE_BEGIN


30 
	gDiùiÚ¬yB»akEngše
::
	$DiùiÚ¬yB»akEngše
(
ušt32_t
 
b»akTy³s
) {

31 
fTy³s
 = 
b»akTy³s
;

32 
	}
}

34 
	gDiùiÚ¬yB»akEngše
::~
	$DiùiÚ¬yB»akEngše
() {

35 
	}
}

37 
UBoŞ


38 
DiùiÚ¬yB»akEngše
::
	$hªdËs
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
) const {

39  (
b»akTy³
 >ğ0 && b»akTy³ < 32 && (((
ušt32_t
)1 << b»akTy³è& 
fTy³s
)

40 && 
fS‘
.
	`cÚšs
(
c
));

41 
	}
}

43 
št32_t


44 
	gDiùiÚ¬yB»akEngše
::
	$fšdB»aks
Ğ
UText
 *
‹xt
,

45 
št32_t
 
¡¬tPos
,

46 
št32_t
 
’dPos
,

47 
UBoŞ
 
»v”£
,

48 
št32_t
 
b»akTy³
,

49 
USck
 &
foundB»aks
 ) const {

50 
št32_t
 
»suÉ
 = 0;

53 
št32_t
 
¡¬t
 = (št32_t)
	`u‹xt_g‘N©iveIndex
(
‹xt
);

54 
št32_t
 
cu¼’t
;

55 
št32_t
 
¿ngeS¹
;

56 
št32_t
 
¿ngeEnd
;

57 
UCh¬32
 
c
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

58 ià(
»v”£
) {

59 
UBoŞ
 
isDiù
 = 
fS‘
.
	`cÚšs
(
c
);

60 (
cu¼’t
 = (
št32_t
)
	`u‹xt_g‘N©iveIndex
(
‹xt
)è> 
¡¬tPos
 && 
isDiù
) {

61 
c
 = 
	`u‹xt_´evious32
(
‹xt
);

62 
isDiù
 = 
fS‘
.
	`cÚšs
(
c
);

64 
¿ngeS¹
 = (
cu¼’t
 < 
¡¬tPos
è? s¹Po : cu¼’t+(
isDiù
 ? 0 : 1);

65 
¿ngeEnd
 = 
¡¬t
 + 1;

68 (
cu¼’t
 = (
št32_t
)
	`u‹xt_g‘N©iveIndex
(
‹xt
)è< 
’dPos
 && 
fS‘
.
	`cÚšs
(
c
)) {

69 
	`u‹xt_Ãxt32
(
‹xt
);

70 
c
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

72 
¿ngeS¹
 = 
¡¬t
;

73 
¿ngeEnd
 = 
cu¼’t
;

75 ià(
b»akTy³
 >ğ0 && b»akTy³ < 32 && (((
ušt32_t
)1 << b»akTy³è& 
fTy³s
)) {

76 
»suÉ
 = 
	`divideUpDiùiÚ¬yRªge
(
‹xt
, 
¿ngeS¹
, 
¿ngeEnd
, 
foundB»aks
);

77 
	`u‹xt_£tN©iveIndex
(
‹xt
, 
cu¼’t
);

80  
»suÉ
;

81 
	}
}

84 
	gDiùiÚ¬yB»akEngše
::
	$£tCh¬aù”s
ĞcÚ¡ 
UnicodeS‘
 &
£t
 ) {

85 
fS‘
 = 
£t
;

87 
fS‘
.
	`com·ù
();

88 
	}
}

105 
	#POSSIBLE_WORD_LIST_MAX
 20

	)

107 şas 
	cPossibËWÜd
 {

108 
	m´iv©e
:

110 
št32_t
 
Ëngths
[
POSSIBLE_WORD_LIST_MAX
];

111 
	mcouÁ
;

112 
št32_t
 
	m´efix
;

113 
št32_t
 
	moff£t
;

114 
	mm¬k
;

115 
	mcu¼’t
;

117 
	mpublic
:

118 
PossibËWÜd
();

119 ~
PossibËWÜd
();

122 
ÿndid©es
Ğ
UText
 *
‹xt
, cÚ¡ 
Tr›WÜdDiùiÚ¬y
 *
diù
, 
št32_t
 
¿ngeEnd
 );

125 
št32_t
 
acû±M¬ked
Ğ
UText
 *
‹xt
 );

129 
UBoŞ
 
backUp
Ğ
UText
 *
‹xt
 );

132 
št32_t
 
lÚge¡P»fix
();

135 
m¬kCu¼’t
();

138 
šlše


139 
	gPossibËWÜd
::
	$PossibËWÜd
() {

140 
off£t
 = -1;

141 
	}
}

143 
šlše


144 
	gPossibËWÜd
::~
	$PossibËWÜd
() {

145 
	}
}

147 
šlše
 

148 
PossibËWÜd
::
	$ÿndid©es
Ğ
UText
 *
‹xt
, cÚ¡ 
Tr›WÜdDiùiÚ¬y
 *
diù
, 
št32_t
 
¿ngeEnd
 ) {

150 
št32_t
 
¡¬t
 = (št32_t)
	`u‹xt_g‘N©iveIndex
(
‹xt
);

151 ià(
¡¬t
 !ğ
off£t
) {

152 
off£t
 = 
¡¬t
;

153 
´efix
 = 
diù
->
	`m©ches
(
‹xt
, 
¿ngeEnd
-
¡¬t
, 
Ëngths
, 
couÁ
, (lengths)/(lengths[0]));

155 ià(
couÁ
 <= 0) {

156 
	`u‹xt_£tN©iveIndex
(
‹xt
, 
¡¬t
);

159 ià(
couÁ
 > 0) {

160 
	`u‹xt_£tN©iveIndex
(
‹xt
, 
¡¬t
+
Ëngths
[
couÁ
-1]);

162 
cu¼’t
 = 
couÁ
-1;

163 
m¬k
 = 
cu¼’t
;

164  
couÁ
;

165 
	}
}

167 
šlše
 
št32_t


168 
	gPossibËWÜd
::
	$acû±M¬ked
Ğ
UText
 *
‹xt
 ) {

169 
	`u‹xt_£tN©iveIndex
(
‹xt
, 
off£t
 + 
Ëngths
[
m¬k
]);

170  
Ëngths
[
m¬k
];

171 
	}
}

173 
šlše
 
UBoŞ


174 
	gPossibËWÜd
::
	$backUp
Ğ
UText
 *
‹xt
 ) {

175 ià(
cu¼’t
 > 0) {

176 
	`u‹xt_£tN©iveIndex
(
‹xt
, 
off£t
 + 
Ëngths
[--
cu¼’t
]);

177  
TRUE
;

179  
FALSE
;

180 
	}
}

182 
šlše
 
št32_t


183 
	gPossibËWÜd
::
	$lÚge¡P»fix
() {

184  
´efix
;

185 
	}
}

187 
šlše
 

188 
	gPossibËWÜd
::
	$m¬kCu¼’t
() {

189 
m¬k
 = 
cu¼’t
;

190 
	}
}

193 
	#THAI_LOOKAHEAD
 3

	)

196 
	#THAI_ROOT_COMBINE_THRESHOLD
 3

	)

200 
	#THAI_PREFIX_COMBINE_THRESHOLD
 3

	)

203 
	#THAI_PAIYANNOI
 0x0E2F

	)

206 
	#THAI_MAIYAMOK
 0x0E46

	)

209 
	#THAI_MIN_WORD
 2

	)

212 
	#THAI_MIN_WORD_SPAN
 (
THAI_MIN_WORD
 * 2)

	)

214 
	gThaiB»akEngše
::
	$ThaiB»akEngše
(cÚ¡ 
Tr›WÜdDiùiÚ¬y
 *
adİtDiùiÚ¬y
, 
UE¼ÜCode
 &
¡©us
)

215 : 
	`DiùiÚ¬yB»akEngše
((1<<
UBRK_WORD
è| (1<<
UBRK_LINE
)),

216 
	$fDiùiÚ¬y
(
adİtDiùiÚ¬y
)

218 
fThaiWÜdS‘
.
	`­¶yP©‹º
(
	`UNICODE_STRING_SIMPLE
("[[:Thai:]&[:LšeB»ak=SA:]]"), 
¡©us
);

219 ià(
	`U_SUCCESS
(
¡©us
)) {

220 
	`£tCh¬aù”s
(
fThaiWÜdS‘
);

222 
fM¬kS‘
.
	`­¶yP©‹º
(
	`UNICODE_STRING_SIMPLE
("[[:Thai:]&[:LšeB»ak=SA:]&[:M:]]"), 
¡©us
);

223 
fM¬kS‘
.
	`add
(0x0020);

224 
fEndWÜdS‘
 = 
fThaiWÜdS‘
;

225 
fEndWÜdS‘
.
	`»move
(0x0E31);

226 
fEndWÜdS‘
.
	`»move
(0x0E40, 0x0E44);

227 
fBegšWÜdS‘
.
	`add
(0x0E01, 0x0E2E);

228 
fBegšWÜdS‘
.
	`add
(0x0E40, 0x0E44);

229 
fSuffixS‘
.
	`add
(
THAI_PAIYANNOI
);

230 
fSuffixS‘
.
	`add
(
THAI_MAIYAMOK
);

233 
fM¬kS‘
.
	`com·ù
();

234 
fEndWÜdS‘
.
	`com·ù
();

235 
fBegšWÜdS‘
.
	`com·ù
();

236 
fSuffixS‘
.
	`com·ù
();

237 
	}
}

239 
	gThaiB»akEngše
::~
	$ThaiB»akEngše
() {

240 
d–‘e
 
fDiùiÚ¬y
;

241 
	}
}

243 
št32_t


244 
	gThaiB»akEngše
::
	$divideUpDiùiÚ¬yRªge
Ğ
UText
 *
‹xt
,

245 
št32_t
 
¿ngeS¹
,

246 
št32_t
 
¿ngeEnd
,

247 
USck
 &
foundB»aks
 ) const {

248 ià((
¿ngeEnd
 - 
¿ngeS¹
è< 
THAI_MIN_WORD_SPAN
) {

252 
ušt32_t
 
wÜdsFound
 = 0;

253 
št32_t
 
wÜdL’gth
;

254 
št32_t
 
cu¼’t
;

255 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

256 
PossibËWÜd
 
wÜds
[
THAI_LOOKAHEAD
];

257 
UCh¬32
 
uc
;

259 
	`u‹xt_£tN©iveIndex
(
‹xt
, 
¿ngeS¹
);

261 
	`U_SUCCESS
(
¡©us
è&& (
cu¼’t
 = (
št32_t
)
	`u‹xt_g‘N©iveIndex
(
‹xt
)è< 
¿ngeEnd
) {

262 
wÜdL’gth
 = 0;

265 
ÿndid©es
 = 
wÜds
[
wÜdsFound
%
THAI_LOOKAHEAD
].
	`ÿndid©es
(
‹xt
, 
fDiùiÚ¬y
, 
¿ngeEnd
);

268 ià(
ÿndid©es
 == 1) {

269 
wÜdL’gth
 = 
wÜds
[
wÜdsFound
%
THAI_LOOKAHEAD
].
	`acû±M¬ked
(
‹xt
);

270 
wÜdsFound
 += 1;

274 ià(
ÿndid©es
 > 1) {

276 ià((
št32_t
)
	`u‹xt_g‘N©iveIndex
(
‹xt
è>ğ
¿ngeEnd
) {

277 
foundBe¡
;

280 
wÜdsM©ched
 = 1;

281 ià(
wÜds
[(
wÜdsFound
+1)%
THAI_LOOKAHEAD
].
	`ÿndid©es
(
‹xt
, 
fDiùiÚ¬y
, 
¿ngeEnd
) > 0) {

282 ià(
wÜdsM©ched
 < 2) {

284 
wÜds
[
wÜdsFound
%
THAI_LOOKAHEAD
].
	`m¬kCu¼’t
();

285 
wÜdsM©ched
 = 2;

289 ià((
št32_t
)
	`u‹xt_g‘N©iveIndex
(
‹xt
è>ğ
¿ngeEnd
) {

290 
foundBe¡
;

296 ià(
wÜds
[(
wÜdsFound
+2)%
THAI_LOOKAHEAD
].
	`ÿndid©es
(
‹xt
, 
fDiùiÚ¬y
, 
¿ngeEnd
)) {

297 
wÜds
[
wÜdsFound
%
THAI_LOOKAHEAD
].
	`m¬kCu¼’t
();

298 
foundBe¡
;

301 
wÜds
[(
wÜdsFound
+1)%
THAI_LOOKAHEAD
].
	`backUp
(
‹xt
));

304 
wÜds
[
wÜdsFound
%
THAI_LOOKAHEAD
].
	`backUp
(
‹xt
));

305 
foundBe¡
:

306 
wÜdL’gth
 = 
wÜds
[
wÜdsFound
%
THAI_LOOKAHEAD
].
	`acû±M¬ked
(
‹xt
);

307 
wÜdsFound
 += 1;

315 ià((
št32_t
)
	`u‹xt_g‘N©iveIndex
(
‹xt
è< 
¿ngeEnd
 && 
wÜdL’gth
 < 
THAI_ROOT_COMBINE_THRESHOLD
) {

319 ià(
wÜds
[
wÜdsFound
%
THAI_LOOKAHEAD
].
	`ÿndid©es
(
‹xt
, 
fDiùiÚ¬y
, 
¿ngeEnd
) <= 0

320 && (
wÜdL’gth
 == 0

321 || 
wÜds
[
wÜdsFound
%
THAI_LOOKAHEAD
].
	`lÚge¡P»fix
(è< 
THAI_PREFIX_COMBINE_THRESHOLD
)) {

324 
št32_t
 
»maššg
 = 
¿ngeEnd
 - (
cu¼’t
+
wÜdL’gth
);

325 
UCh¬32
 
pc
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

326 
št32_t
 
ch¬s
 = 0;

328 
	`u‹xt_Ãxt32
(
‹xt
);

329 
uc
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

332 
ch¬s
 += 1;

333 ià(--
»maššg
 <= 0) {

336 ià(
fEndWÜdS‘
.
	`cÚšs
(
pc
è&& 
fBegšWÜdS‘
.cÚšs(
uc
)) {

342 
ÿndid©es
 = 
wÜds
[(
wÜdsFound
+1)%
THAI_LOOKAHEAD
].
	`ÿndid©es
(
‹xt
, 
fDiùiÚ¬y
, 
¿ngeEnd
);

343 
	`u‹xt_£tN©iveIndex
(
‹xt
, 
cu¼’t
+
wÜdL’gth
+
ch¬s
);

344 ià(
ÿndid©es
 > 0) {

348 
pc
 = 
uc
;

352 ià(
wÜdL’gth
 <= 0) {

353 
wÜdsFound
 += 1;

357 
wÜdL’gth
 +ğ
ch¬s
;

361 
	`u‹xt_£tN©iveIndex
(
‹xt
, 
cu¼’t
+
wÜdL’gth
);

366 
št32_t
 
cu¼Pos
;

367 (
cu¼Pos
 = (
št32_t
)
	`u‹xt_g‘N©iveIndex
(
‹xt
)è< 
¿ngeEnd
 && 
fM¬kS‘
.
	`cÚšs
(
	`u‹xt_cu¼’t32
(text))) {

368 
	`u‹xt_Ãxt32
(
‹xt
);

369 
wÜdL’gth
 +ğ(
št32_t
)
	`u‹xt_g‘N©iveIndex
(
‹xt
è- 
cu¼Pos
;

376 ià((
št32_t
)
	`u‹xt_g‘N©iveIndex
(
‹xt
è< 
¿ngeEnd
 && 
wÜdL’gth
 > 0) {

377 ià(
wÜds
[
wÜdsFound
%
THAI_LOOKAHEAD
].
	`ÿndid©es
(
‹xt
, 
fDiùiÚ¬y
, 
¿ngeEnd
) <= 0

378 && 
fSuffixS‘
.
	`cÚšs
(
uc
 = 
	`u‹xt_cu¼’t32
(
‹xt
))) {

379 ià(
uc
 =ğ
THAI_PAIYANNOI
) {

380 ià(!
fSuffixS‘
.
	`cÚšs
(
	`u‹xt_´evious32
(
‹xt
))) {

382 
	`u‹xt_Ãxt32
(
‹xt
);

383 
	`u‹xt_Ãxt32
(
‹xt
);

384 
wÜdL’gth
 += 1;

385 
uc
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

389 
	`u‹xt_Ãxt32
(
‹xt
);

392 ià(
uc
 =ğ
THAI_MAIYAMOK
) {

393 ià(
	`u‹xt_´evious32
(
‹xt
è!ğ
THAI_MAIYAMOK
) {

395 
	`u‹xt_Ãxt32
(
‹xt
);

396 
	`u‹xt_Ãxt32
(
‹xt
);

397 
wÜdL’gth
 += 1;

401 
	`u‹xt_Ãxt32
(
‹xt
);

406 
	`u‹xt_£tN©iveIndex
(
‹xt
, 
cu¼’t
+
wÜdL’gth
);

411 ià(
wÜdL’gth
 > 0) {

412 
foundB»aks
.
	`push
((
cu¼’t
+
wÜdL’gth
), 
¡©us
);

417 ià(
foundB»aks
.
	`³eki
(è>ğ
¿ngeEnd
) {

418 (è
foundB»aks
.
	`pİi
();

419 
wÜdsFound
 -= 1;

422  
wÜdsFound
;

423 
	}
}

425 
	gU_NAMESPACE_END


	@dictbe.h

8 #iâdeà
DICTBE_H


9 
	#DICTBE_H


	)

11 
	~"unicode/uty³s.h
"

12 
	~"unicode/uni£t.h
"

13 
	~"unicode/u‹xt.h
"

15 
	~"brk’g.h
"

17 
U_NAMESPACE_BEGIN


19 
şass
 
	gTr›WÜdDiùiÚ¬y
;

32 şas 
	cDiùiÚ¬yB»akEngše
 : 
public
 
LªguageB»akEngše
 {

33 
´iv©e
:

39 
UnicodeS‘
 
fS‘
;

46 
ušt32_t
 
	mfTy³s
;

52 
DiùiÚ¬yB»akEngše
();

54 
	mpublic
:

61 
DiùiÚ¬yB»akEngše
Ğ
ušt32_t
 
b»akTy³s
 );

66 
	mvœtu®
 ~
DiùiÚ¬yB»akEngše
();

77 
vœtu®
 
UBoŞ
 
	$hªdËs
Ğ
UCh¬32
 
c
, 
št32_t
 
b»akTy³
 ) const;

93 
vœtu®
 
št32_t
 
	$fšdB»aks
Ğ
UText
 *
‹xt
,

94 
št32_t
 
¡¬tPos
,

95 
št32_t
 
’dPos
,

96 
UBoŞ
 
»v”£
,

97 
št32_t
 
b»akTy³
,

98 
USck
 &
foundB»aks
 ) const;

100 
´Ùeùed
:

107 
vœtu®
 
	`£tCh¬aù”s
ĞcÚ¡ 
UnicodeS‘
 &
£t
 );

125 
vœtu®
 
št32_t
 
	$divideUpDiùiÚ¬yRªge
Ğ
UText
 *
‹xt
,

126 
št32_t
 
¿ngeS¹
,

127 
št32_t
 
¿ngeEnd
,

128 
USck
 &
foundB»aks
 ) const = 0;

143 şas 
	cThaiB»akEngše
 : 
public
 
DiùiÚ¬yB»akEngše
 {

144 
´iv©e
:

150 
UnicodeS‘
 
fThaiWÜdS‘
;

151 
UnicodeS‘
 
fEndWÜdS‘
;

152 
UnicodeS‘
 
fBegšWÜdS‘
;

153 
UnicodeS‘
 
fSuffixS‘
;

154 
UnicodeS‘
 
fM¬kS‘
;

155 cÚ¡ 
Tr›WÜdDiùiÚ¬y
 *
fDiùiÚ¬y
;

157 
public
:

165 
	`ThaiB»akEngše
(cÚ¡ 
Tr›WÜdDiùiÚ¬y
 *
adİtDiùiÚ¬y
, 
UE¼ÜCode
 &
¡©us
);

170 
vœtu®
 ~
	`ThaiB»akEngše
();

172 
´Ùeùed
:

182 
vœtu®
 
št32_t
 
	$divideUpDiùiÚ¬yRªge
Ğ
UText
 *
‹xt
,

183 
št32_t
 
¿ngeS¹
,

184 
št32_t
 
¿ngeEnd
,

185 
USck
 &
foundB»aks
 ) const;

190 
U_NAMESPACE_END


	@dtintrv.cpp

13 
	~"unicode/dtšŒv.h
"

16 
U_NAMESPACE_BEGIN


18 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
D©eIÁ”v®
)

23 
D©eIÁ”v®
::
	$D©eIÁ”v®
(
UD©e
 
äom
, UD©
to
)

24 : 
	`äomD©e
(
äom
),

25 
	$toD©e
(
to
)

26 {
	}
}

29 
	gD©eIÁ”v®
::~
	$D©eIÁ”v®
(){
	}
}

32 
D©eIÁ”v®
::
	$D©eIÁ”v®
(cÚ¡ 
D©eIÁ”v®
& 
Ùh”
)

33 : 
	$UObjeù
(
Ùh”
) {

34 *
this
 = 
Ùh”
;

35 
	}
}

38 
	gD©eIÁ”v®
&

39 
	gD©eIÁ”v®
::
İ”©Ü
=(cÚ¡ 
D©eIÁ”v®
& 
Ùh”
) {

40 iàĞ
this
 !ğ&
Ùh”
 ) {

41 
äomD©e
 = 
Ùh”
.fromDate;

42 
	gtoD©e
 = 
Ùh”
.
toD©e
;

44  *
	gthis
;

48 
D©eIÁ”v®
*

49 
	gD©eIÁ”v®
::
	$şÚe
() const {

50  
Ãw
 
	`D©eIÁ”v®
(*
this
);

51 
	}
}

54 
UBoŞ


55 
	gD©eIÁ”v®
::
İ”©Ü
==(cÚ¡ 
D©eIÁ”v®
& 
Ùh”
) const {

56  ( 
äomD©e
 =ğ
Ùh”
.äomD©&& 
toD©e
 == other.toDate );

60 
	gU_NAMESPACE_END


	@errorcode.cpp

17 
	~"unicode/uty³s.h
"

18 
	~"unicode/”rÜcode.h
"

20 
U_NAMESPACE_BEGIN


22 
UE¼ÜCode
 
	gE¼ÜCode
::
	$»£t
() {

23 
UE¼ÜCode
 
code
 = 
”rÜCode
;

24 
”rÜCode
 = 
U_ZERO_ERROR
;

25  
code
;

26 
	}
}

28 
	gE¼ÜCode
::
	$as£¹Sucûss
() const {

29 if(
	`isFau»
()) {

30 
	`hªdËFau»
();

32 
	}
}

34 cÚ¡ * 
	gE¼ÜCode
::
	$”rÜName
() const {

35  
	`u_”rÜName
(
”rÜCode
);

36 
	}
}

38 
	gU_NAMESPACE_END


	@filterednormalizer2.cpp

17 
	~"unicode/uty³s.h
"

19 #ià!
UCONFIG_NO_NORMALIZATION


21 
	~"unicode/nÜm®iz”2.h
"

22 
	~"unicode/uni£t.h
"

23 
	~"unicode/uni¡r.h
"

24 
	~"unicode/unÜm.h
"

25 
	~"ıputs.h
"

27 
U_NAMESPACE_BEGIN


29 
	gUnicodeSŒšg
 &

30 
	gF‹»dNÜm®iz”2
::
	$nÜm®ize
(cÚ¡ 
UnicodeSŒšg
 &
¤c
,

31 
UnicodeSŒšg
 &
de¡
,

32 
UE¼ÜCode
 &
”rÜCode
) const {

33 
	`u´v_checkCªG‘Bufãr
(
¤c
, 
”rÜCode
);

34 if(
	`U_FAILURE
(
”rÜCode
)) {

35 
de¡
.
	`£tToBogus
();

36  
de¡
;

38 if(&
de¡
==&
¤c
) {

39 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

40  
de¡
;

42 
de¡
.
	`»move
();

43  
	`nÜm®ize
(
¤c
, 
de¡
, 
USET_SPAN_SIMPLE
, 
”rÜCode
);

44 
	}
}

53 
	gUnicodeSŒšg
 &

54 
	gF‹»dNÜm®iz”2
::
	$nÜm®ize
(cÚ¡ 
UnicodeSŒšg
 &
¤c
,

55 
UnicodeSŒšg
 &
de¡
,

56 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
,

57 
UE¼ÜCode
 &
”rÜCode
) const {

58 
UnicodeSŒšg
 
‹mpDe¡
;

59 
št32_t
 
´evS·nLim™
=0;…»vS·nLim™<
¤c
.
	`Ëngth
();) {

60 
št32_t
 
¥ªLim™
=
£t
.
	`¥ª
(
¤c
, 
´evS·nLim™
, 
¥ªCÚd™iÚ
);

61 
št32_t
 
¥ªL’gth
=
¥ªLim™
-
´evS·nLim™
;

62 if(
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
) {

63 if(
¥ªL’gth
!=0) {

64 
de¡
.
	`­³nd
(
¤c
, 
´evS·nLim™
, 
¥ªL’gth
);

66 
¥ªCÚd™iÚ
=
USET_SPAN_SIMPLE
;

68 if(
¥ªL’gth
!=0) {

71 
de¡
.
	`­³nd
(
nÜm2
.
	`nÜm®ize
(
¤c
.
	`‹mpSubSŒšgB‘w“n
(
´evS·nLim™
, 
¥ªLim™
),

72 
‹mpDe¡
, 
”rÜCode
));

73 if(
	`U_FAILURE
(
”rÜCode
)) {

77 
¥ªCÚd™iÚ
=
USET_SPAN_NOT_CONTAINED
;

79 
´evS·nLim™
=
¥ªLim™
;

81  
de¡
;

82 
	}
}

84 
	gUnicodeSŒšg
 &

85 
	gF‹»dNÜm®iz”2
::
	$nÜm®izeSecÚdAndAµ’d
(
UnicodeSŒšg
 &
fœ¡
,

86 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

87 
UE¼ÜCode
 &
”rÜCode
) const {

88  
	`nÜm®izeSecÚdAndAµ’d
(
fœ¡
, 
£cÚd
, 
TRUE
, 
”rÜCode
);

89 
	}
}

91 
	gUnicodeSŒšg
 &

92 
	gF‹»dNÜm®iz”2
::
	$­³nd
(
UnicodeSŒšg
 &
fœ¡
,

93 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

94 
UE¼ÜCode
 &
”rÜCode
) const {

95  
	`nÜm®izeSecÚdAndAµ’d
(
fœ¡
, 
£cÚd
, 
FALSE
, 
”rÜCode
);

96 
	}
}

98 
	gUnicodeSŒšg
 &

99 
	gF‹»dNÜm®iz”2
::
	$nÜm®izeSecÚdAndAµ’d
(
UnicodeSŒšg
 &
fœ¡
,

100 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

101 
UBoŞ
 
doNÜm®ize
,

102 
UE¼ÜCode
 &
”rÜCode
) const {

103 
	`u´v_checkCªG‘Bufãr
(
fœ¡
, 
”rÜCode
);

104 
	`u´v_checkCªG‘Bufãr
(
£cÚd
, 
”rÜCode
);

105 if(
	`U_FAILURE
(
”rÜCode
)) {

106  
fœ¡
;

108 if(&
fœ¡
==&
£cÚd
) {

109 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

110  
fœ¡
;

112 if(
fœ¡
.
	`isEm±y
()) {

113 if(
doNÜm®ize
) {

114  
	`nÜm®ize
(
£cÚd
, 
fœ¡
, 
”rÜCode
);

116  
fœ¡
=
£cÚd
;

120 
št32_t
 
´efixLim™
=
£t
.
	`¥ª
(
£cÚd
, 0, 
USET_SPAN_SIMPLE
);

121 if(
´efixLim™
!=0) {

122 
UnicodeSŒšg
 
	`´efix
(
£cÚd
.
	`‹mpSubSŒšg
(0, 
´efixLim™
));

123 
št32_t
 
suffixS¹
=
£t
.
	`¥ªBack
(
fœ¡
, 
INT32_MAX
, 
USET_SPAN_SIMPLE
);

124 if(
suffixS¹
==0) {

125 if(
doNÜm®ize
) {

126 
nÜm2
.
	`nÜm®izeSecÚdAndAµ’d
(
fœ¡
, 
´efix
, 
”rÜCode
);

128 
nÜm2
.
	`­³nd
(
fœ¡
, 
´efix
, 
”rÜCode
);

131 
UnicodeSŒšg
 
	`middË
(
fœ¡
, 
suffixS¹
, 
INT32_MAX
);

132 if(
doNÜm®ize
) {

133 
nÜm2
.
	`nÜm®izeSecÚdAndAµ’d
(
middË
, 
´efix
, 
”rÜCode
);

135 
nÜm2
.
	`­³nd
(
middË
, 
´efix
, 
”rÜCode
);

137 
fœ¡
.
	`»¶aû
(
suffixS¹
, 
INT32_MAX
, 
middË
);

140 if(
´efixLim™
<
£cÚd
.
	`Ëngth
()) {

141 
UnicodeSŒšg
 
	`»¡
(
£cÚd
.
	`‹mpSubSŒšg
(
´efixLim™
, 
INT32_MAX
));

142 if(
doNÜm®ize
) {

143 
	`nÜm®ize
(
»¡
, 
fœ¡
, 
USET_SPAN_NOT_CONTAINED
, 
”rÜCode
);

145 
fœ¡
.
	`­³nd
(
»¡
);

148  
fœ¡
;

149 
	}
}

151 
UBoŞ


152 
	gF‹»dNÜm®iz”2
::
	$g‘Decompos™iÚ
(
UCh¬32
 
c
, 
UnicodeSŒšg
 &
decompos™iÚ
) const {

153  
£t
.
	`cÚšs
(
c
è&& 
nÜm2
.
	`g‘Decompos™iÚ
(c, 
decompos™iÚ
);

154 
	}
}

156 
UBoŞ


157 
	gF‹»dNÜm®iz”2
::
	$isNÜm®ized
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const {

158 
	`u´v_checkCªG‘Bufãr
(
s
, 
”rÜCode
);

159 if(
	`U_FAILURE
(
”rÜCode
)) {

160  
FALSE
;

162 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
=
USET_SPAN_SIMPLE
;

163 
št32_t
 
´evS·nLim™
=0;…»vS·nLim™<
s
.
	`Ëngth
();) {

164 
št32_t
 
¥ªLim™
=
£t
.
	`¥ª
(
s
, 
´evS·nLim™
, 
¥ªCÚd™iÚ
);

165 if(
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
) {

166 
¥ªCÚd™iÚ
=
USET_SPAN_SIMPLE
;

168 ifĞ!
nÜm2
.
	`isNÜm®ized
(
s
.
	`‹mpSubSŒšgB‘w“n
(
´evS·nLim™
, 
¥ªLim™
), 
”rÜCode
) ||

169 
	`U_FAILURE
(
”rÜCode
)

171  
FALSE
;

173 
¥ªCÚd™iÚ
=
USET_SPAN_NOT_CONTAINED
;

175 
´evS·nLim™
=
¥ªLim™
;

177  
TRUE
;

178 
	}
}

180 
UNÜm®iz©iÚCheckResuÉ


181 
	gF‹»dNÜm®iz”2
::
	$quickCheck
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const {

182 
	`u´v_checkCªG‘Bufãr
(
s
, 
”rÜCode
);

183 if(
	`U_FAILURE
(
”rÜCode
)) {

184  
UNORM_MAYBE
;

186 
UNÜm®iz©iÚCheckResuÉ
 
»suÉ
=
UNORM_YES
;

187 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
=
USET_SPAN_SIMPLE
;

188 
št32_t
 
´evS·nLim™
=0;…»vS·nLim™<
s
.
	`Ëngth
();) {

189 
št32_t
 
¥ªLim™
=
£t
.
	`¥ª
(
s
, 
´evS·nLim™
, 
¥ªCÚd™iÚ
);

190 if(
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
) {

191 
¥ªCÚd™iÚ
=
USET_SPAN_SIMPLE
;

193 
UNÜm®iz©iÚCheckResuÉ
 
qcResuÉ
=

194 
nÜm2
.
	`quickCheck
(
s
.
	`‹mpSubSŒšgB‘w“n
(
´evS·nLim™
, 
¥ªLim™
), 
”rÜCode
);

195 if(
	`U_FAILURE
(
”rÜCode
è|| 
qcResuÉ
==
UNORM_NO
) {

196  
qcResuÉ
;

197 } if(
qcResuÉ
==
UNORM_MAYBE
) {

198 
»suÉ
=
qcResuÉ
;

200 
¥ªCÚd™iÚ
=
USET_SPAN_NOT_CONTAINED
;

202 
´evS·nLim™
=
¥ªLim™
;

204  
»suÉ
;

205 
	}
}

207 
št32_t


208 
	gF‹»dNÜm®iz”2
::
	$¥ªQuickCheckYes
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const {

209 
	`u´v_checkCªG‘Bufãr
(
s
, 
”rÜCode
);

210 if(
	`U_FAILURE
(
”rÜCode
)) {

213 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
=
USET_SPAN_SIMPLE
;

214 
št32_t
 
´evS·nLim™
=0;…»vS·nLim™<
s
.
	`Ëngth
();) {

215 
št32_t
 
¥ªLim™
=
£t
.
	`¥ª
(
s
, 
´evS·nLim™
, 
¥ªCÚd™iÚ
);

216 if(
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
) {

217 
¥ªCÚd™iÚ
=
USET_SPAN_SIMPLE
;

219 
št32_t
 
yesLim™
=

220 
´evS·nLim™
+

221 
nÜm2
.
	`¥ªQuickCheckYes
(

222 
s
.
	`‹mpSubSŒšgB‘w“n
(
´evS·nLim™
, 
¥ªLim™
), 
”rÜCode
);

223 if(
	`U_FAILURE
(
”rÜCode
è|| 
yesLim™
<
¥ªLim™
) {

224  
yesLim™
;

226 
¥ªCÚd™iÚ
=
USET_SPAN_NOT_CONTAINED
;

228 
´evS·nLim™
=
¥ªLim™
;

230  
s
.
	`Ëngth
();

231 
	}
}

233 
UBoŞ


234 
	gF‹»dNÜm®iz”2
::
	$hasBound¬yBefÜe
(
UCh¬32
 
c
) const {

235  !
£t
.
	`cÚšs
(
c
è|| 
nÜm2
.
	`hasBound¬yBefÜe
(c);

236 
	}
}

238 
UBoŞ


239 
	gF‹»dNÜm®iz”2
::
	$hasBound¬yAá”
(
UCh¬32
 
c
) const {

240  !
£t
.
	`cÚšs
(
c
è|| 
nÜm2
.
	`hasBound¬yAá”
(c);

241 
	}
}

243 
UBoŞ


244 
	gF‹»dNÜm®iz”2
::
	$isIÃ¹
(
UCh¬32
 
c
) const {

245  !
£t
.
	`cÚšs
(
c
è|| 
nÜm2
.
	`isIÃ¹
(c);

246 
	}
}

248 
U_NAMESPACE_END


252 
U_NAMESPACE_USE


254 
U_DRAFT
 
UNÜm®iz”2
 * 
U_EXPORT2


255 
	$unÜm2_İ’F‹»d
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
, cÚ¡ 
US‘
 *
f‹rS‘
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

256 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

257  
NULL
;

259 if(
f‹rS‘
==
NULL
) {

260 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

261  
NULL
;

263 
NÜm®iz”2
 *
â2
=
Ãw
 
	`F‹»dNÜm®iz”2
(*(NÜm®iz”2 *)
nÜm2
,

264 *
UnicodeS‘
::
	`äomUS‘
(
f‹rS‘
));

265 if(
â2
==
NULL
) {

266 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

268  (
UNÜm®iz”2
 *)
â2
;

269 
	}
}

	@hash.h

11 #iâdeà
HASH_H


12 
	#HASH_H


	)

14 
	~"unicode/uni¡r.h
"

15 
	~"unicode/uobjeù.h
"

16 
	~"uhash.h
"

18 
U_NAMESPACE_BEGIN


27 şas 
	cU_COMMON_API
 
	mHashbË
 : 
public
 
UMemÜy
 {

28 
UHashbË
* 
hash
;

29 
UHashbË
 
	mhashObj
;

31 
šlše
 
š™
(
UHashFunùiÚ
 *
keyHash
, 
UKeyCom·¿tÜ
 *
keyComp
, 
UV®ueCom·¿tÜ
 *
v®ueComp
, 
UE¼ÜCode
& 
¡©us
);

33 
	mpublic
:

39 
HashbË
(
UBoŞ
 
ignÜeKeyCa£
, 
UE¼ÜCode
& 
¡©us
);

47 
HashbË
(
UKeyCom·¿tÜ
 *
keyComp
, 
UV®ueCom·¿tÜ
 *
v®ueComp
, 
UE¼ÜCode
& 
¡©us
);

53 
HashbË
(
UE¼ÜCode
& 
¡©us
);

59 
HashbË
();

65 ~
HashbË
();

67 
UObjeùD–‘”
 *
£tV®ueD–‘”
(UObjeùD–‘” *
â
);

69 
št32_t
 
	$couÁ
() const;

71 * 
	`put
(cÚ¡ 
UnicodeSŒšg
& 
key
, * 
v®ue
, 
UE¼ÜCode
& 
¡©us
);

73 
št32_t
 
	`puti
(cÚ¡ 
UnicodeSŒšg
& 
key
, iÁ32_ˆ
v®ue
, 
UE¼ÜCode
& 
¡©us
);

75 * 
	$g‘
(cÚ¡ 
UnicodeSŒšg
& 
key
) const;

77 
št32_t
 
	$g‘i
(cÚ¡ 
UnicodeSŒšg
& 
key
) const;

79 * 
	`»move
(cÚ¡ 
UnicodeSŒšg
& 
key
);

81 
št32_t
 
	`»movei
(cÚ¡ 
UnicodeSŒšg
& 
key
);

83 
	`»moveAÎ
();

85 cÚ¡ 
UHashEËm’t
* 
	$fšd
(cÚ¡ 
UnicodeSŒšg
& 
key
) const;

87 cÚ¡ 
UHashEËm’t
* 
	$ÃxtEËm’t
(
št32_t
& 
pos
) const;

89 
UKeyCom·¿tÜ
* 
	`£tKeyCom·¿tÜ
(UKeyCom·¿tÜ*
keyComp
);

91 
UV®ueCom·¿tÜ
* 
	`£tV®ueCom·¿tÜ
(UV®ueCom·¿tÜ* 
v®ueComp
);

93 
UBoŞ
 
	$equ®s
(cÚ¡ 
HashbË
& 
th©
) const;

94 
´iv©e
:

95 
	`HashbË
(cÚ¡ 
HashbË
 &
Ùh”
);

96 
HashbË
 &
İ”©Ü
=(cÚ¡ HashbË &
Ùh”
);

103 
šlše
 
HashbË
::
	$š™
(
UHashFunùiÚ
 *
keyHash
, 
UKeyCom·¿tÜ
 *
keyComp
,

104 
UV®ueCom·¿tÜ
 *
v®ueComp
, 
UE¼ÜCode
& 
¡©us
) {

105 ià(
	`U_FAILURE
(
¡©us
)) {

108 
	`uhash_š™
(&
hashObj
, 
keyHash
, 
keyComp
, 
v®ueComp
, &
¡©us
);

109 ià(
	`U_SUCCESS
(
¡©us
)) {

110 
hash
 = &
hashObj
;

111 
	`uhash_£tKeyD–‘”
(
hash
, 
uhash_d–‘eUnicodeSŒšg
);

113 
	}
}

115 
šlše
 
	gHashbË
::
	$HashbË
(
UKeyCom·¿tÜ
 *
keyComp
, 
UV®ueCom·¿tÜ
 *
v®ueComp
,

116 
UE¼ÜCode
& 
¡©us
è: 
	$hash
(0) {

117 
	`š™
Ğ
uhash_hashUnicodeSŒšg
, 
keyComp
, 
v®ueComp
, 
¡©us
);

118 
	}
}

119 
šlše
 
	gHashbË
::
	$HashbË
(
UBoŞ
 
ignÜeKeyCa£
, 
UE¼ÜCode
& 
¡©us
)

120 : 
	$hash
(0)

122 
	`š™
(
ignÜeKeyCa£
 ? 
uhash_hashCa£ËssUnicodeSŒšg


123 : 
uhash_hashUnicodeSŒšg
,

124 
ignÜeKeyCa£
 ? 
uhash_com·»Ca£ËssUnicodeSŒšg


125 : 
uhash_com·»UnicodeSŒšg
,

126 
NULL
,

127 
¡©us
);

128 
	}
}

130 
šlše
 
	gHashbË
::
	$HashbË
(
UE¼ÜCode
& 
¡©us
)

131 : 
	$hash
(0)

133 
	`š™
(
uhash_hashUnicodeSŒšg
, 
uhash_com·»UnicodeSŒšg
, 
NULL
, 
¡©us
);

134 
	}
}

136 
šlše
 
	gHashbË
::
	$HashbË
()

137 : 
	$hash
(0)

139 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

140 
	`š™
(
uhash_hashUnicodeSŒšg
, 
uhash_com·»UnicodeSŒšg
, 
NULL
, 
¡©us
);

141 
	}
}

143 
šlše
 
	gHashbË
::~
	$HashbË
() {

144 ià(
hash
 !ğ
NULL
) {

145 
	`uhash_şo£
(
hash
);

147 
	}
}

149 
šlše
 
UObjeùD–‘”
 *
	gHashbË
::
	$£tV®ueD–‘”
(
UObjeùD–‘”
 *
â
) {

150  
	`uhash_£tV®ueD–‘”
(
hash
, 
â
);

151 
	}
}

153 
šlše
 
št32_t
 
	gHashbË
::
	$couÁ
() const {

154  
	`uhash_couÁ
(
hash
);

155 
	}
}

157 
šlše
 * 
	gHashbË
::
	$put
(cÚ¡ 
UnicodeSŒšg
& 
key
, * 
v®ue
, 
UE¼ÜCode
& 
¡©us
) {

158  
	`uhash_put
(
hash
, 
Ãw
 
	`UnicodeSŒšg
(
key
), 
v®ue
, &
¡©us
);

159 
	}
}

161 
šlše
 
št32_t
 
	gHashbË
::
	$puti
(cÚ¡ 
UnicodeSŒšg
& 
key
, 
št32_t
 
v®ue
, 
UE¼ÜCode
& 
¡©us
) {

162  
	`uhash_puti
(
hash
, 
Ãw
 
	`UnicodeSŒšg
(
key
), 
v®ue
, &
¡©us
);

163 
	}
}

165 
šlše
 * 
	gHashbË
::
	$g‘
(cÚ¡ 
UnicodeSŒšg
& 
key
) const {

166  
	`uhash_g‘
(
hash
, &
key
);

167 
	}
}

169 
šlše
 
št32_t
 
	gHashbË
::
	$g‘i
(cÚ¡ 
UnicodeSŒšg
& 
key
) const {

170  
	`uhash_g‘i
(
hash
, &
key
);

171 
	}
}

173 
šlše
 * 
	gHashbË
::
	$»move
(cÚ¡ 
UnicodeSŒšg
& 
key
) {

174  
	`uhash_»move
(
hash
, &
key
);

175 
	}
}

177 
šlše
 
št32_t
 
	gHashbË
::
	$»movei
(cÚ¡ 
UnicodeSŒšg
& 
key
) {

178  
	`uhash_»movei
(
hash
, &
key
);

179 
	}
}

181 
šlše
 cÚ¡ 
UHashEËm’t
* 
	gHashbË
::
	$fšd
(cÚ¡ 
UnicodeSŒšg
& 
key
) const {

182  
	`uhash_fšd
(
hash
, &
key
);

183 
	}
}

185 
šlše
 cÚ¡ 
UHashEËm’t
* 
	gHashbË
::
	$ÃxtEËm’t
(
št32_t
& 
pos
) const {

186  
	`uhash_ÃxtEËm’t
(
hash
, &
pos
);

187 
	}
}

189 
šlše
 
	gHashbË
::
	$»moveAÎ
() {

190 
	`uhash_»moveAÎ
(
hash
);

191 
	}
}

193 
šlše
 
UKeyCom·¿tÜ
* 
	gHashbË
::
	$£tKeyCom·¿tÜ
(
UKeyCom·¿tÜ
*
keyComp
){

194  
	`uhash_£tKeyCom·¿tÜ
(
hash
, 
keyComp
);

195 
	}
}

197 
šlše
 
UV®ueCom·¿tÜ
* 
	gHashbË
::
	$£tV®ueCom·¿tÜ
(
UV®ueCom·¿tÜ
* 
v®ueComp
){

198  
	`uhash_£tV®ueCom·¿tÜ
(
hash
, 
v®ueComp
);

199 
	}
}

201 
šlše
 
UBoŞ
 
	gHashbË
::
	$equ®s
(cÚ¡ 
HashbË
& 
th©
)const{

202  
	`uhash_equ®s
(
hash
, 
th©
.hash);

203 
	}
}

204 
	gU_NAMESPACE_END


	@icucfg.h

5 
	#STDC_HEADERS
 1

	)

35 
	#HAVE_WCHAR_H
 1

	)

38 
	#SIZEOF_WCHAR_T
 4

	)

41 
	#HAVE_INTTYPES_H
 1

	)

53 
	#HAVE_LIBM
 1

	)

56 
	#HAVE_LIBPTHREAD
 1

	)

	@icudataver.c

10 
	~"unicode/uty³s.h
"

11 
	~"unicode/icud©av”.h
"

12 
	~"unicode/uv”siÚ.h
"

13 
	~"unicode/u»s.h
"

14 
	~"u»simp.h
"

15 
	~"cmemÜy.h
"

20 
UBoŞ
 
hasICUSTDBundË
();

22 
UBoŞ
 
	$hasICUSTDBundË
() {

23 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

24 
UBoŞ
 
»suÉ
 = 
TRUE
;

26 
UResourûBundË
 *
icu¡dbundË
 = 
	`u»s_İ’Dœeù
(
NULL
, 
U_ICU_STD_BUNDLE
, &
¡©us
);

27 ià(
	`U_SUCCESS
(
¡©us
)) {

28 
»suÉ
 = 
TRUE
;

30 
»suÉ
 = 
FALSE
;

33 
	`u»s_şo£
(
icu¡dbundË
);

35  
»suÉ
;

36 
	}
}

38 
U_CAPI
 
U_EXPORT2
 
	$u_g‘D©aV”siÚ
(
UV”siÚInfo
 
d©aV”siÚFlš
, 
UE¼ÜCode
 *
¡©us
) {

39 
UResourûBundË
 *
icud©¬es
 = 
NULL
;

41 ià(
	`U_FAILURE
(*
¡©us
)) {

45 ià(
d©aV”siÚFlš
 !ğ
NULL
) {

46 
icud©¬es
 = 
	`u»s_İ’Dœeù
(
NULL
, 
U_ICU_VERSION_BUNDLE
 , 
¡©us
);

47 ià(
	`U_SUCCESS
(*
¡©us
)) {

48 
	`u»s_g‘V”siÚByKey
(
icud©¬es
, 
U_ICU_DATA_KEY
, 
d©aV”siÚFlš
, 
¡©us
);

50 
	`u»s_şo£
(
icud©¬es
);

52 
	}
}

54 
U_CAPI
 
UBoŞ
 
U_EXPORT2
 
	$u_isD©aOld”
(
UV”siÚInfo
 
d©aV”siÚFlš
, 
UBoŞ
 *
isModif›dFlš
, 
UE¼ÜCode
 *
¡©us
) {

55 
UBoŞ
 
»suÉ
 = 
TRUE
;

56 
UV”siÚInfo
 
d©aV”siÚ
;

57 
UV”siÚInfo
 
wœedV”siÚ
;

59 ià(
	`U_FAILURE
(*
¡©us
)) {

60  
»suÉ
;

63 
	`u_g‘D©aV”siÚ
(
d©aV”siÚ
, 
¡©us
);

64 ià(
	`U_SUCCESS
(*
¡©us
)) {

65 
	`u_v”siÚFromSŒšg
(
wœedV”siÚ
, 
U_ICU_DATA_VERSION
);

67 ià(
	`u´v_memcmp
(
d©aV”siÚ
, 
wœedV”siÚ
, (
UV”siÚInfo
)) >= 0) {

68 
»suÉ
 = 
FALSE
;

71 ià(
d©aV”siÚFlš
 !ğ
NULL
) {

72 
	`u´v_memıy
(
d©aV”siÚFlš
, 
d©aV”siÚ
, (
UV”siÚInfo
));

75 ià(
	`hasICUSTDBundË
()) {

76 *
isModif›dFlš
 = 
FALSE
;

78 *
isModif›dFlš
 = 
TRUE
;

82  
»suÉ
;

83 
	}
}

	@icuplug.c

16 
	~"unicode/icu¶ug.h
"

17 
	~"icu¶ugimp.h
"

18 
	~"c¡ršg.h
"

19 
	~"cmemÜy.h
"

20 
	~"putimp.h
"

21 
	~"uşn.h
"

22 
	~<¡dio.h
>

24 #iâdeà
UPLUG_TRACE


25 
	#UPLUG_TRACE
 0

	)

28 #ià
UPLUG_TRACE


29 
	~<¡dio.h
>

30 
	#DBG
(
x
è
	`årštf
(
¡d”r
, "%s:%d: ",
__FILE__
,
__LINE__
); 
årštf
 
	)
x

37 
	sUPlugD©a
 {

38 
UPlugEÁrypošt
 *
	m’Œypošt
;

39 
ušt32_t
 
	m¡ruùSize
;

40 
ušt32_t
 
	mtok’
;

41 *
	mlib
;

42 
	mlibName
[
UPLUG_NAME_MAX
];

43 
	msym
[
UPLUG_NAME_MAX
];

44 
	mcÚfig
[
UPLUG_NAME_MAX
];

45 *
	mcÚ‹xt
;

46 
	mÇme
[
UPLUG_NAME_MAX
];

47 
UPlugLev–
 
	mËv–
;

48 
UBoŞ
 
	mawa™šgLßd
;

49 
UBoŞ
 
	mdÚtUÆßd
;

50 
UE¼ÜCode
 
	m¶ugšStus
;

55 
	#UPLUG_LIBRARY_INITIAL_COUNT
 8

	)

56 
	#UPLUG_PLUGIN_INITIAL_COUNT
 12

	)

66 
št32_t
 
	$u¶ug_»moveEÁryAt
(*
li¡
, 
št32_t
 
li¡Size
, iÁ32_ˆ
memb”Size
, iÁ32_ˆ
™emToRemove
) {

67 
ušt8_t
 *
by‹PŒ
 = (ušt8_ˆ*)
li¡
;

70 if(
li¡Size
<1) {

71  
li¡Size
;

75 if(
li¡Size
 > 
™emToRemove
+1) {

76 
	`memmove
(
by‹PŒ
+(
™emToRemove
*
memb”Size
), bytePtr+((itemToRemove+1)*memberSize), memberSize);

79  
li¡Size
-1;

80 
	}
}

85 #ià
U_ENABLE_DYLOAD


90 
	gUPlugLib¿ry
;

96 
	sUPlugLib¿ry
 {

97 *
	mlib
;

98 
	mÇme
[
UPLUG_NAME_MAX
];

99 
ušt32_t
 
	m»f
;

100 } 
	tUPlugLib¿ry
;

102 
UPlugLib¿ry
 
	g¡©icLib¿ryLi¡
[
UPLUG_LIBRARY_INITIAL_COUNT
];

103 
UPlugLib¿ry
 * 
	glib¿ryLi¡
 = 
¡©icLib¿ryLi¡
;

104 
št32_t
 
	glib¿ryCouÁ
 = 0;

105 
št32_t
 
	glib¿ryMax
 = 
UPLUG_LIBRARY_INITIAL_COUNT
;

112 
št32_t
 
	$£¬chFÜLib¿ryName
(cÚ¡ *
libName
) {

113 
št32_t
 
i
;

115 
i
=0;i<
lib¿ryCouÁ
;i++) {

116 if(!
	`u´v_¡rcmp
(
libName
, 
lib¿ryLi¡
[
i
].
Çme
)) {

117  
i
;

121 
	}
}

123 
št32_t
 
	$£¬chFÜLib¿ry
(*
lib
) {

124 
št32_t
 
i
;

126 
i
=0;i<
lib¿ryCouÁ
;i++) {

127 if(
lib
==
lib¿ryLi¡
[
i
].lib) {

128  
i
;

132 
	}
}

134 
U_INTERNAL
 * 
U_EXPORT2


135 
	$u¶ug_fšdLib¿ry
(*
lib
, 
UE¼ÜCode
 *
¡©us
) {

136 
št32_t
 
libEÁ
;

137 *
»t
 = 
NULL
;

138 if(
	`U_FAILURE
(*
¡©us
)) {

139  
NULL
;

141 
libEÁ
 = 
	`£¬chFÜLib¿ry
(
lib
);

142 if(
libEÁ
!=-1) {

143 
»t
 = 
lib¿ryLi¡
[
libEÁ
].
Çme
;

145 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

147  
»t
;

148 
	}
}

150 
U_INTERNAL
 * 
U_EXPORT2


151 
	$u¶ug_İ’Lib¿ry
(cÚ¡ *
libName
, 
UE¼ÜCode
 *
¡©us
) {

152 
št32_t
 
libEÁry
 = -1;

153 *
lib
 = 
NULL
;

155 if(
	`U_FAILURE
(*
¡©us
)è 
NULL
;

157 
libEÁry
 = 
	`£¬chFÜLib¿ryName
(
libName
);

158 if(
libEÁry
 == -1) {

159 
libEÁry
 = 
lib¿ryCouÁ
++;

160 if(
lib¿ryCouÁ
 >ğ
lib¿ryMax
) {

162 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

163 #ià
UPLUG_TRACE


164 
	`DBG
((
¡d”r
, "u¶ug_İ’Lib¿ry(è- ouˆoàlib¿ry slÙ (max %d)\n", 
lib¿ryMax
));

166  
NULL
;

170 
lib¿ryLi¡
[
libEÁry
].
lib
 = 
	`u´v_dl_İ’
(
libName
, 
¡©us
);

171 #ià
UPLUG_TRACE


172 
	`DBG
((
¡d”r
, "u¶ug_İ’Lib¿ry(%s,%sèlibEÁry %d,†ib %p\n", 
libName
, 
	`u_”rÜName
(*
¡©us
), 
libEÁry
, 
lib
));

175 if(
lib¿ryLi¡
[
libEÁry
].
lib
 =ğ
NULL
 || 
	`U_FAILURE
(*
¡©us
)) {

177 
lib¿ryLi¡
[
libEÁry
].
lib
 = 
NULL
;

178 
lib¿ryLi¡
[
libEÁry
].
Çme
[0] = 0;

179 #ià
UPLUG_TRACE


180 
	`DBG
((
¡d”r
, "u¶ug_İ’Lib¿ry(%s,%sèlibEÁry %d,†ib %p\n", 
libName
, 
	`u_”rÜName
(*
¡©us
), 
libEÁry
, 
lib
));

183 
lib¿ryCouÁ
--;

186 
	`u´v_¡ºıy
(
lib¿ryLi¡
[
libEÁry
].
Çme
,
libName
,
UPLUG_NAME_MAX
);

187 
lib¿ryLi¡
[
libEÁry
].
»f
=1;

188 
lib
 = 
lib¿ryLi¡
[
libEÁry
].lib;

192 
lib
 = 
lib¿ryLi¡
[
libEÁry
].lib;

193 
lib¿ryLi¡
[
libEÁry
].
»f
++;

195  
lib
;

196 
	}
}

198 
U_INTERNAL
 
U_EXPORT2


199 
	$u¶ug_şo£Lib¿ry
(*
lib
, 
UE¼ÜCode
 *
¡©us
) {

200 
št32_t
 
i
;

202 #ià
UPLUG_TRACE


203 
	`DBG
((
¡d”r
, "u¶ug_şo£Lib¿ry(%p,%sèli¡ %p\n", 
lib
, 
	`u_”rÜName
(*
¡©us
), (*)
lib¿ryLi¡
));

205 if(
	`U_FAILURE
(*
¡©us
)) ;

207 
i
=0;i<
lib¿ryCouÁ
;i++) {

208 if(
lib
==
lib¿ryLi¡
[
i
].lib) {

209 if(--(
lib¿ryLi¡
[
i
].
»f
) == 0) {

210 
	`u´v_dl_şo£
(
lib¿ryLi¡
[
i
].
lib
, 
¡©us
);

211 
lib¿ryCouÁ
 = 
	`u¶ug_»moveEÁryAt
(
lib¿ryLi¡
,†ib¿ryCouÁ, (*lib¿ryLi¡), 
i
);

216 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

217 
	}
}

221 
UPlugD©a
 
	g¶ugšLi¡
[
UPLUG_PLUGIN_INITIAL_COUNT
];

222 
št32_t
 
	g¶ugšCouÁ
 = 0;

227 
št32_t
 
	$u¶ug_¶ugšNumb”
(
UPlugD©a
* 
d
) {

228 
UPlugD©a
 *
·¡Plug
 = &
¶ugšLi¡
[
¶ugšCouÁ
];

229 if(
d
<=
¶ugšLi¡
) {

231 } if(
d
>=
·¡Plug
) {

232  
¶ugšCouÁ
;

234  (
d
-
¶ugšLi¡
)/(pluginList[0]);

236 
	}
}

239 
U_CAPI
 
UPlugD©a
 * 
U_EXPORT2


240 
	$u¶ug_ÃxtPlug
(
UPlugD©a
 *
´iÜ
) {

241 if(
´iÜ
==
NULL
) {

242  
¶ugšLi¡
;

244 
UPlugD©a
 *
ÃxtPlug
 = &
´iÜ
[1];

245 
UPlugD©a
 *
·¡Plug
 = &
¶ugšLi¡
[
¶ugšCouÁ
];

247 if(
ÃxtPlug
>=
·¡Plug
) {

248  
NULL
;

250  
ÃxtPlug
;

253 
	}
}

260 
	$u¶ug_ÿÎPlug
(
UPlugD©a
 *
¶ug
, 
UPlugR—sÚ
 
»asÚ
, 
UE¼ÜCode
 *
¡©us
) {

261 
UPlugTok’R‘uº
 
tok’
;

262 if(
¶ug
==
NULL
||
	`U_FAILURE
(*
¡©us
)) {

265 
tok’
 = (*(
¶ug
->
’Œypošt
))Õlug, 
»asÚ
, 
¡©us
);

266 if(
tok’
!=
UPLUG_TOKEN
) {

267 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

269 
	}
}

272 
	$u¶ug_uÆßdPlug
(
UPlugD©a
 *
¶ug
, 
UE¼ÜCode
 *
¡©us
) {

273 if(
¶ug
->
awa™šgLßd
) {

274 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

277 if(
	`U_SUCCESS
(
¶ug
->
¶ugšStus
)) {

279 
	`u¶ug_ÿÎPlug
(
¶ug
, 
UPLUG_REASON_UNLOAD
, 
¡©us
);

281 
	}
}

283 
	$u¶ug_qu”yPlug
(
UPlugD©a
 *
¶ug
, 
UE¼ÜCode
 *
¡©us
) {

284 if(!
¶ug
->
awa™šgLßd
 || !Õlug->
Ëv–
 =ğ
UPLUG_LEVEL_UNKNOWN
) ) {

285 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

288 
¶ug
->
Ëv–
 = 
UPLUG_LEVEL_INVALID
;

289 
	`u¶ug_ÿÎPlug
(
¶ug
, 
UPLUG_REASON_QUERY
, 
¡©us
);

290 if(
	`U_SUCCESS
(*
¡©us
)) {

291 if(
¶ug
->
Ëv–
 =ğ
UPLUG_LEVEL_INVALID
) {

292 
¶ug
->
¶ugšStus
 = 
U_PLUGIN_DIDNT_SET_LEVEL
;

293 
¶ug
->
awa™šgLßd
 = 
FALSE
;

296 
¶ug
->
¶ugšStus
 = 
U_INTERNAL_PROGRAM_ERROR
;

297 
¶ug
->
awa™šgLßd
 = 
FALSE
;

299 
	}
}

302 
	$u¶ug_lßdPlug
(
UPlugD©a
 *
¶ug
, 
UE¼ÜCode
 *
¡©us
) {

303 if(!
¶ug
->
awa™šgLßd
 || (¶ug->
Ëv–
 < 
UPLUG_LEVEL_LOW
) ) {

304 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

307 
	`u¶ug_ÿÎPlug
(
¶ug
, 
UPLUG_REASON_LOAD
, 
¡©us
);

308 
¶ug
->
awa™šgLßd
 = 
FALSE
;

309 if(!
	`U_SUCCESS
(*
¡©us
)) {

310 
¶ug
->
¶ugšStus
 = 
U_INTERNAL_PROGRAM_ERROR
;

312 
	}
}

314 
UPlugD©a
 *
	$u¶ug_®loÿ‹Em±yPlug
(
UE¼ÜCode
 *
¡©us
)

316 
UPlugD©a
 *
¶ug
 = 
NULL
;

318 if(
	`U_FAILURE
(*
¡©us
)) {

319  
NULL
;

322 if(
¶ugšCouÁ
 =ğ
UPLUG_PLUGIN_INITIAL_COUNT
) {

323 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

324  
NULL
;

327 
¶ug
 = &
¶ugšLi¡
[
¶ugšCouÁ
++];

329 
¶ug
->
tok’
 = 
UPLUG_TOKEN
;

330 
¶ug
->
¡ruùSize
 = (
UPlugD©a
);

331 
¶ug
->
Çme
[0]=0;

332 
¶ug
->
Ëv–
 = 
UPLUG_LEVEL_UNKNOWN
;

333 
¶ug
->
awa™šgLßd
 = 
TRUE
;

334 
¶ug
->
dÚtUÆßd
 = 
FALSE
;

335 
¶ug
->
¶ugšStus
 = 
U_ZERO_ERROR
;

336 
¶ug
->
libName
[0] = 0;

337 
¶ug
->
cÚfig
[0]=0;

338 
¶ug
->
sym
[0]=0;

339 
¶ug
->
lib
=
NULL
;

340 
¶ug
->
’Œypošt
=
NULL
;

343  
¶ug
;

344 
	}
}

346 
UPlugD©a
 *
	$u¶ug_®loÿ‹Plug
(
UPlugEÁrypošt
 *
’Œypošt
, cÚ¡ *
cÚfig
, *
lib
, cÚ¡ *
symName
,

347 
UE¼ÜCode
 *
¡©us
) {

348 
UPlugD©a
 *
¶ug
;

350 if(
	`U_FAILURE
(*
¡©us
)) {

351  
NULL
;

354 
¶ug
 = 
	`u¶ug_®loÿ‹Em±yPlug
(
¡©us
);

355 if(
cÚfig
!=
NULL
) {

356 
	`u´v_¡ºıy
(
¶ug
->
cÚfig
, cÚfig, 
UPLUG_NAME_MAX
);

358 
¶ug
->
cÚfig
[0] = 0;

361 if(
symName
!=
NULL
) {

362 
	`u´v_¡ºıy
(
¶ug
->
sym
, 
symName
, 
UPLUG_NAME_MAX
);

364 
¶ug
->
sym
[0] = 0;

367 
¶ug
->
’Œypošt
 =ƒntrypoint;

368 
¶ug
->
lib
 =†ib;

369 
	`u¶ug_qu”yPlug
(
¶ug
, 
¡©us
);

371  
¶ug
;

372 
	}
}

374 
	$u¶ug_d—Îoÿ‹Plug
(
UPlugD©a
 *
¶ug
, 
UE¼ÜCode
 *
¡©us
) {

375 
UE¼ÜCode
 
subStus
 = 
U_ZERO_ERROR
;

376 if(!
¶ug
->
dÚtUÆßd
) {

377 #ià
U_ENABLE_DYLOAD


378 
	`u¶ug_şo£Lib¿ry
(
¶ug
->
lib
, &
subStus
);

381 
¶ug
->
lib
 = 
NULL
;

382 if(
	`U_SUCCESS
(*
¡©us
è&& 
	`U_FAILURE
(
subStus
)) {

383 *
¡©us
 = 
subStus
;

386 if(
	`U_SUCCESS
(*
¡©us
)) {

388 
¶ugšCouÁ
 = 
	`u¶ug_»moveEÁryAt
(
¶ugšLi¡
,…lugšCouÁ, (
¶ug
[0]), 
	`u¶ug_¶ugšNumb”
(plug));

391 
¶ug
->
awa™šgLßd
=
FALSE
;

392 
¶ug
->
’Œypošt
=0;

393 
¶ug
->
dÚtUÆßd
=
TRUE
;

395 
	}
}

397 
	$u¶ug_doUÆßdPlug
(
UPlugD©a
 *
¶ugToRemove
, 
UE¼ÜCode
 *
¡©us
) {

398 if(
¶ugToRemove
 !ğ
NULL
) {

399 
	`u¶ug_uÆßdPlug
(
¶ugToRemove
, 
¡©us
);

400 
	`u¶ug_d—Îoÿ‹Plug
(
¶ugToRemove
, 
¡©us
);

402 
	}
}

404 
U_CAPI
 
U_EXPORT2


405 
	$u¶ug_»movePlug
(
UPlugD©a
 *
¶ug
, 
UE¼ÜCode
 *
¡©us
) {

406 
UPlugD©a
 *
cursÜ
 = 
NULL
;

407 
UPlugD©a
 *
¶ugToRemove
 = 
NULL
;

408 if(
	`U_FAILURE
(*
¡©us
)) ;

410 
cursÜ
=
¶ugšLi¡
;cursÜ!=
NULL
;) {

411 if(
cursÜ
==
¶ug
) {

412 
¶ugToRemove
 = 
¶ug
;

413 
cursÜ
=
NULL
;

415 
cursÜ
 = 
	`u¶ug_ÃxtPlug
(cursor);

419 
	`u¶ug_doUÆßdPlug
(
¶ugToRemove
, 
¡©us
);

420 
	}
}

425 
U_CAPI
 
U_EXPORT2


426 
	$u¶ug_£tPlugNoUÆßd
(
UPlugD©a
 *
d©a
, 
UBoŞ
 
dÚtUÆßd
)

428 
d©a
->
dÚtUÆßd
 = dontUnload;

429 
	}
}

432 
U_CAPI
 
U_EXPORT2


433 
	$u¶ug_£tPlugLev–
(
UPlugD©a
 *
d©a
, 
UPlugLev–
 
Ëv–
) {

434 
d©a
->
Ëv–
 =†evel;

435 
	}
}

438 
U_CAPI
 
UPlugLev–
 
U_EXPORT2


439 
	$u¶ug_g‘PlugLev–
(
UPlugD©a
 *
d©a
) {

440  
d©a
->
Ëv–
;

441 
	}
}

444 
U_CAPI
 
U_EXPORT2


445 
	$u¶ug_£tPlugName
(
UPlugD©a
 *
d©a
, cÚ¡ *
Çme
) {

446 
	`u´v_¡ºıy
(
d©a
->
Çme
,‚ame, 
UPLUG_NAME_MAX
);

447 
	}
}

450 
U_CAPI
 cÚ¡ * 
U_EXPORT2


451 
	$u¶ug_g‘PlugName
(
UPlugD©a
 *
d©a
) {

452  
d©a
->
Çme
;

453 
	}
}

456 
U_CAPI
 cÚ¡ * 
U_EXPORT2


457 
	$u¶ug_g‘SymbŞName
(
UPlugD©a
 *
d©a
) {

458  
d©a
->
sym
;

459 
	}
}

461 
U_CAPI
 cÚ¡ * 
U_EXPORT2


462 
	$u¶ug_g‘Lib¿ryName
(
UPlugD©a
 *
d©a
, 
UE¼ÜCode
 *
¡©us
) {

463 if(
d©a
->
libName
[0]) {

464  
d©a
->
libName
;

466 #ià
U_ENABLE_DYLOAD


467  
	`u¶ug_fšdLib¿ry
(
d©a
->
lib
, 
¡©us
);

469  
NULL
;

472 
	}
}

474 
U_CAPI
 * 
U_EXPORT2


475 
	$u¶ug_g‘Lib¿ry
(
UPlugD©a
 *
d©a
) {

476  
d©a
->
lib
;

477 
	}
}

479 
U_CAPI
 * 
U_EXPORT2


480 
	$u¶ug_g‘CÚ‹xt
(
UPlugD©a
 *
d©a
) {

481  
d©a
->
cÚ‹xt
;

482 
	}
}

485 
U_CAPI
 
U_EXPORT2


486 
	$u¶ug_£tCÚ‹xt
(
UPlugD©a
 *
d©a
, *
cÚ‹xt
) {

487 
d©a
->
cÚ‹xt
 = context;

488 
	}
}

490 
U_CAPI
 cÚ¡ * 
U_EXPORT2


491 
	$u¶ug_g‘CÚfigu¿tiÚ
(
UPlugD©a
 *
d©a
) {

492  
d©a
->
cÚfig
;

493 
	}
}

495 
U_INTERNAL
 
UPlugD©a
* 
U_EXPORT2


496 
	$u¶ug_g‘PlugIÁ”Çl
(
št32_t
 
n
) {

497 if(
n
 <0 ||‚ >ğ
¶ugšCouÁ
) {

498  
NULL
;

500  &(
¶ugšLi¡
[
n
]);

502 
	}
}

505 
U_CAPI
 
UE¼ÜCode
 
U_EXPORT2


506 
	$u¶ug_g‘PlugLßdStus
(
UPlugD©a
 *
¶ug
) {

507  
¶ug
->
¶ugšStus
;

508 
	}
}

516 
UPlugD©a
* 
	$u¶ug_š™PlugFromEÁrypoštAndLib¿ry
(
UPlugEÁrypošt
 *
’Œypošt
, cÚ¡ *
cÚfig
, *
lib
, cÚ¡ *
sym
,

517 
UE¼ÜCode
 *
¡©us
) {

518 
UPlugD©a
 *
¶ug
 = 
NULL
;

520 
¶ug
 = 
	`u¶ug_®loÿ‹Plug
(
’Œypošt
, 
cÚfig
, 
lib
, 
sym
, 
¡©us
);

522 if(
	`U_SUCCESS
(*
¡©us
)) {

523  
¶ug
;

525 
	`u¶ug_d—Îoÿ‹Plug
(
¶ug
, 
¡©us
);

526  
NULL
;

528 
	}
}

530 
U_CAPI
 
UPlugD©a
* 
U_EXPORT2


531 
	$u¶ug_lßdPlugFromEÁrypošt
(
UPlugEÁrypošt
 *
’Œypošt
, cÚ¡ *
cÚfig
, 
UE¼ÜCode
 *
¡©us
) {

532 
UPlugD©a
* 
¶ug
 = 
	`u¶ug_š™PlugFromEÁrypoštAndLib¿ry
(
’Œypošt
, 
cÚfig
, 
NULL
, NULL, 
¡©us
);

533 
	`u¶ug_lßdPlug
(
¶ug
, 
¡©us
);

534  
¶ug
;

535 
	}
}

538 
UPlugD©a
*

539 
	$u¶ug_š™E¼ÜPlug
(cÚ¡ *
libName
, cÚ¡ *
sym
, cÚ¡ *
cÚfig
, cÚ¡ *
ÇmeOrE¼Ü
, 
UE¼ÜCode
 
lßdStus
, UE¼ÜCod*
¡©us
)

541 
UPlugD©a
 *
¶ug
 = 
	`u¶ug_®loÿ‹Em±yPlug
(
¡©us
);

542 if(
	`U_FAILURE
(*
¡©us
)è 
NULL
;

544 
¶ug
->
¶ugšStus
 = 
lßdStus
;

545 
¶ug
->
awa™šgLßd
 = 
FALSE
;

546 
¶ug
->
dÚtUÆßd
 = 
TRUE
;

548 if(
sym
!=
NULL
) {

549 
	`u´v_¡ºıy
(
¶ug
->
sym
, sym, 
UPLUG_NAME_MAX
);

552 if(
libName
!=
NULL
) {

553 
	`u´v_¡ºıy
(
¶ug
->
libName
,†ibName, 
UPLUG_NAME_MAX
);

556 if(
ÇmeOrE¼Ü
!=
NULL
) {

557 
	`u´v_¡ºıy
(
¶ug
->
Çme
, 
ÇmeOrE¼Ü
, 
UPLUG_NAME_MAX
);

560 if(
cÚfig
!=
NULL
) {

561 
	`u´v_¡ºıy
(
¶ug
->
cÚfig
, cÚfig, 
UPLUG_NAME_MAX
);

564  
¶ug
;

565 
	}
}

571 #ià
U_ENABLE_DYLOAD


573 
UPlugD©a
*

574 
	$u¶ug_š™PlugFromLib¿ry
(cÚ¡ *
libName
, cÚ¡ *
sym
, cÚ¡ *
cÚfig
, 
UE¼ÜCode
 *
¡©us
) {

575 *
lib
 = 
NULL
;

576 
UPlugD©a
 *
¶ug
 = 
NULL
;

577 if(
	`U_FAILURE
(*
¡©us
)è{  
NULL
; }

578 
lib
 = 
	`u¶ug_İ’Lib¿ry
(
libName
, 
¡©us
);

579 if(
lib
!=
NULL
 && 
	`U_SUCCESS
(*
¡©us
)) {

580 
UPlugEÁrypošt
 *
’Œypošt
 = 
NULL
;

585 
’Œypošt
 = (
UPlugEÁrypošt
*)
	`u´v_dl_sym
(
lib
, 
sym
, 
¡©us
);

587 if(
’Œypošt
!=
NULL
&&
	`U_SUCCESS
(*
¡©us
)) {

588 
¶ug
 = 
	`u¶ug_š™PlugFromEÁrypoštAndLib¿ry
(
’Œypošt
, 
cÚfig
, 
lib
, 
sym
, 
¡©us
);

589 if(
¶ug
!=
NULL
&&
	`U_SUCCESS
(*
¡©us
)) {

590 
¶ug
->
lib
 =†ib;

591 
lib
 = 
NULL
;

594 
UE¼ÜCode
 
subStus
 = 
U_ZERO_ERROR
;

595 
¶ug
 = 
	`u¶ug_š™E¼ÜPlug
(
libName
,
sym
,
cÚfig
,"ERROR: Could‚Ù†ßdƒÁrypošt",(
lib
==
NULL
)?
U_MISSING_RESOURCE_ERROR
:*
¡©us
,&
subStus
);

597 if(
lib
!=
NULL
) {

598 
UE¼ÜCode
 
subStus
 = 
U_ZERO_ERROR
;

599 
	`u¶ug_şo£Lib¿ry
(
lib
, &
subStus
);

602 
UE¼ÜCode
 
subStus
 = 
U_ZERO_ERROR
;

603 
¶ug
 = 
	`u¶ug_š™E¼ÜPlug
(
libName
,
sym
,
cÚfig
,"ERROR: could‚Ù†ßd†ib¿ry",(
lib
==
NULL
)?
U_MISSING_RESOURCE_ERROR
:*
¡©us
,&
subStus
);

605  
¶ug
;

606 
	}
}

608 
U_CAPI
 
UPlugD©a
* 
U_EXPORT2


609 
	$u¶ug_lßdPlugFromLib¿ry
(cÚ¡ *
libName
, cÚ¡ *
sym
, cÚ¡ *
cÚfig
, 
UE¼ÜCode
 *
¡©us
) {

610 
UPlugD©a
 *
¶ug
 = 
NULL
;

611 if(
	`U_FAILURE
(*
¡©us
)è{  
NULL
; }

612 
¶ug
 = 
	`u¶ug_š™PlugFromLib¿ry
(
libName
, 
sym
, 
cÚfig
, 
¡©us
);

613 
	`u¶ug_lßdPlug
(
¶ug
, 
¡©us
);

615  
¶ug
;

616 
	}
}

620 
U_CAPI
 
UPlugLev–
 
U_EXPORT2
 
	$u¶ug_g‘Cu¼’tLev–
() {

621 if(
	`cmemÜy_šU£
()) {

622  
UPLUG_LEVEL_HIGH
;

624  
UPLUG_LEVEL_LOW
;

626 
	}
}

628 
UBoŞ
 
U_CALLCONV
 
	$u¶ug_ş—nup
()

630 
št32_t
 
i
;

632 
UPlugD©a
 *
¶ugšToRemove
;

634 
i
=0;i<
¶ugšCouÁ
;i++) {

635 
UE¼ÜCode
 
subStus
 = 
U_ZERO_ERROR
;

636 
¶ugšToRemove
 = &
¶ugšLi¡
[
i
];

638 
	`u¶ug_doUÆßdPlug
(
¶ugšToRemove
, &
subStus
);

641  
TRUE
;

642 
	}
}

644 
	$u¶ug_lßdWa™šgPlugs
(
UE¼ÜCode
 *
¡©us
) {

645 
št32_t
 
i
;

646 
UPlugLev–
 
cu¼’tLev–
 = 
	`u¶ug_g‘Cu¼’tLev–
();

648 if(
	`U_FAILURE
(*
¡©us
)) {

651 #ià
UPLUG_TRACE


652 
	`DBG
((
¡d”r
, "u¶ug_lßdWa™šgPlugs(èLev–: %d\n", 
cu¼’tLev–
));

655 
i
=0;i<
¶ugšCouÁ
;i++) {

656 
UE¼ÜCode
 
subStus
 = 
U_ZERO_ERROR
;

657 
UPlugD©a
 *
¶ugšToLßd
 = &
¶ugšLi¡
[
i
];

658 if(
¶ugšToLßd
->
awa™šgLßd
) {

659 if(
¶ugšToLßd
->
Ëv–
 =ğ
UPLUG_LEVEL_LOW
) {

660 if(
cu¼’tLev–
 > 
UPLUG_LEVEL_LOW
) {

661 
¶ugšToLßd
->
¶ugšStus
 = 
U_PLUGIN_TOO_HIGH
;

663 
UPlugLev–
 
ÃwLev–
;

664 
	`u¶ug_lßdPlug
(
¶ugšToLßd
, &
subStus
);

665 
ÃwLev–
 = 
	`u¶ug_g‘Cu¼’tLev–
();

666 if(
ÃwLev–
 > 
cu¼’tLev–
) {

667 
¶ugšToLßd
->
¶ugšStus
 = 
U_PLUGIN_CHANGED_LEVEL_WARNING
;

668 
cu¼’tLev–
 = 
ÃwLev–
;

671 
¶ugšToLßd
->
awa™šgLßd
 = 
FALSE
;

675 
cu¼’tLev–
 = 
	`u¶ug_g‘Cu¼’tLev–
();

677 
i
=0;i<
¶ugšCouÁ
;i++) {

678 
UE¼ÜCode
 
subStus
 = 
U_ZERO_ERROR
;

679 
UPlugD©a
 *
¶ugšToLßd
 = &
¶ugšLi¡
[
i
];

681 if(
¶ugšToLßd
->
awa™šgLßd
) {

682 if(
¶ugšToLßd
->
Ëv–
 =ğ
UPLUG_LEVEL_INVALID
) {

683 
¶ugšToLßd
->
¶ugšStus
 = 
U_PLUGIN_DIDNT_SET_LEVEL
;

684 } if(
¶ugšToLßd
->
Ëv–
 =ğ
UPLUG_LEVEL_UNKNOWN
) {

685 
¶ugšToLßd
->
¶ugšStus
 = 
U_INTERNAL_PROGRAM_ERROR
;

687 
	`u¶ug_lßdPlug
(
¶ugšToLßd
, &
subStus
);

689 
¶ugšToLßd
->
awa™šgLßd
 = 
FALSE
;

693 #ià
UPLUG_TRACE


694 
	`DBG
((
¡d”r
, " DÚLßdšg Plugs. Lev–: %d\n", (
št32_t
)
	`u¶ug_g‘Cu¼’tLev–
()));

696 
	}
}

698 #ià
U_ENABLE_DYLOAD


700 
	g¶ugš_fe
[2048] = "";

703 
U_INTERNAL
 cÚ¡ * 
U_EXPORT2


704 
	$u¶ug_g‘PlugšFe
() {

705 #ià
U_ENABLE_DYLOAD


706  
¶ugš_fe
;

708  
NULL
;

710 
	}
}

713 
U_CAPI
 
U_EXPORT2


714 
	$u¶ug_š™
(
UE¼ÜCode
 *
¡©us
) {

715 #ià!
U_ENABLE_DYLOAD


716 ()
¡©us
;

718 cÚ¡ *
¶ugš_dœ
;

720 if(
	`U_FAILURE
(*
¡©us
)) ;

721 
¶ugš_dœ
 = 
	`g‘’v
("ICU_PLUGINS");

723 #ià
	`defšed
(
DEFAULT_ICU_PLUGINS
)

724 if(
¶ugš_dœ
 =ğ
NULL
 || !*plugin_dir) {

725 
¶ugš_dœ
 = 
DEFAULT_ICU_PLUGINS
;

729 #ià
UPLUG_TRACE


730 
	`DBG
((
¡d”r
, "ICU_PLUGINS=%s\n", 
¶ugš_dœ
));

733 if(
¶ugš_dœ
 !ğ
NULL
 && *plugin_dir) {

734 
FILE
 *
f
;

737 
	`u´v_¡ºıy
(
¶ugš_fe
, 
¶ugš_dœ
, 2047);

738 
	`u´v_¡ºÿt
(
¶ugš_fe
, 
U_FILE_SEP_STRING
,2047);

739 
	`u´v_¡ºÿt
(
¶ugš_fe
, "icuplugins",2047);

740 
	`u´v_¡ºÿt
(
¶ugš_fe
, 
U_ICU_VERSION_SHORT
 ,2047);

741 
	`u´v_¡ºÿt
(
¶ugš_fe
, ".txt" ,2047);

743 #ià
UPLUG_TRACE


744 
	`DBG
((
¡d”r
, "¶ugšfeğ%s\n", 
¶ugš_fe
));

747 
f
 = 
	`fİ’
(
¶ugš_fe
, "r");

749 if(
f
 !ğ
NULL
) {

750 
lšebuf
[1024];

751 *
p
, *
libName
=
NULL
, *
symName
=NULL, *
cÚfig
=NULL;

752 
št32_t
 
lše
 = 0;

755 
	`fg‘s
(
lšebuf
,1023,
f
)) {

756 
lše
++;

758 if(!*
lšebuf
 || *linebuf=='#') {

761 
p
 = 
lšebuf
;

762 *
p
&&
	`is¥aû
(*p))

763 
p
++;

764 if(!*
p
 || *p=='#') ;

765 
libName
 = 
p
;

766 *
p
&&!
	`is¥aû
(*p)) {

767 
p
++;

769 if(!*
p
 || *p=='#') ;

770 *
p
=0;

771 
p
++;

772 *
p
&&
	`is¥aû
(*p)) {

773 
p
++;

775 if(!*
p
||*p=='#') ;

776 
symName
 = 
p
;

777 *
p
&&!
	`is¥aû
(*p)) {

778 
p
++;

781 if(*
p
) {

782 *
p
=0;

783 ++
p
;

784 *
p
&&
	`is¥aû
(*p)) {

785 
p
++;

787 if(*
p
) {

788 
cÚfig
 = 
p
;

793 if(
cÚfig
!=
NULL
&&*config!=0) {

794 
p
 = 
cÚfig
+
	`¡¾’
(config);

795 
p
>
cÚfig
&&
	`is¥aû
(*(--p))) {

796 *
p
=0;

802 
UE¼ÜCode
 
subStus
 = 
U_ZERO_ERROR
;

803 
UPlugD©a
 *
¶ug
 = 
	`u¶ug_š™PlugFromLib¿ry
(
libName
, 
symName
, 
cÚfig
, &
subStus
);

804 if(
	`U_FAILURE
(
subStus
è&& 
	`U_SUCCESS
(*
¡©us
)) {

805 *
¡©us
 = 
subStus
;

807 #ià
UPLUG_TRACE


808 
	`DBG
((
¡d”r
, "PLUGIN†ibName=[%s], sym=[%s], cÚfig=[%s]\n", 
libName
, 
symName
, 
cÚfig
));

809 
	`DBG
((
¡d”r
, " -> %p, %s\n", (*)
¶ug
, 
	`u_”rÜName
(
subStus
)));

811 ()
¶ug
;

817 #ià
UPLUG_TRACE


818 
	`DBG
((
¡d”r
, "Cª'ˆİ’…lugš f%s\n", 
¶ugš_fe
));

822 
	`u¶ug_lßdWa™šgPlugs
(
¡©us
);

824 
	`uşn_»gi¡”CËªup
(
UCLN_UPLUG
, 
u¶ug_ş—nup
);

825 
	}
}

	@icuplugimp.h

19 #iâdeà
ICUPLUGIMP_H


20 
	#ICUPLUGIMP_H


	)

22 
	~"unicode/icu¶ug.h
"

35 
U_INTERNAL
 * 
U_EXPORT2


36 
u¶ug_İ’Lib¿ry
(cÚ¡ *
libName
, 
UE¼ÜCode
 *
¡©us
);

44 
U_INTERNAL
 
U_EXPORT2


45 
u¶ug_şo£Lib¿ry
(*
lib
, 
UE¼ÜCode
 *
¡©us
);

54 
U_INTERNAL
 * 
U_EXPORT2


55 
u¶ug_fšdLib¿ry
(*
lib
, 
UE¼ÜCode
 *
¡©us
);

68 
U_INTERNAL
 
U_EXPORT2


69 
u¶ug_š™
(
UE¼ÜCode
 *
¡©us
);

75 
U_INTERNAL
 
UPlugD©a
* 
U_EXPORT2


76 
u¶ug_g‘PlugIÁ”Çl
(
št32_t
 
n
);

82 
U_INTERNAL
 cÚ¡ * 
U_EXPORT2


83 
u¶ug_g‘PlugšFe
();

	@localsvc.h

8 #iâdeà
LOCALSVC_H


9 
	#LOCALSVC_H


	)

11 
	~"unicode/uty³s.h
"

13 #ià
U_LOCAL_SERVICE_HOOK


22 
U_CAPI
 * 
u´v_svc_hook
(cÚ¡ *
wh©
, 
UE¼ÜCode
 *
¡©us
);

	@locavailable.cpp

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/locid.h
"

22 
	~"unicode/uloc.h
"

23 
	~"unicode/u»s.h
"

24 
	~"cmemÜy.h
"

25 
	~"uşn_cmn.h
"

26 
	~"umu‹x.h
"

27 
	~"u»simp.h
"

31 
U_NAMESPACE_QUALIFIER
 
LoÿË
* 
	gavaabËLoÿËLi¡
 = 
NULL
;

32 
št32_t
 
	gavaabËLoÿËLi¡CouÁ
;

34 
U_CDECL_BEGIN


36 
UBoŞ
 
U_CALLCONV
 
	$loÿË_avaabË_ş—nup
()

38 
U_NAMESPACE_USE


40 ià(
avaabËLoÿËLi¡
) {

41 
d–‘e
 []
avaabËLoÿËLi¡
;

42 
avaabËLoÿËLi¡
 = 
NULL
;

44 
avaabËLoÿËLi¡CouÁ
 = 0;

46  
TRUE
;

47 
	}
}

49 
U_CDECL_END


51 
U_NAMESPACE_BEGIN


53 cÚ¡ 
LoÿË
* 
U_EXPORT2


54 
	gLoÿË
::
	$g‘AvaabËLoÿËs
(
št32_t
& 
couÁ
)

57 
UBoŞ
 
ÃedIn™
;

58 
	`UMTX_CHECK
(
NULL
, 
avaabËLoÿËLi¡
 =ğNULL, 
ÃedIn™
);

60 ià(
ÃedIn™
) {

61 
št32_t
 
locCouÁ
 = 
	`uloc_couÁAvaabË
();

62 
LoÿË
 *
ÃwLoÿËLi¡
 = 0;

63 if(
locCouÁ
) {

64 
ÃwLoÿËLi¡
 = 
Ãw
 
LoÿË
[
locCouÁ
];

66 ià(
ÃwLoÿËLi¡
 =ğ
NULL
) {

67 
couÁ
 = 0;

68  
NULL
;

71 
couÁ
 = 
locCouÁ
;

73 --
locCouÁ
 >= 0) {

74 
ÃwLoÿËLi¡
[
locCouÁ
].
	`£tFromPOSIXID
(
	`uloc_g‘AvaabË
(locCount));

77 
	`umtx_lock
(
NULL
);

78 if(
avaabËLoÿËLi¡
 == 0) {

79 
avaabËLoÿËLi¡CouÁ
 = 
couÁ
;

80 
avaabËLoÿËLi¡
 = 
ÃwLoÿËLi¡
;

81 
ÃwLoÿËLi¡
 = 
NULL
;

82 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_LOCALE_AVAILABLE
, 
loÿË_avaabË_ş—nup
);

84 
	`umtx_uÆock
(
NULL
);

85 
d–‘e
 []
ÃwLoÿËLi¡
;

87 
couÁ
 = 
avaabËLoÿËLi¡CouÁ
;

88  
avaabËLoÿËLi¡
;

89 
	}
}

92 
U_NAMESPACE_END


96 
U_NAMESPACE_USE


102 cÚ¡ 
	g_kIndexLoÿËName
[] = "res_index";

103 cÚ¡ 
	g_kIndexTag
[] = "InstalledLocales";

105 ** 
	g_š¡®ËdLoÿËs
 = 
NULL
;

106 
št32_t
 
	g_š¡®ËdLoÿËsCouÁ
 = 0;

110 
UBoŞ
 
U_CALLCONV
 
	$uloc_ş—nup
() {

111 ** 
‹mp
;

113 ià(
_š¡®ËdLoÿËs
) {

114 
‹mp
 = 
_š¡®ËdLoÿËs
;

115 
_š¡®ËdLoÿËs
 = 
NULL
;

117 
_š¡®ËdLoÿËsCouÁ
 = 0;

119 
	`u´v_ä“
(
‹mp
);

121  
TRUE
;

122 
	}
}

124 
	$_lßd_š¡®ËdLoÿËs
()

126 
UBoŞ
 
loÿËsLßded
;

128 
	`UMTX_CHECK
(
NULL
, 
_š¡®ËdLoÿËs
 !ğNULL, 
loÿËsLßded
);

130 ià(
loÿËsLßded
 =ğ
FALSE
) {

131 
UResourûBundË
 *
šdexLoÿË
 = 
NULL
;

132 
UResourûBundË
 
š¡®Ëd
;

133 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

134 ** 
‹mp
;

135 
št32_t
 
i
 = 0;

136 
št32_t
 
loÿËCouÁ
;

138 
	`u»s_š™SckObjeù
(&
š¡®Ëd
);

139 
šdexLoÿË
 = 
	`u»s_İ’Dœeù
(
NULL
, 
_kIndexLoÿËName
, &
¡©us
);

140 
	`u»s_g‘ByKey
(
šdexLoÿË
, 
_kIndexTag
, &
š¡®Ëd
, &
¡©us
);

142 if(
	`U_SUCCESS
(
¡©us
)) {

143 
loÿËCouÁ
 = 
	`u»s_g‘Size
(&
š¡®Ëd
);

144 
‹mp
 = (**è
	`u´v_m®loc
((*è* (
loÿËCouÁ
+1));

146 ià(
‹mp
 !ğ
NULL
) {

147 
	`u»s_»£tI‹¿tÜ
(&
š¡®Ëd
);

148 
	`u»s_hasNext
(&
š¡®Ëd
)) {

149 
	`u»s_g‘NextSŒšg
(&
š¡®Ëd
, 
NULL
, (cÚ¡ **)&
‹mp
[
i
++], &
¡©us
);

151 
‹mp
[
i
] = 
NULL
;

153 
	`umtx_lock
(
NULL
);

154 ià(
_š¡®ËdLoÿËs
 =ğ
NULL
)

156 
_š¡®ËdLoÿËsCouÁ
 = 
loÿËCouÁ
;

157 
_š¡®ËdLoÿËs
 = 
‹mp
;

158 
‹mp
 = 
NULL
;

159 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_ULOC
, 
uloc_ş—nup
);

161 
	`umtx_uÆock
(
NULL
);

163 
	`u´v_ä“
(
‹mp
);

166 
	`u»s_şo£
(&
š¡®Ëd
);

167 
	`u»s_şo£
(
šdexLoÿË
);

169 
	}
}

171 
U_CAPI
 cÚ¡ * 
U_EXPORT2


172 
	$uloc_g‘AvaabË
(
št32_t
 
off£t
)

175 
	`_lßd_š¡®ËdLoÿËs
();

177 ià(
off£t
 > 
_š¡®ËdLoÿËsCouÁ
)

178  
NULL
;

179  
_š¡®ËdLoÿËs
[
off£t
];

180 
	}
}

182 
U_CAPI
 
št32_t
 
U_EXPORT2


183 
	$uloc_couÁAvaabË
()

185 
	`_lßd_š¡®ËdLoÿËs
();

186  
_š¡®ËdLoÿËsCouÁ
;

187 
	}
}

	@locbased.cpp

11 
	~"locba£d.h
"

12 
	~"c¡ršg.h
"

14 
U_NAMESPACE_BEGIN


16 
LoÿË
 
	gLoÿËBa£d
::
	$g‘LoÿË
(
ULocD©aLoÿËTy³
 
ty³
, 
UE¼ÜCode
& 
¡©us
) const {

17 cÚ¡ * 
id
 = 
	`g‘LoÿËID
(
ty³
, 
¡©us
);

18  
	`LoÿË
((
id
 != 0) ? id : "");

19 
	}
}

21 cÚ¡ * 
	gLoÿËBa£d
::
	$g‘LoÿËID
(
ULocD©aLoÿËTy³
 
ty³
, 
UE¼ÜCode
& 
¡©us
) const {

22 ià(
	`U_FAILURE
(
¡©us
)) {

23  
NULL
;

26 
ty³
) {

27 
ULOC_VALID_LOCALE
:

28  
v®id
;

29 
ULOC_ACTUAL_LOCALE
:

30  
aùu®
;

32 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

33  
NULL
;

35 
	}
}

37 
	gLoÿËBa£d
::
	$£tLoÿËIDs
(cÚ¡ * 
v®idID
, cÚ¡ * 
aùu®ID
) {

38 ià(
v®idID
 != 0) {

39 
	`u´v_¡rıy
(
v®id
, 
v®idID
);

41 ià(
aùu®ID
 != 0) {

42 
	`u´v_¡rıy
(
aùu®
, 
aùu®ID
);

44 
	}
}

46 
	gU_NAMESPACE_END


	@locbased.h

11 #iâdeà
LOCBASED_H


12 
	#LOCBASED_H


	)

14 
	~"unicode/locid.h
"

15 
	~"unicode/uobjeù.h
"

22 
	#U_LOCALE_BASED
(
v¬Çme
, 
objÇme
) \

23 
LoÿËBa£d
 
	`v¬Çme
((
objÇme
).
v®idLoÿË
, (objÇme).
aùu®LoÿË
);

	)

25 
U_NAMESPACE_BEGIN


34 şas 
	cU_COMMON_API
 
	mLoÿËBa£d
 : 
public
 
UMemÜy
 {

36 
public
:

42 
šlše
 
LoÿËBa£d
(* 
v®idAlŸs
, * 
aùu®AlŸs
);

48 
šlše
 
LoÿËBa£d
(cÚ¡ * 
v®idAlŸs
, cÚ¡ * 
aùu®AlŸs
);

58 
LoÿË
 
	$g‘LoÿË
(
ULocD©aLoÿËTy³
 
ty³
, 
UE¼ÜCode
& 
¡©us
) const;

68 cÚ¡ * 
	$g‘LoÿËID
(
ULocD©aLoÿËTy³
 
ty³
, 
UE¼ÜCode
& 
¡©us
) const;

76 
	`£tLoÿËIDs
(cÚ¡ * 
v®id
, cÚ¡ * 
aùu®
);

78 
´iv©e
:

80 * 
v®id
;

82 * 
aùu®
;

85 
šlše
 
LoÿËBa£d
::
	$LoÿËBa£d
(* 
v®idAlŸs
, * 
aùu®AlŸs
) :

86 
	`v®id
(
v®idAlŸs
), 
	$aùu®
(
aùu®AlŸs
) {

87 
	}
}

89 
šlše
 
	gLoÿËBa£d
::
	$LoÿËBa£d
(cÚ¡ * 
v®idAlŸs
,

90 cÚ¡ * 
aùu®AlŸs
) :

92 
	`v®id
((*)
v®idAlŸs
), 
	`aùu®
((*)
aùu®AlŸs
) {

93 
	}
}

95 
	gU_NAMESPACE_END


	@locdispnames.cpp

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/brk™”.h
"

22 
	~"unicode/locid.h
"

23 
	~"unicode/uloc.h
"

24 
	~"unicode/u»s.h
"

25 
	~"unicode/u¡ršg.h
"

26 
	~"cmemÜy.h
"

27 
	~"c¡ršg.h
"

28 
	~"putimp.h
"

29 
	~"ulocimp.h
"

30 
	~"u»simp.h
"

31 
	~"u»¦ocs.h
"

32 
	~"u¡r_imp.h
"

36 
U_NAMESPACE_BEGIN


38 
	gUnicodeSŒšg
&

39 
	gLoÿË
::
	$g‘Di¥ÏyLªguage
(
UnicodeSŒšg
& 
di¥Lªg
) const

41  
this
->
	`g‘Di¥ÏyLªguage
(
	`g‘DeçuÉ
(), 
di¥Lªg
);

42 
	}
}

50 
	gUnicodeSŒšg
&

51 
	gLoÿË
::
	$g‘Di¥ÏyLªguage
(cÚ¡ 
LoÿË
 &
di¥ÏyLoÿË
,

52 
UnicodeSŒšg
 &
»suÉ
) const {

53 
UCh¬
 *
bufãr
;

54 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

55 
št32_t
 
Ëngth
;

57 
bufãr
=
»suÉ
.
	`g‘Bufãr
(
ULOC_FULLNAME_CAPACITY
);

58 if(
bufãr
==0) {

59 
»suÉ
.
	`Œunÿ‹
(0);

60  
»suÉ
;

63 
Ëngth
=
	`uloc_g‘Di¥ÏyLªguage
(
fuÎName
, 
di¥ÏyLoÿË
.fullName,

64 
bufãr
, 
»suÉ
.
	`g‘C­ac™y
(),

65 &
”rÜCode
);

66 
»suÉ
.
	`»Ëa£Bufãr
(
	`U_SUCCESS
(
”rÜCode
è? 
Ëngth
 : 0);

68 if(
”rÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

69 
bufãr
=
»suÉ
.
	`g‘Bufãr
(
Ëngth
);

70 if(
bufãr
==0) {

71 
»suÉ
.
	`Œunÿ‹
(0);

72  
»suÉ
;

74 
”rÜCode
=
U_ZERO_ERROR
;

75 
Ëngth
=
	`uloc_g‘Di¥ÏyLªguage
(
fuÎName
, 
di¥ÏyLoÿË
.fullName,

76 
bufãr
, 
»suÉ
.
	`g‘C­ac™y
(),

77 &
”rÜCode
);

78 
»suÉ
.
	`»Ëa£Bufãr
(
	`U_SUCCESS
(
”rÜCode
è? 
Ëngth
 : 0);

81  
»suÉ
;

82 
	}
}

84 
	gUnicodeSŒšg
&

85 
	gLoÿË
::
	$g‘Di¥ÏySüt
(
UnicodeSŒšg
& 
di¥Süt
) const

87  
this
->
	`g‘Di¥ÏySüt
(
	`g‘DeçuÉ
(), 
di¥Süt
);

88 
	}
}

90 
	gUnicodeSŒšg
&

91 
	gLoÿË
::
	$g‘Di¥ÏySüt
(cÚ¡ 
LoÿË
 &
di¥ÏyLoÿË
,

92 
UnicodeSŒšg
 &
»suÉ
) const {

93 
UCh¬
 *
bufãr
;

94 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

95 
št32_t
 
Ëngth
;

97 
bufãr
=
»suÉ
.
	`g‘Bufãr
(
ULOC_FULLNAME_CAPACITY
);

98 if(
bufãr
==0) {

99 
»suÉ
.
	`Œunÿ‹
(0);

100  
»suÉ
;

103 
Ëngth
=
	`uloc_g‘Di¥ÏySüt
(
fuÎName
, 
di¥ÏyLoÿË
.fullName,

104 
bufãr
, 
»suÉ
.
	`g‘C­ac™y
(),

105 &
”rÜCode
);

106 
»suÉ
.
	`»Ëa£Bufãr
(
	`U_SUCCESS
(
”rÜCode
è? 
Ëngth
 : 0);

108 if(
”rÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

109 
bufãr
=
»suÉ
.
	`g‘Bufãr
(
Ëngth
);

110 if(
bufãr
==0) {

111 
»suÉ
.
	`Œunÿ‹
(0);

112  
»suÉ
;

114 
”rÜCode
=
U_ZERO_ERROR
;

115 
Ëngth
=
	`uloc_g‘Di¥ÏySüt
(
fuÎName
, 
di¥ÏyLoÿË
.fullName,

116 
bufãr
, 
»suÉ
.
	`g‘C­ac™y
(),

117 &
”rÜCode
);

118 
»suÉ
.
	`»Ëa£Bufãr
(
	`U_SUCCESS
(
”rÜCode
è? 
Ëngth
 : 0);

121  
»suÉ
;

122 
	}
}

124 
	gUnicodeSŒšg
&

125 
	gLoÿË
::
	$g‘Di¥ÏyCouÁry
(
UnicodeSŒšg
& 
di¥CÁry
) const

127  
this
->
	`g‘Di¥ÏyCouÁry
(
	`g‘DeçuÉ
(), 
di¥CÁry
);

128 
	}
}

130 
	gUnicodeSŒšg
&

131 
	gLoÿË
::
	$g‘Di¥ÏyCouÁry
(cÚ¡ 
LoÿË
 &
di¥ÏyLoÿË
,

132 
UnicodeSŒšg
 &
»suÉ
) const {

133 
UCh¬
 *
bufãr
;

134 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

135 
št32_t
 
Ëngth
;

137 
bufãr
=
»suÉ
.
	`g‘Bufãr
(
ULOC_FULLNAME_CAPACITY
);

138 if(
bufãr
==0) {

139 
»suÉ
.
	`Œunÿ‹
(0);

140  
»suÉ
;

143 
Ëngth
=
	`uloc_g‘Di¥ÏyCouÁry
(
fuÎName
, 
di¥ÏyLoÿË
.fullName,

144 
bufãr
, 
»suÉ
.
	`g‘C­ac™y
(),

145 &
”rÜCode
);

146 
»suÉ
.
	`»Ëa£Bufãr
(
	`U_SUCCESS
(
”rÜCode
è? 
Ëngth
 : 0);

148 if(
”rÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

149 
bufãr
=
»suÉ
.
	`g‘Bufãr
(
Ëngth
);

150 if(
bufãr
==0) {

151 
»suÉ
.
	`Œunÿ‹
(0);

152  
»suÉ
;

154 
”rÜCode
=
U_ZERO_ERROR
;

155 
Ëngth
=
	`uloc_g‘Di¥ÏyCouÁry
(
fuÎName
, 
di¥ÏyLoÿË
.fullName,

156 
bufãr
, 
»suÉ
.
	`g‘C­ac™y
(),

157 &
”rÜCode
);

158 
»suÉ
.
	`»Ëa£Bufãr
(
	`U_SUCCESS
(
”rÜCode
è? 
Ëngth
 : 0);

161  
»suÉ
;

162 
	}
}

164 
	gUnicodeSŒšg
&

165 
	gLoÿË
::
	$g‘Di¥ÏyV¬ŸÁ
(
UnicodeSŒšg
& 
di¥V¬
) const

167  
this
->
	`g‘Di¥ÏyV¬ŸÁ
(
	`g‘DeçuÉ
(), 
di¥V¬
);

168 
	}
}

170 
	gUnicodeSŒšg
&

171 
	gLoÿË
::
	$g‘Di¥ÏyV¬ŸÁ
(cÚ¡ 
LoÿË
 &
di¥ÏyLoÿË
,

172 
UnicodeSŒšg
 &
»suÉ
) const {

173 
UCh¬
 *
bufãr
;

174 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

175 
št32_t
 
Ëngth
;

177 
bufãr
=
»suÉ
.
	`g‘Bufãr
(
ULOC_FULLNAME_CAPACITY
);

178 if(
bufãr
==0) {

179 
»suÉ
.
	`Œunÿ‹
(0);

180  
»suÉ
;

183 
Ëngth
=
	`uloc_g‘Di¥ÏyV¬ŸÁ
(
fuÎName
, 
di¥ÏyLoÿË
.fullName,

184 
bufãr
, 
»suÉ
.
	`g‘C­ac™y
(),

185 &
”rÜCode
);

186 
»suÉ
.
	`»Ëa£Bufãr
(
	`U_SUCCESS
(
”rÜCode
è? 
Ëngth
 : 0);

188 if(
”rÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

189 
bufãr
=
»suÉ
.
	`g‘Bufãr
(
Ëngth
);

190 if(
bufãr
==0) {

191 
»suÉ
.
	`Œunÿ‹
(0);

192  
»suÉ
;

194 
”rÜCode
=
U_ZERO_ERROR
;

195 
Ëngth
=
	`uloc_g‘Di¥ÏyV¬ŸÁ
(
fuÎName
, 
di¥ÏyLoÿË
.fullName,

196 
bufãr
, 
»suÉ
.
	`g‘C­ac™y
(),

197 &
”rÜCode
);

198 
»suÉ
.
	`»Ëa£Bufãr
(
	`U_SUCCESS
(
”rÜCode
è? 
Ëngth
 : 0);

201  
»suÉ
;

202 
	}
}

204 
	gUnicodeSŒšg
&

205 
	gLoÿË
::
	$g‘Di¥ÏyName
Ğ
UnicodeSŒšg
& 
Çme
 ) const

207  
this
->
	`g‘Di¥ÏyName
(
	`g‘DeçuÉ
(), 
Çme
);

208 
	}
}

210 
	gUnicodeSŒšg
&

211 
	gLoÿË
::
	$g‘Di¥ÏyName
(cÚ¡ 
LoÿË
 &
di¥ÏyLoÿË
,

212 
UnicodeSŒšg
 &
»suÉ
) const {

213 
UCh¬
 *
bufãr
;

214 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

215 
št32_t
 
Ëngth
;

217 
bufãr
=
»suÉ
.
	`g‘Bufãr
(
ULOC_FULLNAME_CAPACITY
);

218 if(
bufãr
==0) {

219 
»suÉ
.
	`Œunÿ‹
(0);

220  
»suÉ
;

223 
Ëngth
=
	`uloc_g‘Di¥ÏyName
(
fuÎName
, 
di¥ÏyLoÿË
.fullName,

224 
bufãr
, 
»suÉ
.
	`g‘C­ac™y
(),

225 &
”rÜCode
);

226 
»suÉ
.
	`»Ëa£Bufãr
(
	`U_SUCCESS
(
”rÜCode
è? 
Ëngth
 : 0);

228 if(
”rÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

229 
bufãr
=
»suÉ
.
	`g‘Bufãr
(
Ëngth
);

230 if(
bufãr
==0) {

231 
»suÉ
.
	`Œunÿ‹
(0);

232  
»suÉ
;

234 
”rÜCode
=
U_ZERO_ERROR
;

235 
Ëngth
=
	`uloc_g‘Di¥ÏyName
(
fuÎName
, 
di¥ÏyLoÿË
.fullName,

236 
bufãr
, 
»suÉ
.
	`g‘C­ac™y
(),

237 &
”rÜCode
);

238 
»suÉ
.
	`»Ëa£Bufãr
(
	`U_SUCCESS
(
”rÜCode
è? 
Ëngth
 : 0);

241  
»suÉ
;

242 
	}
}

244 #ià! 
UCONFIG_NO_BREAK_ITERATION


248 
	gUnicodeSŒšg
& 
U_EXPORT2


249 
	gB»akI‹¿tÜ
::
	$g‘Di¥ÏyName
(cÚ¡ 
LoÿË
& 
objeùLoÿË
,

250 
UnicodeSŒšg
& 
Çme
)

252  
objeùLoÿË
.
	`g‘Di¥ÏyName
(
Çme
);

253 
	}
}

257 
	gUnicodeSŒšg
& 
U_EXPORT2


258 
	gB»akI‹¿tÜ
::
	$g‘Di¥ÏyName
(cÚ¡ 
LoÿË
& 
objeùLoÿË
,

259 cÚ¡ 
LoÿË
& 
di¥ÏyLoÿË
,

260 
UnicodeSŒšg
& 
Çme
)

262  
objeùLoÿË
.
	`g‘Di¥ÏyName
(
di¥ÏyLoÿË
, 
Çme
);

263 
	}
}

268 
U_NAMESPACE_END


272 
U_NAMESPACE_USE


278 cÚ¡ 
	g_kLªguages
[] = "Languages";

279 cÚ¡ 
	g_kSüts
[] = "Scripts";

280 cÚ¡ 
	g_kCouÁr›s
[] = "Countries";

281 cÚ¡ 
	g_kV¬ŸÁs
[] = "Variants";

282 cÚ¡ 
	g_kKeys
[] = "Keys";

283 cÚ¡ 
	g_kTy³s
[] = "Types";

284 cÚ¡ 
	g_kRoÙName
[] = "root";

285 cÚ¡ 
	g_kCu¼’cy
[] = "currency";

286 cÚ¡ 
	g_kCu¼’c›s
[] = "Currencies";

287 cÚ¡ 
	g_kLoÿËDi¥ÏyP©‹º
[] = "localeDisplayPattern";

288 cÚ¡ 
	g_kP©‹º
[] = "pattern";

289 cÚ¡ 
	g_kS•¬©Ü
[] = "separator";

293 
št32_t


294 
	$_g‘SŒšgOrCİyKey
(cÚ¡ *
·th
, cÚ¡ *
loÿË
,

295 cÚ¡ *
bËKey
,

296 cÚ¡ * 
subTabËKey
,

297 cÚ¡ *
™emKey
,

298 cÚ¡ *
sub¡™u‹
,

299 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

300 
UE¼ÜCode
 *
pE¼ÜCode
) {

301 cÚ¡ 
UCh¬
 *
s
 = 
NULL
;

302 
št32_t
 
Ëngth
 = 0;

304 if(
™emKey
==
NULL
) {

306 
UResourûBundË
 *
rb
;

308 
rb
=
	`u»s_İ’
(
·th
, 
loÿË
, 
pE¼ÜCode
);

310 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

311 
s
=
	`u»s_g‘SŒšgByKey
(
rb
, 
bËKey
, &
Ëngth
, 
pE¼ÜCode
);

313 
	`u»s_şo£
(
rb
);

317 ià(!
	`u´v_¡ºcmp
(
bËKey
, "Lªguages", 9è&& 
	`u´v_¡¹Ş
(
™emKey
, 
NULL
, 10)) {

318 *
pE¼ÜCode
 = 
U_MISSING_RESOURCE_ERROR
;

321 
s
=
	`uloc_g‘TabËSŒšgW™hF®lback
(
·th
, 
loÿË
,

322 
bËKey
,

323 
subTabËKey
,

324 
™emKey
,

325 &
Ëngth
,

326 
pE¼ÜCode
);

330 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

331 
št32_t
 
cİyL’gth
=
	`u´v_mš
(
Ëngth
, 
de¡C­ac™y
);

332 if(
cİyL’gth
>0 && 
s
 !ğ
NULL
) {

333 
	`u_memıy
(
de¡
, 
s
, 
cİyL’gth
);

337 
Ëngth
=(
št32_t
)
	`u´v_¡¾’
(
sub¡™u‹
);

338 
	`u_ch¬sToUCh¬s
(
sub¡™u‹
, 
de¡
, 
	`u´v_mš
(
Ëngth
, 
de¡C­ac™y
));

339 *
pE¼ÜCode
=
U_USING_DEFAULT_WARNING
;

342  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
Ëngth
, 
pE¼ÜCode
);

343 
	}
}

345 
št32_t
 
	tU_CALLCONV
 
	tUDi¥ÏyNameG‘‹r
(cÚ¡ *, *, 
	tšt32_t
, 
	tUE¼ÜCode
 *);

347 
št32_t


348 
	$_g‘Di¥ÏyNameFÜCompÚ’t
(cÚ¡ *
loÿË
,

349 cÚ¡ *
di¥ÏyLoÿË
,

350 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

351 
UDi¥ÏyNameG‘‹r
 *
g‘‹r
,

352 cÚ¡ *
g
,

353 
UE¼ÜCode
 *
pE¼ÜCode
) {

354 
loÿËBufãr
[
ULOC_FULLNAME_CAPACITY
*4];

355 
št32_t
 
Ëngth
;

356 
UE¼ÜCode
 
loÿlStus
;

357 cÚ¡ * 
roÙ
 = 
NULL
;

360 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

364 if(
de¡C­ac™y
<0 || (de¡C­ac™y>0 && 
de¡
==
NULL
)) {

365 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

369 
loÿlStus
 = 
U_ZERO_ERROR
;

370 
Ëngth
=(*
g‘‹r
)(
loÿË
, 
loÿËBufãr
, ÖoÿËBufãr), &
loÿlStus
);

371 if(
	`U_FAILURE
(
loÿlStus
è||†oÿlStus==
U_STRING_NOT_TERMINATED_WARNING
) {

372 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

375 if(
Ëngth
==0) {

376  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 0, 
pE¼ÜCode
);

379 
roÙ
 = 
g
 =ğ
_kCouÁr›s
 ? 
U_ICUDATA_REGION
 : 
U_ICUDATA_LANG
;

381  
	`_g‘SŒšgOrCİyKey
(
roÙ
, 
di¥ÏyLoÿË
,

382 
g
, 
NULL
, 
loÿËBufãr
,

383 
loÿËBufãr
,

384 
de¡
, 
de¡C­ac™y
,

385 
pE¼ÜCode
);

386 
	}
}

388 
U_CAPI
 
št32_t
 
U_EXPORT2


389 
	$uloc_g‘Di¥ÏyLªguage
(cÚ¡ *
loÿË
,

390 cÚ¡ *
di¥ÏyLoÿË
,

391 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

392 
UE¼ÜCode
 *
pE¼ÜCode
) {

393  
	`_g‘Di¥ÏyNameFÜCompÚ’t
(
loÿË
, 
di¥ÏyLoÿË
, 
de¡
, 
de¡C­ac™y
,

394 
uloc_g‘Lªguage
, 
_kLªguages
, 
pE¼ÜCode
);

395 
	}
}

397 
U_CAPI
 
št32_t
 
U_EXPORT2


398 
	$uloc_g‘Di¥ÏySüt
(cÚ¡ * 
loÿË
,

399 cÚ¡ * 
di¥ÏyLoÿË
,

400 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

401 
UE¼ÜCode
 *
pE¼ÜCode
)

403  
	`_g‘Di¥ÏyNameFÜCompÚ’t
(
loÿË
, 
di¥ÏyLoÿË
, 
de¡
, 
de¡C­ac™y
,

404 
uloc_g‘Süt
, 
_kSüts
, 
pE¼ÜCode
);

405 
	}
}

407 
U_CAPI
 
št32_t
 
U_EXPORT2


408 
	$uloc_g‘Di¥ÏyCouÁry
(cÚ¡ *
loÿË
,

409 cÚ¡ *
di¥ÏyLoÿË
,

410 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

411 
UE¼ÜCode
 *
pE¼ÜCode
) {

412  
	`_g‘Di¥ÏyNameFÜCompÚ’t
(
loÿË
, 
di¥ÏyLoÿË
, 
de¡
, 
de¡C­ac™y
,

413 
uloc_g‘CouÁry
, 
_kCouÁr›s
, 
pE¼ÜCode
);

414 
	}
}

421 
U_CAPI
 
št32_t
 
U_EXPORT2


422 
	$uloc_g‘Di¥ÏyV¬ŸÁ
(cÚ¡ *
loÿË
,

423 cÚ¡ *
di¥ÏyLoÿË
,

424 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

425 
UE¼ÜCode
 *
pE¼ÜCode
) {

426  
	`_g‘Di¥ÏyNameFÜCompÚ’t
(
loÿË
, 
di¥ÏyLoÿË
, 
de¡
, 
de¡C­ac™y
,

427 
uloc_g‘V¬ŸÁ
, 
_kV¬ŸÁs
, 
pE¼ÜCode
);

428 
	}
}

430 
U_CAPI
 
št32_t
 
U_EXPORT2


431 
	$uloc_g‘Di¥ÏyName
(cÚ¡ *
loÿË
,

432 cÚ¡ *
di¥ÏyLoÿË
,

433 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

434 
UE¼ÜCode
 *
pE¼ÜCode
)

436 
št32_t
 
Ëngth
, 
Ëngth2
, 
Ëngth3
 = 0;

437 
UBoŞ
 
hasLªguage
, 
hasSüt
, 
hasCouÁry
, 
hasV¬ŸÁ
, 
hasKeywÜds
;

438 
UEnum”©iÚ
* 
keywÜdEnum
 = 
NULL
;

439 
št32_t
 
keywÜdCouÁ
 = 0;

440 cÚ¡ *
keywÜd
 = 
NULL
;

441 
št32_t
 
keywÜdL’
 = 0;

442 
keywÜdV®ue
[256];

443 
št32_t
 
keywÜdV®ueL’
 = 0;

445 
št32_t
 
locS•L’
 = 0;

446 
št32_t
 
locP©L’
 = 0;

447 
št32_t
 
p0L’
 = 0;

448 
št32_t
 
deçuÉP©‹ºL’
 = 9;

449 cÚ¡ 
UCh¬
 *
di¥LocS•¬©Ü
;

450 cÚ¡ 
UCh¬
 *
di¥LocP©‹º
;

451 cÚ¡ 
UCh¬
 
deçuÉS•¬©Ü
[3] = { 0x002c, 0x0020 , 0x0000 };

452 cÚ¡ 
UCh¬
 
deçuÉP©‹º
[10] = { 0x007b, 0x0030, 0x007d, 0x0020, 0x0028, 0x007b, 0x0031, 0x007d, 0x0029, 0x0000 };

453 cÚ¡ 
UCh¬
 
·t0
[4] = { 0x007b, 0x0030, 0x007d , 0x0000 } ;

454 cÚ¡ 
UCh¬
 
·t1
[4] = { 0x007b, 0x0031, 0x007d , 0x0000 } ;

456 
UResourûBundË
 *
bundË
 = 
NULL
;

457 
UResourûBundË
 *
locd¥·t
 = 
NULL
;

459 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

462 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

466 if(
de¡C­ac™y
<0 || (de¡C­ac™y>0 && 
de¡
==
NULL
)) {

467 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

471 
bundË
 = 
	`u»s_İ’
(
U_ICUDATA_LANG
, 
di¥ÏyLoÿË
, &
¡©us
);

473 
locd¥·t
 = 
	`u»s_g‘ByKeyW™hF®lback
(
bundË
, 
_kLoÿËDi¥ÏyP©‹º
, 
NULL
, &
¡©us
);

474 
di¥LocS•¬©Ü
 = 
	`u»s_g‘SŒšgByKeyW™hF®lback
(
locd¥·t
, 
_kS•¬©Ü
, &
locS•L’
, &
¡©us
);

475 
di¥LocP©‹º
 = 
	`u»s_g‘SŒšgByKeyW™hF®lback
(
locd¥·t
, 
_kP©‹º
, &
locP©L’
, &
¡©us
);

478 
	`u»s_şo£
(
locd¥·t
);

479 
	`u»s_şo£
(
bundË
);

482 iàĞ
locS•L’
 == 0) {

483 
di¥LocS•¬©Ü
 = 
deçuÉS•¬©Ü
;

484 
locS•L’
 = 2;

487 iàĞ
locP©L’
 == 0) {

488 
di¥LocP©‹º
 = 
deçuÉP©‹º
;

489 
locP©L’
 = 9;

498 
Ëngth
=
	`uloc_g‘Di¥ÏyLªguage
(
loÿË
, 
di¥ÏyLoÿË
,

499 
de¡
, 
de¡C­ac™y
,

500 
pE¼ÜCode
);

501 
hasLªguage
ğ
Ëngth
>0;

503 if(
hasLªguage
) {

504 
p0L’
 = 
Ëngth
;

507 if(
Ëngth
<
de¡C­ac™y
) {

508 
de¡
[
Ëngth
]=0x20;

510 ++
Ëngth
;

511 if(
Ëngth
<
de¡C­ac™y
) {

512 
de¡
[
Ëngth
]=0x28;

514 ++
Ëngth
;

517 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

519 *
pE¼ÜCode
=
U_ZERO_ERROR
;

523 if(
Ëngth
<
de¡C­ac™y
) {

524 
Ëngth2
=
	`uloc_g‘Di¥ÏySüt
(
loÿË
, 
di¥ÏyLoÿË
,

525 
de¡
+
Ëngth
, 
de¡C­ac™y
-length,

526 
pE¼ÜCode
);

528 
Ëngth2
=
	`uloc_g‘Di¥ÏySüt
(
loÿË
, 
di¥ÏyLoÿË
,

529 
NULL
, 0,

530 
pE¼ÜCode
);

532 
hasSüt
ğ
Ëngth2
>0;

533 
Ëngth
+=
Ëngth2
;

535 if(
hasSüt
) {

537 if(
Ëngth
+
locS•L’
<=
de¡C­ac™y
) {

538 
	`u_memıy
(
de¡
+
Ëngth
,
di¥LocS•¬©Ü
,
locS•L’
);

540 
Ëngth
+=
locS•L’
;

543 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

545 *
pE¼ÜCode
=
U_ZERO_ERROR
;

549 if(
Ëngth
<
de¡C­ac™y
) {

550 
Ëngth2
=
	`uloc_g‘Di¥ÏyCouÁry
(
loÿË
, 
di¥ÏyLoÿË
,

551 
de¡
+
Ëngth
, 
de¡C­ac™y
-length,

552 
pE¼ÜCode
);

554 
Ëngth2
=
	`uloc_g‘Di¥ÏyCouÁry
(
loÿË
, 
di¥ÏyLoÿË
,

555 
NULL
, 0,

556 
pE¼ÜCode
);

558 
hasCouÁry
ğ
Ëngth2
>0;

559 
Ëngth
+=
Ëngth2
;

561 if(
hasCouÁry
) {

563 if(
Ëngth
+
locS•L’
<=
de¡C­ac™y
) {

564 
	`u_memıy
(
de¡
+
Ëngth
,
di¥LocS•¬©Ü
,
locS•L’
);

566 
Ëngth
+=
locS•L’
;

569 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

571 *
pE¼ÜCode
=
U_ZERO_ERROR
;

575 if(
Ëngth
<
de¡C­ac™y
) {

576 
Ëngth2
=
	`uloc_g‘Di¥ÏyV¬ŸÁ
(
loÿË
, 
di¥ÏyLoÿË
,

577 
de¡
+
Ëngth
, 
de¡C­ac™y
-length,

578 
pE¼ÜCode
);

580 
Ëngth2
=
	`uloc_g‘Di¥ÏyV¬ŸÁ
(
loÿË
, 
di¥ÏyLoÿË
,

581 
NULL
, 0,

582 
pE¼ÜCode
);

584 
hasV¬ŸÁ
ğ
Ëngth2
>0;

585 
Ëngth
+=
Ëngth2
;

587 if(
hasV¬ŸÁ
) {

589 if(
Ëngth
+
locS•L’
<=
de¡C­ac™y
) {

590 
	`u_memıy
(
de¡
+
Ëngth
,
di¥LocS•¬©Ü
,
locS•L’
);

592 
Ëngth
+=
locS•L’
;

595 
keywÜdEnum
 = 
	`uloc_İ’KeywÜds
(
loÿË
, 
pE¼ÜCode
);

597 
keywÜdCouÁ
 = 
	`u’um_couÁ
(
keywÜdEnum
, 
pE¼ÜCode
); keywordCount > 0 ; keywordCount--){

598 if(
	`U_FAILURE
(*
pE¼ÜCode
)){

602 
keywÜd
 = 
	`u’um_Ãxt
(
keywÜdEnum
, &
keywÜdL’
, 
pE¼ÜCode
);

603 if(
Ëngth
 + 
Ëngth3
 < 
de¡C­ac™y
) {

604 
Ëngth3
 +ğ
	`uloc_g‘Di¥ÏyKeywÜd
(
keywÜd
, 
di¥ÏyLoÿË
, 
de¡
+
Ëngth
+Ëngth3, 
de¡C­ac™y
-Ëngth-Ëngth3, 
pE¼ÜCode
);

606 
Ëngth3
 +ğ
	`uloc_g‘Di¥ÏyKeywÜd
(
keywÜd
, 
di¥ÏyLoÿË
, 
NULL
, 0, 
pE¼ÜCode
);

608 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

610 *
pE¼ÜCode
=
U_ZERO_ERROR
;

612 
keywÜdV®ueL’
 = 
	`uloc_g‘KeywÜdV®ue
(
loÿË
, 
keywÜd
, 
keywÜdV®ue
, 256, 
pE¼ÜCode
);

613 if(
keywÜdV®ueL’
) {

614 if(
Ëngth
 + 
Ëngth3
 < 
de¡C­ac™y
) {

615 
de¡
[
Ëngth
 + 
Ëngth3
] = 0x3D;

617 
Ëngth3
++;

618 if(
Ëngth
 + 
Ëngth3
 < 
de¡C­ac™y
) {

619 
Ëngth3
 +ğ
	`uloc_g‘Di¥ÏyKeywÜdV®ue
(
loÿË
, 
keywÜd
, 
di¥ÏyLoÿË
, 
de¡
+
Ëngth
+Ëngth3, 
de¡C­ac™y
-Ëngth-Ëngth3, 
pE¼ÜCode
);

621 
Ëngth3
 +ğ
	`uloc_g‘Di¥ÏyKeywÜdV®ue
(
loÿË
, 
keywÜd
, 
di¥ÏyLoÿË
, 
NULL
, 0, 
pE¼ÜCode
);

623 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

625 *
pE¼ÜCode
=
U_ZERO_ERROR
;

628 if(
keywÜdCouÁ
 > 1) {

629 if(
Ëngth
 + 
Ëngth3
 + 
locS•L’
 <ğ
de¡C­ac™y
 && 
keywÜdCouÁ
) {

630 
	`u_memıy
(
de¡
+
Ëngth
+
Ëngth3
,
di¥LocS•¬©Ü
,
locS•L’
);

631 
Ëngth3
+=
locS•L’
;

635 
	`u’um_şo£
(
keywÜdEnum
);

637 
hasKeywÜds
 = 
Ëngth3
 > 0;

638 
Ëngth
 +ğ
Ëngth3
;

641 ià((
hasSüt
 && !
hasCouÁry
)

642 || ((
hasSüt
 || 
hasCouÁry
è&& !
hasV¬ŸÁ
 && !
hasKeywÜds
)

643 || ((
hasSüt
 || 
hasCouÁry
 || 
hasV¬ŸÁ
è&& !
hasKeywÜds
)) {

645 
Ëngth
 -ğ
locS•L’
;

646 } ià(
hasLªguage
 && !
hasSüt
 && !
hasCouÁry
 && !
hasV¬ŸÁ
 && !
hasKeywÜds
) {

648 
Ëngth
-=2;

651 ià(
hasLªguage
 && (
hasSüt
 || 
hasCouÁry
 || 
hasV¬ŸÁ
 || 
hasKeywÜds
)) {

653 if(
Ëngth
<
de¡C­ac™y
) {

654 
de¡
[
Ëngth
]=0x29;

656 ++
Ëngth
;

662 ià(
locP©L’
 !ğ
deçuÉP©‹ºL’
 || 
	`u_¡rcmp
(
di¥LocP©‹º
,
deçuÉP©‹º
)) {

663 
UCh¬
 *
p0
 = 
	`u_¡r¡r
(
di¥LocP©‹º
,
·t0
);

664 
UCh¬
 *
p1
 = 
	`u_¡r¡r
(
di¥LocP©‹º
,
·t1
);

665 
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
Ëngth
, 
pE¼ÜCode
);

667 iàĞ
p0
 !ğ
NULL
 && 
p1
 != NULL ) {

668 iàĞ
de¡
 ) {

669 
št32_t
 
de¡L’
 = 0;

670 
UCh¬
 *
»suÉ
 = (UCh¬ *)
	`u´v_m®loc
((
Ëngth
+1)*(UChar));

671 
UCh¬
 *
upos
 = (UCh¬ *)
di¥LocP©‹º
;

672 
	`u_¡rıy
(
»suÉ
,
de¡
);

673 
de¡
[0] = 0;

674  *
upos
 ) {

675 iàĞ
upos
 =ğ
p0
 ) {

676 
	`u_¡ºÿt
(
de¡
,
»suÉ
,
p0L’
);

677 
de¡L’
 +ğ
p0L’
;

678 
de¡
[
de¡L’
] = 0;

679 
upos
 += 3;

680 } iàĞ
upos
 =ğ
p1
 ) {

681 
UCh¬
 *
p1S¹
 = &
»suÉ
[
p0L’
+2];

682 
	`u_¡ºÿt
(
de¡
,
p1S¹
,
Ëngth
-
p0L’
-3);

683 
de¡L’
 +ğ(
Ëngth
-
p0L’
-3);

684 
de¡
[
de¡L’
] = 0;

685 
upos
 += 3;

687 
	`u_¡ºÿt
(
de¡
,
upos
,1);

688 
upos
++;

689 
de¡L’
++;

690 
de¡
[
de¡L’
] = 0;

693 
Ëngth
 = 
de¡L’
;

694 
	`u´v_ä“
(
»suÉ
);

699 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

701 *
pE¼ÜCode
=
U_ZERO_ERROR
;

704  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
Ëngth
, 
pE¼ÜCode
);

705 
	}
}

707 
U_CAPI
 
št32_t
 
U_EXPORT2


708 
	$uloc_g‘Di¥ÏyKeywÜd
(cÚ¡ * 
keywÜd
,

709 cÚ¡ * 
di¥ÏyLoÿË
,

710 
UCh¬
* 
de¡
,

711 
št32_t
 
de¡C­ac™y
,

712 
UE¼ÜCode
* 
¡©us
){

715 if(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

719 if(
de¡C­ac™y
<0 || (de¡C­ac™y>0 && 
de¡
==
NULL
)) {

720 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

726  
	`_g‘SŒšgOrCİyKey
(
U_ICUDATA_LANG
, 
di¥ÏyLoÿË
,

727 
_kKeys
, 
NULL
,

728 
keywÜd
,

729 
keywÜd
,

730 
de¡
, 
de¡C­ac™y
,

731 
¡©us
);

733 
	}
}

736 
	#UCURRENCY_DISPLAY_NAME_INDEX
 1

	)

738 
U_CAPI
 
št32_t
 
U_EXPORT2


739 
	$uloc_g‘Di¥ÏyKeywÜdV®ue
ĞcÚ¡ * 
loÿË
,

740 cÚ¡ * 
keywÜd
,

741 cÚ¡ * 
di¥ÏyLoÿË
,

742 
UCh¬
* 
de¡
,

743 
št32_t
 
de¡C­ac™y
,

744 
UE¼ÜCode
* 
¡©us
){

747 
keywÜdV®ue
[
ULOC_FULLNAME_CAPACITY
*4];

748 
št32_t
 
ÿ·c™y
 = 
ULOC_FULLNAME_CAPACITY
*4;

749 
št32_t
 
keywÜdV®ueL’
 =0;

752 if(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

756 if(
de¡C­ac™y
<0 || (de¡C­ac™y>0 && 
de¡
==
NULL
)) {

757 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

762 
keywÜdV®ue
[0]=0;

763 
keywÜdV®ueL’
 = 
	`uloc_g‘KeywÜdV®ue
(
loÿË
, 
keywÜd
, 
keywÜdV®ue
, 
ÿ·c™y
, 
¡©us
);

769 if(
	`u´v_¡ricmp
(
keywÜd
, 
_kCu¼’cy
)==0){

771 
št32_t
 
di¥NameL’
 = 0;

772 cÚ¡ 
UCh¬
 *
di¥Name
 = 
NULL
;

774 
UResourûBundË
 *
bundË
 = 
	`u»s_İ’
(
U_ICUDATA_CURR
, 
di¥ÏyLoÿË
, 
¡©us
);

775 
UResourûBundË
 *
cu¼’c›s
 = 
	`u»s_g‘ByKey
(
bundË
, 
_kCu¼’c›s
, 
NULL
, 
¡©us
);

776 
UResourûBundË
 *
cu¼’cy
 = 
	`u»s_g‘ByKeyW™hF®lback
(
cu¼’c›s
, 
keywÜdV®ue
, 
NULL
, 
¡©us
);

778 
di¥Name
 = 
	`u»s_g‘SŒšgByIndex
(
cu¼’cy
, 
UCURRENCY_DISPLAY_NAME_INDEX
, &
di¥NameL’
, 
¡©us
);

781 
	`u»s_şo£
(
cu¼’cy
);

782 
	`u»s_şo£
(
cu¼’c›s
);

783 
	`u»s_şo£
(
bundË
);

785 if(
	`U_FAILURE
(*
¡©us
)){

786 if(*
¡©us
 =ğ
U_MISSING_RESOURCE_ERROR
){

788 *
¡©us
 = 
U_USING_DEFAULT_WARNING
;

795 if(
di¥Name
 !ğ
NULL
){

796 if(
di¥NameL’
 <ğ
de¡C­ac™y
){

797 
	`u´v_memıy
(
de¡
, 
di¥Name
, 
di¥NameL’
 * 
U_SIZEOF_UCHAR
);

798  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
di¥NameL’
, 
¡©us
);

800 *
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

801  
di¥NameL’
;

805 if(
keywÜdV®ueL’
 <ğ
de¡C­ac™y
){

806 
	`u_ch¬sToUCh¬s
(
keywÜdV®ue
, 
de¡
, 
keywÜdV®ueL’
);

807  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
keywÜdV®ueL’
, 
¡©us
);

809 *
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

810  
keywÜdV®ueL’
;

817  
	`_g‘SŒšgOrCİyKey
(
U_ICUDATA_LANG
, 
di¥ÏyLoÿË
,

818 
_kTy³s
, 
keywÜd
,

819 
keywÜdV®ue
,

820 
keywÜdV®ue
,

821 
de¡
, 
de¡C­ac™y
,

822 
¡©us
);

824 
	}
}

	@locid.cpp

33 
	~"unicode/locid.h
"

34 
	~"unicode/uloc.h
"

35 
	~"umu‹x.h
"

36 
	~"uas£¹.h
"

37 
	~"cmemÜy.h
"

38 
	~"c¡ršg.h
"

39 
	~"uhash.h
"

40 
	~"uşn_cmn.h
"

42 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

44 
	eELoÿËPos
 {

45 
	meENGLISH
,

46 
	meFRENCH
,

47 
	meGERMAN
,

48 
	meITALIAN
,

49 
	meJAPANESE
,

50 
	meKOREAN
,

51 
	meCHINESE
,

53 
	meFRANCE
,

54 
	meGERMANY
,

55 
	meITALY
,

56 
	meJAPAN
,

57 
	meKOREA
,

58 
	meCHINA
,

59 
	meTAIWAN
,

60 
	meUK
,

61 
	meUS
,

62 
	meCANADA
,

63 
	meCANADA_FRENCH
,

64 
	meROOT
,

68 
	meMAX_LOCALES


69 } 
	tELoÿËPos
;

71 
U_CFUNC
 
št32_t
 
loÿË_g‘KeywÜds
(cÚ¡ *
loÿËID
,

72 
´ev
,

73 *
keywÜds
, 
št32_t
 
keywÜdC­ac™y
,

74 *
v®ues
, 
št32_t
 
v®uesC­ac™y
, iÁ32_ˆ*
v®L’
,

75 
UBoŞ
 
v®uesToo
,

76 
UE¼ÜCode
 *
¡©us
);

78 
U_NAMESPACE_QUALIFIER
 
LoÿË
 *
	ggLoÿËCache
 = 
NULL
;

79 
U_NAMESPACE_QUALIFIER
 
LoÿË
 *
	ggDeçuÉLoÿË
 = 
NULL
;

80 
UHashbË
 *
	ggDeçuÉLoÿËsHashT
 = 
NULL
;

82 
U_CDECL_BEGIN


86 
U_CALLCONV


87 
	$d–‘eLoÿË
(*
obj
) {

88 
	`d–‘e
 (
U_NAMESPACE_QUALIFIER
 
LoÿË
 *è
obj
;

89 
	}
}

91 
UBoŞ
 
U_CALLCONV
 
	$loÿË_ş—nup
()

93 
U_NAMESPACE_USE


95 ià(
gLoÿËCache
) {

96 
d–‘e
 [] 
gLoÿËCache
;

97 
gLoÿËCache
 = 
NULL
;

100 ià(
gDeçuÉLoÿËsHashT
) {

101 
	`uhash_şo£
(
gDeçuÉLoÿËsHashT
);

102 
gDeçuÉLoÿËsHashT
 = 
NULL
;

104 ià(
gDeçuÉLoÿË
) {

106 
d–‘e
 
gDeçuÉLoÿË
;

108 
gDeçuÉLoÿË
 = 
NULL
;

110  
TRUE
;

111 
	}
}

112 
U_CDECL_END


114 
U_NAMESPACE_BEGIN


118 
	$loÿË_£t_deçuÉ_š‹º®
(cÚ¡ *
id
)

120 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

121 
UBoŞ
 
ÿnÚiÿlize
 = 
FALSE
;

127 ià(
id
 =ğ
NULL
) {

128 
	`umtx_lock
(
NULL
);

129 
id
 = 
	`u´v_g‘DeçuÉLoÿËID
();

130 
	`umtx_uÆock
(
NULL
);

131 
ÿnÚiÿlize
 = 
TRUE
;

138 
¡©us
 = 
U_ZERO_ERROR
;

139 
loÿËNameBuf
[512];

141 ià(
ÿnÚiÿlize
) {

142 
	`uloc_ÿnÚiÿlize
(
id
, 
loÿËNameBuf
, ÖoÿËNameBuf)-1, &
¡©us
);

144 
	`uloc_g‘Name
(
id
, 
loÿËNameBuf
, ÖoÿËNameBuf)-1, &
¡©us
);

146 
loÿËNameBuf
[(localeNameBuf)-1] = 0;

151 
UBoŞ
 
isOÆyLoÿË
;

152 
	`UMTX_CHECK
(
NULL
, (
gDeçuÉLoÿË
 =ğNULL), 
isOÆyLoÿË
);

153 ià(
isOÆyLoÿË
) {

156 
LoÿË
 *
ÃwFœ¡DeçuÉ
 = 
Ãw
 
	`LoÿË
(LoÿË::
eBOGUS
);

157 ià(
ÃwFœ¡DeçuÉ
 =ğ
NULL
) {

161 
ÃwFœ¡DeçuÉ
->
	`š™
(
loÿËNameBuf
, 
FALSE
);

162 
	`umtx_lock
(
NULL
);

163 ià(
gDeçuÉLoÿË
 =ğ
NULL
) {

164 
gDeçuÉLoÿË
 = 
ÃwFœ¡DeçuÉ
;

165 
ÃwFœ¡DeçuÉ
 = 
NULL
;

166 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_LOCALE
, 
loÿË_ş—nup
);

170 
	`umtx_uÆock
(
NULL
);

171 ià(
ÃwFœ¡DeçuÉ
 =ğ
NULL
) {

179 
UBoŞ
 
hashTabËN“dsIn™
;

180 
	`UMTX_CHECK
(
NULL
, (
gDeçuÉLoÿËsHashT
 =ğNULL), 
hashTabËN“dsIn™
);

181 ià(
hashTabËN“dsIn™
) {

182 
¡©us
 = 
U_ZERO_ERROR
;

183 
UHashbË
 *
tHashTabË
 = 
	`uhash_İ’
(
uhash_hashCh¬s
, 
uhash_com·»Ch¬s
, 
NULL
, &
¡©us
);

184 ià(
	`U_FAILURE
(
¡©us
)) {

187 
	`uhash_£tV®ueD–‘”
(
tHashTabË
, 
d–‘eLoÿË
);

188 
	`umtx_lock
(
NULL
);

189 ià(
gDeçuÉLoÿËsHashT
 =ğ
NULL
) {

190 
gDeçuÉLoÿËsHashT
 = 
tHashTabË
;

191 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_LOCALE
, 
loÿË_ş—nup
);

193 
	`uhash_şo£
(
tHashTabË
);

194 
hashTabËN“dsIn™
 = 
FALSE
;

196 
	`umtx_uÆock
(
NULL
);

200 
	`umtx_lock
(
NULL
);

201 
LoÿË
 *
ÃwDeçuÉ
 = (LoÿË *)
	`uhash_g‘
(
gDeçuÉLoÿËsHashT
, 
loÿËNameBuf
);

202 ià(
ÃwDeçuÉ
 !ğ
NULL
) {

205 
gDeçuÉLoÿË
 = 
ÃwDeçuÉ
;

206 
	`umtx_uÆock
(
NULL
);

208 
	`umtx_uÆock
(
NULL
);

211 
ÃwDeçuÉ
 = 
Ãw
 
	`LoÿË
(
LoÿË
::
eBOGUS
);

212 ià(
ÃwDeçuÉ
 =ğ
NULL
) {

216 
ÃwDeçuÉ
->
	`š™
(
loÿËNameBuf
, 
FALSE
);

219 cÚ¡ *
key
 = 
ÃwDeçuÉ
->
	`g‘Name
();

220 
	`U_ASSERT
(
	`u´v_¡rcmp
(
key
, 
loÿËNameBuf
) == 0);

221 
	`umtx_lock
(
NULL
);

222 
LoÿË
 *
hashTabËV®
 = (LoÿË *)
	`uhash_g‘
(
gDeçuÉLoÿËsHashT
, 
key
);

223 ià(
hashTabËV®
 =ğ
NULL
) {

224 ià(
hashTabËN“dsIn™
) {

227 
	`uhash_put
(
gDeçuÉLoÿËsHashT
, (*)
gDeçuÉLoÿË
->
	`g‘Name
(), gDeçuÉLoÿË, &
¡©us
);

229 
	`uhash_put
(
gDeçuÉLoÿËsHashT
, (*)
key
, 
ÃwDeçuÉ
, &
¡©us
);

230 
gDeçuÉLoÿË
 = 
ÃwDeçuÉ
;

237 
gDeçuÉLoÿË
 = 
hashTabËV®
;

238 
d–‘e
 
ÃwDeçuÉ
;

240 
	`umtx_uÆock
(
NULL
);

242 
	}
}

243 
U_NAMESPACE_END


246 
U_CFUNC
 

247 
	$loÿË_£t_deçuÉ
(cÚ¡ *
id
)

249 
U_NAMESPACE_USE


250 
	`loÿË_£t_deçuÉ_š‹º®
(
id
);

251 
	}
}

254 
U_CFUNC
 const *

255 
	$loÿË_g‘_deçuÉ
()

257 
U_NAMESPACE_USE


259  
LoÿË
::
	`g‘DeçuÉ
().
	`g‘Name
();

260 
	}
}

263 
U_NAMESPACE_BEGIN


265 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
LoÿË
)

270 
	#SEP_CHAR
 '_'

	)

272 
LoÿË
::~
	$LoÿË
()

275 ià(
fuÎName
 !ğ
fuÎNameBufãr
)

277 
	`u´v_ä“
(
fuÎName
);

278 
fuÎName
 = 
NULL
;

280 ià(
ba£Name
 && ba£Nam!ğ
ba£NameBufãr
) {

281 
	`u´v_ä“
(
ba£Name
);

282 
ba£Name
 = 
NULL
;

284 
	}
}

286 
	gLoÿË
::
	$LoÿË
()

287 : 
	`UObjeù
(), 
	`fuÎName
(
fuÎNameBufãr
), 
	$ba£Name
(
NULL
)

289 
	`š™
(
NULL
, 
FALSE
);

290 
	}
}

297 
	gLoÿË
::
LoÿË
(LoÿË::
ELoÿËTy³
)

298 : 
UObjeù
(), 
fuÎName
(
fuÎNameBufãr
), 
	$ba£Name
(
NULL
)

300 
	`£tToBogus
();

301 
	}
}

304 
	gLoÿË
::
	$LoÿË
ĞcÚ¡ * 
ÃwLªguage
,

305 cÚ¡ * 
ÃwCouÁry
,

306 cÚ¡ * 
ÃwV¬ŸÁ
,

307 cÚ¡ * 
ÃwKeywÜds
)

308 : 
	`UObjeù
(), 
	`fuÎName
(
fuÎNameBufãr
), 
	$ba£Name
(
NULL
)

310 ifĞ(
ÃwLªguage
==
NULL
è&& (
ÃwCouÁry
 =ğNULLè&& (
ÃwV¬ŸÁ
 == NULL) )

312 
	`š™
(
NULL
, 
FALSE
);

316 
MaybeSckA¼ay
<, 
ULOC_FULLNAME_CAPACITY
> 
togo
;

317 
št32_t
 
size
 = 0;

318 
št32_t
 
lsize
 = 0;

319 
št32_t
 
csize
 = 0;

320 
št32_t
 
vsize
 = 0;

321 
št32_t
 
ksize
 = 0;

322 *
p
;

327 iàĞ
ÃwLªguage
 !ğ
NULL
 )

329 
lsize
 = (
št32_t
)
	`u´v_¡¾’
(
ÃwLªguage
);

330 
size
 = 
lsize
;

334 iàĞ
ÃwCouÁry
 !ğ
NULL
 )

336 
csize
 = (
št32_t
)
	`u´v_¡¾’
(
ÃwCouÁry
);

337 
size
 +ğ
csize
;

341 iàĞ
ÃwV¬ŸÁ
 !ğ
NULL
 )

344 
ÃwV¬ŸÁ
[0] =ğ
SEP_CHAR
)

346 
ÃwV¬ŸÁ
++;

350 
vsize
 = (
št32_t
)
	`u´v_¡¾’
(
ÃwV¬ŸÁ
);

351  (
vsize
>1è&& (
ÃwV¬ŸÁ
[vsize-1] =ğ
SEP_CHAR
) )

353 
vsize
--;

357 ifĞ
vsize
 > 0 )

359 
size
 +ğ
vsize
;

363 iàĞ
vsize
 > 0 )

365 
size
 += 2;

367 iàĞ
csize
 > 0 )

369 
size
 += 1;

372 iàĞ
ÃwKeywÜds
 !ğ
NULL
)

374 
ksize
 = (
št32_t
)
	`u´v_¡¾’
(
ÃwKeywÜds
);

375 
size
 +ğ
ksize
 + 1;

383 ià(
size
 >ğ
togo
.
	`g‘C­ac™y
())

386 ià(
togo
.
	`»size
(
size
+1è=ğ
NULL
) {

387 
	`š™
(
NULL
, 
FALSE
);

391 
togo
[0] = 0;

394 
p
 = 
togo
.
	`g‘AlŸs
();

395 iàĞ
lsize
 != 0 )

397 
	`u´v_¡rıy
(
p
, 
ÃwLªguage
);

398 
p
 +ğ
lsize
;

401 iàĞĞ
vsize
 !ğ0 ) || (
csize
 != 0) )

403 *
p
++ = 
SEP_CHAR
;

406 iàĞ
csize
 != 0 )

408 
	`u´v_¡rıy
(
p
, 
ÃwCouÁry
);

409 
p
 +ğ
csize
;

412 iàĞ
vsize
 != 0)

414 *
p
++ = 
SEP_CHAR
;

416 
	`u´v_¡ºıy
(
p
, 
ÃwV¬ŸÁ
, 
vsize
);

417 
p
 +ğ
vsize
;

418 *
p
 = 0;

421 iàĞ
ksize
 != 0)

423 ià(
	`u´v_¡rchr
(
ÃwKeywÜds
, '=')) {

424 *
p
++ = '@';

427 *
p
++ = '_';

428 iàĞ
vsize
 == 0) {

429 *
p
++ = '_';

432 
	`u´v_¡rıy
(
p
, 
ÃwKeywÜds
);

433 
p
 +ğ
ksize
;

438 
	`š™
(
togo
.
	`g‘AlŸs
(), 
FALSE
);

440 
	}
}

442 
	gLoÿË
::
	$LoÿË
(cÚ¡ 
LoÿË
 &
Ùh”
)

443 : 
	`UObjeù
(
Ùh”
), 
	`fuÎName
(
fuÎNameBufãr
), 
	$ba£Name
(
NULL
)

445 *
this
 = 
Ùh”
;

446 
	}
}

448 
	gLoÿË
 &LoÿË::
İ”©Ü
=(cÚ¡ 
LoÿË
 &
Ùh”
)

450 ià(
this
 =ğ&
Ùh”
) {

451  *
this
;

454 ià(&
	gÙh”
 =ğ
NULL
) {

455 
this
->
£tToBogus
();

456  *
	gthis
;

460 if(
	gfuÎName
 !ğ
fuÎNameBufãr
) {

461 
u´v_ä“
(
fuÎName
);

462 
	gfuÎName
 = 
fuÎNameBufãr
;

466 if(
	gÙh”
.
	gfuÎName
 !ğ
Ùh”
.
fuÎNameBufãr
) {

467 
fuÎName
 = (*)
u´v_m®loc
(()*(
u´v_¡¾’
(
Ùh”
.fullName)+1));

468 ià(
	gfuÎName
 =ğ
NULL
) {

469  *
this
;

473 
u´v_¡rıy
(
fuÎName
, 
Ùh”
.fullName);

479 if(
	gba£Name
 && ba£Nam!ğ
ba£NameBufãr
) {

480 
u´v_ä“
(
ba£Name
);

482 
	gba£Name
 = 
NULL
;

484 if(
	gÙh”
.
	gba£Name
 =ğ
Ùh”
.
ba£NameBufãr
) {

485 
u´v_¡rıy
(
ba£NameBufãr
, 
Ùh”
.baseNameBuffer);

486 
	gba£Name
 = 
ba£NameBufãr
;

490 
u´v_¡rıy
(
Ïnguage
, 
Ùh”
.language);

491 
u´v_¡rıy
(
süt
, 
Ùh”
.script);

492 
u´v_¡rıy
(
couÁry
, 
Ùh”
.country);

495 
	gv¬ŸÁBegš
 = 
Ùh”
.
v¬ŸÁBegš
;

496 
	gfIsBogus
 = 
Ùh”
.
fIsBogus
;

497  *
	gthis
;

500 
LoÿË
 *

501 
	gLoÿË
::
	$şÚe
() const {

502  
Ãw
 
	`LoÿË
(*
this
);

503 
	}
}

505 
UBoŞ


506 
	gLoÿË
::
İ”©Ü
==ĞcÚ¡ 
LoÿË
& 
Ùh”
) const

508  (
u´v_¡rcmp
(
Ùh”
.
fuÎName
, fullName) == 0);

512 
	gLoÿË
& LoÿË::
	$š™
(cÚ¡ * 
loÿËID
, 
UBoŞ
 
ÿnÚiÿlize
)

514 
fIsBogus
 = 
FALSE
;

516 if(
fuÎName
 !ğ
fuÎNameBufãr
) {

517 
	`u´v_ä“
(
fuÎName
);

518 
fuÎName
 = 
fuÎNameBufãr
;

521 if(
ba£Name
 && ba£Nam!ğ
ba£NameBufãr
) {

522 
	`u´v_ä“
(
ba£Name
);

523 
ba£Name
 = 
NULL
;

530 *
£·¿tÜ
;

531 *
f›ld
[5] = {0};

532 
št32_t
 
f›ldL’
[5] = {0};

533 
št32_t
 
f›ldIdx
;

534 
št32_t
 
v¬ŸÁF›ld
;

535 
št32_t
 
Ëngth
;

536 
UE¼ÜCode
 
”r
;

538 if(
loÿËID
 =ğ
NULL
) {

540  *
this
 = 
	`g‘DeçuÉ
();

544 
Ïnguage
[0] = 
süt
[0] = 
couÁry
[0] = 0;

547 
”r
 = 
U_ZERO_ERROR
;

548 
Ëngth
 = 
ÿnÚiÿlize
 ?

549 
	`uloc_ÿnÚiÿlize
(
loÿËID
, 
fuÎName
, (
fuÎNameBufãr
), &
”r
) :

550 
	`uloc_g‘Name
(
loÿËID
, 
fuÎName
, (
fuÎNameBufãr
), &
”r
);

552 if(
”r
 =ğ
U_BUFFER_OVERFLOW_ERROR
 || 
Ëngth
 >ğ(
št32_t
)(
fuÎNameBufãr
)) {

554 
fuÎName
 = (*)
	`u´v_m®loc
(()*(
Ëngth
 + 1));

555 if(
fuÎName
 == 0) {

556 
fuÎName
 = 
fuÎNameBufãr
;

559 
”r
 = 
U_ZERO_ERROR
;

560 
Ëngth
 = 
ÿnÚiÿlize
 ?

561 
	`uloc_ÿnÚiÿlize
(
loÿËID
, 
fuÎName
, 
Ëngth
+1, &
”r
) :

562 
	`uloc_g‘Name
(
loÿËID
, 
fuÎName
, 
Ëngth
+1, &
”r
);

564 if(
	`U_FAILURE
(
”r
è||ƒ¼ =ğ
U_STRING_NOT_TERMINATED_WARNING
) {

569 
v¬ŸÁBegš
 = 
Ëngth
;

572 
£·¿tÜ
 = 
f›ld
[0] = 
fuÎName
;

573 
f›ldIdx
 = 1;

574 (
£·¿tÜ
 = 
	`u´v_¡rchr
(
f›ld
[
f›ldIdx
-1], 
SEP_CHAR
)è&& f›ldIdx < (
št32_t
)((field)/(field[0]))-1) {

575 
f›ld
[
f›ldIdx
] = 
£·¿tÜ
 + 1;

576 
f›ldL’
[
f›ldIdx
-1] = (
št32_t
)(
£·¿tÜ
 - 
f›ld
[fieldIdx-1]);

577 
f›ldIdx
++;

580 
£·¿tÜ
 = 
	`u´v_¡rchr
(
f›ld
[
f›ldIdx
-1], '@');

581 * 
£p2
 = 
	`u´v_¡rchr
(
f›ld
[
f›ldIdx
-1], '.');

582 ià(
£·¿tÜ
!=
NULL
 || 
£p2
!=NULL) {

583 ià(
£·¿tÜ
==
NULL
 || (
£p2
!=NULL && separator > sep2)) {

584 
£·¿tÜ
 = 
£p2
;

586 
f›ldL’
[
f›ldIdx
-1] = (
št32_t
)(
£·¿tÜ
 - 
f›ld
[fieldIdx-1]);

588 
f›ldL’
[
f›ldIdx
-1] = 
Ëngth
 - (
št32_t
)(
f›ld
[f›ldIdx-1] - 
fuÎName
);

591 ià(
f›ldL’
[0] >ğ(
št32_t
)((
Ïnguage
))

592 || (
f›ldL’
[1] =ğ4 && f›ldL’[2] >ğ(
št32_t
)((
couÁry
)))

593 || (
f›ldL’
[1] !ğ4 && f›ldL’[1] >ğ(
št32_t
)((
couÁry
))))

598 
v¬ŸÁF›ld
 = 2;

599 ià(
f›ldL’
[0] > 0) {

601 
	`u´v_memıy
(
Ïnguage
, 
fuÎName
, 
f›ldL’
[0]);

602 
Ïnguage
[
f›ldL’
[0]] = 0;

604 ià(
f›ldL’
[1] == 4) {

606 
	`u´v_memıy
(
süt
, 
f›ld
[1], 
f›ldL’
[1]);

607 
süt
[
f›ldL’
[1]] = 0;

608 
v¬ŸÁF›ld
 = 3;

609 ià(
f›ldL’
[2] > 0) {

611 
	`u´v_memıy
(
couÁry
, 
f›ld
[2], 
f›ldL’
[2]);

612 
couÁry
[
f›ldL’
[2]] = 0;

615 ià(
f›ldL’
[1] > 0) {

617 
	`u´v_memıy
(
couÁry
, 
f›ld
[1], 
f›ldL’
[1]);

618 
couÁry
[
f›ldL’
[1]] = 0;

620 ià(
v¬ŸÁF›ld
 > 0 && 
f›ldL’
[variantField] > 0) {

622 
v¬ŸÁBegš
 = (
št32_t
)(
f›ld
[
v¬ŸÁF›ld
] - 
fuÎName
);

626  *
this
;

630 
	`£tToBogus
();

632  *
this
;

633 
	}
}

635 
št32_t


636 
	gLoÿË
::
	$hashCode
() const

638 
UHashTok
 
hashKey
;

639 
hashKey
.
poš‹r
 = 
fuÎName
;

640  
	`uhash_hashCh¬s
(
hashKey
);

641 
	}
}

644 
	gLoÿË
::
	$£tToBogus
() {

646 if(
fuÎName
 !ğ
fuÎNameBufãr
) {

647 
	`u´v_ä“
(
fuÎName
);

648 
fuÎName
 = 
fuÎNameBufãr
;

650 if(
ba£Name
 && ba£Nam!ğ
ba£NameBufãr
) {

651 
	`u´v_ä“
(
ba£Name
);

652 
ba£Name
 = 
NULL
;

654 *
fuÎNameBufãr
 = 0;

655 *
Ïnguage
 = 0;

656 *
süt
 = 0;

657 *
couÁry
 = 0;

658 
fIsBogus
 = 
TRUE
;

659 
	}
}

661 cÚ¡ 
	gLoÿË
& 
U_EXPORT2


662 
	gLoÿË
::
	$g‘DeçuÉ
()

664 cÚ¡ 
LoÿË
 *
»tLoÿË
;

665 
	`UMTX_CHECK
(
NULL
, 
gDeçuÉLoÿË
, 
»tLoÿË
);

666 ià(
»tLoÿË
 =ğ
NULL
) {

667 
	`loÿË_£t_deçuÉ_š‹º®
(
NULL
);

668 
	`umtx_lock
(
NULL
);

673 
»tLoÿË
 = 
gDeçuÉLoÿË
;

674 
	`umtx_uÆock
(
NULL
);

676  *
»tLoÿË
;

677 
	}
}

681 
U_EXPORT2


682 
	gLoÿË
::
	$£tDeçuÉ
ĞcÚ¡ 
LoÿË
& 
ÃwLoÿË
,

683 
UE¼ÜCode
& 
¡©us
)

685 ià(
	`U_FAILURE
(
¡©us
)) {

692 cÚ¡ *
loÿËID
 = 
ÃwLoÿË
.
	`g‘Name
();

693 
	`loÿË_£t_deçuÉ_š‹º®
(
loÿËID
);

694 
	}
}

696 
LoÿË
 
U_EXPORT2


697 
	gLoÿË
::
	$ü—‹FromName
 (cÚ¡ *
Çme
)

699 ià(
Çme
) {

700 
LoÿË
 
	`l
("");

701 
l
.
	`š™
(
Çme
, 
FALSE
);

702  
l
;

705  
	`g‘DeçuÉ
();

707 
	}
}

709 
LoÿË
 
U_EXPORT2


710 
	gLoÿË
::
	$ü—‹CªÚiÿl
(cÚ¡ * 
Çme
) {

711 
LoÿË
 
	`loc
("");

712 
loc
.
	`š™
(
Çme
, 
TRUE
);

713  
loc
;

714 
	}
}

717 
	gLoÿË
::
	$g‘ISO3Lªguage
() const

719  
	`uloc_g‘ISO3Lªguage
(
fuÎName
);

720 
	}
}

724 
	gLoÿË
::
	$g‘ISO3CouÁry
() const

726  
	`uloc_g‘ISO3CouÁry
(
fuÎName
);

727 
	}
}

736 
ušt32_t


737 
	gLoÿË
::
	$g‘LCID
() const

739  
	`uloc_g‘LCID
(
fuÎName
);

740 
	}
}

742 cÚ¡ * cÚ¡* 
U_EXPORT2
 
	gLoÿË
::
	$g‘ISOCouÁr›s
()

744  
	`uloc_g‘ISOCouÁr›s
();

745 
	}
}

747 cÚ¡ * cÚ¡* 
U_EXPORT2
 
	gLoÿË
::
	$g‘ISOLªguages
()

749  
	`uloc_g‘ISOLªguages
();

750 
	}
}

753 
	gLoÿË
::
	$£tFromPOSIXID
(cÚ¡ *
posixID
)

755 
	`š™
(
posixID
, 
TRUE
);

756 
	}
}

758 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


759 
	gLoÿË
::
	$g‘RoÙ
()

761  
	`g‘LoÿË
(
eROOT
);

762 
	}
}

764 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


765 
	gLoÿË
::
	$g‘English
()

767  
	`g‘LoÿË
(
eENGLISH
);

768 
	}
}

770 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


771 
	gLoÿË
::
	$g‘F»nch
()

773  
	`g‘LoÿË
(
eFRENCH
);

774 
	}
}

776 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


777 
	gLoÿË
::
	$g‘G”mª
()

779  
	`g‘LoÿË
(
eGERMAN
);

780 
	}
}

782 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


783 
	gLoÿË
::
	$g‘IlŸn
()

785  
	`g‘LoÿË
(
eITALIAN
);

786 
	}
}

788 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


789 
	gLoÿË
::
	$g‘J­ªe£
()

791  
	`g‘LoÿË
(
eJAPANESE
);

792 
	}
}

794 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


795 
	gLoÿË
::
	$g‘KÜ—n
()

797  
	`g‘LoÿË
(
eKOREAN
);

798 
	}
}

800 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


801 
	gLoÿË
::
	$g‘Chše£
()

803  
	`g‘LoÿË
(
eCHINESE
);

804 
	}
}

806 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


807 
	gLoÿË
::
	$g‘Sim¶if›dChše£
()

809  
	`g‘LoÿË
(
eCHINA
);

810 
	}
}

812 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


813 
	gLoÿË
::
	$g‘T¿d™iÚ®Chše£
()

815  
	`g‘LoÿË
(
eTAIWAN
);

816 
	}
}

819 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


820 
	gLoÿË
::
	$g‘F¿nû
()

822  
	`g‘LoÿË
(
eFRANCE
);

823 
	}
}

825 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


826 
	gLoÿË
::
	$g‘G”mªy
()

828  
	`g‘LoÿË
(
eGERMANY
);

829 
	}
}

831 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


832 
	gLoÿË
::
	$g‘Ily
()

834  
	`g‘LoÿË
(
eITALY
);

835 
	}
}

837 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


838 
	gLoÿË
::
	$g‘J­ª
()

840  
	`g‘LoÿË
(
eJAPAN
);

841 
	}
}

843 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


844 
	gLoÿË
::
	$g‘KÜ—
()

846  
	`g‘LoÿË
(
eKOREA
);

847 
	}
}

849 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


850 
	gLoÿË
::
	$g‘Chša
()

852  
	`g‘LoÿË
(
eCHINA
);

853 
	}
}

855 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


856 
	gLoÿË
::
	$g‘PRC
()

858  
	`g‘LoÿË
(
eCHINA
);

859 
	}
}

861 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


862 
	gLoÿË
::
	$g‘Taiwª
()

864  
	`g‘LoÿË
(
eTAIWAN
);

865 
	}
}

867 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


868 
	gLoÿË
::
	$g‘UK
()

870  
	`g‘LoÿË
(
eUK
);

871 
	}
}

873 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


874 
	gLoÿË
::
	$g‘US
()

876  
	`g‘LoÿË
(
eUS
);

877 
	}
}

879 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


880 
	gLoÿË
::
	$g‘Cªada
()

882  
	`g‘LoÿË
(
eCANADA
);

883 
	}
}

885 cÚ¡ 
	gLoÿË
 & 
U_EXPORT2


886 
	gLoÿË
::
	$g‘CªadaF»nch
()

888  
	`g‘LoÿË
(
eCANADA_FRENCH
);

889 
	}
}

891 cÚ¡ 
	gLoÿË
 &

892 
	gLoÿË
::
	$g‘LoÿË
(
locid
)

894 
LoÿË
 *
loÿËCache
 = 
	`g‘LoÿËCache
();

895 
	`U_ASSERT
((
locid
 < 
eMAX_LOCALES
)&&(locid>=0));

896 ià(
loÿËCache
 =ğ
NULL
) {

899 
locid
 = 0;

901  
loÿËCache
[
locid
];

902 
	}
}

908 
LoÿË
 *

909 
	gLoÿË
::
	$g‘LoÿËCache
()

911 
	`umtx_lock
(
NULL
);

912 
UBoŞ
 
ÃedIn™
 = (
gLoÿËCache
 =ğ
NULL
);

913 
	`umtx_uÆock
(
NULL
);

915 ià(
ÃedIn™
) {

916 
LoÿË
 *
tLoÿËCache
 = 
Ãw
 LoÿË[()
eMAX_LOCALES
];

917 ià(
tLoÿËCache
 =ğ
NULL
) {

918  
NULL
;

920 
tLoÿËCache
[
eROOT
] = 
	`LoÿË
("");

921 
tLoÿËCache
[
eENGLISH
] = 
	`LoÿË
("en");

922 
tLoÿËCache
[
eFRENCH
] = 
	`LoÿË
("fr");

923 
tLoÿËCache
[
eGERMAN
] = 
	`LoÿË
("de");

924 
tLoÿËCache
[
eITALIAN
] = 
	`LoÿË
("it");

925 
tLoÿËCache
[
eJAPANESE
] = 
	`LoÿË
("ja");

926 
tLoÿËCache
[
eKOREAN
] = 
	`LoÿË
("ko");

927 
tLoÿËCache
[
eCHINESE
] = 
	`LoÿË
("zh");

928 
tLoÿËCache
[
eFRANCE
] = 
	`LoÿË
("fr", "FR");

929 
tLoÿËCache
[
eGERMANY
] = 
	`LoÿË
("de", "DE");

930 
tLoÿËCache
[
eITALY
] = 
	`LoÿË
("it", "IT");

931 
tLoÿËCache
[
eJAPAN
] = 
	`LoÿË
("ja", "JP");

932 
tLoÿËCache
[
eKOREA
] = 
	`LoÿË
("ko", "KR");

933 
tLoÿËCache
[
eCHINA
] = 
	`LoÿË
("zh", "CN");

934 
tLoÿËCache
[
eTAIWAN
] = 
	`LoÿË
("zh", "TW");

935 
tLoÿËCache
[
eUK
] = 
	`LoÿË
("en", "GB");

936 
tLoÿËCache
[
eUS
] = 
	`LoÿË
("en", "US");

937 
tLoÿËCache
[
eCANADA
] = 
	`LoÿË
("en", "CA");

938 
tLoÿËCache
[
eCANADA_FRENCH
] = 
	`LoÿË
("fr", "CA");

940 
	`umtx_lock
(
NULL
);

941 ià(
gLoÿËCache
 =ğ
NULL
) {

942 
gLoÿËCache
 = 
tLoÿËCache
;

943 
tLoÿËCache
 = 
NULL
;

944 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_LOCALE
, 
loÿË_ş—nup
);

946 
	`umtx_uÆock
(
NULL
);

947 ià(
tLoÿËCache
) {

948 
d–‘e
 [] 
tLoÿËCache
;

951  
gLoÿËCache
;

952 
	}
}

954 şas 
	cKeywÜdEnum”©iÚ
 : 
public
 
SŒšgEnum”©iÚ
 {

955 
´iv©e
:

956 *
keywÜds
;

957 *
	mcu¼’t
;

958 
št32_t
 
	mËngth
;

959 
UnicodeSŒšg
 
	mcu¼USKey
;

960 cÚ¡ 
	mfgCÏssID
;

962 
	mpublic
:

963 
UCÏssID
 
U_EXPORT2
 
	$g‘SticCÏssID
(è{  (
UCÏssID
)&
fgCÏssID
; }

964 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
(ècÚ¡ {  
	`g‘SticCÏssID
(); 
	}
}

965 
	gpublic
:

966 
	$KeywÜdEnum”©iÚ
(cÚ¡ *
keys
, 
št32_t
 
keywÜdL’
, iÁ32_ˆ
cu¼’tIndex
, 
UE¼ÜCode
 &
¡©us
)

967 : 
	`keywÜds
((*)&
fgCÏssID
), 
	`cu¼’t
((*)&fgCÏssID), 
	$Ëngth
(0) {

968 if(
	`U_SUCCESS
(
¡©us
è&& 
keywÜdL’
 != 0) {

969 if(
keys
 =ğ
NULL
 || 
keywÜdL’
 < 0) {

970 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

972 
keywÜds
 = (*)
	`u´v_m®loc
(
keywÜdL’
+1);

973 ià(
keywÜds
 =ğ
NULL
) {

974 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

977 
	`u´v_memıy
(
keywÜds
, 
keys
, 
keywÜdL’
);

978 
keywÜds
[
keywÜdL’
] = 0;

979 
cu¼’t
 = 
keywÜds
 + 
cu¼’tIndex
;

980 
Ëngth
 = 
keywÜdL’
;

984 
	}
}

986 
	gvœtu®
 ~
	$KeywÜdEnum”©iÚ
() {

987 
	`u´v_ä“
(
keywÜds
);

988 
	}
}

990 
vœtu®
 
SŒšgEnum”©iÚ
 * 
	$şÚe
() const

992 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

993  
Ãw
 
	`KeywÜdEnum”©iÚ
(
keywÜds
, 
Ëngth
, (
št32_t
)(
cu¼’t
 - keywÜds), 
¡©us
);

994 
	}
}

996 
vœtu®
 
št32_t
 
	$couÁ
(
UE¼ÜCode
 & ) const {

997 *
kw
 = 
keywÜds
;

998 
št32_t
 
»suÉ
 = 0;

999 *
kw
) {

1000 
»suÉ
++;

1001 
kw
 +ğ
	`u´v_¡¾’
(kw)+1;

1003  
»suÉ
;

1004 
	}
}

1006 
vœtu®
 cÚ¡ * 
	$Ãxt
(
št32_t
* 
»suÉL’gth
, 
UE¼ÜCode
& 
¡©us
) {

1007 cÚ¡ * 
»suÉ
;

1008 
št32_t
 
Ën
;

1009 if(
	`U_SUCCESS
(
¡©us
è&& *
cu¼’t
 != 0) {

1010 
»suÉ
 = 
cu¼’t
;

1011 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
cu¼’t
);

1012 
cu¼’t
 +ğ
Ën
+1;

1013 if(
»suÉL’gth
 !ğ
NULL
) {

1014 *
»suÉL’gth
 = 
Ën
;

1017 if(
»suÉL’gth
 !ğ
NULL
) {

1018 *
»suÉL’gth
 = 0;

1020 
»suÉ
 = 
NULL
;

1022  
»suÉ
;

1023 
	}
}

1025 
vœtu®
 cÚ¡ 
UnicodeSŒšg
* 
	$¢ext
(
UE¼ÜCode
& 
¡©us
) {

1026 
št32_t
 
»suÉL’gth
 = 0;

1027 cÚ¡ *
s
 = 
	`Ãxt
(&
»suÉL’gth
, 
¡©us
);

1028  
	`£tCh¬s
(
s
, 
»suÉL’gth
, 
¡©us
);

1029 
	}
}

1031 
vœtu®
 
	$»£t
(
UE¼ÜCode
& ) {

1032 
cu¼’t
 = 
keywÜds
;

1033 
	}
}

1036 cÚ¡ 
	gKeywÜdEnum”©iÚ
::
fgCÏssID
 = '\0';

1038 
SŒšgEnum”©iÚ
 *

1039 
	gLoÿË
::
	$ü—‹KeywÜds
(
UE¼ÜCode
 &
¡©us
) const

1041 
keywÜds
[256];

1042 
št32_t
 
keywÜdC­ac™y
 = 256;

1043 
SŒšgEnum”©iÚ
 *
»suÉ
 = 
NULL
;

1045 cÚ¡ * 
v¬ŸÁS¹
 = 
	`u´v_¡rchr
(
fuÎName
, '@');

1046 cÚ¡ * 
assignm’t
 = 
	`u´v_¡rchr
(
fuÎName
, '=');

1047 if(
v¬ŸÁS¹
) {

1048 if(
assignm’t
 > 
v¬ŸÁS¹
) {

1049 
št32_t
 
keyL’
 = 
	`loÿË_g‘KeywÜds
(
v¬ŸÁS¹
+1, '@', 
keywÜds
, 
keywÜdC­ac™y
, 
NULL
, 0, NULL, 
FALSE
, &
¡©us
);

1050 if(
keyL’
) {

1051 
»suÉ
 = 
Ãw
 
	`KeywÜdEnum”©iÚ
(
keywÜds
, 
keyL’
, 0, 
¡©us
);

1054 
¡©us
 = 
U_INVALID_FORMAT_ERROR
;

1057  
»suÉ
;

1058 
	}
}

1060 
št32_t


1061 
	gLoÿË
::
	$g‘KeywÜdV®ue
(cÚ¡ * 
keywÜdName
, *
bufãr
, 
št32_t
 
bufL’
, 
UE¼ÜCode
 &
¡©us
) const

1063  
	`uloc_g‘KeywÜdV®ue
(
fuÎName
, 
keywÜdName
, 
bufãr
, 
bufL’
, &
¡©us
);

1064 
	}
}

1067 
	gLoÿË
::
	$£tKeywÜdV®ue
(cÚ¡ * 
keywÜdName
, cÚ¡ * 
keywÜdV®ue
, 
UE¼ÜCode
 &
¡©us
)

1069 
	`uloc_£tKeywÜdV®ue
(
keywÜdName
, 
keywÜdV®ue
, 
fuÎName
, 
ULOC_FULLNAME_CAPACITY
, &
¡©us
);

1070 
	}
}

1073 
	gLoÿË
::
	$g‘Ba£Name
() const

1076 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

1078 if(
ba£Name
 == 0) {

1079 ((
LoÿË
 *)
this
)->
ba£Name
 = ((LoÿË *éhis)->
ba£NameBufãr
;

1080 
št32_t
 
ba£NameSize
 = 
	`uloc_g‘Ba£Name
(
fuÎName
, 
ba£Name
, 
ULOC_FULLNAME_CAPACITY
, &
¡©us
);

1081 if(
ba£NameSize
 >ğ
ULOC_FULLNAME_CAPACITY
) {

1082 ((
LoÿË
 *)
this
)->
ba£Name
 = (*)
	`u´v_m®loc
((è* 
ba£NameSize
 + 1);

1083 ià(
ba£Name
 =ğ
NULL
) {

1084  
ba£Name
;

1086 
	`uloc_g‘Ba£Name
(
fuÎName
, 
ba£Name
, 
ba£NameSize
+1, &
¡©us
);

1088 
ba£Name
[
ba£NameSize
] = 0;

1093 ià(
v¬ŸÁBegš
 =ğ(
št32_t
)
	`u´v_¡¾’
(
fuÎName
)) {

1094 ((
LoÿË
*)
this
)->
v¬ŸÁBegš
 = 
ba£NameSize
;

1097  
ba£Name
;

1098 
	}
}

1101 
	gU_NAMESPACE_END


	@loclikely.cpp

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/put.h
"

22 
	~"unicode/uloc.h
"

23 
	~"unicode/u»s.h
"

24 
	~"cmemÜy.h
"

25 
	~"c¡ršg.h
"

26 
	~"ulocimp.h
"

27 
	~"u¡r_imp.h
"

37 cÚ¡ * 
U_CALLCONV


38 
	$fšdLik–ySubgs
(cÚ¡ * 
loÿËID
,

39 * 
bufãr
,

40 
št32_t
 
bufãrL’gth
,

41 
UE¼ÜCode
* 
”r
) {

42 cÚ¡ * 
»suÉ
 = 
NULL
;

44 ià(!
	`U_FAILURE
(*
”r
)) {

45 
št32_t
 
»sL’
 = 0;

46 cÚ¡ 
UCh¬
* 
s
 = 
NULL
;

47 
UE¼ÜCode
 
tmpE¼
 = 
U_ZERO_ERROR
;

48 
UResourûBundË
* 
subgs
 = 
	`u»s_İ’Dœeù
(
NULL
, "lik–ySubgs", &
tmpE¼
);

49 ià(
	`U_SUCCESS
(
tmpE¼
)) {

50 
s
 = 
	`u»s_g‘SŒšgByKey
(
subgs
, 
loÿËID
, &
»sL’
, &
tmpE¼
);

52 ià(
	`U_FAILURE
(
tmpE¼
)) {

57 ià(
tmpE¼
 !ğ
U_MISSING_RESOURCE_ERROR
) {

58 *
”r
 = 
tmpE¼
;

61 ià(
»sL’
 >ğ
bufãrL’gth
) {

63 *
”r
 = 
U_INTERNAL_PROGRAM_ERROR
;

66 
	`u_UCh¬sToCh¬s
(
s
, 
bufãr
, 
»sL’
 + 1);

67 
»suÉ
 = 
bufãr
;

70 
	`u»s_şo£
(
subgs
);

72 *
”r
 = 
tmpE¼
;

76  
»suÉ
;

77 
	}
}

89 
U_CALLCONV


90 
	$­³ndTag
(

91 cÚ¡ * 
g
,

92 
št32_t
 
gL’gth
,

93 * 
bufãr
,

94 
št32_t
* 
bufãrL’gth
) {

96 ià(*
bufãrL’gth
 > 0) {

97 
bufãr
[*
bufãrL’gth
] = '_';

98 ++(*
bufãrL’gth
);

101 
	`u´v_memmove
(

102 &
bufãr
[*
bufãrL’gth
],

103 
g
,

104 
gL’gth
);

106 *
bufãrL’gth
 +ğ
gL’gth
;

107 
	}
}

112 cÚ¡ * cÚ¡ 
	gunknownLªguage
 = "und";

113 cÚ¡ * cÚ¡ 
	gunknownSüt
 = "Zzzz";

114 cÚ¡ * cÚ¡ 
	gunknownRegiÚ
 = "ZZ";

150 
št32_t
 
U_CALLCONV


151 
	$ü—‹TagSŒšgW™hAÉ”Ç‹s
(

152 cÚ¡ * 
Ïng
,

153 
št32_t
 
ÏngL’gth
,

154 cÚ¡ * 
süt
,

155 
št32_t
 
sütL’gth
,

156 cÚ¡ * 
»giÚ
,

157 
št32_t
 
»giÚL’gth
,

158 cÚ¡ * 
Œašg
,

159 
št32_t
 
ŒašgL’gth
,

160 cÚ¡ * 
®‹º©eTags
,

161 * 
g
,

162 
št32_t
 
gC­ac™y
,

163 
UE¼ÜCode
* 
”r
) {

165 ià(
	`U_FAILURE
(*
”r
)) {

166 
”rÜ
;

168 ià(
g
 =ğ
NULL
 ||

169 
gC­ac™y
 <= 0 ||

170 
ÏngL’gth
 >ğ
ULOC_LANG_CAPACITY
 ||

171 
sütL’gth
 >ğ
ULOC_SCRIPT_CAPACITY
 ||

172 
»giÚL’gth
 >ğ
ULOC_COUNTRY_CAPACITY
) {

173 
”rÜ
;

182 
gBufãr
[
ULOC_FULLNAME_CAPACITY
];

183 
št32_t
 
gL’gth
 = 0;

184 
št32_t
 
ÿ·c™yRemaššg
 = 
gC­ac™y
;

185 
UBoŞ
 
»giÚAµ’ded
 = 
FALSE
;

187 ià(
ÏngL’gth
 > 0) {

188 
	`­³ndTag
(

189 
Ïng
,

190 
ÏngL’gth
,

191 
gBufãr
,

192 &
gL’gth
);

194 ià(
®‹º©eTags
 =ğ
NULL
) {

199 
	`­³ndTag
(

200 
unknownLªguage
,

201 (
št32_t
)
	`u´v_¡¾’
(
unknownLªguage
),

202 
gBufãr
,

203 &
gL’gth
);

209 
®‹º©eLªg
[
ULOC_LANG_CAPACITY
];

210 
št32_t
 
®‹º©eLªgL’gth
 = (
®‹º©eLªg
);

212 
®‹º©eLªgL’gth
 =

213 
	`uloc_g‘Lªguage
(

214 
®‹º©eTags
,

215 
®‹º©eLªg
,

216 
®‹º©eLªgL’gth
,

217 
”r
);

218 if(
	`U_FAILURE
(*
”r
) ||

219 
®‹º©eLªgL’gth
 >ğ
ULOC_LANG_CAPACITY
) {

220 
”rÜ
;

222 ià(
®‹º©eLªgL’gth
 == 0) {

227 
	`­³ndTag
(

228 
unknownLªguage
,

229 (
št32_t
)
	`u´v_¡¾’
(
unknownLªguage
),

230 
gBufãr
,

231 &
gL’gth
);

234 
	`­³ndTag
(

235 
®‹º©eLªg
,

236 
®‹º©eLªgL’gth
,

237 
gBufãr
,

238 &
gL’gth
);

242 ià(
sütL’gth
 > 0) {

243 
	`­³ndTag
(

244 
süt
,

245 
sütL’gth
,

246 
gBufãr
,

247 &
gL’gth
);

249 ià(
®‹º©eTags
 !ğ
NULL
) {

253 
®‹º©eSüt
[
ULOC_SCRIPT_CAPACITY
];

255 cÚ¡ 
št32_t
 
®‹º©eSütL’gth
 =

256 
	`uloc_g‘Süt
(

257 
®‹º©eTags
,

258 
®‹º©eSüt
,

259 (
®‹º©eSüt
),

260 
”r
);

262 ià(
	`U_FAILURE
(*
”r
) ||

263 
®‹º©eSütL’gth
 >ğ
ULOC_SCRIPT_CAPACITY
) {

264 
”rÜ
;

266 ià(
®‹º©eSütL’gth
 > 0) {

267 
	`­³ndTag
(

268 
®‹º©eSüt
,

269 
®‹º©eSütL’gth
,

270 
gBufãr
,

271 &
gL’gth
);

275 ià(
»giÚL’gth
 > 0) {

276 
	`­³ndTag
(

277 
»giÚ
,

278 
»giÚL’gth
,

279 
gBufãr
,

280 &
gL’gth
);

282 
»giÚAµ’ded
 = 
TRUE
;

284 ià(
®‹º©eTags
 !ğ
NULL
) {

288 
®‹º©eRegiÚ
[
ULOC_COUNTRY_CAPACITY
];

290 cÚ¡ 
št32_t
 
®‹º©eRegiÚL’gth
 =

291 
	`uloc_g‘CouÁry
(

292 
®‹º©eTags
,

293 
®‹º©eRegiÚ
,

294 (
®‹º©eRegiÚ
),

295 
”r
);

296 ià(
	`U_FAILURE
(*
”r
) ||

297 
®‹º©eRegiÚL’gth
 >ğ
ULOC_COUNTRY_CAPACITY
) {

298 
”rÜ
;

300 ià(
®‹º©eRegiÚL’gth
 > 0) {

301 
	`­³ndTag
(

302 
®‹º©eRegiÚ
,

303 
®‹º©eRegiÚL’gth
,

304 
gBufãr
,

305 &
gL’gth
);

307 
»giÚAµ’ded
 = 
TRUE
;

312 cÚ¡ 
št32_t
 
toCİy
 =

313 
gL’gth
 >ğ
gC­ac™y
 ?agCapacity :agLength;

319 
	`u´v_memıy
(

320 
g
,

321 
gBufãr
,

322 
toCİy
);

324 
ÿ·c™yRemaššg
 -ğ
toCİy
;

327 ià(
ŒašgL’gth
 > 0) {

328 ià(
ÿ·c™yRemaššg
 > 0 && !
»giÚAµ’ded
) {

329 
g
[
gL’gth
++] = '_';

330 --
ÿ·c™yRemaššg
;

333 ià(
ÿ·c™yRemaššg
 > 0) {

338 cÚ¡ 
št32_t
 
toCİy
 =

339 
ŒašgL’gth
 >ğ
ÿ·c™yRemaššg
 ? capacityRemaining :railingLength;

341 
	`u´v_memmove
(

342 &
g
[
gL’gth
],

343 
Œašg
,

344 
toCİy
);

348 
gL’gth
 +ğ
ŒašgL’gth
;

350  
	`u_‹rmš©eCh¬s
(

351 
g
,

352 
gC­ac™y
,

353 
gL’gth
,

354 
”r
);

357 
”rÜ
:

364 ià(*
”r
 =ğ
U_BUFFER_OVERFLOW_ERROR
 ||

365 
	`U_SUCCESS
(*
”r
)) {

366 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

370 
	}
}

398 
št32_t
 
U_CALLCONV


399 
	$ü—‹TagSŒšg
(

400 cÚ¡ * 
Ïng
,

401 
št32_t
 
ÏngL’gth
,

402 cÚ¡ * 
süt
,

403 
št32_t
 
sütL’gth
,

404 cÚ¡ * 
»giÚ
,

405 
št32_t
 
»giÚL’gth
,

406 cÚ¡ * 
Œašg
,

407 
št32_t
 
ŒašgL’gth
,

408 * 
g
,

409 
št32_t
 
gC­ac™y
,

410 
UE¼ÜCode
* 
”r
)

412  
	`ü—‹TagSŒšgW™hAÉ”Ç‹s
(

413 
Ïng
,

414 
ÏngL’gth
,

415 
süt
,

416 
sütL’gth
,

417 
»giÚ
,

418 
»giÚL’gth
,

419 
Œašg
,

420 
ŒašgL’gth
,

421 
NULL
,

422 
g
,

423 
gC­ac™y
,

424 
”r
);

425 
	}
}

455 
št32_t
 
U_CALLCONV


456 
	$·r£TagSŒšg
(

457 cÚ¡ * 
loÿËID
,

458 * 
Ïng
,

459 
št32_t
* 
ÏngL’gth
,

460 * 
süt
,

461 
št32_t
* 
sütL’gth
,

462 * 
»giÚ
,

463 
št32_t
* 
»giÚL’gth
,

464 
UE¼ÜCode
* 
”r
)

466 cÚ¡ * 
pos™iÚ
 = 
loÿËID
;

467 
št32_t
 
subgL’gth
 = 0;

469 if(
	`U_FAILURE
(*
”r
) ||

470 
loÿËID
 =ğ
NULL
 ||

471 
Ïng
 =ğ
NULL
 ||

472 
ÏngL’gth
 =ğ
NULL
 ||

473 
süt
 =ğ
NULL
 ||

474 
sütL’gth
 =ğ
NULL
 ||

475 
»giÚ
 =ğ
NULL
 ||

476 
»giÚL’gth
 =ğ
NULL
) {

477 
”rÜ
;

480 
subgL’gth
 = 
	`ulocimp_g‘Lªguage
(
pos™iÚ
, 
Ïng
, *
ÏngL’gth
, &position);

481 
	`u_‹rmš©eCh¬s
(
Ïng
, *
ÏngL’gth
, 
subgL’gth
, 
”r
);

488 if(
	`U_FAILURE
(*
”r
)) {

489 
”rÜ
;

492 *
ÏngL’gth
 = 
subgL’gth
;

498 ià(*
ÏngL’gth
 == 0) {

499 
	`u´v_¡rıy
(

500 
Ïng
,

501 
unknownLªguage
);

502 *
ÏngL’gth
 = (
št32_t
)
	`u´v_¡¾’
(
Ïng
);

504 ià(
	`_isIDS•¬©Ü
(*
pos™iÚ
)) {

505 ++
pos™iÚ
;

508 
subgL’gth
 = 
	`ulocimp_g‘Süt
(
pos™iÚ
, 
süt
, *
sütL’gth
, &position);

509 
	`u_‹rmš©eCh¬s
(
süt
, *
sütL’gth
, 
subgL’gth
, 
”r
);

511 if(
	`U_FAILURE
(*
”r
)) {

512 
”rÜ
;

515 *
sütL’gth
 = 
subgL’gth
;

517 ià(*
sütL’gth
 > 0) {

518 ià(
	`u´v_¡ºicmp
(
süt
, 
unknownSüt
, *
sütL’gth
) == 0) {

522 *
sütL’gth
 = 0;

528 ià(
	`_isIDS•¬©Ü
(*
pos™iÚ
)) {

529 ++
pos™iÚ
;

533 
subgL’gth
 = 
	`ulocimp_g‘CouÁry
(
pos™iÚ
, 
»giÚ
, *
»giÚL’gth
, &position);

534 
	`u_‹rmš©eCh¬s
(
»giÚ
, *
»giÚL’gth
, 
subgL’gth
, 
”r
);

536 if(
	`U_FAILURE
(*
”r
)) {

537 
”rÜ
;

540 *
»giÚL’gth
 = 
subgL’gth
;

542 ià(*
»giÚL’gth
 > 0) {

543 ià(
	`u´v_¡ºicmp
(
»giÚ
, 
unknownRegiÚ
, *
»giÚL’gth
) == 0) {

547 *
»giÚL’gth
 = 0;

551 
ex™
:

553  (
št32_t
)(
pos™iÚ
 - 
loÿËID
);

555 
”rÜ
:

561 ià(!
	`U_FAILURE
(*
”r
)) {

562 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

565 
ex™
;

566 
	}
}

568 
št32_t
 
U_CALLCONV


569 
	$ü—‹Lik–ySubgsSŒšg
(

570 cÚ¡ * 
Ïng
,

571 
št32_t
 
ÏngL’gth
,

572 cÚ¡ * 
süt
,

573 
št32_t
 
sütL’gth
,

574 cÚ¡ * 
»giÚ
,

575 
št32_t
 
»giÚL’gth
,

576 cÚ¡ * 
v¬ŸÁs
,

577 
št32_t
 
v¬ŸÁsL’gth
,

578 * 
g
,

579 
št32_t
 
gC­ac™y
,

580 
UE¼ÜCode
* 
”r
)

588 
gBufãr
[
ULOC_FULLNAME_CAPACITY
];

589 
lik–ySubgsBufãr
[
ULOC_FULLNAME_CAPACITY
];

590 
št32_t
 
gBufãrL’gth
 = 0;

592 if(
	`U_FAILURE
(*
”r
)) {

593 
”rÜ
;

599 ià(
sütL’gth
 > 0 && 
»giÚL’gth
 > 0) {

601 cÚ¡ * 
lik–ySubgs
 = 
NULL
;

603 
gBufãrL’gth
 = 
	`ü—‹TagSŒšg
(

604 
Ïng
,

605 
ÏngL’gth
,

606 
süt
,

607 
sütL’gth
,

608 
»giÚ
,

609 
»giÚL’gth
,

610 
NULL
,

612 
gBufãr
,

613 (
gBufãr
),

614 
”r
);

615 if(
	`U_FAILURE
(*
”r
)) {

616 
”rÜ
;

619 
lik–ySubgs
 =

620 
	`fšdLik–ySubgs
(

621 
gBufãr
,

622 
lik–ySubgsBufãr
,

623 (
lik–ySubgsBufãr
),

624 
”r
);

625 if(
	`U_FAILURE
(*
”r
)) {

626 
”rÜ
;

629 ià(
lik–ySubgs
 !ğ
NULL
) {

633  
	`ü—‹TagSŒšgW™hAÉ”Ç‹s
(

634 
NULL
,

636 
NULL
,

638 
NULL
,

640 
v¬ŸÁs
,

641 
v¬ŸÁsL’gth
,

642 
lik–ySubgs
,

643 
g
,

644 
gC­ac™y
,

645 
”r
);

652 ià(
sütL’gth
 > 0) {

654 cÚ¡ * 
lik–ySubgs
 = 
NULL
;

656 
gBufãrL’gth
 = 
	`ü—‹TagSŒšg
(

657 
Ïng
,

658 
ÏngL’gth
,

659 
süt
,

660 
sütL’gth
,

661 
NULL
,

663 
NULL
,

665 
gBufãr
,

666 (
gBufãr
),

667 
”r
);

668 if(
	`U_FAILURE
(*
”r
)) {

669 
”rÜ
;

672 
lik–ySubgs
 =

673 
	`fšdLik–ySubgs
(

674 
gBufãr
,

675 
lik–ySubgsBufãr
,

676 (
lik–ySubgsBufãr
),

677 
”r
);

678 if(
	`U_FAILURE
(*
”r
)) {

679 
”rÜ
;

682 ià(
lik–ySubgs
 !ğ
NULL
) {

686  
	`ü—‹TagSŒšgW™hAÉ”Ç‹s
(

687 
NULL
,

689 
NULL
,

691 
»giÚ
,

692 
»giÚL’gth
,

693 
v¬ŸÁs
,

694 
v¬ŸÁsL’gth
,

695 
lik–ySubgs
,

696 
g
,

697 
gC­ac™y
,

698 
”r
);

705 ià(
»giÚL’gth
 > 0) {

707 cÚ¡ * 
lik–ySubgs
 = 
NULL
;

709 
	`ü—‹TagSŒšg
(

710 
Ïng
,

711 
ÏngL’gth
,

712 
NULL
,

714 
»giÚ
,

715 
»giÚL’gth
,

716 
NULL
,

718 
gBufãr
,

719 (
gBufãr
),

720 
”r
);

721 if(
	`U_FAILURE
(*
”r
)) {

722 
”rÜ
;

725 
lik–ySubgs
 =

726 
	`fšdLik–ySubgs
(

727 
gBufãr
,

728 
lik–ySubgsBufãr
,

729 (
lik–ySubgsBufãr
),

730 
”r
);

731 if(
	`U_FAILURE
(*
”r
)) {

732 
”rÜ
;

735 ià(
lik–ySubgs
 !ğ
NULL
) {

739  
	`ü—‹TagSŒšgW™hAÉ”Ç‹s
(

740 
NULL
,

742 
süt
,

743 
sütL’gth
,

744 
NULL
,

746 
v¬ŸÁs
,

747 
v¬ŸÁsL’gth
,

748 
lik–ySubgs
,

749 
g
,

750 
gC­ac™y
,

751 
”r
);

759 cÚ¡ * 
lik–ySubgs
 = 
NULL
;

761 
	`ü—‹TagSŒšg
(

762 
Ïng
,

763 
ÏngL’gth
,

764 
NULL
,

766 
NULL
,

768 
NULL
,

770 
gBufãr
,

771 (
gBufãr
),

772 
”r
);

773 if(
	`U_FAILURE
(*
”r
)) {

774 
”rÜ
;

777 
lik–ySubgs
 =

778 
	`fšdLik–ySubgs
(

779 
gBufãr
,

780 
lik–ySubgsBufãr
,

781 (
lik–ySubgsBufãr
),

782 
”r
);

783 if(
	`U_FAILURE
(*
”r
)) {

784 
”rÜ
;

787 ià(
lik–ySubgs
 !ğ
NULL
) {

791  
	`ü—‹TagSŒšgW™hAÉ”Ç‹s
(

792 
NULL
,

794 
süt
,

795 
sütL’gth
,

796 
»giÚ
,

797 
»giÚL’gth
,

798 
v¬ŸÁs
,

799 
v¬ŸÁsL’gth
,

800 
lik–ySubgs
,

801 
g
,

802 
gC­ac™y
,

803 
”r
);

807  
	`u_‹rmš©eCh¬s
(

808 
g
,

809 
gC­ac™y
,

811 
”r
);

813 
”rÜ
:

815 ià(!
	`U_FAILURE
(*
”r
)) {

816 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

820 
	}
}

822 
	#CHECK_TRAILING_VARIANT_SIZE
(
Œašg
, 
ŒašgL’gth
) \

823 { 
št32_t
 
couÁ
 = 0; \

824 
št32_t
 
i
; \

825 
i
 = 0; i < 
ŒašgL’gth
; i++) { \

826 ià(
Œašg
[
i
] == '-' ||railing[i] == '_') { \

827 
couÁ
 = 0; \

828 ià(
couÁ
 > 8) { \

829 
”rÜ
; \

831 } ià(
Œašg
[
i
] == '@') { \

833 } ià(
couÁ
 > 8) { \

834 
”rÜ
; \

836 
couÁ
++; \

839 }

	)

841 
št32_t


842 
	$_uloc_addLik–ySubgs
(cÚ¡ * 
loÿËID
,

843 * 
maximizedLoÿËID
,

844 
št32_t
 
maximizedLoÿËIDC­ac™y
,

845 
UE¼ÜCode
* 
”r
)

847 
Ïng
[
ULOC_LANG_CAPACITY
];

848 
št32_t
 
ÏngL’gth
 = (
Ïng
);

849 
süt
[
ULOC_SCRIPT_CAPACITY
];

850 
št32_t
 
sütL’gth
 = (
süt
);

851 
»giÚ
[
ULOC_COUNTRY_CAPACITY
];

852 
št32_t
 
»giÚL’gth
 = (
»giÚ
);

853 cÚ¡ * 
Œašg
 = "";

854 
št32_t
 
ŒašgL’gth
 = 0;

855 
št32_t
 
ŒašgIndex
 = 0;

856 
št32_t
 
»suÉL’gth
 = 0;

858 if(
	`U_FAILURE
(*
”r
)) {

859 
”rÜ
;

861 ià(
loÿËID
 =ğ
NULL
 ||

862 
maximizedLoÿËID
 =ğ
NULL
 ||

863 
maximizedLoÿËIDC­ac™y
 <= 0) {

864 
”rÜ
;

867 
ŒašgIndex
 = 
	`·r£TagSŒšg
(

868 
loÿËID
,

869 
Ïng
,

870 &
ÏngL’gth
,

871 
süt
,

872 &
sütL’gth
,

873 
»giÚ
,

874 &
»giÚL’gth
,

875 
”r
);

876 if(
	`U_FAILURE
(*
”r
)) {

878 ià(*
”r
 =ğ
U_BUFFER_OVERFLOW_ERROR
) {

879 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

882 
”rÜ
;

886 
Œašg
 = &
loÿËID
[
ŒašgIndex
];

887 
ŒašgL’gth
 = (
št32_t
)
	`u´v_¡¾’
(
Œašg
);

889 
	`CHECK_TRAILING_VARIANT_SIZE
(
Œašg
, 
ŒašgL’gth
);

891 
»suÉL’gth
 =

892 
	`ü—‹Lik–ySubgsSŒšg
(

893 
Ïng
,

894 
ÏngL’gth
,

895 
süt
,

896 
sütL’gth
,

897 
»giÚ
,

898 
»giÚL’gth
,

899 
Œašg
,

900 
ŒašgL’gth
,

901 
maximizedLoÿËID
,

902 
maximizedLoÿËIDC­ac™y
,

903 
”r
);

905 ià(
»suÉL’gth
 == 0) {

906 cÚ¡ 
št32_t
 
loÿlIDL’gth
 = (št32_t)
	`u´v_¡¾’
(
loÿËID
);

911 
	`u´v_memıy
(

912 
maximizedLoÿËID
,

913 
loÿËID
,

914 
loÿlIDL’gth
 <ğ
maximizedLoÿËIDC­ac™y
 ?

915 
loÿlIDL’gth
 : 
maximizedLoÿËIDC­ac™y
);

917 
»suÉL’gth
 =

918 
	`u_‹rmš©eCh¬s
(

919 
maximizedLoÿËID
,

920 
maximizedLoÿËIDC­ac™y
,

921 
loÿlIDL’gth
,

922 
”r
);

925  
»suÉL’gth
;

927 
”rÜ
:

929 ià(!
	`U_FAILURE
(*
”r
)) {

930 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

934 
	}
}

936 
št32_t


937 
	$_uloc_mšimizeSubgs
(cÚ¡ * 
loÿËID
,

938 * 
mšimizedLoÿËID
,

939 
št32_t
 
mšimizedLoÿËIDC­ac™y
,

940 
UE¼ÜCode
* 
”r
)

948 
maximizedTagBufãr
[
ULOC_FULLNAME_CAPACITY
];

949 
št32_t
 
maximizedTagBufãrL’gth
 = (
maximizedTagBufãr
);

951 
Ïng
[
ULOC_LANG_CAPACITY
];

952 
št32_t
 
ÏngL’gth
 = (
Ïng
);

953 
süt
[
ULOC_SCRIPT_CAPACITY
];

954 
št32_t
 
sütL’gth
 = (
süt
);

955 
»giÚ
[
ULOC_COUNTRY_CAPACITY
];

956 
št32_t
 
»giÚL’gth
 = (
»giÚ
);

957 cÚ¡ * 
Œašg
 = "";

958 
št32_t
 
ŒašgL’gth
 = 0;

959 
št32_t
 
ŒašgIndex
 = 0;

961 if(
	`U_FAILURE
(*
”r
)) {

962 
”rÜ
;

964 ià(
loÿËID
 =ğ
NULL
 ||

965 
mšimizedLoÿËID
 =ğ
NULL
 ||

966 
mšimizedLoÿËIDC­ac™y
 <= 0) {

967 
”rÜ
;

970 
ŒašgIndex
 =

971 
	`·r£TagSŒšg
(

972 
loÿËID
,

973 
Ïng
,

974 &
ÏngL’gth
,

975 
süt
,

976 &
sütL’gth
,

977 
»giÚ
,

978 &
»giÚL’gth
,

979 
”r
);

980 if(
	`U_FAILURE
(*
”r
)) {

983 ià(*
”r
 =ğ
U_BUFFER_OVERFLOW_ERROR
) {

984 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

987 
”rÜ
;

991 
Œašg
 = &
loÿËID
[
ŒašgIndex
];

992 
ŒašgL’gth
 = (
št32_t
)
	`u´v_¡¾’
(
Œašg
);

994 
	`CHECK_TRAILING_VARIANT_SIZE
(
Œašg
, 
ŒašgL’gth
);

996 
	`ü—‹TagSŒšg
(

997 
Ïng
,

998 
ÏngL’gth
,

999 
süt
,

1000 
sütL’gth
,

1001 
»giÚ
,

1002 
»giÚL’gth
,

1003 
NULL
,

1005 
maximizedTagBufãr
,

1006 
maximizedTagBufãrL’gth
,

1007 
”r
);

1008 if(
	`U_FAILURE
(*
”r
)) {

1009 
”rÜ
;

1016 
maximizedTagBufãrL’gth
 =

1017 
	`uloc_addLik–ySubgs
(

1018 
maximizedTagBufãr
,

1019 
maximizedTagBufãr
,

1020 
maximizedTagBufãrL’gth
,

1021 
”r
);

1023 if(
	`U_FAILURE
(*
”r
)) {

1024 
”rÜ
;

1031 
gBufãr
[
ULOC_FULLNAME_CAPACITY
];

1033 cÚ¡ 
št32_t
 
gBufãrL’gth
 =

1034 
	`ü—‹Lik–ySubgsSŒšg
(

1035 
Ïng
,

1036 
ÏngL’gth
,

1037 
NULL
,

1039 
NULL
,

1041 
NULL
,

1043 
gBufãr
,

1044 (
gBufãr
),

1045 
”r
);

1047 if(
	`U_FAILURE
(*
”r
)) {

1048 
”rÜ
;

1050 ià(
	`u´v_¡ºicmp
(

1051 
maximizedTagBufãr
,

1052 
gBufãr
,

1053 
gBufãrL’gth
) == 0) {

1055  
	`ü—‹TagSŒšg
(

1056 
Ïng
,

1057 
ÏngL’gth
,

1058 
NULL
,

1060 
NULL
,

1062 
Œašg
,

1063 
ŒašgL’gth
,

1064 
mšimizedLoÿËID
,

1065 
mšimizedLoÿËIDC­ac™y
,

1066 
”r
);

1073 ià(
»giÚL’gth
 > 0) {

1075 
gBufãr
[
ULOC_FULLNAME_CAPACITY
];

1077 cÚ¡ 
št32_t
 
gBufãrL’gth
 =

1078 
	`ü—‹Lik–ySubgsSŒšg
(

1079 
Ïng
,

1080 
ÏngL’gth
,

1081 
NULL
,

1083 
»giÚ
,

1084 
»giÚL’gth
,

1085 
NULL
,

1087 
gBufãr
,

1088 (
gBufãr
),

1089 
”r
);

1091 if(
	`U_FAILURE
(*
”r
)) {

1092 
”rÜ
;

1094 ià(
	`u´v_¡ºicmp
(

1095 
maximizedTagBufãr
,

1096 
gBufãr
,

1097 
gBufãrL’gth
) == 0) {

1099  
	`ü—‹TagSŒšg
(

1100 
Ïng
,

1101 
ÏngL’gth
,

1102 
NULL
,

1104 
»giÚ
,

1105 
»giÚL’gth
,

1106 
Œašg
,

1107 
ŒašgL’gth
,

1108 
mšimizedLoÿËID
,

1109 
mšimizedLoÿËIDC­ac™y
,

1110 
”r
);

1119 ià(
sütL’gth
 > 0 && 
»giÚL’gth
 > 0) {

1120 
gBufãr
[
ULOC_FULLNAME_CAPACITY
];

1122 cÚ¡ 
št32_t
 
gBufãrL’gth
 =

1123 
	`ü—‹Lik–ySubgsSŒšg
(

1124 
Ïng
,

1125 
ÏngL’gth
,

1126 
süt
,

1127 
sütL’gth
,

1128 
NULL
,

1130 
NULL
,

1132 
gBufãr
,

1133 (
gBufãr
),

1134 
”r
);

1136 if(
	`U_FAILURE
(*
”r
)) {

1137 
”rÜ
;

1139 ià(
	`u´v_¡ºicmp
(

1140 
maximizedTagBufãr
,

1141 
gBufãr
,

1142 
gBufãrL’gth
) == 0) {

1144  
	`ü—‹TagSŒšg
(

1145 
Ïng
,

1146 
ÏngL’gth
,

1147 
süt
,

1148 
sütL’gth
,

1149 
NULL
,

1151 
Œašg
,

1152 
ŒašgL’gth
,

1153 
mšimizedLoÿËID
,

1154 
mšimizedLoÿËIDC­ac™y
,

1155 
”r
);

1163 cÚ¡ 
št32_t
 
loÿËIDL’gth
 = (št32_t)
	`u´v_¡¾’
(
loÿËID
);

1165 
	`u´v_memıy
(

1166 
mšimizedLoÿËID
,

1167 
loÿËID
,

1168 
loÿËIDL’gth
 <ğ
mšimizedLoÿËIDC­ac™y
 ?

1169 
loÿËIDL’gth
 : 
mšimizedLoÿËIDC­ac™y
);

1171  
	`u_‹rmš©eCh¬s
(

1172 
mšimizedLoÿËID
,

1173 
mšimizedLoÿËIDC­ac™y
,

1174 
loÿËIDL’gth
,

1175 
”r
);

1178 
”rÜ
:

1180 ià(!
	`U_FAILURE
(*
”r
)) {

1181 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1187 
	}
}

1189 
UBoŞ


1190 
	$do_ÿnÚiÿlize
(cÚ¡ * 
loÿËID
,

1191 * 
bufãr
,

1192 
št32_t
 
bufãrC­ac™y
,

1193 
UE¼ÜCode
* 
”r
)

1195 
	`uloc_ÿnÚiÿlize
(

1196 
loÿËID
,

1197 
bufãr
,

1198 
bufãrC­ac™y
,

1199 
”r
);

1201 ià(*
”r
 =ğ
U_STRING_NOT_TERMINATED_WARNING
 ||

1202 *
”r
 =ğ
U_BUFFER_OVERFLOW_ERROR
) {

1203 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1205  
FALSE
;

1207 ià(
	`U_FAILURE
(*
”r
)) {

1209  
FALSE
;

1212  
TRUE
;

1214 
	}
}

1216 
U_DRAFT
 
št32_t
 
U_EXPORT2


1217 
	$uloc_addLik–ySubgs
(cÚ¡ * 
loÿËID
,

1218 * 
maximizedLoÿËID
,

1219 
št32_t
 
maximizedLoÿËIDC­ac™y
,

1220 
UE¼ÜCode
* 
”r
)

1222 
loÿËBufãr
[
ULOC_FULLNAME_CAPACITY
];

1224 ià(!
	`do_ÿnÚiÿlize
(

1225 
loÿËID
,

1226 
loÿËBufãr
,

1227 (
loÿËBufãr
),

1228 
”r
)) {

1232  
	`_uloc_addLik–ySubgs
(

1233 
loÿËBufãr
,

1234 
maximizedLoÿËID
,

1235 
maximizedLoÿËIDC­ac™y
,

1236 
”r
);

1238 
	}
}

1240 
U_DRAFT
 
št32_t
 
U_EXPORT2


1241 
	$uloc_mšimizeSubgs
(cÚ¡ * 
loÿËID
,

1242 * 
mšimizedLoÿËID
,

1243 
št32_t
 
mšimizedLoÿËIDC­ac™y
,

1244 
UE¼ÜCode
* 
”r
)

1246 
loÿËBufãr
[
ULOC_FULLNAME_CAPACITY
];

1248 ià(!
	`do_ÿnÚiÿlize
(

1249 
loÿËID
,

1250 
loÿËBufãr
,

1251 (
loÿËBufãr
),

1252 
”r
)) {

1256  
	`_uloc_mšimizeSubgs
(

1257 
loÿËBufãr
,

1258 
mšimizedLoÿËID
,

1259 
mšimizedLoÿËIDC­ac™y
,

1260 
”r
);

1262 
	}
}

	@locmap.c

28 
	~"locm­.h
"

29 
	~"unicode/uloc.h
"

30 
	~"c¡ršg.h
"

31 
	~"cmemÜy.h
"

33 #ià
defšed
(
U_WINDOWS
è&& defšed(
_MSC_VER
) && (_MSC_VER >= 1500)

34 
	#USE_WINDOWS_LOCALE_API


	)

37 #ifdeà
USE_WINDOWS_LOCALE_API


38 
	~<wšdows.h
>

39 
	~<wšÆs.h
>

59 
	sILcidPosixEËm’t


61 cÚ¡ 
ušt32_t
 
	mho¡ID
;

62 cÚ¡ * cÚ¡ 
	mposixID
;

63 } 
	tILcidPosixEËm’t
;

65 
	sILcidPosixM­


67 cÚ¡ 
ušt32_t
 
	mnumRegiÚs
;

68 cÚ¡ 
ILcidPosixEËm’t
* cÚ¡ 
	m»giÚM­s
;

69 } 
	tILcidPosixM­
;

88 
	#ILCID_POSIX_ELEMENT_ARRAY
(
ho¡ID
, 
ÏnguageID
, 
posixID
) \

89 cÚ¡ 
ILcidPosixEËm’t
 
locm­_
 ## 
ÏnguageID
 [] = { \

90 {
	`LANGUAGE_LCID
(
ho¡ID
), #languageID}, \

91 {
ho¡ID
, #posixID}, \

92 };

	)

98 
	#ILCID_POSIX_SUBTABLE
(
id
) \

99 cÚ¡ 
ILcidPosixEËm’t
 
locm­_
 ## 
id
 [] =

	)

108 
	#ILCID_POSIX_MAP
(
_posixID
) \

109 {(
locm­_
 ## 
_posixID
)/(
ILcidPosixEËm’t
),†ocm­_ ## _posixID}

	)

127 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0436, 
af
, 
af_ZA
)

129 
	$ILCID_POSIX_SUBTABLE
(
¬
) {

147 
	}
};

149 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x044d, 
as
, 
as_IN
)

150 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x045e, 
am
, 
am_ET
)

151 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x047a, 
¬n
,
¬n_CL
)

153 
	$ILCID_POSIX_SUBTABLE
(
az
) {

160 
	}
};

162 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x046d, 
ba
, 
ba_RU
)

163 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0423, 
be
, 
be_BY
)

165 
	$ILCID_POSIX_SUBTABLE
(
b”
) {

171 
	}
};

173 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0402, 
bg
, 
bg_BG
)

175 
	$ILCID_POSIX_SUBTABLE
(
bn
) {

179 
	}
};

181 
	$ILCID_POSIX_SUBTABLE
(
bo
) {

185 
	}
};

187 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x047e, 
br
, 
br_FR
)

188 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0403, 
ÿ
, 
ÿ_ES
)

189 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0483, 
co
, 
co_FR
)

190 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x045c, 
chr
,
chr_US
)

193 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0405, 
cs
, 
cs_CZ
)

195 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0452, 
cy
, 
cy_GB
)

196 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0406, 
da
, 
da_DK
)

198 
	$ILCID_POSIX_SUBTABLE
(
de
) {

207 
	}
};

209 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0465, 
dv
, 
dv_MV
)

210 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0408, 
–
, 
–_GR
)

212 
	$ILCID_POSIX_SUBTABLE
(
’
) {

237 
	}
};

239 
	$ILCID_POSIX_SUBTABLE
(
’_US_POSIX
) {

241 
	}
};

243 
	$ILCID_POSIX_SUBTABLE
(
es
) {

267 
	}
};

269 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0425, 
‘
, 
‘_EE
)

270 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x042d, 
eu
, 
eu_ES
)

273 
	$ILCID_POSIX_SUBTABLE
(
ç
) {

277 
	}
};

280 
	$ILCID_POSIX_SUBTABLE
(
ç_AF
) {

283 
	}
};

285 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x040b, 
fi
, 
fi_FI
)

286 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0464, 
f
,
f_PH
)

287 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0438, 
fo
, 
fo_FO
)

289 
	$ILCID_POSIX_SUBTABLE
(
ä
) {

305 
	}
};

307 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0462, 
fy
, 
fy_NL
)

310 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x083c, 
ga
, 
ga_IE
)

311 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0491, 
gd
, 
gd_GB
)

313 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0456, 
gl
, 
gl_ES
)

314 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0447, 
gu
, 
gu_IN
)

315 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0474, 
gn
, 
gn_PY
)

316 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0484, 
gsw
,
gsw_FR
)

318 
	$ILCID_POSIX_SUBTABLE
(
ha
) {

322 
	}
};

324 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0475, 
haw
,
haw_US
)

325 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x040d, 
he
, 
he_IL
)

326 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0439, 
hi
, 
hi_IN
)

329 
	$ILCID_POSIX_SUBTABLE
(
hr
) {

350 
	}
};

352 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x040e, 
hu
, 
hu_HU
)

353 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x042b, 
hy
, 
hy_AM
)

354 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0421, 
id
, 
id_ID
)

355 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0470, 
ig
, 
ig_NG
)

356 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0478, 
ii
, 
ii_CN
)

357 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x040f, 
is
, 
is_IS
)

359 
	$ILCID_POSIX_SUBTABLE
(
™
) {

363 
	}
};

365 
	$ILCID_POSIX_SUBTABLE
(
iu
) {

371 
	}
};

373 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x040d, 
iw
, 
iw_IL
)

374 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0411, 
ja
, 
ja_JP
)

375 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0437, 
ka
, 
ka_GE
)

376 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x043f, 
kk
, 
kk_KZ
)

377 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x046f, 
kl
, 
kl_GL
)

378 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0453, 
km
, 
km_KH
)

379 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x044b, 
kn
, 
kn_IN
)

381 
	$ILCID_POSIX_SUBTABLE
(
ko
) {

385 
	}
};

387 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0457, 
kok
, 
kok_IN
)

388 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0471, 
kr
, 
kr_NG
)

390 
	$ILCID_POSIX_SUBTABLE
(
ks
) {

394 
	}
};

396 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0440, 
ky
, 
ky_KG
)

397 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0476, 
Ï
, 
Ï_IT
)

398 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x046e, 
lb
, 
lb_LU
)

399 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0454, 
lo
, 
lo_LA
)

400 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0427, 
É
, 
É_LT
)

401 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0426, 
lv
, 
lv_LV
)

402 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0481, 
mi
, 
mi_NZ
)

403 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x042f, 
mk
, 
mk_MK
)

404 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x044c, 
ml
, 
ml_IN
)

406 
	$ILCID_POSIX_SUBTABLE
(
mn
) {

413 
	}
};

415 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0458, 
mni
,
mni_IN
)

416 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x047c, 
moh
,
moh_CA
)

417 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x044e, 
mr
, 
mr_IN
)

419 
	$ILCID_POSIX_SUBTABLE
(
ms
) {

423 
	}
};

425 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x043a, 
mt
, 
mt_MT
)

426 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0455, 
my
, 
my_MM
)

428 
	$ILCID_POSIX_SUBTABLE
(
Ã
) {

432 
	}
};

434 
	$ILCID_POSIX_SUBTABLE
(
Æ
) {

438 
	}
};

441 
	$ILCID_POSIX_SUBTABLE
(
no
) {

449 
	}
};

451 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x046c, 
nso
,
nso_ZA
)

452 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0482, 
oc
, 
oc_FR
)

453 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0472, 
om
, 
om_ET
)

456 
	$ILCID_POSIX_SUBTABLE
(
Ü_IN
) {

459 
	}
};

462 
	$ILCID_POSIX_SUBTABLE
(
·
) {

466 
	}
};

468 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0415, 
¶
, 
¶_PL
)

469 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0463, 
ps
, 
ps_AF
)

471 
	$ILCID_POSIX_SUBTABLE
(
±
) {

475 
	}
};

477 
	$ILCID_POSIX_SUBTABLE
(
qu
) {

482 
	}
};

484 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0486, 
qut
, 
qut_GT
)

485 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0417, 
rm
, 
rm_CH
)

486 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0418, 
ro
, 
ro_RO
)

488 
	$ILCID_POSIX_SUBTABLE
(
roÙ
) {

490 
	}
};

492 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0419, 
ru
, 
ru_RU
)

493 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0487, 
rw
, 
rw_RW
)

494 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x044f, 
§
, 
§_IN
)

495 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0485, 
§h
,
§h_RU
)

497 
	$ILCID_POSIX_SUBTABLE
(
sd
) {

501 
	}
};

503 
	$ILCID_POSIX_SUBTABLE
(
£
) {

518 
	}
};

520 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x045b, 
si
, 
si_LK
)

521 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x041b, 
sk
, 
sk_SK
)

522 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0424, 
¦
, 
¦_SI
)

523 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0477, 
so
, 
so_ET
)

524 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x041c, 
sq
, 
sq_AL
)

526 
	$ILCID_POSIX_SUBTABLE
(
sv
) {

530 
	}
};

532 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0441, 
sw
, 
sw_KE
)

533 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x045A, 
syr
, 
syr_SY
)

534 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0449, 

, 
_IN
)

535 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x044a, 
‹
, 
‹_IN
)

538 
	$ILCID_POSIX_SUBTABLE
(
tg
) {

542 
	}
};

544 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x041e, 
th
, 
th_TH
)

546 
	$ILCID_POSIX_SUBTABLE
(
ti
) {

550 
	}
};

552 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0442, 
tk
, 
tk_TM
)

553 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0432, 
Š
, 
Š_BW
)

554 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x041f, 
Œ
, 
Œ_TR
)

555 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0444, 
‰
, 
‰_RU
)

557 
	$ILCID_POSIX_SUBTABLE
(
tzm
) {

561 
	}
};

563 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0480, 
ug
, 
ug_CN
)

564 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0422, 
uk
, 
uk_UA
)

566 
	$ILCID_POSIX_SUBTABLE
(
ur
) {

570 
	}
};

572 
	$ILCID_POSIX_SUBTABLE
(
uz
) {

579 
	}
};

581 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0433, 
ve
, 
ve_ZA
)

582 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x042a, 
vi
, 
vi_VN
)

584 
	$ILCID_POSIX_SUBTABLE
(
w’
) {

591 
	}
};

593 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0488, 
wo
, 
wo_SN
)

594 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0434, 
xh
, 
xh_ZA
)

595 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x046a, 
yo
, 
yo_NG
)

597 
	$ILCID_POSIX_SUBTABLE
(
zh
) {

620 
	}
};

622 
	$ILCID_POSIX_ELEMENT_ARRAY
(0x0435, 
zu
, 
zu_ZA
)

633 cÚ¡ 
ILcidPosixM­
 
gPosixIDm­
[] = {

634 
	`ILCID_POSIX_MAP
(
af
),

635 
	`ILCID_POSIX_MAP
(
am
),

636 
	`ILCID_POSIX_MAP
(
¬
),

637 
	`ILCID_POSIX_MAP
(
¬n
),

638 
	`ILCID_POSIX_MAP
(
as
),

639 
	`ILCID_POSIX_MAP
(
az
),

640 
	`ILCID_POSIX_MAP
(
ba
),

641 
	`ILCID_POSIX_MAP
(
be
),

643 
	`ILCID_POSIX_MAP
(
bg
),

644 
	`ILCID_POSIX_MAP
(
bn
),

645 
	`ILCID_POSIX_MAP
(
bo
),

646 
	`ILCID_POSIX_MAP
(
br
),

647 
	`ILCID_POSIX_MAP
(
ÿ
),

648 
	`ILCID_POSIX_MAP
(
chr
),

649 
	`ILCID_POSIX_MAP
(
co
),

650 
	`ILCID_POSIX_MAP
(
cs
),

651 
	`ILCID_POSIX_MAP
(
cy
),

652 
	`ILCID_POSIX_MAP
(
da
),

653 
	`ILCID_POSIX_MAP
(
de
),

654 
	`ILCID_POSIX_MAP
(
dv
),

655 
	`ILCID_POSIX_MAP
(
–
),

656 
	`ILCID_POSIX_MAP
(
’
),

657 
	`ILCID_POSIX_MAP
(
’_US_POSIX
),

658 
	`ILCID_POSIX_MAP
(
es
),

659 
	`ILCID_POSIX_MAP
(
‘
),

660 
	`ILCID_POSIX_MAP
(
eu
),

661 
	`ILCID_POSIX_MAP
(
ç
),

662 
	`ILCID_POSIX_MAP
(
ç_AF
),

663 
	`ILCID_POSIX_MAP
(
fi
),

664 
	`ILCID_POSIX_MAP
(
f
),

665 
	`ILCID_POSIX_MAP
(
fo
),

666 
	`ILCID_POSIX_MAP
(
ä
),

667 
	`ILCID_POSIX_MAP
(
fy
),

668 
	`ILCID_POSIX_MAP
(
ga
),

669 
	`ILCID_POSIX_MAP
(
gd
),

670 
	`ILCID_POSIX_MAP
(
gl
),

671 
	`ILCID_POSIX_MAP
(
gn
),

672 
	`ILCID_POSIX_MAP
(
gsw
),

673 
	`ILCID_POSIX_MAP
(
gu
),

674 
	`ILCID_POSIX_MAP
(
ha
),

675 
	`ILCID_POSIX_MAP
(
haw
),

676 
	`ILCID_POSIX_MAP
(
he
),

677 
	`ILCID_POSIX_MAP
(
hi
),

678 
	`ILCID_POSIX_MAP
(
hr
),

679 
	`ILCID_POSIX_MAP
(
hu
),

680 
	`ILCID_POSIX_MAP
(
hy
),

681 
	`ILCID_POSIX_MAP
(
id
),

682 
	`ILCID_POSIX_MAP
(
ig
),

683 
	`ILCID_POSIX_MAP
(
ii
),

684 
	`ILCID_POSIX_MAP
(
is
),

685 
	`ILCID_POSIX_MAP
(
™
),

686 
	`ILCID_POSIX_MAP
(
iu
),

687 
	`ILCID_POSIX_MAP
(
iw
),

688 
	`ILCID_POSIX_MAP
(
ja
),

689 
	`ILCID_POSIX_MAP
(
ka
),

690 
	`ILCID_POSIX_MAP
(
kk
),

691 
	`ILCID_POSIX_MAP
(
kl
),

692 
	`ILCID_POSIX_MAP
(
km
),

693 
	`ILCID_POSIX_MAP
(
kn
),

694 
	`ILCID_POSIX_MAP
(
ko
),

695 
	`ILCID_POSIX_MAP
(
kok
),

696 
	`ILCID_POSIX_MAP
(
kr
),

697 
	`ILCID_POSIX_MAP
(
ks
),

698 
	`ILCID_POSIX_MAP
(
ky
),

699 
	`ILCID_POSIX_MAP
(
lb
),

700 
	`ILCID_POSIX_MAP
(
Ï
),

701 
	`ILCID_POSIX_MAP
(
lo
),

702 
	`ILCID_POSIX_MAP
(
É
),

703 
	`ILCID_POSIX_MAP
(
lv
),

704 
	`ILCID_POSIX_MAP
(
mi
),

705 
	`ILCID_POSIX_MAP
(
mk
),

706 
	`ILCID_POSIX_MAP
(
ml
),

707 
	`ILCID_POSIX_MAP
(
mn
),

708 
	`ILCID_POSIX_MAP
(
mni
),

709 
	`ILCID_POSIX_MAP
(
moh
),

710 
	`ILCID_POSIX_MAP
(
mr
),

711 
	`ILCID_POSIX_MAP
(
ms
),

712 
	`ILCID_POSIX_MAP
(
mt
),

713 
	`ILCID_POSIX_MAP
(
my
),

715 
	`ILCID_POSIX_MAP
(
Ã
),

716 
	`ILCID_POSIX_MAP
(
Æ
),

718 
	`ILCID_POSIX_MAP
(
no
),

719 
	`ILCID_POSIX_MAP
(
nso
),

720 
	`ILCID_POSIX_MAP
(
oc
),

721 
	`ILCID_POSIX_MAP
(
om
),

722 
	`ILCID_POSIX_MAP
(
Ü_IN
),

723 
	`ILCID_POSIX_MAP
(
·
),

724 
	`ILCID_POSIX_MAP
(
¶
),

725 
	`ILCID_POSIX_MAP
(
ps
),

726 
	`ILCID_POSIX_MAP
(
±
),

727 
	`ILCID_POSIX_MAP
(
qu
),

728 
	`ILCID_POSIX_MAP
(
qut
),

729 
	`ILCID_POSIX_MAP
(
rm
),

730 
	`ILCID_POSIX_MAP
(
ro
),

731 
	`ILCID_POSIX_MAP
(
roÙ
),

732 
	`ILCID_POSIX_MAP
(
ru
),

733 
	`ILCID_POSIX_MAP
(
rw
),

734 
	`ILCID_POSIX_MAP
(
§
),

735 
	`ILCID_POSIX_MAP
(
§h
),

736 
	`ILCID_POSIX_MAP
(
sd
),

737 
	`ILCID_POSIX_MAP
(
£
),

739 
	`ILCID_POSIX_MAP
(
si
),

740 
	`ILCID_POSIX_MAP
(
sk
),

741 
	`ILCID_POSIX_MAP
(
¦
),

742 
	`ILCID_POSIX_MAP
(
so
),

743 
	`ILCID_POSIX_MAP
(
sq
),

745 
	`ILCID_POSIX_MAP
(
sv
),

746 
	`ILCID_POSIX_MAP
(
sw
),

747 
	`ILCID_POSIX_MAP
(
syr
),

748 
	`ILCID_POSIX_MAP
(

),

749 
	`ILCID_POSIX_MAP
(
‹
),

750 
	`ILCID_POSIX_MAP
(
tg
),

751 
	`ILCID_POSIX_MAP
(
th
),

752 
	`ILCID_POSIX_MAP
(
ti
),

753 
	`ILCID_POSIX_MAP
(
tk
),

754 
	`ILCID_POSIX_MAP
(
Š
),

755 
	`ILCID_POSIX_MAP
(
Œ
),

756 
	`ILCID_POSIX_MAP
(
‰
),

757 
	`ILCID_POSIX_MAP
(
tzm
),

758 
	`ILCID_POSIX_MAP
(
ug
),

759 
	`ILCID_POSIX_MAP
(
uk
),

760 
	`ILCID_POSIX_MAP
(
ur
),

761 
	`ILCID_POSIX_MAP
(
uz
),

762 
	`ILCID_POSIX_MAP
(
ve
),

763 
	`ILCID_POSIX_MAP
(
vi
),

764 
	`ILCID_POSIX_MAP
(
w’
),

765 
	`ILCID_POSIX_MAP
(
wo
),

766 
	`ILCID_POSIX_MAP
(
xh
),

767 
	`ILCID_POSIX_MAP
(
yo
),

768 
	`ILCID_POSIX_MAP
(
zh
),

769 
	`ILCID_POSIX_MAP
(
zu
),

770 
	}
};

772 cÚ¡ 
ušt32_t
 
	ggLoÿËCouÁ
 = (
gPosixIDm­
)/(
ILcidPosixM­
);

779 
št32_t


780 
	$idCmp
(cÚ¡ * 
id1
, cÚ¡ * 
id2
)

782 
št32_t
 
diffIdx
 = 0;

783 *
id1
 =ğ*
id2
 && *id1 != 0) {

784 
diffIdx
++;

785 
id1
++;

786 
id2
++;

788  
diffIdx
;

789 
	}
}

799 
ušt32_t


800 
	$g‘Ho¡ID
(cÚ¡ 
ILcidPosixM­
 *
this_0
, cÚ¡ * 
posixID
, 
UE¼ÜCode
* 
¡©us
)

802 
št32_t
 
be¡Idx
 = 0;

803 
št32_t
 
be¡IdxDiff
 = 0;

804 
št32_t
 
posixIDËn
 = (št32_t)
	`u´v_¡¾’
(
posixID
);

805 
ušt32_t
 
idx
;

807 
idx
 = 0; idx < 
this_0
->
numRegiÚs
; idx++ ) {

808 
št32_t
 
§meCh¬s
 = 
	`idCmp
(
posixID
, 
this_0
->
»giÚM­s
[
idx
].posixID);

809 ià(
§meCh¬s
 > 
be¡IdxDiff
 && 
this_0
->
»giÚM­s
[
idx
].
posixID
[sameChars] == 0) {

810 ià(
posixIDËn
 =ğ
§meCh¬s
) {

812  
this_0
->
»giÚM­s
[
idx
].
ho¡ID
;

814 
be¡IdxDiff
 = 
§meCh¬s
;

815 
be¡Idx
 = 
idx
;

820 ià((
posixID
[
be¡IdxDiff
] == '_' ||…osixID[bestIdxDiff] == '@')

821 && 
this_0
->
»giÚM­s
[
be¡Idx
].
posixID
[
be¡IdxDiff
] == 0)

823 *
¡©us
 = 
U_USING_FALLBACK_WARNING
;

824  
this_0
->
»giÚM­s
[
be¡Idx
].
ho¡ID
;

828 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

829  
this_0
->
»giÚM­s
->
ho¡ID
;

830 
	}
}

833 
	$g‘PosixID
(cÚ¡ 
ILcidPosixM­
 *
this_0
, 
ušt32_t
 
ho¡ID
)

835 
ušt32_t
 
i
;

836 
i
 = 0; i <ğ
this_0
->
numRegiÚs
; i++)

838 ià(
this_0
->
»giÚM­s
[
i
].
ho¡ID
 == hostID)

840  
this_0
->
»giÚM­s
[
i
].
posixID
;

846  
this_0
->
»giÚM­s
[0].
posixID
;

847 
	}
}

856 #ifdeà
USE_WINDOWS_LOCALE_API


860 
	#FIX_LOCALE_ID_TAG_SEPARATOR
(
bufãr
, 
Ën
, 
i
) \

861 
i
 = 0; i < 
Ën
; i++) \

862 ià(
bufãr
[
i
] =ğ'-'èbufãr[i] = '_';

	)

869 
	#FIX_LANGUAGE_ID_TAG
(
bufãr
, 
Ën
) \

870 ià(
Ën
 >= 3) { \

871 ià(
bufãr
[0] == 'q' && buffer[1] == 'u' && buffer[2] == 'z') {\

872 
bufãr
[2] = 0; \

873 
	`u´v_¡rÿt
(
bufãr
, buffer+3); \

874 } ià(
bufãr
[0] == 'p' && buffer[1] == 'r' && buffer[2] == 's') {\

875 
bufãr
[0] = 'f'; buffer[1] = 'a'; buffer[2] = 0; \

876 
	`u´v_¡rÿt
(
bufãr
, buffer+3); \

878 }

	)

880 
	ggPosixFromLCID
[
ULOC_FULLNAME_CAPACITY
];

882 
U_CAPI
 const *

883 
	$u´v_cÚv”tToPosix
(
ušt32_t
 
ho¡id
, 
UE¼ÜCode
* 
¡©us
)

885 
ušt16_t
 
ÏngID
;

886 
ušt32_t
 
loÿËIndex
;

887 #ifdeà
USE_WINDOWS_LOCALE_API


888 
št32_t
 
»t
 = 0;

890 
	`u´v_mem£t
(
gPosixFromLCID
, 0, (gPosixFromLCID));

892 
»t
 = 
	`G‘LoÿËInfoA
(
ho¡id
, 
LOCALE_SNAME
, (
LPSTR
)
gPosixFromLCID
, (gPosixFromLCID));

893 ià(
»t
 > 1) {

894 
	`FIX_LOCALE_ID_TAG_SEPARATOR
(
gPosixFromLCID
, 
»t
, 
loÿËIndex
)

895 
	`FIX_LANGUAGE_ID_TAG
(
gPosixFromLCID
, 
»t
)

897  
gPosixFromLCID
;

900 
ÏngID
 = 
	`LANGUAGE_LCID
(
ho¡id
);

902 
loÿËIndex
 = 0;†oÿËIndex < 
gLoÿËCouÁ
;†ocaleIndex++)

904 ià(
ÏngID
 =ğ
gPosixIDm­
[
loÿËIndex
].
»giÚM­s
->
ho¡ID
)

906  
	`g‘PosixID
(&
gPosixIDm­
[
loÿËIndex
], 
ho¡id
);

911 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

912  
NULL
;

913 
	}
}

926 
U_CAPI
 
ušt32_t


927 
	$u´v_cÚv”tToLCID
(cÚ¡ *
ÏngID
, cÚ¡ * 
posixID
, 
UE¼ÜCode
* 
¡©us
)

930 
ušt32_t
 
low
 = 0;

931 
ušt32_t
 
high
 = 
gLoÿËCouÁ
;

932 
ušt32_t
 
mid
 = 
high
;

933 
ušt32_t
 
Şdmid
 = 0;

934 
št32_t
 
compV®
;

936 
ušt32_t
 
v®ue
 = 0;

937 
ušt32_t
 
çÎbackV®ue
 = (uint32_t)-1;

938 
UE¼ÜCode
 
myStus
;

939 
ušt32_t
 
idx
;

942 ià(!
ÏngID
 || !
posixID
 || 
	`u´v_¡¾’
(langID) < 2 || uprv_strlen(posixID) < 2) {

948 
high
 > 
low
) {

950 
mid
 = (
high
+
low
) >> 1;

952 ià(
mid
 =ğ
Şdmid
)

955 
compV®
 = 
	`u´v_¡rcmp
(
ÏngID
, 
gPosixIDm­
[
mid
].
»giÚM­s
->
posixID
);

956 ià(
compV®
 < 0){

957 
high
 = 
mid
;

959 ià(
compV®
 > 0){

960 
low
 = 
mid
;

963  
	`g‘Ho¡ID
(&
gPosixIDm­
[
mid
], 
posixID
, 
¡©us
);

965 
Şdmid
 = 
mid
;

972 
idx
 = 0; idx < 
gLoÿËCouÁ
; idx++ ) {

973 
myStus
 = 
U_ZERO_ERROR
;

974 
v®ue
 = 
	`g‘Ho¡ID
(&
gPosixIDm­
[
idx
], 
posixID
, &
myStus
);

975 ià(
myStus
 =ğ
U_ZERO_ERROR
) {

976  
v®ue
;

978 ià(
myStus
 =ğ
U_USING_FALLBACK_WARNING
) {

979 
çÎbackV®ue
 = 
v®ue
;

983 ià(
çÎbackV®ue
 !ğ(
ušt32_t
)-1) {

984 *
¡©us
 = 
U_USING_FALLBACK_WARNING
;

985  
çÎbackV®ue
;

989 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

991 
	}
}

	@locmap.h

24 #iâdeà
LOCMAP_H


25 
	#LOCMAP_H


	)

27 
	~"unicode/uty³s.h
"

29 
	#LANGUAGE_LCID
(
ho¡ID
è(
ušt16_t
)(0x03FF & ho¡ID)

	)

31 
U_CAPI
 cÚ¡ *
u´v_cÚv”tToPosix
(
ušt32_t
 
ho¡id
, 
UE¼ÜCode
* 
¡©us
);

34 
U_CAPI
 
ušt32_t
 
u´v_cÚv”tToLCID
(cÚ¡ *
ÏngID
, cÚ¡ * 
posixID
, 
UE¼ÜCode
* 
¡©us
);

	@locresdata.cpp

21 
	~"unicode/uty³s.h
"

22 
	~"unicode/put.h
"

23 
	~"unicode/uloc.h
"

24 
	~"unicode/u»s.h
"

25 
	~"c¡ršg.h
"

26 
	~"ulocimp.h
"

27 
	~"u»simp.h
"

42 
U_CAPI
 cÚ¡ 
UCh¬
 * 
U_EXPORT2


43 
	$uloc_g‘TabËSŒšgW™hF®lback
(cÚ¡ *
·th
, cÚ¡ *
loÿË
,

44 cÚ¡ *
bËKey
, cÚ¡ *
subTabËKey
,

45 cÚ¡ *
™emKey
,

46 
št32_t
 *
pL’gth
,

47 
UE¼ÜCode
 *
pE¼ÜCode
)

50 
UResourûBundË
 *
rb
=
NULL
, 
bË
, 
subTabË
;

51 cÚ¡ 
UCh¬
 *
™em
=
NULL
;

52 
UE¼ÜCode
 
”rÜCode
;

53 
ex¶ic™F®lbackName
[
ULOC_FULLNAME_CAPACITY
] = {0};

59 
”rÜCode
=
U_ZERO_ERROR
;

60 
rb
=
	`u»s_İ’
(
·th
, 
loÿË
, &
”rÜCode
);

62 if(
	`U_FAILURE
(
”rÜCode
)) {

64 *
pE¼ÜCode
=
”rÜCode
;

65  
NULL
;

66 } if(
”rÜCode
==
U_USING_DEFAULT_WARNING
 ||

67 (
”rÜCode
==
U_USING_FALLBACK_WARNING
 && *
pE¼ÜCode
!=
U_USING_DEFAULT_WARNING
)

70 *
pE¼ÜCode
=
”rÜCode
;

74 
	`u»s_š™SckObjeù
(&
bË
);

75 
	`u»s_š™SckObjeù
(&
subTabË
);

76 
	`u»s_g‘ByKeyW™hF®lback
(
rb
, 
bËKey
, &
bË
, &
”rÜCode
);

78 ià(
subTabËKey
 !ğ
NULL
) {

88 
	`u»s_g‘ByKeyW™hF®lback
(&
bË
,
subTabËKey
, &bË, &
”rÜCode
);

90 if(
	`U_SUCCESS
(
”rÜCode
)){

91 
™em
 = 
	`u»s_g‘SŒšgByKeyW™hF®lback
(&
bË
, 
™emKey
, 
pL’gth
, &
”rÜCode
);

92 if(
	`U_FAILURE
(
”rÜCode
)){

93 cÚ¡ * 
»¶aûm’t
 = 
NULL
;

94 *
pE¼ÜCode
 = 
”rÜCode
;

95 
”rÜCode
 = 
U_ZERO_ERROR
;

97 if(
	`u´v_¡rcmp
(
bËKey
, "Countries")==0){

98 
»¶aûm’t
 = 
	`uloc_g‘Cu¼’tCouÁryID
(
™emKey
);

99 }if(
	`u´v_¡rcmp
(
bËKey
, "Languages")==0){

100 
»¶aûm’t
 = 
	`uloc_g‘Cu¼’tLªguageID
(
™emKey
);

103 if(
»¶aûm’t
!=
NULL
 && 
™emKey
 !=„eplacement){

104 
™em
 = 
	`u»s_g‘SŒšgByKeyW™hF®lback
(&
bË
, 
»¶aûm’t
, 
pL’gth
, &
”rÜCode
);

105 if(
	`U_SUCCESS
(
”rÜCode
)){

106 *
pE¼ÜCode
 = 
”rÜCode
;

115 if(
	`U_FAILURE
(
”rÜCode
)){

118 
št32_t
 
Ën
 = 0;

119 cÚ¡ 
UCh¬
* 
çÎbackLoÿË
 = 
NULL
;

120 *
pE¼ÜCode
 = 
”rÜCode
;

121 
”rÜCode
 = 
U_ZERO_ERROR
;

123 
çÎbackLoÿË
 = 
	`u»s_g‘SŒšgByKeyW™hF®lback
(&
bË
, "F®lback", &
Ën
, &
”rÜCode
);

124 if(
	`U_FAILURE
(
”rÜCode
)){

125 *
pE¼ÜCode
 = 
”rÜCode
;

129 
	`u_UCh¬sToCh¬s
(
çÎbackLoÿË
, 
ex¶ic™F®lbackName
, 
Ën
);

132 if(
	`u´v_¡rcmp
(
ex¶ic™F®lbackName
, 
loÿË
)==0){

133 *
pE¼ÜCode
 = 
U_INTERNAL_PROGRAM_ERROR
;

136 
	`u»s_şo£
(
rb
);

137 
rb
 = 
	`u»s_İ’
(
·th
, 
ex¶ic™F®lbackName
, &
”rÜCode
);

138 if(
	`U_FAILURE
(
”rÜCode
)){

139 *
pE¼ÜCode
 = 
”rÜCode
;

148 
	`u»s_şo£
(&
subTabË
);

149 
	`u»s_şo£
(&
bË
);

150 
	`u»s_şo£
(
rb
);

151  
™em
;

152 
	}
}

154 
ULayoutTy³


155 
	$_uloc_g‘Or›Á©iÚH–³r
(cÚ¡ * 
loÿËId
,

156 cÚ¡ * 
key
,

157 
UE¼ÜCode
 *
¡©us
)

159 
ULayoutTy³
 
»suÉ
 = 
ULOC_LAYOUT_UNKNOWN
;

161 ià(!
	`U_FAILURE
(*
¡©us
)) {

162 
št32_t
 
Ëngth
 = 0;

163 
loÿËBufãr
[
ULOC_FULLNAME_CAPACITY
];

165 
	`uloc_ÿnÚiÿlize
(
loÿËId
, 
loÿËBufãr
, ÖoÿËBufãr), 
¡©us
);

167 ià(!
	`U_FAILURE
(*
¡©us
)) {

168 cÚ¡ 
UCh¬
* cÚ¡ 
v®ue
 =

169 
	`uloc_g‘TabËSŒšgW™hF®lback
(

170 
NULL
,

171 
loÿËBufãr
,

173 
NULL
,

174 
key
,

175 &
Ëngth
,

176 
¡©us
);

178 ià(!
	`U_FAILURE
(*
¡©us
è&& 
Ëngth
 != 0) {

179 
v®ue
[0])

182 
»suÉ
 = 
ULOC_LAYOUT_BTT
;

185 
»suÉ
 = 
ULOC_LAYOUT_LTR
;

188 
»suÉ
 = 
ULOC_LAYOUT_RTL
;

191 
»suÉ
 = 
ULOC_LAYOUT_TTB
;

194 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

201  
»suÉ
;

202 
	}
}

204 
U_DRAFT
 
ULayoutTy³
 
U_EXPORT2


205 
	$uloc_g‘Ch¬aù”Or›Á©iÚ
(cÚ¡ * 
loÿËId
,

206 
UE¼ÜCode
 *
¡©us
)

208  
	`_uloc_g‘Or›Á©iÚH–³r
(
loÿËId
, "ch¬aù”s", 
¡©us
);

209 
	}
}

219 
U_DRAFT
 
ULayoutTy³
 
U_EXPORT2


220 
	$uloc_g‘LšeOr›Á©iÚ
(cÚ¡ * 
loÿËId
,

221 
UE¼ÜCode
 *
¡©us
)

223  
	`_uloc_g‘Or›Á©iÚH–³r
(
loÿËId
, "lšes", 
¡©us
);

224 
	}
}

	@locutil.cpp

7 
	~"unicode/uty³s.h
"

9 #ià!
UCONFIG_NO_SERVICE
 || !
UCONFIG_NO_TRANSLITERATION


11 
	~"unicode/»sbund.h
"

12 
	~"cmemÜy.h
"

13 
	~"u¡rfmt.h
"

14 
	~"locut.h
"

15 
	~"ch¬¡r.h
"

16 
	~"uşn_cmn.h
"

17 
	~"uas£¹.h
"

18 
	~"umu‹x.h
"

21 
U_NAMESPACE_QUALIFIER
 
HashbË
 * 
	gLoÿËUt™y_ÿche
 = 
NULL
;

23 
	#UNDERSCORE_CHAR
 ((
UCh¬
)0x005f)

	)

24 
	#AT_SIGN_CHAR
 ((
UCh¬
)64)

	)

25 
	#PERIOD_CHAR
 ((
UCh¬
)46)

	)

34 
U_CDECL_BEGIN


35 
UBoŞ
 
U_CALLCONV
 
	$£rviû_ş—nup
() {

36 ià(
LoÿËUt™y_ÿche
) {

37 
d–‘e
 
LoÿËUt™y_ÿche
;

38 
LoÿËUt™y_ÿche
 = 
NULL
;

40  
TRUE
;

41 
	}
}

42 
U_CDECL_END


44 
U_NAMESPACE_BEGIN


46 
	gUnicodeSŒšg
&

47 
	gLoÿËUt™y
::
	$ÿnÚiÿlLoÿËSŒšg
(cÚ¡ 
UnicodeSŒšg
* 
id
, UnicodeSŒšg& 
»suÉ
)

49 ià(
id
 =ğ
NULL
) {

50 
»suÉ
.
	`£tToBogus
();

59 
»suÉ
 = *
id
;

60 
št32_t
 
i
 = 0;

61 
št32_t
 
’d
 = 
»suÉ
.
	`šdexOf
(
AT_SIGN_CHAR
);

62 
št32_t
 
n
 = 
»suÉ
.
	`šdexOf
(
PERIOD_CHAR
);

63 ià(
n
 >ğ0 &&‚ < 
’d
) {

64 
’d
 = 
n
;

66 ià(
’d
 < 0) {

67 
’d
 = 
»suÉ
.
	`Ëngth
();

69 
n
 = 
»suÉ
.
	`šdexOf
(
UNDERSCORE_CHAR
);

70 ià(
n
 < 0) {

71 
n
 = 
’d
;

73 ; 
i
 < 
n
; ++i) {

74 
UCh¬
 
c
 = 
»suÉ
.
	`ch¬At
(
i
);

75 ià(
c
 >= 0x0041 && c <= 0x005a) {

76 
c
 += 0x20;

77 
»suÉ
.
	`£tCh¬At
(
i
, 
c
);

80 
n
 = 
’d
; 
i
 <‚; ++i) {

81 
UCh¬
 
c
 = 
»suÉ
.
	`ch¬At
(
i
);

82 ià(
c
 >= 0x0061 && c <= 0x007a) {

83 
c
 -= 0x20;

84 
»suÉ
.
	`£tCh¬At
(
i
, 
c
);

88  
»suÉ
;

102 
»suÉ
.
	`£tToBogus
();

103 ià(
id
 != 0) {

104 
št32_t
 
buæ’
 = 
id
->
	`Ëngth
() + 8;

105 * 
buf
 = (*è
	`u´v_m®loc
(
buæ’
);

106 * 
ÿnÚ
 = (
buf
 =ğ0è? 0 : (*è
	`u´v_m®loc
(
buæ’
);

107 ià(
buf
 !ğ0 && 
ÿnÚ
 != 0) {

108 
	`U_ASSERT
(
id
->
	`exŒaù
(0, 
INT32_MAX
, 
buf
, 
buæ’
) < buflen);

109 
UE¼ÜCode
 
ec
 = 
U_ZERO_ERROR
;

110 
	`uloc_ÿnÚiÿlize
(
buf
, 
ÿnÚ
, 
buæ’
, &
ec
);

111 ià(
	`U_SUCCESS
(
ec
)) {

112 
»suÉ
 = 
	`UnicodeSŒšg
(
ÿnÚ
);

115 
	`u´v_ä“
(
buf
);

116 
	`u´v_ä“
(
ÿnÚ
);

118  
»suÉ
;

120 
	}
}

122 
	gLoÿË
&

123 
	gLoÿËUt™y
::
	$š™LoÿËFromName
(cÚ¡ 
UnicodeSŒšg
& 
id
, 
LoÿË
& 
»suÉ
)

125 ’um { 
BUFLEN
 = 128 };

127 ià(
id
.
	`isBogus
(è|| id.
	`Ëngth
(è>ğ
BUFLEN
) {

128 
»suÉ
.
	`£tToBogus
();

148 
bufãr
[
BUFLEN
];

149 
št32_t
 
´ev
, 
i
;

150 
´ev
 = 0;

152 
i
 = 
id
.
	`šdexOf
((
UCh¬
)0x40, 
´ev
);

153 if(
i
 < 0) {

155 
id
.
	`exŒaù
(
´ev
, 
INT32_MAX
, 
bufãr
 +…»v, 
BUFLEN
 -…»v, 
US_INV
);

159 
id
.
	`exŒaù
(
´ev
, 
i
 -…»v, 
bufãr
 +…»v, 
BUFLEN
 -…»v, 
US_INV
);

161 
bufãr
[
i
] = '@';

162 
´ev
 = 
i
 + 1;

165 
»suÉ
 = 
LoÿË
::
	`ü—‹FromName
(
bufãr
);

167  
»suÉ
;

168 
	}
}

170 
	gUnicodeSŒšg
&

171 
	gLoÿËUt™y
::
	$š™NameFromLoÿË
(cÚ¡ 
LoÿË
& 
loÿË
, 
UnicodeSŒšg
& 
»suÉ
)

173 ià(
loÿË
.
	`isBogus
()) {

174 
»suÉ
.
	`£tToBogus
();

176 
»suÉ
.
	`­³nd
(
	`UnicodeSŒšg
(
loÿË
.
	`g‘Name
(), -1, 
US_INV
));

178  
»suÉ
;

179 
	}
}

181 cÚ¡ 
HashbË
*

182 
	gLoÿËUt™y
::
	$g‘AvaabËLoÿËNames
(cÚ¡ 
UnicodeSŒšg
& 
bundËID
)

191 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

192 
HashbË
* 
ÿche
;

193 
	`umtx_lock
(
NULL
);

194 
ÿche
 = 
LoÿËUt™y_ÿche
;

195 
	`umtx_uÆock
(
NULL
);

197 ià(
ÿche
 =ğ
NULL
) {

198 
ÿche
 = 
Ãw
 
	`HashbË
(
¡©us
);

199 ià(
ÿche
 =ğ
NULL
 || 
	`U_FAILURE
(
¡©us
)) {

200  
NULL
;

202 
ÿche
->
	`£tV®ueD–‘”
(
uhash_d–‘eHashbË
);

203 
HashbË
* 
h
;

204 
	`umtx_lock
(
NULL
);

205 
h
 = 
LoÿËUt™y_ÿche
;

206 ià(
h
 =ğ
NULL
) {

207 
LoÿËUt™y_ÿche
 = 
h
 = 
ÿche
;

208 
ÿche
 = 
NULL
;

209 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_SERVICE
, 
£rviû_ş—nup
);

211 
	`umtx_uÆock
(
NULL
);

212 if(
ÿche
 !ğ
NULL
) {

213 
d–‘e
 
ÿche
;

215 
ÿche
 = 
h
;

218 
	`U_ASSERT
(
ÿche
 !ğ
NULL
);

220 
HashbË
* 
h
;

221 
	`umtx_lock
(
NULL
);

222 
h
 = (
HashbË
*è
ÿche
->
	`g‘
(
bundËID
);

223 
	`umtx_uÆock
(
NULL
);

225 ià(
h
 =ğ
NULL
) {

226 
h
 = 
Ãw
 
	`HashbË
(
¡©us
);

227 ià(
h
 && 
	`U_SUCCESS
(
¡©us
)) {

228 
Ch¬SŒšg
 
cbundËID
;

229 
cbundËID
.
	`­³ndInv¬ŸÁCh¬s
(
bundËID
, 
¡©us
);

230 cÚ¡ * 
·th
 = 
cbundËID
.
	`isEm±y
(è? 
NULL
 : cbundËID.
	`d©a
();

231 
UEnum”©iÚ
 *
u’um
 = 
	`u»s_İ’AvaabËLoÿËs
(
·th
, &
¡©us
);

233 cÚ¡ 
UCh¬
* 
id
 = 
	`u’um_uÃxt
(
u’um
, 
NULL
, &
¡©us
);

234 ià(
id
 =ğ
NULL
) {

237 
h
->
	`put
(
	`UnicodeSŒšg
(
id
), (*)h, 
¡©us
);

239 
	`u’um_şo£
(
u’um
);

240 ià(
	`U_FAILURE
(
¡©us
)) {

241 
d–‘e
 
h
;

242  
NULL
;

244 
	`umtx_lock
(
NULL
);

245 
ÿche
->
	`put
(
bundËID
, (*)
h
, 
¡©us
);

246 
	`umtx_uÆock
(
NULL
);

249  
h
;

250 
	}
}

252 
UBoŞ


253 
	gLoÿËUt™y
::
	$isF®lbackOf
(cÚ¡ 
UnicodeSŒšg
& 
roÙ
, cÚ¡ UnicodeSŒšg& 
chd
)

255  
chd
.
	`šdexOf
(
roÙ
) == 0 &&

256 (
chd
.
	`Ëngth
(è=ğ
roÙ
.length() ||

257 
chd
.
	`ch¬At
(
roÙ
.
	`Ëngth
()è=ğ
UNDERSCORE_CHAR
);

258 
	}
}

260 
	gU_NAMESPACE_END


	@locutil.h

9 #iâdeà
LOCUTIL_H


10 
	#LOCUTIL_H


	)

12 
	~"unicode/uty³s.h
"

13 
	~"hash.h
"

15 #ià!
UCONFIG_NO_SERVICE
 || !
UCONFIG_NO_TRANSLITERATION


18 
U_NAMESPACE_BEGIN


23 şas 
	cU_COMMON_API
 
	mLoÿËUt™y
 {

24 
	mpublic
:

25 
UnicodeSŒšg
& 
ÿnÚiÿlLoÿËSŒšg
(cÚ¡ UnicodeSŒšg* 
id
, UnicodeSŒšg& 
»suÉ
);

26 
	mLoÿË
& 
š™LoÿËFromName
(cÚ¡ 
UnicodeSŒšg
& 
id
, 
LoÿË
& 
»suÉ
);

27 
	mUnicodeSŒšg
& 
š™NameFromLoÿË
(cÚ¡ 
LoÿË
& 
loÿË
, 
UnicodeSŒšg
& 
»suÉ
);

28 cÚ¡ 
HashbË
* 
g‘AvaabËLoÿËNames
(cÚ¡ 
UnicodeSŒšg
& 
bundËID
);

29 
UBoŞ
 
isF®lbackOf
(cÚ¡ 
UnicodeSŒšg
& 
roÙ
, cÚ¡ UnicodeSŒšg& 
chd
);

32 
	gU_NAMESPACE_END


	@msvcres.h

15 
	#_STLP_OUTERMOST_HEADER_ID
 0

	)

16 
	#_STLP_WINCE
 1

	)

18 
	~"unicode/uv”siÚ.h
"

20 
	#ICU_WEBSITE
 "h‰p://icu-´ojeù.Üg"

	)

21 
	#ICU_COMPANY
 "ThICU Projeù"

	)

22 
	#ICU_PRODUCT_PREFIX
 "ICU"

	)

23 
	#ICU_PRODUCT
 "IÁ”ÇtiÚ® CompÚ’t fÜ Unicode"

	)

	@mutex.cpp

14 
	~"unicode/uty³s.h
"

15 
	~"mu‹x.h
"

17 
U_NAMESPACE_BEGIN


19 *
	gSim¶eSšgËtÚ
::
	$g‘In¡ªû
(
In¡ªtŸtÜFn
 *
š¡ªtŸtÜ
, cÚ¡ *
cÚ‹xt
,

20 *&
du¶iÿ‹
,

21 
UE¼ÜCode
 &
”rÜCode
) {

22 
du¶iÿ‹
=
NULL
;

23 if(
	`U_FAILURE
(
”rÜCode
)) {

24  
NULL
;

26 *
š¡ªû
;

27 
	`UMTX_CHECK
(
NULL
, 
fIn¡ªû
, 
š¡ªû
);

28 if(
š¡ªû
!=
NULL
) {

29  
š¡ªû
;

31 
š¡ªû
=
	`š¡ªtŸtÜ
(
cÚ‹xt
, 
”rÜCode
);

32 
Mu‹x
 
mu‹x
;

33 if(
fIn¡ªû
==
NULL
 && 
	`U_SUCCESS
(
”rÜCode
)) {

34 
fIn¡ªû
=
š¡ªû
;

36 
du¶iÿ‹
=
š¡ªû
;

38  
fIn¡ªû
;

40 
	}
}

42 *
	gTriS‹SšgËtÚ
::
	$g‘In¡ªû
(
In¡ªtŸtÜFn
 *
š¡ªtŸtÜ
, cÚ¡ *
cÚ‹xt
,

43 *&
du¶iÿ‹
,

44 
UE¼ÜCode
 &
”rÜCode
) {

45 
du¶iÿ‹
=
NULL
;

46 if(
	`U_FAILURE
(
”rÜCode
)) {

47  
NULL
;

49 
št8_t
 
haveIn¡ªû
;

50 
	`UMTX_CHECK
(
NULL
, 
fHaveIn¡ªû
, 
haveIn¡ªû
);

51 if(
haveIn¡ªû
>0) {

52  
fIn¡ªû
;

53 } if(
haveIn¡ªû
<0) {

54 
”rÜCode
=
fE¼ÜCode
;

55  
NULL
;

57 *
š¡ªû
=
	`š¡ªtŸtÜ
(
cÚ‹xt
, 
”rÜCode
);

58 
Mu‹x
 
mu‹x
;

59 if(
fHaveIn¡ªû
==0) {

60 if(
	`U_SUCCESS
(
”rÜCode
)) {

61 
fIn¡ªû
=
š¡ªû
;

62 
š¡ªû
=
NULL
;

63 
fHaveIn¡ªû
=1;

65 
fE¼ÜCode
=
”rÜCode
;

66 
fHaveIn¡ªû
=-1;

69 
”rÜCode
=
fE¼ÜCode
;

71 
du¶iÿ‹
=
š¡ªû
;

72  
fIn¡ªû
;

74 
	}
}

76 
	gTriS‹SšgËtÚ
::
	$»£t
() {

77 
fIn¡ªû
=
NULL
;

78 
fE¼ÜCode
=
U_ZERO_ERROR
;

79 
fHaveIn¡ªû
=0;

80 
	}
}

82 #ià
UCONFIG_NO_SERVICE


86 
Mu‹x
 *
	gaMu‹x
 = 0;

91 
	gU_NAMESPACE_END


	@mutex.h

20 #iâdeà
MUTEX_H


21 
	#MUTEX_H


	)

23 
	~"unicode/uty³s.h
"

24 
	~"unicode/uobjeù.h
"

25 
	~"umu‹x.h
"

27 
U_NAMESPACE_BEGIN


51 şas 
	cU_COMMON_API
 
	mMu‹x
 : 
public
 
UMemÜy
 {

52 
public
:

53 
šlše
 
Mu‹x
(
UMTX
 *
mu‹x
 = 
NULL
);

54 
	mšlše
 ~
Mu‹x
();

56 
	m´iv©e
:

57 
UMTX
 *
fMu‹x
;

59 
Mu‹x
(cÚ¡ Mu‹x &
Ùh”
);

60 
	mMu‹x
 &
	mİ”©Ü
=(cÚ¡ 
Mu‹x
 &
Ùh”
);

63 
šlše
 
	gMu‹x
::
	$Mu‹x
(
UMTX
 *
mu‹x
)

64 : 
	$fMu‹x
(
mu‹x
)

66 
	`umtx_lock
(
fMu‹x
);

67 
	}
}

69 
šlše
 
	gMu‹x
::~
	$Mu‹x
()

71 
	`umtx_uÆock
(
fMu‹x
);

72 
	}
}

82 *
	tIn¡ªtŸtÜFn
(cÚ¡ *
	tcÚ‹xt
, 
	tUE¼ÜCode
 &
	t”rÜCode
);

92 
	sSim¶eSšgËtÚ
 {

93 *
	mfIn¡ªû
;

102 *
g‘In¡ªû
(
In¡ªtŸtÜFn
 *
š¡ªtŸtÜ
, cÚ¡ *
cÚ‹xt
,

103 *&
du¶iÿ‹
,

104 
UE¼ÜCode
 &
”rÜCode
);

110 
»£t
(è{ 
	mfIn¡ªû
=
NULL
; }

113 
	#STATIC_SIMPLE_SINGLETON
(
Çme
è
Sim¶eSšgËtÚ
‚ame={ 
NULL
 }

	)

120 
	g‹m¶©e
<
ty³Çme
 
	gT
>

121 şas 
	cSim¶eSšgËtÚW¿µ”
 {

122 
	mpublic
:

123 
	$Sim¶eSšgËtÚW¿µ”
(
Sim¶eSšgËtÚ
 &
s
è: 
	$sšgËtÚ
(
s
) {}

124 
	$d–‘eIn¡ªû
() {

125 
	`d–‘e
 (
T
 *)
sšgËtÚ
.
fIn¡ªû
;

126 
sšgËtÚ
.
	`»£t
();

127 
	}
}

128 
T
 *
	$g‘In¡ªû
(
In¡ªtŸtÜFn
 *
š¡ªtŸtÜ
, cÚ¡ *
cÚ‹xt
,

129 
UE¼ÜCode
 &
”rÜCode
) {

130 *
du¶iÿ‹
;

131 
T
 *
š¡ªû
=(T *)
sšgËtÚ
.
	`g‘In¡ªû
(
š¡ªtŸtÜ
, 
cÚ‹xt
, 
du¶iÿ‹
, 
”rÜCode
);

132 
	`d–‘e
 (
T
 *)
du¶iÿ‹
;

133  
š¡ªû
;

134 
	}
}

135 
	g´iv©e
:

136 
Sim¶eSšgËtÚ
 &
sšgËtÚ
;

145 
	sTriS‹SšgËtÚ
 {

146 *
	mfIn¡ªû
;

147 
UE¼ÜCode
 
	mfE¼ÜCode
;

148 
št8_t
 
	mfHaveIn¡ªû
;

159 *
g‘In¡ªû
(
In¡ªtŸtÜFn
 *
š¡ªtŸtÜ
, cÚ¡ *
cÚ‹xt
,

160 *&
du¶iÿ‹
,

161 
UE¼ÜCode
 &
”rÜCode
);

167 
»£t
();

170 
	#STATIC_TRI_STATE_SINGLETON
(
Çme
è
TriS‹SšgËtÚ
‚ame={ 
NULL
, 
U_ZERO_ERROR
, 0 }

	)

177 
	g‹m¶©e
<
ty³Çme
 
	gT
>

178 şas 
	cTriS‹SšgËtÚW¿µ”
 {

179 
	mpublic
:

180 
	$TriS‹SšgËtÚW¿µ”
(
TriS‹SšgËtÚ
 &
s
è: 
	$sšgËtÚ
(
s
) {}

181 
	$d–‘eIn¡ªû
() {

182 
	`d–‘e
 (
T
 *)
sšgËtÚ
.
fIn¡ªû
;

183 
sšgËtÚ
.
	`»£t
();

184 
	}
}

185 
T
 *
	$g‘In¡ªû
(
In¡ªtŸtÜFn
 *
š¡ªtŸtÜ
, cÚ¡ *
cÚ‹xt
,

186 
UE¼ÜCode
 &
”rÜCode
) {

187 *
du¶iÿ‹
;

188 
T
 *
š¡ªû
=(T *)
sšgËtÚ
.
	`g‘In¡ªû
(
š¡ªtŸtÜ
, 
cÚ‹xt
, 
du¶iÿ‹
, 
”rÜCode
);

189 
	`d–‘e
 (
T
 *)
du¶iÿ‹
;

190  
š¡ªû
;

191 
	}
}

192 
	g´iv©e
:

193 
TriS‹SšgËtÚ
 &
sšgËtÚ
;

196 
	gU_NAMESPACE_END


	@normalizer2.cpp

17 
	~"unicode/uty³s.h
"

19 #ià!
UCONFIG_NO_NORMALIZATION


21 
	~"unicode/loÿÍoš‹r.h
"

22 
	~"unicode/nÜm®iz”2.h
"

23 
	~"unicode/uni¡r.h
"

24 
	~"unicode/unÜm.h
"

25 
	~"ıputs.h
"

26 
	~"c¡ršg.h
"

27 
	~"mu‹x.h
"

28 
	~"nÜm®iz”2im¶.h
"

29 
	~"uşn_cmn.h
"

30 
	~"uhash.h
"

32 
U_NAMESPACE_BEGIN


37 şas 
	cNoİNÜm®iz”2
 : 
public
 
NÜm®iz”2
 {

38 
vœtu®
 
UnicodeSŒšg
 &

39 
	$nÜm®ize
(cÚ¡ 
UnicodeSŒšg
 &
¤c
,

40 
UnicodeSŒšg
 &
de¡
,

41 
UE¼ÜCode
 &
”rÜCode
) const {

42 if(
	`U_SUCCESS
(
”rÜCode
)) {

43 if(&
de¡
!=&
¤c
) {

44 
de¡
=
¤c
;

46 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

49  
de¡
;

51 
vœtu®
 
UnicodeSŒšg
 &

52 
	$nÜm®izeSecÚdAndAµ’d
(
UnicodeSŒšg
 &
fœ¡
,

53 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

54 
UE¼ÜCode
 &
”rÜCode
) const {

55 if(
	`U_SUCCESS
(
”rÜCode
)) {

56 if(&
fœ¡
!=&
£cÚd
) {

57 
fœ¡
.
	`­³nd
(
£cÚd
);

59 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

62  
fœ¡
;

63 
	}
}

64 
vœtu®
 
	gUnicodeSŒšg
 &

65 
	$­³nd
(
UnicodeSŒšg
 &
fœ¡
,

66 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

67 
UE¼ÜCode
 &
”rÜCode
) const {

68 if(
	`U_SUCCESS
(
”rÜCode
)) {

69 if(&
fœ¡
!=&
£cÚd
) {

70 
fœ¡
.
	`­³nd
(
£cÚd
);

72 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

75  
fœ¡
;

76 
	}
}

77 
vœtu®
 
UBoŞ


78 
	$g‘Decompos™iÚ
(
UCh¬32
, 
UnicodeSŒšg
 &) const {

79  
FALSE
;

80 
	}
}

81 
vœtu®
 
UBoŞ


82 
	$isNÜm®ized
(cÚ¡ 
UnicodeSŒšg
 &, 
UE¼ÜCode
 &) const {

83  
TRUE
;

84 
	}
}

85 
vœtu®
 
UNÜm®iz©iÚCheckResuÉ


86 
	$quickCheck
(cÚ¡ 
UnicodeSŒšg
 &, 
UE¼ÜCode
 &) const {

87  
UNORM_YES
;

88 
	}
}

89 
vœtu®
 
št32_t


90 
	$¥ªQuickCheckYes
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &) const {

91  
s
.
	`Ëngth
();

92 
	}
}

93 
vœtu®
 
UBoŞ
 
	$hasBound¬yBefÜe
(
UCh¬32
ècÚ¡ {  
TRUE
; 
	}
}

94 
vœtu®
 
UBoŞ
 
	$hasBound¬yAá”
(
UCh¬32
ècÚ¡ {  
TRUE
; 
	}
}

95 
vœtu®
 
UBoŞ
 
	$isIÃ¹
(
UCh¬32
ècÚ¡ {  
TRUE
; 
	}
}

100 şas 
	cNÜm®iz”2W™hIm¶
 : 
public
 
NÜm®iz”2
 {

101 
public
:

102 
	$NÜm®iz”2W™hIm¶
(cÚ¡ 
NÜm®iz”2Im¶
 &
ni
è: 
	$im¶
(
ni
) {}

105 
vœtu®
 
UnicodeSŒšg
 &

106 
	$nÜm®ize
(cÚ¡ 
UnicodeSŒšg
 &
¤c
,

107 
UnicodeSŒšg
 &
de¡
,

108 
UE¼ÜCode
 &
”rÜCode
) const {

109 if(
	`U_FAILURE
(
”rÜCode
)) {

110 
de¡
.
	`£tToBogus
();

111  
de¡
;

113 cÚ¡ 
UCh¬
 *
sA¼ay
=
¤c
.
	`g‘Bufãr
();

114 if(&
de¡
==&
¤c
 || 
sA¼ay
==
NULL
) {

115 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

116 
de¡
.
	`£tToBogus
();

117  
de¡
;

119 
de¡
.
	`»move
();

120 
ReÜd”šgBufãr
 
	`bufãr
(
im¶
, 
de¡
);

121 if(
bufãr
.
	`š™
(
¤c
.
	`Ëngth
(), 
”rÜCode
)) {

122 
	`nÜm®ize
(
sA¼ay
, sA¼ay+
¤c
.
	`Ëngth
(), 
bufãr
, 
”rÜCode
);

124  
de¡
;

125 
	}
}

126 
vœtu®
 

127 
	$nÜm®ize
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

128 
ReÜd”šgBufãr
 &
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const = 0;

131 
vœtu®
 
UnicodeSŒšg
 &

132 
	$nÜm®izeSecÚdAndAµ’d
(
UnicodeSŒšg
 &
fœ¡
,

133 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

134 
UE¼ÜCode
 &
”rÜCode
) const {

135  
	`nÜm®izeSecÚdAndAµ’d
(
fœ¡
, 
£cÚd
, 
TRUE
, 
”rÜCode
);

136 
	}
}

137 
vœtu®
 
	gUnicodeSŒšg
 &

138 
	$­³nd
(
UnicodeSŒšg
 &
fœ¡
,

139 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

140 
UE¼ÜCode
 &
”rÜCode
) const {

141  
	`nÜm®izeSecÚdAndAµ’d
(
fœ¡
, 
£cÚd
, 
FALSE
, 
”rÜCode
);

142 
	}
}

143 
	gUnicodeSŒšg
 &

144 
	$nÜm®izeSecÚdAndAµ’d
(
UnicodeSŒšg
 &
fœ¡
,

145 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

146 
UBoŞ
 
doNÜm®ize
,

147 
UE¼ÜCode
 &
”rÜCode
) const {

148 
	`u´v_checkCªG‘Bufãr
(
fœ¡
, 
”rÜCode
);

149 if(
	`U_FAILURE
(
”rÜCode
)) {

150  
fœ¡
;

152 cÚ¡ 
UCh¬
 *
£cÚdA¼ay
=
£cÚd
.
	`g‘Bufãr
();

153 if(&
fœ¡
==&
£cÚd
 || 
£cÚdA¼ay
==
NULL
) {

154 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

155  
fœ¡
;

157 
ReÜd”šgBufãr
 
	`bufãr
(
im¶
, 
fœ¡
);

158 if(
bufãr
.
	`š™
(
fœ¡
.
	`Ëngth
()+
£cÚd
.Ëngth(), 
”rÜCode
)) {

159 
	`nÜm®izeAndAµ’d
(
£cÚdA¼ay
, secÚdA¼ay+
£cÚd
.
	`Ëngth
(), 
doNÜm®ize
,

160 
bufãr
, 
”rÜCode
);

162  
fœ¡
;

163 
	}
}

164 
vœtu®
 

165 
	$nÜm®izeAndAµ’d
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
, 
UBoŞ
 
doNÜm®ize
,

166 
ReÜd”šgBufãr
 &
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const = 0;

167 
vœtu®
 
UBoŞ


168 
	$g‘Decompos™iÚ
(
UCh¬32
 
c
, 
UnicodeSŒšg
 &
decompos™iÚ
) const {

169 
UCh¬
 
bufãr
[4];

170 
št32_t
 
Ëngth
;

171 cÚ¡ 
UCh¬
 *
d
=
im¶
.
	`g‘Decompos™iÚ
(
c
, 
bufãr
, 
Ëngth
);

172 if(
d
==
NULL
) {

173  
FALSE
;

175 if(
d
==
bufãr
) {

176 
decompos™iÚ
.
	`£tTo
(
bufãr
, 
Ëngth
);

178 
decompos™iÚ
.
	`£tTo
(
FALSE
, 
d
, 
Ëngth
);

180  
TRUE
;

181 
	}
}

184 
vœtu®
 
UBoŞ


185 
	$isNÜm®ized
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const {

186 if(
	`U_FAILURE
(
”rÜCode
)) {

187  
FALSE
;

189 cÚ¡ 
UCh¬
 *
sA¼ay
=
s
.
	`g‘Bufãr
();

190 if(
sA¼ay
==
NULL
) {

191 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

192  
FALSE
;

194 cÚ¡ 
UCh¬
 *
sLim™
=
sA¼ay
+
s
.
	`Ëngth
();

195  
sLim™
==
	`¥ªQuickCheckYes
(
sA¼ay
, sLim™, 
”rÜCode
);

196 
	}
}

197 
vœtu®
 
UNÜm®iz©iÚCheckResuÉ


198 
	$quickCheck
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const {

199  
NÜm®iz”2W™hIm¶
::
	`isNÜm®ized
(
s
, 
”rÜCode
è? 
UNORM_YES
 : 
UNORM_NO
;

200 
	}
}

201 
vœtu®
 
št32_t


202 
	$¥ªQuickCheckYes
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const {

203 if(
	`U_FAILURE
(
”rÜCode
)) {

206 cÚ¡ 
UCh¬
 *
sA¼ay
=
s
.
	`g‘Bufãr
();

207 if(
sA¼ay
==
NULL
) {

208 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

211  (
št32_t
)(
	`¥ªQuickCheckYes
(
sA¼ay
, sA¼ay+
s
.
	`Ëngth
(), 
”rÜCode
)-sArray);

212 
	}
}

213 
vœtu®
 cÚ¡ 
UCh¬
 *

214 
	$¥ªQuickCheckYes
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
, 
UE¼ÜCode
 &
”rÜCode
) const = 0;

216 
vœtu®
 
UNÜm®iz©iÚCheckResuÉ
 
	$g‘QuickCheck
(
UCh¬32
) const {

217  
UNORM_YES
;

218 
	}
}

220 cÚ¡ 
	gNÜm®iz”2Im¶
 &
	gim¶
;

223 şas 
	cDecompo£NÜm®iz”2
 : 
public
 
NÜm®iz”2W™hIm¶
 {

224 
public
:

225 
	$Decompo£NÜm®iz”2
(cÚ¡ 
NÜm®iz”2Im¶
 &
ni
è: 
	$NÜm®iz”2W™hIm¶
(
ni
) {}

227 
´iv©e
:

228 
vœtu®
 

229 
	$nÜm®ize
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

230 
ReÜd”šgBufãr
 &
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const {

231 
im¶
.
	`decompo£
(
¤c
, 
lim™
, &
bufãr
, 
”rÜCode
);

232 
	}
}

233 
usšg
 
	gNÜm®iz”2W™hIm¶
::
nÜm®ize
;

234 
vœtu®
 

235 
	$nÜm®izeAndAµ’d
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
, 
UBoŞ
 
doNÜm®ize
,

236 
ReÜd”šgBufãr
 &
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const {

237 
im¶
.
	`decompo£AndAµ’d
(
¤c
, 
lim™
, 
doNÜm®ize
, 
bufãr
, 
”rÜCode
);

238 
	}
}

239 
vœtu®
 cÚ¡ 
UCh¬
 *

240 
	$¥ªQuickCheckYes
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
, 
UE¼ÜCode
 &
”rÜCode
) const {

241  
im¶
.
	`decompo£
(
¤c
, 
lim™
, 
NULL
, 
”rÜCode
);

242 
	}
}

243 
usšg
 
	gNÜm®iz”2W™hIm¶
::
¥ªQuickCheckYes
;

244 
vœtu®
 
UNÜm®iz©iÚCheckResuÉ
 
	$g‘QuickCheck
(
UCh¬32
 
c
) const {

245  
im¶
.
	`isDecompYes
(im¶.
	`g‘NÜm16
(
c
)è? 
UNORM_YES
 : 
UNORM_NO
;

246 
	}
}

247 
vœtu®
 
UBoŞ
 
	$hasBound¬yBefÜe
(
UCh¬32
 
c
ècÚ¡ {  
im¶
.
	`hasDecompBound¬y
(c, 
TRUE
); 
	}
}

248 
vœtu®
 
UBoŞ
 
	$hasBound¬yAá”
(
UCh¬32
 
c
ècÚ¡ {  
im¶
.
	`hasDecompBound¬y
(c, 
FALSE
); 
	}
}

249 
vœtu®
 
UBoŞ
 
	$isIÃ¹
(
UCh¬32
 
c
ècÚ¡ {  
im¶
.
	`isDecompIÃ¹
(c); 
	}
}

252 şas 
	cCompo£NÜm®iz”2
 : 
public
 
NÜm®iz”2W™hIm¶
 {

253 
public
:

254 
	$Compo£NÜm®iz”2
(cÚ¡ 
NÜm®iz”2Im¶
 &
ni
, 
UBoŞ
 
fcc
) :

255 
	`NÜm®iz”2W™hIm¶
(
ni
), 
	$ÚlyCÚtiguous
(
fcc
) {}

257 
´iv©e
:

258 
vœtu®
 

259 
	$nÜm®ize
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

260 
ReÜd”šgBufãr
 &
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const {

261 
im¶
.
	`compo£
(
¤c
, 
lim™
, 
ÚlyCÚtiguous
, 
TRUE
, 
bufãr
, 
”rÜCode
);

262 
	}
}

263 
usšg
 
	gNÜm®iz”2W™hIm¶
::
nÜm®ize
;

264 
vœtu®
 

265 
	$nÜm®izeAndAµ’d
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
, 
UBoŞ
 
doNÜm®ize
,

266 
ReÜd”šgBufãr
 &
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const {

267 
im¶
.
	`compo£AndAµ’d
(
¤c
, 
lim™
, 
doNÜm®ize
, 
ÚlyCÚtiguous
, 
bufãr
, 
”rÜCode
);

268 
	}
}

270 
vœtu®
 
UBoŞ


271 
	$isNÜm®ized
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const {

272 if(
	`U_FAILURE
(
”rÜCode
)) {

273  
FALSE
;

275 cÚ¡ 
UCh¬
 *
sA¼ay
=
s
.
	`g‘Bufãr
();

276 if(
sA¼ay
==
NULL
) {

277 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

278  
FALSE
;

280 
UnicodeSŒšg
 
‹mp
;

281 
ReÜd”šgBufãr
 
	`bufãr
(
im¶
, 
‹mp
);

282 if(!
bufãr
.
	`š™
(5, 
”rÜCode
)) {

283  
FALSE
;

285  
im¶
.
	`compo£
(
sA¼ay
, sA¼ay+
s
.
	`Ëngth
(), 
ÚlyCÚtiguous
, 
FALSE
, 
bufãr
, 
”rÜCode
);

286 
	}
}

287 
vœtu®
 
UNÜm®iz©iÚCheckResuÉ


288 
	$quickCheck
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const {

289 if(
	`U_FAILURE
(
”rÜCode
)) {

290  
UNORM_MAYBE
;

292 cÚ¡ 
UCh¬
 *
sA¼ay
=
s
.
	`g‘Bufãr
();

293 if(
sA¼ay
==
NULL
) {

294 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

295  
UNORM_MAYBE
;

297 
UNÜm®iz©iÚCheckResuÉ
 
qcResuÉ
=
UNORM_YES
;

298 
im¶
.
	`compo£QuickCheck
(
sA¼ay
, sA¼ay+
s
.
	`Ëngth
(), 
ÚlyCÚtiguous
, &
qcResuÉ
);

299  
qcResuÉ
;

300 
	}
}

301 
vœtu®
 cÚ¡ 
UCh¬
 *

302 
	$¥ªQuickCheckYes
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
, 
UE¼ÜCode
 &) const {

303  
im¶
.
	`compo£QuickCheck
(
¤c
, 
lim™
, 
ÚlyCÚtiguous
, 
NULL
);

304 
	}
}

305 
usšg
 
	gNÜm®iz”2W™hIm¶
::
¥ªQuickCheckYes
;

306 
vœtu®
 
UNÜm®iz©iÚCheckResuÉ
 
	$g‘QuickCheck
(
UCh¬32
 
c
) const {

307  
im¶
.
	`g‘CompQuickCheck
(im¶.
	`g‘NÜm16
(
c
));

308 
	}
}

309 
vœtu®
 
UBoŞ
 
	$hasBound¬yBefÜe
(
UCh¬32
 
c
) const {

310  
im¶
.
	`hasCompBound¬yBefÜe
(
c
);

311 
	}
}

312 
vœtu®
 
UBoŞ
 
	$hasBound¬yAá”
(
UCh¬32
 
c
) const {

313  
im¶
.
	`hasCompBound¬yAá”
(
c
, 
ÚlyCÚtiguous
, 
FALSE
);

314 
	}
}

315 
vœtu®
 
UBoŞ
 
	$isIÃ¹
(
UCh¬32
 
c
) const {

316  
im¶
.
	`hasCompBound¬yAá”
(
c
, 
ÚlyCÚtiguous
, 
TRUE
);

317 
	}
}

319 cÚ¡ 
UBoŞ
 
	gÚlyCÚtiguous
;

322 şas 
	cFCDNÜm®iz”2
 : 
public
 
NÜm®iz”2W™hIm¶
 {

323 
public
:

324 
	$FCDNÜm®iz”2
(cÚ¡ 
NÜm®iz”2Im¶
 &
ni
è: 
	$NÜm®iz”2W™hIm¶
(
ni
) {}

326 
´iv©e
:

327 
vœtu®
 

328 
	$nÜm®ize
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

329 
ReÜd”šgBufãr
 &
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const {

330 
im¶
.
	`makeFCD
(
¤c
, 
lim™
, &
bufãr
, 
”rÜCode
);

331 
	}
}

332 
usšg
 
	gNÜm®iz”2W™hIm¶
::
nÜm®ize
;

333 
vœtu®
 

334 
	$nÜm®izeAndAµ’d
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
, 
UBoŞ
 
doNÜm®ize
,

335 
ReÜd”šgBufãr
 &
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const {

336 
im¶
.
	`makeFCDAndAµ’d
(
¤c
, 
lim™
, 
doNÜm®ize
, 
bufãr
, 
”rÜCode
);

337 
	}
}

338 
vœtu®
 cÚ¡ 
UCh¬
 *

339 
	$¥ªQuickCheckYes
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
, 
UE¼ÜCode
 &
”rÜCode
) const {

340  
im¶
.
	`makeFCD
(
¤c
, 
lim™
, 
NULL
, 
”rÜCode
);

341 
	}
}

342 
usšg
 
	gNÜm®iz”2W™hIm¶
::
¥ªQuickCheckYes
;

343 
vœtu®
 
UBoŞ
 
	$hasBound¬yBefÜe
(
UCh¬32
 
c
ècÚ¡ {  
im¶
.
	`hasFCDBound¬yBefÜe
(c); 
	}
}

344 
vœtu®
 
UBoŞ
 
	$hasBound¬yAá”
(
UCh¬32
 
c
ècÚ¡ {  
im¶
.
	`hasFCDBound¬yAá”
(c); 
	}
}

345 
vœtu®
 
UBoŞ
 
	$isIÃ¹
(
UCh¬32
 
c
ècÚ¡ {  
im¶
.
	`isFCDIÃ¹
(c); 
	}
}

350 
	gNÜm2AÎModes
 : 
public
 
UMemÜy
 {

351 
NÜm2AÎModes
 *
ü—‹In¡ªû
(cÚ¡ *
·ckageName
,

352 cÚ¡ *
Çme
,

353 
UE¼ÜCode
 &
”rÜCode
);

354 
NÜm2AÎModes
(è: 
comp
(
im¶
, 
FALSE
), 
decomp
(im¶), 
fcd
(im¶), 
fcc
(im¶, 
TRUE
) {}

356 
NÜm®iz”2Im¶
 
	gim¶
;

357 
Compo£NÜm®iz”2
 
	gcomp
;

358 
Decompo£NÜm®iz”2
 
	gdecomp
;

359 
FCDNÜm®iz”2
 
	gfcd
;

360 
Compo£NÜm®iz”2
 
	gfcc
;

363 
NÜm2AÎModes
 *

364 
	gNÜm2AÎModes
::
	$ü—‹In¡ªû
(cÚ¡ *
·ckageName
,

365 cÚ¡ *
Çme
,

366 
UE¼ÜCode
 &
”rÜCode
) {

367 if(
	`U_FAILURE
(
”rÜCode
)) {

368  
NULL
;

370 
LoÿlPoš‹r
<
NÜm2AÎModes
> 
	`®lModes
(
Ãw
 Norm2AllModes);

371 if(
®lModes
.
	`isNuÎ
()) {

372 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

373  
NULL
;

375 
®lModes
->
im¶
.
	`lßd
(
·ckageName
, 
Çme
, 
”rÜCode
);

376  
	`U_SUCCESS
(
”rÜCode
è? 
®lModes
.
	`Üphª
(è: 
NULL
;

377 
	}
}

379 
U_CDECL_BEGIN


380 
UBoŞ
 
U_CALLCONV
 
u´v_nÜm®iz”2_ş—nup
();

381 
U_CDECL_END


383 
şass
 
	gNÜm2AÎModesSšgËtÚ
 : 
public
 
TriS‹SšgËtÚW¿µ”
<
NÜm2AÎModes
> {

384 
public
:

385 
NÜm2AÎModesSšgËtÚ
(
TriS‹SšgËtÚ
 &
s
, cÚ¡ *
n
) :

386 
TriS‹SšgËtÚW¿µ”
<
NÜm2AÎModes
>(
s
), 
Çme
(
n
) {}

387 
NÜm2AÎModes
 *
g‘In¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

388  
	gTriS‹SšgËtÚW¿µ”
<
	gNÜm2AÎModes
>::
g‘In¡ªû
(
ü—‹In¡ªû
, 
Çme
, 
”rÜCode
);

390 
	g´iv©e
:

391 *
ü—‹In¡ªû
(cÚ¡ *
cÚ‹xt
, 
UE¼ÜCode
 &
”rÜCode
) {

392 
uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_NORMALIZER2
, 
u´v_nÜm®iz”2_ş—nup
);

393  
	gNÜm2AÎModes
::
ü—‹In¡ªû
(
NULL
, (cÚ¡ *)
cÚ‹xt
, 
”rÜCode
);

396 cÚ¡ *
	gÇme
;

399 
STATIC_TRI_STATE_SINGLETON
(
nfcSšgËtÚ
);

400 
STATIC_TRI_STATE_SINGLETON
(
nfkcSšgËtÚ
);

401 
STATIC_TRI_STATE_SINGLETON
(
nfkc_cfSšgËtÚ
);

403 
şass
 
	gNÜm2SšgËtÚ
 : 
public
 
Sim¶eSšgËtÚW¿µ”
<
NÜm®iz”2
> {

404 
public
:

405 
NÜm2SšgËtÚ
(
Sim¶eSšgËtÚ
 &
s
è: 
Sim¶eSšgËtÚW¿µ”
<
NÜm®iz”2
>(s) {}

406 
NÜm®iz”2
 *
g‘In¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

407  
Sim¶eSšgËtÚW¿µ”
<
NÜm®iz”2
>::
g‘In¡ªû
(
ü—‹In¡ªû
, 
NULL
, 
”rÜCode
);

409 
	g´iv©e
:

410 *
ü—‹In¡ªû
(cÚ¡ *, 
UE¼ÜCode
 &
”rÜCode
) {

411 
NÜm®iz”2
 *
	gnoİ
=
Ãw
 
NoİNÜm®iz”2
;

412 if(
	gnoİ
==
NULL
) {

413 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

415 
uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_NORMALIZER2
, 
u´v_nÜm®iz”2_ş—nup
);

416  
	gnoİ
;

420 
STATIC_SIMPLE_SINGLETON
(
noİSšgËtÚ
);

422 
UHashbË
 *
	gÿche
=
NULL
;

424 
U_CDECL_BEGIN


426 
U_CALLCONV
 
	$d–‘eNÜm2AÎModes
(*
®lModes
) {

427 
	`d–‘e
 (
NÜm2AÎModes
 *)
®lModes
;

428 
	}
}

430 
UBoŞ
 
U_CALLCONV
 
	$u´v_nÜm®iz”2_ş—nup
() {

431 
	`NÜm2AÎModesSšgËtÚ
(
nfcSšgËtÚ
, 
NULL
).
	`d–‘eIn¡ªû
();

432 
	`NÜm2AÎModesSšgËtÚ
(
nfkcSšgËtÚ
, 
NULL
).
	`d–‘eIn¡ªû
();

433 
	`NÜm2AÎModesSšgËtÚ
(
nfkc_cfSšgËtÚ
, 
NULL
).
	`d–‘eIn¡ªû
();

434 
	`NÜm2SšgËtÚ
(
noİSšgËtÚ
).
	`d–‘eIn¡ªû
();

435 
	`uhash_şo£
(
ÿche
);

436 
ÿche
=
NULL
;

437  
TRUE
;

438 
	}
}

440 
U_CDECL_END


442 cÚ¡ 
NÜm®iz”2
 *
	gNÜm®iz”2FaùÜy
::
	$g‘NFCIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

443 
NÜm2AÎModes
 *
®lModes
=
	`NÜm2AÎModesSšgËtÚ
(
nfcSšgËtÚ
, "nfc").
	`g‘In¡ªû
(
”rÜCode
);

444  
®lModes
!=
NULL
 ? &®lModes->
comp
 : NULL;

445 
	}
}

447 cÚ¡ 
NÜm®iz”2
 *
	gNÜm®iz”2FaùÜy
::
	$g‘NFDIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

448 
NÜm2AÎModes
 *
®lModes
=
	`NÜm2AÎModesSšgËtÚ
(
nfcSšgËtÚ
, "nfc").
	`g‘In¡ªû
(
”rÜCode
);

449  
®lModes
!=
NULL
 ? &®lModes->
decomp
 : NULL;

450 
	}
}

452 cÚ¡ 
NÜm®iz”2
 *
	gNÜm®iz”2FaùÜy
::
	$g‘FCDIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

453 
NÜm2AÎModes
 *
®lModes
=
	`NÜm2AÎModesSšgËtÚ
(
nfcSšgËtÚ
, "nfc").
	`g‘In¡ªû
(
”rÜCode
);

454 if(
®lModes
!=
NULL
) {

455 
®lModes
->
im¶
.
	`g‘FCDTr›
(
”rÜCode
);

456  &
®lModes
->
fcd
;

458  
NULL
;

460 
	}
}

462 cÚ¡ 
NÜm®iz”2
 *
	gNÜm®iz”2FaùÜy
::
	$g‘FCCIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

463 
NÜm2AÎModes
 *
®lModes
=
	`NÜm2AÎModesSšgËtÚ
(
nfcSšgËtÚ
, "nfc").
	`g‘In¡ªû
(
”rÜCode
);

464  
®lModes
!=
NULL
 ? &®lModes->
fcc
 : NULL;

465 
	}
}

467 cÚ¡ 
NÜm®iz”2
 *
	gNÜm®iz”2FaùÜy
::
	$g‘NFKCIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

468 
NÜm2AÎModes
 *
®lModes
=

469 
	`NÜm2AÎModesSšgËtÚ
(
nfkcSšgËtÚ
, "nfkc").
	`g‘In¡ªû
(
”rÜCode
);

470  
®lModes
!=
NULL
 ? &®lModes->
comp
 : NULL;

471 
	}
}

473 cÚ¡ 
NÜm®iz”2
 *
	gNÜm®iz”2FaùÜy
::
	$g‘NFKDIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

474 
NÜm2AÎModes
 *
®lModes
=

475 
	`NÜm2AÎModesSšgËtÚ
(
nfkcSšgËtÚ
, "nfkc").
	`g‘In¡ªû
(
”rÜCode
);

476  
®lModes
!=
NULL
 ? &®lModes->
decomp
 : NULL;

477 
	}
}

479 cÚ¡ 
NÜm®iz”2
 *
	gNÜm®iz”2FaùÜy
::
	$g‘NFKC_CFIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

480 
NÜm2AÎModes
 *
®lModes
=

481 
	`NÜm2AÎModesSšgËtÚ
(
nfkc_cfSšgËtÚ
, "nfkc_cf").
	`g‘In¡ªû
(
”rÜCode
);

482  
®lModes
!=
NULL
 ? &®lModes->
comp
 : NULL;

483 
	}
}

485 cÚ¡ 
NÜm®iz”2
 *
	gNÜm®iz”2FaùÜy
::
	$g‘NoİIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

486  
	`NÜm2SšgËtÚ
(
noİSšgËtÚ
).
	`g‘In¡ªû
(
”rÜCode
);

487 
	}
}

489 cÚ¡ 
NÜm®iz”2
 *

490 
	gNÜm®iz”2FaùÜy
::
	$g‘In¡ªû
(
UNÜm®iz©iÚMode
 
mode
, 
UE¼ÜCode
 &
”rÜCode
) {

491 if(
	`U_FAILURE
(
”rÜCode
)) {

492  
NULL
;

494 
mode
) {

495 
UNORM_NFD
:

496  
	`g‘NFDIn¡ªû
(
”rÜCode
);

497 
UNORM_NFKD
:

498  
	`g‘NFKDIn¡ªû
(
”rÜCode
);

499 
UNORM_NFC
:

500  
	`g‘NFCIn¡ªû
(
”rÜCode
);

501 
UNORM_NFKC
:

502  
	`g‘NFKCIn¡ªû
(
”rÜCode
);

503 
UNORM_FCD
:

504  
	`g‘FCDIn¡ªû
(
”rÜCode
);

506  
	`g‘NoİIn¡ªû
(
”rÜCode
);

508 
	}
}

510 cÚ¡ 
NÜm®iz”2Im¶
 *

511 
	gNÜm®iz”2FaùÜy
::
	$g‘NFCIm¶
(
UE¼ÜCode
 &
”rÜCode
) {

512 
NÜm2AÎModes
 *
®lModes
=

513 
	`NÜm2AÎModesSšgËtÚ
(
nfcSšgËtÚ
, "nfc").
	`g‘In¡ªû
(
”rÜCode
);

514  
®lModes
!=
NULL
 ? &®lModes->
im¶
 : NULL;

515 
	}
}

517 cÚ¡ 
NÜm®iz”2Im¶
 *

518 
	gNÜm®iz”2FaùÜy
::
	$g‘NFKCIm¶
(
UE¼ÜCode
 &
”rÜCode
) {

519 
NÜm2AÎModes
 *
®lModes
=

520 
	`NÜm2AÎModesSšgËtÚ
(
nfkcSšgËtÚ
, "nfkc").
	`g‘In¡ªû
(
”rÜCode
);

521  
®lModes
!=
NULL
 ? &®lModes->
im¶
 : NULL;

522 
	}
}

524 cÚ¡ 
NÜm®iz”2Im¶
 *

525 
	gNÜm®iz”2FaùÜy
::
	$g‘NFKC_CFIm¶
(
UE¼ÜCode
 &
”rÜCode
) {

526 
NÜm2AÎModes
 *
®lModes
=

527 
	`NÜm2AÎModesSšgËtÚ
(
nfkc_cfSšgËtÚ
, "nfkc_cf").
	`g‘In¡ªû
(
”rÜCode
);

528  
®lModes
!=
NULL
 ? &®lModes->
im¶
 : NULL;

529 
	}
}

531 cÚ¡ 
NÜm®iz”2Im¶
 *

532 
	gNÜm®iz”2FaùÜy
::
	$g‘Im¶
(cÚ¡ 
NÜm®iz”2
 *
nÜm2
) {

533  &((
NÜm®iz”2W™hIm¶
 *)
nÜm2
)->
im¶
;

534 
	}
}

536 cÚ¡ 
UTr›2
 *

537 
	gNÜm®iz”2FaùÜy
::
	$g‘FCDTr›
(
UE¼ÜCode
 &
”rÜCode
) {

538 
NÜm2AÎModes
 *
®lModes
=

539 
	`NÜm2AÎModesSšgËtÚ
(
nfcSšgËtÚ
, "nfc").
	`g‘In¡ªû
(
”rÜCode
);

540 if(
®lModes
!=
NULL
) {

541  
®lModes
->
im¶
.
	`g‘FCDTr›
(
”rÜCode
);

543  
NULL
;

545 
	}
}

547 cÚ¡ 
NÜm®iz”2
 *

548 
	gNÜm®iz”2
::
	$g‘In¡ªû
(cÚ¡ *
·ckageName
,

549 cÚ¡ *
Çme
,

550 
UNÜm®iz©iÚ2Mode
 
mode
,

551 
UE¼ÜCode
 &
”rÜCode
) {

552 if(
	`U_FAILURE
(
”rÜCode
)) {

553  
NULL
;

555 if(
Çme
==
NULL
 || *name==0) {

556 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

558 
NÜm2AÎModes
 *
®lModes
=
NULL
;

559 if(
·ckageName
==
NULL
) {

560 if(0==
	`u´v_¡rcmp
(
Çme
, "nfc")) {

561 
®lModes
=
	`NÜm2AÎModesSšgËtÚ
(
nfcSšgËtÚ
, "nfc").
	`g‘In¡ªû
(
”rÜCode
);

562 } if(0==
	`u´v_¡rcmp
(
Çme
, "nfkc")) {

563 
®lModes
=
	`NÜm2AÎModesSšgËtÚ
(
nfkcSšgËtÚ
, "nfkc").
	`g‘In¡ªû
(
”rÜCode
);

564 } if(0==
	`u´v_¡rcmp
(
Çme
, "nfkc_cf")) {

565 
®lModes
=
	`NÜm2AÎModesSšgËtÚ
(
nfkc_cfSšgËtÚ
, "nfkc_cf").
	`g‘In¡ªû
(
”rÜCode
);

568 if(
®lModes
==
NULL
 && 
	`U_SUCCESS
(
”rÜCode
)) {

570 
Mu‹x
 
lock
;

571 if(
ÿche
!=
NULL
) {

572 
®lModes
=(
NÜm2AÎModes
 *)
	`uhash_g‘
(
ÿche
, 
Çme
);

575 if(
®lModes
==
NULL
) {

576 
LoÿlPoš‹r
<
NÜm2AÎModes
> 
	`loÿlAÎModes
(

577 
NÜm2AÎModes
::
	`ü—‹In¡ªû
(
·ckageName
, 
Çme
, 
”rÜCode
));

578 if(
	`U_SUCCESS
(
”rÜCode
)) {

579 
Mu‹x
 
lock
;

580 if(
ÿche
==
NULL
) {

581 
ÿche
=
	`uhash_İ’
(
uhash_hashCh¬s
, 
uhash_com·»Ch¬s
, 
NULL
, &
”rÜCode
);

582 if(
	`U_FAILURE
(
”rÜCode
)) {

583  
NULL
;

585 
	`uhash_£tKeyD–‘”
(
ÿche
, 
u´v_ä“
);

586 
	`uhash_£tV®ueD–‘”
(
ÿche
, 
d–‘eNÜm2AÎModes
);

588 *
‹mp
=
	`uhash_g‘
(
ÿche
, 
Çme
);

589 if(
‹mp
==
NULL
) {

590 
št32_t
 
keyL’gth
=
	`u´v_¡¾’
(
Çme
)+1;

591 *
ÇmeCİy
=(*)
	`u´v_m®loc
(
keyL’gth
);

592 if(
ÇmeCİy
==
NULL
) {

593 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

594  
NULL
;

596 
	`u´v_memıy
(
ÇmeCİy
, 
Çme
, 
keyL’gth
);

597 
	`uhash_put
(
ÿche
, 
ÇmeCİy
, 
®lModes
=
loÿlAÎModes
.
	`Üphª
(), &
”rÜCode
);

600 
®lModes
=(
NÜm2AÎModes
 *)
‹mp
;

605 if(
®lModes
!=
NULL
 && 
	`U_SUCCESS
(
”rÜCode
)) {

606 
mode
) {

607 
UNORM2_COMPOSE
:

608  &
®lModes
->
comp
;

609 
UNORM2_DECOMPOSE
:

610  &
®lModes
->
decomp
;

611 
UNORM2_FCD
:

612 
®lModes
->
im¶
.
	`g‘FCDTr›
(
”rÜCode
);

613  &
®lModes
->
fcd
;

614 
UNORM2_COMPOSE_CONTIGUOUS
:

615  &
®lModes
->
fcc
;

620  
NULL
;

621 
	}
}

623 
	$UOBJECT_DEFINE_NO_RTTI_IMPLEMENTATION
(
NÜm®iz”2
)

625 
U_NAMESPACE_END


629 
U_NAMESPACE_USE


631 
U_DRAFT
 cÚ¡ 
UNÜm®iz”2
 * 
U_EXPORT2


632 
	$unÜm2_g‘In¡ªû
(cÚ¡ *
·ckageName
,

633 cÚ¡ *
Çme
,

634 
UNÜm®iz©iÚ2Mode
 
mode
,

635 
UE¼ÜCode
 *
pE¼ÜCode
) {

636  (cÚ¡ 
UNÜm®iz”2
 *)
NÜm®iz”2
::
	`g‘In¡ªû
(
·ckageName
, 
Çme
, 
mode
, *
pE¼ÜCode
);

637 
	}
}

639 
U_DRAFT
 
U_EXPORT2


640 
	$unÜm2_şo£
(
UNÜm®iz”2
 *
nÜm2
) {

641 
	`d–‘e
 (
NÜm®iz”2
 *)
nÜm2
;

642 
	}
}

644 
U_DRAFT
 
št32_t
 
U_EXPORT2


645 
	$unÜm2_nÜm®ize
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

646 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
Ëngth
,

647 
UCh¬
 *
de¡
, 
št32_t
 
ÿ·c™y
,

648 
UE¼ÜCode
 *
pE¼ÜCode
) {

649 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

652 ifĞ(
¤c
==
NULL
 ? 
Ëngth
!=0 :†ength<-1) ||

653 (
de¡
==
NULL
 ? 
ÿ·c™y
!=0 : capacity<0) ||

654 (
¤c
==
de¡
 && src!=
NULL
)

656 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

659 
UnicodeSŒšg
 
	`de¡SŒšg
(
de¡
, 0, 
ÿ·c™y
);

661 if(
Ëngth
!=0) {

662 cÚ¡ 
NÜm®iz”2
 *
n2
=(cÚ¡ NÜm®iz”2 *)
nÜm2
;

663 cÚ¡ 
NÜm®iz”2W™hIm¶
 *
n2wi
=
dyÇmic_ÿ¡
<cÚ¡ NÜm®iz”2W™hIm¶ *>(
n2
);

664 if(
n2wi
!=
NULL
) {

666 
ReÜd”šgBufãr
 
	`bufãr
(
n2wi
->
im¶
, 
de¡SŒšg
);

667 if(
bufãr
.
	`š™
(
Ëngth
, *
pE¼ÜCode
)) {

668 
n2wi
->
	`nÜm®ize
(
¤c
, 
Ëngth
>=0 ? src+Ëngth : 
NULL
, 
bufãr
, *
pE¼ÜCode
);

671 
UnicodeSŒšg
 
	`¤cSŒšg
(
Ëngth
<0, 
¤c
,†ength);

672 
n2
->
	`nÜm®ize
(
¤cSŒšg
, 
de¡SŒšg
, *
pE¼ÜCode
);

675  
de¡SŒšg
.
	`exŒaù
(
de¡
, 
ÿ·c™y
, *
pE¼ÜCode
);

676 
	}
}

678 
št32_t


679 
	$nÜm®izeSecÚdAndAµ’d
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

680 
UCh¬
 *
fœ¡
, 
št32_t
 
fœ¡L’gth
, iÁ32_ˆ
fœ¡C­ac™y
,

681 cÚ¡ 
UCh¬
 *
£cÚd
, 
št32_t
 
£cÚdL’gth
,

682 
UBoŞ
 
doNÜm®ize
,

683 
UE¼ÜCode
 *
pE¼ÜCode
) {

684 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

687 ifĞ(
£cÚd
==
NULL
 ? 
£cÚdL’gth
!=0 : secondLength<-1) ||

688 (
fœ¡
==
NULL
 ? (
fœ¡C­ac™y
!=0 || 
fœ¡L’gth
!=0) :

689 (
fœ¡C­ac™y
<0 || 
fœ¡L’gth
<-1)) ||

690 (
fœ¡
==
£cÚd
 && fœ¡!=
NULL
)

692 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

695 
UnicodeSŒšg
 
	`fœ¡SŒšg
(
fœ¡
, 
fœ¡L’gth
, 
fœ¡C­ac™y
);

697 if(
£cÚdL’gth
!=0) {

698 cÚ¡ 
NÜm®iz”2
 *
n2
=(cÚ¡ NÜm®iz”2 *)
nÜm2
;

699 cÚ¡ 
NÜm®iz”2W™hIm¶
 *
n2wi
=
dyÇmic_ÿ¡
<cÚ¡ NÜm®iz”2W™hIm¶ *>(
n2
);

700 if(
n2wi
!=
NULL
) {

702 
ReÜd”šgBufãr
 
	`bufãr
(
n2wi
->
im¶
, 
fœ¡SŒšg
);

703 if(
bufãr
.
	`š™
(
fœ¡L’gth
+
£cÚdL’gth
+1, *
pE¼ÜCode
)) {

704 
n2wi
->
	`nÜm®izeAndAµ’d
(
£cÚd
, 
£cÚdL’gth
>=0 ? secÚd+£cÚdL’gth : 
NULL
,

705 
doNÜm®ize
, 
bufãr
, *
pE¼ÜCode
);

708 
UnicodeSŒšg
 
	`£cÚdSŒšg
(
£cÚdL’gth
<0, 
£cÚd
, secondLength);

709 if(
doNÜm®ize
) {

710 
n2
->
	`nÜm®izeSecÚdAndAµ’d
(
fœ¡SŒšg
, 
£cÚdSŒšg
, *
pE¼ÜCode
);

712 
n2
->
	`­³nd
(
fœ¡SŒšg
, 
£cÚdSŒšg
, *
pE¼ÜCode
);

716  
fœ¡SŒšg
.
	`exŒaù
(
fœ¡
, 
fœ¡C­ac™y
, *
pE¼ÜCode
);

717 
	}
}

719 
U_DRAFT
 
št32_t
 
U_EXPORT2


720 
	$unÜm2_nÜm®izeSecÚdAndAµ’d
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

721 
UCh¬
 *
fœ¡
, 
št32_t
 
fœ¡L’gth
, iÁ32_ˆ
fœ¡C­ac™y
,

722 cÚ¡ 
UCh¬
 *
£cÚd
, 
št32_t
 
£cÚdL’gth
,

723 
UE¼ÜCode
 *
pE¼ÜCode
) {

724  
	`nÜm®izeSecÚdAndAµ’d
(
nÜm2
,

725 
fœ¡
, 
fœ¡L’gth
, 
fœ¡C­ac™y
,

726 
£cÚd
, 
£cÚdL’gth
,

727 
TRUE
, 
pE¼ÜCode
);

728 
	}
}

730 
U_DRAFT
 
št32_t
 
U_EXPORT2


731 
	$unÜm2_­³nd
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

732 
UCh¬
 *
fœ¡
, 
št32_t
 
fœ¡L’gth
, iÁ32_ˆ
fœ¡C­ac™y
,

733 cÚ¡ 
UCh¬
 *
£cÚd
, 
št32_t
 
£cÚdL’gth
,

734 
UE¼ÜCode
 *
pE¼ÜCode
) {

735  
	`nÜm®izeSecÚdAndAµ’d
(
nÜm2
,

736 
fœ¡
, 
fœ¡L’gth
, 
fœ¡C­ac™y
,

737 
£cÚd
, 
£cÚdL’gth
,

738 
FALSE
, 
pE¼ÜCode
);

739 
	}
}

741 
U_DRAFT
 
št32_t
 
U_EXPORT2


742 
	$unÜm2_g‘Decompos™iÚ
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

743 
UCh¬32
 
c
, 
UCh¬
 *
decompos™iÚ
, 
št32_t
 
ÿ·c™y
,

744 
UE¼ÜCode
 *
pE¼ÜCode
) {

745 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

748 if(
decompos™iÚ
==
NULL
 ? 
ÿ·c™y
!=0 : capacity<0) {

749 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

752 
UnicodeSŒšg
 
	`de¡SŒšg
(
decompos™iÚ
, 0, 
ÿ·c™y
);

753 if(
»š‹½»t_ÿ¡
<cÚ¡ 
NÜm®iz”2
 *>(
nÜm2
)->
	`g‘Decompos™iÚ
(
c
, 
de¡SŒšg
)) {

754  
de¡SŒšg
.
	`exŒaù
(
decompos™iÚ
, 
ÿ·c™y
, *
pE¼ÜCode
);

758 
	}
}

760 
U_DRAFT
 
UBoŞ
 
U_EXPORT2


761 
	$unÜm2_isNÜm®ized
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

762 cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
,

763 
UE¼ÜCode
 *
pE¼ÜCode
) {

764 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

767 if((
s
==
NULL
 && 
Ëngth
!=0) ||†ength<-1) {

768 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

771 
UnicodeSŒšg
 
	`sSŒšg
(
Ëngth
<0, 
s
,†ength);

772  ((cÚ¡ 
NÜm®iz”2
 *)
nÜm2
)->
	`isNÜm®ized
(
sSŒšg
, *
pE¼ÜCode
);

773 
	}
}

775 
U_DRAFT
 
UNÜm®iz©iÚCheckResuÉ
 
U_EXPORT2


776 
	$unÜm2_quickCheck
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

777 cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
,

778 
UE¼ÜCode
 *
pE¼ÜCode
) {

779 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

780  
UNORM_NO
;

782 if((
s
==
NULL
 && 
Ëngth
!=0) ||†ength<-1) {

783 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

784  
UNORM_NO
;

786 
UnicodeSŒšg
 
	`sSŒšg
(
Ëngth
<0, 
s
,†ength);

787  ((cÚ¡ 
NÜm®iz”2
 *)
nÜm2
)->
	`quickCheck
(
sSŒšg
, *
pE¼ÜCode
);

788 
	}
}

790 
U_DRAFT
 
št32_t
 
U_EXPORT2


791 
	$unÜm2_¥ªQuickCheckYes
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

792 cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
,

793 
UE¼ÜCode
 *
pE¼ÜCode
) {

794 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

797 if((
s
==
NULL
 && 
Ëngth
!=0) ||†ength<-1) {

798 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

801 
UnicodeSŒšg
 
	`sSŒšg
(
Ëngth
<0, 
s
,†ength);

802  ((cÚ¡ 
NÜm®iz”2
 *)
nÜm2
)->
	`¥ªQuickCheckYes
(
sSŒšg
, *
pE¼ÜCode
);

803 
	}
}

805 
U_DRAFT
 
UBoŞ
 
U_EXPORT2


806 
	$unÜm2_hasBound¬yBefÜe
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
, 
UCh¬32
 
c
) {

807  ((cÚ¡ 
NÜm®iz”2
 *)
nÜm2
)->
	`hasBound¬yBefÜe
(
c
);

808 
	}
}

810 
U_DRAFT
 
UBoŞ
 
U_EXPORT2


811 
	$unÜm2_hasBound¬yAá”
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
, 
UCh¬32
 
c
) {

812  ((cÚ¡ 
NÜm®iz”2
 *)
nÜm2
)->
	`hasBound¬yAá”
(
c
);

813 
	}
}

815 
U_DRAFT
 
UBoŞ
 
U_EXPORT2


816 
	$unÜm2_isIÃ¹
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
, 
UCh¬32
 
c
) {

817  ((cÚ¡ 
NÜm®iz”2
 *)
nÜm2
)->
	`isIÃ¹
(
c
);

818 
	}
}

822 
U_CFUNC
 
UNÜm®iz©iÚCheckResuÉ
 
U_EXPORT2


823 
	$unÜm_g‘QuickCheck
(
UCh¬32
 
c
, 
UNÜm®iz©iÚMode
 
mode
) {

824 if(
mode
<=
UNORM_NONE
 || 
UNORM_FCD
<=mode) {

825  
UNORM_YES
;

827 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

828 cÚ¡ 
NÜm®iz”2
 *
nÜm2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, 
”rÜCode
);

829 if(
	`U_SUCCESS
(
”rÜCode
)) {

830  ((cÚ¡ 
NÜm®iz”2W™hIm¶
 *)
nÜm2
)->
	`g‘QuickCheck
(
c
);

832  
UNORM_MAYBE
;

834 
	}
}

836 
U_CAPI
 cÚ¡ 
ušt16_t
 * 
U_EXPORT2


837 
	$unÜm_g‘FCDTr›Index
(
UCh¬32
 &
fcdHighS¹
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

838 cÚ¡ 
UTr›2
 *
Œ›
=
NÜm®iz”2FaùÜy
::
	`g‘FCDTr›
(*
pE¼ÜCode
);

839 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

840 
fcdHighS¹
=
Œ›
->
highS¹
;

841  
Œ›
->
šdex
;

843  
NULL
;

845 
	}
}

	@normalizer2impl.cpp

17 
	~"unicode/uty³s.h
"

19 #ià!
UCONFIG_NO_NORMALIZATION


21 
	~"unicode/nÜm®iz”2.h
"

22 
	~"unicode/ud©a.h
"

23 
	~"unicode/u¡ršg.h
"

24 
	~"cmemÜy.h
"

25 
	~"mu‹x.h
"

26 
	~"nÜm®iz”2im¶.h
"

27 
	~"uas£¹.h
"

28 
	~"uhash.h
"

29 
	~"u£t_imp.h
"

30 
	~"uŒ›2.h
"

31 
	~"uveùÜ.h
"

33 
U_NAMESPACE_BEGIN


37 
UBoŞ
 
	gReÜd”šgBufãr
::
	$š™
(
št32_t
 
de¡C­ac™y
, 
UE¼ÜCode
 &
”rÜCode
) {

38 
št32_t
 
Ëngth
=
¡r
.
	`Ëngth
();

39 
¡¬t
=
¡r
.
	`g‘Bufãr
(
de¡C­ac™y
);

40 if(
¡¬t
==
NULL
) {

42 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

43  
FALSE
;

45 
lim™
=
¡¬t
+
Ëngth
;

46 
»maššgC­ac™y
=
¡r
.
	`g‘C­ac™y
()-
Ëngth
;

47 
»Üd”S¹
=
¡¬t
;

48 if(
¡¬t
==
lim™
) {

49 
Ï¡CC
=0;

51 
	`£tI‹¿tÜ
();

52 
Ï¡CC
=
	`´eviousCC
();

54 if(
Ï¡CC
>1) {

55 
	`´eviousCC
()>1) {}

57 
»Üd”S¹
=
codePoštLim™
;

59  
TRUE
;

60 
	}
}

62 
UBoŞ
 
	gReÜd”šgBufãr
::
	$equ®s
(cÚ¡ 
UCh¬
 *
Ùh”S¹
, cÚ¡ UCh¬ *
Ùh”Lim™
) const {

63 
št32_t
 
Ëngth
=(št32_t)(
lim™
-
¡¬t
);

65 
Ëngth
==(
št32_t
)(
Ùh”Lim™
-
Ùh”S¹
) &&

66 0==
	`u_memcmp
(
¡¬t
, 
Ùh”S¹
, 
Ëngth
);

67 
	}
}

69 
UBoŞ
 
	gReÜd”šgBufãr
::
	$­³ndSuµËm’ry
(
UCh¬32
 
c
, 
ušt8_t
 
cc
, 
UE¼ÜCode
 &
”rÜCode
) {

70 if(
»maššgC­ac™y
<2 && !
	`»size
(2, 
”rÜCode
)) {

71  
FALSE
;

73 if(
Ï¡CC
<=
cc
 || cc==0) {

74 
lim™
[0]=
	`U16_LEAD
(
c
);

75 
lim™
[1]=
	`U16_TRAIL
(
c
);

76 
lim™
+=2;

77 
Ï¡CC
=
cc
;

78 if(
cc
<=1) {

79 
»Üd”S¹
=
lim™
;

82 
	`š£¹
(
c
, 
cc
);

84 
»maššgC­ac™y
-=2;

85  
TRUE
;

86 
	}
}

88 
UBoŞ
 
	gReÜd”šgBufãr
::
	$­³nd
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
,

89 
ušt8_t
 
ËadCC
, ušt8_ˆ
ŒaCC
,

90 
UE¼ÜCode
 &
”rÜCode
) {

91 if(
Ëngth
==0) {

92  
TRUE
;

94 if(
»maššgC­ac™y
<
Ëngth
 && !
	`»size
Ö’gth, 
”rÜCode
)) {

95  
FALSE
;

97 
»maššgC­ac™y
-=
Ëngth
;

98 if(
Ï¡CC
<=
ËadCC
 ||†eadCC==0) {

99 if(
ŒaCC
<=1) {

100 
»Üd”S¹
=
lim™
+
Ëngth
;

101 } if(
ËadCC
<=1) {

102 
»Üd”S¹
=
lim™
+1;

104 cÚ¡ 
UCh¬
 *
sLim™
=
s
+
Ëngth
;

105 dØ{ *
lim™
++=*
s
++; } s!=
sLim™
);

106 
Ï¡CC
=
ŒaCC
;

108 
št32_t
 
i
=0;

109 
UCh¬32
 
c
;

110 
	`U16_NEXT
(
s
, 
i
, 
Ëngth
, 
c
);

111 
	`š£¹
(
c
, 
ËadCC
);

112 
i
<
Ëngth
) {

113 
	`U16_NEXT
(
s
, 
i
, 
Ëngth
, 
c
);

114 if(
i
<
Ëngth
) {

116 
ËadCC
=
NÜm®iz”2Im¶
::
	`g‘CCFromYesOrMaybe
(
im¶
.
	`g‘NÜm16
(
c
));

118 
ËadCC
=
ŒaCC
;

120 
	`­³nd
(
c
, 
ËadCC
, 
”rÜCode
);

123  
TRUE
;

124 
	}
}

126 
UBoŞ
 
	gReÜd”šgBufãr
::
	$­³ndZ”oCC
(
UCh¬32
 
c
, 
UE¼ÜCode
 &
”rÜCode
) {

127 
št32_t
 
ıL’gth
=
	`U16_LENGTH
(
c
);

128 if(
»maššgC­ac™y
<
ıL’gth
 && !
	`»size
(ıL’gth, 
”rÜCode
)) {

129  
FALSE
;

131 
»maššgC­ac™y
-=
ıL’gth
;

132 if(
ıL’gth
==1) {

133 *
lim™
++=(
UCh¬
)
c
;

135 
lim™
[0]=
	`U16_LEAD
(
c
);

136 
lim™
[1]=
	`U16_TRAIL
(
c
);

137 
lim™
+=2;

139 
Ï¡CC
=0;

140 
»Üd”S¹
=
lim™
;

141  
TRUE
;

142 
	}
}

144 
UBoŞ
 
	gReÜd”šgBufãr
::
	$­³ndZ”oCC
(cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
sLim™
, 
UE¼ÜCode
 &
”rÜCode
) {

145 if(
s
==
sLim™
) {

146  
TRUE
;

148 
št32_t
 
Ëngth
=(št32_t)(
sLim™
-
s
);

149 if(
»maššgC­ac™y
<
Ëngth
 && !
	`»size
Ö’gth, 
”rÜCode
)) {

150  
FALSE
;

152 
	`u_memıy
(
lim™
, 
s
, 
Ëngth
);

153 
lim™
+=
Ëngth
;

154 
»maššgC­ac™y
-=
Ëngth
;

155 
Ï¡CC
=0;

156 
»Üd”S¹
=
lim™
;

157  
TRUE
;

158 
	}
}

160 
	gReÜd”šgBufãr
::
	$»move
() {

161 
»Üd”S¹
=
lim™
=
¡¬t
;

162 
»maššgC­ac™y
=
¡r
.
	`g‘C­ac™y
();

163 
Ï¡CC
=0;

164 
	}
}

166 
	gReÜd”šgBufãr
::
	$»moveSuffix
(
št32_t
 
suffixL’gth
) {

167 if(
suffixL’gth
<(
lim™
-
¡¬t
)) {

168 
lim™
-=
suffixL’gth
;

169 
»maššgC­ac™y
+=
suffixL’gth
;

171 
lim™
=
¡¬t
;

172 
»maššgC­ac™y
=
¡r
.
	`g‘C­ac™y
();

174 
Ï¡CC
=0;

175 
»Üd”S¹
=
lim™
;

176 
	}
}

178 
UBoŞ
 
	gReÜd”šgBufãr
::
	$»size
(
št32_t
 
­³ndL’gth
, 
UE¼ÜCode
 &
”rÜCode
) {

179 
št32_t
 
»Üd”S¹Index
=(št32_t)(
»Üd”S¹
-
¡¬t
);

180 
št32_t
 
Ëngth
=(št32_t)(
lim™
-
¡¬t
);

181 
¡r
.
	`»Ëa£Bufãr
(
Ëngth
);

182 
št32_t
 
ÃwC­ac™y
=
Ëngth
+
­³ndL’gth
;

183 
št32_t
 
doubËC­ac™y
=2*
¡r
.
	`g‘C­ac™y
();

184 if(
ÃwC­ac™y
<
doubËC­ac™y
) {

185 
ÃwC­ac™y
=
doubËC­ac™y
;

187 if(
ÃwC­ac™y
<256) {

188 
ÃwC­ac™y
=256;

190 
¡¬t
=
¡r
.
	`g‘Bufãr
(
ÃwC­ac™y
);

191 if(
¡¬t
==
NULL
) {

193 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

194  
FALSE
;

196 
»Üd”S¹
=
¡¬t
+
»Üd”S¹Index
;

197 
lim™
=
¡¬t
+
Ëngth
;

198 
»maššgC­ac™y
=
¡r
.
	`g‘C­ac™y
()-
Ëngth
;

199  
TRUE
;

200 
	}
}

202 
	gReÜd”šgBufãr
::
	$skP»vious
() {

203 
codePoštLim™
=
codePoštS¹
;

204 
UCh¬
 
c
=*--
codePoštS¹
;

205 if(
	`U16_IS_TRAIL
(
c
è&& 
¡¬t
<
codePoštS¹
 && 
	`U16_IS_LEAD
(*(codePointStart-1))) {

206 --
codePoštS¹
;

208 
	}
}

210 
ušt8_t
 
	gReÜd”šgBufãr
::
	$´eviousCC
() {

211 
codePoštLim™
=
codePoštS¹
;

212 if(
»Üd”S¹
>=
codePoštS¹
) {

215 
UCh¬32
 
c
=*--
codePoštS¹
;

216 if(
c
<
NÜm®iz”2Im¶
::
MIN_CCC_LCCC_CP
) {

220 
UCh¬
 
c2
;

221 if(
	`U16_IS_TRAIL
(
c
è&& 
¡¬t
<
codePoštS¹
 && 
	`U16_IS_LEAD
(
c2
=*(codePointStart-1))) {

222 --
codePoštS¹
;

223 
c
=
	`U16_GET_SUPPLEMENTARY
(
c2
, c);

225  
NÜm®iz”2Im¶
::
	`g‘CCFromYesOrMaybe
(
im¶
.
	`g‘NÜm16
(
c
));

226 
	}
}

230 
	gReÜd”šgBufãr
::
	$š£¹
(
UCh¬32
 
c
, 
ušt8_t
 
cc
) {

231 
	`£tI‹¿tÜ
(), 
	`skP»vious
(); 
	`´eviousCC
()>
cc
;) {}

233 
UCh¬
 *
q
=
lim™
;

234 
UCh¬
 *
r
=
lim™
+=
	`U16_LENGTH
(
c
);

236 *--
r
=*--
q
;

237 } 
codePoštLim™
!=
q
);

238 
	`wr™eCodePošt
(
q
, 
c
);

239 if(
cc
<=1) {

240 
»Üd”S¹
=
r
;

242 
	}
}

246 
	gCªÚI‹rD©a
 : 
public
 
UMemÜy
 {

247 
CªÚI‹rD©a
(
UE¼ÜCode
 &
”rÜCode
);

248 ~
CªÚI‹rD©a
();

249 
addToS¹S‘
(
UCh¬32
 
Üigš
, UCh¬32 
decompL—d
, 
UE¼ÜCode
 &
”rÜCode
);

250 
UTr›2
 *
	gŒ›
;

251 
UVeùÜ
 
	gÿnÚS¹S‘s
;

254 
	gNÜm®iz”2Im¶
::~
	$NÜm®iz”2Im¶
() {

255 
	`ud©a_şo£
(
memÜy
);

256 
	`uŒ›2_şo£
(
nÜmTr›
);

257 
	`UTr›2SšgËtÚ
(
fcdTr›SšgËtÚ
).
	`d–‘eIn¡ªû
();

258 
	`d–‘e
 (
CªÚI‹rD©a
 *)
ÿnÚI‹rD©aSšgËtÚ
.
fIn¡ªû
;

259 
	}
}

261 
UBoŞ
 
U_CALLCONV


262 
	gNÜm®iz”2Im¶
::
	$isAcû±abË
(*
cÚ‹xt
,

264 cÚ¡ 
UD©aInfo
 *
pInfo
) {

266 
pInfo
->
size
>=20 &&

267 
pInfo
->
isBigEndŸn
==
U_IS_BIG_ENDIAN
 &&

268 
pInfo
->
ch¬£tFamy
==
U_CHARSET_FAMILY
 &&

269 
pInfo
->
d©aFÜm©
[0]==0x4e &&

270 
pInfo
->
d©aFÜm©
[1]==0x72 &&

271 
pInfo
->
d©aFÜm©
[2]==0x6d &&

272 
pInfo
->
d©aFÜm©
[3]==0x32 &&

273 
pInfo
->
fÜm©V”siÚ
[0]==1

275 
NÜm®iz”2Im¶
 *
me
=(NÜm®iz”2Im¶ *)
cÚ‹xt
;

276 
	`u´v_memıy
(
me
->
d©aV”siÚ
, 
pInfo
->dataVersion, 4);

277  
TRUE
;

279  
FALSE
;

281 
	}
}

284 
	gNÜm®iz”2Im¶
::
	$lßd
(cÚ¡ *
·ckageName
, cÚ¡ *
Çme
, 
UE¼ÜCode
 &
”rÜCode
) {

285 if(
	`U_FAILURE
(
”rÜCode
)) {

288 
memÜy
=
	`ud©a_İ’Choiû
(
·ckageName
, "Äm", 
Çme
, 
isAcû±abË
, 
this
, &
”rÜCode
);

289 if(
	`U_FAILURE
(
”rÜCode
)) {

292 cÚ¡ 
ušt8_t
 *
šBy‹s
=(cÚ¡ ušt8_ˆ*)
	`ud©a_g‘MemÜy
(
memÜy
);

293 cÚ¡ 
št32_t
 *
šIndexes
=(cÚ¡ iÁ32_ˆ*)
šBy‹s
;

294 
št32_t
 
šdexesL’gth
=
šIndexes
[
IX_NORM_TRIE_OFFSET
]/4;

295 if(
šdexesL’gth
<=
IX_MIN_MAYBE_YES
) {

296 
”rÜCode
=
U_INVALID_FORMAT_ERROR
;

300 
mšDecompNoCP
=
šIndexes
[
IX_MIN_DECOMP_NO_CP
];

301 
mšCompNoMaybeCP
=
šIndexes
[
IX_MIN_COMP_NO_MAYBE_CP
];

303 
mšYesNo
=
šIndexes
[
IX_MIN_YES_NO
];

304 
mšNoNo
=
šIndexes
[
IX_MIN_NO_NO
];

305 
lim™NoNo
=
šIndexes
[
IX_LIMIT_NO_NO
];

306 
mšMaybeYes
=
šIndexes
[
IX_MIN_MAYBE_YES
];

308 
št32_t
 
off£t
=
šIndexes
[
IX_NORM_TRIE_OFFSET
];

309 
št32_t
 
ÃxtOff£t
=
šIndexes
[
IX_EXTRA_DATA_OFFSET
];

310 
nÜmTr›
=
	`uŒ›2_İ’FromS”Ÿlized
(
UTRIE2_16_VALUE_BITS
,

311 
šBy‹s
+
off£t
, 
ÃxtOff£t
-off£t, 
NULL
,

312 &
”rÜCode
);

313 if(
	`U_FAILURE
(
”rÜCode
)) {

317 
off£t
=
ÃxtOff£t
;

318 
maybeYesCompos™iÚs
=(cÚ¡ 
ušt16_t
 *)(
šBy‹s
+
off£t
);

319 
exŒaD©a
=
maybeYesCompos™iÚs
+(
MIN_NORMAL_MAYBE_YES
-
mšMaybeYes
);

320 
	}
}

322 
ušt8_t
 
	gNÜm®iz”2Im¶
::
	$g‘T¿CCFromCompYesAndZ”oCC
(cÚ¡ 
UCh¬
 *
ıS¹
, cÚ¡ UCh¬ *
ıLim™
) const {

323 
UCh¬32
 
c
;

324 if(
ıS¹
==(
ıLim™
-1)) {

325 
c
=*
ıS¹
;

327 
c
=
	`U16_GET_SUPPLEMENTARY
(
ıS¹
[0], cpStart[1]);

329 
ušt16_t
 
´evNÜm16
=
	`g‘NÜm16
(
c
);

330 if(
´evNÜm16
<=
mšYesNo
) {

333  (
ušt8_t
)(*
	`g‘M­pšg
(
´evNÜm16
)>>8);

335 
	}
}

337 
U_CDECL_BEGIN


339 
UBoŞ
 
U_CALLCONV


340 
	$’umPrİ”tyS¹sRªge
(cÚ¡ *
cÚ‹xt
, 
UCh¬32
 
¡¬t
, UCh¬32 , 
ušt32_t
 ) {

342 cÚ¡ 
US‘Add”
 *
§
=(cÚ¡ US‘Add” *)
cÚ‹xt
;

343 
§
->
	`add
(§->
£t
, 
¡¬t
);

344  
TRUE
;

345 
	}
}

347 
ušt32_t
 
U_CALLCONV


348 
	$£gm’tS¹”M­³r
(cÚ¡ * , 
ušt32_t
 
v®ue
) {

349  
v®ue
&
CANON_NOT_SEGMENT_STARTER
;

350 
	}
}

352 
U_CDECL_END


355 
	gNÜm®iz”2Im¶
::
	$addPrİ”tyS¹s
(cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 & ) const {

357 
	`uŒ›2_’um
(
nÜmTr›
, 
NULL
, 
’umPrİ”tyS¹sRªge
, 
§
);

360 
UCh¬
 
c
=
Hªgul
::
HANGUL_BASE
; c<Hªgul::
HANGUL_LIMIT
; c+=Hªgul::
JAMO_T_COUNT
) {

361 
§
->
	`add
(§->
£t
, 
c
);

362 
§
->
	`add
(§->
£t
, 
c
+1);

364 
§
->
	`add
(§->
£t
, 
Hªgul
::
HANGUL_LIMIT
);

365 
	}
}

368 
	gNÜm®iz”2Im¶
::
	$addCªÚI‹rPrİ”tyS¹s
(cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 &
”rÜCode
) const {

370 if(
	`’su»CªÚI‹rD©a
(
”rÜCode
)) {

372 
	`uŒ›2_’um
(((
CªÚI‹rD©a
 *)
ÿnÚI‹rD©aSšgËtÚ
.
fIn¡ªû
)->
Œ›
,

373 
£gm’tS¹”M­³r
, 
’umPrİ”tyS¹sRªge
, 
§
);

375 
	}
}

377 cÚ¡ 
UCh¬
 *

378 
	gNÜm®iz”2Im¶
::
	$cİyLowP»fixFromNulT”mš©ed
(cÚ¡ 
UCh¬
 *
¤c
,

379 
UCh¬32
 
mšN“dD©aCP
,

380 
ReÜd”šgBufãr
 *
bufãr
,

381 
UE¼ÜCode
 &
”rÜCode
) const {

387 cÚ¡ 
UCh¬
 *
´evSrc
=
¤c
;

388 
UCh¬
 
c
;

389 (
c
=*
¤c
++)<
mšN“dD©aCP
 && c!=0) {}

392 if(--
¤c
!=
´evSrc
) {

393 if(
bufãr
!=
NULL
) {

394 
bufãr
->
	`­³ndZ”oCC
(
´evSrc
, 
¤c
, 
”rÜCode
);

397  
¤c
;

398 
	}
}

403 cÚ¡ 
UCh¬
 *

404 
	gNÜm®iz”2Im¶
::
	$decompo£
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

405 
ReÜd”šgBufãr
 *
bufãr
,

406 
UE¼ÜCode
 &
”rÜCode
) const {

407 
UCh¬32
 
mšNoCP
=
mšDecompNoCP
;

408 if(
lim™
==
NULL
) {

409 
¤c
=
	`cİyLowP»fixFromNulT”mš©ed
(¤c, 
mšNoCP
, 
bufãr
, 
”rÜCode
);

410 if(
	`U_FAILURE
(
”rÜCode
)) {

411  
¤c
;

413 
lim™
=
	`u_¡rchr
(
¤c
, 0);

416 cÚ¡ 
UCh¬
 *
´evSrc
;

417 
UCh¬32
 
c
=0;

418 
ušt16_t
 
nÜm16
=0;

421 cÚ¡ 
UCh¬
 *
´evBound¬y
=
¤c
;

422 
ušt8_t
 
´evCC
=0;

426 
´evSrc
=
¤c
; src!=
lim™
;) {

427 ifĞ(
c
=*
¤c
)<
mšNoCP
 ||

428 
	`isMo¡DecompYesAndZ”oCC
(
nÜm16
=
	`UTRIE2_GET16_FROM_U16_SINGLE_LEAD
(
nÜmTr›
, 
c
))

430 ++
¤c
;

431 } if(!
	`U16_IS_SURROGATE
(
c
)) {

434 
UCh¬
 
c2
;

435 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

436 if((
¤c
+1)!=
lim™
 && 
	`U16_IS_TRAIL
(
c2
=src[1])) {

437 
c
=
	`U16_GET_SUPPLEMENTARY
(c, 
c2
);

440 if(
´evSrc
<
¤c
 && 
	`U16_IS_LEAD
(
c2
=*(src-1))) {

441 --
¤c
;

442 
c
=
	`U16_GET_SUPPLEMENTARY
(
c2
, c);

445 if(
	`isMo¡DecompYesAndZ”oCC
(
nÜm16
=
	`g‘NÜm16
(
c
))) {

446 
¤c
+=
	`U16_LENGTH
(
c
);

453 if(
¤c
!=
´evSrc
) {

454 if(
bufãr
!=
NULL
) {

455 if(!
bufãr
->
	`­³ndZ”oCC
(
´evSrc
, 
¤c
, 
”rÜCode
)) {

459 
´evCC
=0;

460 
´evBound¬y
=
¤c
;

463 if(
¤c
==
lim™
) {

468 
¤c
+=
	`U16_LENGTH
(
c
);

469 if(
bufãr
!=
NULL
) {

470 if(!
	`decompo£
(
c
, 
nÜm16
, *
bufãr
, 
”rÜCode
)) {

474 if(
	`isDecompYes
(
nÜm16
)) {

475 
ušt8_t
 
cc
=
	`g‘CCFromYesOrMaybe
(
nÜm16
);

476 if(
´evCC
<=
cc
 || cc==0) {

477 
´evCC
=
cc
;

478 if(
cc
<=1) {

479 
´evBound¬y
=
¤c
;

484  
´evBound¬y
;

487  
¤c
;

488 
	}
}

494 
UBoŞ
 
	gNÜm®iz”2Im¶
::
	$decompo£ShÜt
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

495 
ReÜd”šgBufãr
 &
bufãr
,

496 
UE¼ÜCode
 &
”rÜCode
) const {

497 
¤c
<
lim™
) {

498 
UCh¬32
 
c
;

499 
ušt16_t
 
nÜm16
;

500 
	`UTRIE2_U16_NEXT16
(
nÜmTr›
, 
¤c
, 
lim™
, 
c
, 
nÜm16
);

501 if(!
	`decompo£
(
c
, 
nÜm16
, 
bufãr
, 
”rÜCode
)) {

502  
FALSE
;

505  
TRUE
;

506 
	}
}

508 
UBoŞ
 
	gNÜm®iz”2Im¶
::
	$decompo£
(
UCh¬32
 
c
, 
ušt16_t
 
nÜm16
,

509 
ReÜd”šgBufãr
 &
bufãr
,

510 
UE¼ÜCode
 &
”rÜCode
) const {

514 if(
	`isDecompYes
(
nÜm16
)) {

516  
bufãr
.
	`­³nd
(
c
, 
	`g‘CCFromYesOrMaybe
(
nÜm16
), 
”rÜCode
);

517 } if(
	`isHªgul
(
nÜm16
)) {

519 
UCh¬
 
jamos
[3];

520  
bufãr
.
	`­³ndZ”oCC
(
jamos
, jamos+
Hªgul
::
	`decompo£
(
c
, jamos), 
”rÜCode
);

521 } if(
	`isDecompNoAlgÜ™hmic
(
nÜm16
)) {

522 
c
=
	`m­AlgÜ™hmic
(c, 
nÜm16
);

523 
nÜm16
=
	`g‘NÜm16
(
c
);

526 cÚ¡ 
ušt16_t
 *
m­pšg
=
	`g‘M­pšg
(
nÜm16
);

527 
ušt16_t
 
fœ¡Un™
=*
m­pšg
++;

528 
št32_t
 
Ëngth
=
fœ¡Un™
&
MAPPING_LENGTH_MASK
;

529 
ušt8_t
 
ËadCC
, 
ŒaCC
;

530 
ŒaCC
=(
ušt8_t
)(
fœ¡Un™
>>8);

531 if(
fœ¡Un™
&
MAPPING_HAS_CCC_LCCC_WORD
) {

532 
ËadCC
=(
ušt8_t
)(*
m­pšg
++>>8);

534 
ËadCC
=0;

536  
bufãr
.
	`­³nd
((cÚ¡ 
UCh¬
 *)
m­pšg
, 
Ëngth
, 
ËadCC
, 
ŒaCC
, 
”rÜCode
);

539 
	}
}

541 cÚ¡ 
UCh¬
 *

542 
	gNÜm®iz”2Im¶
::
	$g‘Decompos™iÚ
(
UCh¬32
 
c
, 
UCh¬
 
bufãr
[4], 
št32_t
 &
Ëngth
) const {

543 cÚ¡ 
UCh¬
 *
decomp
=
NULL
;

544 
ušt16_t
 
nÜm16
;

546 if(
c
<
mšDecompNoCP
 || 
	`isDecompYes
(
nÜm16
=
	`g‘NÜm16
(c))) {

548  
decomp
;

549 } if(
	`isHªgul
(
nÜm16
)) {

551 
Ëngth
=
Hªgul
::
	`decompo£
(
c
, 
bufãr
);

552  
bufãr
;

553 } if(
	`isDecompNoAlgÜ™hmic
(
nÜm16
)) {

554 
c
=
	`m­AlgÜ™hmic
(c, 
nÜm16
);

555 
decomp
=
bufãr
;

556 
Ëngth
=0;

557 
	`U16_APPEND_UNSAFE
(
bufãr
, 
Ëngth
, 
c
);

560 cÚ¡ 
ušt16_t
 *
m­pšg
=
	`g‘M­pšg
(
nÜm16
);

561 
ušt16_t
 
fœ¡Un™
=*
m­pšg
++;

562 
Ëngth
=
fœ¡Un™
&
MAPPING_LENGTH_MASK
;

563 if(
fœ¡Un™
&
MAPPING_HAS_CCC_LCCC_WORD
) {

564 ++
m­pšg
;

566  (cÚ¡ 
UCh¬
 *)
m­pšg
;

569 
	}
}

571 
	gNÜm®iz”2Im¶
::
	$decompo£AndAµ’d
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

572 
UBoŞ
 
doDecompo£
,

573 
ReÜd”šgBufãr
 &
bufãr
,

574 
UE¼ÜCode
 &
”rÜCode
) const {

575 if(
doDecompo£
) {

576 
	`decompo£
(
¤c
, 
lim™
, &
bufãr
, 
”rÜCode
);

580 
FÜw¬dUTr›2SŒšgI‹¿tÜ
 
	`™”
(
nÜmTr›
, 
¤c
, 
lim™
);

581 
ušt8_t
 
fœ¡CC
, 
´evCC
, 
cc
;

582 
fœ¡CC
=
´evCC
=
cc
=
	`g‘CC
(
™”
.
	`Ãxt16
());

583 
cc
!=0) {

584 
´evCC
=
cc
;

585 
cc
=
	`g‘CC
(
™”
.
	`Ãxt16
());

587 
bufãr
.
	`­³nd
(
¤c
, (
št32_t
)(
™”
.
codePoštS¹
-¤c), 
fœ¡CC
, 
´evCC
, 
”rÜCode
) &&

588 
bufãr
.
	`­³ndZ”oCC
(
™”
.
codePoštS¹
, 
lim™
, 
”rÜCode
);

589 
	}
}

594 
UBoŞ
 
	gNÜm®iz”2Im¶
::
	$hasDecompBound¬y
(
UCh¬32
 
c
, 
UBoŞ
 
befÜe
) const {

596 if(
c
<
mšDecompNoCP
) {

597  
TRUE
;

599 
ušt16_t
 
nÜm16
=
	`g‘NÜm16
(
c
);

600 if(
	`isHªgul
(
nÜm16
è|| 
	`isDecompYesAndZ”oCC
(norm16)) {

601  
TRUE
;

602 } if(
nÜm16
>
MIN_NORMAL_MAYBE_YES
) {

603  
FALSE
;

604 } if(
	`isDecompNoAlgÜ™hmic
(
nÜm16
)) {

605 
c
=
	`m­AlgÜ™hmic
(c, 
nÜm16
);

608 cÚ¡ 
ušt16_t
 *
m­pšg
=
	`g‘M­pšg
(
nÜm16
);

609 
ušt16_t
 
fœ¡Un™
=*
m­pšg
++;

610 if((
fœ¡Un™
&
MAPPING_LENGTH_MASK
)==0) {

611  
FALSE
;

613 if(!
befÜe
) {

616 if(
fœ¡Un™
>0x1ff) {

617  
FALSE
;

619 if(
fœ¡Un™
<=0xff) {

620  
TRUE
;

625  (
fœ¡Un™
&
MAPPING_HAS_CCC_LCCC_WORD
)==0 || (*
m­pšg
&0xff00)==0;

628 
	}
}

652 
št32_t
 
	gNÜm®iz”2Im¶
::
	$combše
(cÚ¡ 
ušt16_t
 *
li¡
, 
UCh¬32
 
Œa
) {

653 
ušt16_t
 
key1
, 
fœ¡Un™
;

654 if(
Œa
<
COMP_1_TRAIL_LIMIT
) {

657 
key1
=(
ušt16_t
)(
Œa
<<1);

658 
key1
>(
fœ¡Un™
=*
li¡
)) {

659 
li¡
+=2+(
fœ¡Un™
&
COMP_1_TRIPLE
);

661 if(
key1
==(
fœ¡Un™
&
COMP_1_TRAIL_MASK
)) {

662 if(
fœ¡Un™
&
COMP_1_TRIPLE
) {

663  ((
št32_t
)
li¡
[1]<<16)|list[2];

665  
li¡
[1];

671 
key1
=(
ušt16_t
)(
COMP_1_TRAIL_LIMIT
+

672 (((
Œa
>>
COMP_1_TRAIL_SHIFT
))&

673 ~
COMP_1_TRIPLE
));

674 
ušt16_t
 
key2
=(ušt16_t)(
Œa
<<
COMP_2_TRAIL_SHIFT
);

675 
ušt16_t
 
£cÚdUn™
;

677 if(
key1
>(
fœ¡Un™
=*
li¡
)) {

678 
li¡
+=2+(
fœ¡Un™
&
COMP_1_TRIPLE
);

679 } if(
key1
==(
fœ¡Un™
&
COMP_1_TRAIL_MASK
)) {

680 if(
key2
>(
£cÚdUn™
=
li¡
[1])) {

681 if(
fœ¡Un™
&
COMP_1_LAST_TUPLE
) {

684 
li¡
+=3;

686 } if(
key2
==(
£cÚdUn™
&
COMP_2_TRAIL_MASK
)) {

687  ((
št32_t
)(
£cÚdUn™
&~
COMP_2_TRAIL_MASK
)<<16)|
li¡
[2];

697 
	}
}

703 
	gNÜm®iz”2Im¶
::
	$addCompos™es
(cÚ¡ 
ušt16_t
 *
li¡
, 
UnicodeS‘
 &
£t
) const {

704 
ušt16_t
 
fœ¡Un™
;

705 
št32_t
 
compos™eAndFwd
;

707 
fœ¡Un™
=*
li¡
;

708 if((
fœ¡Un™
&
COMP_1_TRIPLE
)==0) {

709 
compos™eAndFwd
=
li¡
[1];

710 
li¡
+=2;

712 
compos™eAndFwd
=(((
št32_t
)
li¡
[1]&~
COMP_2_TRAIL_MASK
)<<16)|list[2];

713 
li¡
+=3;

715 
UCh¬32
 
compos™e
=
compos™eAndFwd
>>1;

716 if((
compos™eAndFwd
&1)!=0) {

717 
	`addCompos™es
(
	`g‘Compos™iÚsLi¡FÜCompos™e
(
	`g‘NÜm16
(
compos™e
)), 
£t
);

719 
£t
.
	`add
(
compos™e
);

720 } (
fœ¡Un™
&
COMP_1_LAST_TUPLE
)==0);

721 
	}
}

733 
	gNÜm®iz”2Im¶
::
	$»compo£
(
ReÜd”šgBufãr
 &
bufãr
, 
št32_t
 
»compo£S¹Index
,

734 
UBoŞ
 
ÚlyCÚtiguous
) const {

735 
UCh¬
 *
p
=
bufãr
.
	`g‘S¹
()+
»compo£S¹Index
;

736 
UCh¬
 *
lim™
=
bufãr
.
	`g‘Lim™
();

737 if(
p
==
lim™
) {

741 
UCh¬
 *
¡¬‹r
, *
pRemove
, *
q
, *
r
;

742 cÚ¡ 
ušt16_t
 *
compos™iÚsLi¡
;

743 
UCh¬32
 
c
, 
compos™eAndFwd
;

744 
ušt16_t
 
nÜm16
;

745 
ušt8_t
 
cc
, 
´evCC
;

746 
UBoŞ
 
¡¬‹rIsSuµËm’ry
;

750 
compos™iÚsLi¡
=
NULL
;

751 
¡¬‹r
=
NULL
;

752 
¡¬‹rIsSuµËm’ry
=
FALSE
;

753 
´evCC
=0;

756 
	`UTRIE2_U16_NEXT16
(
nÜmTr›
, 
p
, 
lim™
, 
c
, 
nÜm16
);

757 
cc
=
	`g‘CCFromYesOrMaybe
(
nÜm16
);

759 
	`isMaybe
(
nÜm16
) &&

761 
compos™iÚsLi¡
!=
NULL
 &&

763 (
´evCC
<
cc
 ||…revCC==0)

765 if(
	`isJamoVT
(
nÜm16
)) {

767 if(
c
<
Hªgul
::
JAMO_T_BASE
) {

769 
UCh¬
 
´ev
=(UCh¬)(*
¡¬‹r
-
Hªgul
::
JAMO_L_BASE
);

770 if(
´ev
<
Hªgul
::
JAMO_L_COUNT
) {

771 
pRemove
=
p
-1;

772 
UCh¬
 
syÎabË
=(UChar)

773 (
Hªgul
::
HANGUL_BASE
+

774 (
´ev
*
Hªgul
::
JAMO_V_COUNT
+(
c
-Hªgul::
JAMO_V_BASE
))*

775 
Hªgul
::
JAMO_T_COUNT
);

776 
UCh¬
 
t
;

777 if(
p
!=
lim™
 && (
t
=(
UCh¬
)(*p-
Hªgul
::
JAMO_T_BASE
))<Hªgul::
JAMO_T_COUNT
) {

778 ++
p
;

779 
syÎabË
+=
t
;

781 *
¡¬‹r
=
syÎabË
;

783 
q
=
pRemove
;

784 
r
=
p
;

785 
r
<
lim™
) {

786 *
q
++=*
r
++;

788 
lim™
=
q
;

789 
p
=
pRemove
;

798 if(
p
==
lim™
) {

801 
compos™iÚsLi¡
=
NULL
;

803 } if((
compos™eAndFwd
=
	`combše
(
compos™iÚsLi¡
, 
c
))>=0) {

805 
UCh¬32
 
compos™e
=
compos™eAndFwd
>>1;

808 
pRemove
=
p
-
	`U16_LENGTH
(
c
);

809 if(
¡¬‹rIsSuµËm’ry
) {

810 if(
	`U_IS_SUPPLEMENTARY
(
compos™e
)) {

812 
¡¬‹r
[0]=
	`U16_LEAD
(
compos™e
);

813 
¡¬‹r
[1]=
	`U16_TRAIL
(
compos™e
);

815 *
¡¬‹r
=(
UCh¬
)
compos™e
;

818 
¡¬‹rIsSuµËm’ry
=
FALSE
;

819 
q
=
¡¬‹r
+1;

820 
r
=
q
+1;

821 
r
<
pRemove
) {

822 *
q
++=*
r
++;

824 --
pRemove
;

826 } if(
	`U_IS_SUPPLEMENTARY
(
compos™e
)) {

829 
¡¬‹rIsSuµËm’ry
=
TRUE
;

830 ++
¡¬‹r
;

831 
q
=
pRemove
;

832 
r
=++
pRemove
;

833 
¡¬‹r
<
q
) {

834 *--
r
=*--
q
;

836 *
¡¬‹r
=
	`U16_TRAIL
(
compos™e
);

837 *--
¡¬‹r
=
	`U16_LEAD
(
compos™e
);

840 *
¡¬‹r
=(
UCh¬
)
compos™e
;

844 if(
pRemove
<
p
) {

845 
q
=
pRemove
;

846 
r
=
p
;

847 
r
<
lim™
) {

848 *
q
++=*
r
++;

850 
lim™
=
q
;

851 
p
=
pRemove
;

855 if(
p
==
lim™
) {

859 if(
compos™eAndFwd
&1) {

860 
compos™iÚsLi¡
=

861 
	`g‘Compos™iÚsLi¡FÜCompos™e
(
	`g‘NÜm16
(
compos™e
));

863 
compos™iÚsLi¡
=
NULL
;

872 
´evCC
=
cc
;

873 if(
p
==
lim™
) {

878 if(
cc
==0) {

880 if((
compos™iÚsLi¡
=
	`g‘Compos™iÚsLi¡FÜDecompYes
(
nÜm16
))!=
NULL
) {

882 if(
	`U_IS_BMP
(
c
)) {

883 
¡¬‹rIsSuµËm’ry
=
FALSE
;

884 
¡¬‹r
=
p
-1;

886 
¡¬‹rIsSuµËm’ry
=
TRUE
;

887 
¡¬‹r
=
p
-2;

890 } if(
ÚlyCÚtiguous
) {

892 
compos™iÚsLi¡
=
NULL
;

895 
bufãr
.
	`£tReÜd”šgLim™
(
lim™
);

896 
	}
}

901 
UBoŞ


902 
	gNÜm®iz”2Im¶
::
	$compo£
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

903 
UBoŞ
 
ÚlyCÚtiguous
,

904 
UBoŞ
 
doCompo£
,

905 
ReÜd”šgBufãr
 &
bufãr
,

906 
UE¼ÜCode
 &
”rÜCode
) const {

919 cÚ¡ 
UCh¬
 *
´evBound¬y
=
¤c
;

920 
UCh¬32
 
mšNoMaybeCP
=
mšCompNoMaybeCP
;

921 if(
lim™
==
NULL
) {

922 
¤c
=
	`cİyLowP»fixFromNulT”mš©ed
(¤c, 
mšNoMaybeCP
,

923 
doCompo£
 ? &
bufãr
 : 
NULL
,

924 
”rÜCode
);

925 if(
	`U_FAILURE
(
”rÜCode
)) {

926  
FALSE
;

928 if(
´evBound¬y
<
¤c
) {

930 
´evBound¬y
=
¤c
-1;

932 
lim™
=
	`u_¡rchr
(
¤c
, 0);

935 cÚ¡ 
UCh¬
 *
´evSrc
;

936 
UCh¬32
 
c
=0;

937 
ušt16_t
 
nÜm16
=0;

940 
ušt8_t
 
´evCC
=0;

944 
´evSrc
=
¤c
; src!=
lim™
;) {

945 ifĞ(
c
=*
¤c
)<
mšNoMaybeCP
 ||

946 
	`isCompYesAndZ”oCC
(
nÜm16
=
	`UTRIE2_GET16_FROM_U16_SINGLE_LEAD
(
nÜmTr›
, 
c
))

948 ++
¤c
;

949 } if(!
	`U16_IS_SURROGATE
(
c
)) {

952 
UCh¬
 
c2
;

953 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

954 if((
¤c
+1)!=
lim™
 && 
	`U16_IS_TRAIL
(
c2
=src[1])) {

955 
c
=
	`U16_GET_SUPPLEMENTARY
(c, 
c2
);

958 if(
´evSrc
<
¤c
 && 
	`U16_IS_LEAD
(
c2
=*(src-1))) {

959 --
¤c
;

960 
c
=
	`U16_GET_SUPPLEMENTARY
(
c2
, c);

963 if(
	`isCompYesAndZ”oCC
(
nÜm16
=
	`g‘NÜm16
(
c
))) {

964 
¤c
+=
	`U16_LENGTH
(
c
);

971 if(
¤c
!=
´evSrc
) {

972 if(
doCompo£
) {

973 if(!
bufãr
.
	`­³ndZ”oCC
(
´evSrc
, 
¤c
, 
”rÜCode
)) {

977 
´evCC
=0;

979 if(
¤c
==
lim™
) {

983 
´evBound¬y
=
¤c
-1;

984 ifĞ
	`U16_IS_TRAIL
(*
´evBound¬y
è&& 
´evSrc
<prevBoundary &&

985 
	`U16_IS_LEAD
(*(
´evBound¬y
-1))

987 --
´evBound¬y
;

990 
´evSrc
=
¤c
;

991 } if(
¤c
==
lim™
) {

995 
¤c
+=
	`U16_LENGTH
(
c
);

1003 if(
	`isJamoVT
(
nÜm16
è&& 
´evBound¬y
!=
´evSrc
) {

1004 
UCh¬
 
´ev
=*(
´evSrc
-1);

1005 
UBoŞ
 
ÃedToDecompo£
=
FALSE
;

1006 if(
c
<
Hªgul
::
JAMO_T_BASE
) {

1008 
´ev
=(
UCh¬
)Õ»v-
Hªgul
::
JAMO_L_BASE
);

1009 if(
´ev
<
Hªgul
::
JAMO_L_COUNT
) {

1010 if(!
doCompo£
) {

1011  
FALSE
;

1013 
UCh¬
 
syÎabË
=(UChar)

1014 (
Hªgul
::
HANGUL_BASE
+

1015 (
´ev
*
Hªgul
::
JAMO_V_COUNT
+(
c
-Hªgul::
JAMO_V_BASE
))*

1016 
Hªgul
::
JAMO_T_COUNT
);

1017 
UCh¬
 
t
;

1018 if(
¤c
!=
lim™
 && (
t
=(
UCh¬
)(*¤c-
Hªgul
::
JAMO_T_BASE
))<Hªgul::
JAMO_T_COUNT
) {

1019 ++
¤c
;

1020 
syÎabË
+=
t
;

1021 
´evBound¬y
=
¤c
;

1022 
bufãr
.
	`£tLa¡Ch¬
(
syÎabË
);

1034 
ÃedToDecompo£
=
TRUE
;

1036 } if(
Hªgul
::
	`isHªgulW™houtJamoT
(
´ev
)) {

1039 if(!
doCompo£
) {

1040  
FALSE
;

1042 
bufãr
.
	`£tLa¡Ch¬
((
UCh¬
)(
´ev
+
c
-
Hªgul
::
JAMO_T_BASE
));

1043 
´evBound¬y
=
¤c
;

1046 if(!
ÃedToDecompo£
) {

1048 if(
doCompo£
) {

1049 if(!
bufãr
.
	`­³ndBMP
((
UCh¬
)
c
, 0, 
”rÜCode
)) {

1053 
´evCC
=0;

1080 if(
nÜm16
>=
MIN_YES_YES_WITH_CC
) {

1081 
ušt8_t
 
cc
=(ušt8_t)
nÜm16
;

1082 ifĞ
ÚlyCÚtiguous
 &&

1083 (
doCompo£
 ? 
bufãr
.
	`g‘La¡CC
(è: 
´evCC
)==0 &&

1084 
´evBound¬y
<
´evSrc
 &&

1092 
	`g‘T¿CCFromCompYesAndZ”oCC
(
´evBound¬y
, 
´evSrc
)>
cc


1095 if(!
doCompo£
) {

1096  
FALSE
;

1098 } if(
doCompo£
) {

1099 if(!
bufãr
.
	`­³nd
(
c
, 
cc
, 
”rÜCode
)) {

1103 } if(
´evCC
<=
cc
) {

1104 
´evCC
=
cc
;

1107  
FALSE
;

1109 } if(!
doCompo£
 && !
	`isMaybeOrNÚZ”oCC
(
nÜm16
)) {

1110  
FALSE
;

1128 if(
	`hasCompBound¬yBefÜe
(
c
, 
nÜm16
)) {

1129 
´evBound¬y
=
´evSrc
;

1130 } if(
doCompo£
) {

1131 
bufãr
.
	`»moveSuffix
((
št32_t
)(
´evSrc
-
´evBound¬y
));

1136 
¤c
=(
UCh¬
 *)
	`fšdNextCompBound¬y
(¤c, 
lim™
);

1139 
št32_t
 
»compo£S¹Index
=
bufãr
.
	`Ëngth
();

1140 if(!
	`decompo£ShÜt
(
´evBound¬y
, 
¤c
, 
bufãr
, 
”rÜCode
)) {

1143 
	`»compo£
(
bufãr
, 
»compo£S¹Index
, 
ÚlyCÚtiguous
);

1144 if(!
doCompo£
) {

1145 if(!
bufãr
.
	`equ®s
(
´evBound¬y
, 
¤c
)) {

1146  
FALSE
;

1148 
bufãr
.
	`»move
();

1149 
´evCC
=0;

1153 
´evBound¬y
=
¤c
;

1155  
TRUE
;

1156 
	}
}

1161 cÚ¡ 
UCh¬
 *

1162 
	gNÜm®iz”2Im¶
::
	$compo£QuickCheck
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

1163 
UBoŞ
 
ÚlyCÚtiguous
,

1164 
UNÜm®iz©iÚCheckResuÉ
 *
pQCResuÉ
) const {

1169 cÚ¡ 
UCh¬
 *
´evBound¬y
=
¤c
;

1170 
UCh¬32
 
mšNoMaybeCP
=
mšCompNoMaybeCP
;

1171 if(
lim™
==
NULL
) {

1172 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

1173 
¤c
=
	`cİyLowP»fixFromNulT”mš©ed
(¤c, 
mšNoMaybeCP
, 
NULL
, 
”rÜCode
);

1174 if(
´evBound¬y
<
¤c
) {

1176 
´evBound¬y
=
¤c
-1;

1178 
lim™
=
	`u_¡rchr
(
¤c
, 0);

1181 cÚ¡ 
UCh¬
 *
´evSrc
;

1182 
UCh¬32
 
c
=0;

1183 
ušt16_t
 
nÜm16
=0;

1184 
ušt8_t
 
´evCC
=0;

1188 
´evSrc
=
¤c
;;) {

1189 if(
¤c
==
lim™
) {

1190  
¤c
;

1192 ifĞ(
c
=*
¤c
)<
mšNoMaybeCP
 ||

1193 
	`isCompYesAndZ”oCC
(
nÜm16
=
	`UTRIE2_GET16_FROM_U16_SINGLE_LEAD
(
nÜmTr›
, 
c
))

1195 ++
¤c
;

1196 } if(!
	`U16_IS_SURROGATE
(
c
)) {

1199 
UCh¬
 
c2
;

1200 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

1201 if((
¤c
+1)!=
lim™
 && 
	`U16_IS_TRAIL
(
c2
=src[1])) {

1202 
c
=
	`U16_GET_SUPPLEMENTARY
(c, 
c2
);

1205 if(
´evSrc
<
¤c
 && 
	`U16_IS_LEAD
(
c2
=*(src-1))) {

1206 --
¤c
;

1207 
c
=
	`U16_GET_SUPPLEMENTARY
(
c2
, c);

1210 if(
	`isCompYesAndZ”oCC
(
nÜm16
=
	`g‘NÜm16
(
c
))) {

1211 
¤c
+=
	`U16_LENGTH
(
c
);

1217 if(
¤c
!=
´evSrc
) {

1219 
´evBound¬y
=
¤c
-1;

1220 ifĞ
	`U16_IS_TRAIL
(*
´evBound¬y
è&& 
´evSrc
<prevBoundary &&

1221 
	`U16_IS_LEAD
(*(
´evBound¬y
-1))

1223 --
´evBound¬y
;

1225 
´evCC
=0;

1227 
´evSrc
=
¤c
;

1230 
¤c
+=
	`U16_LENGTH
(
c
);

1236 if(
	`isMaybeOrNÚZ”oCC
(
nÜm16
)) {

1237 
ušt8_t
 
cc
=
	`g‘CCFromYesOrMaybe
(
nÜm16
);

1238 ifĞ
ÚlyCÚtiguous
 &&

1239 
cc
!=0 &&

1240 
´evCC
==0 &&

1241 
´evBound¬y
<
´evSrc
 &&

1249 
	`g‘T¿CCFromCompYesAndZ”oCC
(
´evBound¬y
, 
´evSrc
)>
cc


1252 } if(
´evCC
<=
cc
 || cc==0) {

1253 
´evCC
=
cc
;

1254 if(
nÜm16
<
MIN_YES_YES_WITH_CC
) {

1255 if(
pQCResuÉ
!=
NULL
) {

1256 *
pQCResuÉ
=
UNORM_MAYBE
;

1258  
´evBound¬y
;

1264 if(
pQCResuÉ
!=
NULL
) {

1265 *
pQCResuÉ
=
UNORM_NO
;

1267  
´evBound¬y
;

1269 
	}
}

1271 
	gNÜm®iz”2Im¶
::
	$compo£AndAµ’d
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

1272 
UBoŞ
 
doCompo£
,

1273 
UBoŞ
 
ÚlyCÚtiguous
,

1274 
ReÜd”šgBufãr
 &
bufãr
,

1275 
UE¼ÜCode
 &
”rÜCode
) const {

1276 if(!
bufãr
.
	`isEm±y
()) {

1277 cÚ¡ 
UCh¬
 *
fœ¡S¹”InSrc
=
	`fšdNextCompBound¬y
(
¤c
, 
lim™
);

1278 if(
¤c
!=
fœ¡S¹”InSrc
) {

1279 cÚ¡ 
UCh¬
 *
Ï¡S¹”InDe¡
=
	`fšdP»viousCompBound¬y
(
bufãr
.
	`g‘S¹
(),

1280 
bufãr
.
	`g‘Lim™
());

1281 
UnicodeSŒšg
 
	`middË
(
Ï¡S¹”InDe¡
,

1282 (
št32_t
)(
bufãr
.
	`g‘Lim™
()-
Ï¡S¹”InDe¡
));

1283 
bufãr
.
	`»moveSuffix
((
št32_t
)(bufãr.
	`g‘Lim™
()-
Ï¡S¹”InDe¡
));

1284 
middË
.
	`­³nd
(
¤c
, (
št32_t
)(
fœ¡S¹”InSrc
-src));

1285 cÚ¡ 
UCh¬
 *
middËS¹
=
middË
.
	`g‘Bufãr
();

1286 
	`compo£
(
middËS¹
, middËS¹+
middË
.
	`Ëngth
(), 
ÚlyCÚtiguous
,

1287 
TRUE
, 
bufãr
, 
”rÜCode
);

1288 if(
	`U_FAILURE
(
”rÜCode
)) {

1291 
¤c
=
fœ¡S¹”InSrc
;

1294 if(
doCompo£
) {

1295 
	`compo£
(
¤c
, 
lim™
, 
ÚlyCÚtiguous
, 
TRUE
, 
bufãr
, 
”rÜCode
);

1297 
bufãr
.
	`­³ndZ”oCC
(
¤c
, 
lim™
, 
”rÜCode
);

1299 
	}
}

1308 
UBoŞ
 
	gNÜm®iz”2Im¶
::
	$hasCompBound¬yBefÜe
(
UCh¬32
 
c
, 
ušt16_t
 
nÜm16
) const {

1310 if(
	`isCompYesAndZ”oCC
(
nÜm16
)) {

1311  
TRUE
;

1312 } if(
	`isMaybeOrNÚZ”oCC
(
nÜm16
)) {

1313  
FALSE
;

1314 } if(
	`isDecompNoAlgÜ™hmic
(
nÜm16
)) {

1315 
c
=
	`m­AlgÜ™hmic
(c, 
nÜm16
);

1316 
nÜm16
=
	`g‘NÜm16
(
c
);

1319 cÚ¡ 
ušt16_t
 *
m­pšg
=
	`g‘M­pšg
(
nÜm16
);

1320 
ušt16_t
 
fœ¡Un™
=*
m­pšg
++;

1321 if((
fœ¡Un™
&
MAPPING_LENGTH_MASK
)==0) {

1322  
FALSE
;

1324 if((
fœ¡Un™
&
MAPPING_HAS_CCC_LCCC_WORD
è&& (*
m­pšg
++&0xff00)) {

1325  
FALSE
;

1327 
št32_t
 
i
=0;

1328 
UCh¬32
 
c
;

1329 
	`U16_NEXT_UNSAFE
(
m­pšg
, 
i
, 
c
);

1330  
	`isCompYesAndZ”oCC
(
	`g‘NÜm16
(
c
));

1333 
	}
}

1335 
UBoŞ
 
	gNÜm®iz”2Im¶
::
	$hasCompBound¬yAá”
(
UCh¬32
 
c
, 
UBoŞ
 
ÚlyCÚtiguous
, UBoŞ 
‹¡IÃ¹
) const {

1337 
ušt16_t
 
nÜm16
=
	`g‘NÜm16
(
c
);

1338 if(
	`isIÃ¹
(
nÜm16
)) {

1339  
TRUE
;

1340 } if(
nÜm16
<=
mšYesNo
) {

1343  
	`isHªgul
(
nÜm16
è&& !
Hªgul
::
	`isHªgulW™houtJamoT
((
UCh¬
)
c
);

1344 } if(
nÜm16
>ğ(
‹¡IÃ¹
 ? 
mšNoNo
 : 
mšMaybeYes
)) {

1345  
FALSE
;

1346 } if(
	`isDecompNoAlgÜ™hmic
(
nÜm16
)) {

1347 
c
=
	`m­AlgÜ™hmic
(c, 
nÜm16
);

1352 cÚ¡ 
ušt16_t
 *
m­pšg
=
	`g‘M­pšg
(
nÜm16
);

1353 
ušt16_t
 
fœ¡Un™
=*
m­pšg
;

1359 (
fœ¡Un™
&
MAPPING_LENGTH_MASK
)!=0 &&

1360 (
fœ¡Un™
&(
MAPPING_PLUS_COMPOSITION_LIST
|
MAPPING_NO_COMP_BOUNDARY_AFTER
))==0 &&

1361 (!
ÚlyCÚtiguous
 || 
fœ¡Un™
<=0x1ff);

1364 
	}
}

1366 cÚ¡ 
UCh¬
 *
	gNÜm®iz”2Im¶
::
	$fšdP»viousCompBound¬y
(cÚ¡ 
UCh¬
 *
¡¬t
, cÚ¡ UCh¬ *
p
) const {

1367 
Backw¬dUTr›2SŒšgI‹¿tÜ
 
	`™”
(
nÜmTr›
, 
¡¬t
, 
p
);

1368 
ušt16_t
 
nÜm16
;

1370 
nÜm16
=
™”
.
	`´evious16
();

1371 } !
	`hasCompBound¬yBefÜe
(
™”
.
codePošt
, 
nÜm16
));

1374  
™”
.
codePoštS¹
;

1375 
	}
}

1377 cÚ¡ 
UCh¬
 *
	gNÜm®iz”2Im¶
::
	$fšdNextCompBound¬y
(cÚ¡ 
UCh¬
 *
p
, cÚ¡ UCh¬ *
lim™
) const {

1378 
FÜw¬dUTr›2SŒšgI‹¿tÜ
 
	`™”
(
nÜmTr›
, 
p
, 
lim™
);

1379 
ušt16_t
 
nÜm16
;

1381 
nÜm16
=
™”
.
	`Ãxt16
();

1382 } !
	`hasCompBound¬yBefÜe
(
™”
.
codePošt
, 
nÜm16
));

1383  
™”
.
codePoštS¹
;

1384 
	}
}

1386 şas 
	cFCDTr›SšgËtÚ
 : 
public
 
UTr›2SšgËtÚ
 {

1387 
public
:

1388 
	$FCDTr›SšgËtÚ
(
Sim¶eSšgËtÚ
 &
s
, 
NÜm®iz”2Im¶
 &
ni
, 
UE¼ÜCode
 &
ec
) :

1389 
	`UTr›2SšgËtÚ
(
s
), 
	`im¶
(
ni
), 
	$”rÜCode
(
ec
) {}

1390 
UTr›2
 *
	$g‘In¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

1391  
UTr›2SšgËtÚ
::
	`g‘In¡ªû
(
ü—‹In¡ªû
, 
this
, 
”rÜCode
);

1392 
	}
}

1393 *
ü—‹In¡ªû
(cÚ¡ *
cÚ‹xt
, 
UE¼ÜCode
 &
”rÜCode
);

1394 
UBoŞ
 
	$¿ngeHªdËr
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt32_t
 
v®ue
) {

1395 if(
v®ue
!=0) {

1396 
im¶
.
	`£tFCD16FromNÜm16
(
¡¬t
, 
’d
, (
ušt16_t
)
v®ue
, 
ÃwFCDTr›
, 
”rÜCode
);

1398  
	`U_SUCCESS
(
”rÜCode
);

1399 
	}
}

1401 
	gNÜm®iz”2Im¶
 &
	gim¶
;

1402 
UTr›2
 *
	gÃwFCDTr›
;

1403 
	gUE¼ÜCode
 &
	g”rÜCode
;

1406 
U_CDECL_BEGIN


1409 
UBoŞ
 
U_CALLCONV


1410 
	$’umRªgeHªdËr
(cÚ¡ *
cÚ‹xt
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt32_t
 
v®ue
) {

1411  ((
FCDTr›SšgËtÚ
 *)
cÚ‹xt
)->
	`¿ngeHªdËr
(
¡¬t
, 
’d
, 
v®ue
);

1412 
	}
}

1416 
UBoŞ
 
U_CALLCONV


1417 
	$’umRªgeOrV®ue
(cÚ¡ *
cÚ‹xt
, 
UCh¬32
 , UCh¬32 , 
ušt32_t
 
v®ue
) {

1418 *((
ušt32_t
 *)
cÚ‹xt
)|=
v®ue
;

1419  
TRUE
;

1420 
	}
}

1422 
U_CDECL_END


1424 *
	gFCDTr›SšgËtÚ
::
	$ü—‹In¡ªû
(cÚ¡ *
cÚ‹xt
, 
UE¼ÜCode
 &
”rÜCode
) {

1425 
FCDTr›SšgËtÚ
 *
me
=(FCDTr›SšgËtÚ *)
cÚ‹xt
;

1426 
me
->
ÃwFCDTr›
=
	`uŒ›2_İ’
(0, 0, &
”rÜCode
);

1427 if(
	`U_SUCCESS
(
”rÜCode
)) {

1428 
	`uŒ›2_’um
(
me
->
im¶
.
	`g‘NÜmTr›
(), 
NULL
, 
’umRªgeHªdËr
, me);

1429 
UCh¬
 
Ëad
=0xd800;†ead<0xdc00; ++lead) {

1430 
ušt32_t
 
ÜedV®ue
=
	`uŒ›2_g‘32
(
me
->
ÃwFCDTr›
, 
Ëad
);

1431 
	`uŒ›2_’umFÜL—dSu¼og©e
(
me
->
ÃwFCDTr›
, 
Ëad
, 
NULL
, 
’umRªgeOrV®ue
, &
ÜedV®ue
);

1432 if(
ÜedV®ue
!=0) {

1437 if(
ÜedV®ue
>0xff) {

1438 
ÜedV®ue
=0x100|(oredValue&0xff);

1440 
	`uŒ›2_£t32FÜL—dSu¼og©eCodeUn™
(
me
->
ÃwFCDTr›
, 
Ëad
, 
ÜedV®ue
, &
”rÜCode
);

1443 
	`uŒ›2_ä“ze
(
me
->
ÃwFCDTr›
, 
UTRIE2_16_VALUE_BITS
, &
”rÜCode
);

1444 if(
	`U_SUCCESS
(
”rÜCode
)) {

1445  
me
->
ÃwFCDTr›
;

1448 
	`uŒ›2_şo£
(
me
->
ÃwFCDTr›
);

1449  
NULL
;

1450 
	}
}

1452 
	gNÜm®iz”2Im¶
::
	$£tFCD16FromNÜm16
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt16_t
 
nÜm16
,

1453 
UTr›2
 *
ÃwFCDTr›
, 
UE¼ÜCode
 &
”rÜCode
) const {

1456 if(
nÜm16
>=
MIN_NORMAL_MAYBE_YES
) {

1457 
nÜm16
&=0xff;

1458 
nÜm16
|=norm16<<8;

1459 } if(
nÜm16
<=
mšYesNo
 || 
mšMaybeYes
<=norm16) {

1462 } if(
lim™NoNo
<=
nÜm16
) {

1463 
št32_t
 
d–
=
nÜm16
-(
mšMaybeYes
-
MAX_DELTA
-1);

1464 if(
¡¬t
==
’d
) {

1465 
¡¬t
+=
d–
;

1466 
nÜm16
=
	`g‘NÜm16
(
¡¬t
);

1470 
UCh¬32
 
c
=
¡¬t
+
d–
;

1471 
	`£tFCD16FromNÜm16
(
c
, c, 
	`g‘NÜm16
(c), 
ÃwFCDTr›
, 
”rÜCode
);

1472 } ++
¡¬t
<=
’d
);

1477 cÚ¡ 
ušt16_t
 *
m­pšg
=
	`g‘M­pšg
(
nÜm16
);

1478 
ušt16_t
 
fœ¡Un™
=*
m­pšg
;

1479 if((
fœ¡Un™
&
MAPPING_LENGTH_MASK
)==0) {

1483 
nÜm16
=0x1ff;

1485 if(
fœ¡Un™
&
MAPPING_HAS_CCC_LCCC_WORD
) {

1486 
nÜm16
=
m­pšg
[1]&0xff00;

1488 
nÜm16
=0;

1490 
nÜm16
|=
fœ¡Un™
>>8;

1493 
	`uŒ›2_£tRªge32
(
ÃwFCDTr›
, 
¡¬t
, 
’d
, 
nÜm16
, 
TRUE
, &
”rÜCode
);

1496 
	}
}

1498 cÚ¡ 
UTr›2
 *
	gNÜm®iz”2Im¶
::
	$g‘FCDTr›
(
UE¼ÜCode
 &
”rÜCode
) const {

1500 
NÜm®iz”2Im¶
 *
me
=
cÚ¡_ÿ¡
<NÜm®iz”2Im¶ *>(
this
);

1501  
	`FCDTr›SšgËtÚ
(
me
->
fcdTr›SšgËtÚ
, *me, 
”rÜCode
).
	`g‘In¡ªû
(errorCode);

1502 
	}
}

1507 cÚ¡ 
UCh¬
 *

1508 
	gNÜm®iz”2Im¶
::
	$makeFCD
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

1509 
ReÜd”šgBufãr
 *
bufãr
,

1510 
UE¼ÜCode
 &
”rÜCode
) const {

1513 cÚ¡ 
UCh¬
 *
´evBound¬y
=
¤c
;

1514 
št32_t
 
´evFCD16
=0;

1515 if(
lim™
==
NULL
) {

1516 
¤c
=
	`cİyLowP»fixFromNulT”mš©ed
(¤c, 
MIN_CCC_LCCC_CP
, 
bufãr
, 
”rÜCode
);

1517 if(
	`U_FAILURE
(
”rÜCode
)) {

1518  
¤c
;

1520 if(
´evBound¬y
<
¤c
) {

1521 
´evBound¬y
=
¤c
;

1524 
´evFCD16
=
	`g‘FCD16FromSšgËL—d
(*(
¤c
-1));

1525 if(
´evFCD16
>1) {

1526 --
´evBound¬y
;

1529 
lim™
=
	`u_¡rchr
(
¤c
, 0);

1538 cÚ¡ 
UTr›2
 *
Œ›
=
	`fcdTr›
();

1540 cÚ¡ 
UCh¬
 *
´evSrc
;

1541 
UCh¬32
 
c
=0;

1542 
ušt16_t
 
fcd16
=0;

1546 
´evSrc
=
¤c
; src!=
lim™
;) {

1547 if((
c
=*
¤c
)<
MIN_CCC_LCCC_CP
) {

1548 
´evFCD16
=~
c
;

1549 ++
¤c
;

1550 } if((
fcd16
=
	`UTRIE2_GET16_FROM_U16_SINGLE_LEAD
(
Œ›
, 
c
))<=0xff) {

1551 
´evFCD16
=
fcd16
;

1552 ++
¤c
;

1553 } if(!
	`U16_IS_SURROGATE
(
c
)) {

1556 
UCh¬
 
c2
;

1557 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

1558 if((
¤c
+1)!=
lim™
 && 
	`U16_IS_TRAIL
(
c2
=src[1])) {

1559 
c
=
	`U16_GET_SUPPLEMENTARY
(c, 
c2
);

1562 if(
´evSrc
<
¤c
 && 
	`U16_IS_LEAD
(
c2
=*(src-1))) {

1563 --
¤c
;

1564 
c
=
	`U16_GET_SUPPLEMENTARY
(
c2
, c);

1567 if((
fcd16
=
	`g‘FCD16
(
c
))<=0xff) {

1568 
´evFCD16
=
fcd16
;

1569 
¤c
+=
	`U16_LENGTH
(
c
);

1576 if(
¤c
!=
´evSrc
) {

1577 if(
bufãr
!=
NULL
 && !bufãr->
	`­³ndZ”oCC
(
´evSrc
, 
¤c
, 
”rÜCode
)) {

1580 if(
¤c
==
lim™
) {

1583 
´evBound¬y
=
¤c
;

1585 if(
´evFCD16
<0) {

1587 
´evFCD16
=
	`g‘FCD16FromSšgËL—d
((
UCh¬
)~prevFCD16);

1588 if(
´evFCD16
>1) {

1589 --
´evBound¬y
;

1592 cÚ¡ 
UCh¬
 *
p
=
¤c
-1;

1593 if(
	`U16_IS_TRAIL
(*
p
è&& 
´evSrc
<°&& 
	`U16_IS_LEAD
(*(p-1))) {

1594 --
p
;

1597 
´evFCD16
=
	`g‘FCD16FromSu¼og©ePaœ
(
p
[0],…[1]);

1600 if(
´evFCD16
>1) {

1601 
´evBound¬y
=
p
;

1605 
´evSrc
=
¤c
;

1606 } if(
¤c
==
lim™
) {

1610 
¤c
+=
	`U16_LENGTH
(
c
);

1613 if((
´evFCD16
&0xff)<=(
fcd16
>>8)) {

1615 if((
fcd16
&0xff)<=1) {

1616 
´evBound¬y
=
¤c
;

1618 if(
bufãr
!=
NULL
 && !bufãr->
	`­³ndZ”oCC
(
c
, 
”rÜCode
)) {

1621 
´evFCD16
=
fcd16
;

1623 } if(
bufãr
==
NULL
) {

1624  
´evBound¬y
;

1631 
bufãr
->
	`»moveSuffix
((
št32_t
)(
´evSrc
-
´evBound¬y
));

1636 
¤c
=
	`fšdNextFCDBound¬y
(¤c, 
lim™
);

1641 if(!
	`decompo£ShÜt
(
´evBound¬y
, 
¤c
, *
bufãr
, 
”rÜCode
)) {

1644 
´evBound¬y
=
¤c
;

1645 
´evFCD16
=0;

1648  
¤c
;

1649 
	}
}

1651 
	gNÜm®iz”2Im¶
::
	$makeFCDAndAµ’d
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

1652 
UBoŞ
 
doMakeFCD
,

1653 
ReÜd”šgBufãr
 &
bufãr
,

1654 
UE¼ÜCode
 &
”rÜCode
) const {

1655 if(!
bufãr
.
	`isEm±y
()) {

1656 cÚ¡ 
UCh¬
 *
fœ¡Bound¬yInSrc
=
	`fšdNextFCDBound¬y
(
¤c
, 
lim™
);

1657 if(
¤c
!=
fœ¡Bound¬yInSrc
) {

1658 cÚ¡ 
UCh¬
 *
Ï¡Bound¬yInDe¡
=
	`fšdP»viousFCDBound¬y
(
bufãr
.
	`g‘S¹
(),

1659 
bufãr
.
	`g‘Lim™
());

1660 
UnicodeSŒšg
 
	`middË
(
Ï¡Bound¬yInDe¡
,

1661 (
št32_t
)(
bufãr
.
	`g‘Lim™
()-
Ï¡Bound¬yInDe¡
));

1662 
bufãr
.
	`»moveSuffix
((
št32_t
)(bufãr.
	`g‘Lim™
()-
Ï¡Bound¬yInDe¡
));

1663 
middË
.
	`­³nd
(
¤c
, (
št32_t
)(
fœ¡Bound¬yInSrc
-src));

1664 cÚ¡ 
UCh¬
 *
middËS¹
=
middË
.
	`g‘Bufãr
();

1665 
	`makeFCD
(
middËS¹
, middËS¹+
middË
.
	`Ëngth
(), &
bufãr
, 
”rÜCode
);

1666 if(
	`U_FAILURE
(
”rÜCode
)) {

1669 
¤c
=
fœ¡Bound¬yInSrc
;

1672 if(
doMakeFCD
) {

1673 
	`makeFCD
(
¤c
, 
lim™
, &
bufãr
, 
”rÜCode
);

1675 
bufãr
.
	`­³ndZ”oCC
(
¤c
, 
lim™
, 
”rÜCode
);

1677 
	}
}

1679 cÚ¡ 
UCh¬
 *
	gNÜm®iz”2Im¶
::
	$fšdP»viousFCDBound¬y
(cÚ¡ 
UCh¬
 *
¡¬t
, cÚ¡ UCh¬ *
p
) const {

1680 
Backw¬dUTr›2SŒšgI‹¿tÜ
 
	`™”
(
	`fcdTr›
(), 
¡¬t
, 
p
);

1681 
ušt16_t
 
fcd16
;

1683 
fcd16
=
™”
.
	`´evious16
();

1684 } 
fcd16
>0xff);

1685  
™”
.
codePoštS¹
;

1686 
	}
}

1688 cÚ¡ 
UCh¬
 *
	gNÜm®iz”2Im¶
::
	$fšdNextFCDBound¬y
(cÚ¡ 
UCh¬
 *
p
, cÚ¡ UCh¬ *
lim™
) const {

1689 
FÜw¬dUTr›2SŒšgI‹¿tÜ
 
	`™”
(
	`fcdTr›
(), 
p
, 
lim™
);

1690 
ušt16_t
 
fcd16
;

1692 
fcd16
=
™”
.
	`Ãxt16
();

1693 } 
fcd16
>0xff);

1694  
™”
.
codePoštS¹
;

1695 
	}
}

1699 
	gCªÚI‹rD©a
::
	$CªÚI‹rD©a
(
UE¼ÜCode
 &
”rÜCode
) :

1700 
	`Œ›
(
	`uŒ›2_İ’
(0, 0, &
”rÜCode
)),

1701 
	$ÿnÚS¹S‘s
(
uhash_d–‘eUObjeù
, 
NULL
, 
”rÜCode
è{
	}
}

1703 
	gCªÚI‹rD©a
::~
	$CªÚI‹rD©a
() {

1704 
	`uŒ›2_şo£
(
Œ›
);

1705 
	}
}

1707 
	gCªÚI‹rD©a
::
	$addToS¹S‘
(
UCh¬32
 
Üigš
, UCh¬32 
decompL—d
, 
UE¼ÜCode
 &
”rÜCode
) {

1708 
ušt32_t
 
ÿnÚV®ue
=
	`uŒ›2_g‘32
(
Œ›
, 
decompL—d
);

1709 if((
ÿnÚV®ue
&(
CANON_HAS_SET
|
CANON_VALUE_MASK
))==0 && 
Üigš
!=0) {

1712 
	`uŒ›2_£t32
(
Œ›
, 
decompL—d
, 
ÿnÚV®ue
|
Üigš
, &
”rÜCode
);

1715 
UnicodeS‘
 *
£t
;

1716 if((
ÿnÚV®ue
&
CANON_HAS_SET
)==0) {

1717 
£t
=
Ãw
 
UnicodeS‘
;

1718 if(
£t
==
NULL
) {

1719 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1722 
UCh¬32
 
fœ¡Origš
=(UCh¬32)(
ÿnÚV®ue
&
CANON_VALUE_MASK
);

1723 
ÿnÚV®ue
=(ÿnÚV®ue&~
CANON_VALUE_MASK
)|
CANON_HAS_SET
|(
ušt32_t
)
ÿnÚS¹S‘s
.
	`size
();

1724 
	`uŒ›2_£t32
(
Œ›
, 
decompL—d
, 
ÿnÚV®ue
, &
”rÜCode
);

1725 
ÿnÚS¹S‘s
.
	`addEËm’t
(
£t
, 
”rÜCode
);

1726 if(
fœ¡Origš
!=0) {

1727 
£t
->
	`add
(
fœ¡Origš
);

1730 
£t
=(
UnicodeS‘
 *)
ÿnÚS¹S‘s
[(
št32_t
)(
ÿnÚV®ue
&
CANON_VALUE_MASK
)];

1732 
£t
->
	`add
(
Üigš
);

1734 
	}
}

1736 şas 
	cCªÚI‹rD©aSšgËtÚ
 {

1737 
	mpublic
:

1738 
	$CªÚI‹rD©aSšgËtÚ
(
Sim¶eSšgËtÚ
 &
s
, 
NÜm®iz”2Im¶
 &
ni
, 
UE¼ÜCode
 &
ec
) :

1739 
	`sšgËtÚ
(
s
), 
	`im¶
(
ni
), 
	$”rÜCode
(
ec
) {}

1740 
CªÚI‹rD©a
 *
	$g‘In¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

1741 *
du¶iÿ‹
;

1742 
CªÚI‹rD©a
 *
š¡ªû
=

1743 (
CªÚI‹rD©a
 *)
sšgËtÚ
.
	`g‘In¡ªû
(
ü—‹In¡ªû
, 
this
, 
du¶iÿ‹
, 
”rÜCode
);

1744 
	`d–‘e
 (
CªÚI‹rD©a
 *)
du¶iÿ‹
;

1745  
š¡ªû
;

1746 
	}
}

1747 *
ü—‹In¡ªû
(cÚ¡ *
cÚ‹xt
, 
UE¼ÜCode
 &
”rÜCode
);

1748 
UBoŞ
 
	$¿ngeHªdËr
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt32_t
 
v®ue
) {

1749 if(
v®ue
!=0) {

1750 
im¶
.
	`makeCªÚI‹rD©aFromNÜm16
(
¡¬t
, 
’d
, (
ušt16_t
)
v®ue
, *
ÃwD©a
, 
”rÜCode
);

1752  
	`U_SUCCESS
(
”rÜCode
);

1753 
	}
}

1755 
	g´iv©e
:

1756 
Sim¶eSšgËtÚ
 &
sšgËtÚ
;

1757 
	gNÜm®iz”2Im¶
 &
	gim¶
;

1758 
CªÚI‹rD©a
 *
	gÃwD©a
;

1759 
	gUE¼ÜCode
 &
	g”rÜCode
;

1762 
U_CDECL_BEGIN


1765 
UBoŞ
 
U_CALLCONV


1766 
	$’umCIDRªgeHªdËr
(cÚ¡ *
cÚ‹xt
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt32_t
 
v®ue
) {

1767  ((
CªÚI‹rD©aSšgËtÚ
 *)
cÚ‹xt
)->
	`¿ngeHªdËr
(
¡¬t
, 
’d
, 
v®ue
);

1768 
	}
}

1770 
U_CDECL_END


1772 *
	gCªÚI‹rD©aSšgËtÚ
::
	$ü—‹In¡ªû
(cÚ¡ *
cÚ‹xt
, 
UE¼ÜCode
 &
”rÜCode
) {

1773 
CªÚI‹rD©aSšgËtÚ
 *
me
=(CªÚI‹rD©aSšgËtÚ *)
cÚ‹xt
;

1774 
me
->
ÃwD©a
=
Ãw
 
	`CªÚI‹rD©a
(
”rÜCode
);

1775 if(
me
->
ÃwD©a
==
NULL
) {

1776 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1777  
NULL
;

1779 if(
	`U_SUCCESS
(
”rÜCode
)) {

1780 
	`uŒ›2_’um
(
me
->
im¶
.
	`g‘NÜmTr›
(), 
NULL
, 
’umCIDRªgeHªdËr
, me);

1781 
	`uŒ›2_ä“ze
(
me
->
ÃwD©a
->
Œ›
, 
UTRIE2_32_VALUE_BITS
, &
”rÜCode
);

1782 if(
	`U_SUCCESS
(
”rÜCode
)) {

1783  
me
->
ÃwD©a
;

1786 
d–‘e
 
me
->
ÃwD©a
;

1787  
NULL
;

1788 
	}
}

1790 
	gNÜm®iz”2Im¶
::
	$makeCªÚI‹rD©aFromNÜm16
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt16_t
 
nÜm16
,

1791 
CªÚI‹rD©a
 &
ÃwD©a
,

1792 
UE¼ÜCode
 &
”rÜCode
) const {

1793 if(
nÜm16
==0 || (
mšYesNo
<òÜm16 &&‚Üm16<
mšNoNo
)) {

1802 
UCh¬32
 
c
=
¡¬t
; c<=
’d
; ++c) {

1803 
ušt32_t
 
ŞdV®ue
=
	`uŒ›2_g‘32
(
ÃwD©a
.
Œ›
, 
c
);

1804 
ušt32_t
 
ÃwV®ue
=
ŞdV®ue
;

1805 if(
nÜm16
>=
mšMaybeYes
) {

1807 
ÃwV®ue
|=
CANON_NOT_SEGMENT_STARTER
;

1808 if(
nÜm16
<
MIN_NORMAL_MAYBE_YES
) {

1809 
ÃwV®ue
|=
CANON_HAS_COMPOSITIONS
;

1811 } if(
nÜm16
<
mšYesNo
) {

1812 
ÃwV®ue
|=
CANON_HAS_COMPOSITIONS
;

1815 
UCh¬32
 
c2
=
c
;

1816 
ušt16_t
 
nÜm16_2
=
nÜm16
;

1817 
lim™NoNo
<=
nÜm16_2
 &&‚Üm16_2<
mšMaybeYes
) {

1818 
c2
=
	`m­AlgÜ™hmic
(c2, 
nÜm16_2
);

1819 
nÜm16_2
=
	`g‘NÜm16
(
c2
);

1821 if(
mšYesNo
<=
nÜm16_2
 &&‚Üm16_2<
lim™NoNo
) {

1823 cÚ¡ 
ušt16_t
 *
m­pšg
=
	`g‘M­pšg
(
nÜm16_2
);

1824 
ušt16_t
 
fœ¡Un™
=*
m­pšg
++;

1825 
št32_t
 
Ëngth
=
fœ¡Un™
&
MAPPING_LENGTH_MASK
;

1826 if((
fœ¡Un™
&
MAPPING_HAS_CCC_LCCC_WORD
)!=0) {

1827 if(
c
==
c2
 && (*
m­pšg
&0xff)!=0) {

1828 
ÃwV®ue
|=
CANON_NOT_SEGMENT_STARTER
;

1830 ++
m­pšg
;

1833 if(
Ëngth
!=0) {

1835 
št32_t
 
i
=0;

1836 
	`U16_NEXT_UNSAFE
(
m­pšg
, 
i
, 
c2
);

1837 
ÃwD©a
.
	`addToS¹S‘
(
c
, 
c2
, 
”rÜCode
);

1841 if(
nÜm16_2
>=
mšNoNo
) {

1842 
i
<
Ëngth
) {

1843 
	`U16_NEXT_UNSAFE
(
m­pšg
, 
i
, 
c2
);

1844 
ušt32_t
 
c2V®ue
=
	`uŒ›2_g‘32
(
ÃwD©a
.
Œ›
, 
c2
);

1845 if((
c2V®ue
&
CANON_NOT_SEGMENT_STARTER
)==0) {

1846 
	`uŒ›2_£t32
(
ÃwD©a
.
Œ›
, 
c2
, 
c2V®ue
|
CANON_NOT_SEGMENT_STARTER
,

1847 &
”rÜCode
);

1854 
ÃwD©a
.
	`addToS¹S‘
(
c
, 
c2
, 
”rÜCode
);

1857 if(
ÃwV®ue
!=
ŞdV®ue
) {

1858 
	`uŒ›2_£t32
(
ÃwD©a
.
Œ›
, 
c
, 
ÃwV®ue
, &
”rÜCode
);

1861 
	}
}

1863 
UBoŞ
 
	gNÜm®iz”2Im¶
::
	$’su»CªÚI‹rD©a
(
UE¼ÜCode
 &
”rÜCode
) const {

1865 
NÜm®iz”2Im¶
 *
me
=
cÚ¡_ÿ¡
<NÜm®iz”2Im¶ *>(
this
);

1866 
	`CªÚI‹rD©aSšgËtÚ
(
me
->
ÿnÚI‹rD©aSšgËtÚ
, *me, 
”rÜCode
).
	`g‘In¡ªû
(errorCode);

1867  
	`U_SUCCESS
(
”rÜCode
);

1868 
	}
}

1870 
št32_t
 
	gNÜm®iz”2Im¶
::
	$g‘CªÚV®ue
(
UCh¬32
 
c
) const {

1871  (
št32_t
)
	`uŒ›2_g‘32
(((
CªÚI‹rD©a
 *)
ÿnÚI‹rD©aSšgËtÚ
.
fIn¡ªû
)->
Œ›
, 
c
);

1872 
	}
}

1874 cÚ¡ 
	gUnicodeS‘
 &
	gNÜm®iz”2Im¶
::
	$g‘CªÚS¹S‘
(
št32_t
 
n
) const {

1875  *(cÚ¡ 
UnicodeS‘
 *)(

1876 ((
CªÚI‹rD©a
 *)
ÿnÚI‹rD©aSšgËtÚ
.
fIn¡ªû
)->
ÿnÚS¹S‘s
[
n
]);

1877 
	}
}

1879 
UBoŞ
 
	gNÜm®iz”2Im¶
::
	$isCªÚSegm’tS¹”
(
UCh¬32
 
c
) const {

1880  
	`g‘CªÚV®ue
(
c
)>=0;

1881 
	}
}

1883 
UBoŞ
 
	gNÜm®iz”2Im¶
::
	$g‘CªÚS¹S‘
(
UCh¬32
 
c
, 
UnicodeS‘
 &
£t
) const {

1884 
št32_t
 
ÿnÚV®ue
=
	`g‘CªÚV®ue
(
c
)&~
CANON_NOT_SEGMENT_STARTER
;

1885 if(
ÿnÚV®ue
==0) {

1886  
FALSE
;

1888 
£t
.
	`ş—r
();

1889 
št32_t
 
v®ue
=
ÿnÚV®ue
&
CANON_VALUE_MASK
;

1890 if((
ÿnÚV®ue
&
CANON_HAS_SET
)!=0) {

1891 
£t
.
	`addAÎ
(
	`g‘CªÚS¹S‘
(
v®ue
));

1892 } if(
v®ue
!=0) {

1893 
£t
.
	`add
(
v®ue
);

1895 if((
ÿnÚV®ue
&
CANON_HAS_COMPOSITIONS
)!=0) {

1896 
ušt16_t
 
nÜm16
=
	`g‘NÜm16
(
c
);

1897 if(
nÜm16
==
JAMO_L
) {

1898 
UCh¬32
 
syÎabË
=

1899 (
UCh¬32
)(
Hªgul
::
HANGUL_BASE
+(
c
-Hªgul::
JAMO_L_BASE
)*Hªgul::
JAMO_VT_COUNT
);

1900 
£t
.
	`add
(
syÎabË
, syÎabË+
Hªgul
::
JAMO_VT_COUNT
-1);

1902 
	`addCompos™es
(
	`g‘Compos™iÚsLi¡
(
nÜm16
), 
£t
);

1905  
TRUE
;

1906 
	}
}

1908 
U_NAMESPACE_END


1912 
U_NAMESPACE_USE


1914 
U_CAPI
 
št32_t
 
U_EXPORT2


1915 
	$unÜm2_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

1916 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

1917 
UE¼ÜCode
 *
pE¼ÜCode
) {

1918 cÚ¡ 
UD©aInfo
 *
pInfo
;

1919 
št32_t
 
h—d”Size
;

1921 cÚ¡ 
ušt8_t
 *
šBy‹s
;

1922 
ušt8_t
 *
outBy‹s
;

1924 cÚ¡ 
št32_t
 *
šIndexes
;

1925 
št32_t
 
šdexes
[
NÜm®iz”2Im¶
::
IX_MIN_MAYBE_YES
+1];

1927 
št32_t
 
i
, 
off£t
, 
ÃxtOff£t
, 
size
;

1930 
h—d”Size
=
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
pE¼ÜCode
);

1931 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1936 
pInfo
=(cÚ¡ 
UD©aInfo
 *)((cÚ¡ *)
šD©a
+4);

1938 
pInfo
->
d©aFÜm©
[0]==0x4e &&

1939 
pInfo
->
d©aFÜm©
[1]==0x72 &&

1940 
pInfo
->
d©aFÜm©
[2]==0x6d &&

1941 
pInfo
->
d©aFÜm©
[3]==0x32 &&

1942 
pInfo
->
fÜm©V”siÚ
[0]==1

1944 
	`ud©a_´štE¼Ü
(
ds
, "unorm2_swap(): data format %02x.%02x.%02x.%02x (format version %02x) is‚ot„ecognized‡s Normalizer2 data\n",

1945 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

1946 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3],

1947 
pInfo
->
fÜm©V”siÚ
[0]);

1948 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

1952 
šBy‹s
=(cÚ¡ 
ušt8_t
 *)
šD©a
+
h—d”Size
;

1953 
outBy‹s
=(
ušt8_t
 *)
outD©a
+
h—d”Size
;

1955 
šIndexes
=(cÚ¡ 
št32_t
 *)
šBy‹s
;

1957 if(
Ëngth
>=0) {

1958 
Ëngth
-=
h—d”Size
;

1959 if(
Ëngth
<(
št32_t
)(
šdexes
)) {

1960 
	`ud©a_´štE¼Ü
(
ds
, "unorm2_swap():oo few bytes (%d‡fter header) for Normalizer2 data\n",

1961 
Ëngth
);

1962 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1968 
i
=0; i<=
NÜm®iz”2Im¶
::
IX_MIN_MAYBE_YES
; ++i) {

1969 
šdexes
[
i
]=
	`ud©a_»adIÁ32
(
ds
, 
šIndexes
[i]);

1973 
size
=
šdexes
[
NÜm®iz”2Im¶
::
IX_TOTAL_SIZE
];

1975 if(
Ëngth
>=0) {

1976 if(
Ëngth
<
size
) {

1977 
	`ud©a_´štE¼Ü
(
ds
, "unorm2_swap():oo few bytes (%d‡fter header) for‡ll of Normalizer2 data\n",

1978 
Ëngth
);

1979 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1984 if(
šBy‹s
!=
outBy‹s
) {

1985 
	`u´v_memıy
(
outBy‹s
, 
šBy‹s
, 
size
);

1988 
off£t
=0;

1991 
ÃxtOff£t
=
šdexes
[
NÜm®iz”2Im¶
::
IX_NORM_TRIE_OFFSET
];

1992 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
, 
ÃxtOff£t
-
off£t
, 
outBy‹s
, 
pE¼ÜCode
);

1993 
off£t
=
ÃxtOff£t
;

1996 
ÃxtOff£t
=
šdexes
[
NÜm®iz”2Im¶
::
IX_EXTRA_DATA_OFFSET
];

1997 
	`uŒ›2_sw­
(
ds
, 
šBy‹s
+
off£t
, 
ÃxtOff£t
-off£t, 
outBy‹s
+off£t, 
pE¼ÜCode
);

1998 
off£t
=
ÃxtOff£t
;

2001 
ÃxtOff£t
=
šdexes
[
NÜm®iz”2Im¶
::
IX_EXTRA_DATA_OFFSET
+1];

2002 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
off£t
, 
ÃxtOff£t
-off£t, 
outBy‹s
+off£t, 
pE¼ÜCode
);

2003 
off£t
=
ÃxtOff£t
;

2005 
	`U_ASSERT
(
off£t
==
size
);

2008  
h—d”Size
+
size
;

2009 
	}
}

	@normalizer2impl.h

17 #iâdeà
__NORMALIZER2IMPL_H__


18 
	#__NORMALIZER2IMPL_H__


	)

20 
	~"unicode/uty³s.h
"

22 #ià!
UCONFIG_NO_NORMALIZATION


24 
	~"unicode/nÜm®iz”2.h
"

25 
	~"unicode/ud©a.h
"

26 
	~"unicode/uni¡r.h
"

27 
	~"unicode/unÜm.h
"

28 
	~"mu‹x.h
"

29 
	~"u£t_imp.h
"

30 
	~"uŒ›2.h
"

32 
U_NAMESPACE_BEGIN


34 
şass
 
	gCªÚI‹rD©a
;

36 şas 
	cHªgul
 {

37 
	mpublic
:

40 
JAMO_L_BASE
=0x1100,

41 
	mJAMO_V_BASE
=0x1161,

42 
	mJAMO_T_BASE
=0x11a7,

44 
	mHANGUL_BASE
=0xac00,

46 
	mJAMO_L_COUNT
=19,

47 
	mJAMO_V_COUNT
=21,

48 
	mJAMO_T_COUNT
=28,

50 
	mJAMO_VT_COUNT
=
JAMO_V_COUNT
*
JAMO_T_COUNT
,

52 
	mHANGUL_COUNT
=
JAMO_L_COUNT
*
JAMO_V_COUNT
*
JAMO_T_COUNT
,

53 
	mHANGUL_LIMIT
=
HANGUL_BASE
+
HANGUL_COUNT


56 
šlše
 
UBoŞ
 
	$isHªgul
(
UCh¬32
 
c
) {

57  
HANGUL_BASE
<=
c
 && c<
HANGUL_LIMIT
;

58 
	}
}

59 
šlše
 
UBoŞ


60 
	$isHªgulW™houtJamoT
(
UCh¬
 
c
) {

61 
c
-=
HANGUL_BASE
;

62  
c
<
HANGUL_COUNT
 && c%
JAMO_T_COUNT
==0;

63 
	}
}

64 
šlše
 
UBoŞ
 
	$isJamoL
(
UCh¬32
 
c
) {

65  (
ušt32_t
)(
c
-
JAMO_L_BASE
)<
JAMO_L_COUNT
;

66 
	}
}

67 
šlše
 
UBoŞ
 
	$isJamoV
(
UCh¬32
 
c
) {

68  (
ušt32_t
)(
c
-
JAMO_V_BASE
)<
JAMO_V_COUNT
;

69 
	}
}

75 
šlše
 
št32_t
 
	$decompo£
(
UCh¬32
 
c
, 
UCh¬
 
bufãr
[3]) {

76 
c
-=
HANGUL_BASE
;

77 
UCh¬32
 
c2
=
c
%
JAMO_T_COUNT
;

78 
c
/=
JAMO_T_COUNT
;

79 
bufãr
[0]=(
UCh¬
)(
JAMO_L_BASE
+
c
/
JAMO_V_COUNT
);

80 
bufãr
[1]=(
UCh¬
)(
JAMO_V_BASE
+
c
%
JAMO_V_COUNT
);

81 if(
c2
==0) {

84 
bufãr
[2]=(
UCh¬
)(
JAMO_T_BASE
+
c2
);

87 
	}
}

88 
	g´iv©e
:

89 
Hªgul
();

92 
şass
 
	gNÜm®iz”2Im¶
;

94 şas 
	cReÜd”šgBufãr
 : 
public
 
UMemÜy
 {

95 
public
:

96 
	$ReÜd”šgBufãr
(cÚ¡ 
NÜm®iz”2Im¶
 &
ni
, 
UnicodeSŒšg
 &
de¡
) :

97 
	`im¶
(
ni
), 
	`¡r
(
de¡
),

98 
	`¡¬t
(
NULL
), 
	`»Üd”S¹
(NULL), 
	`lim™
(NULL),

99 
	`»maššgC­ac™y
(0), 
	$Ï¡CC
(0) {}

100 ~
	$ReÜd”šgBufãr
() {

101 if(
¡¬t
!=
NULL
) {

102 
¡r
.
	`»Ëa£Bufãr
((
št32_t
)(
lim™
-
¡¬t
));

104 
	}
}

105 
UBoŞ
 
š™
(
št32_t
 
de¡C­ac™y
, 
UE¼ÜCode
 &
”rÜCode
);

107 
UBoŞ
 
	$isEm±y
(ècÚ¡ {  
¡¬t
==
lim™
; 
	}
}

108 
št32_t
 
	$Ëngth
(ècÚ¡ {  (
št32_t
)(
lim™
-
¡¬t
); 
	}
}

109 
UCh¬
 *
	$g‘S¹
(è{  
¡¬t
; 
	}
}

110 
UCh¬
 *
	$g‘Lim™
(è{  
lim™
; 
	}
}

111 
ušt8_t
 
	$g‘La¡CC
(ècÚ¡ {  
Ï¡CC
; 
	}
}

113 
UBoŞ
 
	$equ®s
(cÚ¡ 
UCh¬
 *
¡¬t
, cÚ¡ UCh¬ *
lim™
) const;

116 
	$£tLa¡Ch¬
(
UCh¬
 
c
) {

117 *(
lim™
-1)=
c
;

118 
	}
}

120 
UBoŞ
 
	$­³nd
(
UCh¬32
 
c
, 
ušt8_t
 
cc
, 
UE¼ÜCode
 &
”rÜCode
) {

121  (
c
<=0xffff) ?

122 
	`­³ndBMP
((
UCh¬
)
c
, 
cc
, 
”rÜCode
) :

123 
	`­³ndSuµËm’ry
(
c
, 
cc
, 
”rÜCode
);

124 
	}
}

126 
UBoŞ
 
­³nd
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
,

127 
ušt8_t
 
ËadCC
, ušt8_ˆ
ŒaCC
,

128 
UE¼ÜCode
 &
”rÜCode
);

129 
UBoŞ
 
	$­³ndBMP
(
UCh¬
 
c
, 
ušt8_t
 
cc
, 
UE¼ÜCode
 &
”rÜCode
) {

130 if(
»maššgC­ac™y
==0 && !
	`»size
(1, 
”rÜCode
)) {

131  
FALSE
;

133 if(
Ï¡CC
<=
cc
 || cc==0) {

134 *
lim™
++=
c
;

135 
Ï¡CC
=
cc
;

136 if(
cc
<=1) {

137 
»Üd”S¹
=
lim™
;

140 
	`š£¹
(
c
, 
cc
);

142 --
»maššgC­ac™y
;

143  
TRUE
;

144 
	}
}

145 
UBoŞ
 
­³ndZ”oCC
(
UCh¬32
 
c
, 
UE¼ÜCode
 &
”rÜCode
);

146 
UBoŞ
 
­³ndZ”oCC
(cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
sLim™
, 
UE¼ÜCode
 &
”rÜCode
);

147 
»move
();

148 
»moveSuffix
(
št32_t
 
suffixL’gth
);

149 
	$£tReÜd”šgLim™
(
UCh¬
 *
ÃwLim™
) {

150 
»maššgC­ac™y
+=(
št32_t
)(
lim™
-
ÃwLim™
);

151 
»Üd”S¹
=
lim™
=
ÃwLim™
;

152 
Ï¡CC
=0;

153 
	}
}

154 
	g´iv©e
:

168 
UBoŞ
 
­³ndSuµËm’ry
(
UCh¬32
 
c
, 
ušt8_t
 
cc
, 
UE¼ÜCode
 &
”rÜCode
);

169 
š£¹
(
UCh¬32
 
c
, 
ušt8_t
 
cc
);

170 
	$wr™eCodePošt
(
UCh¬
 *
p
, 
UCh¬32
 
c
) {

171 if(
c
<=0xffff) {

172 *
p
=(
UCh¬
)
c
;

174 
p
[0]=
	`U16_LEAD
(
c
);

175 
p
[1]=
	`U16_TRAIL
(
c
);

177 
	}
}

178 
UBoŞ
 
»size
(
št32_t
 
­³ndL’gth
, 
UE¼ÜCode
 &
”rÜCode
);

180 cÚ¡ 
	gNÜm®iz”2Im¶
 &
	gim¶
;

181 
	gUnicodeSŒšg
 &
	g¡r
;

182 
UCh¬
 *
	g¡¬t
, *
	g»Üd”S¹
, *
	glim™
;

183 
št32_t
 
	g»maššgC­ac™y
;

184 
ušt8_t
 
	gÏ¡CC
;

187 
	$£tI‹¿tÜ
(è{ 
codePoštS¹
=
lim™
; 
	}
}

188 
skP»vious
();

189 
ušt8_t
 
´eviousCC
();

191 
UCh¬
 *
	gcodePoštS¹
, *
	gcodePoštLim™
;

194 şas 
	cU_COMMON_API
 
	mNÜm®iz”2Im¶
 : 
public
 
UMemÜy
 {

195 
public
:

196 
	$NÜm®iz”2Im¶
(è: 
	`memÜy
(
NULL
), 
	$nÜmTr›
(
NULL
) {

197 
fcdTr›SšgËtÚ
.
fIn¡ªû
=
NULL
;

198 
ÿnÚI‹rD©aSšgËtÚ
.
fIn¡ªû
=
NULL
;

200 ~
	`NÜm®iz”2Im¶
();

202 
	`lßd
(cÚ¡ *
·ckageName
, cÚ¡ *
Çme
, 
UE¼ÜCode
 &
”rÜCode
);

204 
	$addPrİ”tyS¹s
(cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 &
”rÜCode
) const;

205 
	$addCªÚI‹rPrİ”tyS¹s
(cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 &
”rÜCode
) const;

209 cÚ¡ 
UTr›2
 *
	$g‘NÜmTr›
(ècÚ¡ {  
nÜmTr›
; 
	}
}

210 cÚ¡ 
UTr›2
 *
	$g‘FCDTr›
(
UE¼ÜCode
 &
”rÜCode
) const ;

212 
UBoŞ
 
	$’su»CªÚI‹rD©a
(
UE¼ÜCode
 &
”rÜCode
) const;

214 
ušt16_t
 
	$g‘NÜm16
(
UCh¬32
 
c
ècÚ¡ {  
	`UTRIE2_GET16
(
nÜmTr›
, c); 
	}
}

216 
UNÜm®iz©iÚCheckResuÉ
 
	$g‘CompQuickCheck
(
ušt16_t
 
nÜm16
) const {

217 if(
nÜm16
<
mšNoNo
 || 
MIN_YES_YES_WITH_CC
<=norm16) {

218  
UNORM_YES
;

219 } if(
mšMaybeYes
<=
nÜm16
) {

220  
UNORM_MAYBE
;

222  
UNORM_NO
;

224 
	}
}

225 
UBoŞ
 
	$isCompNo
(
ušt16_t
 
nÜm16
ècÚ¡ {  
mšNoNo
<òÜm16 &&‚Üm16<
mšMaybeYes
; 
	}
}

226 
UBoŞ
 
	$isDecompYes
(
ušt16_t
 
nÜm16
ècÚ¡ { ‚Üm16<
mšYesNo
 || 
mšMaybeYes
<òÜm16; 
	}
}

228 
ušt8_t
 
	$g‘CC
(
ušt16_t
 
nÜm16
) const {

229 if(
nÜm16
>=
MIN_NORMAL_MAYBE_YES
) {

230  (
ušt8_t
)
nÜm16
;

232 if(
nÜm16
<
mšNoNo
 || 
lim™NoNo
<=norm16) {

235  
	`g‘CCFromNoNo
(
nÜm16
);

236 
	}
}

237 
ušt8_t
 
	$g‘CCFromYesOrMaybe
(
ušt16_t
 
nÜm16
) {

238  
nÜm16
>=
MIN_NORMAL_MAYBE_YES
 ? (
ušt8_t
)norm16 : 0;

239 
	}
}

241 
ušt16_t
 
	$g‘FCD16
(
UCh¬32
 
c
ècÚ¡ {  
	`UTRIE2_GET16
(
	`fcdTr›
(), c); 
	}
}

242 
ušt16_t
 
	$g‘FCD16FromSšgËL—d
(
UCh¬
 
c
) const {

243  
	`UTRIE2_GET16_FROM_U16_SINGLE_LEAD
(
	`fcdTr›
(), 
c
);

244 
	}
}

245 
ušt16_t
 
	$g‘FCD16FromSuµËm’ry
(
UCh¬32
 
c
) const {

246  
	`UTRIE2_GET16_FROM_SUPP
(
	`fcdTr›
(), 
c
);

247 
	}
}

248 
ušt16_t
 
	$g‘FCD16FromSu¼og©ePaœ
(
UCh¬
 
c
, UCh¬ 
c2
) const {

249  
	`g‘FCD16FromSuµËm’ry
(
	`U16_GET_SUPPLEMENTARY
(
c
, 
c2
));

250 
	}
}

252 
	$£tFCD16FromNÜm16
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt16_t
 
nÜm16
,

253 
UTr›2
 *
ÃwFCDTr›
, 
UE¼ÜCode
 &
”rÜCode
) const;

255 
	$makeCªÚI‹rD©aFromNÜm16
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt16_t
 
nÜm16
,

256 
CªÚI‹rD©a
 &
ÃwD©a
, 
UE¼ÜCode
 &
”rÜCode
) const;

265 cÚ¡ 
UCh¬
 *
	$g‘Decompos™iÚ
(
UCh¬32
 
c
, 
UCh¬
 
bufãr
[4], 
št32_t
 &
Ëngth
) const;

267 
UBoŞ
 
	$isCªÚSegm’tS¹”
(
UCh¬32
 
c
) const;

268 
UBoŞ
 
	$g‘CªÚS¹S‘
(
UCh¬32
 
c
, 
UnicodeS‘
 &
£t
) const;

271 
MIN_CCC_LCCC_CP
=0x300

272 
	}
};

275 
	gMIN_YES_YES_WITH_CC
=0xff01,

276 
	gJAMO_VT
=0xff00,

277 
	gMIN_NORMAL_MAYBE_YES
=0xfe00,

278 
	gJAMO_L
=1,

279 
	gMAX_DELTA
=0x40

284 
	gIX_NORM_TRIE_OFFSET
,

285 
	gIX_EXTRA_DATA_OFFSET
,

286 
	gIX_RESERVED2_OFFSET
,

287 
	gIX_RESERVED3_OFFSET
,

288 
	gIX_RESERVED4_OFFSET
,

289 
	gIX_RESERVED5_OFFSET
,

290 
	gIX_RESERVED6_OFFSET
,

291 
	gIX_TOTAL_SIZE
,

294 
	gIX_MIN_DECOMP_NO_CP
,

295 
	gIX_MIN_COMP_NO_MAYBE_CP
,

298 
	gIX_MIN_YES_NO
,

299 
	gIX_MIN_NO_NO
,

300 
	gIX_LIMIT_NO_NO
,

301 
	gIX_MIN_MAYBE_YES
,

303 
	gIX_RESERVED14
,

304 
	gIX_RESERVED15
,

305 
	gIX_COUNT


309 
	gMAPPING_HAS_CCC_LCCC_WORD
=0x80,

310 
	gMAPPING_PLUS_COMPOSITION_LIST
=0x40,

311 
	gMAPPING_NO_COMP_BOUNDARY_AFTER
=0x20,

312 
	gMAPPING_LENGTH_MASK
=0x1f

316 
	gCOMP_1_LAST_TUPLE
=0x8000,

317 
	gCOMP_1_TRIPLE
=1,

318 
	gCOMP_1_TRAIL_LIMIT
=0x3400,

319 
	gCOMP_1_TRAIL_MASK
=0x7ffe,

320 
	gCOMP_1_TRAIL_SHIFT
=9,

321 
	gCOMP_2_TRAIL_SHIFT
=6,

322 
	gCOMP_2_TRAIL_MASK
=0xffc0

327 cÚ¡ 
UCh¬
 *
	$decompo£
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

328 
ReÜd”šgBufãr
 *
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const;

329 
	$decompo£AndAµ’d
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

330 
UBoŞ
 
doDecompo£
,

331 
ReÜd”šgBufãr
 &
bufãr
,

332 
UE¼ÜCode
 &
”rÜCode
) const;

333 
UBoŞ
 
	$compo£
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

334 
UBoŞ
 
ÚlyCÚtiguous
,

335 
UBoŞ
 
doCompo£
,

336 
ReÜd”šgBufãr
 &
bufãr
,

337 
UE¼ÜCode
 &
”rÜCode
) const;

338 cÚ¡ 
UCh¬
 *
	$compo£QuickCheck
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

339 
UBoŞ
 
ÚlyCÚtiguous
,

340 
UNÜm®iz©iÚCheckResuÉ
 *
pQCResuÉ
) const;

341 
	$compo£AndAµ’d
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

342 
UBoŞ
 
doCompo£
,

343 
UBoŞ
 
ÚlyCÚtiguous
,

344 
ReÜd”šgBufãr
 &
bufãr
,

345 
UE¼ÜCode
 &
”rÜCode
) const;

346 cÚ¡ 
UCh¬
 *
	$makeFCD
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

347 
ReÜd”šgBufãr
 *
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const;

348 
	$makeFCDAndAµ’d
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

349 
UBoŞ
 
doMakeFCD
,

350 
ReÜd”šgBufãr
 &
bufãr
,

351 
UE¼ÜCode
 &
”rÜCode
) const;

353 
UBoŞ
 
	$hasDecompBound¬y
(
UCh¬32
 
c
, 
UBoŞ
 
befÜe
) const;

354 
UBoŞ
 
	$isDecompIÃ¹
(
UCh¬32
 
c
ècÚ¡ {  
	`isDecompYesAndZ”oCC
(
	`g‘NÜm16
(c)); 
	}
}

356 
UBoŞ
 
	$hasCompBound¬yBefÜe
(
UCh¬32
 
c
) const {

357  
c
<
mšCompNoMaybeCP
 || 
	`hasCompBound¬yBefÜe
(c, 
	`g‘NÜm16
(c));

358 
	}
}

359 
UBoŞ
 
	$hasCompBound¬yAá”
(
UCh¬32
 
c
, 
UBoŞ
 
ÚlyCÚtiguous
, UBoŞ 
‹¡IÃ¹
) const;

361 
UBoŞ
 
	$hasFCDBound¬yBefÜe
(
UCh¬32
 
c
ècÚ¡ {  c<
MIN_CCC_LCCC_CP
 || 
	`g‘FCD16
(c)<=0xff; 
	}
}

362 
UBoŞ
 
	$hasFCDBound¬yAá”
(
UCh¬32
 
c
) const {

363 
ušt16_t
 
fcd16
=
	`g‘FCD16
(
c
);

364  
fcd16
<=1 || (fcd16&0xff)==0;

365 
	}
}

366 
UBoŞ
 
	$isFCDIÃ¹
(
UCh¬32
 
c
ècÚ¡ {  
	`g‘FCD16
(c)<=1; 
	}
}

367 
	g´iv©e
:

368 
UBoŞ
 
U_CALLCONV


369 
isAcû±abË
(*
cÚ‹xt
, cÚ¡ *
ty³
, cÚ¡ *
Çme
, cÚ¡ 
UD©aInfo
 *
pInfo
);

371 
UBoŞ
 
	$isMaybe
(
ušt16_t
 
nÜm16
ècÚ¡ {  
mšMaybeYes
<òÜm16 &&‚Üm16<=
JAMO_VT
; 
	}
}

372 
UBoŞ
 
	$isMaybeOrNÚZ”oCC
(
ušt16_t
 
nÜm16
ècÚ¡ { ‚Üm16>=
mšMaybeYes
; 
	}
}

373 
UBoŞ
 
	$isIÃ¹
(
ušt16_t
 
nÜm16
è{ ‚Üm16==0; 
	}
}

375 
UBoŞ
 
	$isJamoVT
(
ušt16_t
 
nÜm16
è{ ‚Üm16==
JAMO_VT
; 
	}
}

376 
UBoŞ
 
	$isHªgul
(
ušt16_t
 
nÜm16
ècÚ¡ { ‚Üm16==
mšYesNo
; 
	}
}

377 
UBoŞ
 
	$isCompYesAndZ”oCC
(
ušt16_t
 
nÜm16
ècÚ¡ { ‚Üm16<
mšNoNo
; 
	}
}

387 
UBoŞ
 
	$isDecompYesAndZ”oCC
(
ušt16_t
 
nÜm16
) const {

388  
nÜm16
<
mšYesNo
 ||

389 
nÜm16
==
JAMO_VT
 ||

390 (
mšMaybeYes
<=
nÜm16
 &&‚Üm16<=
MIN_NORMAL_MAYBE_YES
);

391 
	}
}

397 
UBoŞ
 
	$isMo¡DecompYesAndZ”oCC
(
ušt16_t
 
nÜm16
) const {

398  
nÜm16
<
mšYesNo
 ||‚Üm16==
MIN_NORMAL_MAYBE_YES
 ||‚Üm16==
JAMO_VT
;

399 
	}
}

400 
UBoŞ
 
	$isDecompNoAlgÜ™hmic
(
ušt16_t
 
nÜm16
ècÚ¡ { ‚Üm16>=
lim™NoNo
; 
	}
}

407 
ušt8_t
 
	$g‘CCFromNoNo
(
ušt16_t
 
nÜm16
) const {

408 cÚ¡ 
ušt16_t
 *
m­pšg
=
	`g‘M­pšg
(
nÜm16
);

409 if(*
m­pšg
&
MAPPING_HAS_CCC_LCCC_WORD
) {

410  (
ušt8_t
)
m­pšg
[1];

414 
	}
}

416 
ušt8_t
 
	$g‘T¿CCFromCompYesAndZ”oCC
(cÚ¡ 
UCh¬
 *
ıS¹
, cÚ¡ UCh¬ *
ıLim™
) const;

419 
UCh¬32
 
	$m­AlgÜ™hmic
(
UCh¬32
 
c
, 
ušt16_t
 
nÜm16
) const {

420  
c
+
nÜm16
-(
mšMaybeYes
-
MAX_DELTA
-1);

421 
	}
}

424 cÚ¡ 
ušt16_t
 *
	$g‘M­pšg
(
ušt16_t
 
nÜm16
ècÚ¡ {  
exŒaD©a
+nÜm16; 
	}
}

425 cÚ¡ 
ušt16_t
 *
	$g‘Compos™iÚsLi¡FÜDecompYes
(
ušt16_t
 
nÜm16
) const {

426 if(
nÜm16
==0 || 
MIN_NORMAL_MAYBE_YES
<=norm16) {

427  
NULL
;

428 } if(
nÜm16
<
mšMaybeYes
) {

429  
exŒaD©a
+
nÜm16
;

431  
maybeYesCompos™iÚs
+
nÜm16
-
mšMaybeYes
;

433 
	}
}

434 cÚ¡ 
ušt16_t
 *
	$g‘Compos™iÚsLi¡FÜCompos™e
(
ušt16_t
 
nÜm16
) const {

435 cÚ¡ 
ušt16_t
 *
li¡
=
exŒaD©a
+
nÜm16
;

436  
li¡
+

438 (*
li¡
&
MAPPING_LENGTH_MASK
)+

439 ((*
li¡
>>7)&1);

440 
	}
}

445 cÚ¡ 
ušt16_t
 *
	$g‘Compos™iÚsLi¡
(
ušt16_t
 
nÜm16
) const {

446  
	`isDecompYes
(
nÜm16
) ?

447 
	`g‘Compos™iÚsLi¡FÜDecompYes
(
nÜm16
) :

448 
	`g‘Compos™iÚsLi¡FÜCompos™e
(
nÜm16
);

449 
	}
}

451 cÚ¡ 
UCh¬
 *
	$cİyLowP»fixFromNulT”mš©ed
(cÚ¡ 
UCh¬
 *
¤c
,

452 
UCh¬32
 
mšN“dD©aCP
,

453 
ReÜd”šgBufãr
 *
bufãr
,

454 
UE¼ÜCode
 &
”rÜCode
) const;

455 
UBoŞ
 
	$decompo£ShÜt
(cÚ¡ 
UCh¬
 *
¤c
, cÚ¡ UCh¬ *
lim™
,

456 
ReÜd”šgBufãr
 &
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const;

457 
UBoŞ
 
	$decompo£
(
UCh¬32
 
c
, 
ušt16_t
 
nÜm16
,

458 
ReÜd”šgBufãr
 &
bufãr
, 
UE¼ÜCode
 &
”rÜCode
) const;

460 
št32_t
 
	`combše
(cÚ¡ 
ušt16_t
 *
li¡
, 
UCh¬32
 
Œa
);

461 
	$addCompos™es
(cÚ¡ 
ušt16_t
 *
li¡
, 
UnicodeS‘
 &
£t
) const;

462 
	$»compo£
(
ReÜd”šgBufãr
 &
bufãr
, 
št32_t
 
»compo£S¹Index
,

463 
UBoŞ
 
ÚlyCÚtiguous
) const;

465 
UBoŞ
 
	$hasCompBound¬yBefÜe
(
UCh¬32
 
c
, 
ušt16_t
 
nÜm16
) const;

466 cÚ¡ 
UCh¬
 *
	$fšdP»viousCompBound¬y
(cÚ¡ 
UCh¬
 *
¡¬t
, cÚ¡ UCh¬ *
p
) const;

467 cÚ¡ 
UCh¬
 *
	$fšdNextCompBound¬y
(cÚ¡ 
UCh¬
 *
p
, cÚ¡ UCh¬ *
lim™
) const;

469 cÚ¡ 
UTr›2
 *
	$fcdTr›
(ècÚ¡ {  (cÚ¡ 
UTr›2
 *)
fcdTr›SšgËtÚ
.
fIn¡ªû
; 
	}
}

471 cÚ¡ 
UCh¬
 *
	$fšdP»viousFCDBound¬y
(cÚ¡ 
UCh¬
 *
¡¬t
, cÚ¡ UCh¬ *
p
) const;

472 cÚ¡ 
UCh¬
 *
	$fšdNextFCDBound¬y
(cÚ¡ 
UCh¬
 *
p
, cÚ¡ UCh¬ *
lim™
) const;

474 
št32_t
 
	$g‘CªÚV®ue
(
UCh¬32
 
c
) const;

475 cÚ¡ 
UnicodeS‘
 &
	$g‘CªÚS¹S‘
(
št32_t
 
n
) const;

477 
UD©aMemÜy
 *
memÜy
;

478 
UV”siÚInfo
 
d©aV”siÚ
;

481 
UCh¬32
 
mšDecompNoCP
;

482 
UCh¬32
 
mšCompNoMaybeCP
;

485 
ušt16_t
 
mšYesNo
;

486 
ušt16_t
 
mšNoNo
;

487 
ušt16_t
 
lim™NoNo
;

488 
ušt16_t
 
mšMaybeYes
;

490 
UTr›2
 *
nÜmTr›
;

491 cÚ¡ 
ušt16_t
 *
maybeYesCompos™iÚs
;

492 cÚ¡ 
ušt16_t
 *
exŒaD©a
;

494 
Sim¶eSšgËtÚ
 
fcdTr›SšgËtÚ
;

495 
Sim¶eSšgËtÚ
 
ÿnÚI‹rD©aSšgËtÚ
;

496 
	}
};

499 
	#CANON_NOT_SEGMENT_STARTER
 0x80000000

	)

500 
	#CANON_HAS_COMPOSITIONS
 0x40000000

	)

501 
	#CANON_HAS_SET
 0x200000

	)

502 
	#CANON_VALUE_MASK
 0x1fffff

	)

507 şas 
	cU_COMMON_API
 
	mNÜm®iz”2FaùÜy
 {

508 
	mpublic
:

509 cÚ¡ 
NÜm®iz”2
 *
g‘NFCIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
);

510 cÚ¡ 
NÜm®iz”2
 *
g‘NFDIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
);

511 cÚ¡ 
NÜm®iz”2
 *
g‘FCDIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
);

512 cÚ¡ 
NÜm®iz”2
 *
g‘FCCIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
);

513 cÚ¡ 
NÜm®iz”2
 *
g‘NFKCIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
);

514 cÚ¡ 
NÜm®iz”2
 *
g‘NFKDIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
);

515 cÚ¡ 
NÜm®iz”2
 *
g‘NFKC_CFIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
);

516 cÚ¡ 
NÜm®iz”2
 *
g‘NoİIn¡ªû
(
UE¼ÜCode
 &
”rÜCode
);

518 cÚ¡ 
NÜm®iz”2
 *
g‘In¡ªû
(
UNÜm®iz©iÚMode
 
mode
, 
UE¼ÜCode
 &
”rÜCode
);

520 cÚ¡ 
NÜm®iz”2Im¶
 *
g‘NFCIm¶
(
UE¼ÜCode
 &
”rÜCode
);

521 cÚ¡ 
NÜm®iz”2Im¶
 *
g‘NFKCIm¶
(
UE¼ÜCode
 &
”rÜCode
);

522 cÚ¡ 
NÜm®iz”2Im¶
 *
g‘NFKC_CFIm¶
(
UE¼ÜCode
 &
”rÜCode
);

526 cÚ¡ 
NÜm®iz”2Im¶
 *
g‘Im¶
(cÚ¡ 
NÜm®iz”2
 *
nÜm2
);

528 cÚ¡ 
UTr›2
 *
g‘FCDTr›
(
UE¼ÜCode
 &
”rÜCode
);

529 
	m´iv©e
:

530 
NÜm®iz”2FaùÜy
();

533 
U_NAMESPACE_END


535 
U_CAPI
 
št32_t
 
U_EXPORT2


536 
unÜm2_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

537 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

538 
UE¼ÜCode
 *
pE¼ÜCode
);

544 
U_CFUNC
 
UNÜm®iz©iÚCheckResuÉ
 
U_EXPORT2


545 
unÜm_g‘QuickCheck
(
UCh¬32
 
c
, 
UNÜm®iz©iÚMode
 
mode
);

556 
U_CAPI
 cÚ¡ 
ušt16_t
 * 
U_EXPORT2


557 
unÜm_g‘FCDTr›Index
(
UCh¬32
 &
fcdHighS¹
, 
UE¼ÜCode
 *
pE¼ÜCode
);

570 
šlše
 
ušt16_t


571 
	$unÜm_g‘FCD16
(cÚ¡ 
ušt16_t
 *
fcdTr›Index
, 
UCh¬
 
c
) {

572  
fcdTr›Index
[
	`_UTRIE2_INDEX_FROM_U16_SINGLE_LEAD
(fcdTr›Index, 
c
)];

573 
	}
}

583 
šlše
 
ušt16_t


584 
	$unÜm_ÃxtFCD16
(cÚ¡ 
ušt16_t
 *
fcdTr›Index
, 
UCh¬32
 
fcdHighS¹
,

585 cÚ¡ 
UCh¬
 *&
s
, cÚ¡ UCh¬ *
lim™
) {

586 
UCh¬32
 
c
=*
s
++;

587 
ušt16_t
 
fcd
=
fcdTr›Index
[
	`_UTRIE2_INDEX_FROM_U16_SINGLE_LEAD
(fcdTr›Index, 
c
)];

588 if(
fcd
!=0 && 
	`U16_IS_LEAD
(
c
)) {

589 
UCh¬
 
c2
;

590 if(
s
!=
lim™
 && 
	`U16_IS_TRAIL
(
c2
=*s)) {

591 ++
s
;

592 
c
=
	`U16_GET_SUPPLEMENTARY
(c, 
c2
);

593 if(
c
<
fcdHighS¹
) {

594 
fcd
=
fcdTr›Index
[
	`_UTRIE2_INDEX_FROM_SUPP
(fcdTr›Index, 
c
)];

596 
fcd
=0;

599 
fcd
=0;

602  
fcd
;

603 
	}
}

613 
šlše
 
ušt16_t


614 
	$unÜm_´evFCD16
(cÚ¡ 
ušt16_t
 *
fcdTr›Index
, 
UCh¬32
 
fcdHighS¹
,

615 cÚ¡ 
UCh¬
 *
¡¬t
, cÚ¡ UCh¬ *&
s
) {

616 
UCh¬32
 
c
=*--
s
;

617 
ušt16_t
 
fcd
;

618 if(!
	`U16_IS_SURROGATE
(
c
)) {

619 
fcd
=
fcdTr›Index
[
	`_UTRIE2_INDEX_FROM_U16_SINGLE_LEAD
(fcdTr›Index, 
c
)];

621 
UCh¬
 
c2
;

622 if(
	`U16_IS_SURROGATE_TRAIL
(
c
è&& 
s
!=
¡¬t
 && 
	`U16_IS_LEAD
(
c2
=*(s-1))) {

623 --
s
;

624 
c
=
	`U16_GET_SUPPLEMENTARY
(
c2
, c);

625 if(
c
<
fcdHighS¹
) {

626 
fcd
=
fcdTr›Index
[
	`_UTRIE2_INDEX_FROM_SUPP
(fcdTr›Index, 
c
)];

628 
fcd
=0;

631 
fcd
=0;

634  
fcd
;

635 
	}
}

	@normlzr.cpp

9 
	~"unicode/uty³s.h
"

11 #ià!
UCONFIG_NO_NORMALIZATION


13 
	~"unicode/uni£t.h
"

14 
	~"unicode/uni¡r.h
"

15 
	~"unicode/ch¬™”.h
"

16 
	~"unicode/schr™”.h
"

17 
	~"unicode/uchr™”.h
"

18 
	~"unicode/nÜmlzr.h
"

19 
	~"cmemÜy.h
"

20 
	~"nÜm®iz”2im¶.h
"

21 
	~"u´İs.h
"

23 
U_NAMESPACE_BEGIN


25 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
NÜm®iz”
)

31 
NÜm®iz”
::
	$NÜm®iz”
(cÚ¡ 
UnicodeSŒšg
& 
¡r
, 
UNÜm®iz©iÚMode
 
mode
) :

32 
	`UObjeù
(), 
	`fF‹»dNÜm2
(
NULL
), 
	`fNÜm2
(NULL), 
	`fUMode
(
mode
), 
	`fO±iÚs
(0),

33 
	`‹xt
(
Ãw
 
	`SŒšgCh¬aù”I‹¿tÜ
(
¡r
)),

34 
	`cu¼’tIndex
(0), 
	`ÃxtIndex
(0),

35 
	`bufãr
(), 
	$bufãrPos
(0)

37 
	`š™
();

38 
	}
}

40 
	gNÜm®iz”
::
	$NÜm®iz”
(cÚ¡ 
UCh¬
 *
¡r
, 
št32_t
 
Ëngth
, 
UNÜm®iz©iÚMode
 
mode
) :

41 
	`UObjeù
(), 
	`fF‹»dNÜm2
(
NULL
), 
	`fNÜm2
(NULL), 
	`fUMode
(
mode
), 
	`fO±iÚs
(0),

42 
	`‹xt
(
Ãw
 
	`UCh¬Ch¬aù”I‹¿tÜ
(
¡r
, 
Ëngth
)),

43 
	`cu¼’tIndex
(0), 
	`ÃxtIndex
(0),

44 
	`bufãr
(), 
	$bufãrPos
(0)

46 
	`š™
();

47 
	}
}

49 
	gNÜm®iz”
::
	$NÜm®iz”
(cÚ¡ 
Ch¬aù”I‹¿tÜ
& 
™”
, 
UNÜm®iz©iÚMode
 
mode
) :

50 
	`UObjeù
(), 
	`fF‹»dNÜm2
(
NULL
), 
	`fNÜm2
(NULL), 
	`fUMode
(
mode
), 
	`fO±iÚs
(0),

51 
	`‹xt
(
™”
.
	`şÚe
()),

52 
	`cu¼’tIndex
(0), 
	`ÃxtIndex
(0),

53 
	`bufãr
(), 
	$bufãrPos
(0)

55 
	`š™
();

56 
	}
}

58 
	gNÜm®iz”
::
	$NÜm®iz”
(cÚ¡ 
NÜm®iz”
 &
cİy
) :

59 
	`UObjeù
(
cİy
), 
	`fF‹»dNÜm2
(
NULL
), 
	`fNÜm2
(NULL), 
	`fUMode
(cİy.
fUMode
), 
	`fO±iÚs
(cİy.
fO±iÚs
),

60 
	`‹xt
(
cİy
.
‹xt
->
	`şÚe
()),

61 
	`cu¼’tIndex
(
cİy
.
cu¼’tIndex
), 
	`ÃxtIndex
(cİy.
ÃxtIndex
),

62 
	`bufãr
(
cİy
.
bufãr
), 
	$bufãrPos
(
cİy
.
bufãrPos
)

64 
	`š™
();

65 
	}
}

67 cÚ¡ 
UCh¬
 
	g_NUL
=0;

70 
	gNÜm®iz”
::
	$š™
() {

71 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

72 
fNÜm2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
fUMode
, 
”rÜCode
);

73 if(
fO±iÚs
&
UNORM_UNICODE_3_2
) {

74 
d–‘e
 
fF‹»dNÜm2
;

75 
fNÜm2
=
fF‹»dNÜm2
=

76 
Ãw
 
	`F‹»dNÜm®iz”2
(*
fNÜm2
, *
	`uni£t_g‘Unicode32In¡ªû
(
”rÜCode
));

78 if(
	`U_FAILURE
(
”rÜCode
)) {

79 
”rÜCode
=
U_ZERO_ERROR
;

80 
fNÜm2
=
NÜm®iz”2FaùÜy
::
	`g‘NoİIn¡ªû
(
”rÜCode
);

82 
	}
}

84 
	gNÜm®iz”
::~
	$NÜm®iz”
()

86 
d–‘e
 
fF‹»dNÜm2
;

87 
d–‘e
 
‹xt
;

88 
	}
}

90 
NÜm®iz”
*

91 
	gNÜm®iz”
::
	$şÚe
() const

93  
Ãw
 
	`NÜm®iz”
(*
this
);

94 
	}
}

99 
št32_t
 
	gNÜm®iz”
::
	$hashCode
() const

101  
‹xt
->
	`hashCode
(è+ 
fUMode
 + 
fO±iÚs
 + 
bufãr
.hashCode(è+ 
bufãrPos
 + 
cu¼’tIndex
 + 
ÃxtIndex
;

102 
	}
}

104 
UBoŞ
 
	gNÜm®iz”
::
İ”©Ü
==(cÚ¡ 
NÜm®iz”
& 
th©
) const

107 
this
==&
th©
 ||

108 (
fUMode
==
th©
.fUMode &&

109 
fO±iÚs
==
th©
.fOptions &&

110 *
‹xt
==*
th©
.text &&

111 
bufãr
==
th©
.buffer &&

112 
bufãrPos
==
th©
.bufferPos &&

113 
ÃxtIndex
==
th©
.nextIndex);

120 
U_EXPORT2


121 
	gNÜm®iz”
::
	$nÜm®ize
(cÚ¡ 
UnicodeSŒšg
& 
sourû
,

122 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

123 
UnicodeSŒšg
& 
»suÉ
,

124 
UE¼ÜCode
 &
¡©us
) {

125 if(
sourû
.
	`isBogus
(è|| 
	`U_FAILURE
(
¡©us
)) {

126 
»suÉ
.
	`£tToBogus
();

127 if(
	`U_SUCCESS
(
¡©us
)) {

128 
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

131 
UnicodeSŒšg
 
loÿlDe¡
;

132 
UnicodeSŒšg
 *
de¡
;

134 if(&
sourû
!=&
»suÉ
) {

135 
de¡
=&
»suÉ
;

138 
de¡
=&
loÿlDe¡
;

140 cÚ¡ 
NÜm®iz”2
 *
n2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, 
¡©us
);

141 if(
	`U_SUCCESS
(
¡©us
)) {

142 if(
İtiÚs
&
UNORM_UNICODE_3_2
) {

143 
	`F‹»dNÜm®iz”2
(*
n2
, *
	`uni£t_g‘Unicode32In¡ªû
(
¡©us
)).

144 
	`nÜm®ize
(
sourû
, *
de¡
, 
¡©us
);

146 
n2
->
	`nÜm®ize
(
sourû
, *
de¡
, 
¡©us
);

149 if(
de¡
==&
loÿlDe¡
 && 
	`U_SUCCESS
(
¡©us
)) {

150 
»suÉ
=*
de¡
;

153 
	}
}

155 
U_EXPORT2


156 
	gNÜm®iz”
::
	$compo£
(cÚ¡ 
UnicodeSŒšg
& 
sourû
,

157 
UBoŞ
 
com·t
, 
št32_t
 
İtiÚs
,

158 
UnicodeSŒšg
& 
»suÉ
,

159 
UE¼ÜCode
 &
¡©us
) {

160 
	`nÜm®ize
(
sourû
, 
com·t
 ? 
UNORM_NFKC
 : 
UNORM_NFC
, 
İtiÚs
, 
»suÉ
, 
¡©us
);

161 
	}
}

163 
U_EXPORT2


164 
	gNÜm®iz”
::
	$decompo£
(cÚ¡ 
UnicodeSŒšg
& 
sourû
,

165 
UBoŞ
 
com·t
, 
št32_t
 
İtiÚs
,

166 
UnicodeSŒšg
& 
»suÉ
,

167 
UE¼ÜCode
 &
¡©us
) {

168 
	`nÜm®ize
(
sourû
, 
com·t
 ? 
UNORM_NFKD
 : 
UNORM_NFD
, 
İtiÚs
, 
»suÉ
, 
¡©us
);

169 
	}
}

171 
UNÜm®iz©iÚCheckResuÉ


172 
	gNÜm®iz”
::
	$quickCheck
(cÚ¡ 
UnicodeSŒšg
& 
sourû
,

173 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

174 
UE¼ÜCode
 &
¡©us
) {

175 cÚ¡ 
NÜm®iz”2
 *
n2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, 
¡©us
);

176 if(
	`U_SUCCESS
(
¡©us
)) {

177 if(
İtiÚs
&
UNORM_UNICODE_3_2
) {

178  
	`F‹»dNÜm®iz”2
(*
n2
, *
	`uni£t_g‘Unicode32In¡ªû
(
¡©us
)).

179 
	`quickCheck
(
sourû
, 
¡©us
);

181  
n2
->
	`quickCheck
(
sourû
, 
¡©us
);

184  
UNORM_MAYBE
;

186 
	}
}

188 
UBoŞ


189 
	gNÜm®iz”
::
	$isNÜm®ized
(cÚ¡ 
UnicodeSŒšg
& 
sourû
,

190 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

191 
UE¼ÜCode
 &
¡©us
) {

192 cÚ¡ 
NÜm®iz”2
 *
n2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, 
¡©us
);

193 if(
	`U_SUCCESS
(
¡©us
)) {

194 if(
İtiÚs
&
UNORM_UNICODE_3_2
) {

195  
	`F‹»dNÜm®iz”2
(*
n2
, *
	`uni£t_g‘Unicode32In¡ªû
(
¡©us
)).

196 
	`isNÜm®ized
(
sourû
, 
¡©us
);

198  
n2
->
	`isNÜm®ized
(
sourû
, 
¡©us
);

201  
FALSE
;

203 
	}
}

205 
	gUnicodeSŒšg
 & 
U_EXPORT2


206 
	gNÜm®iz”
::
	$cÚÿ‹Ç‹
(
UnicodeSŒšg
 &
Ëá
, UnicodeSŒšg &
right
,

207 
UnicodeSŒšg
 &
»suÉ
,

208 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

209 
UE¼ÜCode
 &
”rÜCode
) {

210 if(
Ëá
.
	`isBogus
(è|| 
right
.isBogus(è|| 
	`U_FAILURE
(
”rÜCode
)) {

211 
»suÉ
.
	`£tToBogus
();

212 if(
	`U_SUCCESS
(
”rÜCode
)) {

213 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

216 
UnicodeSŒšg
 
loÿlDe¡
;

217 
UnicodeSŒšg
 *
de¡
;

219 if(&
right
!=&
»suÉ
) {

220 
de¡
=&
»suÉ
;

223 
de¡
=&
loÿlDe¡
;

225 *
de¡
=
Ëá
;

226 cÚ¡ 
NÜm®iz”2
 *
n2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, 
”rÜCode
);

227 if(
	`U_SUCCESS
(
”rÜCode
)) {

228 if(
İtiÚs
&
UNORM_UNICODE_3_2
) {

229 
	`F‹»dNÜm®iz”2
(*
n2
, *
	`uni£t_g‘Unicode32In¡ªû
(
”rÜCode
)).

230 
	`­³nd
(*
de¡
, 
right
, 
”rÜCode
);

232 
n2
->
	`­³nd
(*
de¡
, 
right
, 
”rÜCode
);

235 if(
de¡
==&
loÿlDe¡
 && 
	`U_SUCCESS
(
”rÜCode
)) {

236 
»suÉ
=*
de¡
;

239  
»suÉ
;

240 
	}
}

249 
UCh¬32
 
	gNÜm®iz”
::
	$cu¼’t
() {

250 if(
bufãrPos
<
bufãr
.
	`Ëngth
(è|| 
	`ÃxtNÜm®ize
()) {

251  
bufãr
.
	`ch¬32At
(
bufãrPos
);

253  
DONE
;

255 
	}
}

262 
UCh¬32
 
	gNÜm®iz”
::
	$Ãxt
() {

263 if(
bufãrPos
<
bufãr
.
	`Ëngth
(è|| 
	`ÃxtNÜm®ize
()) {

264 
UCh¬32
 
c
=
bufãr
.
	`ch¬32At
(
bufãrPos
);

265 
bufãrPos
+=
	`UTF_CHAR_LENGTH
(
c
);

266  
c
;

268  
DONE
;

270 
	}
}

277 
UCh¬32
 
	gNÜm®iz”
::
	$´evious
() {

278 if(
bufãrPos
>0 || 
	`´eviousNÜm®ize
()) {

279 
UCh¬32
 
c
=
bufãr
.
	`ch¬32At
(
bufãrPos
-1);

280 
bufãrPos
-=
	`UTF_CHAR_LENGTH
(
c
);

281  
c
;

283  
DONE
;

285 
	}
}

287 
	gNÜm®iz”
::
	$»£t
() {

288 
cu¼’tIndex
=
ÃxtIndex
=
‹xt
->
	`£tToS¹
();

289 
	`ş—rBufãr
();

290 
	}
}

293 
	gNÜm®iz”
::
	$£tIndexOÆy
(
št32_t
 
šdex
) {

294 
‹xt
->
	`£tIndex
(
šdex
);

295 
cu¼’tIndex
=
ÃxtIndex
=
‹xt
->
	`g‘Index
();

296 
	`ş—rBufãr
();

297 
	}
}

303 
UCh¬32
 
	gNÜm®iz”
::
	$fœ¡
() {

304 
	`»£t
();

305  
	`Ãxt
();

306 
	}
}

313 
UCh¬32
 
	gNÜm®iz”
::
	$Ï¡
() {

314 
cu¼’tIndex
=
ÃxtIndex
=
‹xt
->
	`£tToEnd
();

315 
	`ş—rBufãr
();

316  
	`´evious
();

317 
	}
}

333 
št32_t
 
	gNÜm®iz”
::
	$g‘Index
() const {

334 if(
bufãrPos
<
bufãr
.
	`Ëngth
()) {

335  
cu¼’tIndex
;

337  
ÃxtIndex
;

339 
	}
}

346 
št32_t
 
	gNÜm®iz”
::
	$¡¬tIndex
() const {

347  
‹xt
->
	`¡¬tIndex
();

348 
	}
}

355 
št32_t
 
	gNÜm®iz”
::
	$’dIndex
() const {

356  
‹xt
->
	`’dIndex
();

357 
	}
}

364 
	gNÜm®iz”
::
	$£tMode
(
UNÜm®iz©iÚMode
 
ÃwMode
)

366 
fUMode
 = 
ÃwMode
;

367 
	`š™
();

368 
	}
}

370 
UNÜm®iz©iÚMode


371 
	gNÜm®iz”
::
	$g‘UMode
() const

373  
fUMode
;

374 
	}
}

377 
	gNÜm®iz”
::
	$£tO±iÚ
(
št32_t
 
İtiÚ
,

378 
UBoŞ
 
v®ue
)

380 ià(
v®ue
) {

381 
fO±iÚs
 |ğ
İtiÚ
;

383 
fO±iÚs
 &ğ(~
İtiÚ
);

385 
	`š™
();

386 
	}
}

388 
UBoŞ


389 
	gNÜm®iz”
::
	$g‘O±iÚ
(
št32_t
 
İtiÚ
) const

391  (
fO±iÚs
 & 
İtiÚ
) != 0;

392 
	}
}

399 
	gNÜm®iz”
::
	$£tText
(cÚ¡ 
UnicodeSŒšg
& 
ÃwText
,

400 
UE¼ÜCode
 &
¡©us
)

402 ià(
	`U_FAILURE
(
¡©us
)) {

405 
Ch¬aù”I‹¿tÜ
 *
ÃwI‹r
 = 
Ãw
 
	`SŒšgCh¬aù”I‹¿tÜ
(
ÃwText
);

406 ià(
ÃwI‹r
 =ğ
NULL
) {

407 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

410 
d–‘e
 
‹xt
;

411 
‹xt
 = 
ÃwI‹r
;

412 
	`»£t
();

413 
	}
}

420 
	gNÜm®iz”
::
	$£tText
(cÚ¡ 
Ch¬aù”I‹¿tÜ
& 
ÃwText
,

421 
UE¼ÜCode
 &
¡©us
)

423 ià(
	`U_FAILURE
(
¡©us
)) {

426 
Ch¬aù”I‹¿tÜ
 *
ÃwI‹r
 = 
ÃwText
.
	`şÚe
();

427 ià(
ÃwI‹r
 =ğ
NULL
) {

428 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

431 
d–‘e
 
‹xt
;

432 
‹xt
 = 
ÃwI‹r
;

433 
	`»£t
();

434 
	}
}

437 
	gNÜm®iz”
::
	$£tText
(cÚ¡ 
UCh¬
* 
ÃwText
,

438 
št32_t
 
Ëngth
,

439 
UE¼ÜCode
 &
¡©us
)

441 ià(
	`U_FAILURE
(
¡©us
)) {

444 
Ch¬aù”I‹¿tÜ
 *
ÃwI‹r
 = 
Ãw
 
	`UCh¬Ch¬aù”I‹¿tÜ
(
ÃwText
, 
Ëngth
);

445 ià(
ÃwI‹r
 =ğ
NULL
) {

446 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

449 
d–‘e
 
‹xt
;

450 
‹xt
 = 
ÃwI‹r
;

451 
	`»£t
();

452 
	}
}

459 
	gNÜm®iz”
::
	$g‘Text
(
UnicodeSŒšg
& 
»suÉ
)

461 
‹xt
->
	`g‘Text
(
»suÉ
);

462 
	}
}

468 
	gNÜm®iz”
::
	$ş—rBufãr
() {

469 
bufãr
.
	`»move
();

470 
bufãrPos
=0;

471 
	}
}

473 
UBoŞ


474 
	gNÜm®iz”
::
	$ÃxtNÜm®ize
() {

475 
	`ş—rBufãr
();

476 
cu¼’tIndex
=
ÃxtIndex
;

477 
‹xt
->
	`£tIndex
(
ÃxtIndex
);

478 if(!
‹xt
->
	`hasNext
()) {

479  
FALSE
;

482 
UnicodeSŒšg
 
	`£gm’t
(
‹xt
->
	`Ãxt32Po¡Inc
());

483 
‹xt
->
	`hasNext
()) {

484 
UCh¬32
 
c
;

485 if(
fNÜm2
->
	`hasBound¬yBefÜe
(
c
=
‹xt
->
	`Ãxt32Po¡Inc
())) {

486 
‹xt
->
	`move32
(-1, 
Ch¬aù”I‹¿tÜ
::
kCu¼’t
);

489 
£gm’t
.
	`­³nd
(
c
);

491 
ÃxtIndex
=
‹xt
->
	`g‘Index
();

492 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

493 
fNÜm2
->
	`nÜm®ize
(
£gm’t
, 
bufãr
, 
”rÜCode
);

494  
	`U_SUCCESS
(
”rÜCode
è&& !
bufãr
.
	`isEm±y
();

495 
	}
}

497 
UBoŞ


498 
	gNÜm®iz”
::
	$´eviousNÜm®ize
() {

499 
	`ş—rBufãr
();

500 
ÃxtIndex
=
cu¼’tIndex
;

501 
‹xt
->
	`£tIndex
(
cu¼’tIndex
);

502 if(!
‹xt
->
	`hasP»vious
()) {

503  
FALSE
;

505 
UnicodeSŒšg
 
£gm’t
;

506 
‹xt
->
	`hasP»vious
()) {

507 
UCh¬32
 
c
=
‹xt
->
	`´evious32
();

508 
£gm’t
.
	`š£¹
(0, 
c
);

509 if(
fNÜm2
->
	`hasBound¬yBefÜe
(
c
)) {

513 
cu¼’tIndex
=
‹xt
->
	`g‘Index
();

514 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

515 
fNÜm2
->
	`nÜm®ize
(
£gm’t
, 
bufãr
, 
”rÜCode
);

516 
bufãrPos
=
bufãr
.
	`Ëngth
();

517  
	`U_SUCCESS
(
”rÜCode
è&& !
bufãr
.
	`isEm±y
();

518 
	}
}

520 
	gU_NAMESPACE_END


	@parsepos.cpp

8 
	~"unicode/·r£pos.h
"

10 
U_NAMESPACE_BEGIN


12 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
P¬£Pos™iÚ
)

14 
P¬£Pos™iÚ
::~
	$P¬£Pos™iÚ
(è{
	}
}

16 
P¬£Pos™iÚ
 *

17 
P¬£Pos™iÚ
::
	$şÚe
() const {

18  
Ãw
 
	`P¬£Pos™iÚ
(*
this
);

19 
	}
}

21 
	gU_NAMESPACE_END


	@propname.cpp

11 
	~"´İÇme.h
"

12 
	~"unicode/uch¬.h
"

13 
	~"unicode/ud©a.h
"

14 
	~"umu‹x.h
"

15 
	~"cmemÜy.h
"

16 
	~"c¡ršg.h
"

17 
	~"uşn_cmn.h
"

18 
	~"u¬rsÜt.h
"

20 
U_CDECL_BEGIN


27 
šlše
 
št32_t


28 
	$g‘ASCIIPrİ”tyNameCh¬
(cÚ¡ *
Çme
) {

29 
št32_t
 
i
;

30 
c
;

33 
i
=0;

34 (
c
=
Çme
[
i
++])==0x2d || c==0x5f ||

35 
c
==0x20 || (0x09<=c && c<=0x0d);

38 if(
c
!=0) {

39  (
i
<<8)|(
ušt8_t
)
	`u´v_asci™Şow”
(()
c
);

41  
i
<<8;

43 
	}
}

50 
šlše
 
št32_t


51 
	$g‘EBCDICPrİ”tyNameCh¬
(cÚ¡ *
Çme
) {

52 
št32_t
 
i
;

53 
c
;

56 
i
=0;

57 (
c
=
Çme
[
i
++])==0x60 || c==0x6d ||

58 
c
==0x40 || c==0x05 || c==0x15 || c==0x25 || c==0x0b || c==0x0c || c==0x0d;

61 if(
c
!=0) {

62  (
i
<<8)|(
ušt8_t
)
	`u´v_ebcdiùŞow”
(()
c
);

64  
i
<<8;

66 
	}
}

85 
U_CAPI
 
št32_t
 
U_EXPORT2


86 
	$u´v_com·»ASCIIPrİ”tyNames
(cÚ¡ *
Çme1
, cÚ¡ *
Çme2
) {

87 
št32_t
 
rc
, 
r1
, 
r2
;

90 
r1
=
	`g‘ASCIIPrİ”tyNameCh¬
(
Çme1
);

91 
r2
=
	`g‘ASCIIPrİ”tyNameCh¬
(
Çme2
);

94 if(((
r1
|
r2
)&0xff)==0) {

99 if(
r1
!=
r2
) {

100 
rc
=(
r1
&0xff)-(
r2
&0xff);

101 if(
rc
!=0) {

102  
rc
;

106 
Çme1
+=
r1
>>8;

107 
Çme2
+=
r2
>>8;

109 
	}
}

111 
U_CAPI
 
št32_t
 
U_EXPORT2


112 
	$u´v_com·»EBCDICPrİ”tyNames
(cÚ¡ *
Çme1
, cÚ¡ *
Çme2
) {

113 
št32_t
 
rc
, 
r1
, 
r2
;

116 
r1
=
	`g‘EBCDICPrİ”tyNameCh¬
(
Çme1
);

117 
r2
=
	`g‘EBCDICPrİ”tyNameCh¬
(
Çme2
);

120 if(((
r1
|
r2
)&0xff)==0) {

125 if(
r1
!=
r2
) {

126 
rc
=(
r1
&0xff)-(
r2
&0xff);

127 if(
rc
!=0) {

128  
rc
;

132 
Çme1
+=
r1
>>8;

133 
Çme2
+=
r2
>>8;

135 
	}
}

137 
U_CDECL_END


139 
U_NAMESPACE_BEGIN


145 
	gPrİ”tyAlŸ£s
::
	$choo£NameInGroup
(
Off£t
 
off£t
,

146 
UPrİ”tyNameChoiû
 
choiû
) const {

147 
št32_t
 
c
 = 
choiû
;

148 ià(!
off£t
 || 
c
 < 0) {

149  
NULL
;

151 cÚ¡ 
Off£t
* 
p
 = (cÚ¡ Off£t*è
	`g‘Poš‹r
(
off£t
);

152 
c
-- > 0) {

153 ià(*
p
++ < 0è 
NULL
;

155 
Off£t
 
a
 = *
p
;

156 ià(
a
 < 0)‡ = -a;

157  (cÚ¡ *è
	`g‘Poš‹rNuÎ
(
a
);

158 
	}
}

160 cÚ¡ 
V®ueM­
*

161 
	gPrİ”tyAlŸ£s
::
	$g‘V®ueM­
(
EnumV®ue
 
´İ
) const {

162 
NÚCÚtiguousEnumToOff£t
* 
e2o
 = (NÚCÚtiguousEnumToOff£t*è
	`g‘Poš‹r
(
’umToV®ue_off£t
);

163 
Off£t
 
a
 = 
e2o
->
	`g‘Off£t
(
´İ
);

164  (cÚ¡ 
V®ueM­
*è(
a
 ? 
	`g‘Poš‹rNuÎ
×è: 
NULL
);

165 
	}
}

167 
šlše
 const *

168 
	gPrİ”tyAlŸ£s
::
	$g‘Prİ”tyName
(
EnumV®ue
 
´İ
,

169 
UPrİ”tyNameChoiû
 
choiû
) const {

170 
NÚCÚtiguousEnumToOff£t
* 
e2n
 = (NÚCÚtiguousEnumToOff£t*è
	`g‘Poš‹r
(
’umToName_off£t
);

171  
	`choo£NameInGroup
(
e2n
->
	`g‘Off£t
(
´İ
), 
choiû
);

172 
	}
}

174 
šlše
 
EnumV®ue


175 
	gPrİ”tyAlŸ£s
::
	$g‘Prİ”tyEnum
(cÚ¡ * 
®Ÿs
) const {

176 
NameToEnum
* 
n2e
 = (NameToEnum*è
	`g‘Poš‹r
(
ÇmeToEnum_off£t
);

177  
n2e
->
	`g‘Enum
(
®Ÿs
, *
this
);

178 
	}
}

180 
šlše
 const *

181 
	gPrİ”tyAlŸ£s
::
	$g‘Prİ”tyV®ueName
(
EnumV®ue
 
´İ
,

182 
EnumV®ue
 
v®ue
,

183 
UPrİ”tyNameChoiû
 
choiû
) const {

184 cÚ¡ 
V®ueM­
* 
vm
 = 
	`g‘V®ueM­
(
´İ
);

185 ià(!
vm
è 
NULL
;

186 
Off£t
 
a
;

187 ià(
vm
->
’umToName_off£t
) {

188 
a
 = ((
EnumToOff£t
*è
	`g‘Poš‹r
(
vm
->
’umToName_off£t
))->

189 
	`g‘Off£t
(
v®ue
);

191 
a
 = ((
NÚCÚtiguousEnumToOff£t
*è
	`g‘Poš‹r
(
vm
->
ncEnumToName_off£t
))->

192 
	`g‘Off£t
(
v®ue
);

194  
	`choo£NameInGroup
(
a
, 
choiû
);

195 
	}
}

197 
šlše
 
EnumV®ue


198 
	gPrİ”tyAlŸ£s
::
	$g‘Prİ”tyV®ueEnum
(
EnumV®ue
 
´İ
,

199 cÚ¡ * 
®Ÿs
) const {

200 cÚ¡ 
V®ueM­
* 
vm
 = 
	`g‘V®ueM­
(
´İ
);

201 ià(!
vm
è 
UCHAR_INVALID_CODE
;

202 
NameToEnum
* 
n2e
 = (NameToEnum*è
	`g‘Poš‹r
(
vm
->
ÇmeToEnum_off£t
);

203  
n2e
->
	`g‘Enum
(
®Ÿs
, *
this
);

204 
	}
}

206 
U_NAMESPACE_END


207 
U_NAMESPACE_USE


212 cÚ¡ 
Prİ”tyAlŸ£s
* 
	gPNAME
 = 
NULL
;

213 
UD©aMemÜy
* 
	gUDATA
 = 
NULL
;

221 
U_CDECL_BEGIN


222 
UBoŞ
 
U_CALLCONV


223 
	$isPNameAcû±abË
(* ,

225 cÚ¡ 
UD©aInfo
* 
šfo
) {

227 
šfo
->
size
 >ğ(
UD©aInfo
) &&

228 
šfo
->
isBigEndŸn
 =ğ
U_IS_BIG_ENDIAN
 &&

229 
šfo
->
ch¬£tFamy
 =ğ
U_CHARSET_FAMILY
 &&

230 
šfo
->
d©aFÜm©
[0] =ğ
PNAME_SIG_0
 &&

231 
šfo
->
d©aFÜm©
[1] =ğ
PNAME_SIG_1
 &&

232 
šfo
->
d©aFÜm©
[2] =ğ
PNAME_SIG_2
 &&

233 
šfo
->
d©aFÜm©
[3] =ğ
PNAME_SIG_3
 &&

234 
šfo
->
fÜm©V”siÚ
[0] =ğ
PNAME_FORMAT_VERSION
;

235 
	}
}

237 
UBoŞ
 
U_CALLCONV
 
	$²ame_ş—nup
() {

238 ià(
UDATA
) {

239 
	`ud©a_şo£
(
UDATA
);

240 
UDATA
 = 
NULL
;

242 
PNAME
 = 
NULL
;

243  
TRUE
;

244 
	}
}

245 
U_CDECL_END


252 
UBoŞ
 
	$_lßd
() {

253 
UE¼ÜCode
 
ec
 = 
U_ZERO_ERROR
;

254 
UD©aMemÜy
* 
d©a
 =

255 
	`ud©a_İ’Choiû
(0, 
PNAME_DATA_TYPE
, 
PNAME_DATA_NAME
,

256 
isPNameAcû±abË
, 0, &
ec
);

257 ià(
	`U_SUCCESS
(
ec
)) {

258 
	`umtx_lock
(
NULL
);

259 ià(
UDATA
 =ğ
NULL
) {

260 
UDATA
 = 
d©a
;

261 
PNAME
 = (cÚ¡ 
Prİ”tyAlŸ£s
*è
	`ud©a_g‘MemÜy
(
UDATA
);

262 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_PNAME
, 
²ame_ş—nup
);

263 
d©a
 = 
NULL
;

265 
	`umtx_uÆock
(
NULL
);

267 ià(
d©a
) {

268 
	`ud©a_şo£
(
d©a
);

270  
PNAME
!=
NULL
;

271 
	}
}

279 
šlše
 
UBoŞ
 
	$lßd
() {

280 
UBoŞ
 
f
;

281 
	`UMTX_CHECK
(
NULL
, (
PNAME
!=NULL), 
f
);

282  
f
 || 
	`_lßd
();

283 
	}
}

293 
U_CAPI
 cÚ¡ * 
U_EXPORT2


294 
	$u_g‘Prİ”tyName
(
UPrİ”ty
 
´İ”ty
,

295 
UPrİ”tyNameChoiû
 
ÇmeChoiû
) {

296  
	`lßd
(è? 
PNAME
->
	`g‘Prİ”tyName
(
´İ”ty
, 
ÇmeChoiû
)

297 : 
NULL
;

298 
	}
}

300 
U_CAPI
 
UPrİ”ty
 
U_EXPORT2


301 
	$u_g‘Prİ”tyEnum
(cÚ¡ * 
®Ÿs
) {

302 
UPrİ”ty
 
p
 = 
	`lßd
(è? (UPrİ”tyè
PNAME
->
	`g‘Prİ”tyEnum
(
®Ÿs
)

303 : 
UCHAR_INVALID_CODE
;

304  
p
;

305 
	}
}

307 
U_CAPI
 cÚ¡ * 
U_EXPORT2


308 
	$u_g‘Prİ”tyV®ueName
(
UPrİ”ty
 
´İ”ty
,

309 
št32_t
 
v®ue
,

310 
UPrİ”tyNameChoiû
 
ÇmeChoiû
) {

311  
	`lßd
(è? 
PNAME
->
	`g‘Prİ”tyV®ueName
(
´İ”ty
, 
v®ue
, 
ÇmeChoiû
)

312 : 
NULL
;

313 
	}
}

315 
U_CAPI
 
št32_t
 
U_EXPORT2


316 
	$u_g‘Prİ”tyV®ueEnum
(
UPrİ”ty
 
´İ”ty
,

317 cÚ¡ * 
®Ÿs
) {

318  
	`lßd
(è? 
PNAME
->
	`g‘Prİ”tyV®ueEnum
(
´İ”ty
, 
®Ÿs
)

319 : (
št32_t
)
UCHAR_INVALID_CODE
;

320 
	}
}

332 
št32_t


333 
	gEnumToOff£t
::
	$sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

334 cÚ¡ 
ušt8_t
 *
šBy‹s
, 
št32_t
 
Ëngth
, ušt8_ˆ*
outBy‹s
,

335 
ušt8_t
 *
‹mp
, 
št32_t
 
pos
,

336 
UE¼ÜCode
 *
pE¼ÜCode
) {

337 cÚ¡ 
EnumToOff£t
 *
šM­
;

338 
EnumToOff£t
 *
outM­
, *
‹mpM­
;

339 
št32_t
 
size
;

341 
‹mpM­
=(
EnumToOff£t
 *)(
‹mp
+
pos
);

342 if(
‹mpM­
->
’umS¹
!=0 ||empM­->
’umLim™
!=0) {

344 
size
=
‹mpM­
->
	`g‘Size
();

345  
size
;

348 
šM­
=(cÚ¡ 
EnumToOff£t
 *)(
šBy‹s
+
pos
);

349 
outM­
=(
EnumToOff£t
 *)(
outBy‹s
+
pos
);

351 
‹mpM­
->
’umS¹
=
	`ud©a_»adIÁ32
(
ds
, 
šM­
->enumStart);

352 
‹mpM­
->
’umLim™
=
	`ud©a_»adIÁ32
(
ds
, 
šM­
->enumLimit);

353 
size
=
‹mpM­
->
	`g‘Size
();

355 if(
Ëngth
>=0) {

356 if(
Ëngth
<(
pos
+
size
)) {

357 if(
Ëngth
<(
št32_t
)(
Prİ”tyAlŸ£s
)) {

358 
	`ud©a_´štE¼Ü
(
ds
, "upname_swap(EnumToOffset):oo few bytes (%d‡fter header)\n"

360 
Ëngth
, 
‹mpM­
->
’umS¹
,empM­->
’umLim™
, 
pos
);

361 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

367 
ds
->
	`sw­A¼ay32
(ds, 
šM­
, 2*(
EnumV®ue
), 
outM­
, 
pE¼ÜCode
);

370 
ds
->
	`sw­A¼ay16
(ds, 
šM­
->
	`g‘Off£tA¼ay
(), (
‹mpM­
->
’umLim™
-‹mpM­->
’umS¹
)*(
Off£t
),

371 
outM­
->
	`g‘Off£tA¼ay
(), 
pE¼ÜCode
);

374  
size
;

375 
	}
}

377 
št32_t


378 
	gNÚCÚtiguousEnumToOff£t
::
	$sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

379 cÚ¡ 
ušt8_t
 *
šBy‹s
, 
št32_t
 
Ëngth
, ušt8_ˆ*
outBy‹s
,

380 
ušt8_t
 *
‹mp
, 
št32_t
 
pos
,

381 
UE¼ÜCode
 *
pE¼ÜCode
) {

382 cÚ¡ 
NÚCÚtiguousEnumToOff£t
 *
šM­
;

383 
NÚCÚtiguousEnumToOff£t
 *
outM­
, *
‹mpM­
;

384 
št32_t
 
size
;

386 
‹mpM­
=(
NÚCÚtiguousEnumToOff£t
 *)(
‹mp
+
pos
);

387 if(
‹mpM­
->
couÁ
!=0) {

389 
size
=
‹mpM­
->
	`g‘Size
();

390  
size
;

393 
šM­
=(cÚ¡ 
NÚCÚtiguousEnumToOff£t
 *)(
šBy‹s
+
pos
);

394 
outM­
=(
NÚCÚtiguousEnumToOff£t
 *)(
outBy‹s
+
pos
);

396 
‹mpM­
->
couÁ
=
	`ud©a_»adIÁ32
(
ds
, 
šM­
->count);

397 
size
=
‹mpM­
->
	`g‘Size
();

399 if(
Ëngth
>=0) {

400 if(
Ëngth
<(
pos
+
size
)) {

401 if(
Ëngth
<(
št32_t
)(
Prİ”tyAlŸ£s
)) {

402 
	`ud©a_´štE¼Ü
(
ds
, "upname_swap(NonContiguousEnumToOffset):oo few bytes (%d‡fter header)\n"

404 
Ëngth
, 
‹mpM­
->
couÁ
, 
pos
);

405 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

411 
Ëngth
=(1+
‹mpM­
->
couÁ
)*(
EnumV®ue
);

412 
ds
->
	`sw­A¼ay32
(ds, 
šM­
, 
Ëngth
,

413 
outM­
, 
pE¼ÜCode
);

416 
pos
+=
Ëngth
;

417 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
pos
, 
‹mpM­
->
couÁ
*(
Off£t
),

418 
outBy‹s
+
pos
, 
pE¼ÜCode
);

421  
size
;

422 
	}
}

424 
	sNameAndIndex
 {

425 
Off£t
 
	mÇme
, 
	mšdex
;

428 
U_CDECL_BEGIN


429 
št32_t
 
	tU_CALLCONV
 
	tPrİNameCom·»Fn
(cÚ¡ *
	tÇme1
, cÚ¡ *
	tÇme2
);

431 
	sCom·»CÚ‹xt
 {

432 cÚ¡ *
	mch¬s
;

433 
PrİNameCom·»Fn
 *
	m´İCom·»
;

436 
št32_t
 
U_CALLCONV


437 
	$u²ame_com·»Rows
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
Ëá
, cÚ¡ *
right
) {

438 
Com·»CÚ‹xt
 *
cmp
=(Com·»CÚ‹xˆ*)
cÚ‹xt
;

439  
cmp
->
	`´İCom·»
(cmp->
ch¬s
+((cÚ¡ 
NameAndIndex
 *)
Ëá
)->
Çme
,

440 
cmp
->
ch¬s
+((cÚ¡ 
NameAndIndex
 *)
right
)->
Çme
);

441 
	}
}

442 
U_CDECL_END


444 
št32_t


445 
	gNameToEnum
::
	$sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

446 cÚ¡ 
ušt8_t
 *
šBy‹s
, 
št32_t
 
Ëngth
, ušt8_ˆ*
outBy‹s
,

447 
ušt8_t
 *
‹mp
, 
št32_t
 
pos
,

448 
UE¼ÜCode
 *
pE¼ÜCode
) {

449 cÚ¡ 
NameToEnum
 *
šM­
;

450 
NameToEnum
 *
outM­
, *
‹mpM­
;

452 cÚ¡ 
EnumV®ue
 *
šEnumA¼ay
;

453 
EnumV®ue
 *
outEnumA¼ay
;

455 cÚ¡ 
Off£t
 *
šNameA¼ay
;

456 
Off£t
 *
outNameA¼ay
;

458 
NameAndIndex
 *
sÜtA¼ay
;

459 
Com·»CÚ‹xt
 
cmp
;

461 
št32_t
 
i
, 
size
, 
ŞdIndex
;

463 
‹mpM­
=(
NameToEnum
 *)(
‹mp
+
pos
);

464 if(
‹mpM­
->
couÁ
!=0) {

466 
size
=
‹mpM­
->
	`g‘Size
();

467  
size
;

470 
šM­
=(cÚ¡ 
NameToEnum
 *)(
šBy‹s
+
pos
);

471 
outM­
=(
NameToEnum
 *)(
outBy‹s
+
pos
);

473 
‹mpM­
->
couÁ
=
	`ud©a_»adIÁ32
(
ds
, 
šM­
->count);

474 
size
=
‹mpM­
->
	`g‘Size
();

476 if(
Ëngth
>=0) {

477 if(
Ëngth
<(
pos
+
size
)) {

478 if(
Ëngth
<(
št32_t
)(
Prİ”tyAlŸ£s
)) {

479 
	`ud©a_´štE¼Ü
(
ds
, "upname_swap(NameToEnum):oo few bytes (%d‡fter header)\n"

481 
Ëngth
, 
‹mpM­
->
couÁ
, 
pos
);

482 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

488 
ds
->
	`sw­A¼ay32
(ds, 
šM­
, 4, 
outM­
, 
pE¼ÜCode
);

490 
šEnumA¼ay
=
šM­
->
	`g‘EnumA¼ay
();

491 
outEnumA¼ay
=
outM­
->
	`g‘EnumA¼ay
();

493 
šNameA¼ay
=(cÚ¡ 
Off£t
 *)(
šEnumA¼ay
+
‹mpM­
->
couÁ
);

494 
outNameA¼ay
=(
Off£t
 *)(
outEnumA¼ay
+
‹mpM­
->
couÁ
);

496 if(
ds
->
šCh¬£t
==ds->
outCh¬£t
) {

498 
ds
->
	`sw­A¼ay32
(ds, 
šEnumA¼ay
, 
‹mpM­
->
couÁ
*4, 
outEnumA¼ay
, 
pE¼ÜCode
);

499 
ds
->
	`sw­A¼ay16
(ds, 
šNameA¼ay
, 
‹mpM­
->
couÁ
*2, 
outNameA¼ay
, 
pE¼ÜCode
);

500  
size
;

512 
sÜtA¼ay
=(
NameAndIndex
 *)
‹mpM­
->
	`g‘EnumA¼ay
();

513 
i
=0; i<
‹mpM­
->
couÁ
; ++i) {

514 
sÜtA¼ay
[
i
].
Çme
=
	`ud©a_»adIÁ16
(
ds
, 
šNameA¼ay
[i]);

515 
sÜtA¼ay
[
i
].
šdex
=(
Off£t
)i;

522 
cmp
.
ch¬s
=(cÚ¡ *)
outBy‹s
;

523 ià(
ds
->
outCh¬£t
==
U_ASCII_FAMILY
) {

524 
cmp
.
´İCom·»
=
u´v_com·»ASCIIPrİ”tyNames
;

527 
cmp
.
´İCom·»
=
u´v_com·»EBCDICPrİ”tyNames
;

529 
	`u´v_sÜtA¼ay
(
sÜtA¼ay
, 
‹mpM­
->
couÁ
, (
NameAndIndex
),

530 
u²ame_com·»Rows
, &
cmp
,

531 
TRUE
, 
pE¼ÜCode
);

532 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

533 
	`ud©a_´štE¼Ü
(
ds
, "upname_swap(NameToEnum).uprv_sortArray(%d items) failed\n",

534 
‹mpM­
->
couÁ
);

539 if(
šEnumA¼ay
!=
outEnumA¼ay
) {

540 
i
=0; i<
‹mpM­
->
couÁ
; ++i) {

541 
ŞdIndex
=
sÜtA¼ay
[
i
].
šdex
;

542 
ds
->
	`sw­A¼ay32
(ds, 
šEnumA¼ay
+
ŞdIndex
, 4, 
outEnumA¼ay
+
i
, 
pE¼ÜCode
);

543 
ds
->
	`sw­A¼ay16
(ds, 
šNameA¼ay
+
ŞdIndex
, 2, 
outNameA¼ay
+
i
, 
pE¼ÜCode
);

550 
EnumV®ue
 *
‹mpEnumA¼ay
;

551 
Off£t
 *
ŞdIndexes
;

554 
i
=0; i<
‹mpM­
->
couÁ
; ++i) {

555 
ds
->
	`wr™eUIÁ16
((
ušt16_t
 *)
outNameA¼ay
+
i
, (ušt16_t)
sÜtA¼ay
[i].
Çme
);

568 
‹mpEnumA¼ay
=(
EnumV®ue
 *)
sÜtA¼ay
;

569 
ŞdIndexes
=(
Off£t
 *)(
sÜtA¼ay
+
‹mpM­
->
couÁ
);

572 
i
=0; i<
‹mpM­
->
couÁ
; ++i) {

573 
ŞdIndexes
[
i
]=
sÜtA¼ay
[i].
šdex
;

577 
i
=0; i<
‹mpM­
->
couÁ
; ++i) {

578 
ds
->
	`sw­A¼ay32
(ds, 
šEnumA¼ay
+
ŞdIndexes
[
i
], 4, 
‹mpEnumA¼ay
+i, 
pE¼ÜCode
);

582 
	`u´v_memıy
(
outEnumA¼ay
, 
‹mpEnumA¼ay
, 
‹mpM­
->
couÁ
*4);

586  
size
;

587 
	}
}

589 
št32_t


590 
	gPrİ”tyAlŸ£s
::
	$sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

591 cÚ¡ 
ušt8_t
 *
šBy‹s
, 
št32_t
 
Ëngth
, ušt8_ˆ*
outBy‹s
,

592 
UE¼ÜCode
 *
pE¼ÜCode
) {

593 cÚ¡ 
Prİ”tyAlŸ£s
 *
šAlŸ£s
;

594 
Prİ”tyAlŸ£s
 *
outAlŸ£s
;

595 
Prİ”tyAlŸ£s
 
®Ÿ£s
;

597 cÚ¡ 
V®ueM­
 *
šV®ueM­s
;

598 
V®ueM­
 *
outV®ueM­s
;

599 
V®ueM­
 
v®ueM­
;

601 
št32_t
 
i
;

603 
šAlŸ£s
=(cÚ¡ 
Prİ”tyAlŸ£s
 *)
šBy‹s
;

604 
outAlŸ£s
=(
Prİ”tyAlŸ£s
 *)
outBy‹s
;

607 
i
=0; i<(
št32_t
)(
Prİ”tyAlŸ£s
)/2; ++i) {

608 ((
ušt16_t
 *)&
®Ÿ£s
)[
i
]=
ds
->
	`»adUIÁ16
(((cÚ¡ ušt16_ˆ*)
šBy‹s
)[i]);

611 if(
Ëngth
>=0) {

612 if(
Ëngth
<
®Ÿ£s
.
tÙ®_size
) {

613 
	`ud©a_´štE¼Ü
(
ds
, "upname_swap():oo few bytes (%d‡fter header) for‡ll of…names.icu\n",

614 
Ëngth
);

615 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

620 if(
šBy‹s
!=
outBy‹s
) {

621 
	`u´v_memıy
(
outBy‹s
, 
šBy‹s
, 
®Ÿ£s
.
tÙ®_size
);

625 
ds
->
	`sw­A¼ay16
(ds, 
šAlŸ£s
, (
Prİ”tyAlŸ£s
), 
outAlŸ£s
, 
pE¼ÜCode
);

628 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
®Ÿ£s
.
ÇmeGroupPoŞ_off£t
,

629 
®Ÿ£s
.
¡ršgPoŞ_off£t
-®Ÿ£s.
ÇmeGroupPoŞ_off£t
,

630 
outBy‹s
+
®Ÿ£s
.
ÇmeGroupPoŞ_off£t
, 
pE¼ÜCode
);

633 
	`ud©a_sw­InvSŒšgBlock
(
ds
, 
šBy‹s
+
®Ÿ£s
.
¡ršgPoŞ_off£t
,

634 
®Ÿ£s
.
tÙ®_size
-®Ÿ£s.
¡ršgPoŞ_off£t
,

635 
outBy‹s
+
®Ÿ£s
.
¡ršgPoŞ_off£t
, 
pE¼ÜCode
);

648 
LoÿlMemÜy
<
ušt8_t
> 
‹mp
;

649 if(
‹mp
.
	`®loÿ‹In¡—dAndRe£t
(
®Ÿ£s
.
tÙ®_size
)==
NULL
) {

650 
	`ud©a_´štE¼Ü
(
ds
, "upname_swap(): unableo‡llocateemp memory (%d bytes)\n",

651 
®Ÿ£s
.
tÙ®_size
);

652 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

657 
NÚCÚtiguousEnumToOff£t
::
	`sw­
(
ds
, 
šBy‹s
, 
Ëngth
, 
outBy‹s
,

658 
‹mp
.
	`g‘AlŸs
(), 
®Ÿ£s
.
’umToName_off£t
, 
pE¼ÜCode
);

661 
NameToEnum
::
	`sw­
(
ds
, 
šBy‹s
, 
Ëngth
, 
outBy‹s
,

662 
‹mp
.
	`g‘AlŸs
(), 
®Ÿ£s
.
ÇmeToEnum_off£t
, 
pE¼ÜCode
);

665 
NÚCÚtiguousEnumToOff£t
::
	`sw­
(
ds
, 
šBy‹s
, 
Ëngth
, 
outBy‹s
,

666 
‹mp
.
	`g‘AlŸs
(), 
®Ÿ£s
.
’umToV®ue_off£t
, 
pE¼ÜCode
);

669 
šV®ueM­s
=(cÚ¡ 
V®ueM­
 *)(
šBy‹s
+
®Ÿ£s
.
v®ueM­_off£t
);

670 
outV®ueM­s
=(
V®ueM­
 *)(
outBy‹s
+
®Ÿ£s
.
v®ueM­_off£t
);

672 
i
=0; i<
®Ÿ£s
.
v®ueM­_couÁ
; ++i) {

673 
v®ueM­
.
’umToName_off£t
=
	`ud©a_»adIÁ16
(
ds
, 
šV®ueM­s
[
i
].enumToName_offset);

674 
v®ueM­
.
ncEnumToName_off£t
=
	`ud©a_»adIÁ16
(
ds
, 
šV®ueM­s
[
i
].ncEnumToName_offset);

675 
v®ueM­
.
ÇmeToEnum_off£t
=
	`ud©a_»adIÁ16
(
ds
, 
šV®ueM­s
[
i
].nameToEnum_offset);

677 if(
v®ueM­
.
’umToName_off£t
!=0) {

678 
EnumToOff£t
::
	`sw­
(
ds
, 
šBy‹s
, 
Ëngth
, 
outBy‹s
,

679 
‹mp
.
	`g‘AlŸs
(), 
v®ueM­
.
’umToName_off£t
,

680 
pE¼ÜCode
);

681 } if(
v®ueM­
.
ncEnumToName_off£t
!=0) {

682 
NÚCÚtiguousEnumToOff£t
::
	`sw­
(
ds
, 
šBy‹s
, 
Ëngth
, 
outBy‹s
,

683 
‹mp
.
	`g‘AlŸs
(), 
v®ueM­
.
ncEnumToName_off£t
,

684 
pE¼ÜCode
);

686 if(
v®ueM­
.
ÇmeToEnum_off£t
!=0) {

687 
NameToEnum
::
	`sw­
(
ds
, 
šBy‹s
, 
Ëngth
, 
outBy‹s
,

688 
‹mp
.
	`g‘AlŸs
(), 
v®ueM­
.
ÇmeToEnum_off£t
,

689 
pE¼ÜCode
);

694 
ds
->
	`sw­A¼ay16
(ds, 
šV®ueM­s
, 
®Ÿ£s
.
v®ueM­_couÁ
*(
V®ueM­
),

695 
outV®ueM­s
, 
pE¼ÜCode
);

700  
®Ÿ£s
.
tÙ®_size
;

701 
	}
}

703 
U_CAPI
 
št32_t
 
U_EXPORT2


704 
	$u²ame_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

705 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

706 
UE¼ÜCode
 *
pE¼ÜCode
) {

707 cÚ¡ 
UD©aInfo
 *
pInfo
;

708 
št32_t
 
h—d”Size
;

710 cÚ¡ 
ušt8_t
 *
šBy‹s
;

711 
ušt8_t
 *
outBy‹s
;

714 
h—d”Size
=
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
pE¼ÜCode
);

715 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

720 
pInfo
=(cÚ¡ 
UD©aInfo
 *)((cÚ¡ *)
šD©a
+4);

722 
pInfo
->
d©aFÜm©
[0]==0x70 &&

723 
pInfo
->
d©aFÜm©
[1]==0x6e &&

724 
pInfo
->
d©aFÜm©
[2]==0x61 &&

725 
pInfo
->
d©aFÜm©
[3]==0x6d &&

726 
pInfo
->
fÜm©V”siÚ
[0]==1

728 
	`ud©a_´štE¼Ü
(
ds
, "upname_swap(): data format %02x.%02x.%02x.%02x (format version %02x) is‚ot„ecognized‡s…names.icu\n",

729 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

730 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3],

731 
pInfo
->
fÜm©V”siÚ
[0]);

732 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

736 
šBy‹s
=(cÚ¡ 
ušt8_t
 *)
šD©a
+
h—d”Size
;

737 
outBy‹s
=(
ušt8_t
 *)
outD©a
+
h—d”Size
;

739 if(
Ëngth
>=0) {

740 
Ëngth
-=
h—d”Size
;

741 if(
Ëngth
<(
št32_t
)(
Prİ”tyAlŸ£s
)) {

742 
	`ud©a_´štE¼Ü
(
ds
, "upname_swap():oo few bytes (%d‡fter header) for…names.icu\n",

743 
Ëngth
);

744 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

749  
h—d”Size
+
Prİ”tyAlŸ£s
::
	`sw­
(
ds
, 
šBy‹s
, 
Ëngth
, 
outBy‹s
, 
pE¼ÜCode
);

750 
	}
}

	@propname.h

11 #iâdeà
PROPNAME_H


12 
	#PROPNAME_H


	)

14 
	~"unicode/uty³s.h
"

15 
	~"unicode/uch¬.h
"

16 
	~"ud©aswp.h
"

17 
	~"u´İs.h
"

29 
U_CDECL_BEGIN


49 
U_CAPI
 
št32_t
 
U_EXPORT2


50 
u´v_com·»ASCIIPrİ”tyNames
(cÚ¡ *
Çme1
, cÚ¡ *
Çme2
);

52 
U_CAPI
 
št32_t
 
U_EXPORT2


53 
u´v_com·»EBCDICPrİ”tyNames
(cÚ¡ *
Çme1
, cÚ¡ *
Çme2
);

55 #ià
U_CHARSET_FAMILY
==
U_ASCII_FAMILY


56 
	#u´v_com·»Prİ”tyNames
 
u´v_com·»ASCIIPrİ”tyNames


	)

57 #–ià
U_CHARSET_FAMILY
==
U_EBCDIC_FAMILY


58 
	#u´v_com·»Prİ”tyNames
 
u´v_com·»EBCDICPrİ”tyNames


	)

60 #”rÜ 
U_CHARSET_FAMILY
 
is
 
nÙ
 
v®id


63 
	gU_CDECL_END


67 
	#PNAME_DATA_NAME
 "²ames"

	)

68 
	#PNAME_DATA_TYPE
 "icu"

	)

73 
	#PNAME_SIG_0
 ((
ušt8_t
)0x70è

	)

74 
	#PNAME_SIG_1
 ((
ušt8_t
)0x6Eè

	)

75 
	#PNAME_SIG_2
 ((
ušt8_t
)0x61è

	)

76 
	#PNAME_SIG_3
 ((
ušt8_t
)0x6Dè

	)

78 
	#PNAME_FORMAT_VERSION
 ((
št8_t
)1è

	)

84 
U_CAPI
 
št32_t
 
U_EXPORT2


85 
u²ame_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

86 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

87 
UE¼ÜCode
 *
pE¼ÜCode
);

90 #ifdeà
XP_CPLUSPLUS


92 
şass
 
	gBud”
;

94 
U_NAMESPACE_BEGIN


103 
št16_t
 
	tOff£t
;

105 
	#MAX_OFFSET
 0x7FFF

	)

116 
št32_t
 
	tEnumV®ue
;

135 
	sV®ueM­
 {

140 
Off£t
 
	m’umToName_off£t
;

141 
Off£t
 
	mncEnumToName_off£t
;

143 
Off£t
 
	mÇmeToEnum_off£t
;

159 şas 
	cPrİ”tyAlŸ£s
 {

164 
Off£t
 
	m’umToName_off£t
;

167 
Off£t
 
	mÇmeToEnum_off£t
;

171 
Off£t
 
	m’umToV®ue_off£t
;

175 
št16_t
 
	mtÙ®_size
;

176 
Off£t
 
	mv®ueM­_off£t
;

177 
št16_t
 
	mv®ueM­_couÁ
;

178 
Off£t
 
	mÇmeGroupPoŞ_off£t
;

179 
št16_t
 
	mÇmeGroupPoŞ_couÁ
;

180 
Off£t
 
	m¡ršgPoŞ_off£t
;

181 
št16_t
 
	m¡ršgPoŞ_couÁ
;

185 
ä›nd
 
	mşass
 ::
Bud”
;

187 cÚ¡ 
V®ueM­
* 
	$g‘V®ueM­
(
EnumV®ue
 
´İ
) const;

189 cÚ¡ * 
	$choo£NameInGroup
(
Off£t
 
off£t
,

190 
UPrİ”tyNameChoiû
 
choiû
) const;

192 
public
:

194 
šlše
 cÚ¡ 
št8_t
* 
	$g‘Poš‹r
(
Off£t
 
o
) const {

195  ((cÚ¡ 
št8_t
*è
this
è+ 
o
;

198 
šlše
 cÚ¡ 
št8_t
* 
	$g‘Poš‹rNuÎ
(
Off£t
 
o
) const {

199  
o
 ? 
	`g‘Poš‹r
(oè: 
NULL
;

200 
	}
}

202 
šlše
 cÚ¡ * 
	$g‘Prİ”tyName
(
EnumV®ue
 
´İ
,

203 
UPrİ”tyNameChoiû
 
choiû
) const;

205 
šlše
 
EnumV®ue
 
	$g‘Prİ”tyEnum
(cÚ¡ * 
®Ÿs
) const;

207 
šlše
 cÚ¡ * 
	$g‘Prİ”tyV®ueName
(
EnumV®ue
 
´İ
, EnumV®u
v®ue
,

208 
UPrİ”tyNameChoiû
 
choiû
) const;

210 
šlše
 
EnumV®ue
 
	$g‘Prİ”tyV®ueEnum
(
EnumV®ue
 
´İ
,

211 cÚ¡ * 
®Ÿs
) const;

213 
št32_t


214 
	`sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

215 cÚ¡ 
ušt8_t
 *
šBy‹s
, 
št32_t
 
Ëngth
, ušt8_ˆ*
outBy‹s
,

216 
UE¼ÜCode
 *
pE¼ÜCode
);

217 
	}
};

227 şas 
	cEnumToOff£t
 {

230 
EnumV®ue
 
	m’umS¹
;

231 
EnumV®ue
 
	m’umLim™
;

232 
Off£t
 
	m_off£tA¼ay
;

235 
ä›nd
 
	mşass
 ::
Bud”
;

237 
Off£t
* 
	$g‘Off£tA¼ay
() {

238  &
_off£tA¼ay
;

241 cÚ¡ 
Off£t
* 
	$g‘Off£tA¼ay
() const {

242  &
_off£tA¼ay
;

243 
	}
}

245 
št32_t
 
	$g‘Size
(
št32_t
 
n
) {

246  (
EnumToOff£t
è+ (
Off£t
è* (
n
 - 1);

247 
	}
}

249 
št32_t
 
	$g‘Size
() {

250  
	`g‘Size
(
’umLim™
 - 
’umS¹
);

251 
	}
}

253 
	gpublic
:

255 
Off£t
 
	$g‘Off£t
(
EnumV®ue
 
’umProbe
) const {

256 ià(
’umProbe
 < 
’umS¹
 ||

257 
’umProbe
 >ğ
’umLim™
) {

260 cÚ¡ 
Off£t
* 
p
 = 
	`g‘Off£tA¼ay
();

261  
p
[
’umProbe
 - 
’umS¹
];

262 
	}
}

264 
št32_t


265 
sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

266 cÚ¡ 
ušt8_t
 *
šBy‹s
, 
št32_t
 
Ëngth
, ušt8_ˆ*
outBy‹s
,

267 
ušt8_t
 *
‹mp
, 
št32_t
 
pos
,

268 
UE¼ÜCode
 *
pE¼ÜCode
);

279 şas 
	cNÚCÚtiguousEnumToOff£t
 {

282 
št32_t
 
	mcouÁ
;

283 
EnumV®ue
 
	m_’umA¼ay
;

287 
ä›nd
 
	mşass
 ::
Bud”
;

289 
EnumV®ue
* 
	$g‘EnumA¼ay
() {

290  &
_’umA¼ay
;

293 cÚ¡ 
EnumV®ue
* 
	$g‘EnumA¼ay
() const {

294  &
_’umA¼ay
;

295 
	}
}

297 
Off£t
* 
	$g‘Off£tA¼ay
() {

298  (
Off£t
*è(
	`g‘EnumA¼ay
(è+ 
couÁ
);

299 
	}
}

301 cÚ¡ 
Off£t
* 
	$g‘Off£tA¼ay
() const {

302  (
Off£t
*è(
	`g‘EnumA¼ay
(è+ 
couÁ
);

303 
	}
}

305 
št32_t
 
	$g‘Size
(
št32_t
 
n
) {

306  (
št32_t
è+ ((
EnumV®ue
è+ (
Off£t
)è* 
n
;

307 
	}
}

309 
št32_t
 
	$g‘Size
() {

310  
	`g‘Size
(
couÁ
);

311 
	}
}

313 
	gpublic
:

315 
Off£t
 
	$g‘Off£t
(
EnumV®ue
 
’umProbe
) const {

316 cÚ¡ 
EnumV®ue
* 
e
 = 
	`g‘EnumA¼ay
();

317 cÚ¡ 
Off£t
* 
p
 = 
	`g‘Off£tA¼ay
();

320 
št32_t
 
i
=0; i<
couÁ
; ++i) {

321 ià(
e
[
i
] < 
’umProbe
) ;

322 ià(
e
[
i
] > 
’umProbe
) ;

323  
p
[
i
];

326 
	}
}

328 
št32_t


329 
sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

330 cÚ¡ 
ušt8_t
 *
šBy‹s
, 
št32_t
 
Ëngth
, ušt8_ˆ*
outBy‹s
,

331 
ušt8_t
 *
‹mp
, 
št32_t
 
pos
,

332 
UE¼ÜCode
 *
pE¼ÜCode
);

341 şas 
	cNameToEnum
 {

344 
št32_t
 
	mcouÁ
;

345 
EnumV®ue
 
	m_’umA¼ay
;

349 
ä›nd
 
	mşass
 ::
Bud”
;

351 
EnumV®ue
* 
	$g‘EnumA¼ay
() {

352  &
_’umA¼ay
;

355 cÚ¡ 
EnumV®ue
* 
	$g‘EnumA¼ay
() const {

356  &
_’umA¼ay
;

357 
	}
}

359 
Off£t
* 
	$g‘NameA¼ay
() {

360  (
Off£t
*è(
	`g‘EnumA¼ay
(è+ 
couÁ
);

361 
	}
}

363 cÚ¡ 
Off£t
* 
	$g‘NameA¼ay
() const {

364  (
Off£t
*è(
	`g‘EnumA¼ay
(è+ 
couÁ
);

365 
	}
}

367 
št32_t
 
	$g‘Size
(
št32_t
 
n
) {

368  (
št32_t
è+ ((
Off£t
è+ (
EnumV®ue
)è* 
n
;

369 
	}
}

371 
št32_t
 
	$g‘Size
() {

372  
	`g‘Size
(
couÁ
);

373 
	}
}

375 
	gpublic
:

377 
EnumV®ue
 
	$g‘Enum
(cÚ¡ * 
®Ÿs
, cÚ¡ 
Prİ”tyAlŸ£s
& 
d©a
) const {

379 cÚ¡ 
Off£t
* 
n
 = 
	`g‘NameA¼ay
();

380 cÚ¡ 
EnumV®ue
* 
e
 = 
	`g‘EnumA¼ay
();

384 
št32_t
 
i
=0; i<
couÁ
; ++i) {

385 cÚ¡ * 
Çme
 = (cÚ¡ *è
d©a
.
	`g‘Poš‹r
(
n
[
i
]);

386 
št32_t
 
c
 = 
	`u´v_com·»Prİ”tyNames
(
®Ÿs
, 
Çme
);

387 ià(
c
 > 0) ;

388 ià(
c
 < 0) ;

389  
e
[
i
];

392  
UCHAR_INVALID_CODE
;

393 
	}
}

395 
št32_t


396 
sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

397 cÚ¡ 
ušt8_t
 *
šBy‹s
, 
št32_t
 
Ëngth
, ušt8_ˆ*
outBy‹s
,

398 
ušt8_t
 *
‹mp
, 
št32_t
 
pos
,

399 
UE¼ÜCode
 *
pE¼ÜCode
);

511 
	gU_NAMESPACE_END


	@propsvec.c

19 
	~<¡dlib.h
>

20 
	~"unicode/uty³s.h
"

21 
	~"cmemÜy.h
"

22 
	~"uŒ›.h
"

23 
	~"uŒ›2.h
"

24 
	~"u¬rsÜt.h
"

25 
	~"´İsvec.h
"

27 
	sUPrİsVeùÜs
 {

28 
ušt32_t
 *
	mv
;

29 
št32_t
 
	mcŞumns
;

30 
št32_t
 
	mmaxRows
;

31 
št32_t
 
	mrows
;

32 
št32_t
 
	m´evRow
;

33 
UBoŞ
 
	misCom·ùed
;

36 
	#UPVEC_INITIAL_ROWS
 (1<<12)

	)

37 
	#UPVEC_MEDIUM_ROWS
 ((
št32_t
)1<<16)

	)

38 
	#UPVEC_MAX_ROWS
 (
UPVEC_MAX_CP
+1)

	)

40 
U_CAPI
 
UPrİsVeùÜs
 * 
U_EXPORT2


41 
	$upvec_İ’
(
št32_t
 
cŞumns
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

42 
UPrİsVeùÜs
 *
pv
;

43 
ušt32_t
 *
v
, *
row
;

44 
ušt32_t
 
ı
;

46 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

47  
NULL
;

49 if(
cŞumns
<1) {

50 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

51  
NULL
;

53 
cŞumns
+=2;

55 
pv
=(
UPrİsVeùÜs
 *)
	`u´v_m®loc
((UPropsVectors));

56 
v
=(
ušt32_t
 *)
	`u´v_m®loc
(
UPVEC_INITIAL_ROWS
*
cŞumns
*4);

57 if(
pv
==
NULL
 || 
v
==NULL) {

58 
	`u´v_ä“
(
pv
);

59 
	`u´v_ä“
(
v
);

60 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

61  
NULL
;

63 
	`u´v_mem£t
(
pv
, 0, (
UPrİsVeùÜs
));

64 
pv
->
v
=v;

65 
pv
->
cŞumns
=columns;

66 
pv
->
maxRows
=
UPVEC_INITIAL_ROWS
;

67 
pv
->
rows
=2+(
UPVEC_MAX_CP
-
UPVEC_FIRST_SPECIAL_CP
);

70 
row
=
pv
->
v
;

71 
	`u´v_mem£t
(
row
, 0, 
pv
->
rows
*
cŞumns
*4);

72 
row
[0]=0;

73 
row
[1]=0x110000;

74 
row
+=
cŞumns
;

75 
ı
=
UPVEC_FIRST_SPECIAL_CP
; cp<=
UPVEC_MAX_CP
; ++cp) {

76 
row
[0]=
ı
;

77 
row
[1]=
ı
+1;

78 
row
+=
cŞumns
;

80  
pv
;

81 
	}
}

83 
U_CAPI
 
U_EXPORT2


84 
	$upvec_şo£
(
UPrİsVeùÜs
 *
pv
) {

85 if(
pv
!=
NULL
) {

86 
	`u´v_ä“
(
pv
->
v
);

87 
	`u´v_ä“
(
pv
);

89 
	}
}

91 
ušt32_t
 *

92 
	$_fšdRow
(
UPrİsVeùÜs
 *
pv
, 
UCh¬32
 
¿ngeS¹
) {

93 
ušt32_t
 *
row
;

94 
št32_t
 
cŞumns
, 
i
, 
¡¬t
, 
lim™
, 
´evRow
, 
rows
;

96 
cŞumns
=
pv
->columns;

97 
rows
=
lim™
=
pv
->rows;

98 
´evRow
=
pv
->prevRow;

101 
row
=
pv
->
v
+
´evRow
*
cŞumns
;

102 if(
¿ngeS¹
>=(
UCh¬32
)
row
[0]) {

103 if(
¿ngeS¹
<(
UCh¬32
)
row
[1]) {

105  
row
;

106 } if(
¿ngeS¹
<(
UCh¬32
)(
row
+=
cŞumns
)[1]) {

108 
pv
->
´evRow
=prevRow+1;

109  
row
;

110 } if(
¿ngeS¹
<(
UCh¬32
)(
row
+=
cŞumns
)[1]) {

112 
pv
->
´evRow
=prevRow+2;

113  
row
;

114 } if((
¿ngeS¹
-(
UCh¬32
)
row
[1])<10) {

116 
´evRow
+=2;

118 ++
´evRow
;

119 
row
+=
cŞumns
;

120 } 
¿ngeS¹
>=(
UCh¬32
)
row
[1]);

121 
pv
->
´evRow
=prevRow;

122  
row
;

124 } if(
¿ngeS¹
<(
UCh¬32
)
pv
->
v
[1]) {

126 
pv
->
´evRow
=0;

127  
pv
->
v
;

131 
¡¬t
=0;

132 
¡¬t
<
lim™
-1) {

133 
i
=(
¡¬t
+
lim™
)/2;

134 
row
=
pv
->
v
+
i
*
cŞumns
;

135 if(
¿ngeS¹
<(
UCh¬32
)
row
[0]) {

136 
lim™
=
i
;

137 } if(
¿ngeS¹
<(
UCh¬32
)
row
[1]) {

138 
pv
->
´evRow
=
i
;

139  
row
;

141 
¡¬t
=
i
;

146 
pv
->
´evRow
=
¡¬t
;

147  
pv
->
v
+
¡¬t
*
cŞumns
;

148 
	}
}

150 
U_CAPI
 
U_EXPORT2


151 
	$upvec_£tV®ue
(
UPrİsVeùÜs
 *
pv
,

152 
UCh¬32
 
¡¬t
, UCh¬32 
’d
,

153 
št32_t
 
cŞumn
,

154 
ušt32_t
 
v®ue
, ušt32_ˆ
mask
,

155 
UE¼ÜCode
 *
pE¼ÜCode
) {

156 
ušt32_t
 *
fœ¡Row
, *
Ï¡Row
;

157 
št32_t
 
cŞumns
;

158 
UCh¬32
 
lim™
;

159 
UBoŞ
 
¥l™Fœ¡Row
, 
¥l™La¡Row
;

162 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

165 ifĞ
pv
==
NULL
 ||

166 
¡¬t
<0 || s¹>
’d
 ||ƒnd>
UPVEC_MAX_CP
 ||

167 
cŞumn
<0 || cŞumn>=(
pv
->
cŞumns
-2)

169 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

172 if(
pv
->
isCom·ùed
) {

173 *
pE¼ÜCode
=
U_NO_WRITE_PERMISSION
;

176 
lim™
=
’d
+1;

179 
cŞumns
=
pv
->columns;

180 
cŞumn
+=2;

181 
v®ue
&=
mask
;

186 
fœ¡Row
=
	`_fšdRow
(
pv
, 
¡¬t
);

187 
Ï¡Row
=
	`_fšdRow
(
pv
, 
’d
);

194 
¥l™Fœ¡Row
ğ(
UBoŞ
)(
¡¬t
!=(
UCh¬32
)
fœ¡Row
[0] && 
v®ue
!=(fœ¡Row[
cŞumn
]&
mask
));

195 
¥l™La¡Row
ğ(
UBoŞ
)(
lim™
!=(
UCh¬32
)
Ï¡Row
[1] && 
v®ue
!=Öa¡Row[
cŞumn
]&
mask
));

198 if(
¥l™Fœ¡Row
 || 
¥l™La¡Row
) {

199 
št32_t
 
couÁ
, 
rows
;

201 
rows
=
pv
->rows;

202 if((
rows
+
¥l™Fœ¡Row
+
¥l™La¡Row
)>
pv
->
maxRows
) {

203 
ušt32_t
 *
ÃwVeùÜs
;

204 
št32_t
 
ÃwMaxRows
;

206 if(
pv
->
maxRows
<
UPVEC_MEDIUM_ROWS
) {

207 
ÃwMaxRows
=
UPVEC_MEDIUM_ROWS
;

208 } if(
pv
->
maxRows
<
UPVEC_MAX_ROWS
) {

209 
ÃwMaxRows
=
UPVEC_MAX_ROWS
;

212 *
pE¼ÜCode
=
U_INTERNAL_PROGRAM_ERROR
;

215 
ÃwVeùÜs
=(
ušt32_t
 *)
	`u´v_m®loc
(
ÃwMaxRows
*
cŞumns
*4);

216 if(
ÃwVeùÜs
==
NULL
) {

217 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

220 
	`u´v_memıy
(
ÃwVeùÜs
, 
pv
->
v
, 
rows
*
cŞumns
*4);

221 
fœ¡Row
=
ÃwVeùÜs
+(fœ¡Row-
pv
->
v
);

222 
Ï¡Row
=
ÃwVeùÜs
+Öa¡Row-
pv
->
v
);

223 
	`u´v_ä“
(
pv
->
v
);

224 
pv
->
v
=
ÃwVeùÜs
;

225 
pv
->
maxRows
=
ÃwMaxRows
;

229 
couÁ
 = (
št32_t
)((
pv
->
v
+
rows
*
cŞumns
)-(
Ï¡Row
+columns));

230 if(
couÁ
>0) {

231 
	`u´v_memmove
(

232 
Ï¡Row
+(1+
¥l™Fœ¡Row
+
¥l™La¡Row
)*
cŞumns
,

233 
Ï¡Row
+
cŞumns
,

234 
couÁ
*4);

236 
pv
->
rows
ôows+
¥l™Fœ¡Row
+
¥l™La¡Row
;

239 if(
¥l™Fœ¡Row
) {

241 
couÁ
 = (
št32_t
)((
Ï¡Row
-
fœ¡Row
)+
cŞumns
);

242 
	`u´v_memmove
(
fœ¡Row
+
cŞumns
, fœ¡Row, 
couÁ
*4);

243 
Ï¡Row
+=
cŞumns
;

246 
fœ¡Row
[1]=fœ¡Row[
cŞumns
]=(
ušt32_t
)
¡¬t
;

247 
fœ¡Row
+=
cŞumns
;

251 if(
¥l™La¡Row
) {

253 
	`u´v_memıy
(
Ï¡Row
+
cŞumns
,†astRow, columns*4);

256 
Ï¡Row
[1]öa¡Row[
cŞumns
]=(
ušt32_t
)
lim™
;

261 
pv
->
´evRow
=(
št32_t
)((
Ï¡Row
-Õv->
v
))/
cŞumns
);

264 
fœ¡Row
+=
cŞumn
;

265 
Ï¡Row
+=
cŞumn
;

266 
mask
=~mask;

268 *
fœ¡Row
=(*fœ¡Row&
mask
)|
v®ue
;

269 if(
fœ¡Row
==
Ï¡Row
) {

272 
fœ¡Row
+=
cŞumns
;

274 
	}
}

276 
U_CAPI
 
ušt32_t
 
U_EXPORT2


277 
	$upvec_g‘V®ue
(cÚ¡ 
UPrİsVeùÜs
 *
pv
, 
UCh¬32
 
c
, 
št32_t
 
cŞumn
) {

278 
ušt32_t
 *
row
;

279 
UPrİsVeùÜs
 *
nıv
;

281 if(
pv
->
isCom·ùed
 || 
c
<0 || c>
UPVEC_MAX_CP
 || 
cŞumn
<0 || cŞumn>=Õv->
cŞumns
-2)) {

284 
nıv
=(
UPrİsVeùÜs
 *)
pv
;

285 
row
=
	`_fšdRow
(
nıv
, 
c
);

286  
row
[2+
cŞumn
];

287 
	}
}

289 
U_CAPI
 
ušt32_t
 * 
U_EXPORT2


290 
	$upvec_g‘Row
(cÚ¡ 
UPrİsVeùÜs
 *
pv
, 
št32_t
 
rowIndex
,

291 
UCh¬32
 *
pRªgeS¹
, UCh¬32 *
pRªgeEnd
) {

292 
ušt32_t
 *
row
;

293 
št32_t
 
cŞumns
;

295 if(
pv
->
isCom·ùed
 || 
rowIndex
<0 ||„owIndex>õv->
rows
) {

296  
NULL
;

299 
cŞumns
=
pv
->columns;

300 
row
=
pv
->
v
+
rowIndex
*
cŞumns
;

301 if(
pRªgeS¹
!=
NULL
) {

302 *
pRªgeS¹
=(
UCh¬32
)
row
[0];

304 if(
pRªgeEnd
!=
NULL
) {

305 *
pRªgeEnd
=(
UCh¬32
)
row
[1]-1;

307  
row
+2;

308 
	}
}

310 
št32_t
 
U_CALLCONV


311 
	$upvec_com·»Rows
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
l
, cÚ¡ *
r
) {

312 cÚ¡ 
ušt32_t
 *
Ëá
=(cÚ¡ ušt32_ˆ*)
l
, *
right
=(cÚ¡ ušt32_ˆ*)
r
;

313 cÚ¡ 
UPrİsVeùÜs
 *
pv
=(cÚ¡ UPrİsVeùÜ *)
cÚ‹xt
;

314 
št32_t
 
i
, 
couÁ
, 
cŞumns
;

316 
couÁ
=
cŞumns
=
pv
->columns;

319 
i
=2;

321 if(
Ëá
[
i
]!=
right
[i]) {

322  
Ëá
[
i
]<
right
[i] ? -1 : 1;

324 if(++
i
==
cŞumns
) {

325 
i
=0;

327 } --
couÁ
>0);

330 
	}
}

332 
U_CAPI
 
U_EXPORT2


333 
	$upvec_com·ù
(
UPrİsVeùÜs
 *
pv
, 
UPVecCom·ùHªdËr
 *
hªdËr
, *
cÚ‹xt
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

334 
ušt32_t
 *
row
;

335 
št32_t
 
i
, 
cŞumns
, 
v®ueCŞumns
, 
rows
, 
couÁ
;

336 
UCh¬32
 
¡¬t
, 
lim™
;

339 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

342 if(
hªdËr
==
NULL
) {

343 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

346 if(
pv
->
isCom·ùed
) {

351 
pv
->
isCom·ùed
=
TRUE
;

353 
rows
=
pv
->rows;

354 
cŞumns
=
pv
->columns;

355 
v®ueCŞumns
=
cŞumns
-2;

358 
	`u´v_sÜtA¼ay
(
pv
->
v
, 
rows
, 
cŞumns
*4,

359 
upvec_com·»Rows
, 
pv
, 
FALSE
, 
pE¼ÜCode
);

360 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

369 
row
=
pv
->
v
;

370 
couÁ
=-
v®ueCŞumns
;

371 
i
=0; i<
rows
; ++i) {

372 
¡¬t
=(
UCh¬32
)
row
[0];

375 if(
couÁ
<0 || 0!=
	`u´v_memcmp
(
row
+2,„ow-
v®ueCŞumns
, valueColumns*4)) {

376 
couÁ
+=
v®ueCŞumns
;

379 if(
¡¬t
>=
UPVEC_FIRST_SPECIAL_CP
) {

380 
	`hªdËr
(
cÚ‹xt
, 
¡¬t
, s¹, 
couÁ
, 
row
+2, 
v®ueCŞumns
, 
pE¼ÜCode
);

381 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

386 
row
+=
cŞumns
;

390 
couÁ
+=
v®ueCŞumns
;

393 
	`hªdËr
(
cÚ‹xt
, 
UPVEC_START_REAL_VALUES_CP
, UPVEC_START_REAL_VALUES_CP,

394 
couÁ
, 
row
-
v®ueCŞumns
, v®ueCŞumns, 
pE¼ÜCode
);

395 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

406 
row
=
pv
->
v
;

407 
couÁ
=-
v®ueCŞumns
;

408 
i
=0; i<
rows
; ++i) {

410 
¡¬t
=(
UCh¬32
)
row
[0];

411 
lim™
=(
UCh¬32
)
row
[1];

414 if(
couÁ
<0 || 0!=
	`u´v_memcmp
(
row
+2, 
pv
->
v
+couÁ, 
v®ueCŞumns
*4)) {

415 
couÁ
+=
v®ueCŞumns
;

416 
	`u´v_memmove
(
pv
->
v
+
couÁ
, 
row
+2, 
v®ueCŞumns
*4);

419 if(
¡¬t
<
UPVEC_FIRST_SPECIAL_CP
) {

420 
	`hªdËr
(
cÚ‹xt
, 
¡¬t
, 
lim™
-1, 
couÁ
, 
pv
->
v
+couÁ, 
v®ueCŞumns
, 
pE¼ÜCode
);

421 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

426 
row
+=
cŞumns
;

430 
pv
->
rows
=
couÁ
/
v®ueCŞumns
+1;

431 
	}
}

433 
U_CAPI
 cÚ¡ 
ušt32_t
 * 
U_EXPORT2


434 
	$upvec_g‘A¼ay
(cÚ¡ 
UPrİsVeùÜs
 *
pv
, 
št32_t
 *
pRows
, iÁ32_ˆ*
pCŞumns
) {

435 if(!
pv
->
isCom·ùed
) {

436  
NULL
;

438 if(
pRows
!=
NULL
) {

439 *
pRows
=
pv
->
rows
;

441 if(
pCŞumns
!=
NULL
) {

442 *
pCŞumns
=
pv
->
cŞumns
-2;

444  
pv
->
v
;

445 
	}
}

447 
U_CAPI
 
ušt32_t
 * 
U_EXPORT2


448 
	$upvec_şÚeA¼ay
(cÚ¡ 
UPrİsVeùÜs
 *
pv
,

449 
št32_t
 *
pRows
, iÁ32_ˆ*
pCŞumns
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

450 
ušt32_t
 *
şÚedA¼ay
;

451 
št32_t
 
by‹L’gth
;

453 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

454  
NULL
;

456 if(!
pv
->
isCom·ùed
) {

457 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

458  
NULL
;

460 
by‹L’gth
=
pv
->
rows
*Õv->
cŞumns
-2)*4;

461 
şÚedA¼ay
=(
ušt32_t
 *)
	`u´v_m®loc
(
by‹L’gth
);

462 if(
şÚedA¼ay
==
NULL
) {

463 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

464  
NULL
;

466 
	`u´v_memıy
(
şÚedA¼ay
, 
pv
->
v
, 
by‹L’gth
);

467 if(
pRows
!=
NULL
) {

468 *
pRows
=
pv
->
rows
;

470 if(
pCŞumns
!=
NULL
) {

471 *
pCŞumns
=
pv
->
cŞumns
-2;

473  
şÚedA¼ay
;

474 
	}
}

476 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


477 
	$upvec_com·ùToUTr›2W™hRowIndexes
(
UPrİsVeùÜs
 *
pv
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

478 
UPVecToUTr›2CÚ‹xt
 
toUTr›2
={ 
NULL
 };

479 
	`upvec_com·ù
(
pv
, 
upvec_com·ùToUTr›2HªdËr
, &
toUTr›2
, 
pE¼ÜCode
);

480 
	`uŒ›2_ä“ze
(
toUTr›2
.
Œ›
, 
UTRIE2_16_VALUE_BITS
, 
pE¼ÜCode
);

481 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

482 
	`uŒ›2_şo£
(
toUTr›2
.
Œ›
);

483 
toUTr›2
.
Œ›
=
NULL
;

485  
toUTr›2
.
Œ›
;

486 
	}
}

493 
U_CAPI
 
U_CALLCONV


494 
	$upvec_com·ùToUTr›2HªdËr
(*
cÚ‹xt
,

495 
UCh¬32
 
¡¬t
, UCh¬32 
’d
,

496 
št32_t
 
rowIndex
, 
ušt32_t
 *
row
, iÁ32_ˆ
cŞumns
,

497 
UE¼ÜCode
 *
pE¼ÜCode
) {

498 
UPVecToUTr›2CÚ‹xt
 *
toUTr›2
=(UPVecToUTr›2CÚ‹xˆ*)
cÚ‹xt
;

499 if(
¡¬t
<
UPVEC_FIRST_SPECIAL_CP
) {

500 
	`uŒ›2_£tRªge32
(
toUTr›2
->
Œ›
, 
¡¬t
, 
’d
, (
ušt32_t
)
rowIndex
, 
TRUE
, 
pE¼ÜCode
);

502 
¡¬t
) {

503 
UPVEC_INITIAL_VALUE_CP
:

504 
toUTr›2
->
š™ŸlV®ue
=
rowIndex
;

506 
UPVEC_ERROR_VALUE_CP
:

507 
toUTr›2
->
”rÜV®ue
=
rowIndex
;

509 
UPVEC_START_REAL_VALUES_CP
:

510 
toUTr›2
->
maxV®ue
=
rowIndex
;

511 if(
rowIndex
>0xffff) {

513 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

515 
toUTr›2
->
Œ›
=
	`uŒ›2_İ’
ÑoUTr›2->
š™ŸlV®ue
,

516 
toUTr›2
->
”rÜV®ue
, 
pE¼ÜCode
);

523 
	}
}

	@propsvec.h

19 #iâdeà
__UPROPSVEC_H__


20 
	#__UPROPSVEC_H__


	)

22 
	~"unicode/uty³s.h
"

23 
	~"uŒ›.h
"

24 
	~"uŒ›2.h
"

26 
U_CDECL_BEGIN


50 
	gUPrİsVeùÜs
;

51 
UPrİsVeùÜs
 
	tUPrİsVeùÜs
;

57 
	#UPVEC_FIRST_SPECIAL_CP
 0x110000

	)

58 
	#UPVEC_INITIAL_VALUE_CP
 0x110000

	)

59 
	#UPVEC_ERROR_VALUE_CP
 0x110001

	)

60 
	#UPVEC_MAX_CP
 0x110001

	)

67 
	#UPVEC_START_REAL_VALUES_CP
 0x200000

	)

73 
U_CAPI
 
UPrİsVeùÜs
 * 
U_EXPORT2


74 
upvec_İ’
(
št32_t
 
cŞumns
, 
UE¼ÜCode
 *
pE¼ÜCode
);

76 
U_CAPI
 
U_EXPORT2


77 
upvec_şo£
(
UPrİsVeùÜs
 *
pv
);

85 
U_CAPI
 
U_EXPORT2


86 
upvec_£tV®ue
(
UPrİsVeùÜs
 *
pv
,

87 
UCh¬32
 
¡¬t
, UCh¬32 
’d
,

88 
št32_t
 
cŞumn
,

89 
ušt32_t
 
v®ue
, ušt32_ˆ
mask
,

90 
UE¼ÜCode
 *
pE¼ÜCode
);

96 
U_CAPI
 
ušt32_t
 
U_EXPORT2


97 
upvec_g‘V®ue
(cÚ¡ 
UPrİsVeùÜs
 *
pv
, 
UCh¬32
 
c
, 
št32_t
 
cŞumn
);

104 
U_CAPI
 
ušt32_t
 * 
U_EXPORT2


105 
upvec_g‘Row
(cÚ¡ 
UPrİsVeùÜs
 *
pv
, 
št32_t
 
rowIndex
,

106 
UCh¬32
 *
pRªgeS¹
, UCh¬32 *
pRªgeEnd
);

126 
	tU_CALLCONV


127 
	tUPVecCom·ùHªdËr
(*
	tcÚ‹xt
,

128 
	tUCh¬32
 
	t¡¬t
, UCh¬32 
	t’d
,

129 
	tšt32_t
 
	trowIndex
, 
	tušt32_t
 *
	trow
, iÁ32_ˆ
	tcŞumns
,

130 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

132 
U_CAPI
 
U_EXPORT2


133 
upvec_com·ù
(
UPrİsVeùÜs
 *
pv
, 
UPVecCom·ùHªdËr
 *
hªdËr
, *
cÚ‹xt
, 
UE¼ÜCode
 *
pE¼ÜCode
);

140 
U_CAPI
 cÚ¡ 
ušt32_t
 * 
U_EXPORT2


141 
upvec_g‘A¼ay
(cÚ¡ 
UPrİsVeùÜs
 *
pv
, 
št32_t
 *
pRows
, iÁ32_ˆ*
pCŞumns
);

148 
U_CAPI
 
ušt32_t
 * 
U_EXPORT2


149 
upvec_şÚeA¼ay
(cÚ¡ 
UPrİsVeùÜs
 *
pv
,

150 
št32_t
 *
pRows
, iÁ32_ˆ*
pCŞumns
, 
UE¼ÜCode
 *
pE¼ÜCode
);

156 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


157 
upvec_com·ùToUTr›2W™hRowIndexes
(
UPrİsVeùÜs
 *
pv
, 
UE¼ÜCode
 *
pE¼ÜCode
);

159 
	sUPVecToUTr›2CÚ‹xt
 {

160 
UTr›2
 *
	mŒ›
;

161 
št32_t
 
	mš™ŸlV®ue
;

162 
št32_t
 
	m”rÜV®ue
;

163 
št32_t
 
	mmaxV®ue
;

165 
UPVecToUTr›2CÚ‹xt
 
	tUPVecToUTr›2CÚ‹xt
;

168 
U_CAPI
 
U_CALLCONV


169 
upvec_com·ùToUTr›2HªdËr
(*
cÚ‹xt
,

170 
UCh¬32
 
¡¬t
, UCh¬32 
’d
,

171 
št32_t
 
rowIndex
, 
ušt32_t
 *
row
, iÁ32_ˆ
cŞumns
,

172 
UE¼ÜCode
 *
pE¼ÜCode
);

174 
	gU_CDECL_END


	@punycode.c

45 
	~"unicode/uty³s.h
"

47 #ià!
UCONFIG_NO_IDNA


49 
	~"u¡r_imp.h
"

50 
	~"c¡ršg.h
"

51 
	~"cmemÜy.h
"

52 
	~"punycode.h
"

53 
	~"unicode/u¡ršg.h
"

59 
	#BASE
 36

	)

60 
	#TMIN
 1

	)

61 
	#TMAX
 26

	)

62 
	#SKEW
 38

	)

63 
	#DAMP
 700

	)

64 
	#INITIAL_BIAS
 72

	)

65 
	#INITIAL_N
 0x80

	)

68 
	#_HYPHEN
 0X2d

	)

69 
	#DELIMITER
 
_HYPHEN


	)

71 
	#_ZERO_
 0X30

	)

72 
	#_NINE
 0x39

	)

74 
	#_SMALL_A
 0X61

	)

75 
	#_SMALL_Z
 0X7a

	)

77 
	#_CAPITAL_A
 0X41

	)

78 
	#_CAPITAL_Z
 0X5a

	)

80 
	#IS_BASIC
(
c
è((c)<0x80)

	)

81 
	#IS_BASIC_UPPERCASE
(
c
è(
_CAPITAL_A
<=(cè&& (c)<=
_CAPITAL_Z
)

	)

89 
U_INLINE
 

90 
	$dig™ToBasic
(
št32_t
 
dig™
, 
UBoŞ
 
uµ”ÿ£
) {

93 if(
dig™
<26) {

94 if(
uµ”ÿ£
) {

95  ()(
_CAPITAL_A
+
dig™
);

97  ()(
_SMALL_A
+
dig™
);

100  ()((
_ZERO_
-26)+
dig™
);

102 
	}
}

109 cÚ¡ 
št8_t


110 
	gbasicToDig™
[256]={

136 
U_INLINE
 

137 
	$asciiCa£M­
(
b
, 
UBoŞ
 
uµ”ÿ£
) {

138 if(
uµ”ÿ£
) {

139 if(
_SMALL_A
<=
b
 && b<=
_SMALL_Z
) {

140 
b
-=(
_SMALL_A
-
_CAPITAL_A
);

143 if(
_CAPITAL_A
<=
b
 && b<=
_CAPITAL_Z
) {

144 
b
+=(
_SMALL_A
-
_CAPITAL_A
);

147  
b
;

148 
	}
}

158 
št32_t


159 
	$ad­tBŸs
(
št32_t
 
d–
, iÁ32_ˆ
Ëngth
, 
UBoŞ
 
fœ¡Time
) {

160 
št32_t
 
couÁ
;

162 if(
fœ¡Time
) {

163 
d–
/=
DAMP
;

165 
d–
/=2;

168 
d–
+=d–/
Ëngth
;

169 
couÁ
=0; 
d–
>((
BASE
-
TMIN
)*
TMAX
)/2; count+=BASE) {

170 
d–
/=(
BASE
-
TMIN
);

173  
couÁ
+(((
BASE
-
TMIN
+1)*
d–
)/(d–+
SKEW
));

174 
	}
}

176 
	#MAX_CP_COUNT
 200

	)

178 
U_CFUNC
 
št32_t


179 
	$u_¡rToPunycode
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

180 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

181 cÚ¡ 
UBoŞ
 *
ÿ£FÏgs
,

182 
UE¼ÜCode
 *
pE¼ÜCode
) {

184 
št32_t
 
ıBufãr
[
MAX_CP_COUNT
];

185 
št32_t
 
n
, 
d–
, 
hªdËdCPCouÁ
, 
basicL’gth
, 
de¡L’gth
, 
bŸs
, 
j
, 
m
, 
q
, 
k
, 
t
, 
¤cCPCouÁ
;

186 
UCh¬
 
c
, 
c2
;

189 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

193 if(
¤c
==
NULL
 || 
¤cL’gth
<-1 || (
de¡
==NULL && 
de¡C­ac™y
!=0)) {

194 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

202 
¤cCPCouÁ
=
de¡L’gth
=0;

203 if(
¤cL’gth
==-1) {

205 
j
=0; ; ++j) {

206 if((
c
=
¤c
[
j
])==0) {

209 if(
¤cCPCouÁ
==
MAX_CP_COUNT
) {

211 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

214 if(
	`IS_BASIC
(
c
)) {

215 
ıBufãr
[
¤cCPCouÁ
++]=0;

216 if(
de¡L’gth
<
de¡C­ac™y
) {

217 
de¡
[
de¡L’gth
]=

218 
ÿ£FÏgs
!=
NULL
 ?

219 
	`asciiCa£M­
(()
c
, 
ÿ£FÏgs
[
j
]) :

220 ()
c
;

222 ++
de¡L’gth
;

224 
n
=(
ÿ£FÏgs
!=
NULL
 && ca£FÏgs[
j
])<<31L;

225 if(
	`UTF_IS_SINGLE
(
c
)) {

226 
n
|=
c
;

227 } if(
	`UTF_IS_LEAD
(
c
è&& 
	`UTF_IS_TRAIL
(
c2
=
¤c
[
j
+1])) {

228 ++
j
;

229 
n
|=(
št32_t
)
	`UTF16_GET_PAIR_VALUE
(
c
, 
c2
);

232 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

235 
ıBufãr
[
¤cCPCouÁ
++]=
n
;

240 
j
=0; j<
¤cL’gth
; ++j) {

241 if(
¤cCPCouÁ
==
MAX_CP_COUNT
) {

243 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

246 
c
=
¤c
[
j
];

247 if(
	`IS_BASIC
(
c
)) {

248 
ıBufãr
[
¤cCPCouÁ
++]=0;

249 if(
de¡L’gth
<
de¡C­ac™y
) {

250 
de¡
[
de¡L’gth
]=

251 
ÿ£FÏgs
!=
NULL
 ?

252 
	`asciiCa£M­
(()
c
, 
ÿ£FÏgs
[
j
]) :

253 ()
c
;

255 ++
de¡L’gth
;

257 
n
=(
ÿ£FÏgs
!=
NULL
 && ca£FÏgs[
j
])<<31L;

258 if(
	`UTF_IS_SINGLE
(
c
)) {

259 
n
|=
c
;

260 } if(
	`UTF_IS_LEAD
(
c
è&& (
j
+1)<
¤cL’gth
 && 
	`UTF_IS_TRAIL
(
c2
=
¤c
[j+1])) {

261 ++
j
;

262 
n
|=(
št32_t
)
	`UTF16_GET_PAIR_VALUE
(
c
, 
c2
);

265 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

268 
ıBufãr
[
¤cCPCouÁ
++]=
n
;

274 
basicL’gth
=
de¡L’gth
;

275 if(
basicL’gth
>0) {

276 if(
de¡L’gth
<
de¡C­ac™y
) {

277 
de¡
[
de¡L’gth
]=
DELIMITER
;

279 ++
de¡L’gth
;

289 
n
=
INITIAL_N
;

290 
d–
=0;

291 
bŸs
=
INITIAL_BIAS
;

294 
hªdËdCPCouÁ
=
basicL’gth
; hªdËdCPCouÁ<
¤cCPCouÁ
; ) {

299 
m
=0x7fffffff, 
j
=0; j<
¤cCPCouÁ
; ++j) {

300 
q
=
ıBufãr
[
j
]&0x7fffffff;

301 if(
n
<=
q
 && q<
m
) {

302 
m
=
q
;

310 if(
m
-
n
>(0x7fffffff-
MAX_CP_COUNT
-
d–
)/(
hªdËdCPCouÁ
+1)) {

311 *
pE¼ÜCode
=
U_INTERNAL_PROGRAM_ERROR
;

314 
d–
+=(
m
-
n
)*(
hªdËdCPCouÁ
+1);

315 
n
=
m
;

318 
j
=0; j<
¤cCPCouÁ
; ++j) {

319 
q
=
ıBufãr
[
j
]&0x7fffffff;

320 if(
q
<
n
) {

321 ++
d–
;

322 } if(
q
==
n
) {

324 
q
=
d–
, 
k
=
BASE
; ; k+=BASE) {

336 
t
=
k
-
bŸs
;

337 if(
t
<
TMIN
) {

338 
t
=
TMIN
;

339 } if(
k
>=(
bŸs
+
TMAX
)) {

340 
t
=
TMAX
;

343 if(
q
<
t
) {

347 if(
de¡L’gth
<
de¡C­ac™y
) {

348 
de¡
[
de¡L’gth
]=
	`dig™ToBasic
(
t
+(
q
-t)%(
BASE
-t), 0);

350 ++
de¡L’gth
;

351 
q
=(q-
t
)/(
BASE
-t);

354 if(
de¡L’gth
<
de¡C­ac™y
) {

355 
de¡
[
de¡L’gth
]=
	`dig™ToBasic
(
q
, (
UBoŞ
)(
ıBufãr
[
j
]<0));

357 ++
de¡L’gth
;

358 
bŸs
=
	`ad­tBŸs
(
d–
, 
hªdËdCPCouÁ
+1, (
UBoŞ
)(hªdËdCPCouÁ==
basicL’gth
));

359 
d–
=0;

360 ++
hªdËdCPCouÁ
;

364 ++
d–
;

365 ++
n
;

368  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
de¡L’gth
, 
pE¼ÜCode
);

369 
	}
}

371 
U_CFUNC
 
št32_t


372 
	$u_¡rFromPunycode
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

373 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

374 
UBoŞ
 *
ÿ£FÏgs
,

375 
UE¼ÜCode
 *
pE¼ÜCode
) {

376 
št32_t
 
n
, 
de¡L’gth
, 
i
, 
bŸs
, 
basicL’gth
, 
j
, 
š
, 
Şdi
, 
w
, 
k
, 
dig™
, 
t
,

377 
de¡CPCouÁ
, 
fœ¡SuµËm’ryIndex
, 
ıL’gth
;

378 
UCh¬
 
b
;

381 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

385 if(
¤c
==
NULL
 || 
¤cL’gth
<-1 || (
de¡
==NULL && 
de¡C­ac™y
!=0)) {

386 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

390 if(
¤cL’gth
==-1) {

391 
¤cL’gth
=
	`u_¡¾’
(
¤c
);

402 
j
=
¤cL’gth
; j>0;) {

403 if(
¤c
[--
j
]==
DELIMITER
) {

407 
de¡L’gth
=
basicL’gth
=
de¡CPCouÁ
=
j
;

409 
j
>0) {

410 
b
=
¤c
[--
j
];

411 if(!
	`IS_BASIC
(
b
)) {

412 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

416 if(
j
<
de¡C­ac™y
) {

417 
de¡
[
j
]=(
UCh¬
)
b
;

419 if(
ÿ£FÏgs
!=
NULL
) {

420 
ÿ£FÏgs
[
j
]=
	`IS_BASIC_UPPERCASE
(
b
);

426 
n
=
INITIAL_N
;

427 
i
=0;

428 
bŸs
=
INITIAL_BIAS
;

429 
fœ¡SuµËm’ryIndex
=1000000000;

436 
š
=
basicL’gth
>0 ? basicL’gth+1 : 0; in<
¤cL’gth
; ) {

446 
Şdi
=
i
, 
w
=1, 
k
=
BASE
; ; k+=BASE) {

447 if(
š
>=
¤cL’gth
) {

448 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

452 
dig™
=
basicToDig™
[(
ušt8_t
)
¤c
[
š
++]];

453 if(
dig™
<0) {

454 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

457 if(
dig™
>(0x7fffffff-
i
)/
w
) {

459 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

463 
i
+=
dig™
*
w
;

472 
t
=
k
-
bŸs
;

473 if(
t
<
TMIN
) {

474 
t
=
TMIN
;

475 } if(
k
>=(
bŸs
+
TMAX
)) {

476 
t
=
TMAX
;

478 if(
dig™
<
t
) {

482 if(
w
>0x7fffffff/(
BASE
-
t
)) {

484 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

487 
w
*=
BASE
-
t
;

495 ++
de¡CPCouÁ
;

496 
bŸs
=
	`ad­tBŸs
(
i
-
Şdi
, 
de¡CPCouÁ
, (
UBoŞ
)(oldi==0));

502 if(
i
/
de¡CPCouÁ
>(0x7fffffff-
n
)) {

504 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

508 
n
+=
i
/
de¡CPCouÁ
;

509 
i
%=
de¡CPCouÁ
;

513 if(
n
>0x10fffà|| 
	`UTF_IS_SURROGATE
(n)) {

515 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

520 
ıL’gth
=
	`UTF_CHAR_LENGTH
(
n
);

521 if((
de¡L’gth
+
ıL’gth
)<=
de¡C­ac™y
) {

522 
št32_t
 
codeUn™Index
;

534 if(
i
<=
fœ¡SuµËm’ryIndex
) {

535 
codeUn™Index
=
i
;

536 if(
ıL’gth
>1) {

537 
fœ¡SuµËm’ryIndex
=
codeUn™Index
;

539 ++
fœ¡SuµËm’ryIndex
;

542 
codeUn™Index
=
fœ¡SuµËm’ryIndex
;

543 
	`UTF_FWD_N
(
de¡
, 
codeUn™Index
, 
de¡L’gth
, 
i
-codeUnitIndex);

547 if(
codeUn™Index
<
de¡L’gth
) {

548 
	`u´v_memmove
(
de¡
+
codeUn™Index
+
ıL’gth
,

549 
de¡
+
codeUn™Index
,

550 (
de¡L’gth
-
codeUn™Index
)*
U_SIZEOF_UCHAR
);

551 if(
ÿ£FÏgs
!=
NULL
) {

552 
	`u´v_memmove
(
ÿ£FÏgs
+
codeUn™Index
+
ıL’gth
,

553 
ÿ£FÏgs
+
codeUn™Index
,

554 
de¡L’gth
-
codeUn™Index
);

557 if(
ıL’gth
==1) {

559 
de¡
[
codeUn™Index
]=(
UCh¬
)
n
;

562 
de¡
[
codeUn™Index
]=
	`UTF16_LEAD
(
n
);

563 
de¡
[
codeUn™Index
+1]=
	`UTF16_TRAIL
(
n
);

565 if(
ÿ£FÏgs
!=
NULL
) {

567 
ÿ£FÏgs
[
codeUn™Index
]=
	`IS_BASIC_UPPERCASE
(
¤c
[
š
-1]);

568 if(
ıL’gth
==2) {

569 
ÿ£FÏgs
[
codeUn™Index
+1]=
FALSE
;

573 
de¡L’gth
+=
ıL’gth
;

574 ++
i
;

577  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
de¡L’gth
, 
pE¼ÜCode
);

578 
	}
}

	@punycode.h

25 #iâdeà
__PUNYCODE_H__


26 
	#__PUNYCODE_H__


	)

28 
	~"unicode/uty³s.h
"

30 #ià!
UCONFIG_NO_IDNA


66 
U_CFUNC
 
št32_t


67 
u_¡rToPunycode
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

68 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

69 cÚ¡ 
UBoŞ
 *
ÿ£FÏgs
,

70 
UE¼ÜCode
 *
pE¼ÜCode
);

101 
U_CFUNC
 
št32_t


102 
u_¡rFromPunycode
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

103 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

104 
UBoŞ
 *
ÿ£FÏgs
,

105 
UE¼ÜCode
 *
pE¼ÜCode
);

	@putil.c

42 #ià!
defšed
(
_XOPEN_SOURCE
)

43 #ià
__STDC_VERSION__
 >= 199901L

45 
	#_XOPEN_SOURCE
 600

	)

47 
	#_XOPEN_SOURCE
 4

	)

55 #ià!
defšed
(
_XOPEN_SOURCE_EXTENDED
è&& ((!defšed(
__STDC_VERSION__
è|| __STDC_VERSION__ >ğ199901Lè|| defšed(
__xlc__
))

56 
	#_XOPEN_SOURCE_EXTENDED
 1

	)

60 
	~"unicode/uty³s.h
"

61 
	~"unicode/put.h
"

62 
	~"unicode/u¡ršg.h
"

63 
	~"putimp.h
"

64 
	~"uas£¹.h
"

65 
	~"umu‹x.h
"

66 
	~"cmemÜy.h
"

67 
	~"c¡ršg.h
"

68 
	~"locm­.h
"

69 
	~"uşn_cmn.h
"

72 
	~<¡dio.h
>

73 
	~<¡dlib.h
>

74 
	~<¡ršg.h
>

75 
	~<m©h.h
>

76 
	~<loÿË.h
>

77 
	~<æßt.h
>

78 
	~<time.h
>

81 #ifdeà
U_WINDOWS


82 
	#WIN32_LEAN_AND_MEAN


	)

83 
	#VC_EXTRALEAN


	)

84 
	#NOUSER


	)

85 
	#NOSERVICE


	)

86 
	#NOIME


	)

87 
	#NOMCX


	)

88 
	~<wšdows.h
>

89 
	~"wštz.h
"

90 #–ià
defšed
(
U_CYGWIN
è&& defšed(
__STRICT_ANSI__
)

92 #undeà
__STRICT_ANSI__


93 #–ià
defšed
(
OS400
)

94 
	~<æßt.h
>

95 
	~<qu£c.h
>

96 
	~<qu¤jobi.h
>

97 
	~<ql›±.h
>

98 
	~<mih/‹¡±r.h
>

99 #–ià
defšed
(
XP_MAC
)

100 
	~<Fes.h
>

101 
	~<IÁlResourûs.h
>

102 
	~<Süt.h
>

103 
	~<FŞd”s.h
>

104 
	~<MacTy³s.h
>

105 
	~<TextUts.h
>

106 
	#ICU_NO_USER_DATA_OVERRIDE
 1

	)

107 #–ià
defšed
(
OS390
)

108 
	~"unicode/uúv.h
"

109 #–ià
defšed
(
U_DARWIN
è|| defšed(
U_LINUX
è|| defšed(
U_BSD
)

110 
	~<lim™s.h
>

111 
	~<uni¡d.h
>

112 #–ià
defšed
(
U_QNX
)

113 
	~<sys/ÃuŒšo.h
>

114 #–ià
defšed
(
U_SOLARIS
)

115 #iâdeà
_XPG4_2


116 
	#_XPG4_2


	)

121 #ià
defšed
(
U_DARWIN
)

122 
	~<T¬g‘CÚd™iÚ®s.h
>

125 #iâdeà
U_WINDOWS


126 
	~<sys/time.h
>

135 #ià
U_HAVE_NL_LANGINFO_CODESET


136 
	~<Ïngšfo.h
>

143 #ià
defšed
(
HAVE_CONFIG_H
)

144 
	~"icucfg.h
"

148 
	#DATA_TYPE
 "d©"

	)

151 cÚ¡ 
	gcİyright
[] = 
U_COPYRIGHT_STRING
;

156 
	#SIGN
 0x80000000U

	)

160 
št64_t
 
	mi64
;

161 
	md64
;

162 } 
	tB™P©‹ºCÚv”siÚ
;

163 cÚ¡ 
B™P©‹ºCÚv”siÚ
 
	ggNª
 = { (
št64_t
è
INT64_C
(0x7FF8000000000000) };

164 cÚ¡ 
B™P©‹ºCÚv”siÚ
 
	ggInf
 = { (
št64_t
è
INT64_C
(0x7FF0000000000000) };

174 #ià
defšed
(
U_WINDOWS
è|| defšed(
XP_MAC
è|| defšed(
OS400
)

175 #undeà
U_POSIX_LOCALE


177 
	#U_POSIX_LOCALE
 1

	)

184 #ià!
IEEE_754


186 
	$u_tİNBy‹sOfDoubË
(* 
d
, 
n
)

188 #ià
U_IS_BIG_ENDIAN


189  (*)
d
;

191  (*)(
d
 + 1è- 
n
;

193 
	}
}

196 
	$u_bÙtomNBy‹sOfDoubË
(* 
d
, 
n
)

198 #ià
U_IS_BIG_ENDIAN


199  (*)(
d
 + 1è- 
n
;

201  (*)
d
;

203 
	}
}

206 #ià
IEEE_754


207 
UBoŞ


208 
	$u_signB™
(
d
) {

209 
ušt8_t
 
hiBy‹
;

210 #ià
U_IS_BIG_ENDIAN


211 
hiBy‹
 = *(
ušt8_t
 *)&
d
;

213 
hiBy‹
 = *(((
ušt8_t
 *)&
d
) + () - 1);

215  (
hiBy‹
 & 0x80) != 0;

216 
	}
}

221 #ià
defšed
 (
U_DEBUG_FAKETIME
)

225 
UD©e
 
	gçkeClock_t0
 = 0;

226 
UD©e
 
	gçkeClock_dt
 = 0;

227 
UBoŞ
 
	gçkeClock_£t
 = 
FALSE
;

228 
UMTX
 
	gçkeClockMu‹x
 = 
NULL
;

230 
UD©e
 
	$g‘UTCtime_»®
() {

231 
timev®
 
posixTime
;

232 
	`g‘timeofday
(&
posixTime
, 
NULL
);

233  (
UD©e
)(((
št64_t
)
posixTime
.
tv_£c
 * 
U_MILLIS_PER_SECOND
è+ (posixTime.
tv_u£c
/1000));

234 
	}
}

236 
UD©e
 
	$g‘UTCtime_çke
() {

237 
	`umtx_lock
(&
çkeClockMu‹x
);

238 if(!
çkeClock_£t
) {

239 
UD©e
 
»®
 = 
	`g‘UTCtime_»®
();

240 cÚ¡ *
çke_¡¬t
 = 
	`g‘’v
("U_FAKETIME_START");

241 if((
çke_¡¬t
!=
NULL
) && (fake_start[0]!=0)) {

242 
	`ssÿnf
(
çke_¡¬t
,"%lf",&
çkeClock_t0
);

243 
çkeClock_dt
 = 
çkeClock_t0
 - 
»®
;

244 
	`årštf
(
¡d”r
,"U_DEBUG_FAKETIME was set‡t compileime, sohe ICU clock will start‡t‡…reset value\n"

246 
çkeClock_t0
, 
çke_¡¬t
, 
çkeClock_dt
, 
»®
);

248 
çkeClock_dt
 = 0;

249 
	`årštf
(
¡d”r
,"U_DEBUG_FAKETIME was set‡t compileime, but U_FAKETIME_START was‚ot set.\n"

252 
çkeClock_£t
 = 
TRUE
;

254 
	`umtx_uÆock
(&
çkeClockMu‹x
);

256  
	`g‘UTCtime_»®
(è+ 
çkeClock_dt
;

257 
	}
}

260 #ià
defšed
(
U_WINDOWS
)

262 
št64_t
 
	mšt64
;

263 
FILETIME
 
	mfeTime
;

264 } 
	tFeTimeCÚv”siÚ
;

267 
	#EPOCH_BIAS
 
	`INT64_C
(116444736000000000)

	)

268 
	#HECTONANOSECOND_PER_MILLISECOND
 10000

	)

279 
U_CAPI
 
UD©e
 
U_EXPORT2


280 
	$u´v_g‘UTCtime
()

282 #ià
	`defšed
(
U_DEBUG_FAKETIME
)

283  
	`g‘UTCtime_çke
();

285  
	`u´v_g‘RawUTCtime
();

287 
	}
}

290 
U_CAPI
 
UD©e
 
U_EXPORT2


291 
	$u´v_g‘RawUTCtime
()

293 #ià
	`defšed
(
XP_MAC
)

294 
time_t
 
t
, 
t1
, 
t2
;

295 
tm
 
tm»c
;

297 
	`u´v_mem£t
Ğ&
tm»c
, 0, (tmrec) );

298 
tm»c
.
tm_y—r
 = 70;

299 
tm»c
.
tm_mÚ
 = 0;

300 
tm»c
.
tm_mday
 = 1;

301 
t1
 = 
	`mktime
(&
tm»c
);

303 
	`time
(&
t
);

304 
	`u´v_memıy
Ğ&
tm»c
, 
	`gmtime
(&
t
), (tmrec) );

305 
t2
 = 
	`mktime
(&
tm»c
);

306  (
UD©e
)(
t2
 - 
t1
è* 
U_MILLIS_PER_SECOND
;

307 #–ià
	`defšed
(
U_WINDOWS
)

309 
FeTimeCÚv”siÚ
 
wšTime
;

310 
	`G‘Sy¡emTimeAsFeTime
(&
wšTime
.
feTime
);

311  (
UD©e
)((
wšTime
.
št64
 - 
EPOCH_BIAS
è/ 
HECTONANOSECOND_PER_MILLISECOND
);

314 #ià
	`defšed
(
HAVE_GETTIMEOFDAY
)

315 
timev®
 
posixTime
;

316 
	`g‘timeofday
(&
posixTime
, 
NULL
);

317  (
UD©e
)(((
št64_t
)
posixTime
.
tv_£c
 * 
U_MILLIS_PER_SECOND
è+ (posixTime.
tv_u£c
/1000));

319 
time_t
 
•ochtime
;

320 
	`time
(&
•ochtime
);

321  (
UD©e
)
•ochtime
 * 
U_MILLIS_PER_SECOND
;

325 
	}
}

337 
U_CAPI
 
UBoŞ
 
U_EXPORT2


338 
	$u´v_isNaN
(
numb”
)

340 #ià
IEEE_754


341 
B™P©‹ºCÚv”siÚ
 
cÚv”‹dNumb”
;

342 
cÚv”‹dNumb”
.
d64
 = 
numb”
;

344  (
UBoŞ
)((
cÚv”‹dNumb”
.
i64
 & 
U_INT64_MAX
è> 
gInf
.i64);

346 #–ià
	`defšed
(
OS390
)

347 
ušt32_t
 
highB™s
 = *(ušt32_t*)
	`u_tİNBy‹sOfDoubË
(&
numb”
,

348 (
ušt32_t
));

349 
ušt32_t
 
lowB™s
 = *(ušt32_t*)
	`u_bÙtomNBy‹sOfDoubË
(&
numb”
,

350 (
ušt32_t
));

352  ((
highB™s
 & 0x7F080000L) == 0x7F080000L) &&

353 (
lowB™s
 == 0x00000000L);

359  
numb”
 !=‚umber;

361 
	}
}

363 
U_CAPI
 
UBoŞ
 
U_EXPORT2


364 
	$u´v_isInfš™e
(
numb”
)

366 #ià
IEEE_754


367 
B™P©‹ºCÚv”siÚ
 
cÚv”‹dNumb”
;

368 
cÚv”‹dNumb”
.
d64
 = 
numb”
;

370  (
UBoŞ
)((
cÚv”‹dNumb”
.
i64
 & 
U_INT64_MAX
è=ğ
gInf
.i64);

371 #–ià
	`defšed
(
OS390
)

372 
ušt32_t
 
highB™s
 = *(ušt32_t*)
	`u_tİNBy‹sOfDoubË
(&
numb”
,

373 (
ušt32_t
));

374 
ušt32_t
 
lowB™s
 = *(ušt32_t*)
	`u_bÙtomNBy‹sOfDoubË
(&
numb”
,

375 (
ušt32_t
));

377  ((
highB™s
 & ~
SIGN
è=ğ0x70FF0000Lè&& (
lowB™s
 == 0x00000000L);

383  
numb”
 == (2.0 *‚umber);

385 
	}
}

387 
U_CAPI
 
UBoŞ
 
U_EXPORT2


388 
	$u´v_isPos™iveInfš™y
(
numb”
)

390 #ià
IEEE_754
 || 
	`defšed
(
OS390
)

391  (
UBoŞ
)(
numb”
 > 0 && 
	`u´v_isInfš™e
(number));

393  
	`u´v_isInfš™e
(
numb”
);

395 
	}
}

397 
U_CAPI
 
UBoŞ
 
U_EXPORT2


398 
	$u´v_isNeg©iveInfš™y
(
numb”
)

400 #ià
IEEE_754
 || 
	`defšed
(
OS390
)

401  (
UBoŞ
)(
numb”
 < 0 && 
	`u´v_isInfš™e
(number));

404 
ušt32_t
 
highB™s
 = *(ušt32_t*)
	`u_tİNBy‹sOfDoubË
(&
numb”
,

405 (
ušt32_t
));

406 ((
highB™s
 & 
SIGN
è&& 
	`u´v_isInfš™e
(
numb”
));

409 
	}
}

411 
U_CAPI
 
U_EXPORT2


412 
	$u´v_g‘NaN
()

414 #ià
IEEE_754
 || 
	`defšed
(
OS390
)

415  
gNª
.
d64
;

422 
	}
}

424 
U_CAPI
 
U_EXPORT2


425 
	$u´v_g‘Infš™y
()

427 #ià
IEEE_754
 || 
	`defšed
(
OS390
)

428  
gInf
.
d64
;

435 
	}
}

437 
U_CAPI
 
U_EXPORT2


438 
	$u´v_æoÜ
(
x
)

440  
	`æoÜ
(
x
);

441 
	}
}

443 
U_CAPI
 
U_EXPORT2


444 
	$u´v_û
(
x
)

446  
	`û
(
x
);

447 
	}
}

449 
U_CAPI
 
U_EXPORT2


450 
	$u´v_round
(
x
)

452  
	`u´v_æoÜ
(
x
 + 0.5);

453 
	}
}

455 
U_CAPI
 
U_EXPORT2


456 
	$u´v_çbs
(
x
)

458  
	`çbs
(
x
);

459 
	}
}

461 
U_CAPI
 
U_EXPORT2


462 
	$u´v_modf
(
x
, * 
y
)

464  
	`modf
(
x
, 
y
);

465 
	}
}

467 
U_CAPI
 
U_EXPORT2


468 
	$u´v_fmod
(
x
, 
y
)

470  
	`fmod
(
x
, 
y
);

471 
	}
}

473 
U_CAPI
 
U_EXPORT2


474 
	$u´v_pow
(
x
, 
y
)

477  
	`pow
(
x
, 
y
);

478 
	}
}

480 
U_CAPI
 
U_EXPORT2


481 
	$u´v_pow10
(
št32_t
 
x
)

483  
	`pow
(10.0, ()
x
);

484 
	}
}

486 
U_CAPI
 
U_EXPORT2


487 
	$u´v_fmax
(
x
, 
y
)

489 #ià
IEEE_754


491 if(
	`u´v_isNaN
(
x
è|| u´v_isNaN(
y
))

492  
	`u´v_g‘NaN
();

495 if(
x
 =ğ0.0 && 
y
 =ğ0.0 && 
	`u_signB™
(x))

496  
y
;

501  (
x
 > 
y
 ? x : y);

502 
	}
}

504 
U_CAPI
 
U_EXPORT2


505 
	$u´v_fmš
(
x
, 
y
)

507 #ià
IEEE_754


509 if(
	`u´v_isNaN
(
x
è|| u´v_isNaN(
y
))

510  
	`u´v_g‘NaN
();

513 if(
x
 =ğ0.0 && 
y
 =ğ0.0 && 
	`u_signB™
(y))

514  
y
;

519  (
x
 > 
y
 ? y : x);

520 
	}
}

529 
U_CAPI
 
U_EXPORT2


530 
	$u´v_Œunc
(
d
)

532 #ià
IEEE_754


534 if(
	`u´v_isNaN
(
d
))

535  
	`u´v_g‘NaN
();

536 if(
	`u´v_isInfš™e
(
d
))

537  
	`u´v_g‘Infš™y
();

539 if(
	`u_signB™
(
d
))

540  
	`û
(
d
);

542  
	`æoÜ
(
d
);

545  
d
 >ğ0 ? 
	`æoÜ
(dè: 
	`û
(d);

548 
	}
}

554 
U_CAPI
 
U_EXPORT2


555 
	$u´v_maxMªtis§
()

557  
	`pow
(2.0, 
DBL_MANT_DIG
 + 1.0) - 1.0;

558 
	}
}

560 
U_CAPI
 
U_EXPORT2


561 
	$u´v_log
(
d
)

563  
	`log
(
d
);

564 
	}
}

566 
U_CAPI
 * 
U_EXPORT2


567 
	$u´v_maximumPŒ
(* 
ba£
)

569 #ià
	`defšed
(
OS400
)

587 ià((
ba£
 !ğ
NULL
è&& (
	`_TESTPTR
(ba£, 
_C_TERASPACE_CHECK
))) {

589  ((*)(((*)
ba£
)-((
ušt32_t
)(base))+((uint32_t)0x7fffefff)));

592  ((*)(((*)
ba£
)-((
ušt32_t
)(base))+((uint32_t)0xffefff)));

595  
	`U_MAX_PTR
(
ba£
);

597 
	}
}

608 
U_CAPI
 
U_EXPORT2


609 
	$u´v_tz£t
()

611 #ifdeà
U_TZSET


612 
	`U_TZSET
();

616 
	}
}

618 
U_CAPI
 
št32_t
 
U_EXPORT2


619 
	$u´v_timezÚe
()

621 #ifdeà
U_TIMEZONE


622  
U_TIMEZONE
;

624 
time_t
 
t
, 
t1
, 
t2
;

625 
tm
 
tm»c
;

626 
UBoŞ
 
d¡_checked
;

627 
št32_t
 
tdiff
 = 0;

629 
	`time
(&
t
);

630 
	`u´v_memıy
Ğ&
tm»c
, 
	`loÿÉime
(&
t
), (tmrec) );

631 
d¡_checked
 = (
tm»c
.
tm_isd¡
 != 0);

632 
t1
 = 
	`mktime
(&
tm»c
);

633 
	`u´v_memıy
Ğ&
tm»c
, 
	`gmtime
(&
t
), (tmrec) );

634 
t2
 = 
	`mktime
(&
tm»c
);

635 
tdiff
 = 
t2
 - 
t1
;

638 ià(
d¡_checked
)

639 
tdiff
 += 3600;

640  
tdiff
;

642 
	}
}

647 #ià
defšed
(
U_TZNAME
è&& (defšed(
U_IRIX
è|| defšed(
U_DARWIN
è|| defšed(
U_CYGWIN
))

649 
U_IMPORT
 *
U_TZNAME
[];

652 #ià!
UCONFIG_NO_FILE_IO
 && (
defšed
(
U_DARWIN
è|| defšed(
U_LINUX
è|| defšed(
U_BSD
))

654 
	#CHECK_LOCALTIME_LINK
 1

	)

655 #ià
defšed
(
U_DARWIN
)

656 
	~<tzfe.h
>

657 
	#TZZONEINFO
 (
TZDIR
 "/")

	)

659 
	#TZDEFAULT
 "/‘c/loÿÉime"

	)

660 
	#TZZONEINFO
 "/u¤/sh¬e/zÚešfo/"

	)

662 #ià
U_HAVE_DIRENT_H


663 
	#TZFILE_SKIP
 "posixruËs"

	)

667 
	#TZFILE_SKIP2
 "loÿÉime"

	)

668 
	#SEARCH_TZFILE


	)

669 
	~<dœ’t.h
>

671 
	ggTimeZÚeBufãr
[
PATH_MAX
];

672 *
	ggTimeZÚeBufãrPŒ
 = 
NULL
;

675 #iâdeà
U_WINDOWS


676 
	#isNÚDig™
(
ch
è(ch < '0' || '9' < ch)

	)

677 
UBoŞ
 
	$isV®idOlsÚID
(cÚ¡ *
id
) {

678 
št32_t
 
idx
 = 0;

682 
id
[
idx
] && 
	`isNÚDig™
(id[idx]) && id[idx] != ',') {

683 
idx
++;

690  (
UBoŞ
)(
id
[
idx
] == 0

691 || 
	`u´v_¡rcmp
(
id
, "PST8PDT") == 0

692 || 
	`u´v_¡rcmp
(
id
, "MST7MDT") == 0

693 || 
	`u´v_¡rcmp
(
id
, "CST6CDT") == 0

694 || 
	`u´v_¡rcmp
(
id
, "EST5EDT") == 0);

695 
	}
}

709 
	$skZÚeIDP»fix
(cÚ¡ ** 
id
) {

710 ià(
	`u´v_¡ºcmp
(*
id
, "posix/", 6) == 0

711 || 
	`u´v_¡ºcmp
(*
id
, "right/", 6) == 0)

713 *
id
 += 6;

715 
	}
}

718 #ià
defšed
(
U_TZNAME
è&& !defšed(
U_WINDOWS
)

720 
	#CONVERT_HOURS_TO_SECONDS
(
off£t
è(
št32_t
)(off£t*3600)

	)

721 
	sOff£tZÚeM­pšg
 {

722 
št32_t
 
	moff£tSecÚds
;

723 
št32_t
 
	mdaylightTy³
;

724 cÚ¡ *
	m¡dID
;

725 cÚ¡ *
	md¡ID
;

726 cÚ¡ *
	mŞsÚID
;

727 } 
	tOff£tZÚeM­pšg
;

738 cÚ¡ 
Off£tZÚeM­pšg
 
	gOFFSET_ZONE_MAPPINGS
[] = {

802 cÚ¡ * 
	$»m­ShÜtTimeZÚe
(cÚ¡ *
¡dID
, cÚ¡ *
d¡ID
, 
št32_t
 
daylightTy³
, iÁ32_ˆ
off£t
)

804 
št32_t
 
idx
;

805 #ifdeà
DEBUG_TZNAME


806 
	`årštf
(
¡d”r
, "TZ=% ¡d=% d¡=% daylight=%d off£t=%d\n", 
	`g‘’v
("TZ"), 
¡dID
, 
d¡ID
, 
daylightTy³
, 
off£t
);

808 
idx
 = 0; idx < (
št32_t
)(
OFFSET_ZONE_MAPPINGS
)/(OFFSET_ZONE_MAPPINGS[0]); idx++)

810 ià(
off£t
 =ğ
OFFSET_ZONE_MAPPINGS
[
idx
].
off£tSecÚds


811 && 
daylightTy³
 =ğ
OFFSET_ZONE_MAPPINGS
[
idx
].daylightType

812 && 
	`¡rcmp
(
OFFSET_ZONE_MAPPINGS
[
idx
].
¡dID
, stdID) == 0

813 && 
	`¡rcmp
(
OFFSET_ZONE_MAPPINGS
[
idx
].
d¡ID
, dstID) == 0)

815  
OFFSET_ZONE_MAPPINGS
[
idx
].
ŞsÚID
;

818  
NULL
;

819 
	}
}

822 #ifdeà
SEARCH_TZFILE


823 
	#MAX_PATH_SIZE
 
PATH_MAX


	)

824 
	#MAX_READ_SIZE
 512

	)

826 
	sDeçuÉTZInfo
 {

827 * 
	mdeçuÉTZBufãr
;

828 
št64_t
 
	mdeçuÉTZFeSize
;

829 
FILE
* 
	mdeçuÉTZFePŒ
;

830 
UBoŞ
 
	mdeçuÉTZ¡©us
;

831 
št32_t
 
	mdeçuÉTZPos™iÚ
;

832 } 
	tDeçuÉTZInfo
;

838 
UBoŞ
 
	$com·»Bš¬yFes
(cÚ¡ * 
deçuÉTZFeName
, cÚ¡ * 
TZFeName
, 
DeçuÉTZInfo
* 
tzInfo
) {

839 
FILE
* 
fe
;

840 
št64_t
 
sizeFe
;

841 
št64_t
 
sizeFeLeá
;

842 
št32_t
 
sizeFeR—d
;

843 
št32_t
 
sizeFeToR—d
;

844 
bufãrFe
[
MAX_READ_SIZE
];

845 
UBoŞ
 
»suÉ
 = 
TRUE
;

847 ià(
tzInfo
->
deçuÉTZFePŒ
 =ğ
NULL
) {

848 
tzInfo
->
deçuÉTZFePŒ
 = 
	`fİ’
(
deçuÉTZFeName
, "r");

850 
fe
 = 
	`fİ’
(
TZFeName
, "r");

852 
tzInfo
->
deçuÉTZPos™iÚ
 = 0;

854 ià(
fe
 !ğ
NULL
 && 
tzInfo
->
deçuÉTZFePŒ
 != NULL) {

856 ià(
tzInfo
->
deçuÉTZFeSize
 == 0) {

857 
	`f£ek
(
tzInfo
->
deçuÉTZFePŒ
, 0, 
SEEK_END
);

858 
tzInfo
->
deçuÉTZFeSize
 = 
	`á–l
ÑzInfo->
deçuÉTZFePŒ
);

860 
	`f£ek
(
fe
, 0, 
SEEK_END
);

861 
sizeFe
 = 
	`á–l
(
fe
);

862 
sizeFeLeá
 = 
sizeFe
;

864 ià(
sizeFe
 !ğ
tzInfo
->
deçuÉTZFeSize
) {

865 
»suÉ
 = 
FALSE
;

870 ià(
tzInfo
->
deçuÉTZBufãr
 =ğ
NULL
) {

871 
	`»wšd
(
tzInfo
->
deçuÉTZFePŒ
);

872 
tzInfo
->
deçuÉTZBufãr
 = (*)
	`u´v_m®loc
((è*zInfo->
deçuÉTZFeSize
);

873 
	`ä—d
(
tzInfo
->
deçuÉTZBufãr
, 1,zInfo->
deçuÉTZFeSize
,zInfo->
deçuÉTZFePŒ
);

875 
	`»wšd
(
fe
);

876 
sizeFeLeá
 > 0) {

877 
	`u´v_mem£t
(
bufãrFe
, 0, 
MAX_READ_SIZE
);

878 
sizeFeToR—d
 = 
sizeFeLeá
 < 
MAX_READ_SIZE
 ? sizeFileLeft : MAX_READ_SIZE;

880 
sizeFeR—d
 = 
	`ä—d
(
bufãrFe
, 1, 
sizeFeToR—d
, 
fe
);

881 ià(
	`memcmp
(
tzInfo
->
deçuÉTZBufãr
 +zInfo->
deçuÉTZPos™iÚ
, 
bufãrFe
, 
sizeFeR—d
) != 0) {

882 
»suÉ
 = 
FALSE
;

885 
sizeFeLeá
 -ğ
sizeFeR—d
;

886 
tzInfo
->
deçuÉTZPos™iÚ
 +ğ
sizeFeR—d
;

890 
»suÉ
 = 
FALSE
;

893 ià(
fe
 !ğ
NULL
) {

894 
	`fşo£
(
fe
);

897  
»suÉ
;

898 
	}
}

903 
	#SKIP1
 "."

	)

904 
	#SKIP2
 ".."

	)

905 
	gSEARCH_TZFILE_RESULT
[
MAX_PATH_SIZE
] = "";

906 * 
	$£¬chFÜTZFe
(cÚ¡ * 
·th
, 
DeçuÉTZInfo
* 
tzInfo
) {

907 
cu½©h
[
MAX_PATH_SIZE
];

908 
DIR
* 
dœp
 = 
	`İ’dœ
(
·th
);

909 
DIR
* 
subDœp
 = 
NULL
;

910 
dœ’t
* 
dœEÁry
 = 
NULL
;

912 * 
»suÉ
 = 
NULL
;

913 ià(
dœp
 =ğ
NULL
) {

914  
»suÉ
;

918 
	`u´v_mem£t
(
cu½©h
, 0, 
MAX_PATH_SIZE
);

919 
	`u´v_¡rıy
(
cu½©h
, 
·th
);

922 (
dœEÁry
 = 
	`»addœ
(
dœp
)è!ğ
NULL
) {

923 cÚ¡ * 
dœName
 = 
dœEÁry
->
d_Çme
;

924 ià(
	`u´v_¡rcmp
(
dœName
, 
SKIP1
è!ğ0 && u´v_¡rcmp(dœName, 
SKIP2
) != 0) {

926 
Ãw·th
[
MAX_PATH_SIZE
];

927 
	`u´v_¡rıy
(
Ãw·th
, 
cu½©h
);

928 
	`u´v_¡rÿt
(
Ãw·th
, 
dœName
);

930 ià((
subDœp
 = 
	`İ’dœ
(
Ãw·th
)è!ğ
NULL
) {

932 
	`şo£dœ
(
subDœp
);

933 
	`u´v_¡rÿt
(
Ãw·th
, "/");

934 
»suÉ
 = 
	`£¬chFÜTZFe
(
Ãw·th
, 
tzInfo
);

943 ià(
»suÉ
 !ğ
NULL
)

945 } ià(
	`u´v_¡rcmp
(
TZFILE_SKIP
, 
dœName
è!ğ0 && u´v_¡rcmp(
TZFILE_SKIP2
, dirName) != 0) {

946 if(
	`com·»Bš¬yFes
(
TZDEFAULT
, 
Ãw·th
, 
tzInfo
)) {

947 cÚ¡ * 
zÚeid
 = 
Ãw·th
 + ((
TZZONEINFO
)) - 1;

948 
	`skZÚeIDP»fix
(&
zÚeid
);

949 
	`u´v_¡rıy
(
SEARCH_TZFILE_RESULT
, 
zÚeid
);

950 
»suÉ
 = 
SEARCH_TZFILE_RESULT
;

957 
	`şo£dœ
(
dœp
);

958  
»suÉ
;

959 
	}
}

961 
U_CAPI
 cÚ¡ * 
U_EXPORT2


962 
	$u´v_tzÇme
(
n
)

964 cÚ¡ *
tzid
 = 
NULL
;

965 #ifdeà
U_WINDOWS


966 
tzid
 = 
	`u´v_d‘eùWšdowsTimeZÚe
();

968 ià(
tzid
 !ğ
NULL
) {

969  
tzid
;

983 #iâdeà
DEBUG_TZNAME


984 
tzid
 = 
	`g‘’v
("TZ");

985 ià(
tzid
 !ğ
NULL
 && 
	`isV®idOlsÚID
(tzid))

988 
	`skZÚeIDP»fix
(&
tzid
);

989  
tzid
;

994 #ià
	`defšed
(
CHECK_LOCALTIME_LINK
)

996 ià(
gTimeZÚeBufãrPŒ
 =ğ
NULL
) {

1002 
št32_t
 
»t
 = (št32_t)
	`»adlšk
(
TZDEFAULT
, 
gTimeZÚeBufãr
, (gTimeZoneBuffer));

1003 ià(0 < 
»t
) {

1004 
št32_t
 
tzZÚeInfoL’
 = 
	`u´v_¡¾’
(
TZZONEINFO
);

1005 
gTimeZÚeBufãr
[
»t
] = 0;

1006 ià(
	`u´v_¡ºcmp
(
gTimeZÚeBufãr
, 
TZZONEINFO
, 
tzZÚeInfoL’
) == 0

1007 && 
	`isV®idOlsÚID
(
gTimeZÚeBufãr
 + 
tzZÚeInfoL’
))

1009  (
gTimeZÚeBufãrPŒ
 = 
gTimeZÚeBufãr
 + 
tzZÚeInfoL’
);

1012 #ià
	`defšed
(
SEARCH_TZFILE
)

1013 
DeçuÉTZInfo
* 
tzInfo
 = (DeçuÉTZInfo*)
	`u´v_m®loc
((DefaultTZInfo));

1014 ià(
tzInfo
 !ğ
NULL
) {

1015 
tzInfo
->
deçuÉTZBufãr
 = 
NULL
;

1016 
tzInfo
->
deçuÉTZFeSize
 = 0;

1017 
tzInfo
->
deçuÉTZFePŒ
 = 
NULL
;

1018 
tzInfo
->
deçuÉTZ¡©us
 = 
FALSE
;

1019 
tzInfo
->
deçuÉTZPos™iÚ
 = 0;

1021 
gTimeZÚeBufãrPŒ
 = 
	`£¬chFÜTZFe
(
TZZONEINFO
, 
tzInfo
);

1024 ià(
tzInfo
->
deçuÉTZBufãr
 !ğ
NULL
) {

1025 
	`u´v_ä“
(
tzInfo
->
deçuÉTZBufãr
);

1027 ià(
tzInfo
->
deçuÉTZFePŒ
 !ğ
NULL
) {

1028 
	`fşo£
(
tzInfo
->
deçuÉTZFePŒ
);

1030 
	`u´v_ä“
(
tzInfo
);

1033 ià(
gTimeZÚeBufãrPŒ
 !ğ
NULL
 && 
	`isV®idOlsÚID
(gTimeZoneBufferPtr)) {

1034  
gTimeZÚeBufãrPŒ
;

1040  
gTimeZÚeBufãrPŒ
;

1045 #ifdeà
U_TZNAME


1046 #ifdeà
U_WINDOWS


1049  
	`u´v_¡rdup
(
U_TZNAME
[
n
]);

1060 
tm
 
juÃSŞ
, 
deûmb”SŞ
;

1061 
daylightTy³
;

1062 cÚ¡ 
time_t
 
juÃSŞ¡iû
=1182478260;

1063 cÚ¡ 
time_t
 
deûmb”SŞ¡iû
=1198332540;

1066 
	`loÿÉime_r
(&
juÃSŞ¡iû
, &
juÃSŞ
);

1067 
	`loÿÉime_r
(&
deûmb”SŞ¡iû
, &
deûmb”SŞ
);

1068 
daylightTy³
 = ((
deûmb”SŞ
.
tm_isd¡
 > 0è<< 1è| (
juÃSŞ
.tm_isdst > 0);

1069 
tzid
 = 
	`»m­ShÜtTimeZÚe
(
U_TZNAME
[0], U_TZNAME[1], 
daylightTy³
, 
	`u´v_timezÚe
());

1070 ià(
tzid
 !ğ
NULL
) {

1071  
tzid
;

1074  
U_TZNAME
[
n
];

1079 
	}
}

1083 *
	ggD©aDœeùÜy
 = 
NULL
;

1084 #ià
U_POSIX_LOCALE


1085 *
	ggCÜ»ùedPOSIXLoÿË
 = 
NULL
;

1088 
UBoŞ
 
U_CALLCONV
 
	$put_ş—nup
()

1090 ià(
gD©aDœeùÜy
 && *gDataDirectory) {

1091 
	`u´v_ä“
(
gD©aDœeùÜy
);

1093 
gD©aDœeùÜy
 = 
NULL
;

1094 #ià
U_POSIX_LOCALE


1095 ià(
gCÜ»ùedPOSIXLoÿË
) {

1096 
	`u´v_ä“
(
gCÜ»ùedPOSIXLoÿË
);

1097 
gCÜ»ùedPOSIXLoÿË
 = 
NULL
;

1100  
TRUE
;

1101 
	}
}

1108 
U_CAPI
 
U_EXPORT2


1109 
	$u_£tD©aDœeùÜy
(cÚ¡ *
dœeùÜy
) {

1110 *
ÃwD©aDœ
;

1111 
št32_t
 
Ëngth
;

1113 if(
dœeùÜy
==
NULL
 || *directory==0) {

1118 
ÃwD©aDœ
 = (*)"";

1121 
Ëngth
=(
št32_t
)
	`u´v_¡¾’
(
dœeùÜy
);

1122 
ÃwD©aDœ
 = (*)
	`u´v_m®loc
(
Ëngth
 + 2);

1124 ià(
ÃwD©aDœ
 =ğ
NULL
) {

1127 
	`u´v_¡rıy
(
ÃwD©aDœ
, 
dœeùÜy
);

1129 #ià(
U_FILE_SEP_CHAR
 !ğ
U_FILE_ALT_SEP_CHAR
)

1131 *
p
;

1132 
p
 = 
	`u´v_¡rchr
(
ÃwD©aDœ
, 
U_FILE_ALT_SEP_CHAR
)) {

1133 *
p
 = 
U_FILE_SEP_CHAR
;

1139 
	`umtx_lock
(
NULL
);

1140 ià(
gD©aDœeùÜy
 && *gDataDirectory) {

1141 
	`u´v_ä“
(
gD©aDœeùÜy
);

1143 
gD©aDœeùÜy
 = 
ÃwD©aDœ
;

1144 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_PUTIL
, 
put_ş—nup
);

1145 
	`umtx_uÆock
(
NULL
);

1146 
	}
}

1148 
U_CAPI
 
UBoŞ
 
U_EXPORT2


1149 
	$u´v_·thIsAbsŞu‹
(cÚ¡ *
·th
)

1151 if(!
·th
 || !*path) {

1152  
FALSE
;

1155 if(*
·th
 =ğ
U_FILE_SEP_CHAR
) {

1156  
TRUE
;

1159 #ià(
U_FILE_SEP_CHAR
 !ğ
U_FILE_ALT_SEP_CHAR
)

1160 if(*
·th
 =ğ
U_FILE_ALT_SEP_CHAR
) {

1161  
TRUE
;

1165 #ià
	`defšed
(
U_WINDOWS
)

1166 ifĞ(((
·th
[0] >= 'A') && (path[0] <= 'Z')) ||

1167 ((
·th
[0] >= 'a') && (path[0] <= 'z'))) &&

1168 
·th
[1] == ':' ) {

1169  
TRUE
;

1173  
FALSE
;

1174 
	}
}

1178 #ià
defšed
(
U_DARWIN
è&& 
TARGET_IPHONE_SIMULATOR


1179 #ià!
defšed
(
ICU_DATA_DIR_PREFIX_ENV_VAR
)

1180 
	#ICU_DATA_DIR_PREFIX_ENV_VAR
 "IPHONE_SIMULATOR_ROOT"

	)

1184 
U_CAPI
 cÚ¡ * 
U_EXPORT2


1185 
	$u_g‘D©aDœeùÜy
() {

1186 cÚ¡ *
·th
 = 
NULL
;

1187 #ià
	`defšed
(
ICU_DATA_DIR_PREFIX_ENV_VAR
)

1188 
d©adœ_·th_bufãr
[
PATH_MAX
];

1192 
	`UMTX_CHECK
(
NULL
, 
gD©aDœeùÜy
, 
·th
);

1194 if(
·th
) {

1195  
·th
;

1211 #ià!
	`defšed
(
ICU_NO_USER_DATA_OVERRIDE
è&& !
UCONFIG_NO_FILE_IO


1213 
·th
=
	`g‘’v
("ICU_DATA");

1223 #ià
	`defšed
(
ICU_DATA_DIR
è|| defšed(
U_ICU_DATA_DEFAULT_DIR
)

1224 if(
·th
==
NULL
 || *path==0) {

1225 #ià
	`defšed
(
ICU_DATA_DIR_PREFIX_ENV_VAR
)

1226 cÚ¡ *
´efix
 = 
	`g‘’v
(
ICU_DATA_DIR_PREFIX_ENV_VAR
);

1228 #ifdeà
ICU_DATA_DIR


1229 
·th
=
ICU_DATA_DIR
;

1231 
·th
=
U_ICU_DATA_DEFAULT_DIR
;

1233 #ià
	`defšed
(
ICU_DATA_DIR_PREFIX_ENV_VAR
)

1234 ià(
´efix
 !ğ
NULL
) {

1235 
	`¢´štf
(
d©adœ_·th_bufãr
, 
PATH_MAX
, "%s%s", 
´efix
, 
·th
);

1236 
·th
=
d©adœ_·th_bufãr
;

1242 if(
·th
==
NULL
) {

1244 
·th
 = "";

1247 
	`u_£tD©aDœeùÜy
(
·th
);

1248  
gD©aDœeùÜy
;

1249 
	}
}

1256 #ifdeà
XP_MAC


1259 
št32_t
 
	msüt
;

1260 
št32_t
 
	m»giÚ
;

1261 
št32_t
 
	mÏng
;

1262 
št32_t
 
	md©e_»giÚ
;

1263 cÚ¡ * 
	mposixID
;

1264 } 
	tmac_lc_»c
;

1268 
	#MAC_LC_MAGIC_NUMBER
 -5

	)

1269 
	#MAC_LC_INIT_NUMBER
 -9

	)

1271 cÚ¡ 
mac_lc_»c
 
	gmac_lc_»cs
[] = {

1272 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 0, "en_US",

1274 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 1, "fr_FR",

1276 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 2, "en_GB",

1278 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 3, "de_DE",

1280 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 4, "it_IT",

1282 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 5, "nl_NL",

1284 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 6, "fr_BE",

1286 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 7, "sv_SE",

1288 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 9, "da_DK",

1290 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 10, "pt_PT",

1292 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 11, "fr_CA",

1294 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 13, "is_IS",

1296 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 14, "ja_JP",

1298 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 15, "en_AU",

1300 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 16, "ar_AE",

1302 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 17, "fi_FI",

1304 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 18, "fr_CH",

1306 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 19, "de_CH",

1308 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 20, "el_GR",

1310 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 21, "is_IS",

1316 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 24, "tr_TR",

1318 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 25, "sh_YU",

1324 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 41, "lt_LT",

1326 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 42, "pl_PL",

1328 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 43, "hu_HU",

1330 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 44, "et_EE",

1332 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 45, "lv_LV",

1338 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 48, "fa_IR",

1340 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 49, "ru_RU",

1342 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 50, "en_IE",

1344 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 51, "ko_KR",

1346 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 52, "zh_CN",

1348 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 53, "zh_TW",

1350 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER, 54, "th_TH",

1354 
MAC_LC_MAGIC_NUMBER
, MAC_LC_MAGIC_NUMBER, MAC_LC_MAGIC_NUMBER,

1355 
MAC_LC_MAGIC_NUMBER
, "en_US"

1360 #ià
U_POSIX_LOCALE


1365 cÚ¡ *
	$u´v_g‘POSIXIDFÜC©egÜy
(
ÿ‹gÜy
)

1367 cÚ¡ * 
posixID
 = 
NULL
;

1368 ià(
ÿ‹gÜy
 =ğ
LC_MESSAGES
 || c©egÜy =ğ
LC_CTYPE
) {

1387 
posixID
 = 
	`£oÿË
(
ÿ‹gÜy
, 
NULL
);

1388 ià((
posixID
 == 0)

1389 || (
	`u´v_¡rcmp
("C", 
posixID
) == 0)

1390 || (
	`u´v_¡rcmp
("POSIX", 
posixID
) == 0))

1393 
posixID
 = 
	`g‘’v
("LC_ALL");

1394 ià(
posixID
 == 0) {

1395 
posixID
 = 
	`g‘’v
(
ÿ‹gÜy
 =ğ
LC_MESSAGES
 ? "LC_MESSAGES" : "LC_CTYPE");

1396 ià(
posixID
 == 0) {

1397 
posixID
 = 
	`g‘’v
("LANG");

1402 ià((
posixID
==0)

1403 || (
	`u´v_¡rcmp
("C", 
posixID
) == 0)

1404 || (
	`u´v_¡rcmp
("POSIX", 
posixID
) == 0))

1407 
posixID
 = "en_US_POSIX";

1409  
posixID
;

1410 
	}
}

1415 cÚ¡ *
	$u´v_g‘POSIXIDFÜDeçuÉLoÿË
()

1417 cÚ¡ * 
posixID
 = 
NULL
;

1418 ià(
posixID
 == 0) {

1419 
posixID
 = 
	`u´v_g‘POSIXIDFÜC©egÜy
(
LC_MESSAGES
);

1421  
posixID
;

1422 
	}
}

1427 cÚ¡ *
	$u´v_g‘POSIXIDFÜDeçuÉCod•age
()

1429 cÚ¡ * 
posixID
 = 
NULL
;

1430 ià(
posixID
 == 0) {

1431 
posixID
 = 
	`u´v_g‘POSIXIDFÜC©egÜy
(
LC_CTYPE
);

1433  
posixID
;

1434 
	}
}

1438 
U_CAPI
 cÚ¡ * 
U_EXPORT2


1439 
	$u´v_g‘DeçuÉLoÿËID
()

1441 #ià
U_POSIX_LOCALE


1464 *
cÜ»ùedPOSIXLoÿË
 = 0;

1465 cÚ¡ * 
posixID
 = 
	`u´v_g‘POSIXIDFÜDeçuÉLoÿË
();

1466 cÚ¡ *
p
;

1467 cÚ¡ *
q
;

1468 
št32_t
 
Ën
;

1476 ià(
gCÜ»ùedPOSIXLoÿË
 !ğ
NULL
) {

1477  
gCÜ»ùedPOSIXLoÿË
;

1480 ià((
p
 = 
	`u´v_¡rchr
(
posixID
, '.')è!ğ
NULL
) {

1482 
cÜ»ùedPOSIXLoÿË
 = 
	`u´v_m®loc
(
	`u´v_¡¾’
(
posixID
)+1);

1484 ià(
cÜ»ùedPOSIXLoÿË
 =ğ
NULL
) {

1485  
NULL
;

1487 
	`u´v_¡ºıy
(
cÜ»ùedPOSIXLoÿË
, 
posixID
, 
p
-posixID);

1488 
cÜ»ùedPOSIXLoÿË
[
p
-
posixID
] = 0;

1491 ià((
p
 = 
	`u´v_¡rchr
(
cÜ»ùedPOSIXLoÿË
, '@')è!ğ
NULL
) {

1492 
cÜ»ùedPOSIXLoÿË
[
p
-correctedPOSIXLocale] = 0;

1497 ià((
p
 = 
	`u´v_¡¼chr
(
posixID
, '@')è!ğ
NULL
) {

1498 ià(
cÜ»ùedPOSIXLoÿË
 =ğ
NULL
) {

1499 
cÜ»ùedPOSIXLoÿË
 = 
	`u´v_m®loc
(
	`u´v_¡¾’
(
posixID
)+1);

1501 ià(
cÜ»ùedPOSIXLoÿË
 =ğ
NULL
) {

1502  
NULL
;

1504 
	`u´v_¡ºıy
(
cÜ»ùedPOSIXLoÿË
, 
posixID
, 
p
-posixID);

1505 
cÜ»ùedPOSIXLoÿË
[
p
-
posixID
] = 0;

1507 
p
++;

1510 ià(!
	`u´v_¡rcmp
(
p
, "nynorsk")) {

1511 
p
 = "NY";

1515 ià(
	`u´v_¡rchr
(
cÜ»ùedPOSIXLoÿË
,'_'è=ğ
NULL
) {

1516 
	`u´v_¡rÿt
(
cÜ»ùedPOSIXLoÿË
, "__");

1519 
	`u´v_¡rÿt
(
cÜ»ùedPOSIXLoÿË
, "_");

1522 ià((
q
 = 
	`u´v_¡rchr
(
p
, '.')è!ğ
NULL
) {

1524 
Ën
 = (
št32_t
)(
	`u´v_¡¾’
(
cÜ»ùedPOSIXLoÿË
è+ (
q
-
p
));

1525 
	`u´v_¡ºÿt
(
cÜ»ùedPOSIXLoÿË
, 
p
, 
q
-p);

1526 
cÜ»ùedPOSIXLoÿË
[
Ën
] = 0;

1530 
	`u´v_¡rÿt
(
cÜ»ùedPOSIXLoÿË
, 
p
);

1541 ià(
cÜ»ùedPOSIXLoÿË
 !ğ
NULL
) {

1542 
posixID
 = 
cÜ»ùedPOSIXLoÿË
;

1546 
cÜ»ùedPOSIXLoÿË
 = (*)
	`u´v_m®loc
(
	`u´v_¡¾’
(
posixID
) + 1);

1548 ià(
cÜ»ùedPOSIXLoÿË
 =ğ
NULL
) {

1549  
NULL
;

1551 
posixID
 = 
	`u´v_¡rıy
(
cÜ»ùedPOSIXLoÿË
,…osixID);

1554 ià(
gCÜ»ùedPOSIXLoÿË
 =ğ
NULL
) {

1555 
gCÜ»ùedPOSIXLoÿË
 = 
cÜ»ùedPOSIXLoÿË
;

1556 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_PUTIL
, 
put_ş—nup
);

1557 
cÜ»ùedPOSIXLoÿË
 = 
NULL
;

1560 ià(
cÜ»ùedPOSIXLoÿË
 !ğ
NULL
) {

1561 
	`u´v_ä“
(
cÜ»ùedPOSIXLoÿË
);

1564  
posixID
;

1566 #–ià
	`defšed
(
U_WINDOWS
)

1567 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

1568 
LCID
 
id
 = 
	`G‘Th»adLoÿË
();

1569 cÚ¡ * 
locID
 = 
	`u´v_cÚv”tToPosix
(
id
, &
¡©us
);

1571 ià(
	`U_FAILURE
(
¡©us
)) {

1572 
locID
 = "en_US";

1574  
locID
;

1576 #–ià
	`defšed
(
XP_MAC
)

1577 
št32_t
 
süt
 = 
MAC_LC_INIT_NUMBER
;

1579 
št32_t
 
»giÚ
 = 
MAC_LC_INIT_NUMBER
;

1581 
št32_t
 
Ïng
 = 
MAC_LC_INIT_NUMBER
;

1583 
št32_t
 
d©e_»giÚ
 = 
MAC_LC_INIT_NUMBER
;

1584 cÚ¡ * 
posixID
 = 0;

1585 
št32_t
 
couÁ
 = (
mac_lc_»cs
è/ (
mac_lc_»c
);

1586 
št32_t
 
i
;

1587 
IÁl1Hndl
 
ih
;

1589 
ih
 = (
IÁl1Hndl
è
	`G‘IÁlResourû
(1);

1590 ià(
ih
)

1591 
d©e_»giÚ
 = ((
ušt16_t
)(*
ih
)->
š1V”s
) >> 8;

1593 
i
 = 0; i < 
couÁ
; i++) {

1594 iàĞ((
mac_lc_»cs
[
i
].
süt
 =ğ
MAC_LC_MAGIC_NUMBER
)

1595 || (
mac_lc_»cs
[
i
].
süt
 == script))

1596 && ((
mac_lc_»cs
[
i
].
»giÚ
 =ğ
MAC_LC_MAGIC_NUMBER
)

1597 || (
mac_lc_»cs
[
i
].
»giÚ
 ==„egion))

1598 && ((
mac_lc_»cs
[
i
].
Ïng
 =ğ
MAC_LC_MAGIC_NUMBER
)

1599 || (
mac_lc_»cs
[
i
].
Ïng
 ==†ang))

1600 && ((
mac_lc_»cs
[
i
].
d©e_»giÚ
 =ğ
MAC_LC_MAGIC_NUMBER
)

1601 || (
mac_lc_»cs
[
i
].
d©e_»giÚ
 == date_region))

1604 
posixID
 = 
mac_lc_»cs
[
i
].posixID;

1609  
posixID
;

1611 #–ià
	`defšed
(
OS400
)

1613 
cÜ»ùedLoÿË
[64];

1614 cÚ¡ *
loÿËID
 = 
	`g‘’v
("LC_ALL");

1615 *
p
;

1617 ià(
loÿËID
 =ğ
NULL
)

1618 
loÿËID
 = 
	`g‘’v
("LANG");

1619 ià(
loÿËID
 =ğ
NULL
)

1620 
loÿËID
 = 
	`£oÿË
(
LC_ALL
, 
NULL
);

1622 ià(
loÿËID
 =ğ
NULL
)

1626 if((
p
 = 
	`u´v_¡¼chr
(
loÿËID
, '/')è!ğ
NULL
)

1629 
p
++;

1630 
loÿËID
 = 
p
;

1634 
	`u´v_¡rıy
(
cÜ»ùedLoÿË
, 
loÿËID
);

1637 if((
p
 = 
	`u´v_¡rchr
(
cÜ»ùedLoÿË
, '.')è!ğ
NULL
) {

1638 *
p
 = 0;

1642 
	`T_CSŒšg_toUµ”Ca£
(
cÜ»ùedLoÿË
);

1651 ià((
	`u´v_¡rcmp
("C", 
cÜ»ùedLoÿË
) == 0) ||

1652 (
	`u´v_¡rcmp
("POSIX", 
cÜ»ùedLoÿË
) == 0) ||

1653 (
	`u´v_¡ºcmp
("QLGPGCMA", 
cÜ»ùedLoÿË
, 8) == 0))

1655 
	`u´v_¡rıy
(
cÜ»ùedLoÿË
, "en_US_POSIX");

1659 
št16_t
 
LoÿËL’
;

1662 
p
 = 
cÜ»ùedLoÿË
; *p != 0 && *p != '_';…++)

1664 *
p
 = 
	`u´v_tŞow”
(*p);

1668 
LoÿËL’
 = 
	`u´v_¡¾’
(
cÜ»ùedLoÿË
);

1669 ià(
cÜ»ùedLoÿË
[
LoÿËL’
 - 2] == '_' &&

1670 
cÜ»ùedLoÿË
[
LoÿËL’
 - 1] == 'E')

1672 
	`u´v_¡rÿt
(
cÜ»ùedLoÿË
, "URO");

1678 ià(
cÜ»ùedLoÿË
[
LoÿËL’
 - 2] == '_' &&

1679 
cÜ»ùedLoÿË
[
LoÿËL’
 - 1] == 'L')

1681 
cÜ»ùedLoÿË
[
LoÿËL’
 - 2] = 0;

1687 ià(
	`u´v_¡ºcmp
(
cÜ»ùedLoÿË
, "zh_HK", 5) == 0)

1689 
	`u´v_¡rıy
(
cÜ»ùedLoÿË
, "zh_HK");

1694 ià(
	`u´v_¡rcmp
(
cÜ»ùedLoÿË
, "zh_CN_GBK") == 0)

1696 
	`u´v_¡rıy
(
cÜ»ùedLoÿË
, "zh_CN");

1701  
cÜ»ùedLoÿË
;

1704 
	}
}

1706 #ià!
U_CHARSET_IS_UTF8


1707 #ià
U_POSIX_LOCALE


1716 
	$»m­PÏtfÜmD•’d’tCod•age
(cÚ¡ *
loÿË
, cÚ¡ *
Çme
) {

1717 ià(
loÿË
 !ğ
NULL
 && *locale == 0) {

1719 
loÿË
 = 
NULL
;

1721 ià(
Çme
 =ğ
NULL
) {

1722  
NULL
;

1724 #ià
	`defšed
(
U_AIX
)

1725 ià(
	`u´v_¡rcmp
(
Çme
, "IBM-943") == 0) {

1727 
Çme
 = "Shift-JIS";

1729 ià(
	`u´v_¡rcmp
(
Çme
, "IBM-1252") == 0) {

1731 
Çme
 = "IBM-5348";

1733 #–ià
	`defšed
(
U_SOLARIS
)

1734 ià(
loÿË
 !ğ
NULL
 && 
	`u´v_¡rcmp
(
Çme
, "EUC") == 0) {

1736 ià(
	`u´v_¡rcmp
(
loÿË
, "zh_CN") == 0) {

1737 
Çme
 = "EUC-CN";

1739 ià(
	`u´v_¡rcmp
(
loÿË
, "zh_TW") == 0) {

1740 
Çme
 = "EUC-TW";

1742 ià(
	`u´v_¡rcmp
(
loÿË
, "ko_KR") == 0) {

1743 
Çme
 = "EUC-KR";

1746 ià(
	`u´v_¡rcmp
(
Çme
, "eucJP") == 0) {

1751 
Çme
 = "eucjis";

1753 ià(
	`u´v_¡rcmp
(
Çme
, "646") == 0) {

1758 
Çme
 = "ISO-8859-1";

1760 #–ià
	`defšed
(
U_DARWIN
)

1761 ià(
loÿË
 =ğ
NULL
 && *
Çme
 == 0) {

1767 
Çme
 = "UTF-8";

1769 ià(
	`u´v_¡rcmp
(
Çme
, "CP949") == 0) {

1771 
Çme
 = "EUC-KR";

1773 ià(
loÿË
 !ğ
NULL
 && 
	`u´v_¡rcmp
ÖoÿË, "’_US_POSIX"è!ğ0 && u´v_¡rcmp(
Çme
, "US-ASCII") == 0) {

1777 
Çme
 = "UTF-8";

1779 #–ià
	`defšed
(
U_BSD
)

1780 ià(
	`u´v_¡rcmp
(
Çme
, "CP949") == 0) {

1782 
Çme
 = "EUC-KR";

1784 #–ià
	`defšed
(
U_HPUX
)

1785 ià(
loÿË
 !ğ
NULL
 && 
	`u´v_¡rcmp
ÖoÿË, "zh_HK"è=ğ0 && u´v_¡rcmp(
Çme
, "big5") == 0) {

1788 
Çme
 = "hkbig5";

1790 ià(
	`u´v_¡rcmp
(
Çme
, "eucJP") == 0) {

1796 
Çme
 = "eucjis";

1798 #–ià
	`defšed
(
U_LINUX
)

1799 ià(
loÿË
 !ğ
NULL
 && 
	`u´v_¡rcmp
(
Çme
, "euc") == 0) {

1801 ià(
	`u´v_¡rcmp
(
loÿË
, "korean") == 0) {

1802 
Çme
 = "EUC-KR";

1804 ià(
	`u´v_¡rcmp
(
loÿË
, "japanese") == 0) {

1806 
Çme
 = "eucjis";

1809 ià(
	`u´v_¡rcmp
(
Çme
, "eucjp") == 0) {

1815 
Çme
 = "eucjis";

1817 ià(
loÿË
 !ğ
NULL
 && 
	`u´v_¡rcmp
(locale, "en_US_POSIX") != 0 &&

1818 (
	`u´v_¡rcmp
(
Çme
, "ANSI_X3.4-1968") == 0 || uprv_strcmp(name, "US-ASCII") == 0)) {

1822 
Çme
 = "UTF-8";

1831 ià(*
Çme
 == 0) {

1832 
Çme
 = 
NULL
;

1834  
Çme
;

1835 
	}
}

1838 
	$g‘Cod•ageFromPOSIXID
(cÚ¡ *
loÿËName
, * 
bufãr
, 
št32_t
 
buffC­ac™y
)

1840 
loÿËBuf
[100];

1841 cÚ¡ *
Çme
 = 
NULL
;

1842 *
v¬ŸÁ
 = 
NULL
;

1844 ià(
loÿËName
 !ğ
NULL
 && (
Çme
 = (
	`u´v_¡rchr
(localeName, '.'))) != NULL) {

1845 
size_t
 
loÿËC­ac™y
 = 
	`u´v_mš
((
loÿËBuf
), (
Çme
-
loÿËName
)+1);

1846 
	`u´v_¡ºıy
(
loÿËBuf
, 
loÿËName
, 
loÿËC­ac™y
);

1847 
loÿËBuf
[
loÿËC­ac™y
-1] = 0;

1848 
Çme
 = 
	`u´v_¡ºıy
(
bufãr
,‚ame+1, 
buffC­ac™y
);

1849 
bufãr
[
buffC­ac™y
-1] = 0;

1850 ià((
v¬ŸÁ
 = (
	`u´v_¡rchr
(
Çme
, '@'))è!ğ
NULL
) {

1851 *
v¬ŸÁ
 = 0;

1853 
Çme
 = 
	`»m­PÏtfÜmD•’d’tCod•age
(
loÿËBuf
,‚ame);

1855  
Çme
;

1856 
	}
}

1860 
	$št_g‘DeçuÉCod•age
()

1862 #ià
	`defšed
(
OS400
)

1863 
ušt32_t
 
ccsid
 = 37;

1864 
cod•age
[64];

1865 
Qwc_JOBI0400_t
 
jobšfo
;

1866 
Qus_EC_t
 
”rÜ
 = { (Qus_EC_t) };

1868 
	`EPT_CALL
(
QUSRJOBI
)(&
jobšfo
, (jobinfo), "JOBI0400",

1869 "* ", " ", &
”rÜ
);

1871 ià(
”rÜ
.
By‹s_AvaabË
 == 0) {

1872 ià(
jobšfo
.
Coded_Ch¬_S‘_ID
 != 0xFFFF) {

1873 
ccsid
 = (
ušt32_t
)
jobšfo
.
Coded_Ch¬_S‘_ID
;

1875 ià(
jobšfo
.
DeçuÉ_Coded_Ch¬_S‘_Id
 != 0xFFFF) {

1876 
ccsid
 = (
ušt32_t
)
jobšfo
.
DeçuÉ_Coded_Ch¬_S‘_Id
;

1880 
	`¥rštf
(
cod•age
,"ibm-%d", 
ccsid
);

1881  
cod•age
;

1883 #–ià
	`defšed
(
OS390
)

1884 
cod•age
[64];

1886 
	`¡ºıy
(
cod•age
, 
	`Æ_Ïngšfo
(
CODESET
),63-
	`¡¾’
(
UCNV_SWAP_LFNL_OPTION_STRING
));

1887 
	`¡rÿt
(
cod•age
,
UCNV_SWAP_LFNL_OPTION_STRING
);

1888 
cod•age
[63] = 0;

1890  
cod•age
;

1892 #–ià
	`defšed
(
XP_MAC
)

1895 #–ià
	`defšed
(
U_WINDOWS
)

1896 
cod•age
[64];

1897 
	`¥rštf
(
cod•age
, "wšdows-%d", 
	`G‘ACP
());

1898  
cod•age
;

1900 #–ià
U_POSIX_LOCALE


1901 
code£tName
[100];

1902 cÚ¡ *
loÿËName
 = 
NULL
;

1903 cÚ¡ *
Çme
 = 
NULL
;

1905 
loÿËName
 = 
	`u´v_g‘POSIXIDFÜDeçuÉCod•age
();

1906 
	`u´v_mem£t
(
code£tName
, 0, (codesetName));

1907 #ià
U_HAVE_NL_LANGINFO_CODESET


1912 cÚ¡ *
code£t
 = 
	`Æ_Ïngšfo
(
U_NL_LANGINFO_CODESET
);

1913 #ià
	`defšed
(
U_DARWIN
è|| defšed(
U_LINUX
)

1918 ià(
	`u´v_¡rcmp
(
loÿËName
, "en_US_POSIX") != 0) {

1919 
code£t
 = 
	`»m­PÏtfÜmD•’d’tCod•age
(
loÿËName
, codeset);

1923 
code£t
 = 
	`»m­PÏtfÜmD•’d’tCod•age
(
NULL
, codeset);

1926 ià(
code£t
 !ğ
NULL
) {

1927 
	`u´v_¡ºıy
(
code£tName
, 
code£t
, (codesetName));

1928 
code£tName
[(codesetName)-1] = 0;

1929  
code£tName
;

1937 
	`u´v_mem£t
(
code£tName
, 0, (codesetName));

1938 
Çme
 = 
	`g‘Cod•ageFromPOSIXID
(
loÿËName
, 
code£tName
, (codesetName));

1939 ià(
Çme
) {

1941  
Çme
;

1944 ià(*
code£tName
 == 0)

1947 ()
	`u´v_¡rıy
(
code£tName
, "US-ASCII");

1949  
code£tName
;

1953 
	}
}

1956 
U_CAPI
 cÚ¡ * 
U_EXPORT2


1957 
	$u´v_g‘DeçuÉCod•age
()

1959 cÚ¡ *
Çme
 = 
NULL
;

1960 
	`umtx_lock
(
NULL
);

1961 ià(
Çme
 =ğ
NULL
) {

1962 
Çme
 = 
	`št_g‘DeçuÉCod•age
();

1964 
	`umtx_uÆock
(
NULL
);

1965  
Çme
;

1966 
	}
}

1974 
U_CAPI
 
U_EXPORT2


1975 
	$u_v”siÚFromSŒšg
(
UV”siÚInfo
 
v”siÚA¼ay
, cÚ¡ *
v”siÚSŒšg
) {

1976 *
’d
;

1977 
ušt16_t
 
·¹
=0;

1979 if(
v”siÚA¼ay
==
NULL
) {

1983 if(
v”siÚSŒšg
!=
NULL
) {

1985 
v”siÚA¼ay
[
·¹
]=(
ušt8_t
)
	`u´v_¡¹oul
(
v”siÚSŒšg
, &
’d
, 10);

1986 if(
’d
==
v”siÚSŒšg
 || ++
·¹
==
U_MAX_VERSION_LENGTH
 || *’d!=
U_VERSION_DELIMITER
) {

1989 
v”siÚSŒšg
=
’d
+1;

1993 
·¹
<
U_MAX_VERSION_LENGTH
) {

1994 
v”siÚA¼ay
[
·¹
++]=0;

1996 
	}
}

1998 
U_CAPI
 
U_EXPORT2


1999 
	$u_v”siÚFromUSŒšg
(
UV”siÚInfo
 
v”siÚA¼ay
, cÚ¡ 
UCh¬
 *
v”siÚSŒšg
) {

2000 if(
v”siÚA¼ay
!=
NULL
 && 
v”siÚSŒšg
!=NULL) {

2001 
v”siÚCh¬s
[
U_MAX_VERSION_STRING_LENGTH
+1];

2002 
št32_t
 
Ën
 = 
	`u_¡¾’
(
v”siÚSŒšg
);

2003 if(
Ën
>
U_MAX_VERSION_STRING_LENGTH
) {

2004 
Ën
 = 
U_MAX_VERSION_STRING_LENGTH
;

2006 
	`u_UCh¬sToCh¬s
(
v”siÚSŒšg
, 
v”siÚCh¬s
, 
Ën
);

2007 
v”siÚCh¬s
[
Ën
]=0;

2008 
	`u_v”siÚFromSŒšg
(
v”siÚA¼ay
, 
v”siÚCh¬s
);

2010 
	}
}

2012 
U_CAPI
 
U_EXPORT2


2013 
	$u_v”siÚToSŒšg
(
UV”siÚInfo
 
v”siÚA¼ay
, *
v”siÚSŒšg
) {

2014 
ušt16_t
 
couÁ
, 
·¹
;

2015 
ušt8_t
 
f›ld
;

2017 if(
v”siÚSŒšg
==
NULL
) {

2021 if(
v”siÚA¼ay
==
NULL
) {

2022 
v”siÚSŒšg
[0]=0;

2027 
couÁ
=4; couÁ>0 && 
v”siÚA¼ay
[count-1]==0; --count) {

2030 if(
couÁ
 <= 1) {

2031 
couÁ
 = 2;

2036 
f›ld
=
v”siÚA¼ay
[0];

2037 if(
f›ld
>=100) {

2038 *
v”siÚSŒšg
++=()('0'+
f›ld
/100);

2039 
f›ld
%=100;

2041 if(
f›ld
>=10) {

2042 *
v”siÚSŒšg
++=()('0'+
f›ld
/10);

2043 
f›ld
%=10;

2045 *
v”siÚSŒšg
++=()('0'+
f›ld
);

2048 
·¹
=1;…¬t<
couÁ
; ++part) {

2050 *
v”siÚSŒšg
++=
U_VERSION_DELIMITER
;

2053 
f›ld
=
v”siÚA¼ay
[
·¹
];

2054 if(
f›ld
>=100) {

2055 *
v”siÚSŒšg
++=()('0'+
f›ld
/100);

2056 
f›ld
%=100;

2058 if(
f›ld
>=10) {

2059 *
v”siÚSŒšg
++=()('0'+
f›ld
/10);

2060 
f›ld
%=10;

2062 *
v”siÚSŒšg
++=()('0'+
f›ld
);

2066 *
v”siÚSŒšg
=0;

2067 
	}
}

2069 
U_CAPI
 
U_EXPORT2


2070 
	$u_g‘V”siÚ
(
UV”siÚInfo
 
v”siÚA¼ay
) {

2071 
	`u_v”siÚFromSŒšg
(
v”siÚA¼ay
, 
U_ICU_VERSION
);

2072 
	}
}

2078 #ià
U_ENABLE_DYLOAD


2080 #ià
defšed
(
U_CHECK_DYLOAD
)

2082 #ià
defšed
(
HAVE_DLOPEN
)

2084 #ifdeà
HAVE_DLFCN_H


2085 #ifdeà
__MVS__


2086 #iâdeà
__SUSV3


2087 
	#__SUSV3
 1

	)

2090 
	~<dlfú.h
>

2093 
U_INTERNAL
 * 
U_EXPORT2


2094 
	$u´v_dl_İ’
(cÚ¡ *
libName
, 
UE¼ÜCode
 *
¡©us
) {

2095 *
»t
 = 
NULL
;

2096 if(
	`U_FAILURE
(*
¡©us
)è 
»t
;

2097 
»t
 = 
	`dlİ’
(
libName
, 
RTLD_NOW
|
RTLD_GLOBAL
);

2098 if(
»t
==
NULL
) {

2099 #iâdeà
U_TRACE_DYLOAD


2100 
	`³¼Ü
("dlopen");

2102 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

2104  
»t
;

2105 
	}
}

2107 
U_INTERNAL
 
U_EXPORT2


2108 
	$u´v_dl_şo£
(*
lib
, 
UE¼ÜCode
 *
¡©us
) {

2109 if(
	`U_FAILURE
(*
¡©us
)) ;

2110 
	`dlşo£
(
lib
);

2111 
	}
}

2113 
U_INTERNAL
 * 
U_EXPORT2


2114 
	$u´v_dl_sym
(*
lib
, cÚ¡ * 
sym
, 
UE¼ÜCode
 *
¡©us
) {

2115 *
»t
 = 
NULL
;

2116 if(
	`U_FAILURE
(*
¡©us
)è 
»t
;

2117 
»t
 = 
	`dlsym
(
lib
, 
sym
);

2118 if(
»t
 =ğ
NULL
) {

2119 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

2121  
»t
;

2122 
	}
}

2128 
U_INTERNAL
 * 
U_EXPORT2


2129 
	$u´v_dl_İ’
(cÚ¡ *
libName
, 
UE¼ÜCode
 *
¡©us
) {

2130 if(
	`U_FAILURE
(*
¡©us
)è 
NULL
;

2131 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

2132  
NULL
;

2133 
	}
}

2135 
U_INTERNAL
 
U_EXPORT2


2136 
	$u´v_dl_şo£
(*
lib
, 
UE¼ÜCode
 *
¡©us
) {

2137 if(
	`U_FAILURE
(*
¡©us
)) ;

2138 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

2140 
	}
}

2143 
U_INTERNAL
 * 
U_EXPORT2


2144 
	$u´v_dl_sym
(*
lib
, cÚ¡ * 
sym
, 
UE¼ÜCode
 *
¡©us
) {

2145 if(
	`U_FAILURE
(*
¡©us
)è 
NULL
;

2146 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

2147  
NULL
;

2148 
	}
}

2154 #–ià
defšed
 
U_WINDOWS


2156 
U_INTERNAL
 * 
U_EXPORT2


2157 
	$u´v_dl_İ’
(cÚ¡ *
libName
, 
UE¼ÜCode
 *
¡©us
) {

2158 
HMODULE
 
lib
 = 
NULL
;

2160 if(
	`U_FAILURE
(*
¡©us
)è 
NULL
;

2162 
lib
 = 
	`LßdLib¿ry
(
libName
);

2164 if(
lib
==
NULL
) {

2165 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

2168  (*)
lib
;

2169 
	}
}

2171 
U_INTERNAL
 
U_EXPORT2


2172 
	$u´v_dl_şo£
(*
lib
, 
UE¼ÜCode
 *
¡©us
) {

2173 
HMODULE
 
hªdË
 = (HMODULE)
lib
;

2174 if(
	`U_FAILURE
(*
¡©us
)) ;

2176 
	`F»eLib¿ry
(
hªdË
);

2179 
	}
}

2182 
U_INTERNAL
 * 
U_EXPORT2


2183 
	$u´v_dl_sym
(*
lib
, cÚ¡ * 
sym
, 
UE¼ÜCode
 *
¡©us
) {

2184 
HMODULE
 
hªdË
 = (HMODULE)
lib
;

2185 * 
addr
 = 
NULL
;

2187 if(
	`U_FAILURE
(*
¡©us
è|| 
lib
==
NULL
)  NULL;

2189 
addr
 = 
	`G‘ProcAdd»ss
(
hªdË
, 
sym
);

2191 if(
addr
==
NULL
) {

2192 
DWORD
 
Ï¡E¼Ü
 = 
	`G‘La¡E¼Ü
();

2193 if(
Ï¡E¼Ü
 =ğ
ERROR_PROC_NOT_FOUND
) {

2194 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

2196 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

2200  
addr
;

2201 
	}
}

2208 
U_INTERNAL
 * 
U_EXPORT2


2209 
	$u´v_dl_İ’
(cÚ¡ *
libName
, 
UE¼ÜCode
 *
¡©us
) {

2210 if(
	`U_FAILURE
(*
¡©us
)è 
NULL
;

2211 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

2212  
NULL
;

2213 
	}
}

2215 
U_INTERNAL
 
U_EXPORT2


2216 
	$u´v_dl_şo£
(*
lib
, 
UE¼ÜCode
 *
¡©us
) {

2217 if(
	`U_FAILURE
(*
¡©us
)) ;

2218 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

2220 
	}
}

2223 
U_INTERNAL
 * 
U_EXPORT2


2224 
	$u´v_dl_sym
(*
lib
, cÚ¡ * 
sym
, 
UE¼ÜCode
 *
¡©us
) {

2225 if(
	`U_FAILURE
(*
¡©us
)è 
NULL
;

2226 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

2227  
NULL
;

2228 
	}
}

2237 
U_CAPI
 
U_EXPORT2


2238 
	$__cxa_bad_ÿ¡
 ()

2240 
	`abÜt
();

2241 
	}
}

2243 
U_CAPI
 
U_EXPORT2


2244 
	$__cxa_bad_ty³id
 ()

2246 
	`abÜt
();

2247 
	}
}

	@putilimp.h

16 #iâdeà
PUTILIMP_H


17 
	#PUTILIMP_H


	)

19 
	~"unicode/uty³s.h
"

20 
	~"unicode/put.h
"

36 
U_INTERNAL
 
UBoŞ
 
U_EXPORT2
 
u´v_isNaN
(
d
);

41 
U_INTERNAL
 
UBoŞ
 
U_EXPORT2
 
u´v_isInfš™e
(
d
);

46 
U_INTERNAL
 
UBoŞ
 
U_EXPORT2
 
u´v_isPos™iveInfš™y
(
d
);

51 
U_INTERNAL
 
UBoŞ
 
U_EXPORT2
 
u´v_isNeg©iveInfš™y
(
d
);

56 
U_INTERNAL
 
U_EXPORT2
 
u´v_g‘NaN
();

61 
U_INTERNAL
 
U_EXPORT2
 
u´v_g‘Infš™y
();

67 
U_INTERNAL
 
U_EXPORT2
 
u´v_Œunc
(
d
);

72 
U_INTERNAL
 
U_EXPORT2
 
u´v_æoÜ
(
d
);

77 
U_INTERNAL
 
U_EXPORT2
 
u´v_û
(
d
);

82 
U_INTERNAL
 
U_EXPORT2
 
u´v_çbs
(
d
);

87 
U_INTERNAL
 
U_EXPORT2
 
u´v_modf
(
d
, * 
pš‹g”
);

92 
U_INTERNAL
 
U_EXPORT2
 
u´v_fmod
(
d
, 
y
);

97 
U_INTERNAL
 
U_EXPORT2
 
u´v_pow
(
d
, 
expÚ’t
);

102 
U_INTERNAL
 
U_EXPORT2
 
u´v_pow10
(
št32_t
 
expÚ’t
);

107 
U_INTERNAL
 
U_EXPORT2
 
u´v_fmax
(
d
, 
y
);

112 
U_INTERNAL
 
U_EXPORT2
 
u´v_fmš
(
d
, 
y
);

117 
U_INTERNAL
 
št32_t
 
U_EXPORT2
 
u´v_max
(št32_ˆ
d
, iÁ32_ˆ
y
);

122 
U_INTERNAL
 
št32_t
 
U_EXPORT2
 
u´v_mš
(št32_ˆ
d
, iÁ32_ˆ
y
);

124 #ià
U_IS_BIG_ENDIAN


125 
	#u´v_isNeg©ive
(
numb”
è(*((sigÃd *)&Òumb”))<0)

	)

127 
	#u´v_isNeg©ive
(
numb”
è(*((sigÃd *)&Òumb”)+Òumb”)-1)<0)

	)

135 
U_INTERNAL
 
U_EXPORT2
 
u´v_maxMªtis§
();

141 
U_INTERNAL
 
U_EXPORT2
 
u´v_log
(
d
);

149 
U_INTERNAL
 
U_EXPORT2
 
u´v_round
(
x
);

194 
U_INTERNAL
 
U_EXPORT2
 
u´v_tz£t
();

202 
U_INTERNAL
 
št32_t
 
U_EXPORT2
 
u´v_timezÚe
();

212 
U_INTERNAL
 cÚ¡ * 
U_EXPORT2
 
u´v_tzÇme
(
n
);

220 
U_INTERNAL
 
UD©e
 
U_EXPORT2
 
u´v_g‘UTCtime
();

229 
U_INTERNAL
 
UD©e
 
U_EXPORT2
 
u´v_g‘RawUTCtime
();

237 
U_INTERNAL
 
UBoŞ
 
U_EXPORT2
 
u´v_·thIsAbsŞu‹
(cÚ¡ *
·th
);

245 
U_INTERNAL
 * 
U_EXPORT2
 
u´v_maximumPŒ
(*
ba£
);

261 #iâdeà
U_MAX_PTR


262 #ià
defšed
(
OS390
è&& !defšed(
_LP64
)

264 
	#U_MAX_PTR
(
ba£
è((*)0x7fffffff)

	)

265 #–ià
defšed
(
OS400
)

266 
	#U_MAX_PTR
(
ba£
è
	`u´v_maximumPŒ
((*)ba£)

	)

267 #–ià
defšed
(
__GNUC__
) && __GNUC__ >= 4

275 
	#U_MAX_PTR
(
ba£
) \

276 ((*)(((
ušŒ_t
)(
ba£
)+0x7fffffffu) > (uintptr_t)(base) \

277 ? ((
ušŒ_t
)(
ba£
)+0x7fffffffu) \

278 : (
ušŒ_t
)-1))

	)

280 
	#U_MAX_PTR
(
ba£
) \

281 ((*)(((*)(
ba£
)+0x7fffffffu) > (*)(base) \

282 ? ((*)(
ba£
)+0x7fffffffu) \

283 : (*)-1))

	)

287 #ià
U_ENABLE_DYLOAD


294 
U_INTERNAL
 * 
U_EXPORT2
 
u´v_dl_İ’
(cÚ¡ *
libName
, 
UE¼ÜCode
 *
¡©us
);

300 
U_INTERNAL
 
U_EXPORT2
 
u´v_dl_şo£
Ğ*
lib
, 
UE¼ÜCode
 *
¡©us
);

306 
U_INTERNAL
 * 
U_EXPORT2
 
u´v_dl_sym
Ğ*
lib
, cÚ¡ *
symbŞName
, 
UE¼ÜCode
 *
¡©us
);

	@rbbi.cpp

13 
	~<ty³šfo
>

15 
	~"unicode/uty³s.h
"

17 #ià!
UCONFIG_NO_BREAK_ITERATION


19 
	~"unicode/rbbi.h
"

20 
	~"unicode/schr™”.h
"

21 
	~"unicode/uchr™”.h
"

22 
	~"unicode/ud©a.h
"

23 
	~"unicode/uş—n.h
"

24 
	~"rbbid©a.h
"

25 
	~"rbbœb.h
"

26 
	~"cmemÜy.h
"

27 
	~"c¡ršg.h
"

28 
	~"umu‹x.h
"

29 
	~"uşn_cmn.h
"

30 
	~"brk’g.h
"

32 
	~"uas£¹.h
"

33 
	~"uveùÜ.h
"

36 #ià
U_LOCAL_SERVICE_HOOK


37 
	~"loÿlsvc.h
"

40 #ifdeà
RBBI_DEBUG


41 
UBoŞ
 
	gfT¿û
 = 
FALSE
;

44 
	gU_NAMESPACE_BEGIN


47 
	#START_STATE
 1

	)

50 
	#STOP_STATE
 0

	)

53 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
RuËBa£dB»akI‹¿tÜ
)

64 
RuËBa£dB»akI‹¿tÜ
::
	$RuËBa£dB»akI‹¿tÜ
(
RBBID©aH—d”
* 
d©a
, 
UE¼ÜCode
 &
¡©us
)

66 
	`š™
();

67 
fD©a
 = 
Ãw
 
	`RBBID©aW¿µ”
(
d©a
, 
¡©us
);

68 ià(
	`U_FAILURE
(
¡©us
)) {;}

69 if(
fD©a
 == 0) {

70 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

73 
	}
}

78 
	gRuËBa£dB»akI‹¿tÜ
::
	$RuËBa£dB»akI‹¿tÜ
(cÚ¡ 
RBBID©aH—d”
* 
d©a
, 
EDÚtAdİt
, 
UE¼ÜCode
 &
¡©us
)

80 
	`š™
();

81 
fD©a
 = 
Ãw
 
	`RBBID©aW¿µ”
(
d©a
, 
RBBID©aW¿µ”
::
kDÚtAdİt
, 
¡©us
);

82 ià(
	`U_FAILURE
(
¡©us
)) {;}

83 if(
fD©a
 == 0) {

84 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

87 
	}
}

95 
	gRuËBa£dB»akI‹¿tÜ
::
	$RuËBa£dB»akI‹¿tÜ
(
UD©aMemÜy
* 
udm
, 
UE¼ÜCode
 &
¡©us
)

97 
	`š™
();

98 
fD©a
 = 
Ãw
 
	`RBBID©aW¿µ”
(
udm
, 
¡©us
);

99 ià(
	`U_FAILURE
(
¡©us
)) {;}

100 if(
fD©a
 == 0) {

101 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

104 
	}
}

113 
	gRuËBa£dB»akI‹¿tÜ
::
	$RuËBa£dB»akI‹¿tÜ
ĞcÚ¡ 
UnicodeSŒšg
 &
ruËs
,

114 
UP¬£E¼Ü
 &
·r£E¼Ü
,

115 
UE¼ÜCode
 &
¡©us
)

117 
	`š™
();

118 ià(
	`U_FAILURE
(
¡©us
)) {;}

119 
RuËBa£dB»akI‹¿tÜ
 *
bi
 = (RuleBasedBreakIterator *)

120 
RBBIRuËBud”
::
	`ü—‹RuËBa£dB»akI‹¿tÜ
(
ruËs
, &
·r£E¼Ü
, 
¡©us
);

125 ià(
	`U_SUCCESS
(
¡©us
)) {

126 *
this
 = *
bi
;

127 
d–‘e
 
bi
;

129 
	}
}

138 
	gRuËBa£dB»akI‹¿tÜ
::
	$RuËBa£dB»akI‹¿tÜ
() {

139 
	`š™
();

140 
	}
}

149 
	gRuËBa£dB»akI‹¿tÜ
::
	$RuËBa£dB»akI‹¿tÜ
(cÚ¡ 
RuËBa£dB»akI‹¿tÜ
& 
Ùh”
)

150 : 
	$B»akI‹¿tÜ
(
Ùh”
)

152 
this
->
	`š™
();

153 *
this
 = 
Ùh”
;

154 
	}
}

160 
	gRuËBa£dB»akI‹¿tÜ
::~
	$RuËBa£dB»akI‹¿tÜ
() {

161 ià(
fCh¬I‹r
!=
fSCh¬I‹r
 && fCh¬I‹r!=
fDCh¬I‹r
) {

163 
d–‘e
 
fCh¬I‹r
;

165 
fCh¬I‹r
 = 
NULL
;

166 
d–‘e
 
fSCh¬I‹r
;

167 
fCh¬I‹r
 = 
NULL
;

168 
d–‘e
 
fDCh¬I‹r
;

169 
fDCh¬I‹r
 = 
NULL
;

171 
	`u‹xt_şo£
(
fText
);

173 ià(
fD©a
 !ğ
NULL
) {

174 
fD©a
->
	`»moveReã»nû
();

175 
fD©a
 = 
NULL
;

177 ià(
fCachedB»akPos™iÚs
) {

178 
	`u´v_ä“
(
fCachedB»akPos™iÚs
);

179 
fCachedB»akPos™iÚs
 = 
NULL
;

181 ià(
fLªguageB»akEngšes
) {

182 
d–‘e
 
fLªguageB»akEngšes
;

183 
fLªguageB»akEngšes
 = 
NULL
;

185 ià(
fUnhªdËdB»akEngše
) {

186 
d–‘e
 
fUnhªdËdB»akEngše
;

187 
fUnhªdËdB»akEngše
 = 
NULL
;

189 
	}
}

195 
	gRuËBa£dB»akI‹¿tÜ
&

196 
	gRuËBa£dB»akI‹¿tÜ
::
İ”©Ü
=(cÚ¡ 
RuËBa£dB»akI‹¿tÜ
& 
th©
) {

197 ià(
this
 =ğ&
th©
) {

198  *
this
;

200 
»£t
();

201 
	gfB»akTy³
 = 
th©
.
fB»akTy³
;

202 ià(
	gfLªguageB»akEngšes
 !ğ
NULL
) {

203 
d–‘e
 
fLªguageB»akEngšes
;

204 
	gfLªguageB»akEngšes
 = 
NULL
;

207 
UE¼ÜCode
 
	g¡©us
 = 
U_ZERO_ERROR
;

208 
	gfText
 = 
u‹xt_şÚe
(
fText
, 
th©
.fText, 
FALSE
, 
TRUE
, &
¡©us
);

210 ià(
	gfCh¬I‹r
!=
fSCh¬I‹r
 && 
fCh¬I‹r
!=
fDCh¬I‹r
) {

211 
d–‘e
 
fCh¬I‹r
;

213 
	gfCh¬I‹r
 = 
NULL
;

215 ià(
	gth©
.
	gfCh¬I‹r
 !ğ
NULL
 ) {

219 
fCh¬I‹r
 = 
th©
.fCh¬I‹r->
şÚe
();

222 ià(
	gfD©a
 !ğ
NULL
) {

223 
fD©a
->
»moveReã»nû
();

224 
	gfD©a
 = 
NULL
;

226 ià(
	gth©
.
	gfD©a
 !ğ
NULL
) {

227 
fD©a
 = 
th©
.fD©a->
addReã»nû
();

230  *
	gthis
;

241 
	gRuËBa£dB»akI‹¿tÜ
::
	$š™
() {

242 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

243 
fBufãrClÚe
 = 
FALSE
;

244 
fText
 = 
	`u‹xt_İ’UCh¬s
(
NULL
, NULL, 0, &
¡©us
);

245 
fCh¬I‹r
 = 
NULL
;

246 
fSCh¬I‹r
 = 
NULL
;

247 
fDCh¬I‹r
 = 
NULL
;

248 
fD©a
 = 
NULL
;

249 
fLa¡RuËStusIndex
 = 0;

250 
fLa¡StusIndexV®id
 = 
TRUE
;

251 
fDiùiÚ¬yCh¬CouÁ
 = 0;

252 
fB»akTy³
 = 
UBRK_WORD
;

257 
fCachedB»akPos™iÚs
 = 
NULL
;

258 
fLªguageB»akEngšes
 = 
NULL
;

259 
fUnhªdËdB»akEngše
 = 
NULL
;

260 
fNumCachedB»akPos™iÚs
 = 0;

261 
fPos™iÚInCache
 = 0;

263 #ifdeà
RBBI_DEBUG


264 
UBoŞ
 
debugIn™DÚe
 = 
FALSE
;

265 ià(
debugIn™DÚe
 =ğ
FALSE
) {

266 *
debugEnv
 = 
	`g‘’v
("U_RBBIDEBUG");

267 ià(
debugEnv
 && 
	`u´v_¡r¡r
(debugEnv, "trace")) {

268 
fT¿û
 = 
TRUE
;

270 
debugIn™DÚe
 = 
TRUE
;

273 
	}
}

284 
B»akI‹¿tÜ
*

285 
	gRuËBa£dB»akI‹¿tÜ
::
	$şÚe
() const {

286  
Ãw
 
	`RuËBa£dB»akI‹¿tÜ
(*
this
);

287 
	}
}

293 
UBoŞ


294 
	gRuËBa£dB»akI‹¿tÜ
::
İ”©Ü
==(cÚ¡ 
B»akI‹¿tÜ
& 
th©
) const {

295 ià(
ty³id
(*
this
è!ğty³id(
th©
)) {

296  
FALSE
;

299 cÚ¡ 
	gRuËBa£dB»akI‹¿tÜ
& 
	gth©2
 = (cÚ¡ 
RuËBa£dB»akI‹¿tÜ
&è
th©
;

301 ià(!
u‹xt_equ®s
(
fText
, 
th©2
.fText)) {

304  
	gFALSE
;

309 ià(
	gth©2
.
	gfD©a
 =ğ
fD©a
 ||

310 (
fD©a
 !ğ
NULL
 && 
th©2
.fData != NULL && *that2.fData == *fData)) {

312  
TRUE
;

314  
	gFALSE
;

321 
št32_t


322 
	gRuËBa£dB»akI‹¿tÜ
::
	$hashCode
() const {

323 
št32_t
 
hash
 = 0;

324 ià(
fD©a
 !ğ
NULL
) {

325 
hash
 = 
fD©a
->
	`hashCode
();

327  
hash
;

328 
	}
}

331 
	gRuËBa£dB»akI‹¿tÜ
::
	$£tText
(
UText
 *
ut
, 
UE¼ÜCode
 &
¡©us
) {

332 ià(
	`U_FAILURE
(
¡©us
)) {

335 
	`»£t
();

336 
fText
 = 
	`u‹xt_şÚe
(fText, 
ut
, 
FALSE
, 
TRUE
, &
¡©us
);

344 ià(
fDCh¬I‹r
 =ğ
NULL
) {

345 cÚ¡ 
UCh¬
 
c
 = 0;

346 
fDCh¬I‹r
 = 
Ãw
 
	`UCh¬Ch¬aù”I‹¿tÜ
(&
c
, 0);

347 ià(
fDCh¬I‹r
 =ğ
NULL
) {

348 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

353 ià(
fCh¬I‹r
!=
fSCh¬I‹r
 && fCh¬I‹r!=
fDCh¬I‹r
) {

355 
d–‘e
 
fCh¬I‹r
;

357 
fCh¬I‹r
 = 
fDCh¬I‹r
;

359 
this
->
	`fœ¡
();

360 
	}
}

363 
UText
 *
	gRuËBa£dB»akI‹¿tÜ
::
	$g‘UText
(
UText
 *
flIn
, 
UE¼ÜCode
 &
¡©us
) const {

364 
UText
 *
»suÉ
 = 
	`u‹xt_şÚe
(
flIn
, 
fText
, 
FALSE
, 
TRUE
, &
¡©us
);

365  
»suÉ
;

366 
	}
}

373 cÚ¡ 
	gUnicodeSŒšg
&

374 
	gRuËBa£dB»akI‹¿tÜ
::
	$g‘RuËs
() const {

375 ià(
fD©a
 !ğ
NULL
) {

376  
fD©a
->
	`g‘RuËSourûSŒšg
();

378 cÚ¡ 
UnicodeSŒšg
 *
s
;

379 ià(
s
 =ğ
NULL
) {

384 
s
 = 
Ãw
 
UnicodeSŒšg
;

386  *
s
;

388 
	}
}

397 
	gCh¬aù”I‹¿tÜ
&

398 
	gRuËBa£dB»akI‹¿tÜ
::
	$g‘Text
() const {

399  *
fCh¬I‹r
;

400 
	}
}

408 
	gRuËBa£dB»akI‹¿tÜ
::
	$adİtText
(
Ch¬aù”I‹¿tÜ
* 
ÃwText
) {

411 ià(
fCh¬I‹r
!=
fSCh¬I‹r
 && fCh¬I‹r!=
fDCh¬I‹r
) {

412 
d–‘e
 
fCh¬I‹r
;

415 
fCh¬I‹r
 = 
ÃwText
;

416 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

417 
	`»£t
();

418 ià(
ÃwText
==
NULL
 ||‚ewText->
	`¡¬tIndex
() != 0) {

421 
fText
 = 
	`u‹xt_İ’UCh¬s
(fText, 
NULL
, 0, &
¡©us
);

423 
fText
 = 
	`u‹xt_İ’Ch¬aù”I‹¿tÜ
(fText, 
ÃwText
, &
¡©us
);

425 
this
->
	`fœ¡
();

426 
	}
}

434 
	gRuËBa£dB»akI‹¿tÜ
::
	$£tText
(cÚ¡ 
UnicodeSŒšg
& 
ÃwText
) {

435 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

436 
	`»£t
();

437 
fText
 = 
	`u‹xt_İ’CÚ¡UnicodeSŒšg
(fText, &
ÃwText
, &
¡©us
);

443 ià(
fSCh¬I‹r
 =ğ
NULL
) {

444 
fSCh¬I‹r
 = 
Ãw
 
	`SŒšgCh¬aù”I‹¿tÜ
(
ÃwText
);

446 
fSCh¬I‹r
->
	`£tText
(
ÃwText
);

449 ià(
fCh¬I‹r
!=
fSCh¬I‹r
 && fCh¬I‹r!=
fDCh¬I‹r
) {

451 
d–‘e
 
fCh¬I‹r
;

453 
fCh¬I‹r
 = 
fSCh¬I‹r
;

455 
this
->
	`fœ¡
();

456 
	}
}

464 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$fœ¡
() {

465 
	`»£t
();

466 
fLa¡RuËStusIndex
 = 0;

467 
fLa¡StusIndexV®id
 = 
TRUE
;

471 
	`u‹xt_£tN©iveIndex
(
fText
, 0);

473 
	}
}

479 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$Ï¡
() {

480 
	`»£t
();

481 ià(
fText
 =ğ
NULL
) {

482 
fLa¡RuËStusIndex
 = 0;

483 
fLa¡StusIndexV®id
 = 
TRUE
;

484  
B»akI‹¿tÜ
::
DONE
;

487 
fLa¡StusIndexV®id
 = 
FALSE
;

488 
št32_t
 
pos
 = (št32_t)
	`u‹xt_ÇtiveL’gth
(
fText
);

489 
	`u‹xt_£tN©iveIndex
(
fText
, 
pos
);

490  
pos
;

491 
	}
}

502 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$Ãxt
(
št32_t
 
n
) {

503 
št32_t
 
»suÉ
 = 
	`cu¼’t
();

504 
n
 > 0) {

505 
»suÉ
 = 
	`Ãxt
();

506 --
n
;

508 
n
 < 0) {

509 
»suÉ
 = 
	`´evious
();

510 ++
n
;

512  
»suÉ
;

513 
	}
}

519 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$Ãxt
() {

522 ià(
fCachedB»akPos™iÚs
 !ğ
NULL
) {

523 ià(
fPos™iÚInCache
 < 
fNumCachedB»akPos™iÚs
 - 1) {

524 ++
fPos™iÚInCache
;

525 
št32_t
 
pos
 = 
fCachedB»akPos™iÚs
[
fPos™iÚInCache
];

526 
	`u‹xt_£tN©iveIndex
(
fText
, 
pos
);

527  
pos
;

530 
	`»£t
();

534 
št32_t
 
¡¬tPos
 = 
	`cu¼’t
();

535 
št32_t
 
»suÉ
 = 
	`hªdËNext
(
fD©a
->
fFÜw¬dTabË
);

536 ià(
fDiùiÚ¬yCh¬CouÁ
 > 0) {

537 
»suÉ
 = 
	`checkDiùiÚ¬y
(
¡¬tPos
,„esuÉ, 
FALSE
);

539  
»suÉ
;

540 
	}
}

546 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$´evious
() {

547 
št32_t
 
»suÉ
;

548 
št32_t
 
¡¬tPos
;

552 ià(
fCachedB»akPos™iÚs
 !ğ
NULL
) {

553 ià(
fPos™iÚInCache
 > 0) {

554 --
fPos™iÚInCache
;

557 ià(
fPos™iÚInCache
 <= 0) {

558 
fLa¡StusIndexV®id
 = 
FALSE
;

560 
št32_t
 
pos
 = 
fCachedB»akPos™iÚs
[
fPos™iÚInCache
];

561 
	`u‹xt_£tN©iveIndex
(
fText
, 
pos
);

562  
pos
;

565 
	`»£t
();

570 ià(
fText
 =ğ
NULL
 || (
¡¬tPos
 = 
	`cu¼’t
()) == 0) {

571 
fLa¡RuËStusIndex
 = 0;

572 
fLa¡StusIndexV®id
 = 
TRUE
;

573  
B»akI‹¿tÜ
::
DONE
;

576 ià(
fD©a
->
fSaãRevTabË
 !ğ
NULL
 || fD©a->
fSaãFwdTabË
 != NULL) {

577 
»suÉ
 = 
	`hªdËP»vious
(
fD©a
->
fRev”£TabË
);

578 ià(
fDiùiÚ¬yCh¬CouÁ
 > 0) {

579 
»suÉ
 = 
	`checkDiùiÚ¬y
ÔesuÉ, 
¡¬tPos
, 
TRUE
);

581  
»suÉ
;

592 
št32_t
 
¡¬t
 = 
	`cu¼’t
();

594 
	`UTEXT_PREVIOUS32
(
fText
);

595 
št32_t
 
Ï¡ResuÉ
 = 
	`hªdËP»vious
(
fD©a
->
fRev”£TabË
);

596 ià(
Ï¡ResuÉ
 =ğ
UBRK_DONE
) {

597 
Ï¡ResuÉ
 = 0;

598 
	`u‹xt_£tN©iveIndex
(
fText
, 0);

600 
»suÉ
 = 
Ï¡ResuÉ
;

601 
št32_t
 
Ï¡Tag
 = 0;

602 
UBoŞ
 
b»akTagV®id
 = 
FALSE
;

609 
»suÉ
 = 
	`Ãxt
();

610 ià(
»suÉ
 =ğ
B»akI‹¿tÜ
::
DONE
 ||„esuÉ >ğ
¡¬t
) {

613 
Ï¡ResuÉ
 = 
»suÉ
;

614 
Ï¡Tag
 = 
fLa¡RuËStusIndex
;

615 
b»akTagV®id
 = 
TRUE
;

627 
	`u‹xt_£tN©iveIndex
(
fText
, 
Ï¡ResuÉ
);

628 
fLa¡RuËStusIndex
 = 
Ï¡Tag
;

629 
fLa¡StusIndexV®id
 = 
b»akTagV®id
;

634  
Ï¡ResuÉ
;

635 
	}
}

643 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$fŞlowšg
(
št32_t
 
off£t
) {

648 ià(
fCachedB»akPos™iÚs
 !ğ
NULL
) {

649 ià(
off£t
 >ğ
fCachedB»akPos™iÚs
[0]

650 && 
off£t
 < 
fCachedB»akPos™iÚs
[
fNumCachedB»akPos™iÚs
 - 1]) {

651 
fPos™iÚInCache
 = 0;

653 
off£t
 >ğ
fCachedB»akPos™iÚs
[
fPos™iÚInCache
]) {

654 ++
fPos™iÚInCache
;

656 
št32_t
 
pos
 = 
fCachedB»akPos™iÚs
[
fPos™iÚInCache
];

657 
	`u‹xt_£tN©iveIndex
(
fText
, 
pos
);

658  
pos
;

661 
	`»£t
();

668 
fLa¡RuËStusIndex
 = 0;

669 
fLa¡StusIndexV®id
 = 
TRUE
;

670 ià(
fText
 =ğ
NULL
 || 
off£t
 >ğ
	`u‹xt_ÇtiveL’gth
(fText)) {

671 
	`Ï¡
();

672  
	`Ãxt
();

674 ià(
off£t
 < 0) {

675  
	`fœ¡
();

682 
št32_t
 
»suÉ
 = 0;

684 ià(
fD©a
->
fSaãRevTabË
 !ğ
NULL
) {

686 
	`u‹xt_£tN©iveIndex
(
fText
, 
off£t
);

690 
	`UTEXT_NEXT32
(
fText
);

692 
	`hªdËP»vious
(
fD©a
->
fSaãRevTabË
);

693 
št32_t
 
»suÉ
 = 
	`Ãxt
();

694 
»suÉ
 <ğ
off£t
) {

695 
»suÉ
 = 
	`Ãxt
();

697  
»suÉ
;

699 ià(
fD©a
->
fSaãFwdTabË
 !ğ
NULL
) {

701 
	`u‹xt_£tN©iveIndex
(
fText
, 
off£t
);

702 
	`UTEXT_PREVIOUS32
(
fText
);

704 
	`hªdËNext
(
fD©a
->
fSaãFwdTabË
);

708 
št32_t
 
Şd»suÉ
 = 
	`´evious
();

709 
Şd»suÉ
 > 
off£t
) {

710 
št32_t
 
»suÉ
 = 
	`´evious
();

711 ià(
»suÉ
 <ğ
off£t
) {

712  
Şd»suÉ
;

714 
Şd»suÉ
 = 
»suÉ
;

716 
št32_t
 
»suÉ
 = 
	`Ãxt
();

717 ià(
»suÉ
 <ğ
off£t
) {

718  
	`Ãxt
();

720  
»suÉ
;

731 
	`u‹xt_£tN©iveIndex
(
fText
, 
off£t
);

732 ià(
off£t
==0 ||

733 (
off£t
==1 && 
	`u‹xt_g‘N©iveIndex
(
fText
)==0)) {

734  
	`Ãxt
();

736 
»suÉ
 = 
	`´evious
();

738 
»suÉ
 !ğ
B»akI‹¿tÜ
::
DONE
 &&„esuÉ <ğ
off£t
) {

739 
»suÉ
 = 
	`Ãxt
();

742  
»suÉ
;

743 
	}
}

751 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$´eûdšg
(
št32_t
 
off£t
) {

754 ià(
fCachedB»akPos™iÚs
 !ğ
NULL
) {

757 ià(
off£t
 > 
fCachedB»akPos™iÚs
[0]

758 && 
off£t
 <ğ
fCachedB»akPos™iÚs
[
fNumCachedB»akPos™iÚs
 - 1]) {

759 
fPos™iÚInCache
 = 0;

760 
fPos™iÚInCache
 < 
fNumCachedB»akPos™iÚs


761 && 
off£t
 > 
fCachedB»akPos™iÚs
[
fPos™iÚInCache
])

762 ++
fPos™iÚInCache
;

763 --
fPos™iÚInCache
;

766 ià(
fPos™iÚInCache
 <= 0) {

767 
fLa¡StusIndexV®id
 = 
FALSE
;

769 
	`u‹xt_£tN©iveIndex
(
fText
, 
fCachedB»akPos™iÚs
[
fPos™iÚInCache
]);

770  
fCachedB»akPos™iÚs
[
fPos™iÚInCache
];

773 
	`»£t
();

780 ià(
fText
 =ğ
NULL
 || 
off£t
 > 
	`u‹xt_ÇtiveL’gth
(fText)) {

782  
	`Ï¡
();

784 ià(
off£t
 < 0) {

785  
	`fœ¡
();

792 ià(
fD©a
->
fSaãFwdTabË
 !ğ
NULL
) {

794 
	`u‹xt_£tN©iveIndex
(
fText
, 
off£t
);

795 
št32_t
 
ÃwOff£t
 = (št32_t)
	`UTEXT_GETNATIVEINDEX
(
fText
);

796 ià(
ÃwOff£t
 !ğ
off£t
) {

802 
	`UTEXT_NEXT32
(
fText
);

803 
off£t
 = (
št32_t
)
	`UTEXT_GETNATIVEINDEX
(
fText
);

811 
	`UTEXT_PREVIOUS32
(
fText
);

812 
	`hªdËNext
(
fD©a
->
fSaãFwdTabË
);

813 
št32_t
 
»suÉ
 = (št32_t)
	`UTEXT_GETNATIVEINDEX
(
fText
);

814 
»suÉ
 >ğ
off£t
) {

815 
»suÉ
 = 
	`´evious
();

817  
»suÉ
;

819 ià(
fD©a
->
fSaãRevTabË
 !ğ
NULL
) {

825 
	`u‹xt_£tN©iveIndex
(
fText
, 
off£t
);

826 
	`UTEXT_NEXT32
(
fText
);

829 
	`hªdËP»vious
(
fD©a
->
fSaãRevTabË
);

834 
št32_t
 
Şd»suÉ
 = 
	`Ãxt
();

835 
Şd»suÉ
 < 
off£t
) {

836 
št32_t
 
»suÉ
 = 
	`Ãxt
();

837 ià(
»suÉ
 >ğ
off£t
) {

838  
Şd»suÉ
;

840 
Şd»suÉ
 = 
»suÉ
;

842 
št32_t
 
»suÉ
 = 
	`´evious
();

843 ià(
»suÉ
 >ğ
off£t
) {

844  
	`´evious
();

846  
»suÉ
;

850 
	`u‹xt_£tN©iveIndex
(
fText
, 
off£t
);

851  
	`´evious
();

852 
	}
}

861 
UBoŞ
 
	gRuËBa£dB»akI‹¿tÜ
::
	$isBound¬y
(
št32_t
 
off£t
) {

863 ià(
off£t
 == 0) {

864 
	`fœ¡
();

865  
TRUE
;

868 ià(
off£t
 =ğ(
št32_t
)
	`u‹xt_ÇtiveL’gth
(
fText
)) {

869 
	`Ï¡
();

870  
TRUE
;

874 ià(
off£t
 < 0) {

875 
	`fœ¡
();

876  
FALSE
;

879 ià(
off£t
 > 
	`u‹xt_ÇtiveL’gth
(
fText
)) {

880 
	`Ï¡
();

881  
FALSE
;

887 
	`u‹xt_´evious32From
(
fText
, 
off£t
);

888 
št32_t
 
backOÃ
 = (št32_t)
	`UTEXT_GETNATIVEINDEX
(
fText
);

889 
UBoŞ
 
»suÉ
 = 
	`fŞlowšg
(
backOÃ
è=ğ
off£t
;

890  
»suÉ
;

891 
	}
}

897 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$cu¼’t
() const {

898 
št32_t
 
pos
 = (št32_t)
	`UTEXT_GETNATIVEINDEX
(
fText
);

899  
pos
;

900 
	}
}

911 
	eRBBIRunMode
 {

912 
	mRBBI_START
,

913 
	mRBBI_RUN
,

914 
	mRBBI_END


928 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$hªdËNext
(cÚ¡ 
RBBIS‹TabË
 *
¡©‘abË
) {

929 
št32_t
 
¡©e
;

930 
št16_t
 
ÿ‹gÜy
 = 0;

931 
RBBIRunMode
 
mode
;

933 
RBBIS‹TabËRow
 *
row
;

934 
UCh¬32
 
c
;

935 
št32_t
 
lookah—dStus
 = 0;

936 
št32_t
 
lookah—dTagIdx
 = 0;

937 
št32_t
 
»suÉ
 = 0;

938 
št32_t
 
š™ŸlPos™iÚ
 = 0;

939 
št32_t
 
lookah—dResuÉ
 = 0;

940 
UBoŞ
 
lookAh—dH¬dB»ak
 = (
¡©‘abË
->
fFÏgs
 & 
RBBI_LOOKAHEAD_HARD_BREAK
) != 0;

941 cÚ¡ *
bËD©a
 = 
¡©‘abË
->
fTabËD©a
;

942 
ušt32_t
 
bËRowL’
 = 
¡©‘abË
->
fRowL’
;

944 #ifdeà
RBBI_DEBUG


945 ià(
fT¿û
) {

946 
	`RBBIDebugPuts
("Handle Next…os char state category");

951 
fLa¡StusIndexV®id
 = 
TRUE
;

952 
fLa¡RuËStusIndex
 = 0;

955 
š™ŸlPos™iÚ
 = (
št32_t
)
	`UTEXT_GETNATIVEINDEX
(
fText
);

956 
»suÉ
 = 
š™ŸlPos™iÚ
;

957 
c
 = 
	`UTEXT_NEXT32
(
fText
);

958 ià(
fD©a
 =ğ
NULL
 || 
c
==
U_SENTINEL
) {

959  
B»akI‹¿tÜ
::
DONE
;

963 
¡©e
 = 
START_STATE
;

964 
row
 = (
RBBIS‹TabËRow
 *)

966 (
bËD©a
 + 
bËRowL’
 * 
¡©e
);

969 
mode
 = 
RBBI_RUN
;

970 ià(
¡©‘abË
->
fFÏgs
 & 
RBBI_BOF_REQUIRED
) {

971 
ÿ‹gÜy
 = 2;

972 
mode
 = 
RBBI_START
;

979 ià(
c
 =ğ
U_SENTINEL
) {

981 ià(
mode
 =ğ
RBBI_END
) {

985 ià(
lookah—dResuÉ
 > 
»suÉ
) {

989 
»suÉ
 = 
lookah—dResuÉ
;

990 
fLa¡RuËStusIndex
 = 
lookah—dTagIdx
;

991 
lookah—dStus
 = 0;

996 
mode
 = 
RBBI_END
;

997 
ÿ‹gÜy
 = 1;

1005 ià(
mode
 =ğ
RBBI_RUN
) {

1011 
	`UTRIE_GET16
(&
fD©a
->
fTr›
, 
c
, 
ÿ‹gÜy
);

1018 ià((
ÿ‹gÜy
 & 0x4000) != 0) {

1019 
fDiùiÚ¬yCh¬CouÁ
++;

1021 
ÿ‹gÜy
 &= ~0x4000;

1025 #ifdeà
RBBI_DEBUG


1026 ià(
fT¿û
) {

1027 
	`RBBIDebugPrštf
(" %4ld ", 
	`u‹xt_g‘N©iveIndex
(
fText
));

1028 ià(0x20<=
c
 && c<0x7f) {

1029 
	`RBBIDebugPrštf
("\"%c\" ", 
c
);

1031 
	`RBBIDebugPrštf
("%5x ", 
c
);

1033 
	`RBBIDebugPrštf
("%3d %3d\n", 
¡©e
, 
ÿ‹gÜy
);

1039 
¡©e
 = 
row
->
fNextS‹
[
ÿ‹gÜy
];

1040 
row
 = (
RBBIS‹TabËRow
 *)

1042 (
bËD©a
 + 
bËRowL’
 * 
¡©e
);

1045 ià(
row
->
fAcû±šg
 == -1) {

1047 ià(
mode
 !ğ
RBBI_START
) {

1048 
»suÉ
 = (
št32_t
)
	`UTEXT_GETNATIVEINDEX
(
fText
);

1050 
fLa¡RuËStusIndex
 = 
row
->
fTagIdx
;

1053 ià(
row
->
fLookAh—d
 != 0) {

1054 ià(
lookah—dStus
 != 0

1055 && 
row
->
fAcû±šg
 =ğ
lookah—dStus
) {

1057 
»suÉ
 = 
lookah—dResuÉ
;

1058 
fLa¡RuËStusIndex
 = 
lookah—dTagIdx
;

1059 
lookah—dStus
 = 0;

1061 ià(
lookAh—dH¬dB»ak
) {

1062 
	`UTEXT_SETNATIVEINDEX
(
fText
, 
»suÉ
);

1063  
»suÉ
;

1067 
cÚtšueOn
;

1070 
št32_t
 
r
 = (št32_t)
	`UTEXT_GETNATIVEINDEX
(
fText
);

1071 
lookah—dResuÉ
 = 
r
;

1072 
lookah—dStus
 = 
row
->
fLookAh—d
;

1073 
lookah—dTagIdx
 = 
row
->
fTagIdx
;

1074 
cÚtšueOn
;

1078 ià(
row
->
fAcû±šg
 != 0) {

1081 
lookah—dStus
 = 0;

1084 
cÚtšueOn
:

1085 ià(
¡©e
 =ğ
STOP_STATE
) {

1096 ià(
mode
 =ğ
RBBI_RUN
) {

1097 
c
 = 
	`UTEXT_NEXT32
(
fText
);

1099 ià(
mode
 =ğ
RBBI_START
) {

1100 
mode
 = 
RBBI_RUN
;

1112 ià(
»suÉ
 =ğ
š™ŸlPos™iÚ
) {

1113 
	`UTEXT_SETNATIVEINDEX
(
fText
, 
š™ŸlPos™iÚ
);

1114 
	`UTEXT_NEXT32
(
fText
);

1115 
»suÉ
 = (
št32_t
)
	`UTEXT_GETNATIVEINDEX
(
fText
);

1119 
	`UTEXT_SETNATIVEINDEX
(
fText
, 
»suÉ
);

1120 #ifdeà
RBBI_DEBUG


1121 ià(
fT¿û
) {

1122 
	`RBBIDebugPrštf
("»suÉ = %d\n\n", 
»suÉ
);

1125  
»suÉ
;

1126 
	}
}

1140 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$hªdËP»vious
(cÚ¡ 
RBBIS‹TabË
 *
¡©‘abË
) {

1141 
št32_t
 
¡©e
;

1142 
št16_t
 
ÿ‹gÜy
 = 0;

1143 
RBBIRunMode
 
mode
;

1144 
RBBIS‹TabËRow
 *
row
;

1145 
UCh¬32
 
c
;

1146 
št32_t
 
lookah—dStus
 = 0;

1147 
št32_t
 
»suÉ
 = 0;

1148 
št32_t
 
š™ŸlPos™iÚ
 = 0;

1149 
št32_t
 
lookah—dResuÉ
 = 0;

1150 
UBoŞ
 
lookAh—dH¬dB»ak
 = (
¡©‘abË
->
fFÏgs
 & 
RBBI_LOOKAHEAD_HARD_BREAK
) != 0;

1152 #ifdeà
RBBI_DEBUG


1153 ià(
fT¿û
) {

1154 
	`RBBIDebugPuts
("Handle Previous…os char state category");

1162 
fLa¡StusIndexV®id
 = 
FALSE
;

1163 
fLa¡RuËStusIndex
 = 0;

1166 ià(
fText
 =ğ
NULL
 || 
fD©a
 =ğNULL || 
	`UTEXT_GETNATIVEINDEX
(fText)==0) {

1167  
B»akI‹¿tÜ
::
DONE
;

1171 
š™ŸlPos™iÚ
 = (
št32_t
)
	`UTEXT_GETNATIVEINDEX
(
fText
);

1172 
»suÉ
 = 
š™ŸlPos™iÚ
;

1173 
c
 = 
	`UTEXT_PREVIOUS32
(
fText
);

1176 
¡©e
 = 
START_STATE
;

1177 
row
 = (
RBBIS‹TabËRow
 *)

1178 (
¡©‘abË
->
fTabËD©a
 + (¡©‘abË->
fRowL’
 * 
¡©e
));

1179 
ÿ‹gÜy
 = 3;

1180 
mode
 = 
RBBI_RUN
;

1181 ià(
¡©‘abË
->
fFÏgs
 & 
RBBI_BOF_REQUIRED
) {

1182 
ÿ‹gÜy
 = 2;

1183 
mode
 = 
RBBI_START
;

1190 ià(
c
 =ğ
U_SENTINEL
) {

1192 ià(
mode
 =ğ
RBBI_END
) {

1196 ià(
lookah—dResuÉ
 < 
»suÉ
) {

1200 
»suÉ
 = 
lookah—dResuÉ
;

1201 
lookah—dStus
 = 0;

1202 } ià(
»suÉ
 =ğ
š™ŸlPos™iÚ
) {

1205 
	`UTEXT_SETNATIVEINDEX
(
fText
, 
š™ŸlPos™iÚ
);

1206 
	`UTEXT_PREVIOUS32
(
fText
);

1211 
mode
 = 
RBBI_END
;

1212 
ÿ‹gÜy
 = 1;

1220 ià(
mode
 =ğ
RBBI_RUN
) {

1226 
	`UTRIE_GET16
(&
fD©a
->
fTr›
, 
c
, 
ÿ‹gÜy
);

1233 ià((
ÿ‹gÜy
 & 0x4000) != 0) {

1234 
fDiùiÚ¬yCh¬CouÁ
++;

1236 
ÿ‹gÜy
 &= ~0x4000;

1240 #ifdeà
RBBI_DEBUG


1241 ià(
fT¿û
) {

1242 
	`RBBIDebugPrštf
(" %4d ", (
št32_t
)
	`u‹xt_g‘N©iveIndex
(
fText
));

1243 ià(0x20<=
c
 && c<0x7f) {

1244 
	`RBBIDebugPrštf
("\"%c\" ", 
c
);

1246 
	`RBBIDebugPrštf
("%5x ", 
c
);

1248 
	`RBBIDebugPrštf
("%3d %3d\n", 
¡©e
, 
ÿ‹gÜy
);

1254 
¡©e
 = 
row
->
fNextS‹
[
ÿ‹gÜy
];

1255 
row
 = (
RBBIS‹TabËRow
 *)

1256 (
¡©‘abË
->
fTabËD©a
 + (¡©‘abË->
fRowL’
 * 
¡©e
));

1258 ià(
row
->
fAcû±šg
 == -1) {

1260 
»suÉ
 = (
št32_t
)
	`UTEXT_GETNATIVEINDEX
(
fText
);

1263 ià(
row
->
fLookAh—d
 != 0) {

1264 ià(
lookah—dStus
 != 0

1265 && 
row
->
fAcû±šg
 =ğ
lookah—dStus
) {

1267 
»suÉ
 = 
lookah—dResuÉ
;

1268 
lookah—dStus
 = 0;

1270 ià(
lookAh—dH¬dB»ak
) {

1271 
	`UTEXT_SETNATIVEINDEX
(
fText
, 
»suÉ
);

1272  
»suÉ
;

1276 
cÚtšueOn
;

1279 
št32_t
 
r
 = (št32_t)
	`UTEXT_GETNATIVEINDEX
(
fText
);

1280 
lookah—dResuÉ
 = 
r
;

1281 
lookah—dStus
 = 
row
->
fLookAh—d
;

1282 
cÚtšueOn
;

1286 ià(
row
->
fAcû±šg
 != 0) {

1289 
lookah—dStus
 = 0;

1292 
cÚtšueOn
:

1293 ià(
¡©e
 =ğ
STOP_STATE
) {

1304 ià(
mode
 =ğ
RBBI_RUN
) {

1305 
c
 = 
	`UTEXT_PREVIOUS32
(
fText
);

1307 ià(
mode
 =ğ
RBBI_START
) {

1308 
mode
 = 
RBBI_RUN
;

1318 ià(
»suÉ
 =ğ
š™ŸlPos™iÚ
) {

1319 
	`UTEXT_SETNATIVEINDEX
(
fText
, 
š™ŸlPos™iÚ
);

1320 
	`UTEXT_PREVIOUS32
(
fText
);

1321 
»suÉ
 = (
št32_t
)
	`UTEXT_GETNATIVEINDEX
(
fText
);

1325 
	`UTEXT_SETNATIVEINDEX
(
fText
, 
»suÉ
);

1326 #ifdeà
RBBI_DEBUG


1327 ià(
fT¿û
) {

1328 
	`RBBIDebugPrštf
("»suÉ = %d\n\n", 
»suÉ
);

1331  
»suÉ
;

1332 
	}
}

1336 
	gRuËBa£dB»akI‹¿tÜ
::
	$»£t
()

1338 ià(
fCachedB»akPos™iÚs
) {

1339 
	`u´v_ä“
(
fCachedB»akPos™iÚs
);

1341 
fCachedB»akPos™iÚs
 = 
NULL
;

1342 
fNumCachedB»akPos™iÚs
 = 0;

1343 
fDiùiÚ¬yCh¬CouÁ
 = 0;

1344 
fPos™iÚInCache
 = 0;

1345 
	}
}

1362 
	gRuËBa£dB»akI‹¿tÜ
::
	$makeRuËStusV®id
() {

1363 ià(
fLa¡StusIndexV®id
 =ğ
FALSE
) {

1365 ià(
fText
 =ğ
NULL
 || 
	`cu¼’t
() == 0) {

1367 
fLa¡RuËStusIndex
 = 0;

1368 
fLa¡StusIndexV®id
 = 
TRUE
;

1371 
št32_t
 
·
 = 
	`cu¼’t
();

1372 
	`´evious
();

1373 ià(
fNumCachedB»akPos™iÚs
 > 0) {

1374 
	`»£t
();

1376 
št32_t
 
pb
 = 
	`Ãxt
();

1377 ià(
·
 !ğ
pb
) {

1380 
	`U_ASSERT
(
·
 =ğ
pb
);

1384 
	`U_ASSERT
(
fLa¡RuËStusIndex
 >ğ0 && fLa¡RuËStusIndex < 
fD©a
->
fStusMaxIdx
);

1385 
	}
}

1388 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$g‘RuËStus
() const {

1389 
RuËBa£dB»akI‹¿tÜ
 *
nÚCÚ¡This
 = (RuËBa£dB»akI‹¿tÜ *)
this
;

1390 
nÚCÚ¡This
->
	`makeRuËStusV®id
();

1395 
št32_t
 
idx
 = 
fLa¡RuËStusIndex
 + 
fD©a
->
fRuËStusTabË
[fLastRuleStatusIndex];

1396 
št32_t
 
gV®
 = 
fD©a
->
fRuËStusTabË
[
idx
];

1398  
gV®
;

1399 
	}
}

1404 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$g‘RuËStusVec
(

1405 
št32_t
 *
flInVec
, iÁ32_ˆ
ÿ·c™y
, 
UE¼ÜCode
 &
¡©us
)

1407 ià(
	`U_FAILURE
(
¡©us
)) {

1411 
RuËBa£dB»akI‹¿tÜ
 *
nÚCÚ¡This
 = (RuËBa£dB»akI‹¿tÜ *)
this
;

1412 
nÚCÚ¡This
->
	`makeRuËStusV®id
();

1413 
št32_t
 
numV®s
 = 
fD©a
->
fRuËStusTabË
[
fLa¡RuËStusIndex
];

1414 
št32_t
 
numV®sToCİy
 = 
numV®s
;

1415 ià(
numV®s
 > 
ÿ·c™y
) {

1416 
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

1417 
numV®sToCİy
 = 
ÿ·c™y
;

1419 
i
;

1420 
i
=0; i<
numV®sToCİy
; i++) {

1421 
flInVec
[
i
] = 
fD©a
->
fRuËStusTabË
[
fLa¡RuËStusIndex
 + i + 1];

1423  
numV®s
;

1424 
	}
}

1435 cÚ¡ 
ušt8_t
 *
	gRuËBa£dB»akI‹¿tÜ
::
	$g‘Bš¬yRuËs
(
ušt32_t
 &
Ëngth
) {

1436 cÚ¡ 
ušt8_t
 *
»tPŒ
 = 
NULL
;

1437 
Ëngth
 = 0;

1439 ià(
fD©a
 !ğ
NULL
) {

1440 
»tPŒ
 = (cÚ¡ 
ušt8_t
 *)
fD©a
->
fH—d”
;

1441 
Ëngth
 = 
fD©a
->
fH—d”
->
fL’gth
;

1443  
»tPŒ
;

1444 
	}
}

1459 
B»akI‹¿tÜ
 * 
	gRuËBa£dB»akI‹¿tÜ
::
	$ü—‹BufãrClÚe
(*
¡ackBufãr
,

1460 
št32_t
 &
bufãrSize
,

1461 
UE¼ÜCode
 &
¡©us
)

1463 ià(
	`U_FAILURE
(
¡©us
)){

1464  
NULL
;

1471 ià(
bufãrSize
 == 0) {

1472 
bufãrSize
 = (
RuËBa£dB»akI‹¿tÜ
è+ 
	`U_ALIGNMENT_OFFSET_UP
(0);

1473  
NULL
;

1481 *
buf
 = (*)
¡ackBufãr
;

1482 
ušt32_t
 
s
 = 
bufãrSize
;

1484 ià(
¡ackBufãr
 =ğ
NULL
) {

1485 
s
 = 0;

1487 ià(
	`U_ALIGNMENT_OFFSET
(
¡ackBufãr
) != 0) {

1488 
ušt32_t
 
off£tUp
 = (ušt32_t)
	`U_ALIGNMENT_OFFSET_UP
(
buf
);

1489 
s
 -ğ
off£tUp
;

1490 
buf
 +ğ
off£tUp
;

1492 ià(
s
 < (
RuËBa£dB»akI‹¿tÜ
)) {

1496 
RuËBa£dB»akI‹¿tÜ
 *
şÚedBI
 = 
Ãw
 
	`RuËBa£dB»akI‹¿tÜ
(*
this
);

1497 ià(
şÚedBI
 == 0) {

1498 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1500 
¡©us
 = 
U_SAFECLONE_ALLOCATED_WARNING
;

1502  
şÚedBI
;

1515 
RuËBa£dB»akI‹¿tÜ
 
loÿlI‹r
;

1516 
RuËBa£dB»akI‹¿tÜ
 *
şÚe
 = (RuËBa£dB»akI‹¿tÜ *)
buf
;

1517 
	`u´v_memıy
(
şÚe
, &
loÿlI‹r
, (
RuËBa£dB»akI‹¿tÜ
));

1518 
şÚe
->
	`š™
();

1519 *
şÚe
 = *
this
;

1520 
şÚe
->
fBufãrClÚe
 = 
TRUE
;

1522  
şÚe
;

1523 
	}
}

1554 
št32_t
 
	gRuËBa£dB»akI‹¿tÜ
::
	$checkDiùiÚ¬y
(
št32_t
 
¡¬tPos
,

1555 
št32_t
 
’dPos
,

1556 
UBoŞ
 
»v”£
) {

1558 
ušt32_t
 
diùiÚ¬yCouÁ
 = 
fDiùiÚ¬yCh¬CouÁ
;

1559 
	`»£t
();

1561 ià(
diùiÚ¬yCouÁ
 <ğ1 || (
’dPos
 - 
¡¬tPos
) <= 1) {

1562  (
»v”£
 ? 
¡¬tPos
 : 
’dPos
);

1576 cÚ¡ *
u‹xt_utf8Funcs
;

1577 ià(
u‹xt_utf8Funcs
 =ğ
NULL
) {

1579 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

1580 
UText
 
‹mpUText
 = 
UTEXT_INITIALIZER
;

1581 
	`u‹xt_İ’UTF8
(&
‹mpUText
, 
NULL
, 0, &
¡©us
);

1582 
u‹xt_utf8Funcs
 = 
‹mpUText
.
pFuncs
;

1583 
	`u‹xt_şo£
(&
‹mpUText
);

1585 ià(
fText
->
pFuncs
 =ğ
u‹xt_utf8Funcs
) {

1586  (
»v”£
 ? 
¡¬tPos
 : 
’dPos
);

1592 
	`u‹xt_£tN©iveIndex
(
fText
, 
»v”£
 ? 
’dPos
 : 
¡¬tPos
);

1593 ià(
»v”£
) {

1594 
	`UTEXT_PREVIOUS32
(
fText
);

1597 
št32_t
 
¿ngeS¹
 = 
¡¬tPos
;

1598 
št32_t
 
¿ngeEnd
 = 
’dPos
;

1600 
ušt16_t
 
ÿ‹gÜy
;

1601 
št32_t
 
cu¼’t
;

1602 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

1603 
USck
 
	`b»aks
(
¡©us
);

1604 
št32_t
 
foundB»akCouÁ
 = 0;

1605 
UCh¬32
 
c
 = 
	`u‹xt_cu¼’t32
(
fText
);

1607 
	`UTRIE_GET16
(&
fD©a
->
fTr›
, 
c
, 
ÿ‹gÜy
);

1614 ià(
ÿ‹gÜy
 & 0x4000) {

1615 ià(
»v”£
) {

1617 
	`u‹xt_Ãxt32
(
fText
);

1618 
c
 = 
	`u‹xt_cu¼’t32
(
fText
);

1619 
	`UTRIE_GET16
(&
fD©a
->
fTr›
, 
c
, 
ÿ‹gÜy
);

1620 } 
c
 !ğ
U_SENTINEL
 && (
ÿ‹gÜy
 & 0x4000));

1622 
¿ngeEnd
 = (
št32_t
)
	`UTEXT_GETNATIVEINDEX
(
fText
);

1623 ià(
c
 =ğ
U_SENTINEL
) {

1626 
c
 = 
	`UTEXT_PREVIOUS32
(
fText
);

1629 
c
 = 
	`UTEXT_PREVIOUS32
(
fText
);

1634 
c
 = 
	`UTEXT_PREVIOUS32
(
fText
);

1635 
	`UTRIE_GET16
(&
fD©a
->
fTr›
, 
c
, 
ÿ‹gÜy
);

1637 
c
 !ğ
U_SENTINEL
 && (
ÿ‹gÜy
 & 0x4000));

1639 ià(
c
 =ğ
U_SENTINEL
) {

1641 
c
 = 
	`u‹xt_cu¼’t32
(
fText
);

1644 
	`u‹xt_Ãxt32
(
fText
);

1645 
c
 = 
	`u‹xt_cu¼’t32
(
fText
);

1647 
¿ngeS¹
 = (
št32_t
)
	`UTEXT_GETNATIVEINDEX
(
fText
);;

1649 
	`UTRIE_GET16
(&
fD©a
->
fTr›
, 
c
, 
ÿ‹gÜy
);

1657 ià(
»v”£
) {

1658 
	`u‹xt_£tN©iveIndex
(
fText
, 
¿ngeS¹
);

1659 
c
 = 
	`u‹xt_cu¼’t32
(
fText
);

1660 
	`UTRIE_GET16
(&
fD©a
->
fTr›
, 
c
, 
ÿ‹gÜy
);

1662 
	`U_SUCCESS
(
¡©us
)) {

1663 (
cu¼’t
 = (
št32_t
)
	`UTEXT_GETNATIVEINDEX
(
fText
)è< 
¿ngeEnd
 && (
ÿ‹gÜy
 & 0x4000) == 0) {

1664 
	`u‹xt_Ãxt32
(
fText
);

1665 
c
 = 
	`u‹xt_cu¼’t32
(
fText
);

1666 
	`UTRIE_GET16
(&
fD©a
->
fTr›
, 
c
, 
ÿ‹gÜy
);

1668 ià(
cu¼’t
 >ğ
¿ngeEnd
) {

1674 cÚ¡ 
LªguageB»akEngše
 *
lbe
 = 
	`g‘LªguageB»akEngše
(
c
);

1678 ià(
lbe
 !ğ
NULL
) {

1679 
foundB»akCouÁ
 +ğ
lbe
->
	`fšdB»aks
(
fText
, 
¿ngeS¹
, 
¿ngeEnd
, 
FALSE
, 
fB»akTy³
, 
b»aks
);

1683 
c
 = 
	`u‹xt_cu¼’t32
(
fText
);

1684 
	`UTRIE_GET16
(&
fD©a
->
fTr›
, 
c
, 
ÿ‹gÜy
);

1689 ià(
foundB»akCouÁ
 > 0) {

1690 
št32_t
 
tÙ®B»aks
 = 
foundB»akCouÁ
;

1691 ià(
¡¬tPos
 < 
b»aks
.
	`–em’tAti
(0)) {

1692 
tÙ®B»aks
 += 1;

1694 ià(
’dPos
 > 
b»aks
.
	`³eki
()) {

1695 
tÙ®B»aks
 += 1;

1697 
fCachedB»akPos™iÚs
 = (
št32_t
 *)
	`u´v_m®loc
(
tÙ®B»aks
 * (int32_t));

1698 ià(
fCachedB»akPos™iÚs
 !ğ
NULL
) {

1699 
št32_t
 
out
 = 0;

1700 
fNumCachedB»akPos™iÚs
 = 
tÙ®B»aks
;

1701 ià(
¡¬tPos
 < 
b»aks
.
	`–em’tAti
(0)) {

1702 
fCachedB»akPos™iÚs
[
out
++] = 
¡¬tPos
;

1704 
št32_t
 
i
 = 0; i < 
foundB»akCouÁ
; ++i) {

1705 
fCachedB»akPos™iÚs
[
out
++] = 
b»aks
.
	`–em’tAti
(
i
);

1707 ià(
’dPos
 > 
fCachedB»akPos™iÚs
[
out
-1]) {

1708 
fCachedB»akPos™iÚs
[
out
] = 
’dPos
;

1713 ià(
»v”£
) {

1714  
	`´eûdšg
(
’dPos
 - 1);

1717  
	`fŞlowšg
(
¡¬tPos
);

1725 
	`u‹xt_£tN©iveIndex
(
fText
, 
»v”£
 ? 
¡¬tPos
 : 
’dPos
);

1726  (
»v”£
 ? 
¡¬tPos
 : 
’dPos
);

1727 
	}
}

1729 
U_NAMESPACE_END


1733 
U_NAMESPACE_QUALIFIER
 
USck
 *
	ggLªguageB»akFaùÜ›s
 = 
NULL
;

1738 
U_CDECL_BEGIN


1739 
UBoŞ
 
U_CALLCONV
 
	$b»ak™”©Ü_ş—nup_diù
() {

1740 ià(
gLªguageB»akFaùÜ›s
) {

1741 
d–‘e
 
gLªguageB»akFaùÜ›s
;

1742 
gLªguageB»akFaùÜ›s
 = 
NULL
;

1744  
TRUE
;

1745 
	}
}

1746 
U_CDECL_END


1748 
U_CDECL_BEGIN


1749 
U_CALLCONV
 
	$_d–‘eFaùÜy
(*
obj
) {

1750 
	`d–‘e
 (
U_NAMESPACE_QUALIFIER
 
LªguageB»akFaùÜy
 *è
obj
;

1751 
	}
}

1752 
U_CDECL_END


1753 
U_NAMESPACE_BEGIN


1755 cÚ¡ 
LªguageB»akEngše
*

1756 
	$g‘LªguageB»akEngšeFromFaùÜy
(
UCh¬32
 
c
, 
št32_t
 
b»akTy³
)

1758 
UBoŞ
 
ÃedsIn™
;

1759 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

1760 
	`UMTX_CHECK
(
NULL
, (
UBoŞ
)(
gLªguageB»akFaùÜ›s
 =ğNULL), 
ÃedsIn™
);

1762 ià(
ÃedsIn™
) {

1763 
USck
 *
çùÜ›s
 = 
Ãw
 
	`USck
(
_d–‘eFaùÜy
, 
NULL
, 
¡©us
);

1764 ià(
çùÜ›s
 !ğ
NULL
 && 
	`U_SUCCESS
(
¡©us
)) {

1765 
ICULªguageB»akFaùÜy
 *
butIn
 = 
Ãw
 
	`ICULªguageB»akFaùÜy
(
¡©us
);

1766 
çùÜ›s
->
	`push
(
butIn
, 
¡©us
);

1767 #ifdeà
U_LOCAL_SERVICE_HOOK


1768 
LªguageB»akFaùÜy
 *
exŒa
 = (LªguageB»akFaùÜy *)
	`u´v_svc_hook
("ÏnguageB»akFaùÜy", &
¡©us
);

1769 ià(
exŒa
 !ğ
NULL
) {

1770 
çùÜ›s
->
	`push
(
exŒa
, 
¡©us
);

1774 
	`umtx_lock
(
NULL
);

1775 ià(
gLªguageB»akFaùÜ›s
 =ğ
NULL
) {

1776 
gLªguageB»akFaùÜ›s
 = 
çùÜ›s
;

1777 
çùÜ›s
 = 
NULL
;

1778 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_BREAKITERATOR_DICT
, 
b»ak™”©Ü_ş—nup_diù
);

1780 
	`umtx_uÆock
(
NULL
);

1781 
d–‘e
 
çùÜ›s
;

1784 ià(
gLªguageB»akFaùÜ›s
 =ğ
NULL
) {

1785  
NULL
;

1788 
št32_t
 
i
 = 
gLªguageB»akFaùÜ›s
->
	`size
();

1789 cÚ¡ 
LªguageB»akEngše
 *
lbe
 = 
NULL
;

1790 --
i
 >= 0) {

1791 
LªguageB»akFaùÜy
 *
çùÜy
 = (LªguageB»akFaùÜy *)(
gLªguageB»akFaùÜ›s
->
	`–em’tAt
(
i
));

1792 
lbe
 = 
çùÜy
->
	`g‘EngšeFÜ
(
c
, 
b»akTy³
);

1793 ià(
lbe
 !ğ
NULL
) {

1797  
lbe
;

1798 
	}
}

1807 cÚ¡ 
LªguageB»akEngše
 *

1808 
	gRuËBa£dB»akI‹¿tÜ
::
	$g‘LªguageB»akEngše
(
UCh¬32
 
c
) {

1809 cÚ¡ 
LªguageB»akEngše
 *
lbe
 = 
NULL
;

1810 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

1812 ià(
fLªguageB»akEngšes
 =ğ
NULL
) {

1813 
fLªguageB»akEngšes
 = 
Ãw
 
	`USck
(
¡©us
);

1814 ià(
fLªguageB»akEngšes
 =ğ
NULL
 || 
	`U_FAILURE
(
¡©us
)) {

1815 
d–‘e
 
fLªguageB»akEngšes
;

1816 
fLªguageB»akEngšes
 = 0;

1817  
NULL
;

1821 
št32_t
 
i
 = 
fLªguageB»akEngšes
->
	`size
();

1822 --
i
 >= 0) {

1823 
lbe
 = (cÚ¡ 
LªguageB»akEngše
 *)(
fLªguageB»akEngšes
->
	`–em’tAt
(
i
));

1824 ià(
lbe
->
	`hªdËs
(
c
, 
fB»akTy³
)) {

1825  
lbe
;

1831 
lbe
 = 
	`g‘LªguageB»akEngšeFromFaùÜy
(
c
, 
fB»akTy³
);

1834 ià(
lbe
 !ğ
NULL
) {

1835 
fLªguageB»akEngšes
->
	`push
((*)
lbe
, 
¡©us
);

1838  
lbe
;

1843 ià(
fUnhªdËdB»akEngše
 =ğ
NULL
) {

1844 
fUnhªdËdB»akEngše
 = 
Ãw
 
	`UnhªdËdEngše
(
¡©us
);

1845 ià(
	`U_SUCCESS
(
¡©us
è&& 
fUnhªdËdB»akEngše
 =ğ
NULL
) {

1846 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1850 
fLªguageB»akEngšes
->
	`š£¹EËm’tAt
(
fUnhªdËdB»akEngše
, 0, 
¡©us
);

1852 ià(
	`U_FAILURE
(
¡©us
)) {

1853 
d–‘e
 
fUnhªdËdB»akEngše
;

1854 
fUnhªdËdB»akEngše
 = 0;

1855  
NULL
;

1861 
fUnhªdËdB»akEngše
->
	`hªdËCh¬aù”
(
c
, 
fB»akTy³
);

1863  
fUnhªdËdB»akEngše
;

1864 
	}
}

1872 
	gRuËBa£dB»akI‹¿tÜ
::
	$£tB»akTy³
(
št32_t
 
ty³
) {

1873 
fB»akTy³
 = 
ty³
;

1874 
	`»£t
();

1875 
	}
}

1877 
	gU_NAMESPACE_END


	@rbbidata.cpp

8 
	~"unicode/uty³s.h
"

10 #ià!
UCONFIG_NO_BREAK_ITERATION


12 
	~"unicode/uty³s.h
"

13 
	~"rbbid©a.h
"

14 
	~"rbbœb.h
"

15 
	~"uŒ›.h
"

16 
	~"ud©amem.h
"

17 
	~"cmemÜy.h
"

18 
	~"c¡ršg.h
"

19 
	~"umu‹x.h
"

21 
	~"uas£¹.h
"

29 
U_CDECL_BEGIN


30 
št32_t
 
U_CALLCONV


31 
	$g‘FŞdšgOff£t
(
ušt32_t
 
d©a
) {

33 if(
d©a
&0x8000) {

34  (
št32_t
)(
d©a
&0x7fff);

38 
	}
}

39 
U_CDECL_END


41 
U_NAMESPACE_BEGIN


48 
	gRBBID©aW¿µ”
::
	$RBBID©aW¿µ”
(cÚ¡ 
RBBID©aH—d”
 *
d©a
, 
UE¼ÜCode
 &
¡©us
) {

49 
	`š™
(
d©a
, 
¡©us
);

50 
	}
}

52 
	gRBBID©aW¿µ”
::
	$RBBID©aW¿µ”
(cÚ¡ 
RBBID©aH—d”
 *
d©a
, 
EDÚtAdİt
, 
UE¼ÜCode
 &
¡©us
) {

53 
	`š™
(
d©a
, 
¡©us
);

54 
fDÚtF»eD©a
 = 
TRUE
;

55 
	}
}

57 
	gRBBID©aW¿µ”
::
	$RBBID©aW¿µ”
(
UD©aMemÜy
* 
udm
, 
UE¼ÜCode
 &
¡©us
) {

58 cÚ¡ 
RBBID©aH—d”
 *
d
 = (const RBBIDataHeader *)

61 ((*)(
udm
->
pH—d”
è+ udm->pH—d”->
d©aH—d”
.
h—d”Size
);

62 
	`š™
(
d
, 
¡©us
);

63 
fUD©aMem
 = 
udm
;

64 
	}
}

72 
	gRBBID©aW¿µ”
::
	$š™
(cÚ¡ 
RBBID©aH—d”
 *
d©a
, 
UE¼ÜCode
 &
¡©us
) {

73 ià(
	`U_FAILURE
(
¡©us
)) {

76 
fH—d”
 = 
d©a
;

77 ià(
fH—d”
->
fMagic
 !ğ0xb1a0 || fH—d”->
fFÜm©V”siÚ
[0] != 3)

79 
¡©us
 = 
U_INVALID_FORMAT_ERROR
;

86 
fDÚtF»eD©a
 = 
FALSE
;

87 
fUD©aMem
 = 
NULL
;

88 
fRev”£TabË
 = 
NULL
;

89 
fSaãFwdTabË
 = 
NULL
;

90 
fSaãRevTabË
 = 
NULL
;

91 ià(
d©a
->
fFTabËL’
 != 0) {

92 
fFÜw¬dTabË
 = (
RBBIS‹TabË
 *)((*)
d©a
 + 
fH—d”
->
fFTabË
);

94 ià(
d©a
->
fRTabËL’
 != 0) {

95 
fRev”£TabË
 = (
RBBIS‹TabË
 *)((*)
d©a
 + 
fH—d”
->
fRTabË
);

97 ià(
d©a
->
fSFTabËL’
 != 0) {

98 
fSaãFwdTabË
 = (
RBBIS‹TabË
 *)((*)
d©a
 + 
fH—d”
->
fSFTabË
);

100 ià(
d©a
->
fSRTabËL’
 != 0) {

101 
fSaãRevTabË
 = (
RBBIS‹TabË
 *)((*)
d©a
 + 
fH—d”
->
fSRTabË
);

105 
	`uŒ›_un£rŸlize
(&
fTr›
,

106 (
ušt8_t
 *)
d©a
 + 
fH—d”
->
fTr›
,

107 
fH—d”
->
fTr›L’
,

108 &
¡©us
);

109 ià(
	`U_FAILURE
(
¡©us
)) {

112 
fTr›
.
g‘FŞdšgOff£t
=getFoldingOffset;

115 
fRuËSourû
 = (
UCh¬
 *)((*)
d©a
 + 
fH—d”
->fRuleSource);

116 
fRuËSŒšg
.
	`£tTo
(
TRUE
, 
fRuËSourû
, -1);

117 
	`U_ASSERT
(
d©a
->
fRuËSourûL’
 > 0);

119 
fRuËStusTabË
 = (
št32_t
 *)((*)
d©a
 + 
fH—d”
->
fStusTabË
);

120 
fStusMaxIdx
 = 
d©a
->
fStusTabËL’
 / (
št32_t
);

122 
fRefCouÁ
 = 1;

124 #ifdeà
RBBI_DEBUG


125 *
debugEnv
 = 
	`g‘’v
("U_RBBIDEBUG");

126 ià(
debugEnv
 && 
	`u´v_¡r¡r
(debugEnv, "d©a")è{
this
->
	`´štD©a
();}

128 
	}
}

136 
	gRBBID©aW¿µ”
::~
	$RBBID©aW¿µ”
() {

137 
	`U_ASSERT
(
fRefCouÁ
 == 0);

138 ià(
fUD©aMem
) {

139 
	`ud©a_şo£
(
fUD©aMem
);

140 } ià(!
fDÚtF»eD©a
) {

141 
	`u´v_ä“
((*)
fH—d”
);

143 
	}
}

157 
UBoŞ
 
	gRBBID©aW¿µ”
::
İ”©Ü
 ==(cÚ¡ 
RBBID©aW¿µ”
 &
Ùh”
) const {

158 ià(
fH—d”
 =ğ
Ùh”
.fHeader) {

159  
TRUE
;

161 ià(
	gfH—d”
->
	gfL’gth
 !ğ
Ùh”
.
fH—d”
->
fL’gth
) {

162  
FALSE
;

164 ià(
u´v_memcmp
(
fH—d”
, 
Ùh”
.fH—d”, fH—d”->
fL’gth
) == 0) {

165  
TRUE
;

167  
	gFALSE
;

170 
št32_t
 
	gRBBID©aW¿µ”
::
	$hashCode
() {

171  
fH—d”
->
fFTabËL’
;

172 
	}
}

183 
	gRBBID©aW¿µ”
::
	$»moveReã»nû
() {

184 ià(
	`umtx_©omic_dec
(&
fRefCouÁ
) == 0) {

185 
d–‘e
 
this
;

187 
	}
}

190 
RBBID©aW¿µ”
 *
	gRBBID©aW¿µ”
::
	$addReã»nû
() {

191 
	`umtx_©omic_šc
(&
fRefCouÁ
);

192  
this
;

193 
	}
}

202 cÚ¡ 
	gUnicodeSŒšg
 &
	gRBBID©aW¿µ”
::
	$g‘RuËSourûSŒšg
() const {

203  
fRuËSŒšg
;

204 
	}
}

212 #ifdeà
RBBI_DEBUG


213 
	gRBBID©aW¿µ”
::
	$´štTabË
(cÚ¡ *
h—dšg
, cÚ¡ 
RBBIS‹TabË
 *
bË
) {

214 
ušt32_t
 
c
;

215 
ušt32_t
 
s
;

217 
	`RBBIDebugPrštf
(" %s\n", 
h—dšg
);

219 
	`RBBIDebugPrštf
("State | Acc LA TagIx");

220 
c
=0; c<
fH—d”
->
fC©CouÁ
; c++è{
	`RBBIDebugPrštf
("%3d ", c);}

221 
	`RBBIDebugPrštf
("\n------|---------------"); 
c
=0;c<
fH—d”
->
fC©CouÁ
; c++) {

222 
	`RBBIDebugPrštf
("----");

224 
	`RBBIDebugPrštf
("\n");

226 ià(
bË
 =ğ
NULL
) {

227 
	`RBBIDebugPrštf
(" N U L L T A B L E\n\n");

230 
s
=0; s<
bË
->
fNumS‹s
; s++) {

231 
RBBIS‹TabËRow
 *
row
 = (RBBIStateTableRow *)

232 (
bË
->
fTabËD©a
 + (bË->
fRowL’
 * 
s
));

233 
	`RBBIDebugPrštf
("%4d | %3d %3d %3d ", 
s
, 
row
->
fAcû±šg
,„ow->
fLookAh—d
,„ow->
fTagIdx
);

234 
c
=0; c<
fH—d”
->
fC©CouÁ
; c++) {

235 
	`RBBIDebugPrštf
("%3d ", 
row
->
fNextS‹
[
c
]);

237 
	`RBBIDebugPrštf
("\n");

239 
	`RBBIDebugPrštf
("\n");

240 
	}
}

244 #ifdeà
RBBI_DEBUG


245 
	gRBBID©aW¿µ”
::
	$´štD©a
() {

246 
	`RBBIDebugPrštf
("RBBI D©¨© %p\n", (*)
fH—d”
);

247 
	`RBBIDebugPrštf
(" V”siÚ = {%d %d %d %d}\n", 
fH—d”
->
fFÜm©V”siÚ
[0], fHeader->fFormatVersion[1],

248 
fH—d”
->
fFÜm©V”siÚ
[2], fHeader->fFormatVersion[3]);

249 
	`RBBIDebugPrštf
("Ù®†’gth oàd©¨ = %d\n", 
fH—d”
->
fL’gth
);

250 
	`RBBIDebugPrštf
("‚umb” oàch¬aù” c©egÜ› ğ%d\n\n", 
fH—d”
->
fC©CouÁ
);

252 
	`´štTabË
("FÜw¬d S‹ T¿ns™iÚ TabË", 
fFÜw¬dTabË
);

253 
	`´štTabË
("Rev”£ S‹ T¿ns™iÚ TabË", 
fRev”£TabË
);

254 
	`´štTabË
("Saã FÜw¬d S‹ T¿ns™iÚ TabË", 
fSaãFwdTabË
);

255 
	`´štTabË
("Saã Rev”£ S‹ T¿ns™iÚ TabË", 
fSaãRevTabË
);

257 
	`RBBIDebugPrštf
("\nOrignal Rules source:\n");

258 
št32_t
 
c
=0; 
fRuËSourû
[c] != 0; c++) {

259 
	`RBBIDebugPrštf
("%c", 
fRuËSourû
[
c
]);

261 
	`RBBIDebugPrštf
("\n\n");

262 
	}
}

266 
U_NAMESPACE_END


267 
U_NAMESPACE_USE


275 
U_CAPI
 
št32_t
 
U_EXPORT2


276 
	$ubrk_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
, cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

277 
UE¼ÜCode
 *
¡©us
) {

279 ià(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)) {

282 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<-1 || (Ëngth>0 && 
outD©a
==NULL)) {

283 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

291 cÚ¡ 
UD©aInfo
 *
pInfo
 = (cÚ¡ UD©aInfØ*)((cÚ¡ *)
šD©a
+4);

292 if(!Ğ
pInfo
->
d©aFÜm©
[0]==0x42 &&

293 
pInfo
->
d©aFÜm©
[1]==0x72 &&

294 
pInfo
->
d©aFÜm©
[2]==0x6b &&

295 
pInfo
->
d©aFÜm©
[3]==0x20 &&

296 
pInfo
->
fÜm©V”siÚ
[0]==3 )) {

297 
	`ud©a_´štE¼Ü
(
ds
, "ubrk_swap(): data format %02x.%02x.%02x.%02x (format version %02x) is‚ot„ecognized\n",

298 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

299 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3],

300 
pInfo
->
fÜm©V”siÚ
[0]);

301 *
¡©us
=
U_UNSUPPORTED_ERROR
;

311 
št32_t
 
h—d”Size
=
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
¡©us
);

322 cÚ¡ 
ušt8_t
 *
šBy‹s
 =(cÚ¡ ušt8_ˆ*)
šD©a
+
h—d”Size
;

323 
RBBID©aH—d”
 *
rbbiDH
 = (RBBID©aH—d” *)
šBy‹s
;

324 ià(
ds
->
	`»adUIÁ32
(
rbbiDH
->
fMagic
) != 0xb1a0 ||

325 
rbbiDH
->
fFÜm©V”siÚ
[0] != 3 ||

326 
ds
->
	`»adUIÁ32
(
rbbiDH
->
fL’gth
è< (
RBBID©aH—d”
))

328 
	`ud©a_´štE¼Ü
(
ds
, "ubrk_swap(): RBBI Data header is invalid.\n");

329 *
¡©us
=
U_UNSUPPORTED_ERROR
;

336 
št32_t
 
b»akD©aL’gth
 = 
ds
->
	`»adUIÁ32
(
rbbiDH
->
fL’gth
);

337 
št32_t
 
tÙ®Size
 = 
h—d”Size
 + 
b»akD©aL’gth
;

338 ià(
Ëngth
 < 0) {

339  
tÙ®Size
;

345 ià(
Ëngth
 < 
tÙ®Size
) {

346 
	`ud©a_´štE¼Ü
(
ds
, "ubrk_swap():oo few bytes (%d‡fter ICU Data header) for break data.\n",

347 
b»akD©aL’gth
);

348 *
¡©us
=
U_INDEX_OUTOFBOUNDS_ERROR
;

358 
ušt8_t
 *
outBy‹s
 = (ušt8_ˆ*)
outD©a
 + 
h—d”Size
;

359 
RBBID©aH—d”
 *
ouutDH
 = (RBBID©aH—d” *)
outBy‹s
;

361 
št32_t
 
bËS¹Off£t
;

362 
št32_t
 
bËL’gth
;

369 ià(
šBy‹s
 !ğ
outBy‹s
) {

370 
	`u´v_mem£t
(
outBy‹s
, 0, 
b»akD©aL’gth
);

377 
št32_t
 
tİSize
 = 
	`off£tof
(
RBBIS‹TabË
, 
fTabËD©a
);

380 
bËS¹Off£t
 = 
ds
->
	`»adUIÁ32
(
rbbiDH
->
fFTabË
);

381 
bËL’gth
 = 
ds
->
	`»adUIÁ32
(
rbbiDH
->
fFTabËL’
);

383 ià(
bËL’gth
 > 0) {

384 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
bËS¹Off£t
, 
tİSize
,

385 
outBy‹s
+
bËS¹Off£t
, 
¡©us
);

386 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
bËS¹Off£t
+
tİSize
, 
bËL’gth
-topSize,

387 
outBy‹s
+
bËS¹Off£t
+
tİSize
, 
¡©us
);

391 
bËS¹Off£t
 = 
ds
->
	`»adUIÁ32
(
rbbiDH
->
fRTabË
);

392 
bËL’gth
 = 
ds
->
	`»adUIÁ32
(
rbbiDH
->
fRTabËL’
);

394 ià(
bËL’gth
 > 0) {

395 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
bËS¹Off£t
, 
tİSize
,

396 
outBy‹s
+
bËS¹Off£t
, 
¡©us
);

397 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
bËS¹Off£t
+
tİSize
, 
bËL’gth
-topSize,

398 
outBy‹s
+
bËS¹Off£t
+
tİSize
, 
¡©us
);

402 
bËS¹Off£t
 = 
ds
->
	`»adUIÁ32
(
rbbiDH
->
fSFTabË
);

403 
bËL’gth
 = 
ds
->
	`»adUIÁ32
(
rbbiDH
->
fSFTabËL’
);

405 ià(
bËL’gth
 > 0) {

406 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
bËS¹Off£t
, 
tİSize
,

407 
outBy‹s
+
bËS¹Off£t
, 
¡©us
);

408 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
bËS¹Off£t
+
tİSize
, 
bËL’gth
-topSize,

409 
outBy‹s
+
bËS¹Off£t
+
tİSize
, 
¡©us
);

413 
bËS¹Off£t
 = 
ds
->
	`»adUIÁ32
(
rbbiDH
->
fSRTabË
);

414 
bËL’gth
 = 
ds
->
	`»adUIÁ32
(
rbbiDH
->
fSRTabËL’
);

416 ià(
bËL’gth
 > 0) {

417 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
bËS¹Off£t
, 
tİSize
,

418 
outBy‹s
+
bËS¹Off£t
, 
¡©us
);

419 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
bËS¹Off£t
+
tİSize
, 
bËL’gth
-topSize,

420 
outBy‹s
+
bËS¹Off£t
+
tİSize
, 
¡©us
);

424 
	`uŒ›_sw­
(
ds
, 
šBy‹s
+ds->
	`»adUIÁ32
(
rbbiDH
->
fTr›
), ds->»adUIÁ32ÔbbiDH->
fTr›L’
),

425 
outBy‹s
+
ds
->
	`»adUIÁ32
(
rbbiDH
->
fTr›
), 
¡©us
);

428 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+ds->
	`»adUIÁ32
(
rbbiDH
->
fRuËSourû
), ds->»adUIÁ32ÔbbiDH->
fRuËSourûL’
),

429 
outBy‹s
+
ds
->
	`»adUIÁ32
(
rbbiDH
->
fRuËSourû
), 
¡©us
);

432 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+ds->
	`»adUIÁ32
(
rbbiDH
->
fStusTabË
), ds->»adUIÁ32ÔbbiDH->
fStusTabËL’
),

433 
outBy‹s
+
ds
->
	`»adUIÁ32
(
rbbiDH
->
fStusTabË
), 
¡©us
);

439 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
, (
RBBID©aH—d”
), 
outBy‹s
, 
¡©us
);

440 
ds
->
	`sw­A¼ay32
(ds, 
ouutDH
->
fFÜm©V”siÚ
, 4, ouutDH->fFÜm©V”siÚ, 
¡©us
);

442  
tÙ®Size
;

443 
	}
}

	@rbbidata.h

32 #iâdeà
__RBBIDATA_H__


33 
	#__RBBIDATA_H__


	)

35 
	~"unicode/uty³s.h
"

36 
	~"unicode/ud©a.h
"

37 
	~"ud©aswp.h
"

43 
U_CAPI
 
št32_t
 
U_EXPORT2


44 
ubrk_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

45 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

46 
UE¼ÜCode
 *
pE¼ÜCode
);

48 #ifdeà
XP_CPLUSPLUS


50 
	~"unicode/uobjeù.h
"

51 
	~"unicode/uni¡r.h
"

52 
	~"uŒ›.h
"

54 
U_NAMESPACE_BEGIN


59 
	sRBBID©aH—d”
 {

60 
ušt32_t
 
	mfMagic
;

61 
ušt8_t
 
	mfFÜm©V”siÚ
[4];

67 
ušt32_t
 
	mfL’gth
;

69 
ušt32_t
 
	mfC©CouÁ
;

76 
ušt32_t
 
	mfFTabË
;

77 
ušt32_t
 
	mfFTabËL’
;

78 
ušt32_t
 
	mfRTabË
;

79 
ušt32_t
 
	mfRTabËL’
;

80 
ušt32_t
 
	mfSFTabË
;

81 
ušt32_t
 
	mfSFTabËL’
;

82 
ušt32_t
 
	mfSRTabË
;

83 
ušt32_t
 
	mfSRTabËL’
;

84 
ušt32_t
 
	mfTr›
;

85 
ušt32_t
 
	mfTr›L’
;

86 
ušt32_t
 
	mfRuËSourû
;

87 
ušt32_t
 
	mfRuËSourûL’
;

88 
ušt32_t
 
	mfStusTabË
;

89 
ušt32_t
 
	mfStusTabËL’
;

91 
ušt32_t
 
	mfRe£rved
[6];

97 
	sRBBIS‹TabËRow
 {

98 
št16_t
 
	mfAcû±šg
;

105 
št16_t
 
	mfLookAh—d
;

110 
št16_t
 
	mfTagIdx
;

114 
št16_t
 
	mfRe£rved
;

115 
ušt16_t
 
	mfNextS‹
[2];

123 
	sRBBIS‹TabË
 {

124 
ušt32_t
 
	mfNumS‹s
;

125 
ušt32_t
 
	mfRowL’
;

126 
ušt32_t
 
	mfFÏgs
;

127 
ušt32_t
 
	mfRe£rved
;

128 
	mfTabËD©a
[4];

134 
	mRBBI_LOOKAHEAD_HARD_BREAK
 = 1,

135 
	mRBBI_BOF_REQUIRED
 = 2

136 } 
	tRBBIS‹TabËFÏgs
;

142 şas 
	cRBBID©aW¿µ”
 : 
public
 
UMemÜy
 {

143 
public
:

144 
	eEDÚtAdİt
 {

145 
kDÚtAdİt


147 
RBBID©aW¿µ”
(cÚ¡ 
RBBID©aH—d”
 *
d©a
, 
UE¼ÜCode
 &
¡©us
);

148 
RBBID©aW¿µ”
(cÚ¡ 
RBBID©aH—d”
 *
d©a
, 
EDÚtAdİt
 
dÚtAdİt
, 
UE¼ÜCode
 &
¡©us
);

149 
RBBID©aW¿µ”
(
UD©aMemÜy
* 
udm
, 
UE¼ÜCode
 &
¡©us
);

150 ~
RBBID©aW¿µ”
();

152 
š™
(cÚ¡ 
RBBID©aH—d”
 *
d©a
, 
UE¼ÜCode
 &
¡©us
);

153 
RBBID©aW¿µ”
 *
addReã»nû
();

154 
»moveReã»nû
();

155 
UBoŞ
 
	gİ”©Ü
 ==(cÚ¡ 
RBBID©aW¿µ”
 &
Ùh”
) const;

156 
št32_t
 
hashCode
();

157 cÚ¡ 
	gUnicodeSŒšg
 &
	$g‘RuËSourûSŒšg
() const;

158 #ifdeà
RBBI_DEBUG


159 
	`´štD©a
();

160 
	`´štTabË
(cÚ¡ *
h—dšg
, cÚ¡ 
RBBIS‹TabË
 *
bË
);

162 
	#´štD©a
()

	)

163 
	#´štTabË
(
h—dšg
, 
bË
)

	)

169 cÚ¡ 
RBBID©aH—d”
 *
fH—d”
;

170 cÚ¡ 
RBBIS‹TabË
 *
fFÜw¬dTabË
;

171 cÚ¡ 
RBBIS‹TabË
 *
fRev”£TabË
;

172 cÚ¡ 
RBBIS‹TabË
 *
fSaãFwdTabË
;

173 cÚ¡ 
RBBIS‹TabË
 *
fSaãRevTabË
;

174 cÚ¡ 
UCh¬
 *
fRuËSourû
;

175 cÚ¡ 
št32_t
 *
fRuËStusTabË
;

178 
št32_t
 
fStusMaxIdx
;

180 
UTr›
 
fTr›
;

182 
´iv©e
:

183 
št32_t
 
fRefCouÁ
;

184 
UD©aMemÜy
 *
fUD©aMem
;

185 
UnicodeSŒšg
 
fRuËSŒšg
;

186 
UBoŞ
 
fDÚtF»eD©a
;

188 
	`RBBID©aW¿µ”
(cÚ¡ 
RBBID©aW¿µ”
 &
Ùh”
);

189 
RBBID©aW¿µ”
 &
İ”©Ü
=(cÚ¡ RBBID©aW¿µ” &
Ùh”
);

190 
	}
};

194 
	gU_NAMESPACE_END


	@rbbinode.cpp

18 
	~"unicode/uty³s.h
"

20 #ià!
UCONFIG_NO_BREAK_ITERATION


22 
	~"unicode/uni¡r.h
"

23 
	~"unicode/uni£t.h
"

24 
	~"unicode/uch¬.h
"

25 
	~"unicode/·r£pos.h
"

26 
	~"uveùÜ.h
"

28 
	~"rbbœb.h
"

29 
	~"rbbšode.h
"

31 
	~"uas£¹.h
"

34 
	gU_NAMESPACE_BEGIN


36 #ifdeà
RBBI_DEBUG


37 
	ggLa¡S”Ÿl
 = 0;

46 
	gRBBINode
::
	$RBBINode
(
NodeTy³
 
t
è: 
	$UMemÜy
() {

47 #ifdeà
RBBI_DEBUG


48 
fS”ŸlNum
 = ++
gLa¡S”Ÿl
;

50 
fTy³
 = 
t
;

51 
fP¬’t
 = 
NULL
;

52 
fLeáChd
 = 
NULL
;

53 
fRightChd
 = 
NULL
;

54 
fIÅutS‘
 = 
NULL
;

55 
fFœ¡Pos
 = 0;

56 
fLa¡Pos
 = 0;

57 
fNuÎabË
 = 
FALSE
;

58 
fLookAh—dEnd
 = 
FALSE
;

59 
fV®
 = 0;

60 
fP»ûd’û
 = 
´ecZ”o
;

62 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

63 
fFœ¡PosS‘
 = 
Ãw
 
	`UVeùÜ
(
¡©us
);

64 
fLa¡PosS‘
 = 
Ãw
 
	`UVeùÜ
(
¡©us
);

65 
fFŞlowPos
 = 
Ãw
 
	`UVeùÜ
(
¡©us
);

66 ià(
t
==
İC©
è{
fP»ûd’û
 = 
´ecOpC©
;}

67 ià(
t
==
İOr
è{
fP»ûd’û
 = 
´ecOpOr
;}

68 ià(
t
==
İS¹
è{
fP»ûd’û
 = 
´ecS¹
;}

69 ià(
t
==
İLP¬’
è{
fP»ûd’û
 = 
´ecLP¬’
;}

71 
	}
}

74 
	gRBBINode
::
	$RBBINode
(cÚ¡ 
RBBINode
 &
Ùh”
è: 
	$UMemÜy
(
Ùh”
) {

75 #ifdeà
RBBI_DEBUG


76 
fS”ŸlNum
 = ++
gLa¡S”Ÿl
;

78 
fTy³
 = 
Ùh”
.fType;

79 
fP¬’t
 = 
NULL
;

80 
fLeáChd
 = 
NULL
;

81 
fRightChd
 = 
NULL
;

82 
fIÅutS‘
 = 
Ùh”
.fInputSet;

83 
fP»ûd’û
 = 
Ùh”
.fPrecedence;

84 
fText
 = 
Ùh”
.fText;

85 
fFœ¡Pos
 = 
Ùh”
.fFirstPos;

86 
fLa¡Pos
 = 
Ùh”
.fLastPos;

87 
fNuÎabË
 = 
Ùh”
.fNullable;

88 
fV®
 = 
Ùh”
.fVal;

89 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

90 
fFœ¡PosS‘
 = 
Ãw
 
	`UVeùÜ
(
¡©us
);

91 
fLa¡PosS‘
 = 
Ãw
 
	`UVeùÜ
(
¡©us
);

92 
fFŞlowPos
 = 
Ãw
 
	`UVeùÜ
(
¡©us
);

93 
	}
}

105 
	gRBBINode
::~
	$RBBINode
() {

107 
d–‘e
 
fIÅutS‘
;

108 
fIÅutS‘
 = 
NULL
;

110 
this
->
fTy³
) {

111 
v¬Ref
:

112 
£tRef
:

118 
d–‘e
 
fLeáChd
;

119 
fLeáChd
 = 
NULL
;

120 
d–‘e
 
fRightChd
;

121 
fRightChd
 = 
NULL
;

125 
d–‘e
 
fFœ¡PosS‘
;

126 
d–‘e
 
fLa¡PosS‘
;

127 
d–‘e
 
fFŞlowPos
;

129 
	}
}

141 
RBBINode
 *
	gRBBINode
::
	$şÚeT»e
() {

142 
RBBINode
 *
n
;

144 ià(
fTy³
 =ğ
RBBINode
::
v¬Ref
) {

147 
n
 = 
fLeáChd
->
	`şÚeT»e
();

148 } ià(
fTy³
 =ğ
RBBINode
::
u£t
) {

149 
n
 = 
this
;

151 
n
 = 
Ãw
 
	`RBBINode
(*
this
);

153 ià(
n
 !ğ
NULL
) {

154 ià(
fLeáChd
 !ğ
NULL
) {

155 
n
->
fLeáChd
 = fLeáChd->
	`şÚeT»e
();

156 
n
->
fLeáChd
->
fP¬’t
 =‚;

158 ià(
fRightChd
 !ğ
NULL
) {

159 
n
->
fRightChd
 = fRightChd->
	`şÚeT»e
();

160 
n
->
fRightChd
->
fP¬’t
 =‚;

164  
n
;

165 
	}
}

187 
RBBINode
 *
	gRBBINode
::
	$æ©‹nV¬ŸbËs
() {

188 ià(
fTy³
 =ğ
v¬Ref
) {

189 
RBBINode
 *
»tNode
 = 
fLeáChd
->
	`şÚeT»e
();

190 
d–‘e
 
this
;

191  
»tNode
;

194 ià(
fLeáChd
 !ğ
NULL
) {

195 
fLeáChd
 = fLeáChd->
	`æ©‹nV¬ŸbËs
();

196 
fLeáChd
->
fP¬’t
 = 
this
;

198 ià(
fRightChd
 !ğ
NULL
) {

199 
fRightChd
 = fRightChd->
	`æ©‹nV¬ŸbËs
();

200 
fRightChd
->
fP¬’t
 = 
this
;

202  
this
;

203 
	}
}

214 
	gRBBINode
::
	$æ©‹nS‘s
() {

215 
	`U_ASSERT
(
fTy³
 !ğ
£tRef
);

217 ià(
fLeáChd
 !ğ
NULL
) {

218 ià(
fLeáChd
->
fTy³
==
£tRef
) {

219 
RBBINode
 *
£tRefNode
 = 
fLeáChd
;

220 
RBBINode
 *
u£tNode
 = 
£tRefNode
->
fLeáChd
;

221 
RBBINode
 *
»¶T»e
 = 
u£tNode
->
fLeáChd
;

222 
fLeáChd
 = 
»¶T»e
->
	`şÚeT»e
();

223 
fLeáChd
->
fP¬’t
 = 
this
;

224 
d–‘e
 
£tRefNode
;

226 
fLeáChd
->
	`æ©‹nS‘s
();

230 ià(
fRightChd
 !ğ
NULL
) {

231 ià(
fRightChd
->
fTy³
==
£tRef
) {

232 
RBBINode
 *
£tRefNode
 = 
fRightChd
;

233 
RBBINode
 *
u£tNode
 = 
£tRefNode
->
fLeáChd
;

234 
RBBINode
 *
»¶T»e
 = 
u£tNode
->
fLeáChd
;

235 
fRightChd
 = 
»¶T»e
->
	`şÚeT»e
();

236 
fRightChd
->
fP¬’t
 = 
this
;

237 
d–‘e
 
£tRefNode
;

239 
fRightChd
->
	`æ©‹nS‘s
();

242 
	}
}

252 
	gRBBINode
::
fšdNodes
(
UVeùÜ
 *
de¡
, 
RBBINode
::
NodeTy³
 
kšd
, 
UE¼ÜCode
 &
¡©us
) {

254 ià(
U_FAILURE
(
¡©us
)) {

257 ià(
	gfTy³
 =ğ
kšd
) {

258 
de¡
->
addEËm’t
(
this
, 
¡©us
);

260 ià(
	gfLeáChd
 !ğ
NULL
) {

261 
fLeáChd
->
fšdNodes
(
de¡
, 
kšd
, 
¡©us
);

263 ià(
	gfRightChd
 !ğ
NULL
) {

264 
fRightChd
->
fšdNodes
(
de¡
, 
kšd
, 
¡©us
);

274 #ifdeà
RBBI_DEBUG


275 
	gRBBINode
::
	$´štNode
() {

276 cÚ¡ * cÚ¡ 
nodeTy³Names
[] = {

295 ià(
this
==
NULL
) {

296 
	`RBBIDebugPrštf
("%10p", (*)
this
);

298 
	`RBBIDebugPrštf
("%10p %12s %10p %10p %10p %4d %6d %d ",

299 (*)
this
, 
nodeTy³Names
[
fTy³
], (*)
fP¬’t
, (*)
fLeáChd
, (*)
fRightChd
,

300 
fS”ŸlNum
, 
fFœ¡Pos
, 
fV®
);

301 ià(
fTy³
 =ğ
v¬Ref
) {

302 
	`RBBI_DEBUG_´štUnicodeSŒšg
(
fText
);

305 
	`RBBIDebugPrštf
("\n");

306 
	}
}

310 #ifdeà
RBBI_DEBUG


311 
U_CFUNC
 
	$RBBI_DEBUG_´štUnicodeSŒšg
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
mšWidth
)

313 
i
;

314 
i
=0; i<
s
.
	`Ëngth
(); i++) {

315 
	`RBBIDebugPrštf
("%c", 
s
.
	`ch¬At
(
i
));

318 
i
=
s
.
	`Ëngth
(); i<
mšWidth
; i++) {

319 
	`RBBIDebugPrštf
(" ");

321 
	}
}

330 #ifdeà
RBBI_DEBUG


331 
	gRBBINode
::
	$´štT»e
(
UBoŞ
 
´štH—dšg
) {

332 ià(
´štH—dšg
) {

333 
	`RBBIDebugPrštf
( "-------------------------------------------------------------------\n"

337 
this
->
	`´štNode
();

338 ià(
this
 !ğ
NULL
) {

341 ià(
fTy³
 !ğ
v¬Ref
) {

342 ià(
fLeáChd
 !ğ
NULL
) {

343 
fLeáChd
->
	`´štT»e
(
FALSE
);

346 ià(
fRightChd
 !ğ
NULL
) {

347 
fRightChd
->
	`´štT»e
(
FALSE
);

351 
	}
}

356 
	gU_NAMESPACE_END


	@rbbinode.h

7 #iâdeà
RBBINODE_H


8 
	#RBBINODE_H


	)

10 
	~"unicode/uty³s.h
"

11 
	~"unicode/uobjeù.h
"

20 
U_NAMESPACE_BEGIN


22 
şass
 
	gUnicodeS‘
;

23 
şass
 
	gUVeùÜ
;

25 şas 
	cRBBINode
 : 
public
 
UMemÜy
 {

26 
public
:

27 
	eNodeTy³
 {

28 
£tRef
,

29 
	mu£t
,

30 
	mv¬Ref
,

31 
	mËafCh¬
,

32 
	mlookAh—d
,

33 
	mg
,

34 
	m’dM¬k
,

35 
	mİS¹
,

36 
	mİC©
,

37 
	mİOr
,

38 
	mİSr
,

39 
	mİPlus
,

40 
	mİQue¡iÚ
,

41 
	mİB»ak
,

42 
	mİRev”£
,

43 
	mİLP¬’


46 
	eOpP»ûd’û
 {

47 
	g´ecZ”o
,

48 
	g´ecS¹
,

49 
	g´ecLP¬’
,

50 
	g´ecOpOr
,

51 
	g´ecOpC©


54 
NodeTy³
 
	gfTy³
;

55 
RBBINode
 *
	gfP¬’t
;

56 
RBBINode
 *
	gfLeáChd
;

57 
RBBINode
 *
	gfRightChd
;

58 
UnicodeS‘
 *
	gfIÅutS‘
;

59 
OpP»ûd’û
 
	gfP»ûd’û
;

61 
UnicodeSŒšg
 
	gfText
;

64 
	gfFœ¡Pos
;

68 
	gfLa¡Pos
;

73 
UBoŞ
 
	gfNuÎabË
;

74 
št32_t
 
	gfV®
;

79 
UBoŞ
 
	gfLookAh—dEnd
;

82 
UVeùÜ
 *
	gfFœ¡PosS‘
;

83 
UVeùÜ
 *
	gfLa¡PosS‘
;

84 
UVeùÜ
 *
	gfFŞlowPos
;

87 
RBBINode
(
NodeTy³
 
t
);

88 
RBBINode
(cÚ¡ RBBINod&
Ùh”
);

89 ~
RBBINode
();

91 
RBBINode
 *
şÚeT»e
();

92 
RBBINode
 *
æ©‹nV¬ŸbËs
();

93 
æ©‹nS‘s
();

94 
fšdNodes
(
UVeùÜ
 *
de¡
, 
RBBINode
::
NodeTy³
 
kšd
, 
UE¼ÜCode
 &
¡©us
);

96 #ifdeà
RBBI_DEBUG


97 
´štNode
();

98 
´štT»e
(
UBoŞ
 
w™hH—dšg
);

101 
	g´iv©e
:

102 
RBBINode
 &
İ”©Ü
 = (cÚ¡ RBBINod&
Ùh”
);

103 
UBoŞ
 
	gİ”©Ü
 =ğ(cÚ¡ 
RBBINode
 &
Ùh”
);

105 #ifdeà
RBBI_DEBUG


106 
	gfS”ŸlNum
;

110 #ifdeà
RBBI_DEBUG


111 
U_CFUNC
 

112 
RBBI_DEBUG_´štUnicodeSŒšg
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
mšWidth
=0);

115 
	gU_NAMESPACE_END


	@rbbirb.cpp

12 
	~"unicode/uty³s.h
"

14 #ià!
UCONFIG_NO_BREAK_ITERATION


16 
	~"unicode/brk™”.h
"

17 
	~"unicode/rbbi.h
"

18 
	~"unicode/ubrk.h
"

19 
	~"unicode/uni¡r.h
"

20 
	~"unicode/uni£t.h
"

21 
	~"unicode/uch¬.h
"

22 
	~"unicode/uchr™”.h
"

23 
	~"unicode/·r£pos.h
"

24 
	~"unicode/·r£”r.h
"

25 
	~"cmemÜy.h
"

26 
	~"c¡ršg.h
"

28 
	~"rbbœb.h
"

29 
	~"rbbšode.h
"

31 
	~"rbbisÿn.h
"

32 
	~"rbbi£tb.h
"

33 
	~"rbb™blb.h
"

34 
	~"rbbid©a.h
"

37 
U_NAMESPACE_BEGIN


45 
	gRBBIRuËBud”
::
	$RBBIRuËBud”
(cÚ¡ 
UnicodeSŒšg
 &
ruËs
,

46 
UP¬£E¼Ü
 *
·r£E¼
,

47 
UE¼ÜCode
 &
¡©us
)

48 : 
	$fRuËs
(
ruËs
)

50 
fStus
 = &
¡©us
;

51 
fP¬£E¼Ü
 = 
·r£E¼
;

52 
fDebugEnv
 = 
NULL
;

53 #ifdeà
RBBI_DEBUG


54 
fDebugEnv
 = 
	`g‘’v
("U_RBBIDEBUG");

58 
fFÜw¬dT»e
 = 
NULL
;

59 
fRev”£T»e
 = 
NULL
;

60 
fSaãFwdT»e
 = 
NULL
;

61 
fSaãRevT»e
 = 
NULL
;

62 
fDeçuÉT»e
 = &
fFÜw¬dT»e
;

63 
fFÜw¬dTabËs
 = 
NULL
;

64 
fRev”£TabËs
 = 
NULL
;

65 
fSaãFwdTabËs
 = 
NULL
;

66 
fSaãRevTabËs
 = 
NULL
;

67 
fRuËStusV®s
 = 
NULL
;

68 
fChašRuËs
 = 
FALSE
;

69 
fLBCMNoChaš
 = 
FALSE
;

70 
fLookAh—dH¬dB»ak
 = 
FALSE
;

71 
fUS‘Nodes
 = 
NULL
;

72 
fRuËStusV®s
 = 
NULL
;

73 
fSÿÂ”
 = 
NULL
;

74 
fS‘Bud”
 = 
NULL
;

75 ià(
·r£E¼
) {

76 
	`u´v_mem£t
(
·r£E¼
, 0, (
UP¬£E¼Ü
));

79 ià(
	`U_FAILURE
(
¡©us
)) {

83 
fUS‘Nodes
 = 
Ãw
 
	`UVeùÜ
(
¡©us
);

84 
fRuËStusV®s
 = 
Ãw
 
	`UVeùÜ
(
¡©us
);

85 
fSÿÂ”
 = 
Ãw
 
	`RBBIRuËSÿÂ”
(
this
);

86 
fS‘Bud”
 = 
Ãw
 
	`RBBIS‘Bud”
(
this
);

87 ià(
	`U_FAILURE
(
¡©us
)) {

90 if(
fS‘Bud”
 =ğ0 || 
fSÿÂ”
 =ğ0 || 
fUS‘Nodes
 =ğ0 || 
fRuËStusV®s
 == 0) {

91 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

93 
	}
}

102 
	gRBBIRuËBud”
::~
	$RBBIRuËBud”
() {

104 
i
;

105 
i
=0; ; i++) {

106 
RBBINode
 *
n
 = (RBBINod*)
fUS‘Nodes
->
	`–em’tAt
(
i
);

107 ià(
n
==
NULL
) {

110 
d–‘e
 
n
;

113 
d–‘e
 
fUS‘Nodes
;

114 
d–‘e
 
fS‘Bud”
;

115 
d–‘e
 
fFÜw¬dTabËs
;

116 
d–‘e
 
fRev”£TabËs
;

117 
d–‘e
 
fSaãFwdTabËs
;

118 
d–‘e
 
fSaãRevTabËs
;

120 
d–‘e
 
fFÜw¬dT»e
;

121 
d–‘e
 
fRev”£T»e
;

122 
d–‘e
 
fSaãFwdT»e
;

123 
d–‘e
 
fSaãRevT»e
;

124 
d–‘e
 
fSÿÂ”
;

125 
d–‘e
 
fRuËStusV®s
;

126 
	}
}

139 
št32_t
 
	$®ign8
(
št32_t
 
i
è{ (i+7è& 0xfffffff8;
	}
}

141 
RBBID©aH—d”
 *
	gRBBIRuËBud”
::
	$æ©‹nD©a
() {

142 
št32_t
 
i
;

144 ià(
	`U_FAILURE
(*
fStus
)) {

145  
NULL
;

149 
UnicodeSŒšg
 
	`¡r³dRuËs
((cÚ¡ UnicodeSŒšg&)
RBBIRuËSÿÂ”
::
	`¡rRuËs
(
fRuËs
));

156 
št32_t
 
h—d”Size
 = 
	`®ign8
((
RBBID©aH—d”
));

157 
št32_t
 
fÜw¬dTabËSize
 = 
	`®ign8
(
fFÜw¬dTabËs
->
	`g‘TabËSize
());

158 
št32_t
 
»v”£TabËSize
 = 
	`®ign8
(
fRev”£TabËs
->
	`g‘TabËSize
());

159 
št32_t
 
§ãFwdTabËSize
 = 
	`®ign8
(
fSaãFwdTabËs
->
	`g‘TabËSize
());

160 
št32_t
 
§ãRevTabËSize
 = 
	`®ign8
(
fSaãRevTabËs
->
	`g‘TabËSize
());

161 
št32_t
 
Œ›Size
 = 
	`®ign8
(
fS‘Bud”
->
	`g‘Tr›Size
());

162 
št32_t
 
¡©usTabËSize
 = 
	`®ign8
(
fRuËStusV®s
->
	`size
() * (int32_t));

163 
št32_t
 
ruËsSize
 = 
	`®ign8
((
¡r³dRuËs
.
	`Ëngth
()+1è* (
UCh¬
));

165 
št32_t
 
tÙ®Size
 = 
h—d”Size
 + 
fÜw¬dTabËSize
 + 
»v”£TabËSize


166 + 
§ãFwdTabËSize
 + 
§ãRevTabËSize


167 + 
¡©usTabËSize
 + 
Œ›Size
 + 
ruËsSize
;

169 
RBBID©aH—d”
 *
d©a
 = (RBBID©aH—d” *)
	`u´v_m®loc
(
tÙ®Size
);

170 ià(
d©a
 =ğ
NULL
) {

171 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

172  
NULL
;

174 
	`u´v_mem£t
(
d©a
, 0, 
tÙ®Size
);

177 
d©a
->
fMagic
 = 0xb1a0;

178 
d©a
->
fFÜm©V”siÚ
[0] = 3;

179 
d©a
->
fFÜm©V”siÚ
[1] = 1;

180 
d©a
->
fFÜm©V”siÚ
[2] = 0;

181 
d©a
->
fFÜm©V”siÚ
[3] = 0;

182 
d©a
->
fL’gth
 = 
tÙ®Size
;

183 
d©a
->
fC©CouÁ
 = 
fS‘Bud”
->
	`g‘NumCh¬C©egÜ›s
();

185 
d©a
->
fFTabË
 = 
h—d”Size
;

186 
d©a
->
fFTabËL’
 = 
fÜw¬dTabËSize
;

187 
d©a
->
fRTabË
 = d©a->
fFTabË
 + 
fÜw¬dTabËSize
;

188 
d©a
->
fRTabËL’
 = 
»v”£TabËSize
;

189 
d©a
->
fSFTabË
 = d©a->
fRTabË
 + 
»v”£TabËSize
;

190 
d©a
->
fSFTabËL’
 = 
§ãFwdTabËSize
;

191 
d©a
->
fSRTabË
 = d©a->
fSFTabË
 + 
§ãFwdTabËSize
;

192 
d©a
->
fSRTabËL’
 = 
§ãRevTabËSize
;

194 
d©a
->
fTr›
 = d©a->
fSRTabË
 + 
§ãRevTabËSize
;

195 
d©a
->
fTr›L’
 = 
fS‘Bud”
->
	`g‘Tr›Size
();

196 
d©a
->
fStusTabË
 = d©a->
fTr›
 + 
Œ›Size
;

197 
d©a
->
fStusTabËL’
ğ
¡©usTabËSize
;

198 
d©a
->
fRuËSourû
 = d©a->
fStusTabË
 + 
¡©usTabËSize
;

199 
d©a
->
fRuËSourûL’
 = 
¡r³dRuËs
.
	`Ëngth
(è* (
UCh¬
);

201 
	`u´v_mem£t
(
d©a
->
fRe£rved
, 0, (data->fReserved));

203 
fFÜw¬dTabËs
->
	`expÜtTabË
((
ušt8_t
 *)
d©a
 + d©a->
fFTabË
);

204 
fRev”£TabËs
->
	`expÜtTabË
((
ušt8_t
 *)
d©a
 + d©a->
fRTabË
);

205 
fSaãFwdTabËs
->
	`expÜtTabË
((
ušt8_t
 *)
d©a
 + d©a->
fSFTabË
);

206 
fSaãRevTabËs
->
	`expÜtTabË
((
ušt8_t
 *)
d©a
 + d©a->
fSRTabË
);

207 
fS‘Bud”
->
	`£rŸlizeTr›
 ((
ušt8_t
 *)
d©a
 + d©a->
fTr›
);

209 
št32_t
 *
ruËStusTabË
 = (št32_ˆ*)((
ušt8_t
 *)
d©a
 + d©a->
fStusTabË
);

210 
i
=0; i<
fRuËStusV®s
->
	`size
(); i++) {

211 
ruËStusTabË
[
i
] = 
fRuËStusV®s
->
	`–em’tAti
(i);

214 
¡r³dRuËs
.
	`exŒaù
((
UCh¬
 *)((
ušt8_t
 *)
d©a
+d©a->
fRuËSourû
), 
ruËsSize
/2+1, *
fStus
);

216  
d©a
;

217 
	}
}

230 
B»akI‹¿tÜ
 *

231 
	gRBBIRuËBud”
::
	$ü—‹RuËBa£dB»akI‹¿tÜ
ĞcÚ¡ 
UnicodeSŒšg
 &
ruËs
,

232 
UP¬£E¼Ü
 *
·r£E¼Ü
,

233 
UE¼ÜCode
 &
¡©us
)

241 
RBBIRuËBud”
 
	`bud”
(
ruËs
, 
·r£E¼Ü
, 
¡©us
);

242 ià(
	`U_FAILURE
(
¡©us
)) {

243  
NULL
;

245 
bud”
.
fSÿÂ”
->
	`·r£
();

253 
bud”
.
fS‘Bud”
->
	`bud
();

259 
bud”
.
fFÜw¬dTabËs
 = 
Ãw
 
	`RBBITabËBud”
(&bud”, &bud”.
fFÜw¬dT»e
);

260 
bud”
.
fRev”£TabËs
 = 
Ãw
 
	`RBBITabËBud”
(&bud”, &bud”.
fRev”£T»e
);

261 
bud”
.
fSaãFwdTabËs
 = 
Ãw
 
	`RBBITabËBud”
(&bud”, &bud”.
fSaãFwdT»e
);

262 
bud”
.
fSaãRevTabËs
 = 
Ãw
 
	`RBBITabËBud”
(&bud”, &bud”.
fSaãRevT»e
);

263 ià(
	`U_SUCCESS
(
¡©us
)

264 && (
bud”
.
fFÜw¬dTabËs
 =ğ
NULL
 || bud”.
fRev”£TabËs
 == NULL ||

265 
bud”
.
fSaãFwdTabËs
 =ğ
NULL
 || bud”.
fSaãRevTabËs
 == NULL))

267 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

271 ià(
	`U_FAILURE
(
¡©us
)) {

272 
d–‘e
 
bud”
.
fFÜw¬dTabËs
; bud”.fFÜw¬dTabË ğ
NULL
;

273 
d–‘e
 
bud”
.
fRev”£TabËs
; bud”.fRev”£TabË ğ
NULL
;

274 
d–‘e
 
bud”
.
fSaãFwdTabËs
; bud”.fSaãFwdTabË ğ
NULL
;

275 
d–‘e
 
bud”
.
fSaãRevTabËs
; bud”.fSaãRevTabË ğ
NULL
;

276  
NULL
;

279 
bud”
.
fFÜw¬dTabËs
->
	`bud
();

280 
bud”
.
fRev”£TabËs
->
	`bud
();

281 
bud”
.
fSaãFwdTabËs
->
	`bud
();

282 
bud”
.
fSaãRevTabËs
->
	`bud
();

284 #ifdeà
RBBI_DEBUG


285 ià(
bud”
.
fDebugEnv
 && 
	`u´v_¡r¡r
(builder.fDebugEnv, "states")) {

286 
bud”
.
fFÜw¬dTabËs
->
	`´štRuËStusTabË
();

294 
RBBID©aH—d”
 *
d©a
 = 
bud”
.
	`æ©‹nD©a
();

295 ià(
	`U_FAILURE
(*
bud”
.
fStus
)) {

296  
NULL
;

310 
RuËBa£dB»akI‹¿tÜ
 *
This
 = 
Ãw
 
	`RuËBa£dB»akI‹¿tÜ
(
d©a
, 
¡©us
);

311 ià(
	`U_FAILURE
(
¡©us
)) {

312 
d–‘e
 
This
;

313 
This
 = 
NULL
;

315 if(
This
 =ğ
NULL
) {

316 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

318  
This
;

319 
	}
}

321 
	gU_NAMESPACE_END


	@rbbirb.h

12 #iâdeà
RBBIRB_H


13 
	#RBBIRB_H


	)

15 
	~"unicode/uty³s.h
"

16 
	~"unicode/uobjeù.h
"

17 
	~"unicode/rbbi.h
"

18 
	~"unicode/uni£t.h
"

19 
	~"unicode/·r£”r.h
"

20 
	~"uhash.h
"

21 
	~"uveùÜ.h
"

22 
	~"unicode/symbË.h
"

27 
U_NAMESPACE_BEGIN


29 
şass
 
	gRBBIRuËSÿÂ”
;

30 
	gRBBIRuËTabËEl
;

31 
şass
 
	gRBBIS‘Bud”
;

32 
şass
 
	gRBBINode
;

33 
şass
 
	gRBBITabËBud”
;

43 şas 
	cRBBISymbŞTabËEÁry
 : 
public
 
UMemÜy
 {

44 
public
:

45 
RBBISymbŞTabËEÁry
();

46 
UnicodeSŒšg
 
	mkey
;

47 
RBBINode
 *
	mv®
;

48 ~
RBBISymbŞTabËEÁry
();

50 
	m´iv©e
:

51 
RBBISymbŞTabËEÁry
(cÚ¡ RBBISymbŞTabËEÁry &
Ùh”
);

52 
	mRBBISymbŞTabËEÁry
 &
	mİ”©Ü
=(cÚ¡ 
RBBISymbŞTabËEÁry
 &
Ùh”
);

56 
şass
 
	gRBBISymbŞTabË
 : 
public
 
UMemÜy
,…ubliø
	gSymbŞTabË
 {

57 
	g´iv©e
:

58 cÚ¡ 
UnicodeSŒšg
 &
fRuËs
;

59 
UHashbË
 *
	gfHashTabË
;

60 
RBBIRuËSÿÂ”
 *
	gfRuËSÿÂ”
;

65 cÚ¡ 
UnicodeSŒšg
 
	gffffSŒšg
;

66 
UnicodeS‘
 *
	gfCachedS‘Lookup
;

68 
	gpublic
:

70 
vœtu®
 cÚ¡ 
UnicodeSŒšg
* 
lookup
(cÚ¡ UnicodeSŒšg& 
s
) const;

71 
vœtu®
 cÚ¡ 
UnicodeFunùÜ
* 
lookupM©ch”
(
UCh¬32
 
ch
) const;

72 
vœtu®
 
UnicodeSŒšg
 
·r£Reã»nû
(cÚ¡ UnicodeSŒšg& 
‹xt
,

73 
P¬£Pos™iÚ
& 
pos
, 
št32_t
 
lim™
) const;

76 
RBBISymbŞTabË
(
RBBIRuËSÿÂ”
 *, cÚ¡ 
UnicodeSŒšg
 &
fRuËs
, 
UE¼ÜCode
 &
¡©us
);

77 
	gvœtu®
 ~
RBBISymbŞTabË
();

79 
vœtu®
 
RBBINode
 *
lookupNode
(cÚ¡ 
UnicodeSŒšg
 &
key
) const;

80 
vœtu®
 
addEÁry
 (cÚ¡ 
UnicodeSŒšg
 &
key
, 
RBBINode
 *
v®
, 
UE¼ÜCode
 &
”r
);

82 #ifdeà
RBBI_DEBUG


83 
vœtu®
 
rbbiSymbËPršt
() const;

87 
št32_t
 
	gfFakeF›ld
;

88 
	#rbbiSymbËPršt
(è
fFakeF›ld
=0;

	)

91 
	g´iv©e
:

92 
RBBISymbŞTabË
(cÚ¡ RBBISymbŞTabË &
Ùh”
);

93 
	gRBBISymbŞTabË
 &
	gİ”©Ü
=(cÚ¡ 
RBBISymbŞTabË
 &
Ùh”
);

102 şas 
	cRBBIRuËBud”
 : 
public
 
UMemÜy
 {

103 
public
:

109 
B»akI‹¿tÜ
 * 
ü—‹RuËBa£dB»akI‹¿tÜ
ĞcÚ¡ 
UnicodeSŒšg
 &
ruËs
,

110 
UP¬£E¼Ü
 *
·r£E¼Ü
,

111 
UE¼ÜCode
 &
¡©us
);

113 
	mpublic
:

118 
RBBIRuËBud”
(cÚ¡ 
UnicodeSŒšg
 &
ruËs
,

119 
UP¬£E¼Ü
 *
·r£E¼
,

120 
UE¼ÜCode
 &
¡©us


123 
	mvœtu®
 ~
RBBIRuËBud”
();

124 *
	mfDebugEnv
;

125 
UE¼ÜCode
 *
	mfStus
;

126 
UP¬£E¼Ü
 *
	mfP¬£E¼Ü
;

127 cÚ¡ 
	mUnicodeSŒšg
 &
	mfRuËs
;

129 
RBBIRuËSÿÂ”
 *
	mfSÿÂ”
;

130 
RBBINode
 *
	mfFÜw¬dT»e
;

131 
RBBINode
 *
	mfRev”£T»e
;

132 
RBBINode
 *
	mfSaãFwdT»e
;

133 
RBBINode
 *
	mfSaãRevT»e
;

135 
RBBINode
 **
	mfDeçuÉT»e
;

138 
UBoŞ
 
	mfChašRuËs
;

141 
UBoŞ
 
	mfLBCMNoChaš
;

144 
UBoŞ
 
	mfLookAh—dH¬dB»ak
;

148 
RBBIS‘Bud”
 *
	mfS‘Bud”
;

149 
UVeùÜ
 *
	mfUS‘Nodes
;

151 
RBBITabËBud”
 *
	mfFÜw¬dTabËs
;

152 
RBBITabËBud”
 *
	mfRev”£TabËs
;

153 
RBBITabËBud”
 *
	mfSaãFwdTabËs
;

154 
RBBITabËBud”
 *
	mfSaãRevTabËs
;

156 
UVeùÜ
 *
	mfRuËStusV®s
;

159 
RBBID©aH—d”
 *
æ©‹nD©a
();

161 
	m´iv©e
:

162 
RBBIRuËBud”
(cÚ¡ RBBIRuËBud” &
Ùh”
);

163 
	mRBBIRuËBud”
 &
	mİ”©Ü
=(cÚ¡ 
RBBIRuËBud”
 &
Ùh”
);

184 
	sRBBIS‘TabËEl
 {

185 
UnicodeSŒšg
 *
	mkey
;

186 
RBBINode
 *
	mv®
;

198 #ifdeà
RBBI_DEBUG


199 
	~<¡dio.h
>

200 
	#RBBIDebugPrštf
 
´štf


	)

201 
	#RBBIDebugPuts
 
puts


	)

203 #undeà
RBBIDebugPrštf


204 
	#RBBIDebugPuts
(
¬g
)

	)

207 
	gU_NAMESPACE_END


	@rbbirpt.h

13 #iâdeà
RBBIRPT_H


14 
	#RBBIRPT_H


	)

16 
U_NAMESPACE_BEGIN


20 cÚ¡ 
ušt8_t
 
	gkRuËS‘_dig™_ch¬
 = 128;

21 cÚ¡ 
ušt8_t
 
	gkRuËS‘_Çme_ch¬
 = 129;

22 cÚ¡ 
ušt8_t
 
	gkRuËS‘_Çme_¡¬t_ch¬
 = 130;

23 cÚ¡ 
ušt8_t
 
	gkRuËS‘_ruË_ch¬
 = 131;

24 cÚ¡ 
ušt8_t
 
	gkRuËS‘_wh™e_¥aû
 = 132;

27 
	eRBBI_RuËP¬£AùiÚ
 {

28 
	mdoCheckV¬Def
,

29 
	mdoDÙAny
,

30 
	mdoEndAssign
,

31 
	mdoEndOfRuË
,

32 
	mdoEndV¬ŸbËName
,

33 
	mdoEx™
,

34 
	mdoEx´C©O³¿tÜ
,

35 
	mdoEx´Fšished
,

36 
	mdoEx´OrO³¿tÜ
,

37 
	mdoEx´RP¬’
,

38 
	mdoEx´S¹
,

39 
	mdoLP¬’
,

40 
	mdoNOP
,

41 
	mdoO±iÚEnd
,

42 
	mdoO±iÚS¹
,

43 
	mdoRev”£Dœ
,

44 
	mdoRuËCh¬
,

45 
	mdoRuËE¼Ü
,

46 
	mdoRuËE¼ÜAssignEx´
,

47 
	mdoSÿnUnicodeS‘
,

48 
	mdoSÏsh
,

49 
	mdoS¹Assign
,

50 
	mdoS¹TagV®ue
,

51 
	mdoS¹V¬ŸbËName
,

52 
	mdoTagDig™
,

53 
	mdoTagEx³ùedE¼Ü
,

54 
	mdoTagV®ue
,

55 
	mdoUÇryOpPlus
,

56 
	mdoUÇryOpQue¡iÚ
,

57 
	mdoUÇryOpSr
,

58 
	mdoV¬ŸbËNameEx³ùedE¼
,

59 
	mrbbiLa¡AùiÚ
};

66 
	sRBBIRuËTabËEl
 {

67 
RBBI_RuËP¬£AùiÚ
 
	mfAùiÚ
;

68 
ušt8_t
 
	mfCh¬CÏss
;

70 
ušt8_t
 
	mfNextS‹
;

72 
ušt8_t
 
	mfPushS‹
;

73 
UBoŞ
 
	mfNextCh¬
;

76 cÚ¡ 
RBBIRuËTabËEl
 
	ggRuËP¬£S‹TabË
[] = {

77 {
doNOP
, 0, 0, 0, 
TRUE
}

78 , {
doEx´S¹
, 254, 21, 8, 
FALSE
}

79 , {
doNOP
, 132, 1,0, 
TRUE
}

80 , {
doEx´S¹
, 36 , 80, 90, 
FALSE
}

81 , {
doNOP
, 33 , 11,0, 
TRUE
}

82 , {
doNOP
, 59 , 1,0, 
TRUE
}

83 , {
doNOP
, 252, 0,0, 
FALSE
}

84 , {
doEx´S¹
, 255, 21, 8, 
FALSE
}

85 , {
doEndOfRuË
, 59 , 1,0, 
TRUE
}

86 , {
doNOP
, 132, 8,0, 
TRUE
}

87 , {
doRuËE¼Ü
, 255, 95,0, 
FALSE
}

88 , {
doNOP
, 33 , 13,0, 
TRUE
}

89 , {
doRev”£Dœ
, 255, 20, 8, 
FALSE
}

90 , {
doO±iÚS¹
, 130, 15,0, 
TRUE
}

91 , {
doRuËE¼Ü
, 255, 95,0, 
FALSE
}

92 , {
doNOP
, 129, 15,0, 
TRUE
}

93 , {
doO±iÚEnd
, 255, 17,0, 
FALSE
}

94 , {
doNOP
, 59 , 1,0, 
TRUE
}

95 , {
doNOP
, 132, 17,0, 
TRUE
}

96 , {
doRuËE¼Ü
, 255, 95,0, 
FALSE
}

97 , {
doEx´S¹
, 255, 21, 8, 
FALSE
}

98 , {
doRuËCh¬
, 254, 30,0, 
TRUE
}

99 , {
doNOP
, 132, 21,0, 
TRUE
}

100 , {
doRuËCh¬
, 131, 30,0, 
TRUE
}

101 , {
doNOP
, 91 , 86, 30, 
FALSE
}

102 , {
doLP¬’
, 40 , 21, 30, 
TRUE
}

103 , {
doNOP
, 36 , 80, 29, 
FALSE
}

104 , {
doDÙAny
, 46 , 30,0, 
TRUE
}

105 , {
doRuËE¼Ü
, 255, 95,0, 
FALSE
}

106 , {
doCheckV¬Def
, 255, 30,0, 
FALSE
}

107 , {
doNOP
, 132, 30,0, 
TRUE
}

108 , {
doUÇryOpSr
, 42 , 35,0, 
TRUE
}

109 , {
doUÇryOpPlus
, 43 , 35,0, 
TRUE
}

110 , {
doUÇryOpQue¡iÚ
, 63 , 35,0, 
TRUE
}

111 , {
doNOP
, 255, 35,0, 
FALSE
}

112 , {
doEx´C©O³¿tÜ
, 254, 21,0, 
FALSE
}

113 , {
doNOP
, 132, 35,0, 
TRUE
}

114 , {
doEx´C©O³¿tÜ
, 131, 21,0, 
FALSE
}

115 , {
doEx´C©O³¿tÜ
, 91 , 21,0, 
FALSE
}

116 , {
doEx´C©O³¿tÜ
, 40 , 21,0, 
FALSE
}

117 , {
doEx´C©O³¿tÜ
, 36 , 21,0, 
FALSE
}

118 , {
doEx´C©O³¿tÜ
, 46 , 21,0, 
FALSE
}

119 , {
doEx´C©O³¿tÜ
, 47 , 47,0, 
FALSE
}

120 , {
doEx´C©O³¿tÜ
, 123 , 59,0, 
TRUE
}

121 , {
doEx´OrO³¿tÜ
, 124 , 21,0, 
TRUE
}

122 , {
doEx´RP¬’
, 41 , 255,0, 
TRUE
}

123 , {
doEx´Fšished
, 255, 255,0, 
FALSE
}

124 , {
doSÏsh
, 47 , 49,0, 
TRUE
}

125 , {
doNOP
, 255, 95,0, 
FALSE
}

126 , {
doEx´C©O³¿tÜ
, 254, 21,0, 
FALSE
}

127 , {
doNOP
, 132, 35,0, 
TRUE
}

128 , {
doEx´C©O³¿tÜ
, 131, 21,0, 
FALSE
}

129 , {
doEx´C©O³¿tÜ
, 91 , 21,0, 
FALSE
}

130 , {
doEx´C©O³¿tÜ
, 40 , 21,0, 
FALSE
}

131 , {
doEx´C©O³¿tÜ
, 36 , 21,0, 
FALSE
}

132 , {
doEx´C©O³¿tÜ
, 46 , 21,0, 
FALSE
}

133 , {
doEx´OrO³¿tÜ
, 124 , 21,0, 
TRUE
}

134 , {
doEx´RP¬’
, 41 , 255,0, 
TRUE
}

135 , {
doEx´Fšished
, 255, 255,0, 
FALSE
}

136 , {
doNOP
, 132, 59,0, 
TRUE
}

137 , {
doS¹TagV®ue
, 128, 62,0, 
FALSE
}

138 , {
doTagEx³ùedE¼Ü
, 255, 95,0, 
FALSE
}

139 , {
doNOP
, 132, 66,0, 
TRUE
}

140 , {
doNOP
, 125 , 66,0, 
FALSE
}

141 , {
doTagDig™
, 128, 62,0, 
TRUE
}

142 , {
doTagEx³ùedE¼Ü
, 255, 95,0, 
FALSE
}

143 , {
doNOP
, 132, 66,0, 
TRUE
}

144 , {
doTagV®ue
, 125 , 69,0, 
TRUE
}

145 , {
doTagEx³ùedE¼Ü
, 255, 95,0, 
FALSE
}

146 , {
doEx´C©O³¿tÜ
, 254, 21,0, 
FALSE
}

147 , {
doNOP
, 132, 69,0, 
TRUE
}

148 , {
doEx´C©O³¿tÜ
, 131, 21,0, 
FALSE
}

149 , {
doEx´C©O³¿tÜ
, 91 , 21,0, 
FALSE
}

150 , {
doEx´C©O³¿tÜ
, 40 , 21,0, 
FALSE
}

151 , {
doEx´C©O³¿tÜ
, 36 , 21,0, 
FALSE
}

152 , {
doEx´C©O³¿tÜ
, 46 , 21,0, 
FALSE
}

153 , {
doEx´C©O³¿tÜ
, 47 , 47,0, 
FALSE
}

154 , {
doEx´OrO³¿tÜ
, 124 , 21,0, 
TRUE
}

155 , {
doEx´RP¬’
, 41 , 255,0, 
TRUE
}

156 , {
doEx´Fšished
, 255, 255,0, 
FALSE
}

157 , {
doS¹V¬ŸbËName
, 36 , 82,0, 
TRUE
}

158 , {
doNOP
, 255, 95,0, 
FALSE
}

159 , {
doNOP
, 130, 84,0, 
TRUE
}

160 , {
doV¬ŸbËNameEx³ùedE¼
, 255, 95,0, 
FALSE
}

161 , {
doNOP
, 129, 84,0, 
TRUE
}

162 , {
doEndV¬ŸbËName
, 255, 255,0, 
FALSE
}

163 , {
doSÿnUnicodeS‘
, 91 , 255,0, 
TRUE
}

164 , {
doSÿnUnicodeS‘
, 112 , 255,0, 
TRUE
}

165 , {
doSÿnUnicodeS‘
, 80 , 255,0, 
TRUE
}

166 , {
doNOP
, 255, 95,0, 
FALSE
}

167 , {
doNOP
, 132, 90,0, 
TRUE
}

168 , {
doS¹Assign
, 61 , 21, 93, 
TRUE
}

169 , {
doNOP
, 255, 29, 8, 
FALSE
}

170 , {
doEndAssign
, 59 , 1,0, 
TRUE
}

171 , {
doRuËE¼ÜAssignEx´
, 255, 95,0, 
FALSE
}

172 , {
doEx™
, 255, 95,0, 
TRUE
}

174 #ifdeà
RBBI_DEBUG


175 cÚ¡ * cÚ¡ 
	gRBBIRuËS‹Names
[] = { 0,

274 
	gU_NAMESPACE_END


	@rbbiscan.cpp

16 
	~"unicode/uty³s.h
"

18 #ià!
UCONFIG_NO_BREAK_ITERATION


20 
	~"unicode/uni¡r.h
"

21 
	~"unicode/uni£t.h
"

22 
	~"unicode/uch¬.h
"

23 
	~"unicode/uchr™”.h
"

24 
	~"unicode/·r£pos.h
"

25 
	~"unicode/·r£”r.h
"

26 
	~"ut.h
"

27 
	~"cmemÜy.h
"

28 
	~"c¡ršg.h
"

30 
	~"rbbœ±.h
"

32 
	~"rbbœb.h
"

33 
	~"rbbšode.h
"

34 
	~"rbbisÿn.h
"

35 
	~"rbb™blb.h
"

37 
	~"uas£¹.h
"

50 cÚ¡ 
UCh¬
 
	ggRuËS‘_ruË_ch¬_·‰”n
[] = {

58 cÚ¡ 
UCh¬
 
	ggRuËS‘_Çme_ch¬_·‰”n
[] = {

62 cÚ¡ 
UCh¬
 
	ggRuËS‘_dig™_ch¬_·‰”n
[] = {

66 cÚ¡ 
UCh¬
 
	ggRuËS‘_Çme_¡¬t_ch¬_·‰”n
[] = {

70 cÚ¡ 
UCh¬
 
	gkAny
[] = {0x61, 0x6e, 0x79, 0x00};

73 
U_CDECL_BEGIN


74 
U_CALLCONV
 
	$RBBIS‘TabË_d–‘”
(*
p
) {

75 
U_NAMESPACE_QUALIFIER
 
RBBIS‘TabËEl
 *
px
 = (U_NAMESPACE_QUALIFIER RBBIS‘TabËEÈ*)
p
;

76 
d–‘e
 
px
->
key
;

79 
	`u´v_ä“
(
px
);

80 
	}
}

81 
U_CDECL_END


83 
U_NAMESPACE_BEGIN


90 
	gRBBIRuËSÿÂ”
::
	$RBBIRuËSÿÂ”
(
RBBIRuËBud”
 *
rb
)

92 
fRB
 = 
rb
;

93 
fSckPŒ
 = 0;

94 
fSck
[
fSckPŒ
] = 0;

95 
fNodeSckPŒ
 = 0;

96 
fRuËNum
 = 0;

97 
fNodeSck
[0] = 
NULL
;

99 
fSymbŞTabË
 = 
NULL
;

100 
fS‘TabË
 = 
NULL
;

102 
fSÿnIndex
 = 0;

103 
fNextIndex
 = 0;

105 
fRev”£RuË
 = 
FALSE
;

106 
fLookAh—dRuË
 = 
FALSE
;

108 
fLšeNum
 = 1;

109 
fCh¬Num
 = 0;

110 
fQuÙeMode
 = 
FALSE
;

114 ià(
	`U_FAILURE
(*
rb
->
fStus
)) {

124 
fRuËS‘s
[
kRuËS‘_ruË_ch¬
-128] = 
	`UnicodeS‘
(
gRuËS‘_ruË_ch¬_·‰”n
, *
rb
->
fStus
);

125 
UnicodeS‘
 *
wh™e¥aûS‘
 = 
	`u´v_İ’RuËWh™eS·ûS‘
(
rb
->
fStus
);

126 ià(
	`U_FAILURE
(*
rb
->
fStus
)) {

129 
fRuËS‘s
[
kRuËS‘_wh™e_¥aû
-128] = *
wh™e¥aûS‘
;

130 
d–‘e
 
wh™e¥aûS‘
;

131 
fRuËS‘s
[
kRuËS‘_Çme_ch¬
-128] = 
	`UnicodeS‘
(
gRuËS‘_Çme_ch¬_·‰”n
, *
rb
->
fStus
);

132 
fRuËS‘s
[
kRuËS‘_Çme_¡¬t_ch¬
-128] = 
	`UnicodeS‘
(
gRuËS‘_Çme_¡¬t_ch¬_·‰”n
, *
rb
->
fStus
);

133 
fRuËS‘s
[
kRuËS‘_dig™_ch¬
-128] = 
	`UnicodeS‘
(
gRuËS‘_dig™_ch¬_·‰”n
, *
rb
->
fStus
);

134 ià(*
rb
->
fStus
 =ğ
U_ILLEGAL_ARGUMENT_ERROR
) {

138 *
rb
->
fStus
 = 
U_BRK_INIT_ERROR
;

140 ià(
	`U_FAILURE
(*
rb
->
fStus
)) {

144 
fSymbŞTabË
 = 
Ãw
 
	`RBBISymbŞTabË
(
this
, 
rb
->
fRuËs
, *rb->
fStus
);

145 ià(
fSymbŞTabË
 =ğ
NULL
) {

146 *
rb
->
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

149 
fS‘TabË
 = 
	`uhash_İ’
(
uhash_hashUnicodeSŒšg
, 
uhash_com·»UnicodeSŒšg
, 
NULL
, 
rb
->
fStus
);

150 ià(
	`U_FAILURE
(*
rb
->
fStus
)) {

153 
	`uhash_£tV®ueD–‘”
(
fS‘TabË
, 
RBBIS‘TabË_d–‘”
);

154 
	}
}

163 
	gRBBIRuËSÿÂ”
::~
	$RBBIRuËSÿÂ”
() {

164 
d–‘e
 
fSymbŞTabË
;

165 ià(
fS‘TabË
 !ğ
NULL
) {

166 
	`uhash_şo£
(
fS‘TabË
);

167 
fS‘TabË
 = 
NULL
;

175 
fNodeSckPŒ
 > 0) {

176 
d–‘e
 
fNodeSck
[
fNodeSckPŒ
];

177 
fNodeSckPŒ
--;

180 
	}
}

196 
UBoŞ
 
	gRBBIRuËSÿÂ”
::
	$doP¬£AùiÚs
(
št32_t
 
aùiÚ
)

198 
RBBINode
 *
n
 = 
NULL
;

200 
UBoŞ
 
»tuºV®
 = 
TRUE
;

202 
aùiÚ
) {

204 
doEx´S¹
:

205 
	`pushNewNode
(
RBBINode
::
İS¹
);

206 
fRuËNum
++;

210 
doEx´OrO³¿tÜ
:

212 
	`fixOpSck
(
RBBINode
::
´ecOpC©
);

213 
RBBINode
 *
İ”ªdNode
 = 
fNodeSck
[
fNodeSckPŒ
--];

214 
RBBINode
 *
ÜNode
 = 
	`pushNewNode
(RBBINode::
İOr
);

215 
ÜNode
->
fLeáChd
 = 
İ”ªdNode
;

216 
İ”ªdNode
->
fP¬’t
 = 
ÜNode
;

220 
doEx´C©O³¿tÜ
:

226 
	`fixOpSck
(
RBBINode
::
´ecOpC©
);

227 
RBBINode
 *
İ”ªdNode
 = 
fNodeSck
[
fNodeSckPŒ
--];

228 
RBBINode
 *
ÿtNode
 = 
	`pushNewNode
(RBBINode::
İC©
);

229 
ÿtNode
->
fLeáChd
 = 
İ”ªdNode
;

230 
İ”ªdNode
->
fP¬’t
 = 
ÿtNode
;

234 
doLP¬’
:

240 
	`pushNewNode
(
RBBINode
::
İLP¬’
);

243 
doEx´RP¬’
:

244 
	`fixOpSck
(
RBBINode
::
´ecLP¬’
);

247 
doNOP
:

250 
doS¹Assign
:

258 
n
 = 
fNodeSck
[
fNodeSckPŒ
-1];

259 
n
->
fFœ¡Pos
 = 
fNextIndex
;

263 
	`pushNewNode
(
RBBINode
::
İS¹
);

269 
doEndAssign
:

275 
	`fixOpSck
(
RBBINode
::
´ecS¹
);

277 
RBBINode
 *
¡¬tEx´Node
 = 
fNodeSck
[
fNodeSckPŒ
-2];

278 
RBBINode
 *
v¬RefNode
 = 
fNodeSck
[
fNodeSckPŒ
-1];

279 
RBBINode
 *
RHSEx´Node
 = 
fNodeSck
[
fNodeSckPŒ
];

283 
RHSEx´Node
->
fFœ¡Pos
 = 
¡¬tEx´Node
->fFirstPos;

284 
RHSEx´Node
->
fLa¡Pos
 = 
fSÿnIndex
;

285 
fRB
->
fRuËs
.
	`exŒaùB‘w“n
(
RHSEx´Node
->
fFœ¡Pos
, RHSEx´Node->
fLa¡Pos
, RHSEx´Node->
fText
);

288 
v¬RefNode
->
fLeáChd
 = 
RHSEx´Node
;

289 
RHSEx´Node
->
fP¬’t
 = 
v¬RefNode
;

292 
fSymbŞTabË
->
	`addEÁry
(
v¬RefNode
->
fText
, v¬RefNode, *
fRB
->
fStus
);

293 ià(
	`U_FAILURE
(*
fRB
->
fStus
)) {

296 
UE¼ÜCode
 
t
 = *
fRB
->
fStus
;

297 *
fRB
->
fStus
 = 
U_ZERO_ERROR
;

298 
	`”rÜ
(
t
);

302 
d–‘e
 
¡¬tEx´Node
;

303 
fNodeSckPŒ
-=3;

307 
doEndOfRuË
:

309 
	`fixOpSck
(
RBBINode
::
´ecS¹
);

310 ià(
	`U_FAILURE
(*
fRB
->
fStus
)) {

313 #ifdeà
RBBI_DEBUG


314 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "¹»e")è{
	`´štNodeSck
("end of„ule");}

316 
	`U_ASSERT
(
fNodeSckPŒ
 == 1);

320 ià(
fLookAh—dRuË
) {

321 
RBBINode
 *
thisRuË
 = 
fNodeSck
[
fNodeSckPŒ
];

322 
RBBINode
 *
’dNode
 = 
	`pushNewNode
(RBBINode::
’dM¬k
);

323 
RBBINode
 *
ÿtNode
 = 
	`pushNewNode
(RBBINode::
İC©
);

324 
fNodeSckPŒ
 -= 2;

325 
ÿtNode
->
fLeáChd
 = 
thisRuË
;

326 
ÿtNode
->
fRightChd
 = 
’dNode
;

327 
fNodeSck
[
fNodeSckPŒ
] = 
ÿtNode
;

328 
’dNode
->
fV®
 = 
fRuËNum
;

329 
’dNode
->
fLookAh—dEnd
 = 
TRUE
;

340 
RBBINode
 **
de¡RuËs
 = (
fRev”£RuË
? &
fRB
->
fRev”£T»e
 : fRB->
fDeçuÉT»e
);

342 ià(*
de¡RuËs
 !ğ
NULL
) {

348 
RBBINode
 *
thisRuË
 = 
fNodeSck
[
fNodeSckPŒ
];

349 
RBBINode
 *
´evRuËs
 = *
de¡RuËs
;

350 
RBBINode
 *
ÜNode
 = 
	`pushNewNode
(RBBINode::
İOr
);

351 
ÜNode
->
fLeáChd
 = 
´evRuËs
;

352 
´evRuËs
->
fP¬’t
 = 
ÜNode
;

353 
ÜNode
->
fRightChd
 = 
thisRuË
;

354 
thisRuË
->
fP¬’t
 = 
ÜNode
;

355 *
de¡RuËs
 = 
ÜNode
;

361 *
de¡RuËs
 = 
fNodeSck
[
fNodeSckPŒ
];

363 
fRev”£RuË
 = 
FALSE
;

364 
fLookAh—dRuË
 = 
FALSE
;

365 
fNodeSckPŒ
 = 0;

370 
doRuËE¼Ü
:

371 
	`”rÜ
(
U_BRK_RULE_SYNTAX
);

372 
»tuºV®
 = 
FALSE
;

376 
doV¬ŸbËNameEx³ùedE¼
:

377 
	`”rÜ
(
U_BRK_RULE_SYNTAX
);

387 
doUÇryOpPlus
:

389 
RBBINode
 *
İ”ªdNode
 = 
fNodeSck
[
fNodeSckPŒ
--];

390 
RBBINode
 *
¶usNode
 = 
	`pushNewNode
(RBBINode::
İPlus
);

391 
¶usNode
->
fLeáChd
 = 
İ”ªdNode
;

392 
İ”ªdNode
->
fP¬’t
 = 
¶usNode
;

396 
doUÇryOpQue¡iÚ
:

398 
RBBINode
 *
İ”ªdNode
 = 
fNodeSck
[
fNodeSckPŒ
--];

399 
RBBINode
 *
qNode
 = 
	`pushNewNode
(RBBINode::
İQue¡iÚ
);

400 
qNode
->
fLeáChd
 = 
İ”ªdNode
;

401 
İ”ªdNode
->
fP¬’t
 = 
qNode
;

405 
doUÇryOpSr
:

407 
RBBINode
 *
İ”ªdNode
 = 
fNodeSck
[
fNodeSckPŒ
--];

408 
RBBINode
 *
¡¬Node
 = 
	`pushNewNode
(RBBINode::
İSr
);

409 
¡¬Node
->
fLeáChd
 = 
İ”ªdNode
;

410 
İ”ªdNode
->
fP¬’t
 = 
¡¬Node
;

414 
doRuËCh¬
:

421 
n
 = 
	`pushNewNode
(
RBBINode
::
£tRef
);

422 
	`fšdS‘FÜ
(
fC
.
fCh¬
, 
n
);

423 
n
->
fFœ¡Pos
 = 
fSÿnIndex
;

424 
n
->
fLa¡Pos
 = 
fNextIndex
;

425 
fRB
->
fRuËs
.
	`exŒaùB‘w“n
(
n
->
fFœ¡Pos
,‚->
fLa¡Pos
,‚->
fText
);

429 
doDÙAny
:

432 
n
 = 
	`pushNewNode
(
RBBINode
::
£tRef
);

433 
	`fšdS‘FÜ
(
kAny
, 
n
);

434 
n
->
fFœ¡Pos
 = 
fSÿnIndex
;

435 
n
->
fLa¡Pos
 = 
fNextIndex
;

436 
fRB
->
fRuËs
.
	`exŒaùB‘w“n
(
n
->
fFœ¡Pos
,‚->
fLa¡Pos
,‚->
fText
);

440 
doSÏsh
:

442 
n
 = 
	`pushNewNode
(
RBBINode
::
lookAh—d
);

443 
n
->
fV®
 = 
fRuËNum
;

444 
n
->
fFœ¡Pos
 = 
fSÿnIndex
;

445 
n
->
fLa¡Pos
 = 
fNextIndex
;

446 
fRB
->
fRuËs
.
	`exŒaùB‘w“n
(
n
->
fFœ¡Pos
,‚->
fLa¡Pos
,‚->
fText
);

447 
fLookAh—dRuË
 = 
TRUE
;

451 
doS¹TagV®ue
:

453 
n
 = 
	`pushNewNode
(
RBBINode
::
g
);

454 
n
->
fV®
 = 0;

455 
n
->
fFœ¡Pos
 = 
fSÿnIndex
;

456 
n
->
fLa¡Pos
 = 
fNextIndex
;

459 
doTagDig™
:

462 
n
 = 
fNodeSck
[
fNodeSckPŒ
];

463 
ušt32_t
 
v
 = 
	`u_ch¬Dig™V®ue
(
fC
.
fCh¬
);

464 
	`U_ASSERT
(
v
 < 10);

465 
n
->
fV®
 =‚->fV®*10 + 
v
;

469 
doTagV®ue
:

470 
n
 = 
fNodeSck
[
fNodeSckPŒ
];

471 
n
->
fLa¡Pos
 = 
fNextIndex
;

472 
fRB
->
fRuËs
.
	`exŒaùB‘w“n
(
n
->
fFœ¡Pos
,‚->
fLa¡Pos
,‚->
fText
);

475 
doTagEx³ùedE¼Ü
:

476 
	`”rÜ
(
U_BRK_MALFORMED_RULE_TAG
);

477 
»tuºV®
 = 
FALSE
;

480 
doO±iÚS¹
:

482 
fO±iÚS¹
 = 
fSÿnIndex
;

485 
doO±iÚEnd
:

487 
UnicodeSŒšg
 
	`İt
(
fRB
->
fRuËs
, 
fO±iÚS¹
, 
fSÿnIndex
-fOptionStart);

488 ià(
İt
 =ğ
	`UNICODE_STRING
("chain", 5)) {

489 
fRB
->
fChašRuËs
 = 
TRUE
;

490 } ià(
İt
 =ğ
	`UNICODE_STRING
("LBCMNoChain", 11)) {

491 
fRB
->
fLBCMNoChaš
 = 
TRUE
;

492 } ià(
İt
 =ğ
	`UNICODE_STRING
("forward", 7)) {

493 
fRB
->
fDeçuÉT»e
 = &fRB->
fFÜw¬dT»e
;

494 } ià(
İt
 =ğ
	`UNICODE_STRING
("reverse", 7)) {

495 
fRB
->
fDeçuÉT»e
 = &fRB->
fRev”£T»e
;

496 } ià(
İt
 =ğ
	`UNICODE_STRING
("safe_forward", 12)) {

497 
fRB
->
fDeçuÉT»e
 = &fRB->
fSaãFwdT»e
;

498 } ià(
İt
 =ğ
	`UNICODE_STRING
("safe_reverse", 12)) {

499 
fRB
->
fDeçuÉT»e
 = &fRB->
fSaãRevT»e
;

500 } ià(
İt
 =ğ
	`UNICODE_STRING
("lookAheadHardBreak", 18)) {

501 
fRB
->
fLookAh—dH¬dB»ak
 = 
TRUE
;

503 
	`”rÜ
(
U_BRK_UNRECOGNIZED_OPTION
);

508 
doRev”£Dœ
:

509 
fRev”£RuË
 = 
TRUE
;

512 
doS¹V¬ŸbËName
:

513 
n
 = 
	`pushNewNode
(
RBBINode
::
v¬Ref
);

514 ià(
	`U_FAILURE
(*
fRB
->
fStus
)) {

517 
n
->
fFœ¡Pos
 = 
fSÿnIndex
;

520 
doEndV¬ŸbËName
:

521 
n
 = 
fNodeSck
[
fNodeSckPŒ
];

522 ià(
n
==
NULL
 ||‚->
fTy³
 !ğ
RBBINode
::
v¬Ref
) {

523 
	`”rÜ
(
U_BRK_INTERNAL_ERROR
);

526 
n
->
fLa¡Pos
 = 
fSÿnIndex
;

527 
fRB
->
fRuËs
.
	`exŒaùB‘w“n
(
n
->
fFœ¡Pos
+1,‚->
fLa¡Pos
,‚->
fText
);

532 
n
->
fLeáChd
 = 
fSymbŞTabË
->
	`lookupNode
Ò->
fText
);

535 
doCheckV¬Def
:

536 
n
 = 
fNodeSck
[
fNodeSckPŒ
];

537 ià(
n
->
fLeáChd
 =ğ
NULL
) {

538 
	`”rÜ
(
U_BRK_UNDEFINED_VARIABLE
);

539 
»tuºV®
 = 
FALSE
;

543 
doEx´Fšished
:

546 
doRuËE¼ÜAssignEx´
:

547 
	`”rÜ
(
U_BRK_ASSIGN_ERROR
);

548 
»tuºV®
 = 
FALSE
;

551 
doEx™
:

552 
»tuºV®
 = 
FALSE
;

555 
doSÿnUnicodeS‘
:

556 
	`sÿnS‘
();

560 
	`”rÜ
(
U_BRK_INTERNAL_ERROR
);

561 
»tuºV®
 = 
FALSE
;

564  
»tuºV®
;

565 
	}
}

576 
	gRBBIRuËSÿÂ”
::
	$”rÜ
(
UE¼ÜCode
 
e
) {

577 ià(
	`U_SUCCESS
(*
fRB
->
fStus
)) {

578 *
fRB
->
fStus
 = 
e
;

579 ià(
fRB
->
fP¬£E¼Ü
) {

580 
fRB
->
fP¬£E¼Ü
->
lše
 = 
fLšeNum
;

581 
fRB
->
fP¬£E¼Ü
->
off£t
 = 
fCh¬Num
;

582 
fRB
->
fP¬£E¼Ü
->
´eCÚ‹xt
[0] = 0;

583 
fRB
->
fP¬£E¼Ü
->
´eCÚ‹xt
[0] = 0;

586 
	}
}

606 
	gRBBIRuËSÿÂ”
::
fixOpSck
(
RBBINode
::
OpP»ûd’û
 
p
) {

607 
RBBINode
 *
n
;

610 
	gn
 = 
fNodeSck
[
fNodeSckPŒ
-1];

611 ià(
	gn
->
	gfP»ûd’û
 == 0) {

612 
RBBIDebugPuts
("RBBIRuleScanner::fixOpStack, bad operator‚ode");

613 
”rÜ
(
U_BRK_INTERNAL_ERROR
);

617 ià(
	gn
->
	gfP»ûd’û
 < 
	gp
 ||‚->fP»ûd’û <ğ
RBBINode
::
´ecLP¬’
) {

625 
	gn
->
	gfRightChd
 = 
fNodeSck
[
fNodeSckPŒ
];

626 
	gfNodeSck
[
fNodeSckPŒ
]->
	gfP¬’t
 = 
n
;

627 
	gfNodeSckPŒ
--;

631 ià(
	gp
 <ğ
RBBINode
::
´ecLP¬’
) {

636 ià(
n
->
fP»ûd’û
 !ğ
p
) {

639 
”rÜ
(
U_BRK_MISMATCHED_PAREN
);

641 
	gfNodeSck
[
fNodeSckPŒ
-1] = 
fNodeSck
[fNodeStackPtr];

642 
	gfNodeSckPŒ
--;

644 
d–‘e
 
	gn
;

668 
	gRBBIRuËSÿÂ”
::
	$fšdS‘FÜ
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
RBBINode
 *
node
, 
UnicodeS‘
 *
£tToAdİt
) {

670 
RBBIS‘TabËEl
 *
–
;

675 
–
 = (
RBBIS‘TabËEl
 *)
	`uhash_g‘
(
fS‘TabË
, &
s
);

676 ià(
–
 !ğ
NULL
) {

677 
d–‘e
 
£tToAdİt
;

678 
node
->
fLeáChd
 = 
–
->
v®
;

679 
	`U_ASSERT
(
node
->
fLeáChd
->
fTy³
 =ğ
RBBINode
::
u£t
);

686 ià(
£tToAdİt
 =ğ
NULL
) {

687 ià(
s
.
	`com·»
(
kAny
, -1) == 0) {

688 
£tToAdİt
 = 
Ãw
 
	`UnicodeS‘
(0x000000, 0x10ffff);

690 
UCh¬32
 
c
;

691 
c
 = 
s
.
	`ch¬32At
(0);

692 
£tToAdİt
 = 
Ãw
 
	`UnicodeS‘
(
c
, c);

700 
RBBINode
 *
u£tNode
 = 
Ãw
 
	`RBBINode
(RBBINode::
u£t
);

701 ià(
u£tNode
 =ğ
NULL
) {

702 
	`”rÜ
(
U_MEMORY_ALLOCATION_ERROR
);

705 
u£tNode
->
fIÅutS‘
 = 
£tToAdİt
;

706 
u£tNode
->
fP¬’t
 = 
node
;

707 
node
->
fLeáChd
 = 
u£tNode
;

708 
u£tNode
->
fText
 = 
s
;

714 
fRB
->
fUS‘Nodes
->
	`addEËm’t
(
u£tNode
, *fRB->
fStus
);

720 
–
 = (
RBBIS‘TabËEl
 *)
	`u´v_m®loc
((RBBISetTableEl));

721 
UnicodeSŒšg
 *
tkey
 = 
Ãw
 
	`UnicodeSŒšg
(
s
);

722 ià(
tkey
 =ğ
NULL
 || 
–
 =ğNULL || 
£tToAdİt
 == NULL) {

724 
d–‘e
 
tkey
;

725 
tkey
 = 
NULL
;

726 
	`u´v_ä“
(
–
);

727 
–
 = 
NULL
;

728 
d–‘e
 
£tToAdİt
;

729 
£tToAdİt
 = 
NULL
;

731 
	`”rÜ
(
U_MEMORY_ALLOCATION_ERROR
);

734 
–
->
key
 = 
tkey
;

735 
–
->
v®
 = 
u£tNode
;

736 
	`uhash_put
(
fS‘TabË
, 
–
->
key
,ƒl, 
fRB
->
fStus
);

739 
	}
}

748 cÚ¡ 
UCh¬
 
	gchCR
 = 0x0d;

749 cÚ¡ 
UCh¬
 
	gchLF
 = 0x0a;

750 cÚ¡ 
UCh¬
 
	gchNEL
 = 0x85;

751 cÚ¡ 
UCh¬
 
	gchLS
 = 0x2028;

752 cÚ¡ 
UCh¬
 
	gchApos
 = 0x27;

753 cÚ¡ 
UCh¬
 
	gchPound
 = 0x23;

754 cÚ¡ 
UCh¬
 
	gchBackSÏsh
 = 0x5c;

755 cÚ¡ 
UCh¬
 
	gchLP¬’
 = 0x28;

756 cÚ¡ 
UCh¬
 
	gchRP¬’
 = 0x29;

765 
UnicodeSŒšg
 
	gRBBIRuËSÿÂ”
::
	$¡rRuËs
(cÚ¡ 
UnicodeSŒšg
 &
ruËs
) {

766 
UnicodeSŒšg
 
¡r³dRuËs
;

767 
ruËsL’gth
 = 
ruËs
.
	`Ëngth
();

768 
idx
 = 0; idx < 
ruËsL’gth
; ) {

769 
UCh¬
 
ch
 = 
ruËs
[
idx
++];

770 ià(
ch
 =ğ
chPound
) {

771 
idx
 < 
ruËsL’gth


772 && 
ch
 !ğ
chCR
 && ch !ğ
chLF
 && ch !ğ
chNEL
)

774 
ch
 = 
ruËs
[
idx
++];

777 ià(!
	`u_isISOCÚŒŞ
(
ch
)) {

778 
¡r³dRuËs
.
	`­³nd
(
ch
);

782  
¡r³dRuËs
;

783 
	}
}

793 
UCh¬32
 
	gRBBIRuËSÿÂ”
::
	$ÃxtCh¬LL
() {

794 
UCh¬32
 
ch
;

796 ià(
fNextIndex
 >ğ
fRB
->
fRuËs
.
	`Ëngth
()) {

797  (
UCh¬32
)-1;

799 
ch
 = 
fRB
->
fRuËs
.
	`ch¬32At
(
fNextIndex
);

800 
fNextIndex
 = 
fRB
->
fRuËs
.
	`moveIndex32
(fNextIndex, 1);

802 ià(
ch
 =ğ
chCR
 ||

803 
ch
 =ğ
chNEL
 ||

804 
ch
 =ğ
chLS
 ||

805 (
ch
 =ğ
chLF
 && 
fLa¡Ch¬
 !ğ
chCR
)) {

808 
fLšeNum
++;

809 
fCh¬Num
=0;

810 ià(
fQuÙeMode
) {

811 
	`”rÜ
(
U_BRK_NEW_LINE_IN_QUOTED_STRING
);

812 
fQuÙeMode
 = 
FALSE
;

818 ià(
ch
 !ğ
chLF
) {

819 
fCh¬Num
++;

822 
fLa¡Ch¬
 = 
ch
;

823  
ch
;

824 
	}
}

834 
	gRBBIRuËSÿÂ”
::
	$ÃxtCh¬
(
RBBIRuËCh¬
 &
c
) {

839 
fSÿnIndex
 = 
fNextIndex
;

840 
c
.
fCh¬
 = 
	`ÃxtCh¬LL
();

841 
c
.
fEsÿ³d
 = 
FALSE
;

847 ià(
c
.
fCh¬
 =ğ
chApos
) {

848 ià(
fRB
->
fRuËs
.
	`ch¬32At
(
fNextIndex
è=ğ
chApos
) {

849 
c
.
fCh¬
 = 
	`ÃxtCh¬LL
();

850 
c
.
fEsÿ³d
 = 
TRUE
;

857 
fQuÙeMode
 = !fQuoteMode;

858 ià(
fQuÙeMode
 =ğ
TRUE
) {

859 
c
.
fCh¬
 = 
chLP¬’
;

861 
c
.
fCh¬
 = 
chRP¬’
;

863 
c
.
fEsÿ³d
 = 
FALSE
;

868 ià(
fQuÙeMode
) {

869 
c
.
fEsÿ³d
 = 
TRUE
;

875 ià(
c
.
fCh¬
 =ğ
chPound
) {

882 
c
.
fCh¬
 = 
	`ÃxtCh¬LL
();

883 ià(
c
.
fCh¬
 =ğ(
UCh¬32
)-1 ||

884 
c
.
fCh¬
 =ğ
chCR
 ||

885 
c
.
fCh¬
 =ğ
chLF
 ||

886 
c
.
fCh¬
 =ğ
chNEL
 ||

887 
c
.
fCh¬
 =ğ
chLS
) {;}

890 ià(
c
.
fCh¬
 =ğ(
UCh¬32
)-1) {

898 ià(
c
.
fCh¬
 =ğ
chBackSÏsh
) {

899 
c
.
fEsÿ³d
 = 
TRUE
;

900 
št32_t
 
¡¬tX
 = 
fNextIndex
;

901 
c
.
fCh¬
 = 
fRB
->
fRuËs
.
	`uÃsÿ³At
(
fNextIndex
);

902 ià(
fNextIndex
 =ğ
¡¬tX
) {

903 
	`”rÜ
(
U_BRK_HEX_DIGITS_EXPECTED
);

905 
fCh¬Num
 +ğ
fNextIndex
-
¡¬tX
;

909 
	}
}

919 
	gRBBIRuËSÿÂ”
::
	$·r£
() {

920 
ušt16_t
 
¡©e
;

921 cÚ¡ 
RBBIRuËTabËEl
 *
bËEl
;

923 ià(
	`U_FAILURE
(*
fRB
->
fStus
)) {

927 
¡©e
 = 1;

928 
	`ÃxtCh¬
(
fC
);

940 ià(
	`U_FAILURE
(*
fRB
->
fStus
)) {

946 ià(
¡©e
 == 0) {

956 
bËEl
 = &
gRuËP¬£S‹TabË
[
¡©e
];

957 #ifdeà
RBBI_DEBUG


958 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "scan")) {

959 
	`RBBIDebugPrštf
("char,†ine, col = (\'%c\', %d, %d) state=%s ",

960 
fC
.
fCh¬
, 
fLšeNum
, 
fCh¬Num
, 
RBBIRuËS‹Names
[
¡©e
]);

965 #ifdeà
RBBI_DEBUG


966 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "sÿn")è{ 
	`RBBIDebugPrštf
(".");}

968 ià(
bËEl
->
fCh¬CÏss
 < 127 && 
fC
.
fEsÿ³d
 =ğ
FALSE
 &&abËEl->fCh¬CÏs =ğfC.
fCh¬
) {

974 ià(
bËEl
->
fCh¬CÏss
 == 255) {

978 ià(
bËEl
->
fCh¬CÏss
 =ğ254 && 
fC
.
fEsÿ³d
) {

982 ià(
bËEl
->
fCh¬CÏss
 =ğ253 && 
fC
.
fEsÿ³d
 &&

983 (
fC
.
fCh¬
 == 0x50 || fC.fChar == 0x70 )) {

987 ià(
bËEl
->
fCh¬CÏss
 =ğ252 && 
fC
.
fCh¬
 =ğ(
UCh¬32
)-1) {

992 ià(
bËEl
->
fCh¬CÏss
 >= 128 &&ableEl->fCharClass < 240 &&

993 
fC
.
fEsÿ³d
 =ğ
FALSE
 &&

994 
fC
.
fCh¬
 !ğ(
UCh¬32
)-1) {

995 ià(
fRuËS‘s
[
bËEl
->
fCh¬CÏss
-128].
	`cÚšs
(
fC
.
fCh¬
)) {

1003 
bËEl
++;

1005 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "sÿn")è{ 
	`RBBIDebugPuts
("");}

1011 ià(
	`doP¬£AùiÚs
((
št32_t
)
bËEl
->
fAùiÚ
è=ğ
FALSE
) {

1018 ià(
bËEl
->
fPushS‹
 != 0) {

1019 
fSckPŒ
++;

1020 ià(
fSckPŒ
 >ğ
kSckSize
) {

1021 
	`”rÜ
(
U_BRK_INTERNAL_ERROR
);

1022 
	`RBBIDebugPuts
("RBBIRuleScanner::parse() - state stack overflow.");

1023 
fSckPŒ
--;

1025 
fSck
[
fSckPŒ
] = 
bËEl
->
fPushS‹
;

1028 ià(
bËEl
->
fNextCh¬
) {

1029 
	`ÃxtCh¬
(
fC
);

1034 ià(
bËEl
->
fNextS‹
 != 255) {

1035 
¡©e
 = 
bËEl
->
fNextS‹
;

1037 
¡©e
 = 
fSck
[
fSckPŒ
];

1038 
fSckPŒ
--;

1039 ià(
fSckPŒ
 < 0) {

1040 
	`”rÜ
(
U_BRK_INTERNAL_ERROR
);

1041 
	`RBBIDebugPuts
("RBBIRuleScanner::parse() - state stack underflow.");

1042 
fSckPŒ
++;

1051 ià(
fRB
->
fRev”£T»e
 =ğ
NULL
) {

1052 
fRB
->
fRev”£T»e
 = 
	`pushNewNode
(
RBBINode
::
İSr
);

1053 
RBBINode
 *
İ”ªd
 = 
	`pushNewNode
(RBBINode::
£tRef
);

1054 
	`fšdS‘FÜ
(
kAny
, 
İ”ªd
);

1055 
fRB
->
fRev”£T»e
->
fLeáChd
 = 
İ”ªd
;

1056 
İ”ªd
->
fP¬’t
 = 
fRB
->
fRev”£T»e
;

1057 
fNodeSckPŒ
 -= 2;

1066 #ifdeà
RBBI_DEBUG


1067 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "symbŞs")è{
fSymbŞTabË
->
	`rbbiSymbËPršt
();}

1068 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "ptree"))

1070 
	`RBBIDebugPrštf
("Completed Forward Rules Parse Tree...\n");

1071 
fRB
->
fFÜw¬dT»e
->
	`´štT»e
(
TRUE
);

1072 
	`RBBIDebugPrštf
("\nCompleted Reverse Rules Parse Tree...\n");

1073 
fRB
->
fRev”£T»e
->
	`´štT»e
(
TRUE
);

1074 
	`RBBIDebugPrštf
("\nCompleted Safe Point Forward Rules Parse Tree...\n");

1075 
fRB
->
fSaãFwdT»e
->
	`´štT»e
(
TRUE
);

1076 
	`RBBIDebugPrštf
("\nCompleted Safe Point Reverse Rules Parse Tree...\n");

1077 
fRB
->
fSaãRevT»e
->
	`´štT»e
(
TRUE
);

1080 
	}
}

1088 #ifdeà
RBBI_DEBUG


1089 
	gRBBIRuËSÿÂ”
::
	$´štNodeSck
(cÚ¡ *
t™Ë
) {

1090 
i
;

1091 
	`RBBIDebugPrštf
("%s. Dumpšg‚od¡ack...\n", 
t™Ë
);

1092 
i
=
fNodeSckPŒ
; i>0; i--è{
fNodeSck
[i]->
	`´štT»e
(
TRUE
);}

1093 
	}
}

1105 
RBBINode
 *
	gRBBIRuËSÿÂ”
::
pushNewNode
(RBBINode::
NodeTy³
 
t
) {

1106 
fNodeSckPŒ
++;

1107 ià(
	gfNodeSckPŒ
 >ğ
kSckSize
) {

1108 
”rÜ
(
U_BRK_INTERNAL_ERROR
);

1109 
RBBIDebugPuts
("RBBIRuleScanner::pushNewNode - stack overflow.");

1110 *
	gfRB
->
	gfStus
 = 
U_BRK_INTERNAL_ERROR
;

1111  
	gNULL
;

1113 
	gfNodeSck
[
fNodeSckPŒ
] = 
Ãw
 
RBBINode
(
t
);

1114 ià(
	gfNodeSck
[
fNodeSckPŒ
] =ğ
NULL
) {

1115 *
fRB
->
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

1117  
	gfNodeSck
[
fNodeSckPŒ
];

1136 
	gRBBIRuËSÿÂ”
::
	$sÿnS‘
() {

1137 
UnicodeS‘
 *
u£t
;

1138 
P¬£Pos™iÚ
 
pos
;

1139 
¡¬tPos
;

1140 
i
;

1142 ià(
	`U_FAILURE
(*
fRB
->
fStus
)) {

1146 
pos
.
	`£tIndex
(
fSÿnIndex
);

1147 
¡¬tPos
 = 
fSÿnIndex
;

1148 
UE¼ÜCode
 
loÿlStus
 = 
U_ZERO_ERROR
;

1149 
u£t
 = 
Ãw
 
	`UnicodeS‘
(
fRB
->
fRuËs
, 
pos
, 
USET_IGNORE_SPACE
,

1150 
fSymbŞTabË
,

1151 
loÿlStus
);

1152 ià(
u£t
 =ğ
NULL
) {

1153 
loÿlStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

1155 ià(
	`U_FAILURE
(
loÿlStus
)) {

1158 #ifdeà
RBBI_DEBUG


1159 
	`RBBIDebugPrštf
("UnicodeS‘…¬£…o¡iÚ.E¼ÜIndex = %d\n", 
pos
.
	`g‘Index
());

1161 
	`”rÜ
(
loÿlStus
);

1162 
d–‘e
 
u£t
;

1168 ià(
u£t
->
	`isEm±y
()) {

1173 
	`”rÜ
(
U_BRK_RULE_EMPTY_SET
);

1174 
d–‘e
 
u£t
;

1182 
i
 = 
pos
.
	`g‘Index
();

1184 ià(
fNextIndex
 >ğ
i
) {

1187 
	`ÃxtCh¬LL
();

1190 ià(
	`U_SUCCESS
(*
fRB
->
fStus
)) {

1191 
RBBINode
 *
n
;

1193 
n
 = 
	`pushNewNode
(
RBBINode
::
£tRef
);

1194 
n
->
fFœ¡Pos
 = 
¡¬tPos
;

1195 
n
->
fLa¡Pos
 = 
fNextIndex
;

1196 
fRB
->
fRuËs
.
	`exŒaùB‘w“n
(
n
->
fFœ¡Pos
,‚->
fLa¡Pos
,‚->
fText
);

1203 
	`fšdS‘FÜ
(
n
->
fText
,‚, 
u£t
);

1206 
	}
}

1208 
	gU_NAMESPACE_END


	@rbbiscan.h

11 #iâdeà
RBBISCAN_H


12 
	#RBBISCAN_H


	)

14 
	~"unicode/uty³s.h
"

15 
	~"unicode/uobjeù.h
"

16 
	~"unicode/rbbi.h
"

17 
	~"unicode/uni£t.h
"

18 
	~"unicode/·r£”r.h
"

19 
	~"uhash.h
"

20 
	~"uveùÜ.h
"

21 
	~"unicode/symbË.h
"

23 
	~"rbbšode.h
"

28 
U_NAMESPACE_BEGIN


30 
şass
 
	gRBBIRuËBud”
;

31 
şass
 
	gRBBISymbŞTabË
;

45 şas 
	cRBBIRuËSÿÂ”
 : 
public
 
UMemÜy
 {

46 
public
:

49 
kSckSize
 = 100

54 
	sRBBIRuËCh¬
 {

55 
UCh¬32
 
	gfCh¬
;

56 
UBoŞ
 
	gfEsÿ³d
;

59 
RBBIRuËSÿÂ”
(
RBBIRuËBud”
 *
rb
);

62 
	gvœtu®
 ~
RBBIRuËSÿÂ”
();

64 
ÃxtCh¬
(
RBBIRuËCh¬
 &
c
);

67 
UBoŞ
 
push
(cÚ¡ 
RBBIRuËCh¬
 &
c
);

70 
·r£
();

79 
UnicodeSŒšg
 
¡rRuËs
(cÚ¡ UnicodeSŒšg &
ruËs
);

80 
	g´iv©e
:

82 
UBoŞ
 
doP¬£AùiÚs
(
št32_t
 
a
);

83 
”rÜ
(
UE¼ÜCode
 
e
);

84 
fixOpSck
(
RBBINode
::
OpP»ûd’û
 
p
);

86 
fšdS‘FÜ
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
RBBINode
 *
node
, 
UnicodeS‘
 *
£tToAdİt
 = 
NULL
);

88 
UCh¬32
 
ÃxtCh¬LL
();

89 #ifdeà
RBBI_DEBUG


90 
´štNodeSck
(cÚ¡ *
t™Ë
);

92 
RBBINode
 *
pushNewNode
(RBBINode::
NodeTy³
 
t
);

93 
sÿnS‘
();

96 
RBBIRuËBud”
 *
	gfRB
;

98 
št32_t
 
	gfSÿnIndex
;

100 
št32_t
 
	gfNextIndex
;

102 
UBoŞ
 
	gfQuÙeMode
;

103 
št32_t
 
	gfLšeNum
;

104 
št32_t
 
	gfCh¬Num
;

105 
UCh¬32
 
	gfLa¡Ch¬
;

108 
RBBIRuËCh¬
 
	gfC
;

110 
UnicodeSŒšg
 
	gfV¬Name
;

113 
RBBIRuËTabËEl
 **
	gfS‹TabË
;

116 
ušt16_t
 
	gfSck
[
kSckSize
];

117 
št32_t
 
	gfSckPŒ
;

120 
RBBINode
 *
	gfNodeSck
[
kSckSize
];

122 
št32_t
 
	gfNodeSckPŒ
;

125 
UBoŞ
 
	gfRev”£RuË
;

129 
UBoŞ
 
	gfLookAh—dRuË
;

132 
RBBISymbŞTabË
 *
	gfSymbŞTabË
;

135 
UHashbË
 *
	gfS‘TabË
;

140 
UnicodeS‘
 
	gfRuËS‘s
[10];

146 
št32_t
 
	gfRuËNum
;

148 
št32_t
 
	gfO±iÚS¹
;

151 
UnicodeS‘
 *
	ggRuËS‘_ruË_ch¬
;

152 
UnicodeS‘
 *
	ggRuËS‘_wh™e_¥aû
;

153 
UnicodeS‘
 *
	ggRuËS‘_Çme_ch¬
;

154 
UnicodeS‘
 *
	ggRuËS‘_Çme_¡¬t_ch¬
;

156 
RBBIRuËSÿÂ”
(cÚ¡ RBBIRuËSÿÂ” &
Ùh”
);

157 
	gRBBIRuËSÿÂ”
 &
	gİ”©Ü
=(cÚ¡ 
RBBIRuËSÿÂ”
 &
Ùh”
);

160 
	gU_NAMESPACE_END


	@rbbisetb.cpp

31 
	~"unicode/uty³s.h
"

33 #ià!
UCONFIG_NO_BREAK_ITERATION


35 
	~"unicode/uni£t.h
"

36 
	~"uŒ›.h
"

37 
	~"uveùÜ.h
"

38 
	~"uas£¹.h
"

39 
	~"cmemÜy.h
"

40 
	~"c¡ršg.h
"

42 
	~"rbbi£tb.h
"

43 
	~"rbbšode.h
"

56 
U_CDECL_BEGIN


57 
ušt32_t
 
U_CALLCONV


58 
	$g‘FŞdedRBBIV®ue
(
UNewTr›
 *
Œ›
, 
UCh¬32
 
¡¬t
, 
št32_t
 
off£t
) {

59 
ušt32_t
 
v®ue
;

60 
UCh¬32
 
lim™
;

61 
UBoŞ
 
šBlockZ”o
;

63 
lim™
=
¡¬t
+0x400;

64 
¡¬t
<
lim™
) {

65 
v®ue
=
	`uŒ›_g‘32
(
Œ›
, 
¡¬t
, &
šBlockZ”o
);

66 if(
šBlockZ”o
) {

67 
¡¬t
+=
UTRIE_DATA_BLOCK_LENGTH
;

68 } if(
v®ue
!=0) {

69  (
ušt32_t
)(
off£t
|0x8000);

71 ++
¡¬t
;

75 
	}
}

78 
U_CDECL_END


82 
U_NAMESPACE_BEGIN


89 
	gRBBIS‘Bud”
::
	$RBBIS‘Bud”
(
RBBIRuËBud”
 *
rb
)

91 
fRB
 = 
rb
;

92 
fStus
 = 
rb
->fStatus;

93 
fRªgeLi¡
 = 0;

94 
fTr›
 = 0;

95 
fTr›Size
 = 0;

96 
fGroupCouÁ
 = 0;

97 
fSawBOF
 = 
FALSE
;

98 
	}
}

106 
	gRBBIS‘Bud”
::~
	$RBBIS‘Bud”
()

108 
RªgeDesütÜ
 *
ÃxtRªgeDesc
;

111 
ÃxtRªgeDesc
 = 
fRªgeLi¡
;‚extRªgeDesc!=
NULL
;) {

112 
RªgeDesütÜ
 *
r
 = 
ÃxtRªgeDesc
;

113 
ÃxtRªgeDesc
 = 
r
->
fNext
;

114 
d–‘e
 
r
;

117 
	`uŒ›_şo£
(
fTr›
);

118 
	}
}

129 
	gRBBIS‘Bud”
::
	$bud
() {

130 
RBBINode
 *
u£tNode
;

131 
RªgeDesütÜ
 *
¾Rªge
;

133 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "u£ts")è{
	`´štS‘s
();}

139 
fRªgeLi¡
 = 
Ãw
 
	`RªgeDesütÜ
(*
fStus
);

140 ià(
fRªgeLi¡
 =ğ
NULL
) {

141 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

144 
fRªgeLi¡
->
fS¹Ch¬
 = 0;

145 
fRªgeLi¡
->
fEndCh¬
 = 0x10ffff;

147 ià(
	`U_FAILURE
(*
fStus
)) {

154 
ni
;

155 
ni
=0; ;‚i++) {

156 
u£tNode
 = (
RBBINode
 *)
this
->
fRB
->
fUS‘Nodes
->
	`–em’tAt
(
ni
);

157 ià(
u£tNode
==
NULL
) {

161 
UnicodeS‘
 *
šputS‘
 = 
u£tNode
->
fIÅutS‘
;

162 
št32_t
 
šputS‘RªgeCouÁ
 = 
šputS‘
->
	`g‘RªgeCouÁ
();

163 
šputS‘RªgeIndex
 = 0;

164 
¾Rªge
 = 
fRªgeLi¡
;

167 ià(
šputS‘RªgeIndex
 >ğ
šputS‘RªgeCouÁ
) {

170 
UCh¬32
 
šputS‘RªgeBegš
 = 
šputS‘
->
	`g‘RªgeS¹
(
šputS‘RªgeIndex
);

171 
UCh¬32
 
šputS‘RªgeEnd
 = 
šputS‘
->
	`g‘RªgeEnd
(
šputS‘RªgeIndex
);

175 
¾Rªge
->
fEndCh¬
 < 
šputS‘RªgeBegš
) {

176 
¾Rªge
 =„lRªge->
fNext
;

185 ià(
¾Rªge
->
fS¹Ch¬
 < 
šputS‘RªgeBegš
) {

186 
¾Rªge
->
	`¥l™
(
šputS‘RªgeBegš
, *
fStus
);

187 ià(
	`U_FAILURE
(*
fStus
)) {

198 ià(
¾Rªge
->
fEndCh¬
 > 
šputS‘RªgeEnd
) {

199 
¾Rªge
->
	`¥l™
(
šputS‘RªgeEnd
+1, *
fStus
);

200 ià(
	`U_FAILURE
(*
fStus
)) {

207 ià(
¾Rªge
->
fInşudesS‘s
->
	`šdexOf
(
u£tNode
) == -1) {

208 
¾Rªge
->
fInşudesS‘s
->
	`addEËm’t
(
u£tNode
, *
fStus
);

209 ià(
	`U_FAILURE
(*
fStus
)) {

215 ià(
šputS‘RªgeEnd
 =ğ
¾Rªge
->
fEndCh¬
) {

216 
šputS‘RªgeIndex
++;

218 
¾Rªge
 =„lRªge->
fNext
;

222 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "¿nge")è{ 
	`´štRªges
();}

235 
RªgeDesütÜ
 *
¾S—rchRªge
;

236 
¾Rªge
 = 
fRªgeLi¡
;„lRªge!=0;„lRªgeôlRªge->
fNext
) {

237 
¾S—rchRªge
=
fRªgeLi¡
;„lS—rchRªg!ğ
¾Rªge
;„lS—rchRªgeôlS—rchRªge->
fNext
) {

238 ià(
¾Rªge
->
fInşudesS‘s
->
	`equ®s
(*
¾S—rchRªge
->fIncludesSets)) {

239 
¾Rªge
->
fNum
 = 
¾S—rchRªge
->fNum;

243 ià(
¾Rªge
->
fNum
 == 0) {

244 
fGroupCouÁ
 ++;

245 
¾Rªge
->
fNum
 = 
fGroupCouÁ
+2;

246 
¾Rªge
->
	`£tDiùiÚ¬yFÏg
();

247 
	`addV®ToS‘s
(
¾Rªge
->
fInşudesS‘s
, 
fGroupCouÁ
+2);

260 cÚ¡ 
UCh¬
 
eofUSŒšg
[] = {0x65, 0x6f, 0x66, 0};

261 cÚ¡ 
UCh¬
 
bofUSŒšg
[] = {0x62, 0x6f, 0x66, 0};

263 
UnicodeSŒšg
 
	`eofSŒšg
(
eofUSŒšg
);

264 
UnicodeSŒšg
 
	`bofSŒšg
(
bofUSŒšg
);

265 
ni
=0; ;‚i++) {

266 
u£tNode
 = (
RBBINode
 *)
this
->
fRB
->
fUS‘Nodes
->
	`–em’tAt
(
ni
);

267 ià(
u£tNode
==
NULL
) {

270 
UnicodeS‘
 *
šputS‘
 = 
u£tNode
->
fIÅutS‘
;

271 ià(
šputS‘
->
	`cÚšs
(
eofSŒšg
)) {

272 
	`addV®ToS‘
(
u£tNode
, 1);

274 ià(
šputS‘
->
	`cÚšs
(
bofSŒšg
)) {

275 
	`addV®ToS‘
(
u£tNode
, 2);

276 
fSawBOF
 = 
TRUE
;

281 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "rgroup")è{
	`´štRªgeGroups
();}

282 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "e£ts")è{
	`´štS‘s
();}

288 
fTr›
 = 
	`uŒ›_İ’
(
NULL
,

289 
NULL
,

293 
TRUE
);

296 
¾Rªge
 = 
fRªgeLi¡
;„lRªge!=0;„lRªgeôlRªge->
fNext
) {

297 
	`uŒ›_£tRªge32
(
fTr›
, 
¾Rªge
->
fS¹Ch¬
,„lRªge->
fEndCh¬
+1,„lRªge->
fNum
, 
TRUE
);

299 
	}
}

308 
št32_t
 
	gRBBIS‘Bud”
::
	$g‘Tr›Size
() {

309 
fTr›Size
 = 
	`uŒ›_£rŸlize
(
fTr›
,

310 
NULL
,

312 
g‘FŞdedRBBIV®ue
,

313 
TRUE
,

314 
fStus
);

316  
fTr›Size
;

317 
	}
}

327 
	gRBBIS‘Bud”
::
	$£rŸlizeTr›
(
ušt8_t
 *
wh”e
) {

328 
	`uŒ›_£rŸlize
(
fTr›
,

329 
wh”e
,

330 
fTr›Size
,

331 
g‘FŞdedRBBIV®ue
,

332 
TRUE
,

333 
fStus
);

334 
	}
}

350 
	gRBBIS‘Bud”
::
	$addV®ToS‘s
(
UVeùÜ
 *
£ts
, 
ušt32_t
 
v®
) {

351 
št32_t
 
ix
;

353 
ix
=0; ix<
£ts
->
	`size
(); ix++) {

354 
RBBINode
 *
u£tNode
 = (RBBINod*)
£ts
->
	`–em’tAt
(
ix
);

355 
	`addV®ToS‘
(
u£tNode
, 
v®
);

357 
	}
}

359 
	gRBBIS‘Bud”
::
	$addV®ToS‘
(
RBBINode
 *
u£tNode
, 
ušt32_t
 
v®
) {

360 
RBBINode
 *
ËafNode
 = 
Ãw
 
	`RBBINode
(RBBINode::
ËafCh¬
);

361 ià(
ËafNode
 =ğ
NULL
) {

362 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

365 
ËafNode
->
fV®
 = ()
v®
;

366 ià(
u£tNode
->
fLeáChd
 =ğ
NULL
) {

367 
u£tNode
->
fLeáChd
 = 
ËafNode
;

368 
ËafNode
->
fP¬’t
 = 
u£tNode
;

373 
RBBINode
 *
ÜNode
 = 
Ãw
 
	`RBBINode
(RBBINode::
İOr
);

374 ià(
ÜNode
 =ğ
NULL
) {

375 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

378 
ÜNode
->
fLeáChd
 = 
u£tNode
->fLeftChild;

379 
ÜNode
->
fRightChd
 = 
ËafNode
;

380 
ÜNode
->
fLeáChd
->
fP¬’t
 = orNode;

381 
ÜNode
->
fRightChd
->
fP¬’t
 = orNode;

382 
u£tNode
->
fLeáChd
 = 
ÜNode
;

383 
ÜNode
->
fP¬’t
 = 
u£tNode
;

385 
	}
}

393 
št32_t
 
	gRBBIS‘Bud”
::
	$g‘NumCh¬C©egÜ›s
() const {

394  
fGroupCouÁ
 + 3;

395 
	}
}

403 
UBoŞ
 
	gRBBIS‘Bud”
::
	$§wBOF
() const {

404  
fSawBOF
;

405 
	}
}

414 
UCh¬32
 
	gRBBIS‘Bud”
::
	$g‘Fœ¡Ch¬
(
št32_t
 
ÿ‹gÜy
) const {

415 
RªgeDesütÜ
 *
¾Rªge
;

416 
UCh¬32
 
»tV®
 = (UChar32)-1;

417 
¾Rªge
 = 
fRªgeLi¡
;„lRªge!=0;„lRªgeôlRªge->
fNext
) {

418 ià(
¾Rªge
->
fNum
 =ğ
ÿ‹gÜy
) {

419 
»tV®
 = 
¾Rªge
->
fS¹Ch¬
;

423  
»tV®
;

424 
	}
}

434 #ifdeà
RBBI_DEBUG


435 
	gRBBIS‘Bud”
::
	$´štRªges
() {

436 
RªgeDesütÜ
 *
¾Rªge
;

437 
i
;

439 
	`RBBIDebugPrštf
("\n\n Nonoverlapping Ranges ...\n");

440 
¾Rªge
 = 
fRªgeLi¡
;„lRªge!=0;„lRªgeôlRªge->
fNext
) {

441 
	`RBBIDebugPrštf
("%2˜ %4x-%4x ", 
¾Rªge
->
fNum
,„lRªge->
fS¹Ch¬
,„lRªge->
fEndCh¬
);

443 
i
=0; i<
¾Rªge
->
fInşudesS‘s
->
	`size
(); i++) {

444 
RBBINode
 *
u£tNode
 = (RBBINod*)
¾Rªge
->
fInşudesS‘s
->
	`–em’tAt
(
i
);

445 
UnicodeSŒšg
 
£tName
 = 
	`UNICODE_STRING
("anon", 4);

446 
RBBINode
 *
£tRef
 = 
u£tNode
->
fP¬’t
;

447 ià(
£tRef
 !ğ
NULL
) {

448 
RBBINode
 *
v¬Ref
 = 
£tRef
->
fP¬’t
;

449 ià(
v¬Ref
 !ğ
NULL
 && v¬Ref->
fTy³
 =ğ
RBBINode
::varRef) {

450 
£tName
 = 
v¬Ref
->
fText
;

453 
	`RBBI_DEBUG_´štUnicodeSŒšg
(
£tName
); 
	`RBBIDebugPrštf
(" ");

455 
	`RBBIDebugPrštf
("\n");

457 
	}
}

467 #ifdeà
RBBI_DEBUG


468 
	gRBBIS‘Bud”
::
	$´štRªgeGroups
() {

469 
RªgeDesütÜ
 *
¾Rªge
;

470 
RªgeDesütÜ
 *
tRªge
;

471 
i
;

472 
Ï¡Prš‹dGroupNum
 = 0;

474 
	`RBBIDebugPrštf
("\nRanges grouped by Unicode Set Membership...\n");

475 
¾Rªge
 = 
fRªgeLi¡
;„lRªge!=0;„lRªgeôlRªge->
fNext
) {

476 
groupNum
 = 
¾Rªge
->
fNum
 & 0xbfff;

477 ià(
groupNum
 > 
Ï¡Prš‹dGroupNum
) {

478 
Ï¡Prš‹dGroupNum
 = 
groupNum
;

479 
	`RBBIDebugPrštf
("%2˜ ", 
groupNum
);

481 ià(
¾Rªge
->
fNum
 & 0x4000è{ 
	`RBBIDebugPrštf
(" <DICT> ");}

483 
i
=0; i<
¾Rªge
->
fInşudesS‘s
->
	`size
(); i++) {

484 
RBBINode
 *
u£tNode
 = (RBBINod*)
¾Rªge
->
fInşudesS‘s
->
	`–em’tAt
(
i
);

485 
UnicodeSŒšg
 
£tName
 = 
	`UNICODE_STRING
("anon", 4);

486 
RBBINode
 *
£tRef
 = 
u£tNode
->
fP¬’t
;

487 ià(
£tRef
 !ğ
NULL
) {

488 
RBBINode
 *
v¬Ref
 = 
£tRef
->
fP¬’t
;

489 ià(
v¬Ref
 !ğ
NULL
 && v¬Ref->
fTy³
 =ğ
RBBINode
::varRef) {

490 
£tName
 = 
v¬Ref
->
fText
;

493 
	`RBBI_DEBUG_´štUnicodeSŒšg
(
£tName
); 
	`RBBIDebugPrštf
(" ");

496 
i
 = 0;

497 
tRªge
 = 
¾Rªge
;Rªg!ğ0;RªgğtRªge->
fNext
) {

498 ià(
tRªge
->
fNum
 =ğ
¾Rªge
->fNum) {

499 ià(
i
++ % 5 == 0) {

500 
	`RBBIDebugPrštf
("\n ");

502 
	`RBBIDebugPrštf
(" %05x-%05x", 
tRªge
->
fS¹Ch¬
,Rªge->
fEndCh¬
);

505 
	`RBBIDebugPrštf
("\n");

508 
	`RBBIDebugPrštf
("\n");

509 
	}
}

519 #ifdeà
RBBI_DEBUG


520 
	gRBBIS‘Bud”
::
	$´štS‘s
() {

521 
i
;

523 
	`RBBIDebugPrštf
("\n\nUnicode Sets List\n------------------\n");

524 
i
=0; ; i++) {

525 
RBBINode
 *
u£tNode
;

526 
RBBINode
 *
£tRef
;

527 
RBBINode
 *
v¬Ref
;

528 
UnicodeSŒšg
 
£tName
;

530 
u£tNode
 = (
RBBINode
 *)
fRB
->
fUS‘Nodes
->
	`–em’tAt
(
i
);

531 ià(
u£tNode
 =ğ
NULL
) {

535 
	`RBBIDebugPrštf
("%3d ", 
i
);

536 
£tName
 = 
	`UNICODE_STRING
("anonymous", 9);

537 
£tRef
 = 
u£tNode
->
fP¬’t
;

538 ià(
£tRef
 !ğ
NULL
) {

539 
v¬Ref
 = 
£tRef
->
fP¬’t
;

540 ià(
v¬Ref
 !ğ
NULL
 && v¬Ref->
fTy³
 =ğ
RBBINode
::varRef) {

541 
£tName
 = 
v¬Ref
->
fText
;

544 
	`RBBI_DEBUG_´štUnicodeSŒšg
(
£tName
);

545 
	`RBBIDebugPrštf
(" ");

546 
	`RBBI_DEBUG_´štUnicodeSŒšg
(
u£tNode
->
fText
);

547 
	`RBBIDebugPrštf
("\n");

548 ià(
u£tNode
->
fLeáChd
 !ğ
NULL
) {

549 
u£tNode
->
fLeáChd
->
	`´štT»e
(
TRUE
);

552 
	`RBBIDebugPrštf
("\n");

553 
	}
}

564 
	gRªgeDesütÜ
::
	$RªgeDesütÜ
(cÚ¡ 
RªgeDesütÜ
 &
Ùh”
, 
UE¼ÜCode
 &
¡©us
) {

565 
i
;

567 
this
->
fS¹Ch¬
 = 
Ùh”
.fStartChar;

568 
this
->
fEndCh¬
 = 
Ùh”
.fEndChar;

569 
this
->
fNum
 = 
Ùh”
.fNum;

570 
this
->
fNext
 = 
NULL
;

571 
UE¼ÜCode
 
Şd¡©us
 = 
¡©us
;

572 
this
->
fInşudesS‘s
 = 
Ãw
 
	`UVeùÜ
(
¡©us
);

573 ià(
	`U_FAILURE
(
Şd¡©us
)) {

574 
¡©us
 = 
Şd¡©us
;

576 ià(
	`U_FAILURE
(
¡©us
)) {

580 ià(
this
->
fInşudesS‘s
 == 0) {

581 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

585 
i
=0; i<
Ùh”
.
fInşudesS‘s
->
	`size
(); i++) {

586 
this
->
fInşudesS‘s
->
	`addEËm’t
(
Ùh”
.fInşudesS‘s->
	`–em’tAt
(
i
), 
¡©us
);

588 
	}
}

596 
	gRªgeDesütÜ
::
	$RªgeDesütÜ
(
UE¼ÜCode
 &
¡©us
) {

597 
this
->
fS¹Ch¬
 = 0;

598 
this
->
fEndCh¬
 = 0;

599 
this
->
fNum
 = 0;

600 
this
->
fNext
 = 
NULL
;

601 
UE¼ÜCode
 
Şd¡©us
 = 
¡©us
;

602 
this
->
fInşudesS‘s
 = 
Ãw
 
	`UVeùÜ
(
¡©us
);

603 ià(
	`U_FAILURE
(
Şd¡©us
)) {

604 
¡©us
 = 
Şd¡©us
;

606 ià(
	`U_FAILURE
(
¡©us
)) {

610 if(
this
->
fInşudesS‘s
 == 0) {

611 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

615 
	}
}

623 
	gRªgeDesütÜ
::~
	$RªgeDesütÜ
() {

624 
d–‘e
 
fInşudesS‘s
;

625 
fInşudesS‘s
 = 
NULL
;

626 
	}
}

633 
	gRªgeDesütÜ
::
	$¥l™
(
UCh¬32
 
wh”e
, 
UE¼ÜCode
 &
¡©us
) {

634 
	`U_ASSERT
(
wh”e
>
fS¹Ch¬
 && wh”e<=
fEndCh¬
);

635 
RªgeDesütÜ
 *
Ä
 = 
Ãw
 
	`RªgeDesütÜ
(*
this
, 
¡©us
);

636 if(
Ä
 == 0) {

637 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

640 ià(
	`U_FAILURE
(
¡©us
)) {

641 
d–‘e
 
Ä
;

646 
Ä
->
fS¹Ch¬
 = 
wh”e
;

647 
this
->
fEndCh¬
 = 
wh”e
-1;

648 
Ä
->
fNext
 = 
this
->fNext;

649 
this
->
fNext
 = 
Ä
;

650 
	}
}

671 
	gRªgeDesütÜ
::
	$£tDiùiÚ¬yFÏg
() {

672 
i
;

674 
i
=0; i<
this
->
fInşudesS‘s
->
	`size
(); i++) {

675 
RBBINode
 *
u£tNode
 = (RBBINod*)
fInşudesS‘s
->
	`–em’tAt
(
i
);

676 
UnicodeSŒšg
 
£tName
;

677 
RBBINode
 *
£tRef
 = 
u£tNode
->
fP¬’t
;

678 ià(
£tRef
 !ğ
NULL
) {

679 
RBBINode
 *
v¬Ref
 = 
£tRef
->
fP¬’t
;

680 ià(
v¬Ref
 !ğ
NULL
 && v¬Ref->
fTy³
 =ğ
RBBINode
::varRef) {

681 
£tName
 = 
v¬Ref
->
fText
;

684 ià(
£tName
.
	`com·»
(
	`UNICODE_STRING
("dictionary", 10)) == 0) {

685 
this
->
fNum
 |= 0x4000;

689 
	}
}

693 
	gU_NAMESPACE_END


	@rbbisetb.h

10 #iâdeà
RBBISETB_H


11 
	#RBBISETB_H


	)

13 
	~"unicode/uty³s.h
"

14 
	~"unicode/uobjeù.h
"

15 
	~"rbbœb.h
"

16 
	~"uveùÜ.h
"

18 
	gUNewTr›
;

20 
U_NAMESPACE_BEGIN


37 şas 
	cRªgeDesütÜ
 : 
public
 
UMemÜy
 {

38 
public
:

39 
UCh¬32
 
fS¹Ch¬
;

40 
UCh¬32
 
	mfEndCh¬
;

41 
št32_t
 
	mfNum
;

42 
UVeùÜ
 *
	mfInşudesS‘s
;

45 
RªgeDesütÜ
 *
	mfNext
;

47 
RªgeDesütÜ
(
UE¼ÜCode
 &
¡©us
);

48 
RªgeDesütÜ
(cÚ¡ RªgeDesütÜ &
Ùh”
, 
UE¼ÜCode
 &
¡©us
);

49 ~
RªgeDesütÜ
();

50 
¥l™
(
UCh¬32
 
wh”e
, 
UE¼ÜCode
 &
¡©us
);

52 
£tDiùiÚ¬yFÏg
();

55 
	m´iv©e
:

56 
RªgeDesütÜ
(cÚ¡ RªgeDesütÜ &
Ùh”
);

57 
	mRªgeDesütÜ
 &
	mİ”©Ü
=(cÚ¡ 
RªgeDesütÜ
 &
Ùh”
);

76 şas 
	cRBBIS‘Bud”
 : 
public
 
UMemÜy
 {

77 
public
:

78 
RBBIS‘Bud”
(
RBBIRuËBud”
 *
rb
);

79 ~
RBBIS‘Bud”
();

81 
bud
();

82 
addV®ToS‘s
(
UVeùÜ
 *
£ts
, 
ušt32_t
 
v®
);

83 
addV®ToS‘
 (
RBBINode
 *
u£tNode
, 
ušt32_t
 
v®
);

84 
št32_t
 
	$g‘NumCh¬C©egÜ›s
() const;

87 
št32_t
 
	`g‘Tr›Size
() ;

88 
	`£rŸlizeTr›
(
ušt8_t
 *
wh”e
);

89 
UCh¬32
 
	$g‘Fœ¡Ch¬
(
št32_t
 
v®
) const;

90 
UBoŞ
 
	$§wBOF
() const;

92 #ifdeà
RBBI_DEBUG


93 
	`´štS‘s
();

94 
	`´štRªges
();

95 
	`´štRªgeGroups
();

97 
	#´štS‘s
()

	)

98 
	#´štRªges
()

	)

99 
	#´štRªgeGroups
()

	)

102 
´iv©e
:

103 
	`numb”S‘s
();

105 
RBBIRuËBud”
 *
fRB
;

106 
UE¼ÜCode
 *
fStus
;

108 
RªgeDesütÜ
 *
fRªgeLi¡
;

110 
UNewTr›
 *
fTr›
;

111 
ušt32_t
 
fTr›Size
;

119 
št32_t
 
fGroupCouÁ
;

121 
UBoŞ
 
fSawBOF
;

123 
	`RBBIS‘Bud”
(cÚ¡ 
RBBIS‘Bud”
 &
Ùh”
);

124 
RBBIS‘Bud”
 &
İ”©Ü
=(cÚ¡ RBBIS‘Bud” &
Ùh”
);

129 
U_NAMESPACE_END


	@rbbistbl.cpp

11 
	~"unicode/uty³s.h
"

13 #ià!
UCONFIG_NO_BREAK_ITERATION


15 
	~"unicode/uni¡r.h
"

16 
	~"unicode/uni£t.h
"

17 
	~"unicode/uch¬.h
"

18 
	~"unicode/·r£pos.h
"

20 
	~"umu‹x.h
"

22 
	~"rbbœb.h
"

23 
	~"rbbšode.h
"

30 
U_CDECL_BEGIN


31 
U_CALLCONV
 
	$RBBISymbŞTabËEÁry_d–‘”
(*
p
) {

32 
U_NAMESPACE_QUALIFIER
 
RBBISymbŞTabËEÁry
 *
px
 = (U_NAMESPACE_QUALIFIER RBBISymbŞTabËEÁry *)
p
;

33 
d–‘e
 
px
;

34 
	}
}

35 
U_CDECL_END


39 
U_NAMESPACE_BEGIN


41 
	gRBBISymbŞTabË
::
	$RBBISymbŞTabË
(
RBBIRuËSÿÂ”
 *
rs
, cÚ¡ 
UnicodeSŒšg
 &
ruËs
, 
UE¼ÜCode
 &
¡©us
)

42 :
	`fRuËs
(
ruËs
), 
	`fRuËSÿÂ”
(
rs
), 
	`ffffSŒšg
(
	$UCh¬
(0xffff))

44 
fHashTabË
 = 
NULL
;

45 
fCachedS‘Lookup
 = 
NULL
;

47 
fHashTabË
 = 
	`uhash_İ’
(
uhash_hashUnicodeSŒšg
, 
uhash_com·»UnicodeSŒšg
, 
NULL
, &
¡©us
);

49 ià(
	`U_FAILURE
(
¡©us
)) {

52 
	`uhash_£tV®ueD–‘”
(
fHashTabË
, 
RBBISymbŞTabËEÁry_d–‘”
);

53 
	}
}

57 
	gRBBISymbŞTabË
::~
	$RBBISymbŞTabË
()

59 
	`uhash_şo£
(
fHashTabË
);

60 
	}
}

70 cÚ¡ 
UnicodeSŒšg
 *
	gRBBISymbŞTabË
::
	$lookup
(cÚ¡ 
UnicodeSŒšg
& 
s
) const

72 
RBBISymbŞTabËEÁry
 *
–
;

73 
RBBINode
 *
v¬RefNode
;

74 
RBBINode
 *
ex´Node
;

75 
RBBINode
 *
u£tNode
;

76 cÚ¡ 
UnicodeSŒšg
 *
»tSŒšg
;

77 
RBBISymbŞTabË
 *
This
 = (RBBISymbŞTabË *)
this
;

79 
–
 = (
RBBISymbŞTabËEÁry
 *)
	`uhash_g‘
(
fHashTabË
, &
s
);

80 ià(
–
 =ğ
NULL
) {

81  
NULL
;

84 
v¬RefNode
 = 
–
->
v®
;

85 
ex´Node
 = 
v¬RefNode
->
fLeáChd
;

86 ià(
ex´Node
->
fTy³
 =ğ
RBBINode
::
£tRef
) {

90 
u£tNode
 = 
ex´Node
->
fLeáChd
;

91 
This
->
fCachedS‘Lookup
 = 
u£tNode
->
fIÅutS‘
;

92 
»tSŒšg
 = &
ffffSŒšg
;

98 
»tSŒšg
 = &
ex´Node
->
fText
;

99 
This
->
fCachedS‘Lookup
 = 
NULL
;

101  
»tSŒšg
;

102 
	}
}

117 cÚ¡ 
UnicodeFunùÜ
 *
	gRBBISymbŞTabË
::
	$lookupM©ch”
(
UCh¬32
 
ch
) const

119 
UnicodeS‘
 *
»tV®
 = 
NULL
;

120 
RBBISymbŞTabË
 *
This
 = (RBBISymbŞTabË *)
this
;

121 ià(
ch
 == 0xffff) {

122 
»tV®
 = 
fCachedS‘Lookup
;

123 
This
->
fCachedS‘Lookup
 = 0;

125  
»tV®
;

126 
	}
}

138 
UnicodeSŒšg
 
	gRBBISymbŞTabË
::
	$·r£Reã»nû
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

139 
P¬£Pos™iÚ
& 
pos
, 
št32_t
 
lim™
) const

141 
št32_t
 
¡¬t
 = 
pos
.
	`g‘Index
();

142 
št32_t
 
i
 = 
¡¬t
;

143 
UnicodeSŒšg
 
»suÉ
;

144 
i
 < 
lim™
) {

145 
UCh¬
 
c
 = 
‹xt
.
	`ch¬At
(
i
);

146 ià((
i
==
¡¬t
 && !
	`u_isIDS¹
(
c
)è|| !
	`u_isIDP¬t
(c)) {

149 ++
i
;

151 ià(
i
 =ğ
¡¬t
) {

152  
»suÉ
;

154 
pos
.
	`£tIndex
(
i
);

155 
‹xt
.
	`exŒaùB‘w“n
(
¡¬t
, 
i
, 
»suÉ
);

156  
»suÉ
;

157 
	}
}

166 
RBBINode
 *
	gRBBISymbŞTabË
::
	$lookupNode
(cÚ¡ 
UnicodeSŒšg
 &
key
) const{

168 
RBBINode
 *
»tNode
 = 
NULL
;

169 
RBBISymbŞTabËEÁry
 *
–
;

171 
–
 = (
RBBISymbŞTabËEÁry
 *)
	`uhash_g‘
(
fHashTabË
, &
key
);

172 ià(
–
 !ğ
NULL
) {

173 
»tNode
 = 
–
->
v®
;

175  
»tNode
;

176 
	}
}

185 
	gRBBISymbŞTabË
::
	$addEÁry
 (cÚ¡ 
UnicodeSŒšg
 &
key
, 
RBBINode
 *
v®
, 
UE¼ÜCode
 &
”r
) {

186 
RBBISymbŞTabËEÁry
 *
e
;

188 ià(
	`U_FAILURE
(
”r
)) {

191 
e
 = (
RBBISymbŞTabËEÁry
 *)
	`uhash_g‘
(
fHashTabË
, &
key
);

192 ià(
e
 !ğ
NULL
) {

193 
”r
 = 
U_BRK_VARIABLE_REDFINITION
;

197 
e
 = 
Ãw
 
RBBISymbŞTabËEÁry
;

198 ià(
e
 =ğ
NULL
) {

199 
”r
 = 
U_MEMORY_ALLOCATION_ERROR
;

202 
e
->
key
 = key;

203 
e
->
v®
 = val;

204 
	`uhash_put
Ğ
fHashTabË
, &
e
->
key
,ƒ, &
”r
);

205 
	}
}

208 
	gRBBISymbŞTabËEÁry
::
	$RBBISymbŞTabËEÁry
(è: 
	`UMemÜy
(), 
	`key
(), 
	$v®
(
NULL
è{
	}
}

210 
	gRBBISymbŞTabËEÁry
::~
	$RBBISymbŞTabËEÁry
() {

215 
d–‘e
 
v®
->
fLeáChd
;

216 
v®
->
fLeáChd
 = 
NULL
;

218 
d–‘e
 
v®
;

221 
	}
}

227 #ifdeà
RBBI_DEBUG


228 
	gRBBISymbŞTabË
::
	$rbbiSymbËPršt
() const {

229 
	`RBBIDebugPrštf
("Variable Definitions\n"

233 
št32_t
 
pos
 = -1;

234 cÚ¡ 
UHashEËm’t
 *
e
 = 
NULL
;

236 
e
 = 
	`uhash_ÃxtEËm’t
(
fHashTabË
, &
pos
);

237 ià(
e
 =ğ
NULL
 ) {

240 
RBBISymbŞTabËEÁry
 *
s
 = (RBBISymbŞTabËEÁry *)
e
->
v®ue
.
poš‹r
;

242 
	`RBBI_DEBUG_´štUnicodeSŒšg
(
s
->
key
, 15);

243 
	`RBBIDebugPrštf
(" %8° ", (*)
s
->
v®
);

244 
	`RBBI_DEBUG_´štUnicodeSŒšg
(
s
->
v®
->
fLeáChd
->
fText
);

245 
	`RBBIDebugPrštf
("\n");

248 
	`RBBIDebugPrštf
("\nParsed Variable Definitions\n");

249 
pos
 = -1;

251 
e
 = 
	`uhash_ÃxtEËm’t
(
fHashTabË
, &
pos
);

252 ià(
e
 =ğ
NULL
 ) {

255 
RBBISymbŞTabËEÁry
 *
s
 = (RBBISymbŞTabËEÁry *)
e
->
v®ue
.
poš‹r
;

256 
	`RBBI_DEBUG_´štUnicodeSŒšg
(
s
->
key
);

257 
s
->
v®
->
fLeáChd
->
	`´štT»e
(
TRUE
);

258 
	`RBBIDebugPrštf
("\n");

260 
	}
}

267 
	gU_NAMESPACE_END


	@rbbitblb.cpp

12 
	~"unicode/uty³s.h
"

14 #ià!
UCONFIG_NO_BREAK_ITERATION


16 
	~"unicode/uni¡r.h
"

17 
	~"rbb™blb.h
"

18 
	~"rbbœb.h
"

19 
	~"rbbi£tb.h
"

20 
	~"rbbid©a.h
"

21 
	~"c¡ršg.h
"

22 
	~"uas£¹.h
"

23 
	~"cmemÜy.h
"

25 
U_NAMESPACE_BEGIN


27 
	gRBBITabËBud”
::
	$RBBITabËBud”
(
RBBIRuËBud”
 *
rb
, 
RBBINode
 **
roÙNode
) :

28 
	$fT»e
(*
roÙNode
) {

29 
fRB
 = 
rb
;

30 
fStus
 = 
fRB
->fStatus;

31 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

32 
fDS‹s
 = 
Ãw
 
	`UVeùÜ
(
¡©us
);

33 ià(
	`U_FAILURE
(*
fStus
)) {

36 ià(
	`U_FAILURE
(
¡©us
)) {

37 *
fStus
 = 
¡©us
;

40 ià(
fDS‹s
 =ğ
NULL
) {

41 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;;

43 
	}
}

47 
	gRBBITabËBud”
::~
	$RBBITabËBud”
() {

48 
i
;

49 
i
=0; i<
fDS‹s
->
	`size
(); i++) {

50 
	`d–‘e
 (
RBBIS‹DesütÜ
 *)
fDS‹s
->
	`–em’tAt
(
i
);

52 
d–‘e
 
fDS‹s
;

53 
	}
}

62 
	gRBBITabËBud”
::
	$bud
() {

64 ià(
	`U_FAILURE
(*
fStus
)) {

70 ià(
fT»e
==
NULL
) {

78 
fT»e
 = fT»e->
	`æ©‹nV¬ŸbËs
();

79 #ifdeà
RBBI_DEBUG


80 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "ftree")) {

81 
	`RBBIDebugPuts
("Parseree‡fter flattening variable„eferences.");

82 
fT»e
->
	`´štT»e
(
TRUE
);

92 ià(
fRB
->
fS‘Bud”
->
	`§wBOF
()) {

93 
RBBINode
 *
bofTİ
 = 
Ãw
 
	`RBBINode
(RBBINode::
İC©
);

94 
RBBINode
 *
bofL—f
 = 
Ãw
 
	`RBBINode
(RBBINode::
ËafCh¬
);

96 ià(
bofTİ
 =ğ
NULL
 || 
bofL—f
 == NULL) {

97 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

98 
d–‘e
 
bofTİ
;

99 
d–‘e
 
bofL—f
;

102 
bofTİ
->
fLeáChd
 = 
bofL—f
;

103 
bofTİ
->
fRightChd
 = 
fT»e
;

104 
bofL—f
->
fP¬’t
 = 
bofTİ
;

105 
bofL—f
->
fV®
 = 2;

106 
fT»e
 = 
bofTİ
;

114 
RBBINode
 *
ú
 = 
Ãw
 
	`RBBINode
(RBBINode::
İC©
);

116 ià(
ú
 =ğ
NULL
) {

117 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

120 
ú
->
fLeáChd
 = 
fT»e
;

121 
fT»e
->
fP¬’t
 = 
ú
;

122 
ú
->
fRightChd
 = 
Ãw
 
	`RBBINode
(
RBBINode
::
’dM¬k
);

124 ià(
ú
->
fRightChd
 =ğ
NULL
) {

125 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

126 
d–‘e
 
ú
;

129 
ú
->
fRightChd
->
fP¬’t
 = cn;

130 
fT»e
 = 
ú
;

136 
fT»e
->
	`æ©‹nS‘s
();

137 #ifdeà
RBBI_DEBUG


138 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "stree")) {

139 
	`RBBIDebugPuts
("Parseree‡fter flattening Unicode Set„eferences.");

140 
fT»e
->
	`´štT»e
(
TRUE
);

152 
	`ÿlcNuÎabË
(
fT»e
);

153 
	`ÿlcFœ¡Pos
(
fT»e
);

154 
	`ÿlcLa¡Pos
(
fT»e
);

155 
	`ÿlcFŞlowPos
(
fT»e
);

156 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "pos")) {

157 
	`RBBIDebugPuts
("\n");

158 
	`´štPosS‘s
(
fT»e
);

164 ià(
fRB
->
fChašRuËs
) {

165 
	`ÿlcChašedFŞlowPos
(
fT»e
);

171 ià(
fRB
->
fS‘Bud”
->
	`§wBOF
()) {

172 
	`bofFixup
();

178 
	`budS‹TabË
();

179 
	`æagAcû±šgS‹s
();

180 
	`æagLookAh—dS‹s
();

181 
	`æagTaggedS‹s
();

188 
	`m”geRuËStusV®s
();

190 ià(
fRB
->
fDebugEnv
 && 
	`u´v_¡r¡r
(fRB->fDebugEnv, "¡©es")è{
	`´štS‹s
();};

191 
	}
}

200 
	gRBBITabËBud”
::
	$ÿlcNuÎabË
(
RBBINode
 *
n
) {

201 ià(
n
 =ğ
NULL
) {

204 ià(
n
->
fTy³
 =ğ
RBBINode
::
£tRef
 ||

205 
n
->
fTy³
 =ğ
RBBINode
::
’dM¬k
 ) {

207 
n
->
fNuÎabË
 = 
FALSE
;

211 ià(
n
->
fTy³
 =ğ
RBBINode
::
lookAh—d
 ||‚->fTy³ =ğRBBINode::
g
) {

214 
n
->
fNuÎabË
 = 
TRUE
;

221 
	`ÿlcNuÎabË
(
n
->
fLeáChd
);

222 
	`ÿlcNuÎabË
(
n
->
fRightChd
);

225 ià(
n
->
fTy³
 =ğ
RBBINode
::
İOr
) {

226 
n
->
fNuÎabË
 =‚->
fLeáChd
->fNuÎabË ||‚->
fRightChd
->fNullable;

228 ià(
n
->
fTy³
 =ğ
RBBINode
::
İC©
) {

229 
n
->
fNuÎabË
 =‚->
fLeáChd
->fNuÎabË &&‚->
fRightChd
->fNullable;

231 ià(
n
->
fTy³
 =ğ
RBBINode
::
İSr
 ||‚->fTy³ =ğRBBINode::
İQue¡iÚ
) {

232 
n
->
fNuÎabË
 = 
TRUE
;

235 
n
->
fNuÎabË
 = 
FALSE
;

237 
	}
}

247 
	gRBBITabËBud”
::
	$ÿlcFœ¡Pos
(
RBBINode
 *
n
) {

248 ià(
n
 =ğ
NULL
) {

251 ià(
n
->
fTy³
 =ğ
RBBINode
::
ËafCh¬
 ||

252 
n
->
fTy³
 =ğ
RBBINode
::
’dM¬k
 ||

253 
n
->
fTy³
 =ğ
RBBINode
::
lookAh—d
 ||

254 
n
->
fTy³
 =ğ
RBBINode
::
g
) {

259 
n
->
fFœ¡PosS‘
->
	`addEËm’t
Ò, *
fStus
);

265 
	`ÿlcFœ¡Pos
(
n
->
fLeáChd
);

266 
	`ÿlcFœ¡Pos
(
n
->
fRightChd
);

269 ià(
n
->
fTy³
 =ğ
RBBINode
::
İOr
) {

270 
	`£tAdd
(
n
->
fFœ¡PosS‘
,‚->
fLeáChd
->fFirstPosSet);

271 
	`£tAdd
(
n
->
fFœ¡PosS‘
,‚->
fRightChd
->fFirstPosSet);

273 ià(
n
->
fTy³
 =ğ
RBBINode
::
İC©
) {

274 
	`£tAdd
(
n
->
fFœ¡PosS‘
,‚->
fLeáChd
->fFirstPosSet);

275 ià(
n
->
fLeáChd
->
fNuÎabË
) {

276 
	`£tAdd
(
n
->
fFœ¡PosS‘
,‚->
fRightChd
->fFirstPosSet);

279 ià(
n
->
fTy³
 =ğ
RBBINode
::
İSr
 ||

280 
n
->
fTy³
 =ğ
RBBINode
::
İQue¡iÚ
 ||

281 
n
->
fTy³
 =ğ
RBBINode
::
İPlus
) {

282 
	`£tAdd
(
n
->
fFœ¡PosS‘
,‚->
fLeáChd
->fFirstPosSet);

284 
	}
}

293 
	gRBBITabËBud”
::
	$ÿlcLa¡Pos
(
RBBINode
 *
n
) {

294 ià(
n
 =ğ
NULL
) {

297 ià(
n
->
fTy³
 =ğ
RBBINode
::
ËafCh¬
 ||

298 
n
->
fTy³
 =ğ
RBBINode
::
’dM¬k
 ||

299 
n
->
fTy³
 =ğ
RBBINode
::
lookAh—d
 ||

300 
n
->
fTy³
 =ğ
RBBINode
::
g
) {

305 
n
->
fLa¡PosS‘
->
	`addEËm’t
Ò, *
fStus
);

311 
	`ÿlcLa¡Pos
(
n
->
fLeáChd
);

312 
	`ÿlcLa¡Pos
(
n
->
fRightChd
);

315 ià(
n
->
fTy³
 =ğ
RBBINode
::
İOr
) {

316 
	`£tAdd
(
n
->
fLa¡PosS‘
,‚->
fLeáChd
->fLastPosSet);

317 
	`£tAdd
(
n
->
fLa¡PosS‘
,‚->
fRightChd
->fLastPosSet);

319 ià(
n
->
fTy³
 =ğ
RBBINode
::
İC©
) {

320 
	`£tAdd
(
n
->
fLa¡PosS‘
,‚->
fRightChd
->fLastPosSet);

321 ià(
n
->
fRightChd
->
fNuÎabË
) {

322 
	`£tAdd
(
n
->
fLa¡PosS‘
,‚->
fLeáChd
->fLastPosSet);

325 ià(
n
->
fTy³
 =ğ
RBBINode
::
İSr
 ||

326 
n
->
fTy³
 =ğ
RBBINode
::
İQue¡iÚ
 ||

327 
n
->
fTy³
 =ğ
RBBINode
::
İPlus
) {

328 
	`£tAdd
(
n
->
fLa¡PosS‘
,‚->
fLeáChd
->fLastPosSet);

330 
	}
}

339 
	gRBBITabËBud”
::
	$ÿlcFŞlowPos
(
RBBINode
 *
n
) {

340 ià(
n
 =ğ
NULL
 ||

341 
n
->
fTy³
 =ğ
RBBINode
::
ËafCh¬
 ||

342 
n
->
fTy³
 =ğ
RBBINode
::
’dM¬k
) {

346 
	`ÿlcFŞlowPos
(
n
->
fLeáChd
);

347 
	`ÿlcFŞlowPos
(
n
->
fRightChd
);

350 ià(
n
->
fTy³
 =ğ
RBBINode
::
İC©
) {

351 
RBBINode
 *
i
;

352 
ušt32_t
 
ix
;

354 
UVeùÜ
 *
La¡PosOfLeáChd
 = 
n
->
fLeáChd
->
fLa¡PosS‘
;

356 
ix
=0; ix<(
ušt32_t
)
La¡PosOfLeáChd
->
	`size
(); ix++) {

357 
i
 = (
RBBINode
 *)
La¡PosOfLeáChd
->
	`–em’tAt
(
ix
);

358 
	`£tAdd
(
i
->
fFŞlowPos
, 
n
->
fRightChd
->
fFœ¡PosS‘
);

363 ià(
n
->
fTy³
 =ğ
RBBINode
::
İSr
 ||

364 
n
->
fTy³
 =ğ
RBBINode
::
İPlus
) {

365 
RBBINode
 *
i
;

366 
ušt32_t
 
ix
;

368 
ix
=0; ix<(
ušt32_t
)
n
->
fLa¡PosS‘
->
	`size
(); ix++) {

369 
i
 = (
RBBINode
 *)
n
->
fLa¡PosS‘
->
	`–em’tAt
(
ix
);

370 
	`£tAdd
(
i
->
fFŞlowPos
, 
n
->
fFœ¡PosS‘
);

376 
	}
}

385 
	gRBBITabËBud”
::
	$ÿlcChašedFŞlowPos
(
RBBINode
 *
Œ“
) {

387 
UVeùÜ
 
	`’dM¬k”Nodes
(*
fStus
);

388 
UVeùÜ
 
	`ËafNodes
(*
fStus
);

389 
št32_t
 
i
;

391 ià(
	`U_FAILURE
(*
fStus
)) {

396 
Œ“
->
	`fšdNodes
(&
’dM¬k”Nodes
, 
RBBINode
::
’dM¬k
, *
fStus
);

399 
Œ“
->
	`fšdNodes
(&
ËafNodes
, 
RBBINode
::
ËafCh¬
, *
fStus
);

400 ià(
	`U_FAILURE
(*
fStus
)) {

407 
RBBINode
 *
u£rRuËRoÙ
 = 
Œ“
;

408 ià(
fRB
->
fS‘Bud”
->
	`§wBOF
()) {

409 
u£rRuËRoÙ
 = 
Œ“
->
fLeáChd
->
fRightChd
;

411 
	`U_ASSERT
(
u£rRuËRoÙ
 !ğ
NULL
);

412 
UVeùÜ
 *
m©chS¹Nodes
 = 
u£rRuËRoÙ
->
fFœ¡PosS‘
;

417 
št32_t
 
’dNodeIx
;

418 
št32_t
 
¡¬tNodeIx
;

420 
’dNodeIx
=0;ƒndNodeIx<
ËafNodes
.
	`size
();ƒndNodeIx++) {

421 
RBBINode
 *
tNode
 = (RBBINod*)
ËafNodes
.
	`–em’tAt
(
’dNodeIx
);

422 
RBBINode
 *
’dNode
 = 
NULL
;

426 
i
=0; i<
’dM¬k”Nodes
.
	`size
(); i++) {

427 ià(
tNode
->
fFŞlowPos
->
	`cÚšs
(
’dM¬k”Nodes
.
	`–em’tAt
(
i
))) {

428 
’dNode
 = 
tNode
;

432 ià(
’dNode
 =ğ
NULL
) {

443 ià(
fRB
->
fLBCMNoChaš
) {

444 
UCh¬32
 
c
 = 
this
->
fRB
->
fS‘Bud”
->
	`g‘Fœ¡Ch¬
(
’dNode
->
fV®
);

445 ià(
c
 != -1) {

447 
ULšeB»ak
 
cLBPrİ
 = (ULšeB»ak)
	`u_g‘IÁPrİ”tyV®ue
(
c
, 
UCHAR_LINE_BREAK
);

448 ià(
cLBPrİ
 =ğ
U_LB_COMBINING_MARK
) {

457 
RBBINode
 *
¡¬tNode
;

458 
¡¬tNodeIx
 = 0; s¹NodeIx<
m©chS¹Nodes
->
	`size
(); startNodeIx++) {

459 
¡¬tNode
 = (
RBBINode
 *)
m©chS¹Nodes
->
	`–em’tAt
(
¡¬tNodeIx
);

460 ià(
¡¬tNode
->
fTy³
 !ğ
RBBINode
::
ËafCh¬
) {

464 ià(
’dNode
->
fV®
 =ğ
¡¬tNode
->fVal) {

472 
	`£tAdd
(
’dNode
->
fFŞlowPos
, 
¡¬tNode
->fFollowPos);

476 
	}
}

489 
	gRBBITabËBud”
::
	$bofFixup
() {

491 ià(
	`U_FAILURE
(*
fStus
)) {

505 
RBBINode
 *
bofNode
 = 
fT»e
->
fLeáChd
->fLeftChild;

506 
	`U_ASSERT
(
bofNode
->
fTy³
 =ğ
RBBINode
::
ËafCh¬
);

507 
	`U_ASSERT
(
bofNode
->
fV®
 == 2);

514 
UVeùÜ
 *
m©chS¹Nodes
 = 
fT»e
->
fLeáChd
->
fRightChd
->
fFœ¡PosS‘
;

516 
RBBINode
 *
¡¬tNode
;

517 
¡¬tNodeIx
;

518 
¡¬tNodeIx
 = 0; s¹NodeIx<
m©chS¹Nodes
->
	`size
(); startNodeIx++) {

519 
¡¬tNode
 = (
RBBINode
 *)
m©chS¹Nodes
->
	`–em’tAt
(
¡¬tNodeIx
);

520 ià(
¡¬tNode
->
fTy³
 !ğ
RBBINode
::
ËafCh¬
) {

524 ià(
¡¬tNode
->
fV®
 =ğ
bofNode
->fVal) {

530 
	`£tAdd
(
bofNode
->
fFŞlowPos
, 
¡¬tNode
->fFollowPos);

533 
	}
}

544 
	gRBBITabËBud”
::
	$budS‹TabË
() {

545 ià(
	`U_FAILURE
(*
fStus
)) {

548 
RBBIS‹DesütÜ
 *
çS‹
;

550 
RBBIS‹DesütÜ
 *
š™ŸlS‹
 = 
NULL
;

553 
Ï¡IÅutSymbŞ
 = 
fRB
->
fS‘Bud”
->
	`g‘NumCh¬C©egÜ›s
() - 1;

554 
çS‹
 = 
Ãw
 
	`RBBIS‹DesütÜ
(
Ï¡IÅutSymbŞ
, 
fStus
);

555 ià(
çS‹
 =ğ
NULL
) {

556 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

557 
Ex™BudSTd–‘—Î
;

559 
çS‹
->
fPos™iÚs
 = 
Ãw
 
	`UVeùÜ
(*
fStus
);

560 ià(
çS‹
->
fPos™iÚs
 =ğ
NULL
) {

561 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

563 ià(
çS‹
->
fPos™iÚs
 =ğ
NULL
 || 
	`U_FAILURE
(*
fStus
)) {

564 
Ex™BudSTd–‘—Î
;

566 
fDS‹s
->
	`addEËm’t
(
çS‹
, *
fStus
);

567 ià(
	`U_FAILURE
(*
fStus
)) {

568 
Ex™BudSTd–‘—Î
;

573 
š™ŸlS‹
 = 
Ãw
 
	`RBBIS‹DesütÜ
(
Ï¡IÅutSymbŞ
, 
fStus
);

574 ià(
š™ŸlS‹
 =ğ
NULL
) {

575 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

577 ià(
	`U_FAILURE
(*
fStus
)) {

578 
Ex™BudSTd–‘—Î
;

580 
š™ŸlS‹
->
fPos™iÚs
 = 
Ãw
 
	`UVeùÜ
(*
fStus
);

581 ià(
š™ŸlS‹
->
fPos™iÚs
 =ğ
NULL
) {

582 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

584 ià(
	`U_FAILURE
(*
fStus
)) {

585 
Ex™BudSTd–‘—Î
;

587 
	`£tAdd
(
š™ŸlS‹
->
fPos™iÚs
, 
fT»e
->
fFœ¡PosS‘
);

588 
fDS‹s
->
	`addEËm’t
(
š™ŸlS‹
, *
fStus
);

589 ià(
	`U_FAILURE
(*
fStus
)) {

590 
Ex™BudSTd–‘—Î
;

595 
RBBIS‹DesütÜ
 *
T
 = 
NULL
;

596 
št32_t
 
tx
;

597 
tx
=1;x<
fDS‹s
->
	`size
();x++) {

598 
RBBIS‹DesütÜ
 *
‹mp
;

599 
‹mp
 = (
RBBIS‹DesütÜ
 *)
fDS‹s
->
	`–em’tAt
(
tx
);

600 ià(
‹mp
->
fM¬ked
 =ğ
FALSE
) {

601 
T
 = 
‹mp
;

605 ià(
T
 =ğ
NULL
) {

610 
T
->
fM¬ked
 = 
TRUE
;

613 
št32_t
 
a
;

614 
a
 = 1;‡<=
Ï¡IÅutSymbŞ
;‡++) {

618 
UVeùÜ
 *
U
 = 
NULL
;

619 
RBBINode
 *
p
;

620 
št32_t
 
px
;

621 
px
=0;…x<
T
->
fPos™iÚs
->
	`size
();…x++) {

622 
p
 = (
RBBINode
 *)
T
->
fPos™iÚs
->
	`–em’tAt
(
px
);

623 ià((
p
->
fTy³
 =ğ
RBBINode
::
ËafCh¬
è&& (p->
fV®
 =ğ
a
)) {

624 ià(
U
 =ğ
NULL
) {

625 
U
 = 
Ãw
 
	`UVeùÜ
(*
fStus
);

626 ià(
U
 =ğ
NULL
) {

627 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

628 
Ex™BudSTd–‘—Î
;

631 
	`£tAdd
(
U
, 
p
->
fFŞlowPos
);

636 
št32_t
 
ux
 = 0;

637 
UBoŞ
 
UšD¡©es
 = 
FALSE
;

638 ià(
U
 !ğ
NULL
) {

639 
	`U_ASSERT
(
U
->
	`size
() > 0);

640 
ix
;

641 
ix
=0; ix<
fDS‹s
->
	`size
(); ix++) {

642 
RBBIS‹DesütÜ
 *
‹mp2
;

643 
‹mp2
 = (
RBBIS‹DesütÜ
 *)
fDS‹s
->
	`–em’tAt
(
ix
);

644 ià(
	`£tEqu®s
(
U
, 
‹mp2
->
fPos™iÚs
)) {

645 
d–‘e
 
U
;

646 
U
 = 
‹mp2
->
fPos™iÚs
;

647 
ux
 = 
ix
;

648 
UšD¡©es
 = 
TRUE
;

654 ià(!
UšD¡©es
)

656 
RBBIS‹DesütÜ
 *
ÃwS‹
 = 
Ãw
 
	`RBBIS‹DesütÜ
(
Ï¡IÅutSymbŞ
, 
fStus
);

657 ià(
ÃwS‹
 =ğ
NULL
) {

658 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

660 ià(
	`U_FAILURE
(*
fStus
)) {

661 
Ex™BudSTd–‘—Î
;

663 
ÃwS‹
->
fPos™iÚs
 = 
U
;

664 
fDS‹s
->
	`addEËm’t
(
ÃwS‹
, *
fStus
);

665 ià(
	`U_FAILURE
(*
fStus
)) {

668 
ux
 = 
fDS‹s
->
	`size
()-1;

672 
T
->
fDŒª
->
	`£tEËm’tAt
(
ux
, 
a
);

678 
Ex™BudSTd–‘—Î
:

679 
d–‘e
 
š™ŸlS‹
;

680 
d–‘e
 
çS‹
;

681 
	}
}

694 
	gRBBITabËBud”
::
	$æagAcû±šgS‹s
() {

695 ià(
	`U_FAILURE
(*
fStus
)) {

698 
UVeùÜ
 
	`’dM¬k”Nodes
(*
fStus
);

699 
RBBINode
 *
’dM¬k”
;

700 
št32_t
 
i
;

701 
št32_t
 
n
;

703 ià(
	`U_FAILURE
(*
fStus
)) {

707 
fT»e
->
	`fšdNodes
(&
’dM¬k”Nodes
, 
RBBINode
::
’dM¬k
, *
fStus
);

708 ià(
	`U_FAILURE
(*
fStus
)) {

712 
i
=0; i<
’dM¬k”Nodes
.
	`size
(); i++) {

713 
’dM¬k”
 = (
RBBINode
 *)
’dM¬k”Nodes
.
	`–em’tAt
(
i
);

714 
n
=0;‚<
fDS‹s
->
	`size
();‚++) {

715 
RBBIS‹DesütÜ
 *
sd
 = (RBBIS‹DesütÜ *)
fDS‹s
->
	`–em’tAt
(
n
);

716 ià(
sd
->
fPos™iÚs
->
	`šdexOf
(
’dM¬k”
) >= 0) {

721 ià(
sd
->
fAcû±šg
==0) {

723 
sd
->
fAcû±šg
 = 
’dM¬k”
->
fV®
;

724 ià(
sd
->
fAcû±šg
 == 0) {

725 
sd
->
fAcû±šg
 = -1;

728 ià(
sd
->
fAcû±šg
==-1 && 
’dM¬k”
->
fV®
 != 0) {

732 
sd
->
fAcû±šg
 = 
’dM¬k”
->
fV®
;

739 ià(
’dM¬k”
->
fLookAh—dEnd
) {

743 
sd
->
fLookAh—d
 = sd->
fAcû±šg
;

748 
	}
}

756 
	gRBBITabËBud”
::
	$æagLookAh—dS‹s
() {

757 ià(
	`U_FAILURE
(*
fStus
)) {

760 
UVeùÜ
 
	`lookAh—dNodes
(*
fStus
);

761 
RBBINode
 *
lookAh—dNode
;

762 
št32_t
 
i
;

763 
št32_t
 
n
;

765 
fT»e
->
	`fšdNodes
(&
lookAh—dNodes
, 
RBBINode
::
lookAh—d
, *
fStus
);

766 ià(
	`U_FAILURE
(*
fStus
)) {

769 
i
=0; i<
lookAh—dNodes
.
	`size
(); i++) {

770 
lookAh—dNode
 = (
RBBINode
 *)
lookAh—dNodes
.
	`–em’tAt
(
i
);

772 
n
=0;‚<
fDS‹s
->
	`size
();‚++) {

773 
RBBIS‹DesütÜ
 *
sd
 = (RBBIS‹DesütÜ *)
fDS‹s
->
	`–em’tAt
(
n
);

774 ià(
sd
->
fPos™iÚs
->
	`šdexOf
(
lookAh—dNode
) >= 0) {

775 
sd
->
fLookAh—d
 = 
lookAh—dNode
->
fV®
;

779 
	}
}

789 
	gRBBITabËBud”
::
	$æagTaggedS‹s
() {

790 ià(
	`U_FAILURE
(*
fStus
)) {

793 
UVeùÜ
 
	`gNodes
(*
fStus
);

794 
RBBINode
 *
gNode
;

795 
št32_t
 
i
;

796 
št32_t
 
n
;

798 ià(
	`U_FAILURE
(*
fStus
)) {

801 
fT»e
->
	`fšdNodes
(&
gNodes
, 
RBBINode
::
g
, *
fStus
);

802 ià(
	`U_FAILURE
(*
fStus
)) {

805 
i
=0; i<
gNodes
.
	`size
(); i++) {

806 
gNode
 = (
RBBINode
 *)
gNodes
.
	`–em’tAt
(
i
);

808 
n
=0;‚<
fDS‹s
->
	`size
();‚++) {

809 
RBBIS‹DesütÜ
 *
sd
 = (RBBIS‹DesütÜ *)
fDS‹s
->
	`–em’tAt
(
n
);

810 ià(
sd
->
fPos™iÚs
->
	`šdexOf
(
gNode
) >= 0) {

811 
	`sÜ‹dAdd
(&
sd
->
fTagV®s
, 
gNode
->
fV®
);

815 
	}
}

829 
	gRBBITabËBud”
::
	$m”geRuËStusV®s
() {

840 
i
;

841 
n
;

845 ià(
fRB
->
fRuËStusV®s
->
	`size
() == 0) {

846 
fRB
->
fRuËStusV®s
->
	`addEËm’t
(1, *
fStus
);

847 
fRB
->
fRuËStusV®s
->
	`addEËm’t
((
št32_t
)0, *
fStus
);

851 
n
=0;‚<
fDS‹s
->
	`size
();‚++) {

852 
RBBIS‹DesütÜ
 *
sd
 = (RBBIS‹DesütÜ *)
fDS‹s
->
	`–em’tAt
(
n
);

853 
UVeùÜ
 *
thisS‹sTagV®ues
 = 
sd
->
fTagV®s
;

854 ià(
thisS‹sTagV®ues
 =ğ
NULL
) {

857 
sd
->
fTagsIdx
 = 0;

864 
sd
->
fTagsIdx
 = -1;

865 
št32_t
 
thisTagGroupS¹
 = 0;

866 
št32_t
 
ÃxtTagGroupS¹
 = 0;

869 
ÃxtTagGroupS¹
 < 
fRB
->
fRuËStusV®s
->
	`size
()) {

870 
thisTagGroupS¹
 = 
ÃxtTagGroupS¹
;

871 
ÃxtTagGroupS¹
 +ğ
fRB
->
fRuËStusV®s
->
	`–em’tAti
(
thisTagGroupS¹
) + 1;

872 ià(
thisS‹sTagV®ues
->
	`size
(è!ğ
fRB
->
fRuËStusV®s
->
	`–em’tAti
(
thisTagGroupS¹
)) {

880 
i
=0; i<
thisS‹sTagV®ues
->
	`size
(); i++) {

881 ià(
thisS‹sTagV®ues
->
	`–em’tAti
(
i
) !=

882 
fRB
->
fRuËStusV®s
->
	`–em’tAti
(
thisTagGroupS¹
 + 1 + 
i
) ) {

888 ià(
i
 =ğ
thisS‹sTagV®ues
->
	`size
()) {

891 
sd
->
fTagsIdx
 = 
thisTagGroupS¹
;

896 ià(
sd
->
fTagsIdx
 == -1) {

898 
sd
->
fTagsIdx
 = 
fRB
->
fRuËStusV®s
->
	`size
();

899 
fRB
->
fRuËStusV®s
->
	`addEËm’t
(
thisS‹sTagV®ues
->
	`size
(), *
fStus
);

900 
i
=0; i<
thisS‹sTagV®ues
->
	`size
(); i++) {

901 
fRB
->
fRuËStusV®s
->
	`addEËm’t
(
thisS‹sTagV®ues
->
	`–em’tAti
(
i
), *
fStus
);

905 
	}
}

921 
	gRBBITabËBud”
::
	$sÜ‹dAdd
(
UVeùÜ
 **
veùÜ
, 
št32_t
 
v®
) {

922 
št32_t
 
i
;

924 ià(*
veùÜ
 =ğ
NULL
) {

925 *
veùÜ
 = 
Ãw
 
	`UVeùÜ
(*
fStus
);

927 ià(*
veùÜ
 =ğ
NULL
 || 
	`U_FAILURE
(*
fStus
)) {

930 
UVeùÜ
 *
vec
 = *
veùÜ
;

931 
št32_t
 
vSize
 = 
vec
->
	`size
();

932 
i
=0; i<
vSize
; i++) {

933 
št32_t
 
v®AtI
 = 
vec
->
	`–em’tAti
(
i
);

934 ià(
v®AtI
 =ğ
v®
) {

938 ià(
v®AtI
 > 
v®
) {

942 
vec
->
	`š£¹EËm’tAt
(
v®
, 
i
, *
fStus
);

943 
	}
}

954 
	gRBBITabËBud”
::
	$£tAdd
(
UVeùÜ
 *
de¡
, UVeùÜ *
sourû
) {

955 
št32_t
 
de¡Origš®Size
 = 
de¡
->
	`size
();

956 
št32_t
 
sourûSize
 = 
sourû
->
	`size
();

957 
št32_t
 
di
 = 0;

958 
MaybeSckA¼ay
<*, 16> 
de¡A¼ay
, 
sourûA¼ay
;

959 **
de¡PŒ
, **
sourûPŒ
;

960 **
de¡Lim
, **
sourûLim
;

962 ià(
de¡Origš®Size
 > 
de¡A¼ay
.
	`g‘C­ac™y
()) {

963 ià(
de¡A¼ay
.
	`»size
(
de¡Origš®Size
è=ğ
NULL
) {

967 
de¡PŒ
 = 
de¡A¼ay
.
	`g‘AlŸs
();

968 
de¡Lim
 = 
de¡PŒ
 + 
de¡Origš®Size
;

970 ià(
sourûSize
 > 
sourûA¼ay
.
	`g‘C­ac™y
()) {

971 ià(
sourûA¼ay
.
	`»size
(
sourûSize
è=ğ
NULL
) {

975 
sourûPŒ
 = 
sourûA¼ay
.
	`g‘AlŸs
();

976 
sourûLim
 = 
sourûPŒ
 + 
sourûSize
;

979 (è
de¡
->
	`toA¼ay
(
de¡PŒ
);

980 (è
sourû
->
	`toA¼ay
(
sourûPŒ
);

982 
de¡
->
	`£tSize
(
sourûSize
+
de¡Origš®Size
, *
fStus
);

984 
sourûPŒ
 < 
sourûLim
 && 
de¡PŒ
 < 
de¡Lim
) {

985 ià(*
de¡PŒ
 =ğ*
sourûPŒ
) {

986 
de¡
->
	`£tEËm’tAt
(*
sourûPŒ
++, 
di
++);

987 
de¡PŒ
++;

991 ià(
	`u´v_memcmp
(
de¡PŒ
, 
sourûPŒ
, (*)) < 0) {

992 
de¡
->
	`£tEËm’tAt
(*
de¡PŒ
++, 
di
++);

995 
de¡
->
	`£tEËm’tAt
(*
sourûPŒ
++, 
di
++);

1000 
de¡PŒ
 < 
de¡Lim
) {

1001 
de¡
->
	`£tEËm’tAt
(*
de¡PŒ
++, 
di
++);

1003 
sourûPŒ
 < 
sourûLim
) {

1004 
de¡
->
	`£tEËm’tAt
(*
sourûPŒ
++, 
di
++);

1007 
de¡
->
	`£tSize
(
di
, *
fStus
);

1008 
	}
}

1019 
UBoŞ
 
	gRBBITabËBud”
::
	$£tEqu®s
(
UVeùÜ
 *
a
, UVeùÜ *
b
) {

1020  
a
->
	`equ®s
(*
b
);

1021 
	}
}

1030 #ifdeà
RBBI_DEBUG


1031 
	gRBBITabËBud”
::
	$´štPosS‘s
(
RBBINode
 *
n
) {

1032 ià(
n
==
NULL
) {

1035 
n
->
	`´štNode
();

1036 
	`RBBIDebugPrštf
(" NuÎabË: %s\n", 
n
->
fNuÎabË
?"TRUE":"FALSE");

1038 
	`RBBIDebugPrštf
(" firstpos: ");

1039 
	`´štS‘
(
n
->
fFœ¡PosS‘
);

1041 
	`RBBIDebugPrštf
("†astpos: ");

1042 
	`´štS‘
(
n
->
fLa¡PosS‘
);

1044 
	`RBBIDebugPrštf
(" followpos: ");

1045 
	`´štS‘
(
n
->
fFŞlowPos
);

1047 
	`´štPosS‘s
(
n
->
fLeáChd
);

1048 
	`´štPosS‘s
(
n
->
fRightChd
);

1049 
	}
}

1060 
št32_t
 
	gRBBITabËBud”
::
	$g‘TabËSize
() const {

1061 
št32_t
 
size
 = 0;

1062 
št32_t
 
numRows
;

1063 
št32_t
 
numCŞs
;

1064 
št32_t
 
rowSize
;

1066 ià(
fT»e
 =ğ
NULL
) {

1070 
size
 = (
RBBIS‹TabË
) - 4;

1072 
numRows
 = 
fDS‹s
->
	`size
();

1073 
numCŞs
 = 
fRB
->
fS‘Bud”
->
	`g‘NumCh¬C©egÜ›s
();

1078 
rowSize
 = (
RBBIS‹TabËRow
è+ (
ušt16_t
)*(
numCŞs
-2);

1079 
size
 +ğ
numRows
 * 
rowSize
;

1080  
size
;

1081 
	}
}

1092 
	gRBBITabËBud”
::
	$expÜtTabË
(*
wh”e
) {

1093 
RBBIS‹TabË
 *
bË
 = (RBBIS‹TabË *)
wh”e
;

1094 
ušt32_t
 
¡©e
;

1095 
cŞ
;

1097 ià(
	`U_FAILURE
(*
fStus
è|| 
fT»e
 =ğ
NULL
) {

1101 ià(
fRB
->
fS‘Bud”
->
	`g‘NumCh¬C©egÜ›s
() > 0x7fff ||

1102 
fDS‹s
->
	`size
() > 0x7fff) {

1103 *
fStus
 = 
U_BRK_INTERNAL_ERROR
;

1107 
bË
->
fRowL’
 = (
RBBIS‹TabËRow
) +

1108 (
ušt16_t
è* (
fRB
->
fS‘Bud”
->
	`g‘NumCh¬C©egÜ›s
() - 2);

1109 
bË
->
fNumS‹s
 = 
fDS‹s
->
	`size
();

1110 
bË
->
fFÏgs
 = 0;

1111 ià(
fRB
->
fLookAh—dH¬dB»ak
) {

1112 
bË
->
fFÏgs
 |ğ
RBBI_LOOKAHEAD_HARD_BREAK
;

1114 ià(
fRB
->
fS‘Bud”
->
	`§wBOF
()) {

1115 
bË
->
fFÏgs
 |ğ
RBBI_BOF_REQUIRED
;

1117 
bË
->
fRe£rved
 = 0;

1119 
¡©e
=0; s‹<
bË
->
fNumS‹s
; state++) {

1120 
RBBIS‹DesütÜ
 *
sd
 = (RBBIS‹DesütÜ *)
fDS‹s
->
	`–em’tAt
(
¡©e
);

1121 
RBBIS‹TabËRow
 *
row
 = (RBBIS‹TabËRow *)(
bË
->
fTabËD©a
 + 
¡©e
*bË->
fRowL’
);

1122 
	`U_ASSERT
 (-32768 < 
sd
->
fAcû±šg
 && sd->fAccepting <= 32767);

1123 
	`U_ASSERT
 (-32768 < 
sd
->
fLookAh—d
 && sd->fLookAhead <= 32767);

1124 
row
->
fAcû±šg
 = (
št16_t
)
sd
->fAccepting;

1125 
row
->
fLookAh—d
 = (
št16_t
)
sd
->fLookAhead;

1126 
row
->
fTagIdx
 = (
št16_t
)
sd
->
fTagsIdx
;

1127 
cŞ
=0; cŞ<
fRB
->
fS‘Bud”
->
	`g‘NumCh¬C©egÜ›s
(); col++) {

1128 
row
->
fNextS‹
[
cŞ
] = (
ušt16_t
)
sd
->
fDŒª
->
	`–em’tAti
(col);

1131 
	}
}

1140 #ifdeà
RBBI_DEBUG


1141 
	gRBBITabËBud”
::
	$´štS‘
(
UVeùÜ
 *
s
) {

1142 
št32_t
 
i
;

1143 
i
=0; i<
s
->
	`size
(); i++) {

1144 *
v
 = 
s
->
	`–em’tAt
(
i
);

1145 
	`RBBIDebugPrštf
("%10p", 
v
);

1147 
	`RBBIDebugPrštf
("\n");

1148 
	}
}

1157 #ifdeà
RBBI_DEBUG


1158 
	gRBBITabËBud”
::
	$´štS‹s
() {

1159 
c
;

1160 
n
;

1162 
	`RBBIDebugPrštf
("state | i‚… u s y m b o† s \n");

1163 
	`RBBIDebugPrštf
(" | Acc LA Tag");

1164 
c
=0; c<
fRB
->
fS‘Bud”
->
	`g‘NumCh¬C©egÜ›s
(); c++) {

1165 
	`RBBIDebugPrštf
(" %2d", 
c
);

1167 
	`RBBIDebugPrštf
("\n");

1168 
	`RBBIDebugPrštf
(" |---------------");

1169 
c
=0; c<
fRB
->
fS‘Bud”
->
	`g‘NumCh¬C©egÜ›s
(); c++) {

1170 
	`RBBIDebugPrštf
("---");

1172 
	`RBBIDebugPrštf
("\n");

1174 
n
=0;‚<
fDS‹s
->
	`size
();‚++) {

1175 
RBBIS‹DesütÜ
 *
sd
 = (RBBIS‹DesütÜ *)
fDS‹s
->
	`–em’tAt
(
n
);

1176 
	`RBBIDebugPrštf
(" %3d | " , 
n
);

1177 
	`RBBIDebugPrštf
("%3d %3d %5d ", 
sd
->
fAcû±šg
, sd->
fLookAh—d
, sd->
fTagsIdx
);

1178 
c
=0; c<
fRB
->
fS‘Bud”
->
	`g‘NumCh¬C©egÜ›s
(); c++) {

1179 
	`RBBIDebugPrštf
(" %2d", 
sd
->
fDŒª
->
	`–em’tAti
(
c
));

1181 
	`RBBIDebugPrštf
("\n");

1183 
	`RBBIDebugPrštf
("\n\n");

1184 
	}
}

1194 #ifdeà
RBBI_DEBUG


1195 
	gRBBITabËBud”
::
	$´štRuËStusTabË
() {

1196 
št32_t
 
thisRecÜd
 = 0;

1197 
št32_t
 
ÃxtRecÜd
 = 0;

1198 
i
;

1199 
UVeùÜ
 *
tbl
 = 
fRB
->
fRuËStusV®s
;

1201 
	`RBBIDebugPrštf
("index |ags \n");

1202 
	`RBBIDebugPrštf
("-------------------\n");

1204 
ÃxtRecÜd
 < 
tbl
->
	`size
()) {

1205 
thisRecÜd
 = 
ÃxtRecÜd
;

1206 
ÃxtRecÜd
 = 
thisRecÜd
 + 
tbl
->
	`–em’tAti
(thisRecord) + 1;

1207 
	`RBBIDebugPrštf
("%4d ", 
thisRecÜd
);

1208 
i
=
thisRecÜd
+1; i<
ÃxtRecÜd
; i++) {

1209 
	`RBBIDebugPrštf
(" %5d", 
tbl
->
	`–em’tAti
(
i
));

1211 
	`RBBIDebugPrštf
("\n");

1213 
	`RBBIDebugPrštf
("\n\n");

1214 
	}
}

1225 
	gRBBIS‹DesütÜ
::
	$RBBIS‹DesütÜ
(
Ï¡IÅutSymbŞ
, 
UE¼ÜCode
 *
fStus
) {

1226 
fM¬ked
 = 
FALSE
;

1227 
fAcû±šg
 = 0;

1228 
fLookAh—d
 = 0;

1229 
fTagsIdx
 = 0;

1230 
fTagV®s
 = 
NULL
;

1231 
fPos™iÚs
 = 
NULL
;

1232 
fDŒª
 = 
NULL
;

1234 
fDŒª
 = 
Ãw
 
	`UVeùÜ
(
Ï¡IÅutSymbŞ
+1, *
fStus
);

1235 ià(
	`U_FAILURE
(*
fStus
)) {

1238 ià(
fDŒª
 =ğ
NULL
) {

1239 *
fStus
 = 
U_MEMORY_ALLOCATION_ERROR
;

1242 
fDŒª
->
	`£tSize
(
Ï¡IÅutSymbŞ
+1, *
fStus
);

1246 
	}
}

1249 
	gRBBIS‹DesütÜ
::~
	$RBBIS‹DesütÜ
() {

1250 
d–‘e
 
fPos™iÚs
;

1251 
d–‘e
 
fDŒª
;

1252 
d–‘e
 
fTagV®s
;

1253 
fPos™iÚs
 = 
NULL
;

1254 
fDŒª
 = 
NULL
;

1255 
fTagV®s
 = 
NULL
;

1256 
	}
}

1258 
	gU_NAMESPACE_END


	@rbbitblb.h

12 #iâdeà
RBBITBLB_H


13 
	#RBBITBLB_H


	)

15 
	~"unicode/uty³s.h
"

16 
	~"unicode/uobjeù.h
"

17 
	~"unicode/rbbi.h
"

18 
	~"rbbšode.h
"

21 
U_NAMESPACE_BEGIN


23 
şass
 
	gRBBIRuËSÿÂ”
;

24 
şass
 
	gRBBIRuËBud”
;

35 şas 
	cRBBITabËBud”
 : 
public
 
UMemÜy
 {

36 
public
:

37 
RBBITabËBud”
(
RBBIRuËBud”
 *
rb
, 
RBBINode
 **
roÙNode
);

38 ~
RBBITabËBud”
();

40 
bud
();

41 
št32_t
 
	$g‘TabËSize
() const;

43 
	`expÜtTabË
(*
wh”e
);

48 
´iv©e
:

49 
	`ÿlcNuÎabË
(
RBBINode
 *
n
);

50 
	`ÿlcFœ¡Pos
(
RBBINode
 *
n
);

51 
	`ÿlcLa¡Pos
(
RBBINode
 *
n
);

52 
	`ÿlcFŞlowPos
(
RBBINode
 *
n
);

53 
	`ÿlcChašedFŞlowPos
(
RBBINode
 *
n
);

54 
	`bofFixup
();

55 
	`budS‹TabË
();

56 
	`æagAcû±šgS‹s
();

57 
	`æagLookAh—dS‹s
();

58 
	`æagTaggedS‹s
();

59 
	`m”geRuËStusV®s
();

64 
	`£tAdd
(
UVeùÜ
 *
de¡
, UVeùÜ *
sourû
);

65 
UBoŞ
 
	`£tEqu®s
(
UVeùÜ
 *
a
, UVeùÜ *
b
);

67 
	`sÜ‹dAdd
(
UVeùÜ
 **
de¡
, 
št32_t
 
v®
);

69 
public
:

70 #ifdeà
RBBI_DEBUG


71 
	`´štS‘
(
UVeùÜ
 *
s
);

72 
	`´štPosS‘s
(
RBBINode
 *
n
 );

73 
	`´štS‹s
();

74 
	`´štRuËStusTabË
();

76 
	#´štS‘
(
s
)

	)

77 
	#´štPosS‘s
(
n
)

	)

78 
	#´štS‹s
()

	)

79 
	#´štRuËStusTabË
()

	)

82 
´iv©e
:

83 
RBBIRuËBud”
 *
fRB
;

84 
RBBINode
 *&
fT»e
;

86 
UE¼ÜCode
 *
fStus
;

88 
UVeùÜ
 *
fDS‹s
;

93 
	`RBBITabËBud”
(cÚ¡ 
RBBITabËBud”
 &
Ùh”
);

94 
RBBITabËBud”
 &
İ”©Ü
=(cÚ¡ RBBITabËBud” &
Ùh”
);

100 şas 
	cRBBIS‹DesütÜ
 : 
public
 
UMemÜy
 {

101 
public
:

102 
UBoŞ
 
fM¬ked
;

103 
št32_t
 
fAcû±šg
;

104 
št32_t
 
fLookAh—d
;

105 
UVeùÜ
 *
fTagV®s
;

106 
št32_t
 
fTagsIdx
;

107 
UVeùÜ
 *
fPos™iÚs
;

111 
UVeùÜ
 *
fDŒª
;

116 
	`RBBIS‹DesütÜ
(
maxIÅutSymbŞ
, 
UE¼ÜCode
 *
fStus
);

117 ~
	`RBBIS‹DesütÜ
();

119 
´iv©e
:

120 
	`RBBIS‹DesütÜ
(cÚ¡ 
RBBIS‹DesütÜ
 &
Ùh”
);

121 
RBBIS‹DesütÜ
 &
İ”©Ü
=(cÚ¡ RBBIS‹DesütÜ &
Ùh”
);

126 
U_NAMESPACE_END


	@resbund.cpp

49 
	~"unicode/uty³s.h
"

50 
	~"unicode/»sbund.h
"

51 
	~"umu‹x.h
"

53 
	~"u»simp.h
"

55 
U_NAMESPACE_BEGIN


171 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
ResourûBundË
)

173 
ResourûBundË
::
	$ResourûBundË
(
UE¼ÜCode
 &
”r
)

174 :
	`UObjeù
(), 
	$fLoÿË
(
NULL
)

176 
fResourû
 = 
	`u»s_İ’
(0, 
LoÿË
::
	`g‘DeçuÉ
().
	`g‘Name
(), &
”r
);

177 
	}
}

179 
	gResourûBundË
::
	$ResourûBundË
(cÚ¡ 
ResourûBundË
 &
Ùh”
)

180 :
	`UObjeù
(
Ùh”
), 
	$fLoÿË
(
NULL
)

182 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

184 ià(
Ùh”
.
fResourû
) {

185 
fResourû
 = 
	`u»s_cİyResb
(0, 
Ùh”
.fResourû, &
¡©us
);

188 
fResourû
 = 
NULL
;

190 
	}
}

192 
	gResourûBundË
::
	$ResourûBundË
(
UResourûBundË
 *
»s
, 
UE¼ÜCode
& 
”r
)

193 :
	`UObjeù
(), 
	$fLoÿË
(
NULL
)

195 ià(
»s
) {

196 
fResourû
 = 
	`u»s_cİyResb
(0, 
»s
, &
”r
);

199 
fResourû
 = 
NULL
;

201 
	}
}

203 
	gResourûBundË
::
	$ResourûBundË
(cÚ¡ * 
·th
, cÚ¡ 
LoÿË
& 
loÿË
, 
UE¼ÜCode
& 
”r
)

204 :
	`UObjeù
(), 
	$fLoÿË
(
NULL
)

206 
fResourû
 = 
	`u»s_İ’
(
·th
, 
loÿË
.
	`g‘Name
(), &
”r
);

207 
	}
}

210 
	gResourûBundË
& ResourûBundË::
İ”©Ü
=(cÚ¡ 
ResourûBundË
& 
Ùh”
)

212 if(
this
 =ğ&
Ùh”
) {

213  *
this
;

215 if(
	gfResourû
 != 0) {

216 
u»s_şo£
(
fResourû
);

217 
	gfResourû
 = 
NULL
;

219 
UE¼ÜCode
 
	g¡©us
 = 
U_ZERO_ERROR
;

220 ià(
	gÙh”
.
	gfResourû
) {

221 
	gfResourû
 = 
u»s_cİyResb
(0, 
Ùh”
.
fResourû
, &
¡©us
);

224 
	gfResourû
 = 
NULL
;

226  *
	gthis
;

229 
	gResourûBundË
::~
	$ResourûBundË
()

231 if(
fResourû
 != 0) {

232 
	`u»s_şo£
(
fResourû
);

234 if(
fLoÿË
 !ğ
NULL
) {

235 
	`d–‘e
(
fLoÿË
);

237 
	}
}

239 
ResourûBundË
 *

240 
	gResourûBundË
::
	$şÚe
() const {

241  
Ãw
 
	`ResourûBundË
(*
this
);

242 
	}
}

244 
UnicodeSŒšg
 
	gResourûBundË
::
	$g‘SŒšg
(
UE¼ÜCode
& 
¡©us
) const {

245 
št32_t
 
Ën
 = 0;

246 cÚ¡ 
UCh¬
 *
r
 = 
	`u»s_g‘SŒšg
(
fResourû
, &
Ën
, &
¡©us
);

247  
	`UnicodeSŒšg
(
TRUE
, 
r
, 
Ën
);

248 
	}
}

250 cÚ¡ 
ušt8_t
 *
	gResourûBundË
::
	$g‘Bš¬y
(
št32_t
& 
Ën
, 
UE¼ÜCode
& 
¡©us
) const {

251  
	`u»s_g‘Bš¬y
(
fResourû
, &
Ën
, &
¡©us
);

252 
	}
}

254 cÚ¡ 
št32_t
 *
	gResourûBundË
::
	$g‘IÁVeùÜ
(
št32_t
& 
Ën
, 
UE¼ÜCode
& 
¡©us
) const {

255  
	`u»s_g‘IÁVeùÜ
(
fResourû
, &
Ën
, &
¡©us
);

256 
	}
}

258 
ušt32_t
 
	gResourûBundË
::
	$g‘UIÁ
(
UE¼ÜCode
& 
¡©us
) const {

259  
	`u»s_g‘UIÁ
(
fResourû
, &
¡©us
);

260 
	}
}

262 
št32_t
 
	gResourûBundË
::
	$g‘IÁ
(
UE¼ÜCode
& 
¡©us
) const {

263  
	`u»s_g‘IÁ
(
fResourû
, &
¡©us
);

264 
	}
}

266 cÚ¡ *
	gResourûBundË
::
	$g‘Name
() const {

267  
	`u»s_g‘Name
(
fResourû
);

268 
	}
}

270 cÚ¡ *
	gResourûBundË
::
	$g‘Key
() const {

271  
	`u»s_g‘Key
(
fResourû
);

272 
	}
}

274 
UResTy³
 
	gResourûBundË
::
	$g‘Ty³
() const {

275  
	`u»s_g‘Ty³
(
fResourû
);

276 
	}
}

278 
št32_t
 
	gResourûBundË
::
	$g‘Size
() const {

279  
	`u»s_g‘Size
(
fResourû
);

280 
	}
}

282 
UBoŞ
 
	gResourûBundË
::
	$hasNext
() const {

283  
	`u»s_hasNext
(
fResourû
);

284 
	}
}

286 
	gResourûBundË
::
	$»£tI‹¿tÜ
() {

287 
	`u»s_»£tI‹¿tÜ
(
fResourû
);

288 
	}
}

290 
ResourûBundË
 
	gResourûBundË
::
	$g‘Next
(
UE¼ÜCode
& 
¡©us
) {

291 
UResourûBundË
 
r
;

293 
	`u»s_š™SckObjeù
(&
r
);

294 
	`u»s_g‘NextResourû
(
fResourû
, &
r
, &
¡©us
);

295 
ResourûBundË
 
	`»s
(&
r
, 
¡©us
);

296 ià(
	`U_SUCCESS
(
¡©us
)) {

297 
	`u»s_şo£
(&
r
);

299  
»s
;

300 
	}
}

302 
UnicodeSŒšg
 
	gResourûBundË
::
	$g‘NextSŒšg
(
UE¼ÜCode
& 
¡©us
) {

303 
št32_t
 
Ën
 = 0;

304 cÚ¡ 
UCh¬
* 
r
 = 
	`u»s_g‘NextSŒšg
(
fResourû
, &
Ën
, 0, &
¡©us
);

305  
	`UnicodeSŒšg
(
TRUE
, 
r
, 
Ën
);

306 
	}
}

308 
UnicodeSŒšg
 
	gResourûBundË
::
	$g‘NextSŒšg
(cÚ¡ ** 
key
, 
UE¼ÜCode
& 
¡©us
) {

309 
št32_t
 
Ën
 = 0;

310 cÚ¡ 
UCh¬
* 
r
 = 
	`u»s_g‘NextSŒšg
(
fResourû
, &
Ën
, 
key
, &
¡©us
);

311  
	`UnicodeSŒšg
(
TRUE
, 
r
, 
Ën
);

312 
	}
}

314 
ResourûBundË
 
	gResourûBundË
::
	$g‘
(
št32_t
 
šdexR
, 
UE¼ÜCode
& 
¡©us
) const {

315 
UResourûBundË
 
r
;

317 
	`u»s_š™SckObjeù
(&
r
);

318 
	`u»s_g‘ByIndex
(
fResourû
, 
šdexR
, &
r
, &
¡©us
);

319 
ResourûBundË
 
	`»s
(&
r
, 
¡©us
);

320 ià(
	`U_SUCCESS
(
¡©us
)) {

321 
	`u»s_şo£
(&
r
);

323  
»s
;

324 
	}
}

326 
UnicodeSŒšg
 
	gResourûBundË
::
	$g‘SŒšgEx
(
št32_t
 
šdexS
, 
UE¼ÜCode
& 
¡©us
) const {

327 
št32_t
 
Ën
 = 0;

328 cÚ¡ 
UCh¬
* 
r
 = 
	`u»s_g‘SŒšgByIndex
(
fResourû
, 
šdexS
, &
Ën
, &
¡©us
);

329  
	`UnicodeSŒšg
(
TRUE
, 
r
, 
Ën
);

330 
	}
}

332 
ResourûBundË
 
	gResourûBundË
::
	$g‘
(cÚ¡ * 
key
, 
UE¼ÜCode
& 
¡©us
) const {

333 
UResourûBundË
 
r
;

335 
	`u»s_š™SckObjeù
(&
r
);

336 
	`u»s_g‘ByKey
(
fResourû
, 
key
, &
r
, &
¡©us
);

337 
ResourûBundË
 
	`»s
(&
r
, 
¡©us
);

338 ià(
	`U_SUCCESS
(
¡©us
)) {

339 
	`u»s_şo£
(&
r
);

341  
»s
;

342 
	}
}

344 
ResourûBundË
 
	gResourûBundË
::
	$g‘W™hF®lback
(cÚ¡ * 
key
, 
UE¼ÜCode
& 
¡©us
){

345 
UResourûBundË
 
r
;

346 
	`u»s_š™SckObjeù
(&
r
);

347 
	`u»s_g‘ByKeyW™hF®lback
(
fResourû
, 
key
, &
r
, &
¡©us
);

348 
ResourûBundË
 
	`»s
(&
r
, 
¡©us
);

349 if(
	`U_SUCCESS
(
¡©us
)){

350 
	`u»s_şo£
(&
r
);

352  
»s
;

353 
	}
}

354 
UnicodeSŒšg
 
	gResourûBundË
::
	$g‘SŒšgEx
(cÚ¡ * 
key
, 
UE¼ÜCode
& 
¡©us
) const {

355 
št32_t
 
Ën
 = 0;

356 cÚ¡ 
UCh¬
* 
r
 = 
	`u»s_g‘SŒšgByKey
(
fResourû
, 
key
, &
Ën
, &
¡©us
);

357  
	`UnicodeSŒšg
(
TRUE
, 
r
, 
Ën
);

358 
	}
}

361 
	gResourûBundË
::
	$g‘V”siÚNumb”
() const

363  
	`u»s_g‘V”siÚNumb”IÁ”Çl
(
fResourû
);

364 
	}
}

366 
	gResourûBundË
::
	$g‘V”siÚ
(
UV”siÚInfo
 
v”siÚInfo
) const {

367 
	`u»s_g‘V”siÚ
(
fResourû
, 
v”siÚInfo
);

368 
	}
}

370 cÚ¡ 
	gLoÿË
 &
	gResourûBundË
::
	$g‘LoÿË
() const

372 
UBoŞ
 
ÃedIn™
;

373 
	`UMTX_CHECK
(
NULL
, (
fLoÿË
 =ğNULL), 
ÃedIn™
);

374 if(
ÃedIn™
) {

375 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

376 cÚ¡ *
loÿËName
 = 
	`u»s_g‘LoÿËIÁ”Çl
(
fResourû
, &
¡©us
);

377 
LoÿË
 *
tLoÿË
 = 
Ãw
 
	`LoÿË
(
loÿËName
);

379 ià(
tLoÿË
 =ğ
NULL
) {

380  
LoÿË
::
	`g‘DeçuÉ
();

382 
	`umtx_lock
(
NULL
);

383 
ResourûBundË
 *
me
 = (ResourûBundË *)
this
;

384 ià(
me
->
fLoÿË
 =ğ
NULL
) {

385 
me
->
fLoÿË
 = 
tLoÿË
;

386 
tLoÿË
 = 
NULL
;

388 
	`umtx_uÆock
(
NULL
);

389 
d–‘e
 
tLoÿË
;

391  *
fLoÿË
;

392 
	}
}

394 cÚ¡ 
LoÿË
 
	gResourûBundË
::
	$g‘LoÿË
(
ULocD©aLoÿËTy³
 
ty³
, 
UE¼ÜCode
 &
¡©us
) const

396  
	`u»s_g‘LoÿËByTy³
(
fResourû
, 
ty³
, &
¡©us
);

397 
	}
}

400 
	gU_NAMESPACE_END


	@resbund_cnv.cpp

19 
	~"unicode/uty³s.h
"

20 
	~"unicode/»sbund.h
"

21 
	~"ušvch¬.h
"

23 
U_NAMESPACE_BEGIN


25 
	gResourûBundË
::
	$ResourûBundË
ĞcÚ¡ 
UnicodeSŒšg
& 
·th
,

26 cÚ¡ 
LoÿË
& 
loÿË
,

27 
UE¼ÜCode
& 
”rÜ
)

28 :
	`UObjeù
(), 
	$fLoÿË
(
NULL
)

30 
	`cÚ¡ruùFÜLoÿË
(
·th
, 
loÿË
, 
”rÜ
);

31 
	}
}

33 
	gResourûBundË
::
	$ResourûBundË
ĞcÚ¡ 
UnicodeSŒšg
& 
·th
,

34 
UE¼ÜCode
& 
”rÜ
)

35 :
	`UObjeù
(), 
	$fLoÿË
(
NULL
)

37 
	`cÚ¡ruùFÜLoÿË
(
·th
, 
LoÿË
::
	`g‘DeçuÉ
(), 
”rÜ
);

38 
	}
}

41 
	gResourûBundË
::
	$cÚ¡ruùFÜLoÿË
(cÚ¡ 
UnicodeSŒšg
& 
·th
,

42 cÚ¡ 
LoÿË
& 
loÿË
,

43 
UE¼ÜCode
& 
”rÜ
)

45 ià(
·th
.
	`isEm±y
()) {

46 
fResourû
 = 
	`u»s_İ’
(
NULL
, 
loÿË
.
	`g‘Name
(), &
”rÜ
);

49 
UnicodeSŒšg
 
	`nuÎT”mš©edP©h
(
·th
);

50 
nuÎT”mš©edP©h
.
	`­³nd
((
UCh¬
)0);

51 
fResourû
 = 
	`u»s_İ’U
(
nuÎT”mš©edP©h
.
	`g‘Bufãr
(), 
loÿË
.
	`g‘Name
(), &
”rÜ
);

53 
	}
}

55 
	gU_NAMESPACE_END


	@ruleiter.cpp

11 
	~"ruË™”.h
"

12 
	~"unicode/·r£pos.h
"

13 
	~"unicode/uni¡r.h
"

14 
	~"unicode/symbË.h
"

15 
	~"ut.h
"

18 
	#MAX_U_NOTATION_LEN
 12

	)

20 
U_NAMESPACE_BEGIN


22 
	gRuËCh¬aù”I‹¿tÜ
::
	$RuËCh¬aù”I‹¿tÜ
(cÚ¡ 
UnicodeSŒšg
& 
theText
, cÚ¡ 
SymbŞTabË
* 
theSym
,

23 
P¬£Pos™iÚ
& 
thePos
) :

24 
	`‹xt
(
theText
),

25 
	`pos
(
thePos
),

26 
	`sym
(
theSym
),

27 
	`buf
(0),

28 
	$bufPos
(0)

29 {
	}
}

31 
UBoŞ
 
	gRuËCh¬aù”I‹¿tÜ
::
	$©End
() const {

32  
buf
 =ğ0 && 
pos
.
	`g‘Index
(è=ğ
‹xt
.
	`Ëngth
();

33 
	}
}

35 
UCh¬32
 
	gRuËCh¬aù”I‹¿tÜ
::
	$Ãxt
(
št32_t
 
İtiÚs
, 
UBoŞ
& 
isEsÿ³d
, 
UE¼ÜCode
& 
ec
) {

36 ià(
	`U_FAILURE
(
ec
)è 
DONE
;

38 
UCh¬32
 
c
 = 
DONE
;

39 
isEsÿ³d
 = 
FALSE
;

42 
c
 = 
	`_cu¼’t
();

43 
	`_advªû
(
	`UTF_CHAR_LENGTH
(
c
));

45 ià(
c
 =ğ
SymbŞTabË
::
SYMBOL_REF
 && 
buf
 == 0 &&

46 (
İtiÚs
 & 
PARSE_VARIABLES
è!ğ0 && 
sym
 != 0) {

47 
UnicodeSŒšg
 
Çme
 = 
sym
->
	`·r£Reã»nû
(
‹xt
, 
pos
,ext.
	`Ëngth
());

50 ià(
Çme
.
	`Ëngth
() == 0) {

53 
bufPos
 = 0;

54 
buf
 = 
sym
->
	`lookup
(
Çme
);

55 ià(
buf
 == 0) {

56 
ec
 = 
U_UNDEFINED_VARIABLE
;

57  
DONE
;

60 ià(
buf
->
	`Ëngth
() == 0) {

61 
buf
 = 0;

66 ià((
İtiÚs
 & 
SKIP_WHITESPACE
) != 0 &&

67 
	`u´v_isRuËWh™eS·û
(
c
)) {

71 ià(
c
 =ğ0x5C && (
İtiÚs
 & 
PARSE_ESCAPES
) != 0) {

72 
UnicodeSŒšg
 
‹mpEsÿ³
;

73 
št32_t
 
off£t
 = 0;

74 
c
 = 
	`lookah—d
(
‹mpEsÿ³
, 
MAX_U_NOTATION_LEN
).
	`uÃsÿ³At
(
off£t
);

75 
	`jum·h—d
(
off£t
);

76 
isEsÿ³d
 = 
TRUE
;

77 ià(
c
 < 0) {

78 
ec
 = 
U_MALFORMED_UNICODE_ESCAPE
;

79  
DONE
;

86  
c
;

87 
	}
}

89 
	gRuËCh¬aù”I‹¿tÜ
::
g‘Pos
(
RuËCh¬aù”I‹¿tÜ
::
Pos
& 
p
) const {

90 
p
.
buf
 = buf;

91 
	gp
.
	gpos
 = 
pos
.
g‘Index
();

92 
	gp
.
	gbufPos
 = 
bufPos
;

95 
	gRuËCh¬aù”I‹¿tÜ
::
£tPos
(cÚ¡ 
RuËCh¬aù”I‹¿tÜ
::
Pos
& 
p
) {

96 
buf
 = 
p
.buf;

97 
	gpos
.
£tIndex
(
p
.
pos
);

98 
	gbufPos
 = 
p
.
bufPos
;

101 
	gRuËCh¬aù”I‹¿tÜ
::
	$skIgnÜed
(
št32_t
 
İtiÚs
) {

102 ià((
İtiÚs
 & 
SKIP_WHITESPACE
) != 0) {

104 
UCh¬32
 
a
 = 
	`_cu¼’t
();

105 ià(!
	`u´v_isRuËWh™eS·û
(
a
)) ;

106 
	`_advªû
(
	`UTF_CHAR_LENGTH
(
a
));

109 
	}
}

111 
	gUnicodeSŒšg
& 
	gRuËCh¬aù”I‹¿tÜ
::
	$lookah—d
(
UnicodeSŒšg
& 
»suÉ
, 
št32_t
 
maxLookAh—d
) const {

112 ià(
maxLookAh—d
 < 0) {

113 
maxLookAh—d
 = 0x7FFFFFFF;

115 ià(
buf
 != 0) {

116 
buf
->
	`exŒaù
(
bufPos
, 
maxLookAh—d
, 
»suÉ
);

118 
‹xt
.
	`exŒaù
(
pos
.
	`g‘Index
(), 
maxLookAh—d
, 
»suÉ
);

120  
»suÉ
;

121 
	}
}

123 
	gRuËCh¬aù”I‹¿tÜ
::
	$jum·h—d
(
št32_t
 
couÁ
) {

124 
	`_advªû
(
couÁ
);

125 
	}
}

135 
UCh¬32
 
	gRuËCh¬aù”I‹¿tÜ
::
	$_cu¼’t
() const {

136 ià(
buf
 != 0) {

137  
buf
->
	`ch¬32At
(
bufPos
);

139 
i
 = 
pos
.
	`g‘Index
();

140  (
i
 < 
‹xt
.
	`Ëngth
()è?ext.
	`ch¬32At
(iè: (
UCh¬32
)
DONE
;

142 
	}
}

144 
	gRuËCh¬aù”I‹¿tÜ
::
	$_advªû
(
št32_t
 
couÁ
) {

145 ià(
buf
 != 0) {

146 
bufPos
 +ğ
couÁ
;

147 ià(
bufPos
 =ğ
buf
->
	`Ëngth
()) {

148 
buf
 = 0;

151 
pos
.
	`£tIndex
Õos.
	`g‘Index
(è+ 
couÁ
);

152 ià(
pos
.
	`g‘Index
(è> 
‹xt
.
	`Ëngth
()) {

153 
pos
.
	`£tIndex
(
‹xt
.
	`Ëngth
());

156 
	}
}

158 
	gU_NAMESPACE_END


	@ruleiter.h

11 #iâdeà
_RULEITER_H_


12 
	#_RULEITER_H_


	)

14 
	~"unicode/uobjeù.h
"

16 
U_NAMESPACE_BEGIN


18 
şass
 
	gUnicodeSŒšg
;

19 
şass
 
	gP¬£Pos™iÚ
;

20 
şass
 
	gSymbŞTabË
;

29 şas 
	cRuËCh¬aù”I‹¿tÜ
 : 
public
 
UMemÜy
 {

37 
´iv©e
:

41 cÚ¡ 
UnicodeSŒšg
& 
‹xt
;

46 
	mP¬£Pos™iÚ
& 
	mpos
;

51 cÚ¡ 
SymbŞTabË
* 
	msym
;

56 cÚ¡ 
UnicodeSŒšg
* 
	mbuf
;

61 
št32_t
 
	mbufPos
;

63 
	mpublic
:

67 ’um { 
DONE
 = -1 };

74 ’um { 
	gPARSE_VARIABLES
 = 1 };

81 ’um { 
	gPARSE_ESCAPES
 = 2 };

89 ’um { 
	gSKIP_WHITESPACE
 = 4 };

102 
RuËCh¬aù”I‹¿tÜ
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
, cÚ¡ 
SymbŞTabË
* 
sym
,

103 
P¬£Pos™iÚ
& 
pos
);

108 
UBoŞ
 
	$©End
() const;

124 
UCh¬32
 
	`Ãxt
(
št32_t
 
İtiÚs
, 
UBoŞ
& 
isEsÿ³d
, 
UE¼ÜCode
& 
ec
);

129 
šlše
 
UBoŞ
 
	$šV¬ŸbË
() const;

134 
Pos
 : 
public
 
UMemÜy
 {

135 
´iv©e
:

136 cÚ¡ 
UnicodeSŒšg
* 
buf
;

137 
št32_t
 
pos
;

138 
št32_t
 
bufPos
;

139 
ä›nd
 
şass
 
RuËCh¬aù”I‹¿tÜ
;

140 
	}
};

159 
	$g‘Pos
(
Pos
& 
p
) const;

166 
	`£tPos
(cÚ¡ 
Pos
& 
p
);

176 
	`skIgnÜed
(
št32_t
 
İtiÚs
);

192 
UnicodeSŒšg
& 
	`lookah—d
(UnicodeSŒšg& 
»suÉ
, 
št32_t
 
maxLookAh—d
 = -1) const;

199 
	`jum·h—d
(
št32_t
 
couÁ
);

210 
´iv©e
:

216 
UCh¬32
 
	$_cu¼’t
() const;

222 
	`_advªû
(
št32_t
 
couÁ
);

223 
	}
};

225 
šlše
 
UBoŞ
 
	gRuËCh¬aù”I‹¿tÜ
::
	$šV¬ŸbË
() const {

226  
buf
 != 0;

227 
	}
}

229 
	gU_NAMESPACE_END


	@schriter.cpp

16 
	~<ty³šfo
>

18 
	~"unicode/ch¬™”.h
"

19 
	~"unicode/schr™”.h
"

21 
U_NAMESPACE_BEGIN


23 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
SŒšgCh¬aù”I‹¿tÜ
)

25 
SŒšgCh¬aù”I‹¿tÜ
::
	$SŒšgCh¬aù”I‹¿tÜ
()

26 : 
	`UCh¬Ch¬aù”I‹¿tÜ
(),

27 
	$‹xt
()

30 
	}
}

32 
	gSŒšgCh¬aù”I‹¿tÜ
::
	$SŒšgCh¬aù”I‹¿tÜ
(cÚ¡ 
UnicodeSŒšg
& 
‹xtSŒ
)

33 : 
	`UCh¬Ch¬aù”I‹¿tÜ
(
‹xtSŒ
.
	`g‘Bufãr
(),extSŒ.
	`Ëngth
()),

34 
	$‹xt
(
‹xtSŒ
)

37 
UCh¬Ch¬aù”I‹¿tÜ
::
‹xt
 = 
this
->‹xt.
	`g‘Bufãr
();

38 
	}
}

40 
	gSŒšgCh¬aù”I‹¿tÜ
::
	$SŒšgCh¬aù”I‹¿tÜ
(cÚ¡ 
UnicodeSŒšg
& 
‹xtSŒ
,

41 
št32_t
 
‹xtPos
)

42 : 
	`UCh¬Ch¬aù”I‹¿tÜ
(
‹xtSŒ
.
	`g‘Bufãr
(),extSŒ.
	`Ëngth
(), 
‹xtPos
),

43 
	$‹xt
(
‹xtSŒ
)

46 
UCh¬Ch¬aù”I‹¿tÜ
::
‹xt
 = 
this
->‹xt.
	`g‘Bufãr
();

47 
	}
}

49 
	gSŒšgCh¬aù”I‹¿tÜ
::
	$SŒšgCh¬aù”I‹¿tÜ
(cÚ¡ 
UnicodeSŒšg
& 
‹xtSŒ
,

50 
št32_t
 
‹xtBegš
,

51 
št32_t
 
‹xtEnd
,

52 
št32_t
 
‹xtPos
)

53 : 
	`UCh¬Ch¬aù”I‹¿tÜ
(
‹xtSŒ
.
	`g‘Bufãr
(),extSŒ.
	`Ëngth
(), 
‹xtBegš
, 
‹xtEnd
, 
‹xtPos
),

54 
	$‹xt
(
‹xtSŒ
)

57 
UCh¬Ch¬aù”I‹¿tÜ
::
‹xt
 = 
this
->‹xt.
	`g‘Bufãr
();

58 
	}
}

60 
	gSŒšgCh¬aù”I‹¿tÜ
::
	$SŒšgCh¬aù”I‹¿tÜ
(cÚ¡ 
SŒšgCh¬aù”I‹¿tÜ
& 
th©
)

61 : 
	`UCh¬Ch¬aù”I‹¿tÜ
(
th©
),

62 
	$‹xt
(
th©
.
‹xt
)

65 
UCh¬Ch¬aù”I‹¿tÜ
::
‹xt
 = 
this
->‹xt.
	`g‘Bufãr
();

66 
	}
}

68 
	gSŒšgCh¬aù”I‹¿tÜ
::~
	$SŒšgCh¬aù”I‹¿tÜ
() {

69 
	}
}

71 
SŒšgCh¬aù”I‹¿tÜ
&

72 
SŒšgCh¬aù”I‹¿tÜ
::
İ”©Ü
=(cÚ¡ SŒšgCh¬aù”I‹¿tÜ& 
th©
) {

73 
UCh¬Ch¬aù”I‹¿tÜ
::
İ”©Ü
=(
th©
);

74 
	g‹xt
 = 
th©
.
‹xt
;

76 
	gUCh¬Ch¬aù”I‹¿tÜ
::
‹xt
 = 
this
->‹xt.
g‘Bufãr
();

77  *
	gthis
;

80 
UBoŞ


81 
	gSŒšgCh¬aù”I‹¿tÜ
::
İ”©Ü
==(cÚ¡ 
FÜw¬dCh¬aù”I‹¿tÜ
& 
th©
) const {

82 ià(
this
 =ğ&
th©
) {

83  
TRUE
;

90 ià(
ty³id
(*
this
è!ğty³id(
th©
)) {

91  
FALSE
;

94 
	gSŒšgCh¬aù”I‹¿tÜ
& 
	g»®Th©
 = (
SŒšgCh¬aù”I‹¿tÜ
&)
th©
;

96  
	g‹xt
 =ğ
»®Th©
.
‹xt


97 && 
pos
 =ğ
»®Th©
.pos

98 && 
begš
 =ğ
»®Th©
.begin

99 && 
’d
 =ğ
»®Th©
.end;

102 
Ch¬aù”I‹¿tÜ
*

103 
	gSŒšgCh¬aù”I‹¿tÜ
::
	$şÚe
() const {

104  
Ãw
 
	`SŒšgCh¬aù”I‹¿tÜ
(*
this
);

105 
	}
}

108 
	gSŒšgCh¬aù”I‹¿tÜ
::
	$£tText
(cÚ¡ 
UnicodeSŒšg
& 
ÃwText
) {

109 
‹xt
 = 
ÃwText
;

110 
UCh¬Ch¬aù”I‹¿tÜ
::
	`£tText
(
‹xt
.
	`g‘Bufãr
(),ext.
	`Ëngth
());

111 
	}
}

114 
	gSŒšgCh¬aù”I‹¿tÜ
::
	$g‘Text
(
UnicodeSŒšg
& 
»suÉ
) {

115 
»suÉ
 = 
‹xt
;

116 
	}
}

117 
	gU_NAMESPACE_END


	@serv.cpp

8 
	~"unicode/uty³s.h
"

10 #ià!
UCONFIG_NO_SERVICE


12 
	~"£rv.h
"

13 
	~"umu‹x.h
"

15 #undeà
SERVICE_REFCOUNT


19 
U_NAMESPACE_BEGIN


25 cÚ¡ 
UCh¬
 
	gICUS”viûKey
::
PREFIX_DELIMITER
 = 0x002F;

27 
	gICUS”viûKey
::
	$ICUS”viûKey
(cÚ¡ 
UnicodeSŒšg
& 
id
)

28 : 
	$_id
(
id
) {

29 
	}
}

31 
ICUS”viûKey
::~
	$ICUS”viûKey
()

33 
	}
}

35 cÚ¡ 
UnicodeSŒšg
&

36 
ICUS”viûKey
::
	$g‘ID
() const

38  
_id
;

39 
	}
}

41 
	gUnicodeSŒšg
&

42 
	gICUS”viûKey
::
	$ÿnÚiÿlID
(
UnicodeSŒšg
& 
»suÉ
) const

44  
»suÉ
.
	`­³nd
(
_id
);

45 
	}
}

47 
	gUnicodeSŒšg
&

48 
	gICUS”viûKey
::
	$cu¼’tID
(
UnicodeSŒšg
& 
»suÉ
) const

50  
	`ÿnÚiÿlID
(
»suÉ
);

51 
	}
}

53 
	gUnicodeSŒšg
&

54 
	gICUS”viûKey
::
	$cu¼’tDesütÜ
(
UnicodeSŒšg
& 
»suÉ
) const

56 
	`´efix
(
»suÉ
);

57 
»suÉ
.
	`­³nd
(
PREFIX_DELIMITER
);

58  
	`cu¼’tID
(
»suÉ
);

59 
	}
}

61 
UBoŞ


62 
	gICUS”viûKey
::
	$çÎback
()

64  
FALSE
;

65 
	}
}

67 
UBoŞ


68 
	gICUS”viûKey
::
	$isF®lbackOf
(cÚ¡ 
UnicodeSŒšg
& 
id
) const

70  
id
 =ğ
_id
;

71 
	}
}

73 
	gUnicodeSŒšg
&

74 
	gICUS”viûKey
::
	$´efix
(
UnicodeSŒšg
& 
»suÉ
) const

76  
»suÉ
;

77 
	}
}

79 
	gUnicodeSŒšg
&

80 
	gICUS”viûKey
::
	$·r£P»fix
(
UnicodeSŒšg
& 
»suÉ
)

82 
št32_t
 
n
 = 
»suÉ
.
	`šdexOf
(
PREFIX_DELIMITER
);

83 ià(
n
 < 0) {

84 
n
 = 0;

86 
»suÉ
.
	`»move
(
n
);

87  
»suÉ
;

88 
	}
}

90 
	gUnicodeSŒšg
&

91 
	gICUS”viûKey
::
	$·r£Suffix
(
UnicodeSŒšg
& 
»suÉ
)

93 
št32_t
 
n
 = 
»suÉ
.
	`šdexOf
(
PREFIX_DELIMITER
);

94 ià(
n
 >= 0) {

95 
»suÉ
.
	`»move
(0, 
n
+1);

97  
»suÉ
;

98 
	}
}

100 #ifdeà
SERVICE_DEBUG


101 
	gUnicodeSŒšg
&

102 
	gICUS”viûKey
::
	$debug
(
UnicodeSŒšg
& 
»suÉ
) const

104 
	`debugCÏss
(
»suÉ
);

105 
»suÉ
.
	`­³nd
(" id: ");

106 
»suÉ
.
	`­³nd
(
_id
);

107  
»suÉ
;

108 
	}
}

110 
	gUnicodeSŒšg
&

111 
	gICUS”viûKey
::
	$debugCÏss
(
UnicodeSŒšg
& 
»suÉ
) const

113  
»suÉ
.
	`­³nd
("ICUServiceKey");

114 
	}
}

117 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
ICUS”viûKey
)

123 
Sim¶eFaùÜy
::
	$Sim¶eFaùÜy
(
UObjeù
* 
š¡ªûToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
id
, 
UBoŞ
 
visibË
)

124 : 
	`_š¡ªû
(
š¡ªûToAdİt
), 
	`_id
(
id
), 
	$_visibË
(
visibË
)

126 
	}
}

128 
	gSim¶eFaùÜy
::~
	$Sim¶eFaùÜy
()

130 
d–‘e
 
_š¡ªû
;

131 
	}
}

133 
UObjeù
*

134 
	gSim¶eFaùÜy
::
	$ü—‹
(cÚ¡ 
ICUS”viûKey
& 
key
, cÚ¡ 
ICUS”viû
* 
£rviû
, 
UE¼ÜCode
& 
¡©us
) const

136 ià(
	`U_SUCCESS
(
¡©us
)) {

137 
UnicodeSŒšg
 
‹mp
;

138 ià(
_id
 =ğ
key
.
	`cu¼’tID
(
‹mp
)) {

139  
£rviû
->
	`şÚeIn¡ªû
(
_š¡ªû
);

142  
NULL
;

143 
	}
}

146 
	gSim¶eFaùÜy
::
	$upd©eVisibËIDs
(
HashbË
& 
»suÉ
, 
UE¼ÜCode
& 
¡©us
) const

148 ià(
_visibË
) {

149 
»suÉ
.
	`put
(
_id
, (*)
this
, 
¡©us
);

151 
»suÉ
.
	`»move
(
_id
);

153 
	}
}

155 
	gUnicodeSŒšg
&

156 
	gSim¶eFaùÜy
::
	$g‘Di¥ÏyName
(cÚ¡ 
UnicodeSŒšg
& 
id
, cÚ¡ 
LoÿË
& , UnicodeSŒšg& 
»suÉ
) const

158 ià(
_visibË
 && 
_id
 =ğ
id
) {

159 
»suÉ
 = 
_id
;

161 
»suÉ
.
	`£tToBogus
();

163  
»suÉ
;

164 
	}
}

166 #ifdeà
SERVICE_DEBUG


167 
	gUnicodeSŒšg
&

168 
	gSim¶eFaùÜy
::
	$debug
(
UnicodeSŒšg
& 
toAµ’dTo
) const

170 
	`debugCÏss
(
toAµ’dTo
);

171 
toAµ’dTo
.
	`­³nd
(" id: ");

172 
toAµ’dTo
.
	`­³nd
(
_id
);

173 
toAµ’dTo
.
	`­³nd
(", visible: ");

174 
toAµ’dTo
.
	`­³nd
(
_visibË
 ? "T" : "F");

175  
toAµ’dTo
;

176 
	}
}

178 
	gUnicodeSŒšg
&

179 
	gSim¶eFaùÜy
::
	$debugCÏss
(
UnicodeSŒšg
& 
toAµ’dTo
) const

181  
toAµ’dTo
.
	`­³nd
("SimpleFactory");

182 
	}
}

185 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
Sim¶eFaùÜy
)

191 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
S”viûLi¡’”
)

199 şas 
	cCacheEÁry
 : 
public
 
UMemÜy
 {

200 
´iv©e
:

201 
št32_t
 
»fcouÁ
;

203 
public
:

204 
UnicodeSŒšg
 
aùu®DesütÜ
;

205 
UObjeù
* 
£rviû
;

210 ~
	$CacheEÁry
() {

211 
d–‘e
 
£rviû
;

214 
	$CacheEÁry
(cÚ¡ 
UnicodeSŒšg
& 
_aùu®DesütÜ
, 
UObjeù
* 
_£rviû
)

215 : 
	`»fcouÁ
(1), 
	`aùu®DesütÜ
(
_aùu®DesütÜ
), 
	$£rviû
(
_£rviû
) {

216 
	}
}

224 
CacheEÁry
* 
	$»f
() {

225 ++
»fcouÁ
;

226  
this
;

227 
	}
}

236 
CacheEÁry
* 
	$uÄef
() {

237 ià((--
»fcouÁ
) == 0) {

238 
d–‘e
 
this
;

239  
NULL
;

241  
this
;

242 
	}
}

248 
UBoŞ
 
	$isSh¬ed
() const {

249  
»fcouÁ
 > 1;

250 
	}
}

254 
U_CDECL_BEGIN


255 
U_CALLCONV


256 
	$ÿcheD–‘”
(* 
obj
) {

257 
	`U_NAMESPACE_USE
 ((
CacheEÁry
*)
obj
)->
	`uÄef
();

258 
	}
}

263 
U_CALLCONV


264 
	$d–‘eUObjeù
(*
obj
) {

265 
U_NAMESPACE_USE
 
	`d–‘e
 (
UObjeù
*è
obj
;

266 
	}
}

267 
U_CDECL_END


273 şas 
	cDNCache
 : 
public
 
UMemÜy
 {

274 
public
:

275 
HashbË
 
ÿche
;

276 cÚ¡ 
LoÿË
 
	mloÿË
;

278 
	$DNCache
(cÚ¡ 
LoÿË
& 
_loÿË
)

279 : 
	`ÿche
(), 
	$loÿË
(
_loÿË
)

283 
	}
};

290 
SŒšgPaœ
*

291 
	gSŒšgPaœ
::
	$ü—‹
(cÚ¡ 
UnicodeSŒšg
& 
di¥ÏyName
,

292 cÚ¡ 
UnicodeSŒšg
& 
id
,

293 
UE¼ÜCode
& 
¡©us
)

295 ià(
	`U_SUCCESS
(
¡©us
)) {

296 
SŒšgPaœ
* 
¥
 = 
Ãw
 
	`SŒšgPaœ
(
di¥ÏyName
, 
id
);

297 ià(
¥
 =ğ
NULL
 || sp->
	`isBogus
()) {

298 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

299 
d–‘e
 
¥
;

300  
NULL
;

302  
¥
;

304  
NULL
;

305 
	}
}

307 
UBoŞ


308 
	gSŒšgPaœ
::
	$isBogus
() const {

309  
di¥ÏyName
.
	`isBogus
(è|| 
id
.isBogus();

310 
	}
}

312 
	gSŒšgPaœ
::
	$SŒšgPaœ
(cÚ¡ 
UnicodeSŒšg
& 
_di¥ÏyName
,

313 cÚ¡ 
UnicodeSŒšg
& 
_id
)

314 : 
	`di¥ÏyName
(
_di¥ÏyName
)

315 , 
	$id
(
_id
)

317 
	}
}

319 
U_CDECL_BEGIN


320 
U_CALLCONV


321 
	$u£rv_d–‘eSŒšgPaœ
(*
obj
) {

322 
U_NAMESPACE_USE
 
	`d–‘e
 (
SŒšgPaœ
*è
obj
;

323 
	}
}

324 
U_CDECL_END


330 
	gICUS”viû
::
	$ICUS”viû
()

331 : 
	`Çme
()

332 , 
	`lock
(0)

333 , 
	`time¡amp
(0)

334 , 
	`çùÜ›s
(
NULL
)

335 , 
	`£rviûCache
(
NULL
)

336 , 
	`idCache
(
NULL
)

337 , 
	$dnCache
(
NULL
)

339 
	`umtx_š™
(&
lock
);

340 
	}
}

342 
	gICUS”viû
::
	$ICUS”viû
(cÚ¡ 
UnicodeSŒšg
& 
ÃwName
)

343 : 
	`Çme
(
ÃwName
)

344 , 
	`lock
(0)

345 , 
	`time¡amp
(0)

346 , 
	`çùÜ›s
(
NULL
)

347 , 
	`£rviûCache
(
NULL
)

348 , 
	`idCache
(
NULL
)

349 , 
	$dnCache
(
NULL
)

351 
	`umtx_š™
(&
lock
);

352 
	}
}

354 
	gICUS”viû
::~
	$ICUS”viû
()

357 
Mu‹x
 
	`mu‹x
(&
lock
);

358 
	`ş—rCaches
();

359 
d–‘e
 
çùÜ›s
;

360 
çùÜ›s
 = 
NULL
;

362 
	`umtx_de¡roy
(&
lock
);

363 
	}
}

365 
UObjeù
*

366 
	gICUS”viû
::
	$g‘
(cÚ¡ 
UnicodeSŒšg
& 
desütÜ
, 
UE¼ÜCode
& 
¡©us
) const

368  
	`g‘
(
desütÜ
, 
NULL
, 
¡©us
);

369 
	}
}

371 
UObjeù
*

372 
	gICUS”viû
::
	$g‘
(cÚ¡ 
UnicodeSŒšg
& 
desütÜ
, UnicodeSŒšg* 
aùu®R‘uº
, 
UE¼ÜCode
& 
¡©us
) const

374 
UObjeù
* 
»suÉ
 = 
NULL
;

375 
ICUS”viûKey
* 
key
 = 
	`ü—‹Key
(&
desütÜ
, 
¡©us
);

376 ià(
key
) {

377 
»suÉ
 = 
	`g‘Key
(*
key
, 
aùu®R‘uº
, 
¡©us
);

378 
d–‘e
 
key
;

380  
»suÉ
;

381 
	}
}

383 
UObjeù
*

384 
	gICUS”viû
::
	$g‘Key
(
ICUS”viûKey
& 
key
, 
UE¼ÜCode
& 
¡©us
) const

386  
	`g‘Key
(
key
, 
NULL
, 
¡©us
);

387 
	}
}

392 
UObjeù
*

393 
	gICUS”viû
::
	$g‘Key
(
ICUS”viûKey
& 
key
, 
UnicodeSŒšg
* 
aùu®R‘uº
, 
UE¼ÜCode
& 
¡©us
) const

395  
	`g‘Key
(
key
, 
aùu®R‘uº
, 
NULL
, 
¡©us
);

396 
	}
}

401 şas 
	cXMu‹x
 : 
public
 
UMemÜy
 {

402 
public
:

403 
šlše
 
	$XMu‹x
(
UMTX
 *
mu‹x
, 
UBoŞ
 
»’‹ršg
)

404 : 
	`fMu‹x
(
mu‹x
)

405 , 
	`fAùive
(!
»’‹ršg
)

407 ià(
fAùive
è
	`umtx_lock
(
fMu‹x
);

409 
šlše
 ~
	$XMu‹x
() {

410 ià(
fAùive
è
	`umtx_uÆock
(
fMu‹x
);

411 
	}
}

413 
	g´iv©e
:

414 
UMTX
 *
fMu‹x
;

415 
UBoŞ
 
	gfAùive
;

418 
	sUVeùÜD–‘”
 {

419 
UVeùÜ
* 
	m_obj
;

420 
UVeùÜD–‘”
(è: 
_obj
(
NULL
) {}

421 ~
UVeùÜD–‘”
(è{ 
d–‘e
 
_obj
; }

425 
UObjeù
*

426 
	gICUS”viû
::
	$g‘Key
(
ICUS”viûKey
& 
key
, 
UnicodeSŒšg
* 
aùu®R‘uº
, cÚ¡ 
ICUS”viûFaùÜy
* 
çùÜy
, 
UE¼ÜCode
& 
¡©us
) const

428 ià(
	`U_FAILURE
(
¡©us
)) {

429  
NULL
;

432 ià(
	`isDeçuÉ
()) {

433  
	`hªdËDeçuÉ
(
key
, 
aùu®R‘uº
, 
¡©us
);

436 
ICUS”viû
* 
nùhis
 = (ICUS”viû*)
this
;

438 
CacheEÁry
* 
»suÉ
 = 
NULL
;

449 
XMu‹x
 
	`mu‹x
(&
nùhis
->
lock
, 
çùÜy
 !ğ
NULL
);

451 ià(
£rviûCache
 =ğ
NULL
) {

452 
nùhis
->
£rviûCache
 = 
Ãw
 
	`HashbË
(
¡©us
);

453 ià(
nùhis
->
£rviûCache
 =ğ
NULL
) {

454  
NULL
;

456 ià(
	`U_FAILURE
(
¡©us
)) {

457 
d–‘e
 
£rviûCache
;

458  
NULL
;

460 
£rviûCache
->
	`£tV®ueD–‘”
(
ÿcheD–‘”
);

463 
UnicodeSŒšg
 
cu¼’tDesütÜ
;

464 
UVeùÜD–‘”
 
ÿcheDesütÜLi¡
;

465 
UBoŞ
 
putInCache
 = 
FALSE
;

467 
št32_t
 
¡¬tIndex
 = 0;

468 
št32_t
 
lim™
 = 
çùÜ›s
->
	`size
();

469 
UBoŞ
 
ÿcheResuÉ
 = 
TRUE
;

471 ià(
çùÜy
 !ğ
NULL
) {

472 
št32_t
 
i
 = 0; i < 
lim™
; ++i) {

473 ià(
çùÜy
 =ğ(cÚ¡ 
ICUS”viûFaùÜy
*)
çùÜ›s
->
	`–em’tAt
(
i
)) {

474 
¡¬tIndex
 = 
i
 + 1;

478 ià(
¡¬tIndex
 == 0) {

480 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

481  
NULL
;

483 
ÿcheResuÉ
 = 
FALSE
;

487 
cu¼’tDesütÜ
.
	`»move
();

488 
key
.
	`cu¼’tDesütÜ
(
cu¼’tDesütÜ
);

489 
»suÉ
 = (
CacheEÁry
*)
£rviûCache
->
	`g‘
(
cu¼’tDesütÜ
);

490 ià(
»suÉ
 !ğ
NULL
) {

497 
putInCache
 = 
TRUE
;

499 
št32_t
 
šdex
 = 
¡¬tIndex
;

500 
šdex
 < 
lim™
) {

501 
ICUS”viûFaùÜy
* 
f
 = (ICUS”viûFaùÜy*)
çùÜ›s
->
	`–em’tAt
(
šdex
++);

502 
UObjeù
* 
£rviû
 = 
f
->
	`ü—‹
(
key
, 
this
, 
¡©us
);

503 ià(
	`U_FAILURE
(
¡©us
)) {

504 
d–‘e
 
£rviû
;

505  
NULL
;

507 ià(
£rviû
 !ğ
NULL
) {

508 
»suÉ
 = 
Ãw
 
	`CacheEÁry
(
cu¼’tDesütÜ
, 
£rviû
);

509 ià(
»suÉ
 =ğ
NULL
) {

510 
d–‘e
 
£rviû
;

511 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

512  
NULL
;

515 
ou‹rEnd
;

524 ià(
ÿcheDesütÜLi¡
.
_obj
 =ğ
NULL
) {

525 
ÿcheDesütÜLi¡
.
_obj
 = 
Ãw
 
	`UVeùÜ
(
uhash_d–‘eUnicodeSŒšg
, 
NULL
, 5, 
¡©us
);

526 ià(
	`U_FAILURE
(
¡©us
)) {

527  
NULL
;

530 
UnicodeSŒšg
* 
idToCache
 = 
Ãw
 
	`UnicodeSŒšg
(
cu¼’tDesütÜ
);

531 ià(
idToCache
 =ğ
NULL
 || idToCache->
	`isBogus
()) {

532 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

533  
NULL
;

536 
ÿcheDesütÜLi¡
.
_obj
->
	`addEËm’t
(
idToCache
, 
¡©us
);

537 ià(
	`U_FAILURE
(
¡©us
)) {

538  
NULL
;

540 } 
key
.
	`çÎback
());

541 
ou‹rEnd
:

543 ià(
»suÉ
 !ğ
NULL
) {

544 ià(
putInCache
 && 
ÿcheResuÉ
) {

545 
£rviûCache
->
	`put
(
»suÉ
->
aùu®DesütÜ
,„esuÉ, 
¡©us
);

546 ià(
	`U_FAILURE
(
¡©us
)) {

547 
d–‘e
 
»suÉ
;

548  
NULL
;

551 ià(
ÿcheDesütÜLi¡
.
_obj
 !ğ
NULL
) {

552 
št32_t
 
i
 = 
ÿcheDesütÜLi¡
.
_obj
->
	`size
(); --i >= 0;) {

553 
UnicodeSŒšg
* 
desc
 = (UnicodeSŒšg*)
ÿcheDesütÜLi¡
.
_obj
->
	`–em’tAt
(
i
);

554 
£rviûCache
->
	`put
(*
desc
, 
»suÉ
, 
¡©us
);

555 ià(
	`U_FAILURE
(
¡©us
)) {

556 
d–‘e
 
»suÉ
;

557  
NULL
;

560 
»suÉ
->
	`»f
();

561 
ÿcheDesütÜLi¡
.
_obj
->
	`»moveEËm’tAt
(
i
);

566 ià(
aùu®R‘uº
 !ğ
NULL
) {

568 ià(
»suÉ
->
aùu®DesütÜ
.
	`šdexOf
((
UCh¬
)0x2f) == 0) {

569 
aùu®R‘uº
->
	`»move
();

570 
aùu®R‘uº
->
	`­³nd
(
»suÉ
->
aùu®DesütÜ
,

572 
»suÉ
->
aùu®DesütÜ
.
	`Ëngth
() - 1);

574 *
aùu®R‘uº
 = 
»suÉ
->
aùu®DesütÜ
;

577 ià(
aùu®R‘uº
->
	`isBogus
()) {

578 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

579 
d–‘e
 
»suÉ
;

580  
NULL
;

584 
UObjeù
* 
£rviû
 = 
	`şÚeIn¡ªû
(
»suÉ
->service);

585 ià(
putInCache
 && !
ÿcheResuÉ
) {

586 
d–‘e
 
»suÉ
;

588  
£rviû
;

592  
	`hªdËDeçuÉ
(
key
, 
aùu®R‘uº
, 
¡©us
);

593 
	}
}

595 
UObjeù
*

596 
	gICUS”viû
::
	$hªdËDeçuÉ
(cÚ¡ 
ICUS”viûKey
& , 
UnicodeSŒšg
* , 
UE¼ÜCode
& ) const

598  
NULL
;

599 
	}
}

601 
	gUVeùÜ
&

602 
	gICUS”viû
::
	$g‘VisibËIDs
(
UVeùÜ
& 
»suÉ
, 
UE¼ÜCode
& 
¡©us
) const {

603  
	`g‘VisibËIDs
(
»suÉ
, 
NULL
, 
¡©us
);

604 
	}
}

606 
	gUVeùÜ
&

607 
	gICUS”viû
::
	$g‘VisibËIDs
(
UVeùÜ
& 
»suÉ
, cÚ¡ 
UnicodeSŒšg
* 
m©chID
, 
UE¼ÜCode
& 
¡©us
) const

609 
»suÉ
.
	`»moveAÎEËm’ts
();

611 ià(
	`U_FAILURE
(
¡©us
)) {

612  
»suÉ
;

615 
ICUS”viû
 * 
nùhis
 = (ICUS”viû*)
this
;

617 
Mu‹x
 
	`mu‹x
(&
nùhis
->
lock
);

618 cÚ¡ 
HashbË
* 
m­
 = 
	`g‘VisibËIDM­
(
¡©us
);

619 ià(
m­
 !ğ
NULL
) {

620 
ICUS”viûKey
* 
çÎbackKey
 = 
	`ü—‹Key
(
m©chID
, 
¡©us
);

622 
št32_t
 
pos
 = -1;;) {

623 cÚ¡ 
UHashEËm’t
* 
e
 = 
m­
->
	`ÃxtEËm’t
(
pos
);

624 ià(
e
 =ğ
NULL
) {

628 cÚ¡ 
UnicodeSŒšg
* 
id
 = (cÚ¡ UnicodeSŒšg*)
e
->
key
.
poš‹r
;

629 ià(
çÎbackKey
 !ğ
NULL
) {

630 ià(!
çÎbackKey
->
	`isF®lbackOf
(*
id
)) {

635 
UnicodeSŒšg
* 
idClÚe
 = 
Ãw
 
	`UnicodeSŒšg
(*
id
);

636 ià(
idClÚe
 =ğ
NULL
 || idClÚe->
	`isBogus
()) {

637 
d–‘e
 
idClÚe
;

638 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

641 
»suÉ
.
	`addEËm’t
(
idClÚe
, 
¡©us
);

642 ià(
	`U_FAILURE
(
¡©us
)) {

643 
d–‘e
 
idClÚe
;

647 
d–‘e
 
çÎbackKey
;

650 ià(
	`U_FAILURE
(
¡©us
)) {

651 
»suÉ
.
	`»moveAÎEËm’ts
();

653  
»suÉ
;

654 
	}
}

656 cÚ¡ 
HashbË
*

657 
	gICUS”viû
::
	$g‘VisibËIDM­
(
UE¼ÜCode
& 
¡©us
) const {

658 ià(
	`U_FAILURE
(
¡©us
)è 
NULL
;

662 
ICUS”viû
* 
nùhis
 = (ICUS”viû*)
this
;

663 ià(
idCache
 =ğ
NULL
) {

664 
nùhis
->
idCache
 = 
Ãw
 
	`HashbË
(
¡©us
);

665 ià(
idCache
 =ğ
NULL
) {

666 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

667 } ià(
çùÜ›s
 !ğ
NULL
) {

668 
št32_t
 
pos
 = 
çùÜ›s
->
	`size
(); --pos >= 0;) {

669 
ICUS”viûFaùÜy
* 
f
 = (ICUS”viûFaùÜy*)
çùÜ›s
->
	`–em’tAt
(
pos
);

670 
f
->
	`upd©eVisibËIDs
(*
idCache
, 
¡©us
);

672 ià(
	`U_FAILURE
(
¡©us
)) {

673 
d–‘e
 
idCache
;

674 
nùhis
->
idCache
 = 
NULL
;

679  
idCache
;

680 
	}
}

683 
	gUnicodeSŒšg
&

684 
	gICUS”viû
::
	$g‘Di¥ÏyName
(cÚ¡ 
UnicodeSŒšg
& 
id
, UnicodeSŒšg& 
»suÉ
) const

686  
	`g‘Di¥ÏyName
(
id
, 
»suÉ
, 
LoÿË
::
	`g‘DeçuÉ
());

687 
	}
}

689 
	gUnicodeSŒšg
&

690 
	gICUS”viû
::
	$g‘Di¥ÏyName
(cÚ¡ 
UnicodeSŒšg
& 
id
, UnicodeSŒšg& 
»suÉ
, cÚ¡ 
LoÿË
& 
loÿË
) const

693 
ICUS”viû
* 
nùhis
 = (ICUS”viû*)
this
;

694 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

695 
Mu‹x
 
	`mu‹x
(&
nùhis
->
lock
);

696 cÚ¡ 
HashbË
* 
m­
 = 
	`g‘VisibËIDM­
(
¡©us
);

697 ià(
m­
 !ğ
NULL
) {

698 
ICUS”viûFaùÜy
* 
f
 = (ICUS”viûFaùÜy*)
m­
->
	`g‘
(
id
);

699 ià(
f
 !ğ
NULL
) {

700 
f
->
	`g‘Di¥ÏyName
(
id
, 
loÿË
, 
»suÉ
);

701  
»suÉ
;

705 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

706 
ICUS”viûKey
* 
çÎbackKey
 = 
	`ü—‹Key
(&
id
, 
¡©us
);

707 
çÎbackKey
->
	`çÎback
()) {

708 
UnicodeSŒšg
 
us
;

709 
çÎbackKey
->
	`cu¼’tID
(
us
);

710 
f
 = (
ICUS”viûFaùÜy
*)
m­
->
	`g‘
(
us
);

711 ià(
f
 !ğ
NULL
) {

712 
f
->
	`g‘Di¥ÏyName
(
id
, 
loÿË
, 
»suÉ
);

713 
d–‘e
 
çÎbackKey
;

714  
»suÉ
;

717 
d–‘e
 
çÎbackKey
;

720 
»suÉ
.
	`£tToBogus
();

721  
»suÉ
;

722 
	}
}

724 
	gUVeùÜ
&

725 
	gICUS”viû
::
	$g‘Di¥ÏyNames
(
UVeùÜ
& 
»suÉ
, 
UE¼ÜCode
& 
¡©us
) const

727  
	`g‘Di¥ÏyNames
(
»suÉ
, 
LoÿË
::
	`g‘DeçuÉ
(), 
NULL
, 
¡©us
);

728 
	}
}

731 
	gUVeùÜ
&

732 
	gICUS”viû
::
	$g‘Di¥ÏyNames
(
UVeùÜ
& 
»suÉ
, cÚ¡ 
LoÿË
& 
loÿË
, 
UE¼ÜCode
& 
¡©us
) const

734  
	`g‘Di¥ÏyNames
(
»suÉ
, 
loÿË
, 
NULL
, 
¡©us
);

735 
	}
}

737 
	gUVeùÜ
&

738 
	gICUS”viû
::
	$g‘Di¥ÏyNames
(
UVeùÜ
& 
»suÉ
,

739 cÚ¡ 
LoÿË
& 
loÿË
,

740 cÚ¡ 
UnicodeSŒšg
* 
m©chID
,

741 
UE¼ÜCode
& 
¡©us
) const

743 
»suÉ
.
	`»moveAÎEËm’ts
();

744 
»suÉ
.
	`£tD–‘”
(
u£rv_d–‘eSŒšgPaœ
);

745 ià(
	`U_SUCCESS
(
¡©us
)) {

746 
ICUS”viû
* 
nùhis
 = (ICUS”viû*)
this
;

747 
Mu‹x
 
	`mu‹x
(&
nùhis
->
lock
);

749 ià(
dnCache
 !ğ
NULL
 && dnCache->
loÿË
 !=†ocale) {

750 
d–‘e
 
dnCache
;

751 
nùhis
->
dnCache
 = 
NULL
;

754 ià(
dnCache
 =ğ
NULL
) {

755 cÚ¡ 
HashbË
* 
m
 = 
	`g‘VisibËIDM­
(
¡©us
);

756 ià(
m
 !ğ
NULL
) {

757 
nùhis
->
dnCache
 = 
Ãw
 
	`DNCache
(
loÿË
);

758 ià(
dnCache
 =ğ
NULL
) {

759 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

760  
»suÉ
;

763 
št32_t
 
pos
 = -1;

764 cÚ¡ 
UHashEËm’t
* 
’Œy
 = 
NULL
;

765 (
’Œy
 = 
m
->
	`ÃxtEËm’t
(
pos
)è!ğ
NULL
) {

766 cÚ¡ 
UnicodeSŒšg
* 
id
 = (cÚ¡ UnicodeSŒšg*)
’Œy
->
key
.
poš‹r
;

767 
ICUS”viûFaùÜy
* 
f
 = (ICUS”viûFaùÜy*)
’Œy
->
v®ue
.
poš‹r
;

768 
UnicodeSŒšg
 
dÇme
;

769 
f
->
	`g‘Di¥ÏyName
(*
id
, 
loÿË
, 
dÇme
);

770 ià(
dÇme
.
	`isBogus
()) {

771 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

773 
dnCache
->
ÿche
.
	`put
(
dÇme
, (*)
id
, 
¡©us
);

774 ià(
	`U_SUCCESS
(
¡©us
)) {

778 
d–‘e
 
dnCache
;

779 
nùhis
->
dnCache
 = 
NULL
;

780  
»suÉ
;

786 
ICUS”viûKey
* 
m©chKey
 = 
	`ü—‹Key
(
m©chID
, 
¡©us
);

791 
št32_t
 
pos
 = -1;

792 cÚ¡ 
UHashEËm’t
 *
’Œy
 = 
NULL
;

793 (
’Œy
 = 
dnCache
->
ÿche
.
	`ÃxtEËm’t
(
pos
)è!ğ
NULL
) {

794 cÚ¡ 
UnicodeSŒšg
* 
id
 = (cÚ¡ UnicodeSŒšg*)
’Œy
->
v®ue
.
poš‹r
;

795 ià(
m©chKey
 !ğ
NULL
 && !m©chKey->
	`isF®lbackOf
(*
id
)) {

798 cÚ¡ 
UnicodeSŒšg
* 
dn
 = (cÚ¡ UnicodeSŒšg*)
’Œy
->
key
.
poš‹r
;

799 
SŒšgPaœ
* 
¥
 = SŒšgPaœ::
	`ü—‹
(*
id
, *
dn
, 
¡©us
);

800 
»suÉ
.
	`addEËm’t
(
¥
, 
¡©us
);

801 ià(
	`U_FAILURE
(
¡©us
)) {

802 
»suÉ
.
	`»moveAÎEËm’ts
();

806 
d–‘e
 
m©chKey
;

808  
»suÉ
;

809 
	}
}

811 
URegi¡ryKey


812 
	gICUS”viû
::
	$»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
id
, 
UE¼ÜCode
& 
¡©us
)

814  
	`»gi¡”In¡ªû
(
objToAdİt
, 
id
, 
TRUE
, 
¡©us
);

815 
	}
}

817 
URegi¡ryKey


818 
	gICUS”viû
::
	$»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
id
, 
UBoŞ
 
visibË
, 
UE¼ÜCode
& 
¡©us
)

820 
ICUS”viûKey
* 
key
 = 
	`ü—‹Key
(&
id
, 
¡©us
);

821 ià(
key
 !ğ
NULL
) {

822 
UnicodeSŒšg
 
ÿnÚiÿlID
;

823 
key
->
	`ÿnÚiÿlID
(
ÿnÚiÿlID
);

824 
d–‘e
 
key
;

826 
ICUS”viûFaùÜy
* 
f
 = 
	`ü—‹Sim¶eFaùÜy
(
objToAdİt
, 
ÿnÚiÿlID
, 
visibË
, 
¡©us
);

827 ià(
f
 !ğ
NULL
) {

828  
	`»gi¡”FaùÜy
(
f
, 
¡©us
);

831 
d–‘e
 
objToAdİt
;

832  
NULL
;

833 
	}
}

835 
ICUS”viûFaùÜy
*

836 
	gICUS”viû
::
	$ü—‹Sim¶eFaùÜy
(
UObjeù
* 
objToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
id
, 
UBoŞ
 
visibË
, 
UE¼ÜCode
& 
¡©us
)

838 ià(
	`U_SUCCESS
(
¡©us
)) {

839 ià((
objToAdİt
 !ğ
NULL
è&& (!
id
.
	`isBogus
())) {

840  
Ãw
 
	`Sim¶eFaùÜy
(
objToAdİt
, 
id
, 
visibË
);

842 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

844  
NULL
;

845 
	}
}

847 
URegi¡ryKey


848 
	gICUS”viû
::
	$»gi¡”FaùÜy
(
ICUS”viûFaùÜy
* 
çùÜyToAdİt
, 
UE¼ÜCode
& 
¡©us
)

850 ià(
	`U_SUCCESS
(
¡©us
è&& 
çùÜyToAdİt
 !ğ
NULL
) {

851 
Mu‹x
 
	`mu‹x
(&
lock
);

853 ià(
çùÜ›s
 =ğ
NULL
) {

854 
çùÜ›s
 = 
Ãw
 
	`UVeùÜ
(
d–‘eUObjeù
, 
NULL
, 
¡©us
);

855 ià(
	`U_FAILURE
(
¡©us
)) {

856 
d–‘e
 
çùÜ›s
;

857  
NULL
;

860 
çùÜ›s
->
	`š£¹EËm’tAt
(
çùÜyToAdİt
, 0, 
¡©us
);

861 ià(
	`U_SUCCESS
(
¡©us
)) {

862 
	`ş—rCaches
();

864 
d–‘e
 
çùÜyToAdİt
;

865 
çùÜyToAdİt
 = 
NULL
;

869 ià(
çùÜyToAdİt
 !ğ
NULL
) {

870 
	`nÙifyChªged
();

873  (
URegi¡ryKey
)
çùÜyToAdİt
;

874 
	}
}

876 
UBoŞ


877 
	gICUS”viû
::
	$uÄegi¡”
(
URegi¡ryKey
 
rkey
, 
UE¼ÜCode
& 
¡©us
)

879 
ICUS”viûFaùÜy
 *
çùÜy
 = (ICUS”viûFaùÜy*)
rkey
;

880 
UBoŞ
 
»suÉ
 = 
FALSE
;

881 ià(
çùÜy
 !ğ
NULL
 && 
çùÜ›s
 != NULL) {

882 
Mu‹x
 
	`mu‹x
(&
lock
);

884 ià(
çùÜ›s
->
	`»moveEËm’t
(
çùÜy
)) {

885 
	`ş—rCaches
();

886 
»suÉ
 = 
TRUE
;

888 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

889 
d–‘e
 
çùÜy
;

892 ià(
»suÉ
) {

893 
	`nÙifyChªged
();

895  
»suÉ
;

896 
	}
}

899 
	gICUS”viû
::
	$»£t
()

902 
Mu‹x
 
	`mu‹x
(&
lock
);

903 
	`»In™ŸlizeFaùÜ›s
();

904 
	`ş—rCaches
();

906 
	`nÙifyChªged
();

907 
	}
}

910 
	gICUS”viû
::
	$»In™ŸlizeFaùÜ›s
()

912 ià(
çùÜ›s
 !ğ
NULL
) {

913 
çùÜ›s
->
	`»moveAÎEËm’ts
();

915 
	}
}

917 
UBoŞ


918 
	gICUS”viû
::
	$isDeçuÉ
() const

920  
	`couÁFaùÜ›s
() == 0;

921 
	}
}

923 
ICUS”viûKey
*

924 
	gICUS”viû
::
	$ü—‹Key
(cÚ¡ 
UnicodeSŒšg
* 
id
, 
UE¼ÜCode
& 
¡©us
) const

926  (
	`U_FAILURE
(
¡©us
è|| 
id
 =ğ
NULL
è? NULL : 
Ãw
 
	`ICUS”viûKey
(*id);

927 
	}
}

930 
	gICUS”viû
::
	$ş—rCaches
()

933 ++
time¡amp
;

934 
d–‘e
 
dnCache
;

935 
dnCache
 = 
NULL
;

936 
d–‘e
 
idCache
;

937 
idCache
 = 
NULL
;

938 
d–‘e
 
£rviûCache
; s”viûCachğ
NULL
;

939 
	}
}

942 
	gICUS”viû
::
	$ş—rS”viûCache
()

945 
d–‘e
 
£rviûCache
; s”viûCachğ
NULL
;

946 
	}
}

948 
UBoŞ


949 
	gICUS”viû
::
	$acû±sLi¡’”
(cÚ¡ 
Ev’tLi¡’”
& 
l
) const

951  
dyÇmic_ÿ¡
<cÚ¡ 
S”viûLi¡’”
*>(&
l
è!ğ
NULL
;

952 
	}
}

955 
	gICUS”viû
::
	$nÙifyLi¡’”
(
Ev’tLi¡’”
& 
l
) const

957 ((
S”viûLi¡’”
&)
l
).
	`£rviûChªged
(*
this
);

958 
	}
}

960 
	gUnicodeSŒšg
&

961 
	gICUS”viû
::
	$g‘Name
(
UnicodeSŒšg
& 
»suÉ
) const

963  
»suÉ
.
	`­³nd
(
Çme
);

964 
	}
}

966 
št32_t


967 
	gICUS”viû
::
	$couÁFaùÜ›s
() const

969  
çùÜ›s
 =ğ
NULL
 ? 0 : faùÜ›s->
	`size
();

970 
	}
}

972 
št32_t


973 
	gICUS”viû
::
	$g‘Time¡amp
() const

975  
time¡amp
;

976 
	}
}

978 
	gU_NAMESPACE_END


	@serv.h

8 #iâdeà
ICUSERV_H


9 
	#ICUSERV_H


	)

11 
	~"unicode/uty³s.h
"

13 #ià
UCONFIG_NO_SERVICE


15 
U_NAMESPACE_BEGIN


21 
şass
 
	gICUS”viû
;

23 
	gU_NAMESPACE_END


27 
	~"unicode/uni¡r.h
"

28 
	~"unicode/locid.h
"

29 
	~"unicode/umisc.h
"

31 
	~"hash.h
"

32 
	~"uveùÜ.h
"

33 
	~"£rvnÙf.h
"

35 
şass
 
	gICUS”viûTe¡
;

37 
U_NAMESPACE_BEGIN


39 
şass
 
	gICUS”viûKey
;

40 
şass
 
	gICUS”viûFaùÜy
;

41 
şass
 
	gSim¶eFaùÜy
;

42 
şass
 
	gS”viûLi¡’”
;

43 
şass
 
	gICUS”viû
;

45 
şass
 
	gDNCache
;

70 şas 
	cU_COMMON_API
 
	mICUS”viûKey
 : 
public
 
UObjeù
 {

71 
´iv©e
:

72 cÚ¡ 
UnicodeSŒšg
 
_id
;

74 
	m´Ùeùed
:

75 cÚ¡ 
UCh¬
 
PREFIX_DELIMITER
;

77 
	mpublic
:

84 
ICUS”viûKey
(cÚ¡ 
UnicodeSŒšg
& 
id
);

89 
	mvœtu®
 ~
ICUS”viûKey
();

96 
vœtu®
 cÚ¡ 
	mUnicodeSŒšg
& 
	$g‘ID
() const;

105 
vœtu®
 
UnicodeSŒšg
& 
	$ÿnÚiÿlID
(
UnicodeSŒšg
& 
»suÉ
) const;

114 
vœtu®
 
UnicodeSŒšg
& 
	$cu¼’tID
(
UnicodeSŒšg
& 
»suÉ
) const;

130 
vœtu®
 
UnicodeSŒšg
& 
	$cu¼’tDesütÜ
(
UnicodeSŒšg
& 
»suÉ
) const;

141 
vœtu®
 
UBoŞ
 
	`çÎback
();

150 
vœtu®
 
UBoŞ
 
	$isF®lbackOf
(cÚ¡ 
UnicodeSŒšg
& 
id
) const;

159 
vœtu®
 
UnicodeSŒšg
& 
	$´efix
(
UnicodeSŒšg
& 
»suÉ
) const;

170 
UnicodeSŒšg
& 
	`·r£P»fix
(UnicodeSŒšg& 
»suÉ
);

181 
UnicodeSŒšg
& 
	`·r£Suffix
(UnicodeSŒšg& 
»suÉ
);

183 
public
:

187 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

192 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

194 #ifdeà
SERVICE_DEBUG


195 
public
:

196 
vœtu®
 
UnicodeSŒšg
& 
	$debug
(
UnicodeSŒšg
& 
»suÉ
) const;

197 
vœtu®
 
UnicodeSŒšg
& 
	$debugCÏss
(
UnicodeSŒšg
& 
»suÉ
) const;

212 şas 
	cU_COMMON_API
 
ICUS”viûFaùÜy
 : 
public
 
UObjeù
 {

213 
public
:

232 
vœtu®
 
UObjeù
* 
	$ü—‹
(cÚ¡ 
ICUS”viûKey
& 
key
, cÚ¡ 
ICUS”viû
* 
£rviû
, 
UE¼ÜCode
& 
¡©us
) const = 0;

250 
vœtu®
 
	$upd©eVisibËIDs
(
HashbË
& 
»suÉ
, 
UE¼ÜCode
& 
¡©us
) const = 0;

265 
vœtu®
 
UnicodeSŒšg
& 
	$g‘Di¥ÏyName
(cÚ¡ 
UnicodeSŒšg
& 
id
, cÚ¡ 
LoÿË
& 
loÿË
, UnicodeSŒšg& 
»suÉ
) const = 0;

282 şas 
	cU_COMMON_API
 
Sim¶eFaùÜy
 : 
public
 
ICUS”viûFaùÜy
 {

283 
´Ùeùed
:

284 
UObjeù
* 
_š¡ªû
;

285 cÚ¡ 
UnicodeSŒšg
 
_id
;

286 cÚ¡ 
UBoŞ
 
_visibË
;

288 
public
:

299 
	`Sim¶eFaùÜy
(
UObjeù
* 
š¡ªûToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
id
, 
UBoŞ
 
visibË
 = 
TRUE
);

304 
vœtu®
 ~
	`Sim¶eFaùÜy
();

315 
vœtu®
 
UObjeù
* 
	$ü—‹
(cÚ¡ 
ICUS”viûKey
& 
key
, cÚ¡ 
ICUS”viû
* 
£rviû
, 
UE¼ÜCode
& 
¡©us
) const;

324 
vœtu®
 
	$upd©eVisibËIDs
(
HashbË
& 
»suÉ
, 
UE¼ÜCode
& 
¡©us
) const;

336 
vœtu®
 
UnicodeSŒšg
& 
	$g‘Di¥ÏyName
(cÚ¡ 
UnicodeSŒšg
& 
id
, cÚ¡ 
LoÿË
& 
loÿË
, UnicodeSŒšg& 
»suÉ
) const;

338 
public
:

342 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

347 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

349 #ifdeà
SERVICE_DEBUG


350 
public
:

351 
vœtu®
 
UnicodeSŒšg
& 
	$debug
(
UnicodeSŒšg
& 
toAµ’dTo
) const;

352 
vœtu®
 
UnicodeSŒšg
& 
	$debugCÏss
(
UnicodeSŒšg
& 
toAµ’dTo
) const;

368 şas 
	cU_COMMON_API
 
S”viûLi¡’”
 : 
public
 
Ev’tLi¡’”
 {

369 
public
:

377 
vœtu®
 
	$£rviûChªged
(cÚ¡ 
ICUS”viû
& 
£rviû
) const = 0;

379 
public
:

383 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

388 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

400 şas 
	cU_COMMON_API
 
SŒšgPaœ
 : 
public
 
UMemÜy
 {

401 
public
:

405 cÚ¡ 
UnicodeSŒšg
 
di¥ÏyName
;

410 cÚ¡ 
UnicodeSŒšg
 
id
;

420 
SŒšgPaœ
* 
	`ü—‹
(cÚ¡ 
UnicodeSŒšg
& 
di¥ÏyName
,

421 cÚ¡ 
UnicodeSŒšg
& 
id
,

422 
UE¼ÜCode
& 
¡©us
);

428 
UBoŞ
 
	$isBogus
() const;

430 
´iv©e
:

431 
	`SŒšgPaœ
(cÚ¡ 
UnicodeSŒšg
& 
di¥ÏyName
, cÚ¡ UnicodeSŒšg& 
id
);

521 şas 
	cU_COMMON_API
 
ICUS”viû
 : 
public
 
ICUNÙif›r
 {

522 
´Ùeùed
:

526 cÚ¡ 
UnicodeSŒšg
 
Çme
;

528 
´iv©e
:

533 
UMTX
 
lock
;

538 
ušt32_t
 
time¡amp
;

543 
UVeùÜ
* 
çùÜ›s
;

548 
HashbË
* 
£rviûCache
;

553 
HashbË
* 
idCache
;

558 
DNCache
* 
dnCache
;

563 
public
:

567 
	`ICUS”viû
();

574 
	`ICUS”viû
(cÚ¡ 
UnicodeSŒšg
& 
Çme
);

579 
vœtu®
 ~
	`ICUS”viû
();

588 
UnicodeSŒšg
& 
	$g‘Name
(
UnicodeSŒšg
& 
»suÉ
) const;

598 
UObjeù
* 
	$g‘
(cÚ¡ 
UnicodeSŒšg
& 
desütÜ
, 
UE¼ÜCode
& 
¡©us
) const;

609 
UObjeù
* 
	$g‘
(cÚ¡ 
UnicodeSŒšg
& 
desütÜ
, UnicodeSŒšg* 
aùu®R‘uº
, 
UE¼ÜCode
& 
¡©us
) const;

618 
UObjeù
* 
	$g‘Key
(
ICUS”viûKey
& 
key
, 
UE¼ÜCode
& 
¡©us
) const;

642 
vœtu®
 
UObjeù
* 
	$g‘Key
(
ICUS”viûKey
& 
key
, 
UnicodeSŒšg
* 
aùu®R‘uº
, 
UE¼ÜCode
& 
¡©us
) const;

656 
UObjeù
* 
	$g‘Key
(
ICUS”viûKey
& 
key
, 
UnicodeSŒšg
* 
aùu®R‘uº
, cÚ¡ 
ICUS”viûFaùÜy
* 
çùÜy
, 
UE¼ÜCode
& 
¡©us
) const;

666 
UVeùÜ
& 
	$g‘VisibËIDs
(
UVeùÜ
& 
»suÉ
, 
UE¼ÜCode
& 
¡©us
) const;

688 
UVeùÜ
& 
	$g‘VisibËIDs
(
UVeùÜ
& 
»suÉ
, cÚ¡ 
UnicodeSŒšg
* 
m©chID
, 
UE¼ÜCode
& 
¡©us
) const;

698 
UnicodeSŒšg
& 
	$g‘Di¥ÏyName
(cÚ¡ 
UnicodeSŒšg
& 
id
, UnicodeSŒšg& 
»suÉ
) const;

710 
UnicodeSŒšg
& 
	$g‘Di¥ÏyName
(cÚ¡ 
UnicodeSŒšg
& 
id
, UnicodeSŒšg& 
»suÉ
, cÚ¡ 
LoÿË
& 
loÿË
) const;

721 
UVeùÜ
& 
	$g‘Di¥ÏyNames
(
UVeùÜ
& 
»suÉ
, 
UE¼ÜCode
& 
¡©us
) const;

732 
UVeùÜ
& 
	$g‘Di¥ÏyNames
(
UVeùÜ
& 
»suÉ
, cÚ¡ 
LoÿË
& 
loÿË
, 
UE¼ÜCode
& 
¡©us
) const;

757 
UVeùÜ
& 
	$g‘Di¥ÏyNames
(
UVeùÜ
& 
»suÉ
,

758 cÚ¡ 
LoÿË
& 
loÿË
,

759 cÚ¡ 
UnicodeSŒšg
* 
m©chID
,

760 
UE¼ÜCode
& 
¡©us
) const;

772 
URegi¡ryKey
 
	`»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
id
, 
UE¼ÜCode
& 
¡©us
);

792 
vœtu®
 
URegi¡ryKey
 
	`»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
id
, 
UBoŞ
 
visibË
, 
UE¼ÜCode
& 
¡©us
);

810 
vœtu®
 
URegi¡ryKey
 
	`»gi¡”FaùÜy
(
ICUS”viûFaùÜy
* 
çùÜyToAdİt
, 
UE¼ÜCode
& 
¡©us
);

825 
vœtu®
 
UBoŞ
 
	`uÄegi¡”
(
URegi¡ryKey
 
rkey
, 
UE¼ÜCode
& 
¡©us
);

833 
vœtu®
 
	`»£t
();

841 
vœtu®
 
UBoŞ
 
	$isDeçuÉ
() const;

854 
vœtu®
 
ICUS”viûKey
* 
	$ü—‹Key
(cÚ¡ 
UnicodeSŒšg
* 
id
, 
UE¼ÜCode
& 
¡©us
) const;

864 
vœtu®
 
UObjeù
* 
	$şÚeIn¡ªû
(
UObjeù
* 
š¡ªû
) const = 0;

871 
´Ùeùed
:

884 
vœtu®
 
ICUS”viûFaùÜy
* 
	`ü—‹Sim¶eFaùÜy
(
UObjeù
* 
š¡ªûToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
id
, 
UBoŞ
 
visibË
, 
UE¼ÜCode
& 
¡©us
);

898 
vœtu®
 
	`»In™ŸlizeFaùÜ›s
();

911 
vœtu®
 
UObjeù
* 
	$hªdËDeçuÉ
(cÚ¡ 
ICUS”viûKey
& 
key
, 
UnicodeSŒšg
* 
aùu®R‘uº
, 
UE¼ÜCode
& 
¡©us
) const;

921 
vœtu®
 
	`ş—rCaches
();

933 
vœtu®
 
UBoŞ
 
	$acû±sLi¡’”
(cÚ¡ 
Ev’tLi¡’”
& 
l
) const;

944 
vœtu®
 
	$nÙifyLi¡’”
(
Ev’tLi¡’”
& 
l
) const;

958 
	`ş—rS”viûCache
();

968 cÚ¡ 
HashbË
* 
	$g‘VisibËIDM­
(
UE¼ÜCode
& 
¡©us
) const;

975 
št32_t
 
	$g‘Time¡amp
() const;

982 
št32_t
 
	$couÁFaùÜ›s
() const;

984 
´iv©e
:

986 
ä›nd
 
şass
 ::
ICUS”viûTe¡
;

989 
U_NAMESPACE_END


	@servlk.cpp

9 
	~"unicode/uty³s.h
"

11 #ià!
UCONFIG_NO_SERVICE


13 
	~"unicode/»sbund.h
"

14 
	~"u»simp.h
"

15 
	~"cmemÜy.h
"

16 
	~"£rvloc.h
"

17 
	~"u¡rfmt.h
"

18 
	~"uhash.h
"

19 
	~"ch¬¡r.h
"

20 
	~"uşn_cmn.h
"

21 
	~"uas£¹.h
"

23 
	#UNDERSCORE_CHAR
 ((
UCh¬
)0x005f)

	)

24 
	#AT_SIGN_CHAR
 ((
UCh¬
)64)

	)

25 
	#PERIOD_CHAR
 ((
UCh¬
)46)

	)

27 
U_NAMESPACE_BEGIN


29 
LoÿËKey
*

30 
	gLoÿËKey
::
	$ü—‹W™hCªÚiÿlF®lback
(cÚ¡ 
UnicodeSŒšg
* 
´im¬yID
,

31 cÚ¡ 
UnicodeSŒšg
* 
ÿnÚiÿlF®lbackID
,

32 
UE¼ÜCode
& 
¡©us
)

34  
LoÿËKey
::
	`ü—‹W™hCªÚiÿlF®lback
(
´im¬yID
, 
ÿnÚiÿlF®lbackID
, 
KIND_ANY
, 
¡©us
);

35 
	}
}

37 
LoÿËKey
*

38 
	gLoÿËKey
::
	$ü—‹W™hCªÚiÿlF®lback
(cÚ¡ 
UnicodeSŒšg
* 
´im¬yID
,

39 cÚ¡ 
UnicodeSŒšg
* 
ÿnÚiÿlF®lbackID
,

40 
št32_t
 
kšd
,

41 
UE¼ÜCode
& 
¡©us
)

43 ià(
´im¬yID
 =ğ
NULL
 || 
	`U_FAILURE
(
¡©us
)) {

44  
NULL
;

46 
UnicodeSŒšg
 
ÿnÚiÿlPrim¬yID
;

47 
LoÿËUt™y
::
	`ÿnÚiÿlLoÿËSŒšg
(
´im¬yID
, 
ÿnÚiÿlPrim¬yID
);

48  
Ãw
 
	`LoÿËKey
(*
´im¬yID
, 
ÿnÚiÿlPrim¬yID
, 
ÿnÚiÿlF®lbackID
, 
kšd
);

49 
	}
}

51 
	gLoÿËKey
::
	$LoÿËKey
(cÚ¡ 
UnicodeSŒšg
& 
´im¬yID
,

52 cÚ¡ 
UnicodeSŒšg
& 
ÿnÚiÿlPrim¬yID
,

53 cÚ¡ 
UnicodeSŒšg
* 
ÿnÚiÿlF®lbackID
,

54 
št32_t
 
kšd
)

55 : 
	`ICUS”viûKey
(
´im¬yID
)

56 , 
	`_kšd
(
kšd
)

57 , 
	`_´im¬yID
(
ÿnÚiÿlPrim¬yID
)

58 , 
	`_çÎbackID
()

59 , 
	$_cu¼’tID
()

61 
_çÎbackID
.
	`£tToBogus
();

62 ià(
_´im¬yID
.
	`Ëngth
() != 0) {

63 ià(
ÿnÚiÿlF®lbackID
 !ğ
NULL
 && 
_´im¬yID
 != *canonicalFallbackID) {

64 
_çÎbackID
 = *
ÿnÚiÿlF®lbackID
;

68 
_cu¼’tID
 = 
_´im¬yID
;

69 
	}
}

71 
	gLoÿËKey
::~
	$LoÿËKey
(è{
	}
}

73 
UnicodeSŒšg
&

74 
LoÿËKey
::
	$´efix
(
UnicodeSŒšg
& 
»suÉ
) const {

75 ià(
_kšd
 !ğ
KIND_ANY
) {

76 
UCh¬
 
bufãr
[64];

77 
	`u´v_™ou
(
bufãr
, 64, 
_kšd
, 10, 0);

78 
UnicodeSŒšg
 
	`‹mp
(
bufãr
);

79 
»suÉ
.
	`­³nd
(
‹mp
);

81  
»suÉ
;

82 
	}
}

84 
št32_t


85 
	gLoÿËKey
::
	$kšd
() const {

86  
_kšd
;

87 
	}
}

89 
	gUnicodeSŒšg
&

90 
	gLoÿËKey
::
	$ÿnÚiÿlID
(
UnicodeSŒšg
& 
»suÉ
) const {

91  
»suÉ
.
	`­³nd
(
_´im¬yID
);

92 
	}
}

94 
	gUnicodeSŒšg
&

95 
	gLoÿËKey
::
	$cu¼’tID
(
UnicodeSŒšg
& 
»suÉ
) const {

96 ià(!
_cu¼’tID
.
	`isBogus
()) {

97 
»suÉ
.
	`­³nd
(
_cu¼’tID
);

99  
»suÉ
;

100 
	}
}

102 
	gUnicodeSŒšg
&

103 
	gLoÿËKey
::
	$cu¼’tDesütÜ
(
UnicodeSŒšg
& 
»suÉ
) const {

104 ià(!
_cu¼’tID
.
	`isBogus
()) {

105 
	`´efix
(
»suÉ
).
	`­³nd
(
PREFIX_DELIMITER
).­³nd(
_cu¼’tID
);

107 
»suÉ
.
	`£tToBogus
();

109  
»suÉ
;

110 
	}
}

112 
	gLoÿË
&

113 
	gLoÿËKey
::
	$ÿnÚiÿlLoÿË
(
LoÿË
& 
»suÉ
) const {

114  
LoÿËUt™y
::
	`š™LoÿËFromName
(
_´im¬yID
, 
»suÉ
);

115 
	}
}

117 
	gLoÿË
&

118 
	gLoÿËKey
::
	$cu¼’tLoÿË
(
LoÿË
& 
»suÉ
) const {

119  
LoÿËUt™y
::
	`š™LoÿËFromName
(
_cu¼’tID
, 
»suÉ
);

120 
	}
}

122 
UBoŞ


123 
	gLoÿËKey
::
	$çÎback
() {

124 ià(!
_cu¼’tID
.
	`isBogus
()) {

125 
x
 = 
_cu¼’tID
.
	`Ï¡IndexOf
(
UNDERSCORE_CHAR
);

126 ià(
x
 != -1) {

127 
_cu¼’tID
.
	`»move
(
x
);

128  
TRUE
;

131 ià(!
_çÎbackID
.
	`isBogus
()) {

132 
_cu¼’tID
 = 
_çÎbackID
;

133 
_çÎbackID
.
	`£tToBogus
();

134  
TRUE
;

137 ià(
_cu¼’tID
.
	`Ëngth
() > 0) {

138 
_cu¼’tID
.
	`»move
(0);

139  
TRUE
;

142 
_cu¼’tID
.
	`£tToBogus
();

145  
FALSE
;

146 
	}
}

148 
UBoŞ


149 
	gLoÿËKey
::
	$isF®lbackOf
(cÚ¡ 
UnicodeSŒšg
& 
id
) const {

150 
UnicodeSŒšg
 
	`‹mp
(
id
);

151 
	`·r£Suffix
(
‹mp
);

152  
‹mp
.
	`šdexOf
(
_´im¬yID
) == 0 &&

153 (
‹mp
.
	`Ëngth
(è=ğ
_´im¬yID
.length() ||

154 
‹mp
.
	`ch¬At
(
_´im¬yID
.
	`Ëngth
()è=ğ
UNDERSCORE_CHAR
);

155 
	}
}

157 #ifdeà
SERVICE_DEBUG


158 
	gUnicodeSŒšg
&

159 
	gLoÿËKey
::
	$debug
(
UnicodeSŒšg
& 
»suÉ
) const

161 
ICUS”viûKey
::
	`debug
(
»suÉ
);

162 
»suÉ
.
	`­³nd
(" kind: ");

163 
»suÉ
.
	`­³nd
(
_kšd
);

164 
»suÉ
.
	`­³nd
("…rimaryID: ");

165 
»suÉ
.
	`­³nd
(
_´im¬yID
);

166 
»suÉ
.
	`­³nd
(" fallbackID: ");

167 
»suÉ
.
	`­³nd
(
_çÎbackID
);

168 
»suÉ
.
	`­³nd
(" currentID: ");

169 
»suÉ
.
	`­³nd
(
_cu¼’tID
);

170  
»suÉ
;

171 
	}
}

173 
	gUnicodeSŒšg
&

174 
	gLoÿËKey
::
	$debugCÏss
(
UnicodeSŒšg
& 
»suÉ
) const

176  
»suÉ
.
	`­³nd
("LocaleKey ");

177 
	}
}

180 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
LoÿËKey
)

182 
U_NAMESPACE_END


	@servlkf.cpp

9 
	~"unicode/uty³s.h
"

11 #ià!
UCONFIG_NO_SERVICE


13 
	~"unicode/»sbund.h
"

14 
	~"u»simp.h
"

15 
	~"cmemÜy.h
"

16 
	~"£rvloc.h
"

17 
	~"u¡rfmt.h
"

18 
	~"uhash.h
"

19 
	~"ch¬¡r.h
"

20 
	~"uşn_cmn.h
"

21 
	~"uas£¹.h
"

23 
	#UNDERSCORE_CHAR
 ((
UCh¬
)0x005f)

	)

24 
	#AT_SIGN_CHAR
 ((
UCh¬
)64)

	)

25 
	#PERIOD_CHAR
 ((
UCh¬
)46)

	)

28 
U_NAMESPACE_BEGIN


30 
	gLoÿËKeyFaùÜy
::
	$LoÿËKeyFaùÜy
(
št32_t
 
cov”age
)

31 : 
	`_Çme
()

32 , 
	$_cov”age
(
cov”age
)

34 
	}
}

36 
	gLoÿËKeyFaùÜy
::
	$LoÿËKeyFaùÜy
(
št32_t
 
cov”age
, cÚ¡ 
UnicodeSŒšg
& 
Çme
)

37 : 
	`_Çme
(
Çme
)

38 , 
	$_cov”age
(
cov”age
)

40 
	}
}

42 
	gLoÿËKeyFaùÜy
::~
	$LoÿËKeyFaùÜy
() {

43 
	}
}

45 
UObjeù
*

46 
LoÿËKeyFaùÜy
::
	$ü—‹
(cÚ¡ 
ICUS”viûKey
& 
key
, cÚ¡ 
ICUS”viû
* 
£rviû
, 
UE¼ÜCode
& 
¡©us
) const {

47 ià(
	`hªdËsKey
(
key
, 
¡©us
)) {

48 cÚ¡ 
LoÿËKey
& 
lkey
 = (cÚ¡ LoÿËKey&)
key
;

49 
št32_t
 
kšd
 = 
lkey
.
	`kšd
();

50 
LoÿË
 
loc
;

51 
lkey
.
	`cu¼’tLoÿË
(
loc
);

53  
	`hªdËC»©e
(
loc
, 
kšd
, 
£rviû
, 
¡©us
);

55  
NULL
;

56 
	}
}

58 
UBoŞ


59 
	gLoÿËKeyFaùÜy
::
	$hªdËsKey
(cÚ¡ 
ICUS”viûKey
& 
key
, 
UE¼ÜCode
& 
¡©us
) const {

60 cÚ¡ 
HashbË
* 
suµÜ‹d
 = 
	`g‘SuµÜ‹dIDs
(
¡©us
);

61 ià(
suµÜ‹d
) {

62 
UnicodeSŒšg
 
id
;

63 
key
.
	`cu¼’tID
(
id
);

64  
suµÜ‹d
->
	`g‘
(
id
è!ğ
NULL
;

66  
FALSE
;

67 
	}
}

70 
	gLoÿËKeyFaùÜy
::
	$upd©eVisibËIDs
(
HashbË
& 
»suÉ
, 
UE¼ÜCode
& 
¡©us
) const {

71 cÚ¡ 
HashbË
* 
suµÜ‹d
 = 
	`g‘SuµÜ‹dIDs
(
¡©us
);

72 ià(
suµÜ‹d
) {

73 
UBoŞ
 
visibË
 = (
_cov”age
 & 0x1) == 0;

75 cÚ¡ 
UHashEËm’t
* 
–em
 = 
NULL
;

76 
št32_t
 
pos
 = 0;

77 (
–em
 = 
suµÜ‹d
->
	`ÃxtEËm’t
(
pos
)è!ğ
NULL
) {

78 cÚ¡ 
UnicodeSŒšg
& 
id
 = *((cÚ¡ UnicodeSŒšg*)
–em
->
key
.
poš‹r
);

79 ià(!
visibË
) {

80 
»suÉ
.
	`»move
(
id
);

82 
»suÉ
.
	`put
(
id
, (*)
this
, 
¡©us
);

83 ià(
	`U_FAILURE
(
¡©us
)) {

89 
	}
}

91 
	gUnicodeSŒšg
&

92 
	gLoÿËKeyFaùÜy
::
	$g‘Di¥ÏyName
(cÚ¡ 
UnicodeSŒšg
& 
id
, cÚ¡ 
LoÿË
& 
loÿË
, UnicodeSŒšg& 
»suÉ
) const {

93 ià((
_cov”age
 & 0x1) == 0) {

97 
LoÿË
 
loc
;

98 
LoÿËUt™y
::
	`š™LoÿËFromName
(
id
, 
loc
);

99  
loc
.
	`g‘Di¥ÏyName
(
loÿË
, 
»suÉ
);

102 
»suÉ
.
	`£tToBogus
();

103  
»suÉ
;

104 
	}
}

106 
UObjeù
*

107 
	gLoÿËKeyFaùÜy
::
	$hªdËC»©e
(cÚ¡ 
LoÿË
& ,

108 
št32_t
 ,

109 cÚ¡ 
ICUS”viû
* ,

110 
UE¼ÜCode
& ) const {

111  
NULL
;

112 
	}
}

120 cÚ¡ 
HashbË
*

121 
	gLoÿËKeyFaùÜy
::
	$g‘SuµÜ‹dIDs
(
UE¼ÜCode
& ) const {

122  
NULL
;

123 
	}
}

125 #ifdeà
SERVICE_DEBUG


126 
	gUnicodeSŒšg
&

127 
	gLoÿËKeyFaùÜy
::
	$debug
(
UnicodeSŒšg
& 
»suÉ
) const

129 
	`debugCÏss
(
»suÉ
);

130 
»suÉ
.
	`­³nd
(",‚ame: ");

131 
»suÉ
.
	`­³nd
(
_Çme
);

132 
»suÉ
.
	`­³nd
(", coverage: ");

133 
»suÉ
.
	`­³nd
(
_cov”age
);

134  
»suÉ
;

135 
	}
}

137 
	gUnicodeSŒšg
&

138 
	gLoÿËKeyFaùÜy
::
	$debugCÏss
(
UnicodeSŒšg
& 
»suÉ
) const

140  
»suÉ
.
	`­³nd
("LocaleKeyFactory");

141 
	}
}

144 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
LoÿËKeyFaùÜy
)

146 
U_NAMESPACE_END


	@servloc.h

9 #iâdeà
ICULSERV_H


10 
	#ICULSERV_H


	)

12 
	~"unicode/uty³s.h
"

14 #ià
UCONFIG_NO_SERVICE


16 
U_NAMESPACE_BEGIN


22 
şass
 
	gICULoÿËS”viû
;

24 
	gU_NAMESPACE_END


28 
	~"unicode/uni¡r.h
"

29 
	~"unicode/locid.h
"

30 
	~"unicode/¡»num.h
"

32 
	~"hash.h
"

33 
	~"uveùÜ.h
"

35 
	~"£rv.h
"

36 
	~"locut.h
"

38 
U_NAMESPACE_BEGIN


40 
şass
 
	gICULoÿËS”viû
;

42 
şass
 
	gLoÿËKey
;

43 
şass
 
	gLoÿËKeyFaùÜy
;

44 
şass
 
	gSim¶eLoÿËKeyFaùÜy
;

45 
şass
 
	gS”viûLi¡’”
;

64 şas 
	cU_COMMON_API
 
	mLoÿËKey
 : 
public
 
ICUS”viûKey
 {

65 
´iv©e
:

66 
št32_t
 
_kšd
;

67 
UnicodeSŒšg
 
	m_´im¬yID
;

68 
UnicodeSŒšg
 
	m_çÎbackID
;

69 
UnicodeSŒšg
 
	m_cu¼’tID
;

71 
	mpublic
:

73 
KIND_ANY
 = -1

79 
LoÿËKey
* 
ü—‹W™hCªÚiÿlF®lback
(cÚ¡ 
UnicodeSŒšg
* 
´im¬yID
,

80 cÚ¡ 
UnicodeSŒšg
* 
ÿnÚiÿlF®lbackID
,

81 
UE¼ÜCode
& 
¡©us
);

86 
LoÿËKey
* 
ü—‹W™hCªÚiÿlF®lback
(cÚ¡ 
UnicodeSŒšg
* 
´im¬yID
,

87 cÚ¡ 
UnicodeSŒšg
* 
ÿnÚiÿlF®lbackID
,

88 
št32_t
 
kšd
,

89 
UE¼ÜCode
& 
¡©us
);

91 
	g´Ùeùed
:

98 
LoÿËKey
(cÚ¡ 
UnicodeSŒšg
& 
´im¬yID
,

99 cÚ¡ 
UnicodeSŒšg
& 
ÿnÚiÿlPrim¬yID
,

100 cÚ¡ 
UnicodeSŒšg
* 
ÿnÚiÿlF®lbackID
,

101 
št32_t
 
kšd
);

103 
	gpublic
:

107 
vœtu®
 
UnicodeSŒšg
& 
	$´efix
(
UnicodeSŒšg
& 
»suÉ
) const;

112 
vœtu®
 
št32_t
 
	$kšd
() const;

117 
vœtu®
 
UnicodeSŒšg
& 
	$ÿnÚiÿlID
(
UnicodeSŒšg
& 
»suÉ
) const;

122 
vœtu®
 
UnicodeSŒšg
& 
	$cu¼’tID
(
UnicodeSŒšg
& 
»suÉ
) const;

127 
vœtu®
 
UnicodeSŒšg
& 
	$cu¼’tDesütÜ
(
UnicodeSŒšg
& 
»suÉ
) const;

132 
vœtu®
 
LoÿË
& 
	$ÿnÚiÿlLoÿË
(
LoÿË
& 
»suÉ
) const;

137 
vœtu®
 
LoÿË
& 
	$cu¼’tLoÿË
(
LoÿË
& 
»suÉ
) const;

148 
vœtu®
 
UBoŞ
 
	`çÎback
();

154 
vœtu®
 
UBoŞ
 
	$isF®lbackOf
(cÚ¡ 
UnicodeSŒšg
& 
id
) const;

156 
public
:

160 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

162 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

167 
vœtu®
 ~
	`LoÿËKey
();

169 #ifdeà
SERVICE_DEBUG


170 
public
:

171 
vœtu®
 
UnicodeSŒšg
& 
	$debug
(
UnicodeSŒšg
& 
»suÉ
) const;

172 
vœtu®
 
UnicodeSŒšg
& 
	$debugCÏss
(
UnicodeSŒšg
& 
»suÉ
) const;

175 
	}
};

195 şas 
	cU_COMMON_API
 
	mLoÿËKeyFaùÜy
 : 
public
 
ICUS”viûFaùÜy
 {

196 
´Ùeùed
:

197 cÚ¡ 
UnicodeSŒšg
 
_Çme
;

198 cÚ¡ 
št32_t
 
	m_cov”age
;

200 
	mpublic
:

207 
VISIBLE
 = 0,

214 
	mINVISIBLE
 = 1

220 
	gvœtu®
 ~
LoÿËKeyFaùÜy
();

222 
	g´Ùeùed
:

226 
LoÿËKeyFaùÜy
(
št32_t
 
cov”age
);

231 
LoÿËKeyFaùÜy
(
št32_t
 
cov”age
, cÚ¡ 
UnicodeSŒšg
& 
Çme
);

238 
	gpublic
:

239 
vœtu®
 
UObjeù
* 
	$ü—‹
(cÚ¡ 
ICUS”viûKey
& 
key
, cÚ¡ 
ICUS”viû
* 
£rviû
, 
UE¼ÜCode
& 
¡©us
) const;

241 
´Ùeùed
:

242 
vœtu®
 
UBoŞ
 
	$hªdËsKey
(cÚ¡ 
ICUS”viûKey
& 
key
, 
UE¼ÜCode
& 
¡©us
) const;

244 
public
:

249 
vœtu®
 
	$upd©eVisibËIDs
(
HashbË
& 
»suÉ
, 
UE¼ÜCode
& 
¡©us
) const;

254 
vœtu®
 
UnicodeSŒšg
& 
	$g‘Di¥ÏyName
(cÚ¡ 
UnicodeSŒšg
& 
id
, cÚ¡ 
LoÿË
& 
loÿË
, UnicodeSŒšg& 
»suÉ
) const;

256 
´Ùeùed
:

261 
vœtu®
 
UObjeù
* 
	$hªdËC»©e
(cÚ¡ 
LoÿË
& 
loc
, 
št32_t
 
kšd
, cÚ¡ 
ICUS”viû
* 
£rviû
, 
UE¼ÜCode
& 
¡©us
) const;

274 
vœtu®
 cÚ¡ 
HashbË
* 
	$g‘SuµÜ‹dIDs
(
UE¼ÜCode
& 
¡©us
) const;

276 
public
:

280 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

282 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

284 #ifdeà
SERVICE_DEBUG


285 
public
:

286 
vœtu®
 
UnicodeSŒšg
& 
	$debug
(
UnicodeSŒšg
& 
»suÉ
) const;

287 
vœtu®
 
UnicodeSŒšg
& 
	$debugCÏss
(
UnicodeSŒšg
& 
»suÉ
) const;

290 
	}
};

300 şas 
	cU_COMMON_API
 
	mSim¶eLoÿËKeyFaùÜy
 : 
public
 
LoÿËKeyFaùÜy
 {

301 
´iv©e
:

302 
UObjeù
* 
_obj
;

303 
UnicodeSŒšg
 
	m_id
;

304 cÚ¡ 
št32_t
 
	m_kšd
;

306 
	mpublic
:

307 
Sim¶eLoÿËKeyFaùÜy
(
UObjeù
* 
objToAdİt
,

308 cÚ¡ 
UnicodeSŒšg
& 
loÿË
,

309 
št32_t
 
kšd
,

310 
št32_t
 
cov”age
);

312 
Sim¶eLoÿËKeyFaùÜy
(
UObjeù
* 
objToAdİt
,

313 cÚ¡ 
LoÿË
& 
loÿË
,

314 
št32_t
 
kšd
,

315 
št32_t
 
cov”age
);

320 
	mvœtu®
 ~
Sim¶eLoÿËKeyFaùÜy
();

325 
vœtu®
 
UObjeù
* 
	$ü—‹
(cÚ¡ 
ICUS”viûKey
& 
key
, cÚ¡ 
ICUS”viû
* 
£rviû
, 
UE¼ÜCode
& 
¡©us
) const;

331 
vœtu®
 
	$upd©eVisibËIDs
(
HashbË
& 
»suÉ
, 
UE¼ÜCode
& 
¡©us
) const;

333 
´Ùeùed
:

340 
public
:

344 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

346 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

348 #ifdeà
SERVICE_DEBUG


349 
public
:

350 
vœtu®
 
UnicodeSŒšg
& 
	$debug
(
UnicodeSŒšg
& 
»suÉ
) const;

351 
vœtu®
 
UnicodeSŒšg
& 
	$debugCÏss
(
UnicodeSŒšg
& 
»suÉ
) const;

367 şas 
	cU_COMMON_API
 
ICUResourûBundËFaùÜy
 : 
public
 
LoÿËKeyFaùÜy


369 
´Ùeùed
:

370 
UnicodeSŒšg
 
_bundËName
;

372 
public
:

376 
	`ICUResourûBundËFaùÜy
();

384 
	`ICUResourûBundËFaùÜy
(cÚ¡ 
UnicodeSŒšg
& 
bundËName
);

389 
vœtu®
 ~
	`ICUResourûBundËFaùÜy
();

391 
´Ùeùed
:

395 
vœtu®
 cÚ¡ 
HashbË
* 
	$g‘SuµÜ‹dIDs
(
UE¼ÜCode
& 
¡©us
) const;

401 
vœtu®
 
UObjeù
* 
	$hªdËC»©e
(cÚ¡ 
LoÿË
& 
loc
, 
št32_t
 
kšd
, cÚ¡ 
ICUS”viû
* 
£rviû
, 
UE¼ÜCode
& 
¡©us
) const;

403 
public
:

407 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

408 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

411 #ifdeà
SERVICE_DEBUG


412 
public
:

413 
vœtu®
 
UnicodeSŒšg
& 
	$debug
(
UnicodeSŒšg
& 
»suÉ
) const;

414 
vœtu®
 
UnicodeSŒšg
& 
	$debugCÏss
(
UnicodeSŒšg
& 
»suÉ
) const;

423 şas 
	cU_COMMON_API
 
ICULoÿËS”viû
 : 
public
 
ICUS”viû


425 
´iv©e
:

426 
LoÿË
 
çÎbackLoÿË
;

427 
UnicodeSŒšg
 
çÎbackLoÿËName
;

428 
UMTX
 
Îock
;

430 
public
:

434 
	`ICULoÿËS”viû
();

439 
	`ICULoÿËS”viû
(cÚ¡ 
UnicodeSŒšg
& 
Çme
);

444 
vœtu®
 ~
	`ICULoÿËS”viû
();

450 
UObjeù
* 
	$g‘
(cÚ¡ 
UnicodeSŒšg
& 
desütÜ
, 
UE¼ÜCode
& 
¡©us
) const {

451  
ICUS”viû
::
	`g‘
(
desütÜ
, 
¡©us
);

454 
UObjeù
* 
	$g‘
(cÚ¡ 
UnicodeSŒšg
& 
desütÜ
, UnicodeSŒšg* 
aùu®R‘uº
, 
UE¼ÜCode
& 
¡©us
) const {

455  
ICUS”viû
::
	`g‘
(
desütÜ
, 
aùu®R‘uº
, 
¡©us
);

456 
	}
}

464 
UObjeù
* 
	$g‘
(cÚ¡ 
LoÿË
& 
loÿË
, 
UE¼ÜCode
& 
¡©us
) const;

470 
UObjeù
* 
	$g‘
(cÚ¡ 
LoÿË
& 
loÿË
, 
št32_t
 
kšd
, 
UE¼ÜCode
& 
¡©us
) const;

476 
UObjeù
* 
	$g‘
(cÚ¡ 
LoÿË
& 
loÿË
, LoÿË* 
aùu®R‘uº
, 
UE¼ÜCode
& 
¡©us
) const;

484 
UObjeù
* 
	$g‘
(cÚ¡ 
LoÿË
& 
loÿË
, 
št32_t
 
kšd
, LoÿË* 
aùu®R‘uº
, 
UE¼ÜCode
& 
¡©us
) const;

491 
vœtu®
 
URegi¡ryKey
 
	`»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
LoÿË
& 
loÿË
, 
UE¼ÜCode
& 
¡©us
);

498 
vœtu®
 
URegi¡ryKey
 
	`»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
LoÿË
& 
loÿË
, 
št32_t
 
kšd
, 
UE¼ÜCode
& 
¡©us
);

504 
vœtu®
 
URegi¡ryKey
 
	`»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
LoÿË
& 
loÿË
, 
št32_t
 
kšd
, iÁ32_ˆ
cov”age
, 
UE¼ÜCode
& 
¡©us
);

514 
vœtu®
 
URegi¡ryKey
 
	`»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
loÿË
, 
UBoŞ
 
visibË
, 
UE¼ÜCode
& 
¡©us
);

520 
vœtu®
 
SŒšgEnum”©iÚ
* 
	$g‘AvaabËLoÿËs
() const;

522 
´Ùeùed
:

528 cÚ¡ 
UnicodeSŒšg
& 
	$v®id©eF®lbackLoÿË
() const;

533 
vœtu®
 
ICUS”viûKey
* 
	$ü—‹Key
(cÚ¡ 
UnicodeSŒšg
* 
id
, 
UE¼ÜCode
& 
¡©us
) const;

538 
vœtu®
 
ICUS”viûKey
* 
	$ü—‹Key
(cÚ¡ 
UnicodeSŒšg
* 
id
, 
št32_t
 
kšd
, 
UE¼ÜCode
& 
¡©us
) const;

540 
ä›nd
 
şass
 
S”viûEnum”©iÚ
;

541 
	}
};

543 
	gU_NAMESPACE_END


	@servls.cpp

9 
	~"unicode/uty³s.h
"

11 #ià!
UCONFIG_NO_SERVICE


13 
	~"unicode/»sbund.h
"

14 
	~"u»simp.h
"

15 
	~"cmemÜy.h
"

16 
	~"£rvloc.h
"

17 
	~"u¡rfmt.h
"

18 
	~"uhash.h
"

19 
	~"ch¬¡r.h
"

20 
	~"uşn_cmn.h
"

21 
	~"uas£¹.h
"

23 
	#UNDERSCORE_CHAR
 ((
UCh¬
)0x005f)

	)

24 
	#AT_SIGN_CHAR
 ((
UCh¬
)64)

	)

25 
	#PERIOD_CHAR
 ((
UCh¬
)46)

	)

27 
U_NAMESPACE_BEGIN


29 
	gICULoÿËS”viû
::
	$ICULoÿËS”viû
()

30 : 
	`çÎbackLoÿË
(
LoÿË
::
	`g‘DeçuÉ
())

31 , 
	$Îock
(0)

33 
	`umtx_š™
(&
Îock
);

34 
	}
}

36 
	gICULoÿËS”viû
::
	$ICULoÿËS”viû
(cÚ¡ 
UnicodeSŒšg
& 
dÇme
)

37 : 
	`ICUS”viû
(
dÇme
)

38 , 
	`çÎbackLoÿË
(
LoÿË
::
	`g‘DeçuÉ
())

39 , 
	$Îock
(0)

41 
	`umtx_š™
(&
Îock
);

42 
	}
}

44 
	gICULoÿËS”viû
::~
	$ICULoÿËS”viû
()

46 
	`umtx_de¡roy
(&
Îock
);

47 
	}
}

49 
UObjeù
*

50 
	gICULoÿËS”viû
::
	$g‘
(cÚ¡ 
LoÿË
& 
loÿË
, 
UE¼ÜCode
& 
¡©us
) const

52  
	`g‘
(
loÿË
, 
LoÿËKey
::
KIND_ANY
, 
NULL
, 
¡©us
);

53 
	}
}

55 
UObjeù
*

56 
	gICULoÿËS”viû
::
	$g‘
(cÚ¡ 
LoÿË
& 
loÿË
, 
št32_t
 
kšd
, 
UE¼ÜCode
& 
¡©us
) const

58  
	`g‘
(
loÿË
, 
kšd
, 
NULL
, 
¡©us
);

59 
	}
}

61 
UObjeù
*

62 
	gICULoÿËS”viû
::
	$g‘
(cÚ¡ 
LoÿË
& 
loÿË
, LoÿË* 
aùu®R‘uº
, 
UE¼ÜCode
& 
¡©us
) const

64  
	`g‘
(
loÿË
, 
LoÿËKey
::
KIND_ANY
, 
aùu®R‘uº
, 
¡©us
);

65 
	}
}

67 
UObjeù
*

68 
	gICULoÿËS”viû
::
	$g‘
(cÚ¡ 
LoÿË
& 
loÿË
, 
št32_t
 
kšd
, LoÿË* 
aùu®R‘uº
, 
UE¼ÜCode
& 
¡©us
) const

70 
UObjeù
* 
»suÉ
 = 
NULL
;

71 ià(
	`U_FAILURE
(
¡©us
)) {

72  
»suÉ
;

75 
UnicodeSŒšg
 
	`locName
(
loÿË
.
	`g‘Name
(), -1, 
US_INV
);

76 ià(
locName
.
	`isBogus
()) {

77 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

79 
ICUS”viûKey
* 
key
 = 
	`ü—‹Key
(&
locName
, 
kšd
, 
¡©us
);

80 ià(
key
) {

81 ià(
aùu®R‘uº
 =ğ
NULL
) {

82 
»suÉ
 = 
	`g‘Key
(*
key
, 
¡©us
);

84 
UnicodeSŒšg
 
‹mp
;

85 
»suÉ
 = 
	`g‘Key
(*
key
, &
‹mp
, 
¡©us
);

87 ià(
»suÉ
 !ğ
NULL
) {

88 
key
->
	`·r£Suffix
(
‹mp
);

89 
LoÿËUt™y
::
	`š™LoÿËFromName
(
‹mp
, *
aùu®R‘uº
);

92 
d–‘e
 
key
;

95  
»suÉ
;

96 
	}
}

99 
URegi¡ryKey


100 
	gICULoÿËS”viû
::
	$»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
loÿË
,

101 
UBoŞ
 
visibË
, 
UE¼ÜCode
& 
¡©us
)

103 
LoÿË
 
loc
;

104 
LoÿËUt™y
::
	`š™LoÿËFromName
(
loÿË
, 
loc
);

105  
	`»gi¡”In¡ªû
(
objToAdİt
, 
loc
, 
LoÿËKey
::
KIND_ANY
,

106 
visibË
 ? 
LoÿËKeyFaùÜy
::
VISIBLE
 : LoÿËKeyFaùÜy::
INVISIBLE
, 
¡©us
);

107 
	}
}

109 
URegi¡ryKey


110 
	gICULoÿËS”viû
::
	$»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
LoÿË
& 
loÿË
, 
UE¼ÜCode
& 
¡©us
)

112  
	`»gi¡”In¡ªû
(
objToAdİt
, 
loÿË
, 
LoÿËKey
::
KIND_ANY
, 
LoÿËKeyFaùÜy
::
VISIBLE
, 
¡©us
);

113 
	}
}

115 
URegi¡ryKey


116 
	gICULoÿËS”viû
::
	$»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
LoÿË
& 
loÿË
, 
št32_t
 
kšd
, 
UE¼ÜCode
& 
¡©us
)

118  
	`»gi¡”In¡ªû
(
objToAdİt
, 
loÿË
, 
kšd
, 
LoÿËKeyFaùÜy
::
VISIBLE
, 
¡©us
);

119 
	}
}

121 
URegi¡ryKey


122 
	gICULoÿËS”viû
::
	$»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
LoÿË
& 
loÿË
, 
št32_t
 
kšd
, iÁ32_ˆ
cov”age
, 
UE¼ÜCode
& 
¡©us
)

124 
ICUS”viûFaùÜy
 * 
çùÜy
 = 
Ãw
 
	`Sim¶eLoÿËKeyFaùÜy
(
objToAdİt
, 
loÿË
, 
kšd
, 
cov”age
);

125 ià(
çùÜy
 !ğ
NULL
) {

126  
	`»gi¡”FaùÜy
(
çùÜy
, 
¡©us
);

128 
d–‘e
 
objToAdİt
;

129  
NULL
;

130 
	}
}

133 
URegi¡ryKey


134 
	gICULoÿËS”viû
::
	$»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
loÿË
, 
UE¼ÜCode
& 
¡©us
)

136  
	`»gi¡”In¡ªû
(
objToAdİt
, 
loÿË
, 
LoÿËKey
::
KIND_ANY
, 
LoÿËKeyFaùÜy
::
VISIBLE
, 
¡©us
);

137 
	}
}

139 
URegi¡ryKey


140 
	gICULoÿËS”viû
::
	$»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
loÿË
, 
UBoŞ
 
visibË
, 
UE¼ÜCode
& 
¡©us
)

142  
	`»gi¡”In¡ªû
(
objToAdİt
, 
loÿË
, 
LoÿËKey
::
KIND_ANY
,

143 
visibË
 ? 
LoÿËKeyFaùÜy
::
VISIBLE
 : LoÿËKeyFaùÜy::
INVISIBLE
,

144 
¡©us
);

145 
	}
}

147 
URegi¡ryKey


148 
	gICULoÿËS”viû
::
	$»gi¡”In¡ªû
(
UObjeù
* 
objToAdİt
, cÚ¡ 
UnicodeSŒšg
& 
loÿË
, 
št32_t
 
kšd
, iÁ32_ˆ
cov”age
, 
UE¼ÜCode
& 
¡©us
)

150 
ICUS”viûFaùÜy
 * 
çùÜy
 = 
Ãw
 
	`Sim¶eLoÿËKeyFaùÜy
(
objToAdİt
, 
loÿË
, 
kšd
, 
cov”age
);

151 ià(
çùÜy
 !ğ
NULL
) {

152  
	`»gi¡”FaùÜy
(
çùÜy
, 
¡©us
);

154 
d–‘e
 
objToAdİt
;

155  
NULL
;

156 
	}
}

159 şas 
	cS”viûEnum”©iÚ
 : 
public
 
SŒšgEnum”©iÚ
 {

160 
´iv©e
:

161 cÚ¡ 
ICULoÿËS”viû
* 
_£rviû
;

162 
št32_t
 
	m_time¡amp
;

163 
UVeùÜ
 
	m_ids
;

164 
št32_t
 
	m_pos
;

166 
	m´iv©e
:

167 
	$S”viûEnum”©iÚ
(cÚ¡ 
ICULoÿËS”viû
* 
£rviû
, 
UE¼ÜCode
 &
¡©us
)

168 : 
	`_£rviû
(
£rviû
)

169 , 
	`_time¡amp
(
£rviû
->
	`g‘Time¡amp
())

170 , 
	`_ids
(
uhash_d–‘eUnicodeSŒšg
, 
NULL
, 
¡©us
)

171 , 
	$_pos
(0)

173 
_£rviû
->
	`g‘VisibËIDs
(
_ids
, 
¡©us
);

176 
	$S”viûEnum”©iÚ
(cÚ¡ 
S”viûEnum”©iÚ
 &
Ùh”
, 
UE¼ÜCode
 &
¡©us
)

177 : 
	`_£rviû
(
Ùh”
.
_£rviû
)

178 , 
	`_time¡amp
(
Ùh”
.
_time¡amp
)

179 , 
	`_ids
(
uhash_d–‘eUnicodeSŒšg
, 
NULL
, 
¡©us
)

180 , 
	$_pos
(0)

182 if(
	`U_SUCCESS
(
¡©us
)) {

183 
št32_t
 
i
, 
Ëngth
;

185 
Ëngth
 = 
Ùh”
.
_ids
.
	`size
();

186 
i
 = 0; i < 
Ëngth
; ++i) {

187 
_ids
.
	`addEËm’t
(((
UnicodeSŒšg
 *)
Ùh”
._ids.
	`–em’tAt
(
i
))->
	`şÚe
(), 
¡©us
);

190 if(
	`U_SUCCESS
(
¡©us
)) {

191 
_pos
 = 
Ùh”
._pos;

194 
	}
}

196 
	gpublic
:

197 
S”viûEnum”©iÚ
* 
	$ü—‹
(cÚ¡ 
ICULoÿËS”viû
* 
£rviû
) {

198 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

199 
S”viûEnum”©iÚ
* 
»suÉ
 = 
Ãw
 
	`S”viûEnum”©iÚ
(
£rviû
, 
¡©us
);

200 ià(
	`U_SUCCESS
(
¡©us
)) {

201  
»suÉ
;

203 
d–‘e
 
»suÉ
;

204  
NULL
;

205 
	}
}

207 
	gvœtu®
 ~
	$S”viûEnum”©iÚ
(è{
	}
}

209 
vœtu®
 
SŒšgEnum”©iÚ
 *
	$şÚe
() const {

210 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

211 
S”viûEnum”©iÚ
 *
ş
 = 
Ãw
 
	`S”viûEnum”©iÚ
(*
this
, 
¡©us
);

212 if(
	`U_FAILURE
(
¡©us
)) {

213 
d–‘e
 
ş
;

214 
ş
 = 
NULL
;

216  
ş
;

217 
	}
}

219 
UBoŞ
 
	$upToD©e
(
UE¼ÜCode
& 
¡©us
) const {

220 ià(
	`U_SUCCESS
(
¡©us
)) {

221 ià(
_time¡amp
 =ğ
_£rviû
->
	`g‘Time¡amp
()) {

222  
TRUE
;

224 
¡©us
 = 
U_ENUM_OUT_OF_SYNC_ERROR
;

226  
FALSE
;

227 
	}
}

229 
vœtu®
 
št32_t
 
	$couÁ
(
UE¼ÜCode
& 
¡©us
) const {

230  
	`upToD©e
(
¡©us
è? 
_ids
.
	`size
() : 0;

231 
	}
}

233 
vœtu®
 cÚ¡ 
UnicodeSŒšg
* 
	$¢ext
(
UE¼ÜCode
& 
¡©us
) {

234 ià(
	`upToD©e
(
¡©us
è&& (
_pos
 < 
_ids
.
	`size
())) {

235  (cÚ¡ 
UnicodeSŒšg
*)
_ids
[
_pos
++];

237  
NULL
;

238 
	}
}

240 
vœtu®
 
	$»£t
(
UE¼ÜCode
& 
¡©us
) {

241 ià(
¡©us
 =ğ
U_ENUM_OUT_OF_SYNC_ERROR
) {

242 
¡©us
 = 
U_ZERO_ERROR
;

244 ià(
	`U_SUCCESS
(
¡©us
)) {

245 
_time¡amp
 = 
_£rviû
->
	`g‘Time¡amp
();

246 
_pos
 = 0;

247 
_£rviû
->
	`g‘VisibËIDs
(
_ids
, 
¡©us
);

249 
	}
}

251 
	gpublic
:

252 
UCÏssID
 
U_EXPORT2
 
g‘SticCÏssID
();

253 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

254 
	}
};

256 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
S”viûEnum”©iÚ
)

258 
SŒšgEnum”©iÚ
*

259 
ICULoÿËS”viû
::
	$g‘AvaabËLoÿËs
() const

261  
S”viûEnum”©iÚ
::
	`ü—‹
(
this
);

262 
	}
}

264 cÚ¡ 
	gUnicodeSŒšg
&

265 
	gICULoÿËS”viû
::
	$v®id©eF®lbackLoÿË
() const

267 cÚ¡ 
LoÿË
& 
loc
 = LoÿË::
	`g‘DeçuÉ
();

268 
ICULoÿËS”viû
* 
ncThis
 = (ICULoÿËS”viû*)
this
;

270 
Mu‹x
 
	`mu‹x
(&
ncThis
->
Îock
);

271 ià(
loc
 !ğ
çÎbackLoÿË
) {

272 
ncThis
->
çÎbackLoÿË
 = 
loc
;

273 
LoÿËUt™y
::
	`š™NameFromLoÿË
(
loc
, 
ncThis
->
çÎbackLoÿËName
);

274 
ncThis
->
	`ş—rS”viûCache
();

277  
çÎbackLoÿËName
;

278 
	}
}

280 
ICUS”viûKey
*

281 
	gICULoÿËS”viû
::
	$ü—‹Key
(cÚ¡ 
UnicodeSŒšg
* 
id
, 
UE¼ÜCode
& 
¡©us
) const

283  
LoÿËKey
::
	`ü—‹W™hCªÚiÿlF®lback
(
id
, &
	`v®id©eF®lbackLoÿË
(), 
¡©us
);

284 
	}
}

286 
ICUS”viûKey
*

287 
	gICULoÿËS”viû
::
	$ü—‹Key
(cÚ¡ 
UnicodeSŒšg
* 
id
, 
št32_t
 
kšd
, 
UE¼ÜCode
& 
¡©us
) const

289  
LoÿËKey
::
	`ü—‹W™hCªÚiÿlF®lback
(
id
, &
	`v®id©eF®lbackLoÿË
(), 
kšd
, 
¡©us
);

290 
	}
}

292 
	gU_NAMESPACE_END


	@servnotf.cpp

8 
	~"unicode/uty³s.h
"

10 #ià!
UCONFIG_NO_SERVICE


12 
	~"£rvnÙf.h
"

13 #ifdeà
NOTIFIER_DEBUG


14 
	~<¡dio.h
>

17 
U_NAMESPACE_BEGIN


19 
	gEv’tLi¡’”
::~
	$Ev’tLi¡’”
(è{
	}
}

20 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
Ev’tLi¡’”
)

22 
ICUNÙif›r
::
	$ICUNÙif›r
()

23 : 
	`nÙifyLock
(0), 
	$li¡’”s
(
NULL
)

25 
	`umtx_š™
(&
nÙifyLock
);

26 
	}
}

28 
	gICUNÙif›r
::~
	$ICUNÙif›r
() {

30 
Mu‹x
 
	`lmx
(&
nÙifyLock
);

31 
d–‘e
 
li¡’”s
;

32 
li¡’”s
 = 
NULL
;

34 
	`umtx_de¡roy
(&
nÙifyLock
);

35 
	}
}

39 
	gICUNÙif›r
::
	$addLi¡’”
(cÚ¡ 
Ev’tLi¡’”
* 
l
, 
UE¼ÜCode
& 
¡©us
)

41 ià(
	`U_SUCCESS
(
¡©us
)) {

42 ià(
l
 =ğ
NULL
) {

43 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

47 ià(
	`acû±sLi¡’”
(*
l
)) {

48 
Mu‹x
 
	`lmx
(&
nÙifyLock
);

49 ià(
li¡’”s
 =ğ
NULL
) {

50 
li¡’”s
 = 
Ãw
 
	`UVeùÜ
(5, 
¡©us
);

52 
i
 = 0, 
e
 = 
li¡’”s
->
	`size
(); i <ƒ; ++i) {

53 cÚ¡ 
Ev’tLi¡’”
* 
–
 = (cÚ¡ Ev’tLi¡’”*)(
li¡’”s
->
	`–em’tAt
(
i
));

54 ià(
l
 =ğ
–
) {

60 
li¡’”s
->
	`addEËm’t
((*)
l
, 
¡©us
);

62 #ifdeà
NOTIFIER_DEBUG


64 
	`årštf
(
¡d”r
, "Listener invalid forhis‚otifier.");

65 
	`ex™
(1);

69 
	}
}

72 
	gICUNÙif›r
::
	$»moveLi¡’”
(cÚ¡ 
Ev’tLi¡’”
 *
l
, 
UE¼ÜCode
& 
¡©us
)

74 ià(
	`U_SUCCESS
(
¡©us
)) {

75 ià(
l
 =ğ
NULL
) {

76 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

81 
Mu‹x
 
	`lmx
(&
nÙifyLock
);

82 ià(
li¡’”s
 !ğ
NULL
) {

84 
i
 = 0, 
e
 = 
li¡’”s
->
	`size
(); i <ƒ; ++i) {

85 cÚ¡ 
Ev’tLi¡’”
* 
–
 = (cÚ¡ Ev’tLi¡’”*)
li¡’”s
->
	`–em’tAt
(
i
);

86 ià(
l
 =ğ
–
) {

87 
li¡’”s
->
	`»moveEËm’tAt
(
i
);

88 ià(
li¡’”s
->
	`size
() == 0) {

89 
d–‘e
 
li¡’”s
;

90 
li¡’”s
 = 
NULL
;

98 
	}
}

101 
	gICUNÙif›r
::
	$nÙifyChªged
()

103 ià(
li¡’”s
 !ğ
NULL
) {

104 
Mu‹x
 
	`lmx
(&
nÙifyLock
);

105 ià(
li¡’”s
 !ğ
NULL
) {

106 
i
 = 0, 
e
 = 
li¡’”s
->
	`size
(); i <ƒ; ++i) {

107 
Ev’tLi¡’”
* 
–
 = (Ev’tLi¡’”*)
li¡’”s
->
	`–em’tAt
(
i
);

108 
	`nÙifyLi¡’”
(*
–
);

112 
	}
}

114 
	gU_NAMESPACE_END


	@servnotf.h

7 #iâdeà
ICUNOTIF_H


8 
	#ICUNOTIF_H


	)

10 
	~"unicode/uty³s.h
"

12 #ià
UCONFIG_NO_SERVICE


14 
U_NAMESPACE_BEGIN


20 
şass
 
	gICUNÙif›r
;

22 
	gU_NAMESPACE_END


26 
	~"unicode/uobjeù.h
"

27 
	~"unicode/uni¡r.h
"

29 
	~"mu‹x.h
"

30 
	~"uveùÜ.h
"

32 
U_NAMESPACE_BEGIN


34 şas 
	cU_COMMON_API
 
	mEv’tLi¡’”
 : 
public
 
UObjeù
 {

35 
public
:

36 
vœtu®
 ~
Ev’tLi¡’”
();

38 
	mpublic
:

39 
UCÏssID
 
U_EXPORT2
 
g‘SticCÏssID
();

41 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

43 
public
:

44 #ifdeà
SERVICE_DEBUG


45 
vœtu®
 
UnicodeSŒšg
& 
	$debug
(
UnicodeSŒšg
& 
»suÉ
) const {

46  
	`debugCÏss
(
»suÉ
);

49 
vœtu®
 
UnicodeSŒšg
& 
	$debugCÏss
(
UnicodeSŒšg
& 
»suÉ
) const {

50  
»suÉ
.
	`­³nd
("Key");

51 
	}
}

72 şas 
	cU_COMMON_API
 
	mICUNÙif›r
 : 
public
 
UMemÜy
 {

73 
´iv©e
: 
UMTX
 
nÙifyLock
;

74 
	m´iv©e
: 
UVeùÜ
* 
li¡’”s
;

76 
	mpublic
:

77 
ICUNÙif›r
();

79 
	mvœtu®
 ~
ICUNÙif›r
();

88 
vœtu®
 
addLi¡’”
(cÚ¡ 
Ev’tLi¡’”
* 
l
, 
UE¼ÜCode
& 
¡©us
);

95 
vœtu®
 
»moveLi¡’”
(cÚ¡ 
Ev’tLi¡’”
* 
l
, 
UE¼ÜCode
& 
¡©us
);

103 
vœtu®
 
nÙifyChªged
();

105 
	m´Ùeùed
:

110 
vœtu®
 
UBoŞ
 
	$acû±sLi¡’”
(cÚ¡ 
Ev’tLi¡’”
& 
l
) const = 0;

115 
vœtu®
 
	$nÙifyLi¡’”
(
Ev’tLi¡’”
& 
l
) const = 0;

118 
U_NAMESPACE_END


	@servrbf.cpp

9 
	~"unicode/uty³s.h
"

11 #ià!
UCONFIG_NO_SERVICE


13 
	~"unicode/»sbund.h
"

14 
	~"u»simp.h
"

15 
	~"cmemÜy.h
"

16 
	~"£rvloc.h
"

17 
	~"u¡rfmt.h
"

18 
	~"uhash.h
"

19 
	~"ch¬¡r.h
"

20 
	~"uşn_cmn.h
"

21 
	~"uas£¹.h
"

23 
	#UNDERSCORE_CHAR
 ((
UCh¬
)0x005f)

	)

24 
	#AT_SIGN_CHAR
 ((
UCh¬
)64)

	)

25 
	#PERIOD_CHAR
 ((
UCh¬
)46)

	)

27 
U_NAMESPACE_BEGIN


29 
	gICUResourûBundËFaùÜy
::
	$ICUResourûBundËFaùÜy
()

30 : 
	`LoÿËKeyFaùÜy
(
VISIBLE
)

31 , 
	$_bundËName
()

33 
	}
}

35 
	gICUResourûBundËFaùÜy
::
	$ICUResourûBundËFaùÜy
(cÚ¡ 
UnicodeSŒšg
& 
bundËName
)

36 : 
	`LoÿËKeyFaùÜy
(
VISIBLE
)

37 , 
	$_bundËName
(
bundËName
)

39 
	}
}

41 
	gICUResourûBundËFaùÜy
::~
	$ICUResourûBundËFaùÜy
(è{
	}
}

43 cÚ¡ 
HashbË
*

44 
ICUResourûBundËFaùÜy
::
	$g‘SuµÜ‹dIDs
(
UE¼ÜCode
& 
¡©us
) const

46 ià(
	`U_SUCCESS
(
¡©us
)) {

47  
LoÿËUt™y
::
	`g‘AvaabËLoÿËNames
(
_bundËName
);

49  
NULL
;

50 
	}
}

52 
UObjeù
*

53 
	gICUResourûBundËFaùÜy
::
	$hªdËC»©e
(cÚ¡ 
LoÿË
& 
loc
, 
št32_t
 , cÚ¡ 
ICUS”viû
* , 
UE¼ÜCode
& 
¡©us
) const

55 ià(
	`U_SUCCESS
(
¡©us
)) {

60 
pkg
[20];

61 
št32_t
 
Ëngth
;

62 
Ëngth
=
_bundËName
.
	`exŒaù
(0, 
INT32_MAX
, 
pkg
, (
št32_t
)Õkg), 
US_INV
);

63 if(
Ëngth
>=(
št32_t
)(
pkg
)) {

64  
NULL
;

66  
Ãw
 
	`ResourûBundË
(
pkg
, 
loc
, 
¡©us
);

68  
NULL
;

69 
	}
}

71 #ifdeà
SERVICE_DEBUG


72 
	gUnicodeSŒšg
&

73 
	gICUResourûBundËFaùÜy
::
	$debug
(
UnicodeSŒšg
& 
»suÉ
) const

75 
LoÿËKeyFaùÜy
::
	`debug
(
»suÉ
);

76 
»suÉ
.
	`­³nd
(", bundle: ");

77  
»suÉ
.
	`­³nd
(
_bundËName
);

78 
	}
}

80 
	gUnicodeSŒšg
&

81 
	gICUResourûBundËFaùÜy
::
	$debugCÏss
(
UnicodeSŒšg
& 
»suÉ
) const

83  
»suÉ
.
	`­³nd
("ICUResourceBundleFactory");

84 
	}
}

87 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
ICUResourûBundËFaùÜy
)

89 
U_NAMESPACE_END


	@servslkf.cpp

9 
	~"unicode/uty³s.h
"

11 #ià!
UCONFIG_NO_SERVICE


13 
	~"unicode/»sbund.h
"

14 
	~"u»simp.h
"

15 
	~"cmemÜy.h
"

16 
	~"£rvloc.h
"

17 
	~"u¡rfmt.h
"

18 
	~"uhash.h
"

19 
	~"ch¬¡r.h
"

20 
	~"uşn_cmn.h
"

21 
	~"uas£¹.h
"

23 
	#UNDERSCORE_CHAR
 ((
UCh¬
)0x005f)

	)

24 
	#AT_SIGN_CHAR
 ((
UCh¬
)64)

	)

25 
	#PERIOD_CHAR
 ((
UCh¬
)46)

	)

27 
U_NAMESPACE_BEGIN


33 
	gSim¶eLoÿËKeyFaùÜy
::
	$Sim¶eLoÿËKeyFaùÜy
(
UObjeù
* 
objToAdİt
,

34 cÚ¡ 
UnicodeSŒšg
& 
loÿË
,

35 
št32_t
 
kšd
,

36 
št32_t
 
cov”age
)

37 : 
	`LoÿËKeyFaùÜy
(
cov”age
)

38 , 
	`_obj
(
objToAdİt
)

39 , 
	`_id
(
loÿË
)

40 , 
	$_kšd
(
kšd
)

42 
	}
}

44 
	gSim¶eLoÿËKeyFaùÜy
::
	$Sim¶eLoÿËKeyFaùÜy
(
UObjeù
* 
objToAdİt
,

45 cÚ¡ 
LoÿË
& 
loÿË
,

46 
št32_t
 
kšd
,

47 
št32_t
 
cov”age
)

48 : 
	`LoÿËKeyFaùÜy
(
cov”age
)

49 , 
	`_obj
(
objToAdİt
)

50 , 
	`_id
()

51 , 
	$_kšd
(
kšd
)

53 
LoÿËUt™y
::
	`š™NameFromLoÿË
(
loÿË
, 
_id
);

54 
	}
}

56 
	gSim¶eLoÿËKeyFaùÜy
::~
	$Sim¶eLoÿËKeyFaùÜy
()

58 
d–‘e
 
_obj
;

59 
_obj
 = 
NULL
;

60 
	}
}

62 
UObjeù
*

63 
	gSim¶eLoÿËKeyFaùÜy
::
	$ü—‹
(cÚ¡ 
ICUS”viûKey
& 
key
, cÚ¡ 
ICUS”viû
* 
£rviû
, 
UE¼ÜCode
& 
¡©us
) const

65 ià(
	`U_SUCCESS
(
¡©us
)) {

66 cÚ¡ 
LoÿËKey
& 
lkey
 = (cÚ¡ LoÿËKey&)
key
;

67 ià(
_kšd
 =ğ
LoÿËKey
::
KIND_ANY
 || _kšd =ğ
lkey
.
	`kšd
()) {

68 
UnicodeSŒšg
 
keyID
;

69 
lkey
.
	`cu¼’tID
(
keyID
);

70 ià(
_id
 =ğ
keyID
) {

71  
£rviû
->
	`şÚeIn¡ªû
(
_obj
);

75  
NULL
;

76 
	}
}

85 
	gSim¶eLoÿËKeyFaùÜy
::
	$upd©eVisibËIDs
(
HashbË
& 
»suÉ
, 
UE¼ÜCode
& 
¡©us
) const

87 ià(
	`U_SUCCESS
(
¡©us
)) {

88 ià(
_cov”age
 & 0x1) {

89 
»suÉ
.
	`»move
(
_id
);

91 
»suÉ
.
	`put
(
_id
, (*)
this
, 
¡©us
);

94 
	}
}

96 #ifdeà
SERVICE_DEBUG


97 
	gUnicodeSŒšg
&

98 
	gSim¶eLoÿËKeyFaùÜy
::
	$debug
(
UnicodeSŒšg
& 
»suÉ
) const

100 
LoÿËKeyFaùÜy
::
	`debug
(
»suÉ
);

101 
»suÉ
.
	`­³nd
(", id: ");

102 
»suÉ
.
	`­³nd
(
_id
);

103 
»suÉ
.
	`­³nd
(", kind: ");

104 
»suÉ
.
	`­³nd
(
_kšd
);

105  
»suÉ
;

106 
	}
}

108 
	gUnicodeSŒšg
&

109 
	gSim¶eLoÿËKeyFaùÜy
::
	$debugCÏss
(
UnicodeSŒšg
& 
»suÉ
) const

111  
»suÉ
.
	`­³nd
("SimpleLocaleKeyFactory");

112 
	}
}

115 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
Sim¶eLoÿËKeyFaùÜy
)

117 
U_NAMESPACE_END


	@sprpimpl.h

17 #iâdeà
SPRPIMPL_H


18 
	#SPRPIMPL_H


	)

20 
	~"unicode/uty³s.h
"

22 #ià!
UCONFIG_NO_IDNA


24 
	~"unicode/u¡ršg.h
"

25 
	~"unicode/·r£”r.h
"

26 
	~"unicode/u¥»p.h
"

27 
	~"unicode/ud©a.h
"

28 
	~"uŒ›.h
"

29 
	~"ud©aswp.h
"

30 
	~"ubidi_´İs.h
"

32 
	#_SPREP_DATA_TYPE
 "¥p"

	)

34 
	eUSŒšgP»pTy³
{

35 
	mUSPREP_UNASSIGNED
 = 0x0000 ,

36 
	mUSPREP_MAP
 = 0x0001 ,

37 
	mUSPREP_PROHIBITED
 = 0x0002 ,

38 
	mUSPREP_DELETE
 = 0x0003 ,

39 
	mUSPREP_TYPE_LIMIT
 = 0x0004

42 
USŒšgP»pTy³
 
	tUSŒšgP»pTy³
;

44 #ifdeà
USPREP_TYPE_NAMES_ARRAY


45 cÚ¡ * 
	gu¥»pTy³Names
[] ={

55 
	m_SPREP_NORMALIZATION_ON
 = 0x0001,

56 
	m_SPREP_CHECK_BIDI_ON
 = 0x0002

60 
	m_SPREP_TYPE_THRESHOLD
 = 0xFFF0,

61 
	m_SPREP_MAX_INDEX_VALUE
 = 0x3FBF,

62 
	m_SPREP_MAX_INDEX_TOP_LENGTH
 = 0x0003

67 
	m_SPREP_INDEX_TRIE_SIZE
 = 0,

68 
	m_SPREP_INDEX_MAPPING_DATA_SIZE
 = 1,

69 
	m_SPREP_NORM_CORRECTNS_LAST_UNI_VERSION
 = 2,

70 
	m_SPREP_ONE_UCHAR_MAPPING_INDEX_START
 = 3,

71 
	m_SPREP_TWO_UCHARS_MAPPING_INDEX_START
 = 4,

72 
	m_SPREP_THREE_UCHARS_MAPPING_INDEX_START
 = 5,

73 
	m_SPREP_FOUR_UCHARS_MAPPING_INDEX_START
 = 6,

74 
	m_SPREP_OPTIONS
 = 7,

75 
	m_SPREP_INDEX_TOP
=16

78 
USŒšgP»pKey
 
	tUSŒšgP»pKey
;

81 
	sUSŒšgP»pKey
{

82 * 
	mÇme
;

83 * 
	m·th
;

86 
	sUSŒšgP»pProfe
{

87 
št32_t
 
	mšdexes
[
_SPREP_INDEX_TOP
];

88 
UTr›
 
	m¥»pTr›
;

89 cÚ¡ 
ušt16_t
* 
	mm­pšgD©a
;

90 
UD©aMemÜy
* 
	m¥»pD©a
;

91 cÚ¡ 
UBiDiPrİs
 *
	mbdp
;

92 
št32_t
 
	m»fCouÁ
;

93 
UBoŞ
 
	misD©aLßded
;

94 
UBoŞ
 
	mdoNFKC
;

95 
UBoŞ
 
	mcheckBiDi
;

102 
U_CAPI
 
U_EXPORT2


103 
u´v_syÁaxE¼Ü
(cÚ¡ 
UCh¬
* 
ruËs
,

104 
št32_t
 
pos
,

105 
št32_t
 
ruËsL’
,

106 
UP¬£E¼Ü
* 
·r£E¼Ü
);

113 
U_CAPI
 
št32_t
 
U_EXPORT2


114 
u¥»p_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

115 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

116 
UE¼ÜCode
 *
pE¼ÜCode
);

	@stringpiece.cpp

9 
	~"unicode/uty³s.h
"

10 
	~"unicode/¡ršgp›û.h
"

11 
	~"c¡ršg.h
"

12 
	~"cmemÜy.h
"

14 
U_NAMESPACE_BEGIN


16 
	gSŒšgP›û
::
	$SŒšgP›û
(cÚ¡ * 
¡r
)

17 : 
	`±r_
(
¡r
), 
	`Ëngth_
((¡¸=ğ
NULL
è? 0 : 
¡©ic_ÿ¡
<
št32_t
>(
	$u´v_¡¾’
(
¡r
))è{ 
	}
}

19 
SŒšgP›û
::
	$SŒšgP›û
(cÚ¡ 
SŒšgP›û
& 
x
, 
št32_t
 
pos
) {

20 ià(
pos
 < 0) {

21 
pos
 = 0;

22 } ià(
pos
 > 
x
.
Ëngth_
) {

23 
pos
 = 
x
.
Ëngth_
;

25 
±r_
 = 
x
.±r_ + 
pos
;

26 
Ëngth_
 = 
x
.Ëngth_ - 
pos
;

27 
	}
}

29 
	gSŒšgP›û
::
	$SŒšgP›û
(cÚ¡ 
SŒšgP›û
& 
x
, 
št32_t
 
pos
, iÁ32_ˆ
Ën
) {

30 ià(
pos
 < 0) {

31 
pos
 = 0;

32 } ià(
pos
 > 
x
.
Ëngth_
) {

33 
pos
 = 
x
.
Ëngth_
;

35 ià(
Ën
 < 0) {

36 
Ën
 = 0;

37 } ià(
Ën
 > 
x
.
Ëngth_
 - 
pos
) {

38 
Ën
 = 
x
.
Ëngth_
 - 
pos
;

40 
±r_
 = 
x
.±r_ + 
pos
;

41 
Ëngth_
 = 
Ën
;

42 
	}
}

44 
	gSŒšgP›û
::
	$£t
(cÚ¡ * 
¡r
) {

45 
±r_
 = 
¡r
;

46 ià(
¡r
 !ğ
NULL
)

47 
Ëngth_
 = 
¡©ic_ÿ¡
<
št32_t
>(
	`u´v_¡¾’
(
¡r
));

49 
Ëngth_
 = 0;

50 
	}
}

52 
U_EXPORT
 
UBoŞ
 
U_EXPORT2


53 
	gİ”©Ü
==(cÚ¡ 
SŒšgP›û
& 
x
, cÚ¡ 
	gSŒšgP›û
& 
	gy
) {

54 
št32_t
 
	gËn
 = 
x
.
size
();

55 ià(
	gËn
 !ğ
y
.
size
()) {

56  
çl£
;

58 ià(
	gËn
 == 0) {

59  
Œue
;

61 cÚ¡ * 
	gp
 = 
x
.
d©a
();

62 cÚ¡ * 
	gp2
 = 
y
.
d©a
();

64 --
	gËn
;

65 ià(
	gp
[
Ën
] !ğ
p2
[Ën]è 
çl£
;

67  
u´v_memcmp
(
p
, 
p2
, 
Ën
) == 0;

78 #ià(!
defšed
(
_MSC_VER
è|| (_MSC_VER > 1500)è&& !defšed(
CYGWINMSVC
)

79 cÚ¡ 
št32_t
 
	gSŒšgP›û
::
Åos
;

82 
	gU_NAMESPACE_END


	@triedict.cpp

8 
	~"unicode/uty³s.h
"

10 #ià!
UCONFIG_NO_BREAK_ITERATION


12 
	~"Œ›diù.h
"

13 
	~"unicode/ch¬™”.h
"

14 
	~"unicode/uchr™”.h
"

15 
	~"unicode/¡»num.h
"

16 
	~"unicode/u’um.h
"

17 
	~"unicode/ud©a.h
"

18 
	~"cmemÜy.h
"

19 
	~"ud©aswp.h
"

20 
	~"uveùÜ.h
"

21 
	~"uveùr32.h
"

22 
	~"u¬rsÜt.h
"

26 #ifdeà
DEBUG_TRIE_DICT


27 
	~<sys/times.h
>

28 
	~<lim™s.h
>

29 
	~<¡dio.h
>

32 
U_NAMESPACE_BEGIN


38 
	gTr›WÜdDiùiÚ¬y
::
	$Tr›WÜdDiùiÚ¬y
() {

39 
	}
}

41 
Tr›WÜdDiùiÚ¬y
::~
	$Tr›WÜdDiùiÚ¬y
() {

42 
	}
}

49 
T”ÇryNode
 : 
public
 
UMemÜy
 {

50 
UCh¬
 
ch
;

51 
ušt16_t
 
	gæags
;

52 
T”ÇryNode
 *
	glow
;

53 
T”ÇryNode
 *
	gequ®
;

54 
T”ÇryNode
 *
	ghigh
;

56 
T”ÇryNode
(
UCh¬
 
uc
);

57 ~
T”ÇryNode
();

60 
	eMubËTr›NodeFÏgs
 {

61 
	mkEndsWÜd
 = 0x0001

64 
šlše


65 
	gT”ÇryNode
::
	$T”ÇryNode
(
UCh¬
 
uc
) {

66 
ch
 = 
uc
;

67 
æags
 = 0;

68 
low
 = 
NULL
;

69 
equ®
 = 
NULL
;

70 
high
 = 
NULL
;

71 
	}
}

74 
	gT”ÇryNode
::~
	$T”ÇryNode
() {

75 
d–‘e
 
low
;

76 
d–‘e
 
equ®
;

77 
d–‘e
 
high
;

78 
	}
}

80 
	gMubËTr›DiùiÚ¬y
::
	$MubËTr›DiùiÚ¬y
Ğ
UCh¬
 
medŸn
, 
UE¼ÜCode
 &
¡©us
 ) {

86 
fTr›
 = 
Ãw
 
	`T”ÇryNode
(
medŸn
);

87 ià(
fTr›
 =ğ
NULL
) {

88 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

90 
fI‹r
 = 
	`u‹xt_İ’UCh¬s
(
NULL
, NULL, 0, &
¡©us
);

91 ià(
	`U_SUCCESS
(
¡©us
è&& 
fI‹r
 =ğ
NULL
) {

92 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

94 
	}
}

96 
	gMubËTr›DiùiÚ¬y
::
	$MubËTr›DiùiÚ¬y
Ğ
UE¼ÜCode
 &
¡©us
 ) {

97 
fTr›
 = 
NULL
;

98 
fI‹r
 = 
	`u‹xt_İ’UCh¬s
(
NULL
, NULL, 0, &
¡©us
);

99 ià(
	`U_SUCCESS
(
¡©us
è&& 
fI‹r
 =ğ
NULL
) {

100 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

102 
	}
}

104 
	gMubËTr›DiùiÚ¬y
::~
	$MubËTr›DiùiÚ¬y
() {

105 
d–‘e
 
fTr›
;

106 
	`u‹xt_şo£
(
fI‹r
);

107 
	}
}

109 
št32_t


110 
	gMubËTr›DiùiÚ¬y
::
	$£¬ch
Ğ
UText
 *
‹xt
,

111 
št32_t
 
maxL’gth
,

112 
št32_t
 *
Ëngths
,

113 &
couÁ
,

114 
lim™
,

115 
T”ÇryNode
 *&
·»Á
,

116 
UBoŞ
 &
pM©ched
 ) const {

118 cÚ¡ 
T”ÇryNode
 *
up
 = 
NULL
;

119 cÚ¡ 
T”ÇryNode
 *
p
 = 
fTr›
;

120 
mycouÁ
 = 0;

121 
pM©ched
 = 
TRUE
;

122 
i
;

124 
UCh¬
 
uc
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

125 
i
 = 0; i < 
maxL’gth
 && 
p
 !ğ
NULL
; ++i) {

126 
p
 !ğ
NULL
) {

127 ià(
uc
 < 
p
->
ch
) {

128 
up
 = 
p
;

129 
p
 =…->
low
;

131 ià(
uc
 =ğ
p
->
ch
) {

135 
up
 = 
p
;

136 
p
 =…->
high
;

139 ià(
p
 =ğ
NULL
) {

140 
pM©ched
 = 
FALSE
;

144 ià(
lim™
 > 0 && (
p
->
æags
 & 
kEndsWÜd
)) {

145 
Ëngths
[
mycouÁ
++] = 
i
+1;

146 --
lim™
;

148 
up
 = 
p
;

149 
p
 =…->
equ®
;

150 
uc
 = 
	`u‹xt_Ãxt32
(
‹xt
);

151 
uc
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

156 
·»Á
 = (
T”ÇryNode
 *)
up
;

157 
couÁ
 = 
mycouÁ
;

158  
i
;

159 
	}
}

162 
	gMubËTr›DiùiÚ¬y
::
	$addWÜd
ĞcÚ¡ 
UCh¬
 *
wÜd
,

163 
št32_t
 
Ëngth
,

164 
UE¼ÜCode
 &
¡©us
 ) {

166 ià(
Ëngth
 <= 0) {

167 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

171 
T”ÇryNode
 *
·»Á
;

172 
UBoŞ
 
pM©ched
;

173 
couÁ
;

174 
fI‹r
 = 
	`u‹xt_İ’UCh¬s
(fI‹r, 
wÜd
, 
Ëngth
, &
¡©us
);

176 
m©ched
;

177 
m©ched
 = 
	`£¬ch
(
fI‹r
, 
Ëngth
, 
NULL
, 
couÁ
, 0, 
·»Á
, 
pM©ched
);

179 
m©ched
++ < 
Ëngth
) {

180 
UCh¬32
 
uc
 = 
	`u‹xt_Ãxt32
(
fI‹r
);

181 
	`U_ASSERT
(
uc
 !ğ
U_SENTINEL
);

182 
T”ÇryNode
 *
ÃwNode
 = 
Ãw
 
	`T”ÇryNode
(
uc
);

183 ià(
ÃwNode
 =ğ
NULL
) {

184 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

187 ià(
pM©ched
) {

188 
·»Á
->
equ®
 = 
ÃwNode
;

191 
pM©ched
 = 
TRUE
;

192 ià(
uc
 < 
·»Á
->
ch
) {

193 
·»Á
->
low
 = 
ÃwNode
;

196 
·»Á
->
high
 = 
ÃwNode
;

199 
·»Á
 = 
ÃwNode
;

202 
·»Á
->
æags
 |ğ
kEndsWÜd
;

203 
	}
}

207 
	gMubËTr›DiùiÚ¬y
::
	$addWÜds
Ğ
UEnum”©iÚ
 *
wÜds
,

208 
UE¼ÜCode
 &
¡©us
 ) {

209 
št32_t
 
Ëngth
;

210 cÚ¡ 
UCh¬
 *
wÜd
;

211 (
wÜd
 = 
	`u’um_uÃxt
(
wÜds
, &
Ëngth
, &
¡©us
)è&& 
	`U_SUCCESS
(status)) {

212 
	`addWÜd
(
wÜd
, 
Ëngth
, 
¡©us
);

214 
	}
}

217 
št32_t


218 
	gMubËTr›DiùiÚ¬y
::
	$m©ches
Ğ
UText
 *
‹xt
,

219 
št32_t
 
maxL’gth
,

220 
št32_t
 *
Ëngths
,

221 &
couÁ
,

222 
lim™
 ) const {

223 
T”ÇryNode
 *
·»Á
;

224 
UBoŞ
 
pM©ched
;

225  
	`£¬ch
(
‹xt
, 
maxL’gth
, 
Ëngths
, 
couÁ
, 
lim™
, 
·»Á
, 
pM©ched
);

226 
	}
}

229 şas 
	cMubËTr›Enum”©iÚ
 : 
public
 
SŒšgEnum”©iÚ
 {

230 
´iv©e
:

231 
USck
 
fNodeSck
;

232 
UVeùÜ32
 
	mfB¿nchSck
;

233 
T”ÇryNode
 *
	mfRoÙ
;

234 
	eSckB¿nch
 {

235 
	mkLessThª
,

236 
	mkEqu®
,

237 
	mkG»©”Thª
,

238 
	mkDÚe


241 
	gpublic
:

242 
UCÏssID
 
U_EXPORT2
 
g‘SticCÏssID
();

243 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

244 
public
:

245 
	$MubËTr›Enum”©iÚ
(
T”ÇryNode
 *
roÙ
, 
UE¼ÜCode
 &
¡©us
)

246 : 
	`fNodeSck
(
¡©us
), 
	$fB¿nchSck
(
¡©us
) {

247 
fRoÙ
 = 
roÙ
;

248 
fNodeSck
.
	`push
(
roÙ
, 
¡©us
);

249 
fB¿nchSck
.
	`push
(
kLessThª
, 
¡©us
);

250 
uni¡r
.
	`»move
();

251 
	}
}

253 
	gvœtu®
 ~
	$MubËTr›Enum”©iÚ
() {

254 
	}
}

256 
vœtu®
 
SŒšgEnum”©iÚ
 *
	$şÚe
() const {

257 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

258  
Ãw
 
	`MubËTr›Enum”©iÚ
(
fRoÙ
, 
¡©us
);

259 
	}
}

261 
vœtu®
 cÚ¡ 
UnicodeSŒšg
 *
	$¢ext
(
UE¼ÜCode
 &
¡©us
) {

262 ià(
fNodeSck
.
	`em±y
(è|| 
	`U_FAILURE
(
¡©us
)) {

263  
NULL
;

265 
T”ÇryNode
 *
node
 = (T”ÇryNod*è
fNodeSck
.
	`³ek
();

266 
SckB¿nch
 
wh”e
 = (SckB¿nchè
fB¿nchSck
.
	`³eki
();

267 !
fNodeSck
.
	`em±y
(è&& 
	`U_SUCCESS
(
¡©us
)) {

268 
UBoŞ
 
em™
;

269 
UBoŞ
 
equ®
;

271 
wh”e
) {

272 
kLessThª
:

273 ià(
node
->
low
 !ğ
NULL
) {

274 
fB¿nchSck
.
	`£tEËm’tAt
(
kEqu®
, fB¿nchSck.
	`size
()-1);

275 
node
 = (
T”ÇryNode
 *è
fNodeSck
.
	`push
Òode->
low
, 
¡©us
);

276 
wh”e
 = (
SckB¿nch
è
fB¿nchSck
.
	`push
(
kLessThª
, 
¡©us
);

279 
kEqu®
:

280 
em™
 = (
node
->
æags
 & 
kEndsWÜd
) != 0;

281 
equ®
 = (
node
->equ® !ğ
NULL
);

286 ià(
equ®
 || 
em™
) {

287 
uni¡r
.
	`­³nd
(
node
->
ch
);

288 
fB¿nchSck
.
	`£tEËm’tAt
(
kG»©”Thª
, fB¿nchSck.
	`size
()-1);

290 ià(
equ®
) {

291 
node
 = (
T”ÇryNode
 *è
fNodeSck
.
	`push
Òode->
equ®
, 
¡©us
);

292 
wh”e
 = (
SckB¿nch
è
fB¿nchSck
.
	`push
(
kLessThª
, 
¡©us
);

294 ià(
em™
) {

295  &
uni¡r
;

297 ià(
equ®
) {

300 
kG»©”Thª
:

302 ià(
node
->
equ®
 !ğ
NULL
 || (node->
æags
 & 
kEndsWÜd
)) {

303 
uni¡r
.
	`Œunÿ‹
(uni¡r.
	`Ëngth
()-1);

305 ià(
node
->
high
 !ğ
NULL
) {

306 
fB¿nchSck
.
	`£tEËm’tAt
(
kDÚe
, fB¿nchSck.
	`size
()-1);

307 
node
 = (
T”ÇryNode
 *è
fNodeSck
.
	`push
Òode->
high
, 
¡©us
);

308 
wh”e
 = (
SckB¿nch
è
fB¿nchSck
.
	`push
(
kLessThª
, 
¡©us
);

311 
kDÚe
:

312 
fNodeSck
.
	`pİ
();

313 
fB¿nchSck
.
	`pİi
();

314 
node
 = (
T”ÇryNode
 *è
fNodeSck
.
	`³ek
();

315 
wh”e
 = (
SckB¿nch
è
fB¿nchSck
.
	`³eki
();

318  
NULL
;

321  
NULL
;

322 
	}
}

325 
vœtu®
 
št32_t
 
	$couÁ
(
UE¼ÜCode
 &
¡©us
) const {

326 
MubËTr›Enum”©iÚ
 
	`couÁ”
(
fRoÙ
, 
¡©us
);

327 
št32_t
 
»suÉ
 = 0;

328 
couÁ”
.
	`¢ext
(
¡©us
è!ğ
NULL
 && 
	`U_SUCCESS
(status)) {

329 ++
»suÉ
;

331  
»suÉ
;

332 
	}
}

334 
vœtu®
 
	$»£t
(
UE¼ÜCode
 &
¡©us
) {

335 
fNodeSck
.
	`»moveAÎEËm’ts
();

336 
fB¿nchSck
.
	`»moveAÎEËm’ts
();

337 
fNodeSck
.
	`push
(
fRoÙ
, 
¡©us
);

338 
fB¿nchSck
.
	`push
(
kLessThª
, 
¡©us
);

339 
uni¡r
.
	`»move
();

340 
	}
}

343 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
MubËTr›Enum”©iÚ
)

345 
SŒšgEnum”©iÚ
 *

346 
MubËTr›DiùiÚ¬y
::
	$İ’WÜds
Ğ
UE¼ÜCode
 &
¡©us
 ) const {

347 ià(
	`U_FAILURE
(
¡©us
)) {

348  
NULL
;

350  
Ãw
 
	`MubËTr›Enum”©iÚ
(
fTr›
, 
¡©us
);

351 
	}
}

357 
	sCom·ùTr›H—d”
 {

358 
ušt32_t
 
	msize
;

359 
ušt32_t
 
	mmagic
;

360 
ušt16_t
 
	mnodeCouÁ
;

361 
ušt16_t
 
	mroÙ
;

362 
ušt32_t
 
	moff£ts
[1];

371 
	sCom·ùTr›Node
 {

372 
ušt16_t
 
	mæagscouÁ
;

375 
	eCom·ùTr›NodeFÏgs
 {

376 
	mkV”tiÿlNode
 = 0x1000,

377 
	mkP¬’tEndsWÜd
 = 0x2000,

378 
	mkRe£rvedFÏg1
 = 0x4000,

379 
	mkRe£rvedFÏg2
 = 0x8000,

380 
	mkCouÁMask
 = 0x0FFF,

381 
	mkFÏgMask
 = 0xF000

386 
	sCom·ùTr›HÜizÚlEÁry
 {

387 
ušt16_t
 
	mch
;

388 
ušt16_t
 
	mequ®
;

394 
	sCom·ùTr›HÜizÚlNode
 {

395 
ušt16_t
 
	mæagscouÁ
;

396 
Com·ùTr›HÜizÚlEÁry
 
	m’Œ›s
[1];

399 
	sCom·ùTr›V”tiÿlNode
 {

400 
ušt16_t
 
	mæagscouÁ
;

401 
ušt16_t
 
	mequ®
;

402 
ušt16_t
 
	mch¬s
[1];

406 
	#COMPACT_TRIE_MAGIC_1
 0x44696301

	)

408 
	gCom·ùTr›DiùiÚ¬y
::
	$Com·ùTr›DiùiÚ¬y
(
UD©aMemÜy
 *
d©aObj
,

409 
UE¼ÜCode
 &
¡©us
 )

410 : 
	$fUD©a
(
d©aObj
)

412 
fD©a
 = (cÚ¡ 
Com·ùTr›H—d”
 *è
	`ud©a_g‘MemÜy
(
d©aObj
);

413 
fOwnD©a
 = 
FALSE
;

414 ià(
fD©a
->
magic
 !ğ
COMPACT_TRIE_MAGIC_1
) {

415 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

416 
fD©a
 = 
NULL
;

418 
	}
}

419 
	gCom·ùTr›DiùiÚ¬y
::
	$Com·ùTr›DiùiÚ¬y
ĞcÚ¡ *
d©a
,

420 
UE¼ÜCode
 &
¡©us
 )

421 : 
	$fUD©a
(
NULL
)

423 
fD©a
 = (cÚ¡ 
Com·ùTr›H—d”
 *è
d©a
;

424 
fOwnD©a
 = 
FALSE
;

425 ià(
fD©a
->
magic
 !ğ
COMPACT_TRIE_MAGIC_1
) {

426 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

427 
fD©a
 = 
NULL
;

429 
	}
}

431 
	gCom·ùTr›DiùiÚ¬y
::
	$Com·ùTr›DiùiÚ¬y
ĞcÚ¡ 
MubËTr›DiùiÚ¬y
 &
diù
,

432 
UE¼ÜCode
 &
¡©us
 )

433 : 
	$fUD©a
(
NULL
)

435 
fD©a
 = 
	`com·ùMubËTr›DiùiÚ¬y
(
diù
, 
¡©us
);

436 
fOwnD©a
 = !
	`U_FAILURE
(
¡©us
);

437 
	}
}

439 
	gCom·ùTr›DiùiÚ¬y
::~
	$Com·ùTr›DiùiÚ¬y
() {

440 ià(
fOwnD©a
) {

441 
	`u´v_ä“
((*)
fD©a
);

443 ià(
fUD©a
) {

444 
	`ud©a_şo£
(
fUD©a
);

446 
	}
}

448 
ušt32_t


449 
	gCom·ùTr›DiùiÚ¬y
::
	$d©aSize
() const {

450  
fD©a
->
size
;

451 
	}
}

454 
	gCom·ùTr›DiùiÚ¬y
::
	$d©a
() const {

455  
fD©a
;

456 
	}
}

459 
šlše
 cÚ¡ 
Com·ùTr›Node
 *

460 
	$g‘Com·ùNode
(cÚ¡ 
Com·ùTr›H—d”
 *
h—d”
, 
ušt16_t
 
node
) {

461  (cÚ¡ 
Com·ùTr›Node
 *)((cÚ¡ 
ušt8_t
 *)
h—d”
 + h—d”->
off£ts
[
node
]);

462 
	}
}

464 
št32_t


465 
	gCom·ùTr›DiùiÚ¬y
::
	$m©ches
Ğ
UText
 *
‹xt
,

466 
št32_t
 
maxL’gth
,

467 
št32_t
 *
Ëngths
,

468 &
couÁ
,

469 
lim™
 ) const {

471 cÚ¡ 
Com·ùTr›Node
 *
node
 = 
	`g‘Com·ùNode
(
fD©a
, fD©a->
roÙ
);

472 
mycouÁ
 = 0;

474 
UCh¬
 
uc
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

475 
i
 = 0;

477 
node
 !ğ
NULL
) {

479 ià(
lim™
 > 0 && (
node
->
æagscouÁ
 & 
kP¬’tEndsWÜd
)) {

480 
Ëngths
[
mycouÁ
++] = 
i
;

481 --
lim™
;

486 ià(
i
 >ğ
maxL’gth
) {

490 
nodeCouÁ
 = (
node
->
æagscouÁ
 & 
kCouÁMask
);

491 ià(
nodeCouÁ
 == 0) {

495 ià(
node
->
æagscouÁ
 & 
kV”tiÿlNode
) {

497 cÚ¡ 
Com·ùTr›V”tiÿlNode
 *
vnode
 = (cÚ¡ Com·ùTr›V”tiÿlNod*)
node
;

498 
j
 = 0; j < 
nodeCouÁ
 && 
i
 < 
maxL’gth
; ++j) {

499 ià(
uc
 !ğ
vnode
->
ch¬s
[
j
]) {

501 
ex™
;

503 
	`u‹xt_Ãxt32
(
‹xt
);

504 
uc
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

505 ++
i
;

510 
node
 = 
	`g‘Com·ùNode
(
fD©a
, 
vnode
->
equ®
);

514 cÚ¡ 
Com·ùTr›HÜizÚlNode
 *
hnode
 = (cÚ¡ Com·ùTr›HÜizÚlNod*)
node
;

515 
low
 = 0;

516 
high
 = 
nodeCouÁ
-1;

517 
middË
;

518 
node
 = 
NULL
;

519 
high
 >ğ
low
) {

520 
middË
 = (
high
+
low
)/2;

521 ià(
uc
 =ğ
hnode
->
’Œ›s
[
middË
].
ch
) {

523 
node
 = 
	`g‘Com·ùNode
(
fD©a
, 
hnode
->
’Œ›s
[
middË
].
equ®
);

524 
	`u‹xt_Ãxt32
(
‹xt
);

525 
uc
 = 
	`u‹xt_cu¼’t32
(
‹xt
);

526 ++
i
;

529 ià(
uc
 < 
hnode
->
’Œ›s
[
middË
].
ch
) {

530 
high
 = 
middË
-1;

533 
low
 = 
middË
+1;

538 
ex™
:

539 
couÁ
 = 
mycouÁ
;

540  
i
;

541 
	}
}

544 şas 
	cCom·ùTr›Enum”©iÚ
 : 
public
 
SŒšgEnum”©iÚ
 {

545 
´iv©e
:

546 
UVeùÜ32
 
fNodeSck
;

547 
UVeùÜ32
 
	mfIndexSck
;

548 cÚ¡ 
Com·ùTr›H—d”
 *
	mfH—d”
;

550 
	mpublic
:

551 
UCÏssID
 
U_EXPORT2
 
g‘SticCÏssID
();

552 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

553 
public
:

554 
	$Com·ùTr›Enum”©iÚ
(cÚ¡ 
Com·ùTr›H—d”
 *
h—d”
, 
UE¼ÜCode
 &
¡©us
)

555 : 
	`fNodeSck
(
¡©us
), 
	$fIndexSck
(
¡©us
) {

556 
fH—d”
 = 
h—d”
;

557 
fNodeSck
.
	`push
(
h—d”
->
roÙ
, 
¡©us
);

558 
fIndexSck
.
	`push
(0, 
¡©us
);

559 
uni¡r
.
	`»move
();

562 
vœtu®
 ~
	$Com·ùTr›Enum”©iÚ
() {

563 
	}
}

565 
vœtu®
 
SŒšgEnum”©iÚ
 *
	$şÚe
() const {

566 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

567  
Ãw
 
	`Com·ùTr›Enum”©iÚ
(
fH—d”
, 
¡©us
);

568 
	}
}

570 
vœtu®
 cÚ¡ 
UnicodeSŒšg
 * 
¢ext
(
UE¼ÜCode
 &
¡©us
);

573 
vœtu®
 
št32_t
 
	$couÁ
(
UE¼ÜCode
 &
¡©us
) const {

574 
Com·ùTr›Enum”©iÚ
 
	`couÁ”
(
fH—d”
, 
¡©us
);

575 
št32_t
 
»suÉ
 = 0;

576 
couÁ”
.
	`¢ext
(
¡©us
è!ğ
NULL
 && 
	`U_SUCCESS
(status)) {

577 ++
»suÉ
;

579  
»suÉ
;

580 
	}
}

582 
vœtu®
 
	$»£t
(
UE¼ÜCode
 &
¡©us
) {

583 
fNodeSck
.
	`»moveAÎEËm’ts
();

584 
fIndexSck
.
	`»moveAÎEËm’ts
();

585 
fNodeSck
.
	`push
(
fH—d”
->
roÙ
, 
¡©us
);

586 
fIndexSck
.
	`push
(0, 
¡©us
);

587 
uni¡r
.
	`»move
();

588 
	}
}

591 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
Com·ùTr›Enum”©iÚ
)

593 cÚ¡ 
UnicodeSŒšg
 *

594 
Com·ùTr›Enum”©iÚ
::
	$¢ext
(
UE¼ÜCode
 &
¡©us
) {

595 ià(
fNodeSck
.
	`em±y
(è|| 
	`U_FAILURE
(
¡©us
)) {

596  
NULL
;

598 cÚ¡ 
Com·ùTr›Node
 *
node
 = 
	`g‘Com·ùNode
(
fH—d”
, 
fNodeSck
.
	`³eki
());

599 
wh”e
 = 
fIndexSck
.
	`³eki
();

600 !
fNodeSck
.
	`em±y
(è&& 
	`U_SUCCESS
(
¡©us
)) {

601 
nodeCouÁ
 = (
node
->
æagscouÁ
 & 
kCouÁMask
);

602 
UBoŞ
 
gošgDown
 = 
FALSE
;

603 ià(
nodeCouÁ
 == 0) {

605 
fNodeSck
.
	`pİi
();

606 
fIndexSck
.
	`pİi
();

607 
node
 = 
	`g‘Com·ùNode
(
fH—d”
, 
fNodeSck
.
	`³eki
());

608 
wh”e
 = 
fIndexSck
.
	`³eki
();

610 ià(
node
->
æagscouÁ
 & 
kV”tiÿlNode
) {

612 cÚ¡ 
Com·ùTr›V”tiÿlNode
 *
vnode
 = (cÚ¡ Com·ùTr›V”tiÿlNod*)
node
;

613 ià(
wh”e
 == 0) {

615 
uni¡r
.
	`­³nd
((cÚ¡ 
UCh¬
 *)
vnode
->
ch¬s
, (
št32_t
è
nodeCouÁ
);

616 
fIndexSck
.
	`£tEËm’tAt
(1, fIndexSck.
	`size
()-1);

617 
node
 = 
	`g‘Com·ùNode
(
fH—d”
, 
fNodeSck
.
	`push
(
vnode
->
equ®
, 
¡©us
));

618 
wh”e
 = 
fIndexSck
.
	`push
(0, 
¡©us
);

619 
gošgDown
 = 
TRUE
;

623 
uni¡r
.
	`Œunÿ‹
(uni¡r.
	`Ëngth
()-
nodeCouÁ
);

624 
fNodeSck
.
	`pİi
();

625 
fIndexSck
.
	`pİi
();

626 
node
 = 
	`g‘Com·ùNode
(
fH—d”
, 
fNodeSck
.
	`³eki
());

627 
wh”e
 = 
fIndexSck
.
	`³eki
();

632 cÚ¡ 
Com·ùTr›HÜizÚlNode
 *
hnode
 = (cÚ¡ Com·ùTr›HÜizÚlNod*)
node
;

633 ià(
wh”e
 > 0) {

635 
uni¡r
.
	`Œunÿ‹
(uni¡r.
	`Ëngth
()-1);

637 ià(
wh”e
 < 
nodeCouÁ
) {

639 
uni¡r
.
	`­³nd
((
UCh¬
)
hnode
->
’Œ›s
[
wh”e
].
ch
);

640 
fIndexSck
.
	`£tEËm’tAt
(
wh”e
+1, fIndexSck.
	`size
()-1);

641 
node
 = 
	`g‘Com·ùNode
(
fH—d”
, 
fNodeSck
.
	`push
(
hnode
->
’Œ›s
[
wh”e
].
equ®
, 
¡©us
));

642 
wh”e
 = 
fIndexSck
.
	`push
(0, 
¡©us
);

643 
gošgDown
 = 
TRUE
;

647 
fNodeSck
.
	`pİi
();

648 
fIndexSck
.
	`pİi
();

649 
node
 = 
	`g‘Com·ùNode
(
fH—d”
, 
fNodeSck
.
	`³eki
());

650 
wh”e
 = 
fIndexSck
.
	`³eki
();

655 ià(
gošgDown
 && (
node
->
æagscouÁ
 & 
kP¬’tEndsWÜd
)) {

656  &
uni¡r
;

659  
NULL
;

660 
	}
}

662 
SŒšgEnum”©iÚ
 *

663 
	gCom·ùTr›DiùiÚ¬y
::
	$İ’WÜds
Ğ
UE¼ÜCode
 &
¡©us
 ) const {

664 ià(
	`U_FAILURE
(
¡©us
)) {

665  
NULL
;

667  
Ãw
 
	`Com·ùTr›Enum”©iÚ
(
fD©a
, 
¡©us
);

668 
	}
}

676 şas 
	cBudCom·ùTr›Node
: 
public
 
UMemÜy
 {

677 
public
:

678 
UBoŞ
 
fP¬’tEndsWÜd
;

679 
UBoŞ
 
	mfV”tiÿl
;

680 
UBoŞ
 
	mfHasDu¶iÿ‹
;

681 
št32_t
 
	mfNodeID
;

682 
UnicodeSŒšg
 
	mfCh¬s
;

684 
	mpublic
:

685 
	$BudCom·ùTr›Node
(
UBoŞ
 
·»ÁEndsWÜd
, UBoŞ 
v”tiÿl
, 
USck
 &
nodes
, 
UE¼ÜCode
 &
¡©us
) {

686 
fP¬’tEndsWÜd
 = 
·»ÁEndsWÜd
;

687 
fHasDu¶iÿ‹
 = 
FALSE
;

688 
fV”tiÿl
 = 
v”tiÿl
;

689 
fNodeID
 = 
nodes
.
	`size
();

690 
nodes
.
	`push
(
this
, 
¡©us
);

693 
vœtu®
 ~
	$BudCom·ùTr›Node
() {

694 
	}
}

696 
vœtu®
 
ušt32_t
 
	$size
() {

697  (
ušt16_t
);

698 
	}
}

700 
vœtu®
 
	$wr™e
(
ušt8_t
 *
by‹s
, 
ušt32_t
 &
off£t
, cÚ¡ 
UVeùÜ32
 & ) {

702 *((
ušt16_t
 *)(
by‹s
+
off£t
)èğ(
fCh¬s
.
	`Ëngth
(è& 
kCouÁMask
)

703 | (
fV”tiÿl
 ? 
kV”tiÿlNode
 : 0è| (
fP¬’tEndsWÜd
 ? 
kP¬’tEndsWÜd
 : 0 );

704 
off£t
 +ğ(
ušt16_t
);

705 
	}
}

708 şas 
	cBudCom·ùTr›HÜizÚlNode
: 
public
 
BudCom·ùTr›Node
 {

709 
public
:

710 
USck
 
fLšks
;

712 
	mpublic
:

713 
	$BudCom·ùTr›HÜizÚlNode
(
UBoŞ
 
·»ÁEndsWÜd
, 
USck
 &
nodes
, 
UE¼ÜCode
 &
¡©us
)

714 : 
	`BudCom·ùTr›Node
(
·»ÁEndsWÜd
, 
FALSE
, 
nodes
, 
¡©us
), 
	$fLšks
(
¡©us
) {

717 
vœtu®
 ~
	$BudCom·ùTr›HÜizÚlNode
() {

718 
	}
}

720 
vœtu®
 
ušt32_t
 
	$size
() {

721  
	`off£tof
(
Com·ùTr›HÜizÚlNode
,
’Œ›s
) +

722 (
fCh¬s
.
	`Ëngth
()*(
Com·ùTr›HÜizÚlEÁry
));

723 
	}
}

725 
vœtu®
 
	$wr™e
(
ušt8_t
 *
by‹s
, 
ušt32_t
 &
off£t
, cÚ¡ 
UVeùÜ32
 &
Œª¦©e
) {

726 
BudCom·ùTr›Node
::
	`wr™e
(
by‹s
, 
off£t
, 
Œª¦©e
);

727 
št32_t
 
couÁ
 = 
fCh¬s
.
	`Ëngth
();

728 
št32_t
 
i
 = 0; i < 
couÁ
; ++i) {

729 
Com·ùTr›HÜizÚlEÁry
 *
’Œy
 = (Com·ùTr›HÜizÚlEÁry *)(
by‹s
+
off£t
);

730 
’Œy
->
ch
 = 
fCh¬s
[
i
];

731 
’Œy
->
equ®
 = 
Œª¦©e
.
	`–em’tAti
(((
BudCom·ùTr›Node
 *)
fLšks
[
i
])->
fNodeID
);

732 #ifdeà
DEBUG_TRIE_DICT


733 ià(
’Œy
->
equ®
 == 0) {

734 
	`årštf
(
¡d”r
, "ERROR: horizontal†ink %d,†ogical‚ode %d mapso…hysical‚ode zero\n",

735 
i
, ((
BudCom·ùTr›Node
 *)
fLšks
[i])->
fNodeID
);

738 
off£t
 +ğ(
Com·ùTr›HÜizÚlEÁry
);

740 
	}
}

742 
	$addNode
(
UCh¬
 
ch
, 
BudCom·ùTr›Node
 *
lšk
, 
UE¼ÜCode
 &
¡©us
) {

743 
fCh¬s
.
	`­³nd
(
ch
);

744 
fLšks
.
	`push
(
lšk
, 
¡©us
);

745 
	}
}

748 şas 
	cBudCom·ùTr›V”tiÿlNode
: 
public
 
BudCom·ùTr›Node
 {

749 
public
:

750 
BudCom·ùTr›Node
 *
fEqu®
;

752 
	mpublic
:

753 
	$BudCom·ùTr›V”tiÿlNode
(
UBoŞ
 
·»ÁEndsWÜd
, 
USck
 &
nodes
, 
UE¼ÜCode
 &
¡©us
)

754 : 
	$BudCom·ùTr›Node
(
·»ÁEndsWÜd
, 
TRUE
, 
nodes
, 
¡©us
) {

755 
fEqu®
 = 
NULL
;

758 
vœtu®
 ~
	$BudCom·ùTr›V”tiÿlNode
() {

759 
	}
}

761 
vœtu®
 
ušt32_t
 
	$size
() {

762  
	`off£tof
(
Com·ùTr›V”tiÿlNode
,
ch¬s
è+ (
fCh¬s
.
	`Ëngth
()*(
ušt16_t
));

763 
	}
}

765 
vœtu®
 
	$wr™e
(
ušt8_t
 *
by‹s
, 
ušt32_t
 &
off£t
, cÚ¡ 
UVeùÜ32
 &
Œª¦©e
) {

766 
Com·ùTr›V”tiÿlNode
 *
node
 = (Com·ùTr›V”tiÿlNod*)(
by‹s
+
off£t
);

767 
BudCom·ùTr›Node
::
	`wr™e
(
by‹s
, 
off£t
, 
Œª¦©e
);

768 
node
->
equ®
 = 
Œª¦©e
.
	`–em’tAti
(
fEqu®
->
fNodeID
);

769 
off£t
 +ğ(
node
->
equ®
);

770 #ifdeà
DEBUG_TRIE_DICT


771 ià(
node
->
equ®
 == 0) {

772 
	`årštf
(
¡d”r
, "ERROR: vertical†ink,†ogical‚ode %d mapso…hysical‚ode zero\n",

773 
fEqu®
->
fNodeID
);

776 
fCh¬s
.
	`exŒaù
(0, fCh¬s.
	`Ëngth
(), (
UCh¬
 *)
node
->
ch¬s
);

777 
off£t
 +ğ(
ušt16_t
)*
fCh¬s
.
	`Ëngth
();

778 
	}
}

780 
	$addCh¬
(
UCh¬
 
ch
) {

781 
fCh¬s
.
	`­³nd
(
ch
);

782 
	}
}

784 
	$£tLšk
(
BudCom·ùTr›Node
 *
node
) {

785 
fEqu®
 = 
node
;

786 
	}
}

790 
w®kHÜizÚl
(cÚ¡ 
T”ÇryNode
 *
node
,

791 
BudCom·ùTr›HÜizÚlNode
 *
budšg
,

792 
USck
 &
nodes
,

793 
UE¼ÜCode
 &
¡©us
);

797 
BudCom·ùTr›Node
 *

798 
	$com·ùOÃNode
(cÚ¡ 
T”ÇryNode
 *
node
, 
UBoŞ
 
·»ÁEndsWÜd
, 
USck
 &
nodes
, 
UE¼ÜCode
 &
¡©us
) {

799 ià(
	`U_FAILURE
(
¡©us
)) {

800  
NULL
;

802 
BudCom·ùTr›Node
 *
»suÉ
 = 
NULL
;

803 
UBoŞ
 
hÜizÚl
 = (
node
->
low
 !ğ
NULL
 ||‚ode->
high
 != NULL);

804 ià(
hÜizÚl
) {

805 
BudCom·ùTr›HÜizÚlNode
 *
hResuÉ
 =

806 
Ãw
 
	`BudCom·ùTr›HÜizÚlNode
(
·»ÁEndsWÜd
, 
nodes
, 
¡©us
);

807 ià(
hResuÉ
 =ğ
NULL
) {

808 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

809  
NULL
;

811 ià(
	`U_SUCCESS
(
¡©us
)) {

812 
	`w®kHÜizÚl
(
node
, 
hResuÉ
, 
nodes
, 
¡©us
);

813 
»suÉ
 = 
hResuÉ
;

817 
BudCom·ùTr›V”tiÿlNode
 *
vResuÉ
 =

818 
Ãw
 
	`BudCom·ùTr›V”tiÿlNode
(
·»ÁEndsWÜd
, 
nodes
, 
¡©us
);

819 ià(
vResuÉ
 =ğ
NULL
) {

820 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

822 ià(
	`U_SUCCESS
(
¡©us
)) {

823 
UBoŞ
 
’dsWÜd
 = 
FALSE
;

826 
vResuÉ
->
	`addCh¬
(
node
->
ch
);

827 
’dsWÜd
 = (
node
->
æags
 & 
kEndsWÜd
) != 0;

828 
node
 =‚ode->
equ®
;

830 
node
 !ğ
NULL
 && !
’dsWÜd
 &&‚ode->
low
 =ğNULL &&‚ode->
high
 == NULL);

831 ià(
node
 =ğ
NULL
) {

832 ià(!
’dsWÜd
) {

833 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

836 
vResuÉ
->
	`£tLšk
((
BudCom·ùTr›Node
 *)
nodes
[1]);

840 
vResuÉ
->
	`£tLšk
(
	`com·ùOÃNode
(
node
, 
’dsWÜd
, 
nodes
, 
¡©us
));

842 
»suÉ
 = 
vResuÉ
;

845  
»suÉ
;

846 
	}
}

851 
	$w®kHÜizÚl
(cÚ¡ 
T”ÇryNode
 *
node
,

852 
BudCom·ùTr›HÜizÚlNode
 *
budšg
,

853 
USck
 &
nodes
,

854 
UE¼ÜCode
 &
¡©us
) {

855 
	`U_SUCCESS
(
¡©us
è&& 
node
 !ğ
NULL
) {

856 ià(
node
->
low
 !ğ
NULL
) {

857 
	`w®kHÜizÚl
(
node
->
low
, 
budšg
, 
nodes
, 
¡©us
);

859 
BudCom·ùTr›Node
 *
lšk
 = 
NULL
;

860 ià(
node
->
equ®
 !ğ
NULL
) {

861 
lšk
 = 
	`com·ùOÃNode
(
node
->
equ®
, (node->
æags
 & 
kEndsWÜd
è!ğ0, 
nodes
, 
¡©us
);

863 ià(
node
->
æags
 & 
kEndsWÜd
) {

864 
lšk
 = (
BudCom·ùTr›Node
 *)
nodes
[1];

866 ià(
	`U_SUCCESS
(
¡©us
è&& 
lšk
 !ğ
NULL
) {

867 
budšg
->
	`addNode
(
node
->
ch
, 
lšk
, 
¡©us
);

873 
node
 =‚ode->
high
;

875 
	}
}

877 
U_NAMESPACE_END


878 
U_NAMESPACE_USE


879 
U_CDECL_BEGIN


880 
št32_t
 
U_CALLCONV


881 
	$_sÜtBudNodes
(cÚ¡ * , cÚ¡ *
voidl
, cÚ¡ *
voidr
) {

882 
BudCom·ùTr›Node
 *
Ëá
 = *(BudCom·ùTr›Nod**)
voidl
;

883 
BudCom·ùTr›Node
 *
right
 = *(BudCom·ùTr›Nod**)
voidr
;

885 ià(
Ëá
 =ğ
right
) {

889 ià(
Ëá
->
fV”tiÿl
 !ğ
right
->fVertical) {

890  
Ëá
->
fV”tiÿl
 - 
right
->fVertical;

893 ià(
Ëá
->
fP¬’tEndsWÜd
 !ğ
right
->fParentEndsWord) {

894  
Ëá
->
fP¬’tEndsWÜd
 - 
right
->fParentEndsWord;

897 
št32_t
 
»suÉ
 = 
Ëá
->
fCh¬s
.
	`com·»
(
right
->fChars);

898 ià(
»suÉ
 != 0) {

899  
»suÉ
;

902 ià(
Ëá
->
fV”tiÿl
) {

903 
»suÉ
 = ((
BudCom·ùTr›V”tiÿlNode
 *)
Ëá
)->
fEqu®
->
fNodeID


904 - ((
BudCom·ùTr›V”tiÿlNode
 *)
right
)->
fEqu®
->
fNodeID
;

911 
BudCom·ùTr›HÜizÚlNode
 *
hËá
, *
hright
;

912 
hËá
 = (
BudCom·ùTr›HÜizÚlNode
 *)
Ëá
;

913 
hright
 = (
BudCom·ùTr›HÜizÚlNode
 *)
right
;

914 
št32_t
 
couÁ
 = 
hËá
->
fLšks
.
	`size
();

915 
št32_t
 
i
 = 0; i < 
couÁ
 && 
»suÉ
 == 0; ++i) {

916 
»suÉ
 = ((
BudCom·ùTr›Node
 *)(
hËá
->
fLšks
[
i
]))->
fNodeID
 -

917 ((
BudCom·ùTr›Node
 *)(
hright
->
fLšks
[
i
]))->
fNodeID
;

921 ià(
»suÉ
 == 0) {

922 
Ëá
->
fHasDu¶iÿ‹
 = 
TRUE
;

923 
right
->
fHasDu¶iÿ‹
 = 
TRUE
;

925  
»suÉ
;

926 
	}
}

927 
U_CDECL_END


928 
U_NAMESPACE_BEGIN


930 
	$cßËsûDu¶iÿ‹s
(
USck
 &
nodes
, 
UE¼ÜCode
 &
¡©us
) {

932 ià(
	`U_FAILURE
(
¡©us
)) {

935 
št32_t
 
size
 = 
nodes
.
	`size
();

936 **
¬¿y
 = (**)
	`u´v_m®loc
((*)*
size
);

937 ià(
¬¿y
 =ğ
NULL
) {

938 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

941 (è
nodes
.
	`toA¼ay
(
¬¿y
);

944 
št32_t
 
du³s
 = 0;

945 
·ssCouÁ
 = 0;

946 #ifdeà
DEBUG_TRIE_DICT


947 
tÙ®Du³s
 = 0;

950 
BudCom·ùTr›Node
 *
node
;

951 
BudCom·ùTr›Node
 *
fœ¡
 = 
NULL
;

952 
BudCom·ùTr›Node
 **
p
;

953 
BudCom·ùTr›Node
 **
pFœ¡
 = 
NULL
;

954 
št32_t
 
couÁ”
 = 
size
 - 2;

969 
	`u´v_sÜtA¼ay
(
¬¿y
+2, 
couÁ”
, (*), 
_sÜtBudNodes
, 
NULL
, (
·ssCouÁ
 > 0), &
¡©us
);

970 
du³s
 = 0;

971 
p
 = (
BudCom·ùTr›Node
 **)
¬¿y
 + 2; 
couÁ”
 > 0; --counter, ++p) {

972 
node
 = *
p
;

973 ià(
node
->
fHasDu¶iÿ‹
) {

974 ià(
fœ¡
 =ğ
NULL
) {

975 
fœ¡
 = 
node
;

976 
pFœ¡
 = 
p
;

978 ià(
	`_sÜtBudNodes
(
NULL
, 
pFœ¡
, 
p
) != 0) {

980 
fœ¡
 = 
node
;

981 
pFœ¡
 = 
p
;

983 ià(
node
->
fNodeID
 !ğ
fœ¡
->fNodeID) {

985 
node
->
fNodeID
 = 
fœ¡
->fNodeID;

986 
du³s
 += 1;

991 
fœ¡
 = 
NULL
;

992 
pFœ¡
 = 
NULL
;

995 
·ssCouÁ
 += 1;

996 #ifdeà
DEBUG_TRIE_DICT


997 
tÙ®Du³s
 +ğ
du³s
;

998 
	`årštf
(
¡d”r
, "Tr›‚oddu³„emov®,…as %d: %d‚ode gged\n", 
·ssCouÁ
, 
du³s
);

1001 
du³s
 > 0);

1002 #ifdeà
DEBUG_TRIE_DICT


1003 
	`årštf
(
¡d”r
, "Tr›‚oddu³„emov® com¶‘e: %dagged iÀ%d…as£s\n", 
tÙ®Du³s
, 
·ssCouÁ
);

1007 
	`u´v_ä“
(
¬¿y
);

1008 
	}
}

1010 
U_NAMESPACE_END


1011 
U_CDECL_BEGIN


1012 
U_CALLCONV
 
	$_d–‘eBudNode
(*
obj
) {

1013 
	`d–‘e
 (
BudCom·ùTr›Node
 *è
obj
;

1014 
	}
}

1015 
U_CDECL_END


1016 
U_NAMESPACE_BEGIN


1018 
Com·ùTr›H—d”
 *

1019 
	gCom·ùTr›DiùiÚ¬y
::
	$com·ùMubËTr›DiùiÚ¬y
ĞcÚ¡ 
MubËTr›DiùiÚ¬y
 &
diù
,

1020 
UE¼ÜCode
 &
¡©us
 ) {

1021 ià(
	`U_FAILURE
(
¡©us
)) {

1022  
NULL
;

1024 #ifdeà
DEBUG_TRIE_DICT


1025 
tms
 
timšg
;

1026 
tms
 
´evious
;

1027 (è::
	`times
(&
´evious
);

1029 
USck
 
	`nodes
(
_d–‘eBudNode
, 
NULL
, 
¡©us
);

1032 
nodes
.
	`addEËm’t
((
št32_t
)0, 
¡©us
);

1037 ià(
	`U_FAILURE
(
¡©us
)) {

1038  
NULL
;

1040 
BudCom·ùTr›Node
 *
‹rmš®
 = 
Ãw
 
	`BudCom·ùTr›Node
(
TRUE
, 
FALSE
, 
nodes
, 
¡©us
);

1041 ià(
‹rmš®
 =ğ
NULL
) {

1042 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1047 
BudCom·ùTr›Node
 *
roÙ
 = 
	`com·ùOÃNode
(
diù
.
fTr›
, 
FALSE
, 
nodes
, 
¡©us
);

1048 #ifdeà
DEBUG_TRIE_DICT


1049 (è::
	`times
(&
timšg
);

1050 
	`årštf
(
¡d”r
, "Compactrie built, %d‚odes,ime user %f system %f\n",

1051 
nodes
.
	`size
(), ()(
timšg
.
tms_utime
-
´evious
.tms_utime)/
CLK_TCK
,

1052 ()(
timšg
.
tms_¡ime
-
´evious
.tms_¡ime)/
CLK_TCK
);

1053 
´evious
 = 
timšg
;

1057 
	`cßËsûDu¶iÿ‹s
(
nodes
, 
¡©us
);

1058 #ifdeà
DEBUG_TRIE_DICT


1059 (è::
	`times
(&
timšg
);

1060 
	`årštf
(
¡d”r
, "Duplicates coalesced,ime user %f system %f\n",

1061 ()(
timšg
.
tms_utime
-
´evious
.tms_utime)/
CLK_TCK
,

1062 ()(
timšg
.
tms_¡ime
-
´evious
.tms_¡ime)/
CLK_TCK
);

1063 
´evious
 = 
timšg
;

1068 
ušt32_t
 
tÙ®Size
 = 
	`off£tof
(
Com·ùTr›H—d”
,
off£ts
);

1069 
št32_t
 
couÁ
 = 
nodes
.
	`size
();

1070 
št32_t
 
nodeCouÁ
 = 1;

1071 
BudCom·ùTr›Node
 *
node
;

1072 
št32_t
 
i
;

1073 
UVeùÜ32
 
	`Œª¦©e
(
couÁ
, 
¡©us
);

1074 
Œª¦©e
.
	`push
(0, 
¡©us
);

1076 ià(
	`U_FAILURE
(
¡©us
)) {

1077  
NULL
;

1080 
i
 = 1; i < 
couÁ
; ++i) {

1081 
node
 = (
BudCom·ùTr›Node
 *)
nodes
[
i
];

1082 ià(
node
->
fNodeID
 =ğ
i
) {

1084 ià(
i
 >ğ
Œª¦©e
.
	`size
()) {

1086 
Œª¦©e
.
	`£tSize
(
i
+1);

1088 
Œª¦©e
.
	`£tEËm’tAt
(
nodeCouÁ
++, 
i
);

1089 
tÙ®Size
 +ğ
node
->
	`size
();

1094 ià(
nodeCouÁ
 > 0x10000) {

1095 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1096  
NULL
;

1100 
tÙ®Size
 +ğ
nodeCouÁ
*(
ušt32_t
);

1101 #ifdeà
DEBUG_TRIE_DICT


1102 (è::
	`times
(&
timšg
);

1103 
	`årštf
(
¡d”r
, "Sizes/mapping done,ime user %f system %f\n",

1104 ()(
timšg
.
tms_utime
-
´evious
.tms_utime)/
CLK_TCK
,

1105 ()(
timšg
.
tms_¡ime
-
´evious
.tms_¡ime)/
CLK_TCK
);

1106 
´evious
 = 
timšg
;

1107 
	`årštf
(
¡d”r
, "%d‚odes, %d unique, %d by‹s\n", 
nodes
.
	`size
(), 
nodeCouÁ
, 
tÙ®Size
);

1109 
ušt8_t
 *
by‹s
 = (ušt8_ˆ*)
	`u´v_m®loc
(
tÙ®Size
);

1110 ià(
by‹s
 =ğ
NULL
) {

1111 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1112  
NULL
;

1115 
Com·ùTr›H—d”
 *
h—d”
 = (Com·ùTr›H—d” *)
by‹s
;

1116 
h—d”
->
size
 = 
tÙ®Size
;

1117 
h—d”
->
nodeCouÁ
 =‚odeCount;

1118 
h—d”
->
off£ts
[0] = 0;

1119 
h—d”
->
roÙ
 = 
Œª¦©e
.
	`–em’tAti
ÔoÙ->
fNodeID
);

1120 #ifdeà
DEBUG_TRIE_DICT


1121 ià(
h—d”
->
roÙ
 == 0) {

1122 
	`årštf
(
¡d”r
, "ERROR:„oÙ‚od%d¿n¦©tØphysiÿÈz”o\n", 
roÙ
->
fNodeID
);

1125 
ušt32_t
 
off£t
 = 
	`off£tof
(
Com·ùTr›H—d”
,
off£ts
)+(
nodeCouÁ
*(uint32_t));

1126 
nodeCouÁ
 = 1;

1128 
i
 = 1; i < 
couÁ
; ++i) {

1129 
node
 = (
BudCom·ùTr›Node
 *)
nodes
[
i
];

1130 ià(
node
->
fNodeID
 =ğ
i
) {

1131 
h—d”
->
off£ts
[
nodeCouÁ
++] = 
off£t
;

1132 
node
->
	`wr™e
(
by‹s
, 
off£t
, 
Œª¦©e
);

1135 #ifdeà
DEBUG_TRIE_DICT


1136 (è::
	`times
(&
timšg
);

1137 
	`årštf
(
¡d”r
, "Trie built,ime user %f system %f\n",

1138 ()(
timšg
.
tms_utime
-
´evious
.tms_utime)/
CLK_TCK
,

1139 ()(
timšg
.
tms_¡ime
-
´evious
.tms_¡ime)/
CLK_TCK
);

1140 
´evious
 = 
timšg
;

1141 
	`årštf
(
¡d”r
, "Fš® off£ˆi %d\n", 
off£t
);

1144 
hCouÁ
 = 0;

1145 
vCouÁ
 = 0;

1146 
size_t
 
hSize
 = 0;

1147 
size_t
 
vSize
 = 0;

1148 
size_t
 
hI‹mCouÁ
 = 0;

1149 
size_t
 
vI‹mCouÁ
 = 0;

1150 
ušt32_t
 
´eviousOff
 = 
off£t
;

1151 
ušt16_t
 
nodeIdx
 = 
nodeCouÁ
-1;‚odeIdx >= 2; --nodeIdx) {

1152 cÚ¡ 
Com·ùTr›Node
 *
node
 = 
	`g‘Com·ùNode
(
h—d”
, 
nodeIdx
);

1153 ià(
node
->
æagscouÁ
 & 
kV”tiÿlNode
) {

1154 
vCouÁ
 += 1;

1155 
vI‹mCouÁ
 +ğ(
node
->
æagscouÁ
 & 
kCouÁMask
);

1156 
vSize
 +ğ
´eviousOff
-
h—d”
->
off£ts
[
nodeIdx
];

1159 
hCouÁ
 += 1;

1160 
hI‹mCouÁ
 +ğ(
node
->
æagscouÁ
 & 
kCouÁMask
);

1161 
hSize
 +ğ
´eviousOff
-
h—d”
->
off£ts
[
nodeIdx
];

1163 
´eviousOff
 = 
h—d”
->
off£ts
[
nodeIdx
];

1165 
	`årštf
(
¡d”r
, "HÜizÚÈnodes: %dÙ®,‡v”ag%àby‹ w™h %à™ems\n", 
hCouÁ
,

1166 ()
hSize
/
hCouÁ
, ()
hI‹mCouÁ
/hCount);

1167 
	`årštf
(
¡d”r
, "V”tiÿÈnodes: %dÙ®,‡v”ag%àby‹ w™h %à™ems\n", 
vCouÁ
,

1168 ()
vSize
/
vCouÁ
, ()
vI‹mCouÁ
/vCount);

1171 ià(
	`U_FAILURE
(
¡©us
)) {

1172 
	`u´v_ä“
(
by‹s
);

1173 
h—d”
 = 
NULL
;

1176 
h—d”
->
magic
 = 
COMPACT_TRIE_MAGIC_1
;

1178  
h—d”
;

1179 
	}
}

1182 
T”ÇryNode
 *

1183 
uÅackOÃNode
ĞcÚ¡ 
Com·ùTr›H—d”
 *
h—d”
, cÚ¡ 
Com·ùTr›Node
 *
node
, 
UE¼ÜCode
 &
¡©us
 );

1187 
T”ÇryNode
 *

1188 
	$uÅackHÜizÚlA¼ay
ĞcÚ¡ 
Com·ùTr›H—d”
 *
h—d”
, cÚ¡ 
Com·ùTr›HÜizÚlEÁry
 *
¬¿y
,

1189 
low
, 
high
, 
UE¼ÜCode
 &
¡©us
 ) {

1190 ià(
	`U_FAILURE
(
¡©us
è|| 
low
 > 
high
) {

1191  
NULL
;

1193 
middË
 = (
low
+
high
)/2;

1194 
T”ÇryNode
 *
»suÉ
 = 
Ãw
 
	`T”ÇryNode
(
¬¿y
[
middË
].
ch
);

1195 ià(
»suÉ
 =ğ
NULL
) {

1196 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1197  
NULL
;

1199 cÚ¡ 
Com·ùTr›Node
 *
equ®
 = 
	`g‘Com·ùNode
(
h—d”
, 
¬¿y
[
middË
].equal);

1200 ià(
equ®
->
æagscouÁ
 & 
kP¬’tEndsWÜd
) {

1201 
»suÉ
->
æags
 |ğ
kEndsWÜd
;

1203 
»suÉ
->
low
 = 
	`uÅackHÜizÚlA¼ay
(
h—d”
, 
¬¿y
,†ow, 
middË
-1, 
¡©us
);

1204 
»suÉ
->
high
 = 
	`uÅackHÜizÚlA¼ay
(
h—d”
, 
¬¿y
, 
middË
+1, high, 
¡©us
);

1205 
»suÉ
->
equ®
 = 
	`uÅackOÃNode
(
h—d”
,ƒqu®, 
¡©us
);

1206  
»suÉ
;

1207 
	}
}

1210 
T”ÇryNode
 *

1211 
	$uÅackOÃNode
ĞcÚ¡ 
Com·ùTr›H—d”
 *
h—d”
, cÚ¡ 
Com·ùTr›Node
 *
node
, 
UE¼ÜCode
 &
¡©us
 ) {

1212 
nodeCouÁ
 = (
node
->
æagscouÁ
 & 
kCouÁMask
);

1213 ià(
nodeCouÁ
 =ğ0 || 
	`U_FAILURE
(
¡©us
)) {

1215  
NULL
;

1217 ià(
node
->
æagscouÁ
 & 
kV”tiÿlNode
) {

1218 cÚ¡ 
Com·ùTr›V”tiÿlNode
 *
vnode
 = (cÚ¡ Com·ùTr›V”tiÿlNod*)
node
;

1219 
T”ÇryNode
 *
h—d
 = 
NULL
;

1220 
T”ÇryNode
 *
´evious
 = 
NULL
;

1221 
T”ÇryNode
 *
Ï‹¡
 = 
NULL
;

1222 
i
 = 0; i < 
nodeCouÁ
; ++i) {

1223 
Ï‹¡
 = 
Ãw
 
	`T”ÇryNode
(
vnode
->
ch¬s
[
i
]);

1224 ià(
Ï‹¡
 =ğ
NULL
) {

1225 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1228 ià(
h—d
 =ğ
NULL
) {

1229 
h—d
 = 
Ï‹¡
;

1231 ià(
´evious
 !ğ
NULL
) {

1232 
´evious
->
equ®
 = 
Ï‹¡
;

1234 
´evious
 = 
Ï‹¡
;

1236 ià(
Ï‹¡
 !ğ
NULL
) {

1237 cÚ¡ 
Com·ùTr›Node
 *
equ®
 = 
	`g‘Com·ùNode
(
h—d”
, 
vnode
->equal);

1238 ià(
equ®
->
æagscouÁ
 & 
kP¬’tEndsWÜd
) {

1239 
Ï‹¡
->
æags
 |ğ
kEndsWÜd
;

1241 
Ï‹¡
->
equ®
 = 
	`uÅackOÃNode
(
h—d”
,ƒqu®, 
¡©us
);

1243  
h—d
;

1247 cÚ¡ 
Com·ùTr›HÜizÚlNode
 *
hnode
 = (cÚ¡ Com·ùTr›HÜizÚlNod*)
node
;

1248  
	`uÅackHÜizÚlA¼ay
(
h—d”
, &
hnode
->
’Œ›s
[0], 0, 
nodeCouÁ
-1, 
¡©us
);

1250 
	}
}

1252 
MubËTr›DiùiÚ¬y
 *

1253 
	gCom·ùTr›DiùiÚ¬y
::
	$şÚeMubË
Ğ
UE¼ÜCode
 &
¡©us
 ) const {

1254 
MubËTr›DiùiÚ¬y
 *
»suÉ
 = 
Ãw
 
	`MubËTr›DiùiÚ¬y
Ğ
¡©us
 );

1255 ià(
»suÉ
 =ğ
NULL
) {

1256 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1257  
NULL
;

1259 
T”ÇryNode
 *
roÙ
 = 
	`uÅackOÃNode
(
fD©a
, 
	`g‘Com·ùNode
(fD©a, fD©a->roÙ), 
¡©us
);

1260 ià(
	`U_FAILURE
(
¡©us
)) {

1261 
d–‘e
 
roÙ
;

1262 
d–‘e
 
»suÉ
;

1263  
NULL
;

1265 
»suÉ
->
fTr›
 = 
roÙ
;

1266  
»suÉ
;

1267 
	}
}

1269 
U_NAMESPACE_END


1271 
U_CAPI
 
št32_t
 
U_EXPORT2


1272 
	$Œ›diù_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
, cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

1273 
UE¼ÜCode
 *
¡©us
) {

1275 ià(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)) {

1278 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<-1 || (Ëngth>0 && 
outD©a
==NULL)) {

1279 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

1287 cÚ¡ 
UD©aInfo
 *
pInfo
 = (cÚ¡ UD©aInfØ*)((cÚ¡ 
ušt8_t
 *)
šD©a
+4);

1288 if(!Ğ
pInfo
->
d©aFÜm©
[0]==0x54 &&

1289 
pInfo
->
d©aFÜm©
[1]==0x72 &&

1290 
pInfo
->
d©aFÜm©
[2]==0x44 &&

1291 
pInfo
->
d©aFÜm©
[3]==0x63 &&

1292 
pInfo
->
fÜm©V”siÚ
[0]==1 )) {

1293 
	`ud©a_´štE¼Ü
(
ds
, "triedict_swap(): data format %02x.%02x.%02x.%02x (format version %02x) is‚ot„ecognized\n",

1294 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

1295 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3],

1296 
pInfo
->
fÜm©V”siÚ
[0]);

1297 *
¡©us
=
U_UNSUPPORTED_ERROR
;

1307 
št32_t
 
h—d”Size
=
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
¡©us
);

1312 cÚ¡ 
ušt8_t
 *
šBy‹s
 =(cÚ¡ ušt8_ˆ*)
šD©a
+
h—d”Size
;

1313 cÚ¡ 
Com·ùTr›H—d”
 *
h—d”
 = (cÚ¡ Com·ùTr›H—d” *)
šBy‹s
;

1314 ià(
ds
->
	`»adUIÁ32
(
h—d”
->
magic
è!ğ
COMPACT_TRIE_MAGIC_1


1315 || 
ds
->
	`»adUIÁ32
(
h—d”
->
size
è< (
Com·ùTr›H—d”
))

1317 
	`ud©a_´štE¼Ü
(
ds
, "triedict_swap(): CompactTrieHeader is invalid.\n");

1318 *
¡©us
=
U_UNSUPPORTED_ERROR
;

1325 
ušt32_t
 
tÙ®Size
 = 
ds
->
	`»adUIÁ32
(
h—d”
->
size
);

1326 
št32_t
 
sizeW™hUD©a
 = (št32_t)
tÙ®Size
 + 
h—d”Size
;

1327 ià(
Ëngth
 < 0) {

1328  
sizeW™hUD©a
;

1334 ià(
Ëngth
 < 
sizeW™hUD©a
) {

1335 
	`ud©a_´štE¼Ü
(
ds
, "triedict_swap():oo few bytes (%d‡fter ICU Data header) forrie data.\n",

1336 
tÙ®Size
);

1337 *
¡©us
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1346 
ušt8_t
 *
outBy‹s
 = (ušt8_ˆ*)
outD©a
 + 
h—d”Size
;

1347 
Com·ùTr›H—d”
 *
ouutH—d”
 = (Com·ùTr›H—d” *)
outBy‹s
;

1353 ià(
šBy‹s
 !ğ
outBy‹s
) {

1354 
	`u´v_mem£t
(
outBy‹s
, 0, 
tÙ®Size
);

1358 
ušt16_t
 
nodeCouÁ
 = 
ds
->
	`»adUIÁ16
(
h—d”
->nodeCount);

1360 
i
 = 1; i < 
nodeCouÁ
; ++i) {

1361 
ušt32_t
 
nodeOff
 = 
ds
->
	`»adUIÁ32
(
h—d”
->
off£ts
[
i
]);

1362 cÚ¡ 
Com·ùTr›Node
 *
šNode
 = (cÚ¡ Com·ùTr›Nod*)(
šBy‹s
 + 
nodeOff
);

1363 
Com·ùTr›Node
 *
outNode
 = (Com·ùTr›Nod*)(
outBy‹s
 + 
nodeOff
);

1364 
ušt16_t
 
æagscouÁ
 = 
ds
->
	`»adUIÁ16
(
šNode
->flagscount);

1365 
ušt16_t
 
™emCouÁ
 = 
æagscouÁ
 & 
kCouÁMask
;

1366 
ds
->
	`wr™eUIÁ16
(&
outNode
->
æagscouÁ
, flagscount);

1367 ià(
™emCouÁ
 > 0) {

1368 ià(
æagscouÁ
 & 
kV”tiÿlNode
) {

1369 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
nodeOff
+
	`off£tof
(
Com·ùTr›V”tiÿlNode
,
ch¬s
),

1370 
™emCouÁ
*(
ušt16_t
),

1371 
outBy‹s
+
nodeOff
+
	`off£tof
(
Com·ùTr›V”tiÿlNode
,
ch¬s
), 
¡©us
);

1372 
ušt16_t
 
equ®
 = 
ds
->
	`»adUIÁ16
(
šBy‹s
+
nodeOff
+
	`off£tof
(
Com·ùTr›V”tiÿlNode
,equal);

1373 
ds
->
	`wr™eUIÁ16
(
outBy‹s
+
nodeOff
+
	`off£tof
(
Com·ùTr›V”tiÿlNode
,
equ®
));

1376 cÚ¡ 
Com·ùTr›HÜizÚlNode
 *
šHNode
 = (cÚ¡ Com·ùTr›HÜizÚlNod*)
šNode
;

1377 
Com·ùTr›HÜizÚlNode
 *
outHNode
 = (Com·ùTr›HÜizÚlNod*)
outNode
;

1378 
j
 = 0; j < 
™emCouÁ
; ++j) {

1379 
ušt16_t
 
wÜd
 = 
ds
->
	`»adUIÁ16
(
šHNode
->
’Œ›s
[
j
].
ch
);

1380 
ds
->
	`wr™eUIÁ16
(&
outHNode
->
’Œ›s
[
j
].
ch
, 
wÜd
);

1381 
wÜd
 = 
ds
->
	`»adUIÁ16
(
šHNode
->
’Œ›s
[
j
].
equ®
);

1382 
ds
->
	`wr™eUIÁ16
(&
outHNode
->
’Œ›s
[
j
].
equ®
, 
wÜd
);

1390 
ušt16_t
 
nodeCouÁ
 = 
ds
->
	`»adUIÁ16
(
h—d”
->nodeCount);

1391 
ušt32_t
 
nodesOff
 = 
	`off£tof
(
Com·ùTr›H—d”
,
off£ts
)+((ušt32_t)
nodeCouÁ
*(uint32_t));

1392 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
nodesOff
, 
tÙ®Size
-nodesOff, 
outBy‹s
+nodesOff, 
¡©us
);

1395 
ds
->
	`wr™eUIÁ32
(&
ouutH—d”
->
size
, 
tÙ®Size
);

1396 
ušt32_t
 
magic
 = 
ds
->
	`»adUIÁ32
(
h—d”
->magic);

1397 
ds
->
	`wr™eUIÁ32
(&
ouutH—d”
->
magic
, magic);

1398 
ds
->
	`wr™eUIÁ16
(&
ouutH—d”
->
nodeCouÁ
,‚odeCount);

1399 
ušt16_t
 
roÙ
 = 
ds
->
	`»adUIÁ16
(
h—d”
->root);

1400 
ds
->
	`wr™eUIÁ16
(&
ouutH—d”
->
roÙ
,„oot);

1401 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
	`off£tof
(
Com·ùTr›H—d”
,
off£ts
),

1402 (
ušt32_t
)*(
št32_t
)
nodeCouÁ
,

1403 
outBy‹s
+
	`off£tof
(
Com·ùTr›H—d”
,
off£ts
), 
¡©us
);

1405  
sizeW™hUD©a
;

1406 
	}
}

	@triedict.h

8 #iâdeà
TRIEDICT_H


9 
	#TRIEDICT_H


	)

11 
	~"unicode/uty³s.h
"

12 
	~"unicode/uobjeù.h
"

13 
	~"unicode/u‹xt.h
"

15 
	gUEnum”©iÚ
;

16 
	gUD©aSw­³r
;

17 
	gUD©aMemÜy
;

42 
U_CAPI
 
št32_t
 
U_EXPORT2


43 
Œ›diù_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

44 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

45 
UE¼ÜCode
 *
pE¼ÜCode
);

47 
U_NAMESPACE_BEGIN


49 
şass
 
	gSŒšgEnum”©iÚ
;

50 
	gCom·ùTr›H—d”
;

61 şas 
	cU_COMMON_API
 
	mTr›WÜdDiùiÚ¬y
 : 
public
 
UMemÜy
 {

62 
public
:

68 
Tr›WÜdDiùiÚ¬y
();

73 
	mvœtu®
 ~
Tr›WÜdDiùiÚ¬y
();

87 
vœtu®
 
št32_t
 
	$m©ches
Ğ
UText
 *
‹xt
,

88 
št32_t
 
maxL’gth
,

89 
št32_t
 *
Ëngths
,

90 &
couÁ
,

91 
lim™
 ) const = 0;

100 
vœtu®
 
SŒšgEnum”©iÚ
 *
	$İ’WÜds
Ğ
UE¼ÜCode
 &
¡©us
 ) const = 0;

113 
T”ÇryNode
;

115 şas 
	cU_COMMON_API
 
MubËTr›DiùiÚ¬y
 : 
public
 
Tr›WÜdDiùiÚ¬y
 {

116 
´iv©e
:

122 
T”ÇryNode
 *
fTr›
;

129 
UText
 *
fI‹r
;

131 
ä›nd
 
şass
 
Com·ùTr›DiùiÚ¬y
;

133 
public
:

142 
	`MubËTr›DiùiÚ¬y
Ğ
UCh¬
 
medŸn
, 
UE¼ÜCode
 &
¡©us
 );

147 
vœtu®
 ~
	`MubËTr›DiùiÚ¬y
();

160 
vœtu®
 
št32_t
 
	$m©ches
Ğ
UText
 *
‹xt
,

161 
št32_t
 
maxL’gth
,

162 
št32_t
 *
Ëngths
,

163 &
couÁ
,

164 
lim™
 ) const;

173 
vœtu®
 
SŒšgEnum”©iÚ
 *
	$İ’WÜds
Ğ
UE¼ÜCode
 &
¡©us
 ) const;

182 
vœtu®
 
	`addWÜd
ĞcÚ¡ 
UCh¬
 *
wÜd
,

183 
št32_t
 
Ëngth
,

184 
UE¼ÜCode
 &
¡©us
);

193 
vœtu®
 
	`addWÜds
Ğ
UEnum”©iÚ
 *
wÜds
, 
UE¼ÜCode
 &
¡©us
 );

196 
´Ùeùed
:

210 
vœtu®
 
št32_t
 
	$£¬ch
Ğ
UText
 *
‹xt
,

211 
št32_t
 
maxL’gth
,

212 
št32_t
 *
Ëngths
,

213 &
couÁ
,

214 
lim™
,

215 
T”ÇryNode
 *&
·»Á
,

216 
UBoŞ
 &
pM©ched
 ) const;

218 
´iv©e
:

224 
	`MubËTr›DiùiÚ¬y
Ğ
UE¼ÜCode
 &
¡©us
 );

235 şas 
	cU_COMMON_API
 
Com·ùTr›DiùiÚ¬y
 : 
public
 
Tr›WÜdDiùiÚ¬y
 {

236 
´iv©e
:

241 cÚ¡ 
Com·ùTr›H—d”
 *
fD©a
;

247 
UBoŞ
 
fOwnD©a
;

249 
UD©aMemÜy
 *
fUD©a
;

250 
public
:

257 
	`Com·ùTr›DiùiÚ¬y
(
UD©aMemÜy
 *
d©aObj
, 
UE¼ÜCode
 &
¡©us
);

265 
	`Com·ùTr›DiùiÚ¬y
(cÚ¡ *
d©aObj
, 
UE¼ÜCode
 &
¡©us
);

273 
	`Com·ùTr›DiùiÚ¬y
ĞcÚ¡ 
MubËTr›DiùiÚ¬y
 &
diù
, 
UE¼ÜCode
 &
¡©us
 );

278 
vœtu®
 ~
	`Com·ùTr›DiùiÚ¬y
();

291 
vœtu®
 
št32_t
 
	$m©ches
Ğ
UText
 *
‹xt
,

292 
št32_t
 
¿ngeEnd
,

293 
št32_t
 *
Ëngths
,

294 &
couÁ
,

295 
lim™
 ) const;

304 
vœtu®
 
SŒšgEnum”©iÚ
 *
	$İ’WÜds
Ğ
UE¼ÜCode
 &
¡©us
 ) const;

311 
vœtu®
 
ušt32_t
 
	$d©aSize
() const;

319 
vœtu®
 cÚ¡ *
	$d©a
() const;

327 
vœtu®
 
MubËTr›DiùiÚ¬y
 *
	$şÚeMubË
Ğ
UE¼ÜCode
 &
¡©us
 ) const;

329 
´iv©e
:

338 
Com·ùTr›H—d”
 *
	`com·ùMubËTr›DiùiÚ¬y
ĞcÚ¡ 
MubËTr›DiùiÚ¬y
 &
diù
,

339 
UE¼ÜCode
 &
¡©us
 );

343 
U_NAMESPACE_END


	@uarrsort.c

19 
	~"unicode/uty³s.h
"

20 
	~"cmemÜy.h
"

21 
	~"u¬rsÜt.h
"

24 
	mMIN_QSORT
=9,

25 
	mSTACK_ITEM_SIZE
=200

30 
U_CAPI
 
št32_t
 
U_EXPORT2


31 
	$u´v_ušt16Com·¿tÜ
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
Ëá
, cÚ¡ *
right
) {

32  (
št32_t
)*(cÚ¡ 
ušt16_t
 *)
Ëá
 - (št32_t)*(cÚ¡ ušt16_ˆ*)
right
;

33 
	}
}

35 
U_CAPI
 
št32_t
 
U_EXPORT2


36 
	$u´v_št32Com·¿tÜ
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
Ëá
, cÚ¡ *
right
) {

37  *(cÚ¡ 
št32_t
 *)
Ëá
 - *(cÚ¡ iÁ32_ˆ*)
right
;

38 
	}
}

40 
U_CAPI
 
št32_t
 
U_EXPORT2


41 
	$u´v_ušt32Com·¿tÜ
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
Ëá
, cÚ¡ *
right
) {

42 
ušt32_t
 
l
=*(cÚ¡ ušt32_ˆ*)
Ëá
, 
r
=*(cÚ¡ ušt32_ˆ*)
right
;

45 if(
l
<
r
) {

47 } if(
l
==
r
) {

52 
	}
}

57 
	$doIn£¹iÚSÜt
(*
¬¿y
, 
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
, iÁ32_ˆ
™emSize
,

58 
UCom·¿tÜ
 *
cmp
, cÚ¡ *
cÚ‹xt
, *
pv
) {

59 
št32_t
 
i
, 
j
;

61 
j
=
¡¬t
+1; j<
lim™
; ++j) {

63 
	`u´v_memıy
(
pv
, 
¬¿y
+
j
*
™emSize
, itemSize);

65 
i
=
j
; i>
¡¬t
; --i) {

66 ifĞ
	`cmp
(
cÚ‹xt
, 
pv
, 
¬¿y
+(
i
-1)*
™emSize
)>=0) {

71 
	`u´v_memıy
(
¬¿y
+
i
*
™emSize
,‡rray+(i-1)*itemSize, itemSize);

74 if(
i
!=
j
) {

76 
	`u´v_memıy
(
¬¿y
+
i
*
™emSize
, 
pv
, itemSize);

79 
	}
}

82 
	$š£¹iÚSÜt
(*
¬¿y
, 
št32_t
 
Ëngth
, iÁ32_ˆ
™emSize
,

83 
UCom·¿tÜ
 *
cmp
, cÚ¡ *
cÚ‹xt
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

84 
UAligÃdMemÜy
 
v
[
STACK_ITEM_SIZE
/(UAlignedMemory)+1];

85 *
pv
;

88 if(
™emSize
<=
STACK_ITEM_SIZE
) {

89 
pv
=
v
;

91 
pv
=
	`u´v_m®loc
(
™emSize
);

92 if(
pv
==
NULL
) {

93 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

98 
	`doIn£¹iÚSÜt
(
¬¿y
, 0, 
Ëngth
, 
™emSize
, 
cmp
, 
cÚ‹xt
, 
pv
);

100 if(
pv
!=
v
) {

101 
	`u´v_ä“
(
pv
);

103 
	}
}

120 
	$subQuickSÜt
(*
¬¿y
, 
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
, iÁ32_ˆ
™emSize
,

121 
UCom·¿tÜ
 *
cmp
, cÚ¡ *
cÚ‹xt
,

122 *
px
, *
pw
) {

123 
št32_t
 
Ëá
, 
right
;

127 if((
¡¬t
+
MIN_QSORT
)>=
lim™
) {

128 
	`doIn£¹iÚSÜt
(
¬¿y
, 
¡¬t
, 
lim™
, 
™emSize
, 
cmp
, 
cÚ‹xt
, 
px
);

132 
Ëá
=
¡¬t
;

133 
right
=
lim™
;

136 
	`u´v_memıy
(
px
, 
¬¿y
+((
¡¬t
+
lim™
)/2)*
™emSize
, itemSize);

140 
	`cmp
(
cÚ‹xt
, 
¬¿y
+
Ëá
*
™emSize
, 
px
)<0

142 ++
Ëá
;

145 
	`cmp
(
cÚ‹xt
, 
px
, 
¬¿y
+(
right
-1)*
™emSize
)<0

147 --
right
;

151 if(
Ëá
<
right
) {

152 --
right
;

154 if(
Ëá
<
right
) {

155 
	`u´v_memıy
(
pw
, 
¬¿y
+
Ëá
*
™emSize
, itemSize);

156 
	`u´v_memıy
(
¬¿y
+
Ëá
*
™emSize
,‡¼ay+
right
*itemSize, itemSize);

157 
	`u´v_memıy
(
¬¿y
+
right
*
™emSize
, 
pw
, itemSize);

160 ++
Ëá
;

162 } 
Ëá
<
right
);

165 if((
right
-
¡¬t
)<(
lim™
-
Ëá
)) {

167 if(
¡¬t
<(
right
-1)) {

168 
	`subQuickSÜt
(
¬¿y
, 
¡¬t
, 
right
, 
™emSize
, 
cmp
, 
cÚ‹xt
, 
px
, 
pw
);

172 
¡¬t
=
Ëá
;

175 if(
Ëá
<(
lim™
-1)) {

176 
	`subQuickSÜt
(
¬¿y
, 
Ëá
, 
lim™
, 
™emSize
, 
cmp
, 
cÚ‹xt
, 
px
, 
pw
);

180 
lim™
=
right
;

182 } 
¡¬t
<(
lim™
-1));

183 
	}
}

186 
	$quickSÜt
(*
¬¿y
, 
št32_t
 
Ëngth
, iÁ32_ˆ
™emSize
,

187 
UCom·¿tÜ
 *
cmp
, cÚ¡ *
cÚ‹xt
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

188 
UAligÃdMemÜy
 
xw
[(2*
STACK_ITEM_SIZE
)/(UAlignedMemory)+1];

189 *
p
;

192 if(
™emSize
<=
STACK_ITEM_SIZE
) {

193 
p
=
xw
;

195 
p
=
	`u´v_m®loc
(2*
™emSize
);

196 if(
p
==
NULL
) {

197 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

202 
	`subQuickSÜt
(
¬¿y
, 0, 
Ëngth
, 
™emSize
,

203 
cmp
, 
cÚ‹xt
, 
p
, (*í+
™emSize
);

205 if(
p
!=
xw
) {

206 
	`u´v_ä“
(
p
);

208 
	}
}

216 
U_CAPI
 
U_EXPORT2


217 
	$u´v_sÜtA¼ay
(*
¬¿y
, 
št32_t
 
Ëngth
, iÁ32_ˆ
™emSize
,

218 
UCom·¿tÜ
 *
cmp
, cÚ¡ *
cÚ‹xt
,

219 
UBoŞ
 
sÜtSbË
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

220 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

223 if((
Ëngth
>0 && 
¬¿y
==
NULL
è||†’gth<0 || 
™emSize
<=0 || 
cmp
==NULL) {

224 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

228 if(
Ëngth
<=1) {

230 } if(
Ëngth
<
MIN_QSORT
 || 
sÜtSbË
) {

231 
	`š£¹iÚSÜt
((*)
¬¿y
, 
Ëngth
, 
™emSize
, 
cmp
, 
cÚ‹xt
, 
pE¼ÜCode
);

234 
	`quickSÜt
((*)
¬¿y
, 
Ëngth
, 
™emSize
, 
cmp
, 
cÚ‹xt
, 
pE¼ÜCode
);

236 
	}
}

	@uarrsort.h

19 #iâdeà
__UARRSORT_H__


20 
	#__UARRSORT_H__


	)

22 
	~"unicode/uty³s.h
"

24 
U_CDECL_BEGIN


39 
št32_t
 
	tU_CALLCONV


40 
	tUCom·¿tÜ
(cÚ¡ *
	tcÚ‹xt
, cÚ¡ *
	tËá
, cÚ¡ *
	tright
);

41 
U_CDECL_END


58 
U_CAPI
 
U_EXPORT2


59 
u´v_sÜtA¼ay
(*
¬¿y
, 
št32_t
 
Ëngth
, iÁ32_ˆ
™emSize
,

60 
UCom·¿tÜ
 *
cmp
, cÚ¡ *
cÚ‹xt
,

61 
UBoŞ
 
sÜtSbË
, 
UE¼ÜCode
 *
pE¼ÜCode
);

67 
U_CAPI
 
št32_t
 
U_EXPORT2


68 
u´v_ušt16Com·¿tÜ
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
Ëá
, cÚ¡ *
right
);

74 
U_CAPI
 
št32_t
 
U_EXPORT2


75 
u´v_št32Com·¿tÜ
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
Ëá
, cÚ¡ *
right
);

81 
U_CAPI
 
št32_t
 
U_EXPORT2


82 
u´v_ušt32Com·¿tÜ
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
Ëá
, cÚ¡ *
right
);

	@uassert.h

20 #iâdeà
U_ASSERT_H


21 
	#U_ASSERT_H


	)

23 
	~"unicode/uty³s.h
"

24 #ià
U_RELEASE


25 
	#U_ASSERT
(
exp
)

	)

27 
	~<as£¹.h
>

28 
	#U_ASSERT
(
exp
è
	`as£¹
Óxp)

	)

	@ubidi.c

17 
	~"cmemÜy.h
"

18 
	~"unicode/uty³s.h
"

19 
	~"unicode/u¡ršg.h
"

20 
	~"unicode/uch¬.h
"

21 
	~"unicode/ubidi.h
"

22 
	~"ubidi_´İs.h
"

23 
	~"ubidiimp.h
"

24 
	~"uas£¹.h
"

108 cÚ¡ 
FÏgs
 
	gæagLR
[2]={ 
DIRPROP_FLAG
(
L
), DIRPROP_FLAG(
R
) };

109 cÚ¡ 
FÏgs
 
	gæagE
[2]={ 
DIRPROP_FLAG
(
LRE
), DIRPROP_FLAG(
RLE
) };

110 cÚ¡ 
FÏgs
 
	gæagO
[2]={ 
DIRPROP_FLAG
(
LRO
), DIRPROP_FLAG(
RLO
) };

112 
	#DIRPROP_FLAG_LR
(
Ëv–
è
æagLR
[Öev–)&1]

	)

113 
	#DIRPROP_FLAG_E
(
Ëv–
è
æagE
[Öev–)&1]

	)

114 
	#DIRPROP_FLAG_O
(
Ëv–
è
æagO
[Öev–)&1]

	)

118 
U_CAPI
 
UBiDi
 * 
U_EXPORT2


119 
	$ubidi_İ’
()

121 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

122  
	`ubidi_İ’Sized
(0, 0, &
”rÜCode
);

123 
	}
}

125 
U_CAPI
 
UBiDi
 * 
U_EXPORT2


126 
	$ubidi_İ’Sized
(
št32_t
 
maxL’gth
, iÁ32_ˆ
maxRunCouÁ
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

127 
UBiDi
 *
pBiDi
;

130 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

131  
NULL
;

132 } if(
maxL’gth
<0 || 
maxRunCouÁ
<0) {

133 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

134  
NULL
;

138 
pBiDi
=(
UBiDi
 *)
	`u´v_m®loc
((UBiDi));

139 if(
pBiDi
==
NULL
) {

140 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

141  
NULL
;

145 
	`u´v_mem£t
(
pBiDi
, 0, (
UBiDi
));

148 
pBiDi
->
bdp
=
	`ubidi_g‘SšgËtÚ
();

151 if(
maxL’gth
>0) {

152 ifĞ!
	`g‘In™ŸlDœPrİsMemÜy
(
pBiDi
, 
maxL’gth
) ||

153 !
	`g‘In™ŸlLev–sMemÜy
(
pBiDi
, 
maxL’gth
)

155 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

158 
pBiDi
->
mayAÎoÿ‹Text
=
TRUE
;

161 if(
maxRunCouÁ
>0) {

162 if(
maxRunCouÁ
==1) {

164 
pBiDi
->
runsSize
=(
Run
);

165 } if(!
	`g‘In™ŸlRunsMemÜy
(
pBiDi
, 
maxRunCouÁ
)) {

166 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

169 
pBiDi
->
mayAÎoÿ‹Runs
=
TRUE
;

172 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

173  
pBiDi
;

175 
	`ubidi_şo£
(
pBiDi
);

176  
NULL
;

178 
	}
}

193 
U_CFUNC
 
UBoŞ


194 
	$ubidi_g‘MemÜy
(
BidiMemÜyFÜAÎoÿtiÚ
 *
bidiMem
, 
št32_t
 *
pSize
, 
UBoŞ
 
mayAÎoÿ‹
, iÁ32_ˆ
sizeN“ded
) {

195 **
pMemÜy
 = (**)
bidiMem
;

197 if(*
pMemÜy
==
NULL
) {

199 if(
mayAÎoÿ‹
 && (*
pMemÜy
=
	`u´v_m®loc
(
sizeN“ded
))!=
NULL
) {

200 *
pSize
=
sizeN“ded
;

201  
TRUE
;

203  
FALSE
;

206 if(
sizeN“ded
<=*
pSize
) {

208  
TRUE
;

210 if(!
mayAÎoÿ‹
) {

212  
FALSE
;

215 *
memÜy
;

220 if((
memÜy
=
	`u´v_»®loc
(*
pMemÜy
, 
sizeN“ded
))!=
NULL
) {

221 *
pMemÜy
=
memÜy
;

222 *
pSize
=
sizeN“ded
;

223  
TRUE
;

226  
FALSE
;

230 
	}
}

232 
U_CAPI
 
U_EXPORT2


233 
	$ubidi_şo£
(
UBiDi
 *
pBiDi
) {

234 if(
pBiDi
!=
NULL
) {

235 
pBiDi
->
pP¬aBiDi
=
NULL
;

236 if(
pBiDi
->
dœPrİsMemÜy
!=
NULL
) {

237 
	`u´v_ä“
(
pBiDi
->
dœPrİsMemÜy
);

239 if(
pBiDi
->
Ëv–sMemÜy
!=
NULL
) {

240 
	`u´v_ä“
(
pBiDi
->
Ëv–sMemÜy
);

242 if(
pBiDi
->
runsMemÜy
!=
NULL
) {

243 
	`u´v_ä“
(
pBiDi
->
runsMemÜy
);

245 if(
pBiDi
->
·¿sMemÜy
!=
NULL
) {

246 
	`u´v_ä“
(
pBiDi
->
·¿sMemÜy
);

248 if(
pBiDi
->
š£¹Pošts
.
pošts
!=
NULL
) {

249 
	`u´v_ä“
(
pBiDi
->
š£¹Pošts
.
pošts
);

252 
	`u´v_ä“
(
pBiDi
);

254 
	}
}

258 
U_CAPI
 
U_EXPORT2


259 
	$ubidi_£tInv”£
(
UBiDi
 *
pBiDi
, 
UBoŞ
 
isInv”£
) {

260 if(
pBiDi
!=
NULL
) {

261 
pBiDi
->
isInv”£
=isInverse;

262 
pBiDi
->
»Üd”šgMode
 = 
isInv”£
 ? 
UBIDI_REORDER_INVERSE_NUMBERS_AS_L


263 : 
UBIDI_REORDER_DEFAULT
;

265 
	}
}

267 
U_CAPI
 
UBoŞ
 
U_EXPORT2


268 
	$ubidi_isInv”£
(
UBiDi
 *
pBiDi
) {

269 if(
pBiDi
!=
NULL
) {

270  
pBiDi
->
isInv”£
;

272  
FALSE
;

274 
	}
}

291 
U_CAPI
 
U_EXPORT2


292 
	$ubidi_£tReÜd”šgMode
(
UBiDi
 *
pBiDi
, 
UBiDiReÜd”šgMode
 
»Üd”šgMode
) {

293 ià((
pBiDi
!=
NULL
è&& (
»Üd”šgMode
 >ğ
UBIDI_REORDER_DEFAULT
)

294 && (
»Üd”šgMode
 < 
UBIDI_REORDER_COUNT
)) {

295 
pBiDi
->
»Üd”šgMode
 =„eorderingMode;

296 
pBiDi
->
isInv”£
 = (
UBoŞ
)(
»Üd”šgMode
 =ğ
UBIDI_REORDER_INVERSE_NUMBERS_AS_L
);

298 
	}
}

300 
U_CAPI
 
UBiDiReÜd”šgMode
 
U_EXPORT2


301 
	$ubidi_g‘ReÜd”šgMode
(
UBiDi
 *
pBiDi
) {

302 ià(
pBiDi
!=
NULL
) {

303  
pBiDi
->
»Üd”šgMode
;

305  
UBIDI_REORDER_DEFAULT
;

307 
	}
}

309 
U_CAPI
 
U_EXPORT2


310 
	$ubidi_£tReÜd”šgO±iÚs
(
UBiDi
 *
pBiDi
, 
ušt32_t
 
»Üd”šgO±iÚs
) {

311 ià(
»Üd”šgO±iÚs
 & 
UBIDI_OPTION_REMOVE_CONTROLS
) {

312 
»Üd”šgO±iÚs
&=~
UBIDI_OPTION_INSERT_MARKS
;

314 ià(
pBiDi
!=
NULL
) {

315 
pBiDi
->
»Üd”šgO±iÚs
=reorderingOptions;

317 
	}
}

319 
U_CAPI
 
ušt32_t
 
U_EXPORT2


320 
	$ubidi_g‘ReÜd”šgO±iÚs
(
UBiDi
 *
pBiDi
) {

321 ià(
pBiDi
!=
NULL
) {

322  
pBiDi
->
»Üd”šgO±iÚs
;

326 
	}
}

328 
U_CAPI
 
UBiDiDœeùiÚ
 
U_EXPORT2


329 
	$ubidi_g‘Ba£DœeùiÚ
(cÚ¡ 
UCh¬
 *
‹xt
,

330 
št32_t
 
Ëngth
){

332 
št32_t
 
i
;

333 
UCh¬32
 
uch¬
;

334 
UCh¬DœeùiÚ
 
dœ
;

336 ifĞ
‹xt
==
NULL
 || 
Ëngth
<-1 ){

337  
UBIDI_NEUTRAL
;

340 if(
Ëngth
==-1) {

341 
Ëngth
=
	`u_¡¾’
(
‹xt
);

344  
i
 = 0 ; i < 
Ëngth
; ) {

346 
	`U16_NEXT
(
‹xt
, 
i
, 
Ëngth
, 
uch¬
);

347 
dœ
 = 
	`u_ch¬DœeùiÚ
(
uch¬
);

348 ifĞ
dœ
 =ğ
U_LEFT_TO_RIGHT
 )

349  
UBIDI_LTR
;

350 ifĞ
dœ
 =ğ
U_RIGHT_TO_LEFT
 || dœ ==
U_RIGHT_TO_LEFT_ARABIC
 )

351  
UBIDI_RTL
;

353  
UBIDI_NEUTRAL
;

354 
	}
}

364 
	$g‘DœPrİs
(
UBiDi
 *
pBiDi
) {

365 cÚ¡ 
UCh¬
 *
‹xt
=
pBiDi
->text;

366 
DœPrİ
 *
dœPrİs
=
pBiDi
->
dœPrİsMemÜy
;

368 
št32_t
 
i
=0, 
i1
, 
Ëngth
=
pBiDi
->
Üigš®L’gth
;

369 
FÏgs
 
æags
=0;

370 
UCh¬32
 
uch¬
;

371 
DœPrİ
 
dœPrİ
=0, 
·¿DœDeçuÉ
=0;

372 
UBoŞ
 
isDeçuÉLev–
=
	`IS_DEFAULT_LEVEL
(
pBiDi
->
·¿Lev–
);

375 
UBoŞ
 
isDeçuÉLev–Inv”£
=
isDeçuÉLev–
 && (UBool)

376 (
pBiDi
->
»Üd”šgMode
==
UBIDI_REORDER_INVERSE_LIKE_DIRECT
 ||

377 
pBiDi
->
»Üd”šgMode
==
UBIDI_REORDER_INVERSE_FOR_NUMBERS_SPECIAL
);

378 
št32_t
 
Ï¡A¿bicPos
=-1;

379 
št32_t
 
cÚŒŞCouÁ
=0;

380 
UBoŞ
 
»moveBiDiCÚŒŞs
 = (UBoŞ)(
pBiDi
->
»Üd”šgO±iÚs
 &

381 
UBIDI_OPTION_REMOVE_CONTROLS
);

384 
NOT_CONTEXTUAL
,

385 
LOOKING_FOR_STRONG
,

386 
FOUND_STRONG_CHAR


387 } 
	tS‹
;

388 
S‹
 
¡©e
;

389 
št32_t
 
·¿S¹
=0;

390 
DœPrİ
 
·¿Dœ
;

392 
DœPrİ
 
Ï¡SŒÚgDœ
=0;

393 
št32_t
 
Ï¡SŒÚgLTR
=0;

395 if(
pBiDi
->
»Üd”šgO±iÚs
 & 
UBIDI_OPTION_STREAMING
) {

396 
pBiDi
->
Ëngth
=0;

397 
Ï¡SŒÚgLTR
=0;

399 if(
isDeçuÉLev–
) {

400 
·¿DœDeçuÉ
=
pBiDi
->
·¿Lev–
&1 ? 
CONTEXT_RTL
 : 0;

401 
·¿Dœ
=
·¿DœDeçuÉ
;

402 
Ï¡SŒÚgDœ
=
·¿DœDeçuÉ
;

403 
¡©e
=
LOOKING_FOR_STRONG
;

405 
¡©e
=
NOT_CONTEXTUAL
;

406 
·¿Dœ
=0;

414  ; 
i
<
Ëngth
; ) {

416 
	`U16_NEXT
(
‹xt
, 
i
, 
Ëngth
, 
uch¬
);

417 
æags
|=
	`DIRPROP_FLAG
(
dœPrİ
=(
DœPrİ
)
	`ubidi_g‘Cu¡omizedCÏss
(
pBiDi
, 
uch¬
));

418 
dœPrİs
[
i
-1]=
dœPrİ
|
·¿Dœ
;

419 if(
uch¬
>0xffff) {

420 
æags
|=
	`DIRPROP_FLAG
(
BN
);

421 
dœPrİs
[
i
-2]=(
DœPrİ
)(
BN
|
·¿Dœ
);

423 if(
¡©e
==
LOOKING_FOR_STRONG
) {

424 if(
dœPrİ
==
L
) {

425 
¡©e
=
FOUND_STRONG_CHAR
;

426 if(
·¿Dœ
) {

427 
·¿Dœ
=0;

428 
i1
=
·¿S¹
; i1<
i
; i1++) {

429 
dœPrİs
[
i1
]&=~
CONTEXT_RTL
;

434 if(
dœPrİ
==
R
 || dœPrİ==
AL
) {

435 
¡©e
=
FOUND_STRONG_CHAR
;

436 if(
·¿Dœ
==0) {

437 
·¿Dœ
=
CONTEXT_RTL
;

438 
i1
=
·¿S¹
; i1<
i
; i1++) {

439 
dœPrİs
[
i1
]|=
CONTEXT_RTL
;

445 if(
dœPrİ
==
L
) {

446 
Ï¡SŒÚgDœ
=0;

447 
Ï¡SŒÚgLTR
=
i
;

449 if(
dœPrİ
==
R
) {

450 
Ï¡SŒÚgDœ
=
CONTEXT_RTL
;

452 if(
dœPrİ
==
AL
) {

453 
Ï¡SŒÚgDœ
=
CONTEXT_RTL
;

454 
Ï¡A¿bicPos
=
i
-1;

456 if(
dœPrİ
==
B
) {

457 if(
pBiDi
->
»Üd”šgO±iÚs
 & 
UBIDI_OPTION_STREAMING
) {

458 
pBiDi
->
Ëngth
=
i
;

460 if(
isDeçuÉLev–Inv”£
 && (
Ï¡SŒÚgDœ
==
CONTEXT_RTL
è&&(
·¿Dœ
!=lastStrongDir)) {

461  ; 
·¿S¹
<
i
;…araStart++) {

462 
dœPrİs
[
·¿S¹
]|=
CONTEXT_RTL
;

465 if(
i
<
Ëngth
) {

466 if(!((
uch¬
==
CR
è&& (
‹xt
[
i
]==
LF
))) {

467 
pBiDi
->
·¿CouÁ
++;

469 if(
isDeçuÉLev–
) {

470 
¡©e
=
LOOKING_FOR_STRONG
;

471 
·¿S¹
=
i
;

472 
·¿Dœ
=
·¿DœDeçuÉ
;

473 
Ï¡SŒÚgDœ
=
·¿DœDeçuÉ
;

477 if(
»moveBiDiCÚŒŞs
 && 
	`IS_BIDI_CONTROL_CHAR
(
uch¬
)) {

478 
cÚŒŞCouÁ
++;

481 if(
isDeçuÉLev–Inv”£
 && (
Ï¡SŒÚgDœ
==
CONTEXT_RTL
è&&(
·¿Dœ
!=lastStrongDir)) {

482 
i1
=
·¿S¹
; i1<
Ëngth
; i1++) {

483 
dœPrİs
[
i1
]|=
CONTEXT_RTL
;

486 if(
isDeçuÉLev–
) {

487 
pBiDi
->
·¿Lev–
=
	`GET_PARALEVEL
(pBiDi, 0);

489 if(
pBiDi
->
»Üd”šgO±iÚs
 & 
UBIDI_OPTION_STREAMING
) {

490 if((
Ï¡SŒÚgLTR
>
pBiDi
->
Ëngth
) &&

491 (
	`GET_PARALEVEL
(
pBiDi
, 
Ï¡SŒÚgLTR
)==0)) {

492 
pBiDi
->
Ëngth
 = 
Ï¡SŒÚgLTR
;

494 if(
pBiDi
->
Ëngth
<pBiDi->
Üigš®L’gth
) {

495 
pBiDi
->
·¿CouÁ
--;

500 
æags
|=
	`DIRPROP_FLAG_LR
(
pBiDi
->
·¿Lev–
);

502 if(
pBiDi
->
Üd”P¬ag¿phsLTR
 && (
æags
&
	`DIRPROP_FLAG
(
B
))) {

503 
æags
|=
	`DIRPROP_FLAG
(
L
);

506 
pBiDi
->
cÚŒŞCouÁ
 = controlCount;

507 
pBiDi
->
æags
=flags;

508 
pBiDi
->
Ï¡A¿bicPos
=lastArabicPos;

509 
	}
}

514 
UBiDiDœeùiÚ


515 
	$dœeùiÚFromFÏgs
(
UBiDi
 *
pBiDi
) {

516 
FÏgs
 
æags
=
pBiDi
->flags;

518 if(!(
æags
&
MASK_RTL
 || ((æags&
	`DIRPROP_FLAG
(
AN
)è&& (æags&
MASK_POSSIBLE_N
)))) {

519  
UBIDI_LTR
;

520 } if(!(
æags
&
MASK_LTR
)) {

521  
UBIDI_RTL
;

523  
UBIDI_MIXED
;

525 
	}
}

579 
UBiDiDœeùiÚ


580 
	$»sŞveEx¶ic™Lev–s
(
UBiDi
 *
pBiDi
) {

581 cÚ¡ 
DœPrİ
 *
dœPrİs
=
pBiDi
->dirProps;

582 
UBiDiLev–
 *
Ëv–s
=
pBiDi
->levels;

583 cÚ¡ 
UCh¬
 *
‹xt
=
pBiDi
->text;

585 
št32_t
 
i
=0, 
Ëngth
=
pBiDi
->length;

586 
FÏgs
 
æags
=
pBiDi
->flags;

587 
DœPrİ
 
dœPrİ
;

588 
UBiDiLev–
 
Ëv–
=
	`GET_PARALEVEL
(
pBiDi
, 0);

590 
UBiDiDœeùiÚ
 
dœeùiÚ
;

591 
št32_t
 
·¿Index
=0;

594 
dœeùiÚ
=
	`dœeùiÚFromFÏgs
(
pBiDi
);

598 if((
dœeùiÚ
!=
UBIDI_MIXED
è&& (
pBiDi
->
·¿CouÁ
==1)) {

600 } if((
pBiDi
->
·¿CouÁ
==1) &&

601 (!(
æags
&
MASK_EXPLICIT
) ||

602 (
pBiDi
->
»Üd”šgMode
 > 
UBIDI_REORDER_LAST_LOGICAL_TO_VISUAL
))) {

607 
i
=0; i<
Ëngth
; ++i) {

608 
Ëv–s
[
i
]=
Ëv–
;

615 
UBiDiLev–
 
embeddšgLev–
=
Ëv–
, 
ÃwLev–
, 
¡ackTİ
=0;

617 
UBiDiLev–
 
¡ack
[
UBIDI_MAX_EXPLICIT_LEVEL
];

618 
ušt32_t
 
couÁOv”60
=0, 
couÁOv”61
=0;

621 
æags
=0;

623 
i
=0; i<
Ëngth
; ++i) {

624 
dœPrİ
=
	`NO_CONTEXT_RTL
(
dœPrİs
[
i
]);

625 
dœPrİ
) {

626 
LRE
:

627 
LRO
:

629 
ÃwLev–
=(
UBiDiLev–
)((
embeddšgLev–
+2)&~(
UBIDI_LEVEL_OVERRIDE
|1));

630 if(
ÃwLev–
<=
UBIDI_MAX_EXPLICIT_LEVEL
) {

631 
¡ack
[
¡ackTİ
]=
embeddšgLev–
;

632 ++
¡ackTİ
;

633 
embeddšgLev–
=
ÃwLev–
;

634 if(
dœPrİ
==
LRO
) {

635 
embeddšgLev–
|=
UBIDI_LEVEL_OVERRIDE
;

641 } if((
embeddšgLev–
&~
UBIDI_LEVEL_OVERRIDE
)==
UBIDI_MAX_EXPLICIT_LEVEL
) {

642 ++
couÁOv”61
;

644 ++
couÁOv”60
;

646 
æags
|=
	`DIRPROP_FLAG
(
BN
);

648 
RLE
:

649 
RLO
:

651 
ÃwLev–
=(
UBiDiLev–
)(((
embeddšgLev–
&~
UBIDI_LEVEL_OVERRIDE
)+1)|1);

652 if(
ÃwLev–
<=
UBIDI_MAX_EXPLICIT_LEVEL
) {

653 
¡ack
[
¡ackTİ
]=
embeddšgLev–
;

654 ++
¡ackTİ
;

655 
embeddšgLev–
=
ÃwLev–
;

656 if(
dœPrİ
==
RLO
) {

657 
embeddšgLev–
|=
UBIDI_LEVEL_OVERRIDE
;

664 ++
couÁOv”61
;

666 
æags
|=
	`DIRPROP_FLAG
(
BN
);

668 
PDF
:

671 if(
couÁOv”61
>0) {

672 --
couÁOv”61
;

673 } if(
couÁOv”60
>0 && (
embeddšgLev–
&~
UBIDI_LEVEL_OVERRIDE
)!=
UBIDI_MAX_EXPLICIT_LEVEL
) {

675 --
couÁOv”60
;

676 } if(
¡ackTİ
>0) {

678 --
¡ackTİ
;

679 
embeddšgLev–
=
¡ack
[
¡ackTİ
];

682 
æags
|=
	`DIRPROP_FLAG
(
BN
);

684 
B
:

685 
¡ackTİ
=0;

686 
couÁOv”60
=
couÁOv”61
=0;

687 
Ëv–
=
	`GET_PARALEVEL
(
pBiDi
, 
i
);

688 if((
i
+1)<
Ëngth
) {

689 
embeddšgLev–
=
	`GET_PARALEVEL
(
pBiDi
, 
i
+1);

690 if(!((
‹xt
[
i
]==
CR
è&& (‹xt[i+1]==
LF
))) {

691 
pBiDi
->
·¿s
[
·¿Index
++]=
i
+1;

694 
æags
|=
	`DIRPROP_FLAG
(
B
);

696 
BN
:

699 
æags
|=
	`DIRPROP_FLAG
(
BN
);

703 if(
Ëv–
!=
embeddšgLev–
) {

704 
Ëv–
=
embeddšgLev–
;

705 if(
Ëv–
&
UBIDI_LEVEL_OVERRIDE
) {

706 
æags
|=
	`DIRPROP_FLAG_O
(
Ëv–
)|
DIRPROP_FLAG_MULTI_RUNS
;

708 
æags
|=
	`DIRPROP_FLAG_E
(
Ëv–
)|
DIRPROP_FLAG_MULTI_RUNS
;

711 if(!(
Ëv–
&
UBIDI_LEVEL_OVERRIDE
)) {

712 
æags
|=
	`DIRPROP_FLAG
(
dœPrİ
);

721 
Ëv–s
[
i
]=
Ëv–
;

723 if(
æags
&
MASK_EMBEDDING
) {

724 
æags
|=
	`DIRPROP_FLAG_LR
(
pBiDi
->
·¿Lev–
);

726 if(
pBiDi
->
Üd”P¬ag¿phsLTR
 && (
æags
&
	`DIRPROP_FLAG
(
B
))) {

727 
æags
|=
	`DIRPROP_FLAG
(
L
);

733 
pBiDi
->
æags
=flags;

734 
dœeùiÚ
=
	`dœeùiÚFromFÏgs
(
pBiDi
);

737  
dœeùiÚ
;

738 
	}
}

750 
UBiDiDœeùiÚ


751 
	$checkEx¶ic™Lev–s
(
UBiDi
 *
pBiDi
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

752 cÚ¡ 
DœPrİ
 *
dœPrİs
=
pBiDi
->dirProps;

753 
DœPrİ
 
dœPrİ
;

754 
UBiDiLev–
 *
Ëv–s
=
pBiDi
->levels;

755 cÚ¡ 
UCh¬
 *
‹xt
=
pBiDi
->text;

757 
št32_t
 
i
, 
Ëngth
=
pBiDi
->length;

758 
FÏgs
 
æags
=0;

759 
UBiDiLev–
 
Ëv–
;

760 
ušt32_t
 
·¿Index
=0;

762 
i
=0; i<
Ëngth
; ++i) {

763 
Ëv–
=
Ëv–s
[
i
];

764 
dœPrİ
=
	`NO_CONTEXT_RTL
(
dœPrİs
[
i
]);

765 if(
Ëv–
&
UBIDI_LEVEL_OVERRIDE
) {

767 
Ëv–
&=~
UBIDI_LEVEL_OVERRIDE
;

768 
æags
|=
	`DIRPROP_FLAG_O
(
Ëv–
);

771 
æags
|=
	`DIRPROP_FLAG_E
(
Ëv–
)|
	`DIRPROP_FLAG
(
dœPrİ
);

773 if((
Ëv–
<
	`GET_PARALEVEL
(
pBiDi
, 
i
) &&

774 !((0==
Ëv–
)&&(
dœPrİ
==
B
))) ||

775 (
UBIDI_MAX_EXPLICIT_LEVEL
<
Ëv–
)) {

777 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

778  
UBIDI_LTR
;

780 if((
dœPrİ
==
B
è&& ((
i
+1)<
Ëngth
)) {

781 if(!((
‹xt
[
i
]==
CR
è&& (‹xt[i+1]==
LF
))) {

782 
pBiDi
->
·¿s
[
·¿Index
++]=
i
+1;

786 if(
æags
&
MASK_EMBEDDING
) {

787 
æags
|=
	`DIRPROP_FLAG_LR
(
pBiDi
->
·¿Lev–
);

791 
pBiDi
->
æags
=flags;

792  
	`dœeùiÚFromFÏgs
(
pBiDi
);

793 
	}
}

812 
	#IMPTABPROPS_COLUMNS
 14

	)

813 
	#IMPTABPROPS_RES
 (
IMPTABPROPS_COLUMNS
 - 1)

	)

814 
	#GET_STATEPROPS
(
ûÎ
è((ûÎ)&0x1f)

	)

815 
	#GET_ACTIONPROPS
(
ûÎ
è((ûÎ)>>5)

	)

816 
	#s
(
aùiÚ
, 
ÃwS‹
è((
ušt8_t
)ÒewS‹+×ùiÚ<<5)))

	)

818 cÚ¡ 
ušt8_t
 
	ggroupPrİ
[] =

823 ’um { 
	mDœPrİ_L
=0, 
	mDœPrİ_R
=1, 
	mDœPrİ_EN
=2, 
	mDœPrİ_AN
=3, 
	mDœPrİ_ON
=4, 
	mDœPrİ_S
=5, 
	mDœPrİ_B
=6 };

860 cÚ¡ 
ušt8_t
 
	gimpTabPrİs
[][
IMPTABPROPS_COLUMNS
] =

863  { 1 , 2 , 4 , 5 , 7 , 15 , 17 , 7 , 9 , 7 , 0 , 7 , 3 , 
DœPrİ_ON
 },

864  { 1 , 
s
(1,2), s(1,4), s(1,5), s(1,7),s(1,15),s(1,17), s(1,7), s(1,9), s(1,7), 1 , 1 , s(1,3), 
DœPrİ_L
 },

865  { 
s
(1,1), 2 , s(1,4), s(1,5), s(1,7),s(1,15),s(1,17), s(1,7), s(1,9), s(1,7), 2 , 2 , s(1,3), 
DœPrİ_R
 },

866  { 
s
(1,1), s(1,2), s(1,6), s(1,6), s(1,8),s(1,16),s(1,17), s(1,8), s(1,8), s(1,8), 3 , 3 , 3 , 
DœPrİ_R
 },

867  { 
s
(1,1), s(1,2), 4 , s(1,5), s(1,7),s(1,15),s(1,17),s(2,10), 11 ,s(2,10), 4 , 4 , s(1,3), 
DœPrİ_EN
 },

868  { 
s
(1,1), s(1,2), s(1,4), 5 , s(1,7),s(1,15),s(1,17), s(1,7), s(1,9),s(2,12), 5 , 5 , s(1,3), 
DœPrİ_AN
 },

869  { 
s
(1,1), s(1,2), 6 , 6 , s(1,8),s(1,16),s(1,17), s(1,8), s(1,8),s(2,13), 6 , 6 , s(1,3), 
DœPrİ_AN
 },

870  { 
s
(1,1), s(1,2), s(1,4), s(1,5), 7 ,s(1,15),s(1,17), 7 ,s(2,14), 7 , 7 , 7 , s(1,3), 
DœPrİ_ON
 },

871  { 
s
(1,1), s(1,2), s(1,6), s(1,6), 8 ,s(1,16),s(1,17), 8 , 8 , 8 , 8 , 8 , s(1,3), 
DœPrİ_ON
 },

872  { 
s
(1,1), s(1,2), 4 , s(1,5), 7 ,s(1,15),s(1,17), 7 , 9 , 7 , 9 , 9 , s(1,3), 
DœPrİ_ON
 },

873  { 
s
(3,1), s(3,2), 4 , s(3,5), s(4,7),s(3,15),s(3,17), s(4,7),s(4,14), s(4,7), 10 , s(4,7), s(3,3), 
DœPrİ_EN
 },

874  { 
s
(1,1), s(1,2), 4 , s(1,5), s(1,7),s(1,15),s(1,17), s(1,7), 11 , s(1,7), 11 , 11 , s(1,3), 
DœPrİ_EN
 },

875  { 
s
(3,1), s(3,2), s(3,4), 5 , s(4,7),s(3,15),s(3,17), s(4,7),s(4,14), s(4,7), 12 , s(4,7), s(3,3), 
DœPrİ_AN
 },

876  { 
s
(3,1), s(3,2), 6 , 6 , s(4,8),s(3,16),s(3,17), s(4,8), s(4,8), s(4,8), 13 , s(4,8), s(3,3), 
DœPrİ_AN
 },

877  { 
s
(1,1), s(1,2), s(4,4), s(1,5), 7 ,s(1,15),s(1,17), 7 , 14 , 7 , 14 , 14 , s(1,3), 
DœPrİ_ON
 },

878  { 
s
(1,1), s(1,2), s(1,4), s(1,5), s(1,7), 15 ,s(1,17), s(1,7), s(1,9), s(1,7), 15 , s(1,7), s(1,3), 
DœPrİ_S
 },

879  { 
s
(1,1), s(1,2), s(1,6), s(1,6), s(1,8), 16 ,s(1,17), s(1,8), s(1,8), s(1,8), 16 , s(1,8), s(1,3), 
DœPrİ_S
 },

880  { 
s
(1,1), s(1,2), s(1,4), s(1,5), s(1,7),s(1,15), 17 , s(1,7), s(1,9), s(1,7), 17 , s(1,7), s(1,3), 
DœPrİ_B
 }

886 #undeà
s


907 
	#IMPTABLEVELS_COLUMNS
 (
DœPrİ_B
 + 2)

	)

908 
	#IMPTABLEVELS_RES
 (
IMPTABLEVELS_COLUMNS
 - 1)

	)

909 
	#GET_STATE
(
ûÎ
è((ûÎ)&0x0f)

	)

910 
	#GET_ACTION
(
ûÎ
è((ûÎ)>>4)

	)

911 
	#s
(
aùiÚ
, 
ÃwS‹
è((
ušt8_t
)ÒewS‹+×ùiÚ<<4)))

	)

913 
ušt8_t
 
	tImpTab
[][
IMPTABLEVELS_COLUMNS
];

914 
ušt8_t
 
	tImpAù
[];

919 
	sImpTabPaœ
 {

920 cÚ¡ * 
	mpImpTab
[2];

921 cÚ¡ * 
	mpImpAù
[2];

922 } 
	tImpTabPaœ
;

961 cÚ¡ 
ImpTab
 
	gimpTabL_DEFAULT
 =

968  { 0 , 1 , 3 , 3 , 
s
(1,4), s(1,4), 0 , 1 },

969  { 0 , 1 , 0 , 2 , 
s
(1,5), s(1,5), 0 , 2 },

970  { 0 , 1 , 3 , 3 , 
s
(1,4), s(1,4), 0 , 2 },

971  { 
s
(2,0), 1 , 3 , 3 , 4 , 4 , s(2,0), 1 },

972  { 
s
(2,0), 1 , s(2,0), 2 , 5 , 5 , s(2,0), 1 }

974 cÚ¡ 
ImpTab
 
	gimpTabR_DEFAULT
 =

981  { 1 , 0 , 1 , 3 , 
s
(1,4), s(1,4), 0 , 1 },

984  { 
s
(2,1), 0 , s(2,1), 3 , 4 , 4 , 0 , 0 },

987 cÚ¡ 
ImpAù
 
	gimpAù0
 = {0,1,2,3,4,5,6};

988 cÚ¡ 
ImpTabPaœ
 
	gimpTab_DEFAULT
 = {{&
impTabL_DEFAULT
,

989 &
impTabR_DEFAULT
},

990 {&
impAù0
, &impAct0}};

992 cÚ¡ 
ImpTab
 
	gimpTabL_NUMBERS_SPECIAL
 =

1000  { 0 , 2 , 4 , 4 , 
s
(1,3), 0 , 0 , 1 },

1001  { 
s
(2,0), 2 , 4 , 4 , 3 , 3 , s(2,0), 1 },

1002  { 0 , 2 , 4 , 4 , 
s
(1,3), s(1,3), 0 , 2 }

1004 cÚ¡ 
ImpTabPaœ
 
	gimpTab_NUMBERS_SPECIAL
 = {{&
impTabL_NUMBERS_SPECIAL
,

1005 &
impTabR_DEFAULT
},

1006 {&
impAù0
, &impAct0}};

1008 cÚ¡ 
ImpTab
 
	gimpTabL_GROUP_NUMBERS_WITH_R
 =

1014  { 0 , 3 , 
s
(1,1), s(1,1), 0 , 0 , 0 , 0 },

1015  { 
s
(2,0), 3 , 1 , 1 , 2 , s(2,0), s(2,0), 2 },

1016  { 
s
(2,0), 3 , 1 , 1 , 2 , s(2,0), s(2,0), 1 },

1017  { 0 , 3 , 5 , 5 , 
s
(1,4), 0 , 0 , 1 },

1018  { 
s
(2,0), 3 , 5 , 5 , 4 , s(2,0), s(2,0), 1 },

1019  { 0 , 3 , 5 , 5 , 
s
(1,4), 0 , 0 , 2 }

1021 cÚ¡ 
ImpTab
 
	gimpTabR_GROUP_NUMBERS_WITH_R
 =

1029  { 2 , 0 , 
s
(1,4), s(1,4), s(1,3), 0 , 0 , 1 },

1030  { 
s
(2,2), 0 , 4 , 4 , 3 , 0 , 0 , 0 },

1031  { 
s
(2,2), 0 , 4 , 4 , 3 , 0 , 0 , 1 }

1033 cÚ¡ 
ImpTabPaœ
 
	gimpTab_GROUP_NUMBERS_WITH_R
 = {

1034 {&
impTabL_GROUP_NUMBERS_WITH_R
,

1035 &
impTabR_GROUP_NUMBERS_WITH_R
},

1036 {&
impAù0
, &impAct0}};

1039 cÚ¡ 
ImpTab
 
	gimpTabL_INVERSE_NUMBERS_AS_L
 =

1046  { 0 , 1 , 0 , 0 , 
s
(1,4), s(1,4), 0 , 1 },

1047  { 0 , 1 , 0 , 0 , 
s
(1,5), s(1,5), 0 , 2 },

1048  { 0 , 1 , 0 , 0 , 
s
(1,4), s(1,4), 0 , 2 },

1049  { 
s
(2,0), 1 , s(2,0), s(2,0), 4 , 4 , s(2,0), 1 },

1050  { 
s
(2,0), 1 , s(2,0), s(2,0), 5 , 5 , s(2,0), 1 }

1052 cÚ¡ 
ImpTab
 
	gimpTabR_INVERSE_NUMBERS_AS_L
 =

1059  { 1 , 0 , 1 , 1 , 
s
(1,4), s(1,4), 0 , 1 },

1062  { 
s
(2,1), 0 , s(2,1), s(2,1), 4 , 4 , 0 , 0 },

1065 cÚ¡ 
ImpTabPaœ
 
	gimpTab_INVERSE_NUMBERS_AS_L
 = {

1066 {&
impTabL_INVERSE_NUMBERS_AS_L
,

1067 &
impTabR_INVERSE_NUMBERS_AS_L
},

1068 {&
impAù0
, &impAct0}};

1070 cÚ¡ 
ImpTab
 
	gimpTabR_INVERSE_LIKE_DIRECT
 =

1077  { 1 , 0 , 1 , 2 , 
s
(1,3), s(1,3), 0 , 1 },

1079  { 
s
(2,1), s(3,0), 6 , 4 , 3 , 3 , s(3,0), 0 },

1080  { 
s
(2,1), s(3,0), 6 , 4 , 5 , 5 , s(3,0), 3 },

1081  { 
s
(2,1), s(3,0), 6 , 4 , 5 , 5 , s(3,0), 2 },

1082  { 
s
(2,1), s(3,0), 6 , 4 , 3 , 3 , s(3,0), 1 }

1084 cÚ¡ 
ImpAù
 
	gimpAù1
 = {0,1,11,12};

1087 cÚ¡ 
ImpTabPaœ
 
	gimpTab_INVERSE_LIKE_DIRECT
 = {

1088 {&
impTabL_DEFAULT
,

1089 &
impTabR_INVERSE_LIKE_DIRECT
},

1090 {&
impAù0
, &
impAù1
}};

1092 cÚ¡ 
ImpTab
 
	gimpTabL_INVERSE_LIKE_DIRECT_WITH_MARKS
 =

1097  { 0 , 
s
(6,3), 0 , 1 , 0 , 0 , 0 , 0 },

1098  { 0 , 
s
(6,3), 0 , 1 , s(1,2), s(3,0), 0 , 4 },

1099  { 
s
(2,0), s(6,3), s(2,0), 1 , 2 , s(3,0), s(2,0), 3 },

1100  { 0 , 
s
(6,3), s(5,5), s(5,6), s(1,4), s(3,0), 0 , 3 },

1101  { 
s
(3,0), s(4,3), s(5,5), s(5,6), 4 , s(3,0), s(3,0), 3 },

1102  { 
s
(3,0), s(4,3), 5 , s(5,6), s(1,4), s(3,0), s(3,0), 4 },

1103  { 
s
(3,0), s(4,3), s(5,5), 6 , s(1,4), s(3,0), s(3,0), 4 }

1105 cÚ¡ 
ImpTab
 
	gimpTabR_INVERSE_LIKE_DIRECT_WITH_MARKS
 =

1111  { 
s
(1,3), 0 , 1 , 1 , 0 , 0 , 0 , 0 },

1112  { 
s
(2,3), 0 , 1 , 1 , 2 , s(4,0), 0 , 1 },

1113  { 
s
(2,3), 0 , 1 , 1 , 2 , s(4,0), 0 , 0 },

1114  { 3 , 0 , 3 , 
s
(3,6), s(1,4), s(4,0), 0 , 1 },

1115  { 
s
(5,3), s(4,0), 5 , s(3,6), 4 , s(4,0), s(4,0), 0 },

1116  { 
s
(5,3), s(4,0), 5 , s(3,6), 4 , s(4,0), s(4,0), 1 },

1117  { 
s
(5,3), s(4,0), 6 , 6 , 4 , s(4,0), s(4,0), 3 }

1119 cÚ¡ 
ImpAù
 
	gimpAù2
 = {0,1,7,8,9,10};

1120 cÚ¡ 
ImpTabPaœ
 
	gimpTab_INVERSE_LIKE_DIRECT_WITH_MARKS
 = {

1121 {&
impTabL_INVERSE_LIKE_DIRECT_WITH_MARKS
,

1122 &
impTabR_INVERSE_LIKE_DIRECT_WITH_MARKS
},

1123 {&
impAù0
, &
impAù2
}};

1125 cÚ¡ 
ImpTabPaœ
 
	gimpTab_INVERSE_FOR_NUMBERS_SPECIAL
 = {

1126 {&
impTabL_NUMBERS_SPECIAL
,

1127 &
impTabR_INVERSE_LIKE_DIRECT
},

1128 {&
impAù0
, &
impAù1
}};

1130 cÚ¡ 
ImpTab
 
	gimpTabL_INVERSE_FOR_NUMBERS_SPECIAL_WITH_MARKS
 =

1135  { 0 , 
s
(6,2), 1 , 1 , 0 , 0 , 0 , 0 },

1136  { 0 , 
s
(6,2), 1 , 1 , 0 , s(3,0), 0 , 4 },

1137  { 0 , 
s
(6,2), s(5,4), s(5,4), s(1,3), s(3,0), 0 , 3 },

1138  { 
s
(3,0), s(4,2), s(5,4), s(5,4), 3 , s(3,0), s(3,0), 3 },

1139  { 
s
(3,0), s(4,2), 4 , 4 , s(1,3), s(3,0), s(3,0), 4 }

1141 cÚ¡ 
ImpTabPaœ
 
	gimpTab_INVERSE_FOR_NUMBERS_SPECIAL_WITH_MARKS
 = {

1142 {&
impTabL_INVERSE_FOR_NUMBERS_SPECIAL_WITH_MARKS
,

1143 &
impTabR_INVERSE_LIKE_DIRECT_WITH_MARKS
},

1144 {&
impAù0
, &
impAù2
}};

1146 #undeà
s


1149 cÚ¡ 
ImpTab
 * 
	mpImpTab
;

1150 cÚ¡ 
ImpAù
 * 
	mpImpAù
;

1151 
št32_t
 
	m¡¬tON
;

1152 
št32_t
 
	m¡¬tL2EN
;

1153 
št32_t
 
	mÏ¡SŒÚgRTL
;

1154 
št32_t
 
	m¡©e
;

1155 
UBiDiLev–
 
	mrunLev–
;

1156 } 
	tLevS‹
;

1161 
	$addPošt
(
UBiDi
 *
pBiDi
, 
št32_t
 
pos
, iÁ32_ˆ
æag
)

1166 
	#FIRSTALLOC
 10

	)

1167 
Pošt
 
pošt
;

1168 
In£¹Pošts
 * 
pIn£¹Pošts
=&(
pBiDi
->
š£¹Pošts
);

1170 ià(
pIn£¹Pošts
->
ÿ·c™y
 == 0)

1172 
pIn£¹Pošts
->
pošts
=
	`u´v_m®loc
((
Pošt
)*
FIRSTALLOC
);

1173 ià(
pIn£¹Pošts
->
pošts
 =ğ
NULL
)

1175 
pIn£¹Pošts
->
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1178 
pIn£¹Pošts
->
ÿ·c™y
=
FIRSTALLOC
;

1180 ià(
pIn£¹Pošts
->
size
 >ğpIn£¹Pošts->
ÿ·c™y
)

1182 * 
§vePošts
=
pIn£¹Pošts
->
pošts
;

1183 
pIn£¹Pošts
->
pošts
=
	`u´v_»®loc
(pInsertPoints->points,

1184 
pIn£¹Pošts
->
ÿ·c™y
*2*(
Pošt
));

1185 ià(
pIn£¹Pošts
->
pošts
 =ğ
NULL
)

1187 
pIn£¹Pošts
->
pošts
=
§vePošts
;

1188 
pIn£¹Pošts
->
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1191 
pIn£¹Pošts
->
ÿ·c™y
*=2;

1193 
pošt
.
pos
=pos;

1194 
pošt
.
æag
=flag;

1195 
pIn£¹Pošts
->
pošts
[pIn£¹Pošts->
size
]=
pošt
;

1196 
pIn£¹Pošts
->
size
++;

1197 #undeà
FIRSTALLOC


1198 
	}
}

1216 
	$´oûssPrİ”tySeq
(
UBiDi
 *
pBiDi
, 
LevS‹
 *
pLevS‹
, 
ušt8_t
 
_´İ
,

1217 
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
) {

1218 
ušt8_t
 
ûÎ
, 
ŞdS‹Seq
, 
aùiÚSeq
;

1219 cÚ¡ 
ImpTab
 * 
pImpTab
=
pLevS‹
->pImpTab;

1220 cÚ¡ 
ImpAù
 * 
pImpAù
=
pLevS‹
->pImpAct;

1221 
UBiDiLev–
 * 
Ëv–s
=
pBiDi
->levels;

1222 
UBiDiLev–
 
Ëv–
, 
addLev–
;

1223 
In£¹Pošts
 * 
pIn£¹Pošts
;

1224 
št32_t
 
¡¬t0
, 
k
;

1226 
¡¬t0
=
¡¬t
;

1227 
ŞdS‹Seq
=(
ušt8_t
)
pLevS‹
->
¡©e
;

1228 
ûÎ
=(*
pImpTab
)[
ŞdS‹Seq
][
_´İ
];

1229 
pLevS‹
->
¡©e
=
	`GET_STATE
(
ûÎ
);

1230 
aùiÚSeq
=(*
pImpAù
)[
	`GET_ACTION
(
ûÎ
)];

1231 
addLev–
=(*
pImpTab
)[
pLevS‹
->
¡©e
][
IMPTABLEVELS_RES
];

1233 if(
aùiÚSeq
) {

1234 
aùiÚSeq
) {

1236 
pLevS‹
->
¡¬tON
=
¡¬t0
;

1240 
¡¬t
=
pLevS‹
->
¡¬tON
;

1245 ià(
pLevS‹
->
¡¬tL2EN
 >= 0) {

1246 
	`addPošt
(
pBiDi
, 
pLevS‹
->
¡¬tL2EN
, 
LRM_BEFORE
);

1248 
pLevS‹
->
¡¬tL2EN
=-1;

1250 
pIn£¹Pošts
=&(
pBiDi
->
š£¹Pošts
);

1251 ià((
pIn£¹Pošts
->
ÿ·c™y
 == 0) ||

1252 (
pIn£¹Pošts
->
size
 <ğpIn£¹Pošts->
cÚfœmed
))

1255 
pLevS‹
->
Ï¡SŒÚgRTL
=-1;

1257 
Ëv–
=(*
pImpTab
)[
ŞdS‹Seq
][
IMPTABLEVELS_RES
];

1258 ià((
Ëv–
 & 1è&& (
pLevS‹
->
¡¬tON
 > 0)) {

1259 
¡¬t
=
pLevS‹
->
¡¬tON
;

1261 ià(
_´İ
 =ğ
DœPrİ_S
)

1263 
	`addPošt
(
pBiDi
, 
¡¬t0
, 
LRM_BEFORE
);

1264 
pIn£¹Pošts
->
cÚfœmed
õIn£¹Pošts->
size
;

1269 
k
=
pLevS‹
->
Ï¡SŒÚgRTL
+1; k<
¡¬t0
; k++)

1272 
Ëv–s
[
k
]=(levels[k] - 2) & ~1;

1275 
pIn£¹Pošts
->
cÚfœmed
õIn£¹Pošts->
size
;

1276 
pLevS‹
->
Ï¡SŒÚgRTL
=-1;

1277 ià(
_´İ
 =ğ
DœPrİ_S
)

1279 
	`addPošt
(
pBiDi
, 
¡¬t0
, 
LRM_BEFORE
);

1280 
pIn£¹Pošts
->
cÚfœmed
õIn£¹Pošts->
size
;

1286 
pIn£¹Pošts
=&(
pBiDi
->
š£¹Pošts
);

1287 ià(
pIn£¹Pošts
->
ÿ·c™y
 > 0)

1289 
pIn£¹Pošts
->
size
õIn£¹Pošts->
cÚfœmed
;

1290 
pLevS‹
->
¡¬tON
=-1;

1291 
pLevS‹
->
¡¬tL2EN
=-1;

1292 
pLevS‹
->
Ï¡SŒÚgRTL
=
lim™
 - 1;

1297 ià((
_´İ
 =ğ
DœPrİ_AN
è&& (
	`NO_CONTEXT_RTL
(
pBiDi
->
dœPrİs
[
¡¬t0
]è=ğ
AN
) &&

1298 (
pBiDi
->
»Üd”šgMode
!=
UBIDI_REORDER_INVERSE_FOR_NUMBERS_SPECIAL
))

1301 ià(
pLevS‹
->
¡¬tL2EN
 == -1)

1304 
pLevS‹
->
Ï¡SŒÚgRTL
=
lim™
 - 1;

1307 ià(
pLevS‹
->
¡¬tL2EN
 >= 0)

1309 
	`addPošt
(
pBiDi
, 
pLevS‹
->
¡¬tL2EN
, 
LRM_BEFORE
);

1310 
pLevS‹
->
¡¬tL2EN
=-2;

1313 
	`addPošt
(
pBiDi
, 
¡¬t0
, 
LRM_BEFORE
);

1317 ià(
pLevS‹
->
¡¬tL2EN
 == -1) {

1318 
pLevS‹
->
¡¬tL2EN
=
¡¬t0
;

1323 
pLevS‹
->
Ï¡SŒÚgRTL
=
lim™
 - 1;

1324 
pLevS‹
->
¡¬tON
=-1;

1329 
k
=
¡¬t0
-1; k>=0 && !(
Ëv–s
[k]&1); k--);

1330 if(
k
>=0) {

1331 
	`addPošt
(
pBiDi
, 
k
, 
RLM_BEFORE
);

1332 
pIn£¹Pošts
=&(
pBiDi
->
š£¹Pošts
);

1333 
pIn£¹Pošts
->
cÚfœmed
õIn£¹Pošts->
size
;

1335 
pLevS‹
->
¡¬tON
=
¡¬t0
;

1341 
	`addPošt
(
pBiDi
, 
¡¬t0
, 
LRM_BEFORE
);

1342 
	`addPošt
(
pBiDi
, 
¡¬t0
, 
LRM_AFTER
);

1347 
pIn£¹Pošts
=&(
pBiDi
->
š£¹Pošts
);

1348 
pIn£¹Pošts
->
size
õIn£¹Pošts->
cÚfœmed
;

1349 ià(
_´İ
 =ğ
DœPrİ_S
)

1351 
	`addPošt
(
pBiDi
, 
¡¬t0
, 
RLM_BEFORE
);

1352 
pIn£¹Pošts
->
cÚfœmed
õIn£¹Pošts->
size
;

1357 
Ëv–
=
pLevS‹
->
runLev–
 + 
addLev–
;

1358 
k
=
pLevS‹
->
¡¬tON
; k<
¡¬t0
; k++) {

1359 ià(
Ëv–s
[
k
]<
Ëv–
)

1360 
Ëv–s
[
k
]=
Ëv–
;

1362 
pIn£¹Pošts
=&(
pBiDi
->
š£¹Pošts
);

1363 
pIn£¹Pošts
->
cÚfœmed
õIn£¹Pošts->
size
;

1364 
pLevS‹
->
¡¬tON
=
¡¬t0
;

1368 
Ëv–
=
pLevS‹
->
runLev–
;

1369 
k
=
¡¬t0
-1; k>=
pLevS‹
->
¡¬tON
; k--) {

1370 if(
Ëv–s
[
k
]==
Ëv–
+3) {

1371 
Ëv–s
[
k
]==
Ëv–
+3) {

1372 
Ëv–s
[
k
--]-=2;

1374 
Ëv–s
[
k
]==
Ëv–
) {

1375 
k
--;

1378 if(
Ëv–s
[
k
]==
Ëv–
+2) {

1379 
Ëv–s
[
k
]=
Ëv–
;

1382 
Ëv–s
[
k
]=
Ëv–
+1;

1387 
Ëv–
=
pLevS‹
->
runLev–
+1;

1388 
k
=
¡¬t0
-1; k>=
pLevS‹
->
¡¬tON
; k--) {

1389 if(
Ëv–s
[
k
]>
Ëv–
) {

1390 
Ëv–s
[
k
]-=2;

1396 
	`U_ASSERT
(
FALSE
);

1400 if((
addLev–
è|| (
¡¬t
 < 
¡¬t0
)) {

1401 
Ëv–
=
pLevS‹
->
runLev–
 + 
addLev–
;

1402 
k
=
¡¬t
; k<
lim™
; k++) {

1403 
Ëv–s
[
k
]=
Ëv–
;

1406 
	}
}

1409 
	$»sŞveIm¶ic™Lev–s
(
UBiDi
 *
pBiDi
,

1410 
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
,

1411 
DœPrİ
 
sÜ
, DœPrİ 
eÜ
) {

1412 cÚ¡ 
DœPrİ
 *
dœPrİs
=
pBiDi
->dirProps;

1414 
LevS‹
 
ËvS‹
;

1415 
št32_t
 
i
, 
¡¬t1
, 
¡¬t2
;

1416 
ušt8_t
 
ŞdS‹Imp
, 
¡©eImp
, 
aùiÚImp
;

1417 
ušt8_t
 
g´İ
, 
»sPrİ
, 
ûÎ
;

1418 
UBoŞ
 
šv”£RTL
;

1419 
DœPrİ
 
ÃxtSŒÚgPrİ
=
R
;

1420 
št32_t
 
ÃxtSŒÚgPos
=-1;

1422 
ËvS‹
.
¡¬tON
 = -1;

1431 
šv”£RTL
=(
UBoŞ
)

1432 ((
¡¬t
<
pBiDi
->
Ï¡A¿bicPos
è&& (
	`GET_PARALEVEL
(pBiDi, start) & 1) &&

1433 (
pBiDi
->
»Üd”šgMode
==
UBIDI_REORDER_INVERSE_LIKE_DIRECT
 ||

1434 
pBiDi
->
»Üd”šgMode
==
UBIDI_REORDER_INVERSE_FOR_NUMBERS_SPECIAL
));

1436 
ËvS‹
.
¡¬tL2EN
=-1;

1437 
ËvS‹
.
Ï¡SŒÚgRTL
=-1;

1438 
ËvS‹
.
¡©e
=0;

1439 
ËvS‹
.
runLev–
=
pBiDi
->
Ëv–s
[
¡¬t
];

1440 
ËvS‹
.
pImpTab
=(cÚ¡ 
ImpTab
*)((
pBiDi
->
pImpTabPaœ
)->pImpTab)[ËvS‹.
runLev–
&1];

1441 
ËvS‹
.
pImpAù
=(cÚ¡ 
ImpAù
*)((
pBiDi
->
pImpTabPaœ
)->pImpAù)[ËvS‹.
runLev–
&1];

1442 
	`´oûssPrİ”tySeq
(
pBiDi
, &
ËvS‹
, 
sÜ
, 
¡¬t
, start);

1444 if(
	`NO_CONTEXT_RTL
(
dœPrİs
[
¡¬t
])==
NSM
) {

1445 
¡©eImp
 = 1 + 
sÜ
;

1447 
¡©eImp
=0;

1449 
¡¬t1
=
¡¬t
;

1450 
¡¬t2
=
¡¬t
;

1452 
i
=
¡¬t
; i<=
lim™
; i++) {

1453 if(
i
>=
lim™
) {

1454 
g´İ
=
eÜ
;

1456 
DœPrİ
 
´İ
, 
´İ1
;

1457 
´İ
=
	`NO_CONTEXT_RTL
(
dœPrİs
[
i
]);

1458 if(
šv”£RTL
) {

1459 if(
´İ
==
AL
) {

1461 
´İ
=
R
;

1462 } if(
´İ
==
EN
) {

1463 if(
ÃxtSŒÚgPos
<=
i
) {

1465 
št32_t
 
j
;

1466 
ÃxtSŒÚgPrİ
=
R
;

1467 
ÃxtSŒÚgPos
=
lim™
;

1468 
j
=
i
+1; j<
lim™
; j++) {

1469 
´İ1
=
	`NO_CONTEXT_RTL
(
dœPrİs
[
j
]);

1470 if(
´İ1
==
L
 ||…rİ1==
R
 ||…rİ1==
AL
) {

1471 
ÃxtSŒÚgPrİ
=
´İ1
;

1472 
ÃxtSŒÚgPos
=
j
;

1477 if(
ÃxtSŒÚgPrİ
==
AL
) {

1478 
´İ
=
AN
;

1482 
g´İ
=
groupPrİ
[
´İ
];

1484 
ŞdS‹Imp
=
¡©eImp
;

1485 
ûÎ
=
impTabPrİs
[
ŞdS‹Imp
][
g´İ
];

1486 
¡©eImp
=
	`GET_STATEPROPS
(
ûÎ
);

1487 
aùiÚImp
=
	`GET_ACTIONPROPS
(
ûÎ
);

1488 if((
i
==
lim™
è&& (
aùiÚImp
==0)) {

1490 
aùiÚImp
=1;

1492 if(
aùiÚImp
) {

1493 
»sPrİ
=
impTabPrİs
[
ŞdS‹Imp
][
IMPTABPROPS_RES
];

1494 
aùiÚImp
) {

1496 
	`´oûssPrİ”tySeq
(
pBiDi
, &
ËvS‹
, 
»sPrİ
, 
¡¬t1
, 
i
);

1497 
¡¬t1
=
i
;

1500 
¡¬t2
=
i
;

1503 
	`´oûssPrİ”tySeq
(
pBiDi
, &
ËvS‹
, 
»sPrİ
, 
¡¬t1
, 
¡¬t2
);

1504 
	`´oûssPrİ”tySeq
(
pBiDi
, &
ËvS‹
, 
DœPrİ_ON
, 
¡¬t2
, 
i
);

1505 
¡¬t1
=
i
;

1508 
	`´oûssPrİ”tySeq
(
pBiDi
, &
ËvS‹
, 
»sPrİ
, 
¡¬t1
, 
¡¬t2
);

1509 
¡¬t1
=
¡¬t2
;

1510 
¡¬t2
=
i
;

1513 
	`U_ASSERT
(
FALSE
);

1519 
	`´oûssPrİ”tySeq
(
pBiDi
, &
ËvS‹
, 
eÜ
, 
lim™
,†imit);

1520 
	}
}

1531 
	$adju¡WSLev–s
(
UBiDi
 *
pBiDi
) {

1532 cÚ¡ 
DœPrİ
 *
dœPrİs
=
pBiDi
->dirProps;

1533 
UBiDiLev–
 *
Ëv–s
=
pBiDi
->levels;

1534 
št32_t
 
i
;

1536 if(
pBiDi
->
æags
&
MASK_WS
) {

1537 
UBoŞ
 
Üd”P¬ag¿phsLTR
=
pBiDi
->orderParagraphsLTR;

1538 
FÏgs
 
æag
;

1540 
i
=
pBiDi
->
ŒašgWSS¹
;

1541 
i
>0) {

1543 
i
>0 && (
æag
=
	`DIRPROP_FLAG_NC
(
dœPrİs
[--i]))&
MASK_WS
) {

1544 if(
Üd”P¬ag¿phsLTR
&&(
æag
&
	`DIRPROP_FLAG
(
B
))) {

1545 
Ëv–s
[
i
]=0;

1547 
Ëv–s
[
i
]=
	`GET_PARALEVEL
(
pBiDi
, i);

1553 
i
>0) {

1554 
æag
=
	`DIRPROP_FLAG_NC
(
dœPrİs
[--
i
]);

1555 if(
æag
&
MASK_BN_EXPLICIT
) {

1556 
Ëv–s
[
i
]=levels[i+1];

1557 } if(
Üd”P¬ag¿phsLTR
&&(
æag
&
	`DIRPROP_FLAG
(
B
))) {

1558 
Ëv–s
[
i
]=0;

1560 } if(
æag
&
MASK_B_S
) {

1561 
Ëv–s
[
i
]=
	`GET_PARALEVEL
(
pBiDi
, i);

1567 
	}
}

1569 
	#BIDI_MIN
(
x
, 
y
è((x)<(yè? (xè: (y))

	)

1570 
	#BIDI_ABS
(
x
è((x)>=0 ? (xè: (-(x)))

	)

1572 
	$£tP¬aRunsOÆy
(
UBiDi
 *
pBiDi
, cÚ¡ 
UCh¬
 *
‹xt
, 
št32_t
 
Ëngth
,

1573 
UBiDiLev–
 
·¿Lev–
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1574 *
runsOÆyMemÜy
;

1575 
št32_t
 *
visu®M­
;

1576 
UCh¬
 *
visu®Text
;

1577 
št32_t
 
§veL’gth
, 
§veT¿šgWSS¹
;

1578 cÚ¡ 
UBiDiLev–
 *
Ëv–s
;

1579 
UBiDiLev–
 *
§veLev–s
;

1580 
UBiDiDœeùiÚ
 
§veDœeùiÚ
;

1581 
UBoŞ
 
§veMayAÎoÿ‹Text
;

1582 
Run
 *
runs
;

1583 
št32_t
 
visu®L’gth
, 
i
, 
j
, 
visu®S¹
, 
logiÿlS¹
,

1584 
runCouÁ
, 
runL’gth
, 
addedRuns
, 
š£¹Remove
,

1585 
¡¬t
, 
lim™
, 
¡•
, 
šdexOddB™
, 
logiÿlPos
,

1586 
šdex0
, 
šdex1
;

1587 
ušt32_t
 
§veO±iÚs
;

1589 
pBiDi
->
»Üd”šgMode
=
UBIDI_REORDER_DEFAULT
;

1590 if(
Ëngth
==0) {

1591 
	`ubidi_£tP¬a
(
pBiDi
, 
‹xt
, 
Ëngth
, 
·¿Lev–
, 
NULL
, 
pE¼ÜCode
);

1592 
ş—nup3
;

1595 
runsOÆyMemÜy
=
	`u´v_m®loc
(
Ëngth
*((
št32_t
)+(
UCh¬
)+(
UBiDiLev–
)));

1596 if(
runsOÆyMemÜy
==
NULL
) {

1597 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1598 
ş—nup3
;

1600 
visu®M­
=
runsOÆyMemÜy
;

1601 
visu®Text
=(
UCh¬
 *)&
visu®M­
[
Ëngth
];

1602 
§veLev–s
=(
UBiDiLev–
 *)&
visu®Text
[
Ëngth
];

1603 
§veO±iÚs
=
pBiDi
->
»Üd”šgO±iÚs
;

1604 if(
§veO±iÚs
 & 
UBIDI_OPTION_INSERT_MARKS
) {

1605 
pBiDi
->
»Üd”šgO±iÚs
&=~
UBIDI_OPTION_INSERT_MARKS
;

1606 
pBiDi
->
»Üd”šgO±iÚs
|=
UBIDI_OPTION_REMOVE_CONTROLS
;

1608 
·¿Lev–
&=1;

1609 
	`ubidi_£tP¬a
(
pBiDi
, 
‹xt
, 
Ëngth
, 
·¿Lev–
, 
NULL
, 
pE¼ÜCode
);

1610 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1611 
ş—nup3
;

1616 
Ëv–s
=
	`ubidi_g‘Lev–s
(
pBiDi
, 
pE¼ÜCode
);

1617 
	`u´v_memıy
(
§veLev–s
, 
Ëv–s
, 
pBiDi
->
Ëngth
*(
UBiDiLev–
));

1618 
§veT¿šgWSS¹
=
pBiDi
->
ŒašgWSS¹
;

1619 
§veL’gth
=
pBiDi
->
Ëngth
;

1620 
§veDœeùiÚ
=
pBiDi
->
dœeùiÚ
;

1628 
visu®L’gth
=
	`ubidi_wr™eReÜd”ed
(
pBiDi
, 
visu®Text
, 
Ëngth
,

1629 
UBIDI_DO_MIRRORING
, 
pE¼ÜCode
);

1630 
	`ubidi_g‘Visu®M­
(
pBiDi
, 
visu®M­
, 
pE¼ÜCode
);

1631 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1632 
ş—nup2
;

1634 
pBiDi
->
»Üd”šgO±iÚs
=
§veO±iÚs
;

1636 
pBiDi
->
»Üd”šgMode
=
UBIDI_REORDER_INVERSE_LIKE_DIRECT
;

1637 
·¿Lev–
^=1;

1645 
§veMayAÎoÿ‹Text
=
pBiDi
->
mayAÎoÿ‹Text
;

1646 
pBiDi
->
mayAÎoÿ‹Text
=
FALSE
;

1647 
	`ubidi_£tP¬a
(
pBiDi
, 
visu®Text
, 
visu®L’gth
, 
·¿Lev–
, 
NULL
, 
pE¼ÜCode
);

1648 
pBiDi
->
mayAÎoÿ‹Text
=
§veMayAÎoÿ‹Text
;

1649 
	`ubidi_g‘Runs
(
pBiDi
, 
pE¼ÜCode
);

1650 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1651 
ş—nup1
;

1654 
addedRuns
=0;

1655 
runCouÁ
=
pBiDi
->runCount;

1656 
runs
=
pBiDi
->runs;

1657 
visu®S¹
=0;

1658 
i
=0; i<
runCouÁ
; i++, 
visu®S¹
+=
runL’gth
) {

1659 
runL’gth
=
runs
[
i
].
visu®Lim™
-
visu®S¹
;

1660 if(
runL’gth
<2) {

1663 
logiÿlS¹
=
	`GET_INDEX
(
runs
[
i
].logicalStart);

1664 
j
=
logiÿlS¹
+1; j<logiÿlS¹+
runL’gth
; j++) {

1665 
šdex0
=
visu®M­
[
j
];

1666 
šdex1
=
visu®M­
[
j
-1];

1667 if((
	`BIDI_ABS
(
šdex0
-
šdex1
)!=1è|| (
§veLev–s
[index0]!=saveLevels[index1])) {

1668 
addedRuns
++;

1672 if(
addedRuns
) {

1673 if(
	`g‘RunsMemÜy
(
pBiDi
, 
runCouÁ
+
addedRuns
)) {

1674 if(
runCouÁ
==1) {

1676 
pBiDi
->
runsMemÜy
[0]=
runs
[0];

1678 
runs
=
pBiDi
->runsõBiDi->
runsMemÜy
;

1679 
pBiDi
->
runCouÁ
+=
addedRuns
;

1681 
ş—nup1
;

1685 
i
=
runCouÁ
-1; i>=0; i--) {

1686 
runL’gth
ğ
i
==0 ? 
runs
[0].
visu®Lim™
 :

1687 
runs
[
i
].
visu®Lim™
-runs[i-1].visualLimit;

1688 
logiÿlS¹
=
runs
[
i
].logicalStart;

1689 
šdexOddB™
=
	`GET_ODD_BIT
(
logiÿlS¹
);

1690 
logiÿlS¹
=
	`GET_INDEX
(logicalStart);

1691 if(
runL’gth
<2) {

1692 if(
addedRuns
) {

1693 
runs
[
i
+
addedRuns
]=runs[i];

1695 
logiÿlPos
=
visu®M­
[
logiÿlS¹
];

1696 
runs
[
i
+
addedRuns
].
logiÿlS¹
=
	`MAKE_INDEX_ODD_PAIR
(
logiÿlPos
,

1697 
§veLev–s
[
logiÿlPos
]^
šdexOddB™
);

1700 if(
šdexOddB™
) {

1701 
¡¬t
=
logiÿlS¹
;

1702 
lim™
=
logiÿlS¹
+
runL’gth
-1;

1703 
¡•
=1;

1705 
¡¬t
=
logiÿlS¹
+
runL’gth
-1;

1706 
lim™
=
logiÿlS¹
;

1707 
¡•
=-1;

1709 
j
=
¡¬t
; j!=
lim™
; j+=
¡•
) {

1710 
šdex0
=
visu®M­
[
j
];

1711 
šdex1
=
visu®M­
[
j
+
¡•
];

1712 if((
	`BIDI_ABS
(
šdex0
-
šdex1
)!=1è|| (
§veLev–s
[index0]!=saveLevels[index1])) {

1713 
logiÿlPos
=
	`BIDI_MIN
(
visu®M­
[
¡¬t
], 
šdex0
);

1714 
runs
[
i
+
addedRuns
].
logiÿlS¹
=
	`MAKE_INDEX_ODD_PAIR
(
logiÿlPos
,

1715 
§veLev–s
[
logiÿlPos
]^
šdexOddB™
);

1716 
runs
[
i
+
addedRuns
].
visu®Lim™
=runs[i].visualLimit;

1717 
runs
[
i
].
visu®Lim™
-=
	`BIDI_ABS
(
j
-
¡¬t
)+1;

1718 
š£¹Remove
=
runs
[
i
].š£¹Remove&(
LRM_AFTER
|
RLM_AFTER
);

1719 
runs
[
i
+
addedRuns
].
š£¹Remove
=insertRemove;

1720 
runs
[
i
].
š£¹Remove
&=~insertRemove;

1721 
¡¬t
=
j
+
¡•
;

1722 
addedRuns
--;

1725 if(
addedRuns
) {

1726 
runs
[
i
+
addedRuns
]=runs[i];

1728 
logiÿlPos
=
	`BIDI_MIN
(
visu®M­
[
¡¬t
], visu®M­[
lim™
]);

1729 
runs
[
i
+
addedRuns
].
logiÿlS¹
=
	`MAKE_INDEX_ODD_PAIR
(
logiÿlPos
,

1730 
§veLev–s
[
logiÿlPos
]^
šdexOddB™
);

1733 
ş—nup1
:

1735 
pBiDi
->
·¿Lev–
^=1;

1736 
ş—nup2
:

1738 
pBiDi
->
‹xt
=text;

1739 
pBiDi
->
Ëngth
=
§veL’gth
;

1740 
pBiDi
->
Üigš®L’gth
=
Ëngth
;

1741 
pBiDi
->
dœeùiÚ
=
§veDœeùiÚ
;

1743 if(
§veL’gth
>
pBiDi
->
Ëv–sSize
) {

1744 
§veL’gth
=
pBiDi
->
Ëv–sSize
;

1746 
	`u´v_memıy
(
pBiDi
->
Ëv–s
, 
§veLev–s
, 
§veL’gth
*(
UBiDiLev–
));

1747 
pBiDi
->
ŒašgWSS¹
=
§veT¿šgWSS¹
;

1749 
	`u´v_ä“
(
runsOÆyMemÜy
);

1750 if(
pBiDi
->
runCouÁ
>1) {

1751 
pBiDi
->
dœeùiÚ
=
UBIDI_MIXED
;

1753 
ş—nup3
:

1754 
pBiDi
->
»Üd”šgMode
=
UBIDI_REORDER_RUNS_ONLY
;

1755 
	}
}

1759 
U_CAPI
 
U_EXPORT2


1760 
	$ubidi_£tP¬a
(
UBiDi
 *
pBiDi
, cÚ¡ 
UCh¬
 *
‹xt
, 
št32_t
 
Ëngth
,

1761 
UBiDiLev–
 
·¿Lev–
, UBiDiLev– *
embeddšgLev–s
,

1762 
UE¼ÜCode
 *
pE¼ÜCode
) {

1763 
UBiDiDœeùiÚ
 
dœeùiÚ
;

1766 
	`RETURN_VOID_IF_NULL_OR_FAILING_ERRCODE
(
pE¼ÜCode
);

1767 if(
pBiDi
==
NULL
 || 
‹xt
==NULL || 
Ëngth
<-1 ||

1768 (
·¿Lev–
>
UBIDI_MAX_EXPLICIT_LEVEL
 &&…¬aLev–<
UBIDI_DEFAULT_LTR
)) {

1769 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1773 if(
Ëngth
==-1) {

1774 
Ëngth
=
	`u_¡¾’
(
‹xt
);

1778 if(
pBiDi
->
»Üd”šgMode
==
UBIDI_REORDER_RUNS_ONLY
) {

1779 
	`£tP¬aRunsOÆy
(
pBiDi
, 
‹xt
, 
Ëngth
, 
·¿Lev–
, 
pE¼ÜCode
);

1784 
pBiDi
->
pP¬aBiDi
=
NULL
;

1785 
pBiDi
->
‹xt
=text;

1786 
pBiDi
->
Ëngth
õBiDi->
Üigš®L’gth
õBiDi->
»suÉL’gth
=length;

1787 
pBiDi
->
·¿Lev–
=paraLevel;

1788 
pBiDi
->
dœeùiÚ
=
UBIDI_LTR
;

1789 
pBiDi
->
·¿CouÁ
=1;

1791 
pBiDi
->
dœPrİs
=
NULL
;

1792 
pBiDi
->
Ëv–s
=
NULL
;

1793 
pBiDi
->
runs
=
NULL
;

1794 
pBiDi
->
š£¹Pošts
.
size
=0;

1795 
pBiDi
->
š£¹Pošts
.
cÚfœmed
=0;

1800 if(
	`IS_DEFAULT_LEVEL
(
·¿Lev–
)) {

1801 
pBiDi
->
deçuÉP¬aLev–
=
·¿Lev–
;

1803 
pBiDi
->
deçuÉP¬aLev–
=0;

1806 if(
Ëngth
==0) {

1812 if(
	`IS_DEFAULT_LEVEL
(
·¿Lev–
)) {

1813 
pBiDi
->
·¿Lev–
&=1;

1814 
pBiDi
->
deçuÉP¬aLev–
=0;

1816 if(
·¿Lev–
&1) {

1817 
pBiDi
->
æags
=
	`DIRPROP_FLAG
(
R
);

1818 
pBiDi
->
dœeùiÚ
=
UBIDI_RTL
;

1820 
pBiDi
->
æags
=
	`DIRPROP_FLAG
(
L
);

1821 
pBiDi
->
dœeùiÚ
=
UBIDI_LTR
;

1824 
pBiDi
->
runCouÁ
=0;

1825 
pBiDi
->
·¿CouÁ
=0;

1826 
pBiDi
->
pP¬aBiDi
=pBiDi;

1830 
pBiDi
->
runCouÁ
=-1;

1837 if(
	`g‘DœPrİsMemÜy
(
pBiDi
, 
Ëngth
)) {

1838 
pBiDi
->
dœPrİs
õBiDi->
dœPrİsMemÜy
;

1839 
	`g‘DœPrİs
(
pBiDi
);

1841 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1845 
Ëngth
ğ
pBiDi
->length;

1846 
pBiDi
->
ŒašgWSS¹
=
Ëngth
;

1848 if(
pBiDi
->
·¿CouÁ
>1) {

1849 if(
	`g‘In™ŸlP¬asMemÜy
(
pBiDi
,…BiDi->
·¿CouÁ
)) {

1850 
pBiDi
->
·¿s
õBiDi->
·¿sMemÜy
;

1851 
pBiDi
->
·¿s
[pBiDi->
·¿CouÁ
-1]=
Ëngth
;

1853 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1858 
pBiDi
->
·¿s
õBiDi->
sim¶eP¬as
;

1859 
pBiDi
->
sim¶eP¬as
[0]=
Ëngth
;

1863 if(
embeddšgLev–s
==
NULL
) {

1865 if(
	`g‘Lev–sMemÜy
(
pBiDi
, 
Ëngth
)) {

1866 
pBiDi
->
Ëv–s
õBiDi->
Ëv–sMemÜy
;

1867 
dœeùiÚ
=
	`»sŞveEx¶ic™Lev–s
(
pBiDi
);

1869 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1874 
pBiDi
->
Ëv–s
=
embeddšgLev–s
;

1875 
dœeùiÚ
=
	`checkEx¶ic™Lev–s
(
pBiDi
, 
pE¼ÜCode
);

1876 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1885 
pBiDi
->
dœeùiÚ
=direction;

1886 
dœeùiÚ
) {

1887 
UBIDI_LTR
:

1889 
pBiDi
->
·¿Lev–
=(
UBiDiLev–
)((pBiDi->paraLevel+1)&~1);

1892 
pBiDi
->
ŒašgWSS¹
=0;

1894 
UBIDI_RTL
:

1896 
pBiDi
->
·¿Lev–
|=1;

1899 
pBiDi
->
ŒašgWSS¹
=0;

1905 
pBiDi
->
»Üd”šgMode
) {

1906 
UBIDI_REORDER_DEFAULT
:

1907 
pBiDi
->
pImpTabPaœ
=&
impTab_DEFAULT
;

1909 
UBIDI_REORDER_NUMBERS_SPECIAL
:

1910 
pBiDi
->
pImpTabPaœ
=&
impTab_NUMBERS_SPECIAL
;

1912 
UBIDI_REORDER_GROUP_NUMBERS_WITH_R
:

1913 
pBiDi
->
pImpTabPaœ
=&
impTab_GROUP_NUMBERS_WITH_R
;

1915 
UBIDI_REORDER_INVERSE_NUMBERS_AS_L
:

1916 
pBiDi
->
pImpTabPaœ
=&
impTab_INVERSE_NUMBERS_AS_L
;

1918 
UBIDI_REORDER_INVERSE_LIKE_DIRECT
:

1919 ià(
pBiDi
->
»Üd”šgO±iÚs
 & 
UBIDI_OPTION_INSERT_MARKS
) {

1920 
pBiDi
->
pImpTabPaœ
=&
impTab_INVERSE_LIKE_DIRECT_WITH_MARKS
;

1922 
pBiDi
->
pImpTabPaœ
=&
impTab_INVERSE_LIKE_DIRECT
;

1925 
UBIDI_REORDER_INVERSE_FOR_NUMBERS_SPECIAL
:

1926 ià(
pBiDi
->
»Üd”šgO±iÚs
 & 
UBIDI_OPTION_INSERT_MARKS
) {

1927 
pBiDi
->
pImpTabPaœ
=&
impTab_INVERSE_FOR_NUMBERS_SPECIAL_WITH_MARKS
;

1929 
pBiDi
->
pImpTabPaœ
=&
impTab_INVERSE_FOR_NUMBERS_SPECIAL
;

1934 
	`U_ASSERT
(
FALSE
);

1948 if(
embeddšgLev–s
==
NULL
 && 
pBiDi
->
·¿CouÁ
<=1 &&

1949 !(
pBiDi
->
æags
&
DIRPROP_FLAG_MULTI_RUNS
)) {

1950 
	`»sŞveIm¶ic™Lev–s
(
pBiDi
, 0, 
Ëngth
,

1951 
	`GET_LR_FROM_LEVEL
(
	`GET_PARALEVEL
(
pBiDi
, 0)),

1952 
	`GET_LR_FROM_LEVEL
(
	`GET_PARALEVEL
(
pBiDi
, 
Ëngth
-1)));

1955 
UBiDiLev–
 *
Ëv–s
=
pBiDi
->levels;

1956 
št32_t
 
¡¬t
, 
lim™
=0;

1957 
UBiDiLev–
 
Ëv–
, 
ÃxtLev–
;

1958 
DœPrİ
 
sÜ
, 
eÜ
;

1961 
Ëv–
=
	`GET_PARALEVEL
(
pBiDi
, 0);

1962 
ÃxtLev–
=
Ëv–s
[0];

1963 if(
Ëv–
<
ÃxtLev–
) {

1964 
eÜ
=
	`GET_LR_FROM_LEVEL
(
ÃxtLev–
);

1966 
eÜ
=
	`GET_LR_FROM_LEVEL
(
Ëv–
);

1973 
¡¬t
=
lim™
;

1974 
Ëv–
=
ÃxtLev–
;

1975 if((
¡¬t
>0è&& (
	`NO_CONTEXT_RTL
(
pBiDi
->
dœPrİs
[¡¬t-1])==
B
)) {

1977 
sÜ
=
	`GET_LR_FROM_LEVEL
(
	`GET_PARALEVEL
(
pBiDi
, 
¡¬t
));

1979 
sÜ
=
eÜ
;

1983 ++
lim™
<
Ëngth
 && 
Ëv–s
[lim™]==
Ëv–
) {}

1986 if(
lim™
<
Ëngth
) {

1987 
ÃxtLev–
=
Ëv–s
[
lim™
];

1989 
ÃxtLev–
=
	`GET_PARALEVEL
(
pBiDi
, 
Ëngth
-1);

1993 if((
Ëv–
&~
UBIDI_LEVEL_OVERRIDE
)<(
ÃxtLev–
&~UBIDI_LEVEL_OVERRIDE)) {

1994 
eÜ
=
	`GET_LR_FROM_LEVEL
(
ÃxtLev–
);

1996 
eÜ
=
	`GET_LR_FROM_LEVEL
(
Ëv–
);

2001 if(!(
Ëv–
&
UBIDI_LEVEL_OVERRIDE
)) {

2002 
	`»sŞveIm¶ic™Lev–s
(
pBiDi
, 
¡¬t
, 
lim™
, 
sÜ
, 
eÜ
);

2006 
Ëv–s
[
¡¬t
++]&=~
UBIDI_LEVEL_OVERRIDE
;

2007 } 
¡¬t
<
lim™
);

2009 } 
lim™
<
Ëngth
);

2012 ià(
	`U_FAILURE
(
pBiDi
->
š£¹Pošts
.
”rÜCode
))

2014 *
pE¼ÜCode
=
pBiDi
->
š£¹Pošts
.
”rÜCode
;

2018 
	`adju¡WSLev–s
(
pBiDi
);

2024 if((
pBiDi
->
deçuÉP¬aLev–
>0) &&

2025 (
pBiDi
->
»Üd”šgO±iÚs
 & 
UBIDI_OPTION_INSERT_MARKS
) &&

2026 ((
pBiDi
->
»Üd”šgMode
==
UBIDI_REORDER_INVERSE_LIKE_DIRECT
) ||

2027 (
pBiDi
->
»Üd”šgMode
==
UBIDI_REORDER_INVERSE_FOR_NUMBERS_SPECIAL
))) {

2028 
št32_t
 
i
, 
j
, 
¡¬t
, 
Ï¡
;

2029 
DœPrİ
 
dœPrİ
;

2030 
i
=0; i<
pBiDi
->
·¿CouÁ
; i++) {

2031 
Ï¡
=
pBiDi
->
·¿s
[
i
]-1;

2032 if((
pBiDi
->
dœPrİs
[
Ï¡
] & 
CONTEXT_RTL
)==0) {

2035 
¡¬t
ğ
i
==0 ? 0 : 
pBiDi
->
·¿s
[i - 1];

2036 
j
=
Ï¡
; j>=
¡¬t
; j--) {

2037 
dœPrİ
=
	`NO_CONTEXT_RTL
(
pBiDi
->
dœPrİs
[
j
]);

2038 if(
dœPrİ
==
L
) {

2039 if(
j
<
Ï¡
) {

2040 
	`NO_CONTEXT_RTL
(
pBiDi
->
dœPrİs
[
Ï¡
])==
B
) {

2041 
Ï¡
--;

2044 
	`addPošt
(
pBiDi
, 
Ï¡
, 
RLM_BEFORE
);

2047 if(
	`DIRPROP_FLAG
(
dœPrİ
è& 
MASK_R_AL
) {

2054 if(
pBiDi
->
»Üd”šgO±iÚs
 & 
UBIDI_OPTION_REMOVE_CONTROLS
) {

2055 
pBiDi
->
»suÉL’gth
 -ğpBiDi->
cÚŒŞCouÁ
;

2057 
pBiDi
->
»suÉL’gth
 +ğpBiDi->
š£¹Pošts
.
size
;

2059 
pBiDi
->
pP¬aBiDi
=pBiDi;

2060 
	}
}

2062 
U_CAPI
 
U_EXPORT2


2063 
	$ubidi_Üd”P¬ag¿phsLTR
(
UBiDi
 *
pBiDi
, 
UBoŞ
 
Üd”P¬ag¿phsLTR
) {

2064 if(
pBiDi
!=
NULL
) {

2065 
pBiDi
->
Üd”P¬ag¿phsLTR
=orderParagraphsLTR;

2067 
	}
}

2069 
U_CAPI
 
UBoŞ
 
U_EXPORT2


2070 
	$ubidi_isOrd”P¬ag¿phsLTR
(
UBiDi
 *
pBiDi
) {

2071 if(
pBiDi
!=
NULL
) {

2072  
pBiDi
->
Üd”P¬ag¿phsLTR
;

2074  
FALSE
;

2076 
	}
}

2078 
U_CAPI
 
UBiDiDœeùiÚ
 
U_EXPORT2


2079 
	$ubidi_g‘DœeùiÚ
(cÚ¡ 
UBiDi
 *
pBiDi
) {

2080 if(
	`IS_VALID_PARA_OR_LINE
(
pBiDi
)) {

2081  
pBiDi
->
dœeùiÚ
;

2083  
UBIDI_LTR
;

2085 
	}
}

2087 
U_CAPI
 cÚ¡ 
UCh¬
 * 
U_EXPORT2


2088 
	$ubidi_g‘Text
(cÚ¡ 
UBiDi
 *
pBiDi
) {

2089 if(
	`IS_VALID_PARA_OR_LINE
(
pBiDi
)) {

2090  
pBiDi
->
‹xt
;

2092  
NULL
;

2094 
	}
}

2096 
U_CAPI
 
št32_t
 
U_EXPORT2


2097 
	$ubidi_g‘L’gth
(cÚ¡ 
UBiDi
 *
pBiDi
) {

2098 if(
	`IS_VALID_PARA_OR_LINE
(
pBiDi
)) {

2099  
pBiDi
->
Üigš®L’gth
;

2103 
	}
}

2105 
U_CAPI
 
št32_t
 
U_EXPORT2


2106 
	$ubidi_g‘Proûs£dL’gth
(cÚ¡ 
UBiDi
 *
pBiDi
) {

2107 if(
	`IS_VALID_PARA_OR_LINE
(
pBiDi
)) {

2108  
pBiDi
->
Ëngth
;

2112 
	}
}

2114 
U_CAPI
 
št32_t
 
U_EXPORT2


2115 
	$ubidi_g‘ResuÉL’gth
(cÚ¡ 
UBiDi
 *
pBiDi
) {

2116 if(
	`IS_VALID_PARA_OR_LINE
(
pBiDi
)) {

2117  
pBiDi
->
»suÉL’gth
;

2121 
	}
}

2125 
U_CAPI
 
UBiDiLev–
 
U_EXPORT2


2126 
	$ubidi_g‘P¬aLev–
(cÚ¡ 
UBiDi
 *
pBiDi
) {

2127 if(
	`IS_VALID_PARA_OR_LINE
(
pBiDi
)) {

2128  
pBiDi
->
·¿Lev–
;

2132 
	}
}

2134 
U_CAPI
 
št32_t
 
U_EXPORT2


2135 
	$ubidi_couÁP¬ag¿phs
(
UBiDi
 *
pBiDi
) {

2136 if(!
	`IS_VALID_PARA_OR_LINE
(
pBiDi
)) {

2139  
pBiDi
->
·¿CouÁ
;

2141 
	}
}

2143 
U_CAPI
 
U_EXPORT2


2144 
	$ubidi_g‘P¬ag¿phByIndex
(cÚ¡ 
UBiDi
 *
pBiDi
, 
št32_t
 
·¿Index
,

2145 
št32_t
 *
pP¬aS¹
, iÁ32_ˆ*
pP¬aLim™
,

2146 
UBiDiLev–
 *
pP¬aLev–
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

2147 
št32_t
 
·¿S¹
;

2150 
	`RETURN_VOID_IF_NULL_OR_FAILING_ERRCODE
(
pE¼ÜCode
);

2151 
	`RETURN_VOID_IF_NOT_VALID_PARA_OR_LINE
(
pBiDi
, *
pE¼ÜCode
);

2152 
	`RETURN_VOID_IF_BAD_RANGE
(
·¿Index
, 0, 
pBiDi
->
·¿CouÁ
, *
pE¼ÜCode
);

2154 
pBiDi
õBiDi->
pP¬aBiDi
;

2155 if(
·¿Index
) {

2156 
·¿S¹
=
pBiDi
->
·¿s
[
·¿Index
-1];

2158 
·¿S¹
=0;

2160 if(
pP¬aS¹
!=
NULL
) {

2161 *
pP¬aS¹
=
·¿S¹
;

2163 if(
pP¬aLim™
!=
NULL
) {

2164 *
pP¬aLim™
=
pBiDi
->
·¿s
[
·¿Index
];

2166 if(
pP¬aLev–
!=
NULL
) {

2167 *
pP¬aLev–
=
	`GET_PARALEVEL
(
pBiDi
, 
·¿S¹
);

2169 
	}
}

2171 
U_CAPI
 
št32_t
 
U_EXPORT2


2172 
	$ubidi_g‘P¬ag¿ph
(cÚ¡ 
UBiDi
 *
pBiDi
, 
št32_t
 
ch¬Index
,

2173 
št32_t
 *
pP¬aS¹
, iÁ32_ˆ*
pP¬aLim™
,

2174 
UBiDiLev–
 *
pP¬aLev–
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

2175 
ušt32_t
 
·¿Index
;

2179 
	`RETURN_IF_NULL_OR_FAILING_ERRCODE
(
pE¼ÜCode
, -1);

2180 
	`RETURN_IF_NOT_VALID_PARA_OR_LINE
(
pBiDi
, *
pE¼ÜCode
, -1);

2181 
pBiDi
õBiDi->
pP¬aBiDi
;

2182 
	`RETURN_IF_BAD_RANGE
(
ch¬Index
, 0, 
pBiDi
->
Ëngth
, *
pE¼ÜCode
, -1);

2184 
·¿Index
=0; 
ch¬Index
>=
pBiDi
->
·¿s
[paraIndex];…araIndex++);

2185 
	`ubidi_g‘P¬ag¿phByIndex
(
pBiDi
, 
·¿Index
, 
pP¬aS¹
, 
pP¬aLim™
, 
pP¬aLev–
, 
pE¼ÜCode
);

2186  
·¿Index
;

2187 
	}
}

2189 
U_CAPI
 
U_EXPORT2


2190 
	$ubidi_£tCÏssC®lback
(
UBiDi
 *
pBiDi
, 
UBiDiCÏssC®lback
 *
ÃwFn
,

2191 cÚ¡ *
ÃwCÚ‹xt
, 
UBiDiCÏssC®lback
 **
ŞdFn
,

2192 cÚ¡ **
ŞdCÚ‹xt
, 
UE¼ÜCode
 *
pE¼ÜCode
)

2194 
	`RETURN_VOID_IF_NULL_OR_FAILING_ERRCODE
(
pE¼ÜCode
);

2195 if(
pBiDi
==
NULL
) {

2196 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

2199 ifĞ
ŞdFn
 )

2201 *
ŞdFn
 = 
pBiDi
->
âCÏssC®lback
;

2203 ifĞ
ŞdCÚ‹xt
 )

2205 *
ŞdCÚ‹xt
 = 
pBiDi
->
coCÏssC®lback
;

2207 
pBiDi
->
âCÏssC®lback
 = 
ÃwFn
;

2208 
pBiDi
->
coCÏssC®lback
 = 
ÃwCÚ‹xt
;

2209 
	}
}

2211 
U_CAPI
 
U_EXPORT2


2212 
	$ubidi_g‘CÏssC®lback
(
UBiDi
 *
pBiDi
, 
UBiDiCÏssC®lback
 **
â
, cÚ¡ **
cÚ‹xt
)

2214 if(
pBiDi
==
NULL
) {

2217 ifĞ
â
 )

2219 *
â
 = 
pBiDi
->
âCÏssC®lback
;

2221 ifĞ
cÚ‹xt
 )

2223 *
cÚ‹xt
 = 
pBiDi
->
coCÏssC®lback
;

2225 
	}
}

2227 
U_CAPI
 
UCh¬DœeùiÚ
 
U_EXPORT2


2228 
	$ubidi_g‘Cu¡omizedCÏss
(
UBiDi
 *
pBiDi
, 
UCh¬32
 
c
)

2230 
UCh¬DœeùiÚ
 
dœ
;

2232 ifĞ
pBiDi
->
âCÏssC®lback
 =ğ
NULL
 ||

2233 (
dœ
 = (*
pBiDi
->
âCÏssC®lback
)ÕBiDi->
coCÏssC®lback
, 
c
)è=ğ
U_BIDI_CLASS_DEFAULT
 )

2235  
	`ubidi_g‘CÏss
(
pBiDi
->
bdp
, 
c
);

2237  
dœ
;

2239 
	}
}

	@ubidi_props.c

19 
	~"unicode/uty³s.h
"

20 
	~"unicode/u£t.h
"

21 
	~"unicode/ud©a.h
"

22 
	~"ucmnd©a.h
"

23 
	~"ud©amem.h
"

24 
	~"umu‹x.h
"

25 
	~"uas£¹.h
"

26 
	~"cmemÜy.h
"

27 
	~"uŒ›2.h
"

28 
	~"ubidi_´İs.h
"

29 
	~"uşn_cmn.h
"

31 
	sUBiDiPrİs
 {

32 
UD©aMemÜy
 *
	mmem
;

33 cÚ¡ 
št32_t
 *
	mšdexes
;

34 cÚ¡ 
ušt32_t
 *
	mmœrÜs
;

35 cÚ¡ 
ušt8_t
 *
	mjgA¼ay
;

37 
UTr›2
 
	mŒ›
;

38 
ušt8_t
 
	mfÜm©V”siÚ
[4];

42 
	~"ubidi_´İs_d©a.c
"

46 
U_CFUNC
 cÚ¡ 
UBiDiPrİs
 *

47 
	$ubidi_g‘SšgËtÚ
() {

48  &
ubidi_´İs_sšgËtÚ
;

49 
	}
}

53 
UBoŞ
 
U_CALLCONV


54 
	$_’umPrİ”tyS¹sRªge
(cÚ¡ *
cÚ‹xt
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt32_t
 
v®ue
) {

56 cÚ¡ 
US‘Add”
 *
§
=(cÚ¡ US‘Add” *)
cÚ‹xt
;

57 
§
->
	`add
(§->
£t
, 
¡¬t
);

58  
TRUE
;

59 
	}
}

61 
U_CFUNC
 

62 
	$ubidi_addPrİ”tyS¹s
(cÚ¡ 
UBiDiPrİs
 *
bdp
, cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

63 
št32_t
 
i
, 
Ëngth
;

64 
UCh¬32
 
c
, 
¡¬t
, 
lim™
;

66 cÚ¡ 
ušt8_t
 *
jgA¼ay
;

67 
ušt8_t
 
´ev
, 
jg
;

69 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

74 
	`uŒ›2_’um
(&
bdp
->
Œ›
, 
NULL
, 
_’umPrİ”tyS¹sRªge
, 
§
);

77 
Ëngth
=
bdp
->
šdexes
[
UBIDI_IX_MIRROR_LENGTH
];

78 
i
=0; i<
Ëngth
; ++i) {

79 
c
=
	`UBIDI_GET_MIRROR_CODE_POINT
(
bdp
->
mœrÜs
[
i
]);

80 
§
->
	`addRªge
(§->
£t
, 
c
, c+1);

84 
¡¬t
=
bdp
->
šdexes
[
UBIDI_IX_JG_START
];

85 
lim™
=
bdp
->
šdexes
[
UBIDI_IX_JG_LIMIT
];

86 
jgA¼ay
=
bdp
->jgArray;

87 
´ev
=0;

88 
¡¬t
<
lim™
) {

89 
jg
=*
jgA¼ay
++;

90 if(
jg
!=
´ev
) {

91 
§
->
	`add
(§->
£t
, 
¡¬t
);

92 
´ev
=
jg
;

94 ++
¡¬t
;

96 if(
´ev
!=0) {

98 
§
->
	`add
(§->
£t
, 
lim™
);

104 
	}
}

108 
U_CFUNC
 
št32_t


109 
	$ubidi_g‘MaxV®ue
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UPrİ”ty
 
which
) {

110 
št32_t
 
max
;

112 if(
bdp
==
NULL
) {

116 
max
=
bdp
->
šdexes
[
UBIDI_MAX_VALUES_INDEX
];

117 
which
) {

118 
UCHAR_BIDI_CLASS
:

119  (
max
&
UBIDI_CLASS_MASK
);

120 
UCHAR_JOINING_GROUP
:

121  (
max
&
UBIDI_MAX_JG_MASK
)>>
UBIDI_MAX_JG_SHIFT
;

122 
UCHAR_JOINING_TYPE
:

123  (
max
&
UBIDI_JT_MASK
)>>
UBIDI_JT_SHIFT
;

127 
	}
}

129 
U_CAPI
 
UCh¬DœeùiÚ


130 
	$ubidi_g‘CÏss
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
) {

131 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
bdp
->
Œ›
, 
c
);

132  (
UCh¬DœeùiÚ
)
	`UBIDI_GET_CLASS
(
´İs
);

133 
	}
}

135 
U_CFUNC
 
UBoŞ


136 
	$ubidi_isMœrÜed
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
) {

137 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
bdp
->
Œ›
, 
c
);

138  (
UBoŞ
)
	`UBIDI_GET_FLAG
(
´İs
, 
UBIDI_IS_MIRRORED_SHIFT
);

139 
	}
}

141 
U_CFUNC
 
UCh¬32


142 
	$ubidi_g‘MœrÜ
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
) {

143 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
bdp
->
Œ›
, 
c
);

144 
št32_t
 
d–
=((
št16_t
)
´İs
)>>
UBIDI_MIRROR_DELTA_SHIFT
;

145 if(
d–
!=
UBIDI_ESC_MIRROR_DELTA
) {

146  
c
+
d–
;

149 cÚ¡ 
ušt32_t
 *
mœrÜs
;

150 
ušt32_t
 
m
;

151 
št32_t
 
i
, 
Ëngth
;

152 
UCh¬32
 
c2
;

154 
mœrÜs
=
bdp
->mirrors;

155 
Ëngth
=
bdp
->
šdexes
[
UBIDI_IX_MIRROR_LENGTH
];

158 
i
=0; i<
Ëngth
; ++i) {

159 
m
=
mœrÜs
[
i
];

160 
c2
=
	`UBIDI_GET_MIRROR_CODE_POINT
(
m
);

161 if(
c
==
c2
) {

163  
	`UBIDI_GET_MIRROR_CODE_POINT
(
mœrÜs
[
	`UBIDI_GET_MIRROR_INDEX
(
m
)]);

164 } if(
c
<
c2
) {

170  
c
;

172 
	}
}

174 
U_CFUNC
 
UBoŞ


175 
	$ubidi_isBidiCÚŒŞ
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
) {

176 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
bdp
->
Œ›
, 
c
);

177  (
UBoŞ
)
	`UBIDI_GET_FLAG
(
´İs
, 
UBIDI_BIDI_CONTROL_SHIFT
);

178 
	}
}

180 
U_CFUNC
 
UBoŞ


181 
	$ubidi_isJošCÚŒŞ
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
) {

182 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
bdp
->
Œ›
, 
c
);

183  (
UBoŞ
)
	`UBIDI_GET_FLAG
(
´İs
, 
UBIDI_JOIN_CONTROL_SHIFT
);

184 
	}
}

186 
U_CFUNC
 
UJoššgTy³


187 
	$ubidi_g‘JoššgTy³
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
) {

188 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
bdp
->
Œ›
, 
c
);

189  (
UJoššgTy³
)((
´İs
&
UBIDI_JT_MASK
)>>
UBIDI_JT_SHIFT
);

190 
	}
}

192 
U_CFUNC
 
UJoššgGroup


193 
	$ubidi_g‘JoššgGroup
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
) {

194 
UCh¬32
 
¡¬t
, 
lim™
;

196 
¡¬t
=
bdp
->
šdexes
[
UBIDI_IX_JG_START
];

197 
lim™
=
bdp
->
šdexes
[
UBIDI_IX_JG_LIMIT
];

198 if(
¡¬t
<=
c
 && c<
lim™
) {

199  (
UJoššgGroup
)
bdp
->
jgA¼ay
[
c
-
¡¬t
];

201  
U_JG_NO_JOINING_GROUP
;

203 
	}
}

207 
U_CFUNC
 
UCh¬DœeùiÚ


208 
	$u_ch¬DœeùiÚ
(
UCh¬32
 
c
) {

209  
	`ubidi_g‘CÏss
(&
ubidi_´İs_sšgËtÚ
, 
c
);

210 
	}
}

212 
U_CFUNC
 
UBoŞ


213 
	$u_isMœrÜed
(
UCh¬32
 
c
) {

214  
	`ubidi_isMœrÜed
(&
ubidi_´İs_sšgËtÚ
, 
c
);

215 
	}
}

217 
U_CFUNC
 
UCh¬32


218 
	$u_ch¬MœrÜ
(
UCh¬32
 
c
) {

219  
	`ubidi_g‘MœrÜ
(&
ubidi_´İs_sšgËtÚ
, 
c
);

220 
	}
}

	@ubidi_props.h

19 #iâdeà
__UBIDI_PROPS_H__


20 
	#__UBIDI_PROPS_H__


	)

22 
	~"unicode/uty³s.h
"

23 
	~"unicode/u£t.h
"

24 
	~"u£t_imp.h
"

25 
	~"ud©aswp.h
"

27 
U_CDECL_BEGIN


31 
	gUBiDiPrİs
;

32 
UBiDiPrİs
 
	tUBiDiPrİs
;

34 
U_CFUNC
 cÚ¡ 
UBiDiPrİs
 *

35 
ubidi_g‘SšgËtÚ
();

37 
U_CAPI
 
št32_t


38 
ubidi_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

39 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

40 
UE¼ÜCode
 *
pE¼ÜCode
);

42 
U_CFUNC
 

43 
ubidi_addPrİ”tyS¹s
(cÚ¡ 
UBiDiPrİs
 *
bdp
, cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 *
pE¼ÜCode
);

47 
U_CFUNC
 
št32_t


48 
ubidi_g‘MaxV®ue
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UPrİ”ty
 
which
);

50 
U_CAPI
 
UCh¬DœeùiÚ


51 
ubidi_g‘CÏss
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
);

53 
U_CFUNC
 
UBoŞ


54 
ubidi_isMœrÜed
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
);

56 
U_CFUNC
 
UCh¬32


57 
ubidi_g‘MœrÜ
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
);

59 
U_CFUNC
 
UBoŞ


60 
ubidi_isBidiCÚŒŞ
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
);

62 
U_CFUNC
 
UBoŞ


63 
ubidi_isJošCÚŒŞ
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
);

65 
U_CFUNC
 
UJoššgTy³


66 
ubidi_g‘JoššgTy³
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
);

68 
U_CFUNC
 
UJoššgGroup


69 
ubidi_g‘JoššgGroup
(cÚ¡ 
UBiDiPrİs
 *
bdp
, 
UCh¬32
 
c
);

73 
	#UBIDI_DATA_NAME
 "ubidi"

	)

74 
	#UBIDI_DATA_TYPE
 "icu"

	)

77 
	#UBIDI_FMT_0
 0x42

	)

78 
	#UBIDI_FMT_1
 0x69

	)

79 
	#UBIDI_FMT_2
 0x44

	)

80 
	#UBIDI_FMT_3
 0x69

	)

84 
	mUBIDI_IX_INDEX_TOP
,

85 
	mUBIDI_IX_LENGTH
,

86 
	mUBIDI_IX_TRIE_SIZE
,

87 
	mUBIDI_IX_MIRROR_LENGTH
,

89 
	mUBIDI_IX_JG_START
,

90 
	mUBIDI_IX_JG_LIMIT
,

92 
	mUBIDI_MAX_VALUES_INDEX
=15,

93 
	mUBIDI_IX_TOP
=16

100 
	mUBIDI_JT_SHIFT
=5,

104 
	mUBIDI_JOIN_CONTROL_SHIFT
=10,

105 
	mUBIDI_BIDI_CONTROL_SHIFT
=11,

107 
	mUBIDI_IS_MIRRORED_SHIFT
=12,

108 
	mUBIDI_MIRROR_DELTA_SHIFT
=13,

110 
	mUBIDI_MAX_JG_SHIFT
=16

113 
	#UBIDI_CLASS_MASK
 0x0000001f

	)

114 
	#UBIDI_JT_MASK
 0x000000e0

	)

116 
	#UBIDI_MAX_JG_MASK
 0x00ff0000

	)

118 
	#UBIDI_GET_CLASS
(
´İs
è(Õrİs)&
UBIDI_CLASS_MASK
)

	)

119 
	#UBIDI_GET_FLAG
(
´İs
, 
shiá
è((Õrİs)>>(shiá))&1)

	)

122 
	mUBIDI_ESC_MIRROR_DELTA
=-4,

123 
	mUBIDI_MIN_MIRROR_DELTA
=-3,

124 
	mUBIDI_MAX_MIRROR_DELTA
=3

131 
	mUBIDI_MIRROR_INDEX_SHIFT
=21,

132 
	mUBIDI_MAX_MIRROR_INDEX
=0x7ff

135 
	#UBIDI_GET_MIRROR_CODE_POINT
(
m
è(
UCh¬32
)((m)&0x1fffff)

	)

137 
	#UBIDI_GET_MIRROR_INDEX
(
m
è((m)>>
UBIDI_MIRROR_INDEX_SHIFT
)

	)

139 
	gU_CDECL_END


	@ubidi_props_data.c

10 cÚ¡ 
UV”siÚInfo
 
	gubidi_´İs_d©aV”siÚ
={6,0,0,0};

12 cÚ¡ 
št32_t
 
	gubidi_´İs_šdexes
[
UBIDI_IX_TOP
]={0x10,0x4fa0,0x4d98,0x1a,0x620,0x780,0,0,0,0,0,0,0,0,0,0x3800b2};

14 cÚ¡ 
ušt16_t
 
	gubidi_´İs_Œ›Index
[9924]={

638 cÚ¡ 
ušt32_t
 
	gubidi_´İs_mœrÜs
[26]={

643 cÚ¡ 
ušt8_t
 
	gubidi_´İs_jgA¼ay
[352]={

668 cÚ¡ 
UBiDiPrİs
 
	gubidi_´İs_sšgËtÚ
={

669 
NULL
,

670 
ubidi_´İs_šdexes
,

671 
ubidi_´İs_mœrÜs
,

672 
ubidi_´İs_jgA¼ay
,

674 
ubidi_´İs_Œ›Index
,

675 
ubidi_´İs_Œ›Index
+3140,

676 
NULL
,

685 
NULL
, 0, 
FALSE
, FALSE, 0, NULL

	@ubidiimp.h

17 #iâdeà
UBIDIIMP_H


18 
	#UBIDIIMP_H


	)

21 #ifdeà
U_COMMON_IMPLEMENTATION


23 
	~"unicode/uty³s.h
"

24 
	~"unicode/uch¬.h
"

25 
	~"ubidi_´İs.h
"

29 
ušt8_t
 
	tDœPrİ
;

30 
ušt32_t
 
	tFÏgs
;

37 
	mL
ğ
U_LEFT_TO_RIGHT
,

38 
	mR
ğ
U_RIGHT_TO_LEFT
,

39 
	mEN
ğ
U_EUROPEAN_NUMBER
,

40 
	mES
ğ
U_EUROPEAN_NUMBER_SEPARATOR
,

41 
	mET
ğ
U_EUROPEAN_NUMBER_TERMINATOR
,

42 
	mAN
ğ
U_ARABIC_NUMBER
,

43 
	mCS
ğ
U_COMMON_NUMBER_SEPARATOR
,

44 
	mB
ğ
U_BLOCK_SEPARATOR
,

45 
	mS
ğ
U_SEGMENT_SEPARATOR
,

46 
	mWS
ğ
U_WHITE_SPACE_NEUTRAL
,

47 
	mON
ğ
U_OTHER_NEUTRAL
,

48 
	mLRE
=
U_LEFT_TO_RIGHT_EMBEDDING
,

49 
	mLRO
=
U_LEFT_TO_RIGHT_OVERRIDE
,

50 
	mAL
ğ
U_RIGHT_TO_LEFT_ARABIC
,

51 
	mRLE
=
U_RIGHT_TO_LEFT_EMBEDDING
,

52 
	mRLO
=
U_RIGHT_TO_LEFT_OVERRIDE
,

53 
	mPDF
=
U_POP_DIRECTIONAL_FORMAT
,

54 
	mNSM
=
U_DIR_NON_SPACING_MARK
,

55 
	mBN
ğ
U_BOUNDARY_NEUTRAL
,

56 
	mdœPrİCouÁ


65 
	#DIRPROP_FLAG
(
dœ
è(1UL<<(dœ))

	)

68 
	#DIRPROP_FLAG_MULTI_RUNS
 (1UL<<31)

	)

71 
	#MASK_LTR
 (
	`DIRPROP_FLAG
(
L
)|DIRPROP_FLAG(
EN
)|DIRPROP_FLAG(
AN
)|DIRPROP_FLAG(
LRE
)|DIRPROP_FLAG(
LRO
))

	)

72 
	#MASK_RTL
 (
	`DIRPROP_FLAG
(
R
)|DIRPROP_FLAG(
AL
)|DIRPROP_FLAG(
RLE
)|DIRPROP_FLAG(
RLO
))

	)

73 
	#MASK_R_AL
 (
	`DIRPROP_FLAG
(
R
)|DIRPROP_FLAG(
AL
))

	)

76 
	#MASK_LRX
 (
	`DIRPROP_FLAG
(
LRE
)|DIRPROP_FLAG(
LRO
))

	)

77 
	#MASK_RLX
 (
	`DIRPROP_FLAG
(
RLE
)|DIRPROP_FLAG(
RLO
))

	)

78 
	#MASK_OVERRIDE
 (
	`DIRPROP_FLAG
(
LRO
)|DIRPROP_FLAG(
RLO
))

	)

80 
	#MASK_EXPLICIT
 (
MASK_LRX
|
MASK_RLX
|
	`DIRPROP_FLAG
(
PDF
))

	)

81 
	#MASK_BN_EXPLICIT
 (
	`DIRPROP_FLAG
(
BN
)|
MASK_EXPLICIT
)

	)

84 
	#MASK_B_S
 (
	`DIRPROP_FLAG
(
B
)|DIRPROP_FLAG(
S
))

	)

87 
	#MASK_WS
 (
MASK_B_S
|
	`DIRPROP_FLAG
(
WS
)|
MASK_BN_EXPLICIT
)

	)

88 
	#MASK_N
 (
	`DIRPROP_FLAG
(
ON
)|
MASK_WS
)

	)

91 
	#MASK_ET_NSM_BN
 (
	`DIRPROP_FLAG
(
ET
)|DIRPROP_FLAG(
NSM
)|
MASK_BN_EXPLICIT
)

	)

94 
	#MASK_POSSIBLE_N
 (
	`DIRPROP_FLAG
(
CS
)|DIRPROP_FLAG(
ES
)|DIRPROP_FLAG(
ET
)|
MASK_N
)

	)

101 
	#MASK_EMBEDDING
 (
	`DIRPROP_FLAG
(
NSM
)|
MASK_POSSIBLE_N
)

	)

104 
	#GET_LR_FROM_LEVEL
(
Ëv–
è((
DœPrİ
)(Öev–)&1))

	)

106 
	#IS_DEFAULT_LEVEL
(
Ëv–
è(Öev–)>=0xã)

	)

112 
	#CONTEXT_RTL
 0x80

	)

113 
	#NO_CONTEXT_RTL
(
dœ
è((dœ)&~
CONTEXT_RTL
)

	)

117 
	#DIRPROP_FLAG_NC
(
dœ
è(1UL<<(
	`NO_CONTEXT_RTL
(dœ)))

	)

119 
	#GET_PARALEVEL
(
ubidi
, 
šdex
) \

120 (
UBiDiLev–
)((
ubidi
)->
deçuÉP¬aLev–
 ? (ubidi)->
dœPrİs
[
šdex
]>>7 \

121 : (
ubidi
)->
·¿Lev–
)

	)

124 
št32_t
 
	tP¬a
;

126 
	#CR
 0x000D

	)

127 
	#LF
 0x000A

	)

131 
	mLRM_BEFORE
=1,

132 
	mLRM_AFTER
=2,

133 
	mRLM_BEFORE
=4,

134 
	mRLM_AFTER
=8

137 
	sRun
 {

138 
št32_t
 
	mlogiÿlS¹
,

139 
	mvisu®Lim™
,

140 
	mš£¹Remove
;

142 } 
	tRun
;

145 
	#INDEX_ODD_BIT
 (1UL<<31)

	)

147 
	#MAKE_INDEX_ODD_PAIR
(
šdex
, 
Ëv–
è((šdex)|((
št32_t
)Öev–)<<31))

	)

148 
	#ADD_ODD_BIT_FROM_LEVEL
(
x
, 
Ëv–
è((x)|=((
št32_t
)Öev–)<<31))

	)

149 
	#REMOVE_ODD_BIT
(
x
è((x)&=~
INDEX_ODD_BIT
)

	)

151 
	#GET_INDEX
(
x
è((x)&~
INDEX_ODD_BIT
)

	)

152 
	#GET_ODD_BIT
(
x
è((
ušt32_t
)(x)>>31)

	)

153 
	#IS_ODD_RUN
(
x
è((
UBoŞ
)(((x)&
INDEX_ODD_BIT
)!=0))

	)

154 
	#IS_EVEN_RUN
(
x
è((
UBoŞ
)(((x)&
INDEX_ODD_BIT
)==0))

	)

156 
U_CFUNC
 
UBoŞ


157 
ubidi_g‘Runs
(
UBiDi
 *
pBiDi
, 
UE¼ÜCode
 *
pE¼ÜCode
);

161 
	mZWNJ_CHAR
=0x200c,

162 
	mZWJ_CHAR
,

163 
	mLRM_CHAR
,

164 
	mRLM_CHAR
,

165 
	mLRE_CHAR
=0x202a,

166 
	mRLE_CHAR
,

167 
	mPDF_CHAR
,

168 
	mLRO_CHAR
,

169 
	mRLO_CHAR


172 
	#IS_BIDI_CONTROL_CHAR
(
c
è(((
ušt32_t
)(c)&0xfffffffc)==
ZWNJ_CHAR
 || (ušt32_t)((c)-
LRE_CHAR
)<5)

	)

176 
	sPošt
 {

177 
št32_t
 
	mpos
;

178 
št32_t
 
	mæag
;

179 } 
	tPošt
;

181 
	sIn£¹Pošts
 {

182 
št32_t
 
	mÿ·c™y
;

183 
št32_t
 
	msize
;

184 
št32_t
 
	mcÚfœmed
;

185 
UE¼ÜCode
 
	m”rÜCode
;

186 
Pošt
 *
	mpošts
;

187 } 
	tIn£¹Pošts
;

192 
	sUBiDi
 {

197 cÚ¡ 
UBiDi
 * 
	mpP¬aBiDi
;

199 cÚ¡ 
UBiDiPrİs
 *
	mbdp
;

202 cÚ¡ 
UCh¬
 *
	m‹xt
;

205 
št32_t
 
	mÜigš®L’gth
;

212 
št32_t
 
	mËngth
;

218 
št32_t
 
	m»suÉL’gth
;

221 
št32_t
 
	mdœPrİsSize
, 
	mËv–sSize
, 
	m·¿sSize
, 
	mrunsSize
;

224 
DœPrİ
 *
	mdœPrİsMemÜy
;

225 
UBiDiLev–
 *
	mËv–sMemÜy
;

226 
P¬a
 *
	m·¿sMemÜy
;

227 
Run
 *
	mrunsMemÜy
;

230 
UBoŞ
 
	mmayAÎoÿ‹Text
, 
	mmayAÎoÿ‹Runs
;

233 cÚ¡ 
DœPrİ
 *
	mdœPrİs
;

234 
UBiDiLev–
 *
	mËv–s
;

237 
UBoŞ
 
	misInv”£
;

240 
UBiDiReÜd”šgMode
 
	m»Üd”šgMode
;

246 
	#UBIDI_REORDER_LAST_LOGICAL_TO_VISUAL
 
UBIDI_REORDER_NUMBERS_SPECIAL


	)

249 
ušt32_t
 
	m»Üd”šgO±iÚs
;

252 
UBoŞ
 
	mÜd”P¬ag¿phsLTR
;

255 
UBiDiLev–
 
	m·¿Lev–
;

258 
UBiDiLev–
 
	mdeçuÉP¬aLev–
;

261 cÚ¡ 
ImpTabPaœ
 * 
	mpImpTabPaœ
;

264 
UBiDiDœeùiÚ
 
	mdœeùiÚ
;

267 
FÏgs
 
	mæags
;

270 
št32_t
 
	mÏ¡A¿bicPos
;

274 
št32_t
 
	mŒašgWSS¹
;

277 
št32_t
 
	m·¿CouÁ
;

278 
P¬a
 *
	m·¿s
;

282 
P¬a
 
	msim¶eP¬as
[1];

285 
št32_t
 
	mrunCouÁ
;

286 
Run
 *
	mruns
;

289 
Run
 
	msim¶eRuns
[1];

292 
In£¹Pošts
 
	mš£¹Pošts
;

295 
št32_t
 
	mcÚŒŞCouÁ
;

298 
UBiDiCÏssC®lback
 *
	mâCÏssC®lback
;

299 cÚ¡ *
	mcoCÏssC®lback
;

302 
	#IS_VALID_PARA
(
x
è((xè&& ((x)->
pP¬aBiDi
==(x)))

	)

303 
	#IS_VALID_PARA_OR_LINE
(
x
è((xè&& ((x)->
pP¬aBiDi
==(xè|| (((x)->pP¬aBiDiè&& (x)->pP¬aBiDi->pP¬aBiDi==(x)->pP¬aBiDi)))

	)

306 
DœPrİ
 *
	mdœPrİsMemÜy
;

307 
UBiDiLev–
 *
	mËv–sMemÜy
;

308 
P¬a
 *
	m·¿sMemÜy
;

309 
Run
 *
	mrunsMemÜy
;

310 } 
	tBidiMemÜyFÜAÎoÿtiÚ
;

313 
	#RETURN_IF_NULL_OR_FAILING_ERRCODE
(
pE¼code
, 
»tv®ue
) \

314 if((
pE¼code
)==
NULL
 || 
	`U_FAILURE
(*pE¼code)è 
»tv®ue


	)

315 
	#RETURN_IF_NOT_VALID_PARA
(
bidi
, 
”rcode
, 
»tv®ue
) \

316 if(!
	`IS_VALID_PARA
(
bidi
)) { \

317 
”rcode
=
U_INVALID_STATE_ERROR
; \

318  
»tv®ue
; \

319 }

	)

320 
	#RETURN_IF_NOT_VALID_PARA_OR_LINE
(
bidi
, 
”rcode
, 
»tv®ue
) \

321 if(!
	`IS_VALID_PARA_OR_LINE
(
bidi
)) { \

322 
”rcode
=
U_INVALID_STATE_ERROR
; \

323  
»tv®ue
; \

324 }

	)

325 
	#RETURN_IF_BAD_RANGE
(
¬g
, 
¡¬t
, 
lim™
, 
”rcode
, 
»tv®ue
) \

326 if((
¬g
)<(
¡¬t
è|| (¬g)>=(
lim™
)) { \

327 (
”rcode
)=
U_ILLEGAL_ARGUMENT_ERROR
; \

328  
»tv®ue
; \

329 }

	)

331 
	#RETURN_VOID_IF_NULL_OR_FAILING_ERRCODE
(
pE¼code
) \

332 if((
pE¼code
)==
NULL
 || 
	`U_FAILURE
(*pE¼code)è

	)

333 
	#RETURN_VOID_IF_NOT_VALID_PARA
(
bidi
, 
”rcode
) \

334 if(!
	`IS_VALID_PARA
(
bidi
)) { \

335 
”rcode
=
U_INVALID_STATE_ERROR
; \

337 }

	)

338 
	#RETURN_VOID_IF_NOT_VALID_PARA_OR_LINE
(
bidi
, 
”rcode
) \

339 if(!
	`IS_VALID_PARA_OR_LINE
(
bidi
)) { \

340 
”rcode
=
U_INVALID_STATE_ERROR
; \

342 }

	)

343 
	#RETURN_VOID_IF_BAD_RANGE
(
¬g
, 
¡¬t
, 
lim™
, 
”rcode
) \

344 if((
¬g
)<(
¡¬t
è|| (¬g)>=(
lim™
)) { \

345 (
”rcode
)=
U_ILLEGAL_ARGUMENT_ERROR
; \

347 }

	)

350 
U_CFUNC
 
UBoŞ


351 
ubidi_g‘MemÜy
(
BidiMemÜyFÜAÎoÿtiÚ
 *
pMemÜy
, 
št32_t
 *
pSize
, 
UBoŞ
 
mayAÎoÿ‹
, iÁ32_ˆ
sizeN“ded
);

354 
	#g‘DœPrİsMemÜy
(
pBiDi
, 
Ëngth
) \

355 
	`ubidi_g‘MemÜy
((
BidiMemÜyFÜAÎoÿtiÚ
 *)&(
pBiDi
)->
dœPrİsMemÜy
, &ÕBiDi)->
dœPrİsSize
, \

356 (
pBiDi
)->
mayAÎoÿ‹Text
, (
Ëngth
))

	)

358 
	#g‘Lev–sMemÜy
(
pBiDi
, 
Ëngth
) \

359 
	`ubidi_g‘MemÜy
((
BidiMemÜyFÜAÎoÿtiÚ
 *)&(
pBiDi
)->
Ëv–sMemÜy
, &ÕBiDi)->
Ëv–sSize
, \

360 (
pBiDi
)->
mayAÎoÿ‹Text
, (
Ëngth
))

	)

362 
	#g‘RunsMemÜy
(
pBiDi
, 
Ëngth
) \

363 
	`ubidi_g‘MemÜy
((
BidiMemÜyFÜAÎoÿtiÚ
 *)&(
pBiDi
)->
runsMemÜy
, &ÕBiDi)->
runsSize
, \

364 (
pBiDi
)->
mayAÎoÿ‹Runs
, (
Ëngth
)*(
Run
))

	)

367 
	#g‘In™ŸlDœPrİsMemÜy
(
pBiDi
, 
Ëngth
) \

368 
	`ubidi_g‘MemÜy
((
BidiMemÜyFÜAÎoÿtiÚ
 *)&(
pBiDi
)->
dœPrİsMemÜy
, &ÕBiDi)->
dœPrİsSize
, \

369 
TRUE
, (
Ëngth
))

	)

371 
	#g‘In™ŸlLev–sMemÜy
(
pBiDi
, 
Ëngth
) \

372 
	`ubidi_g‘MemÜy
((
BidiMemÜyFÜAÎoÿtiÚ
 *)&(
pBiDi
)->
Ëv–sMemÜy
, &ÕBiDi)->
Ëv–sSize
, \

373 
TRUE
, (
Ëngth
))

	)

375 
	#g‘In™ŸlP¬asMemÜy
(
pBiDi
, 
Ëngth
) \

376 
	`ubidi_g‘MemÜy
((
BidiMemÜyFÜAÎoÿtiÚ
 *)&(
pBiDi
)->
·¿sMemÜy
, &ÕBiDi)->
·¿sSize
, \

377 
TRUE
, (
Ëngth
)*(
P¬a
))

	)

379 
	#g‘In™ŸlRunsMemÜy
(
pBiDi
, 
Ëngth
) \

380 
	`ubidi_g‘MemÜy
((
BidiMemÜyFÜAÎoÿtiÚ
 *)&(
pBiDi
)->
runsMemÜy
, &ÕBiDi)->
runsSize
, \

381 
TRUE
, (
Ëngth
)*(
Run
))

	)

	@ubidiln.c

17 
	~"cmemÜy.h
"

18 
	~"unicode/uty³s.h
"

19 
	~"unicode/u¡ršg.h
"

20 
	~"unicode/uch¬.h
"

21 
	~"unicode/ubidi.h
"

22 
	~"ubidiimp.h
"

23 
	~"uas£¹.h
"

90 
	$£tT¿šgWSS¹
(
UBiDi
 *
pBiDi
) {

93 cÚ¡ 
DœPrİ
 *
dœPrİs
=
pBiDi
->dirProps;

94 
UBiDiLev–
 *
Ëv–s
=
pBiDi
->levels;

95 
št32_t
 
¡¬t
=
pBiDi
->
Ëngth
;

96 
UBiDiLev–
 
·¿Lev–
=
pBiDi
->paraLevel;

104 if(
	`NO_CONTEXT_RTL
(
dœPrİs
[
¡¬t
-1])==
B
) {

105 
pBiDi
->
ŒašgWSS¹
=
¡¬t
;

109 
¡¬t
>0 && 
	`DIRPROP_FLAG_NC
(
dœPrİs
[¡¬t-1])&
MASK_WS
) {

110 --
¡¬t
;

114 
¡¬t
>0 && 
Ëv–s
[¡¬t-1]==
·¿Lev–
) {

115 --
¡¬t
;

118 
pBiDi
->
ŒašgWSS¹
=
¡¬t
;

119 
	}
}

123 
U_CAPI
 
U_EXPORT2


124 
	$ubidi_£tLše
(cÚ¡ 
UBiDi
 *
pP¬aBiDi
,

125 
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
,

126 
UBiDi
 *
pLšeBiDi
,

127 
UE¼ÜCode
 *
pE¼ÜCode
) {

128 
št32_t
 
Ëngth
;

131 
	`RETURN_VOID_IF_NULL_OR_FAILING_ERRCODE
(
pE¼ÜCode
);

132 
	`RETURN_VOID_IF_NOT_VALID_PARA
(
pP¬aBiDi
, *
pE¼ÜCode
);

133 
	`RETURN_VOID_IF_BAD_RANGE
(
¡¬t
, 0, 
lim™
, *
pE¼ÜCode
);

134 
	`RETURN_VOID_IF_BAD_RANGE
(
lim™
, 0, 
pP¬aBiDi
->
Ëngth
+1, *
pE¼ÜCode
);

135 if(
pLšeBiDi
==
NULL
) {

136 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

139 if(
	`ubidi_g‘P¬ag¿ph
(
pP¬aBiDi
, 
¡¬t
, 
NULL
, NULL, NULL, 
pE¼ÜCode
) !=

140 
	`ubidi_g‘P¬ag¿ph
(
pP¬aBiDi
, 
lim™
-1, 
NULL
, NULL, NULL, 
pE¼ÜCode
)) {

142 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

147 
pLšeBiDi
->
pP¬aBiDi
=
NULL
;

148 
pLšeBiDi
->
‹xt
=
pP¬aBiDi
->‹xt+
¡¬t
;

149 
Ëngth
=
pLšeBiDi
->Ëngth=
lim™
-
¡¬t
;

150 
pLšeBiDi
->
»suÉL’gth
õLšeBiDi->
Üigš®L’gth
=
Ëngth
;

151 
pLšeBiDi
->
·¿Lev–
=
	`GET_PARALEVEL
(
pP¬aBiDi
, 
¡¬t
);

152 
pLšeBiDi
->
·¿CouÁ
=
pP¬aBiDi
->paraCount;

153 
pLšeBiDi
->
runs
=
NULL
;

154 
pLšeBiDi
->
æags
=0;

155 
pLšeBiDi
->
»Üd”šgMode
=
pP¬aBiDi
->reorderingMode;

156 
pLšeBiDi
->
»Üd”šgO±iÚs
=
pP¬aBiDi
->reorderingOptions;

157 
pLšeBiDi
->
cÚŒŞCouÁ
=0;

158 if(
pP¬aBiDi
->
cÚŒŞCouÁ
>0) {

159 
št32_t
 
j
;

160 
j
=
¡¬t
; j<
lim™
; j++) {

161 if(
	`IS_BIDI_CONTROL_CHAR
(
pP¬aBiDi
->
‹xt
[
j
])) {

162 
pLšeBiDi
->
cÚŒŞCouÁ
++;

165 
pLšeBiDi
->
»suÉL’gth
-õLšeBiDi->
cÚŒŞCouÁ
;

168 
pLšeBiDi
->
dœPrİs
=
pP¬aBiDi
->dœPrİs+
¡¬t
;

169 
pLšeBiDi
->
Ëv–s
=
pP¬aBiDi
->Ëv–s+
¡¬t
;

170 
pLšeBiDi
->
runCouÁ
=-1;

172 if(
pP¬aBiDi
->
dœeùiÚ
!=
UBIDI_MIXED
) {

174 
pLšeBiDi
->
dœeùiÚ
=
pP¬aBiDi
->direction;

181 if(
pP¬aBiDi
->
ŒašgWSS¹
<=
¡¬t
) {

182 
pLšeBiDi
->
ŒašgWSS¹
=0;

183 } if(
pP¬aBiDi
->
ŒašgWSS¹
<
lim™
) {

184 
pLšeBiDi
->
ŒašgWSS¹
=
pP¬aBiDi
->ŒašgWSS¹-
¡¬t
;

186 
pLšeBiDi
->
ŒašgWSS¹
=
Ëngth
;

189 cÚ¡ 
UBiDiLev–
 *
Ëv–s
=
pLšeBiDi
->levels;

190 
št32_t
 
i
, 
ŒašgWSS¹
;

191 
UBiDiLev–
 
Ëv–
;

193 
	`£tT¿šgWSS¹
(
pLšeBiDi
);

194 
ŒašgWSS¹
=
pLšeBiDi
->trailingWSStart;

197 if(
ŒašgWSS¹
==0) {

199 
pLšeBiDi
->
dœeùiÚ
=(
UBiDiDœeùiÚ
)ÕLšeBiDi->
·¿Lev–
&1);

202 
Ëv–
=(
UBiDiLev–
)(
Ëv–s
[0]&1);

205 if(
ŒašgWSS¹
<
Ëngth
 && (
pLšeBiDi
->
·¿Lev–
&1)!=
Ëv–
) {

207 
pLšeBiDi
->
dœeùiÚ
=
UBIDI_MIXED
;

210 
i
=1;

212 if(
i
==
ŒašgWSS¹
) {

214 
pLšeBiDi
->
dœeùiÚ
=(
UBiDiDœeùiÚ
)
Ëv–
;

216 } if((
Ëv–s
[
i
]&1)!=
Ëv–
) {

217 
pLšeBiDi
->
dœeùiÚ
=
UBIDI_MIXED
;

220 ++
i
;

225 
pLšeBiDi
->
dœeùiÚ
) {

226 
UBIDI_LTR
:

228 
pLšeBiDi
->
·¿Lev–
=(
UBiDiLev–
)((pLineBiDi->paraLevel+1)&~1);

231 
pLšeBiDi
->
ŒašgWSS¹
=0;

233 
UBIDI_RTL
:

235 
pLšeBiDi
->
·¿Lev–
|=1;

238 
pLšeBiDi
->
ŒašgWSS¹
=0;

244 
pLšeBiDi
->
pP¬aBiDi
=pParaBiDi;

246 
	}
}

248 
U_CAPI
 
UBiDiLev–
 
U_EXPORT2


249 
	$ubidi_g‘Lev–At
(cÚ¡ 
UBiDi
 *
pBiDi
, 
št32_t
 
ch¬Index
) {

251 if(!
	`IS_VALID_PARA_OR_LINE
(
pBiDi
è|| 
ch¬Index
<0 ||…BiDi->
Ëngth
<=charIndex) {

253 } if(
pBiDi
->
dœeùiÚ
!=
UBIDI_MIXED
 || 
ch¬Index
>õBiDi->
ŒašgWSS¹
) {

254  
	`GET_PARALEVEL
(
pBiDi
, 
ch¬Index
);

256  
pBiDi
->
Ëv–s
[
ch¬Index
];

258 
	}
}

260 
U_CAPI
 cÚ¡ 
UBiDiLev–
 * 
U_EXPORT2


261 
	$ubidi_g‘Lev–s
(
UBiDi
 *
pBiDi
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

262 
št32_t
 
¡¬t
, 
Ëngth
;

264 
	`RETURN_IF_NULL_OR_FAILING_ERRCODE
(
pE¼ÜCode
, 
NULL
);

265 
	`RETURN_IF_NOT_VALID_PARA_OR_LINE
(
pBiDi
, *
pE¼ÜCode
, 
NULL
);

266 if((
Ëngth
=
pBiDi
->length)<=0) {

267 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

268  
NULL
;

270 if((
¡¬t
=
pBiDi
->
ŒašgWSS¹
)==
Ëngth
) {

272  
pBiDi
->
Ëv–s
;

282 if(
	`g‘Lev–sMemÜy
(
pBiDi
, 
Ëngth
)) {

283 
UBiDiLev–
 *
Ëv–s
=
pBiDi
->
Ëv–sMemÜy
;

285 if(
¡¬t
>0 && 
Ëv–s
!=
pBiDi
->levels) {

286 
	`u´v_memıy
(
Ëv–s
, 
pBiDi
->Ëv–s, 
¡¬t
);

290 
	`u´v_mem£t
(
Ëv–s
+
¡¬t
, 
pBiDi
->
·¿Lev–
, 
Ëngth
-start);

293 
pBiDi
->
ŒašgWSS¹
=
Ëngth
;

294  
pBiDi
->
Ëv–s
=levels;

297 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

298  
NULL
;

300 
	}
}

302 
U_CAPI
 
U_EXPORT2


303 
	$ubidi_g‘LogiÿlRun
(cÚ¡ 
UBiDi
 *
pBiDi
, 
št32_t
 
logiÿlPos™iÚ
,

304 
št32_t
 *
pLogiÿlLim™
, 
UBiDiLev–
 *
pLev–
) {

305 
UE¼ÜCode
 
”rÜCode
;

306 
št32_t
 
runCouÁ
, 
visu®S¹
, 
logiÿlLim™
, 
logiÿlFœ¡
, 
i
;

307 
Run
 
iRun
;

309 
”rÜCode
=
U_ZERO_ERROR
;

310 
	`RETURN_VOID_IF_BAD_RANGE
(
logiÿlPos™iÚ
, 0, 
pBiDi
->
Ëngth
, 
”rÜCode
);

312 
runCouÁ
=
	`ubidi_couÁRuns
((
UBiDi
 *)
pBiDi
, &
”rÜCode
);

313 if(
	`U_FAILURE
(
”rÜCode
)) {

319 
visu®S¹
=
logiÿlLim™
=0;

320 
iRun
=
pBiDi
->
runs
[0];

322 
i
=0; i<
runCouÁ
; i++) {

323 
iRun
 = 
pBiDi
->
runs
[
i
];

324 
logiÿlFœ¡
=
	`GET_INDEX
(
iRun
.
logiÿlS¹
);

325 
logiÿlLim™
=
logiÿlFœ¡
+
iRun
.
visu®Lim™
-
visu®S¹
;

326 if((
logiÿlPos™iÚ
>=
logiÿlFœ¡
) &&

327 (
logiÿlPos™iÚ
<
logiÿlLim™
)) {

330 
visu®S¹
 = 
iRun
.
visu®Lim™
;

332 if(
pLogiÿlLim™
) {

333 *
pLogiÿlLim™
=
logiÿlLim™
;

335 if(
pLev–
) {

336 if(
pBiDi
->
»Üd”šgMode
==
UBIDI_REORDER_RUNS_ONLY
) {

337 *
pLev–
=(
UBiDiLev–
)
	`GET_ODD_BIT
(
iRun
.
logiÿlS¹
);

339 if(
pBiDi
->
dœeùiÚ
!=
UBIDI_MIXED
 || 
logiÿlPos™iÚ
>õBiDi->
ŒašgWSS¹
) {

340 *
pLev–
=
	`GET_PARALEVEL
(
pBiDi
, 
logiÿlPos™iÚ
);

342 *
pLev–
=
pBiDi
->
Ëv–s
[
logiÿlPos™iÚ
];

345 
	}
}

349 
U_CAPI
 
št32_t
 
U_EXPORT2


350 
	$ubidi_couÁRuns
(
UBiDi
 *
pBiDi
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

351 
	`RETURN_IF_NULL_OR_FAILING_ERRCODE
(
pE¼ÜCode
, -1);

352 
	`RETURN_IF_NOT_VALID_PARA_OR_LINE
(
pBiDi
, *
pE¼ÜCode
, -1);

353 
	`ubidi_g‘Runs
(
pBiDi
, 
pE¼ÜCode
);

354 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

357  
pBiDi
->
runCouÁ
;

358 
	}
}

360 
U_CAPI
 
UBiDiDœeùiÚ
 
U_EXPORT2


361 
	$ubidi_g‘Visu®Run
(
UBiDi
 *
pBiDi
, 
št32_t
 
runIndex
,

362 
št32_t
 *
pLogiÿlS¹
, iÁ32_ˆ*
pL’gth
)

364 
št32_t
 
¡¬t
;

365 
UE¼ÜCode
 
”rÜCode
 = 
U_ZERO_ERROR
;

366 
	`RETURN_IF_NOT_VALID_PARA_OR_LINE
(
pBiDi
, 
”rÜCode
, 
UBIDI_LTR
);

367 
	`ubidi_g‘Runs
(
pBiDi
, &
”rÜCode
);

368 if(
	`U_FAILURE
(
”rÜCode
)) {

369  
UBIDI_LTR
;

371 
	`RETURN_IF_BAD_RANGE
(
runIndex
, 0, 
pBiDi
->
runCouÁ
, 
”rÜCode
, 
UBIDI_LTR
);

373 
¡¬t
=
pBiDi
->
runs
[
runIndex
].
logiÿlS¹
;

374 if(
pLogiÿlS¹
!=
NULL
) {

375 *
pLogiÿlS¹
=
	`GET_INDEX
(
¡¬t
);

377 if(
pL’gth
!=
NULL
) {

378 if(
runIndex
>0) {

379 *
pL’gth
=
pBiDi
->
runs
[
runIndex
].
visu®Lim™
-

380 
pBiDi
->
runs
[
runIndex
-1].
visu®Lim™
;

382 *
pL’gth
=
pBiDi
->
runs
[0].
visu®Lim™
;

385  (
UBiDiDœeùiÚ
)
	`GET_ODD_BIT
(
¡¬t
);

386 
	}
}

390 
	$g‘SšgËRun
(
UBiDi
 *
pBiDi
, 
UBiDiLev–
 
Ëv–
) {

392 
pBiDi
->
runs
õBiDi->
sim¶eRuns
;

393 
pBiDi
->
runCouÁ
=1;

396 
pBiDi
->
runs
[0].
logiÿlS¹
=
	`MAKE_INDEX_ODD_PAIR
(0, 
Ëv–
);

397 
pBiDi
->
runs
[0].
visu®Lim™
õBiDi->
Ëngth
;

398 
pBiDi
->
runs
[0].
š£¹Remove
=0;

399 
	}
}

435 
	$»Üd”Lše
(
UBiDi
 *
pBiDi
, 
UBiDiLev–
 
mšLev–
, UBiDiLev– 
maxLev–
) {

436 
Run
 *
runs
, 
‹mpRun
;

437 
UBiDiLev–
 *
Ëv–s
;

438 
št32_t
 
fœ¡Run
, 
’dRun
, 
lim™Run
, 
runCouÁ
;

441 if(
maxLev–
<=(
mšLev–
|1)) {

450 ++
mšLev–
;

452 
runs
=
pBiDi
->runs;

453 
Ëv–s
=
pBiDi
->levels;

454 
runCouÁ
=
pBiDi
->runCount;

457 if(
pBiDi
->
ŒašgWSS¹
<pBiDi->
Ëngth
) {

458 --
runCouÁ
;

461 --
maxLev–
>=
mšLev–
) {

462 
fœ¡Run
=0;

468 
fœ¡Run
<
runCouÁ
 && 
Ëv–s
[
runs
[fœ¡Run].
logiÿlS¹
]<
maxLev–
) {

469 ++
fœ¡Run
;

471 if(
fœ¡Run
>=
runCouÁ
) {

476 
lim™Run
=
fœ¡Run
; ++lim™Run<
runCouÁ
 && 
Ëv–s
[
runs
[lim™Run].
logiÿlS¹
]>=
maxLev–
;) {}

479 
’dRun
=
lim™Run
-1;

480 
fœ¡Run
<
’dRun
) {

481 
‹mpRun
 = 
runs
[
fœ¡Run
];

482 
runs
[
fœ¡Run
]ôuns[
’dRun
];

483 
runs
[
’dRun
]=
‹mpRun
;

484 ++
fœ¡Run
;

485 --
’dRun
;

488 if(
lim™Run
==
runCouÁ
) {

491 
fœ¡Run
=
lim™Run
+1;

497 if(!(
mšLev–
&1)) {

498 
fœ¡Run
=0;

501 if(
pBiDi
->
ŒašgWSS¹
=õBiDi->
Ëngth
) {

502 --
runCouÁ
;

506 
fœ¡Run
<
runCouÁ
) {

507 
‹mpRun
=
runs
[
fœ¡Run
];

508 
runs
[
fœ¡Run
]ôuns[
runCouÁ
];

509 
runs
[
runCouÁ
]=
‹mpRun
;

510 ++
fœ¡Run
;

511 --
runCouÁ
;

514 
	}
}

518 
št32_t
 
	$g‘RunFromLogiÿlIndex
(
UBiDi
 *
pBiDi
, 
št32_t
 
logiÿlIndex
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

519 
Run
 *
runs
=
pBiDi
->runs;

520 
št32_t
 
runCouÁ
=
pBiDi
->runCouÁ, 
visu®S¹
=0, 
i
, 
Ëngth
, 
logiÿlS¹
;

522 
i
=0; i<
runCouÁ
; i++) {

523 
Ëngth
=
runs
[
i
].
visu®Lim™
-
visu®S¹
;

524 
logiÿlS¹
=
	`GET_INDEX
(
runs
[
i
].logicalStart);

525 if((
logiÿlIndex
>=
logiÿlS¹
è&& (logiÿlIndex<ÖogiÿlS¹+
Ëngth
))) {

526  
i
;

528 
visu®S¹
+=
Ëngth
;

531 
	`U_ASSERT
(
FALSE
);

532 *
pE¼ÜCode
 = 
U_INVALID_STATE_ERROR
;

534 
	}
}

547 
U_CFUNC
 
UBoŞ


548 
	$ubidi_g‘Runs
(
UBiDi
 *
pBiDi
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

553 ià(
pBiDi
->
runCouÁ
>=0) {

554  
TRUE
;

557 if(
pBiDi
->
dœeùiÚ
!=
UBIDI_MIXED
) {

560 
	`g‘SšgËRun
(
pBiDi
,…BiDi->
·¿Lev–
);

563 
št32_t
 
Ëngth
=
pBiDi
->Ëngth, 
lim™
;

564 
UBiDiLev–
 *
Ëv–s
=
pBiDi
->levels;

565 
št32_t
 
i
, 
runCouÁ
;

566 
UBiDiLev–
 
Ëv–
=
UBIDI_DEFAULT_LTR
;

578 
lim™
=
pBiDi
->
ŒašgWSS¹
;

580 
runCouÁ
=0;

581 
i
=0; i<
lim™
; ++i) {

583 if(
Ëv–s
[
i
]!=
Ëv–
) {

584 ++
runCouÁ
;

585 
Ëv–
=
Ëv–s
[
i
];

593 if(
runCouÁ
==1 && 
lim™
==
Ëngth
) {

595 
	`g‘SšgËRun
(
pBiDi
, 
Ëv–s
[0]);

598 
Run
 *
runs
;

599 
št32_t
 
runIndex
, 
¡¬t
;

600 
UBiDiLev–
 
mšLev–
=
UBIDI_MAX_EXPLICIT_LEVEL
+1, 
maxLev–
=0;

603 if(
lim™
<
Ëngth
) {

604 ++
runCouÁ
;

608 if(
	`g‘RunsMemÜy
(
pBiDi
, 
runCouÁ
)) {

609 
runs
=
pBiDi
->
runsMemÜy
;

611  
FALSE
;

620 
runIndex
=0;

623 
i
=0;

626 
¡¬t
=
i
;

627 
Ëv–
=
Ëv–s
[
i
];

628 if(
Ëv–
<
mšLev–
) {

629 
mšLev–
=
Ëv–
;

631 if(
Ëv–
>
maxLev–
) {

632 
maxLev–
=
Ëv–
;

636 ++
i
<
lim™
 && 
Ëv–s
[i]==
Ëv–
) {}

639 
runs
[
runIndex
].
logiÿlS¹
=
¡¬t
;

640 
runs
[
runIndex
].
visu®Lim™
=
i
-
¡¬t
;

641 
runs
[
runIndex
].
š£¹Remove
=0;

642 ++
runIndex
;

643 } 
i
<
lim™
);

645 if(
lim™
<
Ëngth
) {

647 
runs
[
runIndex
].
logiÿlS¹
=
lim™
;

648 
runs
[
runIndex
].
visu®Lim™
=
Ëngth
-
lim™
;

651 if(
pBiDi
->
·¿Lev–
<
mšLev–
) {

652 
mšLev–
=
pBiDi
->
·¿Lev–
;

657 
pBiDi
->
runs
=runs;

658 
pBiDi
->
runCouÁ
=runCount;

660 
	`»Üd”Lše
(
pBiDi
, 
mšLev–
, 
maxLev–
);

664 
lim™
=0;

665 
i
=0; i<
runCouÁ
; ++i) {

666 
	`ADD_ODD_BIT_FROM_LEVEL
(
runs
[
i
].
logiÿlS¹
, 
Ëv–s
[runs[i].logicalStart]);

667 
lim™
+=
runs
[
i
].
visu®Lim™
;

668 
runs
[
i
].
visu®Lim™
=
lim™
;

675 if(
runIndex
<
runCouÁ
) {

676 
št32_t
 
ŒašgRun
 = ((
pBiDi
->
·¿Lev–
 & 1è!ğ0)? 0 : 
runIndex
;

678 
	`ADD_ODD_BIT_FROM_LEVEL
(
runs
[
ŒašgRun
].
logiÿlS¹
, 
pBiDi
->
·¿Lev–
);

684 if(
pBiDi
->
š£¹Pošts
.
size
>0) {

685 
Pošt
 *
pošt
, *
¡¬t
=
pBiDi
->
š£¹Pošts
.
pošts
,

686 *
lim™
=
¡¬t
+
pBiDi
->
š£¹Pošts
.
size
;

687 
št32_t
 
runIndex
;

688 
pošt
=
¡¬t
;…ošt<
lim™
;…oint++) {

689 
runIndex
=
	`g‘RunFromLogiÿlIndex
(
pBiDi
, 
pošt
->
pos
, 
pE¼ÜCode
);

690 
pBiDi
->
runs
[
runIndex
].
š£¹Remove
|=
pošt
->
æag
;

695 if(
pBiDi
->
cÚŒŞCouÁ
>0) {

696 
št32_t
 
runIndex
;

697 cÚ¡ 
UCh¬
 *
¡¬t
=
pBiDi
->
‹xt
, *
lim™
=¡¬t+pBiDi->
Ëngth
, *
pu
;

698 
pu
=
¡¬t
;…u<
lim™
;…u++) {

699 if(
	`IS_BIDI_CONTROL_CHAR
(*
pu
)) {

700 
runIndex
=
	`g‘RunFromLogiÿlIndex
(
pBiDi
, (
št32_t
)(
pu
-
¡¬t
), 
pE¼ÜCode
);

701 
pBiDi
->
runs
[
runIndex
].
š£¹Remove
--;

706  
TRUE
;

707 
	}
}

709 
UBoŞ


710 
	$´•¬eReÜd”
(cÚ¡ 
UBiDiLev–
 *
Ëv–s
, 
št32_t
 
Ëngth
,

711 
št32_t
 *
šdexM­
,

712 
UBiDiLev–
 *
pMšLev–
, UBiDiLev– *
pMaxLev–
) {

713 
št32_t
 
¡¬t
;

714 
UBiDiLev–
 
Ëv–
, 
mšLev–
, 
maxLev–
;

716 if(
Ëv–s
==
NULL
 || 
Ëngth
<=0) {

717  
FALSE
;

721 
mšLev–
=
UBIDI_MAX_EXPLICIT_LEVEL
+1;

722 
maxLev–
=0;

723 
¡¬t
=
Ëngth
; start>0;) {

724 
Ëv–
=
Ëv–s
[--
¡¬t
];

725 if(
Ëv–
>
UBIDI_MAX_EXPLICIT_LEVEL
+1) {

726  
FALSE
;

728 if(
Ëv–
<
mšLev–
) {

729 
mšLev–
=
Ëv–
;

731 if(
Ëv–
>
maxLev–
) {

732 
maxLev–
=
Ëv–
;

735 *
pMšLev–
=
mšLev–
;

736 *
pMaxLev–
=
maxLev–
;

739 
¡¬t
=
Ëngth
; start>0;) {

740 --
¡¬t
;

741 
šdexM­
[
¡¬t
]=start;

744  
TRUE
;

745 
	}
}

749 
U_CAPI
 
U_EXPORT2


750 
	$ubidi_»Üd”Logiÿl
(cÚ¡ 
UBiDiLev–
 *
Ëv–s
, 
št32_t
 
Ëngth
, iÁ32_ˆ*
šdexM­
) {

751 
št32_t
 
¡¬t
, 
lim™
, 
sumOfSosEos
;

752 
UBiDiLev–
 
mšLev–
 = 0, 
maxLev–
 = 0;

754 if(
šdexM­
==
NULL
 || !
	`´•¬eReÜd”
(
Ëv–s
, 
Ëngth
, indexM­, &
mšLev–
, &
maxLev–
)) {

759 if(
mšLev–
==
maxLev–
 && (minLevel&1)==0) {

764 
mšLev–
|=1;

768 
¡¬t
=0;

774 
¡¬t
<
Ëngth
 && 
Ëv–s
[¡¬t]<
maxLev–
) {

775 ++
¡¬t
;

777 if(
¡¬t
>=
Ëngth
) {

782 
lim™
=
¡¬t
; ++lim™<
Ëngth
 && 
Ëv–s
[lim™]>=
maxLev–
;) {}

795 
sumOfSosEos
=
¡¬t
+
lim™
-1;

799 
šdexM­
[
¡¬t
]=
sumOfSosEos
-indexMap[start];

800 } ++
¡¬t
<
lim™
);

803 if(
lim™
==
Ëngth
) {

806 
¡¬t
=
lim™
+1;

809 } --
maxLev–
>=
mšLev–
);

810 
	}
}

812 
U_CAPI
 
U_EXPORT2


813 
	$ubidi_»Üd”Visu®
(cÚ¡ 
UBiDiLev–
 *
Ëv–s
, 
št32_t
 
Ëngth
, iÁ32_ˆ*
šdexM­
) {

814 
št32_t
 
¡¬t
, 
’d
, 
lim™
, 
‹mp
;

815 
UBiDiLev–
 
mšLev–
 = 0, 
maxLev–
 = 0;

817 if(
šdexM­
==
NULL
 || !
	`´•¬eReÜd”
(
Ëv–s
, 
Ëngth
, indexM­, &
mšLev–
, &
maxLev–
)) {

822 if(
mšLev–
==
maxLev–
 && (minLevel&1)==0) {

827 
mšLev–
|=1;

831 
¡¬t
=0;

837 
¡¬t
<
Ëngth
 && 
Ëv–s
[¡¬t]<
maxLev–
) {

838 ++
¡¬t
;

840 if(
¡¬t
>=
Ëngth
) {

845 
lim™
=
¡¬t
; ++lim™<
Ëngth
 && 
Ëv–s
[lim™]>=
maxLev–
;) {}

853 
’d
=
lim™
-1;

854 
¡¬t
<
’d
) {

855 
‹mp
=
šdexM­
[
¡¬t
];

856 
šdexM­
[
¡¬t
]=šdexM­[
’d
];

857 
šdexM­
[
’d
]=
‹mp
;

859 ++
¡¬t
;

860 --
’d
;

863 if(
lim™
==
Ëngth
) {

866 
¡¬t
=
lim™
+1;

869 } --
maxLev–
>=
mšLev–
);

870 
	}
}

874 
U_CAPI
 
št32_t
 
U_EXPORT2


875 
	$ubidi_g‘Visu®Index
(
UBiDi
 *
pBiDi
, 
št32_t
 
logiÿlIndex
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

876 
št32_t
 
visu®Index
=
UBIDI_MAP_NOWHERE
;

877 
	`RETURN_IF_NULL_OR_FAILING_ERRCODE
(
pE¼ÜCode
, -1);

878 
	`RETURN_IF_NOT_VALID_PARA_OR_LINE
(
pBiDi
, *
pE¼ÜCode
, -1);

879 
	`RETURN_IF_BAD_RANGE
(
logiÿlIndex
, 0, 
pBiDi
->
Ëngth
, *
pE¼ÜCode
, -1);

882 
pBiDi
->
dœeùiÚ
) {

883 
UBIDI_LTR
:

884 
visu®Index
=
logiÿlIndex
;

886 
UBIDI_RTL
:

887 
visu®Index
=
pBiDi
->
Ëngth
-
logiÿlIndex
-1;

890 if(!
	`ubidi_g‘Runs
(
pBiDi
, 
pE¼ÜCode
)) {

891 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

894 
Run
 *
runs
=
pBiDi
->runs;

895 
št32_t
 
i
, 
visu®S¹
=0, 
off£t
, 
Ëngth
;

898 
i
=0; i<
pBiDi
->
runCouÁ
; ++i) {

899 
Ëngth
=
runs
[
i
].
visu®Lim™
-
visu®S¹
;

900 
off£t
=
logiÿlIndex
-
	`GET_INDEX
(
runs
[
i
].
logiÿlS¹
);

901 if(
off£t
>=0 && off£t<
Ëngth
) {

902 if(
	`IS_EVEN_RUN
(
runs
[
i
].
logiÿlS¹
)) {

904 
visu®Index
=
visu®S¹
+
off£t
;

907 
visu®Index
=
visu®S¹
+
Ëngth
-
off£t
-1;

911 
visu®S¹
+=
Ëngth
;

913 if(
i
>=
pBiDi
->
runCouÁ
) {

914  
UBIDI_MAP_NOWHERE
;

919 if(
pBiDi
->
š£¹Pošts
.
size
>0) {

921 
Run
 *
runs
=
pBiDi
->runs;

922 
št32_t
 
i
, 
Ëngth
, 
š£¹Remove
;

923 
št32_t
 
visu®S¹
=0, 
m¬kFound
=0;

924 
i
=0; ; i++, 
visu®S¹
+=
Ëngth
) {

925 
Ëngth
=
runs
[
i
].
visu®Lim™
-
visu®S¹
;

926 
š£¹Remove
=
runs
[
i
].insertRemove;

927 if(
š£¹Remove
 & (
LRM_BEFORE
|
RLM_BEFORE
)) {

928 
m¬kFound
++;

931 if(
visu®Index
<
runs
[
i
].
visu®Lim™
) {

932  
visu®Index
+
m¬kFound
;

934 if(
š£¹Remove
 & (
LRM_AFTER
|
RLM_AFTER
)) {

935 
m¬kFound
++;

939 if(
pBiDi
->
cÚŒŞCouÁ
>0) {

941 
Run
 *
runs
=
pBiDi
->runs;

942 
št32_t
 
i
, 
j
, 
¡¬t
, 
lim™
, 
Ëngth
, 
š£¹Remove
;

943 
št32_t
 
visu®S¹
=0, 
cÚŒŞFound
=0;

944 
UCh¬
 
uch¬
=
pBiDi
->
‹xt
[
logiÿlIndex
];

946 if(
	`IS_BIDI_CONTROL_CHAR
(
uch¬
)) {

947  
UBIDI_MAP_NOWHERE
;

950 
i
=0; ; i++, 
visu®S¹
+=
Ëngth
) {

951 
Ëngth
=
runs
[
i
].
visu®Lim™
-
visu®S¹
;

952 
š£¹Remove
=
runs
[
i
].insertRemove;

954 if(
visu®Index
>=
runs
[
i
].
visu®Lim™
) {

955 
cÚŒŞFound
-=
š£¹Remove
;

959 if(
š£¹Remove
==0) {

960  
visu®Index
-
cÚŒŞFound
;

962 if(
	`IS_EVEN_RUN
(
runs
[
i
].
logiÿlS¹
)) {

964 
¡¬t
=
runs
[
i
].
logiÿlS¹
;

965 
lim™
=
logiÿlIndex
;

968 
¡¬t
=
logiÿlIndex
+1;

969 
lim™
=
	`GET_INDEX
(
runs
[
i
].
logiÿlS¹
)+
Ëngth
;

971 
j
=
¡¬t
; j<
lim™
; j++) {

972 
uch¬
=
pBiDi
->
‹xt
[
j
];

973 if(
	`IS_BIDI_CONTROL_CHAR
(
uch¬
)) {

974 
cÚŒŞFound
++;

977  
visu®Index
-
cÚŒŞFound
;

981  
visu®Index
;

982 
	}
}

984 
U_CAPI
 
št32_t
 
U_EXPORT2


985 
	$ubidi_g‘LogiÿlIndex
(
UBiDi
 *
pBiDi
, 
št32_t
 
visu®Index
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

986 
Run
 *
runs
;

987 
št32_t
 
i
, 
runCouÁ
, 
¡¬t
;

988 
	`RETURN_IF_NULL_OR_FAILING_ERRCODE
(
pE¼ÜCode
, -1);

989 
	`RETURN_IF_NOT_VALID_PARA_OR_LINE
(
pBiDi
, *
pE¼ÜCode
, -1);

990 
	`RETURN_IF_BAD_RANGE
(
visu®Index
, 0, 
pBiDi
->
»suÉL’gth
, *
pE¼ÜCode
, -1);

992 if(
pBiDi
->
š£¹Pošts
.
size
==0 &&…BiDi->
cÚŒŞCouÁ
==0) {

993 if(
pBiDi
->
dœeùiÚ
==
UBIDI_LTR
) {

994  
visu®Index
;

996 if(
pBiDi
->
dœeùiÚ
==
UBIDI_RTL
) {

997  
pBiDi
->
Ëngth
-
visu®Index
-1;

1000 if(!
	`ubidi_g‘Runs
(
pBiDi
, 
pE¼ÜCode
)) {

1001 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1005 
runs
=
pBiDi
->runs;

1006 
runCouÁ
=
pBiDi
->runCount;

1007 if(
pBiDi
->
š£¹Pošts
.
size
>0) {

1009 
št32_t
 
m¬kFound
=0, 
š£¹Remove
;

1010 
št32_t
 
visu®S¹
=0, 
Ëngth
;

1011 
runs
=
pBiDi
->runs;

1013 
i
=0; ; i++, 
visu®S¹
+=
Ëngth
) {

1014 
Ëngth
=
runs
[
i
].
visu®Lim™
-
visu®S¹
;

1015 
š£¹Remove
=
runs
[
i
].insertRemove;

1016 if(
š£¹Remove
&(
LRM_BEFORE
|
RLM_BEFORE
)) {

1017 if(
visu®Index
<=(
visu®S¹
+
m¬kFound
)) {

1018  
UBIDI_MAP_NOWHERE
;

1020 
m¬kFound
++;

1023 if(
visu®Index
<(
runs
[
i
].
visu®Lim™
+
m¬kFound
)) {

1024 
visu®Index
-=
m¬kFound
;

1027 if(
š£¹Remove
&(
LRM_AFTER
|
RLM_AFTER
)) {

1028 if(
visu®Index
==(
visu®S¹
+
Ëngth
+
m¬kFound
)) {

1029  
UBIDI_MAP_NOWHERE
;

1031 
m¬kFound
++;

1035 if(
pBiDi
->
cÚŒŞCouÁ
>0) {

1037 
št32_t
 
cÚŒŞFound
=0, 
š£¹Remove
, 
Ëngth
;

1038 
št32_t
 
logiÿlS¹
, 
logiÿlEnd
, 
visu®S¹
=0, 
j
, 
k
;

1039 
UCh¬
 
uch¬
;

1040 
UBoŞ
 
ev’Run
;

1042 
i
=0; ; i++, 
visu®S¹
+=
Ëngth
) {

1043 
Ëngth
=
runs
[
i
].
visu®Lim™
-
visu®S¹
;

1044 
š£¹Remove
=
runs
[
i
].insertRemove;

1046 if(
visu®Index
>=(
runs
[
i
].
visu®Lim™
-
cÚŒŞFound
+
š£¹Remove
)) {

1047 
cÚŒŞFound
-=
š£¹Remove
;

1051 if(
š£¹Remove
==0) {

1052 
visu®Index
+=
cÚŒŞFound
;

1056 
logiÿlS¹
=
runs
[
i
].logicalStart;

1057 
ev’Run
=
	`IS_EVEN_RUN
(
logiÿlS¹
);

1058 
	`REMOVE_ODD_BIT
(
logiÿlS¹
);

1059 
logiÿlEnd
=
logiÿlS¹
+
Ëngth
-1;

1060 
j
=0; j<
Ëngth
; j++) {

1061 
k
ğ
ev’Run
 ? 
logiÿlS¹
+
j
 : 
logiÿlEnd
-j;

1062 
uch¬
=
pBiDi
->
‹xt
[
k
];

1063 if(
	`IS_BIDI_CONTROL_CHAR
(
uch¬
)) {

1064 
cÚŒŞFound
++;

1066 if((
visu®Index
+
cÚŒŞFound
)==(
visu®S¹
+
j
)) {

1070 
visu®Index
+=
cÚŒŞFound
;

1075 if(
runCouÁ
<=10) {

1077 
i
=0; 
visu®Index
>=
runs
[i].
visu®Lim™
; ++i) {}

1080 
št32_t
 
begš
=0, 
lim™
=
runCouÁ
;

1084 
i
=(
begš
+
lim™
)/2;

1085 if(
visu®Index
>=
runs
[
i
].
visu®Lim™
) {

1086 
begš
=
i
+1;

1087 } if(
i
==0 || 
visu®Index
>=
runs
[i-1].
visu®Lim™
) {

1090 
lim™
=
i
;

1095 
¡¬t
=
runs
[
i
].
logiÿlS¹
;

1096 if(
	`IS_EVEN_RUN
(
¡¬t
)) {

1099 if(
i
>0) {

1100 
visu®Index
-=
runs
[
i
-1].
visu®Lim™
;

1102  
¡¬t
+
visu®Index
;

1105  
	`GET_INDEX
(
¡¬t
)+
runs
[
i
].
visu®Lim™
-
visu®Index
-1;

1107 
	}
}

1109 
U_CAPI
 
U_EXPORT2


1110 
	$ubidi_g‘LogiÿlM­
(
UBiDi
 *
pBiDi
, 
št32_t
 *
šdexM­
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1111 
	`RETURN_VOID_IF_NULL_OR_FAILING_ERRCODE
(
pE¼ÜCode
);

1113 
	`ubidi_couÁRuns
(
pBiDi
, 
pE¼ÜCode
);

1114 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1116 } if(
šdexM­
==
NULL
) {

1117 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1120 
št32_t
 
visu®S¹
, 
visu®Lim™
, 
i
, 
j
, 
k
;

1121 
št32_t
 
logiÿlS¹
, 
logiÿlLim™
;

1122 
Run
 *
runs
=
pBiDi
->runs;

1123 ià(
pBiDi
->
Ëngth
<=0) {

1126 ià(
pBiDi
->
Ëngth
>pBiDi->
»suÉL’gth
) {

1127 
	`u´v_mem£t
(
šdexM­
, 0xFF, 
pBiDi
->
Ëngth
*(
št32_t
));

1130 
visu®S¹
=0;

1131 
j
=0; j<
pBiDi
->
runCouÁ
; ++j) {

1132 
logiÿlS¹
=
	`GET_INDEX
(
runs
[
j
].logicalStart);

1133 
visu®Lim™
=
runs
[
j
].visualLimit;

1134 if(
	`IS_EVEN_RUN
(
runs
[
j
].
logiÿlS¹
)) {

1136 
šdexM­
[
logiÿlS¹
++]=
visu®S¹
++;

1137 } 
visu®S¹
<
visu®Lim™
);

1139 
logiÿlS¹
+=
visu®Lim™
-
visu®S¹
;

1141 
šdexM­
[--
logiÿlS¹
]=
visu®S¹
++;

1142 } 
visu®S¹
<
visu®Lim™
);

1147 if(
pBiDi
->
š£¹Pošts
.
size
>0) {

1148 
št32_t
 
m¬kFound
=0, 
runCouÁ
=
pBiDi
->runCount;

1149 
št32_t
 
Ëngth
, 
š£¹Remove
;

1150 
visu®S¹
=0;

1152 
i
=0; i<
runCouÁ
; i++, 
visu®S¹
+=
Ëngth
) {

1153 
Ëngth
=
runs
[
i
].
visu®Lim™
-
visu®S¹
;

1154 
š£¹Remove
=
runs
[
i
].insertRemove;

1155 if(
š£¹Remove
&(
LRM_BEFORE
|
RLM_BEFORE
)) {

1156 
m¬kFound
++;

1158 if(
m¬kFound
>0) {

1159 
logiÿlS¹
=
	`GET_INDEX
(
runs
[
i
].logicalStart);

1160 
logiÿlLim™
=
logiÿlS¹
+
Ëngth
;

1161 
j
=
logiÿlS¹
; j<
logiÿlLim™
; j++) {

1162 
šdexM­
[
j
]+=
m¬kFound
;

1165 if(
š£¹Remove
&(
LRM_AFTER
|
RLM_AFTER
)) {

1166 
m¬kFound
++;

1170 if(
pBiDi
->
cÚŒŞCouÁ
>0) {

1171 
št32_t
 
cÚŒŞFound
=0, 
runCouÁ
=
pBiDi
->runCount;

1172 
št32_t
 
Ëngth
, 
š£¹Remove
;

1173 
UBoŞ
 
ev’Run
;

1174 
UCh¬
 
uch¬
;

1175 
visu®S¹
=0;

1177 
i
=0; i<
runCouÁ
; i++, 
visu®S¹
+=
Ëngth
) {

1178 
Ëngth
=
runs
[
i
].
visu®Lim™
-
visu®S¹
;

1179 
š£¹Remove
=
runs
[
i
].insertRemove;

1181 if((
cÚŒŞFound
-
š£¹Remove
)==0) {

1184 
logiÿlS¹
=
runs
[
i
].logicalStart;

1185 
ev’Run
=
	`IS_EVEN_RUN
(
logiÿlS¹
);

1186 
	`REMOVE_ODD_BIT
(
logiÿlS¹
);

1187 
logiÿlLim™
=
logiÿlS¹
+
Ëngth
;

1189 if(
š£¹Remove
==0) {

1190 
j
=
logiÿlS¹
; j<
logiÿlLim™
; j++) {

1191 
šdexM­
[
j
]-=
cÚŒŞFound
;

1195 
j
=0; j<
Ëngth
; j++) {

1196 
k
ğ
ev’Run
 ? 
logiÿlS¹
+
j
 : 
logiÿlLim™
-j-1;

1197 
uch¬
=
pBiDi
->
‹xt
[
k
];

1198 if(
	`IS_BIDI_CONTROL_CHAR
(
uch¬
)) {

1199 
cÚŒŞFound
++;

1200 
šdexM­
[
k
]=
UBIDI_MAP_NOWHERE
;

1203 
šdexM­
[
k
]-=
cÚŒŞFound
;

1208 
	}
}

1210 
U_CAPI
 
U_EXPORT2


1211 
	$ubidi_g‘Visu®M­
(
UBiDi
 *
pBiDi
, 
št32_t
 *
šdexM­
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1212 
	`RETURN_VOID_IF_NULL_OR_FAILING_ERRCODE
(
pE¼ÜCode
);

1213 if(
šdexM­
==
NULL
) {

1214 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1218 
	`ubidi_couÁRuns
(
pBiDi
, 
pE¼ÜCode
);

1219 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

1221 
Run
 *
runs
=
pBiDi
->runs, *
runsLim™
ôuns+pBiDi->
runCouÁ
;

1222 
št32_t
 
logiÿlS¹
, 
visu®S¹
, 
visu®Lim™
, *
pi
=
šdexM­
;

1224 ià(
pBiDi
->
»suÉL’gth
<=0) {

1227 
visu®S¹
=0;

1228 ; 
runs
<
runsLim™
; ++runs) {

1229 
logiÿlS¹
=
runs
->logicalStart;

1230 
visu®Lim™
=
runs
->visualLimit;

1231 if(
	`IS_EVEN_RUN
(
logiÿlS¹
)) {

1233 *
pi
++ = 
logiÿlS¹
++;

1234 } ++
visu®S¹
<
visu®Lim™
);

1236 
	`REMOVE_ODD_BIT
(
logiÿlS¹
);

1237 
logiÿlS¹
+=
visu®Lim™
-
visu®S¹
;

1239 *
pi
++ = --
logiÿlS¹
;

1240 } ++
visu®S¹
<
visu®Lim™
);

1245 if(
pBiDi
->
š£¹Pošts
.
size
>0) {

1246 
št32_t
 
m¬kFound
=0, 
runCouÁ
=
pBiDi
->runCount;

1247 
št32_t
 
š£¹Remove
, 
i
, 
j
, 
k
;

1248 
runs
=
pBiDi
->runs;

1250 
i
=0; i<
runCouÁ
; i++) {

1251 
š£¹Remove
=
runs
[
i
].insertRemove;

1252 if(
š£¹Remove
&(
LRM_BEFORE
|
RLM_BEFORE
)) {

1253 
m¬kFound
++;

1255 if(
š£¹Remove
&(
LRM_AFTER
|
RLM_AFTER
)) {

1256 
m¬kFound
++;

1260 
k
=
pBiDi
->
»suÉL’gth
;

1261 
i
=
runCouÁ
-1; i>=0 && 
m¬kFound
>0; i--) {

1262 
š£¹Remove
=
runs
[
i
].insertRemove;

1263 if(
š£¹Remove
&(
LRM_AFTER
|
RLM_AFTER
)) {

1264 
šdexM­
[--
k
]ğ
UBIDI_MAP_NOWHERE
;

1265 
m¬kFound
--;

1267 
visu®S¹
ğ
i
>0 ? 
runs
[i-1].
visu®Lim™
 : 0;

1268 
j
=
runs
[
i
].
visu®Lim™
-1; j>=
visu®S¹
 && 
m¬kFound
>0; j--) {

1269 
šdexM­
[--
k
]=šdexM­[
j
];

1271 if(
š£¹Remove
&(
LRM_BEFORE
|
RLM_BEFORE
)) {

1272 
šdexM­
[--
k
]ğ
UBIDI_MAP_NOWHERE
;

1273 
m¬kFound
--;

1277 if(
pBiDi
->
cÚŒŞCouÁ
>0) {

1278 
št32_t
 
runCouÁ
=
pBiDi
->runCouÁ, 
logiÿlEnd
;

1279 
št32_t
 
š£¹Remove
, 
Ëngth
, 
i
, 
j
, 
k
, 
m
;

1280 
UCh¬
 
uch¬
;

1281 
UBoŞ
 
ev’Run
;

1282 
runs
=
pBiDi
->runs;

1283 
visu®S¹
=0;

1285 
k
=0;

1286 
i
=0; i<
runCouÁ
; i++, 
visu®S¹
+=
Ëngth
) {

1287 
Ëngth
=
runs
[
i
].
visu®Lim™
-
visu®S¹
;

1288 
š£¹Remove
=
runs
[
i
].insertRemove;

1290 if((
š£¹Remove
==0)&&(
k
==
visu®S¹
)) {

1291 
k
+=
Ëngth
;

1295 if(
š£¹Remove
==0) {

1296 
visu®Lim™
=
runs
[
i
].visualLimit;

1297 
j
=
visu®S¹
; j<
visu®Lim™
; j++) {

1298 
šdexM­
[
k
++]=šdexM­[
j
];

1302 
logiÿlS¹
=
runs
[
i
].logicalStart;

1303 
ev’Run
=
	`IS_EVEN_RUN
(
logiÿlS¹
);

1304 
	`REMOVE_ODD_BIT
(
logiÿlS¹
);

1305 
logiÿlEnd
=
logiÿlS¹
+
Ëngth
-1;

1306 
j
=0; j<
Ëngth
; j++) {

1307 
m
ğ
ev’Run
 ? 
logiÿlS¹
+
j
 : 
logiÿlEnd
-j;

1308 
uch¬
=
pBiDi
->
‹xt
[
m
];

1309 if(!
	`IS_BIDI_CONTROL_CHAR
(
uch¬
)) {

1310 
šdexM­
[
k
++]=
m
;

1316 
	}
}

1318 
U_CAPI
 
U_EXPORT2


1319 
	$ubidi_šv”tM­
(cÚ¡ 
št32_t
 *
¤cM­
, iÁ32_ˆ*
de¡M­
, iÁ32_ˆ
Ëngth
) {

1320 if(
¤cM­
!=
NULL
 && 
de¡M­
!=NULL && 
Ëngth
>0) {

1321 cÚ¡ 
št32_t
 *
pi
;

1322 
št32_t
 
de¡L’gth
=-1, 
couÁ
=0;

1324 
pi
=
¤cM­
+
Ëngth
;

1325 
pi
>
¤cM­
) {

1326 if(*--
pi
>
de¡L’gth
) {

1327 
de¡L’gth
=*
pi
;

1329 if(*
pi
>=0) {

1330 
couÁ
++;

1333 
de¡L’gth
++;

1334 if(
couÁ
<
de¡L’gth
) {

1336 
	`u´v_mem£t
(
de¡M­
, 0xFF, 
de¡L’gth
*(
št32_t
));

1338 
pi
=
¤cM­
+
Ëngth
;

1339 
Ëngth
>0) {

1340 if(*--
pi
>=0) {

1341 
de¡M­
[*
pi
]=--
Ëngth
;

1343 --
Ëngth
;

1347 
	}
}

	@ubidiwrt.c

21 #iâdeà
U_COMMON_IMPLEMENTATION


22 
	#U_COMMON_IMPLEMENTATION


	)

25 
	~"unicode/uty³s.h
"

26 
	~"unicode/u¡ršg.h
"

27 
	~"unicode/uch¬.h
"

28 
	~"unicode/ubidi.h
"

29 
	~"cmemÜy.h
"

30 
	~"u¡r_imp.h
"

31 
	~"ubidiimp.h
"

45 #ià
UTF_SIZE
==8

46 #”rÜ 
»im¶em’t
 
ubidi_wr™eReÜd”ed
(è
UTF
-8, 
£e
 
comm’t
 
above


49 
	#IS_COMBINING
(
ty³
è((1UL<<Ñy³))&(1UL<<
U_NON_SPACING_MARK
|1UL<<
U_COMBINING_SPACING_MARK
|1UL<<
U_ENCLOSING_MARK
))

	)

60 
št32_t


61 
	$doWr™eFÜw¬d
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

62 
UCh¬
 *
de¡
, 
št32_t
 
de¡Size
,

63 
ušt16_t
 
İtiÚs
,

64 
UE¼ÜCode
 *
pE¼ÜCode
) {

66 
İtiÚs
&(
UBIDI_REMOVE_BIDI_CONTROLS
|
UBIDI_DO_MIRRORING
)) {

69 
št32_t
 
Ëngth
=
¤cL’gth
;

70 if(
de¡Size
<
Ëngth
) {

71 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

72  
¤cL’gth
;

75 *
de¡
++=*
¤c
++;

76 } --
Ëngth
>0);

77  
¤cL’gth
;

79 
UBIDI_DO_MIRRORING
: {

81 
št32_t
 
i
=0, 
j
=0;

82 
UCh¬32
 
c
;

84 if(
de¡Size
<
¤cL’gth
) {

85 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

86  
¤cL’gth
;

89 
	`UTF_NEXT_CHAR
(
¤c
, 
i
, 
¤cL’gth
, 
c
);

90 
c
=
	`u_ch¬MœrÜ
(c);

91 
	`UTF_APPEND_CHAR_UNSAFE
(
de¡
, 
j
, 
c
);

92 } 
i
<
¤cL’gth
);

93  
¤cL’gth
;

95 
UBIDI_REMOVE_BIDI_CONTROLS
: {

97 
št32_t
 
»maššg
=
de¡Size
;

98 
UCh¬
 
c
;

100 
c
=*
¤c
++;

101 if(!
	`IS_BIDI_CONTROL_CHAR
(
c
)) {

102 if(--
»maššg
<0) {

103 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

106 --
¤cL’gth
>0) {

107 
c
=*
¤c
++;

108 if(!
	`IS_BIDI_CONTROL_CHAR
(
c
)) {

109 --
»maššg
;

112  
de¡Size
-
»maššg
;

114 *
de¡
++=
c
;

116 } --
¤cL’gth
>0);

117  
de¡Size
-
»maššg
;

121 
št32_t
 
»maššg
=
de¡Size
;

122 
št32_t
 
i
, 
j
=0;

123 
UCh¬32
 
c
;

125 
i
=0;

126 
	`UTF_NEXT_CHAR
(
¤c
, 
i
, 
¤cL’gth
, 
c
);

127 
¤c
+=
i
;

128 
¤cL’gth
-=
i
;

129 if(!
	`IS_BIDI_CONTROL_CHAR
(
c
)) {

130 
»maššg
-=
i
;

131 if(
»maššg
<0) {

132 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

135 
¤cL’gth
>0) {

136 
c
=*
¤c
++;

137 if(!
	`IS_BIDI_CONTROL_CHAR
(
c
)) {

138 --
»maššg
;

140 --
¤cL’gth
;

142  
de¡Size
-
»maššg
;

144 
c
=
	`u_ch¬MœrÜ
(c);

145 
	`UTF_APPEND_CHAR_UNSAFE
(
de¡
, 
j
, 
c
);

147 } 
¤cL’gth
>0);

148  
j
;

151 
	}
}

153 
št32_t


154 
	$doWr™eRev”£
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

155 
UCh¬
 *
de¡
, 
št32_t
 
de¡Size
,

156 
ušt16_t
 
İtiÚs
,

157 
UE¼ÜCode
 *
pE¼ÜCode
) {

176 
št32_t
 
i
, 
j
;

177 
UCh¬32
 
c
;

180 
İtiÚs
&(
UBIDI_REMOVE_BIDI_CONTROLS
|
UBIDI_DO_MIRRORING
|
UBIDI_KEEP_BASE_COMBINING
)) {

188 if(
de¡Size
<
¤cL’gth
) {

189 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

190  
¤cL’gth
;

192 
de¡Size
=
¤cL’gth
;

197 
i
=
¤cL’gth
;

200 
	`UTF_BACK_1
(
¤c
, 0, 
¤cL’gth
);

203 
j
=
¤cL’gth
;

205 *
de¡
++=
¤c
[
j
++];

206 } 
j
<
i
);

207 } 
¤cL’gth
>0);

209 
UBIDI_KEEP_BASE_COMBINING
:

216 if(
de¡Size
<
¤cL’gth
) {

217 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

218  
¤cL’gth
;

220 
de¡Size
=
¤cL’gth
;

225 
i
=
¤cL’gth
;

229 
	`UTF_PREV_CHAR
(
¤c
, 0, 
¤cL’gth
, 
c
);

230 } 
¤cL’gth
>0 && 
	`IS_COMBINING
(
	`u_ch¬Ty³
(
c
)));

233 
j
=
¤cL’gth
;

235 *
de¡
++=
¤c
[
j
++];

236 } 
j
<
i
);

237 } 
¤cL’gth
>0);

247 if(!(
İtiÚs
&
UBIDI_REMOVE_BIDI_CONTROLS
)) {

248 
i
=
¤cL’gth
;

252 
št32_t
 
Ëngth
=
¤cL’gth
;

253 
UCh¬
 
ch
;

255 
i
=0;

257 
ch
=*
¤c
++;

258 if(!
	`IS_BIDI_CONTROL_CHAR
(
ch
)) {

259 ++
i
;

261 } --
Ëngth
>0);

262 
¤c
-=
¤cL’gth
;

265 if(
de¡Size
<
i
) {

266 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

267  
i
;

269 
de¡Size
=
i
;

274 
i
=
¤cL’gth
;

277 
	`UTF_PREV_CHAR
(
¤c
, 0, 
¤cL’gth
, 
c
);

278 if(
İtiÚs
&
UBIDI_KEEP_BASE_COMBINING
) {

280 
¤cL’gth
>0 && 
	`IS_COMBINING
(
	`u_ch¬Ty³
(
c
))) {

281 
	`UTF_PREV_CHAR
(
¤c
, 0, 
¤cL’gth
, 
c
);

285 if(
İtiÚs
&
UBIDI_REMOVE_BIDI_CONTROLS
 && 
	`IS_BIDI_CONTROL_CHAR
(
c
)) {

291 
j
=
¤cL’gth
;

292 if(
İtiÚs
&
UBIDI_DO_MIRRORING
) {

294 
št32_t
 
k
=0;

295 
c
=
	`u_ch¬MœrÜ
(c);

296 
	`UTF_APPEND_CHAR_UNSAFE
(
de¡
, 
k
, 
c
);

297 
de¡
+=
k
;

298 
j
+=
k
;

300 
j
<
i
) {

301 *
de¡
++=
¤c
[
j
++];

303 } 
¤cL’gth
>0);

307  
de¡Size
;

308 
	}
}

310 
U_CAPI
 
št32_t
 
U_EXPORT2


311 
	$ubidi_wr™eRev”£
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

312 
UCh¬
 *
de¡
, 
št32_t
 
de¡Size
,

313 
ušt16_t
 
İtiÚs
,

314 
UE¼ÜCode
 *
pE¼ÜCode
) {

315 
št32_t
 
de¡L’gth
;

317 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

322 ifĞ
¤c
==
NULL
 || 
¤cL’gth
<-1 ||

323 
de¡Size
<0 || (de¡Size>0 && 
de¡
==
NULL
))

325 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

330 ifĞ
de¡
!=
NULL
 &&

331 ((
¤c
>=
de¡
 && src<de¡+
de¡Size
) ||

332 (
de¡
>=
¤c
 && de¡<¤c+
¤cL’gth
)))

334 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

338 if(
¤cL’gth
==-1) {

339 
¤cL’gth
=
	`u_¡¾’
(
¤c
);

341 if(
¤cL’gth
>0) {

342 
de¡L’gth
=
	`doWr™eRev”£
(
¤c
, 
¤cL’gth
, 
de¡
, 
de¡Size
, 
İtiÚs
, 
pE¼ÜCode
);

345 
de¡L’gth
=0;

348  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡Size
, 
de¡L’gth
, 
pE¼ÜCode
);

349 
	}
}

351 
U_CAPI
 
št32_t
 
U_EXPORT2


352 
	$ubidi_wr™eReÜd”ed
(
UBiDi
 *
pBiDi
,

353 
UCh¬
 *
de¡
, 
št32_t
 
de¡Size
,

354 
ušt16_t
 
İtiÚs
,

355 
UE¼ÜCode
 *
pE¼ÜCode
) {

356 cÚ¡ 
UCh¬
 *
‹xt
;

357 
UCh¬
 *
§veDe¡
;

358 
št32_t
 
Ëngth
, 
de¡C­ac™y
;

359 
št32_t
 
run
, 
runCouÁ
, 
logiÿlS¹
, 
runL’gth
;

361 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

366 ifĞ
pBiDi
==
NULL
 ||

367 (
‹xt
=
pBiDi
->‹xt)==
NULL
 || (
Ëngth
=pBiDi->length)<0 ||

368 
de¡Size
<0 || (de¡Size>0 && 
de¡
==
NULL
))

370 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

375 ifĞ
de¡
!=
NULL
 &&

376 ((
‹xt
>=
de¡
 &&ext<de¡+
de¡Size
) ||

377 (
de¡
>=
‹xt
 && de¡<‹xt+
pBiDi
->
Üigš®L’gth
)))

379 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

383 if(
Ëngth
==0) {

385  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡Size
, 0, 
pE¼ÜCode
);

388 
runCouÁ
=
	`ubidi_couÁRuns
(
pBiDi
, 
pE¼ÜCode
);

389 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

394 
§veDe¡
=
de¡
;

395 
de¡C­ac™y
=
de¡Size
;

401 if(
pBiDi
->
»Üd”šgO±iÚs
 & 
UBIDI_OPTION_INSERT_MARKS
) {

402 
İtiÚs
|=
UBIDI_INSERT_LRM_FOR_NUMERIC
;

403 
İtiÚs
&=~
UBIDI_REMOVE_BIDI_CONTROLS
;

409 if(
pBiDi
->
»Üd”šgO±iÚs
 & 
UBIDI_OPTION_REMOVE_CONTROLS
) {

410 
İtiÚs
|=
UBIDI_REMOVE_BIDI_CONTROLS
;

411 
İtiÚs
&=~
UBIDI_INSERT_LRM_FOR_NUMERIC
;

417 if((
pBiDi
->
»Üd”šgMode
 !ğ
UBIDI_REORDER_INVERSE_NUMBERS_AS_L
) &&

418 (
pBiDi
->
»Üd”šgMode
 !ğ
UBIDI_REORDER_INVERSE_LIKE_DIRECT
) &&

419 (
pBiDi
->
»Üd”šgMode
 !ğ
UBIDI_REORDER_INVERSE_FOR_NUMBERS_SPECIAL
) &&

420 (
pBiDi
->
»Üd”šgMode
 !ğ
UBIDI_REORDER_RUNS_ONLY
)) {

421 
İtiÚs
&=~
UBIDI_INSERT_LRM_FOR_NUMERIC
;

435 if(!(
İtiÚs
&
UBIDI_OUTPUT_REVERSE
)) {

437 if(!(
İtiÚs
&
UBIDI_INSERT_LRM_FOR_NUMERIC
)) {

439 
run
=0;„un<
runCouÁ
; ++run) {

440 if(
UBIDI_LTR
==
	`ubidi_g‘Visu®Run
(
pBiDi
, 
run
, &
logiÿlS¹
, &
runL’gth
)) {

441 
runL’gth
=
	`doWr™eFÜw¬d
(
‹xt
+
logiÿlS¹
,„unLength,

442 
de¡
, 
de¡Size
,

443 (
ušt16_t
)(
İtiÚs
&~
UBIDI_DO_MIRRORING
), 
pE¼ÜCode
);

445 
runL’gth
=
	`doWr™eRev”£
(
‹xt
+
logiÿlS¹
,„unLength,

446 
de¡
, 
de¡Size
,

447 
İtiÚs
, 
pE¼ÜCode
);

449 
de¡
+=
runL’gth
;

450 
de¡Size
-=
runL’gth
;

454 cÚ¡ 
DœPrİ
 *
dœPrİs
=
pBiDi
->dirProps;

455 cÚ¡ 
UCh¬
 *
¤c
;

456 
UCh¬
 
uc
;

457 
UBiDiDœeùiÚ
 
dœ
;

458 
št32_t
 
m¬kFÏg
;

460 
run
=0;„un<
runCouÁ
; ++run) {

461 
dœ
=
	`ubidi_g‘Visu®Run
(
pBiDi
, 
run
, &
logiÿlS¹
, &
runL’gth
);

462 
¤c
=
‹xt
+
logiÿlS¹
;

464 
m¬kFÏg
=
pBiDi
->
runs
[
run
].
š£¹Remove
;

465 if(
m¬kFÏg
<0) {

466 
m¬kFÏg
=0;

469 if(
UBIDI_LTR
==
dœ
) {

470 if((
pBiDi
->
isInv”£
) &&

471 Ğ
dœPrİs
[
logiÿlS¹
]!=
L
)) {

472 
m¬kFÏg
 |ğ
LRM_BEFORE
;

474 ià(
m¬kFÏg
 & 
LRM_BEFORE
) {

475 
uc
=
LRM_CHAR
;

477 ià(
m¬kFÏg
 & 
RLM_BEFORE
) {

478 
uc
=
RLM_CHAR
;

480 
uc
=0;

481 if(
uc
) {

482 if(
de¡Size
>0) {

483 *
de¡
++=
uc
;

485 --
de¡Size
;

488 
runL’gth
=
	`doWr™eFÜw¬d
(
¤c
,„unLength,

489 
de¡
, 
de¡Size
,

490 (
ušt16_t
)(
İtiÚs
&~
UBIDI_DO_MIRRORING
), 
pE¼ÜCode
);

491 
de¡
+=
runL’gth
;

492 
de¡Size
-=
runL’gth
;

494 if((
pBiDi
->
isInv”£
) &&

495 Ğ
dœPrİs
[
logiÿlS¹
+
runL’gth
-1]!=
L
)) {

496 
m¬kFÏg
 |ğ
LRM_AFTER
;

498 ià(
m¬kFÏg
 & 
LRM_AFTER
) {

499 
uc
=
LRM_CHAR
;

501 ià(
m¬kFÏg
 & 
RLM_AFTER
) {

502 
uc
=
RLM_CHAR
;

504 
uc
=0;

505 if(
uc
) {

506 if(
de¡Size
>0) {

507 *
de¡
++=
uc
;

509 --
de¡Size
;

512 if((
pBiDi
->
isInv”£
) &&

513 Ğ!(
MASK_R_AL
&
	`DIRPROP_FLAG
(
dœPrİs
[
logiÿlS¹
+
runL’gth
-1])))) {

514 
m¬kFÏg
 |ğ
RLM_BEFORE
;

516 ià(
m¬kFÏg
 & 
LRM_BEFORE
) {

517 
uc
=
LRM_CHAR
;

519 ià(
m¬kFÏg
 & 
RLM_BEFORE
) {

520 
uc
=
RLM_CHAR
;

522 
uc
=0;

523 if(
uc
) {

524 if(
de¡Size
>0) {

525 *
de¡
++=
uc
;

527 --
de¡Size
;

530 
runL’gth
=
	`doWr™eRev”£
(
¤c
,„unLength,

531 
de¡
, 
de¡Size
,

532 
İtiÚs
, 
pE¼ÜCode
);

533 
de¡
+=
runL’gth
;

534 
de¡Size
-=
runL’gth
;

536 if((
pBiDi
->
isInv”£
) &&

537 Ğ!(
MASK_R_AL
&
	`DIRPROP_FLAG
(
dœPrİs
[
logiÿlS¹
])))) {

538 
m¬kFÏg
 |ğ
RLM_AFTER
;

540 ià(
m¬kFÏg
 & 
LRM_AFTER
) {

541 
uc
=
LRM_CHAR
;

543 ià(
m¬kFÏg
 & 
RLM_AFTER
) {

544 
uc
=
RLM_CHAR
;

546 
uc
=0;

547 if(
uc
) {

548 if(
de¡Size
>0) {

549 *
de¡
++=
uc
;

551 --
de¡Size
;

558 if(!(
İtiÚs
&
UBIDI_INSERT_LRM_FOR_NUMERIC
)) {

560 
run
=
runCouÁ
; --run>=0;) {

561 if(
UBIDI_LTR
==
	`ubidi_g‘Visu®Run
(
pBiDi
, 
run
, &
logiÿlS¹
, &
runL’gth
)) {

562 
runL’gth
=
	`doWr™eRev”£
(
‹xt
+
logiÿlS¹
,„unLength,

563 
de¡
, 
de¡Size
,

564 (
ušt16_t
)(
İtiÚs
&~
UBIDI_DO_MIRRORING
), 
pE¼ÜCode
);

566 
runL’gth
=
	`doWr™eFÜw¬d
(
‹xt
+
logiÿlS¹
,„unLength,

567 
de¡
, 
de¡Size
,

568 
İtiÚs
, 
pE¼ÜCode
);

570 
de¡
+=
runL’gth
;

571 
de¡Size
-=
runL’gth
;

575 cÚ¡ 
DœPrİ
 *
dœPrİs
=
pBiDi
->dirProps;

576 cÚ¡ 
UCh¬
 *
¤c
;

577 
UBiDiDœeùiÚ
 
dœ
;

579 
run
=
runCouÁ
; --run>=0;) {

581 
dœ
=
	`ubidi_g‘Visu®Run
(
pBiDi
, 
run
, &
logiÿlS¹
, &
runL’gth
);

582 
¤c
=
‹xt
+
logiÿlS¹
;

584 if(
UBIDI_LTR
==
dœ
) {

585 ifĞ
dœPrİs
[
logiÿlS¹
+
runL’gth
-1]!=
L
) {

586 if(
de¡Size
>0) {

587 *
de¡
++=
LRM_CHAR
;

589 --
de¡Size
;

592 
runL’gth
=
	`doWr™eRev”£
(
¤c
,„unLength,

593 
de¡
, 
de¡Size
,

594 (
ušt16_t
)(
İtiÚs
&~
UBIDI_DO_MIRRORING
), 
pE¼ÜCode
);

595 
de¡
+=
runL’gth
;

596 
de¡Size
-=
runL’gth
;

598 ifĞ
dœPrİs
[
logiÿlS¹
]!=
L
) {

599 if(
de¡Size
>0) {

600 *
de¡
++=
LRM_CHAR
;

602 --
de¡Size
;

605 ifĞ!(
MASK_R_AL
&
	`DIRPROP_FLAG
(
dœPrİs
[
logiÿlS¹
]))) {

606 if(
de¡Size
>0) {

607 *
de¡
++=
RLM_CHAR
;

609 --
de¡Size
;

612 
runL’gth
=
	`doWr™eFÜw¬d
(
¤c
,„unLength,

613 
de¡
, 
de¡Size
,

614 
İtiÚs
, 
pE¼ÜCode
);

615 
de¡
+=
runL’gth
;

616 
de¡Size
-=
runL’gth
;

618 ifĞ!(
MASK_R_AL
&
	`DIRPROP_FLAG
(
dœPrİs
[
logiÿlS¹
+
runL’gth
-1]))) {

619 if(
de¡Size
>0) {

620 *
de¡
++=
RLM_CHAR
;

622 --
de¡Size
;

629  
	`u_‹rmš©eUCh¬s
(
§veDe¡
, 
de¡C­ac™y
, de¡C­ac™y-
de¡Size
, 
pE¼ÜCode
);

630 
	}
}

	@ubrk.cpp

8 
	~"unicode/uty³s.h
"

10 #ià!
UCONFIG_NO_BREAK_ITERATION


12 
	~"unicode/ubrk.h
"

14 
	~"unicode/brk™”.h
"

15 
	~"unicode/uloc.h
"

16 
	~"unicode/u¡ršg.h
"

17 
	~"unicode/uchr™”.h
"

18 
	~"unicode/rbbi.h
"

19 
	~"rbbœb.h
"

20 
	~"uas£¹.h
"

22 
U_NAMESPACE_USE


30 
U_CAPI
 
UB»akI‹¿tÜ
* 
U_EXPORT2


31 
	$ubrk_İ’
(
UB»akI‹¿tÜTy³
 
ty³
,

32 cÚ¡ *
loÿË
,

33 cÚ¡ 
UCh¬
 *
‹xt
,

34 
št32_t
 
‹xtL’gth
,

35 
UE¼ÜCode
 *
¡©us
)

38 if(
	`U_FAILURE
(*
¡©us
))  0;

40 
B»akI‹¿tÜ
 *
»suÉ
 = 0;

42 
ty³
) {

44 
UBRK_CHARACTER
:

45 
»suÉ
 = 
B»akI‹¿tÜ
::
	`ü—‹Ch¬aù”In¡ªû
(
	`LoÿË
(
loÿË
), *
¡©us
);

48 
UBRK_WORD
:

49 
»suÉ
 = 
B»akI‹¿tÜ
::
	`ü—‹WÜdIn¡ªû
(
	`LoÿË
(
loÿË
), *
¡©us
);

52 
UBRK_LINE
:

53 
»suÉ
 = 
B»akI‹¿tÜ
::
	`ü—‹LšeIn¡ªû
(
	`LoÿË
(
loÿË
), *
¡©us
);

56 
UBRK_SENTENCE
:

57 
»suÉ
 = 
B»akI‹¿tÜ
::
	`ü—‹S’‹nûIn¡ªû
(
	`LoÿË
(
loÿË
), *
¡©us
);

60 
UBRK_TITLE
:

61 
»suÉ
 = 
B»akI‹¿tÜ
::
	`ü—‹T™ËIn¡ªû
(
	`LoÿË
(
loÿË
), *
¡©us
);

65 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

69 ià(
	`U_FAILURE
(*
¡©us
)) {

72 if(
»suÉ
 == 0) {

73 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

78 
UB»akI‹¿tÜ
 *
uBI
 = (UB»akI‹¿tÜ *)
»suÉ
;

79 ià(
‹xt
 !ğ
NULL
) {

80 
	`ubrk_£tText
(
uBI
, 
‹xt
, 
‹xtL’gth
, 
¡©us
);

82  
uBI
;

83 
	}
}

93 
U_CAPI
 
UB»akI‹¿tÜ
* 
U_EXPORT2


94 
	$ubrk_İ’RuËs
ĞcÚ¡ 
UCh¬
 *
ruËs
,

95 
št32_t
 
ruËsL’gth
,

96 cÚ¡ 
UCh¬
 *
‹xt
,

97 
št32_t
 
‹xtL’gth
,

98 
UP¬£E¼Ü
 *
·r£E¼
,

99 
UE¼ÜCode
 *
¡©us
) {

101 ià(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

105 
B»akI‹¿tÜ
 *
»suÉ
 = 0;

106 
UnicodeSŒšg
 
	`ruËSŒšg
(
ruËs
, 
ruËsL’gth
);

107 
»suÉ
 = 
RBBIRuËBud”
::
	`ü—‹RuËBa£dB»akI‹¿tÜ
(
ruËSŒšg
, 
·r£E¼
, *
¡©us
);

108 if(
	`U_FAILURE
(*
¡©us
)) {

112 
UB»akI‹¿tÜ
 *
uBI
 = (UB»akI‹¿tÜ *)
»suÉ
;

113 ià(
‹xt
 !ğ
NULL
) {

114 
	`ubrk_£tText
(
uBI
, 
‹xt
, 
‹xtL’gth
, 
¡©us
);

116  
uBI
;

117 
	}
}

123 
U_CAPI
 
UB»akI‹¿tÜ
 * 
U_EXPORT2


124 
	$ubrk_§ãClÚe
(

125 cÚ¡ 
UB»akI‹¿tÜ
 *
bi
,

126 *
¡ackBufãr
,

127 
št32_t
 *
pBufãrSize
,

128 
UE¼ÜCode
 *
¡©us
)

130 ià(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

133 ià(!
pBufãrSize
 || !
bi
){

134 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

140 ià(*
¡©us
==
U_SAFECLONE_ALLOCATED_WARNING
) {

141 *
¡©us
 = 
U_ZERO_ERROR
;

143  (
UB»akI‹¿tÜ
 *)(((
B»akI‹¿tÜ
*)
bi
)->

144 
	`ü—‹BufãrClÚe
(
¡ackBufãr
, *
pBufãrSize
, *
¡©us
));

145 
	}
}

149 
U_CAPI
 
U_EXPORT2


150 
	$ubrk_şo£
(
UB»akI‹¿tÜ
 *
bi
)

152 
B»akI‹¿tÜ
 *
ubi
 = (B»akI‹¿tÜ*è
bi
;

153 ià(
ubi
) {

154 ià(
ubi
->
	`isBufãrClÚe
()) {

155 
ubi
->~
	`B»akI‹¿tÜ
();

156 *(
ušt32_t
 *)
ubi
 = 0xdeadbeef;

158 
d–‘e
 
ubi
;

161 
	}
}

163 
U_CAPI
 
U_EXPORT2


164 
	$ubrk_£tText
(
UB»akI‹¿tÜ
* 
bi
,

165 cÚ¡ 
UCh¬
* 
‹xt
,

166 
št32_t
 
‹xtL’gth
,

167 
UE¼ÜCode
* 
¡©us
)

169 
B»akI‹¿tÜ
 *
br™
 = (B»akI‹¿tÜ *)
bi
;

170 
UText
 
ut
 = 
UTEXT_INITIALIZER
;

171 
	`u‹xt_İ’UCh¬s
(&
ut
, 
‹xt
, 
‹xtL’gth
, 
¡©us
);

172 
br™
->
	`£tText
(&
ut
, *
¡©us
);

175 
	}
}

179 
U_CAPI
 
U_EXPORT2


180 
	$ubrk_£tUText
(
UB»akI‹¿tÜ
 *
bi
,

181 
UText
 *
‹xt
,

182 
UE¼ÜCode
 *
¡©us
)

184 
RuËBa£dB»akI‹¿tÜ
 *
br™
 = (RuËBa£dB»akI‹¿tÜ *)
bi
;

185 
br™
->
RuËBa£dB»akI‹¿tÜ
::
	`£tText
(
‹xt
, *
¡©us
);

186 
	}
}

192 
U_CAPI
 
št32_t
 
U_EXPORT2


193 
	$ubrk_cu¼’t
(cÚ¡ 
UB»akI‹¿tÜ
 *
bi
)

196  ((
RuËBa£dB»akI‹¿tÜ
*)
bi
)->RuËBa£dB»akI‹¿tÜ::
	`cu¼’t
();

197 
	}
}

199 
U_CAPI
 
št32_t
 
U_EXPORT2


200 
	$ubrk_Ãxt
(
UB»akI‹¿tÜ
 *
bi
)

203  ((
RuËBa£dB»akI‹¿tÜ
*)
bi
)->RuËBa£dB»akI‹¿tÜ::
	`Ãxt
();

204 
	}
}

206 
U_CAPI
 
št32_t
 
U_EXPORT2


207 
	$ubrk_´evious
(
UB»akI‹¿tÜ
 *
bi
)

210  ((
RuËBa£dB»akI‹¿tÜ
*)
bi
)->RuËBa£dB»akI‹¿tÜ::
	`´evious
();

211 
	}
}

213 
U_CAPI
 
št32_t
 
U_EXPORT2


214 
	$ubrk_fœ¡
(
UB»akI‹¿tÜ
 *
bi
)

217  ((
RuËBa£dB»akI‹¿tÜ
*)
bi
)->RuËBa£dB»akI‹¿tÜ::
	`fœ¡
();

218 
	}
}

220 
U_CAPI
 
št32_t
 
U_EXPORT2


221 
	$ubrk_Ï¡
(
UB»akI‹¿tÜ
 *
bi
)

224  ((
RuËBa£dB»akI‹¿tÜ
*)
bi
)->RuËBa£dB»akI‹¿tÜ::
	`Ï¡
();

225 
	}
}

227 
U_CAPI
 
št32_t
 
U_EXPORT2


228 
	$ubrk_´eûdšg
(
UB»akI‹¿tÜ
 *
bi
,

229 
št32_t
 
off£t
)

232  ((
RuËBa£dB»akI‹¿tÜ
*)
bi
)->RuËBa£dB»akI‹¿tÜ::
	`´eûdšg
(
off£t
);

233 
	}
}

235 
U_CAPI
 
št32_t
 
U_EXPORT2


236 
	$ubrk_fŞlowšg
(
UB»akI‹¿tÜ
 *
bi
,

237 
št32_t
 
off£t
)

240  ((
RuËBa£dB»akI‹¿tÜ
*)
bi
)->RuËBa£dB»akI‹¿tÜ::
	`fŞlowšg
(
off£t
);

241 
	}
}

243 
U_CAPI
 cÚ¡ * 
U_EXPORT2


244 
	$ubrk_g‘AvaabË
(
št32_t
 
šdex
)

247  
	`uloc_g‘AvaabË
(
šdex
);

248 
	}
}

250 
U_CAPI
 
št32_t
 
U_EXPORT2


251 
	$ubrk_couÁAvaabË
()

254  
	`uloc_couÁAvaabË
();

255 
	}
}

258 
U_CAPI
 
UBoŞ
 
U_EXPORT2


259 
	$ubrk_isBound¬y
(
UB»akI‹¿tÜ
 *
bi
, 
št32_t
 
off£t
)

261  ((
RuËBa£dB»akI‹¿tÜ
 *)
bi
)->RuËBa£dB»akI‹¿tÜ::
	`isBound¬y
(
off£t
);

262 
	}
}

265 
U_CAPI
 
št32_t
 
U_EXPORT2


266 
	$ubrk_g‘RuËStus
(
UB»akI‹¿tÜ
 *
bi
)

268  ((
RuËBa£dB»akI‹¿tÜ
 *)
bi
)->RuËBa£dB»akI‹¿tÜ::
	`g‘RuËStus
();

269 
	}
}

271 
U_CAPI
 
št32_t
 
U_EXPORT2


272 
	$ubrk_g‘RuËStusVec
(
UB»akI‹¿tÜ
 *
bi
, 
št32_t
 *
flInVec
, iÁ32_ˆ
ÿ·c™y
, 
UE¼ÜCode
 *
¡©us
)

274  ((
RuËBa£dB»akI‹¿tÜ
 *)
bi
)->RuËBa£dB»akI‹¿tÜ::
	`g‘RuËStusVec
(
flInVec
, 
ÿ·c™y
, *
¡©us
);

275 
	}
}

278 
U_CAPI
 cÚ¡ * 
U_EXPORT2


279 
	$ubrk_g‘LoÿËByTy³
(cÚ¡ 
UB»akI‹¿tÜ
 *
bi
,

280 
ULocD©aLoÿËTy³
 
ty³
,

281 
UE¼ÜCode
* 
¡©us
)

283 ià(
bi
 =ğ
NULL
) {

284 ià(
	`U_SUCCESS
(*
¡©us
)) {

285 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

287  
NULL
;

289  ((
B»akI‹¿tÜ
*)
bi
)->
	`g‘LoÿËID
(
ty³
, *
¡©us
);

290 
	}
}

	@ubrkimpl.h

8 #iâdeà
UBRKIMPL_H


9 
	#UBRKIMPL_H


	)

11 
	#U_ICUDATA_BRKITR
 
U_ICUDATA_NAME
 
U_TREE_SEPARATOR_STRING
 "brk™r"

	)

	@ucase.c

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/u£t.h
"

22 
	~"unicode/ud©a.h
"

23 
	~"ucmnd©a.h
"

24 
	~"ud©amem.h
"

25 
	~"umu‹x.h
"

26 
	~"uas£¹.h
"

27 
	~"cmemÜy.h
"

28 
	~"uŒ›2.h
"

29 
	~"uÿ£.h
"

30 
	~"uşn_cmn.h
"

32 
	sUCa£Prİs
 {

33 
UD©aMemÜy
 *
	mmem
;

34 cÚ¡ 
št32_t
 *
	mšdexes
;

35 cÚ¡ 
ušt16_t
 *
	mexû±iÚs
;

36 cÚ¡ 
UCh¬
 *
	munfŞd
;

38 
UTr›2
 
	mŒ›
;

39 
ušt8_t
 
	mfÜm©V”siÚ
[4];

43 
	~"uÿ£_´İs_d©a.c
"

47 
U_CAPI
 cÚ¡ 
UCa£Prİs
 * 
U_EXPORT2


48 
	$uÿ£_g‘SšgËtÚ
() {

49  &
uÿ£_´İs_sšgËtÚ
;

50 
	}
}

54 
UBoŞ
 
U_CALLCONV


55 
	$_’umPrİ”tyS¹sRªge
(cÚ¡ *
cÚ‹xt
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt32_t
 
v®ue
) {

57 cÚ¡ 
US‘Add”
 *
§
=(cÚ¡ US‘Add” *)
cÚ‹xt
;

58 
§
->
	`add
(§->
£t
, 
¡¬t
);

59  
TRUE
;

60 
	}
}

62 
U_CFUNC
 
U_EXPORT2


63 
	$uÿ£_addPrİ”tyS¹s
(cÚ¡ 
UCa£Prİs
 *
c¥
, cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

64 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

69 
	`uŒ›2_’um
(&
c¥
->
Œ›
, 
NULL
, 
_’umPrİ”tyS¹sRªge
, 
§
);

79 
	}
}

83 
	#GET_EXCEPTIONS
(
c¥
, 
´İs
è((c¥)->
exû±iÚs
+(Õrİs)>>
UCASE_EXC_SHIFT
))

	)

85 
	#PROPS_HAS_EXCEPTION
(
´İs
è(Õrİs)&
UCASE_EXCEPTION
)

	)

88 cÚ¡ 
ušt8_t
 
	gæagsOff£t
[256]={

107 
	#HAS_SLOT
(
æags
, 
idx
è((æags)&(1<<(idx)))

	)

108 
	#SLOT_OFFSET
(
æags
, 
idx
è
æagsOff£t
[(æags)&((1<<(idx))-1)]

	)

119 
	#GET_SLOT_VALUE
(
excWÜd
, 
idx
, 
pExc16
, 
v®ue
) \

120 if(((
excWÜd
)&
UCASE_EXC_DOUBLE_SLOTS
)==0) { \

121 (
pExc16
)+=
	`SLOT_OFFSET
(
excWÜd
, 
idx
); \

122 (
v®ue
)=*
pExc16
; \

124 (
pExc16
)+=2*
	`SLOT_OFFSET
(
excWÜd
, 
idx
); \

125 (
v®ue
)=*
pExc16
++; \

126 (
v®ue
)=((v®ue)<<16)|*
pExc16
; \

127 }

	)

131 
U_CAPI
 
UCh¬32
 
U_EXPORT2


132 
	$uÿ£_tŞow”
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
) {

133 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

134 if(!
	`PROPS_HAS_EXCEPTION
(
´İs
)) {

135 if(
	`UCASE_GET_TYPE
(
´İs
)>=
UCASE_UPPER
) {

136 
c
+=
	`UCASE_GET_DELTA
(
´İs
);

139 cÚ¡ 
ušt16_t
 *
³
=
	`GET_EXCEPTIONS
(
c¥
, 
´İs
);

140 
ušt16_t
 
excWÜd
=*
³
++;

141 if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_LOWER
)) {

142 
	`GET_SLOT_VALUE
(
excWÜd
, 
UCASE_EXC_LOWER
, 
³
, 
c
);

145  
c
;

146 
	}
}

148 
U_CAPI
 
UCh¬32
 
U_EXPORT2


149 
	$uÿ£_touµ”
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
) {

150 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

151 if(!
	`PROPS_HAS_EXCEPTION
(
´İs
)) {

152 if(
	`UCASE_GET_TYPE
(
´İs
)==
UCASE_LOWER
) {

153 
c
+=
	`UCASE_GET_DELTA
(
´İs
);

156 cÚ¡ 
ušt16_t
 *
³
=
	`GET_EXCEPTIONS
(
c¥
, 
´İs
);

157 
ušt16_t
 
excWÜd
=*
³
++;

158 if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_UPPER
)) {

159 
	`GET_SLOT_VALUE
(
excWÜd
, 
UCASE_EXC_UPPER
, 
³
, 
c
);

162  
c
;

163 
	}
}

165 
U_CAPI
 
UCh¬32
 
U_EXPORT2


166 
	$uÿ£_tÙ™Ë
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
) {

167 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

168 if(!
	`PROPS_HAS_EXCEPTION
(
´İs
)) {

169 if(
	`UCASE_GET_TYPE
(
´İs
)==
UCASE_LOWER
) {

170 
c
+=
	`UCASE_GET_DELTA
(
´İs
);

173 cÚ¡ 
ušt16_t
 *
³
=
	`GET_EXCEPTIONS
(
c¥
, 
´İs
);

174 
ušt16_t
 
excWÜd
=*
³
++;

175 
št32_t
 
idx
;

176 if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_TITLE
)) {

177 
idx
=
UCASE_EXC_TITLE
;

178 } if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_UPPER
)) {

179 
idx
=
UCASE_EXC_UPPER
;

181  
c
;

183 
	`GET_SLOT_VALUE
(
excWÜd
, 
idx
, 
³
, 
c
);

185  
c
;

186 
	}
}

188 cÚ¡ 
UCh¬
 
	giDÙ
[2] = { 0x69, 0x307 };

189 cÚ¡ 
UCh¬
 
	gjDÙ
[2] = { 0x6a, 0x307 };

190 cÚ¡ 
UCh¬
 
	giOgÚekDÙ
[3] = { 0x12f, 0x307 };

191 cÚ¡ 
UCh¬
 
	giDÙG¿ve
[3] = { 0x69, 0x307, 0x300 };

192 cÚ¡ 
UCh¬
 
	giDÙAcu‹
[3] = { 0x69, 0x307, 0x301 };

193 cÚ¡ 
UCh¬
 
	giDÙTde
[3] = { 0x69, 0x307, 0x303 };

196 
U_CFUNC
 
U_EXPORT2


197 
	$uÿ£_addCa£Closu»
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
, cÚ¡ 
US‘Add”
 *
§
) {

198 
ušt16_t
 
´İs
;

208 
c
) {

211 
§
->
	`add
(§->
£t
, 0x69);

214 
§
->
	`add
(§->
£t
, 0x49);

218 
§
->
	`addSŒšg
(§->
£t
, 
iDÙ
, 2);

228 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

229 if(!
	`PROPS_HAS_EXCEPTION
(
´İs
)) {

230 if(
	`UCASE_GET_TYPE
(
´İs
)!=
UCASE_NONE
) {

232 
št32_t
 
d–
=
	`UCASE_GET_DELTA
(
´İs
);

233 if(
d–
!=0) {

234 
§
->
	`add
(§->
£t
, 
c
+
d–
);

242 cÚ¡ 
ušt16_t
 *
³0
, *
³
=
	`GET_EXCEPTIONS
(
c¥
, 
´İs
);

243 cÚ¡ 
UCh¬
 *
şosu»
;

244 
ušt16_t
 
excWÜd
=*
³
++;

245 
št32_t
 
idx
, 
şosu»L’gth
, 
fuÎL’gth
, 
Ëngth
;

247 
³0
=
³
;

250 
idx
=
UCASE_EXC_LOWER
; idx<=
UCASE_EXC_TITLE
; ++idx) {

251 if(
	`HAS_SLOT
(
excWÜd
, 
idx
)) {

252 
³
=
³0
;

253 
	`GET_SLOT_VALUE
(
excWÜd
, 
idx
, 
³
, 
c
);

254 
§
->
	`add
(§->
£t
, 
c
);

259 if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_CLOSURE
)) {

260 
³
=
³0
;

261 
	`GET_SLOT_VALUE
(
excWÜd
, 
UCASE_EXC_CLOSURE
, 
³
, 
şosu»L’gth
);

262 
şosu»L’gth
&=
UCASE_CLOSURE_MAX_LENGTH
;

263 
şosu»
=(cÚ¡ 
UCh¬
 *)
³
+1;

265 
şosu»L’gth
=0;

266 
şosu»
=
NULL
;

270 if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_FULL_MAPPINGS
)) {

271 
³
=
³0
;

272 
	`GET_SLOT_VALUE
(
excWÜd
, 
UCASE_EXC_FULL_MAPPINGS
, 
³
, 
fuÎL’gth
);

275 ++
³
;

277 
fuÎL’gth
&=0xffff;

280 
³
+=
fuÎL’gth
&
UCASE_FULL_LOWER
;

281 
fuÎL’gth
>>=4;

284 
Ëngth
=
fuÎL’gth
&0xf;

285 if(
Ëngth
!=0) {

286 
§
->
	`addSŒšg
(§->
£t
, (cÚ¡ 
UCh¬
 *)
³
, 
Ëngth
);

287 
³
+=
Ëngth
;

291 
fuÎL’gth
>>=4;

292 
³
+=
fuÎL’gth
&0xf;

293 
fuÎL’gth
>>=4;

294 
³
+=
fuÎL’gth
;

296 
şosu»
=(cÚ¡ 
UCh¬
 *)
³
;

300 
idx
=0; idx<
şosu»L’gth
;) {

301 
	`U16_NEXT_UNSAFE
(
şosu»
, 
idx
, 
c
);

302 
§
->
	`add
(§->
£t
, 
c
);

305 
	}
}

311 
U_INLINE
 
št32_t


312 
	$¡rcmpMax
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, cÚ¡ UCh¬ *
t
, iÁ32_ˆ
max
) {

313 
št32_t
 
c1
, 
c2
;

315 
max
-=
Ëngth
;

317 
c1
=*
s
++;

318 
c2
=*
t
++;

319 if(
c2
==0) {

322 
c1
-=
c2
;

323 if(
c1
!=0) {

324  
c1
;

326 } --
Ëngth
>0);

329 if(
max
==0 || *
t
==0) {

332  -
max
;

334 
	}
}

336 
U_CFUNC
 
UBoŞ
 
U_EXPORT2


337 
	$uÿ£_addSŒšgCa£Closu»
(cÚ¡ 
UCa£Prİs
 *
c¥
, cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, cÚ¡ 
US‘Add”
 *
§
) {

338 cÚ¡ 
UCh¬
 *
unfŞd
, *
p
;

339 
št32_t
 
i
, 
¡¬t
, 
lim™
, 
»suÉ
, 
unfŞdRows
, 
unfŞdRowWidth
, 
unfŞdSŒšgWidth
;

341 if(
c¥
->
unfŞd
==
NULL
 || 
s
==NULL) {

342  
FALSE
;

344 if(
Ëngth
<=1) {

352  
FALSE
;

355 
unfŞd
=
c¥
->unfold;

356 
unfŞdRows
=
unfŞd
[
UCASE_UNFOLD_ROWS
];

357 
unfŞdRowWidth
=
unfŞd
[
UCASE_UNFOLD_ROW_WIDTH
];

358 
unfŞdSŒšgWidth
=
unfŞd
[
UCASE_UNFOLD_STRING_WIDTH
];

359 
unfŞd
+=
unfŞdRowWidth
;

361 if(
Ëngth
>
unfŞdSŒšgWidth
) {

363  
FALSE
;

367 
¡¬t
=0;

368 
lim™
=
unfŞdRows
;

369 
¡¬t
<
lim™
) {

370 
i
=(
¡¬t
+
lim™
)/2;

371 
p
=
unfŞd
+(
i
*
unfŞdRowWidth
);

372 
»suÉ
=
	`¡rcmpMax
(
s
, 
Ëngth
, 
p
, 
unfŞdSŒšgWidth
);

374 if(
»suÉ
==0) {

376 
UCh¬32
 
c
;

378 
i
=
unfŞdSŒšgWidth
; i<
unfŞdRowWidth
 && 
p
[i]!=0;) {

379 
	`U16_NEXT_UNSAFE
(
p
, 
i
, 
c
);

380 
§
->
	`add
(§->
£t
, 
c
);

381 
	`uÿ£_addCa£Closu»
(
c¥
, 
c
, 
§
);

383  
TRUE
;

384 } if(
»suÉ
<0) {

385 
lim™
=
i
;

387 
¡¬t
=
i
+1;

391  
FALSE
;

392 
	}
}

395 
U_CAPI
 
št32_t
 
U_EXPORT2


396 
	$uÿ£_g‘Ty³
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
) {

397 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

398  
	`UCASE_GET_TYPE
(
´İs
);

399 
	}
}

402 
U_CAPI
 
št32_t
 
U_EXPORT2


403 
	$uÿ£_g‘Ty³OrIgnÜabË
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
) {

404 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

405 
št32_t
 
ty³
=
	`UCASE_GET_TYPE
(
´İs
);

406 if(
´İs
&
UCASE_EXCEPTION
) {

407 cÚ¡ 
ušt16_t
 *
³
=
	`GET_EXCEPTIONS
(
c¥
, 
´İs
);

408 if(*
³
&
UCASE_EXC_CASE_IGNORABLE
) {

409 
ty³
|=4;

411 } if(
ty³
==
UCASE_NONE
 && (
´İs
&
UCASE_CASE_IGNORABLE
)) {

412 
ty³
|=4;

414  
ty³
;

415 
	}
}

418 
U_INLINE
 
št32_t


419 
	$g‘DÙTy³
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
) {

420 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

421 if(!
	`PROPS_HAS_EXCEPTION
(
´İs
)) {

422  
´İs
&
UCASE_DOT_MASK
;

424 cÚ¡ 
ušt16_t
 *
³
=
	`GET_EXCEPTIONS
(
c¥
, 
´İs
);

425  (*
³
>>
UCASE_EXC_DOT_SHIFT
)&
UCASE_DOT_MASK
;

427 
	}
}

429 
U_CAPI
 
UBoŞ
 
U_EXPORT2


430 
	$uÿ£_isSoáDÙ‹d
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
) {

431  (
UBoŞ
)(
	`g‘DÙTy³
(
c¥
, 
c
)==
UCASE_SOFT_DOTTED
);

432 
	}
}

434 
U_CAPI
 
UBoŞ
 
U_EXPORT2


435 
	$uÿ£_isCa£S’s™ive
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
) {

436 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

437  (
UBoŞ
)((
´İs
&
UCASE_SENSITIVE
)!=0);

438 
	}
}

520 
	#is_a
(
c
è((c)=='a' || (c)=='A')

	)

521 
	#is_d
(
c
è((c)=='d' || (c)=='D')

	)

522 
	#is_e
(
c
è((c)=='e' || (c)=='E')

	)

523 
	#is_i
(
c
è((c)=='i' || (c)=='I')

	)

524 
	#is_l
(
c
è((c)=='l' || (c)=='L')

	)

525 
	#is_n
(
c
è((c)=='n' || (c)=='N')

	)

526 
	#is_r
(
c
è((c)=='r' || (c)=='R')

	)

527 
	#is_t
(
c
è((c)=='t' || (c)=='T')

	)

528 
	#is_u
(
c
è((c)=='u' || (c)=='U')

	)

529 
	#is_z
(
c
è((c)=='z' || (c)=='Z')

	)

532 
	#is_£p
(
c
è((c)=='_' || (c)=='-' || (c)==0)

	)

539 
U_CFUNC
 
št32_t


540 
	$uÿ£_g‘Ca£LoÿË
(cÚ¡ *
loÿË
, 
št32_t
 *
locCache
) {

541 
št32_t
 
»suÉ
;

542 
c
;

544 if(
locCache
!=
NULL
 && (
»suÉ
=*locCache)!=
UCASE_LOC_UNKNOWN
) {

545  
»suÉ
;

548 
»suÉ
=
UCASE_LOC_ROOT
;

559 
c
=*
loÿË
++;

560 if(
	`is_t
(
c
)) {

562 
c
=*
loÿË
++;

563 if(
	`is_u
(
c
)) {

564 
c
=*
loÿË
++;

566 if(
	`is_r
(
c
)) {

567 
c
=*
loÿË
;

568 if(
	`is_£p
(
c
)) {

569 
»suÉ
=
UCASE_LOC_TURKISH
;

572 } if(
	`is_a
(
c
)) {

574 
c
=*
loÿË
++;

575 if(
	`is_z
(
c
)) {

576 
c
=*
loÿË
++;

577 if(
	`is_e
(
c
)) {

578 
c
=*
loÿË
;

580 if(
	`is_£p
(
c
)) {

581 
»suÉ
=
UCASE_LOC_TURKISH
;

584 } if(
	`is_l
(
c
)) {

586 
c
=*
loÿË
++;

587 if(
	`is_i
(
c
)) {

588 
c
=*
loÿË
++;

590 if(
	`is_t
(
c
)) {

591 
c
=*
loÿË
;

592 if(
	`is_£p
(
c
)) {

593 
»suÉ
=
UCASE_LOC_LITHUANIAN
;

596 } if(
	`is_n
(
c
)) {

598 
c
=*
loÿË
++;

599 if(
	`is_l
(
c
)) {

600 
c
=*
loÿË
++;

601 if(
	`is_d
(
c
)) {

602 
c
=*
loÿË
;

604 if(
	`is_£p
(
c
)) {

605 
»suÉ
=
UCASE_LOC_DUTCH
;

610 if(
locCache
!=
NULL
) {

611 *
locCache
=
»suÉ
;

613  
»suÉ
;

614 
	}
}

624 
UBoŞ


625 
	$isFŞlowedByCa£dL‘‹r
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
, 
št8_t
 
dœ
) {

626 
UCh¬32
 
c
;

628 if(
™”
==
NULL
) {

629  
FALSE
;

632  ; (
c
=
	`™”
(
cÚ‹xt
, 
dœ
))>=0; dir=0) {

633 
št32_t
 
ty³
=
	`uÿ£_g‘Ty³OrIgnÜabË
(
c¥
, 
c
);

634 if(
ty³
&4) {

636 } if(
ty³
!=
UCASE_NONE
) {

637  
TRUE
;

639  
FALSE
;

643  
FALSE
;

644 
	}
}

647 
UBoŞ


648 
	$isP»ûdedBySoáDÙ‹d
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
) {

649 
UCh¬32
 
c
;

650 
št32_t
 
dÙTy³
;

651 
št8_t
 
dœ
;

653 if(
™”
==
NULL
) {

654  
FALSE
;

657 
dœ
=-1; (
c
=
	`™”
(
cÚ‹xt
, dir))>=0; dir=0) {

658 
dÙTy³
=
	`g‘DÙTy³
(
c¥
, 
c
);

659 if(
dÙTy³
==
UCASE_SOFT_DOTTED
) {

660  
TRUE
;

661 } if(
dÙTy³
!=
UCASE_OTHER_ACCENT
) {

662  
FALSE
;

666  
FALSE
;

667 
	}
}

704 
UBoŞ


705 
	$isP»ûdedBy_I
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
) {

706 
UCh¬32
 
c
;

707 
št32_t
 
dÙTy³
;

708 
št8_t
 
dœ
;

710 if(
™”
==
NULL
) {

711  
FALSE
;

714 
dœ
=-1; (
c
=
	`™”
(
cÚ‹xt
, dir))>=0; dir=0) {

715 if(
c
==0x49) {

716  
TRUE
;

718 
dÙTy³
=
	`g‘DÙTy³
(
c¥
, 
c
);

719 if(
dÙTy³
!=
UCASE_OTHER_ACCENT
) {

720  
FALSE
;

724  
FALSE
;

725 
	}
}

728 
UBoŞ


729 
	$isFŞlowedByMÜeAbove
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
) {

730 
UCh¬32
 
c
;

731 
št32_t
 
dÙTy³
;

732 
št8_t
 
dœ
;

734 if(
™”
==
NULL
) {

735  
FALSE
;

738 
dœ
=1; (
c
=
	`™”
(
cÚ‹xt
, dir))>=0; dir=0) {

739 
dÙTy³
=
	`g‘DÙTy³
(
c¥
, 
c
);

740 if(
dÙTy³
==
UCASE_ABOVE
) {

741  
TRUE
;

742 } if(
dÙTy³
!=
UCASE_OTHER_ACCENT
) {

743  
FALSE
;

747  
FALSE
;

748 
	}
}

751 
UBoŞ


752 
	$isFŞlowedByDÙAbove
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
) {

753 
UCh¬32
 
c
;

754 
št32_t
 
dÙTy³
;

755 
št8_t
 
dœ
;

757 if(
™”
==
NULL
) {

758  
FALSE
;

761 
dœ
=1; (
c
=
	`™”
(
cÚ‹xt
, dir))>=0; dir=0) {

762 if(
c
==0x307) {

763  
TRUE
;

765 
dÙTy³
=
	`g‘DÙTy³
(
c¥
, 
c
);

766 if(
dÙTy³
!=
UCASE_OTHER_ACCENT
) {

767  
FALSE
;

771  
FALSE
;

772 
	}
}

774 
U_CAPI
 
št32_t
 
U_EXPORT2


775 
	$uÿ£_toFuÎLow”
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
,

776 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
,

777 cÚ¡ 
UCh¬
 **
pSŒšg
,

778 cÚ¡ *
loÿË
, 
št32_t
 *
locCache
)

780 
UCh¬32
 
»suÉ
=
c
;

781 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

782 if(!
	`PROPS_HAS_EXCEPTION
(
´İs
)) {

783 if(
	`UCASE_GET_TYPE
(
´İs
)>=
UCASE_UPPER
) {

784 
»suÉ
=
c
+
	`UCASE_GET_DELTA
(
´İs
);

787 cÚ¡ 
ušt16_t
 *
³
=
	`GET_EXCEPTIONS
(
c¥
, 
´İs
), *
³2
;

788 
ušt16_t
 
excWÜd
=*
³
++;

789 
št32_t
 
fuÎ
;

791 
³2
=
³
;

793 if(
excWÜd
&
UCASE_EXC_CONDITIONAL_SPECIAL
) {

795 
št32_t
 
loc
=
	`uÿ£_g‘Ca£LoÿË
(
loÿË
, 
locCache
);

803 ifĞ
loc
==
UCASE_LOC_LITHUANIAN
 &&

805 (((
c
==0x49 || c==0x4a || c==0x12e) &&

806 
	`isFŞlowedByMÜeAbove
(
c¥
, 
™”
, 
cÚ‹xt
)) ||

808 (
c
==0xcc || c==0xcd || c==0x128))

826 
c
) {

828 *
pSŒšg
=
iDÙ
;

831 *
pSŒšg
=
jDÙ
;

834 *
pSŒšg
=
iOgÚekDÙ
;

837 *
pSŒšg
=
iDÙG¿ve
;

840 *
pSŒšg
=
iDÙAcu‹
;

843 *
pSŒšg
=
iDÙTde
;

849 } if(
loc
==
UCASE_LOC_TURKISH
 && 
c
==0x130) {

858 } if(
loc
==
UCASE_LOC_TURKISH
 && 
c
==0x307 && 
	`isP»ûdedBy_I
(
c¥
, 
™”
, 
cÚ‹xt
)) {

867 } if(
loc
==
UCASE_LOC_TURKISH
 && 
c
==0x49 && !
	`isFŞlowedByDÙAbove
(
c¥
, 
™”
, 
cÚ‹xt
)) {

875 } if(
c
==0x130) {

881 *
pSŒšg
=
iDÙ
;

883 } ifĞ
c
==0x3a3 &&

884 !
	`isFŞlowedByCa£dL‘‹r
(
c¥
, 
™”
, 
cÚ‹xt
, 1) &&

885 
	`isFŞlowedByCa£dL‘‹r
(
c¥
, 
™”
, 
cÚ‹xt
, -1)

897 } if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_FULL_MAPPINGS
)) {

898 
	`GET_SLOT_VALUE
(
excWÜd
, 
UCASE_EXC_FULL_MAPPINGS
, 
³
, 
fuÎ
);

899 
fuÎ
&=
UCASE_FULL_LOWER
;

900 if(
fuÎ
!=0) {

902 *
pSŒšg
=
³
+1;

905  
fuÎ
;

909 if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_LOWER
)) {

910 
	`GET_SLOT_VALUE
(
excWÜd
, 
UCASE_EXC_LOWER
, 
³2
, 
»suÉ
);

914  (
»suÉ
==
c
) ? ~result :„esult;

915 
	}
}

918 
št32_t


919 
	$toUµ”OrT™Ë
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
,

920 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
,

921 cÚ¡ 
UCh¬
 **
pSŒšg
,

922 cÚ¡ *
loÿË
, 
št32_t
 *
locCache
,

923 
UBoŞ
 
uµ”NÙT™Ë
) {

924 
UCh¬32
 
»suÉ
=
c
;

925 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

926 if(!
	`PROPS_HAS_EXCEPTION
(
´İs
)) {

927 if(
	`UCASE_GET_TYPE
(
´İs
)==
UCASE_LOWER
) {

928 
»suÉ
=
c
+
	`UCASE_GET_DELTA
(
´İs
);

931 cÚ¡ 
ušt16_t
 *
³
=
	`GET_EXCEPTIONS
(
c¥
, 
´İs
), *
³2
;

932 
ušt16_t
 
excWÜd
=*
³
++;

933 
št32_t
 
fuÎ
, 
idx
;

935 
³2
=
³
;

937 if(
excWÜd
&
UCASE_EXC_CONDITIONAL_SPECIAL
) {

939 
št32_t
 
loc
=
	`uÿ£_g‘Ca£LoÿË
(
loÿË
, 
locCache
);

941 if(
loc
==
UCASE_LOC_TURKISH
 && 
c
==0x69) {

954 } if(
loc
==
UCASE_LOC_LITHUANIAN
 && 
c
==0x307 && 
	`isP»ûdedBySoáDÙ‹d
(
c¥
, 
™”
, 
cÚ‹xt
)) {

968 } if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_FULL_MAPPINGS
)) {

969 
	`GET_SLOT_VALUE
(
excWÜd
, 
UCASE_EXC_FULL_MAPPINGS
, 
³
, 
fuÎ
);

972 ++
³
;

975 
³
+=
fuÎ
&
UCASE_FULL_LOWER
;

976 
fuÎ
>>=4;

977 
³
+=
fuÎ
&0xf;

978 
fuÎ
>>=4;

980 if(
uµ”NÙT™Ë
) {

981 
fuÎ
&=0xf;

984 
³
+=
fuÎ
&0xf;

985 
fuÎ
=(full>>4)&0xf;

988 if(
fuÎ
!=0) {

990 *
pSŒšg
=
³
;

993  
fuÎ
;

997 if(!
uµ”NÙT™Ë
 && 
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_TITLE
)) {

998 
idx
=
UCASE_EXC_TITLE
;

999 } if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_UPPER
)) {

1001 
idx
=
UCASE_EXC_UPPER
;

1003  ~
c
;

1005 
	`GET_SLOT_VALUE
(
excWÜd
, 
idx
, 
³2
, 
»suÉ
);

1008  (
»suÉ
==
c
) ? ~result :„esult;

1009 
	}
}

1011 
U_CAPI
 
št32_t
 
U_EXPORT2


1012 
	$uÿ£_toFuÎUµ”
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
,

1013 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
,

1014 cÚ¡ 
UCh¬
 **
pSŒšg
,

1015 cÚ¡ *
loÿË
, 
št32_t
 *
locCache
) {

1016  
	`toUµ”OrT™Ë
(
c¥
, 
c
, 
™”
, 
cÚ‹xt
, 
pSŒšg
, 
loÿË
, 
locCache
, 
TRUE
);

1017 
	}
}

1019 
U_CAPI
 
št32_t
 
U_EXPORT2


1020 
	$uÿ£_toFuÎT™Ë
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
,

1021 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
,

1022 cÚ¡ 
UCh¬
 **
pSŒšg
,

1023 cÚ¡ *
loÿË
, 
št32_t
 *
locCache
) {

1024  
	`toUµ”OrT™Ë
(
c¥
, 
c
, 
™”
, 
cÚ‹xt
, 
pSŒšg
, 
loÿË
, 
locCache
, 
FALSE
);

1025 
	}
}

1069 
U_CAPI
 
UCh¬32
 
U_EXPORT2


1070 
	$uÿ£_fŞd
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
, 
ušt32_t
 
İtiÚs
) {

1071 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

1072 if(!
	`PROPS_HAS_EXCEPTION
(
´İs
)) {

1073 if(
	`UCASE_GET_TYPE
(
´İs
)>=
UCASE_UPPER
) {

1074 
c
+=
	`UCASE_GET_DELTA
(
´İs
);

1077 cÚ¡ 
ušt16_t
 *
³
=
	`GET_EXCEPTIONS
(
c¥
, 
´İs
);

1078 
ušt16_t
 
excWÜd
=*
³
++;

1079 
št32_t
 
idx
;

1080 if(
excWÜd
&
UCASE_EXC_CONDITIONAL_FOLD
) {

1082 if((
İtiÚs
&
_FOLD_CASE_OPTIONS_MASK
)==
U_FOLD_CASE_DEFAULT
) {

1084 if(
c
==0x49) {

1087 } if(
c
==0x130) {

1089  
c
;

1093 if(
c
==0x49) {

1096 } if(
c
==0x130) {

1102 if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_FOLD
)) {

1103 
idx
=
UCASE_EXC_FOLD
;

1104 } if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_LOWER
)) {

1105 
idx
=
UCASE_EXC_LOWER
;

1107  
c
;

1109 
	`GET_SLOT_VALUE
(
excWÜd
, 
idx
, 
³
, 
c
);

1111  
c
;

1112 
	}
}

1129 
U_CAPI
 
št32_t
 
U_EXPORT2


1130 
	$uÿ£_toFuÎFŞdšg
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
,

1131 cÚ¡ 
UCh¬
 **
pSŒšg
,

1132 
ušt32_t
 
İtiÚs
)

1134 
UCh¬32
 
»suÉ
=
c
;

1135 
ušt16_t
 
´İs
=
	`UTRIE2_GET16
(&
c¥
->
Œ›
, 
c
);

1136 if(!
	`PROPS_HAS_EXCEPTION
(
´İs
)) {

1137 if(
	`UCASE_GET_TYPE
(
´İs
)>=
UCASE_UPPER
) {

1138 
»suÉ
=
c
+
	`UCASE_GET_DELTA
(
´İs
);

1141 cÚ¡ 
ušt16_t
 *
³
=
	`GET_EXCEPTIONS
(
c¥
, 
´İs
), *
³2
;

1142 
ušt16_t
 
excWÜd
=*
³
++;

1143 
št32_t
 
fuÎ
, 
idx
;

1145 
³2
=
³
;

1147 if(
excWÜd
&
UCASE_EXC_CONDITIONAL_FOLD
) {

1149 if((
İtiÚs
&
_FOLD_CASE_OPTIONS_MASK
)==
U_FOLD_CASE_DEFAULT
) {

1151 if(
c
==0x49) {

1154 } if(
c
==0x130) {

1156 *
pSŒšg
=
iDÙ
;

1161 if(
c
==0x49) {

1164 } if(
c
==0x130) {

1169 } if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_FULL_MAPPINGS
)) {

1170 
	`GET_SLOT_VALUE
(
excWÜd
, 
UCASE_EXC_FULL_MAPPINGS
, 
³
, 
fuÎ
);

1173 ++
³
;

1176 
³
+=
fuÎ
&
UCASE_FULL_LOWER
;

1177 
fuÎ
=(full>>4)&0xf;

1179 if(
fuÎ
!=0) {

1181 *
pSŒšg
=
³
;

1184  
fuÎ
;

1188 if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_FOLD
)) {

1189 
idx
=
UCASE_EXC_FOLD
;

1190 } if(
	`HAS_SLOT
(
excWÜd
, 
UCASE_EXC_LOWER
)) {

1191 
idx
=
UCASE_EXC_LOWER
;

1193  ~
c
;

1195 
	`GET_SLOT_VALUE
(
excWÜd
, 
idx
, 
³2
, 
»suÉ
);

1198  (
»suÉ
==
c
) ? ~result :„esult;

1199 
	}
}

1203 
	#GET_CASE_PROPS
(è&
uÿ£_´İs_sšgËtÚ


	)

1207 
U_CAPI
 
UBoŞ
 
U_EXPORT2


1208 
	$u_isULow”ÿ£
(
UCh¬32
 
c
) {

1209  (
UBoŞ
)(
UCASE_LOWER
==
	`uÿ£_g‘Ty³
(
	`GET_CASE_PROPS
(), 
c
));

1210 
	}
}

1212 
U_CAPI
 
UBoŞ
 
U_EXPORT2


1213 
	$u_isUUµ”ÿ£
(
UCh¬32
 
c
) {

1214  (
UBoŞ
)(
UCASE_UPPER
==
	`uÿ£_g‘Ty³
(
	`GET_CASE_PROPS
(), 
c
));

1215 
	}
}

1218 
U_CAPI
 
UCh¬32
 
U_EXPORT2


1219 
	$u_tŞow”
(
UCh¬32
 
c
) {

1220  
	`uÿ£_tŞow”
(
	`GET_CASE_PROPS
(), 
c
);

1221 
	}
}

1224 
U_CAPI
 
UCh¬32
 
U_EXPORT2


1225 
	$u_touµ”
(
UCh¬32
 
c
) {

1226  
	`uÿ£_touµ”
(
	`GET_CASE_PROPS
(), 
c
);

1227 
	}
}

1230 
U_CAPI
 
UCh¬32
 
U_EXPORT2


1231 
	$u_tÙ™Ë
(
UCh¬32
 
c
) {

1232  
	`uÿ£_tÙ™Ë
(
	`GET_CASE_PROPS
(), 
c
);

1233 
	}
}

1236 
U_CAPI
 
UCh¬32
 
U_EXPORT2


1237 
	$u_fŞdCa£
(
UCh¬32
 
c
, 
ušt32_t
 
İtiÚs
) {

1238  
	`uÿ£_fŞd
(
	`GET_CASE_PROPS
(), 
c
, 
İtiÚs
);

1239 
	}
}

1241 
U_CFUNC
 
št32_t
 
U_EXPORT2


1242 
	$uÿ£_hasBš¬yPrİ”ty
(
UCh¬32
 
c
, 
UPrİ”ty
 
which
) {

1244 cÚ¡ 
UCh¬
 *
»suÉSŒšg
;

1245 
št32_t
 
locCache
;

1246 cÚ¡ 
UCa£Prİs
 *
c¥
=
	`GET_CASE_PROPS
();

1247 if(
c¥
==
NULL
) {

1248  
FALSE
;

1250 
which
) {

1251 
UCHAR_LOWERCASE
:

1252  (
UBoŞ
)(
UCASE_LOWER
==
	`uÿ£_g‘Ty³
(
c¥
, 
c
));

1253 
UCHAR_UPPERCASE
:

1254  (
UBoŞ
)(
UCASE_UPPER
==
	`uÿ£_g‘Ty³
(
c¥
, 
c
));

1255 
UCHAR_SOFT_DOTTED
:

1256  
	`uÿ£_isSoáDÙ‹d
(
c¥
, 
c
);

1257 
UCHAR_CASE_SENSITIVE
:

1258  
	`uÿ£_isCa£S’s™ive
(
c¥
, 
c
);

1259 
UCHAR_CASED
:

1260  (
UBoŞ
)(
UCASE_NONE
!=
	`uÿ£_g‘Ty³
(
c¥
, 
c
));

1261 
UCHAR_CASE_IGNORABLE
:

1262  (
UBoŞ
)(
	`uÿ£_g‘Ty³OrIgnÜabË
(
c¥
, 
c
)>>2);

1275 
UCHAR_CHANGES_WHEN_LOWERCASED
:

1276 
locCache
=
UCASE_LOC_ROOT
;

1277  (
UBoŞ
)(
	`uÿ£_toFuÎLow”
(
c¥
, 
c
, 
NULL
, NULL, &
»suÉSŒšg
, "", &
locCache
)>=0);

1278 
UCHAR_CHANGES_WHEN_UPPERCASED
:

1279 
locCache
=
UCASE_LOC_ROOT
;

1280  (
UBoŞ
)(
	`uÿ£_toFuÎUµ”
(
c¥
, 
c
, 
NULL
, NULL, &
»suÉSŒšg
, "", &
locCache
)>=0);

1281 
UCHAR_CHANGES_WHEN_TITLECASED
:

1282 
locCache
=
UCASE_LOC_ROOT
;

1283  (
UBoŞ
)(
	`uÿ£_toFuÎT™Ë
(
c¥
, 
c
, 
NULL
, NULL, &
»suÉSŒšg
, "", &
locCache
)>=0);

1285 
UCHAR_CHANGES_WHEN_CASEMAPPED
:

1286 
locCache
=
UCASE_LOC_ROOT
;

1287  (
UBoŞ
)(

1288 
	`uÿ£_toFuÎLow”
(
c¥
, 
c
, 
NULL
, NULL, &
»suÉSŒšg
, "", &
locCache
)>=0 ||

1289 
	`uÿ£_toFuÎUµ”
(
c¥
, 
c
, 
NULL
, NULL, &
»suÉSŒšg
, "", &
locCache
)>=0 ||

1290 
	`uÿ£_toFuÎT™Ë
(
c¥
, 
c
, 
NULL
, NULL, &
»suÉSŒšg
, "", &
locCache
)>=0);

1292  
FALSE
;

1294 
	}
}

	@ucase.h

19 #iâdeà
__UCASE_H__


20 
	#__UCASE_H__


	)

22 
	~"unicode/uty³s.h
"

23 
	~"unicode/u£t.h
"

24 
	~"u£t_imp.h
"

25 
	~"ud©aswp.h
"

27 
U_CDECL_BEGIN


31 
	gUCa£Prİs
;

32 
UCa£Prİs
 
	tUCa£Prİs
;

34 
U_CAPI
 cÚ¡ 
UCa£Prİs
 * 
U_EXPORT2


35 
uÿ£_g‘SšgËtÚ
();

37 
U_CAPI
 
št32_t
 
U_EXPORT2


38 
uÿ£_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

39 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

40 
UE¼ÜCode
 *
pE¼ÜCode
);

42 
U_CFUNC
 
U_EXPORT2


43 
uÿ£_addPrİ”tyS¹s
(cÚ¡ 
UCa£Prİs
 *
c¥
, cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 *
pE¼ÜCode
);

50 
U_CFUNC
 
št32_t


51 
uÿ£_g‘Ca£LoÿË
(cÚ¡ *
loÿË
, 
št32_t
 *
locCache
);

55 
	mUCASE_LOC_UNKNOWN
,

56 
	mUCASE_LOC_ROOT
,

57 
	mUCASE_LOC_TURKISH
,

58 
	mUCASE_LOC_LITHUANIAN
,

59 
	mUCASE_LOC_DUTCH


68 
	#_STRCASECMP_OPTIONS_MASK
 0xffff

	)

76 
	#_FOLD_CASE_OPTIONS_MASK
 0xff

	)

80 
U_CAPI
 
UCh¬32
 
U_EXPORT2


81 
uÿ£_tŞow”
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
);

83 
U_CAPI
 
UCh¬32
 
U_EXPORT2


84 
uÿ£_touµ”
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
);

86 
U_CAPI
 
UCh¬32
 
U_EXPORT2


87 
uÿ£_tÙ™Ë
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
);

89 
U_CAPI
 
UCh¬32
 
U_EXPORT2


90 
uÿ£_fŞd
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
, 
ušt32_t
 
İtiÚs
);

101 
U_CFUNC
 
U_EXPORT2


102 
uÿ£_addCa£Closu»
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
, cÚ¡ 
US‘Add”
 *
§
);

116 
U_CFUNC
 
UBoŞ
 
U_EXPORT2


117 
uÿ£_addSŒšgCa£Closu»
(cÚ¡ 
UCa£Prİs
 *
c¥
, cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, cÚ¡ 
US‘Add”
 *
§
);

120 
U_CAPI
 
št32_t
 
U_EXPORT2


121 
uÿ£_g‘Ty³
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
);

124 
U_CAPI
 
št32_t
 
U_EXPORT2


125 
uÿ£_g‘Ty³OrIgnÜabË
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
);

127 
U_CAPI
 
UBoŞ
 
U_EXPORT2


128 
uÿ£_isSoáDÙ‹d
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
);

130 
U_CAPI
 
UBoŞ
 
U_EXPORT2


131 
uÿ£_isCa£S’s™ive
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
);

153 
UCh¬32
 
	tU_CALLCONV


154 
	tUCa£CÚ‹xtI‹¿tÜ
(*
	tcÚ‹xt
, 
	tšt8_t
 
	tdœ
);

160 
	sUCa£CÚ‹xt
 {

161 *
	mp
;

162 
št32_t
 
	m¡¬t
, 
	mšdex
, 
	mlim™
;

163 
št32_t
 
	mıS¹
, 
	mıLim™
;

164 
št8_t
 
	mdœ
;

165 
št8_t
 
	mb1
, 
	mb2
, 
	mb3
;

167 
UCa£CÚ‹xt
 
	tUCa£CÚ‹xt
;

184 
	mUCASE_MAX_STRING_LENGTH
=0x1f

208 
U_CAPI
 
št32_t
 
U_EXPORT2


209 
uÿ£_toFuÎLow”
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
,

210 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
,

211 cÚ¡ 
UCh¬
 **
pSŒšg
,

212 cÚ¡ *
loÿË
, 
št32_t
 *
locCache
);

214 
U_CAPI
 
št32_t
 
U_EXPORT2


215 
uÿ£_toFuÎUµ”
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
,

216 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
,

217 cÚ¡ 
UCh¬
 **
pSŒšg
,

218 cÚ¡ *
loÿË
, 
št32_t
 *
locCache
);

220 
U_CAPI
 
št32_t
 
U_EXPORT2


221 
uÿ£_toFuÎT™Ë
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
,

222 
UCa£CÚ‹xtI‹¿tÜ
 *
™”
, *
cÚ‹xt
,

223 cÚ¡ 
UCh¬
 **
pSŒšg
,

224 cÚ¡ *
loÿË
, 
št32_t
 *
locCache
);

226 
U_CAPI
 
št32_t
 
U_EXPORT2


227 
uÿ£_toFuÎFŞdšg
(cÚ¡ 
UCa£Prİs
 *
c¥
, 
UCh¬32
 
c
,

228 cÚ¡ 
UCh¬
 **
pSŒšg
,

229 
ušt32_t
 
İtiÚs
);

231 
U_CFUNC
 
št32_t
 
U_EXPORT2


232 
uÿ£_hasBš¬yPrİ”ty
(
UCh¬32
 
c
, 
UPrİ”ty
 
which
);

235 
U_CDECL_BEGIN


240 
št32_t
 
	tU_CALLCONV


241 
	tUCa£M­FuÎ
(cÚ¡ 
	tUCa£Prİs
 *
	tc¥
, 
	tUCh¬32
 
	tc
,

242 
	tUCa£CÚ‹xtI‹¿tÜ
 *
	t™”
, *
	tcÚ‹xt
,

243 cÚ¡ 
	tUCh¬
 **
	tpSŒšg
,

244 cÚ¡ *
	tloÿË
, 
	tšt32_t
 *
	tlocCache
);

246 
	gU_CDECL_END


250 
	#UCASE_DATA_NAME
 "uÿ£"

	)

251 
	#UCASE_DATA_TYPE
 "icu"

	)

254 
	#UCASE_FMT_0
 0x63

	)

255 
	#UCASE_FMT_1
 0x41

	)

256 
	#UCASE_FMT_2
 0x53

	)

257 
	#UCASE_FMT_3
 0x45

	)

261 
	mUCASE_IX_INDEX_TOP
,

262 
	mUCASE_IX_LENGTH
,

263 
	mUCASE_IX_TRIE_SIZE
,

264 
	mUCASE_IX_EXC_LENGTH
,

265 
	mUCASE_IX_UNFOLD_LENGTH
,

267 
	mUCASE_IX_MAX_FULL_LENGTH
=15,

268 
	mUCASE_IX_TOP
=16

274 
	#UCASE_TYPE_MASK
 3

	)

276 
	mUCASE_NONE
,

277 
	mUCASE_LOWER
,

278 
	mUCASE_UPPER
,

279 
	mUCASE_TITLE


282 
	#UCASE_GET_TYPE
(
´İs
è(Õrİs)&
UCASE_TYPE_MASK
)

	)

284 
	#UCASE_SENSITIVE
 4

	)

285 
	#UCASE_EXCEPTION
 8

	)

287 
	#UCASE_DOT_MASK
 0x30

	)

289 
	mUCASE_NO_DOT
=0,

290 
	mUCASE_SOFT_DOTTED
=0x10,

291 
	mUCASE_ABOVE
=0x20,

292 
	mUCASE_OTHER_ACCENT
=0x30

296 
	#UCASE_DELTA_SHIFT
 6

	)

297 
	#UCASE_DELTA_MASK
 0xffc0

	)

298 
	#UCASE_MAX_DELTA
 0x1ff

	)

299 
	#UCASE_MIN_DELTA
 (-
UCASE_MAX_DELTA
-1)

	)

301 
	#UCASE_GET_DELTA
(
´İs
è((
št16_t
)Õrİs)>>
UCASE_DELTA_SHIFT
)

	)

304 
	#UCASE_CASE_IGNORABLE
 0x40

	)

307 
	#UCASE_EXC_SHIFT
 4

	)

308 
	#UCASE_EXC_MASK
 0xfff0

	)

309 
	#UCASE_MAX_EXCEPTIONS
 0x1000

	)

315 
	mUCASE_EXC_LOWER
,

316 
	mUCASE_EXC_FOLD
,

317 
	mUCASE_EXC_UPPER
,

318 
	mUCASE_EXC_TITLE
,

319 
	mUCASE_EXC_4
,

320 
	mUCASE_EXC_5
,

321 
	mUCASE_EXC_CLOSURE
,

322 
	mUCASE_EXC_FULL_MAPPINGS
,

323 
	mUCASE_EXC_ALL_SLOTS


327 
	#UCASE_EXC_DOUBLE_SLOTS
 0x100

	)

331 
	#UCASE_EXC_CASE_IGNORABLE
 0x800

	)

334 
	#UCASE_EXC_DOT_SHIFT
 8

	)

337 
	#UCASE_EXC_DOT_MASK
 0x3000

	)

339 
	mUCASE_EXC_NO_DOT
=0,

340 
	mUCASE_EXC_SOFT_DOTTED
=0x1000,

341 
	mUCASE_EXC_ABOVE
=0x2000,

342 
	mUCASE_EXC_OTHER_ACCENT
=0x3000

346 
	#UCASE_EXC_CONDITIONAL_SPECIAL
 0x4000

	)

347 
	#UCASE_EXC_CONDITIONAL_FOLD
 0x8000

	)

350 
	#UCASE_FULL_LOWER
 0xf

	)

351 
	#UCASE_FULL_FOLDING
 0xf0

	)

352 
	#UCASE_FULL_UPPER
 0xf00

	)

353 
	#UCASE_FULL_TITLE
 0xf000

	)

356 
	#UCASE_FULL_MAPPINGS_MAX_LENGTH
 (4*0xf)

	)

357 
	#UCASE_CLOSURE_MAX_LENGTH
 0xf

	)

361 
	mUCASE_UNFOLD_ROWS
,

362 
	mUCASE_UNFOLD_ROW_WIDTH
,

363 
	mUCASE_UNFOLD_STRING_WIDTH


366 
	gU_CDECL_END


	@ucase_props_data.c

10 cÚ¡ 
UV”siÚInfo
 
	guÿ£_´İs_d©aV”siÚ
={6,0,0,0};

12 cÚ¡ 
št32_t
 
	guÿ£_´İs_šdexes
[
UCASE_IX_TOP
]={0x10,0x5654,0x4918,0x50c,0x172,0,0,0,0,0,0,0,0,0,0,3};

14 cÚ¡ 
ušt16_t
 
	guÿ£_´İs_Œ›Index
[9348]={

602 cÚ¡ 
ušt16_t
 
	guÿ£_´İs_exû±iÚs
[1292]={

686 cÚ¡ 
ušt16_t
 
	guÿ£_´İs_unfŞd
[370]={

713 cÚ¡ 
UCa£Prİs
 
	guÿ£_´İs_sšgËtÚ
={

714 
NULL
,

715 
uÿ£_´İs_šdexes
,

716 
uÿ£_´İs_exû±iÚs
,

717 
uÿ£_´İs_unfŞd
,

719 
uÿ£_´İs_Œ›Index
,

720 
uÿ£_´İs_Œ›Index
+2824,

721 
NULL
,

730 
NULL
, 0, 
FALSE
, FALSE, 0, NULL

	@ucasemap.c

19 
	~"unicode/uty³s.h
"

20 
	~"unicode/uloc.h
"

21 
	~"unicode/u¡ršg.h
"

22 
	~"unicode/uÿ£m­.h
"

23 #ià!
UCONFIG_NO_BREAK_ITERATION


24 
	~"unicode/ubrk.h
"

25 
	~"unicode/u‹xt.h
"

27 
	~"cmemÜy.h
"

28 
	~"c¡ršg.h
"

29 
	~"uÿ£.h
"

30 
	~"u¡r_imp.h
"

34 
U_CAPI
 
UCa£M­
 * 
U_EXPORT2


35 
	$uÿ£m­_İ’
(cÚ¡ *
loÿË
, 
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

36 
UCa£M­
 *
csm
;

38 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

39  
NULL
;

42 
csm
=(
UCa£M­
 *)
	`u´v_m®loc
((UCaseMap));

43 if(
csm
==
NULL
) {

44  
NULL
;

46 
	`u´v_mem£t
(
csm
, 0, (
UCa£M­
));

48 
csm
->
c¥
=
	`uÿ£_g‘SšgËtÚ
();

49 
	`uÿ£m­_£tLoÿË
(
csm
, 
loÿË
, 
pE¼ÜCode
);

50 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

51 
	`u´v_ä“
(
csm
);

52  
NULL
;

55 
csm
->
İtiÚs
=options;

56  
csm
;

57 
	}
}

59 
U_CAPI
 
U_EXPORT2


60 
	$uÿ£m­_şo£
(
UCa£M­
 *
csm
) {

61 if(
csm
!=
NULL
) {

62 #ià!
UCONFIG_NO_BREAK_ITERATION


63 
	`ubrk_şo£
(
csm
->
™”
);

65 
	`u´v_ä“
(
csm
);

67 
	}
}

69 
U_CAPI
 cÚ¡ * 
U_EXPORT2


70 
	$uÿ£m­_g‘LoÿË
(cÚ¡ 
UCa£M­
 *
csm
) {

71  
csm
->
loÿË
;

72 
	}
}

74 
U_CAPI
 
ušt32_t
 
U_EXPORT2


75 
	$uÿ£m­_g‘O±iÚs
(cÚ¡ 
UCa£M­
 *
csm
) {

76  
csm
->
İtiÚs
;

77 
	}
}

79 
U_CAPI
 
U_EXPORT2


80 
	$uÿ£m­_£tLoÿË
(
UCa£M­
 *
csm
, cÚ¡ *
loÿË
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

81 
št32_t
 
Ëngth
;

83 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

87 
Ëngth
=
	`uloc_g‘Name
(
loÿË
, 
csm
->loÿË, (
št32_t
)(csm->loÿË), 
pE¼ÜCode
);

88 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
 || 
Ëngth
==(
csm
->
loÿË
)) {

89 *
pE¼ÜCode
=
U_ZERO_ERROR
;

91 
Ëngth
=
	`uloc_g‘Lªguage
(
loÿË
, 
csm
->loÿË, (
št32_t
)(csm->loÿË), 
pE¼ÜCode
);

93 if(
Ëngth
==(
csm
->
loÿË
)) {

94 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

96 
csm
->
locCache
=0;

97 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

98 
	`uÿ£_g‘Ca£LoÿË
(
csm
->
loÿË
, &csm->
locCache
);

100 
csm
->
loÿË
[0]=0;

102 
	}
}

104 
U_CAPI
 
U_EXPORT2


105 
	$uÿ£m­_£tO±iÚs
(
UCa£M­
 *
csm
, 
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

106 
csm
->
İtiÚs
=options;

107 
	}
}

109 #ià!
UCONFIG_NO_BREAK_ITERATION


111 
U_CAPI
 cÚ¡ 
UB»akI‹¿tÜ
 * 
U_EXPORT2


112 
	$uÿ£m­_g‘B»akI‹¿tÜ
(cÚ¡ 
UCa£M­
 *
csm
) {

113  
csm
->
™”
;

114 
	}
}

116 
U_CAPI
 
U_EXPORT2


117 
	$uÿ£m­_£tB»akI‹¿tÜ
(
UCa£M­
 *
csm
, 
UB»akI‹¿tÜ
 *
™”ToAdİt
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

118 
	`ubrk_şo£
(
csm
->
™”
);

119 
csm
->
™”
=
™”ToAdİt
;

120 
	}
}

129 
U_INLINE
 
št32_t


130 
	$­³ndResuÉ
(
ušt8_t
 *
de¡
, 
št32_t
 
de¡Index
, iÁ32_ˆ
de¡C­ac™y
,

131 
št32_t
 
»suÉ
, cÚ¡ 
UCh¬
 *
s
) {

132 
UCh¬32
 
c
;

133 
št32_t
 
Ëngth
, 
de¡L’gth
;

134 
UE¼ÜCode
 
”rÜCode
;

137 if(
»suÉ
<0) {

139 
c
=~
»suÉ
;

140 
Ëngth
=-1;

141 } if(
»suÉ
<=
UCASE_MAX_STRING_LENGTH
) {

142 
c
=
U_SENTINEL
;

143 
Ëngth
=
»suÉ
;

145 
c
=
»suÉ
;

146 
Ëngth
=-1;

149 if(
de¡Index
<
de¡C­ac™y
) {

151 if(
Ëngth
<0) {

153 
UBoŞ
 
isE¼Ü
=
FALSE
;

154 
	`U8_APPEND
(
de¡
, 
de¡Index
, 
de¡C­ac™y
, 
c
, 
isE¼Ü
);

155 if(
isE¼Ü
) {

157 
de¡Index
+=
	`U8_LENGTH
(
c
);

161 
”rÜCode
=
U_ZERO_ERROR
;

162 
	`u_¡rToUTF8
(

163 (*)(
de¡
+
de¡Index
), 
de¡C­ac™y
-de¡Index, &
de¡L’gth
,

164 
s
, 
Ëngth
,

165 &
”rÜCode
);

166 
de¡Index
+=
de¡L’gth
;

171 if(
Ëngth
<0) {

172 
de¡Index
+=
	`U8_LENGTH
(
c
);

174 
”rÜCode
=
U_ZERO_ERROR
;

175 
	`u_¡rToUTF8
(

176 
NULL
, 0, &
de¡L’gth
,

177 
s
, 
Ëngth
,

178 &
”rÜCode
);

179 
de¡Index
+=
de¡L’gth
;

182  
de¡Index
;

183 
	}
}

185 
UCh¬32
 
U_CALLCONV


186 
	$utf8_ÿ£CÚ‹xtI‹¿tÜ
(*
cÚ‹xt
, 
št8_t
 
dœ
) {

187 
UCa£CÚ‹xt
 *
csc
=(UCa£CÚ‹xˆ*)
cÚ‹xt
;

188 
UCh¬32
 
c
;

190 if(
dœ
<0) {

192 
csc
->
šdex
=csc->
ıS¹
;

193 
csc
->
dœ
=dir;

194 } if(
dœ
>0) {

196 
csc
->
šdex
=csc->
ıLim™
;

197 
csc
->
dœ
=dir;

200 
dœ
=
csc
->dir;

203 if(
dœ
<0) {

204 if(
csc
->
¡¬t
<csc->
šdex
) {

205 
	`U8_PREV
((cÚ¡ 
ušt8_t
 *)
csc
->
p
, csc->
¡¬t
, csc->
šdex
, 
c
);

206  
c
;

209 if(
csc
->
šdex
<csc->
lim™
) {

210 
	`U8_NEXT
((cÚ¡ 
ušt8_t
 *)
csc
->
p
, csc->
šdex
, csc->
lim™
, 
c
);

211  
c
;

214  
U_SENTINEL
;

215 
	}
}

221 
št32_t


222 
	$_ÿ£M­
(cÚ¡ 
UCa£M­
 *
csm
, 
UCa£M­FuÎ
 *
m­
,

223 
ušt8_t
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

224 cÚ¡ 
ušt8_t
 *
¤c
, 
UCa£CÚ‹xt
 *
csc
,

225 
št32_t
 
¤cS¹
, iÁ32_ˆ
¤cLim™
,

226 
UE¼ÜCode
 *
pE¼ÜCode
) {

227 cÚ¡ 
UCh¬
 *
s
;

228 
UCh¬32
 
c
, 
c2
 = 0;

229 
št32_t
 
¤cIndex
, 
de¡Index
;

230 
št32_t
 
locCache
;

232 
locCache
=
csm
->locCache;

235 
¤cIndex
=
¤cS¹
;

236 
de¡Index
=0;

237 
¤cIndex
<
¤cLim™
) {

238 
csc
->
ıS¹
=
¤cIndex
;

239 
	`U8_NEXT
(
¤c
, 
¤cIndex
, 
¤cLim™
, 
c
);

240 
csc
->
ıLim™
=
¤cIndex
;

241 if(
c
<0) {

242 
št32_t
 
i
=
csc
->
ıS¹
;

243 
de¡Index
<
de¡C­ac™y
 && 
i
<
¤cIndex
) {

244 
de¡
[
de¡Index
++]=
¤c
[
i
++];

248 
c
=
	`m­
(
csm
->
c¥
, c, 
utf8_ÿ£CÚ‹xtI‹¿tÜ
, 
csc
, &
s
, csm->
loÿË
, &
locCache
);

249 if((
de¡Index
<
de¡C­ac™y
è&& (
c
<0 ? (
c2
=~c)<=0x7à: 
UCASE_MAX_STRING_LENGTH
<c && (c2=c)<=0x7f)) {

251 
de¡
[
de¡Index
++]=(
ušt8_t
)
c2
;

253 
de¡Index
=
	`­³ndResuÉ
(
de¡
, de¡Index, 
de¡C­ac™y
, 
c
, 
s
);

257 if(
de¡Index
>
de¡C­ac™y
) {

258 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

260  
de¡Index
;

261 
	}
}

263 #ià!
UCONFIG_NO_BREAK_ITERATION


268 
št32_t


269 
	$_toT™Ë
(
UCa£M­
 *
csm
,

270 
ušt8_t
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

271 cÚ¡ 
ušt8_t
 *
¤c
, 
UCa£CÚ‹xt
 *
csc
,

272 
št32_t
 
¤cL’gth
,

273 
UE¼ÜCode
 *
pE¼ÜCode
) {

274 
UText
 
u‹xt
=
UTEXT_INITIALIZER
;

275 cÚ¡ 
UCh¬
 *
s
;

276 
UCh¬32
 
c
;

277 
št32_t
 
´ev
, 
t™ËS¹
, 
t™ËLim™
, 
idx
, 
de¡Index
, 
Ëngth
;

278 
UBoŞ
 
isFœ¡Index
;

280 
	`u‹xt_İ’UTF8
(&
u‹xt
, (cÚ¡ *)
¤c
, 
¤cL’gth
, 
pE¼ÜCode
);

281 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

284 if(
csm
->
™”
==
NULL
) {

285 
csm
->
™”
=
	`ubrk_İ’
(
UBRK_WORD
, csm->
loÿË
,

286 
NULL
, 0,

287 
pE¼ÜCode
);

289 
	`ubrk_£tUText
(
csm
->
™”
, &
u‹xt
, 
pE¼ÜCode
);

290 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

291 
	`u‹xt_şo£
(&
u‹xt
);

296 
de¡Index
=0;

297 
´ev
=0;

298 
isFœ¡Index
=
TRUE
;

301 
´ev
<
¤cL’gth
) {

303 if(
isFœ¡Index
) {

304 
isFœ¡Index
=
FALSE
;

305 
idx
=
	`ubrk_fœ¡
(
csm
->
™”
);

307 
idx
=
	`ubrk_Ãxt
(
csm
->
™”
);

309 if(
idx
==
UBRK_DONE
 || idx>
¤cL’gth
) {

310 
idx
=
¤cL’gth
;

326 if(
´ev
<
idx
) {

328 
t™ËS¹
=
t™ËLim™
=
´ev
;

329 
	`U8_NEXT
(
¤c
, 
t™ËLim™
, 
idx
, 
c
);

330 if((
csm
->
İtiÚs
&
U_TITLECASE_NO_BREAK_ADJUSTMENT
)==0 && 
UCASE_NONE
==
	`uÿ£_g‘Ty³
(csm->
c¥
, 
c
)) {

333 
t™ËS¹
=
t™ËLim™
;

334 if(
t™ËLim™
==
idx
) {

341 
	`U8_NEXT
(
¤c
, 
t™ËLim™
, 
idx
, 
c
);

342 if(
UCASE_NONE
!=
	`uÿ£_g‘Ty³
(
csm
->
c¥
, 
c
)) {

346 
Ëngth
=
t™ËS¹
-
´ev
;

347 if(
Ëngth
>0) {

348 if((
de¡Index
+
Ëngth
)<=
de¡C­ac™y
) {

349 
	`u´v_memıy
(
de¡
+
de¡Index
, 
¤c
+
´ev
, 
Ëngth
);

351 
de¡Index
+=
Ëngth
;

355 if(
t™ËS¹
<
t™ËLim™
) {

357 
csc
->
ıS¹
=
t™ËS¹
;

358 
csc
->
ıLim™
=
t™ËLim™
;

359 
c
=
	`uÿ£_toFuÎT™Ë
(
csm
->
c¥
, c, 
utf8_ÿ£CÚ‹xtI‹¿tÜ
, 
csc
, &
s
, csm->
loÿË
, &csm->
locCache
);

360 
de¡Index
=
	`­³ndResuÉ
(
de¡
, de¡Index, 
de¡C­ac™y
, 
c
, 
s
);

364 iàĞ
t™ËS¹
+1 < 
idx
 &&

365 
	`uÿ£_g‘Ca£LoÿË
(
csm
->
loÿË
,&csm->
locCache
è=ğ
UCASE_LOC_DUTCH
 &&

366 Ğ
¤c
[
t™ËS¹
] == 0x0049 || src[titleStart] == 0x0069 ) &&

367 Ğ
¤c
[
t™ËS¹
+1] == 0x004A || src[titleStart+1] == 0x006A )) {

368 
c
=0x004A;

369 
de¡Index
=
	`­³ndResuÉ
(
de¡
, de¡Index, 
de¡C­ac™y
, 
c
, 
s
);

370 
t™ËLim™
++;

373 if(
t™ËLim™
<
idx
) {

374 if((
csm
->
İtiÚs
&
U_TITLECASE_NO_LOWERCASE
)==0) {

376 
de¡Index
+=

377 
	`_ÿ£M­
(

378 
csm
, 
uÿ£_toFuÎLow”
,

379 
de¡
+
de¡Index
, 
de¡C­ac™y
-destIndex,

380 
¤c
, 
csc
,

381 
t™ËLim™
, 
idx
,

382 
pE¼ÜCode
);

385 
Ëngth
=
idx
-
t™ËLim™
;

386 if((
de¡Index
+
Ëngth
)<=
de¡C­ac™y
) {

387 
	`u´v_memıy
(
de¡
+
de¡Index
, 
¤c
+
t™ËLim™
, 
Ëngth
);

389 
de¡Index
+=
Ëngth
;

395 
´ev
=
idx
;

398 if(
de¡Index
>
de¡C­ac™y
) {

399 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

401 
	`u‹xt_şo£
(&
u‹xt
);

402  
de¡Index
;

403 
	}
}

407 
št32_t


408 
	$utf8_fŞdCa£
(cÚ¡ 
UCa£Prİs
 *
c¥
,

409 
ušt8_t
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

410 cÚ¡ 
ušt8_t
 *
¤c
, 
št32_t
 
¤cL’gth
,

411 
ušt32_t
 
İtiÚs
,

412 
UE¼ÜCode
 *
pE¼ÜCode
) {

413 
št32_t
 
¤cIndex
, 
de¡Index
;

415 cÚ¡ 
UCh¬
 *
s
;

416 
UCh¬32
 
c
, 
c2
;

417 
št32_t
 
¡¬t
;

420 
¤cIndex
=
de¡Index
=0;

421 
¤cIndex
<
¤cL’gth
) {

422 
¡¬t
=
¤cIndex
;

423 
	`U8_NEXT
(
¤c
, 
¤cIndex
, 
¤cL’gth
, 
c
);

424 if(
c
<0) {

425 
de¡Index
<
de¡C­ac™y
 && 
¡¬t
<
¤cIndex
) {

426 
de¡
[
de¡Index
++]=
¤c
[
¡¬t
++];

430 
c
=
	`uÿ£_toFuÎFŞdšg
(
c¥
, c, &
s
, 
İtiÚs
);

431 if((
de¡Index
<
de¡C­ac™y
è&& (
c
<0 ? (
c2
=~c)<=0x7à: 
UCASE_MAX_STRING_LENGTH
<c && (c2=c)<=0x7f)) {

433 
de¡
[
de¡Index
++]=(
ušt8_t
)
c2
;

435 
de¡Index
=
	`­³ndResuÉ
(
de¡
, de¡Index, 
de¡C­ac™y
, 
c
, 
s
);

439 if(
de¡Index
>
de¡C­ac™y
) {

440 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

442  
de¡Index
;

443 
	}
}

452 
št32_t


453 
	$ÿ£M­
(cÚ¡ 
UCa£M­
 *
csm
,

454 
ušt8_t
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

455 cÚ¡ 
ušt8_t
 *
¤c
, 
št32_t
 
¤cL’gth
,

456 
št32_t
 
toWhichCa£
,

457 
UE¼ÜCode
 *
pE¼ÜCode
) {

458 
št32_t
 
de¡L’gth
;

461 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

464 ifĞ
de¡C­ac™y
<0 ||

465 (
de¡
==
NULL
 && 
de¡C­ac™y
>0) ||

466 
¤c
==
NULL
 ||

467 
¤cL’gth
<-1

469 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

474 if(
¤cL’gth
==-1) {

475 
¤cL’gth
=(
št32_t
)
	`u´v_¡¾’
((cÚ¡ *)
¤c
);

479 ifĞ
de¡
!=
NULL
 &&

480 ((
¤c
>=
de¡
 && src<(de¡+
de¡C­ac™y
)) ||

481 (
de¡
>=
¤c
 && de¡<(¤c+
¤cL’gth
)))

483 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

487 
de¡L’gth
=0;

489 if(
toWhichCa£
==
FOLD_CASE
) {

490 
de¡L’gth
=
	`utf8_fŞdCa£
(
csm
->
c¥
, 
de¡
, 
de¡C­ac™y
, 
¤c
, 
¤cL’gth
,

491 
csm
->
İtiÚs
, 
pE¼ÜCode
);

493 
UCa£CÚ‹xt
 
csc
={ 
NULL
 };

495 
csc
.
p
=(*)
¤c
;

496 
csc
.
lim™
=
¤cL’gth
;

498 if(
toWhichCa£
==
TO_LOWER
) {

499 
de¡L’gth
=
	`_ÿ£M­
(
csm
, 
uÿ£_toFuÎLow”
,

500 
de¡
, 
de¡C­ac™y
,

501 
¤c
, &
csc
,

502 0, 
¤cL’gth
,

503 
pE¼ÜCode
);

504 } if(
toWhichCa£
==
TO_UPPER
) {

505 
de¡L’gth
=
	`_ÿ£M­
(
csm
, 
uÿ£_toFuÎUµ”
,

506 
de¡
, 
de¡C­ac™y
,

507 
¤c
, &
csc
,

508 0, 
¤cL’gth
,

509 
pE¼ÜCode
);

511 #ià
UCONFIG_NO_BREAK_ITERATION


512 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

515 
UCa£M­
 *
tmp
 = (UCa£M­ *)
csm
;

516 
de¡L’gth
=
	`_toT™Ë
(
tmp
, 
de¡
, 
de¡C­ac™y
,

517 
¤c
, &
csc
, 
¤cL’gth
,

518 
pE¼ÜCode
);

523  
	`u_‹rmš©eCh¬s
((*)
de¡
, 
de¡C­ac™y
, 
de¡L’gth
, 
pE¼ÜCode
);

524 
	}
}

528 
U_CAPI
 
št32_t
 
U_EXPORT2


529 
	$uÿ£m­_utf8ToLow”
(cÚ¡ 
UCa£M­
 *
csm
,

530 *
de¡
, 
št32_t
 
de¡C­ac™y
,

531 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

532 
UE¼ÜCode
 *
pE¼ÜCode
) {

533  
	`ÿ£M­
(
csm
,

534 (
ušt8_t
 *)
de¡
, 
de¡C­ac™y
,

535 (cÚ¡ 
ušt8_t
 *)
¤c
, 
¤cL’gth
,

536 
TO_LOWER
, 
pE¼ÜCode
);

537 
	}
}

539 
U_CAPI
 
št32_t
 
U_EXPORT2


540 
	$uÿ£m­_utf8ToUµ”
(cÚ¡ 
UCa£M­
 *
csm
,

541 *
de¡
, 
št32_t
 
de¡C­ac™y
,

542 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

543 
UE¼ÜCode
 *
pE¼ÜCode
) {

544  
	`ÿ£M­
(
csm
,

545 (
ušt8_t
 *)
de¡
, 
de¡C­ac™y
,

546 (cÚ¡ 
ušt8_t
 *)
¤c
, 
¤cL’gth
,

547 
TO_UPPER
, 
pE¼ÜCode
);

548 
	}
}

550 #ià!
UCONFIG_NO_BREAK_ITERATION


552 
U_CAPI
 
št32_t
 
U_EXPORT2


553 
	$uÿ£m­_utf8ToT™Ë
(
UCa£M­
 *
csm
,

554 *
de¡
, 
št32_t
 
de¡C­ac™y
,

555 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

556 
UE¼ÜCode
 *
pE¼ÜCode
) {

557  
	`ÿ£M­
(
csm
,

558 (
ušt8_t
 *)
de¡
, 
de¡C­ac™y
,

559 (cÚ¡ 
ušt8_t
 *)
¤c
, 
¤cL’gth
,

560 
TO_TITLE
, 
pE¼ÜCode
);

561 
	}
}

565 
U_CAPI
 
št32_t
 
U_EXPORT2


566 
	$uÿ£m­_utf8FŞdCa£
(cÚ¡ 
UCa£M­
 *
csm
,

567 *
de¡
, 
št32_t
 
de¡C­ac™y
,

568 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

569 
UE¼ÜCode
 *
pE¼ÜCode
) {

570  
	`ÿ£M­
(
csm
,

571 (
ušt8_t
 *)
de¡
, 
de¡C­ac™y
,

572 (cÚ¡ 
ušt8_t
 *)
¤c
, 
¤cL’gth
,

573 
FOLD_CASE
, 
pE¼ÜCode
);

574 
	}
}

	@ucat.c

11 
	~"unicode/uÿt.h
"

12 
	~"unicode/u¡ršg.h
"

13 
	~"c¡ršg.h
"

14 
	~"uas£¹.h
"

17 cÚ¡ 
	gSEPARATOR
 = '%';

21 
	#MAX_KEY_LEN
 (24)

	)

29 
	$_ÿtkey
(* 
bufãr
, 
št32_t
 
£t_num
, iÁ32_ˆ
msg_num
) {

30 
št32_t
 
i
 = 0;

31 
i
 = 
	`T_CSŒšg_š‹g”ToSŒšg
(
bufãr
, 
£t_num
, 10);

32 
bufãr
[
i
++] = 
SEPARATOR
;

33 
	`T_CSŒšg_š‹g”ToSŒšg
(
bufãr
+
i
, 
msg_num
, 10);

34  
bufãr
;

35 
	}
}

37 
U_CAPI
 
u_Æ_ÿtd
 
U_EXPORT2


38 
	$u_ÿtİ’
(cÚ¡ * 
Çme
, cÚ¡ * 
loÿË
, 
UE¼ÜCode
* 
ec
) {

39  (
u_Æ_ÿtd
è
	`u»s_İ’
(
Çme
, 
loÿË
, 
ec
);

40 
	}
}

42 
U_CAPI
 
U_EXPORT2


43 
	$u_ÿtşo£
(
u_Æ_ÿtd
 
ÿtd
) {

44 
	`u»s_şo£
((
UResourûBundË
*è
ÿtd
);

45 
	}
}

47 
U_CAPI
 cÚ¡ 
UCh¬
* 
U_EXPORT2


48 
	$u_ÿtg‘s
(
u_Æ_ÿtd
 
ÿtd
, 
št32_t
 
£t_num
, iÁ32_ˆ
msg_num
,

49 cÚ¡ 
UCh¬
* 
s
,

50 
št32_t
* 
Ën
, 
UE¼ÜCode
* 
ec
) {

52 
key
[
MAX_KEY_LEN
];

53 cÚ¡ 
UCh¬
* 
»suÉ
;

55 ià(
ec
 =ğ
NULL
 || 
	`U_FAILURE
(*ec)) {

56 
ERROR
;

59 
»suÉ
 = 
	`u»s_g‘SŒšgByKey
((cÚ¡ 
UResourûBundË
*è
ÿtd
,

60 
	`_ÿtkey
(
key
, 
£t_num
, 
msg_num
),

61 
Ën
, 
ec
);

62 ià(
	`U_FAILURE
(*
ec
)) {

63 
ERROR
;

66  
»suÉ
;

68 
ERROR
:

70 ià(
Ën
 !ğ
NULL
) {

71 *
Ën
 = 
	`u_¡¾’
(
s
);

73  
s
;

74 
	}
}

	@uchar.c

22 
	~"unicode/uty³s.h
"

23 
	~"unicode/uch¬.h
"

24 
	~"unicode/usüt.h
"

25 
	~"unicode/ud©a.h
"

26 
	~"umu‹x.h
"

27 
	~"cmemÜy.h
"

28 
	~"uşn_cmn.h
"

29 
	~"uŒ›2.h
"

30 
	~"ud©aswp.h
"

31 
	~"u´İs.h
"

32 
	~"u¡r_imp.h
"

34 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

37 
	~"uch¬_´İs_d©a.c
"

42 
	#GET_PROPS
(
c
, 
»suÉ
è(ÔesuÉ)=
	`UTRIE2_GET16
(&
´İsTr›
, c));

	)

44 
U_CFUNC
 
UBoŞ


45 
	$u´v_havePrİ”t›s
(
UE¼ÜCode
 *
pE¼ÜCode
) {

46 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

47  
FALSE
;

49  
TRUE
;

50 
	}
}

55 
U_CAPI
 
št8_t
 
U_EXPORT2


56 
	$u_ch¬Ty³
(
UCh¬32
 
c
) {

57 
ušt32_t
 
´İs
;

58 
	`GET_PROPS
(
c
, 
´İs
);

59  (
št8_t
)
	`GET_CATEGORY
(
´İs
);

60 
	}
}

63 
	s_EnumTy³C®lback
 {

64 
UCh¬EnumTy³Rªge
 *
	m’umRªge
;

65 cÚ¡ *
	mcÚ‹xt
;

68 
ušt32_t
 
U_CALLCONV


69 
	$_’umTy³V®ue
(cÚ¡ *
cÚ‹xt
, 
ušt32_t
 
v®ue
) {

70  
	`GET_CATEGORY
(
v®ue
);

71 
	}
}

73 
UBoŞ
 
U_CALLCONV


74 
	$_’umTy³Rªge
(cÚ¡ *
cÚ‹xt
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt32_t
 
v®ue
) {

76  ((
_EnumTy³C®lback
 *)
cÚ‹xt
)->

77 
	`’umRªge
(((
_EnumTy³C®lback
 *)
cÚ‹xt
)->context,

78 
¡¬t
, 
’d
+1, (
UCh¬C©egÜy
)
v®ue
);

79 
	}
}

81 
U_CAPI
 
U_EXPORT2


82 
	$u_’umCh¬Ty³s
(
UCh¬EnumTy³Rªge
 *
’umRªge
, cÚ¡ *
cÚ‹xt
) {

83 
_EnumTy³C®lback
 
ÿÎback
;

85 if(
’umRªge
==
NULL
) {

89 
ÿÎback
.
’umRªge
=enumRange;

90 
ÿÎback
.
cÚ‹xt
=context;

91 
	`uŒ›2_’um
(&
´İsTr›
, 
_’umTy³V®ue
, 
_’umTy³Rªge
, &
ÿÎback
);

92 
	}
}

95 
U_CAPI
 
UBoŞ
 
U_EXPORT2


96 
	$u_i¦ow”
(
UCh¬32
 
c
) {

97 
ušt32_t
 
´İs
;

98 
	`GET_PROPS
(
c
, 
´İs
);

99  (
UBoŞ
)(
	`GET_CATEGORY
(
´İs
)==
U_LOWERCASE_LETTER
);

100 
	}
}

103 
U_CAPI
 
UBoŞ
 
U_EXPORT2


104 
	$u_isuµ”
(
UCh¬32
 
c
) {

105 
ušt32_t
 
´İs
;

106 
	`GET_PROPS
(
c
, 
´İs
);

107  (
UBoŞ
)(
	`GET_CATEGORY
(
´İs
)==
U_UPPERCASE_LETTER
);

108 
	}
}

111 
U_CAPI
 
UBoŞ
 
U_EXPORT2


112 
	$u_i¡™Ë
(
UCh¬32
 
c
) {

113 
ušt32_t
 
´İs
;

114 
	`GET_PROPS
(
c
, 
´İs
);

115  (
UBoŞ
)(
	`GET_CATEGORY
(
´İs
)==
U_TITLECASE_LETTER
);

116 
	}
}

119 
U_CAPI
 
UBoŞ
 
U_EXPORT2


120 
	$u_isdig™
(
UCh¬32
 
c
) {

121 
ušt32_t
 
´İs
;

122 
	`GET_PROPS
(
c
, 
´İs
);

123  (
UBoŞ
)(
	`GET_CATEGORY
(
´İs
)==
U_DECIMAL_DIGIT_NUMBER
);

124 
	}
}

126 
U_CAPI
 
UBoŞ
 
U_EXPORT2


127 
	$u_isxdig™
(
UCh¬32
 
c
) {

128 
ušt32_t
 
´İs
;

132 (
c
<=0x66 && c>=0x41 && (c<=0x46 || c>=0x61)) ||

133 (
c
>=0xff21 && c<=0xff46 && (c<=0xff26 || c>=0xff41))

135  
TRUE
;

138 
	`GET_PROPS
(
c
, 
´İs
);

139  (
UBoŞ
)(
	`GET_CATEGORY
(
´İs
)==
U_DECIMAL_DIGIT_NUMBER
);

140 
	}
}

143 
U_CAPI
 
UBoŞ
 
U_EXPORT2


144 
	$u_i§Íha
(
UCh¬32
 
c
) {

145 
ušt32_t
 
´İs
;

146 
	`GET_PROPS
(
c
, 
´İs
);

147  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&
U_GC_L_MASK
)!=0);

148 
	}
}

150 
U_CAPI
 
UBoŞ
 
U_EXPORT2


151 
	$u_isUAÍhab‘ic
(
UCh¬32
 
c
) {

152  (
	`u_g‘UnicodePrİ”t›s
(
c
, 1)&
	`U_MASK
(
UPROPS_ALPHABETIC
))!=0;

153 
	}
}

156 
U_CAPI
 
UBoŞ
 
U_EXPORT2


157 
	$u_i§Êum
(
UCh¬32
 
c
) {

158 
ušt32_t
 
´İs
;

159 
	`GET_PROPS
(
c
, 
´İs
);

160  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&(
U_GC_L_MASK
|
U_GC_ND_MASK
))!=0);

161 
	}
}

167 
U_CFUNC
 
UBoŞ


168 
	$u_i§ÊumPOSIX
(
UCh¬32
 
c
) {

169  (
UBoŞ
)(
	`u_isUAÍhab‘ic
(
c
è|| 
	`u_isdig™
(c));

170 
	}
}

173 
U_CAPI
 
UBoŞ
 
U_EXPORT2


174 
	$u_isdefšed
(
UCh¬32
 
c
) {

175 
ušt32_t
 
´İs
;

176 
	`GET_PROPS
(
c
, 
´İs
);

177  (
UBoŞ
)(
	`GET_CATEGORY
(
´İs
)!=0);

178 
	}
}

181 
U_CAPI
 
UBoŞ
 
U_EXPORT2


182 
	$u_isba£
(
UCh¬32
 
c
) {

183 
ušt32_t
 
´İs
;

184 
	`GET_PROPS
(
c
, 
´İs
);

185  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&(
U_GC_L_MASK
|
U_GC_N_MASK
|
U_GC_MC_MASK
|
U_GC_ME_MASK
))!=0);

186 
	}
}

189 
U_CAPI
 
UBoŞ
 
U_EXPORT2


190 
	$u_isúŒl
(
UCh¬32
 
c
) {

191 
ušt32_t
 
´İs
;

192 
	`GET_PROPS
(
c
, 
´İs
);

193  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&(
U_GC_CC_MASK
|
U_GC_CF_MASK
|
U_GC_ZL_MASK
|
U_GC_ZP_MASK
))!=0);

194 
	}
}

196 
U_CAPI
 
UBoŞ
 
U_EXPORT2


197 
	$u_isISOCÚŒŞ
(
UCh¬32
 
c
) {

198  (
ušt32_t
)
c
<=0x9f && (c<=0x1f || c>=0x7f);

199 
	}
}

202 
	#IS_THAT_CONTROL_SPACE
(
c
) \

203 (
c
<=0x9à&& ((c>=
TAB
 && c<=
CR
è|| (c>=0x1ø&& c <=0x1fè|| c==
NL
))

	)

206 
	#IS_THAT_ASCII_CONTROL_SPACE
(
c
) \

207 (
c
<=0x1à&& c>=
TAB
 && (c<=
CR
 || c>=0x1c))

	)

210 
U_CAPI
 
UBoŞ
 
U_EXPORT2


211 
	$u_is¥aû
(
UCh¬32
 
c
) {

212 
ušt32_t
 
´İs
;

213 
	`GET_PROPS
(
c
, 
´İs
);

214  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&
U_GC_Z_MASK
)!=0 || 
	`IS_THAT_CONTROL_SPACE
(
c
));

215 
	}
}

217 
U_CAPI
 
UBoŞ
 
U_EXPORT2


218 
	$u_isJavaS·ûCh¬
(
UCh¬32
 
c
) {

219 
ušt32_t
 
´İs
;

220 
	`GET_PROPS
(
c
, 
´İs
);

221  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&
U_GC_Z_MASK
)!=0);

222 
	}
}

225 
U_CAPI
 
UBoŞ
 
U_EXPORT2


226 
	$u_isWh™e¥aû
(
UCh¬32
 
c
) {

227 
ušt32_t
 
´İs
;

228 
	`GET_PROPS
(
c
, 
´İs
);

229  (
UBoŞ
)(

230 ((
	`CAT_MASK
(
´İs
)&
U_GC_Z_MASK
)!=0 &&

231 
c
!=
NBSP
 && c!=
FIGURESP
 && c!=
NNBSP
) ||

232 
	`IS_THAT_ASCII_CONTROL_SPACE
(
c
)

234 
	}
}

236 
U_CAPI
 
UBoŞ
 
U_EXPORT2


237 
	$u_isbÏnk
(
UCh¬32
 
c
) {

238 if((
ušt32_t
)
c
<=0x9f) {

239  
c
==9 || c==0x20;

242 
ušt32_t
 
´İs
;

243 
	`GET_PROPS
(
c
, 
´İs
);

244  (
UBoŞ
)(
	`GET_CATEGORY
(
´İs
)==
U_SPACE_SEPARATOR
);

246 
	}
}

248 
U_CAPI
 
UBoŞ
 
U_EXPORT2


249 
	$u_isUWh™eS·û
(
UCh¬32
 
c
) {

250  (
	`u_g‘UnicodePrİ”t›s
(
c
, 1)&
	`U_MASK
(
UPROPS_WHITE_SPACE
))!=0;

251 
	}
}

254 
U_CAPI
 
UBoŞ
 
U_EXPORT2


255 
	$u_i¥ršt
(
UCh¬32
 
c
) {

256 
ušt32_t
 
´İs
;

257 
	`GET_PROPS
(
c
, 
´İs
);

259  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&
U_GC_C_MASK
)==0);

260 
	}
}

267 
U_CFUNC
 
UBoŞ


268 
	$u_i¥rštPOSIX
(
UCh¬32
 
c
) {

269 
ušt32_t
 
´İs
;

270 
	`GET_PROPS
(
c
, 
´İs
);

275  (
UBoŞ
)((
	`GET_CATEGORY
(
´İs
)==
U_SPACE_SEPARATOR
è|| 
	`u_isg¿phPOSIX
(
c
));

276 
	}
}

278 
U_CAPI
 
UBoŞ
 
U_EXPORT2


279 
	$u_isg¿ph
(
UCh¬32
 
c
) {

280 
ušt32_t
 
´İs
;

281 
	`GET_PROPS
(
c
, 
´İs
);

283  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&

284 (
U_GC_CC_MASK
|
U_GC_CF_MASK
|
U_GC_CS_MASK
|
U_GC_CN_MASK
|
U_GC_Z_MASK
))

286 
	}
}

295 
U_CFUNC
 
UBoŞ


296 
	$u_isg¿phPOSIX
(
UCh¬32
 
c
) {

297 
ušt32_t
 
´İs
;

298 
	`GET_PROPS
(
c
, 
´İs
);

301  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&

302 (
U_GC_CC_MASK
|
U_GC_CS_MASK
|
U_GC_CN_MASK
|
U_GC_Z_MASK
))

304 
	}
}

306 
U_CAPI
 
UBoŞ
 
U_EXPORT2


307 
	$u_i¥unù
(
UCh¬32
 
c
) {

308 
ušt32_t
 
´İs
;

309 
	`GET_PROPS
(
c
, 
´İs
);

310  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&
U_GC_P_MASK
)!=0);

311 
	}
}

314 
U_CAPI
 
UBoŞ
 
U_EXPORT2


315 
	$u_isIDS¹
(
UCh¬32
 
c
) {

317 
ušt32_t
 
´İs
;

318 
	`GET_PROPS
(
c
, 
´İs
);

319  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&(
U_GC_L_MASK
|
U_GC_NL_MASK
))!=0);

320 
	}
}

324 
U_CAPI
 
UBoŞ
 
U_EXPORT2


325 
	$u_isIDP¬t
(
UCh¬32
 
c
) {

326 
ušt32_t
 
´İs
;

327 
	`GET_PROPS
(
c
, 
´İs
);

328  (
UBoŞ
)(

329 (
	`CAT_MASK
(
´İs
)&

330 (
U_GC_ND_MASK
|
U_GC_NL_MASK
|

331 
U_GC_L_MASK
|

332 
U_GC_PC_MASK
|
U_GC_MC_MASK
|
U_GC_MN_MASK
)

334 
	`u_isIDIgnÜabË
(
c
));

335 
	}
}

338 
U_CAPI
 
UBoŞ
 
U_EXPORT2


339 
	$u_isIDIgnÜabË
(
UCh¬32
 
c
) {

340 if(
c
<=0x9f) {

341  
	`u_isISOCÚŒŞ
(
c
è&& !
	`IS_THAT_ASCII_CONTROL_SPACE
(c);

343 
ušt32_t
 
´İs
;

344 
	`GET_PROPS
(
c
, 
´İs
);

345  (
UBoŞ
)(
	`GET_CATEGORY
(
´İs
)==
U_FORMAT_CHAR
);

347 
	}
}

350 
U_CAPI
 
UBoŞ
 
U_EXPORT2


351 
	$u_isJavaIDS¹
(
UCh¬32
 
c
) {

352 
ušt32_t
 
´İs
;

353 
	`GET_PROPS
(
c
, 
´İs
);

354  (
UBoŞ
)((
	`CAT_MASK
(
´İs
)&(
U_GC_L_MASK
|
U_GC_SC_MASK
|
U_GC_PC_MASK
))!=0);

355 
	}
}

360 
U_CAPI
 
UBoŞ
 
U_EXPORT2


361 
	$u_isJavaIDP¬t
(
UCh¬32
 
c
) {

362 
ušt32_t
 
´İs
;

363 
	`GET_PROPS
(
c
, 
´İs
);

364  (
UBoŞ
)(

365 (
	`CAT_MASK
(
´İs
)&

366 (
U_GC_ND_MASK
|
U_GC_NL_MASK
|

367 
U_GC_L_MASK
|

368 
U_GC_SC_MASK
|
U_GC_PC_MASK
|

369 
U_GC_MC_MASK
|
U_GC_MN_MASK
)

371 
	`u_isIDIgnÜabË
(
c
));

372 
	}
}

374 
U_CAPI
 
št32_t
 
U_EXPORT2


375 
	$u_ch¬Dig™V®ue
(
UCh¬32
 
c
) {

376 
ušt32_t
 
´İs
;

377 
št32_t
 
v®ue
;

378 
	`GET_PROPS
(
c
, 
´İs
);

379 
v®ue
=(
št32_t
)
	`GET_NUMERIC_TYPE_VALUE
(
´İs
)-
UPROPS_NTV_DECIMAL_START
;

380 if(
v®ue
<=9) {

381  
v®ue
;

385 
	}
}

387 
U_CAPI
 
U_EXPORT2


388 
	$u_g‘Num”icV®ue
(
UCh¬32
 
c
) {

389 
ušt32_t
 
´İs
;

390 
št32_t
 
Áv
;

391 
	`GET_PROPS
(
c
, 
´İs
);

392 
Áv
=(
št32_t
)
	`GET_NUMERIC_TYPE_VALUE
(
´İs
);

394 if(
Áv
==
UPROPS_NTV_NONE
) {

395  
U_NO_NUMERIC_VALUE
;

396 } if(
Áv
<
UPROPS_NTV_DIGIT_START
) {

398  
Áv
-
UPROPS_NTV_DECIMAL_START
;

399 } if(
Áv
<
UPROPS_NTV_NUMERIC_START
) {

401  
Áv
-
UPROPS_NTV_DIGIT_START
;

402 } if(
Áv
<
UPROPS_NTV_FRACTION_START
) {

404  
Áv
-
UPROPS_NTV_NUMERIC_START
;

405 } if(
Áv
<
UPROPS_NTV_LARGE_START
) {

407 
št32_t
 
num”©Ü
=(
Áv
>>4)-12;

408 
št32_t
 
d’omš©Ü
=(
Áv
&0xf)+1;

409  ()
num”©Ü
/
d’omš©Ü
;

410 } if(
Áv
<
UPROPS_NTV_RESERVED_START
) {

412 
numV®ue
;

413 
št32_t
 
mªt
=(
Áv
>>5)-14;

414 
št32_t
 
exp
=(
Áv
&0x1f)+2;

415 
numV®ue
=
mªt
;

418 
exp
>=4) {

419 
numV®ue
*=10000.;

420 
exp
-=4;

422 
exp
) {

424 
numV®ue
*=1000.;

427 
numV®ue
*=100.;

430 
numV®ue
*=10.;

437  
numV®ue
;

440  
U_NO_NUMERIC_VALUE
;

442 
	}
}

444 
U_CAPI
 
št32_t
 
U_EXPORT2


445 
	$u_dig™
(
UCh¬32
 
ch
, 
št8_t
 
¿dix
) {

446 
št8_t
 
v®ue
;

447 if((
ušt8_t
)(
¿dix
-2)<=(36-2)) {

448 
v®ue
=(
št8_t
)
	`u_ch¬Dig™V®ue
(
ch
);

449 if(
v®ue
<0) {

451 if(
ch
>=0x61 && ch<=0x7A) {

452 
v®ue
=(
št8_t
)(
ch
-0x57);

453 } if(
ch
>=0x41 && ch<=0x5A) {

454 
v®ue
=(
št8_t
)(
ch
-0x37);

455 } if(
ch
>=0xFF41 && ch<=0xFF5A) {

456 
v®ue
=(
št8_t
)(
ch
-0xFF37);

457 } if(
ch
>=0xFF21 && ch<=0xFF3A) {

458 
v®ue
=(
št8_t
)(
ch
-0xFF17);

462 
v®ue
=-1;

464  (
št8_t
)((
v®ue
<
¿dix
) ? value : -1);

465 
	}
}

467 
U_CAPI
 
UCh¬32
 
U_EXPORT2


468 
	$u_fÜDig™
(
št32_t
 
dig™
, 
št8_t
 
¿dix
) {

469 if((
ušt8_t
)(
¿dix
-2)>(36-2è|| (
ušt32_t
)
dig™
>=(uint32_t)radix) {

471 } if(
dig™
<10) {

472  (
UCh¬32
)(0x30+
dig™
);

474  (
UCh¬32
)((0x61-10)+
dig™
);

476 
	}
}

480 
U_CAPI
 
U_EXPORT2


481 
	$u_g‘UnicodeV”siÚ
(
UV”siÚInfo
 
v”siÚA¼ay
) {

482 if(
v”siÚA¼ay
!=
NULL
) {

483 
	`u´v_memıy
(
v”siÚA¼ay
, 
d©aV”siÚ
, 
U_MAX_VERSION_LENGTH
);

485 
	}
}

487 
U_CFUNC
 
ušt32_t


488 
	$u_g‘UnicodePrİ”t›s
(
UCh¬32
 
c
, 
št32_t
 
cŞumn
) {

489 
ušt16_t
 
vecIndex
;

491 if(
cŞumn
==-1) {

492 
ušt32_t
 
´İs
;

493 
	`GET_PROPS
(
c
, 
´İs
);

494  
´İs
;

496 
cŞumn
<0 || cŞumn>=
´İsVeùÜsCŞumns


500 
vecIndex
=
	`UTRIE2_GET16
(&
´İsVeùÜsTr›
, 
c
);

501  
´İsVeùÜs
[
vecIndex
+
cŞumn
];

503 
	}
}

505 
U_CFUNC
 
št32_t


506 
	$u´v_g‘MaxV®ues
(
št32_t
 
cŞumn
) {

507 
cŞumn
) {

509  
šdexes
[
UPROPS_MAX_VALUES_INDEX
];

511  
šdexes
[
UPROPS_MAX_VALUES_2_INDEX
];

515 
	}
}

517 
U_CAPI
 
U_EXPORT2


518 
	$u_ch¬Age
(
UCh¬32
 
c
, 
UV”siÚInfo
 
v”siÚA¼ay
) {

519 if(
v”siÚA¼ay
!=
NULL
) {

520 
ušt32_t
 
v”siÚ
=
	`u_g‘UnicodePrİ”t›s
(
c
, 0)>>
UPROPS_AGE_SHIFT
;

521 
v”siÚA¼ay
[0]=(
ušt8_t
)(
v”siÚ
>>4);

522 
v”siÚA¼ay
[1]=(
ušt8_t
)(
v”siÚ
&0xf);

523 
v”siÚA¼ay
[2]=versionArray[3]=0;

525 
	}
}

527 
U_CAPI
 
USütCode
 
U_EXPORT2


528 
	$usüt_g‘Süt
(
UCh¬32
 
c
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

529 
ušt32_t
 
sütX
;

530 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

531  
USCRIPT_INVALID_CODE
;

533 if((
ušt32_t
)
c
>0x10ffff) {

534 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

535  
USCRIPT_INVALID_CODE
;

537 
sütX
=
	`u_g‘UnicodePrİ”t›s
(
c
, 0)&
UPROPS_SCRIPT_X_MASK
;

538 if(
sütX
<
UPROPS_SCRIPT_X_WITH_COMMON
) {

539  (
USütCode
)
sütX
;

540 } if(
sütX
<
UPROPS_SCRIPT_X_WITH_INHERITED
) {

541  
USCRIPT_COMMON
;

542 } if(
sütX
<
UPROPS_SCRIPT_X_WITH_OTHER
) {

543  
USCRIPT_INHERITED
;

545  (
USütCode
)
sütEx‹nsiÚs
[
sütX
&
UPROPS_SCRIPT_MASK
];

547 
	}
}

549 
U_DRAFT
 
UBoŞ
 
U_EXPORT2


550 
	$usüt_hasSüt
(
UCh¬32
 
c
, 
USütCode
 
sc
) {

551 
USütCode
 
süt
;

552 cÚ¡ 
ušt16_t
 *
scx
;

553 
ušt32_t
 
sütX
=
	`u_g‘UnicodePrİ”t›s
(
c
, 0)&
UPROPS_SCRIPT_X_MASK
;

554 if(
sütX
<
UPROPS_SCRIPT_X_WITH_COMMON
) {

555  
sc
==(
USütCode
)
sütX
;

558 
scx
=
sütEx‹nsiÚs
+(
sütX
&
UPROPS_SCRIPT_MASK
);

559 if(
sütX
<
UPROPS_SCRIPT_X_WITH_INHERITED
) {

560 
süt
=
USCRIPT_COMMON
;

561 } if(
sütX
<
UPROPS_SCRIPT_X_WITH_OTHER
) {

562 
süt
=
USCRIPT_INHERITED
;

564 
süt
=(
USütCode
)
scx
[0];

565 
scx
=
sütEx‹nsiÚs
+scx[1];

567 if(
sc
==
süt
) {

568  
TRUE
;

570 
sc
>*
scx
) {

571 ++
scx
;

573  
sc
==(*
scx
&0x7fff);

574 
	}
}

576 
U_DRAFT
 
št32_t
 
U_EXPORT2


577 
	$usüt_g‘SütEx‹nsiÚs
(
UCh¬32
 
c
,

578 
USütCode
 *
süts
, 
št32_t
 
ÿ·c™y
,

579 
UE¼ÜCode
 *
pE¼ÜCode
) {

580 
ušt32_t
 
sütX
;

581 
št32_t
 
Ëngth
;

582 cÚ¡ 
ušt16_t
 *
scx
;

583 
ušt16_t
 
sx
;

584 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

587 if(
ÿ·c™y
<0 || (ÿ·c™y>0 && 
süts
==
NULL
)) {

588 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

591 
sütX
=
	`u_g‘UnicodePrİ”t›s
(
c
, 0)&
UPROPS_SCRIPT_X_MASK
;

592 if(
sütX
<
UPROPS_SCRIPT_X_WITH_COMMON
) {

596 
Ëngth
=0;

597 
scx
=
sütEx‹nsiÚs
+(
sütX
&
UPROPS_SCRIPT_MASK
);

598 if(
sütX
>=
UPROPS_SCRIPT_X_WITH_OTHER
) {

599 
scx
=
sütEx‹nsiÚs
+scx[1];

602 
sx
=*
scx
++;

603 if(
Ëngth
<
ÿ·c™y
) {

604 
süts
[
Ëngth
]=
sx
&0x7fff;

606 ++
Ëngth
;

607 } 
sx
<0x8000);

608 if(
Ëngth
>
ÿ·c™y
) {

609 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

611  
Ëngth
;

612 
	}
}

614 
U_CAPI
 
UBlockCode
 
U_EXPORT2


615 
	$ublock_g‘Code
(
UCh¬32
 
c
) {

616  (
UBlockCode
)((
	`u_g‘UnicodePrİ”t›s
(
c
, 0)&
UPROPS_BLOCK_MASK
)>>
UPROPS_BLOCK_SHIFT
);

617 
	}
}

621 
UBoŞ
 
U_CALLCONV


622 
	$_’umPrİ”tyS¹sRªge
(cÚ¡ *
cÚ‹xt
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt32_t
 
v®ue
) {

624 cÚ¡ 
US‘Add”
 *
§
=(cÚ¡ US‘Add” *)
cÚ‹xt
;

625 
§
->
	`add
(§->
£t
, 
¡¬t
);

626  
TRUE
;

627 
	}
}

629 
	#USET_ADD_CP_AND_NEXT
(
§
, 
ı
è§->
	`add
(§->
£t
, cp); sa->add(§->£t, cp+1)

	)

631 
U_CFUNC
 
U_EXPORT2


632 
	$uch¬_addPrİ”tyS¹s
(cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

633 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

638 
	`uŒ›2_’um
(&
´İsTr›
, 
NULL
, 
_’umPrİ”tyS¹sRªge
, 
§
);

643 
	`USET_ADD_CP_AND_NEXT
(
§
, 
TAB
);

646 
§
->
	`add
(§->
£t
, 
CR
+1);

647 
§
->
	`add
(§->
£t
, 0x1c);

648 
§
->
	`add
(§->
£t
, 0x1f+1);

649 
	`USET_ADD_CP_AND_NEXT
(
§
, 
NL
);

652 
§
->
	`add
(§->
£t
, 
DEL
);

653 
§
->
	`add
(§->
£t
, 
HAIRSP
);

654 
§
->
	`add
(§->
£t
, 
RLM
+1);

655 
§
->
	`add
(§->
£t
, 
INHSWAP
);

656 
§
->
	`add
(§->
£t
, 
NOMDIG
+1);

657 
	`USET_ADD_CP_AND_NEXT
(
§
, 
ZWNBSP
);

660 
	`USET_ADD_CP_AND_NEXT
(
§
, 
NBSP
);

661 
	`USET_ADD_CP_AND_NEXT
(
§
, 
FIGURESP
);

662 
	`USET_ADD_CP_AND_NEXT
(
§
, 
NNBSP
);

665 
§
->
	`add
(§->
£t
, 
U_a
);

666 
§
->
	`add
(§->
£t
, 
U_z
+1);

667 
§
->
	`add
(§->
£t
, 
U_A
);

668 
§
->
	`add
(§->
£t
, 
U_Z
+1);

669 
§
->
	`add
(§->
£t
, 
U_FW_a
);

670 
§
->
	`add
(§->
£t
, 
U_FW_z
+1);

671 
§
->
	`add
(§->
£t
, 
U_FW_A
);

672 
§
->
	`add
(§->
£t
, 
U_FW_Z
+1);

675 
§
->
	`add
(§->
£t
, 
U_f
+1);

676 
§
->
	`add
(§->
£t
, 
U_F
+1);

677 
§
->
	`add
(§->
£t
, 
U_FW_f
+1);

678 
§
->
	`add
(§->
£t
, 
U_FW_F
+1);

681 
§
->
	`add
(§->
£t
, 
WJ
);

682 
§
->
	`add
(§->
£t
, 0xfff0);

683 
§
->
	`add
(§->
£t
, 0xfffb+1);

684 
§
->
	`add
(§->
£t
, 0xe0000);

685 
§
->
	`add
(§->
£t
, 0xe0fff+1);

688 
	`USET_ADD_CP_AND_NEXT
(
§
, 
CGJ
);

689 
	}
}

691 
U_CFUNC
 
U_EXPORT2


692 
	$u´İsvec_addPrİ”tyS¹s
(cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

693 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

698 if(
´İsVeùÜsCŞumns
>0) {

700 
	`uŒ›2_’um
(&
´İsVeùÜsTr›
, 
NULL
, 
_’umPrİ”tyS¹sRªge
, 
§
);

702 
	}
}

	@uchar_props_data.c

10 cÚ¡ 
UV”siÚInfo
 
	gd©aV”siÚ
={6,0,0,0};

12 cÚ¡ 
ušt16_t
 
	g´İsTr›_šdex
[17204]={

1091 cÚ¡ 
UTr›2
 
	g´İsTr›
={

1092 
´İsTr›_šdex
,

1093 
´İsTr›_šdex
+3888,

1094 
NULL
,

1103 
NULL
, 0, 
FALSE
, FALSE, 0, NULL

1106 cÚ¡ 
ušt16_t
 
	g´İsVeùÜsTr›_šdex
[22376]={

2508 cÚ¡ 
UTr›2
 
	g´İsVeùÜsTr›
={

2509 
´İsVeùÜsTr›_šdex
,

2510 
´İsVeùÜsTr›_šdex
+4112,

2511 
NULL
,

2520 
NULL
, 0, 
FALSE
, FALSE, 0, NULL

2523 cÚ¡ 
ušt32_t
 
	g´İsVeùÜs
[4614]={

2814 cÚ¡ 
št32_t
 
	gcouÁPrİsVeùÜs
=4614;

2815 cÚ¡ 
št32_t
 
	g´İsVeùÜsCŞumns
=3;

2816 cÚ¡ 
ušt16_t
 
	gsütEx‹nsiÚs
[40]={

2821 cÚ¡ 
št32_t
 
	gšdexes
[
UPROPS_INDEX_COUNT
]={0x21ae,0x21ae,0x21ae,0x21ae,0x4d66,3,0x5f6c,0x5f80,0x5f80,0x5f80,0xad192,0x2473171,0,0,0,0};

	@uchriter.cpp

8 
	~<ty³šfo
>

10 
	~"unicode/uchr™”.h
"

11 
	~"unicode/u¡ršg.h
"

12 
	~"uhash.h
"

14 
U_NAMESPACE_BEGIN


16 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
UCh¬Ch¬aù”I‹¿tÜ
)

18 
UCh¬Ch¬aù”I‹¿tÜ
::
	$UCh¬Ch¬aù”I‹¿tÜ
()

19 : 
	`Ch¬aù”I‹¿tÜ
(),

20 
	$‹xt
(0)

23 
	}
}

25 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$UCh¬Ch¬aù”I‹¿tÜ
(cÚ¡ 
UCh¬
* 
‹xtPŒ
,

26 
št32_t
 
Ëngth
)

27 : 
	`Ch¬aù”I‹¿tÜ
(
‹xtPŒ
 !ğ0 ? (
Ëngth
>=0 ?†’gth : 
	$u_¡¾’
(
‹xtPŒ
)) : 0),

28 
	$‹xt
(
‹xtPŒ
)

30 
	}
}

32 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$UCh¬Ch¬aù”I‹¿tÜ
(cÚ¡ 
UCh¬
* 
‹xtPŒ
,

33 
št32_t
 
Ëngth
,

34 
št32_t
 
pos™iÚ
)

35 : 
	`Ch¬aù”I‹¿tÜ
(
‹xtPŒ
 !ğ0 ? (
Ëngth
>=0 ?†’gth : 
	$u_¡¾’
(
‹xtPŒ
)è: 0, 
pos™iÚ
),

36 
	$‹xt
(
‹xtPŒ
)

38 
	}
}

40 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$UCh¬Ch¬aù”I‹¿tÜ
(cÚ¡ 
UCh¬
* 
‹xtPŒ
,

41 
št32_t
 
Ëngth
,

42 
št32_t
 
‹xtBegš
,

43 
št32_t
 
‹xtEnd
,

44 
št32_t
 
pos™iÚ
)

45 : 
	`Ch¬aù”I‹¿tÜ
(
‹xtPŒ
 !ğ0 ? (
Ëngth
>=0 ?†’gth : 
	$u_¡¾’
(
‹xtPŒ
)è: 0, 
‹xtBegš
, 
‹xtEnd
, 
pos™iÚ
),

46 
	$‹xt
(
‹xtPŒ
)

48 
	}
}

50 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$UCh¬Ch¬aù”I‹¿tÜ
(cÚ¡ 
UCh¬Ch¬aù”I‹¿tÜ
& 
th©
)

51 : 
	`Ch¬aù”I‹¿tÜ
(
th©
),

52 
	$‹xt
(
th©
.
‹xt
)

54 
	}
}

56 
	gUCh¬Ch¬aù”I‹¿tÜ
&

57 
	gUCh¬Ch¬aù”I‹¿tÜ
::
İ”©Ü
=(cÚ¡ 
UCh¬Ch¬aù”I‹¿tÜ
& 
th©
) {

58 
Ch¬aù”I‹¿tÜ
::
İ”©Ü
=(
th©
);

59 
	g‹xt
 = 
th©
.
‹xt
;

60  *
	gthis
;

63 
	gUCh¬Ch¬aù”I‹¿tÜ
::~
	$UCh¬Ch¬aù”I‹¿tÜ
() {

64 
	}
}

66 
UBoŞ


67 
UCh¬Ch¬aù”I‹¿tÜ
::
İ”©Ü
==(cÚ¡ 
FÜw¬dCh¬aù”I‹¿tÜ
& 
th©
) const {

68 ià(
this
 =ğ&
th©
) {

69  
TRUE
;

71 ià(
ty³id
(*
this
è!ğty³id(
th©
)) {

72  
FALSE
;

75 
	gUCh¬Ch¬aù”I‹¿tÜ
& 
	g»®Th©
 = (
UCh¬Ch¬aù”I‹¿tÜ
&)
th©
;

77  
	g‹xt
 =ğ
»®Th©
.
‹xt


78 && 
‹xtL’gth
 =ğ
»®Th©
.textLength

79 && 
pos
 =ğ
»®Th©
.pos

80 && 
begš
 =ğ
»®Th©
.begin

81 && 
’d
 =ğ
»®Th©
.end;

84 
št32_t


85 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$hashCode
() const {

86  
	`uhash_hashUCh¬sN
(
‹xt
, 
‹xtL’gth
è^ 
pos
 ^ 
begš
 ^ 
’d
;

87 
	}
}

89 
Ch¬aù”I‹¿tÜ
*

90 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$şÚe
() const {

91  
Ãw
 
	`UCh¬Ch¬aù”I‹¿tÜ
(*
this
);

92 
	}
}

94 
UCh¬


95 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$fœ¡
() {

96 
pos
 = 
begš
;

97 if(
pos
 < 
’d
) {

98  
‹xt
[
pos
];

100  
DONE
;

102 
	}
}

104 
UCh¬


105 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$fœ¡Po¡Inc
() {

106 
pos
 = 
begš
;

107 if(
pos
 < 
’d
) {

108  
‹xt
[
pos
++];

110  
DONE
;

112 
	}
}

114 
UCh¬


115 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$Ï¡
() {

116 
pos
 = 
’d
;

117 if(
pos
 > 
begš
) {

118  
‹xt
[--
pos
];

120  
DONE
;

122 
	}
}

124 
UCh¬


125 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$£tIndex
(
št32_t
 
pos™iÚ
) {

126 if(
pos™iÚ
 < 
begš
) {

127 
pos
 = 
begš
;

128 } if(
pos™iÚ
 > 
’d
) {

129 
pos
 = 
’d
;

131 
pos
 = 
pos™iÚ
;

133 if(
pos
 < 
’d
) {

134  
‹xt
[
pos
];

136  
DONE
;

138 
	}
}

140 
UCh¬


141 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$cu¼’t
() const {

142 ià(
pos
 >ğ
begš
 &&…o < 
’d
) {

143  
‹xt
[
pos
];

145  
DONE
;

147 
	}
}

149 
UCh¬


150 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$Ãxt
() {

151 ià(
pos
 + 1 < 
’d
) {

152  
‹xt
[++
pos
];

155 
pos
 = 
’d
;

156  
DONE
;

158 
	}
}

160 
UCh¬


161 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$ÃxtPo¡Inc
() {

162 ià(
pos
 < 
’d
) {

163  
‹xt
[
pos
++];

165  
DONE
;

167 
	}
}

169 
UBoŞ


170 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$hasNext
() {

171  (
UBoŞ
)(
pos
 < 
’d
 ? 
TRUE
 : 
FALSE
);

172 
	}
}

174 
UCh¬


175 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$´evious
() {

176 ià(
pos
 > 
begš
) {

177  
‹xt
[--
pos
];

179  
DONE
;

181 
	}
}

183 
UBoŞ


184 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$hasP»vious
() {

185  (
UBoŞ
)(
pos
 > 
begš
 ? 
TRUE
 : 
FALSE
);

186 
	}
}

188 
UCh¬32


189 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$fœ¡32
() {

190 
pos
 = 
begš
;

191 if(
pos
 < 
’d
) {

192 
št32_t
 
i
 = 
pos
;

193 
UCh¬32
 
c
;

194 
	`UTF_NEXT_CHAR
(
‹xt
, 
i
, 
’d
, 
c
);

195  
c
;

197  
DONE
;

199 
	}
}

201 
UCh¬32


202 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$fœ¡32Po¡Inc
() {

203 
pos
 = 
begš
;

204 if(
pos
 < 
’d
) {

205 
UCh¬32
 
c
;

206 
	`UTF_NEXT_CHAR
(
‹xt
, 
pos
, 
’d
, 
c
);

207  
c
;

209  
DONE
;

211 
	}
}

213 
UCh¬32


214 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$Ï¡32
() {

215 
pos
 = 
’d
;

216 if(
pos
 > 
begš
) {

217 
UCh¬32
 
c
;

218 
	`UTF_PREV_CHAR
(
‹xt
, 
begš
, 
pos
, 
c
);

219  
c
;

221  
DONE
;

223 
	}
}

225 
UCh¬32


226 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$£tIndex32
(
št32_t
 
pos™iÚ
) {

227 if(
pos™iÚ
 < 
begš
) {

228 
pos™iÚ
 = 
begš
;

229 } if(
pos™iÚ
 > 
’d
) {

230 
pos™iÚ
 = 
’d
;

232 if(
pos™iÚ
 < 
’d
) {

233 
	`UTF_SET_CHAR_START
(
‹xt
, 
begš
, 
pos™iÚ
);

234 
št32_t
 
i
 = 
this
->
pos
 = 
pos™iÚ
;

235 
UCh¬32
 
c
;

236 
	`UTF_NEXT_CHAR
(
‹xt
, 
i
, 
’d
, 
c
);

237  
c
;

239 
this
->
pos
 = 
pos™iÚ
;

240  
DONE
;

242 
	}
}

244 
UCh¬32


245 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$cu¼’t32
() const {

246 ià(
pos
 >ğ
begš
 &&…o < 
’d
) {

247 
UCh¬32
 
c
;

248 
	`UTF_GET_CHAR
(
‹xt
, 
begš
, 
pos
, 
’d
, 
c
);

249  
c
;

251  
DONE
;

253 
	}
}

255 
UCh¬32


256 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$Ãxt32
() {

257 ià(
pos
 < 
’d
) {

258 
	`UTF_FWD_1
(
‹xt
, 
pos
, 
’d
);

259 if(
pos
 < 
’d
) {

260 
št32_t
 
i
 = 
pos
;

261 
UCh¬32
 
c
;

262 
	`UTF_NEXT_CHAR
(
‹xt
, 
i
, 
’d
, 
c
);

263  
c
;

267 
pos
 = 
’d
;

268  
DONE
;

269 
	}
}

271 
UCh¬32


272 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$Ãxt32Po¡Inc
() {

273 ià(
pos
 < 
’d
) {

274 
UCh¬32
 
c
;

275 
	`UTF_NEXT_CHAR
(
‹xt
, 
pos
, 
’d
, 
c
);

276  
c
;

278  
DONE
;

280 
	}
}

282 
UCh¬32


283 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$´evious32
() {

284 ià(
pos
 > 
begš
) {

285 
UCh¬32
 
c
;

286 
	`UTF_PREV_CHAR
(
‹xt
, 
begš
, 
pos
, 
c
);

287  
c
;

289  
DONE
;

291 
	}
}

293 
št32_t


294 
	gUCh¬Ch¬aù”I‹¿tÜ
::
move
(
št32_t
 
d–
, 
Ch¬aù”I‹¿tÜ
::
EOrigš
 
Üigš
) {

295 
Üigš
) {

296 
kS¹
:

297 
pos
 = 
begš
 + 
d–
;

299 
	gkCu¼’t
:

300 
pos
 +ğ
d–
;

302 
	gkEnd
:

303 
pos
 = 
’d
 + 
d–
;

309 if(
	gpos
 < 
	gbegš
) {

310 
	gpos
 = 
begš
;

311 } if(
	gpos
 > 
	g’d
) {

312 
	gpos
 = 
’d
;

315  
	gpos
;

318 
št32_t


319 
	gUCh¬Ch¬aù”I‹¿tÜ
::
move32
(
št32_t
 
d–
, 
Ch¬aù”I‹¿tÜ
::
EOrigš
 
Üigš
) {

322 
Üigš
) {

323 
kS¹
:

324 
pos
 = 
begš
;

325 if(
	gd–
 > 0) {

326 
UTF_FWD_N
(
‹xt
, 
pos
, 
’d
, 
d–
);

329 
	gkCu¼’t
:

330 if(
d–
 > 0) {

331 
UTF_FWD_N
(
‹xt
, 
pos
, 
’d
, 
d–
);

333 
UTF_BACK_N
(
‹xt
, 
begš
, 
pos
, -
d–
);

336 
	gkEnd
:

337 
pos
 = 
’d
;

338 if(
	gd–
 < 0) {

339 
UTF_BACK_N
(
‹xt
, 
begš
, 
pos
, -
d–
);

346  
	gpos
;

349 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$£tText
(cÚ¡ 
UCh¬
* 
ÃwText
,

350 
št32_t
 
ÃwTextL’gth
) {

351 
‹xt
 = 
ÃwText
;

352 if(
ÃwText
 =ğ0 || 
ÃwTextL’gth
 < 0) {

353 
ÃwTextL’gth
 = 0;

355 
’d
 = 
‹xtL’gth
 = 
ÃwTextL’gth
;

356 
pos
 = 
begš
 = 0;

357 
	}
}

360 
	gUCh¬Ch¬aù”I‹¿tÜ
::
	$g‘Text
(
UnicodeSŒšg
& 
»suÉ
) {

361 
»suÉ
 = 
	`UnicodeSŒšg
(
‹xt
, 
‹xtL’gth
);

362 
	}
}

364 
	gU_NAMESPACE_END


	@ucln.h

17 #iâdeà
__UCLN_H__


18 
	#__UCLN_H__


	)

20 
	~"unicode/uty³s.h
"

53 
	eECËªupLib¿ryTy³
 {

54 
	mUCLN_START
 = -1,

55 
	mUCLN_UPLUG
,

56 
	mUCLN_CUSTOM
,

57 
	mUCLN_CTESTFW
,

58 
	mUCLN_TOOLUTIL
,

59 
	mUCLN_LAYOUTEX
,

60 
	mUCLN_LAYOUT
,

61 
	mUCLN_IO
,

62 
	mUCLN_I18N
,

63 
	mUCLN_COMMON


64 } 
	tECËªupLib¿ryTy³
;

69 
U_CDECL_BEGIN


70 
UBoŞ
 
	tU_CALLCONV
 
	tş—nupFunc
();

71 
U_CDECL_END


78 
U_CAPI
 
U_EXPORT2
 
uşn_»gi¡”CËªup
(
ECËªupLib¿ryTy³
 
ty³
,

79 
ş—nupFunc
 *
func
);

87 
U_CAPI
 
U_EXPORT2
 
uşn_ş—nupOÃ
(
ECËªupLib¿ryTy³
 
ty³
);

	@ucln_cmn.c

15 
	~"unicode/uty³s.h
"

16 
	~"unicode/uş—n.h
"

17 
	~"uŒacimp.h
"

18 
	~"u¡r_imp.h
"

19 
	~"uşn_cmn.h
"

20 
	~"umu‹x.h
"

21 
	~"uşn.h
"

22 
	~"cmemÜy.h
"

23 
	~"uas£¹.h
"

26 
	#UCLN_TYPE
 
UCLN_COMMON


	)

27 
	~"uşn_imp.h
"

29 
ş—nupFunc
 *
	ggCommÚCËªupFunùiÚs
[
UCLN_COMMON_COUNT
];

30 
ş—nupFunc
 *
	ggLibCËªupFunùiÚs
[
UCLN_COMMON
];

34 #iâdeà
UCLN_DEBUG_CLEANUP


35 
	#UCLN_DEBUG_CLEANUP
 0

	)

39 #ià
defšed
(
UCLN_DEBUG_CLEANUP
)

40 
	~<¡dio.h
>

43 
	$uşn_ş—nup_š‹º®
(
ECËªupLib¿ryTy³
 
libTy³
)

45 ià(
gLibCËªupFunùiÚs
[
libTy³
])

47 
gLibCËªupFunùiÚs
[
libTy³
]();

48 
gLibCËªupFunùiÚs
[
libTy³
] = 
NULL
;

50 
	}
}

52 
U_CAPI
 
U_EXPORT2
 
	$uşn_ş—nupOÃ
(
ECËªupLib¿ryTy³
 
libTy³
)

54 if(
libTy³
==
UCLN_COMMON
) {

55 #ià
UCLN_DEBUG_CLEANUP


56 
	`årštf
(
¡d”r
, "CËªšg up: UCLN_COMMON w™h u_ş—nup,y³ %d\n", ()
libTy³
);

58 
	`u_ş—nup
();

60 #ià
UCLN_DEBUG_CLEANUP


61 
	`årštf
(
¡d”r
, "CËªšg up: usšg uşn_ş—nup_š‹º®,y³ %d\n", ()
libTy³
);

63 
	`uşn_ş—nup_š‹º®
(
libTy³
);

65 
	}
}

68 
U_CFUNC
 

69 
	$uşn_commÚ_»gi¡”CËªup
(
ECËªupCommÚTy³
 
ty³
,

70 
ş—nupFunc
 *
func
)

72 
	`U_ASSERT
(
UCLN_COMMON_START
 < 
ty³
 &&y³ < 
UCLN_COMMON_COUNT
);

73 ià(
UCLN_COMMON_START
 < 
ty³
 &&y³ < 
UCLN_COMMON_COUNT
)

75 
gCommÚCËªupFunùiÚs
[
ty³
] = 
func
;

77 #ià!
UCLN_NO_AUTO_CLEANUP
 && (
	`defšed
(
UCLN_AUTO_ATEXIT
è|| defšed(
UCLN_AUTO_LOCAL
))

78 
	`uşn_»gi¡”Autom©icCËªup
();

80 
	}
}

82 
U_CAPI
 
U_EXPORT2


83 
	$uşn_»gi¡”CËªup
(
ECËªupLib¿ryTy³
 
ty³
,

84 
ş—nupFunc
 *
func
)

86 
	`U_ASSERT
(
UCLN_START
 < 
ty³
 &&y³ < 
UCLN_COMMON
);

87 ià(
UCLN_START
 < 
ty³
 &&y³ < 
UCLN_COMMON
)

89 
gLibCËªupFunùiÚs
[
ty³
] = 
func
;

91 
	}
}

93 
U_CFUNC
 
UBoŞ
 
	$uşn_lib_ş—nup
() {

94 
ECËªupLib¿ryTy³
 
libTy³
 = 
UCLN_START
;

95 
ECËªupCommÚTy³
 
commÚFunc
 = 
UCLN_COMMON_START
;

97 
libTy³
++;†ibTy³<
UCLN_COMMON
;†ibType++) {

98 
	`uşn_ş—nup_š‹º®
(
libTy³
);

101 
commÚFunc
++; commÚFunc<
UCLN_COMMON_COUNT
; commonFunc++) {

102 ià(
gCommÚCËªupFunùiÚs
[
commÚFunc
])

104 
gCommÚCËªupFunùiÚs
[
commÚFunc
]();

105 
gCommÚCËªupFunùiÚs
[
commÚFunc
] = 
NULL
;

108 #ià!
UCLN_NO_AUTO_CLEANUP
 && (
	`defšed
(
UCLN_AUTO_ATEXIT
è|| defšed(
UCLN_AUTO_LOCAL
))

109 
	`uşn_unRegi¡”Autom©icCËªup
();

111  
TRUE
;

112 
	}
}

	@ucln_cmn.h

17 #iâdeà
__UCLN_CMN_H__


18 
	#__UCLN_CMN_H__


	)

20 
	~"unicode/uty³s.h
"

21 
	~"uşn.h
"

25 
U_CFUNC
 
UBoŞ
 
umtx_ş—nup
();

27 
U_CFUNC
 
UBoŞ
 
uŒaû_ş—nup
();

29 
U_CFUNC
 
UBoŞ
 
uşn_lib_ş—nup
();

34 
	eECËªupCommÚTy³
 {

35 
	mUCLN_COMMON_START
 = -1,

36 
	mUCLN_COMMON_USPREP
,

37 
	mUCLN_COMMON_BREAKITERATOR
,

38 
	mUCLN_COMMON_BREAKITERATOR_DICT
,

39 
	mUCLN_COMMON_SERVICE
,

40 
	mUCLN_COMMON_URES
,

41 
	mUCLN_COMMON_LOCALE
,

42 
	mUCLN_COMMON_LOCALE_AVAILABLE
,

43 
	mUCLN_COMMON_ULOC
,

44 
	mUCLN_COMMON_NORMALIZER2
,

45 
	mUCLN_COMMON_USET
,

46 
	mUCLN_COMMON_UNAMES
,

47 
	mUCLN_COMMON_PNAME
,

48 
	mUCLN_COMMON_UPROPS
,

49 
	mUCLN_COMMON_UCNV
,

50 
	mUCLN_COMMON_UCNV_IO
,

51 
	mUCLN_COMMON_UDATA
,

52 
	mUCLN_COMMON_PUTIL
,

53 
	mUCLN_COMMON_COUNT


54 } 
	tECËªupCommÚTy³
;

58 
U_CFUNC
 
U_EXPORT2
 
uşn_commÚ_»gi¡”CËªup
(
ECËªupCommÚTy³
 
ty³
,

59 
ş—nupFunc
 *
func
);

	@ucln_imp.h

18 #iâdeà
__UCLN_IMP_H__


19 
	#__UCLN_IMP_H__


	)

21 
	~"uşn.h
"

22 
	~<¡dlib.h
>

41 #ià!
UCLN_NO_AUTO_CLEANUP


60 #ià
defšed
(
UCLN_AUTO_LOCAL
)

67 
	~"uşn_loÿl_hook.c
"

69 #–ià
defšed
(
UCLN_AUTO_ATEXIT
)

74 
UBoŞ
 
	ggAutoCËªRegi¡”ed
 = 
FALSE
;

76 
	$uşn_©ex™_hªdËr
()

78 
	`uşn_ş—nupOÃ
(
UCLN_TYPE
);

79 
	}
}

81 
	$uşn_»gi¡”Autom©icCËªup
()

83 if(!
gAutoCËªRegi¡”ed
) {

84 
gAutoCËªRegi¡”ed
 = 
TRUE
;

85 
	`©ex™
(&
uşn_©ex™_hªdËr
);

87 
	}
}

89 
	$uşn_unRegi¡”Autom©icCËªup
 () {

90 
	}
}

93 #–ià
defšed
 (
UCLN_FINI
)

99 
U_CAPI
 
U_EXPORT2
 
UCLN_FINI
 ();

101 
U_CAPI
 
U_EXPORT2
 
	$UCLN_FINI
 ()

104 
	`uşn_ş—nupOÃ
(
UCLN_TYPE
);

105 
	}
}

106 #–ià
defšed
(
__GNUC__
)

108 
	$uşn_de¡ruùÜ
(è
	`__©Œibu‹__
((
de¡ruùÜ
)) ;

110 
	$uşn_de¡ruùÜ
()

112 
	`uşn_ş—nupOÃ
(
UCLN_TYPE
);

113 
	}
}

116 #–ià
defšed
 (
U_WINDOWS
)

125 
	#WIN32_LEAN_AND_MEAN


	)

126 
	#VC_EXTRALEAN


	)

127 
	#NOUSER


	)

128 
	#NOSERVICE


	)

129 
	#NOIME


	)

130 
	#NOMCX


	)

131 
	~<wšdows.h
>

135 
BOOL
 
WINAPI
 
	$DÎMaš
(
HINSTANCE
 
hš¡DLL
, 
DWORD
 
fdwR—sÚ
, 
LPVOID
 
ÍvRe£rved
)

137 
BOOL
 
¡©us
 = 
TRUE
;

139 
fdwR—sÚ
) {

140 
DLL_PROCESS_ATTACH
:

145 
DLL_PROCESS_DETACH
:

148 
	`uşn_ş—nupOÃ
(
UCLN_TYPE
);

152 
DLL_THREAD_ATTACH
:

157 
DLL_THREAD_DETACH
:

163  
¡©us
;

164 
	}
}

170 #”rÜ 
This
 
fe
 
ÿn
 
Úly
 
be
 
šşuded
 
Úû
.

	@ucmndata.c

23 
	~"unicode/uty³s.h
"

24 
	~"unicode/ud©a.h
"

25 
	~"c¡ršg.h
"

26 
	~"ucmnd©a.h
"

27 
	~"ud©amem.h
"

29 #ià
defšed
(
UDATA_DEBUG
è|| defšed(
UDATA_DEBUG_DUMP
)

30 
	~<¡dio.h
>

33 
U_CFUNC
 
ušt16_t


34 
	$ud©a_g‘H—d”Size
(cÚ¡ 
D©aH—d”
 *
udh
) {

35 if(
udh
==
NULL
) {

37 } if(
udh
->
šfo
.
isBigEndŸn
==
U_IS_BIG_ENDIAN
) {

39  
udh
->
d©aH—d”
.
h—d”Size
;

42 
ušt16_t
 
x
=
udh
->
d©aH—d”
.
h—d”Size
;

43  (
ušt16_t
)((
x
<<8)|(x>>8));

45 
	}
}

47 
U_CFUNC
 
ušt16_t


48 
	$ud©a_g‘InfoSize
(cÚ¡ 
UD©aInfo
 *
šfo
) {

49 if(
šfo
==
NULL
) {

51 } if(
šfo
->
isBigEndŸn
==
U_IS_BIG_ENDIAN
) {

53  
šfo
->
size
;

56 
ušt16_t
 
x
=
šfo
->
size
;

57  (
ušt16_t
)((
x
<<8)|(x>>8));

59 
	}
}

70 cÚ¡ *
	m’ŒyName
;

71 cÚ¡ 
D©aH—d”
 *
	mpH—d”
;

72 } 
	tPoš‹rTOCEÁry
;

76 
ušt32_t
 
	mcouÁ
;

77 
ušt32_t
 
	m»£rved
;

78 
Poš‹rTOCEÁry
 
	m’Œy
[2];

79 } 
	tPoš‹rTOC
;

89 
ušt32_t
 
	$off£tTOCEÁryCouÁ
(cÚ¡ 
UD©aMemÜy
 *
pD©a
) {

90 
št32_t
 
»tV®
=0;

91 cÚ¡ 
UD©aOff£tTOC
 *
toc
 = (UD©aOff£tTOC *)
pD©a
->toc;

92 ià(
toc
 !ğ
NULL
) {

93 
»tV®
 = 
toc
->
couÁ
;

95  
»tV®
;

96 
	}
}

99 cÚ¡ 
D©aH—d”
 *

100 
	$off£tTOCLookupFn
(cÚ¡ 
UD©aMemÜy
 *
pD©a
,

101 cÚ¡ *
tocEÁryName
,

102 
št32_t
 *
pL’gth
,

103 
UE¼ÜCode
 *
pE¼ÜCode
) {

104 cÚ¡ 
UD©aOff£tTOC
 *
toc
 = (UD©aOff£tTOC *)
pD©a
->toc;

105 if(
toc
!=
NULL
) {

106 cÚ¡ *
ba£
=(cÚ¡ *)
toc
;

107 
ušt32_t
 
¡¬t
, 
lim™
, 
numb”
, 
Ï¡Numb”
;

108 
št32_t
 
¡rResuÉ
;

109 cÚ¡ 
UD©aOff£tTOCEÁry
 *
’Œy
;

112 #ià
	`defšed
 (
UDATA_DEBUG_DUMP
)

114 
¡¬t
=0;¡¬t<
toc
->
couÁ
;start++) {

115 
	`årštf
(
¡d”r
, "\tx%d: %s\n", 
¡¬t
, &
ba£
[
toc
->
’Œy
[¡¬t].
ÇmeOff£t
]);

119 
¡¬t
=0;

120 
lim™
=
toc
->
couÁ
;

121 
Ï¡Numb”
=
lim™
;

122 
’Œy
=
toc
->entry;

124 
numb”
 = (
¡¬t
+
lim™
)/2;

125 ià(
Ï¡Numb”
 =ğ
numb”
) {

129 
Ï¡Numb”
 = 
numb”
;

130 
¡rResuÉ
 = 
	`u´v_¡rcmp
(
tocEÁryName
, 
ba£
+
’Œy
[
numb”
].
ÇmeOff£t
);

131 if(
¡rResuÉ
<0) {

132 
lim™
=
numb”
;

133 } ià(
¡rResuÉ
>0) {

134 
¡¬t
=
numb”
;

138 #ifdeà
UDATA_DEBUG


139 
	`årštf
(
¡d”r
, "%s: Found.\n", 
tocEÁryName
);

141 
’Œy
 +ğ
numb”
;

142 if((
numb”
+1è< 
toc
->
couÁ
) {

143 *
pL’gth
 = (
št32_t
)(
’Œy
[1].
d©aOff£t
 -ƒntry->dataOffset);

145 *
pL’gth
 = -1;

147  (cÚ¡ 
D©aH—d”
 *)(
ba£
+
’Œy
->
d©aOff£t
);

150 #ifdeà
UDATA_DEBUG


151 
	`årštf
(
¡d”r
, "%s: NÙ found.\n", 
tocEÁryName
);

153  
NULL
;

155 #ifdeà
UDATA_DEBUG


156 
	`årštf
(
¡d”r
, "returning header\n");

159  
pD©a
->
pH—d”
;

161 
	}
}

164 
ušt32_t
 
	$poš‹rTOCEÁryCouÁ
(cÚ¡ 
UD©aMemÜy
 *
pD©a
) {

165 cÚ¡ 
Poš‹rTOC
 *
toc
 = (Poš‹rTOC *)
pD©a
->toc;

166  (
ušt32_t
)((
toc
 !ğ
NULL
è? (toc->
couÁ
) : 0);

167 
	}
}

170 cÚ¡ 
D©aH—d”
 *
	$poš‹rTOCLookupFn
(cÚ¡ 
UD©aMemÜy
 *
pD©a
,

171 cÚ¡ *
Çme
,

172 
št32_t
 *
pL’gth
,

173 
UE¼ÜCode
 *
pE¼ÜCode
) {

174 if(
pD©a
->
toc
!=
NULL
) {

175 cÚ¡ 
Poš‹rTOC
 *
toc
 = (Poš‹rTOC *)
pD©a
->toc;

176 
ušt32_t
 
¡¬t
, 
lim™
, 
numb”
, 
Ï¡Numb”
;

177 
št32_t
 
¡rResuÉ
;

179 #ià
	`defšed
 (
UDATA_DEBUG_DUMP
)

181 
¡¬t
=0;¡¬t<
toc
->
couÁ
;start++) {

182 
	`årštf
(
¡d”r
, "\tx%d: %s\n", 
¡¬t
, 
toc
->
’Œy
[¡¬t].
’ŒyName
);

187 
¡¬t
=0;

188 
lim™
=
toc
->
couÁ
;

189 
Ï¡Numb”
=
lim™
;

192 
numb”
 = (
¡¬t
+
lim™
)/2;

193 ià(
Ï¡Numb”
 =ğ
numb”
) {

197 
Ï¡Numb”
 = 
numb”
;

198 
¡rResuÉ
 = 
	`u´v_¡rcmp
(
Çme
, 
toc
->
’Œy
[
numb”
].
’ŒyName
);

199 if(
¡rResuÉ
<0) {

200 
lim™
=
numb”
;

201 } ià(
¡rResuÉ
>0) {

202 
¡¬t
=
numb”
;

206 #ifdeà
UDATA_DEBUG


207 
	`årštf
(
¡d”r
, "%s: Found.\n", 
toc
->
’Œy
[
numb”
].
’ŒyName
);

209 *
pL’gth
=-1;

210  
	`UD©aMemÜy_nÜm®izeD©aPoš‹r
(
toc
->
’Œy
[
numb”
].
pH—d”
);

213 #ifdeà
UDATA_DEBUG


214 
	`årštf
(
¡d”r
, "%s: NÙ found.\n", 
Çme
);

216  
NULL
;

218  
pD©a
->
pH—d”
;

220 
	}
}

222 cÚ¡ 
commÚD©aFuncs
 
	gCmnDFuncs
 = {
off£tTOCLookupFn
, 
off£tTOCEÁryCouÁ
};

223 cÚ¡ 
commÚD©aFuncs
 
	gToCPFuncs
 = {
poš‹rTOCLookupFn
, 
poš‹rTOCEÁryCouÁ
};

235 
U_CFUNC
 
	$ud©a_checkCommÚD©a
(
UD©aMemÜy
 *
udm
, 
UE¼ÜCode
 *
”r
) {

236 ià(
	`U_FAILURE
(*
”r
)) {

240 if(!(
udm
->
pH—d”
->
d©aH—d”
.
magic1
==0xda &&

241 
udm
->
pH—d”
->
d©aH—d”
.
magic2
==0x27 &&

242 
udm
->
pH—d”
->
šfo
.
isBigEndŸn
==
U_IS_BIG_ENDIAN
 &&

243 
udm
->
pH—d”
->
šfo
.
ch¬£tFamy
==
U_CHARSET_FAMILY
)

246 *
”r
=
U_INVALID_FORMAT_ERROR
;

248 ià(
udm
->
pH—d”
->
šfo
.
d©aFÜm©
[0]==0x43 &&

249 
udm
->
pH—d”
->
šfo
.
d©aFÜm©
[1]==0x6d &&

250 
udm
->
pH—d”
->
šfo
.
d©aFÜm©
[2]==0x6e &&

251 
udm
->
pH—d”
->
šfo
.
d©aFÜm©
[3]==0x44 &&

252 
udm
->
pH—d”
->
šfo
.
fÜm©V”siÚ
[0]==1

255 
udm
->
vFuncs
 = &
CmnDFuncs
;

256 
udm
->
toc
=(cÚ¡ *)udm->
pH—d”
+
	`ud©a_g‘H—d”Size
(udm->pHeader);

258 if(
udm
->
pH—d”
->
šfo
.
d©aFÜm©
[0]==0x54 &&

259 
udm
->
pH—d”
->
šfo
.
d©aFÜm©
[1]==0x6f &&

260 
udm
->
pH—d”
->
šfo
.
d©aFÜm©
[2]==0x43 &&

261 
udm
->
pH—d”
->
šfo
.
d©aFÜm©
[3]==0x50 &&

262 
udm
->
pH—d”
->
šfo
.
fÜm©V”siÚ
[0]==1

265 
udm
->
vFuncs
 = &
ToCPFuncs
;

266 
udm
->
toc
=(cÚ¡ *)udm->
pH—d”
+
	`ud©a_g‘H—d”Size
(udm->pHeader);

270 *
”r
=
U_INVALID_FORMAT_ERROR
;

273 ià(
	`U_FAILURE
(*
”r
)) {

278 
	`ud©a_şo£
(
udm
);

280 
	}
}

	@ucmndata.h

25 #iâdeà
__UCMNDATA_H__


26 
	#__UCMNDATA_H__


	)

28 
	~"unicode/ud©a.h
"

29 
	~"um­fe.h
"

32 
	#COMMON_DATA_NAME
 
U_ICUDATA_NAME


	)

35 
ušt16_t
 
	mh—d”Size
;

36 
ušt8_t
 
	mmagic1
;

37 
ušt8_t
 
	mmagic2
;

38 } 
	tM­³dD©a
;

42 
M­³dD©a
 
	md©aH—d”
;

43 
UD©aInfo
 
	mšfo
;

44 } 
	tD©aH—d”
;

47 
ušt32_t
 
	mÇmeOff£t
;

48 
ušt32_t
 
	md©aOff£t
;

49 } 
	tUD©aOff£tTOCEÁry
;

52 
ušt32_t
 
	mcouÁ
;

53 
UD©aOff£tTOCEÁry
 
	m’Œy
[2];

54 } 
	tUD©aOff£tTOC
;

62 
U_CFUNC
 
ušt16_t


63 
ud©a_g‘H—d”Size
(cÚ¡ 
D©aH—d”
 *
udh
);

71 
U_CFUNC
 
ušt16_t


72 
ud©a_g‘InfoSize
(cÚ¡ 
UD©aInfo
 *
šfo
);

81 cÚ¡ 
	tD©aH—d”
 *

82 (* 
	tLookupFn
)(cÚ¡ 
	tUD©aMemÜy
 *
	tpD©a
,

83 cÚ¡ *
	ttocEÁryName
,

84 
	tšt32_t
 *
	tpL’gth
,

85 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

87 
	gušt32_t


88 (* 
	tNumEÁr›sFn
)(cÚ¡ 
	tUD©aMemÜy
 *
	tpD©a
);

91 
LookupFn
 
	mLookup
;

92 
NumEÁr›sFn
 
	mNumEÁr›s
;

93 } 
	tcommÚD©aFuncs
;

106 
U_CFUNC
 
ud©a_checkCommÚD©a
(
UD©aMemÜy
 *
pD©a
, 
UE¼ÜCode
 *
pE¼ÜCode
);

	@ucnv.c

22 
	~"unicode/uty³s.h
"

24 #ià!
UCONFIG_NO_CONVERSION


26 
	~"unicode/u¡ršg.h
"

27 
	~"unicode/uúv.h
"

28 
	~"unicode/uúv_”r.h
"

29 
	~"unicode/u£t.h
"

30 
	~"putimp.h
"

31 
	~"cmemÜy.h
"

32 
	~"c¡ršg.h
"

33 
	~"uas£¹.h
"

34 
	~"uŒacimp.h
"

35 
	~"u¡r_imp.h
"

36 
	~"uúv_imp.h
"

37 
	~"uúv_úv.h
"

38 
	~"uúv_bld.h
"

41 
	#CHUNK_SIZE
 1024

	)

43 
	sUAmbiguousCÚv”‹r
 {

44 cÚ¡ *
	mÇme
;

45 cÚ¡ 
UCh¬
 
	mv¬ŸÁ5c
;

46 } 
	tUAmbiguousCÚv”‹r
;

48 cÚ¡ 
UAmbiguousCÚv”‹r
 
	gambiguousCÚv”‹rs
[]={

66 
U_CAPI
 
UCÚv”‹r
* 
U_EXPORT2


67 
	$uúv_İ’
 (cÚ¡ *
Çme
,

68 
UE¼ÜCode
 * 
”r
)

70 
UCÚv”‹r
 *
r
;

72 ià(
”r
 =ğ
NULL
 || 
	`U_FAILURE
 (*err)) {

73  
NULL
;

76 
r
 = 
	`uúv_ü—‹CÚv”‹r
(
NULL
, 
Çme
, 
”r
);

77  
r
;

78 
	}
}

80 
U_CAPI
 
UCÚv”‹r
* 
U_EXPORT2


81 
	$uúv_İ’Package
 (cÚ¡ *
·ckageName
, cÚ¡ *
cÚv”‹rName
, 
UE¼ÜCode
 * 
”r
)

83  
	`uúv_ü—‹CÚv”‹rFromPackage
(
·ckageName
, 
cÚv”‹rName
, 
”r
);

84 
	}
}

87 
U_CAPI
 
UCÚv”‹r
* 
U_EXPORT2


88 
	$uúv_İ’U
 (cÚ¡ 
UCh¬
 * 
Çme
,

89 
UE¼ÜCode
 * 
”r
)

91 
asciiName
[
UCNV_MAX_CONVERTER_NAME_LENGTH
];

93 ià(
”r
 =ğ
NULL
 || 
	`U_FAILURE
(*err))

94  
NULL
;

95 ià(
Çme
 =ğ
NULL
)

96  
	`uúv_İ’
 (
NULL
, 
”r
);

97 ià(
	`u_¡¾’
(
Çme
è>ğ
UCNV_MAX_CONVERTER_NAME_LENGTH
)

99 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

100  
NULL
;

102  
	`uúv_İ’
(
	`u_au¡rıy
(
asciiName
, 
Çme
), 
”r
);

103 
	}
}

110 
št32_t


111 
	$uúv_cİyPÏtfÜmSŒšg
(*
¶©fÜmSŒšg
, 
UCÚv”‹rPÏtfÜm
 
¶täm
)

113 
¶täm
)

115 
UCNV_IBM
:

116 
	`u´v_¡rıy
(
¶©fÜmSŒšg
, "ibm-");

118 
UCNV_UNKNOWN
:

123 *
¶©fÜmSŒšg
 = 0;

125 
	}
}

129 
U_CAPI
 
UCÚv”‹r
* 
U_EXPORT2


130 
	$uúv_İ’CCSID
 (
št32_t
 
cod•age
,

131 
UCÚv”‹rPÏtfÜm
 
¶©fÜm
,

132 
UE¼ÜCode
 * 
”r
)

134 
myName
[
UCNV_MAX_CONVERTER_NAME_LENGTH
];

135 
št32_t
 
myNameL’
;

137 ià(
”r
 =ğ
NULL
 || 
	`U_FAILURE
 (*err))

138  
NULL
;

141 
myNameL’
 = 
	`uúv_cİyPÏtfÜmSŒšg
(
myName
, 
¶©fÜm
);

142 
	`T_CSŒšg_š‹g”ToSŒšg
(
myName
 + 
myNameL’
, 
cod•age
, 10);

144  
	`uúv_ü—‹CÚv”‹r
(
NULL
, 
myName
, 
”r
);

145 
	}
}

151 
U_CAPI
 
UCÚv”‹r
* 
U_EXPORT2


152 
	$uúv_§ãClÚe
(cÚ¡ 
UCÚv”‹r
* 
úv
, *
¡ackBufãr
, 
št32_t
 *
pBufãrSize
, 
UE¼ÜCode
 *
¡©us
)

154 
UCÚv”‹r
 *
loÿlCÚv”‹r
, *
®loÿ‹dCÚv”‹r
;

155 
št32_t
 
bufãrSizeN“ded
;

156 *
¡ackBufãrCh¬s
 = (*)
¡ackBufãr
;

157 
UE¼ÜCode
 
cbE¼
;

158 
UCÚv”‹rToUnicodeArgs
 
toUArgs
 = {

159 (
UCÚv”‹rToUnicodeArgs
),

160 
TRUE
,

161 
NULL
,

162 
NULL
,

163 
NULL
,

164 
NULL
,

165 
NULL
,

166 
NULL


168 
UCÚv”‹rFromUnicodeArgs
 
äomUArgs
 = {

169 (
UCÚv”‹rFromUnicodeArgs
),

170 
TRUE
,

171 
NULL
,

172 
NULL
,

173 
NULL
,

174 
NULL
,

175 
NULL
,

176 
NULL


179 
	`UTRACE_ENTRY_OC
(
UTRACE_UCNV_CLONE
);

181 ià(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

182 
	`UTRACE_EXIT_STATUS
(
¡©us
? *¡©us: 
U_ILLEGAL_ARGUMENT_ERROR
);

186 ià(!
pBufãrSize
 || !
úv
){

187 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

188 
	`UTRACE_EXIT_STATUS
(*
¡©us
);

192 
	`UTRACE_DATA3
(
UTRACE_OPEN_CLOSE
, "clone converter %s‡t %p into stackBuffer %p",

193 
	`uúv_g‘Name
(
úv
, 
¡©us
), cnv, 
¡ackBufãr
);

195 ià(
úv
->
sh¬edD©a
->
im¶
->
§ãClÚe
 !ğ
NULL
) {

197 
bufãrSizeN“ded
 = 0;

198 
úv
->
sh¬edD©a
->
im¶
->
	`§ãClÚe
(úv, 
NULL
, &
bufãrSizeN“ded
, 
¡©us
);

203 
bufãrSizeN“ded
 = (
UCÚv”‹r
);

206 ià(*
pBufãrSize
 <= 0){

207 *
pBufãrSize
 = 
bufãrSizeN“ded
;

208 
	`UTRACE_EXIT_VALUE
(
bufãrSizeN“ded
);

216 ià(
	`U_ALIGNMENT_OFFSET
(
¡ackBufãr
) != 0) {

217 
št32_t
 
off£tUp
 = (št32_t)
	`U_ALIGNMENT_OFFSET_UP
(
¡ackBufãrCh¬s
);

218 if(*
pBufãrSize
 > 
off£tUp
) {

219 *
pBufãrSize
 -ğ
off£tUp
;

220 
¡ackBufãrCh¬s
 +ğ
off£tUp
;

223 *
pBufãrSize
 = 1;

227 
¡ackBufãr
 = (*)
¡ackBufãrCh¬s
;

230 ià(*
pBufãrSize
 < 
bufãrSizeN“ded
 || 
¡ackBufãr
 =ğ
NULL
)

233 
loÿlCÚv”‹r
 = 
®loÿ‹dCÚv”‹r
 = (
UCÚv”‹r
 *è
	`u´v_m®loc
 (
bufãrSizeN“ded
);

235 if(
loÿlCÚv”‹r
 =ğ
NULL
) {

236 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

237 
	`UTRACE_EXIT_STATUS
(*
¡©us
);

238  
NULL
;

241 ià(
	`U_SUCCESS
(*
¡©us
)) {

242 *
¡©us
 = 
U_SAFECLONE_ALLOCATED_WARNING
;

246 *
pBufãrSize
 = 
bufãrSizeN“ded
;

249 
loÿlCÚv”‹r
 = (
UCÚv”‹r
*è
¡ackBufãr
;

250 
®loÿ‹dCÚv”‹r
 = 
NULL
;

253 
	`u´v_mem£t
(
loÿlCÚv”‹r
, 0, 
bufãrSizeN“ded
);

256 
	`u´v_memıy
(
loÿlCÚv”‹r
, 
úv
, (
UCÚv”‹r
));

257 
loÿlCÚv”‹r
->
isCİyLoÿl
 =†oÿlCÚv”‹r->
isExŒaLoÿl
 = 
FALSE
;

260 ià(
úv
->
subCh¬s
 =ğ(
ušt8_t
 *)úv->
subUCh¬s
) {

261 
loÿlCÚv”‹r
->
subCh¬s
 = (
ušt8_t
 *îoÿlCÚv”‹r->
subUCh¬s
;

263 
loÿlCÚv”‹r
->
subCh¬s
 = (
ušt8_t
 *)
	`u´v_m®loc
(
UCNV_ERROR_BUFFER_LENGTH
 * 
U_SIZEOF_UCHAR
);

264 ià(
loÿlCÚv”‹r
->
subCh¬s
 =ğ
NULL
) {

265 
	`u´v_ä“
(
®loÿ‹dCÚv”‹r
);

266 
	`UTRACE_EXIT_STATUS
(*
¡©us
);

267  
NULL
;

269 
	`u´v_memıy
(
loÿlCÚv”‹r
->
subCh¬s
, 
úv
->subCh¬s, 
UCNV_ERROR_BUFFER_LENGTH
 * 
U_SIZEOF_UCHAR
);

273 ià(
úv
->
sh¬edD©a
->
im¶
->
§ãClÚe
 !ğ
NULL
) {

275 
loÿlCÚv”‹r
 = 
úv
->
sh¬edD©a
->
im¶
->
	`§ãClÚe
(úv,†oÿlCÚv”‹r, 
pBufãrSize
, 
¡©us
);

278 if(
loÿlCÚv”‹r
==
NULL
 || 
	`U_FAILURE
(*
¡©us
)) {

279 ià(
®loÿ‹dCÚv”‹r
 !ğ
NULL
 &&‡Îoÿ‹dCÚv”‹r->
subCh¬s
 !ğ(
ušt8_t
 *ïÎoÿ‹dCÚv”‹r->
subUCh¬s
) {

280 
	`u´v_ä“
(
®loÿ‹dCÚv”‹r
->
subCh¬s
);

282 
	`u´v_ä“
(
®loÿ‹dCÚv”‹r
);

283 
	`UTRACE_EXIT_STATUS
(*
¡©us
);

284  
NULL
;

293 ià(
úv
->
sh¬edD©a
->
»ã»nûCouÁ”
 != ~0) {

294 
	`uúv_šüem’tRefCouÁ
(
úv
->
sh¬edD©a
);

297 if(
loÿlCÚv”‹r
 =ğ(
UCÚv”‹r
*)
¡ackBufãr
) {

299 
loÿlCÚv”‹r
->
isCİyLoÿl
 = 
TRUE
;

303 
toUArgs
.
cÚv”‹r
 = 
äomUArgs
.cÚv”‹¸ğ
loÿlCÚv”‹r
;

304 
cbE¼
 = 
U_ZERO_ERROR
;

305 
úv
->
	`äomCh¬E¼ÜBehaviour
(úv->
toUCÚ‹xt
, &
toUArgs
, 
NULL
, 0, 
UCNV_CLONE
, &
cbE¼
);

306 
cbE¼
 = 
U_ZERO_ERROR
;

307 
úv
->
	`äomUCh¬E¼ÜBehaviour
(úv->
äomUCÚ‹xt
, &
äomUArgs
, 
NULL
, 0, 0, 
UCNV_CLONE
, &
cbE¼
);

309 
	`UTRACE_EXIT_PTR_STATUS
(
loÿlCÚv”‹r
, *
¡©us
);

310  
loÿlCÚv”‹r
;

311 
	}
}

318 
U_CAPI
 
U_EXPORT2


319 
	$uúv_şo£
 (
UCÚv”‹r
 * 
cÚv”‹r
)

321 
UE¼ÜCode
 
”rÜCode
 = 
U_ZERO_ERROR
;

323 
	`UTRACE_ENTRY_OC
(
UTRACE_UCNV_CLOSE
);

325 ià(
cÚv”‹r
 =ğ
NULL
)

327 
	`UTRACE_EXIT
();

331 
	`UTRACE_DATA3
(
UTRACE_OPEN_CLOSE
, "close converter %s‡t %p, isCopyLocal=%b",

332 
	`uúv_g‘Name
(
cÚv”‹r
, &
”rÜCode
), cÚv”‹r, cÚv”‹r->
isCİyLoÿl
);

338 ià(
cÚv”‹r
->
äomCh¬E¼ÜBehaviour
 !ğ
UCNV_TO_U_DEFAULT_CALLBACK
) {

339 
UCÚv”‹rToUnicodeArgs
 
toUArgs
 = {

340 (
UCÚv”‹rToUnicodeArgs
),

341 
TRUE
,

342 
NULL
,

343 
NULL
,

344 
NULL
,

345 
NULL
,

346 
NULL
,

347 
NULL


350 
toUArgs
.
cÚv”‹r
 = converter;

351 
”rÜCode
 = 
U_ZERO_ERROR
;

352 
cÚv”‹r
->
	`äomCh¬E¼ÜBehaviour
(cÚv”‹r->
toUCÚ‹xt
, &
toUArgs
, 
NULL
, 0, 
UCNV_CLOSE
, &
”rÜCode
);

354 ià(
cÚv”‹r
->
äomUCh¬E¼ÜBehaviour
 !ğ
UCNV_FROM_U_DEFAULT_CALLBACK
) {

355 
UCÚv”‹rFromUnicodeArgs
 
äomUArgs
 = {

356 (
UCÚv”‹rFromUnicodeArgs
),

357 
TRUE
,

358 
NULL
,

359 
NULL
,

360 
NULL
,

361 
NULL
,

362 
NULL
,

363 
NULL


365 
äomUArgs
.
cÚv”‹r
 = converter;

366 
”rÜCode
 = 
U_ZERO_ERROR
;

367 
cÚv”‹r
->
	`äomUCh¬E¼ÜBehaviour
(cÚv”‹r->
äomUCÚ‹xt
, &
äomUArgs
, 
NULL
, 0, 0, 
UCNV_CLOSE
, &
”rÜCode
);

370 ià(
cÚv”‹r
->
sh¬edD©a
->
im¶
->
şo£
 !ğ
NULL
) {

371 
cÚv”‹r
->
sh¬edD©a
->
im¶
->
	`şo£
(converter);

374 ià(
cÚv”‹r
->
subCh¬s
 !ğ(
ušt8_t
 *)cÚv”‹r->
subUCh¬s
) {

375 
	`u´v_ä“
(
cÚv”‹r
->
subCh¬s
);

383 ià(
cÚv”‹r
->
sh¬edD©a
->
»ã»nûCouÁ”
 != ~0) {

384 
	`uúv_uÆßdSh¬edD©aIfR—dy
(
cÚv”‹r
->
sh¬edD©a
);

387 if(!
cÚv”‹r
->
isCİyLoÿl
){

388 
	`u´v_ä“
(
cÚv”‹r
);

391 
	`UTRACE_EXIT
();

392 
	}
}

396 
U_CAPI
 cÚ¡ * 
U_EXPORT2


397 
	$uúv_g‘AvaabËName
 (
št32_t
 
n
)

399 ià(0 <ğ
n
 &&‚ <= 0xffff) {

400 
UE¼ÜCode
 
”r
 = 
U_ZERO_ERROR
;

401 cÚ¡ *
Çme
 = 
	`uúv_bld_g‘AvaabËCÚv”‹r
((
ušt16_t
)
n
, &
”r
);

402 ià(
	`U_SUCCESS
(
”r
)) {

403  
Çme
;

406  
NULL
;

407 
	}
}

409 
U_CAPI
 
št32_t
 
U_EXPORT2


410 
	$uúv_couÁAvaabË
 ()

412 
UE¼ÜCode
 
”r
 = 
U_ZERO_ERROR
;

413  
	`uúv_bld_couÁAvaabËCÚv”‹rs
(&
”r
);

414 
	}
}

416 
U_CAPI
 
U_EXPORT2


417 
	$uúv_g‘Sub¡Ch¬s
 (cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
,

418 *
mySubCh¬
,

419 
št8_t
 * 
Ën
,

420 
UE¼ÜCode
 * 
”r
)

422 ià(
	`U_FAILURE
 (*
”r
))

425 ià(
cÚv”‹r
->
subCh¬L’
 <= 0) {

427 *
Ën
 = 0;

431 ià(*
Ën
 < 
cÚv”‹r
->
subCh¬L’
)

433 *
”r
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

437 
	`u´v_memıy
 (
mySubCh¬
, 
cÚv”‹r
->
subCh¬s
, cÚv”‹r->
subCh¬L’
);

438 *
Ën
 = 
cÚv”‹r
->
subCh¬L’
;

439 
	}
}

441 
U_CAPI
 
U_EXPORT2


442 
	$uúv_£tSub¡Ch¬s
 (
UCÚv”‹r
 * 
cÚv”‹r
,

443 cÚ¡ *
mySubCh¬
,

444 
št8_t
 
Ën
,

445 
UE¼ÜCode
 * 
”r
)

447 ià(
	`U_FAILURE
 (*
”r
))

451 ià((
Ën
 > 
cÚv”‹r
->
sh¬edD©a
->
¡©icD©a
->
maxBy‹sP”Ch¬
)

452 || (
Ën
 < 
cÚv”‹r
->
sh¬edD©a
->
¡©icD©a
->
mšBy‹sP”Ch¬
))

454 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

458 
	`u´v_memıy
 (
cÚv”‹r
->
subCh¬s
, 
mySubCh¬
, 
Ën
);

459 
cÚv”‹r
->
subCh¬L’
 = 
Ën
;

466 
cÚv”‹r
->
subCh¬1
 = 0;

469 
	}
}

471 
U_CAPI
 
U_EXPORT2


472 
	$uúv_£tSub¡SŒšg
(
UCÚv”‹r
 *
úv
,

473 cÚ¡ 
UCh¬
 *
s
,

474 
št32_t
 
Ëngth
,

475 
UE¼ÜCode
 *
”r
) {

476 
UAligÃdMemÜy
 
şÚeBufãr
[
U_CNV_SAFECLONE_BUFFERSIZE
 / (UAlignedMemory) + 1];

477 
ch¬s
[
UCNV_ERROR_BUFFER_LENGTH
];

479 
UCÚv”‹r
 *
şÚe
;

480 
ušt8_t
 *
subCh¬s
;

481 
št32_t
 
şÚeSize
, 
Ëngth8
;

484 
şÚeSize
 = (
şÚeBufãr
);

485 
şÚe
 = 
	`uúv_§ãClÚe
(
úv
, 
şÚeBufãr
, &
şÚeSize
, 
”r
);

486 
	`uúv_£tFromUC®lBack
(
şÚe
, 
UCNV_FROM_U_CALLBACK_STOP
, 
NULL
, NULL, NULL, 
”r
);

487 
Ëngth8
 = 
	`uúv_äomUCh¬s
(
şÚe
, 
ch¬s
, (
št32_t
)(ch¬s), 
s
, 
Ëngth
, 
”r
);

488 
	`uúv_şo£
(
şÚe
);

489 ià(
	`U_FAILURE
(*
”r
)) {

493 ià(
úv
->
sh¬edD©a
->
im¶
->
wr™eSub
 =ğ
NULL


494 #ià!
UCONFIG_NO_LEGACY_CONVERSION


495 || (
úv
->
sh¬edD©a
->
¡©icD©a
->
cÚv”siÚTy³
 =ğ
UCNV_MBCS
 &&

496 
	`uúv_MBCSG‘Ty³
(
úv
è!ğ
UCNV_EBCDIC_STATEFUL
)

500 
subCh¬s
 = (
ušt8_t
 *)
ch¬s
;

508 ià(
Ëngth
 > 
UCNV_ERROR_BUFFER_LENGTH
) {

514 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

517 
subCh¬s
 = (
ušt8_t
 *)
s
;

518 ià(
Ëngth
 < 0) {

519 
Ëngth
 = 
	`u_¡¾’
(
s
);

521 
Ëngth8
 = 
Ëngth
 * 
U_SIZEOF_UCHAR
;

528 ià(
Ëngth8
 > 
UCNV_MAX_SUBCHAR_LEN
) {

530 ià(
úv
->
subCh¬s
 =ğ(
ušt8_t
 *)úv->
subUCh¬s
) {

532 
úv
->
subCh¬s
 = (
ušt8_t
 *)
	`u´v_m®loc
(
UCNV_ERROR_BUFFER_LENGTH
 * 
U_SIZEOF_UCHAR
);

533 ià(
úv
->
subCh¬s
 =ğ
NULL
) {

534 
úv
->
subCh¬s
 = (
ušt8_t
 *)úv->
subUCh¬s
;

535 *
”r
 = 
U_MEMORY_ALLOCATION_ERROR
;

538 
	`u´v_mem£t
(
úv
->
subCh¬s
, 0, 
UCNV_ERROR_BUFFER_LENGTH
 * 
U_SIZEOF_UCHAR
);

543 ià(
Ëngth8
 == 0) {

544 
úv
->
subCh¬L’
 = 0;

546 
	`u´v_memıy
(
úv
->
subCh¬s
, subCh¬s, 
Ëngth8
);

547 ià(
subCh¬s
 =ğ(
ušt8_t
 *)
ch¬s
) {

548 
úv
->
subCh¬L’
 = (
št8_t
)
Ëngth8
;

550 
úv
->
subCh¬L’
 = (
št8_t
)-
Ëngth
;

555 
úv
->
subCh¬1
 = 0;

556 
	}
}

561 
	$_»£t
(
UCÚv”‹r
 *
cÚv”‹r
, 
UCÚv”‹rRe£tChoiû
 
choiû
,

562 
UBoŞ
 
ÿÎC®lback
) {

563 if(
cÚv”‹r
 =ğ
NULL
) {

567 if(
ÿÎC®lback
) {

569 
UE¼ÜCode
 
”rÜCode
;

571 if(
choiû
<=
UCNV_RESET_TO_UNICODE
 && 
cÚv”‹r
->
äomCh¬E¼ÜBehaviour
 !ğ
UCNV_TO_U_DEFAULT_CALLBACK
) {

572 
UCÚv”‹rToUnicodeArgs
 
toUArgs
 = {

573 (
UCÚv”‹rToUnicodeArgs
),

574 
TRUE
,

575 
NULL
,

576 
NULL
,

577 
NULL
,

578 
NULL
,

579 
NULL
,

580 
NULL


582 
toUArgs
.
cÚv”‹r
 = converter;

583 
”rÜCode
 = 
U_ZERO_ERROR
;

584 
cÚv”‹r
->
	`äomCh¬E¼ÜBehaviour
(cÚv”‹r->
toUCÚ‹xt
, &
toUArgs
, 
NULL
, 0, 
UCNV_RESET
, &
”rÜCode
);

586 if(
choiû
!=
UCNV_RESET_TO_UNICODE
 && 
cÚv”‹r
->
äomUCh¬E¼ÜBehaviour
 !ğ
UCNV_FROM_U_DEFAULT_CALLBACK
) {

587 
UCÚv”‹rFromUnicodeArgs
 
äomUArgs
 = {

588 (
UCÚv”‹rFromUnicodeArgs
),

589 
TRUE
,

590 
NULL
,

591 
NULL
,

592 
NULL
,

593 
NULL
,

594 
NULL
,

595 
NULL


597 
äomUArgs
.
cÚv”‹r
 = converter;

598 
”rÜCode
 = 
U_ZERO_ERROR
;

599 
cÚv”‹r
->
	`äomUCh¬E¼ÜBehaviour
(cÚv”‹r->
äomUCÚ‹xt
, &
äomUArgs
, 
NULL
, 0, 0, 
UCNV_RESET
, &
”rÜCode
);

604 if(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

605 
cÚv”‹r
->
toUnicodeStus
 = cÚv”‹r->
sh¬edD©a
->toUnicodeStatus;

606 
cÚv”‹r
->
mode
 = 0;

607 
cÚv”‹r
->
toUL’gth
 = 0;

608 
cÚv”‹r
->
šv®idCh¬L’gth
 = cÚv”‹r->
UCh¬E¼ÜBufãrL’gth
 = 0;

609 
cÚv”‹r
->
´eToUL’gth
 = 0;

611 if(
choiû
!=
UCNV_RESET_TO_UNICODE
) {

612 
cÚv”‹r
->
äomUnicodeStus
 = 0;

613 
cÚv”‹r
->
äomUCh¬32
 = 0;

614 
cÚv”‹r
->
šv®idUCh¬L’gth
 = cÚv”‹r->
ch¬E¼ÜBufãrL’gth
 = 0;

615 
cÚv”‹r
->
´eFromUFœ¡CP
 = 
U_SENTINEL
;

616 
cÚv”‹r
->
´eFromUL’gth
 = 0;

619 ià(
cÚv”‹r
->
sh¬edD©a
->
im¶
->
»£t
 !ğ
NULL
) {

621 
cÚv”‹r
->
sh¬edD©a
->
im¶
->
	`»£t
(cÚv”‹r, 
choiû
);

623 
	}
}

625 
U_CAPI
 
U_EXPORT2


626 
	$uúv_»£t
(
UCÚv”‹r
 *
cÚv”‹r
)

628 
	`_»£t
(
cÚv”‹r
, 
UCNV_RESET_BOTH
, 
TRUE
);

629 
	}
}

631 
U_CAPI
 
U_EXPORT2


632 
	$uúv_»£tToUnicode
(
UCÚv”‹r
 *
cÚv”‹r
)

634 
	`_»£t
(
cÚv”‹r
, 
UCNV_RESET_TO_UNICODE
, 
TRUE
);

635 
	}
}

637 
U_CAPI
 
U_EXPORT2


638 
	$uúv_»£tFromUnicode
(
UCÚv”‹r
 *
cÚv”‹r
)

640 
	`_»£t
(
cÚv”‹r
, 
UCNV_RESET_FROM_UNICODE
, 
TRUE
);

641 
	}
}

643 
U_CAPI
 
št8_t
 
U_EXPORT2


644 
	$uúv_g‘MaxCh¬Size
 (cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
)

646  
cÚv”‹r
->
maxBy‹sP”UCh¬
;

647 
	}
}

650 
U_CAPI
 
št8_t
 
U_EXPORT2


651 
	$uúv_g‘MšCh¬Size
 (cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
)

653  
cÚv”‹r
->
sh¬edD©a
->
¡©icD©a
->
mšBy‹sP”Ch¬
;

654 
	}
}

656 
U_CAPI
 cÚ¡ * 
U_EXPORT2


657 
	$uúv_g‘Name
 (cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
, 
UE¼ÜCode
 * 
”r
)

660 ià(
	`U_FAILURE
 (*
”r
))

661  
NULL
;

662 if(
cÚv”‹r
->
sh¬edD©a
->
im¶
->
g‘Name
){

663 cÚ¡ * 
‹mp
ğ
cÚv”‹r
->
sh¬edD©a
->
im¶
->
	`g‘Name
(converter);

664 if(
‹mp
)

665  
‹mp
;

667  
cÚv”‹r
->
sh¬edD©a
->
¡©icD©a
->
Çme
;

668 
	}
}

670 
U_CAPI
 
št32_t
 
U_EXPORT2


671 
	$uúv_g‘CCSID
(cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
,

672 
UE¼ÜCode
 * 
”r
)

674 
št32_t
 
ccsid
;

675 ià(
	`U_FAILURE
 (*
”r
))

678 
ccsid
 = 
cÚv”‹r
->
sh¬edD©a
->
¡©icD©a
->
cod•age
;

679 ià(
ccsid
 == 0) {

682 cÚ¡ *
¡ªd¬dName
 = 
	`uúv_g‘Snd¬dName
(
	`uúv_g‘Name
(
cÚv”‹r
, 
”r
), "IBM",ƒrr);

683 ià(
	`U_SUCCESS
(*
”r
è&& 
¡ªd¬dName
) {

684 cÚ¡ *
ccsidSŒ
 = 
	`u´v_¡rchr
(
¡ªd¬dName
, '-');

685 ià(
ccsidSŒ
) {

686 
ccsid
 = (
št32_t
)
	`©Ş
(
ccsidSŒ
+1);

690  
ccsid
;

691 
	}
}

694 
U_CAPI
 
UCÚv”‹rPÏtfÜm
 
U_EXPORT2


695 
	$uúv_g‘PÏtfÜm
 (cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
,

696 
UE¼ÜCode
 * 
”r
)

698 ià(
	`U_FAILURE
 (*
”r
))

699  
UCNV_UNKNOWN
;

701  (
UCÚv”‹rPÏtfÜm
)
cÚv”‹r
->
sh¬edD©a
->
¡©icD©a
->
¶©fÜm
;

702 
	}
}

704 
U_CAPI
 
U_EXPORT2


705 
	$uúv_g‘ToUC®lBack
 (cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
,

706 
UCÚv”‹rToUC®lback
 *
aùiÚ
,

707 cÚ¡ **
cÚ‹xt
)

709 *
aùiÚ
 = 
cÚv”‹r
->
äomCh¬E¼ÜBehaviour
;

710 *
cÚ‹xt
 = 
cÚv”‹r
->
toUCÚ‹xt
;

711 
	}
}

713 
U_CAPI
 
U_EXPORT2


714 
	$uúv_g‘FromUC®lBack
 (cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
,

715 
UCÚv”‹rFromUC®lback
 *
aùiÚ
,

716 cÚ¡ **
cÚ‹xt
)

718 *
aùiÚ
 = 
cÚv”‹r
->
äomUCh¬E¼ÜBehaviour
;

719 *
cÚ‹xt
 = 
cÚv”‹r
->
äomUCÚ‹xt
;

720 
	}
}

722 
U_CAPI
 
U_EXPORT2


723 
	$uúv_£tToUC®lBack
 (
UCÚv”‹r
 * 
cÚv”‹r
,

724 
UCÚv”‹rToUC®lback
 
ÃwAùiÚ
,

725 cÚ¡ * 
ÃwCÚ‹xt
,

726 
UCÚv”‹rToUC®lback
 *
ŞdAùiÚ
,

727 cÚ¡ ** 
ŞdCÚ‹xt
,

728 
UE¼ÜCode
 * 
”r
)

730 ià(
	`U_FAILURE
 (*
”r
))

732 ià(
ŞdAùiÚ
è*ŞdAùiÚ = 
cÚv”‹r
->
äomCh¬E¼ÜBehaviour
;

733 
cÚv”‹r
->
äomCh¬E¼ÜBehaviour
 = 
ÃwAùiÚ
;

734 ià(
ŞdCÚ‹xt
è*ŞdCÚ‹xˆğ
cÚv”‹r
->
toUCÚ‹xt
;

735 
cÚv”‹r
->
toUCÚ‹xt
 = 
ÃwCÚ‹xt
;

736 
	}
}

738 
U_CAPI
 
U_EXPORT2


739 
	$uúv_£tFromUC®lBack
 (
UCÚv”‹r
 * 
cÚv”‹r
,

740 
UCÚv”‹rFromUC®lback
 
ÃwAùiÚ
,

741 cÚ¡ * 
ÃwCÚ‹xt
,

742 
UCÚv”‹rFromUC®lback
 *
ŞdAùiÚ
,

743 cÚ¡ ** 
ŞdCÚ‹xt
,

744 
UE¼ÜCode
 * 
”r
)

746 ià(
	`U_FAILURE
 (*
”r
))

748 ià(
ŞdAùiÚ
è*ŞdAùiÚ = 
cÚv”‹r
->
äomUCh¬E¼ÜBehaviour
;

749 
cÚv”‹r
->
äomUCh¬E¼ÜBehaviour
 = 
ÃwAùiÚ
;

750 ià(
ŞdCÚ‹xt
è*ŞdCÚ‹xˆğ
cÚv”‹r
->
äomUCÚ‹xt
;

751 
cÚv”‹r
->
äomUCÚ‹xt
 = 
ÃwCÚ‹xt
;

752 
	}
}

755 
	$_upd©eOff£ts
(
št32_t
 *
off£ts
, iÁ32_ˆ
Ëngth
,

756 
št32_t
 
sourûIndex
, iÁ32_ˆ
”rÜIÅutL’gth
) {

757 
št32_t
 *
lim™
;

758 
št32_t
 
d–
, 
off£t
;

760 if(
sourûIndex
>=0) {

766 
d–
=
sourûIndex
-
”rÜIÅutL’gth
;

772 
d–
=-1;

775 
lim™
=
off£ts
+
Ëngth
;

776 if(
d–
==0) {

778 } if(
d–
>0) {

780 
off£ts
<
lim™
) {

781 
off£t
=*
off£ts
;

782 if(
off£t
>=0) {

783 *
off£ts
=
off£t
+
d–
;

785 ++
off£ts
;

793 
off£ts
<
lim™
) {

794 *
off£ts
++=-1;

797 
	}
}

824 
	$_äomUnicodeW™hC®lback
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
, 
UE¼ÜCode
 *
”r
) {

825 
UCÚv”‹rFromUnicode
 
äomUnicode
;

826 
UCÚv”‹r
 *
úv
;

827 cÚ¡ 
UCh¬
 *
s
;

828 *
t
;

829 
št32_t
 *
off£ts
;

830 
št32_t
 
sourûIndex
;

831 
št32_t
 
”rÜIÅutL’gth
;

832 
UBoŞ
 
cÚv”‹rSawEndOfIÅut
, 
ÿÎedC®lback
;

835 
UCh¬
 
»¶ay
[
UCNV_EXT_MAX_UCHARS
];

836 cÚ¡ 
UCh¬
 *
»®Sourû
, *
»®SourûLim™
;

837 
št32_t
 
»®SourûIndex
;

838 
UBoŞ
 
»®Flush
;

840 
úv
=
pArgs
->
cÚv”‹r
;

841 
s
=
pArgs
->
sourû
;

842 
t
=
pArgs
->
rg‘
;

843 
off£ts
=
pArgs
->offsets;

846 
sourûIndex
=0;

847 if(
off£ts
==
NULL
) {

848 
äomUnicode
=
úv
->
sh¬edD©a
->
im¶
->fromUnicode;

850 
äomUnicode
=
úv
->
sh¬edD©a
->
im¶
->
äomUnicodeW™hOff£ts
;

851 if(
äomUnicode
==
NULL
) {

853 
äomUnicode
=
úv
->
sh¬edD©a
->
im¶
->fromUnicode;

855 
sourûIndex
=-1;

859 if(
úv
->
´eFromUL’gth
>=0) {

861 
»®Sourû
=
NULL
;

864 
»®SourûLim™
=
NULL
;

865 
»®Flush
=
FALSE
;

866 
»®SourûIndex
=0;

873 
»®Sourû
=
pArgs
->
sourû
;

874 
»®SourûLim™
=
pArgs
->
sourûLim™
;

875 
»®Flush
=
pArgs
->
æush
;

876 
»®SourûIndex
=
sourûIndex
;

878 
	`u´v_memıy
(
»¶ay
, 
úv
->
´eFromU
, -úv->
´eFromUL’gth
*
U_SIZEOF_UCHAR
);

879 
pArgs
->
sourû
=
»¶ay
;

880 
pArgs
->
sourûLim™
=
»¶ay
-
úv
->
´eFromUL’gth
;

881 
pArgs
->
æush
=
FALSE
;

882 
sourûIndex
=-1;

884 
úv
->
´eFromUL’gth
=0;

900 if(
	`U_SUCCESS
(*
”r
)) {

902 
	`äomUnicode
(
pArgs
, 
”r
);

911 
cÚv”‹rSawEndOfIÅut
=

912 (
UBoŞ
)(
	`U_SUCCESS
(*
”r
) &&

913 
pArgs
->
æush
 &&…Args->
sourû
=õArgs->
sourûLim™
 &&

914 
úv
->
äomUCh¬32
==0);

917 
cÚv”‹rSawEndOfIÅut
=
FALSE
;

921 
ÿÎedC®lback
=
FALSE
;

924 
”rÜIÅutL’gth
=0;

936 if(
off£ts
!=
NULL
) {

937 
št32_t
 
Ëngth
=(št32_t)(
pArgs
->
rg‘
-
t
);

938 if(
Ëngth
>0) {

939 
	`_upd©eOff£ts
(
off£ts
, 
Ëngth
, 
sourûIndex
, 
”rÜIÅutL’gth
);

948 
pArgs
->
off£ts
=off£ts+=
Ëngth
;

951 if(
sourûIndex
>=0) {

952 
sourûIndex
+=(
št32_t
)(
pArgs
->
sourû
-
s
);

956 if(
úv
->
´eFromUL’gth
<0) {

961 if(
»®Sourû
==
NULL
) {

962 
»®Sourû
=
pArgs
->
sourû
;

963 
»®SourûLim™
=
pArgs
->
sourûLim™
;

964 
»®Flush
=
pArgs
->
æush
;

965 
»®SourûIndex
=
sourûIndex
;

967 
	`u´v_memıy
(
»¶ay
, 
úv
->
´eFromU
, -úv->
´eFromUL’gth
*
U_SIZEOF_UCHAR
);

968 
pArgs
->
sourû
=
»¶ay
;

969 
pArgs
->
sourûLim™
=
»¶ay
-
úv
->
´eFromUL’gth
;

970 
pArgs
->
æush
=
FALSE
;

971 if((
sourûIndex
+=
úv
->
´eFromUL’gth
)<0) {

972 
sourûIndex
=-1;

975 
úv
->
´eFromUL’gth
=0;

978 
	`U_ASSERT
(
»®Sourû
==
NULL
);

979 *
”r
=
U_INTERNAL_PROGRAM_ERROR
;

984 
s
=
pArgs
->
sourû
;

985 
t
=
pArgs
->
rg‘
;

987 if(
	`U_SUCCESS
(*
”r
)) {

988 if(
s
<
pArgs
->
sourûLim™
) {

994 } if(
»®Sourû
!=
NULL
) {

996 
pArgs
->
sourû
=
»®Sourû
;

997 
pArgs
->
sourûLim™
=
»®SourûLim™
;

998 
pArgs
->
æush
=
»®Flush
;

999 
sourûIndex
=
»®SourûIndex
;

1001 
»®Sourû
=
NULL
;

1003 } if(
pArgs
->
æush
 && 
úv
->
äomUCh¬32
!=0) {

1010 *
”r
=
U_TRUNCATED_CHAR_FOUND
;

1011 
ÿÎedC®lback
=
FALSE
;

1014 if(
pArgs
->
æush
) {

1022 if(!
cÚv”‹rSawEndOfIÅut
) {

1027 
	`_»£t
(
úv
, 
UCNV_RESET_FROM_UNICODE
, 
FALSE
);

1037 
UE¼ÜCode
 
e
;

1039 ifĞ
ÿÎedC®lback
 ||

1040 (
e
=*
”r
)==
U_BUFFER_OVERFLOW_ERROR
 ||

1041 (
e
!=
U_INVALID_CHAR_FOUND
 &&

1042 
e
!=
U_ILLEGAL_CHAR_FOUND
 &&

1043 
e
!=
U_TRUNCATED_CHAR_FOUND
)

1057 if(
»®Sourû
!=
NULL
) {

1058 
št32_t
 
Ëngth
;

1060 
	`U_ASSERT
(
úv
->
´eFromUL’gth
==0);

1062 
Ëngth
=(
št32_t
)(
pArgs
->
sourûLim™
-pArgs->
sourû
);

1063 if(
Ëngth
>0) {

1064 
	`u´v_memıy
(
úv
->
´eFromU
, 
pArgs
->
sourû
, 
Ëngth
*
U_SIZEOF_UCHAR
);

1065 
úv
->
´eFromUL’gth
=(
št8_t
)-
Ëngth
;

1068 
pArgs
->
sourû
=
»®Sourû
;

1069 
pArgs
->
sourûLim™
=
»®SourûLim™
;

1070 
pArgs
->
æush
=
»®Flush
;

1079 
UCh¬32
 
codePošt
;

1082 
codePošt
=
úv
->
äomUCh¬32
;

1083 
”rÜIÅutL’gth
=0;

1084 
	`U16_APPEND_UNSAFE
(
úv
->
šv®idUCh¬Bufãr
, 
”rÜIÅutL’gth
, 
codePošt
);

1085 
úv
->
šv®idUCh¬L’gth
=(
št8_t
)
”rÜIÅutL’gth
;

1088 
úv
->
äomUCh¬32
=0;

1091 
úv
->
	`äomUCh¬E¼ÜBehaviour
(úv->
äomUCÚ‹xt
, 
pArgs
,

1092 
úv
->
šv®idUCh¬Bufãr
, 
”rÜIÅutL’gth
, 
codePošt
,

1093 *
”r
==
U_INVALID_CHAR_FOUND
 ? 
UCNV_UNASSIGNED
 : 
UCNV_ILLEGAL
,

1094 
”r
);

1104 
ÿÎedC®lback
=
TRUE
;

1107 
	}
}

1114 
UBoŞ


1115 
	$uúv_ouutOv”æowFromUnicode
(
UCÚv”‹r
 *
úv
,

1116 **
rg‘
, cÚ¡ *
rg‘Lim™
,

1117 
št32_t
 **
pOff£ts
,

1118 
UE¼ÜCode
 *
”r
) {

1119 
št32_t
 *
off£ts
;

1120 *
ov”æow
, *
t
;

1121 
št32_t
 
i
, 
Ëngth
;

1123 
t
=*
rg‘
;

1124 if(
pOff£ts
!=
NULL
) {

1125 
off£ts
=*
pOff£ts
;

1127 
off£ts
=
NULL
;

1130 
ov”æow
=(*)
úv
->
ch¬E¼ÜBufãr
;

1131 
Ëngth
=
úv
->
ch¬E¼ÜBufãrL’gth
;

1132 
i
=0;

1133 
i
<
Ëngth
) {

1134 if(
t
==
rg‘Lim™
) {

1136 
št32_t
 
j
=0;

1139 
ov”æow
[
j
++]=ov”æow[
i
++];

1140 } 
i
<
Ëngth
);

1142 
úv
->
ch¬E¼ÜBufãrL’gth
=(
št8_t
)
j
;

1143 *
rg‘
=
t
;

1144 if(
off£ts
!=
NULL
) {

1145 *
pOff£ts
=
off£ts
;

1147 *
”r
=
U_BUFFER_OVERFLOW_ERROR
;

1148  
TRUE
;

1152 *
t
++=
ov”æow
[
i
++];

1153 if(
off£ts
!=
NULL
) {

1154 *
off£ts
++=-1;

1159 
úv
->
ch¬E¼ÜBufãrL’gth
=0;

1160 *
rg‘
=
t
;

1161 if(
off£ts
!=
NULL
) {

1162 *
pOff£ts
=
off£ts
;

1164  
FALSE
;

1165 
	}
}

1167 
U_CAPI
 
U_EXPORT2


1168 
	$uúv_äomUnicode
(
UCÚv”‹r
 *
úv
,

1169 **
rg‘
, cÚ¡ *
rg‘Lim™
,

1170 cÚ¡ 
UCh¬
 **
sourû
, cÚ¡ UCh¬ *
sourûLim™
,

1171 
št32_t
 *
off£ts
,

1172 
UBoŞ
 
æush
,

1173 
UE¼ÜCode
 *
”r
) {

1174 
UCÚv”‹rFromUnicodeArgs
 
¬gs
;

1175 cÚ¡ 
UCh¬
 *
s
;

1176 *
t
;

1179 if(
”r
==
NULL
 || 
	`U_FAILURE
(*err)) {

1183 if(
úv
==
NULL
 || 
rg‘
==NULL || 
sourû
==NULL) {

1184 *
”r
=
U_ILLEGAL_ARGUMENT_ERROR
;

1188 
s
=*
sourû
;

1189 
t
=*
rg‘
;

1191 ià((cÚ¡ *)
	`U_MAX_PTR
(
sourûLim™
) == (const *)sourceLimit) {

1197 
sourûLim™
 = (cÚ¡ 
UCh¬
 *)(((const *)sourceLimit) - 1);

1219 ià(
sourûLim™
<
s
 || 
rg‘Lim™
<
t
 ||

1220 ((
size_t
)(
sourûLim™
-
s
)>(size_t)0x3fffffff && sourceLimit>s) ||

1221 ((
size_t
)(
rg‘Lim™
-
t
)>(size_t)0x7fffffff &&argetLimit>t) ||

1222 (((cÚ¡ *)
sourûLim™
-(cÚ¡ *)
s
) & 1) != 0)

1224 *
”r
=
U_ILLEGAL_ARGUMENT_ERROR
;

1229 ifĞ
úv
->
ch¬E¼ÜBufãrL’gth
>0 &&

1230 
	`uúv_ouutOv”æowFromUnicode
(
úv
, 
rg‘
, 
rg‘Lim™
, &
off£ts
, 
”r
)

1237 if(!
æush
 && 
s
==
sourûLim™
 && 
úv
->
´eFromUL’gth
>=0) {

1251 
¬gs
.
cÚv”‹r
=
úv
;

1252 
¬gs
.
æush
=flush;

1253 
¬gs
.
off£ts
=offsets;

1254 
¬gs
.
sourû
=
s
;

1255 
¬gs
.
sourûLim™
=sourceLimit;

1256 
¬gs
.
rg‘
=*target;

1257 
¬gs
.
rg‘Lim™
=targetLimit;

1258 
¬gs
.
size
=(args);

1260 
	`_äomUnicodeW™hC®lback
(&
¬gs
, 
”r
);

1262 *
sourû
=
¬gs
.source;

1263 *
rg‘
=
¬gs
.target;

1264 
	}
}

1269 
	$_toUnicodeW™hC®lback
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
, 
UE¼ÜCode
 *
”r
) {

1270 
UCÚv”‹rToUnicode
 
toUnicode
;

1271 
UCÚv”‹r
 *
úv
;

1272 cÚ¡ *
s
;

1273 
UCh¬
 *
t
;

1274 
št32_t
 *
off£ts
;

1275 
št32_t
 
sourûIndex
;

1276 
št32_t
 
”rÜIÅutL’gth
;

1277 
UBoŞ
 
cÚv”‹rSawEndOfIÅut
, 
ÿÎedC®lback
;

1280 
»¶ay
[
UCNV_EXT_MAX_BYTES
];

1281 cÚ¡ *
»®Sourû
, *
»®SourûLim™
;

1282 
št32_t
 
»®SourûIndex
;

1283 
UBoŞ
 
»®Flush
;

1285 
úv
=
pArgs
->
cÚv”‹r
;

1286 
s
=
pArgs
->
sourû
;

1287 
t
=
pArgs
->
rg‘
;

1288 
off£ts
=
pArgs
->offsets;

1291 
sourûIndex
=0;

1292 if(
off£ts
==
NULL
) {

1293 
toUnicode
=
úv
->
sh¬edD©a
->
im¶
->toUnicode;

1295 
toUnicode
=
úv
->
sh¬edD©a
->
im¶
->
toUnicodeW™hOff£ts
;

1296 if(
toUnicode
==
NULL
) {

1298 
toUnicode
=
úv
->
sh¬edD©a
->
im¶
->toUnicode;

1300 
sourûIndex
=-1;

1304 if(
úv
->
´eToUL’gth
>=0) {

1306 
»®Sourû
=
NULL
;

1309 
»®SourûLim™
=
NULL
;

1310 
»®Flush
=
FALSE
;

1311 
»®SourûIndex
=0;

1318 
»®Sourû
=
pArgs
->
sourû
;

1319 
»®SourûLim™
=
pArgs
->
sourûLim™
;

1320 
»®Flush
=
pArgs
->
æush
;

1321 
»®SourûIndex
=
sourûIndex
;

1323 
	`u´v_memıy
(
»¶ay
, 
úv
->
´eToU
, -úv->
´eToUL’gth
);

1324 
pArgs
->
sourû
=
»¶ay
;

1325 
pArgs
->
sourûLim™
=
»¶ay
-
úv
->
´eToUL’gth
;

1326 
pArgs
->
æush
=
FALSE
;

1327 
sourûIndex
=-1;

1329 
úv
->
´eToUL’gth
=0;

1345 if(
	`U_SUCCESS
(*
”r
)) {

1347 
	`toUnicode
(
pArgs
, 
”r
);

1356 
cÚv”‹rSawEndOfIÅut
=

1357 (
UBoŞ
)(
	`U_SUCCESS
(*
”r
) &&

1358 
pArgs
->
æush
 &&…Args->
sourû
=õArgs->
sourûLim™
 &&

1359 
úv
->
toUL’gth
==0);

1362 
cÚv”‹rSawEndOfIÅut
=
FALSE
;

1366 
ÿÎedC®lback
=
FALSE
;

1369 
”rÜIÅutL’gth
=0;

1381 if(
off£ts
!=
NULL
) {

1382 
št32_t
 
Ëngth
=(št32_t)(
pArgs
->
rg‘
-
t
);

1383 if(
Ëngth
>0) {

1384 
	`_upd©eOff£ts
(
off£ts
, 
Ëngth
, 
sourûIndex
, 
”rÜIÅutL’gth
);

1393 
pArgs
->
off£ts
=off£ts+=
Ëngth
;

1396 if(
sourûIndex
>=0) {

1397 
sourûIndex
+=(
št32_t
)(
pArgs
->
sourû
-
s
);

1401 if(
úv
->
´eToUL’gth
<0) {

1406 if(
»®Sourû
==
NULL
) {

1407 
»®Sourû
=
pArgs
->
sourû
;

1408 
»®SourûLim™
=
pArgs
->
sourûLim™
;

1409 
»®Flush
=
pArgs
->
æush
;

1410 
»®SourûIndex
=
sourûIndex
;

1412 
	`u´v_memıy
(
»¶ay
, 
úv
->
´eToU
, -úv->
´eToUL’gth
);

1413 
pArgs
->
sourû
=
»¶ay
;

1414 
pArgs
->
sourûLim™
=
»¶ay
-
úv
->
´eToUL’gth
;

1415 
pArgs
->
æush
=
FALSE
;

1416 if((
sourûIndex
+=
úv
->
´eToUL’gth
)<0) {

1417 
sourûIndex
=-1;

1420 
úv
->
´eToUL’gth
=0;

1423 
	`U_ASSERT
(
»®Sourû
==
NULL
);

1424 *
”r
=
U_INTERNAL_PROGRAM_ERROR
;

1429 
s
=
pArgs
->
sourû
;

1430 
t
=
pArgs
->
rg‘
;

1432 if(
	`U_SUCCESS
(*
”r
)) {

1433 if(
s
<
pArgs
->
sourûLim™
) {

1439 } if(
»®Sourû
!=
NULL
) {

1441 
pArgs
->
sourû
=
»®Sourû
;

1442 
pArgs
->
sourûLim™
=
»®SourûLim™
;

1443 
pArgs
->
æush
=
»®Flush
;

1444 
sourûIndex
=
»®SourûIndex
;

1446 
»®Sourû
=
NULL
;

1448 } if(
pArgs
->
æush
 && 
úv
->
toUL’gth
>0) {

1455 *
”r
=
U_TRUNCATED_CHAR_FOUND
;

1456 
ÿÎedC®lback
=
FALSE
;

1459 if(
pArgs
->
æush
) {

1467 if(!
cÚv”‹rSawEndOfIÅut
) {

1472 
	`_»£t
(
úv
, 
UCNV_RESET_TO_UNICODE
, 
FALSE
);

1482 
UE¼ÜCode
 
e
;

1484 ifĞ
ÿÎedC®lback
 ||

1485 (
e
=*
”r
)==
U_BUFFER_OVERFLOW_ERROR
 ||

1486 (
e
!=
U_INVALID_CHAR_FOUND
 &&

1487 
e
!=
U_ILLEGAL_CHAR_FOUND
 &&

1488 
e
!=
U_TRUNCATED_CHAR_FOUND
 &&

1489 
e
!=
U_ILLEGAL_ESCAPE_SEQUENCE
 &&

1490 
e
!=
U_UNSUPPORTED_ESCAPE_SEQUENCE
)

1504 if(
»®Sourû
!=
NULL
) {

1505 
št32_t
 
Ëngth
;

1507 
	`U_ASSERT
(
úv
->
´eToUL’gth
==0);

1509 
Ëngth
=(
št32_t
)(
pArgs
->
sourûLim™
-pArgs->
sourû
);

1510 if(
Ëngth
>0) {

1511 
	`u´v_memıy
(
úv
->
´eToU
, 
pArgs
->
sourû
, 
Ëngth
);

1512 
úv
->
´eToUL’gth
=(
št8_t
)-
Ëngth
;

1515 
pArgs
->
sourû
=
»®Sourû
;

1516 
pArgs
->
sourûLim™
=
»®SourûLim™
;

1517 
pArgs
->
æush
=
»®Flush
;

1525 
”rÜIÅutL’gth
=
úv
->
šv®idCh¬L’gth
=úv->
toUL’gth
;

1526 if(
”rÜIÅutL’gth
>0) {

1527 
	`u´v_memıy
(
úv
->
šv®idCh¬Bufãr
, cnv->
toUBy‹s
, 
”rÜIÅutL’gth
);

1531 
úv
->
toUL’gth
=0;

1534 if(
úv
->
toUC®lbackR—sÚ
==
UCNV_ILLEGAL
 && *
”r
==
U_INVALID_CHAR_FOUND
) {

1535 
úv
->
toUC®lbackR—sÚ
 = 
UCNV_UNASSIGNED
;

1537 
úv
->
	`äomCh¬E¼ÜBehaviour
(úv->
toUCÚ‹xt
, 
pArgs
,

1538 
úv
->
šv®idCh¬Bufãr
, 
”rÜIÅutL’gth
,

1539 
úv
->
toUC®lbackR—sÚ
,

1540 
”r
);

1541 
úv
->
toUC®lbackR—sÚ
 = 
UCNV_ILLEGAL
;

1550 
ÿÎedC®lback
=
TRUE
;

1553 
	}
}

1560 
UBoŞ


1561 
	$uúv_ouutOv”æowToUnicode
(
UCÚv”‹r
 *
úv
,

1562 
UCh¬
 **
rg‘
, cÚ¡ UCh¬ *
rg‘Lim™
,

1563 
št32_t
 **
pOff£ts
,

1564 
UE¼ÜCode
 *
”r
) {

1565 
št32_t
 *
off£ts
;

1566 
UCh¬
 *
ov”æow
, *
t
;

1567 
št32_t
 
i
, 
Ëngth
;

1569 
t
=*
rg‘
;

1570 if(
pOff£ts
!=
NULL
) {

1571 
off£ts
=*
pOff£ts
;

1573 
off£ts
=
NULL
;

1576 
ov”æow
=
úv
->
UCh¬E¼ÜBufãr
;

1577 
Ëngth
=
úv
->
UCh¬E¼ÜBufãrL’gth
;

1578 
i
=0;

1579 
i
<
Ëngth
) {

1580 if(
t
==
rg‘Lim™
) {

1582 
št32_t
 
j
=0;

1585 
ov”æow
[
j
++]=ov”æow[
i
++];

1586 } 
i
<
Ëngth
);

1588 
úv
->
UCh¬E¼ÜBufãrL’gth
=(
št8_t
)
j
;

1589 *
rg‘
=
t
;

1590 if(
off£ts
!=
NULL
) {

1591 *
pOff£ts
=
off£ts
;

1593 *
”r
=
U_BUFFER_OVERFLOW_ERROR
;

1594  
TRUE
;

1598 *
t
++=
ov”æow
[
i
++];

1599 if(
off£ts
!=
NULL
) {

1600 *
off£ts
++=-1;

1605 
úv
->
UCh¬E¼ÜBufãrL’gth
=0;

1606 *
rg‘
=
t
;

1607 if(
off£ts
!=
NULL
) {

1608 *
pOff£ts
=
off£ts
;

1610  
FALSE
;

1611 
	}
}

1613 
U_CAPI
 
U_EXPORT2


1614 
	$uúv_toUnicode
(
UCÚv”‹r
 *
úv
,

1615 
UCh¬
 **
rg‘
, cÚ¡ UCh¬ *
rg‘Lim™
,

1616 cÚ¡ **
sourû
, cÚ¡ *
sourûLim™
,

1617 
št32_t
 *
off£ts
,

1618 
UBoŞ
 
æush
,

1619 
UE¼ÜCode
 *
”r
) {

1620 
UCÚv”‹rToUnicodeArgs
 
¬gs
;

1621 cÚ¡ *
s
;

1622 
UCh¬
 *
t
;

1625 if(
”r
==
NULL
 || 
	`U_FAILURE
(*err)) {

1629 if(
úv
==
NULL
 || 
rg‘
==NULL || 
sourû
==NULL) {

1630 *
”r
=
U_ILLEGAL_ARGUMENT_ERROR
;

1634 
s
=*
sourû
;

1635 
t
=*
rg‘
;

1637 ià((cÚ¡ *)
	`U_MAX_PTR
(
rg‘Lim™
) == (const *)targetLimit) {

1643 
rg‘Lim™
 = (cÚ¡ 
UCh¬
 *)(((const *)targetLimit) - 1);

1665 ià(
sourûLim™
<
s
 || 
rg‘Lim™
<
t
 ||

1666 ((
size_t
)(
sourûLim™
-
s
)>(size_t)0x7fffffff && sourceLimit>s) ||

1667 ((
size_t
)(
rg‘Lim™
-
t
)>(size_t)0x3fffffff &&argetLimit>t) ||

1668 (((cÚ¡ *)
rg‘Lim™
-(cÚ¡ *)
t
) & 1) != 0

1670 *
”r
=
U_ILLEGAL_ARGUMENT_ERROR
;

1675 ifĞ
úv
->
UCh¬E¼ÜBufãrL’gth
>0 &&

1676 
	`uúv_ouutOv”æowToUnicode
(
úv
, 
rg‘
, 
rg‘Lim™
, &
off£ts
, 
”r
)

1683 if(!
æush
 && 
s
==
sourûLim™
 && 
úv
->
´eToUL’gth
>=0) {

1697 
¬gs
.
cÚv”‹r
=
úv
;

1698 
¬gs
.
æush
=flush;

1699 
¬gs
.
off£ts
=offsets;

1700 
¬gs
.
sourû
=
s
;

1701 
¬gs
.
sourûLim™
=sourceLimit;

1702 
¬gs
.
rg‘
=*target;

1703 
¬gs
.
rg‘Lim™
=targetLimit;

1704 
¬gs
.
size
=(args);

1706 
	`_toUnicodeW™hC®lback
(&
¬gs
, 
”r
);

1708 *
sourû
=
¬gs
.source;

1709 *
rg‘
=
¬gs
.target;

1710 
	}
}

1714 
U_CAPI
 
št32_t
 
U_EXPORT2


1715 
	$uúv_äomUCh¬s
(
UCÚv”‹r
 *
úv
,

1716 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1717 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

1718 
UE¼ÜCode
 *
pE¼ÜCode
) {

1719 cÚ¡ 
UCh¬
 *
¤cLim™
;

1720 *
Üigš®De¡
, *
de¡Lim™
;

1721 
št32_t
 
de¡L’gth
;

1724 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1728 ifĞ
úv
==
NULL
 ||

1729 
de¡C­ac™y
<0 || (de¡C­ac™y>0 && 
de¡
==
NULL
) ||

1730 
¤cL’gth
<-1 || (¤cL’gth!=0 && 
¤c
==
NULL
)

1732 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1737 
	`uúv_»£tFromUnicode
(
úv
);

1738 
Üigš®De¡
=
de¡
;

1739 if(
¤cL’gth
==-1) {

1740 
¤cL’gth
=
	`u_¡¾’
(
¤c
);

1742 if(
¤cL’gth
>0) {

1743 
¤cLim™
=
¤c
+
¤cL’gth
;

1744 
de¡Lim™
=
de¡
+
de¡C­ac™y
;

1747 if(
de¡Lim™
<
de¡
 || (de¡Lim™==
NULL
 && dest!=NULL)) {

1748 
de¡Lim™
=(*)
	`U_MAX_PTR
(
de¡
);

1752 
	`uúv_äomUnicode
(
úv
, &
de¡
, 
de¡Lim™
, &
¤c
, 
¤cLim™
, 0, 
TRUE
, 
pE¼ÜCode
);

1753 
de¡L’gth
=(
št32_t
)(
de¡
-
Üigš®De¡
);

1756 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

1757 
bufãr
[1024];

1759 
de¡Lim™
=
bufãr
+(buffer);

1761 
de¡
=
bufãr
;

1762 *
pE¼ÜCode
=
U_ZERO_ERROR
;

1763 
	`uúv_äomUnicode
(
úv
, &
de¡
, 
de¡Lim™
, &
¤c
, 
¤cLim™
, 0, 
TRUE
, 
pE¼ÜCode
);

1764 
de¡L’gth
+=(
št32_t
)(
de¡
-
bufãr
);

1765 } *
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
);

1768 
de¡L’gth
=0;

1771  
	`u_‹rmš©eCh¬s
(
Üigš®De¡
, 
de¡C­ac™y
, 
de¡L’gth
, 
pE¼ÜCode
);

1772 
	}
}

1774 
U_CAPI
 
št32_t
 
U_EXPORT2


1775 
	$uúv_toUCh¬s
(
UCÚv”‹r
 *
úv
,

1776 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1777 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

1778 
UE¼ÜCode
 *
pE¼ÜCode
) {

1779 cÚ¡ *
¤cLim™
;

1780 
UCh¬
 *
Üigš®De¡
, *
de¡Lim™
;

1781 
št32_t
 
de¡L’gth
;

1784 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1788 ifĞ
úv
==
NULL
 ||

1789 
de¡C­ac™y
<0 || (de¡C­ac™y>0 && 
de¡
==
NULL
) ||

1790 
¤cL’gth
<-1 || (¤cL’gth!=0 && 
¤c
==
NULL
))

1792 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1797 
	`uúv_»£tToUnicode
(
úv
);

1798 
Üigš®De¡
=
de¡
;

1799 if(
¤cL’gth
==-1) {

1800 
¤cL’gth
=(
št32_t
)
	`u´v_¡¾’
(
¤c
);

1802 if(
¤cL’gth
>0) {

1803 
¤cLim™
=
¤c
+
¤cL’gth
;

1804 
de¡Lim™
=
de¡
+
de¡C­ac™y
;

1807 if(
de¡Lim™
<
de¡
 || (de¡Lim™==
NULL
 && dest!=NULL)) {

1808 
de¡Lim™
=(
UCh¬
 *)
	`U_MAX_PTR
(
de¡
);

1812 
	`uúv_toUnicode
(
úv
, &
de¡
, 
de¡Lim™
, &
¤c
, 
¤cLim™
, 0, 
TRUE
, 
pE¼ÜCode
);

1813 
de¡L’gth
=(
št32_t
)(
de¡
-
Üigš®De¡
);

1816 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
)

1818 
UCh¬
 
bufãr
[1024];

1820 
de¡Lim™
=
bufãr
+(bufãr)/
U_SIZEOF_UCHAR
;

1822 
de¡
=
bufãr
;

1823 *
pE¼ÜCode
=
U_ZERO_ERROR
;

1824 
	`uúv_toUnicode
(
úv
, &
de¡
, 
de¡Lim™
, &
¤c
, 
¤cLim™
, 0, 
TRUE
, 
pE¼ÜCode
);

1825 
de¡L’gth
+=(
št32_t
)(
de¡
-
bufãr
);

1827 *
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
);

1830 
de¡L’gth
=0;

1833  
	`u_‹rmš©eUCh¬s
(
Üigš®De¡
, 
de¡C­ac™y
, 
de¡L’gth
, 
pE¼ÜCode
);

1834 
	}
}

1838 
U_CAPI
 
UCh¬32
 
U_EXPORT2


1839 
	$uúv_g‘NextUCh¬
(
UCÚv”‹r
 *
úv
,

1840 cÚ¡ **
sourû
, cÚ¡ *
sourûLim™
,

1841 
UE¼ÜCode
 *
”r
) {

1842 
UCÚv”‹rToUnicodeArgs
 
¬gs
;

1843 
UCh¬
 
bufãr
[
U16_MAX_LENGTH
];

1844 cÚ¡ *
s
;

1845 
UCh¬32
 
c
;

1846 
št32_t
 
i
, 
Ëngth
;

1849 if(
”r
==
NULL
 || 
	`U_FAILURE
(*err)) {

1853 if(
úv
==
NULL
 || 
sourû
==NULL) {

1854 *
”r
=
U_ILLEGAL_ARGUMENT_ERROR
;

1858 
s
=*
sourû
;

1859 if(
sourûLim™
<
s
) {

1860 *
”r
=
U_ILLEGAL_ARGUMENT_ERROR
;

1876 if(((
size_t
)(
sourûLim™
-
s
)>(size_t)0x7fffffff && sourceLimit>s)) {

1877 *
”r
=
U_ILLEGAL_ARGUMENT_ERROR
;

1881 
c
=
U_SENTINEL
;

1884 if(
úv
->
UCh¬E¼ÜBufãrL’gth
>0) {

1885 
UCh¬
 *
ov”æow
;

1887 
ov”æow
=
úv
->
UCh¬E¼ÜBufãr
;

1888 
i
=0;

1889 
Ëngth
=
úv
->
UCh¬E¼ÜBufãrL’gth
;

1890 
	`U16_NEXT
(
ov”æow
, 
i
, 
Ëngth
, 
c
);

1893 if((
úv
->
UCh¬E¼ÜBufãrL’gth
=(
št8_t
)(
Ëngth
-
i
))>0) {

1894 
	`u´v_memmove
(
úv
->
UCh¬E¼ÜBufãr
, cnv->UCh¬E¼ÜBufãr+
i
,

1895 
úv
->
UCh¬E¼ÜBufãrL’gth
*
U_SIZEOF_UCHAR
);

1898 if(!
	`U16_IS_LEAD
(
c
è|| 
i
<
Ëngth
) {

1899  
c
;

1916 
¬gs
.
cÚv”‹r
=
úv
;

1917 
¬gs
.
æush
=
TRUE
;

1918 
¬gs
.
off£ts
=
NULL
;

1919 
¬gs
.
sourû
=
s
;

1920 
¬gs
.
sourûLim™
=sourceLimit;

1921 
¬gs
.
rg‘
=
bufãr
;

1922 
¬gs
.
rg‘Lim™
=
bufãr
+1;

1923 
¬gs
.
size
=(args);

1925 if(
c
<0) {

1934 if(
úv
->
toUL’gth
==0 && cnv->
sh¬edD©a
->
im¶
->
g‘NextUCh¬
!=
NULL
) {

1935 
c
=
úv
->
sh¬edD©a
->
im¶
->
	`g‘NextUCh¬
(&
¬gs
, 
”r
);

1936 *
sourû
=
s
=
¬gs
.source;

1937 if(*
”r
==
U_INDEX_OUTOFBOUNDS_ERROR
) {

1939 
	`_»£t
(
úv
, 
UCNV_RESET_TO_UNICODE
, 
FALSE
);

1941 } if(
	`U_SUCCESS
(*
”r
è&& 
c
>=0) {

1942  
c
;

1952 
	`_toUnicodeW™hC®lback
(&
¬gs
, 
”r
);

1954 if(*
”r
==
U_BUFFER_OVERFLOW_ERROR
) {

1955 *
”r
=
U_ZERO_ERROR
;

1958 
i
=0;

1959 
Ëngth
=(
št32_t
)(
¬gs
.
rg‘
-
bufãr
);

1962 
bufãr
[0]=(
UCh¬
)
c
;

1963 
¬gs
.
rg‘
=
bufãr
+1;

1964 
i
=0;

1965 
Ëngth
=1;

1970 if(
	`U_FAILURE
(*
”r
)) {

1971 
c
=0xffff;

1972 } if(
Ëngth
==0) {

1974 *
”r
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1976 
c
=0xffff;

1978 
c
=
bufãr
[0];

1979 
i
=1;

1980 if(!
	`U16_IS_LEAD
(
c
)) {

1984 
UCh¬
 
c2
;

1986 if(
úv
->
UCh¬E¼ÜBufãrL’gth
>0) {

1988 if(
	`U16_IS_TRAIL
(
c2
=
úv
->
UCh¬E¼ÜBufãr
[0])) {

1990 
c
=
	`U16_GET_SUPPLEMENTARY
(c, 
c2
);

1993 if((--
úv
->
UCh¬E¼ÜBufãrL’gth
)>0) {

1994 
	`u´v_memmove
(
úv
->
UCh¬E¼ÜBufãr
, cnv->UCharErrorBuffer+1,

1995 
úv
->
UCh¬E¼ÜBufãrL’gth
*
U_SIZEOF_UCHAR
);

2000 } if(
¬gs
.
sourû
<
sourûLim™
) {

2002 
¬gs
.
rg‘Lim™
=
bufãr
+2;

2003 
	`_toUnicodeW™hC®lback
(&
¬gs
, 
”r
);

2004 if(*
”r
==
U_BUFFER_OVERFLOW_ERROR
) {

2005 *
”r
=
U_ZERO_ERROR
;

2008 
Ëngth
=(
št32_t
)(
¬gs
.
rg‘
-
bufãr
);

2009 if(
	`U_SUCCESS
(*
”r
è&& 
Ëngth
==2 && 
	`U16_IS_TRAIL
(
c2
=
bufãr
[1])) {

2011 
c
=
	`U16_GET_SUPPLEMENTARY
(c, 
c2
);

2012 
i
=2;

2022 if(
i
<
Ëngth
) {

2024 
št32_t
 
d–
=
Ëngth
-
i
;

2025 if((
Ëngth
=
úv
->
UCh¬E¼ÜBufãrL’gth
)>0) {

2026 
	`u´v_memmove
(
úv
->
UCh¬E¼ÜBufãr
+
d–
, cnv->UCharErrorBuffer,

2027 
Ëngth
*
U_SIZEOF_UCHAR
);

2029 
úv
->
UCh¬E¼ÜBufãrL’gth
=(
št8_t
)(
Ëngth
+
d–
);

2031 
úv
->
UCh¬E¼ÜBufãr
[0]=
bufãr
[
i
++];

2032 if(
d–
>1) {

2033 
úv
->
UCh¬E¼ÜBufãr
[1]=
bufãr
[
i
];

2037 *
sourû
=
¬gs
.source;

2038  
c
;

2039 
	}
}

2043 
U_CAPI
 
U_EXPORT2


2044 
	$uúv_cÚv”tEx
(
UCÚv”‹r
 *
rg‘Cnv
, UCÚv”‹¸*
sourûCnv
,

2045 **
rg‘
, cÚ¡ *
rg‘Lim™
,

2046 cÚ¡ **
sourû
, cÚ¡ *
sourûLim™
,

2047 
UCh¬
 *
pivÙS¹
, UCh¬ **
pivÙSourû
,

2048 
UCh¬
 **
pivÙT¬g‘
, cÚ¡ UCh¬ *
pivÙLim™
,

2049 
UBoŞ
 
»£t
, UBoŞ 
æush
,

2050 
UE¼ÜCode
 *
pE¼ÜCode
) {

2051 
UCh¬
 
pivÙBufãr
[
CHUNK_SIZE
];

2052 cÚ¡ 
UCh¬
 *
myPivÙSourû
;

2053 
UCh¬
 *
myPivÙT¬g‘
;

2054 cÚ¡ *
s
;

2055 *
t
;

2057 
UCÚv”‹rToUnicodeArgs
 
toUArgs
;

2058 
UCÚv”‹rFromUnicodeArgs
 
äomUArgs
;

2059 
UCÚv”‹rCÚv”t
 
cÚv”t
;

2062 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

2066 ifĞ
rg‘Cnv
==
NULL
 || 
sourûCnv
==NULL ||

2067 
sourû
==
NULL
 || *source==NULL ||

2068 
rg‘
==
NULL
 || *rg‘==NULL || 
rg‘Lim™
==NULL

2070 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

2074 
s
=*
sourû
;

2075 
t
=*
rg‘
;

2076 if((
sourûLim™
!=
NULL
 && sourûLim™<
s
è|| 
rg‘Lim™
<
t
) {

2077 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

2086 (
sourûLim™
!=
NULL
 && ((
size_t
)(sourûLim™-
s
)>(size_t)0x7fffffff && sourceLimit>s)) ||

2087 ((
size_t
)(
rg‘Lim™
-
t
)>(size_t)0x7fffffff &&argetLimit>t)

2089 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

2093 if(
pivÙS¹
==
NULL
) {

2094 if(!
æush
) {

2096 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

2101 
myPivÙSourû
=
myPivÙT¬g‘
=
pivÙS¹
=
pivÙBufãr
;

2102 
pivÙSourû
=(
UCh¬
 **)&
myPivÙSourû
;

2103 
pivÙT¬g‘
=&
myPivÙT¬g‘
;

2104 
pivÙLim™
=
pivÙBufãr
+
CHUNK_SIZE
;

2105 } ifĞ
pivÙS¹
>=
pivÙLim™
 ||

2106 
pivÙSourû
==
NULL
 || *pivotSource==NULL ||

2107 
pivÙT¬g‘
==
NULL
 || *pivotTarget==NULL ||

2108 
pivÙLim™
==
NULL


2110 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

2114 if(
sourûLim™
==
NULL
) {

2116 
sourûLim™
=
	`u´v_¡rchr
(*
sourû
, 0);

2119 if(
»£t
) {

2120 
	`uúv_»£tToUnicode
(
sourûCnv
);

2121 
	`uúv_»£tFromUnicode
(
rg‘Cnv
);

2122 *
pivÙSourû
=*
pivÙT¬g‘
=
pivÙS¹
;

2123 } if(
rg‘Cnv
->
ch¬E¼ÜBufãrL’gth
>0) {

2125 if(
	`uúv_ouutOv”æowFromUnicode
(
rg‘Cnv
, 
rg‘
, 
rg‘Lim™
, 
NULL
, 
pE¼ÜCode
)) {

2131 ifĞ!
æush
 &&

2132 
rg‘Cnv
->
´eFromUL’gth
>=0 && *
pivÙSourû
==*
pivÙT¬g‘
 &&

2133 
sourûCnv
->
UCh¬E¼ÜBufãrL’gth
==0 && sourûCnv->
´eToUL’gth
>=0 && 
s
==
sourûLim™


2141 ifĞ
sourûCnv
->
sh¬edD©a
->
¡©icD©a
->
cÚv”siÚTy³
==
UCNV_UTF8
 &&

2142 
rg‘Cnv
->
sh¬edD©a
->
im¶
->
äomUTF8
!=
NULL


2144 
cÚv”t
=
rg‘Cnv
->
sh¬edD©a
->
im¶
->
äomUTF8
;

2145 } ifĞ
rg‘Cnv
->
sh¬edD©a
->
¡©icD©a
->
cÚv”siÚTy³
==
UCNV_UTF8
 &&

2146 
sourûCnv
->
sh¬edD©a
->
im¶
->
toUTF8
!=
NULL


2148 
cÚv”t
=
sourûCnv
->
sh¬edD©a
->
im¶
->
toUTF8
;

2150 
cÚv”t
=
NULL
;

2172 if(
cÚv”t
!=
NULL
 && (
pivÙLim™
-
pivÙS¹
)>32) {

2173 
pivÙLim™
=
pivÙS¹
+32;

2177 
äomUArgs
.
cÚv”‹r
=
rg‘Cnv
;

2178 
äomUArgs
.
æush
=
FALSE
;

2179 
äomUArgs
.
off£ts
=
NULL
;

2180 
äomUArgs
.
rg‘
=*target;

2181 
äomUArgs
.
rg‘Lim™
=targetLimit;

2182 
äomUArgs
.
size
=(fromUArgs);

2184 
toUArgs
.
cÚv”‹r
=
sourûCnv
;

2185 
toUArgs
.
æush
=flush;

2186 
toUArgs
.
off£ts
=
NULL
;

2187 
toUArgs
.
sourû
=
s
;

2188 
toUArgs
.
sourûLim™
=sourceLimit;

2189 
toUArgs
.
rg‘Lim™
=
pivÙLim™
;

2190 
toUArgs
.
size
=(toUArgs);

2199 
s
=
t
=
NULL
;

2221 ifĞ*
pivÙSourû
<*
pivÙT¬g‘
 ||

2222 
	`U_FAILURE
(*
pE¼ÜCode
) ||

2223 
rg‘Cnv
->
´eFromUL’gth
<0 ||

2224 
äomUArgs
.
æush


2226 
äomUArgs
.
sourû
=*
pivÙSourû
;

2227 
äomUArgs
.
sourûLim™
=*
pivÙT¬g‘
;

2228 
	`_äomUnicodeW™hC®lback
(&
äomUArgs
, 
pE¼ÜCode
);

2229 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2231 *
pivÙSourû
=(
UCh¬
 *)
äomUArgs
.
sourû
;

2242 *
pivÙSourû
=*
pivÙT¬g‘
=
pivÙS¹
;

2251 if(
sourûCnv
->
UCh¬E¼ÜBufãrL’gth
>0) {

2252 if(
	`uúv_ouutOv”æowToUnicode
(
sourûCnv
, 
pivÙT¬g‘
, 
pivÙLim™
, 
NULL
, 
pE¼ÜCode
)) {

2254 *
pE¼ÜCode
=
U_ZERO_ERROR
;

2266 ifĞ
toUArgs
.
sourû
==
sourûLim™
 &&

2267 
sourûCnv
->
´eToUL’gth
>=0 && sourûCnv->
toUL’gth
==0 &&

2268 (!
æush
 || 
äomUArgs
.flush)

2279 if(
cÚv”t
!=
NULL
 && 
rg‘Cnv
->
´eFromUFœ¡CP
<0 && 
sourûCnv
->
´eToUL’gth
==0) {

2280 if(*
pE¼ÜCode
==
U_USING_DEFAULT_WARNING
) {

2282 *
pE¼ÜCode
=
U_ZERO_ERROR
;

2284 
	`cÚv”t
(&
äomUArgs
, &
toUArgs
, 
pE¼ÜCode
);

2285 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

2287 } if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2288 if(
sourûCnv
->
toUL’gth
>0) {

2303 *
pivÙSourû
=*
pivÙT¬g‘
=
pivÙS¹
+1;

2310 } if(*
pE¼ÜCode
==
U_USING_DEFAULT_WARNING
) {

2315 *
pE¼ÜCode
=
U_ZERO_ERROR
;

2321 } if(
æush
 && 
sourûCnv
->
toUL’gth
>0) {

2328 *
pE¼ÜCode
=
U_TRUNCATED_CHAR_FOUND
;

2331 if(
æush
) {

2333 
	`_»£t
(
sourûCnv
, 
UCNV_RESET_TO_UNICODE
, 
FALSE
);

2334 
	`_»£t
(
rg‘Cnv
, 
UCNV_RESET_FROM_UNICODE
, 
FALSE
);

2351 
toUArgs
.
rg‘
=
pivÙS¹
;

2353 
	`_toUnicodeW™hC®lback
(&
toUArgs
, 
pE¼ÜCode
);

2354 *
pivÙT¬g‘
=
toUArgs
.
rg‘
;

2355 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

2357 *
pE¼ÜCode
=
U_ZERO_ERROR
;

2358 } if(
	`U_FAILURE
(*
pE¼ÜCode
è|| (!
æush
 && *
pivÙT¬g‘
==
pivÙS¹
)) {

2370 ifĞ
æush
 && 
toUArgs
.
sourû
==
sourûLim™
 &&

2371 
sourûCnv
->
´eToUL’gth
>=0 &&

2372 
sourûCnv
->
UCh¬E¼ÜBufãrL’gth
==0

2374 
äomUArgs
.
æush
=
TRUE
;

2385 *
sourû
=
toUArgs
.source;

2386 *
rg‘
=
äomUArgs
.target;

2389 if(
æush
 && 
	`U_SUCCESS
(*
pE¼ÜCode
)) {

2390 if(*
rg‘
!=
rg‘Lim™
) {

2391 **
rg‘
=0;

2392 if(*
pE¼ÜCode
==
U_STRING_NOT_TERMINATED_WARNING
) {

2393 *
pE¼ÜCode
=
U_ZERO_ERROR
;

2396 *
pE¼ÜCode
=
U_STRING_NOT_TERMINATED_WARNING
;

2399 
	}
}

2402 
št32_t


2403 
	$uúv_š‹º®CÚv”t
(
UCÚv”‹r
 *
outCÚv”‹r
, UCÚv”‹¸*
šCÚv”‹r
,

2404 *
rg‘
, 
št32_t
 
rg‘C­ac™y
,

2405 cÚ¡ *
sourû
, 
št32_t
 
sourûL’gth
,

2406 
UE¼ÜCode
 *
pE¼ÜCode
) {

2407 
UCh¬
 
pivÙBufãr
[
CHUNK_SIZE
];

2408 
UCh¬
 *
pivÙ
, *
pivÙ2
;

2410 *
myT¬g‘
;

2411 cÚ¡ *
sourûLim™
;

2412 cÚ¡ *
rg‘Lim™
;

2413 
št32_t
 
rg‘L’gth
=0;

2416 if(
sourûL’gth
<0) {

2417 
sourûLim™
=
	`u´v_¡rchr
(
sourû
, 0);

2419 
sourûLim™
=
sourû
+
sourûL’gth
;

2423 if(
sourû
==
sourûLim™
) {

2424  
	`u_‹rmš©eCh¬s
(
rg‘
, 
rg‘C­ac™y
, 0, 
pE¼ÜCode
);

2427 
pivÙ
=
pivÙ2
=
pivÙBufãr
;

2428 
myT¬g‘
=
rg‘
;

2429 
rg‘L’gth
=0;

2431 if(
rg‘C­ac™y
>0) {

2433 
rg‘Lim™
=
rg‘
+
rg‘C­ac™y
;

2434 
	`uúv_cÚv”tEx
(
outCÚv”‹r
, 
šCÚv”‹r
,

2435 &
myT¬g‘
, 
rg‘Lim™
,

2436 &
sourû
, 
sourûLim™
,

2437 
pivÙBufãr
, &
pivÙ
, &
pivÙ2
,…ivÙBufãr+
CHUNK_SIZE
,

2438 
FALSE
,

2439 
TRUE
,

2440 
pE¼ÜCode
);

2441 
rg‘L’gth
=(
št32_t
)(
myT¬g‘
-
rg‘
);

2449 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
 || 
rg‘C­ac™y
==0)

2451 
rg‘Bufãr
[
CHUNK_SIZE
];

2453 
rg‘Lim™
=
rg‘Bufãr
+
CHUNK_SIZE
;

2455 *
pE¼ÜCode
=
U_ZERO_ERROR
;

2456 
myT¬g‘
=
rg‘Bufãr
;

2457 
	`uúv_cÚv”tEx
(
outCÚv”‹r
, 
šCÚv”‹r
,

2458 &
myT¬g‘
, 
rg‘Lim™
,

2459 &
sourû
, 
sourûLim™
,

2460 
pivÙBufãr
, &
pivÙ
, &
pivÙ2
,…ivÙBufãr+
CHUNK_SIZE
,

2461 
FALSE
,

2462 
TRUE
,

2463 
pE¼ÜCode
);

2464 
rg‘L’gth
+=(
št32_t
)(
myT¬g‘
-
rg‘Bufãr
);

2465 } *
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
);

2468  
	`u_‹rmš©eCh¬s
(
rg‘
, 
rg‘C­ac™y
, 
rg‘L’gth
, 
pE¼ÜCode
);

2472  
rg‘L’gth
;

2473 
	}
}

2475 
U_CAPI
 
št32_t
 
U_EXPORT2


2476 
	$uúv_cÚv”t
(cÚ¡ *
toCÚv”‹rName
, cÚ¡ *
äomCÚv”‹rName
,

2477 *
rg‘
, 
št32_t
 
rg‘C­ac™y
,

2478 cÚ¡ *
sourû
, 
št32_t
 
sourûL’gth
,

2479 
UE¼ÜCode
 *
pE¼ÜCode
) {

2480 
UCÚv”‹r
 
š
, 
out
;

2481 
UCÚv”‹r
 *
šCÚv”‹r
, *
outCÚv”‹r
;

2482 
št32_t
 
rg‘L’gth
;

2484 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

2488 ifĞ
sourû
==
NULL
 || 
sourûL’gth
<-1 ||

2489 
rg‘C­ac™y
<0 || (rg‘C­ac™y>0 && 
rg‘
==
NULL
)

2491 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

2496 if(
sourûL’gth
==0 || (sourûL’gth<0 && *
sourû
==0)) {

2497  
	`u_‹rmš©eCh¬s
(
rg‘
, 
rg‘C­ac™y
, 0, 
pE¼ÜCode
);

2501 
šCÚv”‹r
=
	`uúv_ü—‹CÚv”‹r
(&
š
, 
äomCÚv”‹rName
, 
pE¼ÜCode
);

2502 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2506 
outCÚv”‹r
=
	`uúv_ü—‹CÚv”‹r
(&
out
, 
toCÚv”‹rName
, 
pE¼ÜCode
);

2507 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2508 
	`uúv_şo£
(
šCÚv”‹r
);

2512 
rg‘L’gth
=
	`uúv_š‹º®CÚv”t
(
outCÚv”‹r
, 
šCÚv”‹r
,

2513 
rg‘
, 
rg‘C­ac™y
,

2514 
sourû
, 
sourûL’gth
,

2515 
pE¼ÜCode
);

2517 
	`uúv_şo£
(
šCÚv”‹r
);

2518 
	`uúv_şo£
(
outCÚv”‹r
);

2520  
rg‘L’gth
;

2521 
	}
}

2524 
št32_t


2525 
	$uúv_cÚv”tAlgÜ™hmic
(
UBoŞ
 
cÚv”tToAlgÜ™hmic
,

2526 
UCÚv”‹rTy³
 
®gÜ™hmicTy³
,

2527 
UCÚv”‹r
 *
úv
,

2528 *
rg‘
, 
št32_t
 
rg‘C­ac™y
,

2529 cÚ¡ *
sourû
, 
št32_t
 
sourûL’gth
,

2530 
UE¼ÜCode
 *
pE¼ÜCode
) {

2531 
UCÚv”‹r
 
®goCÚv”‹rStic
;

2532 
UCÚv”‹r
 *
®goCÚv”‹r
, *
to
, *
äom
;

2533 
št32_t
 
rg‘L’gth
;

2535 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

2539 ifĞ
úv
==
NULL
 || 
sourû
==NULL || 
sourûL’gth
<-1 ||

2540 
rg‘C­ac™y
<0 || (rg‘C­ac™y>0 && 
rg‘
==
NULL
)

2542 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

2547 if(
sourûL’gth
==0 || (sourûL’gth<0 && *
sourû
==0)) {

2548  
	`u_‹rmš©eCh¬s
(
rg‘
, 
rg‘C­ac™y
, 0, 
pE¼ÜCode
);

2552 
®goCÚv”‹r
=
	`uúv_ü—‹AlgÜ™hmicCÚv”‹r
(&
®goCÚv”‹rStic
, 
®gÜ™hmicTy³
,

2553 "", 0, 
pE¼ÜCode
);

2554 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2559 if(
cÚv”tToAlgÜ™hmic
) {

2561 
	`uúv_»£tToUnicode
(
úv
);

2562 
to
=
®goCÚv”‹r
;

2563 
äom
=
úv
;

2566 
	`uúv_»£tFromUnicode
(
úv
);

2567 
äom
=
®goCÚv”‹r
;

2568 
to
=
úv
;

2571 
rg‘L’gth
=
	`uúv_š‹º®CÚv”t
(
to
, 
äom
,

2572 
rg‘
, 
rg‘C­ac™y
,

2573 
sourû
, 
sourûL’gth
,

2574 
pE¼ÜCode
);

2576 
	`uúv_şo£
(
®goCÚv”‹r
);

2578  
rg‘L’gth
;

2579 
	}
}

2581 
U_CAPI
 
št32_t
 
U_EXPORT2


2582 
	$uúv_toAlgÜ™hmic
(
UCÚv”‹rTy³
 
®gÜ™hmicTy³
,

2583 
UCÚv”‹r
 *
úv
,

2584 *
rg‘
, 
št32_t
 
rg‘C­ac™y
,

2585 cÚ¡ *
sourû
, 
št32_t
 
sourûL’gth
,

2586 
UE¼ÜCode
 *
pE¼ÜCode
) {

2587  
	`uúv_cÚv”tAlgÜ™hmic
(
TRUE
, 
®gÜ™hmicTy³
, 
úv
,

2588 
rg‘
, 
rg‘C­ac™y
,

2589 
sourû
, 
sourûL’gth
,

2590 
pE¼ÜCode
);

2591 
	}
}

2593 
U_CAPI
 
št32_t
 
U_EXPORT2


2594 
	$uúv_äomAlgÜ™hmic
(
UCÚv”‹r
 *
úv
,

2595 
UCÚv”‹rTy³
 
®gÜ™hmicTy³
,

2596 *
rg‘
, 
št32_t
 
rg‘C­ac™y
,

2597 cÚ¡ *
sourû
, 
št32_t
 
sourûL’gth
,

2598 
UE¼ÜCode
 *
pE¼ÜCode
) {

2599  
	`uúv_cÚv”tAlgÜ™hmic
(
FALSE
, 
®gÜ™hmicTy³
, 
úv
,

2600 
rg‘
, 
rg‘C­ac™y
,

2601 
sourû
, 
sourûL’gth
,

2602 
pE¼ÜCode
);

2603 
	}
}

2605 
U_CAPI
 
UCÚv”‹rTy³
 
U_EXPORT2


2606 
	$uúv_g‘Ty³
(cÚ¡ 
UCÚv”‹r
* 
cÚv”‹r
)

2608 
št8_t
 
ty³
 = 
cÚv”‹r
->
sh¬edD©a
->
¡©icD©a
->
cÚv”siÚTy³
;

2609 #ià!
UCONFIG_NO_LEGACY_CONVERSION


2610 if(
ty³
 =ğ
UCNV_MBCS
) {

2611  
	`uúv_MBCSG‘Ty³
(
cÚv”‹r
);

2614  (
UCÚv”‹rTy³
)
ty³
;

2615 
	}
}

2617 
U_CAPI
 
U_EXPORT2


2618 
	$uúv_g‘S¹”s
(cÚ¡ 
UCÚv”‹r
* 
cÚv”‹r
,

2619 
UBoŞ
 
¡¬‹rs
[256],

2620 
UE¼ÜCode
* 
”r
)

2622 ià(
”r
 =ğ
NULL
 || 
	`U_FAILURE
(*err)) {

2626 if(
cÚv”‹r
->
sh¬edD©a
->
im¶
->
g‘S¹”s
 !ğ
NULL
) {

2627 
cÚv”‹r
->
sh¬edD©a
->
im¶
->
	`g‘S¹”s
(cÚv”‹r, 
¡¬‹rs
, 
”r
);

2629 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

2631 
	}
}

2633 cÚ¡ 
UAmbiguousCÚv”‹r
 *
	$uúv_g‘Ambiguous
(cÚ¡ 
UCÚv”‹r
 *
úv
)

2635 
UE¼ÜCode
 
”rÜCode
;

2636 cÚ¡ *
Çme
;

2637 
št32_t
 
i
;

2639 if(
úv
==
NULL
) {

2640  
NULL
;

2643 
”rÜCode
=
U_ZERO_ERROR
;

2644 
Çme
=
	`uúv_g‘Name
(
úv
, &
”rÜCode
);

2645 if(
	`U_FAILURE
(
”rÜCode
)) {

2646  
NULL
;

2649 
i
=0; i<(
št32_t
)((
ambiguousCÚv”‹rs
)/(
UAmbiguousCÚv”‹r
)); ++i)

2651 if(0==
	`u´v_¡rcmp
(
Çme
, 
ambiguousCÚv”‹rs
[
i
].name))

2653  
ambiguousCÚv”‹rs
+
i
;

2657  
NULL
;

2658 
	}
}

2660 
U_CAPI
 
U_EXPORT2


2661 
	$uúv_fixFeS•¬©Ü
(cÚ¡ 
UCÚv”‹r
 *
úv
,

2662 
UCh¬
* 
sourû
,

2663 
št32_t
 
sourûL’gth
) {

2664 cÚ¡ 
UAmbiguousCÚv”‹r
 *
a
;

2665 
št32_t
 
i
;

2666 
UCh¬
 
v¬ŸÁ5c
;

2668 if(
úv
==
NULL
 || 
sourû
==NULL || 
sourûL’gth
<=0 || (
a
=
	`uúv_g‘Ambiguous
(cnv))==NULL)

2673 
v¬ŸÁ5c
=
a
->variant5c;

2674 
i
=0; i<
sourûL’gth
; ++i) {

2675 if(
sourû
[
i
]==
v¬ŸÁ5c
) {

2676 
sourû
[
i
]=0x5c;

2679 
	}
}

2681 
U_CAPI
 
UBoŞ
 
U_EXPORT2


2682 
	$uúv_isAmbiguous
(cÚ¡ 
UCÚv”‹r
 *
úv
) {

2683  (
UBoŞ
)(
	`uúv_g‘Ambiguous
(
úv
)!=
NULL
);

2684 
	}
}

2686 
U_CAPI
 
U_EXPORT2


2687 
	$uúv_£tF®lback
(
UCÚv”‹r
 *
úv
, 
UBoŞ
 
u£sF®lback
)

2689 
úv
->
u£F®lback
 = 
u£sF®lback
;

2690 
	}
}

2692 
U_CAPI
 
UBoŞ
 
U_EXPORT2


2693 
	$uúv_u£sF®lback
(cÚ¡ 
UCÚv”‹r
 *
úv
)

2695  
úv
->
u£F®lback
;

2696 
	}
}

2698 
U_CAPI
 
U_EXPORT2


2699 
	$uúv_g‘Inv®idCh¬s
 (cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
,

2700 *
”rBy‹s
,

2701 
št8_t
 * 
Ën
,

2702 
UE¼ÜCode
 * 
”r
)

2704 ià(
”r
 =ğ
NULL
 || 
	`U_FAILURE
(*err))

2708 ià(
Ën
 =ğ
NULL
 || 
”rBy‹s
 =ğNULL || 
cÚv”‹r
 == NULL)

2710 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

2713 ià(*
Ën
 < 
cÚv”‹r
->
šv®idCh¬L’gth
)

2715 *
”r
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

2718 ià((*
Ën
 = 
cÚv”‹r
->
šv®idCh¬L’gth
) > 0)

2720 
	`u´v_memıy
 (
”rBy‹s
, 
cÚv”‹r
->
šv®idCh¬Bufãr
, *
Ën
);

2722 
	}
}

2724 
U_CAPI
 
U_EXPORT2


2725 
	$uúv_g‘Inv®idUCh¬s
 (cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
,

2726 
UCh¬
 *
”rCh¬s
,

2727 
št8_t
 * 
Ën
,

2728 
UE¼ÜCode
 * 
”r
)

2730 ià(
”r
 =ğ
NULL
 || 
	`U_FAILURE
(*err))

2734 ià(
Ën
 =ğ
NULL
 || 
”rCh¬s
 =ğNULL || 
cÚv”‹r
 == NULL)

2736 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

2739 ià(*
Ën
 < 
cÚv”‹r
->
šv®idUCh¬L’gth
)

2741 *
”r
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

2744 ià((*
Ën
 = 
cÚv”‹r
->
šv®idUCh¬L’gth
) > 0)

2746 
	`u´v_memıy
 (
”rCh¬s
, 
cÚv”‹r
->
šv®idUCh¬Bufãr
, (
UCh¬
è* (*
Ën
));

2748 
	}
}

2750 
	#SIG_MAX_LEN
 5

	)

2752 
U_CAPI
 cÚ¡ * 
U_EXPORT2


2753 
	$uúv_d‘eùUnicodeSigÇtu»
ĞcÚ¡ * 
sourû
,

2754 
št32_t
 
sourûL’gth
,

2755 
št32_t
* 
sigÇtu»L’gth
,

2756 
UE¼ÜCode
* 
pE¼ÜCode
) {

2757 
št32_t
 
dummy
;

2762 
¡¬t
[
SIG_MAX_LEN
]={ '\xa5', '\xa5', '\xa5', '\xa5', '\xa5' };

2763 
i
 = 0;

2765 if((
pE¼ÜCode
==
NULL
è|| 
	`U_FAILURE
(*pErrorCode)){

2766  
NULL
;

2769 if(
sourû
 =ğ
NULL
 || 
sourûL’gth
 < -1){

2770 *
pE¼ÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

2771  
NULL
;

2774 if(
sigÇtu»L’gth
 =ğ
NULL
) {

2775 
sigÇtu»L’gth
 = &
dummy
;

2778 if(
sourûL’gth
==-1){

2779 
sourûL’gth
=(
št32_t
)
	`u´v_¡¾’
(
sourû
);

2783 
i
<
sourûL’gth
&& i<
SIG_MAX_LEN
){

2784 
¡¬t
[
i
]=
sourû
[i];

2785 
i
++;

2788 if(
¡¬t
[0] == '\xFE' && start[1] == '\xFF') {

2789 *
sigÇtu»L’gth
=2;

2791 } if(
¡¬t
[0] == '\xFF' && start[1] == '\xFE') {

2792 if(
¡¬t
[2] == '\x00' && start[3] =='\x00') {

2793 *
sigÇtu»L’gth
=4;

2796 *
sigÇtu»L’gth
=2;

2799 } if(
¡¬t
[0] == '\xEF' && start[1] == '\xBB' && start[2] == '\xBF') {

2800 *
sigÇtu»L’gth
=3;

2802 } if(
¡¬t
[0] == '\x00' && start[1] == '\x00' &&

2803 
¡¬t
[2] == '\xFE' && start[3]=='\xFF') {

2804 *
sigÇtu»L’gth
=4;

2806 } if(
¡¬t
[0] == '\x0E' && start[1] == '\xFE' && start[2] == '\xFF') {

2807 *
sigÇtu»L’gth
=3;

2809 } if(
¡¬t
[0] == '\xFB' && start[1] == '\xEE' && start[2] == '\x28') {

2810 *
sigÇtu»L’gth
=3;

2812 } if(
¡¬t
[0] == '\x2B' && start[1] == '\x2F' && start[2] == '\x76') {

2821 if(
¡¬t
[3] == '\x38' && start[4] == '\x2D') {

2823 *
sigÇtu»L’gth
=5;

2825 } if(
¡¬t
[3] == '\x38' || start[3] == '\x39' || start[3] == '\x2B' || start[3] == '\x2F') {

2827 *
sigÇtu»L’gth
=4;

2830 }if(
¡¬t
[0]=='\xDD' && start[1]== '\x73'&& start[2]=='\x66' && start[3]=='\x73'){

2831 *
sigÇtu»L’gth
=4;

2837 *
sigÇtu»L’gth
=0;

2838  
NULL
;

2839 
	}
}

2841 
U_CAPI
 
št32_t
 
U_EXPORT2


2842 
	$uúv_äomUCouÁP’dšg
(cÚ¡ 
UCÚv”‹r
* 
úv
, 
UE¼ÜCode
* 
¡©us
)

2844 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

2847 if(
úv
 =ğ
NULL
){

2848 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

2852 if(
úv
->
´eFromUL’gth
 > 0){

2853  
	`U16_LENGTH
(
úv
->
´eFromUFœ¡CP
)+úv->
´eFromUL’gth
 ;

2854 }if(
úv
->
´eFromUL’gth
 < 0){

2855  -
úv
->
´eFromUL’gth
 ;

2856 }if(
úv
->
äomUCh¬32
 > 0){

2858 }if(
úv
->
´eFromUFœ¡CP
 >0){

2859  
	`U16_LENGTH
(
úv
->
´eFromUFœ¡CP
);

2863 
	}
}

2865 
U_CAPI
 
št32_t
 
U_EXPORT2


2866 
	$uúv_toUCouÁP’dšg
(cÚ¡ 
UCÚv”‹r
* 
úv
, 
UE¼ÜCode
* 
¡©us
){

2868 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

2871 if(
úv
 =ğ
NULL
){

2872 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

2876 if(
úv
->
´eToUL’gth
 > 0){

2877  
úv
->
´eToUL’gth
 ;

2878 }if(
úv
->
´eToUL’gth
 < 0){

2879  -
úv
->
´eToUL’gth
;

2880 }if(
úv
->
toUL’gth
 > 0){

2881  
úv
->
toUL’gth
;

2884 
	}
}

	@ucnv2022.c

29 
	~"unicode/uty³s.h
"

31 #ià!
UCONFIG_NO_CONVERSION
 && !
UCONFIG_NO_LEGACY_CONVERSION


33 
	~"unicode/uúv.h
"

34 
	~"unicode/u£t.h
"

35 
	~"unicode/uúv_”r.h
"

36 
	~"unicode/uúv_cb.h
"

37 
	~"uúv_imp.h
"

38 
	~"uúv_bld.h
"

39 
	~"uúv_úv.h
"

40 
	~"uúvmbcs.h
"

41 
	~"c¡ršg.h
"

42 
	~"cmemÜy.h
"

44 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

46 #ifdeà
U_ENABLE_GENERIC_ISO_2022


78 cÚ¡ 
	gSHIFT_IN_STR
[] = "\x0F";

79 cÚ¡ 
	gSHIFT_OUT_STR
[] = "\x0E";

81 
	#CR
 0x0D

	)

82 
	#LF
 0x0A

	)

83 
	#H_TAB
 0x09

	)

84 
	#V_TAB
 0x0B

	)

85 
	#SPACE
 0x20

	)

88 
	mHWKANA_START
=0xff61,

89 
	mHWKANA_END
=0xff9f

101 
	mGR94_START
=0xa1,

102 
	mGR94_END
=0xfe,

103 
	mGR96_START
=0xa0,

104 
	mGR96_END
=0xff

113 
	#IS_2022_CONTROL
(
c
è(((c)<0x20è&& (((
ušt32_t
)1<<(c))&0x0800c000)!=0)

	)

118 
	mINVALID_STATE
=-1,

119 
	mASCII
 = 0,

121 
	mSS2_STATE
=0x10,

122 
	mSS3_STATE
,

125 
	mISO8859_1
 = 1 ,

126 
	mISO8859_7
 = 2 ,

127 
	mJISX201
 = 3,

128 
	mJISX208
 = 4,

129 
	mJISX212
 = 5,

130 
	mGB2312
 =6,

131 
	mKSC5601
 =7,

132 
	mHWKANA_7BIT
=8,

136 
	mGB2312_1
=1,

137 
	mISO_IR_165
=2,

138 
	mCNS_11643
=3,

144 
	mCNS_11643_0
=0x20,

145 
	mCNS_11643_1
,

146 
	mCNS_11643_2
,

147 
	mCNS_11643_3
,

148 
	mCNS_11643_4
,

149 
	mCNS_11643_5
,

150 
	mCNS_11643_6
,

151 
	mCNS_11643_7


152 } 
	tS‹Enum
;

155 
	#IS_JP_DBCS
(
cs
è(
JISX208
<=(csè&& (cs)<=
KSC5601
)

	)

157 
	#CSM
(
cs
è((
ušt16_t
)1<<(cs))

	)

168 ’um { 
	mMAX_JA_VERSION
=4 };

169 cÚ¡ 
ušt16_t
 
	gjpCh¬£tMasks
[
MAX_JA_VERSION
+1]={

170 
CSM
(
ASCII
)|CSM(
JISX201
)|CSM(
JISX208
)|CSM(
HWKANA_7BIT
),

171 
CSM
(
ASCII
)|CSM(
JISX201
)|CSM(
JISX208
)|CSM(
HWKANA_7BIT
)|CSM(
JISX212
),

172 
CSM
(
ASCII
)|CSM(
JISX201
)|CSM(
JISX208
)|CSM(
HWKANA_7BIT
)|CSM(
JISX212
)|CSM(
GB2312
)|CSM(
KSC5601
)|CSM(
ISO8859_1
)|CSM(
ISO8859_7
),

173 
CSM
(
ASCII
)|CSM(
JISX201
)|CSM(
JISX208
)|CSM(
HWKANA_7BIT
)|CSM(
JISX212
)|CSM(
GB2312
)|CSM(
KSC5601
)|CSM(
ISO8859_1
)|CSM(
ISO8859_7
),

174 
CSM
(
ASCII
)|CSM(
JISX201
)|CSM(
JISX208
)|CSM(
HWKANA_7BIT
)|CSM(
JISX212
)|CSM(
GB2312
)|CSM(
KSC5601
)|CSM(
ISO8859_1
)|CSM(
ISO8859_7
)

178 
	mASCII1
=0,

179 
	mLATIN1
,

180 
	mSBCS
,

181 
	mDBCS
,

182 
	mMBCS
,

183 
	mHWKANA


184 }
	tCnv2022Ty³
;

186 
	sISO2022S‹
 {

187 
št8_t
 
	mcs
[4];

188 
št8_t
 
	mg
;

189 
št8_t
 
	m´evG
;

190 } 
	tISO2022S‹
;

192 
	#UCNV_OPTIONS_VERSION_MASK
 0xf

	)

193 
	#UCNV_2022_MAX_CONVERTERS
 10

	)

196 
UCÚv”‹rSh¬edD©a
 *
	mmyCÚv”‹rA¼ay
[
UCNV_2022_MAX_CONVERTERS
];

197 
UCÚv”‹r
 *
	mcu¼’tCÚv”‹r
;

198 
Cnv2022Ty³
 
	mcu¼’tTy³
;

199 
ISO2022S‹
 
	mtoU2022S‹
, 
	mäomU2022S‹
;

200 
ušt32_t
 
	mkey
;

201 
ušt32_t
 
	mv”siÚ
;

202 #ifdeà
U_ENABLE_GENERIC_ISO_2022


203 
UBoŞ
 
	misFœ¡Bufãr
;

205 
UBoŞ
 
	misEm±ySegm’t
;

206 
	mÇme
[30];

207 
	mloÿË
[3];

208 }
	tUCÚv”‹rD©aISO2022
;

214 
U_CFUNC
 

215 
uúv_äomUnicode_UTF8
(
UCÚv”‹rFromUnicodeArgs
 * 
¬gs
,

216 
UE¼ÜCode
 * 
”r
);

217 
U_CFUNC
 

218 
uúv_äomUnicode_UTF8_OFFSETS_LOGIC
(
UCÚv”‹rFromUnicodeArgs
 * 
¬gs
,

219 
UE¼ÜCode
 * 
”r
);

221 
	#ESC_2022
 0x1B

	)

225 
	mINVALID_2022
 = -1,

226 
	mVALID_NON_TERMINAL_2022
 = 0,

227 
	mVALID_TERMINAL_2022
 = 1,

228 
	mVALID_MAYBE_TERMINAL_2022
 = 2

229 } 
	tUCNV_TabËS‹s_2022
;

268 cÚ¡ 
št8_t
 
	gnÜm®ize_esq_ch¬s_2022
[256] = {

299 #ifdeà
U_ENABLE_GENERIC_ISO_2022


318 
	#MAX_STATES_2022
 74

	)

319 cÚ¡ 
št32_t
 
	gescSeqS‹TabË_Key_2022
[
MAX_STATES_2022
] = {

332 #ifdeà
U_ENABLE_GENERIC_ISO_2022


334 cÚ¡ * cÚ¡ 
	gescSeqS‹TabË_ResuÉ_2022
[
MAX_STATES_2022
] = {

337 
NULL
 ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,NULL ,"latin1" ,"latin1"

339 ,"Ïtš1" ,
NULL
 ,"JISX-208" ,"ibm-5478" ,"JISX-208" ,NULL ,NULL ,NULL ,NULL ,"UTF8"

340 ,"ISO-8859-1" ,"ISO-8859-7" ,"JIS-X-208" ,
NULL
 ,"ibm-955" ,"ibm-367" ,"ibm-952" ,"ibm-949" ,"JISX-212" ,"ibm-1383"

343 ,"UTF16_PÏtfÜmEndŸn" ,"UTF16_PÏtfÜmEndŸn" ,"UTF16_PÏtfÜmEndŸn" ,
NULL
 ,"latin1" ,"ibm-912" ,"ibm-913" ,"ibm-914" ,"ibm-813" ,"ibm-1089"

349 cÚ¡ 
št8_t
 
	gescSeqS‹TabË_V®ue_2022
[
MAX_STATES_2022
] = {

351 
VALID_NON_TERMINAL_2022
 ,VALID_NON_TERMINAL_2022 ,VALID_NON_TERMINAL_2022 ,VALID_NON_TERMINAL_2022 ,VALID_NON_TERMINAL_2022 ,
VALID_TERMINAL_2022
 ,VALID_TERMINAL_2022 ,VALID_NON_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022

352 ,
VALID_MAYBE_TERMINAL_2022
 ,
VALID_TERMINAL_2022
 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022

353 ,
VALID_TERMINAL_2022
 ,
VALID_NON_TERMINAL_2022
 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_NON_TERMINAL_2022 ,VALID_NON_TERMINAL_2022 ,VALID_NON_TERMINAL_2022 ,VALID_NON_TERMINAL_2022 ,VALID_TERMINAL_2022

354 ,
VALID_TERMINAL_2022
 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,
VALID_NON_TERMINAL_2022
 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022

355 ,
VALID_TERMINAL_2022
 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022

356 ,
VALID_TERMINAL_2022
 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022

357 ,
VALID_TERMINAL_2022
 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,
VALID_NON_TERMINAL_2022
 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022

358 ,
VALID_TERMINAL_2022
 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022 ,VALID_TERMINAL_2022

364 #ifdeà
U_ENABLE_GENERIC_ISO_2022


365 
	mISO_2022
=0,

367 
	mISO_2022_JP
=1,

368 
	mISO_2022_KR
=2,

369 
	mISO_2022_CN
=3

370 } 
	tV¬ŸÁ2022
;

374 
_ISO2022O³n
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rLßdArgs
 *
pArgs
, 
UE¼ÜCode
 *
”rÜCode
);

377 
_ISO2022Clo£
(
UCÚv”‹r
 *
cÚv”‹r
);

380 
_ISO2022Re£t
(
UCÚv”‹r
 *
cÚv”‹r
, 
UCÚv”‹rRe£tChoiû
 
choiû
);

383 
_ISO2022g‘Name
(cÚ¡ 
UCÚv”‹r
* 
úv
);

386 
_ISO_2022_Wr™eSub
(
UCÚv”‹rFromUnicodeArgs
 *
¬gs
, 
št32_t
 
off£tIndex
, 
UE¼ÜCode
 *
”r
);

388 
UCÚv”‹r
 *

389 
_ISO_2022_SaãClÚe
(cÚ¡ 
UCÚv”‹r
 *
úv
, *
¡ackBufãr
, 
št32_t
 *
pBufãrSize
, 
UE¼ÜCode
 *
¡©us
);

391 #ifdeà
U_ENABLE_GENERIC_ISO_2022


393 
T_UCÚv”‹r_toUnicode_ISO_2022_OFFSETS_LOGIC
(
UCÚv”‹rToUnicodeArgs
* 
¬gs
, 
UE¼ÜCode
* 
”r
);

397 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_ISO2022JPD©a
;

398 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_ISO2022KRD©a
;

399 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_ISO2022CND©a
;

404 
U_INLINE
 

405 
	$äomUWr™eUIÁ8
(
UCÚv”‹r
 *
úv
,

406 cÚ¡ *
by‹s
, 
št32_t
 
Ëngth
,

407 
ušt8_t
 **
rg‘
, cÚ¡ *
rg‘Lim™
,

408 
št32_t
 **
off£ts
,

409 
št32_t
 
sourûIndex
,

410 
UE¼ÜCode
 *
pE¼ÜCode
)

412 *
rg‘Ch¬s
 = (*)*
rg‘
;

413 
	`uúv_äomUWr™eBy‹s
(
úv
, 
by‹s
, 
Ëngth
, &
rg‘Ch¬s
, 
rg‘Lim™
,

414 
off£ts
, 
sourûIndex
, 
pE¼ÜCode
);

415 *
rg‘
 = (
ušt8_t
*)
rg‘Ch¬s
;

417 
	}
}

419 
U_INLINE
 

420 
	$£tIn™ŸlS‹ToUnicodeKR
(
UCÚv”‹r
* 
cÚv”‹r
, 
UCÚv”‹rD©aISO2022
 *
myCÚv”‹rD©a
){

421 if(
myCÚv”‹rD©a
->
v”siÚ
 == 1) {

422 
UCÚv”‹r
 *
úv
 = 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
;

424 
úv
->
toUnicodeStus
=0;

425 
úv
->
mode
=0;

426 
úv
->
toUL’gth
=0;

428 
	}
}

430 
U_INLINE
 

431 
	$£tIn™ŸlS‹FromUnicodeKR
(
UCÚv”‹r
* 
cÚv”‹r
,
UCÚv”‹rD©aISO2022
 *
myCÚv”‹rD©a
){

435 ifĞ
cÚv”‹r
->
ch¬E¼ÜBufãrL’gth
==0){

437 
cÚv”‹r
->
ch¬E¼ÜBufãrL’gth
 = 4;

438 
cÚv”‹r
->
ch¬E¼ÜBufãr
[0] = 0x1b;

439 
cÚv”‹r
->
ch¬E¼ÜBufãr
[1] = 0x24;

440 
cÚv”‹r
->
ch¬E¼ÜBufãr
[2] = 0x29;

441 
cÚv”‹r
->
ch¬E¼ÜBufãr
[3] = 0x43;

443 if(
myCÚv”‹rD©a
->
v”siÚ
 == 1) {

444 
UCÚv”‹r
 *
úv
 = 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
;

446 
úv
->
äomUCh¬32
=0;

447 
úv
->
äomUnicodeStus
=1;

449 
	}
}

452 
	$_ISO2022O³n
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rLßdArgs
 *
pArgs
, 
UE¼ÜCode
 *
”rÜCode
){

454 
myLoÿË
[6]={' ',' ',' ',' ',' ',' '};

456 
úv
->
exŒaInfo
 = 
	`u´v_m®loc
 ( (
UCÚv”‹rD©aISO2022
));

457 if(
úv
->
exŒaInfo
 !ğ
NULL
) {

458 
UCÚv”‹rNameP›ûs
 
¡ackP›ûs
;

459 
UCÚv”‹rLßdArgs
 
¡ackArgs
={ (
št32_t
)(UConverterLoadArgs) };

460 
UCÚv”‹rD©aISO2022
 *
myCÚv”‹rD©a
=(UCÚv”‹rD©aISO2022 *è
úv
->
exŒaInfo
;

461 
ušt32_t
 
v”siÚ
;

463 
¡ackArgs
.
ÚlyTe¡IsLßdabË
 = 
pArgs
->onlyTestIsLoadable;

465 
	`u´v_mem£t
(
myCÚv”‹rD©a
, 0, (
UCÚv”‹rD©aISO2022
));

466 
myCÚv”‹rD©a
->
cu¼’tTy³
 = 
ASCII1
;

467 
úv
->
äomUnicodeStus
 =
FALSE
;

468 if(
pArgs
->
loÿË
){

469 
	`u´v_¡ºıy
(
myLoÿË
, 
pArgs
->
loÿË
, (myLocale));

471 
v”siÚ
 = 
pArgs
->
İtiÚs
 & 
UCNV_OPTIONS_VERSION_MASK
;

472 
myCÚv”‹rD©a
->
v”siÚ
 = version;

477 if((
myLoÿË
[0]=='j' &&

478 (
myLoÿË
[1]=='a'|| myLocale[1]=='p' || myLocale[1]=='k' ||

479 
myLoÿË
[1]=='s') &&

480 (
myLoÿË
[2]=='_' || myLocale[2]=='\0')))

482 
size_t
 
Ën
=0;

484 if(
v”siÚ
>
MAX_JA_VERSION
) {

486 
myCÚv”‹rD©a
->
v”siÚ
 = version = 0;

488 if(
jpCh¬£tMasks
[
v”siÚ
]&
	`CSM
(
ISO8859_7
)) {

489 
myCÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
ISO8859_7
] =

490 
	`uúv_lßdSh¬edD©a
("ISO8859_7", &
¡ackP›ûs
, &
¡ackArgs
, 
”rÜCode
);

492 ià(
myLoÿË
[1]=='k') {

493 
myCÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
JISX208
] =

494 
	`uúv_lßdSh¬edD©a
("kddi-jisx-208-2007", &
¡ackP›ûs
, &
¡ackArgs
, 
”rÜCode
);

495 } ià(
myLoÿË
[1]=='s') {

496 
myCÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
JISX208
] =

497 
	`uúv_lßdSh¬edD©a
("soábªk-jisx-208-2007", &
¡ackP›ûs
, &
¡ackArgs
, 
”rÜCode
);

499 
myCÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
JISX208
] =

500 
	`uúv_lßdSh¬edD©a
("Shiá-JIS", &
¡ackP›ûs
, &
¡ackArgs
, 
”rÜCode
);

504 if(
jpCh¬£tMasks
[
v”siÚ
]&
	`CSM
(
JISX212
)) {

505 
myCÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
JISX212
] =

506 
	`uúv_lßdSh¬edD©a
("jisx-212", &
¡ackP›ûs
, &
¡ackArgs
, 
”rÜCode
);

508 if(
jpCh¬£tMasks
[
v”siÚ
]&
	`CSM
(
GB2312
)) {

509 
myCÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
GB2312
] =

511 
	`uúv_lßdSh¬edD©a
("noİ-gb2312_gl", &
¡ackP›ûs
, &
¡ackArgs
, 
”rÜCode
);

514 if(
jpCh¬£tMasks
[
v”siÚ
]&
	`CSM
(
KSC5601
)) {

515 
myCÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
KSC5601
] =

516 
	`uúv_lßdSh¬edD©a
("ksc_5601", &
¡ackP›ûs
, &
¡ackArgs
, 
”rÜCode
);

520 
úv
->
sh¬edD©a
=(
UCÚv”‹rSh¬edD©a
*)(&
_ISO2022JPD©a
);

521 
	`u´v_¡rıy
(
myCÚv”‹rD©a
->
loÿË
,"ja");

523 ()
	`u´v_¡rıy
(
myCÚv”‹rD©a
->
Çme
,"ISO_2022,locale=ja,version=");

524 
Ën
 = 
	`u´v_¡¾’
(
myCÚv”‹rD©a
->
Çme
);

525 
myCÚv”‹rD©a
->
Çme
[
Ën
]=()(myCÚv”‹rD©a->
v”siÚ
+()'0');

526 
myCÚv”‹rD©a
->
Çme
[
Ën
+1]='\0';

528 if(
myLoÿË
[0]=='k' && (myLocale[1]=='o'|| myLocale[1]=='r') &&

529 (
myLoÿË
[2]=='_' || myLocale[2]=='\0'))

531 cÚ¡ *
úvName
;

532 if(
v”siÚ
==1) {

533 
úvName
="icu-internal-25546";

536 
úvName
="ksc_5601";

538 
myCÚv”‹rD©a
->
v”siÚ
=version=0;

540 if(
pArgs
->
ÚlyTe¡IsLßdabË
) {

541 
	`uúv_ÿnC»©eCÚv”‹r
(
úvName
, 
”rÜCode
);

542 
	`u´v_ä“
(
úv
->
exŒaInfo
);

543 
úv
->
exŒaInfo
=
NULL
;

546 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
=
	`uúv_İ’
(
úvName
, 
”rÜCode
);

547 ià(
	`U_FAILURE
(*
”rÜCode
)) {

548 
	`_ISO2022Clo£
(
úv
);

552 if(
v”siÚ
==1) {

553 ()
	`u´v_¡rıy
(
myCÚv”‹rD©a
->
Çme
,"ISO_2022,locale=ko,version=1");

554 
	`u´v_memıy
(
úv
->
subCh¬s
, 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->subChars, 4);

555 
úv
->
subCh¬L’
 = 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->subCharLen;

557 ()
	`u´v_¡rıy
(
myCÚv”‹rD©a
->
Çme
,"ISO_2022,locale=ko,version=0");

561 
	`£tIn™ŸlS‹ToUnicodeKR
(
úv
, 
myCÚv”‹rD©a
);

562 
	`£tIn™ŸlS‹FromUnicodeKR
(
úv
, 
myCÚv”‹rD©a
);

565 
úv
->
sh¬edD©a
=(
UCÚv”‹rSh¬edD©a
*)&
_ISO2022KRD©a
;

566 
	`u´v_¡rıy
(
myCÚv”‹rD©a
->
loÿË
,"ko");

569 if(((
myLoÿË
[0]=='z' && myLocale[1]=='h') || (myLocale[0]=='c'&& myLocale[1]=='n'))&&

570 (
myLoÿË
[2]=='_' || myLocale[2]=='\0'))

575 
myCÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
GB2312_1
] =

576 
	`uúv_lßdSh¬edD©a
("noİ-gb2312_gl", &
¡ackP›ûs
, &
¡ackArgs
, 
”rÜCode
);

577 if(
v”siÚ
==1) {

578 
myCÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
ISO_IR_165
] =

579 
	`uúv_lßdSh¬edD©a
("noİ-iso-œ-165", &
¡ackP›ûs
, &
¡ackArgs
, 
”rÜCode
);

581 
myCÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
CNS_11643
] =

582 
	`uúv_lßdSh¬edD©a
("noİ-ús-11643", &
¡ackP›ûs
, &
¡ackArgs
, 
”rÜCode
);

587 
úv
->
sh¬edD©a
=(
UCÚv”‹rSh¬edD©a
*)&
_ISO2022CND©a
;

588 
	`u´v_¡rıy
(
myCÚv”‹rD©a
->
loÿË
,"cn");

590 ià(
v”siÚ
==0){

591 
myCÚv”‹rD©a
->
v”siÚ
 = 0;

592 ()
	`u´v_¡rıy
(
myCÚv”‹rD©a
->
Çme
,"ISO_2022,locale=zh,version=0");

593 }ià(
v”siÚ
==1){

594 
myCÚv”‹rD©a
->
v”siÚ
 = 1;

595 ()
	`u´v_¡rıy
(
myCÚv”‹rD©a
->
Çme
,"ISO_2022,locale=zh,version=1");

597 
myCÚv”‹rD©a
->
v”siÚ
 = 2;

598 ()
	`u´v_¡rıy
(
myCÚv”‹rD©a
->
Çme
,"ISO_2022,locale=zh,version=2");

602 #ifdeà
U_ENABLE_GENERIC_ISO_2022


603 
myCÚv”‹rD©a
->
isFœ¡Bufãr
 = 
TRUE
;

606 
úv
->
ch¬E¼ÜBufãrL’gth
 = 3;

607 
úv
->
ch¬E¼ÜBufãr
[0] = 0x1b;

608 
úv
->
ch¬E¼ÜBufãr
[1] = 0x25;

609 
úv
->
ch¬E¼ÜBufãr
[2] = 0x42;

611 
úv
->
sh¬edD©a
=(
UCÚv”‹rSh¬edD©a
*)&
_ISO2022D©a
;

613 
	`u´v_¡rıy
(
myCÚv”‹rD©a
->
Çme
,"ISO_2022");

615 *
”rÜCode
 = 
U_UNSUPPORTED_ERROR
;

620 
úv
->
maxBy‹sP”UCh¬
=úv->
sh¬edD©a
->
¡©icD©a
->
maxBy‹sP”Ch¬
;

622 if(
	`U_FAILURE
(*
”rÜCode
è|| 
pArgs
->
ÚlyTe¡IsLßdabË
) {

623 
	`_ISO2022Clo£
(
úv
);

626 *
”rÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

628 
	}
}

632 
	$_ISO2022Clo£
(
UCÚv”‹r
 *
cÚv”‹r
) {

633 
UCÚv”‹rD©aISO2022
* 
myD©a
 =(UCÚv”‹rD©aISO2022 *è(
cÚv”‹r
->
exŒaInfo
);

634 
UCÚv”‹rSh¬edD©a
 **
¬¿y
 = 
myD©a
->
myCÚv”‹rA¼ay
;

635 
št32_t
 
i
;

637 ià(
cÚv”‹r
->
exŒaInfo
 !ğ
NULL
) {

639 
i
=0; i<
UCNV_2022_MAX_CONVERTERS
; i++) {

640 if(
¬¿y
[
i
]!=
NULL
) {

641 
	`uúv_uÆßdSh¬edD©aIfR—dy
(
¬¿y
[
i
]);

645 
	`uúv_şo£
(
myD©a
->
cu¼’tCÚv”‹r
);

647 if(!
cÚv”‹r
->
isExŒaLoÿl
){

648 
	`u´v_ä“
 (
cÚv”‹r
->
exŒaInfo
);

649 
cÚv”‹r
->
exŒaInfo
 = 
NULL
;

652 
	}
}

655 
	$_ISO2022Re£t
(
UCÚv”‹r
 *
cÚv”‹r
, 
UCÚv”‹rRe£tChoiû
 
choiû
) {

656 
UCÚv”‹rD©aISO2022
 *
myCÚv”‹rD©a
=(UCÚv”‹rD©aISO2022 *è(
cÚv”‹r
->
exŒaInfo
);

657 if(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

658 
	`u´v_mem£t
(&
myCÚv”‹rD©a
->
toU2022S‹
, 0, (
ISO2022S‹
));

659 
myCÚv”‹rD©a
->
key
 = 0;

660 
myCÚv”‹rD©a
->
isEm±ySegm’t
 = 
FALSE
;

662 if(
choiû
!=
UCNV_RESET_TO_UNICODE
) {

663 
	`u´v_mem£t
(&
myCÚv”‹rD©a
->
äomU2022S‹
, 0, (
ISO2022S‹
));

665 #ifdeà
U_ENABLE_GENERIC_ISO_2022


666 if(
myCÚv”‹rD©a
->
loÿË
[0] == 0){

667 if(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

668 
myCÚv”‹rD©a
->
isFœ¡Bufãr
 = 
TRUE
;

669 
myCÚv”‹rD©a
->
key
 = 0;

670 ià(
cÚv”‹r
->
mode
 =ğ
UCNV_SO
){

671 
	`uúv_şo£
 (
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
);

672 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
=
NULL
;

674 
cÚv”‹r
->
mode
 = 
UCNV_SI
;

676 if(
choiû
!=
UCNV_RESET_TO_UNICODE
) {

678 
cÚv”‹r
->
ch¬E¼ÜBufãrL’gth
 = 3;

679 
cÚv”‹r
->
ch¬E¼ÜBufãr
[0] = 0x1b;

680 
cÚv”‹r
->
ch¬E¼ÜBufãr
[1] = 0x28;

681 
cÚv”‹r
->
ch¬E¼ÜBufãr
[2] = 0x42;

688 if(
myCÚv”‹rD©a
->
loÿË
[0] == 'k'){

689 if(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

690 
	`£tIn™ŸlS‹ToUnicodeKR
(
cÚv”‹r
, 
myCÚv”‹rD©a
);

692 if(
choiû
!=
UCNV_RESET_TO_UNICODE
) {

693 
	`£tIn™ŸlS‹FromUnicodeKR
(
cÚv”‹r
, 
myCÚv”‹rD©a
);

697 
	}
}

700 
	$_ISO2022g‘Name
(cÚ¡ 
UCÚv”‹r
* 
úv
){

701 if(
úv
->
exŒaInfo
){

702 
UCÚv”‹rD©aISO2022
* 
myD©a
ğ(UCÚv”‹rD©aISO2022*)
úv
->
exŒaInfo
;

703  
myD©a
->
Çme
;

705  
NULL
;

706 
	}
}

723 cÚ¡ 
št8_t
 
	gÃxtS‹ToUnicodeJP
[
MAX_STATES_2022
]= {

725 
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,
SS2_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

726 ,
ASCII
 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,
JISX201
 ,
HWKANA_7BIT
 ,JISX201 ,INVALID_STATE

727 ,
INVALID_STATE
 ,INVALID_STATE ,
JISX208
 ,
GB2312
 ,JISX208 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

728 ,
ISO8859_1
 ,
ISO8859_7
 ,
JISX208
 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,
KSC5601
 ,
JISX212
 ,INVALID_STATE

729 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

730 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

731 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

732 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

736 cÚ¡ 
št8_t
 
	gÃxtS‹ToUnicodeCN
[
MAX_STATES_2022
]= {

738 
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,
SS2_STATE
 ,
SS3_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

739 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

740 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

741 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

742 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,
GB2312_1
 ,INVALID_STATE ,
ISO_IR_165


743 ,
CNS_11643_1
 ,
CNS_11643_2
 ,
CNS_11643_3
 ,
CNS_11643_4
 ,
CNS_11643_5
 ,
CNS_11643_6
 ,
CNS_11643_7
 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE

744 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

745 ,
INVALID_STATE
 ,INVALID_STATE ,INVALID_STATE ,INVALID_STATE

749 
UCNV_TabËS‹s_2022


750 
	$g‘Key_2022
(
c
,
št32_t
* 
key
,št32_t* 
off£t
){

751 
št32_t
 
togo
;

752 
št32_t
 
low
 = 0;

753 
št32_t
 
hi
 = 
MAX_STATES_2022
;

754 
št32_t
 
Şdmid
=0;

756 
togo
 = 
nÜm®ize_esq_ch¬s_2022
[(
ušt8_t
)
c
];

757 if(
togo
 == 0) {

759 *
key
 = 0;

760 *
off£t
 = 0;

761  
INVALID_2022
;

763 
togo
 = (*
key
 << 5) +ogo;

765 
hi
 !ğ
low
) {

767 
št32_t
 
mid
 = (
hi
+
low
) >> 1;

769 ià(
mid
 =ğ
Şdmid
)

772 ià(
escSeqS‹TabË_Key_2022
[
mid
] > 
togo
){

773 
hi
 = 
mid
;

775 ià(
escSeqS‹TabË_Key_2022
[
mid
] < 
togo
){

776 
low
 = 
mid
;

779 *
key
 = 
togo
;

780 *
off£t
 = 
mid
;

781  (
UCNV_TabËS‹s_2022
)
escSeqS‹TabË_V®ue_2022
[
mid
];

783 
Şdmid
 = 
mid
;

787 *
key
 = 0;

788 *
off£t
 = 0;

789  
INVALID_2022
;

790 
	}
}

795 
	$chªgeS‹_2022
(
UCÚv”‹r
* 
_this
,

796 cÚ¡ ** 
sourû
,

797 cÚ¡ * 
sourûLim™
,

798 
V¬ŸÁ2022
 
v¬
,

799 
UE¼ÜCode
* 
”r
){

800 
UCNV_TabËS‹s_2022
 
v®ue
;

801 
UCÚv”‹rD©aISO2022
* 
myD©a2022
 = ((UCÚv”‹rD©aISO2022*)
_this
->
exŒaInfo
);

802 
ušt32_t
 
key
 = 
myD©a2022
->key;

803 
št32_t
 
off£t
 = 0;

804 
št8_t
 
š™ŸlToUL’gth
 = 
_this
->
toUL’gth
;

805 
c
;

807 
v®ue
 = 
VALID_NON_TERMINAL_2022
;

808 *
sourû
 < 
sourûLim™
) {

809 
c
 = *(*
sourû
)++;

810 
_this
->
toUBy‹s
[_this->
toUL’gth
++]=(
ušt8_t
)
c
;

811 
v®ue
 = 
	`g‘Key_2022
(
c
,(
št32_t
 *è&
key
, &
off£t
);

813 
v®ue
){

815 
VALID_NON_TERMINAL_2022
 :

819 
VALID_TERMINAL_2022
:

820 
key
 = 0;

821 
DONE
;

823 
INVALID_2022
:

824 
DONE
;

826 
VALID_MAYBE_TERMINAL_2022
:

827 #ifdeà
U_ENABLE_GENERIC_ISO_2022


829 if(
v¬
 =ğ
ISO_2022
) {

831 
_this
->
toUL’gth
 = 0;

836 
v®ue
 = 
VALID_NON_TERMINAL_2022
;

842 
v®ue
 = 
VALID_TERMINAL_2022
;

843 
key
 = 0;

844 
DONE
;

849 
DONE
:

850 
myD©a2022
->
key
 = key;

852 ià(
v®ue
 =ğ
VALID_NON_TERMINAL_2022
) {

855 } ià(
v®ue
 =ğ
INVALID_2022
 ) {

856 *
”r
 = 
U_ILLEGAL_ESCAPE_SEQUENCE
;

858 
v¬
){

859 #ifdeà
U_ENABLE_GENERIC_ISO_2022


860 
ISO_2022
:

862 cÚ¡ *
cho£nCÚv”‹rName
 = 
escSeqS‹TabË_ResuÉ_2022
[
off£t
];

863 if(
cho£nCÚv”‹rName
 =ğ
NULL
) {

865 *
”r
 = 
U_UNSUPPORTED_ESCAPE_SEQUENCE
;

866 
_this
->
toUC®lbackR—sÚ
 = 
UCNV_UNASSIGNED
;

870 
_this
->
mode
 = 
UCNV_SI
;

871 
	`uúv_şo£
(
myD©a2022
->
cu¼’tCÚv”‹r
);

872 
myD©a2022
->
cu¼’tCÚv”‹r
 = 
myUCÚv”‹r
 = 
	`uúv_İ’
(
cho£nCÚv”‹rName
, 
”r
);

873 if(
	`U_SUCCESS
(*
”r
)) {

874 
myUCÚv”‹r
->
äomCh¬E¼ÜBehaviour
 = 
UCNV_TO_U_CALLBACK_STOP
;

875 
_this
->
mode
 = 
UCNV_SO
;

880 
ISO_2022_JP
:

882 
S‹Enum
 
‹mpS‹
=(S‹Enum)
ÃxtS‹ToUnicodeJP
[
off£t
];

883 
‹mpS‹
) {

884 
INVALID_STATE
:

885 *
”r
 = 
U_UNSUPPORTED_ESCAPE_SEQUENCE
;

887 
SS2_STATE
:

888 if(
myD©a2022
->
toU2022S‹
.
cs
[2]!=0) {

889 if(
myD©a2022
->
toU2022S‹
.
g
<2) {

890 
myD©a2022
->
toU2022S‹
.
´evG
=myD©a2022->toU2022S‹.
g
;

892 
myD©a2022
->
toU2022S‹
.
g
=2;

895 *
”r
 = 
U_ILLEGAL_ESCAPE_SEQUENCE
;

899 
ISO8859_1
:

900 
ISO8859_7
:

901 if((
jpCh¬£tMasks
[
myD©a2022
->
v”siÚ
] & 
	`CSM
(
‹mpS‹
)) == 0) {

902 *
”r
 = 
U_UNSUPPORTED_ESCAPE_SEQUENCE
;

905 
myD©a2022
->
toU2022S‹
.
cs
[2]=(
št8_t
)
‹mpS‹
;

909 if((
jpCh¬£tMasks
[
myD©a2022
->
v”siÚ
] & 
	`CSM
(
‹mpS‹
)) == 0) {

910 *
”r
 = 
U_UNSUPPORTED_ESCAPE_SEQUENCE
;

913 
myD©a2022
->
toU2022S‹
.
cs
[0]=(
št8_t
)
‹mpS‹
;

919 
ISO_2022_CN
:

921 
S‹Enum
 
‹mpS‹
=(S‹Enum)
ÃxtS‹ToUnicodeCN
[
off£t
];

922 
‹mpS‹
) {

923 
INVALID_STATE
:

924 *
”r
 = 
U_UNSUPPORTED_ESCAPE_SEQUENCE
;

926 
SS2_STATE
:

927 if(
myD©a2022
->
toU2022S‹
.
cs
[2]!=0) {

928 if(
myD©a2022
->
toU2022S‹
.
g
<2) {

929 
myD©a2022
->
toU2022S‹
.
´evG
=myD©a2022->toU2022S‹.
g
;

931 
myD©a2022
->
toU2022S‹
.
g
=2;

934 *
”r
 = 
U_ILLEGAL_ESCAPE_SEQUENCE
;

937 
SS3_STATE
:

938 if(
myD©a2022
->
toU2022S‹
.
cs
[3]!=0) {

939 if(
myD©a2022
->
toU2022S‹
.
g
<2) {

940 
myD©a2022
->
toU2022S‹
.
´evG
=myD©a2022->toU2022S‹.
g
;

942 
myD©a2022
->
toU2022S‹
.
g
=3;

945 *
”r
 = 
U_ILLEGAL_ESCAPE_SEQUENCE
;

948 
ISO_IR_165
:

949 if(
myD©a2022
->
v”siÚ
==0) {

950 *
”r
 = 
U_UNSUPPORTED_ESCAPE_SEQUENCE
;

954 
GB2312_1
:

956 
CNS_11643_1
:

957 
myD©a2022
->
toU2022S‹
.
cs
[1]=(
št8_t
)
‹mpS‹
;

959 
CNS_11643_2
:

960 
myD©a2022
->
toU2022S‹
.
cs
[2]=(
št8_t
)
‹mpS‹
;

964 if(
myD©a2022
->
v”siÚ
==0) {

965 *
”r
 = 
U_UNSUPPORTED_ESCAPE_SEQUENCE
;

967 
myD©a2022
->
toU2022S‹
.
cs
[3]=(
št8_t
)
‹mpS‹
;

973 
ISO_2022_KR
:

974 if(
off£t
==0x30){

977 *
”r
 = 
U_UNSUPPORTED_ESCAPE_SEQUENCE
;

982 *
”r
 = 
U_ILLEGAL_ESCAPE_SEQUENCE
;

986 if(
	`U_SUCCESS
(*
”r
)) {

987 
_this
->
toUL’gth
 = 0;

988 } if(*
”r
==
U_ILLEGAL_ESCAPE_SEQUENCE
) {

989 if(
_this
->
toUL’gth
>1) {

1002 
št8_t
 
backOutDi¡ªû
=
_this
->
toUL’gth
-1;

1003 
št8_t
 
by‹sFromThisBufãr
=
_this
->
toUL’gth
-
š™ŸlToUL’gth
;

1004 if(
backOutDi¡ªû
<=
by‹sFromThisBufãr
) {

1006 *
sourû
-=
backOutDi¡ªû
;

1009 
_this
->
´eToUL’gth
=(
št8_t
)(
by‹sFromThisBufãr
-
backOutDi¡ªû
);

1012 
	`u´v_memıy
(
_this
->
´eToU
, _this->
toUBy‹s
+1, -_this->
´eToUL’gth
);

1013 *
sourû
-=
by‹sFromThisBufãr
;

1015 
_this
->
toUL’gth
=1;

1017 } if(*
”r
==
U_UNSUPPORTED_ESCAPE_SEQUENCE
) {

1018 
_this
->
toUC®lbackR—sÚ
 = 
UCNV_UNASSIGNED
;

1020 
	}
}

1030 
U_INLINE
 const *

1031 
	$g‘EndOfBufãr_2022
(cÚ¡ ** 
sourû
,

1032 cÚ¡ * 
sourûLim™
,

1033 
UBoŞ
 
æush
){

1035 cÚ¡ * 
mySourû
 = *
sourû
;

1037 #ifdeà
U_ENABLE_GENERIC_ISO_2022


1038 ià(*
sourû
 >ğ
sourûLim™
)

1039  
sourûLim™
;

1043 ià(*
mySourû
 =ğ
ESC_2022
){

1044 
št8_t
 
i
;

1045 
št32_t
 
key
 = 0;

1046 
št32_t
 
off£t
;

1047 
UCNV_TabËS‹s_2022
 
v®ue
 = 
VALID_NON_TERMINAL_2022
;

1055 
i
=0;

1056 (
mySourû
+
i
 < 
sourûLim™
)&&(
v®ue
 =ğ
VALID_NON_TERMINAL_2022
);

1057 
i
++) {

1058 
v®ue
 = 
	`g‘Key_2022
(*(
mySourû
+
i
), &
key
, &
off£t
);

1060 ià(
v®ue
 > 0 || *
mySourû
==
ESC_2022
)

1061  
mySourû
;

1063 ià((
v®ue
 =ğ
VALID_NON_TERMINAL_2022
)&&(!
æush
) )

1064  
sourûLim™
;

1066 }++
mySourû
 < 
sourûLim™
);

1068  
sourûLim™
;

1070 
mySourû
 < 
sourûLim™
 && *mySourû !ğ
ESC_2022
) {

1071 ++
mySourû
;

1073  
mySourû
;

1075 
	}
}

1082 
U_INLINE
 
št32_t


1083 
	$MBCS_FROM_UCHAR32_ISO2022
(
UCÚv”‹rSh¬edD©a
* 
sh¬edD©a
,

1084 
UCh¬32
 
c
,

1085 
ušt32_t
* 
v®ue
,

1086 
UBoŞ
 
u£F®lback
,

1087 
ouutTy³
)

1089 cÚ¡ 
št32_t
 *
cx
;

1090 cÚ¡ 
ušt16_t
 *
bË
;

1091 
ušt32_t
 
¡age2EÁry
;

1092 
ušt32_t
 
myV®ue
;

1093 
št32_t
 
Ëngth
;

1094 cÚ¡ 
ušt8_t
 *
p
;

1101 if(
c
<0x10000 || (
sh¬edD©a
->
mbcs
.
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
)) {

1102 
bË
=
sh¬edD©a
->
mbcs
.
äomUnicodeTabË
;

1103 
¡age2EÁry
=
	`MBCS_STAGE_2_FROM_U
(
bË
, 
c
);

1105 if(
ouutTy³
==
MBCS_OUTPUT_2
){

1106 
myV®ue
=
	`MBCS_VALUE_2_FROM_STAGE_2
(
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
, 
¡age2EÁry
, 
c
);

1107 if(
myV®ue
<=0xff) {

1108 
Ëngth
=1;

1110 
Ëngth
=2;

1113 
p
=
	`MBCS_POINTER_3_FROM_STAGE_2
(
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
, 
¡age2EÁry
, 
c
);

1114 
myV®ue
=((
ušt32_t
)*
p
<<16)|((uint32_t)p[1]<<8)|p[2];

1115 if(
myV®ue
<=0xff) {

1116 
Ëngth
=1;

1117 } if(
myV®ue
<=0xffff) {

1118 
Ëngth
=2;

1120 
Ëngth
=3;

1124 if((
¡age2EÁry
&(1<<(16+(
c
&0xf))))!=0) {

1126 *
v®ue
=
myV®ue
;

1127  
Ëngth
;

1128 } if(
	`FROM_U_USE_FALLBACK
(
u£F®lback
, 
c
è&& 
myV®ue
!=0) {

1134 *
v®ue
=
myV®ue
;

1135  -
Ëngth
;

1139 
cx
=
sh¬edD©a
->
mbcs
.
extIndexes
;

1140 if(
cx
!=
NULL
) {

1141  
	`uúv_extSim¶eM©chFromU
(
cx
, 
c
, 
v®ue
, 
u£F®lback
);

1146 
	}
}

1153 
U_INLINE
 
št32_t


1154 
	$MBCS_SINGLE_FROM_UCHAR32
(
UCÚv”‹rSh¬edD©a
* 
sh¬edD©a
,

1155 
UCh¬32
 
c
,

1156 
ušt32_t
* 
»tv®
,

1157 
UBoŞ
 
u£F®lback
)

1159 cÚ¡ 
ušt16_t
 *
bË
;

1160 
št32_t
 
v®ue
;

1162 if(
c
>=0x10000 && !(
sh¬edD©a
->
mbcs
.
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
)) {

1166 
bË
=
sh¬edD©a
->
mbcs
.
äomUnicodeTabË
;

1168 
v®ue
=
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, (
ušt16_t
 *)
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
, 
c
);

1170 *
»tv®
=(
ušt32_t
)(
v®ue
&0xff);

1171 if(
v®ue
>=0xf00) {

1173 } if(
u£F®lback
 ? 
v®ue
>=0x800 : value>=0xc00) {

1178 
	}
}

1186 
U_INLINE
 
ušt32_t


1187 
	$_2022FromGR94DBCS
(
ušt32_t
 
v®ue
) {

1188 ifĞ(
ušt16_t
)(
v®ue
 - 0xa1a1) <= (0xfefe - 0xa1a1) &&

1189 (
ušt8_t
)(
v®ue
 - 0xa1) <= (0xfe - 0xa1)

1191  
v®ue
 - 0x8080;

1195 
	}
}

1203 
U_INLINE
 
ušt32_t


1204 
	$_2022ToGR94DBCS
(
ušt32_t
 
v®ue
) {

1205 
ušt32_t
 
»tuºV®ue
 = 
v®ue
 + 0x8080;

1206 ifĞ(
ušt16_t
)(
»tuºV®ue
 - 0xa1a1) <= (0xfefe - 0xa1a1) &&

1207 (
ušt8_t
)(
»tuºV®ue
 - 0xa1) <= (0xfe - 0xa1)) {

1208  
»tuºV®ue
;

1210  
v®ue
;

1212 
	}
}

1215 #ifdeà
U_ENABLE_GENERIC_ISO_2022


1224 
	$T_UCÚv”‹r_toUnicode_ISO_2022_OFFSETS_LOGIC
(
UCÚv”‹rToUnicodeArgs
* 
¬gs
,

1225 
UE¼ÜCode
* 
”r
){

1226 cÚ¡ * 
mySourûLim™
, *
»®SourûLim™
;

1227 cÚ¡ * 
sourûS¹
;

1228 cÚ¡ 
UCh¬
* 
myT¬g‘S¹
;

1229 
UCÚv”‹r
* 
§veThis
;

1230 
UCÚv”‹rD©aISO2022
* 
myD©a
;

1231 
št8_t
 
Ëngth
;

1233 
§veThis
 = 
¬gs
->
cÚv”‹r
;

1234 
myD©a
=((
UCÚv”‹rD©aISO2022
*)(
§veThis
->
exŒaInfo
));

1236 
»®SourûLim™
 = 
¬gs
->
sourûLim™
;

1237 
¬gs
->
sourû
 < 
»®SourûLim™
) {

1238 if(
myD©a
->
key
 == 0) {

1240 
mySourûLim™
 = 
	`g‘EndOfBufãr_2022
(&(
¬gs
->
sourû
), 
»®SourûLim™
,‡rgs->
æush
);

1242 if(
¬gs
->
sourû
 < 
mySourûLim™
) {

1243 if(
myD©a
->
cu¼’tCÚv”‹r
==
NULL
) {

1244 
myD©a
->
cu¼’tCÚv”‹r
 = 
	`uúv_İ’
("ASCII",
”r
);

1245 if(
	`U_FAILURE
(*
”r
)){

1249 
myD©a
->
cu¼’tCÚv”‹r
->
äomCh¬E¼ÜBehaviour
 = 
UCNV_TO_U_CALLBACK_STOP
;

1250 
§veThis
->
mode
 = 
UCNV_SO
;

1254 
myD©a
->
isFœ¡Bufãr
=
FALSE
;

1255 
sourûS¹
 = 
¬gs
->
sourû
;

1256 
myT¬g‘S¹
 = 
¬gs
->
rg‘
;

1257 
¬gs
->
cÚv”‹r
 = 
myD©a
->
cu¼’tCÚv”‹r
;

1258 
	`uúv_toUnicode
(
¬gs
->
cÚv”‹r
,

1259 &
¬gs
->
rg‘
,

1260 
¬gs
->
rg‘Lim™
,

1261 &
¬gs
->
sourû
,

1262 
mySourûLim™
,

1263 
¬gs
->
off£ts
,

1264 (
UBoŞ
)(
¬gs
->
æush
 && 
mySourûLim™
 =ğ
»®SourûLim™
),

1265 
”r
);

1266 
¬gs
->
cÚv”‹r
 = 
§veThis
;

1268 ià(*
”r
 =ğ
U_BUFFER_OVERFLOW_ERROR
) {

1270 
Ëngth
 = 
§veThis
->
UCh¬E¼ÜBufãrL’gth
 = 
myD©a
->
cu¼’tCÚv”‹r
->UCharErrorBufferLength;

1271 
myD©a
->
cu¼’tCÚv”‹r
->
UCh¬E¼ÜBufãrL’gth
 = 0;

1272 if(
Ëngth
 > 0) {

1273 
	`u´v_memıy
(
§veThis
->
UCh¬E¼ÜBufãr
,

1274 
myD©a
->
cu¼’tCÚv”‹r
->
UCh¬E¼ÜBufãr
,

1275 
Ëngth
*
U_SIZEOF_UCHAR
);

1289 ià(
	`U_FAILURE
(*
”r
) ||

1290 (
¬gs
->
sourû
 =ğ
»®SourûLim™
) ||

1291 (
¬gs
->
off£ts
 !ğ
NULL
 && (¬gs->
rg‘
 !ğ
myT¬g‘S¹
 ||‡rgs->
sourû
 !ğ
sourûS¹
) ||

1292 (
mySourûLim™
 < 
»®SourûLim™
 && 
myD©a
->
cu¼’tCÚv”‹r
->
toUL’gth
 > 0))

1295 if(
	`U_FAILURE
(*
”r
)) {

1296 
Ëngth
 = 
§veThis
->
šv®idCh¬L’gth
 = 
myD©a
->
cu¼’tCÚv”‹r
->invalidCharLength;

1297 if(
Ëngth
 > 0) {

1298 
	`u´v_memıy
(
§veThis
->
šv®idCh¬Bufãr
, 
myD©a
->
cu¼’tCÚv”‹r
->šv®idCh¬Bufãr, 
Ëngth
);

1301 
Ëngth
 = 
§veThis
->
toUL’gth
 = 
myD©a
->
cu¼’tCÚv”‹r
->toULength;

1302 if(
Ëngth
 > 0) {

1303 
	`u´v_memıy
(
§veThis
->
toUBy‹s
, 
myD©a
->
cu¼’tCÚv”‹r
->toUBy‹s, 
Ëngth
);

1304 if(
¬gs
->
sourû
 < 
mySourûLim™
) {

1305 *
”r
 = 
U_TRUNCATED_CHAR_FOUND
;

1314 
sourûS¹
 = 
¬gs
->
sourû
;

1315 
	`chªgeS‹_2022
(
¬gs
->
cÚv”‹r
,

1316 &(
¬gs
->
sourû
),

1317 
»®SourûLim™
,

1318 
ISO_2022
,

1319 
”r
);

1320 ià(
	`U_FAILURE
(*
”r
è|| (
¬gs
->
sourû
 !ğ
sourûS¹
 &&‡rgs->
off£ts
 !ğ
NULL
)) {

1325 
	}
}

1333 
	$toUnicodeC®lback
(
UCÚv”‹r
 *
úv
,

1334 cÚ¡ 
ušt32_t
 
sourûCh¬
, cÚ¡ ušt32_ˆ
rg‘UniCh¬
,

1335 
UE¼ÜCode
* 
”r
){

1336 if(
sourûCh¬
>0xff){

1337 
úv
->
toUBy‹s
[0] = (
ušt8_t
)(
sourûCh¬
>>8);

1338 
úv
->
toUBy‹s
[1] = (
ušt8_t
)
sourûCh¬
;

1339 
úv
->
toUL’gth
 = 2;

1342 
úv
->
toUBy‹s
[0] =(è
sourûCh¬
;

1343 
úv
->
toUL’gth
 = 1;

1346 if(
rg‘UniCh¬
 =ğ(
missšgCh¬M¬k”
-1 )){

1347 *
”r
 = 
U_INVALID_CHAR_FOUND
;

1350 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

1352 
	}
}

1397 cÚ¡ 
S‹Enum
 
	gjpCh¬£tP»f
[]={

1398 
ASCII
,

1399 
JISX201
,

1400 
ISO8859_1
,

1401 
ISO8859_7
,

1402 
JISX208
,

1403 
JISX212
,

1404 
GB2312
,

1405 
KSC5601
,

1406 
HWKANA_7BIT


1413 cÚ¡ 
	gescSeqCh¬s
[][6] ={

1425 cÚ¡ 
št8_t
 
	gescSeqCh¬sL’
[] ={

1455 
U_INLINE
 
ušt32_t


1456 
	$jisx201ToU
(
ušt32_t
 
v®ue
) {

1457 if(
v®ue
 < 0x5c) {

1458  
v®ue
;

1459 } if(
v®ue
 == 0x5c) {

1461 } if(
v®ue
 == 0x7e) {

1464  
v®ue
;

1466 
	}
}

1469 
U_INLINE
 
ušt32_t


1470 
	$jisx201FromU
(
ušt32_t
 
v®ue
) {

1471 if(
v®ue
<=0x7f) {

1472 if(
v®ue
!=0x5c && value!=0x7e) {

1473  
v®ue
;

1475 } if(
v®ue
==0xa5) {

1477 } if(
v®ue
==0x203e) {

1481 
	}
}

1488 
U_INLINE
 
ušt32_t


1489 
	$_2022FromSJIS
(
ušt32_t
 
v®ue
) {

1490 
ušt8_t
 
Œa
;

1492 if(
v®ue
 > 0xEFFC) {

1496 
Œa
 = (
ušt8_t
)
v®ue
;

1498 
v®ue
 &= 0xff00;

1499 if(
v®ue
 <= 0x9f00) {

1500 
v®ue
 -= 0x7000;

1502 
v®ue
 -= 0xb000;

1504 
v®ue
 <<= 1;

1506 if(
Œa
 <= 0x9e) {

1507 
v®ue
 -= 0x100;

1508 if(
Œa
 <= 0x7e) {

1509 
v®ue
 |ğ
Œa
 - 0x1f;

1511 
v®ue
 |ğ
Œa
 - 0x20;

1514 
v®ue
 |ğ
Œa
 - 0x7e;

1516  
v®ue
;

1517 
	}
}

1526 
U_INLINE
 

1527 
	$_2022ToSJIS
(
ušt8_t
 
c1
, ušt8_ˆ
c2
, 
by‹s
[2]) {

1528 if(
c1
&1) {

1529 ++
c1
;

1530 if(
c2
 <= 0x5f) {

1531 
c2
 += 0x1f;

1532 } if(
c2
 <= 0x7e) {

1533 
c2
 += 0x20;

1535 
c2
 = 0;

1538 if((
ušt8_t
)(
c2
-0x21) <= ((0x7e)-0x21)) {

1539 
c2
 += 0x7e;

1541 
c2
 = 0;

1544 
c1
 >>= 1;

1545 if(
c1
 <= 0x2f) {

1546 
c1
 += 0x70;

1547 } if(
c1
 <= 0x3f) {

1548 
c1
 += 0xb0;

1550 
c1
 = 0;

1552 
by‹s
[0] = ()
c1
;

1553 
by‹s
[1] = ()
c2
;

1554 
	}
}

1563 cÚ¡ 
ušt16_t
 
	ghwkªa_fb
[
HWKANA_END
 - 
HWKANA_START
 + 1] = {

1630 
	$UCÚv”‹r_äomUnicode_ISO_2022_JP_OFFSETS_LOGIC
(
UCÚv”‹rFromUnicodeArgs
* 
¬gs
, 
UE¼ÜCode
* 
”r
) {

1631 
UCÚv”‹r
 *
úv
 = 
¬gs
->
cÚv”‹r
;

1632 
UCÚv”‹rD©aISO2022
 *
cÚv”‹rD©a
;

1633 
ISO2022S‹
 *
pFromU2022S‹
;

1634 
ušt8_t
 *
rg‘
 = (ušt8_ˆ*è
¬gs
->target;

1635 cÚ¡ 
ušt8_t
 *
rg‘Lim™
 = (cÚ¡ ušt8_ˆ*è
¬gs
->targetLimit;

1636 cÚ¡ 
UCh¬
* 
sourû
 = 
¬gs
->source;

1637 cÚ¡ 
UCh¬
* 
sourûLim™
 = 
¬gs
->sourceLimit;

1638 
št32_t
* 
off£ts
 = 
¬gs
->offsets;

1639 
UCh¬32
 
sourûCh¬
;

1640 
bufãr
[8];

1641 
št32_t
 
Ën
, 
outL’
;

1642 
št8_t
 
choiûs
[10];

1643 
št32_t
 
choiûCouÁ
;

1644 
ušt32_t
 
rg‘V®ue
 = 0;

1645 
UBoŞ
 
u£F®lback
;

1647 
št32_t
 
i
;

1648 
št8_t
 
cs
, 
g
;

1651 
cÚv”‹rD©a
 = (
UCÚv”‹rD©aISO2022
*)
úv
->
exŒaInfo
;

1652 
pFromU2022S‹
 = &
cÚv”‹rD©a
->
äomU2022S‹
;

1654 
choiûCouÁ
 = 0;

1657 if((
sourûCh¬
 = 
úv
->
äomUCh¬32
)!=0 && 
rg‘
< 
rg‘Lim™
) {

1658 
g‘T¿
;

1661 
sourû
 < 
sourûLim™
) {

1662 if(
rg‘
 < 
rg‘Lim™
) {

1664 
sourûCh¬
 = *(
sourû
++);

1666 if(
	`UTF_IS_SURROGATE
(
sourûCh¬
)) {

1667 if(
	`UTF_IS_SURROGATE_FIRST
(
sourûCh¬
)) {

1668 
g‘T¿
:

1670 if(
sourû
 < 
sourûLim™
) {

1672 
UCh¬
 
Œa
=(UCh¬è*
sourû
;

1673 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

1674 
sourû
++;

1675 
sourûCh¬
=
	`UTF16_GET_PAIR_VALUE
(sourûCh¬, 
Œa
);

1676 
úv
->
äomUCh¬32
=0x00;

1682 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

1683 
úv
->
äomUCh¬32
=
sourûCh¬
;

1688 
úv
->
äomUCh¬32
=
sourûCh¬
;

1694 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

1695 
úv
->
äomUCh¬32
=
sourûCh¬
;

1701 if(
	`IS_2022_CONTROL
(
sourûCh¬
)) {

1703 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

1704 
úv
->
äomUCh¬32
=
sourûCh¬
;

1710 if(
choiûCouÁ
 == 0) {

1711 
ušt16_t
 
csm
;

1717 
csm
 = 
jpCh¬£tMasks
[
cÚv”‹rD©a
->
v”siÚ
];

1718 
choiûCouÁ
 = 0;

1721 if(
cÚv”‹rD©a
->
v”siÚ
 == 3 || converterData->version == 4) {

1722 
choiûs
[
choiûCouÁ
++] = (
št8_t
)
HWKANA_7BIT
;

1725 
csm
 &ğ~
	`CSM
(
HWKANA_7BIT
);

1728 
choiûs
[
choiûCouÁ
++] = 
cs
 = 
pFromU2022S‹
->cs[0];

1729 
csm
 &ğ~
	`CSM
(
cs
);

1732 if((
cs
 = 
pFromU2022S‹
->cs[2]) != 0) {

1733 
choiûs
[
choiûCouÁ
++] = 
cs
;

1734 
csm
 &ğ~
	`CSM
(
cs
);

1738 
i
 = 0; i < 
	`LENGTHOF
(
jpCh¬£tP»f
); ++i) {

1739 
cs
 = (
št8_t
)
jpCh¬£tP»f
[
i
];

1740 if(
	`CSM
(
cs
è& 
csm
) {

1741 
choiûs
[
choiûCouÁ
++] = 
cs
;

1742 
csm
 &ğ~
	`CSM
(
cs
);

1747 
cs
 = 
g
 = 0;

1753 
Ën
 = 0;

1760 
u£F®lback
 = 
úv
->useFallback;

1762 
i
 = 0; i < 
choiûCouÁ
 && 
Ën
 <= 0; ++i) {

1763 
ušt32_t
 
v®ue
;

1764 
št32_t
 
Ën2
;

1765 
št8_t
 
cs0
 = 
choiûs
[
i
];

1766 
cs0
) {

1767 
ASCII
:

1768 if(
sourûCh¬
 <= 0x7f) {

1769 
rg‘V®ue
 = (
ušt32_t
)
sourûCh¬
;

1770 
Ën
 = 1;

1771 
cs
 = 
cs0
;

1772 
g
 = 0;

1775 
ISO8859_1
:

1776 if(
GR96_START
 <ğ
sourûCh¬
 && sourûCh¬ <ğ
GR96_END
) {

1777 
rg‘V®ue
 = (
ušt32_t
)
sourûCh¬
 - 0x80;

1778 
Ën
 = 1;

1779 
cs
 = 
cs0
;

1780 
g
 = 2;

1783 
HWKANA_7BIT
:

1784 if((
ušt32_t
)(
sourûCh¬
 - 
HWKANA_START
è<ğ(
HWKANA_END
 - HWKANA_START)) {

1785 if(
cÚv”‹rD©a
->
v”siÚ
==3) {

1788 
rg‘V®ue
 = (
ušt32_t
)(
sourûCh¬
 - (
HWKANA_START
 - 0x21));

1789 
Ën
 = 1;

1790 
pFromU2022S‹
->
cs
[1] = c ğ
cs0
;

1791 
g
 = 1;

1792 } if(
cÚv”‹rD©a
->
v”siÚ
==4) {

1795 
rg‘V®ue
 = (
ušt32_t
)(
sourûCh¬
 - (
HWKANA_START
 - 0xa1));

1796 
Ën
 = 1;

1798 
cs
 = 
pFromU2022S‹
->cs[0];

1799 if(
	`IS_JP_DBCS
(
cs
)) {

1801 
cs
 = (
št8_t
)
JISX201
;

1804 
g
 = 0;

1809 
JISX201
:

1811 
v®ue
 = 
	`jisx201FromU
(
sourûCh¬
);

1812 if(
v®ue
 <= 0x7f) {

1813 
rg‘V®ue
 = 
v®ue
;

1814 
Ën
 = 1;

1815 
cs
 = 
cs0
;

1816 
g
 = 0;

1817 
u£F®lback
 = 
FALSE
;

1820 
JISX208
:

1822 
Ën2
 = 
	`MBCS_FROM_UCHAR32_ISO2022
(

1823 
cÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
cs0
],

1824 
sourûCh¬
, &
v®ue
,

1825 
u£F®lback
, 
MBCS_OUTPUT_2
);

1826 if(
Ën2
 =ğ2 || (Ën2 =ğ-2 && 
Ën
 == 0)) {

1827 
v®ue
 = 
	`_2022FromSJIS
(value);

1828 if(
v®ue
 != 0) {

1829 
rg‘V®ue
 = 
v®ue
;

1830 
Ën
 = 
Ën2
;

1831 
cs
 = 
cs0
;

1832 
g
 = 0;

1833 
u£F®lback
 = 
FALSE
;

1835 } if(
Ën
 =ğ0 && 
u£F®lback
 &&

1836 (
ušt32_t
)(
sourûCh¬
 - 
HWKANA_START
è<ğ(
HWKANA_END
 - HWKANA_START)) {

1837 
rg‘V®ue
 = 
hwkªa_fb
[
sourûCh¬
 - 
HWKANA_START
];

1838 
Ën
 = -2;

1839 
cs
 = 
cs0
;

1840 
g
 = 0;

1841 
u£F®lback
 = 
FALSE
;

1844 
ISO8859_7
:

1846 
Ën2
 = 
	`MBCS_SINGLE_FROM_UCHAR32
(

1847 
cÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
cs0
],

1848 
sourûCh¬
, &
v®ue
,

1849 
u£F®lback
);

1850 if(
Ën2
 !ğ0 && !Ö’2 < 0 && 
Ën
 !ğ0è&& 
GR96_START
 <ğ
v®ue
 && v®u<ğ
GR96_END
) {

1851 
rg‘V®ue
 = 
v®ue
 - 0x80;

1852 
Ën
 = 
Ën2
;

1853 
cs
 = 
cs0
;

1854 
g
 = 2;

1855 
u£F®lback
 = 
FALSE
;

1860 
Ën2
 = 
	`MBCS_FROM_UCHAR32_ISO2022
(

1861 
cÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
cs0
],

1862 
sourûCh¬
, &
v®ue
,

1863 
u£F®lback
, 
MBCS_OUTPUT_2
);

1864 if(
Ën2
 =ğ2 || (Ën2 =ğ-2 && 
Ën
 == 0)) {

1865 if(
cs0
 =ğ
KSC5601
) {

1871 
v®ue
 = 
	`_2022FromGR94DBCS
(value);

1872 if(
v®ue
 == 0) {

1876 
rg‘V®ue
 = 
v®ue
;

1877 
Ën
 = 
Ën2
;

1878 
cs
 = 
cs0
;

1879 
g
 = 0;

1880 
u£F®lback
 = 
FALSE
;

1886 if(
Ën
 != 0) {

1887 if(
Ën
 < 0) {

1888 
Ën
 = -len;

1890 
outL’
 = 0;

1893 if(
pFromU2022S‹
->
g
 == 1 && g == 0) {

1894 
bufãr
[
outL’
++] = 
UCNV_SI
;

1895 
pFromU2022S‹
->
g
 = 0;

1899 if(
cs
 !ğ
pFromU2022S‹
->cs[
g
]) {

1900 
št32_t
 
escL’
 = 
escSeqCh¬sL’
[
cs
];

1901 
	`u´v_memıy
(
bufãr
 + 
outL’
, 
escSeqCh¬s
[
cs
], 
escL’
);

1902 
outL’
 +ğ
escL’
;

1903 
pFromU2022S‹
->
cs
[
g
] = cs;

1906 
choiûCouÁ
 = 0;

1910 if(
g
 !ğ
pFromU2022S‹
->g) {

1911 
g
) {

1914 
bufãr
[
outL’
++] = 
UCNV_SO
;

1915 
pFromU2022S‹
->
g
 = 1;

1918 
bufãr
[
outL’
++] = 0x1b;

1919 
bufãr
[
outL’
++] = 0x4e;

1926 if(
Ën
 == 1) {

1927 
bufãr
[
outL’
++] = ()
rg‘V®ue
;

1929 
bufãr
[
outL’
++] = ()(
rg‘V®ue
 >> 8);

1930 
bufãr
[
outL’
++] = ()
rg‘V®ue
;

1937 *
”r
 = 
U_INVALID_CHAR_FOUND
;

1938 
úv
->
äomUCh¬32
=
sourûCh¬
;

1942 if(
sourûCh¬
 =ğ
CR
 || sourûCh¬ =ğ
LF
) {

1944 
pFromU2022S‹
->
cs
[2] = 0;

1945 
choiûCouÁ
 = 0;

1949 if(
outL’
 == 1) {

1950 *
rg‘
++ = 
bufãr
[0];

1951 if(
off£ts
) {

1952 *
off£ts
++ = (
št32_t
)(
sourû
 - 
¬gs
->source - 1);

1954 } if(
outL’
 =ğ2 && (
rg‘
 + 2è<ğ
rg‘Lim™
) {

1955 *
rg‘
++ = 
bufãr
[0];

1956 *
rg‘
++ = 
bufãr
[1];

1957 if(
off£ts
) {

1958 
št32_t
 
sourûIndex
 = (št32_t)(
sourû
 - 
¬gs
->sourû - 
	`U16_LENGTH
(
sourûCh¬
));

1959 *
off£ts
++ = 
sourûIndex
;

1960 *
off£ts
++ = 
sourûIndex
;

1963 
	`äomUWr™eUIÁ8
(

1964 
úv
,

1965 
bufãr
, 
outL’
,

1966 &
rg‘
, (cÚ¡ *)
rg‘Lim™
,

1967 &
off£ts
, (
št32_t
)(
sourû
 - 
¬gs
->sourû - 
	`U16_LENGTH
(
sourûCh¬
)),

1968 
”r
);

1969 if(
	`U_FAILURE
(*
”r
)) {

1975 *
”r
 =
U_BUFFER_OVERFLOW_ERROR
;

1991 ifĞ
	`U_SUCCESS
(*
”r
) &&

1992 (
pFromU2022S‹
->
g
!=0 ||…FromU2022S‹->
cs
[0]!=
ASCII
) &&

1993 
¬gs
->
æush
 && 
sourû
>=
sourûLim™
 && 
úv
->
äomUCh¬32
==0

1995 
št32_t
 
sourûIndex
;

1997 
outL’
 = 0;

1999 if(
pFromU2022S‹
->
g
 != 0) {

2000 
bufãr
[
outL’
++] = 
UCNV_SI
;

2001 
pFromU2022S‹
->
g
 = 0;

2004 if(
pFromU2022S‹
->
cs
[0] !ğ
ASCII
) {

2005 
št32_t
 
escL’
 = 
escSeqCh¬sL’
[
ASCII
];

2006 
	`u´v_memıy
(
bufãr
 + 
outL’
, 
escSeqCh¬s
[
ASCII
], 
escL’
);

2007 
outL’
 +ğ
escL’
;

2008 
pFromU2022S‹
->
cs
[0] = (
št8_t
)
ASCII
;

2019 
sourûIndex
=(
št32_t
)(
sourû
-
¬gs
->source);

2020 if(
sourûIndex
>0) {

2021 --
sourûIndex
;

2022 ifĞ
	`U16_IS_TRAIL
(
¬gs
->
sourû
[
sourûIndex
]) &&

2023 (
sourûIndex
==0 || 
	`U16_IS_LEAD
(
¬gs
->
sourû
[sourceIndex-1]))

2025 --
sourûIndex
;

2028 
sourûIndex
=-1;

2031 
	`äomUWr™eUIÁ8
(

2032 
úv
,

2033 
bufãr
, 
outL’
,

2034 &
rg‘
, (cÚ¡ *)
rg‘Lim™
,

2035 &
off£ts
, 
sourûIndex
,

2036 
”r
);

2040 
¬gs
->
sourû
 = source;

2041 
¬gs
->
rg‘
 = (*)target;

2042 
	}
}

2047 
	$UCÚv”‹r_toUnicode_ISO_2022_JP_OFFSETS_LOGIC
(
UCÚv”‹rToUnicodeArgs
 *
¬gs
,

2048 
UE¼ÜCode
* 
”r
){

2049 
‹mpBuf
[2];

2050 cÚ¡ *
mySourû
 = (*è
¬gs
->
sourû
;

2051 
UCh¬
 *
myT¬g‘
 = 
¬gs
->
rg‘
;

2052 cÚ¡ *
mySourûLim™
 = 
¬gs
->
sourûLim™
;

2053 
ušt32_t
 
rg‘UniCh¬
 = 0x0000;

2054 
ušt32_t
 
mySourûCh¬
 = 0x0000;

2055 
ušt32_t
 
tmpSourûCh¬
 = 0x0000;

2056 
UCÚv”‹rD©aISO2022
* 
myD©a
;

2057 
ISO2022S‹
 *
pToU2022S‹
;

2058 
S‹Enum
 
cs
;

2060 
myD©a
=(
UCÚv”‹rD©aISO2022
*)(
¬gs
->
cÚv”‹r
->
exŒaInfo
);

2061 
pToU2022S‹
 = &
myD©a
->
toU2022S‹
;

2063 if(
myD©a
->
key
 != 0) {

2065 
esÿ³
;

2066 } if(
¬gs
->
cÚv”‹r
->
toUL’gth
 =ğ1 && 
mySourû
 < 
mySourûLim™
 && 
myT¬g‘
 <‡rgs->
rg‘Lim™
) {

2068 
mySourûCh¬
 = 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0];

2069 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 0;

2070 
cs
 = (
S‹Enum
)
pToU2022S‹
->cs[pToU2022S‹->
g
];

2071 
rg‘UniCh¬
 = 
missšgCh¬M¬k”
;

2072 
g‘T¿By‹
;

2075 
mySourû
 < 
mySourûLim™
){

2077 
rg‘UniCh¬
 =
missšgCh¬M¬k”
;

2079 if(
myT¬g‘
 < 
¬gs
->
rg‘Lim™
){

2081 
mySourûCh¬
ğ(è*
mySourû
++;

2083 
mySourûCh¬
) {

2084 
UCNV_SI
:

2085 if(
myD©a
->
v”siÚ
==3) {

2086 
pToU2022S‹
->
g
=0;

2090 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

2094 
UCNV_SO
:

2095 if(
myD©a
->
v”siÚ
==3) {

2097 
pToU2022S‹
->
cs
[1] = (
št8_t
)
HWKANA_7BIT
;

2098 
pToU2022S‹
->
g
=1;

2102 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

2106 
ESC_2022
:

2107 
mySourû
--;

2108 
esÿ³
:

2110 cÚ¡ * 
mySourûBefÜe
 = 
mySourû
;

2111 
št8_t
 
toUL’gthBefÜe
 = 
¬gs
->
cÚv”‹r
->
toUL’gth
;

2113 
	`chªgeS‹_2022
(
¬gs
->
cÚv”‹r
,&(
mySourû
),

2114 
mySourûLim™
, 
ISO_2022_JP
,
”r
);

2117 if(
myD©a
->
v”siÚ
==0 && myD©a->
key
==0 && 
	`U_SUCCESS
(*
”r
è&& myD©a->
isEm±ySegm’t
) {

2118 *
”r
 = 
U_ILLEGAL_ESCAPE_SEQUENCE
;

2119 
¬gs
->
cÚv”‹r
->
toUC®lbackR—sÚ
 = 
UCNV_IRREGULAR
;

2120 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
)(
toUL’gthBefÜe
 + (
mySourû
 - 
mySourûBefÜe
));

2125 if(
	`U_FAILURE
(*
”r
)){

2126 
¬gs
->
rg‘
 = 
myT¬g‘
;

2127 
¬gs
->
sourû
 = 
mySourû
;

2128 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

2132 if(
myD©a
->
key
==0) {

2133 
myD©a
->
isEm±ySegm’t
 = 
TRUE
;

2139 
CR
:

2141 
LF
:

2143 if((
S‹Enum
)
pToU2022S‹
->
cs
[0] !ğ
ASCII
 && (S‹EnumíToU2022S‹->cs[0] !ğ
JISX201
) {

2144 
pToU2022S‹
->
cs
[0] = (
št8_t
)
ASCII
;

2146 
pToU2022S‹
->
cs
[2] = 0;

2147 
pToU2022S‹
->
g
 = 0;

2151 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

2152 
cs
 = (
S‹Enum
)
pToU2022S‹
->cs[pToU2022S‹->
g
];

2153 ifĞ(
ušt8_t
)(
mySourûCh¬
 - 0xa1è<ğ(0xdà- 0xa1è&& 
myD©a
->
v”siÚ
==4 &&

2154 !
	`IS_JP_DBCS
(
cs
)

2157 
rg‘UniCh¬
 = 
mySourûCh¬
 + (
HWKANA_START
 - 0xa1);

2160 if(
pToU2022S‹
->
g
 >= 2) {

2161 
pToU2022S‹
->
g
õToU2022S‹->
´evG
;

2163 } 
cs
) {

2164 
ASCII
:

2165 if(
mySourûCh¬
 <= 0x7f) {

2166 
rg‘UniCh¬
 = 
mySourûCh¬
;

2169 
ISO8859_1
:

2170 if(
mySourûCh¬
 <= 0x7f) {

2171 
rg‘UniCh¬
 = 
mySourûCh¬
 + 0x80;

2174 
pToU2022S‹
->
g
õToU2022S‹->
´evG
;

2176 
ISO8859_7
:

2177 if(
mySourûCh¬
 <= 0x7f) {

2179 
rg‘UniCh¬
 =

2180 
	`_MBCS_SINGLE_SIMPLE_GET_NEXT_BMP
(

2181 
myD©a
->
myCÚv”‹rA¼ay
[
cs
],

2182 
mySourûCh¬
 + 0x80);

2185 
pToU2022S‹
->
g
õToU2022S‹->
´evG
;

2187 
JISX201
:

2188 if(
mySourûCh¬
 <= 0x7f) {

2189 
rg‘UniCh¬
 = 
	`jisx201ToU
(
mySourûCh¬
);

2192 
HWKANA_7BIT
:

2193 if((
ušt8_t
)(
mySourûCh¬
 - 0x21) <= (0x5f - 0x21)) {

2195 
rg‘UniCh¬
 = 
mySourûCh¬
 + (
HWKANA_START
 - 0x21);

2200 if(
mySourû
 < 
mySourûLim™
) {

2201 
ËadIsOk
, 
ŒaIsOk
;

2202 
ušt8_t
 
ŒaBy‹
;

2203 
g‘T¿By‹
:

2204 
ŒaBy‹
 = (
ušt8_t
)*
mySourû
;

2215 
ËadIsOk
 = (
ušt8_t
)(
mySourûCh¬
 - 0x21) <= (0x7e - 0x21);

2216 
ŒaIsOk
 = (
ušt8_t
)(
ŒaBy‹
 - 0x21) <= (0x7e - 0x21);

2217 ià(
ËadIsOk
 && 
ŒaIsOk
) {

2218 ++
mySourû
;

2219 
tmpSourûCh¬
 = (
mySourûCh¬
 << 8è| 
ŒaBy‹
;

2220 if(
cs
 =ğ
JISX208
) {

2221 
	`_2022ToSJIS
((
ušt8_t
)
mySourûCh¬
, 
ŒaBy‹
, 
‹mpBuf
);

2222 
mySourûCh¬
 = 
tmpSourûCh¬
;

2225 
mySourûCh¬
 = 
tmpSourûCh¬
;

2226 ià(
cs
 =ğ
KSC5601
) {

2227 
tmpSourûCh¬
 += 0x8080;

2229 
‹mpBuf
[0] = ()(
tmpSourûCh¬
 >> 8);

2230 
‹mpBuf
[1] = ()(
tmpSourûCh¬
);

2232 
rg‘UniCh¬
 = 
	`uúv_MBCSSim¶eG‘NextUCh¬
(
myD©a
->
myCÚv”‹rA¼ay
[
cs
], 
‹mpBuf
, 2, 
FALSE
);

2233 } ià(!(
ŒaIsOk
 || 
	`IS_2022_CONTROL
(
ŒaBy‹
))) {

2235 ++
mySourû
;

2237 
mySourûCh¬
 = 0x10000 | (mySourûCh¬ << 8è| 
ŒaBy‹
;

2240 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0] = (
ušt8_t
)
mySourûCh¬
;

2241 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 1;

2242 
’dloİ
;

2247 if(
rg‘UniCh¬
 < (
missšgCh¬M¬k”
-1 )){

2248 if(
¬gs
->
off£ts
){

2249 
¬gs
->
off£ts
[
myT¬g‘
 -‡rgs->
rg‘
] = (
št32_t
)(
mySourû
 -‡rgs->
sourû
 - (
mySourûCh¬
 <= 0xff ? 1 : 2));

2251 *(
myT¬g‘
++)=(
UCh¬
)
rg‘UniCh¬
;

2253 if(
rg‘UniCh¬
 > 
missšgCh¬M¬k”
){

2255 
rg‘UniCh¬
-=0x0010000;

2256 *
myT¬g‘
 = (
UCh¬
)(0xd800+(UCh¬)(
rg‘UniCh¬
>>10));

2257 if(
¬gs
->
off£ts
){

2258 
¬gs
->
off£ts
[
myT¬g‘
 -‡rgs->
rg‘
] = (
št32_t
)(
mySourû
 -‡rgs->
sourû
 - (
mySourûCh¬
 <= 0xff ? 1 : 2));

2260 ++
myT¬g‘
;

2261 if(
myT¬g‘
< 
¬gs
->
rg‘Lim™
){

2262 *
myT¬g‘
 = (
UCh¬
)(0xdc00+(UCh¬)(
rg‘UniCh¬
&0x3ff));

2263 if(
¬gs
->
off£ts
){

2264 
¬gs
->
off£ts
[
myT¬g‘
 -‡rgs->
rg‘
] = (
št32_t
)(
mySourû
 -‡rgs->
sourû
 - (
mySourûCh¬
 <= 0xff ? 1 : 2));

2266 ++
myT¬g‘
;

2268 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãr
[¬gs->cÚv”‹r->
UCh¬E¼ÜBufãrL’gth
++]=

2269 (
UCh¬
)(0xdc00+(UCh¬)(
rg‘UniCh¬
&0x3ff));

2275 
	`toUnicodeC®lback
(
¬gs
->
cÚv”‹r
,
mySourûCh¬
,
rg‘UniCh¬
,
”r
);

2280 *
”r
 =
U_BUFFER_OVERFLOW_ERROR
;

2284 
’dloİ
:

2285 
¬gs
->
rg‘
 = 
myT¬g‘
;

2286 
¬gs
->
sourû
 = 
mySourû
;

2287 
	}
}

2299 
	$UCÚv”‹r_äomUnicode_ISO_2022_KR_OFFSETS_LOGIC_IBM
(
UCÚv”‹rFromUnicodeArgs
* 
¬gs
, 
UE¼ÜCode
* 
”r
){

2301 
UCÚv”‹r
* 
§veCÚv
 = 
¬gs
->
cÚv”‹r
;

2302 
UCÚv”‹rD©aISO2022
 *
myCÚv”‹rD©a
=(UCÚv”‹rD©aISO2022*)
§veCÚv
->
exŒaInfo
;

2303 
¬gs
->
cÚv”‹r
=
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
;

2305 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
äomUCh¬32
 = 
§veCÚv
->fromUChar32;

2306 
	`uúv_MBCSFromUnicodeW™hOff£ts
(
¬gs
,
”r
);

2307 
§veCÚv
->
äomUCh¬32
 = 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->fromUChar32;

2309 if(*
”r
 =ğ
U_BUFFER_OVERFLOW_ERROR
) {

2310 if(
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
ch¬E¼ÜBufãrL’gth
 > 0) {

2311 
	`u´v_memıy
(

2312 
§veCÚv
->
ch¬E¼ÜBufãr
,

2313 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
ch¬E¼ÜBufãr
,

2314 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
ch¬E¼ÜBufãrL’gth
);

2316 
§veCÚv
->
ch¬E¼ÜBufãrL’gth
 = 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->charErrorBufferLength;

2317 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
ch¬E¼ÜBufãrL’gth
 = 0;

2319 
¬gs
->
cÚv”‹r
=
§veCÚv
;

2320 
	}
}

2323 
	$UCÚv”‹r_äomUnicode_ISO_2022_KR_OFFSETS_LOGIC
(
UCÚv”‹rFromUnicodeArgs
* 
¬gs
, 
UE¼ÜCode
* 
”r
){

2325 cÚ¡ 
UCh¬
 *
sourû
 = 
¬gs
->source;

2326 cÚ¡ 
UCh¬
 *
sourûLim™
 = 
¬gs
->sourceLimit;

2327 *
rg‘
 = (*è
¬gs
->target;

2328 *
rg‘Lim™
 = (*è
¬gs
->targetLimit;

2329 
št32_t
* 
off£ts
 = 
¬gs
->offsets;

2330 
ušt32_t
 
rg‘By‹Un™
 = 0x0000;

2331 
UCh¬32
 
sourûCh¬
 = 0x0000;

2332 
UBoŞ
 
isT¬g‘By‹DBCS
;

2333 
UBoŞ
 
ŞdIsT¬g‘By‹DBCS
;

2334 
UCÚv”‹rD©aISO2022
 *
cÚv”‹rD©a
;

2335 
UCÚv”‹rSh¬edD©a
* 
sh¬edD©a
;

2336 
UBoŞ
 
u£F®lback
;

2337 
št32_t
 
Ëngth
 =0;

2339 
cÚv”‹rD©a
=(
UCÚv”‹rD©aISO2022
*)
¬gs
->
cÚv”‹r
->
exŒaInfo
;

2344 if(
cÚv”‹rD©a
->
v”siÚ
==1){

2345 
	`UCÚv”‹r_äomUnicode_ISO_2022_KR_OFFSETS_LOGIC_IBM
(
¬gs
,
”r
);

2350 
sh¬edD©a
 = 
cÚv”‹rD©a
->
cu¼’tCÚv”‹r
->sharedData;

2351 
u£F®lback
 = 
¬gs
->
cÚv”‹r
->useFallback;

2352 
isT¬g‘By‹DBCS
=(
UBoŞ
)
¬gs
->
cÚv”‹r
->
äomUnicodeStus
;

2353 
ŞdIsT¬g‘By‹DBCS
 = 
isT¬g‘By‹DBCS
;

2355 
isT¬g‘By‹DBCS
 = (
UBoŞ
è
¬gs
->
cÚv”‹r
->
äomUnicodeStus
;

2356 if((
sourûCh¬
 = 
¬gs
->
cÚv”‹r
->
äomUCh¬32
)!=0 && 
rg‘
 <
rg‘Lim™
) {

2357 
g‘T¿
;

2359 
sourû
 < 
sourûLim™
){

2361 
rg‘By‹Un™
 = 
missšgCh¬M¬k”
;

2363 if(
rg‘
 < (*è
¬gs
->
rg‘Lim™
){

2364 
sourûCh¬
 = *
sourû
++;

2367 if(
	`IS_2022_CONTROL
(
sourûCh¬
)) {

2369 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

2370 
¬gs
->
cÚv”‹r
->
äomUCh¬32
=
sourûCh¬
;

2374 
Ëngth
 = 
	`MBCS_FROM_UCHAR32_ISO2022
(
sh¬edD©a
,
sourûCh¬
,&
rg‘By‹Un™
,
u£F®lback
,
MBCS_OUTPUT_2
);

2375 if(
Ëngth
 < 0) {

2376 
Ëngth
 = -length;

2380 ifĞ
Ëngth
 > 2 ||†ength==0 ||

2381 (
Ëngth
 =ğ1 && 
rg‘By‹Un™
 > 0x7f) ||

2382 (
Ëngth
 == 2 &&

2383 ((
ušt16_t
)(
rg‘By‹Un™
 - 0xa1a1) > (0xfefe - 0xa1a1) ||

2384 (
ušt8_t
)(
rg‘By‹Un™
 - 0xa1) > (0xfe - 0xa1)))

2386 
rg‘By‹Un™
=
missšgCh¬M¬k”
;

2388 ià(
rg‘By‹Un™
 !ğ
missšgCh¬M¬k”
){

2390 
ŞdIsT¬g‘By‹DBCS
 = 
isT¬g‘By‹DBCS
;

2391 
isT¬g‘By‹DBCS
 = (
UBoŞ
)(
rg‘By‹Un™
>0x00FF);

2393 ià(
ŞdIsT¬g‘By‹DBCS
 !ğ
isT¬g‘By‹DBCS
 ){

2395 ià(
isT¬g‘By‹DBCS
)

2396 *
rg‘
++ = 
UCNV_SO
;

2398 *
rg‘
++ = 
UCNV_SI
;

2399 if(
off£ts
)

2400 *(
off£ts
++èğ(
št32_t
)(
sourû
 - 
¬gs
->source-1);

2403 if(
rg‘By‹Un™
 <= 0x00FF){

2404 ifĞ
rg‘
 < 
rg‘Lim™
){

2405 *(
rg‘
++èğ(è
rg‘By‹Un™
;

2406 if(
off£ts
){

2407 *(
off£ts
++èğ(
št32_t
)(
sourû
 - 
¬gs
->source-1);

2411 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = (è(
rg‘By‹Un™
);

2412 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

2415 if(
rg‘
 < 
rg‘Lim™
){

2416 *(
rg‘
++è=(è((
rg‘By‹Un™
>>8) -0x80);

2417 if(
off£ts
){

2418 *(
off£ts
++èğ(
št32_t
)(
sourû
 - 
¬gs
->source-1);

2420 if(
rg‘
 < 
rg‘Lim™
){

2421 *(
rg‘
++è=(è(
rg‘By‹Un™
 -0x80);

2422 if(
off£ts
){

2423 *(
off£ts
++èğ(
št32_t
)(
sourû
 - 
¬gs
->source-1);

2426 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = (è(
rg‘By‹Un™
 -0x80);

2427 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

2430 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = (è((
rg‘By‹Un™
>>8) -0x80);

2431 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = (è(
rg‘By‹Un™
-0x80);

2432 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

2443 if(
	`UTF_IS_SURROGATE
(
sourûCh¬
)) {

2444 if(
	`UTF_IS_SURROGATE_FIRST
(
sourûCh¬
)) {

2445 
g‘T¿
:

2447 if(
sourû
 < 
sourûLim™
) {

2449 
UCh¬
 
Œa
=(UCh¬è*
sourû
;

2450 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

2451 
sourû
++;

2452 
sourûCh¬
=
	`UTF16_GET_PAIR_VALUE
(sourûCh¬, 
Œa
);

2453 *
”r
 = 
U_INVALID_CHAR_FOUND
;

2459 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

2463 *
”r
 = 
U_ZERO_ERROR
;

2468 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

2472 *
”r
 = 
U_INVALID_CHAR_FOUND
;

2475 
¬gs
->
cÚv”‹r
->
äomUCh¬32
=
sourûCh¬
;

2480 *
”r
 =
U_BUFFER_OVERFLOW_ERROR
;

2496 ifĞ
	`U_SUCCESS
(*
”r
) &&

2497 
isT¬g‘By‹DBCS
 &&

2498 
¬gs
->
æush
 && 
sourû
>=
sourûLim™
 &&‡rgs->
cÚv”‹r
->
äomUCh¬32
==0

2500 
št32_t
 
sourûIndex
;

2503 
isT¬g‘By‹DBCS
=
FALSE
;

2513 
sourûIndex
=(
št32_t
)(
sourû
-
¬gs
->source);

2514 if(
sourûIndex
>0) {

2515 --
sourûIndex
;

2516 ifĞ
	`U16_IS_TRAIL
(
¬gs
->
sourû
[
sourûIndex
]) &&

2517 (
sourûIndex
==0 || 
	`U16_IS_LEAD
(
¬gs
->
sourû
[sourceIndex-1]))

2519 --
sourûIndex
;

2522 
sourûIndex
=-1;

2525 
	`äomUWr™eUIÁ8
(

2526 
¬gs
->
cÚv”‹r
,

2527 
SHIFT_IN_STR
, 1,

2528 &
rg‘
, (cÚ¡ *)
rg‘Lim™
,

2529 &
off£ts
, 
sourûIndex
,

2530 
”r
);

2534 
¬gs
->
sourû
 = source;

2535 
¬gs
->
rg‘
 = (*)target;

2536 
¬gs
->
cÚv”‹r
->
äomUnicodeStus
 = (
ušt32_t
)
isT¬g‘By‹DBCS
;

2537 
	}
}

2542 
	$UCÚv”‹r_toUnicode_ISO_2022_KR_OFFSETS_LOGIC_IBM
(
UCÚv”‹rToUnicodeArgs
 *
¬gs
,

2543 
UE¼ÜCode
* 
”r
){

2544 cÚ¡* 
sourûS¹
;

2545 
UCÚv”‹rD©aISO2022
* 
myD©a
=(UCÚv”‹rD©aISO2022*)(
¬gs
->
cÚv”‹r
->
exŒaInfo
);

2547 
UCÚv”‹rToUnicodeArgs
 
subArgs
;

2548 
št32_t
 
mšArgsSize
;

2551 if(
¬gs
->
size
<(
UCÚv”‹rToUnicodeArgs
)) {

2552 
mšArgsSize
 = 
¬gs
->
size
;

2554 
mšArgsSize
 = (
št32_t
)(
UCÚv”‹rToUnicodeArgs
);

2557 
	`u´v_memıy
(&
subArgs
, 
¬gs
, 
mšArgsSize
);

2558 
subArgs
.
size
 = (
ušt16_t
)
mšArgsSize
;

2559 
subArgs
.
cÚv”‹r
 = 
myD©a
->
cu¼’tCÚv”‹r
;

2562 
sourûS¹
 = 
¬gs
->
sourû
;

2564 if(
myD©a
->
key
 != 0) {

2566 
esÿ³
;

2569 
	`U_SUCCESS
(*
”r
è&& 
¬gs
->
sourû
 <‡rgs->
sourûLim™
) {

2571 
subArgs
.
sourû
 = 
¬gs
->source;

2572 
subArgs
.
sourûLim™
 = 
	`g‘EndOfBufãr_2022
(&(
¬gs
->
sourû
),‡rgs->sourûLim™,‡rgs->
æush
);

2573 if(
subArgs
.
sourû
 !ğsubArgs.
sourûLim™
) {

2581 if(
¬gs
->
cÚv”‹r
->
toUL’gth
 > 0) {

2582 
	`u´v_memıy
(
subArgs
.
cÚv”‹r
->
toUBy‹s
, 
¬gs
->cÚv”‹r->toUBy‹s,‡rgs->cÚv”‹r->
toUL’gth
);

2584 
subArgs
.
cÚv”‹r
->
toUL’gth
 = 
¬gs
->converter->toULength;

2591 
	`uúv_MBCSToUnicodeW™hOff£ts
(&
subArgs
, 
”r
);

2593 if(
¬gs
->
off£ts
 !ğ
NULL
 && 
sourûS¹
 !ğ¬gs->
sourû
) {

2595 
št32_t
 *
off£ts
 = 
¬gs
->offsets;

2596 
UCh¬
 *
rg‘
 = 
¬gs
->target;

2597 
št32_t
 
d–
 = (št32_t)(
¬gs
->
sourû
 - 
sourûS¹
);

2598 
rg‘
 < 
subArgs
.target) {

2599 if(*
off£ts
 >= 0) {

2600 *
off£ts
 +ğ
d–
;

2602 ++
off£ts
;

2603 ++
rg‘
;

2606 
¬gs
->
sourû
 = 
subArgs
.source;

2607 
¬gs
->
rg‘
 = 
subArgs
.target;

2608 
¬gs
->
off£ts
 = 
subArgs
.offsets;

2611 if(
subArgs
.
cÚv”‹r
->
toUL’gth
 > 0) {

2612 
	`u´v_memıy
(
¬gs
->
cÚv”‹r
->
toUBy‹s
, 
subArgs
.cÚv”‹r->toUBy‹s, subArgs.cÚv”‹r->
toUL’gth
);

2614 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 
subArgs
.converter->toULength;

2616 if(*
”r
 =ğ
U_BUFFER_OVERFLOW_ERROR
) {

2617 if(
subArgs
.
cÚv”‹r
->
UCh¬E¼ÜBufãrL’gth
 > 0) {

2618 
	`u´v_memıy
(
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãr
, 
subArgs
.converter->UCharErrorBuffer,

2619 
subArgs
.
cÚv”‹r
->
UCh¬E¼ÜBufãrL’gth
);

2621 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãrL’gth
=
subArgs
.converter->UCharErrorBufferLength;

2622 
subArgs
.
cÚv”‹r
->
UCh¬E¼ÜBufãrL’gth
 = 0;

2626 ià(
	`U_FAILURE
(*
”r
è|| (
¬gs
->
sourû
 =ğ¬gs->
sourûLim™
)) {

2630 
esÿ³
:

2631 
	`chªgeS‹_2022
(
¬gs
->
cÚv”‹r
,

2632 &(
¬gs
->
sourû
),

2633 
¬gs
->
sourûLim™
,

2634 
ISO_2022_KR
,

2635 
”r
);

2637 
	}
}

2640 
	$UCÚv”‹r_toUnicode_ISO_2022_KR_OFFSETS_LOGIC
(
UCÚv”‹rToUnicodeArgs
 *
¬gs
,

2641 
UE¼ÜCode
* 
”r
){

2642 
‹mpBuf
[2];

2643 cÚ¡ *
mySourû
 = ( *è
¬gs
->
sourû
;

2644 
UCh¬
 *
myT¬g‘
 = 
¬gs
->
rg‘
;

2645 cÚ¡ *
mySourûLim™
 = 
¬gs
->
sourûLim™
;

2646 
UCh¬32
 
rg‘UniCh¬
 = 0x0000;

2647 
UCh¬
 
mySourûCh¬
 = 0x0000;

2648 
UCÚv”‹rD©aISO2022
* 
myD©a
;

2649 
UCÚv”‹rSh¬edD©a
* 
sh¬edD©a
 ;

2650 
UBoŞ
 
u£F®lback
;

2652 
myD©a
=(
UCÚv”‹rD©aISO2022
*)(
¬gs
->
cÚv”‹r
->
exŒaInfo
);

2653 if(
myD©a
->
v”siÚ
==1){

2654 
	`UCÚv”‹r_toUnicode_ISO_2022_KR_OFFSETS_LOGIC_IBM
(
¬gs
,
”r
);

2659 
sh¬edD©a
 = 
myD©a
->
cu¼’tCÚv”‹r
->sharedData;

2660 
u£F®lback
 = 
¬gs
->
cÚv”‹r
->useFallback;

2662 if(
myD©a
->
key
 != 0) {

2664 
esÿ³
;

2665 } if(
¬gs
->
cÚv”‹r
->
toUL’gth
 =ğ1 && 
mySourû
 < 
mySourûLim™
 && 
myT¬g‘
 <‡rgs->
rg‘Lim™
) {

2667 
mySourûCh¬
 = 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0];

2668 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 0;

2669 
g‘T¿By‹
;

2672 
mySourû
< 
mySourûLim™
){

2674 if(
myT¬g‘
 < 
¬gs
->
rg‘Lim™
){

2676 
mySourûCh¬
ğ(è*
mySourû
++;

2678 if(
mySourûCh¬
==
UCNV_SI
){

2679 
myD©a
->
toU2022S‹
.
g
 = 0;

2680 ià(
myD©a
->
isEm±ySegm’t
) {

2681 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

2682 *
”r
 = 
U_ILLEGAL_ESCAPE_SEQUENCE
;

2683 
¬gs
->
cÚv”‹r
->
toUC®lbackR—sÚ
 = 
UCNV_IRREGULAR
;

2684 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0] = (
ušt8_t
)
mySourûCh¬
;

2685 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 1;

2686 
¬gs
->
rg‘
 = 
myT¬g‘
;

2687 
¬gs
->
sourû
 = 
mySourû
;

2692 }if(
mySourûCh¬
==
UCNV_SO
){

2693 
myD©a
->
toU2022S‹
.
g
 = 1;

2694 
myD©a
->
isEm±ySegm’t
 = 
TRUE
;

2697 }if(
mySourûCh¬
==
ESC_2022
){

2698 
mySourû
--;

2699 
esÿ³
:

2700 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

2701 
	`chªgeS‹_2022
(
¬gs
->
cÚv”‹r
,&(
mySourû
),

2702 
mySourûLim™
, 
ISO_2022_KR
, 
”r
);

2703 if(
	`U_FAILURE
(*
”r
)){

2704 
¬gs
->
rg‘
 = 
myT¬g‘
;

2705 
¬gs
->
sourû
 = 
mySourû
;

2711 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

2712 if(
myD©a
->
toU2022S‹
.
g
 == 1) {

2713 if(
mySourû
 < 
mySourûLim™
) {

2714 
ËadIsOk
, 
ŒaIsOk
;

2715 
ušt8_t
 
ŒaBy‹
;

2716 
g‘T¿By‹
:

2717 
rg‘UniCh¬
 = 
missšgCh¬M¬k”
;

2718 
ŒaBy‹
 = (
ušt8_t
)*
mySourû
;

2729 
ËadIsOk
 = (
ušt8_t
)(
mySourûCh¬
 - 0x21) <= (0x7e - 0x21);

2730 
ŒaIsOk
 = (
ušt8_t
)(
ŒaBy‹
 - 0x21) <= (0x7e - 0x21);

2731 ià(
ËadIsOk
 && 
ŒaIsOk
) {

2732 ++
mySourû
;

2733 
‹mpBuf
[0] = ()(
mySourûCh¬
 + 0x80);

2734 
‹mpBuf
[1] = ()(
ŒaBy‹
 + 0x80);

2735 
rg‘UniCh¬
 = 
	`uúv_MBCSSim¶eG‘NextUCh¬
(
sh¬edD©a
, 
‹mpBuf
, 2, 
u£F®lback
);

2736 
mySourûCh¬
 = (mySourûCh¬ << 8è| 
ŒaBy‹
;

2737 } ià(!(
ŒaIsOk
 || 
	`IS_2022_CONTROL
(
ŒaBy‹
))) {

2739 ++
mySourû
;

2741 
mySourûCh¬
 = 0x10000 | (mySourûCh¬ << 8è| 
ŒaBy‹
;

2744 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0] = (
ušt8_t
)
mySourûCh¬
;

2745 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 1;

2749 if(
mySourûCh¬
 <= 0x7f) {

2750 
rg‘UniCh¬
 = 
	`uúv_MBCSSim¶eG‘NextUCh¬
(
sh¬edD©a
, 
mySourû
 - 1, 1, 
u£F®lback
);

2752 
rg‘UniCh¬
 = 0xffff;

2754 if(
rg‘UniCh¬
 < 0xfffe){

2755 if(
¬gs
->
off£ts
) {

2756 
¬gs
->
off£ts
[
myT¬g‘
 -‡rgs->
rg‘
] = (
št32_t
)(
mySourû
 -‡rgs->
sourû
 - (
mySourûCh¬
 <= 0xff ? 1 : 2));

2758 *(
myT¬g‘
++)=(
UCh¬
)
rg‘UniCh¬
;

2762 
	`toUnicodeC®lback
(
¬gs
->
cÚv”‹r
,
mySourûCh¬
,
rg‘UniCh¬
,
”r
);

2767 *
”r
 =
U_BUFFER_OVERFLOW_ERROR
;

2771 
¬gs
->
rg‘
 = 
myT¬g‘
;

2772 
¬gs
->
sourû
 = 
mySourû
;

2773 
	}
}

2857 cÚ¡ 
	gGB_2312_80_STR
[] = "\x1B\x24\x29\x41";

2858 cÚ¡ 
	gISO_IR_165_STR
[] = "\x1B\x24\x29\x45";

2859 cÚ¡ 
	gCNS_11643_1992_PÏÃ_1_STR
[] = "\x1B\x24\x29\x47";

2860 cÚ¡ 
	gCNS_11643_1992_PÏÃ_2_STR
[] = "\x1B\x24\x2A\x48";

2861 cÚ¡ 
	gCNS_11643_1992_PÏÃ_3_STR
[] = "\x1B\x24\x2B\x49";

2862 cÚ¡ 
	gCNS_11643_1992_PÏÃ_4_STR
[] = "\x1B\x24\x2B\x4A";

2863 cÚ¡ 
	gCNS_11643_1992_PÏÃ_5_STR
[] = "\x1B\x24\x2B\x4B";

2864 cÚ¡ 
	gCNS_11643_1992_PÏÃ_6_STR
[] = "\x1B\x24\x2B\x4C";

2865 cÚ¡ 
	gCNS_11643_1992_PÏÃ_7_STR
[] = "\x1B\x24\x2B\x4D";

2868 cÚ¡ * cÚ¡ 
	gescSeqCh¬sCN
[10] ={

2869 
SHIFT_IN_STR
,

2870 
GB_2312_80_STR
,

2871 
ISO_IR_165_STR
,

2872 
CNS_11643_1992_PÏÃ_1_STR
,

2873 
CNS_11643_1992_PÏÃ_2_STR
,

2874 
CNS_11643_1992_PÏÃ_3_STR
,

2875 
CNS_11643_1992_PÏÃ_4_STR
,

2876 
CNS_11643_1992_PÏÃ_5_STR
,

2877 
CNS_11643_1992_PÏÃ_6_STR
,

2878 
CNS_11643_1992_PÏÃ_7_STR


2882 
	$UCÚv”‹r_äomUnicode_ISO_2022_CN_OFFSETS_LOGIC
(
UCÚv”‹rFromUnicodeArgs
* 
¬gs
, 
UE¼ÜCode
* 
”r
){

2883 
UCÚv”‹r
 *
úv
 = 
¬gs
->
cÚv”‹r
;

2884 
UCÚv”‹rD©aISO2022
 *
cÚv”‹rD©a
;

2885 
ISO2022S‹
 *
pFromU2022S‹
;

2886 
ušt8_t
 *
rg‘
 = (ušt8_ˆ*è
¬gs
->target;

2887 cÚ¡ 
ušt8_t
 *
rg‘Lim™
 = (cÚ¡ ušt8_ˆ*è
¬gs
->targetLimit;

2888 cÚ¡ 
UCh¬
* 
sourû
 = 
¬gs
->source;

2889 cÚ¡ 
UCh¬
* 
sourûLim™
 = 
¬gs
->sourceLimit;

2890 
št32_t
* 
off£ts
 = 
¬gs
->offsets;

2891 
UCh¬32
 
sourûCh¬
;

2892 
bufãr
[8];

2893 
št32_t
 
Ën
;

2894 
št8_t
 
choiûs
[3];

2895 
št32_t
 
choiûCouÁ
;

2896 
ušt32_t
 
rg‘V®ue
 = 0;

2897 
UBoŞ
 
u£F®lback
;

2900 
cÚv”‹rD©a
 = (
UCÚv”‹rD©aISO2022
*)
úv
->
exŒaInfo
;

2901 
pFromU2022S‹
 = &
cÚv”‹rD©a
->
äomU2022S‹
;

2903 
choiûCouÁ
 = 0;

2906 if((
sourûCh¬
 = 
úv
->
äomUCh¬32
)!=0 && 
rg‘
< 
rg‘Lim™
) {

2907 
g‘T¿
;

2910  
sourû
 < 
sourûLim™
){

2911 if(
rg‘
 < 
rg‘Lim™
){

2913 
sourûCh¬
 = *(
sourû
++);

2915 if(
	`UTF_IS_SURROGATE
(
sourûCh¬
)) {

2916 if(
	`UTF_IS_SURROGATE_FIRST
(
sourûCh¬
)) {

2917 
g‘T¿
:

2919 if(
sourû
 < 
sourûLim™
) {

2921 
UCh¬
 
Œa
=(UCh¬è*
sourû
;

2922 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

2923 
sourû
++;

2924 
sourûCh¬
=
	`UTF16_GET_PAIR_VALUE
(sourûCh¬, 
Œa
);

2925 
úv
->
äomUCh¬32
=0x00;

2931 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

2932 
úv
->
äomUCh¬32
=
sourûCh¬
;

2937 
úv
->
äomUCh¬32
=
sourûCh¬
;

2943 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

2944 
úv
->
äomUCh¬32
=
sourûCh¬
;

2950 if(
sourûCh¬
 <= 0x007f ){

2952 if(
	`IS_2022_CONTROL
(
sourûCh¬
)) {

2954 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

2955 
úv
->
äomUCh¬32
=
sourûCh¬
;

2960 if(
pFromU2022S‹
->
g
 == 0) {

2961 
bufãr
[0] = ()
sourûCh¬
;

2962 
Ën
 = 1;

2964 
bufãr
[0] = 
UCNV_SI
;

2965 
bufãr
[1] = ()
sourûCh¬
;

2966 
Ën
 = 2;

2967 
pFromU2022S‹
->
g
 = 0;

2968 
choiûCouÁ
 = 0;

2970 if(
sourûCh¬
 =ğ
CR
 || sourûCh¬ =ğ
LF
) {

2972 
	`u´v_mem£t
(
pFromU2022S‹
, 0, (
ISO2022S‹
));

2973 
choiûCouÁ
 = 0;

2978 
št32_t
 
i
;

2979 
št8_t
 
cs
, 
g
;

2981 if(
choiûCouÁ
 == 0) {

2983 
choiûs
[0] = 
pFromU2022S‹
->
cs
[1];

2986 if(
choiûs
[0] == 0) {

2987 
choiûs
[0] = 
GB2312_1
;

2990 if(
cÚv”‹rD©a
->
v”siÚ
 == 0) {

2994 if(
choiûs
[0] =ğ
GB2312_1
) {

2995 
choiûs
[1] = (
št8_t
)
CNS_11643_1
;

2997 
choiûs
[1] = (
št8_t
)
GB2312_1
;

3000 
choiûCouÁ
 = 2;

3001 } ià(
cÚv”‹rD©a
->
v”siÚ
 == 1) {

3005 
choiûs
[0]) {

3006 
GB2312_1
:

3007 
choiûs
[1] = (
št8_t
)
CNS_11643_1
;

3008 
choiûs
[2] = (
št8_t
)
ISO_IR_165
;

3010 
ISO_IR_165
:

3011 
choiûs
[1] = (
št8_t
)
GB2312_1
;

3012 
choiûs
[2] = (
št8_t
)
CNS_11643_1
;

3015 
choiûs
[1] = (
št8_t
)
GB2312_1
;

3016 
choiûs
[2] = (
št8_t
)
ISO_IR_165
;

3020 
choiûCouÁ
 = 3;

3022 
choiûs
[0] = (
št8_t
)
CNS_11643_1
;

3023 
choiûs
[1] = (
št8_t
)
GB2312_1
;

3027 
cs
 = 
g
 = 0;

3033 
Ën
 = 0;

3040 
u£F®lback
 = 
úv
->useFallback;

3042 
i
 = 0; i < 
choiûCouÁ
 && 
Ën
 <= 0; ++i) {

3043 
št8_t
 
cs0
 = 
choiûs
[
i
];

3044 if(
cs0
 > 0) {

3045 
ušt32_t
 
v®ue
;

3046 
št32_t
 
Ën2
;

3047 if(
cs0
 >ğ
CNS_11643_0
) {

3048 
Ën2
 = 
	`MBCS_FROM_UCHAR32_ISO2022
(

3049 
cÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
CNS_11643
],

3050 
sourûCh¬
,

3051 &
v®ue
,

3052 
u£F®lback
,

3053 
MBCS_OUTPUT_3
);

3054 if(
Ën2
 =ğ3 || (Ën2 =ğ-3 && 
Ën
 == 0)) {

3055 
rg‘V®ue
 = 
v®ue
;

3056 
cs
 = (
št8_t
)(
CNS_11643_0
 + (
v®ue
 >> 16) - 0x80);

3057 if(
Ën2
 >= 0) {

3058 
Ën
 = 2;

3060 
Ën
 = -2;

3061 
u£F®lback
 = 
FALSE
;

3063 if(
cs
 =ğ
CNS_11643_1
) {

3064 
g
 = 1;

3065 } if(
cs
 =ğ
CNS_11643_2
) {

3066 
g
 = 2;

3067 } if(
cÚv”‹rD©a
->
v”siÚ
 == 1) {

3068 
g
 = 3;

3071 
Ën
 = 0;

3076 
Ën2
 = 
	`MBCS_FROM_UCHAR32_ISO2022
(

3077 
cÚv”‹rD©a
->
myCÚv”‹rA¼ay
[
cs0
],

3078 
sourûCh¬
,

3079 &
v®ue
,

3080 
u£F®lback
,

3081 
MBCS_OUTPUT_2
);

3082 if(
Ën2
 =ğ2 || (Ën2 =ğ-2 && 
Ën
 == 0)) {

3083 
rg‘V®ue
 = 
v®ue
;

3084 
Ën
 = 
Ën2
;

3085 
cs
 = 
cs0
;

3086 
g
 = 1;

3087 
u£F®lback
 = 
FALSE
;

3093 if(
Ën
 != 0) {

3094 
Ën
 = 0;

3097 if(
cs
 !ğ
pFromU2022S‹
->cs[
g
]) {

3098 if(
cs
 < 
CNS_11643
) {

3099 
	`u´v_memıy
(
bufãr
, 
escSeqCh¬sCN
[
cs
], 4);

3101 
	`u´v_memıy
(
bufãr
, 
escSeqCh¬sCN
[
CNS_11643
 + (
cs
 - 
CNS_11643_1
)], 4);

3103 
Ën
 = 4;

3104 
pFromU2022S‹
->
cs
[
g
] = cs;

3105 if(
g
 == 1) {

3107 
choiûCouÁ
 = 0;

3112 if(
g
 !ğ
pFromU2022S‹
->g) {

3113 
g
) {

3115 
bufãr
[
Ën
++] = 
UCNV_SO
;

3118 
pFromU2022S‹
->
g
 = 1;

3121 
bufãr
[
Ën
++] = 0x1b;

3122 
bufãr
[
Ën
++] = 0x4e;

3125 
bufãr
[
Ën
++] = 0x1b;

3126 
bufãr
[
Ën
++] = 0x4f;

3132 
bufãr
[
Ën
++] = ()(
rg‘V®ue
 >> 8);

3133 
bufãr
[
Ën
++] = ()
rg‘V®ue
;

3138 *
”r
 = 
U_INVALID_CHAR_FOUND
;

3139 
úv
->
äomUCh¬32
=
sourûCh¬
;

3145 if(
Ën
 == 1) {

3146 *
rg‘
++ = 
bufãr
[0];

3147 if(
off£ts
) {

3148 *
off£ts
++ = (
št32_t
)(
sourû
 - 
¬gs
->source - 1);

3150 } if(
Ën
 =ğ2 && (
rg‘
 + 2è<ğ
rg‘Lim™
) {

3151 *
rg‘
++ = 
bufãr
[0];

3152 *
rg‘
++ = 
bufãr
[1];

3153 if(
off£ts
) {

3154 
št32_t
 
sourûIndex
 = (št32_t)(
sourû
 - 
¬gs
->sourû - 
	`U16_LENGTH
(
sourûCh¬
));

3155 *
off£ts
++ = 
sourûIndex
;

3156 *
off£ts
++ = 
sourûIndex
;

3159 
	`äomUWr™eUIÁ8
(

3160 
úv
,

3161 
bufãr
, 
Ën
,

3162 &
rg‘
, (cÚ¡ *)
rg‘Lim™
,

3163 &
off£ts
, (
št32_t
)(
sourû
 - 
¬gs
->sourû - 
	`U16_LENGTH
(
sourûCh¬
)),

3164 
”r
);

3165 if(
	`U_FAILURE
(*
”r
)) {

3171 *
”r
 =
U_BUFFER_OVERFLOW_ERROR
;

3187 ifĞ
	`U_SUCCESS
(*
”r
) &&

3188 
pFromU2022S‹
->
g
!=0 &&

3189 
¬gs
->
æush
 && 
sourû
>=
sourûLim™
 && 
úv
->
äomUCh¬32
==0

3191 
št32_t
 
sourûIndex
;

3194 
pFromU2022S‹
->
g
=0;

3204 
sourûIndex
=(
št32_t
)(
sourû
-
¬gs
->source);

3205 if(
sourûIndex
>0) {

3206 --
sourûIndex
;

3207 ifĞ
	`U16_IS_TRAIL
(
¬gs
->
sourû
[
sourûIndex
]) &&

3208 (
sourûIndex
==0 || 
	`U16_IS_LEAD
(
¬gs
->
sourû
[sourceIndex-1]))

3210 --
sourûIndex
;

3213 
sourûIndex
=-1;

3216 
	`äomUWr™eUIÁ8
(

3217 
úv
,

3218 
SHIFT_IN_STR
, 1,

3219 &
rg‘
, (cÚ¡ *)
rg‘Lim™
,

3220 &
off£ts
, 
sourûIndex
,

3221 
”r
);

3225 
¬gs
->
sourû
 = source;

3226 
¬gs
->
rg‘
 = (*)target;

3227 
	}
}

3231 
	$UCÚv”‹r_toUnicode_ISO_2022_CN_OFFSETS_LOGIC
(
UCÚv”‹rToUnicodeArgs
 *
¬gs
,

3232 
UE¼ÜCode
* 
”r
){

3233 
‹mpBuf
[3];

3234 cÚ¡ *
mySourû
 = (*è
¬gs
->
sourû
;

3235 
UCh¬
 *
myT¬g‘
 = 
¬gs
->
rg‘
;

3236 cÚ¡ *
mySourûLim™
 = 
¬gs
->
sourûLim™
;

3237 
ušt32_t
 
rg‘UniCh¬
 = 0x0000;

3238 
ušt32_t
 
mySourûCh¬
 = 0x0000;

3239 
UCÚv”‹rD©aISO2022
* 
myD©a
;

3240 
ISO2022S‹
 *
pToU2022S‹
;

3242 
myD©a
=(
UCÚv”‹rD©aISO2022
*)(
¬gs
->
cÚv”‹r
->
exŒaInfo
);

3243 
pToU2022S‹
 = &
myD©a
->
toU2022S‹
;

3245 if(
myD©a
->
key
 != 0) {

3247 
esÿ³
;

3248 } if(
¬gs
->
cÚv”‹r
->
toUL’gth
 =ğ1 && 
mySourû
 < 
mySourûLim™
 && 
myT¬g‘
 <‡rgs->
rg‘Lim™
) {

3250 
mySourûCh¬
 = 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0];

3251 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 0;

3252 
rg‘UniCh¬
 = 
missšgCh¬M¬k”
;

3253 
g‘T¿By‹
;

3256 
mySourû
 < 
mySourûLim™
){

3258 
rg‘UniCh¬
 =
missšgCh¬M¬k”
;

3260 if(
myT¬g‘
 < 
¬gs
->
rg‘Lim™
){

3262 
mySourûCh¬
ğ(è*
mySourû
++;

3264 
mySourûCh¬
){

3265 
UCNV_SI
:

3266 
pToU2022S‹
->
g
=0;

3267 ià(
myD©a
->
isEm±ySegm’t
) {

3268 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

3269 *
”r
 = 
U_ILLEGAL_ESCAPE_SEQUENCE
;

3270 
¬gs
->
cÚv”‹r
->
toUC®lbackR—sÚ
 = 
UCNV_IRREGULAR
;

3271 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0] = 
mySourûCh¬
;

3272 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 1;

3273 
¬gs
->
rg‘
 = 
myT¬g‘
;

3274 
¬gs
->
sourû
 = 
mySourû
;

3279 
UCNV_SO
:

3280 if(
pToU2022S‹
->
cs
[1] != 0) {

3281 
pToU2022S‹
->
g
=1;

3282 
myD©a
->
isEm±ySegm’t
 = 
TRUE
;

3286 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

3290 
ESC_2022
:

3291 
mySourû
--;

3292 
esÿ³
:

3294 cÚ¡ * 
mySourûBefÜe
 = 
mySourû
;

3295 
št8_t
 
toUL’gthBefÜe
 = 
¬gs
->
cÚv”‹r
->
toUL’gth
;

3297 
	`chªgeS‹_2022
(
¬gs
->
cÚv”‹r
,&(
mySourû
),

3298 
mySourûLim™
, 
ISO_2022_CN
,
”r
);

3301 if(
myD©a
->
key
==0 && 
	`U_SUCCESS
(*
”r
è&& myD©a->
isEm±ySegm’t
) {

3302 *
”r
 = 
U_ILLEGAL_ESCAPE_SEQUENCE
;

3303 
¬gs
->
cÚv”‹r
->
toUC®lbackR—sÚ
 = 
UCNV_IRREGULAR
;

3304 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
)(
toUL’gthBefÜe
 + (
mySourû
 - 
mySourûBefÜe
));

3309 if(
	`U_FAILURE
(*
”r
)){

3310 
¬gs
->
rg‘
 = 
myT¬g‘
;

3311 
¬gs
->
sourû
 = 
mySourû
;

3312 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

3319 
CR
:

3321 
LF
:

3322 
	`u´v_mem£t
(
pToU2022S‹
, 0, (
ISO2022S‹
));

3326 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

3327 if(
pToU2022S‹
->
g
 != 0) {

3328 if(
mySourû
 < 
mySourûLim™
) {

3329 
UCÚv”‹rSh¬edD©a
 *
úv
;

3330 
S‹Enum
 
‹mpS‹
;

3331 
št32_t
 
‹mpBufL’
;

3332 
ËadIsOk
, 
ŒaIsOk
;

3333 
ušt8_t
 
ŒaBy‹
;

3334 
g‘T¿By‹
:

3335 
ŒaBy‹
 = (
ušt8_t
)*
mySourû
;

3346 
ËadIsOk
 = (
ušt8_t
)(
mySourûCh¬
 - 0x21) <= (0x7e - 0x21);

3347 
ŒaIsOk
 = (
ušt8_t
)(
ŒaBy‹
 - 0x21) <= (0x7e - 0x21);

3348 ià(
ËadIsOk
 && 
ŒaIsOk
) {

3349 ++
mySourû
;

3350 
‹mpS‹
 = (
S‹Enum
)
pToU2022S‹
->
cs
[pToU2022S‹->
g
];

3351 if(
‹mpS‹
 >ğ
CNS_11643_0
) {

3352 
úv
 = 
myD©a
->
myCÚv”‹rA¼ay
[
CNS_11643
];

3353 
‹mpBuf
[0] = (è(0x80+(
‹mpS‹
-
CNS_11643_0
));

3354 
‹mpBuf
[1] = (è(
mySourûCh¬
);

3355 
‹mpBuf
[2] = (è
ŒaBy‹
;

3356 
‹mpBufL’
 = 3;

3359 
úv
 = 
myD©a
->
myCÚv”‹rA¼ay
[
‹mpS‹
];

3360 
‹mpBuf
[0] = (è(
mySourûCh¬
);

3361 
‹mpBuf
[1] = (è
ŒaBy‹
;

3362 
‹mpBufL’
 = 2;

3364 
rg‘UniCh¬
 = 
	`uúv_MBCSSim¶eG‘NextUCh¬
(
úv
, 
‹mpBuf
, 
‹mpBufL’
, 
FALSE
);

3365 
mySourûCh¬
 = (mySourûCh¬ << 8è| 
ŒaBy‹
;

3366 } ià(!(
ŒaIsOk
 || 
	`IS_2022_CONTROL
(
ŒaBy‹
))) {

3368 ++
mySourû
;

3370 
mySourûCh¬
 = 0x10000 | (mySourûCh¬ << 8è| 
ŒaBy‹
;

3372 if(
pToU2022S‹
->
g
>=2) {

3374 
pToU2022S‹
->
g
õToU2022S‹->
´evG
;

3377 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0] = (
ušt8_t
)
mySourûCh¬
;

3378 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 1;

3379 
’dloİ
;

3383 if(
mySourûCh¬
 <= 0x7f) {

3384 
rg‘UniCh¬
 = (
UCh¬
è
mySourûCh¬
;

3389 if(
rg‘UniCh¬
 < (
missšgCh¬M¬k”
-1 )){

3390 if(
¬gs
->
off£ts
){

3391 
¬gs
->
off£ts
[
myT¬g‘
 -‡rgs->
rg‘
] = (
št32_t
)(
mySourû
 -‡rgs->
sourû
 - (
mySourûCh¬
 <= 0xff ? 1 : 2));

3393 *(
myT¬g‘
++)=(
UCh¬
)
rg‘UniCh¬
;

3395 if(
rg‘UniCh¬
 > 
missšgCh¬M¬k”
){

3397 
rg‘UniCh¬
-=0x0010000;

3398 *
myT¬g‘
 = (
UCh¬
)(0xd800+(UCh¬)(
rg‘UniCh¬
>>10));

3399 if(
¬gs
->
off£ts
){

3400 
¬gs
->
off£ts
[
myT¬g‘
 -‡rgs->
rg‘
] = (
št32_t
)(
mySourû
 -‡rgs->
sourû
 - (
mySourûCh¬
 <= 0xff ? 1 : 2));

3402 ++
myT¬g‘
;

3403 if(
myT¬g‘
< 
¬gs
->
rg‘Lim™
){

3404 *
myT¬g‘
 = (
UCh¬
)(0xdc00+(UCh¬)(
rg‘UniCh¬
&0x3ff));

3405 if(
¬gs
->
off£ts
){

3406 
¬gs
->
off£ts
[
myT¬g‘
 -‡rgs->
rg‘
] = (
št32_t
)(
mySourû
 -‡rgs->
sourû
 - (
mySourûCh¬
 <= 0xff ? 1 : 2));

3408 ++
myT¬g‘
;

3410 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãr
[¬gs->cÚv”‹r->
UCh¬E¼ÜBufãrL’gth
++]=

3411 (
UCh¬
)(0xdc00+(UCh¬)(
rg‘UniCh¬
&0x3ff));

3417 
	`toUnicodeC®lback
(
¬gs
->
cÚv”‹r
,
mySourûCh¬
,
rg‘UniCh¬
,
”r
);

3422 *
”r
 =
U_BUFFER_OVERFLOW_ERROR
;

3426 
’dloİ
:

3427 
¬gs
->
rg‘
 = 
myT¬g‘
;

3428 
¬gs
->
sourû
 = 
mySourû
;

3429 
	}
}

3432 
	$_ISO_2022_Wr™eSub
(
UCÚv”‹rFromUnicodeArgs
 *
¬gs
, 
št32_t
 
off£tIndex
, 
UE¼ÜCode
 *
”r
) {

3433 
UCÚv”‹r
 *
úv
 = 
¬gs
->
cÚv”‹r
;

3434 
UCÚv”‹rD©aISO2022
 *
myCÚv”‹rD©a
=(UCÚv”‹rD©aISO2022 *è
úv
->
exŒaInfo
;

3435 
ISO2022S‹
 *
pFromU2022S‹
=&
myCÚv”‹rD©a
->
äomU2022S‹
;

3436 *
p
, *
subch¬
;

3437 
bufãr
[8];

3438 
št32_t
 
Ëngth
;

3440 
subch¬
=(*)
úv
->
subCh¬s
;

3441 
Ëngth
=
úv
->
subCh¬L’
;

3443 
p
 = 
bufãr
;

3444 
myCÚv”‹rD©a
->
loÿË
[0]){

3447 
št8_t
 
cs
;

3449 if(
pFromU2022S‹
->
g
 == 1) {

3451 
pFromU2022S‹
->
g
 = 0;

3452 *
p
++ = 
UCNV_SI
;

3455 
cs
 = 
pFromU2022S‹
->cs[0];

3456 if(
cs
 !ğ
ASCII
 && c !ğ
JISX201
) {

3458 
pFromU2022S‹
->
cs
[0] = (
št8_t
)
ASCII
;

3459 *
p
++ = '\x1b';

3460 *
p
++ = '\x28';

3461 *
p
++ = '\x42';

3464 *
p
++ = 
subch¬
[0];

3468 if(
pFromU2022S‹
->
g
 != 0) {

3470 
pFromU2022S‹
->
g
 = 0;

3471 *
p
++ = 
UCNV_SI
;

3473 *
p
++ = 
subch¬
[0];

3476 if(
myCÚv”‹rD©a
->
v”siÚ
 == 0) {

3477 if(
Ëngth
 == 1) {

3478 if((
UBoŞ
)
¬gs
->
cÚv”‹r
->
äomUnicodeStus
) {

3480 
¬gs
->
cÚv”‹r
->
äomUnicodeStus
 = 0;

3481 *
p
++ = 
UCNV_SI
;

3483 *
p
++ = 
subch¬
[0];

3485 if(!(
UBoŞ
)
¬gs
->
cÚv”‹r
->
äomUnicodeStus
) {

3487 
¬gs
->
cÚv”‹r
->
äomUnicodeStus
 = 1;

3488 *
p
++ = 
UCNV_SO
;

3490 *
p
++ = 
subch¬
[0];

3491 *
p
++ = 
subch¬
[1];

3496 
ušt8_t
 *
cu¼’tSubCh¬s
 = 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
subCh¬s
;

3497 
št8_t
 
cu¼’tSubCh¬L’
 = 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
subCh¬L’
;

3500 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
subCh¬s
 = (
ušt8_t
 *)
subch¬
;

3501 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
subCh¬L’
 = (
št8_t
)
Ëngth
;

3504 
¬gs
->
cÚv”‹r
 = 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
;

3505 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
äomUCh¬32
 = 
úv
->fromUChar32;

3506 
	`uúv_cbFromUWr™eSub
(
¬gs
, 0, 
”r
);

3507 
úv
->
äomUCh¬32
 = 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->fromUChar32;

3508 
¬gs
->
cÚv”‹r
 = 
úv
;

3511 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
subCh¬s
 = 
cu¼’tSubCh¬s
;

3512 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
subCh¬L’
 = 
cu¼’tSubCh¬L’
;

3514 if(*
”r
 =ğ
U_BUFFER_OVERFLOW_ERROR
) {

3515 if(
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
ch¬E¼ÜBufãrL’gth
 > 0) {

3516 
	`u´v_memıy
(

3517 
úv
->
ch¬E¼ÜBufãr
,

3518 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
ch¬E¼ÜBufãr
,

3519 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
ch¬E¼ÜBufãrL’gth
);

3521 
úv
->
ch¬E¼ÜBufãrL’gth
 = 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->charErrorBufferLength;

3522 
myCÚv”‹rD©a
->
cu¼’tCÚv”‹r
->
ch¬E¼ÜBufãrL’gth
 = 0;

3530 
	`uúv_cbFromUWr™eBy‹s
(
¬gs
,

3531 
bufãr
, (
št32_t
)(
p
 - buffer),

3532 
off£tIndex
, 
”r
);

3533 
	}
}

3546 
	sşÚeSŒuù


3548 
UCÚv”‹r
 
	múv
;

3549 
UCÚv”‹r
 
	mcu¼’tCÚv”‹r
;

3550 
UAligÃdMemÜy
 
	md—dS·û
;

3551 
UCÚv”‹rD©aISO2022
 
	mmyd©a
;

3555 
UCÚv”‹r
 *

3556 
	$_ISO_2022_SaãClÚe
(

3557 cÚ¡ 
UCÚv”‹r
 *
úv
,

3558 *
¡ackBufãr
,

3559 
št32_t
 *
pBufãrSize
,

3560 
UE¼ÜCode
 *
¡©us
)

3562 
şÚeSŒuù
 * 
loÿlClÚe
;

3563 
UCÚv”‹rD©aISO2022
 *
úvD©a
;

3564 
št32_t
 
i
, 
size
;

3566 ià(*
pBufãrSize
 == 0) {

3567 *
pBufãrSize
 = (
št32_t
)(
şÚeSŒuù
);

3568  
NULL
;

3571 
úvD©a
 = (
UCÚv”‹rD©aISO2022
 *)
úv
->
exŒaInfo
;

3572 
loÿlClÚe
 = (
şÚeSŒuù
 *)
¡ackBufãr
;

3576 
	`u´v_memıy
(&
loÿlClÚe
->
myd©a
, 
úvD©a
, (
UCÚv”‹rD©aISO2022
));

3577 
loÿlClÚe
->
úv
.
exŒaInfo
 = &loÿlClÚe->
myd©a
;

3578 
loÿlClÚe
->
úv
.
isExŒaLoÿl
 = 
TRUE
;

3582 if(
úvD©a
->
cu¼’tCÚv”‹r
 !ğ
NULL
) {

3583 
size
 = (
št32_t
)((
UCÚv”‹r
è+ (
UAligÃdMemÜy
));

3584 
loÿlClÚe
->
myd©a
.
cu¼’tCÚv”‹r
 =

3585 
	`uúv_§ãClÚe
(
úvD©a
->
cu¼’tCÚv”‹r
,

3586 &
loÿlClÚe
->
cu¼’tCÚv”‹r
,

3587 &
size
, 
¡©us
);

3588 if(
	`U_FAILURE
(*
¡©us
)) {

3589  
NULL
;

3593 
i
=0; i<
UCNV_2022_MAX_CONVERTERS
; ++i) {

3594 if(
úvD©a
->
myCÚv”‹rA¼ay
[
i
] !ğ
NULL
) {

3595 
	`uúv_šüem’tRefCouÁ
(
úvD©a
->
myCÚv”‹rA¼ay
[
i
]);

3599  &
loÿlClÚe
->
úv
;

3600 
	}
}

3603 
	$_ISO_2022_G‘UnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

3604 cÚ¡ 
US‘Add”
 *
§
,

3605 
UCÚv”‹rUnicodeS‘
 
which
,

3606 
UE¼ÜCode
 *
pE¼ÜCode
)

3608 
št32_t
 
i
;

3609 
UCÚv”‹rD©aISO2022
* 
úvD©a
;

3611 ià(
	`U_FAILURE
(*
pE¼ÜCode
)) {

3614 #ifdeà
U_ENABLE_GENERIC_ISO_2022


3615 ià(
úv
->
sh¬edD©a
 =ğ&
_ISO2022D©a
) {

3617 
§
->
	`addRªge
(§->
£t
, 0, 0xd7FF);

3618 
§
->
	`addRªge
(§->
£t
, 0xE000, 0x10FFFF);

3623 
úvD©a
 = (
UCÚv”‹rD©aISO2022
*)
úv
->
exŒaInfo
;

3626 
úvD©a
->
loÿË
[0]){

3629 
§
->
	`add
(§->
£t
, 0xa5);

3630 
§
->
	`add
(§->
£t
, 0x203e);

3631 if(
jpCh¬£tMasks
[
úvD©a
->
v”siÚ
]&
	`CSM
(
ISO8859_1
)) {

3633 
§
->
	`addRªge
(§->
£t
, 0, 0xff);

3636 
§
->
	`addRªge
(§->
£t
, 0, 0x7f);

3638 if(
úvD©a
->
v”siÚ
==3 || cnvD©a->v”siÚ==4 || 
which
==
UCNV_ROUNDTRIP_AND_FALLBACK_SET
) {

3653 
§
->
	`addRªge
(§->
£t
, 
HWKANA_START
, 
HWKANA_END
);

3659 
§
->
	`addRªge
(§->
£t
, 0, 0x7f);

3663 
úvD©a
->
cu¼’tCÚv”‹r
->
sh¬edD©a
->
im¶
->
	`g‘UnicodeS‘
(

3664 
úvD©a
->
cu¼’tCÚv”‹r
, 
§
, 
which
, 
pE¼ÜCode
);

3672 ifĞ(
úvD©a
->
loÿË
[0]=='c' || cnvData->locale[0]=='z') &&

3673 
úvD©a
->
v”siÚ
==0 && 
i
==
CNS_11643


3676 
	`uúv_MBCSG‘UnicodeS‘FÜBy‹s
(

3677 
úvD©a
->
myCÚv”‹rA¼ay
[
i
],

3678 
§
, 
UCNV_ROUNDTRIP_SET
,

3680 
pE¼ÜCode
);

3684 
i
=0; i<
UCNV_2022_MAX_CONVERTERS
; i++) {

3685 
UCÚv”‹rS‘F‹r
 
f‹r
;

3686 if(
úvD©a
->
myCÚv”‹rA¼ay
[
i
]!=
NULL
) {

3687 ifĞ(
úvD©a
->
loÿË
[0]=='c' || cnvData->locale[0]=='z') &&

3688 
úvD©a
->
v”siÚ
==0 && 
i
==
CNS_11643


3697 
f‹r
=
UCNV_SET_FILTER_2022_CN
;

3698 } if(
úvD©a
->
loÿË
[0]=='j' && 
i
==
JISX208
) {

3703 
f‹r
=
UCNV_SET_FILTER_SJIS
;

3704 } if(
i
==
KSC5601
) {

3709 
f‹r
=
UCNV_SET_FILTER_GR94DBCS
;

3711 
f‹r
=
UCNV_SET_FILTER_NONE
;

3713 
	`uúv_MBCSG‘F‹»dUnicodeS‘FÜUnicode
(
úvD©a
->
myCÚv”‹rA¼ay
[
i
], 
§
, 
which
, 
f‹r
, 
pE¼ÜCode
);

3722 
§
->
	`»move
(§->
£t
, 0x0e);

3723 
§
->
	`»move
(§->
£t
, 0x0f);

3724 
§
->
	`»move
(§->
£t
, 0x1b);

3727 
§
->
	`»moveRªge
(§->
£t
, 0x80, 0x9f);

3728 
	}
}

3730 cÚ¡ 
UCÚv”‹rIm¶
 
	g_ISO2022Im¶
={

3731 
UCNV_ISO_2022
,

3733 
NULL
,

3734 
NULL
,

3736 
_ISO2022O³n
,

3737 
_ISO2022Clo£
,

3738 
_ISO2022Re£t
,

3740 #ifdeà
U_ENABLE_GENERIC_ISO_2022


3741 
T_UCÚv”‹r_toUnicode_ISO_2022_OFFSETS_LOGIC
,

3742 
T_UCÚv”‹r_toUnicode_ISO_2022_OFFSETS_LOGIC
,

3743 
uúv_äomUnicode_UTF8
,

3744 
uúv_äomUnicode_UTF8_OFFSETS_LOGIC
,

3746 
NULL
,

3747 
NULL
,

3748 
NULL
,

3749 
NULL
,

3751 
NULL
,

3753 
NULL
,

3754 
_ISO2022g‘Name
,

3755 
_ISO_2022_Wr™eSub
,

3756 
_ISO_2022_SaãClÚe
,

3757 
_ISO_2022_G‘UnicodeS‘


3759 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_ISO2022SticD©a
={

3760 (
UCÚv”‹rSticD©a
),

3763 
UCNV_IBM
,

3764 
UCNV_ISO_2022
,

3769 
FALSE
,

3770 
FALSE
,

3775 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_ISO2022D©a
={

3776 (
UCÚv”‹rSh¬edD©a
),

3777 ~((
ušt32_t
) 0),

3778 
NULL
,

3779 
NULL
,

3780 &
_ISO2022SticD©a
,

3781 
FALSE
,

3782 &
_ISO2022Im¶
,

3787 cÚ¡ 
UCÚv”‹rIm¶
 
	g_ISO2022JPIm¶
={

3788 
UCNV_ISO_2022
,

3790 
NULL
,

3791 
NULL
,

3793 
_ISO2022O³n
,

3794 
_ISO2022Clo£
,

3795 
_ISO2022Re£t
,

3797 
UCÚv”‹r_toUnicode_ISO_2022_JP_OFFSETS_LOGIC
,

3798 
UCÚv”‹r_toUnicode_ISO_2022_JP_OFFSETS_LOGIC
,

3799 
UCÚv”‹r_äomUnicode_ISO_2022_JP_OFFSETS_LOGIC
,

3800 
UCÚv”‹r_äomUnicode_ISO_2022_JP_OFFSETS_LOGIC
,

3801 
NULL
,

3803 
NULL
,

3804 
_ISO2022g‘Name
,

3805 
_ISO_2022_Wr™eSub
,

3806 
_ISO_2022_SaãClÚe
,

3807 
_ISO_2022_G‘UnicodeS‘


3809 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_ISO2022JPSticD©a
={

3810 (
UCÚv”‹rSticD©a
),

3813 
UCNV_IBM
,

3814 
UCNV_ISO_2022
,

3819 
FALSE
,

3820 
FALSE
,

3825 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_ISO2022JPD©a
={

3826 (
UCÚv”‹rSh¬edD©a
),

3827 ~((
ušt32_t
) 0),

3828 
NULL
,

3829 
NULL
,

3830 &
_ISO2022JPSticD©a
,

3831 
FALSE
,

3832 &
_ISO2022JPIm¶
,

3837 cÚ¡ 
UCÚv”‹rIm¶
 
	g_ISO2022KRIm¶
={

3838 
UCNV_ISO_2022
,

3840 
NULL
,

3841 
NULL
,

3843 
_ISO2022O³n
,

3844 
_ISO2022Clo£
,

3845 
_ISO2022Re£t
,

3847 
UCÚv”‹r_toUnicode_ISO_2022_KR_OFFSETS_LOGIC
,

3848 
UCÚv”‹r_toUnicode_ISO_2022_KR_OFFSETS_LOGIC
,

3849 
UCÚv”‹r_äomUnicode_ISO_2022_KR_OFFSETS_LOGIC
,

3850 
UCÚv”‹r_äomUnicode_ISO_2022_KR_OFFSETS_LOGIC
,

3851 
NULL
,

3853 
NULL
,

3854 
_ISO2022g‘Name
,

3855 
_ISO_2022_Wr™eSub
,

3856 
_ISO_2022_SaãClÚe
,

3857 
_ISO_2022_G‘UnicodeS‘


3859 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_ISO2022KRSticD©a
={

3860 (
UCÚv”‹rSticD©a
),

3863 
UCNV_IBM
,

3864 
UCNV_ISO_2022
,

3869 
FALSE
,

3870 
FALSE
,

3875 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_ISO2022KRD©a
={

3876 (
UCÚv”‹rSh¬edD©a
),

3877 ~((
ušt32_t
) 0),

3878 
NULL
,

3879 
NULL
,

3880 &
_ISO2022KRSticD©a
,

3881 
FALSE
,

3882 &
_ISO2022KRIm¶
,

3887 cÚ¡ 
UCÚv”‹rIm¶
 
	g_ISO2022CNIm¶
={

3889 
UCNV_ISO_2022
,

3891 
NULL
,

3892 
NULL
,

3894 
_ISO2022O³n
,

3895 
_ISO2022Clo£
,

3896 
_ISO2022Re£t
,

3898 
UCÚv”‹r_toUnicode_ISO_2022_CN_OFFSETS_LOGIC
,

3899 
UCÚv”‹r_toUnicode_ISO_2022_CN_OFFSETS_LOGIC
,

3900 
UCÚv”‹r_äomUnicode_ISO_2022_CN_OFFSETS_LOGIC
,

3901 
UCÚv”‹r_äomUnicode_ISO_2022_CN_OFFSETS_LOGIC
,

3902 
NULL
,

3904 
NULL
,

3905 
_ISO2022g‘Name
,

3906 
_ISO_2022_Wr™eSub
,

3907 
_ISO_2022_SaãClÚe
,

3908 
_ISO_2022_G‘UnicodeS‘


3910 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_ISO2022CNSticD©a
={

3911 (
UCÚv”‹rSticD©a
),

3914 
UCNV_IBM
,

3915 
UCNV_ISO_2022
,

3920 
FALSE
,

3921 
FALSE
,

3926 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_ISO2022CND©a
={

3927 (
UCÚv”‹rSh¬edD©a
),

3928 ~((
ušt32_t
) 0),

3929 
NULL
,

3930 
NULL
,

3931 &
_ISO2022CNSticD©a
,

3932 
FALSE
,

3933 &
_ISO2022CNIm¶
,

	@ucnv_bld.c

22 
	~"unicode/uty³s.h
"

24 #ià!
UCONFIG_NO_CONVERSION


26 
	~"unicode/put.h
"

27 
	~"unicode/ud©a.h
"

28 
	~"unicode/uúv.h
"

29 
	~"unicode/uloc.h
"

30 
	~"uŒacimp.h
"

31 
	~"uúv_io.h
"

32 
	~"uúv_bld.h
"

33 
	~"uúvmbcs.h
"

34 
	~"uúv_ext.h
"

35 
	~"uúv_úv.h
"

36 
	~"uúv_imp.h
"

37 
	~"uhash.h
"

38 
	~"umu‹x.h
"

39 
	~"c¡ršg.h
"

40 
	~"cmemÜy.h
"

41 
	~"uşn_cmn.h
"

42 
	~"u¡r_úv.h
"

47 
	~<¡dio.h
>

48 
UCNV_DEBUG_LOG
(*
wh©
, *
who
, *
p
, 
l
);

49 
	#UCNV_DEBUG_LOG
(
x
,
y
,
z
è
	`UCNV_DEBUG_LOG
(x,y,z,
__LINE__
)

	)

51 
	#UCNV_DEBUG_LOG
(
x
,
y
,
z
)

	)

54 cÚ¡ 
UCÚv”‹rSh¬edD©a
 * const

55 
	gcÚv”‹rD©a
[
UCNV_NUMBER_OF_SUPPORTED_CONVERTER_TYPES
]={

56 
NULL
, NULL,

58 #ià
UCONFIG_NO_LEGACY_CONVERSION


59 
NULL
,

61 &
_MBCSD©a
,

64 &
_L©š1D©a
,

65 &
_UTF8D©a
, &
_UTF16BED©a
, &
_UTF16LED©a
, &
_UTF32BED©a
, &
_UTF32LED©a
,

66 
NULL
,

68 #ià
UCONFIG_NO_LEGACY_CONVERSION


69 
NULL
,

70 
NULL
, NULL, NULL, NULL, NULL, NULL,

71 
NULL
, NULL, NULL, NULL, NULL, NULL,

72 
NULL
,

74 &
_ISO2022D©a
,

75 &
_LMBCSD©a1
,&
_LMBCSD©a2
, &
_LMBCSD©a3
, &
_LMBCSD©a4
, &
_LMBCSD©a5
, &
_LMBCSD©a6
,

76 &
_LMBCSD©a8
,&
_LMBCSD©a11
,&
_LMBCSD©a16
,&
_LMBCSD©a17
,&
_LMBCSD©a18
,&
_LMBCSD©a19
,

77 &
_HZD©a
,

80 &
_SCSUD©a
,

82 #ià
UCONFIG_NO_LEGACY_CONVERSION


83 
NULL
,

85 &
_ISCIID©a
,

88 &
_ASCIID©a
,

89 &
_UTF7D©a
, &
_Bocu1D©a
, &
_UTF16D©a
, &
_UTF32D©a
, &
_CESU8D©a
, &
_IMAPD©a


97 cÚ¡ *
	mÇme
;

98 cÚ¡ 
UCÚv”‹rTy³
 
	mty³
;

99 } cÚ¡ 
	gúvNameTy³
[] = {

100 { "bocu1", 
UCNV_BOCU1
 },

101 { "ûsu8", 
UCNV_CESU8
 },

102 #ià!
UCONFIG_NO_LEGACY_CONVERSION


103 { "hz",
UCNV_HZ
 },

105 { "im­maboxÇme", 
UCNV_IMAP_MAILBOX
 },

106 #ià!
UCONFIG_NO_LEGACY_CONVERSION


107 { "iscii", 
UCNV_ISCII
 },

108 { "iso2022", 
UCNV_ISO_2022
 },

110 { "iso88591", 
UCNV_LATIN_1
 },

111 #ià!
UCONFIG_NO_LEGACY_CONVERSION


112 { "lmbcs1", 
UCNV_LMBCS_1
 },

113 { "lmbcs11",
UCNV_LMBCS_11
 },

114 { "lmbcs16",
UCNV_LMBCS_16
 },

115 { "lmbcs17",
UCNV_LMBCS_17
 },

116 { "lmbcs18",
UCNV_LMBCS_18
 },

117 { "lmbcs19",
UCNV_LMBCS_19
 },

118 { "lmbcs2", 
UCNV_LMBCS_2
 },

119 { "lmbcs3", 
UCNV_LMBCS_3
 },

120 { "lmbcs4", 
UCNV_LMBCS_4
 },

121 { "lmbcs5", 
UCNV_LMBCS_5
 },

122 { "lmbcs6", 
UCNV_LMBCS_6
 },

123 { "lmbcs8", 
UCNV_LMBCS_8
 },

125 { "scsu", 
UCNV_SCSU
 },

126 { "u§scii", 
UCNV_US_ASCII
 },

127 { "utf16", 
UCNV_UTF16
 },

128 { "utf16be", 
UCNV_UTF16_BigEndŸn
 },

129 { "utf16Ë", 
UCNV_UTF16_L™eEndŸn
 },

130 #ià
U_IS_BIG_ENDIAN


131 { "utf16İpos™“ndŸn", 
UCNV_UTF16_L™eEndŸn
 },

132 { "utf16¶©fÜm’dŸn", 
UCNV_UTF16_BigEndŸn
 },

134 { "utf16İpos™“ndŸn", 
UCNV_UTF16_BigEndŸn
},

135 { "utf16¶©fÜm’dŸn", 
UCNV_UTF16_L™eEndŸn
 },

137 { "utf32", 
UCNV_UTF32
 },

138 { "utf32be", 
UCNV_UTF32_BigEndŸn
 },

139 { "utf32Ë", 
UCNV_UTF32_L™eEndŸn
 },

140 #ià
U_IS_BIG_ENDIAN


141 { "utf32İpos™“ndŸn", 
UCNV_UTF32_L™eEndŸn
 },

142 { "utf32¶©fÜm’dŸn", 
UCNV_UTF32_BigEndŸn
 },

144 { "utf32İpos™“ndŸn", 
UCNV_UTF32_BigEndŸn
 },

145 { "utf32¶©fÜm’dŸn", 
UCNV_UTF32_L™eEndŸn
 },

147 { "utf7", 
UCNV_UTF7
 },

148 { "utf8", 
UCNV_UTF8
 }

153 
UHashbË
 *
	gSHARED_DATA_HASHTABLE
 = 
NULL
;

154 
UMTX
 
	gúvCacheMu‹x
 = 
NULL
;

158 cÚ¡ **
	ggAvaabËCÚv”‹rs
 = 
NULL
;

159 
ušt16_t
 
	ggAvaabËCÚv”‹rCouÁ
 = 0;

161 #ià!
U_CHARSET_IS_UTF8


164 
	ggDeçuÉCÚv”‹rNameBufãr
[
UCNV_MAX_CONVERTER_NAME_LENGTH
 + 1];

165 cÚ¡ *
	ggDeçuÉCÚv”‹rName
 = 
NULL
;

173 cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
	ggDeçuÉAlgÜ™hmicSh¬edD©a
 = 
NULL
;

176 
UBoŞ
 
	ggDeçuÉCÚv”‹rCÚšsO±iÚ
;

180 cÚ¡ 
	gDATA_TYPE
[] = "cnv";

183 
	$uúv_æushAvaabËCÚv”‹rCache
() {

184 ià(
gAvaabËCÚv”‹rs
) {

185 
	`umtx_lock
(&
úvCacheMu‹x
);

186 
gAvaabËCÚv”‹rCouÁ
 = 0;

187 
	`u´v_ä“
((**)
gAvaabËCÚv”‹rs
);

188 
gAvaabËCÚv”‹rs
 = 
NULL
;

189 
	`umtx_uÆock
(&
úvCacheMu‹x
);

191 
	}
}

197 
UBoŞ
 
U_CALLCONV
 
	$uúv_ş—nup
() {

198 
	`uúv_æushCache
();

199 ià(
SHARED_DATA_HASHTABLE
 !ğ
NULL
 && 
	`uhash_couÁ
(SHARED_DATA_HASHTABLE) == 0) {

200 
	`uhash_şo£
(
SHARED_DATA_HASHTABLE
);

201 
SHARED_DATA_HASHTABLE
 = 
NULL
;

205 
	`uúv_æushAvaabËCÚv”‹rCache
();

207 #ià!
U_CHARSET_IS_UTF8


208 
gDeçuÉCÚv”‹rName
 = 
NULL
;

209 
gDeçuÉCÚv”‹rNameBufãr
[0] = 0;

210 
gDeçuÉCÚv”‹rCÚšsO±iÚ
 = 
FALSE
;

211 
gDeçuÉAlgÜ™hmicSh¬edD©a
 = 
NULL
;

214 
	`umtx_de¡roy
(&
úvCacheMu‹x
);

217  (
SHARED_DATA_HASHTABLE
 =ğ
NULL
);

218 
	}
}

220 
UBoŞ
 
U_CALLCONV


221 
	$isCnvAcû±abË
(*
cÚ‹xt
,

222 cÚ¡ *
ty³
, cÚ¡ *
Çme
,

223 cÚ¡ 
UD©aInfo
 *
pInfo
) {

224  (
UBoŞ
)(

225 
pInfo
->
size
>=20 &&

226 
pInfo
->
isBigEndŸn
==
U_IS_BIG_ENDIAN
 &&

227 
pInfo
->
ch¬£tFamy
==
U_CHARSET_FAMILY
 &&

228 
pInfo
->
sizeofUCh¬
==
U_SIZEOF_UCHAR
 &&

229 
pInfo
->
d©aFÜm©
[0]==0x63 &&

230 
pInfo
->
d©aFÜm©
[1]==0x6e &&

231 
pInfo
->
d©aFÜm©
[2]==0x76 &&

232 
pInfo
->
d©aFÜm©
[3]==0x74 &&

233 
pInfo
->
fÜm©V”siÚ
[0]==6);

234 
	}
}

239 
UCÚv”‹rSh¬edD©a
*

240 
	$uúv_d©a_unFÏ‰’ClÚe
(
UCÚv”‹rLßdArgs
 *
pArgs
, 
UD©aMemÜy
 *
pD©a
, 
UE¼ÜCode
 *
¡©us
)

243 cÚ¡ 
ušt8_t
 *
¿w
 = (cÚ¡ ušt8_ˆ*)
	`ud©a_g‘MemÜy
(
pD©a
);

244 cÚ¡ 
UCÚv”‹rSticD©a
 *
sourû
 = (cÚ¡ UCÚv”‹rSticD©¨*è
¿w
;

245 
UCÚv”‹rSh¬edD©a
 *
d©a
;

246 
UCÚv”‹rTy³
 
ty³
 = (UCÚv”‹rTy³)
sourû
->
cÚv”siÚTy³
;

248 if(
	`U_FAILURE
(*
¡©us
))

249  
NULL
;

251 ifĞ(
ušt16_t
)
ty³
 >ğ
UCNV_NUMBER_OF_SUPPORTED_CONVERTER_TYPES
 ||

252 
cÚv”‹rD©a
[
ty³
] =ğ
NULL
 ||

253 
cÚv”‹rD©a
[
ty³
]->
»ã»nûCouÁ”
 != 1 ||

254 
sourû
->
¡ruùSize
 !ğ(
UCÚv”‹rSticD©a
))

256 *
¡©us
 = 
U_INVALID_TABLE_FORMAT
;

257  
NULL
;

260 
d©a
 = (
UCÚv”‹rSh¬edD©a
 *)
	`u´v_m®loc
((UConverterSharedData));

261 if(
d©a
 =ğ
NULL
) {

262 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

263  
NULL
;

267 
	`u´v_memıy
(
d©a
, 
cÚv”‹rD©a
[
ty³
], (
UCÚv”‹rSh¬edD©a
));

280 
d©a
->
bË
 = (
UCÚv”‹rTabË
 *)
	`u´v_m®loc
((UConverterTable));

281 if(
d©a
->
bË
 =ğ
NULL
) {

282 
	`u´v_ä“
(
d©a
);

283 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

284  
NULL
;

286 
	`u´v_mem£t
(
d©a
->
bË
, 0, (
UCÚv”‹rTabË
));

289 
d©a
->
¡©icD©a
 = 
sourû
;

291 
d©a
->
sh¬edD©aCached
 = 
FALSE
;

294 
d©a
->
d©aMemÜy
 = (*)
pD©a
;

296 if(
d©a
->
im¶
->
lßd
 !ğ
NULL
) {

297 
d©a
->
im¶
->
	`lßd
(d©a, 
pArgs
, 
¿w
 + 
sourû
->
¡ruùSize
, 
¡©us
);

298 if(
	`U_FAILURE
(*
¡©us
)) {

299 
	`u´v_ä“
(
d©a
->
bË
);

300 
	`u´v_ä“
(
d©a
);

301  
NULL
;

304  
d©a
;

305 
	}
}

311 
UCÚv”‹rSh¬edD©a
 *
	$ü—‹CÚv”‹rFromFe
(
UCÚv”‹rLßdArgs
 *
pArgs
, 
UE¼ÜCode
 * 
”r
)

313 
UD©aMemÜy
 *
d©a
;

314 
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
;

316 
	`UTRACE_ENTRY_OC
(
UTRACE_UCNV_LOAD
);

318 ià(
	`U_FAILURE
 (*
”r
)) {

319 
	`UTRACE_EXIT_STATUS
(*
”r
);

320  
NULL
;

323 
	`UTRACE_DATA2
(
UTRACE_OPEN_CLOSE
, "lßd cÚv”‹¸% äom…ackag%s", 
pArgs
->
Çme
,…Args->
pkg
);

325 
d©a
 = 
	`ud©a_İ’Choiû
(
pArgs
->
pkg
, 
DATA_TYPE
,…Args->
Çme
, 
isCnvAcû±abË
, 
NULL
, 
”r
);

326 if(
	`U_FAILURE
(*
”r
))

328 
	`UTRACE_EXIT_STATUS
(*
”r
);

329  
NULL
;

332 
sh¬edD©a
 = 
	`uúv_d©a_unFÏ‰’ClÚe
(
pArgs
, 
d©a
, 
”r
);

333 if(
	`U_FAILURE
(*
”r
))

335 
	`ud©a_şo£
(
d©a
);

336 
	`UTRACE_EXIT_STATUS
(*
”r
);

337  
NULL
;

347 
	`UTRACE_EXIT_PTR_STATUS
(
sh¬edD©a
, *
”r
);

348  
sh¬edD©a
;

349 
	}
}

353 cÚ¡ 
UCÚv”‹rSh¬edD©a
 *

354 
	$g‘AlgÜ™hmicTy³FromName
(cÚ¡ *
»®Name
)

356 
ušt32_t
 
mid
, 
¡¬t
, 
lim™
;

357 
ušt32_t
 
Ï¡Mid
;

358 
»suÉ
;

359 
¡r³dName
[
UCNV_MAX_CONVERTER_NAME_LENGTH
];

362 
	`uúv_io_¡rFÜCom·»
(
¡r³dName
, 
»®Name
);

365 
¡¬t
 = 0;

366 
lim™
 = (
úvNameTy³
)/(cnvNameType[0]);

367 
mid
 = 
lim™
;

368 
Ï¡Mid
 = 
UINT32_MAX
;

371 
mid
 = (
ušt32_t
)((
¡¬t
 + 
lim™
) / 2);

372 ià(
Ï¡Mid
 =ğ
mid
) {

375 
Ï¡Mid
 = 
mid
;

376 
»suÉ
 = 
	`u´v_¡rcmp
(
¡r³dName
, 
úvNameTy³
[
mid
].
Çme
);

378 ià(
»suÉ
 < 0) {

379 
lim™
 = 
mid
;

380 } ià(
»suÉ
 > 0) {

381 
¡¬t
 = 
mid
;

383  
cÚv”‹rD©a
[
úvNameTy³
[
mid
].
ty³
];

387  
NULL
;

388 
	}
}

398 
	#UCNV_CACHE_LOAD_FACTOR
 2

	)

407 
	$uúv_sh¬eCÚv”‹rD©a
(
UCÚv”‹rSh¬edD©a
 * 
d©a
)

409 
UE¼ÜCode
 
”r
 = 
U_ZERO_ERROR
;

413 ià(
SHARED_DATA_HASHTABLE
 =ğ
NULL
)

415 
SHARED_DATA_HASHTABLE
 = 
	`uhash_İ’Size
(
uhash_hashCh¬s
, 
uhash_com·»Ch¬s
, 
NULL
,

416 
	`uúv_io_couÁKnownCÚv”‹rs
(&
”r
)*
UCNV_CACHE_LOAD_FACTOR
,

417 &
”r
);

418 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_UCNV
, 
uúv_ş—nup
);

420 ià(
	`U_FAILURE
(
”r
))

436 
d©a
->
sh¬edD©aCached
 = 
TRUE
;

438 
	`uhash_put
(
SHARED_DATA_HASHTABLE
,

439 (*è
d©a
->
¡©icD©a
->
Çme
,

441 
d©a
,

442 &
”r
);

443 
	`UCNV_DEBUG_LOG
("put", 
d©a
->
¡©icD©a
->
Çme
,data);

445 
	}
}

453 
UCÚv”‹rSh¬edD©a
 *

454 
	$uúv_g‘Sh¬edCÚv”‹rD©a
(cÚ¡ *
Çme
)

457 ià(
SHARED_DATA_HASHTABLE
 =ğ
NULL
)

459  
NULL
;

463 
UCÚv”‹rSh¬edD©a
 *
rc
;

465 
rc
 = (
UCÚv”‹rSh¬edD©a
*)
	`uhash_g‘
(
SHARED_DATA_HASHTABLE
, 
Çme
);

466 
	`UCNV_DEBUG_LOG
("g‘",
Çme
,
rc
);

467  
rc
;

469 
	}
}

482 
UBoŞ


483 
	$uúv_d–‘eSh¬edCÚv”‹rD©a
(
UCÚv”‹rSh¬edD©a
 * 
d—dSh¬edD©a
)

485 
	`UTRACE_ENTRY_OC
(
UTRACE_UCNV_UNLOAD
);

486 
	`UTRACE_DATA2
(
UTRACE_OPEN_CLOSE
, "uÆßd cÚv”‹¸% sh¬ed d©¨%p", 
d—dSh¬edD©a
->
¡©icD©a
->
Çme
, deadSharedData);

488 ià(
d—dSh¬edD©a
->
»ã»nûCouÁ”
 > 0) {

489 
	`UTRACE_EXIT_VALUE
((
št32_t
)
FALSE
);

490  
FALSE
;

493 ià(
d—dSh¬edD©a
->
im¶
->
uÆßd
 !ğ
NULL
) {

494 
d—dSh¬edD©a
->
im¶
->
	`uÆßd
(deadSharedData);

497 if(
d—dSh¬edD©a
->
d©aMemÜy
 !ğ
NULL
)

499 
UD©aMemÜy
 *
d©a
 = (UD©aMemÜy*)
d—dSh¬edD©a
->
d©aMemÜy
;

500 
	`ud©a_şo£
(
d©a
);

503 if(
d—dSh¬edD©a
->
bË
 !ğ
NULL
)

505 
	`u´v_ä“
(
d—dSh¬edD©a
->
bË
);

511 if(
d—dSh¬edD©a
->
¡©icD©aOwÃd
 =ğ
TRUE
)

513 
	`u´v_ä“
((*)
d—dSh¬edD©a
->
¡©icD©a
);

519 
	`u´v_mem£t
(
d—dSh¬edD©a
->0, (*deadSharedData));

522 
	`u´v_ä“
(
d—dSh¬edD©a
);

524 
	`UTRACE_EXIT_VALUE
((
št32_t
)
TRUE
);

525  
TRUE
;

526 
	}
}

532 
UCÚv”‹rSh¬edD©a
 *

533 
	$uúv_lßd
(
UCÚv”‹rLßdArgs
 *
pArgs
, 
UE¼ÜCode
 *
”r
) {

534 
UCÚv”‹rSh¬edD©a
 *
mySh¬edCÚv”‹rD©a
;

536 if(
”r
 =ğ
NULL
 || 
	`U_FAILURE
(*err)) {

537  
NULL
;

540 if(
pArgs
->
pkg
 !ğ
NULL
 && *pArgs->pkg != 0) {

542  
	`ü—‹CÚv”‹rFromFe
(
pArgs
, 
”r
);

545 
mySh¬edCÚv”‹rD©a
 = 
	`uúv_g‘Sh¬edCÚv”‹rD©a
(
pArgs
->
Çme
);

546 ià(
mySh¬edCÚv”‹rD©a
 =ğ
NULL
)

549 
mySh¬edCÚv”‹rD©a
 = 
	`ü—‹CÚv”‹rFromFe
(
pArgs
, 
”r
);

550 ià(
	`U_FAILURE
 (*
”r
è|| (
mySh¬edCÚv”‹rD©a
 =ğ
NULL
))

552  
NULL
;

554 ià(!
pArgs
->
ÚlyTe¡IsLßdabË
)

557 
	`uúv_sh¬eCÚv”‹rD©a
(
mySh¬edCÚv”‹rD©a
);

564 
mySh¬edCÚv”‹rD©a
->
»ã»nûCouÁ”
++;

567  
mySh¬edCÚv”‹rD©a
;

568 
	}
}

576 
	$uúv_uÆßd
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
) {

577 if(
sh¬edD©a
 !ğ
NULL
) {

578 ià(
sh¬edD©a
->
»ã»nûCouÁ”
 > 0) {

579 
sh¬edD©a
->
»ã»nûCouÁ”
--;

582 if((
sh¬edD©a
->
»ã»nûCouÁ”
 <ğ0)&&(sh¬edD©a->
sh¬edD©aCached
 =ğ
FALSE
)) {

583 
	`uúv_d–‘eSh¬edCÚv”‹rD©a
(
sh¬edD©a
);

586 
	}
}

589 
	$uúv_uÆßdSh¬edD©aIfR—dy
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
)

596 if(
sh¬edD©a
 !ğ
NULL
 && sh¬edD©a->
»ã»nûCouÁ”
 != ~0) {

597 
	`umtx_lock
(&
úvCacheMu‹x
);

598 
	`uúv_uÆßd
(
sh¬edD©a
);

599 
	`umtx_uÆock
(&
úvCacheMu‹x
);

601 
	}
}

604 
	$uúv_šüem’tRefCouÁ
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
)

611 if(
sh¬edD©a
 !ğ
NULL
 && sh¬edD©a->
»ã»nûCouÁ”
 != ~0) {

612 
	`umtx_lock
(&
úvCacheMu‹x
);

613 
sh¬edD©a
->
»ã»nûCouÁ”
++;

614 
	`umtx_uÆock
(&
úvCacheMu‹x
);

616 
	}
}

626 
	$·r£CÚv”‹rO±iÚs
(cÚ¡ *
šName
,

627 
UCÚv”‹rNameP›ûs
 *
pP›ûs
,

628 
UCÚv”‹rLßdArgs
 *
pArgs
,

629 
UE¼ÜCode
 *
”r
)

631 *
úvName
 = 
pP›ûs
->cnvName;

632 
c
;

633 
št32_t
 
Ën
 = 0;

635 
pArgs
->
Çme
=
šName
;

636 
pArgs
->
loÿË
=
pP›ûs
->locale;

637 
pArgs
->
İtiÚs
=
pP›ûs
->options;

640 (
c
=*
šName
)!=0 && c!=
UCNV_OPTION_SEP_CHAR
) {

641 ià(++
Ën
>=
UCNV_MAX_CONVERTER_NAME_LENGTH
) {

642 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

643 
pP›ûs
->
úvName
[0]=0;

646 *
úvName
++=
c
;

647 
šName
++;

649 *
úvName
=0;

650 
pArgs
->
Çme
=
pP›ûs
->
úvName
;

653 (
c
=*
šName
)!=0) {

654 if(
c
==
UCNV_OPTION_SEP_CHAR
) {

655 ++
šName
;

659 if(
	`u´v_¡ºcmp
(
šName
, "locale=", 7)==0) {

661 *
de¡
=
pP›ûs
->
loÿË
;

664 
šName
+=7;

665 
Ën
=0;

666 (
c
=*
šName
)!=0 && c!=
UCNV_OPTION_SEP_CHAR
) {

667 ++
šName
;

669 if(++
Ën
>=
ULOC_FULLNAME_CAPACITY
) {

670 *
”r
=
U_ILLEGAL_ARGUMENT_ERROR
;

671 
pP›ûs
->
loÿË
[0]=0;

675 *
de¡
++=
c
;

677 *
de¡
=0;

678 } if(
	`u´v_¡ºcmp
(
šName
, "version=", 8)==0) {

680 
šName
+=8;

681 
c
=*
šName
;

682 if(
c
==0) {

683 
pArgs
->
İtiÚs
=(
pP›ûs
->İtiÚs&=~
UCNV_OPTION_VERSION
);

685 } if((
ušt8_t
)(
c
-'0')<10) {

686 
pArgs
->
İtiÚs
=
pP›ûs
->İtiÚs=ÕP›ûs->İtiÚs&~
UCNV_OPTION_VERSION
)|(
ušt32_t
)(
c
-'0');

687 ++
šName
;

689 } if(
	`u´v_¡ºcmp
(
šName
, "swaplfnl", 8)==0) {

690 
šName
+=8;

691 
pArgs
->
İtiÚs
=(
pP›ûs
->İtiÚs|=
UCNV_OPTION_SWAP_LFNL
);

695 ((
c
 = *
šName
++è!ğ0è&& (ø!ğ
UCNV_OPTION_SEP_CHAR
)) {

697 if(
c
==0) {

702 
	}
}

711 
UCÚv”‹rSh¬edD©a
 *

712 
	$uúv_lßdSh¬edD©a
(cÚ¡ *
cÚv”‹rName
,

713 
UCÚv”‹rNameP›ûs
 *
pP›ûs
,

714 
UCÚv”‹rLßdArgs
 *
pArgs
,

715 
UE¼ÜCode
 * 
”r
) {

716 
UCÚv”‹rNameP›ûs
 
¡ackP›ûs
;

717 
UCÚv”‹rLßdArgs
 
¡ackArgs
;

718 
UCÚv”‹rSh¬edD©a
 *
mySh¬edCÚv”‹rD©a
 = 
NULL
;

719 
UE¼ÜCode
 
š‹º®E¼ÜCode
 = 
U_ZERO_ERROR
;

720 
UBoŞ
 
mayCÚšO±iÚ
 = 
TRUE
;

721 
UBoŞ
 
checkFÜAlgÜ™hmic
 = 
TRUE
;

723 ià(
	`U_FAILURE
 (*
”r
)) {

724  
NULL
;

727 if(
pP›ûs
 =ğ
NULL
) {

728 if(
pArgs
 !ğ
NULL
) {

733 *
”r
 = 
U_INTERNAL_PROGRAM_ERROR
;

734  
NULL
;

736 
pP›ûs
 = &
¡ackP›ûs
;

738 if(
pArgs
 =ğ
NULL
) {

739 
	`u´v_mem£t
(&
¡ackArgs
, 0, (stackArgs));

740 
¡ackArgs
.
size
 = (
št32_t
)(stackArgs);

741 
pArgs
 = &
¡ackArgs
;

744 
pP›ûs
->
úvName
[0] = 0;

745 
pP›ûs
->
loÿË
[0] = 0;

746 
pP›ûs
->
İtiÚs
 = 0;

748 
pArgs
->
Çme
 = 
cÚv”‹rName
;

749 
pArgs
->
loÿË
 = 
pP›ûs
->locale;

750 
pArgs
->
İtiÚs
 = 
pP›ûs
->options;

753 ià(
cÚv”‹rName
 =ğ
NULL
) {

754 #ià
U_CHARSET_IS_UTF8


755 
pArgs
->
Çme
 = "UTF-8";

756  (
UCÚv”‹rSh¬edD©a
 *)
cÚv”‹rD©a
[
UCNV_UTF8
];

759 
pArgs
->
Çme
 = 
	`uúv_g‘DeçuÉName
();

760 ià(
pArgs
->
Çme
 =ğ
NULL
) {

761 *
”r
 = 
U_MISSING_RESOURCE_ERROR
;

762  
NULL
;

764 
mySh¬edCÚv”‹rD©a
 = (
UCÚv”‹rSh¬edD©a
 *)
gDeçuÉAlgÜ™hmicSh¬edD©a
;

765 
checkFÜAlgÜ™hmic
 = 
FALSE
;

766 
mayCÚšO±iÚ
 = 
gDeçuÉCÚv”‹rCÚšsO±iÚ
;

770 if(
	`UCNV_FAST_IS_UTF8
(
cÚv”‹rName
)) {

772 
pArgs
->
Çme
 = "UTF-8";

773  (
UCÚv”‹rSh¬edD©a
 *)
cÚv”‹rD©a
[
UCNV_UTF8
];

777 
	`·r£CÚv”‹rO±iÚs
(
cÚv”‹rName
, 
pP›ûs
, 
pArgs
, 
”r
);

778 ià(
	`U_FAILURE
(*
”r
)) {

780  
NULL
;

784 
pArgs
->
Çme
 = 
	`uúv_io_g‘CÚv”‹rName
ÕArgs->Çme, &
mayCÚšO±iÚ
, &
š‹º®E¼ÜCode
);

785 ià(
	`U_FAILURE
(
š‹º®E¼ÜCode
è|| 
pArgs
->
Çme
 =ğ
NULL
) {

790 
pArgs
->
Çme
 = 
pP›ûs
->
úvName
;

795 if(
mayCÚšO±iÚ
 && 
pArgs
->
Çme
 !ğ
pP›ûs
->
úvName
) {

796 
	`·r£CÚv”‹rO±iÚs
(
pArgs
->
Çme
, 
pP›ûs
,…Args, 
”r
);

800 ià(
checkFÜAlgÜ™hmic
) {

801 
mySh¬edCÚv”‹rD©a
 = (
UCÚv”‹rSh¬edD©a
 *)
	`g‘AlgÜ™hmicTy³FromName
(
pArgs
->
Çme
);

803 ià(
mySh¬edCÚv”‹rD©a
 =ğ
NULL
)

810 
pArgs
->
Ã¡edLßds
=1;

811 
pArgs
->
pkg
=
NULL
;

813 
	`umtx_lock
(&
úvCacheMu‹x
);

814 
mySh¬edCÚv”‹rD©a
 = 
	`uúv_lßd
(
pArgs
, 
”r
);

815 
	`umtx_uÆock
(&
úvCacheMu‹x
);

816 ià(
	`U_FAILURE
 (*
”r
è|| (
mySh¬edCÚv”‹rD©a
 =ğ
NULL
))

818  
NULL
;

822  
mySh¬edCÚv”‹rD©a
;

823 
	}
}

825 
UCÚv”‹r
 *

826 
	$uúv_ü—‹CÚv”‹r
(
UCÚv”‹r
 *
myUCÚv”‹r
, cÚ¡ *
cÚv”‹rName
, 
UE¼ÜCode
 * 
”r
)

828 
UCÚv”‹rNameP›ûs
 
¡ackP›ûs
;

829 
UCÚv”‹rLßdArgs
 
¡ackArgs
={ (
št32_t
)(UConverterLoadArgs) };

830 
UCÚv”‹rSh¬edD©a
 *
mySh¬edCÚv”‹rD©a
;

832 
	`UTRACE_ENTRY_OC
(
UTRACE_UCNV_OPEN
);

834 if(
	`U_SUCCESS
(*
”r
)) {

835 
	`UTRACE_DATA1
(
UTRACE_OPEN_CLOSE
, "İ’ cÚv”‹¸%s", 
cÚv”‹rName
);

837 
mySh¬edCÚv”‹rD©a
 = 
	`uúv_lßdSh¬edD©a
(
cÚv”‹rName
, &
¡ackP›ûs
, &
¡ackArgs
, 
”r
);

839 
myUCÚv”‹r
 = 
	`uúv_ü—‹CÚv”‹rFromSh¬edD©a
(

840 
myUCÚv”‹r
, 
mySh¬edCÚv”‹rD©a
,

841 &
¡ackArgs
,

842 
”r
);

844 if(
	`U_SUCCESS
(*
”r
)) {

845 
	`UTRACE_EXIT_PTR_STATUS
(
myUCÚv”‹r
, *
”r
);

846  
myUCÚv”‹r
;

851 
	`UTRACE_EXIT_STATUS
(*
”r
);

852  
NULL
;

853 
	}
}

855 
U_CFUNC
 
UBoŞ


856 
	$uúv_ÿnC»©eCÚv”‹r
(cÚ¡ *
cÚv”‹rName
, 
UE¼ÜCode
 *
”r
) {

857 
UCÚv”‹r
 
myUCÚv”‹r
;

858 
UCÚv”‹rNameP›ûs
 
¡ackP›ûs
;

859 
UCÚv”‹rLßdArgs
 
¡ackArgs
={ (
št32_t
)(UConverterLoadArgs) };

860 
UCÚv”‹rSh¬edD©a
 *
mySh¬edCÚv”‹rD©a
;

862 
	`UTRACE_ENTRY_OC
(
UTRACE_UCNV_OPEN
);

864 if(
	`U_SUCCESS
(*
”r
)) {

865 
	`UTRACE_DATA1
(
UTRACE_OPEN_CLOSE
, "‹¡ iàÿÀİ’ cÚv”‹¸%s", 
cÚv”‹rName
);

867 
¡ackArgs
.
ÚlyTe¡IsLßdabË
=
TRUE
;

868 
mySh¬edCÚv”‹rD©a
 = 
	`uúv_lßdSh¬edD©a
(
cÚv”‹rName
, &
¡ackP›ûs
, &
¡ackArgs
, 
”r
);

869 
	`uúv_ü—‹CÚv”‹rFromSh¬edD©a
(

870 &
myUCÚv”‹r
, 
mySh¬edCÚv”‹rD©a
,

871 &
¡ackArgs
,

872 
”r
);

873 
	`uúv_uÆßdSh¬edD©aIfR—dy
(
mySh¬edCÚv”‹rD©a
);

876 
	`UTRACE_EXIT_STATUS
(*
”r
);

877  
	`U_SUCCESS
(*
”r
);

878 
	}
}

880 
UCÚv”‹r
 *

881 
	$uúv_ü—‹AlgÜ™hmicCÚv”‹r
(
UCÚv”‹r
 *
myUCÚv”‹r
,

882 
UCÚv”‹rTy³
 
ty³
,

883 cÚ¡ *
loÿË
, 
ušt32_t
 
İtiÚs
,

884 
UE¼ÜCode
 *
”r
) {

885 
UCÚv”‹r
 *
úv
;

886 cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
;

887 
UCÚv”‹rLßdArgs
 
¡ackArgs
={ (
št32_t
)(UConverterLoadArgs) };

889 
	`UTRACE_ENTRY_OC
(
UTRACE_UCNV_OPEN_ALGORITHMIC
);

890 
	`UTRACE_DATA1
(
UTRACE_OPEN_CLOSE
, "İ’‡lgÜ™hmiøcÚv”‹¸ty³ %d", (
št32_t
)
ty³
);

892 if(
ty³
<0 || 
UCNV_NUMBER_OF_SUPPORTED_CONVERTER_TYPES
<=type) {

893 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

894 
	`UTRACE_EXIT_STATUS
(
U_ILLEGAL_ARGUMENT_ERROR
);

895  
NULL
;

898 
sh¬edD©a
 = 
cÚv”‹rD©a
[
ty³
];

904 if(
sh¬edD©a
 =ğ
NULL
 || sh¬edD©a->
»ã»nûCouÁ”
 != ~0) {

906 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

907 
	`UTRACE_EXIT_STATUS
(
U_ILLEGAL_ARGUMENT_ERROR
);

908  
NULL
;

911 
¡ackArgs
.
Çme
 = "";

912 
¡ackArgs
.
İtiÚs
 = options;

913 
¡ackArgs
.
loÿË
=locale;

914 
úv
 = 
	`uúv_ü—‹CÚv”‹rFromSh¬edD©a
(

915 
myUCÚv”‹r
, (
UCÚv”‹rSh¬edD©a
 *)
sh¬edD©a
,

916 &
¡ackArgs
, 
”r
);

918 
	`UTRACE_EXIT_PTR_STATUS
(
úv
, *
”r
);

919  
úv
;

920 
	}
}

922 
UCÚv”‹r
*

923 
	$uúv_ü—‹CÚv”‹rFromPackage
(cÚ¡ *
·ckageName
, cÚ¡ *
cÚv”‹rName
, 
UE¼ÜCode
 * 
”r
)

925 
UCÚv”‹r
 *
myUCÚv”‹r
;

926 
UCÚv”‹rSh¬edD©a
 *
mySh¬edCÚv”‹rD©a
;

927 
UCÚv”‹rNameP›ûs
 
¡ackP›ûs
;

928 
UCÚv”‹rLßdArgs
 
¡ackArgs
={ (
št32_t
)(UConverterLoadArgs) };

930 
	`UTRACE_ENTRY_OC
(
UTRACE_UCNV_OPEN_PACKAGE
);

932 if(
	`U_FAILURE
(*
”r
)) {

933 
	`UTRACE_EXIT_STATUS
(*
”r
);

934  
NULL
;

937 
	`UTRACE_DATA2
(
UTRACE_OPEN_CLOSE
, "İ’ cÚv”‹¸% äom…ackag%s", 
cÚv”‹rName
, 
·ckageName
);

940 
¡ackP›ûs
.
úvName
[0] = 0;

941 
¡ackP›ûs
.
loÿË
[0] = 0;

942 
¡ackP›ûs
.
İtiÚs
 = 0;

943 
	`·r£CÚv”‹rO±iÚs
(
cÚv”‹rName
, &
¡ackP›ûs
, &
¡ackArgs
, 
”r
);

944 ià(
	`U_FAILURE
(*
”r
)) {

946 
	`UTRACE_EXIT_STATUS
(*
”r
);

947  
NULL
;

949 
¡ackArgs
.
Ã¡edLßds
=1;

950 
¡ackArgs
.
pkg
=
·ckageName
;

953 
mySh¬edCÚv”‹rD©a
 = 
	`ü—‹CÚv”‹rFromFe
(&
¡ackArgs
, 
”r
);

955 ià(
	`U_FAILURE
(*
”r
)) {

956 
	`UTRACE_EXIT_STATUS
(*
”r
);

957  
NULL
;

961 
myUCÚv”‹r
 = 
	`uúv_ü—‹CÚv”‹rFromSh¬edD©a
(
NULL
, 
mySh¬edCÚv”‹rD©a
, &
¡ackArgs
, 
”r
);

963 ià(
	`U_FAILURE
(*
”r
)) {

964 
	`uúv_şo£
(
myUCÚv”‹r
);

965 
	`UTRACE_EXIT_STATUS
(*
”r
);

966  
NULL
;

969 
	`UTRACE_EXIT_PTR_STATUS
(
myUCÚv”‹r
, *
”r
);

970  
myUCÚv”‹r
;

971 
	}
}

974 
UCÚv”‹r
*

975 
	$uúv_ü—‹CÚv”‹rFromSh¬edD©a
(
UCÚv”‹r
 *
myUCÚv”‹r
,

976 
UCÚv”‹rSh¬edD©a
 *
mySh¬edCÚv”‹rD©a
,

977 
UCÚv”‹rLßdArgs
 *
pArgs
,

978 
UE¼ÜCode
 *
”r
)

980 
UBoŞ
 
isCİyLoÿl
;

982 if(
	`U_FAILURE
(*
”r
)) {

983 
	`uúv_uÆßdSh¬edD©aIfR—dy
(
mySh¬edCÚv”‹rD©a
);

984  
myUCÚv”‹r
;

986 if(
myUCÚv”‹r
 =ğ
NULL
)

988 
myUCÚv”‹r
 = (
UCÚv”‹r
 *è
	`u´v_m®loc
 ( (UConverter));

989 if(
myUCÚv”‹r
 =ğ
NULL
)

991 *
”r
 = 
U_MEMORY_ALLOCATION_ERROR
;

992 
	`uúv_uÆßdSh¬edD©aIfR—dy
(
mySh¬edCÚv”‹rD©a
);

993  
NULL
;

995 
isCİyLoÿl
 = 
FALSE
;

997 
isCİyLoÿl
 = 
TRUE
;

1001 
	`u´v_mem£t
(
myUCÚv”‹r
, 0, (
UCÚv”‹r
));

1002 
myUCÚv”‹r
->
isCİyLoÿl
 = isCopyLocal;

1004 
myUCÚv”‹r
->
sh¬edD©a
 = 
mySh¬edCÚv”‹rD©a
;

1005 
myUCÚv”‹r
->
İtiÚs
 = 
pArgs
->options;

1006 if(!
pArgs
->
ÚlyTe¡IsLßdabË
) {

1007 
myUCÚv”‹r
->
´eFromUFœ¡CP
 = 
U_SENTINEL
;

1008 
myUCÚv”‹r
->
äomCh¬E¼ÜBehaviour
 = 
UCNV_TO_U_DEFAULT_CALLBACK
;

1009 
myUCÚv”‹r
->
äomUCh¬E¼ÜBehaviour
 = 
UCNV_FROM_U_DEFAULT_CALLBACK
;

1010 
myUCÚv”‹r
->
toUnicodeStus
 = 
mySh¬edCÚv”‹rD©a
->toUnicodeStatus;

1011 
myUCÚv”‹r
->
maxBy‹sP”UCh¬
 = 
mySh¬edCÚv”‹rD©a
->
¡©icD©a
->
maxBy‹sP”Ch¬
;

1012 
myUCÚv”‹r
->
subCh¬1
 = 
mySh¬edCÚv”‹rD©a
->
¡©icD©a
->subChar1;

1013 
myUCÚv”‹r
->
subCh¬L’
 = 
mySh¬edCÚv”‹rD©a
->
¡©icD©a
->subCharLen;

1014 
myUCÚv”‹r
->
subCh¬s
 = (
ušt8_t
 *)myUCÚv”‹r->
subUCh¬s
;

1015 
	`u´v_memıy
(
myUCÚv”‹r
->
subCh¬s
, 
mySh¬edCÚv”‹rD©a
->
¡©icD©a
->
subCh¬
, myUCÚv”‹r->
subCh¬L’
);

1016 
myUCÚv”‹r
->
toUC®lbackR—sÚ
 = 
UCNV_ILLEGAL
;

1019 if(
mySh¬edCÚv”‹rD©a
->
im¶
->
İ’
 !ğ
NULL
) {

1020 
mySh¬edCÚv”‹rD©a
->
im¶
->
	`İ’
(
myUCÚv”‹r
, 
pArgs
, 
”r
);

1021 if(
	`U_FAILURE
(*
”r
è&& !
pArgs
->
ÚlyTe¡IsLßdabË
) {

1023 
	`uúv_şo£
(
myUCÚv”‹r
);

1024  
NULL
;

1028  
myUCÚv”‹r
;

1029 
	}
}

1033 
U_CAPI
 
št32_t
 
U_EXPORT2


1034 
	$uúv_æushCache
 ()

1036 
UCÚv”‹rSh¬edD©a
 *
mySh¬edD©a
 = 
NULL
;

1037 
št32_t
 
pos
;

1038 
št32_t
 
bËD–‘edNum
 = 0;

1039 cÚ¡ 
UHashEËm’t
 *
e
;

1041 
št32_t
 
i
, 
»maššg
;

1043 
	`UTRACE_ENTRY_OC
(
UTRACE_UCNV_FLUSH_CACHE
);

1046 
	`u_æushDeçuÉCÚv”‹r
();

1051 ià(
SHARED_DATA_HASHTABLE
 =ğ
NULL
) {

1052 
	`UTRACE_EXIT_VALUE
((
št32_t
)0);

1067 
	`umtx_lock
(&
úvCacheMu‹x
);

1074 
i
 = 0;

1076 
»maššg
 = 0;

1077 
pos
 = -1;

1078 (
e
 = 
	`uhash_ÃxtEËm’t
 (
SHARED_DATA_HASHTABLE
, &
pos
)è!ğ
NULL
)

1080 
mySh¬edD©a
 = (
UCÚv”‹rSh¬edD©a
 *è
e
->
v®ue
.
poš‹r
;

1082 ià(
mySh¬edD©a
->
»ã»nûCouÁ”
 == 0)

1084 
bËD–‘edNum
++;

1086 
	`UCNV_DEBUG_LOG
("d–",
mySh¬edD©a
->
¡©icD©a
->
Çme
,mySharedData);

1088 
	`uhash_»moveEËm’t
(
SHARED_DATA_HASHTABLE
, 
e
);

1089 
mySh¬edD©a
->
sh¬edD©aCached
 = 
FALSE
;

1090 
	`uúv_d–‘eSh¬edCÚv”‹rD©a
 (
mySh¬edD©a
);

1092 ++
»maššg
;

1095 } ++
i
 =ğ1 && 
»maššg
 > 0);

1096 
	`umtx_uÆock
(&
úvCacheMu‹x
);

1098 
	`UTRACE_DATA1
(
UTRACE_INFO
, "uúv_æushCache(èex™ w™h %d cÚv”‹r »maššg", 
»maššg
);

1100 
	`UTRACE_EXIT_VALUE
(
bËD–‘edNum
);

1101  
bËD–‘edNum
;

1102 
	}
}

1106 
UBoŞ
 
	$haveAvaabËCÚv”‹rLi¡
(
UE¼ÜCode
 *
pE¼ÜCode
) {

1107 
ÃedIn™
;

1108 
	`UMTX_CHECK
(&
úvCacheMu‹x
, (
gAvaabËCÚv”‹rs
 =ğ
NULL
), 
ÃedIn™
);

1109 ià(
ÃedIn™
) {

1110 
UCÚv”‹r
 
‹mpCÚv”‹r
;

1111 
UEnum”©iÚ
 *
®lCÚvEnum
 = 
NULL
;

1112 
ušt16_t
 
idx
;

1113 
ušt16_t
 
loÿlCÚv”‹rCouÁ
;

1114 
ušt16_t
 
®lCÚv”‹rCouÁ
;

1115 
UE¼ÜCode
 
loÿlStus
;

1116 cÚ¡ *
cÚv”‹rName
;

1117 cÚ¡ **
loÿlCÚv”‹rLi¡
;

1119 
®lCÚvEnum
 = 
	`uúv_İ’AÎNames
(
pE¼ÜCode
);

1120 
®lCÚv”‹rCouÁ
 = 
	`u’um_couÁ
(
®lCÚvEnum
, 
pE¼ÜCode
);

1121 ià(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1122  
FALSE
;

1126 
loÿlCÚv”‹rLi¡
 = (cÚ¡ **è
	`u´v_m®loc
(
®lCÚv”‹rCouÁ
 * (*));

1127 ià(!
loÿlCÚv”‹rLi¡
) {

1128 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

1129  
FALSE
;

1133 
loÿlStus
 = 
U_ZERO_ERROR
;

1134 
	`uúv_şo£
(
	`uúv_ü—‹CÚv”‹r
(&
‹mpCÚv”‹r
, 
NULL
, &
loÿlStus
));

1136 
loÿlCÚv”‹rCouÁ
 = 0;

1138 
idx
 = 0; idx < 
®lCÚv”‹rCouÁ
; idx++) {

1139 
loÿlStus
 = 
U_ZERO_ERROR
;

1140 
cÚv”‹rName
 = 
	`u’um_Ãxt
(
®lCÚvEnum
, 
NULL
, &
loÿlStus
);

1141 ià(
	`uúv_ÿnC»©eCÚv”‹r
(
cÚv”‹rName
, &
loÿlStus
)) {

1142 
loÿlCÚv”‹rLi¡
[
loÿlCÚv”‹rCouÁ
++] = 
cÚv”‹rName
;

1145 
	`u’um_şo£
(
®lCÚvEnum
);

1147 
	`umtx_lock
(&
úvCacheMu‹x
);

1148 ià(
gAvaabËCÚv”‹rs
 =ğ
NULL
) {

1149 
gAvaabËCÚv”‹rCouÁ
 = 
loÿlCÚv”‹rCouÁ
;

1150 
gAvaabËCÚv”‹rs
 = 
loÿlCÚv”‹rLi¡
;

1151 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_UCNV
, 
uúv_ş—nup
);

1154 
	`u´v_ä“
((**)
loÿlCÚv”‹rLi¡
);

1156 
	`umtx_uÆock
(&
úvCacheMu‹x
);

1158  
TRUE
;

1159 
	}
}

1161 
U_CFUNC
 
ušt16_t


1162 
	$uúv_bld_couÁAvaabËCÚv”‹rs
(
UE¼ÜCode
 *
pE¼ÜCode
) {

1163 ià(
	`haveAvaabËCÚv”‹rLi¡
(
pE¼ÜCode
)) {

1164  
gAvaabËCÚv”‹rCouÁ
;

1167 
	}
}

1169 
U_CFUNC
 const *

1170 
	$uúv_bld_g‘AvaabËCÚv”‹r
(
ušt16_t
 
n
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1171 ià(
	`haveAvaabËCÚv”‹rLi¡
(
pE¼ÜCode
)) {

1172 ià(
n
 < 
gAvaabËCÚv”‹rCouÁ
) {

1173  
gAvaabËCÚv”‹rs
[
n
];

1175 *
pE¼ÜCode
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

1177  
NULL
;

1178 
	}
}

1182 #ià!
U_CHARSET_IS_UTF8


1195 
U_INLINE
 

1196 
	$š‹º®S‘Name
(cÚ¡ *
Çme
, 
UE¼ÜCode
 *
¡©us
) {

1197 
UCÚv”‹rNameP›ûs
 
¡ackP›ûs
;

1198 
UCÚv”‹rLßdArgs
 
¡ackArgs
={ (
št32_t
)(UConverterLoadArgs) };

1199 
št32_t
 
Ëngth
=(št32_t)(
	`u´v_¡¾’
(
Çme
));

1200 
UBoŞ
 
cÚšsO±iÚ
 = (UBoŞ)(
	`u´v_¡rchr
(
Çme
, 
UCNV_OPTION_SEP_CHAR
è!ğ
NULL
);

1201 cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
®gÜ™hmicSh¬edD©a
;

1203 
¡ackArgs
.
Çme
 =‚ame;

1204 if(
cÚšsO±iÚ
) {

1205 
¡ackP›ûs
.
úvName
[0] = 0;

1206 
¡ackP›ûs
.
loÿË
[0] = 0;

1207 
¡ackP›ûs
.
İtiÚs
 = 0;

1208 
	`·r£CÚv”‹rO±iÚs
(
Çme
, &
¡ackP›ûs
, &
¡ackArgs
, 
¡©us
);

1209 if(
	`U_FAILURE
(*
¡©us
)) {

1213 
®gÜ™hmicSh¬edD©a
 = 
	`g‘AlgÜ™hmicTy³FromName
(
¡ackArgs
.
Çme
);

1215 
	`umtx_lock
(&
úvCacheMu‹x
);

1217 
gDeçuÉAlgÜ™hmicSh¬edD©a
 = 
®gÜ™hmicSh¬edD©a
;

1218 
gDeçuÉCÚv”‹rCÚšsO±iÚ
 = 
cÚšsO±iÚ
;

1219 
	`u´v_memıy
(
gDeçuÉCÚv”‹rNameBufãr
, 
Çme
, 
Ëngth
);

1220 
gDeçuÉCÚv”‹rNameBufãr
[
Ëngth
]=0;

1224 
gDeçuÉCÚv”‹rName
 = 
gDeçuÉCÚv”‹rNameBufãr
;

1226 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_UCNV
, 
uúv_ş—nup
);

1228 
	`umtx_uÆock
(&
úvCacheMu‹x
);

1229 
	}
}

1240 
U_CAPI
 cÚ¡ * 
U_EXPORT2


1241 
	$uúv_g‘DeçuÉName
() {

1242 #ià
U_CHARSET_IS_UTF8


1246 cÚ¡ *
Çme
;

1252 
	`UMTX_CHECK
(&
úvCacheMu‹x
, 
gDeçuÉCÚv”‹rName
, 
Çme
);

1253 if(
Çme
==
NULL
) {

1254 
UE¼ÜCode
 
”rÜCode
 = 
U_ZERO_ERROR
;

1255 
UCÚv”‹r
 *
úv
 = 
NULL
;

1257 
Çme
 = 
	`u´v_g‘DeçuÉCod•age
();

1260 if(
Çme
 !ğ
NULL
) {

1261 
úv
 = 
	`uúv_İ’
(
Çme
, &
”rÜCode
);

1262 if(
	`U_SUCCESS
(
”rÜCode
è&& 
úv
 !ğ
NULL
) {

1263 
Çme
 = 
	`uúv_g‘Name
(
úv
, &
”rÜCode
);

1267 if(
Çme
 =ğ
NULL
 ||‚ame[0] == 0

1268 || 
	`U_FAILURE
(
”rÜCode
è|| 
úv
 =ğ
NULL


1269 || 
	`u´v_¡¾’
(
Çme
)>=(
gDeçuÉCÚv”‹rNameBufãr
))

1272 #ià(
U_CHARSET_FAMILY
 =ğ
U_ASCII_FAMILY
)

1273 
Çme
 = "US-ASCII";

1275 #–ià
	`defšed
(
OS390
)

1276 
Çme
 = "ibm-1047_P100-1995" 
UCNV_SWAP_LFNL_OPTION_STRING
;

1278 
Çme
 = "ibm-37_P100-1995";

1282 
	`š‹º®S‘Name
(
Çme
, &
”rÜCode
);

1285 
	`uúv_şo£
(
úv
);

1288  
Çme
;

1290 
	}
}

1296 
U_CAPI
 
U_EXPORT2


1297 
	$uúv_£tDeçuÉName
(cÚ¡ *
cÚv”‹rName
) {

1298 #ià!
U_CHARSET_IS_UTF8


1299 if(
cÚv”‹rName
==
NULL
) {

1301 
gDeçuÉCÚv”‹rName
=
NULL
;

1303 
UE¼ÜCode
 
”rÜCode
 = 
U_ZERO_ERROR
;

1304 
UCÚv”‹r
 *
úv
 = 
NULL
;

1305 cÚ¡ *
Çme
 = 
NULL
;

1308 
úv
 = 
	`uúv_İ’
(
cÚv”‹rName
, &
”rÜCode
);

1309 if(
	`U_SUCCESS
(
”rÜCode
è&& 
úv
 !ğ
NULL
) {

1310 
Çme
 = 
	`uúv_g‘Name
(
úv
, &
”rÜCode
);

1313 if(
	`U_SUCCESS
(
”rÜCode
è&& 
Çme
!=
NULL
) {

1314 
	`š‹º®S‘Name
(
Çme
, &
”rÜCode
);

1319 
	`uúv_şo£
(
úv
);

1322 
	`u_æushDeçuÉCÚv”‹r
();

1325 
	}
}

1331 #ià!
UCONFIG_NO_LEGACY_CONVERSION


1333 
U_CAPI
 
št32_t
 
U_EXPORT2


1334 
	$uúv_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

1335 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

1336 
UE¼ÜCode
 *
pE¼ÜCode
) {

1337 cÚ¡ 
UD©aInfo
 *
pInfo
;

1338 
št32_t
 
h—d”Size
;

1340 cÚ¡ 
ušt8_t
 *
šBy‹s
;

1341 
ušt8_t
 *
outBy‹s
;

1343 
ušt32_t
 
off£t
, 
couÁ
, 
¡©icD©aSize
;

1344 
št32_t
 
size
;

1346 cÚ¡ 
UCÚv”‹rSticD©a
 *
šSticD©a
;

1347 
UCÚv”‹rSticD©a
 *
outSticD©a
;

1349 cÚ¡ 
_MBCSH—d”
 *
šMBCSH—d”
;

1350 
_MBCSH—d”
 *
outMBCSH—d”
;

1351 
_MBCSH—d”
 
mbcsH—d”
;

1352 
ušt32_t
 
mbcsH—d”L’gth
;

1353 
UBoŞ
 
noFromU
=
FALSE
;

1355 
ušt8_t
 
ouutTy³
;

1357 
št32_t
 
maxFa¡UCh¬
, 
mbcsIndexL’gth
;

1359 cÚ¡ 
št32_t
 *
šExtIndexes
;

1360 
št32_t
 
extOff£t
;

1363 
h—d”Size
=
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
pE¼ÜCode
);

1364 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1369 
pInfo
=(cÚ¡ 
UD©aInfo
 *)((cÚ¡ *)
šD©a
+4);

1371 
pInfo
->
d©aFÜm©
[0]==0x63 &&

1372 
pInfo
->
d©aFÜm©
[1]==0x6e &&

1373 
pInfo
->
d©aFÜm©
[2]==0x76 &&

1374 
pInfo
->
d©aFÜm©
[3]==0x74 &&

1375 
pInfo
->
fÜm©V”siÚ
[0]==6 &&

1376 
pInfo
->
fÜm©V”siÚ
[1]>=2

1378 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swap(): data format %02x.%02x.%02x.%02x (format version %02x.%02x) is‚ot„ecognized‡s‡n ICU .cnv conversionable\n",

1379 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

1380 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3],

1381 
pInfo
->
fÜm©V”siÚ
[0],…Info->formatVersion[1]);

1382 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

1386 
šBy‹s
=(cÚ¡ 
ušt8_t
 *)
šD©a
+
h—d”Size
;

1387 
outBy‹s
=(
ušt8_t
 *)
outD©a
+
h—d”Size
;

1390 
šSticD©a
=(cÚ¡ 
UCÚv”‹rSticD©a
 *)
šBy‹s
;

1391 
outSticD©a
=(
UCÚv”‹rSticD©a
 *)
outBy‹s
;

1393 if(
Ëngth
<0) {

1394 
¡©icD©aSize
=
ds
->
	`»adUIÁ32
(
šSticD©a
->
¡ruùSize
);

1396 
Ëngth
-=
h—d”Size
;

1397 ifĞ
Ëngth
<(
UCÚv”‹rSticD©a
) ||

1398 (
ušt32_t
)
Ëngth
<(
¡©icD©aSize
=
ds
->
	`»adUIÁ32
(
šSticD©a
->
¡ruùSize
))

1400 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swap():oo few bytes (%d‡fter header) for‡n ICU .cnv conversionable\n",

1401 
Ëngth
);

1402 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1407 if(
Ëngth
>=0) {

1409 if(
šSticD©a
!=
outSticD©a
) {

1410 
	`u´v_memıy
(
outSticD©a
, 
šSticD©a
, 
¡©icD©aSize
);

1413 
ds
->
	`sw­A¼ay32
(ds, &
šSticD©a
->
¡ruùSize
, 4,

1414 &
outSticD©a
->
¡ruùSize
, 
pE¼ÜCode
);

1415 
ds
->
	`sw­A¼ay32
(ds, &
šSticD©a
->
cod•age
, 4,

1416 &
outSticD©a
->
cod•age
, 
pE¼ÜCode
);

1418 
ds
->
	`sw­InvCh¬s
(ds, 
šSticD©a
->
Çme
, (
št32_t
)
	`u´v_¡¾’
(inStaticData->name),

1419 
outSticD©a
->
Çme
, 
pE¼ÜCode
);

1420 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1421 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swap():ƒrror swapping converter‚ame\n");

1426 
šBy‹s
+=
¡©icD©aSize
;

1427 
outBy‹s
+=
¡©icD©aSize
;

1428 if(
Ëngth
>=0) {

1429 
Ëngth
-=(
št32_t
)
¡©icD©aSize
;

1433 if(
šSticD©a
->
cÚv”siÚTy³
==
UCNV_MBCS
) {

1435 
šMBCSH—d”
=(cÚ¡ 
_MBCSH—d”
 *)
šBy‹s
;

1436 
outMBCSH—d”
=(
_MBCSH—d”
 *)
outBy‹s
;

1438 if(0<=
Ëngth
 &&†’gth<(
_MBCSH—d”
)) {

1439 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swap():oo few bytes (%d‡fter headers) for‡n ICU MBCS .cnv conversionable\n",

1440 
Ëngth
);

1441 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1444 if(
šMBCSH—d”
->
v”siÚ
[0]==4 && inMBCSHeader->version[1]>=1) {

1445 
mbcsH—d”L’gth
=
MBCS_HEADER_V4_LENGTH
;

1446 } if(
šMBCSH—d”
->
v”siÚ
[0]==5 && inMBCSHeader->version[1]>=3 &&

1447 ((
mbcsH—d”
.
İtiÚs
=
ds
->
	`»adUIÁ32
(
šMBCSH—d”
->options))&

1448 
MBCS_OPT_UNKNOWN_INCOMPATIBLE_MASK
)==0

1450 
mbcsH—d”L’gth
=
mbcsH—d”
.
İtiÚs
&
MBCS_OPT_LENGTH_MASK
;

1451 
noFromU
=(
UBoŞ
)((
mbcsH—d”
.
İtiÚs
&
MBCS_OPT_NO_FROM_U
)!=0);

1453 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swap(): unsupported _MBCSHeader.version %d.%d\n",

1454 
šMBCSH—d”
->
v”siÚ
[0], inMBCSHeader->version[1]);

1455 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

1459 
	`u´v_memıy
(
mbcsH—d”
.
v”siÚ
, 
šMBCSH—d”
->version, 4);

1460 
mbcsH—d”
.
couÁS‹s
ğ
ds
->
	`»adUIÁ32
(
šMBCSH—d”
->countStates);

1461 
mbcsH—d”
.
couÁToUF®lbacks
ğ
ds
->
	`»adUIÁ32
(
šMBCSH—d”
->countToUFallbacks);

1462 
mbcsH—d”
.
off£tToUCodeUn™s
ğ
ds
->
	`»adUIÁ32
(
šMBCSH—d”
->offsetToUCodeUnits);

1463 
mbcsH—d”
.
off£tFromUTabË
ğ
ds
->
	`»adUIÁ32
(
šMBCSH—d”
->offsetFromUTable);

1464 
mbcsH—d”
.
off£tFromUBy‹s
ğ
ds
->
	`»adUIÁ32
(
šMBCSH—d”
->offsetFromUBytes);

1465 
mbcsH—d”
.
æags
ğ
ds
->
	`»adUIÁ32
(
šMBCSH—d”
->flags);

1466 
mbcsH—d”
.
äomUBy‹sL’gth
ğ
ds
->
	`»adUIÁ32
(
šMBCSH—d”
->fromUBytesLength);

1469 
extOff£t
=(
št32_t
)(
mbcsH—d”
.
æags
>>8);

1470 
ouutTy³
=(
ušt8_t
)
mbcsH—d”
.
æags
;

1471 if(
noFromU
 && 
ouutTy³
==
MBCS_OUTPUT_1
) {

1472 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swap(): unsupported combination of makeconv --small with SBCS\n");

1473 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

1478 
ouutTy³
) {

1479 
MBCS_OUTPUT_1
:

1480 
MBCS_OUTPUT_2
:

1481 
MBCS_OUTPUT_3
:

1482 
MBCS_OUTPUT_4
:

1483 
MBCS_OUTPUT_3_EUC
:

1484 
MBCS_OUTPUT_4_EUC
:

1485 
MBCS_OUTPUT_2_SISO
:

1486 
MBCS_OUTPUT_EXT_ONLY
:

1490 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swap(): unsupported MBCS outputype 0x%x\n",

1491 
ouutTy³
);

1492 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

1504 
maxFa¡UCh¬
=0;

1505 
mbcsIndexL’gth
=0;

1506 ifĞ
ouutTy³
!=
MBCS_OUTPUT_EXT_ONLY
 && ouutTy³!=
MBCS_OUTPUT_1
 &&

1507 
mbcsH—d”
.
v”siÚ
[1]>=3 && (
maxFa¡UCh¬
=mbcsHeader.version[2])!=0

1509 
maxFa¡UCh¬
=(maxFastUChar<<8)|0xff;

1510 
mbcsIndexL’gth
=((
maxFa¡UCh¬
+1)>>6)*2;

1513 if(
extOff£t
==0) {

1514 
size
=(
št32_t
)(
mbcsH—d”
.
off£tFromUBy‹s
+
mbcsIndexL’gth
);

1515 if(!
noFromU
) {

1516 
size
+=(
št32_t
)
mbcsH—d”
.
äomUBy‹sL’gth
;

1520 
šExtIndexes
=
NULL
;

1523 if(
Ëngth
>=0 &&†’gth<(
extOff£t
+
UCNV_EXT_INDEXES_MIN_LENGTH
*4)) {

1524 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swap():oo few bytes (%d‡fter headers) for‡n ICU MBCS .cnv conversionable withƒxtension data\n",

1525 
Ëngth
);

1526 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1530 
šExtIndexes
=(cÚ¡ 
št32_t
 *)(
šBy‹s
+
extOff£t
);

1531 
size
=
extOff£t
+
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_SIZE
]);

1534 if(
Ëngth
>=0) {

1535 if(
Ëngth
<
size
) {

1536 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swap():oo few bytes (%d‡fter headers) for‡n ICU MBCS .cnv conversionable\n",

1537 
Ëngth
);

1538 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1543 if(
šBy‹s
!=
outBy‹s
) {

1544 
	`u´v_memıy
(
outBy‹s
, 
šBy‹s
, 
size
);

1548 
couÁ
=
mbcsH—d”L’gth
*4;

1549 
ds
->
	`sw­A¼ay32
(ds, &
šMBCSH—d”
->
couÁS‹s
, 
couÁ
-4,

1550 &
outMBCSH—d”
->
couÁS‹s
, 
pE¼ÜCode
);

1552 if(
ouutTy³
==
MBCS_OUTPUT_EXT_ONLY
) {

1559 cÚ¡ *
šBa£Name
=(cÚ¡ *)
šBy‹s
+
couÁ
;

1560 *
outBa£Name
=(*)
outBy‹s
+
couÁ
;

1561 
ds
->
	`sw­InvCh¬s
(ds, 
šBa£Name
, (
št32_t
)
	`u´v_¡¾’
(inBaseName),

1562 
outBa£Name
, 
pE¼ÜCode
);

1567 
off£t
=
couÁ
;

1568 
couÁ
=
mbcsH—d”
.
couÁS‹s
*1024;

1569 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
off£t
, (
št32_t
)
couÁ
,

1570 
outBy‹s
+
off£t
, 
pE¼ÜCode
);

1573 
off£t
+=
couÁ
;

1574 
couÁ
=
mbcsH—d”
.
couÁToUF®lbacks
*8;

1575 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
off£t
, (
št32_t
)
couÁ
,

1576 
outBy‹s
+
off£t
, 
pE¼ÜCode
);

1579 
off£t
=
mbcsH—d”
.
off£tToUCodeUn™s
;

1580 
couÁ
=
mbcsH—d”
.
off£tFromUTabË
-
off£t
;

1581 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
off£t
, (
št32_t
)
couÁ
,

1582 
outBy‹s
+
off£t
, 
pE¼ÜCode
);

1585 
off£t
=
mbcsH—d”
.
off£tFromUTabË
;

1587 if(
ouutTy³
==
MBCS_OUTPUT_1
) {

1589 
couÁ
=(
mbcsH—d”
.
off£tFromUBy‹s
-
off£t
)+mbcsH—d”.
äomUBy‹sL’gth
;

1590 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
off£t
, (
št32_t
)
couÁ
,

1591 
outBy‹s
+
off£t
, 
pE¼ÜCode
);

1596 if(
šSticD©a
->
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
) {

1597 
couÁ
=0x440*2;

1599 
couÁ
=0x40*2;

1601 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
off£t
, (
št32_t
)
couÁ
,

1602 
outBy‹s
+
off£t
, 
pE¼ÜCode
);

1605 
off£t
+=
couÁ
;

1606 
couÁ
=
mbcsH—d”
.
off£tFromUBy‹s
-
off£t
;

1607 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
off£t
, (
št32_t
)
couÁ
,

1608 
outBy‹s
+
off£t
, 
pE¼ÜCode
);

1611 
off£t
=
mbcsH—d”
.
off£tFromUBy‹s
;

1612 
couÁ
ğ
noFromU
 ? 0 : 
mbcsH—d”
.
äomUBy‹sL’gth
;

1613 
ouutTy³
) {

1614 
MBCS_OUTPUT_2
:

1615 
MBCS_OUTPUT_3_EUC
:

1616 
MBCS_OUTPUT_2_SISO
:

1617 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
off£t
, (
št32_t
)
couÁ
,

1618 
outBy‹s
+
off£t
, 
pE¼ÜCode
);

1620 
MBCS_OUTPUT_4
:

1621 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
off£t
, (
št32_t
)
couÁ
,

1622 
outBy‹s
+
off£t
, 
pE¼ÜCode
);

1629 if(
mbcsIndexL’gth
!=0) {

1630 
off£t
+=
couÁ
;

1631 
couÁ
=
mbcsIndexL’gth
;

1632 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
off£t
, (
št32_t
)
couÁ
,

1633 
outBy‹s
+
off£t
, 
pE¼ÜCode
);

1638 if(
extOff£t
!=0) {

1640 
šBy‹s
+=
extOff£t
;

1641 
outBy‹s
+=
extOff£t
;

1644 
off£t
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_TO_U_INDEX
]);

1645 
Ëngth
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_TO_U_LENGTH
]);

1646 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
off£t
, 
Ëngth
*4, 
outBy‹s
+off£t, 
pE¼ÜCode
);

1649 
off£t
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_TO_U_UCHARS_INDEX
]);

1650 
Ëngth
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_TO_U_UCHARS_LENGTH
]);

1651 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
off£t
, 
Ëngth
*2, 
outBy‹s
+off£t, 
pE¼ÜCode
);

1654 
off£t
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_FROM_U_UCHARS_INDEX
]);

1655 
Ëngth
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_FROM_U_LENGTH
]);

1656 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
off£t
, 
Ëngth
*2, 
outBy‹s
+off£t, 
pE¼ÜCode
);

1659 
off£t
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_FROM_U_VALUES_INDEX
]);

1661 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
off£t
, 
Ëngth
*4, 
outBy‹s
+off£t, 
pE¼ÜCode
);

1666 
off£t
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_FROM_U_STAGE_12_INDEX
]);

1667 
Ëngth
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_FROM_U_STAGE_12_LENGTH
]);

1668 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
off£t
, 
Ëngth
*2, 
outBy‹s
+off£t, 
pE¼ÜCode
);

1671 
off£t
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_FROM_U_STAGE_3_INDEX
]);

1672 
Ëngth
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_FROM_U_STAGE_3_LENGTH
]);

1673 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
off£t
, 
Ëngth
*2, 
outBy‹s
+off£t, 
pE¼ÜCode
);

1676 
off£t
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_FROM_U_STAGE_3B_INDEX
]);

1677 
Ëngth
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_FROM_U_STAGE_3B_LENGTH
]);

1678 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
off£t
, 
Ëngth
*4, 
outBy‹s
+off£t, 
pE¼ÜCode
);

1681 
Ëngth
=
	`ud©a_»adIÁ32
(
ds
, 
šExtIndexes
[
UCNV_EXT_INDEXES_LENGTH
]);

1682 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
, 
Ëngth
*4, 
outBy‹s
, 
pE¼ÜCode
);

1686 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swap(): unknown conversionType=%d!=UCNV_MBCS\n",

1687 
šSticD©a
->
cÚv”siÚTy³
);

1688 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

1692  
h—d”Size
+(
št32_t
)
¡©icD©aSize
+
size
;

1693 
	}
}

	@ucnv_bld.h

17 #iâdeà
UCNV_BLD_H


18 
	#UCNV_BLD_H


	)

20 
	~"unicode/uty³s.h
"

22 #ià!
UCONFIG_NO_CONVERSION


24 
	~"unicode/uúv.h
"

25 
	~"unicode/uúv_”r.h
"

26 
	~"uúv_úv.h
"

27 
	~"uúvmbcs.h
"

28 
	~"uúv_ext.h
"

29 
	~"ud©aswp.h
"

32 
	#UCNV_ERROR_BUFFER_LENGTH
 32

	)

35 
	#UCNV_MAX_SUBCHAR_LEN
 4

	)

38 
	#UCNV_MAX_CHAR_LEN
 8

	)

41 
	#UCNV_OPTION_VERSION
 0xf

	)

42 
	#UCNV_OPTION_SWAP_LFNL
 0x10

	)

44 
	#UCNV_GET_VERSION
(
úv
è((úv)->
İtiÚs
&
UCNV_OPTION_VERSION
)

	)

46 
U_CDECL_BEGIN


51 
	uUCÚv”‹rTabË
 {

52 
UCÚv”‹rMBCSTabË
 
	mmbcs
;

55 
UCÚv”‹rTabË
 
	tUCÚv”‹rTabË
;

57 
	gUCÚv”‹rIm¶
;

58 
UCÚv”‹rIm¶
 
	tUCÚv”‹rIm¶
;

61 
	#UCNV_HAS_SUPPLEMENTARY
 1

	)

62 
	#UCNV_HAS_SURROGATES
 2

	)

64 
	sUCÚv”‹rSticD©a
 {

65 
ušt32_t
 
	m¡ruùSize
;

67 
	mÇme


68 [
UCNV_MAX_CONVERTER_NAME_LENGTH
];

70 
št32_t
 
	mcod•age
;

72 
št8_t
 
	m¶©fÜm
;

73 
št8_t
 
	mcÚv”siÚTy³
;

75 
št8_t
 
	mmšBy‹sP”Ch¬
;

76 
št8_t
 
	mmaxBy‹sP”Ch¬
;

78 
ušt8_t
 
	msubCh¬
[
UCNV_MAX_SUBCHAR_LEN
];

79 
št8_t
 
	msubCh¬L’
;

81 
ušt8_t
 
	mhasToUnicodeF®lback
;

82 
ušt8_t
 
	mhasFromUnicodeF®lback
;

83 
ušt8_t
 
	municodeMask
;

84 
ušt8_t
 
	msubCh¬1
;

85 
ušt8_t
 
	m»£rved
[19];

87 } 
	tUCÚv”‹rSticD©a
;

93 
	sUCÚv”‹rSh¬edD©a
 {

94 
ušt32_t
 
	m¡ruùSize
;

95 
ušt32_t
 
	m»ã»nûCouÁ”
;

97 cÚ¡ *
	md©aMemÜy
;

98 *
	mbË
;

100 cÚ¡ 
UCÚv”‹rSticD©a
 *
	m¡©icD©a
;

102 
UBoŞ
 
	msh¬edD©aCached
;

105 cÚ¡ 
UCÚv”‹rIm¶
 *
	mim¶
;

108 
ušt32_t
 
	mtoUnicodeStus
;

124 
UCÚv”‹rMBCSTabË
 
	mmbcs
;

129 
	sUCÚv”‹r
 {

134 (
U_EXPORT2
 *
	mäomUCh¬E¼ÜBehaviour
è(cÚ¡ *
	mcÚ‹xt
,

135 
UCÚv”‹rFromUnicodeArgs
 *
	m¬gs
,

136 cÚ¡ 
UCh¬
 *
	mcodeUn™s
,

137 
št32_t
 
	mËngth
,

138 
UCh¬32
 
	mcodePošt
,

139 
UCÚv”‹rC®lbackR—sÚ
 
	m»asÚ
,

140 
	mUE¼ÜCode
 *);

145 (
U_EXPORT2
 *
	mäomCh¬E¼ÜBehaviour
è(cÚ¡ *
	mcÚ‹xt
,

146 
UCÚv”‹rToUnicodeArgs
 *
	m¬gs
,

147 cÚ¡ *
	mcodeUn™s
,

148 
št32_t
 
	mËngth
,

149 
UCÚv”‹rC®lbackR—sÚ
 
	m»asÚ
,

150 
	mUE¼ÜCode
 *);

156 *
	mexŒaInfo
;

158 cÚ¡ *
	mäomUCÚ‹xt
;

159 cÚ¡ *
	mtoUCÚ‹xt
;

170 
ušt8_t
 *
	msubCh¬s
;

172 
UCÚv”‹rSh¬edD©a
 *
	msh¬edD©a
;

174 
ušt32_t
 
	mİtiÚs
;

176 
UBoŞ
 
	msh¬edD©aIsCached
;

177 
UBoŞ
 
	misCİyLoÿl
;

178 
UBoŞ
 
	misExŒaLoÿl
;

180 
UBoŞ
 
	mu£F®lback
;

181 
št8_t
 
	mtoUL’gth
;

182 
ušt8_t
 
	mtoUBy‹s
[
UCNV_MAX_CHAR_LEN
-1];

183 
ušt32_t
 
	mtoUnicodeStus
;

184 
št32_t
 
	mmode
;

185 
ušt32_t
 
	mäomUnicodeStus
;

196 
UCh¬32
 
	mäomUCh¬32
;

204 
št8_t
 
	mmaxBy‹sP”UCh¬
;

206 
št8_t
 
	msubCh¬L’
;

207 
št8_t
 
	mšv®idCh¬L’gth
;

208 
št8_t
 
	mch¬E¼ÜBufãrL’gth
;

210 
št8_t
 
	mšv®idUCh¬L’gth
;

211 
št8_t
 
	mUCh¬E¼ÜBufãrL’gth
;

213 
ušt8_t
 
	msubCh¬1
;

214 
UBoŞ
 
	mu£SubCh¬1
;

215 
	mšv®idCh¬Bufãr
[
UCNV_MAX_CHAR_LEN
];

216 
ušt8_t
 
	mch¬E¼ÜBufãr
[
UCNV_ERROR_BUFFER_LENGTH
];

217 
UCh¬
 
	msubUCh¬s
[
UCNV_MAX_SUBCHAR_LEN
/
U_SIZEOF_UCHAR
];

219 
UCh¬
 
	mšv®idUCh¬Bufãr
[
U16_MAX_LENGTH
];

220 
UCh¬
 
	mUCh¬E¼ÜBufãr
[
UCNV_ERROR_BUFFER_LENGTH
];

225 
UCh¬32
 
	m´eFromUFœ¡CP
;

226 
UCh¬
 
	m´eFromU
[
UCNV_EXT_MAX_UCHARS
];

227 
	m´eToU
[
UCNV_EXT_MAX_BYTES
];

228 
št8_t
 
	m´eFromUL’gth
, 
	m´eToUL’gth
;

229 
št8_t
 
	m´eToUFœ¡L’gth
;

232 
UCÚv”‹rC®lbackR—sÚ
 
	mtoUC®lbackR—sÚ
;

235 
	gU_CDECL_END


237 
	#CONVERTER_FILE_EXTENSION
 ".úv"

	)

245 
U_CFUNC
 
ušt16_t


246 
uúv_bld_couÁAvaabËCÚv”‹rs
(
UE¼ÜCode
 *
pE¼ÜCode
);

256 
U_CFUNC
 const *

257 
uúv_bld_g‘AvaabËCÚv”‹r
(
ušt16_t
 
n
, 
UE¼ÜCode
 *
pE¼ÜCode
);

263 
UCÚv”‹rSh¬edD©a
 *

264 
uúv_lßd
(
UCÚv”‹rLßdArgs
 *
pArgs
, 
UE¼ÜCode
 *
”r
);

272 
uúv_uÆßd
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
);

278 
U_CAPI
 
št32_t
 
U_EXPORT2


279 
uúv_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

280 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

281 
UE¼ÜCode
 *
pE¼ÜCode
);

	@ucnv_cb.c

21 
	~"unicode/uty³s.h
"

23 #ià!
UCONFIG_NO_CONVERSION


25 
	~"unicode/uúv_cb.h
"

26 
	~"uúv_bld.h
"

27 
	~"uúv_úv.h
"

28 
	~"cmemÜy.h
"

34 
U_CAPI
 
U_EXPORT2


35 
	$uúv_cbFromUWr™eBy‹s
 (
UCÚv”‹rFromUnicodeArgs
 *
¬gs
,

36 cÚ¡ * 
sourû
,

37 
št32_t
 
Ëngth
,

38 
št32_t
 
off£tIndex
,

39 
UE¼ÜCode
 * 
”r
)

41 if(
	`U_FAILURE
(*
”r
)) {

45 
	`uúv_äomUWr™eBy‹s
(

46 
¬gs
->
cÚv”‹r
,

47 
sourû
, 
Ëngth
,

48 &
¬gs
->
rg‘
,‡rgs->
rg‘Lim™
,

49 &
¬gs
->
off£ts
, 
off£tIndex
,

50 
”r
);

51 
	}
}

53 
U_CAPI
 
U_EXPORT2


54 
	$uúv_cbFromUWr™eUCh¬s
(
UCÚv”‹rFromUnicodeArgs
 *
¬gs
,

55 cÚ¡ 
UCh¬
** 
sourû
,

56 cÚ¡ 
UCh¬
* 
sourûLim™
,

57 
št32_t
 
off£tIndex
,

58 
UE¼ÜCode
 * 
”r
)

72 *
ŞdT¬g‘
;

74 if(
	`U_FAILURE
(*
”r
))

79 
ŞdT¬g‘
 = 
¬gs
->
rg‘
;

81 
	`uúv_äomUnicode
(
¬gs
->
cÚv”‹r
,

82 &
¬gs
->
rg‘
,

83 
¬gs
->
rg‘Lim™
,

84 
sourû
,

85 
sourûLim™
,

86 
NULL
,

87 
FALSE
,

88 
”r
);

90 if(
¬gs
->
off£ts
)

92 
¬gs
->
rg‘
 !ğ
ŞdT¬g‘
)

94 *(
¬gs
->
off£ts
)++ = 
off£tIndex
;

95 
ŞdT¬g‘
++;

103 if(*
”r
 =ğ
U_BUFFER_OVERFLOW_ERROR
)

109 *
ÃwT¬g‘
;

110 cÚ¡ *
ÃwT¬g‘Lim™
;

111 
UE¼ÜCode
 
”r2
 = 
U_ZERO_ERROR
;

113 
št8_t
 
”rBuffL’
;

115 
”rBuffL’
 = 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãrL’gth
;

118 
ÃwT¬g‘
 = (*)(
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
 + 
”rBuffL’
);

120 
ÃwT¬g‘Lim™
 = (*)(
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
 +

121 (
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
));

123 if(
ÃwT¬g‘
 >ğ
ÃwT¬g‘Lim™
)

125 *
”r
 = 
U_INTERNAL_PROGRAM_ERROR
;

134 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãrL’gth
 = 0;

136 
	`uúv_äomUnicode
(
¬gs
->
cÚv”‹r
,

137 &
ÃwT¬g‘
,

138 
ÃwT¬g‘Lim™
,

139 
sourû
,

140 
sourûLim™
,

141 
NULL
,

142 
FALSE
,

143 &
”r2
);

148 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãrL’gth
 = (
št8_t
)(

149 
ÃwT¬g‘
 - (*)
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
);

151 if((
ÃwT¬g‘
 >ğ
ÃwT¬g‘Lim™
è|| (
”r2
 =ğ
U_BUFFER_OVERFLOW_ERROR
))

157 *
”r
 = 
U_INTERNAL_PROGRAM_ERROR
;

172 
	}
}

174 
U_CAPI
 
U_EXPORT2


175 
	$uúv_cbFromUWr™eSub
 (
UCÚv”‹rFromUnicodeArgs
 *
¬gs
,

176 
št32_t
 
off£tIndex
,

177 
UE¼ÜCode
 * 
”r
)

179 
UCÚv”‹r
 *
cÚv”‹r
;

180 
št32_t
 
Ëngth
;

182 if(
	`U_FAILURE
(*
”r
)) {

185 
cÚv”‹r
 = 
¬gs
->converter;

186 
Ëngth
 = 
cÚv”‹r
->
subCh¬L’
;

188 if(
Ëngth
 == 0) {

192 if(
Ëngth
 < 0) {

201 cÚ¡ 
UCh¬
 *
sourû
 = (cÚ¡ UCh¬ *)
cÚv”‹r
->
subCh¬s
;

202 
	`uúv_cbFromUWr™eUCh¬s
(
¬gs
, &
sourû
, sourû - 
Ëngth
, 
off£tIndex
, 
”r
);

206 if(
cÚv”‹r
->
sh¬edD©a
->
im¶
->
wr™eSub
!=
NULL
) {

207 
cÚv”‹r
->
sh¬edD©a
->
im¶
->
	`wr™eSub
(
¬gs
, 
off£tIndex
, 
”r
);

209 if(
cÚv”‹r
->
subCh¬1
!=0 && (
ušt16_t
)cÚv”‹r->
šv®idUCh¬Bufãr
[0]<=(uint16_t)0xffu) {

214 
	`uúv_cbFromUWr™eBy‹s
(
¬gs
,

215 (cÚ¡ *)&
cÚv”‹r
->
subCh¬1
, 1,

216 
off£tIndex
, 
”r
);

219 
	`uúv_cbFromUWr™eBy‹s
(
¬gs
,

220 (cÚ¡ *)
cÚv”‹r
->
subCh¬s
, 
Ëngth
,

221 
off£tIndex
, 
”r
);

223 
	}
}

225 
U_CAPI
 
U_EXPORT2


226 
	$uúv_cbToUWr™eUCh¬s
 (
UCÚv”‹rToUnicodeArgs
 *
¬gs
,

227 cÚ¡ 
UCh¬
* 
sourû
,

228 
št32_t
 
Ëngth
,

229 
št32_t
 
off£tIndex
,

230 
UE¼ÜCode
 * 
”r
)

232 if(
	`U_FAILURE
(*
”r
)) {

236 
	`uúv_toUWr™eUCh¬s
(

237 
¬gs
->
cÚv”‹r
,

238 
sourû
, 
Ëngth
,

239 &
¬gs
->
rg‘
,‡rgs->
rg‘Lim™
,

240 &
¬gs
->
off£ts
, 
off£tIndex
,

241 
”r
);

242 
	}
}

244 
U_CAPI
 
U_EXPORT2


245 
	$uúv_cbToUWr™eSub
 (
UCÚv”‹rToUnicodeArgs
 *
¬gs
,

246 
št32_t
 
off£tIndex
,

247 
UE¼ÜCode
 * 
”r
)

249 cÚ¡ 
UCh¬
 
kSub¡™u‹Ch¬1
 = 0x1A, 
kSub¡™u‹Ch¬
 = 0xFFFD;

252 if(
¬gs
->
cÚv”‹r
->
šv®idCh¬L’gth
 =ğ1 &&‡rgs->cÚv”‹r->
subCh¬1
 != 0) {

253 
	`uúv_cbToUWr™eUCh¬s
(
¬gs
, &
kSub¡™u‹Ch¬1
, 1, 
off£tIndex
, 
”r
);

255 
	`uúv_cbToUWr™eUCh¬s
(
¬gs
, &
kSub¡™u‹Ch¬
, 1, 
off£tIndex
, 
”r
);

257 
	}
}

	@ucnv_cnv.c

18 
	~"unicode/uty³s.h
"

20 #ià!
UCONFIG_NO_CONVERSION


22 
	~"unicode/uúv_”r.h
"

23 
	~"unicode/uúv.h
"

24 
	~"unicode/u£t.h
"

25 
	~"uúv_úv.h
"

26 
	~"uúv_bld.h
"

27 
	~"cmemÜy.h
"

29 
U_CFUNC
 

30 
	$uúv_g‘Com¶‘eUnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

31 cÚ¡ 
US‘Add”
 *
§
,

32 
UCÚv”‹rUnicodeS‘
 
which
,

33 
UE¼ÜCode
 *
pE¼ÜCode
) {

34 
§
->
	`addRªge
(§->
£t
, 0, 0x10ffff);

35 
	}
}

37 
U_CFUNC
 

38 
	$uúv_g‘NÚSu¼og©eUnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

39 cÚ¡ 
US‘Add”
 *
§
,

40 
UCÚv”‹rUnicodeS‘
 
which
,

41 
UE¼ÜCode
 *
pE¼ÜCode
) {

42 
§
->
	`addRªge
(§->
£t
, 0, 0xd7ff);

43 
§
->
	`addRªge
(§->
£t
, 0xe000, 0x10ffff);

44 
	}
}

46 
U_CFUNC
 

47 
	$uúv_äomUWr™eBy‹s
(
UCÚv”‹r
 *
úv
,

48 cÚ¡ *
by‹s
, 
št32_t
 
Ëngth
,

49 **
rg‘
, cÚ¡ *
rg‘Lim™
,

50 
št32_t
 **
off£ts
,

51 
št32_t
 
sourûIndex
,

52 
UE¼ÜCode
 *
pE¼ÜCode
) {

53 *
t
=*
rg‘
;

54 
št32_t
 *
o
;

57 if(
off£ts
==
NULL
 || (
o
=*offsets)==NULL) {

58 
Ëngth
>0 && 
t
<
rg‘Lim™
) {

59 *
t
++=*
by‹s
++;

60 --
Ëngth
;

64 
Ëngth
>0 && 
t
<
rg‘Lim™
) {

65 *
t
++=*
by‹s
++;

66 *
o
++=
sourûIndex
;

67 --
Ëngth
;

69 *
off£ts
=
o
;

71 *
rg‘
=
t
;

74 if(
Ëngth
>0) {

75 if(
úv
!=
NULL
) {

76 
t
=(*)
úv
->
ch¬E¼ÜBufãr
;

77 
úv
->
ch¬E¼ÜBufãrL’gth
=(
št8_t
)
Ëngth
;

79 *
t
++=(
ušt8_t
)*
by‹s
++;

80 } --
Ëngth
>0);

82 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

84 
	}
}

86 
U_CFUNC
 

87 
	$uúv_toUWr™eUCh¬s
(
UCÚv”‹r
 *
úv
,

88 cÚ¡ 
UCh¬
 *
uch¬s
, 
št32_t
 
Ëngth
,

89 
UCh¬
 **
rg‘
, cÚ¡ UCh¬ *
rg‘Lim™
,

90 
št32_t
 **
off£ts
,

91 
št32_t
 
sourûIndex
,

92 
UE¼ÜCode
 *
pE¼ÜCode
) {

93 
UCh¬
 *
t
=*
rg‘
;

94 
št32_t
 *
o
;

97 if(
off£ts
==
NULL
 || (
o
=*offsets)==NULL) {

98 
Ëngth
>0 && 
t
<
rg‘Lim™
) {

99 *
t
++=*
uch¬s
++;

100 --
Ëngth
;

104 
Ëngth
>0 && 
t
<
rg‘Lim™
) {

105 *
t
++=*
uch¬s
++;

106 *
o
++=
sourûIndex
;

107 --
Ëngth
;

109 *
off£ts
=
o
;

111 *
rg‘
=
t
;

114 if(
Ëngth
>0) {

115 if(
úv
!=
NULL
) {

116 
t
=
úv
->
UCh¬E¼ÜBufãr
;

117 
úv
->
UCh¬E¼ÜBufãrL’gth
=(
št8_t
)
Ëngth
;

119 *
t
++=*
uch¬s
++;

120 } --
Ëngth
>0);

122 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

124 
	}
}

126 
U_CFUNC
 

127 
	$uúv_toUWr™eCodePošt
(
UCÚv”‹r
 *
úv
,

128 
UCh¬32
 
c
,

129 
UCh¬
 **
rg‘
, cÚ¡ UCh¬ *
rg‘Lim™
,

130 
št32_t
 **
off£ts
,

131 
št32_t
 
sourûIndex
,

132 
UE¼ÜCode
 *
pE¼ÜCode
) {

133 
UCh¬
 *
t
;

134 
št32_t
 *
o
;

136 
t
=*
rg‘
;

138 if(
t
<
rg‘Lim™
) {

139 if(
c
<=0xffff) {

140 *
t
++=(
UCh¬
)
c
;

141 
c
=
U_SENTINEL
;

143 *
t
++=
	`U16_LEAD
(
c
);

144 
c
=
	`U16_TRAIL
(c);

145 if(
t
<
rg‘Lim™
) {

146 *
t
++=(
UCh¬
)
c
;

147 
c
=
U_SENTINEL
;

152 if(
off£ts
!=
NULL
 && (
o
=*offsets)!=NULL) {

153 *
o
++=
sourûIndex
;

154 if((*
rg‘
+1)<
t
) {

155 *
o
++=
sourûIndex
;

157 *
off£ts
=
o
;

161 *
rg‘
=
t
;

164 if(
c
>=0) {

165 if(
úv
!=
NULL
) {

166 
št8_t
 
i
=0;

167 
	`U16_APPEND_UNSAFE
(
úv
->
UCh¬E¼ÜBufãr
, 
i
, 
c
);

168 
úv
->
UCh¬E¼ÜBufãrL’gth
=
i
;

170 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

172 
	}
}

	@ucnv_cnv.h

17 #iâdeà
UCNV_CNV_H


18 
	#UCNV_CNV_H


	)

20 
	~"unicode/uty³s.h
"

22 #ià!
UCONFIG_NO_CONVERSION


24 
	~"unicode/uúv.h
"

25 
	~"unicode/uúv_”r.h
"

26 
	~"unicode/u£t.h
"

27 
	~"u£t_imp.h
"

29 
	gU_CDECL_BEGIN


32 
	#missšgCh¬M¬k”
 0xFFFF

	)

43 
	gUCÚv”‹rSh¬edD©a
;

44 
UCÚv”‹rSh¬edD©a
 
	tUCÚv”‹rSh¬edD©a
;

50 
št32_t
 
	msize
;

51 
št32_t
 
	mÃ¡edLßds
;

52 
UBoŞ
 
	mÚlyTe¡IsLßdabË
;

53 
UBoŞ
 
	m»£rved0
;

54 
št16_t
 
	m»£rved
;

55 
ušt32_t
 
	mİtiÚs
;

56 cÚ¡ *
	mpkg
, *
	mÇme
, *
	mloÿË
;

57 } 
	tUCÚv”‹rLßdArgs
;

59 (*
	tUCÚv”‹rLßd
è(
	tUCÚv”‹rSh¬edD©a
 *
	tsh¬edD©a
,

60 
	tUCÚv”‹rLßdArgs
 *
	tpArgs
,

61 cÚ¡ 
	tušt8_t
 *
	t¿w
, 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

62 (*
	tUCÚv”‹rUÆßd
è(
	tUCÚv”‹rSh¬edD©a
 *
	tsh¬edD©a
);

64 (*
	tUCÚv”‹rO³n
è(
	tUCÚv”‹r
 *
	túv
, 
	tUCÚv”‹rLßdArgs
 *
	tpArgs
, 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

65 (*
	tUCÚv”‹rClo£
è(
	tUCÚv”‹r
 *
	túv
);

67 
	eUCÚv”‹rRe£tChoiû
 {

68 
UCNV_RESET_BOTH
,

69 
UCNV_RESET_TO_UNICODE
,

70 
UCNV_RESET_FROM_UNICODE


71 } 
	tUCÚv”‹rRe£tChoiû
;

73 (*
	tUCÚv”‹rRe£t
è(
	tUCÚv”‹r
 *
	túv
, 
	tUCÚv”‹rRe£tChoiû
 
	tchoiû
);

98 (*
	tUCÚv”‹rToUnicode
è(
	tUCÚv”‹rToUnicodeArgs
 *, 
	tUE¼ÜCode
 *);

106 (*
	tUCÚv”‹rFromUnicode
è(
	tUCÚv”‹rFromUnicodeArgs
 *, 
	tUE¼ÜCode
 *);

121 (*
	tUCÚv”‹rCÚv”t
è(
	tUCÚv”‹rFromUnicodeArgs
 *
	tpFromUArgs
,

122 
	tUCÚv”‹rToUnicodeArgs
 *
	tpToUArgs
,

123 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

145 
	$UCh¬32
 (*
	tUCÚv”‹rG‘NextUCh¬
è(
	tUCÚv”‹rToUnicodeArgs
 *, 
	tUE¼ÜCode
 *);

147 (*
	tUCÚv”‹rG‘S¹”s
)(cÚ¡ 
	tUCÚv”‹r
* 
	tcÚv”‹r
,

148 
	tUBoŞ
 
	t¡¬‹rs
[256],

149 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

155 cÚ¡ * (*
	tUCÚv”‹rG‘Name
è(cÚ¡ 
	tUCÚv”‹r
 *
	túv
);

164 (*
	tUCÚv”‹rWr™eSub
è(
	tUCÚv”‹rFromUnicodeArgs
 *
	tpArgs
, 
	tšt32_t
 
	toff£tIndex
, 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

175 
UCÚv”‹r
 * (*
	tUCÚv”‹rSaãClÚe
è(cÚ¡ 
	tUCÚv”‹r
 *
	túv
,

176 *
	t¡ackBufãr
,

177 
	tšt32_t
 *
	tpBufãrSize
,

178 
	tUE¼ÜCode
 *
	t¡©us
);

183 
	eUCÚv”‹rS‘F‹r
 {

184 
UCNV_SET_FILTER_NONE
,

185 
UCNV_SET_FILTER_DBCS_ONLY
,

186 
UCNV_SET_FILTER_2022_CN
,

187 
UCNV_SET_FILTER_SJIS
,

188 
UCNV_SET_FILTER_GR94DBCS
,

189 
UCNV_SET_FILTER_HZ
,

190 
UCNV_SET_FILTER_COUNT


191 } 
	tUCÚv”‹rS‘F‹r
;

204 (*
	tUCÚv”‹rG‘UnicodeS‘
è(cÚ¡ 
	tUCÚv”‹r
 *
	túv
,

205 cÚ¡ 
	tUS‘Add”
 *
	t§
,

206 
	tUCÚv”‹rUnicodeS‘
 
	twhich
,

207 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

209 
UBoŞ
 
	`CONVERSION_U_SUCCESS
 (
UE¼ÜCode
 
”r
);

227 
	sUCÚv”‹rIm¶
 {

228 
UCÚv”‹rTy³
 
ty³
;

230 
UCÚv”‹rLßd
 
lßd
;

231 
UCÚv”‹rUÆßd
 
uÆßd
;

233 
UCÚv”‹rO³n
 
İ’
;

234 
UCÚv”‹rClo£
 
şo£
;

235 
UCÚv”‹rRe£t
 
»£t
;

237 
UCÚv”‹rToUnicode
 
toUnicode
;

238 
UCÚv”‹rToUnicode
 
toUnicodeW™hOff£ts
;

239 
UCÚv”‹rFromUnicode
 
äomUnicode
;

240 
UCÚv”‹rFromUnicode
 
äomUnicodeW™hOff£ts
;

241 
UCÚv”‹rG‘NextUCh¬
 
g‘NextUCh¬
;

243 
UCÚv”‹rG‘S¹”s
 
g‘S¹”s
;

244 
UCÚv”‹rG‘Name
 
g‘Name
;

245 
UCÚv”‹rWr™eSub
 
wr™eSub
;

246 
UCÚv”‹rSaãClÚe
 
§ãClÚe
;

247 
UCÚv”‹rG‘UnicodeS‘
 
g‘UnicodeS‘
;

249 
UCÚv”‹rCÚv”t
 
toUTF8
;

250 
UCÚv”‹rCÚv”t
 
äomUTF8
;

253 cÚ¡ 
UCÚv”‹rSh¬edD©a


254 
_MBCSD©a
, 
_L©š1D©a
,

255 
_UTF8D©a
, 
_UTF16BED©a
, 
_UTF16LED©a
, 
_UTF32BED©a
, 
_UTF32LED©a
,

256 
_ISO2022D©a
,

257 
_LMBCSD©a1
,
_LMBCSD©a2
, 
_LMBCSD©a3
, 
_LMBCSD©a4
, 
_LMBCSD©a5
, 
_LMBCSD©a6
,

258 
_LMBCSD©a8
,
_LMBCSD©a11
,
_LMBCSD©a16
,
_LMBCSD©a17
,
_LMBCSD©a18
,
_LMBCSD©a19
,

259 
_HZD©a
,
_ISCIID©a
, 
_SCSUD©a
, 
_ASCIID©a
,

260 
_UTF7D©a
, 
_Bocu1D©a
, 
_UTF16D©a
, 
_UTF32D©a
, 
_CESU8D©a
, 
_IMAPD©a
;

262 
U_CDECL_END


265 
	#TO_U_USE_FALLBACK
(
u£F®lback
è
TRUE


	)

266 
	#UCNV_TO_U_USE_FALLBACK
(
úv
è
TRUE


	)

269 
	#IS_PRIVATE_USE
(
c
è((
ušt32_t
)((c)-0xe000)<0x1900 || (ušt32_t)((c)-0xf0000)<0x20000)

	)

270 
	#FROM_U_USE_FALLBACK
(
u£F®lback
, 
c
è((u£F®lbackè|| 
	`IS_PRIVATE_USE
(c))

	)

271 
	#UCNV_FROM_U_USE_FALLBACK
(
úv
, 
c
è
	`FROM_U_USE_FALLBACK
((úv)->
u£F®lback
, c)

	)

279 
	#UCNV_GET_NEXT_UCHAR_USE_TO_U
 -9

	)

281 
U_CFUNC
 

282 
	`uúv_g‘Com¶‘eUnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

283 cÚ¡ 
US‘Add”
 *
§
,

284 
UCÚv”‹rUnicodeS‘
 
which
,

285 
UE¼ÜCode
 *
pE¼ÜCode
);

287 
U_CFUNC
 

288 
	`uúv_g‘NÚSu¼og©eUnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

289 cÚ¡ 
US‘Add”
 *
§
,

290 
UCÚv”‹rUnicodeS‘
 
which
,

291 
UE¼ÜCode
 *
pE¼ÜCode
);

293 
U_CFUNC
 

294 
	`uúv_äomUWr™eBy‹s
(
UCÚv”‹r
 *
úv
,

295 cÚ¡ *
by‹s
, 
št32_t
 
Ëngth
,

296 **
rg‘
, cÚ¡ *
rg‘Lim™
,

297 
št32_t
 **
off£ts
,

298 
št32_t
 
sourûIndex
,

299 
UE¼ÜCode
 *
pE¼ÜCode
);

300 
U_CFUNC
 

301 
	`uúv_toUWr™eUCh¬s
(
UCÚv”‹r
 *
úv
,

302 cÚ¡ 
UCh¬
 *
uch¬s
, 
št32_t
 
Ëngth
,

303 
UCh¬
 **
rg‘
, cÚ¡ UCh¬ *
rg‘Lim™
,

304 
št32_t
 **
off£ts
,

305 
št32_t
 
sourûIndex
,

306 
UE¼ÜCode
 *
pE¼ÜCode
);

308 
U_CFUNC
 

309 
	`uúv_toUWr™eCodePošt
(
UCÚv”‹r
 *
úv
,

310 
UCh¬32
 
c
,

311 
UCh¬
 **
rg‘
, cÚ¡ UCh¬ *
rg‘Lim™
,

312 
št32_t
 **
off£ts
,

313 
št32_t
 
sourûIndex
,

314 
UE¼ÜCode
 *
pE¼ÜCode
);

	@ucnv_err.c

18 
	~"unicode/uty³s.h
"

20 #ià!
UCONFIG_NO_CONVERSION


22 
	~"unicode/uúv_”r.h
"

23 
	~"unicode/uúv_cb.h
"

24 
	~"uúv_úv.h
"

25 
	~"cmemÜy.h
"

26 
	~"unicode/uúv.h
"

27 
	~"u¡rfmt.h
"

29 
	#VALUE_STRING_LENGTH
 32

	)

31 
	#UNICODE_PERCENT_SIGN_CODEPOINT
 0x0025

	)

32 
	#UNICODE_U_CODEPOINT
 0x0055

	)

33 
	#UNICODE_X_CODEPOINT
 0x0058

	)

34 
	#UNICODE_RS_CODEPOINT
 0x005C

	)

35 
	#UNICODE_U_LOW_CODEPOINT
 0x0075

	)

36 
	#UNICODE_X_LOW_CODEPOINT
 0x0078

	)

37 
	#UNICODE_AMP_CODEPOINT
 0x0026

	)

38 
	#UNICODE_HASH_CODEPOINT
 0x0023

	)

39 
	#UNICODE_SEMICOLON_CODEPOINT
 0x003B

	)

40 
	#UNICODE_PLUS_CODEPOINT
 0x002B

	)

41 
	#UNICODE_LEFT_CURLY_CODEPOINT
 0x007B

	)

42 
	#UNICODE_RIGHT_CURLY_CODEPOINT
 0x007D

	)

43 
	#UNICODE_SPACE_CODEPOINT
 0x0020

	)

44 
	#UCNV_PRV_ESCAPE_ICU
 0

	)

45 
	#UCNV_PRV_ESCAPE_C
 'C'

	)

46 
	#UCNV_PRV_ESCAPE_XML_DEC
 'D'

	)

47 
	#UCNV_PRV_ESCAPE_XML_HEX
 'X'

	)

48 
	#UCNV_PRV_ESCAPE_JAVA
 'J'

	)

49 
	#UCNV_PRV_ESCAPE_UNICODE
 'U'

	)

50 
	#UCNV_PRV_ESCAPE_CSS2
 'S'

	)

51 
	#UCNV_PRV_STOP_ON_ILLEGAL
 'i'

	)

54 
U_CAPI
 
U_EXPORT2


55 
	$UCNV_FROM_U_CALLBACK_STOP
 (

56 cÚ¡ *
cÚ‹xt
,

57 
UCÚv”‹rFromUnicodeArgs
 *
äomUArgs
,

58 cÚ¡ 
UCh¬
* 
codeUn™s
,

59 
št32_t
 
Ëngth
,

60 
UCh¬32
 
codePošt
,

61 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

62 
UE¼ÜCode
 * 
”r
)

66 
	}
}

70 
U_CAPI
 
U_EXPORT2


71 
	$UCNV_TO_U_CALLBACK_STOP
 (

72 cÚ¡ *
cÚ‹xt
,

73 
UCÚv”‹rToUnicodeArgs
 *
toUArgs
,

74 cÚ¡ * 
codePošts
,

75 
št32_t
 
Ëngth
,

76 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

77 
UE¼ÜCode
 * 
”r
)

81 
	}
}

83 
U_CAPI
 
U_EXPORT2


84 
	$UCNV_FROM_U_CALLBACK_SKIP
 (

85 cÚ¡ *
cÚ‹xt
,

86 
UCÚv”‹rFromUnicodeArgs
 *
äomUArgs
,

87 cÚ¡ 
UCh¬
* 
codeUn™s
,

88 
št32_t
 
Ëngth
,

89 
UCh¬32
 
codePošt
,

90 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

91 
UE¼ÜCode
 * 
”r
)

93 ià(
»asÚ
 <ğ
UCNV_IRREGULAR
)

95 ià(
cÚ‹xt
 =ğ
NULL
 || (*((*)cÚ‹xtè=ğ
UCNV_PRV_STOP_ON_ILLEGAL
 && 
»asÚ
 =ğ
UCNV_UNASSIGNED
))

97 *
”r
 = 
U_ZERO_ERROR
;

102 
	}
}

104 
U_CAPI
 
U_EXPORT2


105 
	$UCNV_FROM_U_CALLBACK_SUBSTITUTE
 (

106 cÚ¡ *
cÚ‹xt
,

107 
UCÚv”‹rFromUnicodeArgs
 *
äomArgs
,

108 cÚ¡ 
UCh¬
* 
codeUn™s
,

109 
št32_t
 
Ëngth
,

110 
UCh¬32
 
codePošt
,

111 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

112 
UE¼ÜCode
 * 
”r
)

114 ià(
»asÚ
 <ğ
UCNV_IRREGULAR
)

116 ià(
cÚ‹xt
 =ğ
NULL
 || (*((*)cÚ‹xtè=ğ
UCNV_PRV_STOP_ON_ILLEGAL
 && 
»asÚ
 =ğ
UCNV_UNASSIGNED
))

118 *
”r
 = 
U_ZERO_ERROR
;

119 
	`uúv_cbFromUWr™eSub
(
äomArgs
, 0, 
”r
);

124 
	}
}

131 
U_CAPI
 
U_EXPORT2


132 
	$UCNV_FROM_U_CALLBACK_ESCAPE
 (

133 cÚ¡ *
cÚ‹xt
,

134 
UCÚv”‹rFromUnicodeArgs
 *
äomArgs
,

135 cÚ¡ 
UCh¬
 *
codeUn™s
,

136 
št32_t
 
Ëngth
,

137 
UCh¬32
 
codePošt
,

138 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

139 
UE¼ÜCode
 * 
”r
)

142 
UCh¬
 
v®ueSŒšg
[
VALUE_STRING_LENGTH
];

143 
št32_t
 
v®ueSŒšgL’gth
 = 0;

144 
št32_t
 
i
 = 0;

146 cÚ¡ 
UCh¬
 *
myV®ueSourû
 = 
NULL
;

147 
UE¼ÜCode
 
”r2
 = 
U_ZERO_ERROR
;

148 
UCÚv”‹rFromUC®lback
 
Üigš®
 = 
NULL
;

149 cÚ¡ *
Üigš®CÚ‹xt
;

151 
UCÚv”‹rFromUC®lback
 
ignÜedC®lback
 = 
NULL
;

152 cÚ¡ *
ignÜedCÚ‹xt
;

154 ià(
»asÚ
 > 
UCNV_IRREGULAR
)

159 
	`uúv_£tFromUC®lBack
 (
äomArgs
->
cÚv”‹r
,

160 (
UCÚv”‹rFromUC®lback
è
UCNV_FROM_U_CALLBACK_SUBSTITUTE
,

161 
NULL
,

162 &
Üigš®
,

163 &
Üigš®CÚ‹xt
,

164 &
”r2
);

166 ià(
	`U_FAILURE
 (
”r2
))

168 *
”r
 = 
”r2
;

171 if(
cÚ‹xt
==
NULL
)

173 
i
 < 
Ëngth
)

175 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_PERCENT_SIGN_CODEPOINT
;

176 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_U_CODEPOINT
;

177 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt16_t
)
codeUn™s
[
i
++], 16, 4);

182 *((*)
cÚ‹xt
))

184 
UCNV_PRV_ESCAPE_JAVA
:

185 
i
 < 
Ëngth
)

187 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_RS_CODEPOINT
;

188 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_U_LOW_CODEPOINT
;

189 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt16_t
)
codeUn™s
[
i
++], 16, 4);

193 
UCNV_PRV_ESCAPE_C
:

194 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_RS_CODEPOINT
;

196 if(
Ëngth
==2){

197 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_U_CODEPOINT
;

198 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, 
codePošt
, 16, 8);

202 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_U_LOW_CODEPOINT
;

203 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt16_t
)
codeUn™s
[0], 16, 4);

207 
UCNV_PRV_ESCAPE_XML_DEC
:

209 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_AMP_CODEPOINT
;

210 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_HASH_CODEPOINT
;

211 if(
Ëngth
==2){

212 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, 
codePošt
, 10, 0);

215 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt16_t
)
codeUn™s
[0], 10, 0);

217 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_SEMICOLON_CODEPOINT
;

220 
UCNV_PRV_ESCAPE_XML_HEX
:

222 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_AMP_CODEPOINT
;

223 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_HASH_CODEPOINT
;

224 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_X_LOW_CODEPOINT
;

225 if(
Ëngth
==2){

226 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, 
codePošt
, 16, 0);

229 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt16_t
)
codeUn™s
[0], 16, 0);

231 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_SEMICOLON_CODEPOINT
;

234 
UCNV_PRV_ESCAPE_UNICODE
:

235 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_LEFT_CURLY_CODEPOINT
;

236 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_U_CODEPOINT
;

237 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_PLUS_CODEPOINT
;

238 ià(
Ëngth
 == 2) {

239 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, 
codePošt
, 16, 4);

241 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt16_t
)
codeUn™s
[0], 16, 4);

243 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_RIGHT_CURLY_CODEPOINT
;

246 
UCNV_PRV_ESCAPE_CSS2
:

247 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_RS_CODEPOINT
;

248 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, 
codePošt
, 16, 0);

251 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_SPACE_CODEPOINT
;

255 
i
 < 
Ëngth
)

257 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_PERCENT_SIGN_CODEPOINT
;

258 
v®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_U_CODEPOINT
;

259 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
v®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt16_t
)
codeUn™s
[
i
++], 16, 4);

263 
myV®ueSourû
 = 
v®ueSŒšg
;

266 *
”r
 = 
U_ZERO_ERROR
;

268 
	`uúv_cbFromUWr™eUCh¬s
(
äomArgs
, &
myV®ueSourû
, myV®ueSourû+
v®ueSŒšgL’gth
, 0, 
”r
);

270 
	`uúv_£tFromUC®lBack
 (
äomArgs
->
cÚv”‹r
,

271 
Üigš®
,

272 
Üigš®CÚ‹xt
,

273 &
ignÜedC®lback
,

274 &
ignÜedCÚ‹xt
,

275 &
”r2
);

276 ià(
	`U_FAILURE
 (
”r2
))

278 *
”r
 = 
”r2
;

283 
	}
}

287 
U_CAPI
 
U_EXPORT2


288 
	$UCNV_TO_U_CALLBACK_SKIP
 (

289 cÚ¡ *
cÚ‹xt
,

290 
UCÚv”‹rToUnicodeArgs
 *
toArgs
,

291 cÚ¡ * 
codeUn™s
,

292 
št32_t
 
Ëngth
,

293 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

294 
UE¼ÜCode
 * 
”r
)

296 ià(
»asÚ
 <ğ
UCNV_IRREGULAR
)

298 ià(
cÚ‹xt
 =ğ
NULL
 || (*((*)cÚ‹xtè=ğ
UCNV_PRV_STOP_ON_ILLEGAL
 && 
»asÚ
 =ğ
UCNV_UNASSIGNED
))

300 *
”r
 = 
U_ZERO_ERROR
;

305 
	}
}

307 
U_CAPI
 
U_EXPORT2


308 
	$UCNV_TO_U_CALLBACK_SUBSTITUTE
 (

309 cÚ¡ *
cÚ‹xt
,

310 
UCÚv”‹rToUnicodeArgs
 *
toArgs
,

311 cÚ¡ * 
codeUn™s
,

312 
št32_t
 
Ëngth
,

313 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

314 
UE¼ÜCode
 * 
”r
)

316 ià(
»asÚ
 <ğ
UCNV_IRREGULAR
)

318 ià(
cÚ‹xt
 =ğ
NULL
 || (*((*)cÚ‹xtè=ğ
UCNV_PRV_STOP_ON_ILLEGAL
 && 
»asÚ
 =ğ
UCNV_UNASSIGNED
))

320 *
”r
 = 
U_ZERO_ERROR
;

321 
	`uúv_cbToUWr™eSub
(
toArgs
,0,
”r
);

326 
	}
}

331 
U_CAPI
 
U_EXPORT2


332 
	$UCNV_TO_U_CALLBACK_ESCAPE
 (

333 cÚ¡ *
cÚ‹xt
,

334 
UCÚv”‹rToUnicodeArgs
 *
toArgs
,

335 cÚ¡ * 
codeUn™s
,

336 
št32_t
 
Ëngth
,

337 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

338 
UE¼ÜCode
 * 
”r
)

340 
UCh¬
 
uniV®ueSŒšg
[
VALUE_STRING_LENGTH
];

341 
št32_t
 
v®ueSŒšgL’gth
 = 0;

342 
št32_t
 
i
 = 0;

344 ià(
»asÚ
 > 
UCNV_IRREGULAR
)

349 if(
cÚ‹xt
==
NULL
)

351 
i
 < 
Ëngth
)

353 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_PERCENT_SIGN_CODEPOINT
;

354 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_X_CODEPOINT
;

355 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
uniV®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt8_t
è
codeUn™s
[
i
++], 16, 2);

360 *((*)
cÚ‹xt
))

362 
UCNV_PRV_ESCAPE_XML_DEC
:

363 
i
 < 
Ëngth
)

365 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_AMP_CODEPOINT
;

366 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_HASH_CODEPOINT
;

367 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
uniV®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt8_t
)
codeUn™s
[
i
++], 10, 0);

368 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_SEMICOLON_CODEPOINT
;

372 
UCNV_PRV_ESCAPE_XML_HEX
:

373 
i
 < 
Ëngth
)

375 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_AMP_CODEPOINT
;

376 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_HASH_CODEPOINT
;

377 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_X_LOW_CODEPOINT
;

378 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
uniV®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt8_t
)
codeUn™s
[
i
++], 16, 0);

379 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_SEMICOLON_CODEPOINT
;

382 
UCNV_PRV_ESCAPE_C
:

383 
i
 < 
Ëngth
)

385 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_RS_CODEPOINT
;

386 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_X_LOW_CODEPOINT
;

387 
v®ueSŒšgL’gth
 +ğ
	`u´v_™ou
 (
uniV®ueSŒšg
 + v®ueSŒšgL’gth, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt8_t
)
codeUn™s
[
i
++], 16, 2);

391 
i
 < 
Ëngth
)

393 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_PERCENT_SIGN_CODEPOINT
;

394 
uniV®ueSŒšg
[
v®ueSŒšgL’gth
++] = (
UCh¬
è
UNICODE_X_CODEPOINT
;

395 
	`u´v_™ou
 (
uniV®ueSŒšg
 + 
v®ueSŒšgL’gth
, 
VALUE_STRING_LENGTH
 - v®ueSŒšgL’gth, (
ušt8_t
è
codeUn™s
[
i
++], 16, 2);

396 
v®ueSŒšgL’gth
 += 2;

401 *
”r
 = 
U_ZERO_ERROR
;

403 
	`uúv_cbToUWr™eUCh¬s
(
toArgs
, 
uniV®ueSŒšg
, 
v®ueSŒšgL’gth
, 0, 
”r
);

404 
	}
}

	@ucnv_ext.c

19 
	~"unicode/uty³s.h
"

21 #ià!
UCONFIG_NO_CONVERSION
 && !
UCONFIG_NO_LEGACY_CONVERSION


23 
	~"unicode/u£t.h
"

24 
	~"uúv_bld.h
"

25 
	~"uúv_úv.h
"

26 
	~"uúv_ext.h
"

27 
	~"cmemÜy.h
"

34 
U_INLINE
 
ušt32_t


35 
	$uúv_extFšdToU
(cÚ¡ 
ušt32_t
 *
toUSeùiÚ
, 
št32_t
 
Ëngth
, 
ušt8_t
 
by‹
) {

36 
ušt32_t
 
wÜd0
, 
wÜd
;

37 
št32_t
 
i
, 
¡¬t
, 
lim™
;

40 
¡¬t
=(
št32_t
)
	`UCNV_EXT_TO_U_GET_BYTE
(
toUSeùiÚ
[0]);

41 
lim™
=(
št32_t
)
	`UCNV_EXT_TO_U_GET_BYTE
(
toUSeùiÚ
[
Ëngth
-1]);

42 if(
by‹
<
¡¬t
 || 
lim™
<byte) {

46 if(
Ëngth
==((
lim™
-
¡¬t
)+1)) {

48  
	`UCNV_EXT_TO_U_GET_VALUE
(
toUSeùiÚ
[
by‹
-
¡¬t
]);

52 
wÜd0
=
	`UCNV_EXT_TO_U_MAKE_WORD
(
by‹
, 0);

62 
wÜd
=
wÜd0
|
UCNV_EXT_TO_U_VALUE_MASK
;

65 
¡¬t
=0;

66 
lim™
=
Ëngth
;

68 
i
=
lim™
-
¡¬t
;

69 if(
i
<=1) {

74 if(
i
<=4) {

76 if(
wÜd0
<=
toUSeùiÚ
[
¡¬t
]) {

79 if(++
¡¬t
<
lim™
 && 
wÜd0
<=
toUSeùiÚ
[start]) {

82 if(++
¡¬t
<
lim™
 && 
wÜd0
<=
toUSeùiÚ
[start]) {

86 ++
¡¬t
;

90 
i
=(
¡¬t
+
lim™
)/2;

91 if(
wÜd
<
toUSeùiÚ
[
i
]) {

92 
lim™
=
i
;

94 
¡¬t
=
i
;

99 if(
¡¬t
<
lim™
 && 
by‹
==
	`UCNV_EXT_TO_U_GET_BYTE
(
wÜd
=
toUSeùiÚ
[start])) {

100  
	`UCNV_EXT_TO_U_GET_VALUE
(
wÜd
);

104 
	}
}

110 
	#UCNV_EXT_TO_U_VERIFY_SISO_MATCH
(
sisoS‹
, 
m©ch
) \

111 ((
sisoS‹
)<0 || ((sisoS‹)==0è=ğ(
m©ch
==1))

	)

119 
št32_t


120 
	$uúv_extM©chToU
(cÚ¡ 
št32_t
 *
cx
, 
št8_t
 
sisoS‹
,

121 cÚ¡ *
´e
, 
št32_t
 
´eL’gth
,

122 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

123 
ušt32_t
 *
pM©chV®ue
,

124 
UBoŞ
 
u£F®lback
, UBoŞ 
æush
) {

125 cÚ¡ 
ušt32_t
 *
toUTabË
, *
toUSeùiÚ
;

127 
ušt32_t
 
v®ue
, 
m©chV®ue
;

128 
št32_t
 
i
, 
j
, 
idx
, 
Ëngth
, 
m©chL’gth
;

129 
ušt8_t
 
b
;

131 if(
cx
==
NULL
 || cx[
UCNV_EXT_TO_U_LENGTH
]<=0) {

136 
toUTabË
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_TO_U_INDEX
, 
ušt32_t
);

137 
idx
=0;

139 
m©chV®ue
=0;

140 
i
=
j
=
m©chL’gth
=0;

142 if(
sisoS‹
==0) {

144 if(
´eL’gth
>1) {

146 } if(
´eL’gth
==1) {

147 
¤cL’gth
=0;

149 if(
¤cL’gth
>1) {

150 
¤cL’gth
=1;

153 
æush
=
TRUE
;

161 
toUSeùiÚ
=
toUTabË
+
idx
;

164 
v®ue
=*
toUSeùiÚ
++;

165 
Ëngth
=
	`UCNV_EXT_TO_U_GET_BYTE
(
v®ue
);

166 
v®ue
=
	`UCNV_EXT_TO_U_GET_VALUE
(value);

167 ifĞ
v®ue
!=0 &&

168 (
	`UCNV_EXT_TO_U_IS_ROUNDTRIP
(
v®ue
) ||

169 
	`TO_U_USE_FALLBACK
(
u£F®lback
)) &&

170 
	`UCNV_EXT_TO_U_VERIFY_SISO_MATCH
(
sisoS‹
, 
i
+
j
)

173 
m©chV®ue
=
v®ue
;

174 
m©chL’gth
=
i
+
j
;

178 if(
i
<
´eL’gth
) {

179 
b
=(
ušt8_t
)
´e
[
i
++];

180 } if(
j
<
¤cL’gth
) {

181 
b
=(
ušt8_t
)
¤c
[
j
++];

184 if(
æush
 || (
Ëngth
=(
i
+
j
))>
UCNV_EXT_MAX_BYTES
) {

193  -
Ëngth
;

198 
v®ue
=
	`uúv_extFšdToU
(
toUSeùiÚ
, 
Ëngth
, 
b
);

199 if(
v®ue
==0) {

203 if(
	`UCNV_EXT_TO_U_IS_PARTIAL
(
v®ue
)) {

205 
idx
=(
št32_t
)
	`UCNV_EXT_TO_U_GET_PARTIAL_INDEX
(
v®ue
);

207 ifĞ(
	`UCNV_EXT_TO_U_IS_ROUNDTRIP
(
v®ue
) ||

208 
	`TO_U_USE_FALLBACK
(
u£F®lback
)) &&

209 
	`UCNV_EXT_TO_U_VERIFY_SISO_MATCH
(
sisoS‹
, 
i
+
j
)

212 
m©chV®ue
=
v®ue
;

213 
m©chL’gth
=
i
+
j
;

222 if(
m©chL’gth
==0) {

228 *
pM©chV®ue
=
	`UCNV_EXT_TO_U_MASK_ROUNDTRIP
(
m©chV®ue
);

229  
m©chL’gth
;

230 
	}
}

232 
U_INLINE
 

233 
	$uúv_extWr™eToU
(
UCÚv”‹r
 *
úv
, cÚ¡ 
št32_t
 *
cx
,

234 
ušt32_t
 
v®ue
,

235 
UCh¬
 **
rg‘
, cÚ¡ UCh¬ *
rg‘Lim™
,

236 
št32_t
 **
off£ts
, iÁ32_ˆ
¤cIndex
,

237 
UE¼ÜCode
 *
pE¼ÜCode
) {

239 if(
	`UCNV_EXT_TO_U_IS_CODE_POINT
(
v®ue
)) {

241 
	`uúv_toUWr™eCodePošt
(

242 
úv
, 
	`UCNV_EXT_TO_U_GET_CODE_POINT
(
v®ue
),

243 
rg‘
, 
rg‘Lim™
,

244 
off£ts
, 
¤cIndex
,

245 
pE¼ÜCode
);

248 
	`uúv_toUWr™eUCh¬s
(

249 
úv
,

250 
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_TO_U_UCHARS_INDEX
, 
UCh¬
)+

251 
	`UCNV_EXT_TO_U_GET_INDEX
(
v®ue
),

252 
	`UCNV_EXT_TO_U_GET_LENGTH
(
v®ue
),

253 
rg‘
, 
rg‘Lim™
,

254 
off£ts
, 
¤cIndex
,

255 
pE¼ÜCode
);

257 
	}
}

267 
	#UCNV_SISO_STATE
(
úv
) \

268 ((
úv
)->
sh¬edD©a
->
mbcs
.
ouutTy³
==
MBCS_OUTPUT_2_SISO
 ? (
št8_t
)(úv)->
mode
 : \

269 (
úv
)->
sh¬edD©a
->
mbcs
.
ouutTy³
==
MBCS_OUTPUT_DBCS_ONLY
 ? 1 : -1)

	)

274 
U_CFUNC
 
UBoŞ


275 
	$uúv_extIn™ŸlM©chToU
(
UCÚv”‹r
 *
úv
, cÚ¡ 
št32_t
 *
cx
,

276 
št32_t
 
fœ¡L’gth
,

277 cÚ¡ **
¤c
, cÚ¡ *
¤cLim™
,

278 
UCh¬
 **
rg‘
, cÚ¡ UCh¬ *
rg‘Lim™
,

279 
št32_t
 **
off£ts
, iÁ32_ˆ
¤cIndex
,

280 
UBoŞ
 
æush
,

281 
UE¼ÜCode
 *
pE¼ÜCode
) {

282 
ušt32_t
 
v®ue
 = 0;

283 
št32_t
 
m©ch
;

286 
m©ch
=
	`uúv_extM©chToU
(
cx
, (
št8_t
)
	`UCNV_SISO_STATE
(
úv
),

287 (cÚ¡ *)
úv
->
toUBy‹s
, 
fœ¡L’gth
,

288 *
¤c
, (
št32_t
)(
¤cLim™
-*src),

289 &
v®ue
,

290 
úv
->
u£F®lback
, 
æush
);

291 if(
m©ch
>0) {

293 *
¤c
+=
m©ch
-
fœ¡L’gth
;

296 
	`uúv_extWr™eToU
(
úv
, 
cx
,

297 
v®ue
,

298 
rg‘
, 
rg‘Lim™
,

299 
off£ts
, 
¤cIndex
,

300 
pE¼ÜCode
);

301  
TRUE
;

302 } if(
m©ch
<0) {

304 cÚ¡ *
s
;

305 
št32_t
 
j
;

308 
s
=(cÚ¡ *)
úv
->
toUBy‹s
;

309 
úv
->
´eToUFœ¡L’gth
=(
št8_t
)
fœ¡L’gth
;

310 
j
=0; j<
fœ¡L’gth
; ++j) {

311 
úv
->
´eToU
[
j
]=*
s
++;

315 
s
=*
¤c
;

316 
m©ch
=-match;

317 ; 
j
<
m©ch
; ++j) {

318 
úv
->
´eToU
[
j
]=*
s
++;

320 *
¤c
=
s
;

321 
úv
->
´eToUL’gth
=(
št8_t
)
m©ch
;

322  
TRUE
;

324  
FALSE
;

326 
	}
}

328 
U_CFUNC
 
UCh¬32


329 
	$uúv_extSim¶eM©chToU
(cÚ¡ 
št32_t
 *
cx
,

330 cÚ¡ *
sourû
, 
št32_t
 
Ëngth
,

331 
UBoŞ
 
u£F®lback
) {

332 
ušt32_t
 
v®ue
 = 0;

333 
št32_t
 
m©ch
;

335 if(
Ëngth
<=0) {

340 
m©ch
=
	`uúv_extM©chToU
(
cx
, -1,

341 
sourû
, 
Ëngth
,

342 
NULL
, 0,

343 &
v®ue
,

344 
u£F®lback
, 
TRUE
);

345 if(
m©ch
==
Ëngth
) {

347 if(
	`UCNV_EXT_TO_U_IS_CODE_POINT
(
v®ue
)) {

348  
	`UCNV_EXT_TO_U_GET_CODE_POINT
(
v®ue
);

360 
	}
}

366 
U_CFUNC
 

367 
	$uúv_extCÚtšueM©chToU
(
UCÚv”‹r
 *
úv
,

368 
UCÚv”‹rToUnicodeArgs
 *
pArgs
, 
št32_t
 
¤cIndex
,

369 
UE¼ÜCode
 *
pE¼ÜCode
) {

370 
ušt32_t
 
v®ue
 = 0;

371 
št32_t
 
m©ch
, 
Ëngth
;

373 
m©ch
=
	`uúv_extM©chToU
(
úv
->
sh¬edD©a
->
mbcs
.
extIndexes
, (
št8_t
)
	`UCNV_SISO_STATE
(cnv),

374 
úv
->
´eToU
, cnv->
´eToUL’gth
,

375 
pArgs
->
sourû
, (
št32_t
)ÕArgs->
sourûLim™
-pArgs->source),

376 &
v®ue
,

377 
úv
->
u£F®lback
, 
pArgs
->
æush
);

378 if(
m©ch
>0) {

379 if(
m©ch
>=
úv
->
´eToUL’gth
) {

381 
pArgs
->
sourû
+=
m©ch
-
úv
->
´eToUL’gth
;

382 
úv
->
´eToUL’gth
=0;

385 
Ëngth
=
úv
->
´eToUL’gth
-
m©ch
;

386 
	`u´v_memmove
(
úv
->
´eToU
, cnv->´eToU+
m©ch
, 
Ëngth
);

387 
úv
->
´eToUL’gth
=(
št8_t
)-
Ëngth
;

391 
	`uúv_extWr™eToU
(
úv
, cnv->
sh¬edD©a
->
mbcs
.
extIndexes
,

392 
v®ue
,

393 &
pArgs
->
rg‘
,…Args->
rg‘Lim™
,

394 &
pArgs
->
off£ts
, 
¤cIndex
,

395 
pE¼ÜCode
);

396 } if(
m©ch
<0) {

398 cÚ¡ *
s
;

399 
št32_t
 
j
;

402 
s
=
pArgs
->
sourû
;

403 
m©ch
=-match;

404 
j
=
úv
->
´eToUL’gth
; j<
m©ch
; ++j) {

405 
úv
->
´eToU
[
j
]=*
s
++;

407 
pArgs
->
sourû
=
s
;

408 
úv
->
´eToUL’gth
=(
št8_t
)
m©ch
;

429 
	`u´v_memıy
(
úv
->
toUBy‹s
, cnv->
´eToU
, cnv->
´eToUFœ¡L’gth
);

430 
úv
->
toUL’gth
=úv->
´eToUFœ¡L’gth
;

433 
Ëngth
=
úv
->
´eToUL’gth
-úv->
´eToUFœ¡L’gth
;

434 if(
Ëngth
>0) {

435 
	`u´v_memmove
(
úv
->
´eToU
, cnv->´eToU+úv->
´eToUFœ¡L’gth
, 
Ëngth
);

439 
úv
->
´eToUL’gth
=(
št8_t
)-
Ëngth
;

442 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

444 
	}
}

451 
U_INLINE
 
št32_t


452 
	$uúv_extFšdFromU
(cÚ¡ 
UCh¬
 *
äomUSeùiÚ
, 
št32_t
 
Ëngth
, UCh¬ 
u
) {

453 
št32_t
 
i
, 
¡¬t
, 
lim™
;

456 
¡¬t
=0;

457 
lim™
=
Ëngth
;

459 
i
=
lim™
-
¡¬t
;

460 if(
i
<=1) {

465 if(
i
<=4) {

467 if(
u
<=
äomUSeùiÚ
[
¡¬t
]) {

470 if(++
¡¬t
<
lim™
 && 
u
<=
äomUSeùiÚ
[start]) {

473 if(++
¡¬t
<
lim™
 && 
u
<=
äomUSeùiÚ
[start]) {

477 ++
¡¬t
;

481 
i
=(
¡¬t
+
lim™
)/2;

482 if(
u
<
äomUSeùiÚ
[
i
]) {

483 
lim™
=
i
;

485 
¡¬t
=
i
;

490 if(
¡¬t
<
lim™
 && 
u
==
äomUSeùiÚ
[start]) {

491  
¡¬t
;

495 
	}
}

517 
št32_t


518 
	$uúv_extM©chFromU
(cÚ¡ 
št32_t
 *
cx
,

519 
UCh¬32
 
fœ¡CP
,

520 cÚ¡ 
UCh¬
 *
´e
, 
št32_t
 
´eL’gth
,

521 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

522 
ušt32_t
 *
pM©chV®ue
,

523 
UBoŞ
 
u£F®lback
, UBoŞ 
æush
) {

524 cÚ¡ 
ušt16_t
 *
¡age12
, *
¡age3
;

525 cÚ¡ 
ušt32_t
 *
¡age3b
;

527 cÚ¡ 
UCh¬
 *
äomUTabËUCh¬s
, *
äomUSeùiÚUCh¬s
;

528 cÚ¡ 
ušt32_t
 *
äomUTabËV®ues
, *
äomUSeùiÚV®ues
;

530 
ušt32_t
 
v®ue
, 
m©chV®ue
;

531 
št32_t
 
i
, 
j
, 
idx
, 
Ëngth
, 
m©chL’gth
;

532 
UCh¬
 
c
;

534 if(
cx
==
NULL
) {

539 
idx
=
fœ¡CP
>>10;

540 if(
idx
>=
cx
[
UCNV_EXT_FROM_U_STAGE_1_LENGTH
]) {

544 
¡age12
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_STAGE_12_INDEX
, 
ušt16_t
);

545 
¡age3
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_STAGE_3_INDEX
, 
ušt16_t
);

546 
idx
=
	`UCNV_EXT_FROM_U
(
¡age12
, 
¡age3
, idx, 
fœ¡CP
);

548 
¡age3b
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_STAGE_3B_INDEX
, 
ušt32_t
);

549 
v®ue
=
¡age3b
[
idx
];

550 if(
v®ue
==0) {

560 if(
	`UCNV_EXT_TO_U_IS_PARTIAL
(
v®ue
)) {

562 
idx
=(
št32_t
)
	`UCNV_EXT_FROM_U_GET_PARTIAL_INDEX
(
v®ue
);

565 
äomUTabËUCh¬s
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_UCHARS_INDEX
, 
UCh¬
);

566 
äomUTabËV®ues
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_VALUES_INDEX
, 
ušt32_t
);

568 
m©chV®ue
=0;

569 
i
=
j
=
m©chL’gth
=0;

576 
äomUSeùiÚUCh¬s
=
äomUTabËUCh¬s
+
idx
;

577 
äomUSeùiÚV®ues
=
äomUTabËV®ues
+
idx
;

580 
Ëngth
=*
äomUSeùiÚUCh¬s
++;

581 
v®ue
=*
äomUSeùiÚV®ues
++;

582 ifĞ
v®ue
!=0 &&

583 (
	`UCNV_EXT_FROM_U_IS_ROUNDTRIP
(
v®ue
) ||

584 
	`FROM_U_USE_FALLBACK
(
u£F®lback
, 
fœ¡CP
)) &&

585 (
v®ue
&
UCNV_EXT_FROM_U_RESERVED_MASK
)==0

588 
m©chV®ue
=
v®ue
;

589 
m©chL’gth
=2+
i
+
j
;

593 if(
i
<
´eL’gth
) {

594 
c
=
´e
[
i
++];

595 } if(
j
<
¤cL’gth
) {

596 
c
=
¤c
[
j
++];

599 if(
æush
 || (
Ëngth
=(
i
+
j
))>
UCNV_EXT_MAX_UCHARS
) {

608  -(2+
Ëngth
);

613 
idx
=
	`uúv_extFšdFromU
(
äomUSeùiÚUCh¬s
, 
Ëngth
, 
c
);

614 if(
idx
<0) {

618 
v®ue
=
äomUSeùiÚV®ues
[
idx
];

619 if(
	`UCNV_EXT_FROM_U_IS_PARTIAL
(
v®ue
)) {

621 
idx
=(
št32_t
)
	`UCNV_EXT_FROM_U_GET_PARTIAL_INDEX
(
v®ue
);

623 ifĞ(
	`UCNV_EXT_FROM_U_IS_ROUNDTRIP
(
v®ue
) ||

624 
	`FROM_U_USE_FALLBACK
(
u£F®lback
, 
fœ¡CP
)) &&

625 (
v®ue
&
UCNV_EXT_FROM_U_RESERVED_MASK
)==0

628 
m©chV®ue
=
v®ue
;

629 
m©chL’gth
=2+
i
+
j
;

638 if(
m©chL’gth
==0) {

643 ifĞ(
	`UCNV_EXT_FROM_U_IS_ROUNDTRIP
(
v®ue
) ||

644 
	`FROM_U_USE_FALLBACK
(
u£F®lback
, 
fœ¡CP
)) &&

645 (
v®ue
&
UCNV_EXT_FROM_U_RESERVED_MASK
)==0

648 
m©chV®ue
=
v®ue
;

649 
m©chL’gth
=2;

657 if(
m©chV®ue
==
UCNV_EXT_FROM_U_SUBCHAR1
) {

661 *
pM©chV®ue
=
m©chV®ue
;

662  
m©chL’gth
;

663 
	}
}

668 
U_INLINE
 

669 
	$uúv_extWr™eFromU
(
UCÚv”‹r
 *
úv
, cÚ¡ 
št32_t
 *
cx
,

670 
ušt32_t
 
v®ue
,

671 **
rg‘
, cÚ¡ *
rg‘Lim™
,

672 
št32_t
 **
off£ts
, iÁ32_ˆ
¤cIndex
,

673 
UE¼ÜCode
 *
pE¼ÜCode
) {

674 
ušt8_t
 
bufãr
[1+
UCNV_EXT_MAX_BYTES
];

675 cÚ¡ 
ušt8_t
 *
»suÉ
;

676 
št32_t
 
Ëngth
, 
´evL’gth
;

678 
Ëngth
=
	`UCNV_EXT_FROM_U_GET_LENGTH
(
v®ue
);

679 
v®ue
=(
ušt32_t
)
	`UCNV_EXT_FROM_U_GET_DATA
(value);

682 if(
Ëngth
<=
UCNV_EXT_FROM_U_MAX_DIRECT_LENGTH
) {

689 
ušt8_t
 *
p
=
bufãr
+1;

690 
Ëngth
) {

692 *
p
++=(
ušt8_t
)(
v®ue
>>16);

694 *
p
++=(
ušt8_t
)(
v®ue
>>8);

696 *
p
++=(
ušt8_t
)
v®ue
;

700 
»suÉ
=
bufãr
+1;

702 
»suÉ
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_BYTES_INDEX
, 
ušt8_t
)+
v®ue
;

707 if((
´evL’gth
=
úv
->
äomUnicodeStus
)!=0) {

709 
ušt8_t
 
shiáBy‹
;

711 if(
´evL’gth
>1 && 
Ëngth
==1) {

713 
shiáBy‹
=(
ušt8_t
)
UCNV_SI
;

714 
úv
->
äomUnicodeStus
=1;

715 } if(
´evL’gth
==1 && 
Ëngth
>1) {

717 
shiáBy‹
=(
ušt8_t
)
UCNV_SO
;

718 
úv
->
äomUnicodeStus
=2;

720 
shiáBy‹
=0;

723 if(
shiáBy‹
!=0) {

725 
bufãr
[0]=
shiáBy‹
;

726 if(
»suÉ
!=
bufãr
+1) {

727 
	`u´v_memıy
(
bufãr
+1, 
»suÉ
, 
Ëngth
);

729 
»suÉ
=
bufãr
;

730 ++
Ëngth
;

734 
	`uúv_äomUWr™eBy‹s
(
úv
, (cÚ¡ *)
»suÉ
, 
Ëngth
,

735 
rg‘
, 
rg‘Lim™
,

736 
off£ts
, 
¤cIndex
,

737 
pE¼ÜCode
);

738 
	}
}

743 
U_CFUNC
 
UBoŞ


744 
	$uúv_extIn™ŸlM©chFromU
(
UCÚv”‹r
 *
úv
, cÚ¡ 
št32_t
 *
cx
,

745 
UCh¬32
 
ı
,

746 cÚ¡ 
UCh¬
 **
¤c
, cÚ¡ UCh¬ *
¤cLim™
,

747 **
rg‘
, cÚ¡ *
rg‘Lim™
,

748 
št32_t
 **
off£ts
, iÁ32_ˆ
¤cIndex
,

749 
UBoŞ
 
æush
,

750 
UE¼ÜCode
 *
pE¼ÜCode
) {

751 
ušt32_t
 
v®ue
 = 0;

752 
št32_t
 
m©ch
;

755 
m©ch
=
	`uúv_extM©chFromU
(
cx
, 
ı
,

756 
NULL
, 0,

757 *
¤c
, (
št32_t
)(
¤cLim™
-*src),

758 &
v®ue
,

759 
úv
->
u£F®lback
, 
æush
);

762 ifĞ
m©ch
>=2 &&

763 !(
	`UCNV_EXT_FROM_U_GET_LENGTH
(
v®ue
)==1 &&

764 
úv
->
sh¬edD©a
->
mbcs
.
ouutTy³
==
MBCS_OUTPUT_DBCS_ONLY
)

767 *
¤c
+=
m©ch
-2;

770 
	`uúv_extWr™eFromU
(
úv
, 
cx
,

771 
v®ue
,

772 
rg‘
, 
rg‘Lim™
,

773 
off£ts
, 
¤cIndex
,

774 
pE¼ÜCode
);

775  
TRUE
;

776 } if(
m©ch
<0) {

778 cÚ¡ 
UCh¬
 *
s
;

779 
št32_t
 
j
;

782 
úv
->
´eFromUFœ¡CP
=
ı
;

785 
s
=*
¤c
;

786 
m©ch
=-match-2;

787 
j
=0; j<
m©ch
; ++j) {

788 
úv
->
´eFromU
[
j
]=*
s
++;

790 *
¤c
=
s
;

791 
úv
->
´eFromUL’gth
=(
št8_t
)
m©ch
;

792  
TRUE
;

793 } if(
m©ch
==1) {

795 
úv
->
u£SubCh¬1
=
TRUE
;

796  
FALSE
;

798  
FALSE
;

800 
	}
}

806 
U_CFUNC
 
št32_t


807 
	$uúv_extSim¶eM©chFromU
(cÚ¡ 
št32_t
 *
cx
,

808 
UCh¬32
 
ı
, 
ušt32_t
 *
pV®ue
,

809 
UBoŞ
 
u£F®lback
) {

810 
ušt32_t
 
v®ue
;

811 
št32_t
 
m©ch
;

814 
m©ch
=
	`uúv_extM©chFromU
(
cx
,

815 
ı
,

816 
NULL
, 0,

817 
NULL
, 0,

818 &
v®ue
,

819 
u£F®lback
, 
TRUE
);

820 if(
m©ch
>=2) {

822 
št32_t
 
Ëngth
;

823 
isRoundŒ
;

825 
isRoundŒ
=
	`UCNV_EXT_FROM_U_IS_ROUNDTRIP
(
v®ue
);

826 
Ëngth
=
	`UCNV_EXT_FROM_U_GET_LENGTH
(
v®ue
);

827 
v®ue
=(
ušt32_t
)
	`UCNV_EXT_FROM_U_GET_DATA
(value);

829 if(
Ëngth
<=
UCNV_EXT_FROM_U_MAX_DIRECT_LENGTH
) {

830 *
pV®ue
=
v®ue
;

831  
isRoundŒ
 ? 
Ëngth
 : -length;

833 } if(
Ëngth
==4) {

835 cÚ¡ 
ušt8_t
 *
»suÉ
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_BYTES_INDEX
, ušt8_t)+
v®ue
;

836 *
pV®ue
=

837 ((
ušt32_t
)
»suÉ
[0]<<24)|

838 ((
ušt32_t
)
»suÉ
[1]<<16)|

839 ((
ušt32_t
)
»suÉ
[2]<<8)|

840 
»suÉ
[3];

841  
isRoundŒ
 ? 4 : -4;

854 
	}
}

860 
U_CFUNC
 

861 
	$uúv_extCÚtšueM©chFromU
(
UCÚv”‹r
 *
úv
,

862 
UCÚv”‹rFromUnicodeArgs
 *
pArgs
, 
št32_t
 
¤cIndex
,

863 
UE¼ÜCode
 *
pE¼ÜCode
) {

864 
ušt32_t
 
v®ue
 = 0;

865 
št32_t
 
m©ch
;

867 
m©ch
=
	`uúv_extM©chFromU
(
úv
->
sh¬edD©a
->
mbcs
.
extIndexes
,

868 
úv
->
´eFromUFœ¡CP
,

869 
úv
->
´eFromU
, cnv->
´eFromUL’gth
,

870 
pArgs
->
sourû
, (
št32_t
)ÕArgs->
sourûLim™
-pArgs->source),

871 &
v®ue
,

872 
úv
->
u£F®lback
, 
pArgs
->
æush
);

873 if(
m©ch
>=2) {

874 
m©ch
-=2;

876 if(
m©ch
>=
úv
->
´eFromUL’gth
) {

878 
pArgs
->
sourû
+=
m©ch
-
úv
->
´eFromUL’gth
;

879 
úv
->
´eFromUL’gth
=0;

882 
št32_t
 
Ëngth
=
úv
->
´eFromUL’gth
-
m©ch
;

883 
	`u´v_memmove
(
úv
->
´eFromU
, cnv->´eFromU+
m©ch
, 
Ëngth
*
U_SIZEOF_UCHAR
);

884 
úv
->
´eFromUL’gth
=(
št8_t
)-
Ëngth
;

888 
úv
->
´eFromUFœ¡CP
=
U_SENTINEL
;

891 
	`uúv_extWr™eFromU
(
úv
, cnv->
sh¬edD©a
->
mbcs
.
extIndexes
,

892 
v®ue
,

893 &
pArgs
->
rg‘
,…Args->
rg‘Lim™
,

894 &
pArgs
->
off£ts
, 
¤cIndex
,

895 
pE¼ÜCode
);

896 } if(
m©ch
<0) {

898 cÚ¡ 
UCh¬
 *
s
;

899 
št32_t
 
j
;

902 
s
=
pArgs
->
sourû
;

903 
m©ch
=-match-2;

904 
j
=
úv
->
´eFromUL’gth
; j<
m©ch
; ++j) {

905 
úv
->
´eFromU
[
j
]=*
s
++;

907 
pArgs
->
sourû
=
s
;

908 
úv
->
´eFromUL’gth
=(
št8_t
)
m©ch
;

928 if(
m©ch
==1) {

930 
úv
->
u£SubCh¬1
=
TRUE
;

934 
úv
->
äomUCh¬32
=úv->
´eFromUFœ¡CP
;

935 
úv
->
´eFromUFœ¡CP
=
U_SENTINEL
;

938 
úv
->
´eFromUL’gth
=-cnv->preFromULength;

941 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

943 
	}
}

946 
	$uúv_extG‘UnicodeS‘SŒšg
(cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

947 cÚ¡ 
št32_t
 *
cx
,

948 cÚ¡ 
US‘Add”
 *
§
,

949 
UBoŞ
 
u£F®lback
,

950 
št32_t
 
mšL’gth
,

951 
UCh¬32
 
c
,

952 
UCh¬
 
s
[
UCNV_EXT_MAX_UCHARS
], 
št32_t
 
Ëngth
,

953 
št32_t
 
£ùiÚIndex
,

954 
UE¼ÜCode
 *
pE¼ÜCode
) {

955 cÚ¡ 
UCh¬
 *
äomUSeùiÚUCh¬s
;

956 cÚ¡ 
ušt32_t
 *
äomUSeùiÚV®ues
;

958 
ušt32_t
 
v®ue
;

959 
št32_t
 
i
, 
couÁ
;

961 
äomUSeùiÚUCh¬s
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_UCHARS_INDEX
, 
UCh¬
)+
£ùiÚIndex
;

962 
äomUSeùiÚV®ues
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_VALUES_INDEX
, 
ušt32_t
)+
£ùiÚIndex
;

965 
couÁ
=*
äomUSeùiÚUCh¬s
++;

966 
v®ue
=*
äomUSeùiÚV®ues
++;

968 ifĞ
v®ue
!=0 &&

969 (
	`UCNV_EXT_FROM_U_IS_ROUNDTRIP
(
v®ue
è|| 
u£F®lback
) &&

970 
	`UCNV_EXT_FROM_U_GET_LENGTH
(
v®ue
)>=
mšL’gth


972 if(
c
>=0) {

974 
§
->
	`add
(§->
£t
, 
c
);

977 
§
->
	`addSŒšg
(§->
£t
, 
s
, 
Ëngth
);

981 
i
=0; i<
couÁ
; ++i) {

983 
s
[
Ëngth
]=
äomUSeùiÚUCh¬s
[
i
];

984 
v®ue
=
äomUSeùiÚV®ues
[
i
];

986 if(
v®ue
==0) {

988 } if(
	`UCNV_EXT_FROM_U_IS_PARTIAL
(
v®ue
)) {

989 
	`uúv_extG‘UnicodeS‘SŒšg
(

990 
sh¬edD©a
, 
cx
, 
§
, 
u£F®lback
, 
mšL’gth
,

991 
U_SENTINEL
, 
s
, 
Ëngth
+1,

992 (
št32_t
)
	`UCNV_EXT_FROM_U_GET_PARTIAL_INDEX
(
v®ue
),

993 
pE¼ÜCode
);

994 } if((
u£F®lback
 ?

995 (
v®ue
&
UCNV_EXT_FROM_U_RESERVED_MASK
)==0 :

996 ((
v®ue
&(
UCNV_EXT_FROM_U_ROUNDTRIP_FLAG
|
UCNV_EXT_FROM_U_RESERVED_MASK
))==

997 
UCNV_EXT_FROM_U_ROUNDTRIP_FLAG
)) &&

998 
	`UCNV_EXT_FROM_U_GET_LENGTH
(
v®ue
)>=
mšL’gth


1000 
§
->
	`addSŒšg
(§->
£t
, 
s
, 
Ëngth
+1);

1003 
	}
}

1005 
U_CFUNC
 

1006 
	$uúv_extG‘UnicodeS‘
(cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

1007 cÚ¡ 
US‘Add”
 *
§
,

1008 
UCÚv”‹rUnicodeS‘
 
which
,

1009 
UCÚv”‹rS‘F‹r
 
f‹r
,

1010 
UE¼ÜCode
 *
pE¼ÜCode
) {

1011 cÚ¡ 
št32_t
 *
cx
;

1012 cÚ¡ 
ušt16_t
 *
¡age12
, *
¡age3
, *
ps2
, *
ps3
;

1013 cÚ¡ 
ušt32_t
 *
¡age3b
;

1015 
ušt32_t
 
v®ue
;

1016 
št32_t
 
¡1
, 
¡age1L’gth
, 
¡2
, 
¡3
, 
mšL’gth
;

1017 
UBoŞ
 
u£F®lback
;

1019 
UCh¬
 
s
[
UCNV_EXT_MAX_UCHARS
];

1020 
UCh¬32
 
c
;

1021 
št32_t
 
Ëngth
;

1023 
cx
=
sh¬edD©a
->
mbcs
.
extIndexes
;

1024 if(
cx
==
NULL
) {

1028 
¡age12
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_STAGE_12_INDEX
, 
ušt16_t
);

1029 
¡age3
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_STAGE_3_INDEX
, 
ušt16_t
);

1030 
¡age3b
=
	`UCNV_EXT_ARRAY
(
cx
, 
UCNV_EXT_FROM_U_STAGE_3B_INDEX
, 
ušt32_t
);

1032 
¡age1L’gth
=
cx
[
UCNV_EXT_FROM_U_STAGE_1_LENGTH
];

1034 
u£F®lback
=(
UBoŞ
)(
which
==
UCNV_ROUNDTRIP_AND_FALLBACK_SET
);

1037 
c
=0;

1039 if(
f‹r
==
UCNV_SET_FILTER_2022_CN
) {

1040 
mšL’gth
=3;

1041 } ifĞ
sh¬edD©a
->
mbcs
.
ouutTy³
==
MBCS_OUTPUT_DBCS_ONLY
 ||

1042 
f‹r
!=
UCNV_SET_FILTER_NONE


1045 
mšL’gth
=2;

1047 
mšL’gth
=1;

1054 
¡1
=0; st1<
¡age1L’gth
; ++st1) {

1055 
¡2
=
¡age12
[
¡1
];

1056 if(
¡2
>
¡age1L’gth
) {

1057 
ps2
=
¡age12
+
¡2
;

1058 
¡2
=0; st2<64; ++st2) {

1059 if((
¡3
=(
št32_t
)
ps2
[
¡2
]<<
UCNV_EXT_STAGE_2_LEFT_SHIFT
)!=0) {

1061 
ps3
=
¡age3
+
¡3
;

1070 
v®ue
=
¡age3b
[*
ps3
++];

1071 if(
v®ue
==0) {

1073 } if(
	`UCNV_EXT_FROM_U_IS_PARTIAL
(
v®ue
)) {

1074 
Ëngth
=0;

1075 
	`U16_APPEND_UNSAFE
(
s
, 
Ëngth
, 
c
);

1076 
	`uúv_extG‘UnicodeS‘SŒšg
(

1077 
sh¬edD©a
, 
cx
, 
§
, 
u£F®lback
, 
mšL’gth
,

1078 
c
, 
s
, 
Ëngth
,

1079 (
št32_t
)
	`UCNV_EXT_FROM_U_GET_PARTIAL_INDEX
(
v®ue
),

1080 
pE¼ÜCode
);

1081 } if((
u£F®lback
 ?

1082 (
v®ue
&
UCNV_EXT_FROM_U_RESERVED_MASK
)==0 :

1083 ((
v®ue
&(
UCNV_EXT_FROM_U_ROUNDTRIP_FLAG
|
UCNV_EXT_FROM_U_RESERVED_MASK
))==

1084 
UCNV_EXT_FROM_U_ROUNDTRIP_FLAG
)) &&

1085 
	`UCNV_EXT_FROM_U_GET_LENGTH
(
v®ue
)>=
mšL’gth


1087 
f‹r
) {

1088 
UCNV_SET_FILTER_2022_CN
:

1089 if(!(
	`UCNV_EXT_FROM_U_GET_LENGTH
(
v®ue
)==3 && 
	`UCNV_EXT_FROM_U_GET_DATA
(value)<=0x82ffff)) {

1093 
UCNV_SET_FILTER_SJIS
:

1094 if(!(
	`UCNV_EXT_FROM_U_GET_LENGTH
(
v®ue
)==2 && (v®ue=
	`UCNV_EXT_FROM_U_GET_DATA
(value))>=0x8140 && value<=0xeffc)) {

1098 
UCNV_SET_FILTER_GR94DBCS
:

1099 if(!(
	`UCNV_EXT_FROM_U_GET_LENGTH
(
v®ue
)==2 &&

1100 (
ušt16_t
)((
v®ue
=
	`UCNV_EXT_FROM_U_GET_DATA
(value))-0xa1a1)<=(0xfefe - 0xa1a1) &&

1101 (
ušt8_t
)(
v®ue
-0xa1)<=(0xfe - 0xa1))) {

1105 
UCNV_SET_FILTER_HZ
:

1106 if(!(
	`UCNV_EXT_FROM_U_GET_LENGTH
(
v®ue
)==2 &&

1107 (
ušt16_t
)((
v®ue
=
	`UCNV_EXT_FROM_U_GET_DATA
(value))-0xa1a1)<=(0xfdfe - 0xa1a1) &&

1108 (
ušt8_t
)(
v®ue
-0xa1)<=(0xfe - 0xa1))) {

1119 
§
->
	`add
(§->
£t
, 
c
);

1121 } (++
c
&0xf)!=0);

1123 
c
+=16;

1127 
c
+=1024;

1130 
	}
}

	@ucnv_ext.h

19 #iâdeà
__UCNV_EXT_H__


20 
	#__UCNV_EXT_H__


	)

22 
	~"unicode/uty³s.h
"

24 #ià!
UCONFIG_NO_CONVERSION


26 
	~"unicode/uúv.h
"

27 
	~"uúv_úv.h
"

306 
	mUCNV_EXT_INDEXES_LENGTH
,

308 
	mUCNV_EXT_TO_U_INDEX
,

309 
	mUCNV_EXT_TO_U_LENGTH
,

310 
	mUCNV_EXT_TO_U_UCHARS_INDEX
,

311 
	mUCNV_EXT_TO_U_UCHARS_LENGTH
,

313 
	mUCNV_EXT_FROM_U_UCHARS_INDEX
,

314 
	mUCNV_EXT_FROM_U_VALUES_INDEX
,

315 
	mUCNV_EXT_FROM_U_LENGTH
,

316 
	mUCNV_EXT_FROM_U_BYTES_INDEX
,

317 
	mUCNV_EXT_FROM_U_BYTES_LENGTH
,

319 
	mUCNV_EXT_FROM_U_STAGE_12_INDEX
,

320 
	mUCNV_EXT_FROM_U_STAGE_1_LENGTH
,

321 
	mUCNV_EXT_FROM_U_STAGE_12_LENGTH
,

322 
	mUCNV_EXT_FROM_U_STAGE_3_INDEX
,

323 
	mUCNV_EXT_FROM_U_STAGE_3_LENGTH
,

324 
	mUCNV_EXT_FROM_U_STAGE_3B_INDEX
,

325 
	mUCNV_EXT_FROM_U_STAGE_3B_LENGTH
,

327 
	mUCNV_EXT_COUNT_BYTES
,

328 
	mUCNV_EXT_COUNT_UCHARS
,

329 
	mUCNV_EXT_FLAGS
,

331 
	mUCNV_EXT_RESERVED_INDEX
,

333 
	mUCNV_EXT_SIZE
=31,

334 
	mUCNV_EXT_INDEXES_MIN_LENGTH
=32

338 
	#UCNV_EXT_ARRAY
(
šdexes
, 
šdex
, 
™emTy³
) \

339 ((cÚ¡ 
™emTy³
 *)((cÚ¡ *)(
šdexes
)+(šdexes)[
šdex
]))

	)

341 
	#UCNV_GET_MAX_BYTES_PER_UCHAR
(
šdexes
) \

342 ((
šdexes
)[
UCNV_EXT_COUNT_BYTES
]&0xff)

	)

346 
U_CFUNC
 
UBoŞ


347 
uúv_extIn™ŸlM©chToU
(
UCÚv”‹r
 *
úv
, cÚ¡ 
št32_t
 *
cx
,

348 
št32_t
 
fœ¡L’gth
,

349 cÚ¡ **
¤c
, cÚ¡ *
¤cLim™
,

350 
UCh¬
 **
rg‘
, cÚ¡ UCh¬ *
rg‘Lim™
,

351 
št32_t
 **
off£ts
, iÁ32_ˆ
¤cIndex
,

352 
UBoŞ
 
æush
,

353 
UE¼ÜCode
 *
pE¼ÜCode
);

355 
U_CFUNC
 
UCh¬32


356 
uúv_extSim¶eM©chToU
(cÚ¡ 
št32_t
 *
cx
,

357 cÚ¡ *
sourû
, 
št32_t
 
Ëngth
,

358 
UBoŞ
 
u£F®lback
);

360 
U_CFUNC
 

361 
uúv_extCÚtšueM©chToU
(
UCÚv”‹r
 *
úv
,

362 
UCÚv”‹rToUnicodeArgs
 *
pArgs
, 
št32_t
 
¤cIndex
,

363 
UE¼ÜCode
 *
pE¼ÜCode
);

366 
U_CFUNC
 
UBoŞ


367 
uúv_extIn™ŸlM©chFromU
(
UCÚv”‹r
 *
úv
, cÚ¡ 
št32_t
 *
cx
,

368 
UCh¬32
 
ı
,

369 cÚ¡ 
UCh¬
 **
¤c
, cÚ¡ UCh¬ *
¤cLim™
,

370 **
rg‘
, cÚ¡ *
rg‘Lim™
,

371 
št32_t
 **
off£ts
, iÁ32_ˆ
¤cIndex
,

372 
UBoŞ
 
æush
,

373 
UE¼ÜCode
 *
pE¼ÜCode
);

375 
U_CFUNC
 
št32_t


376 
uúv_extSim¶eM©chFromU
(cÚ¡ 
št32_t
 *
cx
,

377 
UCh¬32
 
ı
, 
ušt32_t
 *
pV®ue
,

378 
UBoŞ
 
u£F®lback
);

380 
U_CFUNC
 

381 
uúv_extCÚtšueM©chFromU
(
UCÚv”‹r
 *
úv
,

382 
UCÚv”‹rFromUnicodeArgs
 *
pArgs
, 
št32_t
 
¤cIndex
,

383 
UE¼ÜCode
 *
pE¼ÜCode
);

394 
U_CFUNC
 

395 
uúv_extG‘UnicodeS‘
(cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

396 cÚ¡ 
US‘Add”
 *
§
,

397 
UCÚv”‹rUnicodeS‘
 
which
,

398 
UCÚv”‹rS‘F‹r
 
f‹r
,

399 
UE¼ÜCode
 *
pE¼ÜCode
);

403 
	#UCNV_EXT_TO_U_BYTE_SHIFT
 24

	)

404 
	#UCNV_EXT_TO_U_VALUE_MASK
 0xffffff

	)

405 
	#UCNV_EXT_TO_U_MIN_CODE_POINT
 0x1f0000

	)

406 
	#UCNV_EXT_TO_U_MAX_CODE_POINT
 0x2fffff

	)

407 
	#UCNV_EXT_TO_U_ROUNDTRIP_FLAG
 ((
ušt32_t
)1<<23)

	)

408 
	#UCNV_EXT_TO_U_INDEX_MASK
 0x3ffff

	)

409 
	#UCNV_EXT_TO_U_LENGTH_SHIFT
 18

	)

410 
	#UCNV_EXT_TO_U_LENGTH_OFFSET
 12

	)

413 
	#UCNV_EXT_MAX_UCHARS
 19

	)

415 
	#UCNV_EXT_TO_U_MAKE_WORD
(
by‹
, 
v®ue
è(((
ušt32_t
)(by‹)<<
UCNV_EXT_TO_U_BYTE_SHIFT
)|(v®ue))

	)

417 
	#UCNV_EXT_TO_U_GET_BYTE
(
wÜd
è((wÜd)>>
UCNV_EXT_TO_U_BYTE_SHIFT
)

	)

418 
	#UCNV_EXT_TO_U_GET_VALUE
(
wÜd
è((wÜd)&
UCNV_EXT_TO_U_VALUE_MASK
)

	)

420 
	#UCNV_EXT_TO_U_IS_PARTIAL
(
v®ue
è((v®ue)<
UCNV_EXT_TO_U_MIN_CODE_POINT
)

	)

421 
	#UCNV_EXT_TO_U_GET_PARTIAL_INDEX
(
v®ue
è(v®ue)

	)

423 
	#UCNV_EXT_TO_U_IS_ROUNDTRIP
(
v®ue
è(((v®ue)&
UCNV_EXT_TO_U_ROUNDTRIP_FLAG
)!=0)

	)

424 
	#UCNV_EXT_TO_U_MASK_ROUNDTRIP
(
v®ue
è((v®ue)&~
UCNV_EXT_TO_U_ROUNDTRIP_FLAG
)

	)

427 
	#UCNV_EXT_TO_U_IS_CODE_POINT
(
v®ue
è((v®ue)<=
UCNV_EXT_TO_U_MAX_CODE_POINT
)

	)

428 
	#UCNV_EXT_TO_U_GET_CODE_POINT
(
v®ue
è((v®ue)-
UCNV_EXT_TO_U_MIN_CODE_POINT
)

	)

430 
	#UCNV_EXT_TO_U_GET_INDEX
(
v®ue
è((v®ue)&
UCNV_EXT_TO_U_INDEX_MASK
)

	)

431 
	#UCNV_EXT_TO_U_GET_LENGTH
(
v®ue
è(((v®ue)>>
UCNV_EXT_TO_U_LENGTH_SHIFT
)-
UCNV_EXT_TO_U_LENGTH_OFFSET
)

	)

438 
	#UCNV_EXT_STAGE_2_LEFT_SHIFT
 2

	)

439 
	#UCNV_EXT_STAGE_3_GRANULARITY
 4

	)

442 
	#UCNV_EXT_FROM_U
(
¡age12
, 
¡age3
, 
s1Index
, 
c
) \

443 (
¡age3
)[ ((
št32_t
)(
¡age12
)[ (¡age12)[
s1Index
] +(((
c
)>>4)&0x3fè]<<
UCNV_EXT_STAGE_2_LEFT_SHIFT
è+((c)&0xfè]

	)

445 
	#UCNV_EXT_FROM_U_LENGTH_SHIFT
 24

	)

446 
	#UCNV_EXT_FROM_U_ROUNDTRIP_FLAG
 ((
ušt32_t
)1<<31)

	)

447 
	#UCNV_EXT_FROM_U_RESERVED_MASK
 0x60000000

	)

448 
	#UCNV_EXT_FROM_U_DATA_MASK
 0xffffff

	)

451 
	#UCNV_EXT_FROM_U_SUBCHAR1
 0x80000001

	)

454 
	#UCNV_EXT_FROM_U_MAX_DIRECT_LENGTH
 3

	)

457 
	#UCNV_EXT_MAX_BYTES
 0x1f

	)

459 
	#UCNV_EXT_FROM_U_IS_PARTIAL
(
v®ue
è(((v®ue)>>
UCNV_EXT_FROM_U_LENGTH_SHIFT
)==0)

	)

460 
	#UCNV_EXT_FROM_U_GET_PARTIAL_INDEX
(
v®ue
è(v®ue)

	)

462 
	#UCNV_EXT_FROM_U_IS_ROUNDTRIP
(
v®ue
è(((v®ue)&
UCNV_EXT_FROM_U_ROUNDTRIP_FLAG
)!=0)

	)

463 
	#UCNV_EXT_FROM_U_MASK_ROUNDTRIP
(
v®ue
è((v®ue)&~
UCNV_EXT_FROM_U_ROUNDTRIP_FLAG
)

	)

466 
	#UCNV_EXT_FROM_U_GET_LENGTH
(
v®ue
è(
št32_t
)(((v®ue)>>
UCNV_EXT_FROM_U_LENGTH_SHIFT
)&
UCNV_EXT_MAX_BYTES
)

	)

469 
	#UCNV_EXT_FROM_U_GET_DATA
(
v®ue
è((v®ue)&
UCNV_EXT_FROM_U_DATA_MASK
)

	)

	@ucnv_imp.h

20 #iâdeà
UCNV_IMP_H


21 
	#UCNV_IMP_H


	)

23 
	~"unicode/uty³s.h
"

25 #ià!
UCONFIG_NO_CONVERSION


27 
	~"unicode/uloc.h
"

28 
	~"uúv_bld.h
"

37 
	#UCNV_FAST_IS_UTF8
(
Çme
) \

38 (((
Çme
[0]=='U' ? \

39 Ğ
Çme
[1]=='T' &&‚ame[2]=='F') : \

40 (
Çme
[0]=='u' &&‚ame[1]=='t' &&‚ame[2]=='f'))) \

41 && (
Çme
[3]=='-' ? \

42 (
Çme
[4]=='8' &&‚ame[5]==0) : \

43 (
Çme
[3]=='8' &&‚ame[4]==0)))

	)

46 
	múvName
[
UCNV_MAX_CONVERTER_NAME_LENGTH
];

47 
	mloÿË
[
ULOC_FULLNAME_CAPACITY
];

48 
ušt32_t
 
	mİtiÚs
;

49 } 
	tUCÚv”‹rNameP›ûs
;

51 
U_CFUNC
 
UBoŞ


52 
uúv_ÿnC»©eCÚv”‹r
(cÚ¡ *
cÚv”‹rName
, 
UE¼ÜCode
 *
”r
);

59 
UCÚv”‹r
 *
uúv_ü—‹CÚv”‹r
 (UCÚv”‹¸*
myUCÚv”‹r
, cÚ¡ *
cÚv”‹rName
, 
UE¼ÜCode
 * 
”r
);

72 
U_CFUNC
 
UCÚv”‹r
 *

73 
uúv_ü—‹AlgÜ™hmicCÚv”‹r
(
UCÚv”‹r
 *
myUCÚv”‹r
,

74 
UCÚv”‹rTy³
 
ty³
,

75 cÚ¡ *
loÿË
, 
ušt32_t
 
İtiÚs
,

76 
UE¼ÜCode
 *
”r
);

84 
UCÚv”‹r
*

85 
uúv_ü—‹CÚv”‹rFromSh¬edD©a
(
UCÚv”‹r
 *
myUCÚv”‹r
,

86 
UCÚv”‹rSh¬edD©a
 *
mySh¬edCÚv”‹rD©a
,

87 
UCÚv”‹rLßdArgs
 *
pArgs
,

88 
UE¼ÜCode
 *
”r
);

90 
UCÚv”‹r
* 
uúv_ü—‹CÚv”‹rFromPackage
(cÚ¡ *
·ckageName
, cÚ¡ *
cÚv”‹rName
,

91 
UE¼ÜCode
 *
”r
);

108 
UCÚv”‹rSh¬edD©a
 *

109 
uúv_lßdSh¬edD©a
(cÚ¡ *
cÚv”‹rName
,

110 
UCÚv”‹rNameP›ûs
 *
p›ûs
,

111 
UCÚv”‹rLßdArgs
 *
pArgs
,

112 
UE¼ÜCode
 * 
”r
);

119 
uúv_uÆßdSh¬edD©aIfR—dy
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
);

125 
uúv_šüem’tRefCouÁ
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
);

131 
	#UCNV_TO_U_DEFAULT_CALLBACK
 ((
UCÚv”‹rToUC®lback
è
UCNV_TO_U_CALLBACK_SUBSTITUTE
)

	)

132 
	#UCNV_FROM_U_DEFAULT_CALLBACK
 ((
UCÚv”‹rFromUC®lback
è
UCNV_FROM_U_CALLBACK_SUBSTITUTE
)

	)

	@ucnv_io.c

30 
	~"unicode/uty³s.h
"

32 #ià!
UCONFIG_NO_CONVERSION


34 
	~"unicode/uúv.h
"

35 
	~"unicode/ud©a.h
"

37 
	~"umu‹x.h
"

38 
	~"u¬rsÜt.h
"

39 
	~"ud©aswp.h
"

40 
	~"c¡ršg.h
"

41 
	~"cmemÜy.h
"

42 
	~"uúv_io.h
"

43 
	~"u’umimp.h
"

44 
	~"uşn_cmn.h
"

166 
	sUAlŸsCÚ‹xt
 {

167 
ušt32_t
 
	mli¡Off£t
;

168 
ušt32_t
 
	mli¡Idx
;

169 } 
	tUAlŸsCÚ‹xt
;

171 cÚ¡ 
	gDATA_NAME
[] = "cnvalias";

172 cÚ¡ 
	gDATA_TYPE
[] = "icu";

174 
UD©aMemÜy
 *
	ggAlŸsD©a
=
NULL
;

177 
	mtocL’gthIndex
=0,

178 
	mcÚv”‹rLi¡Index
=1,

179 
	mgLi¡Index
=2,

180 
	m®ŸsLi¡Index
=3,

181 
	muÁaggedCÚvA¼ayIndex
=4,

182 
	mggedAlŸsA¼ayIndex
=5,

183 
	mggedAlŸsLi¡sIndex
=6,

184 
	mbËO±iÚsIndex
=7,

185 
	m¡ršgTabËIndex
=8,

186 
	mnÜm®izedSŒšgTabËIndex
=9,

187 
	moff£tsCouÁ
,

188 
	mmšTocL’gth
=8

191 cÚ¡ 
UCÚv”‹rAlŸsO±iÚs
 
	gdeçuÉTabËO±iÚs
 = {

192 
UCNV_IO_UNNORMALIZED
,

195 
UCÚv”‹rAlŸs
 
	ggMašTabË
;

197 
	#GET_STRING
(
idx
è(cÚ¡ *)(
gMašTabË
.
¡ršgTabË
 + (idx))

	)

198 
	#GET_NORMALIZED_STRING
(
idx
è(cÚ¡ *)(
gMašTabË
.
nÜm®izedSŒšgTabË
 + (idx))

	)

200 
UBoŞ
 
U_CALLCONV


201 
	$isAcû±abË
(*
cÚ‹xt
,

202 cÚ¡ *
ty³
, cÚ¡ *
Çme
,

203 cÚ¡ 
UD©aInfo
 *
pInfo
) {

204  (
UBoŞ
)(

205 
pInfo
->
size
>=20 &&

206 
pInfo
->
isBigEndŸn
==
U_IS_BIG_ENDIAN
 &&

207 
pInfo
->
ch¬£tFamy
==
U_CHARSET_FAMILY
 &&

208 
pInfo
->
d©aFÜm©
[0]==0x43 &&

209 
pInfo
->
d©aFÜm©
[1]==0x76 &&

210 
pInfo
->
d©aFÜm©
[2]==0x41 &&

211 
pInfo
->
d©aFÜm©
[3]==0x6c &&

212 
pInfo
->
fÜm©V”siÚ
[0]==3);

213 
	}
}

215 
UBoŞ
 
U_CALLCONV
 
	$uúv_io_ş—nup
()

217 ià(
gAlŸsD©a
) {

218 
	`ud©a_şo£
(
gAlŸsD©a
);

219 
gAlŸsD©a
 = 
NULL
;

222 
	`u´v_mem£t
(&
gMašTabË
, 0, (gMainTable));

224  
TRUE
;

225 
	}
}

227 
UBoŞ


228 
	$haveAlŸsD©a
(
UE¼ÜCode
 *
pE¼ÜCode
) {

229 
ÃedIn™
;

231 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

232  
FALSE
;

235 
	`UMTX_CHECK
(
NULL
, (
gAlŸsD©a
==NULL), 
ÃedIn™
);

238 ià(
ÃedIn™
) {

239 
UD©aMemÜy
 *
d©a
;

240 cÚ¡ 
ušt16_t
 *
bË
;

241 cÚ¡ 
ušt32_t
 *
£ùiÚSizes
;

242 
ušt32_t
 
bËS¹
;

243 
ušt32_t
 
cu¼Off£t
;

245 
d©a
 = 
	`ud©a_İ’Choiû
(
NULL
, 
DATA_TYPE
, 
DATA_NAME
, 
isAcû±abË
, NULL, 
pE¼ÜCode
);

246 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

247  
FALSE
;

250 
£ùiÚSizes
 = (cÚ¡ 
ušt32_t
 *)
	`ud©a_g‘MemÜy
(
d©a
);

251 
bË
 = (cÚ¡ 
ušt16_t
 *)
£ùiÚSizes
;

253 
bËS¹
 = 
£ùiÚSizes
[0];

254 ià(
bËS¹
 < 
mšTocL’gth
) {

255 *
pE¼ÜCode
 = 
U_INVALID_FORMAT_ERROR
;

256 
	`ud©a_şo£
(
d©a
);

257  
FALSE
;

260 
	`umtx_lock
(
NULL
);

261 if(
gAlŸsD©a
==
NULL
) {

262 
gMašTabË
.
cÚv”‹rLi¡Size
 = 
£ùiÚSizes
[1];

263 
gMašTabË
.
gLi¡Size
 = 
£ùiÚSizes
[2];

264 
gMašTabË
.
®ŸsLi¡Size
 = 
£ùiÚSizes
[3];

265 
gMašTabË
.
uÁaggedCÚvA¼aySize
 = 
£ùiÚSizes
[4];

266 
gMašTabË
.
ggedAlŸsA¼aySize
 = 
£ùiÚSizes
[5];

267 
gMašTabË
.
ggedAlŸsLi¡sSize
 = 
£ùiÚSizes
[6];

268 
gMašTabË
.
İtiÚTabËSize
 = 
£ùiÚSizes
[7];

269 
gMašTabË
.
¡ršgTabËSize
 = 
£ùiÚSizes
[8];

271 ià(
bËS¹
 > 8) {

272 
gMašTabË
.
nÜm®izedSŒšgTabËSize
 = 
£ùiÚSizes
[9];

275 
cu¼Off£t
 = 
bËS¹
 * ((
ušt32_t
)/(
ušt16_t
)) + ((uint32_t)/(uint16_t));

276 
gMašTabË
.
cÚv”‹rLi¡
 = 
bË
 + 
cu¼Off£t
;

278 
cu¼Off£t
 +ğ
gMašTabË
.
cÚv”‹rLi¡Size
;

279 
gMašTabË
.
gLi¡
 = 
bË
 + 
cu¼Off£t
;

281 
cu¼Off£t
 +ğ
gMašTabË
.
gLi¡Size
;

282 
gMašTabË
.
®ŸsLi¡
 = 
bË
 + 
cu¼Off£t
;

284 
cu¼Off£t
 +ğ
gMašTabË
.
®ŸsLi¡Size
;

285 
gMašTabË
.
uÁaggedCÚvA¼ay
 = 
bË
 + 
cu¼Off£t
;

287 
cu¼Off£t
 +ğ
gMašTabË
.
uÁaggedCÚvA¼aySize
;

288 
gMašTabË
.
ggedAlŸsA¼ay
 = 
bË
 + 
cu¼Off£t
;

291 
cu¼Off£t
 +ğ
gMašTabË
.
ggedAlŸsA¼aySize
;

292 
gMašTabË
.
ggedAlŸsLi¡s
 = 
bË
 + 
cu¼Off£t
;

294 
cu¼Off£t
 +ğ
gMašTabË
.
ggedAlŸsLi¡sSize
;

295 ià(
gMašTabË
.
İtiÚTabËSize
 > 0

296 && ((cÚ¡ 
UCÚv”‹rAlŸsO±iÚs
 *)(
bË
 + 
cu¼Off£t
))->
¡ršgNÜm®iz©iÚTy³
 < 
UCNV_IO_NORM_TYPE_COUNT
)

299 
gMašTabË
.
İtiÚTabË
 = (cÚ¡ 
UCÚv”‹rAlŸsO±iÚs
 *)(
bË
 + 
cu¼Off£t
);

304 
gMašTabË
.
İtiÚTabË
 = &
deçuÉTabËO±iÚs
;

307 
cu¼Off£t
 +ğ
gMašTabË
.
İtiÚTabËSize
;

308 
gMašTabË
.
¡ršgTabË
 = 
bË
 + 
cu¼Off£t
;

310 
cu¼Off£t
 +ğ
gMašTabË
.
¡ršgTabËSize
;

311 
gMašTabË
.
nÜm®izedSŒšgTabË
 = ((gMašTabË.
İtiÚTabË
->
¡ršgNÜm®iz©iÚTy³
 =ğ
UCNV_IO_UNNORMALIZED
)

312 ? 
gMašTabË
.
¡ršgTabË
 : (
bË
 + 
cu¼Off£t
));

314 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_UCNV_IO
, 
uúv_io_ş—nup
);

316 
gAlŸsD©a
 = 
d©a
;

317 
d©a
=
NULL
;

319 
	`umtx_uÆock
(
NULL
);

322 if(
d©a
!=
NULL
) {

323 
	`ud©a_şo£
(
d©a
);

327  
TRUE
;

328 
	}
}

330 
U_INLINE
 
UBoŞ


331 
	$isAlŸs
(cÚ¡ *
®Ÿs
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

332 if(
®Ÿs
==
NULL
) {

333 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

334  
FALSE
;

336  (
UBoŞ
)(*
®Ÿs
!=0);

337 
	}
}

339 
ušt32_t
 
	$g‘TagNumb”
(cÚ¡ *
gÇme
) {

340 ià(
gMašTabË
.
gLi¡
) {

341 
ušt32_t
 
gNum
;

342 
gNum
 = 0;agNum < 
gMašTabË
.
gLi¡Size
;agNum++) {

343 ià(!
	`u´v_¡ricmp
(
	`GET_STRING
(
gMašTabË
.
gLi¡
[
gNum
]), 
gÇme
)) {

344  
gNum
;

349  
UINT32_MAX
;

350 
	}
}

354 
	mIGNORE
,

355 
	mZERO
,

356 
	mNONZERO
,

357 
	mMINLETTER


361 cÚ¡ 
ušt8_t
 
	gasciiTy³s
[128] = {

365 
ZERO
, 
NONZERO
, NONZERO, NONZERO, NONZERO, NONZERO, NONZERO, NONZERO, NONZERO, NONZERO, 0, 0, 0, 0, 0, 0,

372 
	#GET_ASCII_TYPE
(
c
è((
št8_t
)(cè>ğ0 ? 
asciiTy³s
[(
ušt8_t
)c] : (ušt8_t)
IGNORE
)

	)

375 cÚ¡ 
ušt8_t
 
	gebcdicTy³s
[128] = {

383 
ZERO
, 
NONZERO
, NONZERO, NONZERO, NONZERO, NONZERO, NONZERO, NONZERO, NONZERO, NONZERO, 0, 0, 0, 0, 0, 0

386 
	#GET_EBCDIC_TYPE
(
c
è((
št8_t
)(cè< 0 ? 
ebcdicTy³s
[(c)&0x7f] : (
ušt8_t
)
IGNORE
)

	)

388 #ià
U_CHARSET_FAMILY
==
U_ASCII_FAMILY


389 
	#GET_CHAR_TYPE
(
c
è
	`GET_ASCII_TYPE
(c)

	)

390 #–ià
U_CHARSET_FAMILY
==
U_EBCDIC_FAMILY


391 
	#GET_CHAR_TYPE
(
c
è
	`GET_EBCDIC_TYPE
(c)

	)

393 #”rÜ 
U_CHARSET_FAMILY
 
is
 
nÙ
 
v®id


397 
U_CFUNC
 * 
U_EXPORT2


398 
	$uúv_io_¡rASCIIFÜCom·»
(*
d¡
, cÚ¡ *
Çme
) {

399 *
d¡IŒ
 = 
d¡
;

400 
ušt8_t
 
ty³
, 
ÃxtTy³
;

401 
c1
;

402 
UBoŞ
 
aá”Dig™
 = 
FALSE
;

404 (
c1
 = *
Çme
++) != 0) {

405 
ty³
 = 
	`GET_ASCII_TYPE
(
c1
);

406 
ty³
) {

407 
IGNORE
:

408 
aá”Dig™
 = 
FALSE
;

410 
ZERO
:

411 ià(!
aá”Dig™
) {

412 
ÃxtTy³
 = 
	`GET_ASCII_TYPE
(*
Çme
);

413 ià(
ÃxtTy³
 =ğ
ZERO
 ||‚extTy³ =ğ
NONZERO
) {

418 
NONZERO
:

419 
aá”Dig™
 = 
TRUE
;

422 
c1
 = ()
ty³
;

423 
aá”Dig™
 = 
FALSE
;

426 *
d¡IŒ
++ = 
c1
;

428 *
d¡IŒ
 = 0;

429  
d¡
;

430 
	}
}

432 
U_CFUNC
 * 
U_EXPORT2


433 
	$uúv_io_¡rEBCDICFÜCom·»
(*
d¡
, cÚ¡ *
Çme
) {

434 *
d¡IŒ
 = 
d¡
;

435 
ušt8_t
 
ty³
, 
ÃxtTy³
;

436 
c1
;

437 
UBoŞ
 
aá”Dig™
 = 
FALSE
;

439 (
c1
 = *
Çme
++) != 0) {

440 
ty³
 = 
	`GET_EBCDIC_TYPE
(
c1
);

441 
ty³
) {

442 
IGNORE
:

443 
aá”Dig™
 = 
FALSE
;

445 
ZERO
:

446 ià(!
aá”Dig™
) {

447 
ÃxtTy³
 = 
	`GET_EBCDIC_TYPE
(*
Çme
);

448 ià(
ÃxtTy³
 =ğ
ZERO
 ||‚extTy³ =ğ
NONZERO
) {

453 
NONZERO
:

454 
aá”Dig™
 = 
TRUE
;

457 
c1
 = ()
ty³
;

458 
aá”Dig™
 = 
FALSE
;

461 *
d¡IŒ
++ = 
c1
;

463 *
d¡IŒ
 = 0;

464  
d¡
;

465 
	}
}

488 
U_CAPI
 
U_EXPORT2


489 
	$uúv_com·»Names
(cÚ¡ *
Çme1
, cÚ¡ *
Çme2
) {

490 
rc
;

491 
ušt8_t
 
ty³
, 
ÃxtTy³
;

492 
c1
, 
c2
;

493 
UBoŞ
 
aá”Dig™1
 = 
FALSE
, 
aá”Dig™2
 = FALSE;

496 (
c1
 = *
Çme1
++) != 0) {

497 
ty³
 = 
	`GET_CHAR_TYPE
(
c1
);

498 
ty³
) {

499 
IGNORE
:

500 
aá”Dig™1
 = 
FALSE
;

502 
ZERO
:

503 ià(!
aá”Dig™1
) {

504 
ÃxtTy³
 = 
	`GET_CHAR_TYPE
(*
Çme1
);

505 ià(
ÃxtTy³
 =ğ
ZERO
 ||‚extTy³ =ğ
NONZERO
) {

510 
NONZERO
:

511 
aá”Dig™1
 = 
TRUE
;

514 
c1
 = ()
ty³
;

515 
aá”Dig™1
 = 
FALSE
;

520 (
c2
 = *
Çme2
++) != 0) {

521 
ty³
 = 
	`GET_CHAR_TYPE
(
c2
);

522 
ty³
) {

523 
IGNORE
:

524 
aá”Dig™2
 = 
FALSE
;

526 
ZERO
:

527 ià(!
aá”Dig™2
) {

528 
ÃxtTy³
 = 
	`GET_CHAR_TYPE
(*
Çme2
);

529 ià(
ÃxtTy³
 =ğ
ZERO
 ||‚extTy³ =ğ
NONZERO
) {

534 
NONZERO
:

535 
aá”Dig™2
 = 
TRUE
;

538 
c2
 = ()
ty³
;

539 
aá”Dig™2
 = 
FALSE
;

546 ià((
c1
|
c2
)==0) {

551 
rc
 = ()()
c1
 - ()()
c2
;

552 ià(
rc
 != 0) {

553  
rc
;

556 
	}
}

562 
U_INLINE
 
ušt32_t


563 
	$fšdCÚv”‹r
(cÚ¡ *
®Ÿs
, 
UBoŞ
 *
cÚšsO±iÚ
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

564 
ušt32_t
 
mid
, 
¡¬t
, 
lim™
;

565 
ušt32_t
 
Ï¡Mid
;

566 
»suÉ
;

567 
isUÂÜm®ized
 = (
gMašTabË
.
İtiÚTabË
->
¡ršgNÜm®iz©iÚTy³
 =ğ
UCNV_IO_UNNORMALIZED
);

568 
¡r³dName
[
UCNV_MAX_CONVERTER_NAME_LENGTH
];

570 ià(!
isUÂÜm®ized
) {

571 ià(
	`u´v_¡¾’
(
®Ÿs
è>ğ
UCNV_MAX_CONVERTER_NAME_LENGTH
) {

572 *
pE¼ÜCode
 = 
U_BUFFER_OVERFLOW_ERROR
;

573  
UINT32_MAX
;

577 
	`uúv_io_¡rFÜCom·»
(
¡r³dName
, 
®Ÿs
);

578 
®Ÿs
 = 
¡r³dName
;

582 
¡¬t
 = 0;

583 
lim™
 = 
gMašTabË
.
uÁaggedCÚvA¼aySize
;

584 
mid
 = 
lim™
;

585 
Ï¡Mid
 = 
UINT32_MAX
;

588 
mid
 = (
ušt32_t
)((
¡¬t
 + 
lim™
) / 2);

589 ià(
Ï¡Mid
 =ğ
mid
) {

592 
Ï¡Mid
 = 
mid
;

593 ià(
isUÂÜm®ized
) {

594 
»suÉ
 = 
	`uúv_com·»Names
(
®Ÿs
, 
	`GET_STRING
(
gMašTabË
.
®ŸsLi¡
[
mid
]));

597 
»suÉ
 = 
	`u´v_¡rcmp
(
®Ÿs
, 
	`GET_NORMALIZED_STRING
(
gMašTabË
.
®ŸsLi¡
[
mid
]));

600 ià(
»suÉ
 < 0) {

601 
lim™
 = 
mid
;

602 } ià(
»suÉ
 > 0) {

603 
¡¬t
 = 
mid
;

609 ià(
gMašTabË
.
uÁaggedCÚvA¼ay
[
mid
] & 
UCNV_AMBIGUOUS_ALIAS_MAP_BIT
) {

610 *
pE¼ÜCode
 = 
U_AMBIGUOUS_ALIAS_WARNING
;

614 ià(
cÚšsO±iÚ
) {

615 
UBoŞ
 
cÚšsCnvO±iÚInfo
 = (UBoŞ)
gMašTabË
.
İtiÚTabË
->containsCnvOptionInfo;

616 *
cÚšsO±iÚ
 = (
UBoŞ
)((
cÚšsCnvO±iÚInfo


617 && ((
gMašTabË
.
uÁaggedCÚvA¼ay
[
mid
] & 
UCNV_CONTAINS_OPTION_BIT
) != 0))

618 || !
cÚšsCnvO±iÚInfo
);

620  
gMašTabË
.
uÁaggedCÚvA¼ay
[
mid
] & 
UCNV_CONVERTER_INDEX_MASK
;

624  
UINT32_MAX
;

625 
	}
}

631 
U_INLINE
 
UBoŞ


632 
	$isAlŸsInLi¡
(cÚ¡ *
®Ÿs
, 
ušt32_t
 
li¡Off£t
) {

633 ià(
li¡Off£t
) {

634 
ušt32_t
 
cu¼AlŸs
;

635 
ušt32_t
 
li¡CouÁ
 = 
gMašTabË
.
ggedAlŸsLi¡s
[
li¡Off£t
];

637 cÚ¡ 
ušt16_t
 *
cu¼Li¡
 = 
gMašTabË
.
ggedAlŸsLi¡s
 + 
li¡Off£t
 + 1;

638 
cu¼AlŸs
 = 0; cu¼AlŸ < 
li¡CouÁ
; currAlias++) {

639 ià(
cu¼Li¡
[
cu¼AlŸs
]

640 && 
	`uúv_com·»Names
(
®Ÿs
, 
	`GET_STRING
(
cu¼Li¡
[
cu¼AlŸs
]))==0)

642  
TRUE
;

646  
FALSE
;

647 
	}
}

655 
ušt32_t


656 
	$fšdTaggedAlŸsLi¡sOff£t
(cÚ¡ *
®Ÿs
, cÚ¡ *
¡ªd¬d
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

657 
ušt32_t
 
idx
;

658 
ušt32_t
 
li¡Off£t
;

659 
ušt32_t
 
cÚvNum
;

660 
UE¼ÜCode
 
myE¼
 = 
U_ZERO_ERROR
;

661 
ušt32_t
 
gNum
 = 
	`g‘TagNumb”
(
¡ªd¬d
);

664 
cÚvNum
 = 
	`fšdCÚv”‹r
(
®Ÿs
, 
NULL
, &
myE¼
);

665 ià(
myE¼
 !ğ
U_ZERO_ERROR
) {

666 *
pE¼ÜCode
 = 
myE¼
;

669 ià(
gNum
 < (
gMašTabË
.
gLi¡Size
 - 
UCNV_NUM_HIDDEN_TAGS
è&& 
cÚvNum
 < gMašTabË.
cÚv”‹rLi¡Size
) {

670 
li¡Off£t
 = 
gMašTabË
.
ggedAlŸsA¼ay
[
gNum
*gMašTabË.
cÚv”‹rLi¡Size
 + 
cÚvNum
];

671 ià(
li¡Off£t
 && 
gMašTabË
.
ggedAlŸsLi¡s
[listOffset + 1]) {

672  
li¡Off£t
;

674 ià(
myE¼
 =ğ
U_AMBIGUOUS_ALIAS_WARNING
) {

680 
idx
 = 0; idx < 
gMašTabË
.
ggedAlŸsA¼aySize
; idx++) {

681 
li¡Off£t
 = 
gMašTabË
.
ggedAlŸsA¼ay
[
idx
];

682 ià(
li¡Off£t
 && 
	`isAlŸsInLi¡
(
®Ÿs
,†istOffset)) {

683 
ušt32_t
 
cu¼TagNum
 = 
idx
/
gMašTabË
.
cÚv”‹rLi¡Size
;

684 
ušt32_t
 
cu¼CÚvNum
 = (
idx
 - 
cu¼TagNum
*
gMašTabË
.
cÚv”‹rLi¡Size
);

685 
ušt32_t
 
‹mpLi¡Off£t
 = 
gMašTabË
.
ggedAlŸsA¼ay
[
gNum
*gMašTabË.
cÚv”‹rLi¡Size
 + 
cu¼CÚvNum
];

686 ià(
‹mpLi¡Off£t
 && 
gMašTabË
.
ggedAlŸsLi¡s
[tempListOffset + 1]) {

687  
‹mpLi¡Off£t
;

702  
UINT32_MAX
;

703 
	}
}

706 
ušt32_t


707 
	$fšdTaggedCÚv”‹rNum
(cÚ¡ *
®Ÿs
, cÚ¡ *
¡ªd¬d
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

708 
ušt32_t
 
idx
;

709 
ušt32_t
 
li¡Off£t
;

710 
ušt32_t
 
cÚvNum
;

711 
UE¼ÜCode
 
myE¼
 = 
U_ZERO_ERROR
;

712 
ušt32_t
 
gNum
 = 
	`g‘TagNumb”
(
¡ªd¬d
);

715 
cÚvNum
 = 
	`fšdCÚv”‹r
(
®Ÿs
, 
NULL
, &
myE¼
);

716 ià(
myE¼
 !ğ
U_ZERO_ERROR
) {

717 *
pE¼ÜCode
 = 
myE¼
;

720 ià(
gNum
 < (
gMašTabË
.
gLi¡Size
 - 
UCNV_NUM_HIDDEN_TAGS
è&& 
cÚvNum
 < gMašTabË.
cÚv”‹rLi¡Size
) {

721 
li¡Off£t
 = 
gMašTabË
.
ggedAlŸsA¼ay
[
gNum
*gMašTabË.
cÚv”‹rLi¡Size
 + 
cÚvNum
];

722 ià(
li¡Off£t
 && 
	`isAlŸsInLi¡
(
®Ÿs
,†istOffset)) {

723  
cÚvNum
;

725 ià(
myE¼
 =ğ
U_AMBIGUOUS_ALIAS_WARNING
) {

731 
ušt32_t
 
cÚvS¹
 = (
gNum
)*
gMašTabË
.
cÚv”‹rLi¡Size
;

732 
ušt32_t
 
cÚvLim™
 = (
gNum
+1)*
gMašTabË
.
cÚv”‹rLi¡Size
;

733 
idx
 = 
cÚvS¹
; idx < 
cÚvLim™
; idx++) {

734 
li¡Off£t
 = 
gMašTabË
.
ggedAlŸsA¼ay
[
idx
];

735 ià(
li¡Off£t
 && 
	`isAlŸsInLi¡
(
®Ÿs
,†istOffset)) {

736  
idx
-
cÚvS¹
;

745  
UINT32_MAX
;

746 
	}
}

750 
U_CFUNC
 const *

751 
	$uúv_io_g‘CÚv”‹rName
(cÚ¡ *
®Ÿs
, 
UBoŞ
 *
cÚšsO±iÚ
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

752 if(
	`haveAlŸsD©a
(
pE¼ÜCode
è&& 
	`isAlŸs
(
®Ÿs
,…ErrorCode)) {

753 
ušt32_t
 
cÚvNum
 = 
	`fšdCÚv”‹r
(
®Ÿs
, 
cÚšsO±iÚ
, 
pE¼ÜCode
);

754 ià(
cÚvNum
 < 
gMašTabË
.
cÚv”‹rLi¡Size
) {

755  
	`GET_STRING
(
gMašTabË
.
cÚv”‹rLi¡
[
cÚvNum
]);

759  
NULL
;

760 
	}
}

762 
št32_t
 
U_CALLCONV


763 
	$uúv_io_couÁSnd¬dAlŸ£s
(
UEnum”©iÚ
 *
’um”©Ü
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

764 
št32_t
 
v®ue
 = 0;

765 
UAlŸsCÚ‹xt
 *
myCÚ‹xt
 = (UAlŸsCÚ‹xˆ*)(
’um”©Ü
->
cÚ‹xt
);

766 
ušt32_t
 
li¡Off£t
 = 
myCÚ‹xt
->listOffset;

768 ià(
li¡Off£t
) {

769 
v®ue
 = 
gMašTabË
.
ggedAlŸsLi¡s
[
li¡Off£t
];

771  
v®ue
;

772 
	}
}

774 cÚ¡ * 
U_CALLCONV


775 
	$uúv_io_ÃxtSnd¬dAlŸ£s
(
UEnum”©iÚ
 *
’um”©Ü
,

776 
št32_t
* 
»suÉL’gth
,

777 
UE¼ÜCode
 *
pE¼ÜCode
)

779 
UAlŸsCÚ‹xt
 *
myCÚ‹xt
 = (UAlŸsCÚ‹xˆ*)(
’um”©Ü
->
cÚ‹xt
);

780 
ušt32_t
 
li¡Off£t
 = 
myCÚ‹xt
->listOffset;

782 ià(
li¡Off£t
) {

783 
ušt32_t
 
li¡CouÁ
 = 
gMašTabË
.
ggedAlŸsLi¡s
[
li¡Off£t
];

784 cÚ¡ 
ušt16_t
 *
cu¼Li¡
 = 
gMašTabË
.
ggedAlŸsLi¡s
 + 
li¡Off£t
 + 1;

786 ià(
myCÚ‹xt
->
li¡Idx
 < 
li¡CouÁ
) {

787 cÚ¡ *
mySŒ
 = 
	`GET_STRING
(
cu¼Li¡
[
myCÚ‹xt
->
li¡Idx
++]);

788 ià(
»suÉL’gth
) {

789 *
»suÉL’gth
 = (
št32_t
)
	`u´v_¡¾’
(
mySŒ
);

791  
mySŒ
;

795 ià(
»suÉL’gth
) {

796 *
»suÉL’gth
 = 0;

798  
NULL
;

799 
	}
}

801 
U_CALLCONV


802 
	$uúv_io_»£tSnd¬dAlŸ£s
(
UEnum”©iÚ
 *
’um”©Ü
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

803 ((
UAlŸsCÚ‹xt
 *)(
’um”©Ü
->
cÚ‹xt
))->
li¡Idx
 = 0;

804 
	}
}

806 
U_CALLCONV


807 
	$uúv_io_şo£UEnum”©iÚ
(
UEnum”©iÚ
 *
’um”©Ü
) {

808 
	`u´v_ä“
(
’um”©Ü
->
cÚ‹xt
);

809 
	`u´v_ä“
(
’um”©Ü
);

810 
	}
}

813 cÚ¡ 
UEnum”©iÚ
 
	ggEnumAlŸ£s
 = {

814 
NULL
,

815 
NULL
,

816 
uúv_io_şo£UEnum”©iÚ
,

817 
uúv_io_couÁSnd¬dAlŸ£s
,

818 
u’um_uÃxtDeçuÉ
,

819 
uúv_io_ÃxtSnd¬dAlŸ£s
,

820 
uúv_io_»£tSnd¬dAlŸ£s


823 
U_CAPI
 
UEnum”©iÚ
 * 
U_EXPORT2


824 
	$uúv_İ’Snd¬dNames
(cÚ¡ *
cÚvName
,

825 cÚ¡ *
¡ªd¬d
,

826 
UE¼ÜCode
 *
pE¼ÜCode
)

828 
UEnum”©iÚ
 *
myEnum
 = 
NULL
;

829 ià(
	`haveAlŸsD©a
(
pE¼ÜCode
è&& 
	`isAlŸs
(
cÚvName
,…ErrorCode)) {

830 
ušt32_t
 
li¡Off£t
 = 
	`fšdTaggedAlŸsLi¡sOff£t
(
cÚvName
, 
¡ªd¬d
, 
pE¼ÜCode
);

835 ià(
li¡Off£t
 < 
gMašTabË
.
ggedAlŸsLi¡sSize
) {

836 
UAlŸsCÚ‹xt
 *
myCÚ‹xt
;

838 
myEnum
 = 
	`u´v_m®loc
((
UEnum”©iÚ
));

839 ià(
myEnum
 =ğ
NULL
) {

840 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

841  
NULL
;

843 
	`u´v_memıy
(
myEnum
, &
gEnumAlŸ£s
, (
UEnum”©iÚ
));

844 
myCÚ‹xt
 = 
	`u´v_m®loc
((
UAlŸsCÚ‹xt
));

845 ià(
myCÚ‹xt
 =ğ
NULL
) {

846 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

847 
	`u´v_ä“
(
myEnum
);

848  
NULL
;

850 
myCÚ‹xt
->
li¡Off£t
 =†istOffset;

851 
myCÚ‹xt
->
li¡Idx
 = 0;

852 
myEnum
->
cÚ‹xt
 = 
myCÚ‹xt
;

856  
myEnum
;

857 
	}
}

859 
ušt16_t


860 
	$uúv_io_couÁAlŸ£s
(cÚ¡ *
®Ÿs
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

861 if(
	`haveAlŸsD©a
(
pE¼ÜCode
è&& 
	`isAlŸs
(
®Ÿs
,…ErrorCode)) {

862 
ušt32_t
 
cÚvNum
 = 
	`fšdCÚv”‹r
(
®Ÿs
, 
NULL
, 
pE¼ÜCode
);

863 ià(
cÚvNum
 < 
gMašTabË
.
cÚv”‹rLi¡Size
) {

865 
št32_t
 
li¡Off£t
 = 
gMašTabË
.
ggedAlŸsA¼ay
[(gMašTabË.
gLi¡Size
 - 1)*gMašTabË.
cÚv”‹rLi¡Size
 + 
cÚvNum
];

867 ià(
li¡Off£t
) {

868  
gMašTabË
.
ggedAlŸsLi¡s
[
li¡Off£t
];

875 
	}
}

877 
ušt16_t


878 
	$uúv_io_g‘AlŸ£s
(cÚ¡ *
®Ÿs
, 
ušt16_t
 
¡¬t
, cÚ¡ **
®Ÿ£s
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

879 if(
	`haveAlŸsD©a
(
pE¼ÜCode
è&& 
	`isAlŸs
(
®Ÿs
,…ErrorCode)) {

880 
ušt32_t
 
cu¼AlŸs
;

881 
ušt32_t
 
cÚvNum
 = 
	`fšdCÚv”‹r
(
®Ÿs
, 
NULL
, 
pE¼ÜCode
);

882 ià(
cÚvNum
 < 
gMašTabË
.
cÚv”‹rLi¡Size
) {

884 
št32_t
 
li¡Off£t
 = 
gMašTabË
.
ggedAlŸsA¼ay
[(gMašTabË.
gLi¡Size
 - 1)*gMašTabË.
cÚv”‹rLi¡Size
 + 
cÚvNum
];

886 ià(
li¡Off£t
) {

887 
ušt32_t
 
li¡CouÁ
 = 
gMašTabË
.
ggedAlŸsLi¡s
[
li¡Off£t
];

889 cÚ¡ 
ušt16_t
 *
cu¼Li¡
 = 
gMašTabË
.
ggedAlŸsLi¡s
 + 
li¡Off£t
 + 1;

891 
cu¼AlŸs
 = 
¡¬t
; cu¼AlŸ < 
li¡CouÁ
; currAlias++) {

892 
®Ÿ£s
[
cu¼AlŸs
] = 
	`GET_STRING
(
cu¼Li¡
[currAlias]);

900 
	}
}

903 
	$uúv_io_g‘AlŸs
(cÚ¡ *
®Ÿs
, 
ušt16_t
 
n
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

904 if(
	`haveAlŸsD©a
(
pE¼ÜCode
è&& 
	`isAlŸs
(
®Ÿs
,…ErrorCode)) {

905 
ušt32_t
 
cÚvNum
 = 
	`fšdCÚv”‹r
(
®Ÿs
, 
NULL
, 
pE¼ÜCode
);

906 ià(
cÚvNum
 < 
gMašTabË
.
cÚv”‹rLi¡Size
) {

908 
št32_t
 
li¡Off£t
 = 
gMašTabË
.
ggedAlŸsA¼ay
[(gMašTabË.
gLi¡Size
 - 1)*gMašTabË.
cÚv”‹rLi¡Size
 + 
cÚvNum
];

910 ià(
li¡Off£t
) {

911 
ušt32_t
 
li¡CouÁ
 = 
gMašTabË
.
ggedAlŸsLi¡s
[
li¡Off£t
];

913 cÚ¡ 
ušt16_t
 *
cu¼Li¡
 = 
gMašTabË
.
ggedAlŸsLi¡s
 + 
li¡Off£t
 + 1;

915 ià(
n
 < 
li¡CouÁ
) {

916  
	`GET_STRING
(
cu¼Li¡
[
n
]);

918 *
pE¼ÜCode
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

924  
NULL
;

925 
	}
}

927 
ušt16_t


928 
	$uúv_io_couÁSnd¬ds
(
UE¼ÜCode
 *
pE¼ÜCode
) {

929 ià(
	`haveAlŸsD©a
(
pE¼ÜCode
)) {

931  (
ušt16_t
)(
gMašTabË
.
gLi¡Size
 - 
UCNV_NUM_HIDDEN_TAGS
);

935 
	}
}

937 
U_CAPI
 cÚ¡ * 
U_EXPORT2


938 
	$uúv_g‘Snd¬d
(
ušt16_t
 
n
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

939 ià(
	`haveAlŸsD©a
(
pE¼ÜCode
)) {

940 ià(
n
 < 
gMašTabË
.
gLi¡Size
 - 
UCNV_NUM_HIDDEN_TAGS
) {

941  
	`GET_STRING
(
gMašTabË
.
gLi¡
[
n
]);

943 *
pE¼ÜCode
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

946  
NULL
;

947 
	}
}

949 
U_CAPI
 cÚ¡ * 
U_EXPORT2


950 
	$uúv_g‘Snd¬dName
(cÚ¡ *
®Ÿs
, cÚ¡ *
¡ªd¬d
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

951 ià(
	`haveAlŸsD©a
(
pE¼ÜCode
è&& 
	`isAlŸs
(
®Ÿs
,…ErrorCode)) {

952 
ušt32_t
 
li¡Off£t
 = 
	`fšdTaggedAlŸsLi¡sOff£t
(
®Ÿs
, 
¡ªd¬d
, 
pE¼ÜCode
);

954 ià(0 < 
li¡Off£t
 &&†i¡Off£ˆ< 
gMašTabË
.
ggedAlŸsLi¡sSize
) {

955 cÚ¡ 
ušt16_t
 *
cu¼Li¡
 = 
gMašTabË
.
ggedAlŸsLi¡s
 + 
li¡Off£t
 + 1;

958 ià(
cu¼Li¡
[0]) {

959  
	`GET_STRING
(
cu¼Li¡
[0]);

966  
NULL
;

967 
	}
}

969 
U_CAPI
 
ušt16_t
 
U_EXPORT2


970 
	$uúv_couÁAlŸ£s
(cÚ¡ *
®Ÿs
, 
UE¼ÜCode
 *
pE¼ÜCode
)

972  
	`uúv_io_couÁAlŸ£s
(
®Ÿs
, 
pE¼ÜCode
);

973 
	}
}

976 
U_CAPI
 cÚ¡ * 
U_EXPORT2


977 
	$uúv_g‘AlŸs
(cÚ¡ *
®Ÿs
, 
ušt16_t
 
n
, 
UE¼ÜCode
 *
pE¼ÜCode
)

979  
	`uúv_io_g‘AlŸs
(
®Ÿs
, 
n
, 
pE¼ÜCode
);

980 
	}
}

982 
U_CAPI
 
U_EXPORT2


983 
	$uúv_g‘AlŸ£s
(cÚ¡ *
®Ÿs
, cÚ¡ **
®Ÿ£s
, 
UE¼ÜCode
 *
pE¼ÜCode
)

985 
	`uúv_io_g‘AlŸ£s
(
®Ÿs
, 0, 
®Ÿ£s
, 
pE¼ÜCode
);

986 
	}
}

988 
U_CAPI
 
ušt16_t
 
U_EXPORT2


989 
	$uúv_couÁSnd¬ds
()

991 
UE¼ÜCode
 
”r
 = 
U_ZERO_ERROR
;

992  
	`uúv_io_couÁSnd¬ds
(&
”r
);

993 
	}
}

995 
U_CAPI
 cÚ¡ * 
U_EXPORT2


996 
	$uúv_g‘CªÚiÿlName
(cÚ¡ *
®Ÿs
, cÚ¡ *
¡ªd¬d
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

997 ià(
	`haveAlŸsD©a
(
pE¼ÜCode
è&& 
	`isAlŸs
(
®Ÿs
,…ErrorCode)) {

998 
ušt32_t
 
cÚvNum
 = 
	`fšdTaggedCÚv”‹rNum
(
®Ÿs
, 
¡ªd¬d
, 
pE¼ÜCode
);

1000 ià(
cÚvNum
 < 
gMašTabË
.
cÚv”‹rLi¡Size
) {

1001  
	`GET_STRING
(
gMašTabË
.
cÚv”‹rLi¡
[
cÚvNum
]);

1005  
NULL
;

1006 
	}
}

1008 
št32_t
 
U_CALLCONV


1009 
	$uúv_io_couÁAÎCÚv”‹rs
(
UEnum”©iÚ
 *
’um”©Ü
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1010  
gMašTabË
.
cÚv”‹rLi¡Size
;

1011 
	}
}

1013 cÚ¡ * 
U_CALLCONV


1014 
	$uúv_io_ÃxtAÎCÚv”‹rs
(
UEnum”©iÚ
 *
’um”©Ü
,

1015 
št32_t
* 
»suÉL’gth
,

1016 
UE¼ÜCode
 *
pE¼ÜCode
)

1018 
ušt16_t
 *
myCÚ‹xt
 = (ušt16_ˆ*)(
’um”©Ü
->
cÚ‹xt
);

1020 ià(*
myCÚ‹xt
 < 
gMašTabË
.
cÚv”‹rLi¡Size
) {

1021 cÚ¡ *
mySŒ
 = 
	`GET_STRING
(
gMašTabË
.
cÚv”‹rLi¡
[(*
myCÚ‹xt
)++]);

1022 ià(
»suÉL’gth
) {

1023 *
»suÉL’gth
 = (
št32_t
)
	`u´v_¡¾’
(
mySŒ
);

1025  
mySŒ
;

1028 ià(
»suÉL’gth
) {

1029 *
»suÉL’gth
 = 0;

1031  
NULL
;

1032 
	}
}

1034 
U_CALLCONV


1035 
	$uúv_io_»£tAÎCÚv”‹rs
(
UEnum”©iÚ
 *
’um”©Ü
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1036 *((
ušt16_t
 *)(
’um”©Ü
->
cÚ‹xt
)) = 0;

1037 
	}
}

1039 cÚ¡ 
UEnum”©iÚ
 
	ggEnumAÎCÚv”‹rs
 = {

1040 
NULL
,

1041 
NULL
,

1042 
uúv_io_şo£UEnum”©iÚ
,

1043 
uúv_io_couÁAÎCÚv”‹rs
,

1044 
u’um_uÃxtDeçuÉ
,

1045 
uúv_io_ÃxtAÎCÚv”‹rs
,

1046 
uúv_io_»£tAÎCÚv”‹rs


1049 
U_CAPI
 
UEnum”©iÚ
 * 
U_EXPORT2


1050 
	$uúv_İ’AÎNames
(
UE¼ÜCode
 *
pE¼ÜCode
) {

1051 
UEnum”©iÚ
 *
myEnum
 = 
NULL
;

1052 ià(
	`haveAlŸsD©a
(
pE¼ÜCode
)) {

1053 
ušt16_t
 *
myCÚ‹xt
;

1055 
myEnum
 = 
	`u´v_m®loc
((
UEnum”©iÚ
));

1056 ià(
myEnum
 =ğ
NULL
) {

1057 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

1058  
NULL
;

1060 
	`u´v_memıy
(
myEnum
, &
gEnumAÎCÚv”‹rs
, (
UEnum”©iÚ
));

1061 
myCÚ‹xt
 = 
	`u´v_m®loc
((
ušt16_t
));

1062 ià(
myCÚ‹xt
 =ğ
NULL
) {

1063 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

1064 
	`u´v_ä“
(
myEnum
);

1065  
NULL
;

1067 *
myCÚ‹xt
 = 0;

1068 
myEnum
->
cÚ‹xt
 = 
myCÚ‹xt
;

1070  
myEnum
;

1071 
	}
}

1073 
U_CFUNC
 
ušt16_t


1074 
	$uúv_io_couÁKnownCÚv”‹rs
(
UE¼ÜCode
 *
pE¼ÜCode
) {

1075 ià(
	`haveAlŸsD©a
(
pE¼ÜCode
)) {

1076  (
ušt16_t
)
gMašTabË
.
cÚv”‹rLi¡Size
;

1079 
	}
}

1083 * 
	tU_CALLCONV
 
	tSŒFÜCom·»Fn
(*
	td¡
, cÚ¡ *
	tÇme
);

1092 
	sTempRow
 {

1093 
ušt16_t
 
	m¡rIndex
, 
	msÜtIndex
;

1094 } 
	tTempRow
;

1096 
	sTempAlŸsTabË
 {

1097 cÚ¡ *
	mch¬s
;

1098 
TempRow
 *
	mrows
;

1099 
ušt16_t
 *
	m»sÜt
;

1100 
SŒFÜCom·»Fn
 *
	m¡rFÜCom·»
;

1101 } 
	tTempAlŸsTabË
;

1104 
	mSTACK_ROW_CAPACITY
=500

1107 
št32_t


1108 
	$io_com·»Rows
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
Ëá
, cÚ¡ *
right
) {

1109 
¡r³dLeá
[
UCNV_MAX_CONVERTER_NAME_LENGTH
],

1110 
¡r³dRight
[
UCNV_MAX_CONVERTER_NAME_LENGTH
];

1112 
TempAlŸsTabË
 *
‹mpTabË
=(TempAlŸsTabË *)
cÚ‹xt
;

1113 cÚ¡ *
ch¬s
=
‹mpTabË
->chars;

1115  (
št32_t
)
	`u´v_¡rcmp
(
‹mpTabË
->
	`¡rFÜCom·»
(
¡r³dLeá
, 
ch¬s
+2*((cÚ¡ 
TempRow
 *)
Ëá
)->
¡rIndex
),

1116 
‹mpTabË
->
	`¡rFÜCom·»
(
¡r³dRight
, 
ch¬s
+2*((cÚ¡ 
TempRow
 *)
right
)->
¡rIndex
));

1117 
	}
}

1119 
U_CAPI
 
št32_t
 
U_EXPORT2


1120 
	$uúv_sw­AlŸ£s
(cÚ¡ 
UD©aSw­³r
 *
ds
,

1121 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

1122 
UE¼ÜCode
 *
pE¼ÜCode
) {

1123 cÚ¡ 
UD©aInfo
 *
pInfo
;

1124 
št32_t
 
h—d”Size
;

1126 cÚ¡ 
ušt16_t
 *
šTabË
;

1127 cÚ¡ 
ušt32_t
 *
šSeùiÚSizes
;

1128 
ušt32_t
 
toc
[
off£tsCouÁ
];

1129 
ušt32_t
 
off£ts
[
off£tsCouÁ
];

1130 
ušt32_t
 
i
, 
couÁ
, 
tocL’gth
, 
tİOff£t
;

1132 
TempRow
 
rows
[
STACK_ROW_CAPACITY
];

1133 
ušt16_t
 
»sÜt
[
STACK_ROW_CAPACITY
];

1134 
TempAlŸsTabË
 
‹mpTabË
;

1137 
h—d”Size
=
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
pE¼ÜCode
);

1138 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1143 
pInfo
=(cÚ¡ 
UD©aInfo
 *)((cÚ¡ *)
šD©a
+4);

1145 
pInfo
->
d©aFÜm©
[0]==0x43 &&

1146 
pInfo
->
d©aFÜm©
[1]==0x76 &&

1147 
pInfo
->
d©aFÜm©
[2]==0x41 &&

1148 
pInfo
->
d©aFÜm©
[3]==0x6c &&

1149 
pInfo
->
fÜm©V”siÚ
[0]==3

1151 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swapAliases(): data format %02x.%02x.%02x.%02x (format version %02x) is‚ot‡n‡liasable\n",

1152 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

1153 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3],

1154 
pInfo
->
fÜm©V”siÚ
[0]);

1155 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

1160 if(
Ëngth
>=0 && (Ëngth-
h—d”Size
)<4*(1+
mšTocL’gth
)) {

1161 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swapAliases():oo few bytes (%d‡fter header) for‡n‡liasable\n",

1162 
Ëngth
-
h—d”Size
);

1163 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1167 
šSeùiÚSizes
=(cÚ¡ 
ušt32_t
 *)((cÚ¡ *)
šD©a
+
h—d”Size
);

1168 
šTabË
=(cÚ¡ 
ušt16_t
 *)
šSeùiÚSizes
;

1169 
	`u´v_mem£t
(
toc
, 0, (toc));

1170 
toc
[
tocL’gthIndex
]=
tocL’gth
=
ds
->
	`»adUIÁ32
(
šSeùiÚSizes
[tocLengthIndex]);

1171 if(
tocL’gth
<
mšTocL’gth
 || 
off£tsCouÁ
<=tocLength) {

1172 
	`ud©a_´štE¼Ü
(
ds
, "uúv_sw­AlŸ£s():abË oàcÚ‹Á cÚš unsuµÜ‹d‚umb” oà£ùiÚ (%u seùiÚs)\n", 
tocL’gth
);

1173 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

1178 
i
=
cÚv”‹rLi¡Index
; i<=
tocL’gth
; ++i) {

1179 
toc
[
i
]=
ds
->
	`»adUIÁ32
(
šSeùiÚSizes
[i]);

1183 
	`u´v_mem£t
(
off£ts
, 0, (offsets));

1184 
off£ts
[
cÚv”‹rLi¡Index
]=2*(1+
tocL’gth
);

1185 
i
=
gLi¡Index
; i<=
tocL’gth
; ++i) {

1186 
off£ts
[
i
]=off£ts[i-1]+
toc
[i-1];

1190 
tİOff£t
=
off£ts
[
i
-1]+
toc
[i-1];

1192 if(
Ëngth
>=0) {

1193 
ušt16_t
 *
outTabË
;

1194 cÚ¡ 
ušt16_t
 *
p
, *
p2
;

1195 
ušt16_t
 *
q
, *
q2
;

1196 
ušt16_t
 
ŞdIndex
;

1198 if((
Ëngth
-
h—d”Size
)<(2*(
št32_t
)
tİOff£t
)) {

1199 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swapAliases():oo few bytes (%d‡fter header) for‡n‡liasable\n",

1200 
Ëngth
-
h—d”Size
);

1201 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1205 
outTabË
=(
ušt16_t
 *)((*)
outD©a
+
h—d”Size
);

1208 
ds
->
	`sw­A¼ay32
(ds, 
šTabË
, 4*(1+
tocL’gth
), 
outTabË
, 
pE¼ÜCode
);

1211 
ds
->
	`sw­InvCh¬s
(ds, 
šTabË
+
off£ts
[
¡ršgTabËIndex
], 2*(
št32_t
)(
toc
[¡ršgTabËIndex]+toc[
nÜm®izedSŒšgTabËIndex
]),

1212 
outTabË
+
off£ts
[
¡ršgTabËIndex
], 
pE¼ÜCode
);

1213 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1214 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swapAliases().swapInvChars(charset‚ames) failed\n");

1218 if(
ds
->
šCh¬£t
==ds->
outCh¬£t
) {

1220 
ds
->
	`sw­A¼ay16
(ds,

1221 
šTabË
+
off£ts
[
cÚv”‹rLi¡Index
],

1222 2*(
št32_t
)(
off£ts
[
¡ršgTabËIndex
]-off£ts[
cÚv”‹rLi¡Index
]),

1223 
outTabË
+
off£ts
[
cÚv”‹rLi¡Index
],

1224 
pE¼ÜCode
);

1227 
couÁ
=
toc
[
®ŸsLi¡Index
];

1229 
‹mpTabË
.
ch¬s
=(cÚ¡ *)(
outTabË
+
off£ts
[
¡ršgTabËIndex
]);

1231 if(
couÁ
<=
STACK_ROW_CAPACITY
) {

1232 
‹mpTabË
.
rows
=rows;

1233 
‹mpTabË
.
»sÜt
=resort;

1235 
‹mpTabË
.
rows
=(
TempRow
 *)
	`u´v_m®loc
(
couÁ
*(TempRow)+count*2);

1236 if(
‹mpTabË
.
rows
==
NULL
) {

1237 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swapAliases(): unableo‡llocate memory for sortingables (max†ength: %u)\n",

1238 
couÁ
);

1239 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1242 
‹mpTabË
.
»sÜt
=(
ušt16_t
 *)ÑempTabË.
rows
+
couÁ
);

1245 if(
ds
->
outCh¬£t
==
U_ASCII_FAMILY
) {

1246 
‹mpTabË
.
¡rFÜCom·»
=
uúv_io_¡rASCIIFÜCom·»
;

1248 
‹mpTabË
.
¡rFÜCom·»
=
uúv_io_¡rEBCDICFÜCom·»
;

1260 
p
=
šTabË
+
off£ts
[
®ŸsLi¡Index
];

1261 
q
=
outTabË
+
off£ts
[
®ŸsLi¡Index
];

1263 
p2
=
šTabË
+
off£ts
[
uÁaggedCÚvA¼ayIndex
];

1264 
q2
=
outTabË
+
off£ts
[
uÁaggedCÚvA¼ayIndex
];

1266 
i
=0; i<
couÁ
; ++i) {

1267 
‹mpTabË
.
rows
[
i
].
¡rIndex
=
ds
->
	`»adUIÁ16
(
p
[i]);

1268 
‹mpTabË
.
rows
[
i
].
sÜtIndex
=(
ušt16_t
)i;

1271 
	`u´v_sÜtA¼ay
(
‹mpTabË
.
rows
, (
št32_t
)
couÁ
, (
TempRow
),

1272 
io_com·»Rows
, &
‹mpTabË
,

1273 
FALSE
, 
pE¼ÜCode
);

1275 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

1277 if(
p
!=
q
) {

1278 
i
=0; i<
couÁ
; ++i) {

1279 
ŞdIndex
=
‹mpTabË
.
rows
[
i
].
sÜtIndex
;

1280 
ds
->
	`sw­A¼ay16
(ds, 
p
+
ŞdIndex
, 2, 
q
+
i
, 
pE¼ÜCode
);

1281 
ds
->
	`sw­A¼ay16
(ds, 
p2
+
ŞdIndex
, 2, 
q2
+
i
, 
pE¼ÜCode
);

1289 
ušt16_t
 *
r
=
‹mpTabË
.
»sÜt
;

1291 
i
=0; i<
couÁ
; ++i) {

1292 
ŞdIndex
=
‹mpTabË
.
rows
[
i
].
sÜtIndex
;

1293 
ds
->
	`sw­A¼ay16
(ds, 
p
+
ŞdIndex
, 2, 
r
+
i
, 
pE¼ÜCode
);

1295 
	`u´v_memıy
(
q
, 
r
, 2*
couÁ
);

1297 
i
=0; i<
couÁ
; ++i) {

1298 
ŞdIndex
=
‹mpTabË
.
rows
[
i
].
sÜtIndex
;

1299 
ds
->
	`sw­A¼ay16
(ds, 
p2
+
ŞdIndex
, 2, 
r
+
i
, 
pE¼ÜCode
);

1301 
	`u´v_memıy
(
q2
, 
r
, 2*
couÁ
);

1305 if(
‹mpTabË
.
rows
!=rows) {

1306 
	`u´v_ä“
(
‹mpTabË
.
rows
);

1309 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1310 
	`ud©a_´štE¼Ü
(
ds
, "ucnv_swapAliases().uprv_sortArray(%u items) failed\n",

1311 
couÁ
);

1316 
ds
->
	`sw­A¼ay16
(ds,

1317 
šTabË
+
off£ts
[
cÚv”‹rLi¡Index
],

1318 2*(
št32_t
)(
off£ts
[
®ŸsLi¡Index
]-off£ts[
cÚv”‹rLi¡Index
]),

1319 
outTabË
+
off£ts
[
cÚv”‹rLi¡Index
],

1320 
pE¼ÜCode
);

1321 
ds
->
	`sw­A¼ay16
(ds,

1322 
šTabË
+
off£ts
[
ggedAlŸsA¼ayIndex
],

1323 2*(
št32_t
)(
off£ts
[
¡ršgTabËIndex
]-off£ts[
ggedAlŸsA¼ayIndex
]),

1324 
outTabË
+
off£ts
[
ggedAlŸsA¼ayIndex
],

1325 
pE¼ÜCode
);

1329  
h—d”Size
+2*(
št32_t
)
tİOff£t
;

1330 
	}
}

	@ucnv_io.h

13 #iâdeà
UCNV_IO_H


14 
	#UCNV_IO_H


	)

16 
	~"unicode/uty³s.h
"

18 #ià!
UCONFIG_NO_CONVERSION


20 
	~"ud©aswp.h
"

22 
	#UCNV_AMBIGUOUS_ALIAS_MAP_BIT
 0x8000

	)

23 
	#UCNV_CONTAINS_OPTION_BIT
 0x4000

	)

24 
	#UCNV_CONVERTER_INDEX_MASK
 0xFFF

	)

25 
	#UCNV_NUM_RESERVED_TAGS
 2

	)

26 
	#UCNV_NUM_HIDDEN_TAGS
 1

	)

29 
	mUCNV_IO_UNNORMALIZED
,

30 
	mUCNV_IO_STD_NORMALIZED
,

31 
	mUCNV_IO_NORM_TYPE_COUNT


35 
ušt16_t
 
	m¡ršgNÜm®iz©iÚTy³
;

36 
ušt16_t
 
	mcÚšsCnvO±iÚInfo
;

37 } 
	tUCÚv”‹rAlŸsO±iÚs
;

39 
	sUCÚv”‹rAlŸs
 {

40 cÚ¡ 
ušt16_t
 *
	mcÚv”‹rLi¡
;

41 cÚ¡ 
ušt16_t
 *
	mgLi¡
;

42 cÚ¡ 
ušt16_t
 *
	m®ŸsLi¡
;

43 cÚ¡ 
ušt16_t
 *
	muÁaggedCÚvA¼ay
;

44 cÚ¡ 
ušt16_t
 *
	mggedAlŸsA¼ay
;

45 cÚ¡ 
ušt16_t
 *
	mggedAlŸsLi¡s
;

46 cÚ¡ 
UCÚv”‹rAlŸsO±iÚs
 *
	mİtiÚTabË
;

47 cÚ¡ 
ušt16_t
 *
	m¡ršgTabË
;

48 cÚ¡ 
ušt16_t
 *
	mnÜm®izedSŒšgTabË
;

50 
ušt32_t
 
	mcÚv”‹rLi¡Size
;

51 
ušt32_t
 
	mgLi¡Size
;

52 
ušt32_t
 
	m®ŸsLi¡Size
;

53 
ušt32_t
 
	muÁaggedCÚvA¼aySize
;

54 
ušt32_t
 
	mggedAlŸsA¼aySize
;

55 
ušt32_t
 
	mggedAlŸsLi¡sSize
;

56 
ušt32_t
 
	mİtiÚTabËSize
;

57 
ušt32_t
 
	m¡ršgTabËSize
;

58 
ušt32_t
 
	mnÜm®izedSŒšgTabËSize
;

59 } 
	tUCÚv”‹rAlŸs
;

70 #ià
U_CHARSET_FAMILY
==
U_ASCII_FAMILY


71 
	#uúv_io_¡rFÜCom·»
 
uúv_io_¡rASCIIFÜCom·»


	)

72 #–ià
U_CHARSET_FAMILY
==
U_EBCDIC_FAMILY


73 
	#uúv_io_¡rFÜCom·»
 
uúv_io_¡rEBCDICFÜCom·»


	)

75 #”rÜ 
U_CHARSET_FAMILY
 
is
 
nÙ
 
v®id


78 
U_CAPI
 * 
U_EXPORT2


79 
uúv_io_¡rASCIIFÜCom·»
(*
d¡
, cÚ¡ *
Çme
);

81 
U_CAPI
 * 
U_EXPORT2


82 
uúv_io_¡rEBCDICFÜCom·»
(*
d¡
, cÚ¡ *
Çme
);

94 
U_CFUNC
 const *

95 
uúv_io_g‘CÚv”‹rName
(cÚ¡ *
®Ÿs
, 
UBoŞ
 *
cÚšsO±iÚ
, 
UE¼ÜCode
 *
pE¼ÜCode
);

102 
U_CFUNC
 
ušt16_t


103 
uúv_io_couÁKnownCÚv”‹rs
(
UE¼ÜCode
 *
pE¼ÜCode
);

109 
U_CAPI
 
št32_t
 
U_EXPORT2


110 
uúv_sw­AlŸ£s
(cÚ¡ 
UD©aSw­³r
 *
ds
,

111 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

112 
UE¼ÜCode
 *
pE¼ÜCode
);

	@ucnv_lmb.c

26 
	~"unicode/uty³s.h
"

28 #ià!
UCONFIG_NO_CONVERSION
 && !
UCONFIG_NO_LEGACY_CONVERSION


30 
	~"unicode/uúv_”r.h
"

31 
	~"unicode/uúv.h
"

32 
	~"unicode/u£t.h
"

33 
	~"cmemÜy.h
"

34 
	~"c¡ršg.h
"

35 
	~"uas£¹.h
"

36 
	~"uúv_imp.h
"

37 
	~"uúv_bld.h
"

38 
	~"uúv_úv.h
"

40 #ifdeà
EBCDIC_RTL


41 
	~"ascii_a.h
"

44 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

86 
	#ULMBCS_CHARSIZE_MAX
 3

	)

92 
	#ULMBCS_C0END
 0x1F

	)

93 
	#ULMBCS_C1START
 0x80

	)

99 
ušt8_t
 
	tulmbcs_by‹_t
;

108 
	#ULMBCS_GRP_L1
 0x01

	)

109 
	#ULMBCS_GRP_GR
 0x02

	)

110 
	#ULMBCS_GRP_HE
 0x03

	)

111 
	#ULMBCS_GRP_AR
 0x04

	)

112 
	#ULMBCS_GRP_RU
 0x05

	)

113 
	#ULMBCS_GRP_L2
 0x06

	)

114 
	#ULMBCS_GRP_TR
 0x08

	)

115 
	#ULMBCS_GRP_TH
 0x0B

	)

116 
	#ULMBCS_GRP_JA
 0x10

	)

117 
	#ULMBCS_GRP_KO
 0x11

	)

118 
	#ULMBCS_GRP_TW
 0x12

	)

119 
	#ULMBCS_GRP_CN
 0x13

	)

133 
	#ULMBCS_DOUBLEOPTGROUP_START
 0x10

	)

155 
	#ULMBCS_HT
 0x09

	)

156 
	#ULMBCS_LF
 0x0A

	)

157 
	#ULMBCS_CR
 0x0D

	)

162 
	#ULMBCS_123SYSTEMRANGE
 0x19

	)

169 
	#ULMBCS_GRP_CTRL
 0x0F

	)

174 
	#ULMBCS_CTRLOFFSET
 0x20

	)

189 
	#ULMBCS_GRP_EXCEPT
 0x00

	)

194 
	#ULMBCS_GRP_UNICODE
 0x14

	)

201 
	#ULMBCS_UNICOMPATZERO
 0xF6

	)

205 
	#ULMBCS_UNICODE_SIZE
 3

	)

214 
	#ULMBCS_DEFAULTOPTGROUP
 0x1

	)

235 
	#ULMBCS_GRP_LAST
 0x13

	)

237 cÚ¡ * cÚ¡ 
	gO±GroupBy‹ToCPName
[
ULMBCS_GRP_LAST
 + 1] = {

245  
NULL
,

247  
NULL
,

248  
NULL
,

250  
NULL
,

251  
NULL
,

252  
NULL
,

253  
NULL
,

280 
	#ULMBCS_AMBIGUOUS_SBCS
 0x80

	)

283 
	#ULMBCS_AMBIGUOUS_MBCS
 0x81

	)

286 
	#ULMBCS_AMBIGUOUS_ALL
 0x82

	)

288 
	#ULMBCS_AMBIGUOUS_MATCH
(
agroup
, 
xgroup
) \

289 ((((
agroup
è=ğ
ULMBCS_AMBIGUOUS_SBCS
) && \

290 (
xgroup
è< 
ULMBCS_DOUBLEOPTGROUP_START
) || \

291 (((
agroup
è=ğ
ULMBCS_AMBIGUOUS_MBCS
) && \

292 (
xgroup
è>ğ
ULMBCS_DOUBLEOPTGROUP_START
)) || \

293 ((
agroup
è=ğ
ULMBCS_AMBIGUOUS_ALL
)

	)

299 cÚ¡ 
	s_UniLMBCSG½M­


301 cÚ¡ 
UCh¬
 
	muniS¹Rªge
;

302 cÚ¡ 
UCh¬
 
	muniEndRªge
;

303 cÚ¡ 
ulmbcs_by‹_t
 
	mG½Ty³
;

304 } 
	gUniLMBCSG½M­
[]

308 {0x0001, 0x001F, 
ULMBCS_GRP_CTRL
},

309 {0x0080, 0x009F, 
ULMBCS_GRP_CTRL
},

310 {0x00A0, 0x00A6, 
ULMBCS_AMBIGUOUS_SBCS
},

311 {0x00A7, 0x00A8, 
ULMBCS_AMBIGUOUS_ALL
},

312 {0x00A9, 0x00AF, 
ULMBCS_AMBIGUOUS_SBCS
},

313 {0x00B0, 0x00B1, 
ULMBCS_AMBIGUOUS_ALL
},

314 {0x00B2, 0x00B3, 
ULMBCS_AMBIGUOUS_SBCS
},

315 {0x00B4, 0x00B4, 
ULMBCS_AMBIGUOUS_ALL
},

316 {0x00B5, 0x00B5, 
ULMBCS_AMBIGUOUS_SBCS
},

317 {0x00B6, 0x00B6, 
ULMBCS_AMBIGUOUS_ALL
},

318 {0x00B7, 0x00D6, 
ULMBCS_AMBIGUOUS_SBCS
},

319 {0x00D7, 0x00D7, 
ULMBCS_AMBIGUOUS_ALL
},

320 {0x00D8, 0x00F6, 
ULMBCS_AMBIGUOUS_SBCS
},

321 {0x00F7, 0x00F7, 
ULMBCS_AMBIGUOUS_ALL
},

322 {0x00F8, 0x01CD, 
ULMBCS_AMBIGUOUS_SBCS
},

323 {0x01CE, 0x01CE, 
ULMBCS_GRP_TW
 },

324 {0x01CF, 0x02B9, 
ULMBCS_AMBIGUOUS_SBCS
},

325 {0x02BA, 0x02BA, 
ULMBCS_GRP_CN
},

326 {0x02BC, 0x02C8, 
ULMBCS_AMBIGUOUS_SBCS
},

327 {0x02C9, 0x02D0, 
ULMBCS_AMBIGUOUS_MBCS
},

328 {0x02D8, 0x02DD, 
ULMBCS_AMBIGUOUS_SBCS
},

329 {0x0384, 0x0390, 
ULMBCS_AMBIGUOUS_SBCS
},

330 {0x0391, 0x03A9, 
ULMBCS_AMBIGUOUS_ALL
},

331 {0x03AA, 0x03B0, 
ULMBCS_AMBIGUOUS_SBCS
},

332 {0x03B1, 0x03C9, 
ULMBCS_AMBIGUOUS_ALL
},

333 {0x03CA, 0x03CE, 
ULMBCS_AMBIGUOUS_SBCS
},

334 {0x0400, 0x0400, 
ULMBCS_GRP_RU
},

335 {0x0401, 0x0401, 
ULMBCS_AMBIGUOUS_ALL
},

336 {0x0402, 0x040F, 
ULMBCS_GRP_RU
},

337 {0x0410, 0x0431, 
ULMBCS_AMBIGUOUS_ALL
},

338 {0x0432, 0x044E, 
ULMBCS_GRP_RU
},

339 {0x044F, 0x044F, 
ULMBCS_AMBIGUOUS_ALL
},

340 {0x0450, 0x0491, 
ULMBCS_GRP_RU
},

341 {0x05B0, 0x05F2, 
ULMBCS_GRP_HE
},

342 {0x060C, 0x06AF, 
ULMBCS_GRP_AR
},

343 {0x0E01, 0x0E5B, 
ULMBCS_GRP_TH
},

344 {0x200C, 0x200F, 
ULMBCS_AMBIGUOUS_SBCS
},

345 {0x2010, 0x2010, 
ULMBCS_AMBIGUOUS_MBCS
},

346 {0x2013, 0x2014, 
ULMBCS_AMBIGUOUS_SBCS
},

347 {0x2015, 0x2015, 
ULMBCS_AMBIGUOUS_MBCS
},

348 {0x2016, 0x2016, 
ULMBCS_AMBIGUOUS_MBCS
},

349 {0x2017, 0x2017, 
ULMBCS_AMBIGUOUS_SBCS
},

350 {0x2018, 0x2019, 
ULMBCS_AMBIGUOUS_ALL
},

351 {0x201A, 0x201B, 
ULMBCS_AMBIGUOUS_SBCS
},

352 {0x201C, 0x201D, 
ULMBCS_AMBIGUOUS_ALL
},

353 {0x201E, 0x201F, 
ULMBCS_AMBIGUOUS_SBCS
},

354 {0x2020, 0x2021, 
ULMBCS_AMBIGUOUS_ALL
},

355 {0x2022, 0x2024, 
ULMBCS_AMBIGUOUS_SBCS
},

356 {0x2025, 0x2025, 
ULMBCS_AMBIGUOUS_MBCS
},

357 {0x2026, 0x2026, 
ULMBCS_AMBIGUOUS_ALL
},

358 {0x2027, 0x2027, 
ULMBCS_GRP_TW
},

359 {0x2030, 0x2030, 
ULMBCS_AMBIGUOUS_ALL
},

360 {0x2031, 0x2031, 
ULMBCS_AMBIGUOUS_SBCS
},

361 {0x2032, 0x2033, 
ULMBCS_AMBIGUOUS_MBCS
},

362 {0x2035, 0x2035, 
ULMBCS_AMBIGUOUS_MBCS
},

363 {0x2039, 0x203A, 
ULMBCS_AMBIGUOUS_SBCS
},

364 {0x203B, 0x203B, 
ULMBCS_AMBIGUOUS_MBCS
},

365 {0x203C, 0x203C, 
ULMBCS_GRP_EXCEPT
},

366 {0x2074, 0x2074, 
ULMBCS_GRP_KO
},

367 {0x207F, 0x207F, 
ULMBCS_GRP_EXCEPT
},

368 {0x2081, 0x2084, 
ULMBCS_GRP_KO
},

369 {0x20A4, 0x20AC, 
ULMBCS_AMBIGUOUS_SBCS
},

370 {0x2103, 0x2109, 
ULMBCS_AMBIGUOUS_MBCS
},

371 {0x2111, 0x2120, 
ULMBCS_AMBIGUOUS_SBCS
},

373 {0x2121, 0x2121, 
ULMBCS_AMBIGUOUS_MBCS
},

374 {0x2122, 0x2126, 
ULMBCS_AMBIGUOUS_SBCS
},

375 {0x212B, 0x212B, 
ULMBCS_AMBIGUOUS_MBCS
},

376 {0x2135, 0x2135, 
ULMBCS_AMBIGUOUS_SBCS
},

377 {0x2153, 0x2154, 
ULMBCS_GRP_KO
},

378 {0x215B, 0x215E, 
ULMBCS_GRP_EXCEPT
},

379 {0x2160, 0x2179, 
ULMBCS_AMBIGUOUS_MBCS
},

380 {0x2190, 0x2193, 
ULMBCS_AMBIGUOUS_ALL
},

381 {0x2194, 0x2195, 
ULMBCS_GRP_EXCEPT
},

382 {0x2196, 0x2199, 
ULMBCS_AMBIGUOUS_MBCS
},

383 {0x21A8, 0x21A8, 
ULMBCS_GRP_EXCEPT
},

384 {0x21B8, 0x21B9, 
ULMBCS_GRP_CN
},

385 {0x21D0, 0x21D1, 
ULMBCS_GRP_EXCEPT
},

386 {0x21D2, 0x21D2, 
ULMBCS_AMBIGUOUS_MBCS
},

387 {0x21D3, 0x21D3, 
ULMBCS_GRP_EXCEPT
},

388 {0x21D4, 0x21D4, 
ULMBCS_AMBIGUOUS_MBCS
},

389 {0x21D5, 0x21D5, 
ULMBCS_GRP_EXCEPT
},

390 {0x21E7, 0x21E7, 
ULMBCS_GRP_CN
},

391 {0x2200, 0x2200, 
ULMBCS_AMBIGUOUS_MBCS
},

392 {0x2201, 0x2201, 
ULMBCS_GRP_EXCEPT
},

393 {0x2202, 0x2202, 
ULMBCS_AMBIGUOUS_MBCS
},

394 {0x2203, 0x2203, 
ULMBCS_AMBIGUOUS_MBCS
},

395 {0x2204, 0x2206, 
ULMBCS_GRP_EXCEPT
},

396 {0x2207, 0x2208, 
ULMBCS_AMBIGUOUS_MBCS
},

397 {0x2209, 0x220A, 
ULMBCS_GRP_EXCEPT
},

398 {0x220B, 0x220B, 
ULMBCS_AMBIGUOUS_MBCS
},

399 {0x220F, 0x2215, 
ULMBCS_AMBIGUOUS_MBCS
},

400 {0x2219, 0x2219, 
ULMBCS_GRP_EXCEPT
},

401 {0x221A, 0x221A, 
ULMBCS_AMBIGUOUS_MBCS
},

402 {0x221B, 0x221C, 
ULMBCS_GRP_EXCEPT
},

403 {0x221D, 0x221E, 
ULMBCS_AMBIGUOUS_MBCS
},

404 {0x221F, 0x221F, 
ULMBCS_GRP_EXCEPT
},

405 {0x2220, 0x2220, 
ULMBCS_AMBIGUOUS_MBCS
},

406 {0x2223, 0x222A, 
ULMBCS_AMBIGUOUS_MBCS
},

407 {0x222B, 0x223D, 
ULMBCS_AMBIGUOUS_MBCS
},

408 {0x2245, 0x2248, 
ULMBCS_GRP_EXCEPT
},

409 {0x224C, 0x224C, 
ULMBCS_GRP_TW
},

410 {0x2252, 0x2252, 
ULMBCS_AMBIGUOUS_MBCS
},

411 {0x2260, 0x2261, 
ULMBCS_AMBIGUOUS_MBCS
},

412 {0x2262, 0x2265, 
ULMBCS_GRP_EXCEPT
},

413 {0x2266, 0x226F, 
ULMBCS_AMBIGUOUS_MBCS
},

414 {0x2282, 0x2283, 
ULMBCS_AMBIGUOUS_MBCS
},

415 {0x2284, 0x2285, 
ULMBCS_GRP_EXCEPT
},

416 {0x2286, 0x2287, 
ULMBCS_AMBIGUOUS_MBCS
},

417 {0x2288, 0x2297, 
ULMBCS_GRP_EXCEPT
},

418 {0x2299, 0x22BF, 
ULMBCS_AMBIGUOUS_MBCS
},

419 {0x22C0, 0x22C0, 
ULMBCS_GRP_EXCEPT
},

420 {0x2310, 0x2310, 
ULMBCS_GRP_EXCEPT
},

421 {0x2312, 0x2312, 
ULMBCS_AMBIGUOUS_MBCS
},

422 {0x2318, 0x2321, 
ULMBCS_GRP_EXCEPT
},

423 {0x2318, 0x2321, 
ULMBCS_GRP_CN
},

424 {0x2460, 0x24E9, 
ULMBCS_AMBIGUOUS_MBCS
},

425 {0x2500, 0x2500, 
ULMBCS_AMBIGUOUS_SBCS
},

426 {0x2501, 0x2501, 
ULMBCS_AMBIGUOUS_MBCS
},

427 {0x2502, 0x2502, 
ULMBCS_AMBIGUOUS_ALL
},

428 {0x2503, 0x2503, 
ULMBCS_AMBIGUOUS_MBCS
},

429 {0x2504, 0x2505, 
ULMBCS_GRP_TW
},

430 {0x2506, 0x2665, 
ULMBCS_AMBIGUOUS_ALL
},

431 {0x2666, 0x2666, 
ULMBCS_GRP_EXCEPT
},

432 {0x2667, 0x2669, 
ULMBCS_AMBIGUOUS_SBCS
},

433 {0x266A, 0x266A, 
ULMBCS_AMBIGUOUS_ALL
},

434 {0x266B, 0x266C, 
ULMBCS_AMBIGUOUS_SBCS
},

435 {0x266D, 0x266D, 
ULMBCS_AMBIGUOUS_MBCS
},

436 {0x266E, 0x266E, 
ULMBCS_AMBIGUOUS_SBCS
},

437 {0x266F, 0x266F, 
ULMBCS_GRP_JA
},

438 {0x2670, 0x2E7F, 
ULMBCS_AMBIGUOUS_SBCS
},

439 {0x2E80, 0xF861, 
ULMBCS_AMBIGUOUS_MBCS
},

440 {0xF862, 0xF8FF, 
ULMBCS_GRP_EXCEPT
},

441 {0xF900, 0xFA2D, 
ULMBCS_AMBIGUOUS_MBCS
},

442 {0xFB00, 0xFEFF, 
ULMBCS_AMBIGUOUS_SBCS
},

443 {0xFF01, 0xFFEE, 
ULMBCS_AMBIGUOUS_MBCS
},

444 {0xFFFF, 0xFFFF, 
ULMBCS_GRP_UNICODE
}

447 
ulmbcs_by‹_t


448 
	$FšdLMBCSUniRªge
(
UCh¬
 
uniCh¬
)

450 cÚ¡ 
_UniLMBCSG½M­
 * 
pTabË
 = 
UniLMBCSG½M­
;

452 
uniCh¬
 > 
pTabË
->
uniEndRªge
)

454 
pTabË
++;

457 ià(
uniCh¬
 >ğ
pTabË
->
uniS¹Rªge
)

459  
pTabË
->
G½Ty³
;

461  
ULMBCS_GRP_UNICODE
;

462 
	}
}

486 cÚ¡ 
	s_LoÿËLMBCSG½M­


488 cÚ¡ *
	mLoÿËID
;

489 cÚ¡ 
ulmbcs_by‹_t
 
	mO±Group
;

490 } 
	gLoÿËLMBCSG½M­
[] =

492 {"¬", 
ULMBCS_GRP_AR
},

493 {"be", 
ULMBCS_GRP_RU
},

494 {"bg", 
ULMBCS_GRP_L2
},

496 {"cs", 
ULMBCS_GRP_L2
},

499 {"–", 
ULMBCS_GRP_GR
},

505 {"he", 
ULMBCS_GRP_HE
},

506 {"hu", 
ULMBCS_GRP_L2
},

509 {"iw", 
ULMBCS_GRP_HE
},

510 {"ja", 
ULMBCS_GRP_JA
},

511 {"ko", 
ULMBCS_GRP_KO
},

514 {"mk", 
ULMBCS_GRP_RU
},

517 {"¶", 
ULMBCS_GRP_L2
},

519 {"ro", 
ULMBCS_GRP_L2
},

520 {"ru", 
ULMBCS_GRP_RU
},

521 {"sh", 
ULMBCS_GRP_L2
},

522 {"sk", 
ULMBCS_GRP_L2
},

523 {"¦", 
ULMBCS_GRP_L2
},

524 {"sq", 
ULMBCS_GRP_L2
},

525 {"¤", 
ULMBCS_GRP_RU
},

527 {"th", 
ULMBCS_GRP_TH
},

528 {"Œ", 
ULMBCS_GRP_TR
},

529 {"uk", 
ULMBCS_GRP_RU
},

531 {"zhTW", 
ULMBCS_GRP_TW
},

532 {"zh", 
ULMBCS_GRP_CN
},

533 {
NULL
, 
ULMBCS_GRP_L1
}

537 
ulmbcs_by‹_t


538 
	$FšdLMBCSLoÿË
(cÚ¡ *
LoÿËID
)

540 cÚ¡ 
_LoÿËLMBCSG½M­
 *
pTabË
 = 
LoÿËLMBCSG½M­
;

542 ià((!
LoÿËID
) || (!*LocaleID))

547 
pTabË
->
LoÿËID
)

549 ià(*
pTabË
->
LoÿËID
 == *LocaleID)

552 ià(
	`u´v_¡ºcmp
(
pTabË
->
LoÿËID
, LoÿËID, 
	`¡¾’
(pTable->LocaleID)) == 0)

553  
pTabË
->
O±Group
;

556 ià(*
pTabË
->
LoÿËID
 > *LocaleID)

558 
pTabË
++;

560  
ULMBCS_GRP_L1
;

561 
	}
}

579 
UCÚv”‹rSh¬edD©a
 *
	mO±G½CÚv”‹r
[
ULMBCS_GRP_LAST
+1];

580 
ušt8_t
 
	mO±Group
;

581 
ušt8_t
 
	mloÿËCÚv”‹rIndex
;

583 
	tUCÚv”‹rD©aLMBCS
;

585 
_LMBCSClo£
(
UCÚv”‹r
 * 
_this
);

587 
	#DECLARE_LMBCS_DATA
(
n
) \

588 cÚ¡ 
UCÚv”‹rIm¶
 
_LMBCSIm¶
##
n
={\

589 
UCNV_LMBCS_
##
n
,\

590 
NULL
,NULL,\

591 
_LMBCSO³n
##
n
,\

592 
_LMBCSClo£
,\

593 
NULL
,\

594 
_LMBCSToUnicodeW™hOff£ts
,\

595 
_LMBCSToUnicodeW™hOff£ts
,\

596 
_LMBCSFromUnicode
,\

597 
_LMBCSFromUnicode
,\

598 
NULL
,\

599 
NULL
,\

600 
NULL
,\

601 
NULL
,\

602 
_LMBCSSaãClÚe
,\

603 
uúv_g‘Com¶‘eUnicodeS‘
\

605 cÚ¡ 
UCÚv”‹rSticD©a
 
_LMBCSSticD©a
##
n
={\

606 (
UCÚv”‹rSticD©a
),\

608 0, 
UCNV_IBM
, 
UCNV_LMBCS_
##
n
, 1, 3,\

609 { 0x3f, 0, 0, 0 },1,
FALSE
,FALSE,0,0,{0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0} \

611 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
_LMBCSD©a
##
n
={\

612 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),\

613 
NULL
, NULL, &
_LMBCSSticD©a
##
n
, 
FALSE
, &
_LMBCSIm¶
##n, \

615 };

	)

621 
	#DEFINE_LMBCS_OPEN
(
n
) \

623 
_LMBCSO³n
##
	`n
(
UCÚv”‹r
* 
_this
, 
UCÚv”‹rLßdArgs
* 
pArgs
, 
UE¼ÜCode
* 
”r
) \

624 { 
	`_LMBCSO³nWÜk”
(
_this
, 
pArgs
, 
”r
, 
n
); }

	)

630 
	$_LMBCSO³nWÜk”
(
UCÚv”‹r
* 
_this
,

631 
UCÚv”‹rLßdArgs
 *
pArgs
,

632 
UE¼ÜCode
* 
”r
,

633 
ulmbcs_by‹_t
 
O±Group
)

635 
UCÚv”‹rD©aLMBCS
 * 
exŒaInfo
 = 
_this
->extraInfo =

636 (
UCÚv”‹rD©aLMBCS
*)
	`u´v_m®loc
 ( (UConverterDataLMBCS));

637 if(
exŒaInfo
 !ğ
NULL
)

639 
UCÚv”‹rNameP›ûs
 
¡ackP›ûs
;

640 
UCÚv”‹rLßdArgs
 
¡ackArgs
={ (
št32_t
)(UConverterLoadArgs) };

641 
ulmbcs_by‹_t
 
i
;

643 
	`u´v_mem£t
(
exŒaInfo
, 0, (
UCÚv”‹rD©aLMBCS
));

645 
¡ackArgs
.
ÚlyTe¡IsLßdabË
 = 
pArgs
->onlyTestIsLoadable;

647 
i
=0; i <ğ
ULMBCS_GRP_LAST
 && 
	`U_SUCCESS
(*
”r
); i++)

649 if(
O±GroupBy‹ToCPName
[
i
] !ğ
NULL
) {

650 
exŒaInfo
->
O±G½CÚv”‹r
[
i
] = 
	`uúv_lßdSh¬edD©a
(
O±GroupBy‹ToCPName
[i], &
¡ackP›ûs
, &
¡ackArgs
, 
”r
);

654 if(
	`U_FAILURE
(*
”r
è|| 
pArgs
->
ÚlyTe¡IsLßdabË
) {

655 
	`_LMBCSClo£
(
_this
);

658 
exŒaInfo
->
O±Group
 = OptGroup;

659 
exŒaInfo
->
loÿËCÚv”‹rIndex
 = 
	`FšdLMBCSLoÿË
(
pArgs
->
loÿË
);

663 *
”r
 = 
U_MEMORY_ALLOCATION_ERROR
;

665 
	}
}

668 
	$_LMBCSClo£
(
UCÚv”‹r
 * 
_this
)

670 ià(
_this
->
exŒaInfo
 !ğ
NULL
)

672 
ulmbcs_by‹_t
 
Ix
;

673 
UCÚv”‹rD©aLMBCS
 * 
exŒaInfo
 = (UCÚv”‹rD©aLMBCS *è
_this
->extraInfo;

675 
Ix
=0; Ix <ğ
ULMBCS_GRP_LAST
; Ix++)

677 ià(
exŒaInfo
->
O±G½CÚv”‹r
[
Ix
] !ğ
NULL
)

678 
	`uúv_uÆßdSh¬edD©aIfR—dy
(
exŒaInfo
->
O±G½CÚv”‹r
[
Ix
]);

680 ià(!
_this
->
isExŒaLoÿl
) {

681 
	`u´v_ä“
 (
_this
->
exŒaInfo
);

682 
_this
->
exŒaInfo
 = 
NULL
;

685 
	}
}

687 
	sLMBCSClÚe
 {

688 
UCÚv”‹r
 
	múv
;

689 
UCÚv”‹rD©aLMBCS
 
	mlmbcs
;

690 } 
	tLMBCSClÚe
;

692 
UCÚv”‹r
 *

693 
	$_LMBCSSaãClÚe
(cÚ¡ 
UCÚv”‹r
 *
úv
,

694 *
¡ackBufãr
,

695 
št32_t
 *
pBufãrSize
,

696 
UE¼ÜCode
 *
¡©us
) {

697 
LMBCSClÚe
 *
ÃwLMBCS
;

698 
UCÚv”‹rD©aLMBCS
 *
exŒaInfo
;

699 
št32_t
 
i
;

701 if(*
pBufãrSize
<=0) {

702 *
pBufãrSize
=(
št32_t
)(
LMBCSClÚe
);

703  
NULL
;

706 
exŒaInfo
=(
UCÚv”‹rD©aLMBCS
 *)
úv
->extraInfo;

707 
ÃwLMBCS
=(
LMBCSClÚe
 *)
¡ackBufãr
;

711 
	`u´v_memıy
(&
ÃwLMBCS
->
lmbcs
, 
exŒaInfo
, (
UCÚv”‹rD©aLMBCS
));

714 
i
 = 0; i <ğ
ULMBCS_GRP_LAST
; ++i) {

715 if(
exŒaInfo
->
O±G½CÚv”‹r
[
i
] !ğ
NULL
) {

716 
	`uúv_šüem’tRefCouÁ
(
exŒaInfo
->
O±G½CÚv”‹r
[
i
]);

720 
ÃwLMBCS
->
úv
.
exŒaInfo
 = &ÃwLMBCS->
lmbcs
;

721 
ÃwLMBCS
->
úv
.
isExŒaLoÿl
 = 
TRUE
;

722  &
ÃwLMBCS
->
úv
;

723 
	}
}

743 
size_t


744 
	$LMBCSCÚv”siÚWÜk”
 (

745 
UCÚv”‹rD©aLMBCS
 * 
exŒaInfo
,

746 
ulmbcs_by‹_t
 
group
,

747 
ulmbcs_by‹_t
 * 
pS¹LMBCS
,

748 
UCh¬
 * 
pUniCh¬
,

749 
ulmbcs_by‹_t
 * 
Ï¡CÚv”‹rIndex
,

750 
UBoŞ
 * 
groups_Œ›d


753 
ulmbcs_by‹_t
 * 
pLMBCS
 = 
pS¹LMBCS
;

754 
UCÚv”‹rSh¬edD©a
 * 
xúv
 = 
exŒaInfo
->
O±G½CÚv”‹r
[
group
];

756 
by‹sCÚv”‹d
;

757 
ušt32_t
 
v®ue
;

758 
ulmbcs_by‹_t
 
fœ¡By‹
;

760 
	`U_ASSERT
(
xúv
);

761 
	`U_ASSERT
(
group
<
ULMBCS_GRP_UNICODE
);

763 
by‹sCÚv”‹d
 = 
	`uúv_MBCSFromUCh¬32
(
xúv
, *
pUniCh¬
, &
v®ue
, 
FALSE
);

766 if(
by‹sCÚv”‹d
 > 0) {

767 
fœ¡By‹
 = (
ulmbcs_by‹_t
)(
v®ue
 >> ((
by‹sCÚv”‹d
 - 1) * 8));

770 
groups_Œ›d
[
group
] = 
TRUE
;

774 *
Ï¡CÚv”‹rIndex
 = 
group
;

779 
	`U_ASSERT
((
fœ¡By‹
 <ğ
ULMBCS_C0END
è|| (fœ¡By‹ >ğ
ULMBCS_C1START
è|| (
group
 =ğ
ULMBCS_GRP_EXCEPT
));

782 ià(
group
 !ğ
ULMBCS_GRP_EXCEPT
 && 
exŒaInfo
->
O±Group
 != group)

784 *
pLMBCS
++ = 
group
;

785 ià(
by‹sCÚv”‹d
 =ğ1 && 
group
 >ğ
ULMBCS_DOUBLEOPTGROUP_START
)

787 *
pLMBCS
++ = 
group
;

792 iàĞ
by‹sCÚv”‹d
 =ğ1 && 
fœ¡By‹
 < 0x20 )

797 
by‹sCÚv”‹d
)

800 *
pLMBCS
++ = (
ulmbcs_by‹_t
)(
v®ue
 >> 24);

802 *
pLMBCS
++ = (
ulmbcs_by‹_t
)(
v®ue
 >> 16);

804 *
pLMBCS
++ = (
ulmbcs_by‹_t
)(
v®ue
 >> 8);

806 *
pLMBCS
++ = (
ulmbcs_by‹_t
)
v®ue
;

812  (
pLMBCS
 - 
pS¹LMBCS
);

813 
	}
}

819 
size_t


820 
	$LMBCSCÚv”tUni
(
ulmbcs_by‹_t
 * 
pLMBCS
, 
UCh¬
 
uniCh¬
)

823 
ušt8_t
 
LowCh
 = (ušt8_t)(
uniCh¬
 & 0x00FF);

824 
ušt8_t
 
HighCh
 = (ušt8_t)(
uniCh¬
 >> 8);

826 *
pLMBCS
++ = 
ULMBCS_GRP_UNICODE
;

828 ià(
LowCh
 == 0)

830 *
pLMBCS
++ = 
ULMBCS_UNICOMPATZERO
;

831 *
pLMBCS
++ = 
HighCh
;

835 *
pLMBCS
++ = 
HighCh
;

836 *
pLMBCS
++ = 
LowCh
;

838  
ULMBCS_UNICODE_SIZE
;

839 
	}
}

845 
	$_LMBCSFromUnicode
(
UCÚv”‹rFromUnicodeArgs
* 
¬gs
,

846 
UE¼ÜCode
* 
”r
)

848 
ulmbcs_by‹_t
 
Ï¡CÚv”‹rIndex
 = 0;

849 
UCh¬
 
uniCh¬
;

850 
ulmbcs_by‹_t
 
LMBCS
[
ULMBCS_CHARSIZE_MAX
];

851 
ulmbcs_by‹_t
 * 
pLMBCS
;

852 
št32_t
 
by‹s_wr™‹n
;

853 
UBoŞ
 
groups_Œ›d
[
ULMBCS_GRP_LAST
+1];

854 
UCÚv”‹rD©aLMBCS
 * 
exŒaInfo
 = (UCÚv”‹rD©aLMBCS *è
¬gs
->
cÚv”‹r
->extraInfo;

855 
sourûIndex
 = 0;

881 
ulmbcs_by‹_t
 
OldCÚv”‹rIndex
 = 0;

883 
¬gs
->
sourû
 <‡rgs->
sourûLim™
 && !
	`U_FAILURE
(*
”r
))

886 
OldCÚv”‹rIndex
 = 
exŒaInfo
->
loÿËCÚv”‹rIndex
;

888 ià(
¬gs
->
rg‘
 >ğ¬gs->
rg‘Lim™
)

890 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

893 
uniCh¬
 = *(
¬gs
->
sourû
);

894 
by‹s_wr™‹n
 = 0;

895 
pLMBCS
 = 
LMBCS
;

901 if((
uniCh¬
>=0x80) && (uniChar<=0xff)

902  &&(
uniCh¬
!=0xB1) &&(uniChar!=0xD7) &&(uniChar!=0xF7)

903 &&(
uniCh¬
!=0xB0) &&(uniChar!=0xB4) &&(uniChar!=0xB6) &&(uniChar!=0xA7) &&(uniChar!=0xA8))

905 
exŒaInfo
->
loÿËCÚv”‹rIndex
 = 
ULMBCS_GRP_L1
;

907 ià(((
uniCh¬
 > 
ULMBCS_C0END
è&& (uniCh¬ < 
ULMBCS_C1START
)) ||

908 
uniCh¬
 =ğ0 || uniCh¬ =ğ
ULMBCS_HT
 || uniCh¬ =ğ
ULMBCS_CR
 ||

909 
uniCh¬
 =ğ
ULMBCS_LF
 || uniCh¬ =ğ
ULMBCS_123SYSTEMRANGE


912 *
pLMBCS
++ = (
ulmbcs_by‹_t
 ) 
uniCh¬
;

913 
by‹s_wr™‹n
 = 1;

917 ià(!
by‹s_wr™‹n
)

920 
ulmbcs_by‹_t
 
group
 = 
	`FšdLMBCSUniRªge
(
uniCh¬
);

922 ià(
group
 =ğ
ULMBCS_GRP_UNICODE
)

924 
pLMBCS
 +ğ
	`LMBCSCÚv”tUni
ÕLMBCS,
uniCh¬
);

926 
by‹s_wr™‹n
 = (
št32_t
)(
pLMBCS
 - 
LMBCS
);

928 ià(
group
 =ğ
ULMBCS_GRP_CTRL
)

931 ià(
uniCh¬
 <ğ
ULMBCS_C0END
)

933 *
pLMBCS
++ = 
ULMBCS_GRP_CTRL
;

934 *
pLMBCS
++ = (
ulmbcs_by‹_t
)(
ULMBCS_CTRLOFFSET
 + 
uniCh¬
);

936 ià(
uniCh¬
 >ğ
ULMBCS_C1START
 && uniCh¬ <ğULMBCS_C1START + 
ULMBCS_CTRLOFFSET
)

938 *
pLMBCS
++ = 
ULMBCS_GRP_CTRL
;

939 *
pLMBCS
++ = (
ulmbcs_by‹_t
 ) (
uniCh¬
 & 0x00FF);

941 
by‹s_wr™‹n
 = (
št32_t
)(
pLMBCS
 - 
LMBCS
);

943 ià(
group
 < 
ULMBCS_GRP_UNICODE
)

946 
by‹s_wr™‹n
 = (
št32_t
)
	`LMBCSCÚv”siÚWÜk”
 (

947 
exŒaInfo
, 
group
, 
pLMBCS
, &
uniCh¬
,

948 &
Ï¡CÚv”‹rIndex
, 
groups_Œ›d
);

950 ià(!
by‹s_wr™‹n
)

952 
	`u´v_mem£t
(
groups_Œ›d
, 0, (groups_tried));

955 ià((
exŒaInfo
->
O±Group
 !ğ1è&& (
	`ULMBCS_AMBIGUOUS_MATCH
(
group
,ƒxtraInfo->OptGroup)))

960 if(
exŒaInfo
->
loÿËCÚv”‹rIndex
 < 
ULMBCS_DOUBLEOPTGROUP_START
)

962 
by‹s_wr™‹n
 = 
	`LMBCSCÚv”siÚWÜk”
 (
exŒaInfo
,

963 
ULMBCS_GRP_L1
, 
pLMBCS
, &
uniCh¬
,

964 &
Ï¡CÚv”‹rIndex
, 
groups_Œ›d
);

966 if(!
by‹s_wr™‹n
)

968 
by‹s_wr™‹n
 = 
	`LMBCSCÚv”siÚWÜk”
 (
exŒaInfo
,

969 
ULMBCS_GRP_EXCEPT
, 
pLMBCS
, &
uniCh¬
,

970 &
Ï¡CÚv”‹rIndex
, 
groups_Œ›d
);

972 if(!
by‹s_wr™‹n
)

974 
by‹s_wr™‹n
 = 
	`LMBCSCÚv”siÚWÜk”
 (
exŒaInfo
,

975 
exŒaInfo
->
loÿËCÚv”‹rIndex
, 
pLMBCS
, &
uniCh¬
,

976 &
Ï¡CÚv”‹rIndex
, 
groups_Œ›d
);

981 
by‹s_wr™‹n
 = 
	`LMBCSCÚv”siÚWÜk”
 (
exŒaInfo
,

982 
exŒaInfo
->
loÿËCÚv”‹rIndex
, 
pLMBCS
, &
uniCh¬
,

983 &
Ï¡CÚv”‹rIndex
, 
groups_Œ›d
);

987 ià(!
by‹s_wr™‹n
 && (
exŒaInfo
->
loÿËCÚv”‹rIndex
è&& (
	`ULMBCS_AMBIGUOUS_MATCH
(
group
,ƒxtraInfo->localeConverterIndex)))

989 
by‹s_wr™‹n
 = (
št32_t
)
	`LMBCSCÚv”siÚWÜk”
 (
exŒaInfo
,

990 
exŒaInfo
->
loÿËCÚv”‹rIndex
, 
pLMBCS
, &
uniCh¬
, &
Ï¡CÚv”‹rIndex
, 
groups_Œ›d
);

993 ià(!
by‹s_wr™‹n
 && (
Ï¡CÚv”‹rIndex
è&& (
	`ULMBCS_AMBIGUOUS_MATCH
(
group
,†astConverterIndex)))

995 
by‹s_wr™‹n
 = (
št32_t
)
	`LMBCSCÚv”siÚWÜk”
 (
exŒaInfo
,

996 
Ï¡CÚv”‹rIndex
, 
pLMBCS
, &
uniCh¬
, &Ï¡CÚv”‹rIndex, 
groups_Œ›d
);

998 ià(!
by‹s_wr™‹n
)

1001 
ulmbcs_by‹_t
 
g½_¡¬t
;

1002 
ulmbcs_by‹_t
 
g½_’d
;

1003 
ulmbcs_by‹_t
 
g½_ix
;

1004 
g½_¡¬t
 = (
ulmbcs_by‹_t
)((
group
 =ğ
ULMBCS_AMBIGUOUS_MBCS
)

1005 ? 
ULMBCS_DOUBLEOPTGROUP_START


1006 : 
ULMBCS_GRP_L1
);

1007 
g½_’d
 = (
ulmbcs_by‹_t
)((
group
 =ğ
ULMBCS_AMBIGUOUS_MBCS
)

1008 ? 
ULMBCS_GRP_LAST


1009 : 
ULMBCS_GRP_TH
);

1010 if(
group
 =ğ
ULMBCS_AMBIGUOUS_ALL
)

1012 
g½_¡¬t
 = 
ULMBCS_GRP_L1
;

1013 
g½_’d
 = 
ULMBCS_GRP_LAST
;

1015 
g½_ix
 = 
g½_¡¬t
;

1016 
g½_ix
 <ğ
g½_’d
 && !
by‹s_wr™‹n
;

1017 
g½_ix
++)

1019 ià(
exŒaInfo
->
O±G½CÚv”‹r
 [
g½_ix
] && !
groups_Œ›d
 [grp_ix])

1021 
by‹s_wr™‹n
 = (
št32_t
)
	`LMBCSCÚv”siÚWÜk”
 (
exŒaInfo
,

1022 
g½_ix
, 
pLMBCS
, &
uniCh¬
,

1023 &
Ï¡CÚv”‹rIndex
, 
groups_Œ›d
);

1028 ià(!
by‹s_wr™‹n
 && 
g½_¡¬t
 =ğ
ULMBCS_GRP_L1
)

1030 
by‹s_wr™‹n
 = (
št32_t
)
	`LMBCSCÚv”siÚWÜk”
 (
exŒaInfo
,

1031 
ULMBCS_GRP_EXCEPT
, 
pLMBCS
, &
uniCh¬
,

1032 &
Ï¡CÚv”‹rIndex
, 
groups_Œ›d
);

1036 ià(!
by‹s_wr™‹n
)

1039 
pLMBCS
 +ğ
	`LMBCSCÚv”tUni
ÕLMBCS, 
uniCh¬
);

1040 
by‹s_wr™‹n
 = (
št32_t
)(
pLMBCS
 - 
LMBCS
);

1046 
¬gs
->
sourû
++;

1047 
pLMBCS
 = 
LMBCS
;

1048 
¬gs
->
rg‘
 <‡rgs->
rg‘Lim™
 && 
by‹s_wr™‹n
--)

1050 *(
¬gs
->
rg‘
)++ = *
pLMBCS
++;

1051 ià(
¬gs
->
off£ts
)

1053 *(
¬gs
->
off£ts
)++ = 
sourûIndex
;

1056 
sourûIndex
++;

1057 ià(
by‹s_wr™‹n
 > 0)

1063 
ušt8_t
 * 
pE¼ÜBufãr
 = 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
;

1064 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

1065 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãrL’gth
 = (
št8_t
)
by‹s_wr™‹n
;

1066 
by‹s_wr™‹n
--)

1068 *
pE¼ÜBufãr
++ = *
pLMBCS
++;

1072 
exŒaInfo
->
loÿËCÚv”‹rIndex
 = 
OldCÚv”‹rIndex
;

1074 
	}
}

1081 
UCh¬


1082 
	$G‘UniFromLMBCSUni
(cÚ¡ ** 
µLMBCSš
)

1084 
ušt8_t
 
HighCh
 = *(*
µLMBCSš
)++;

1085 
ušt8_t
 
LowCh
 = *(*
µLMBCSš
)++;

1087 ià(
HighCh
 =ğ
ULMBCS_UNICOMPATZERO
 )

1089 
HighCh
 = 
LowCh
;

1090 
LowCh
 = 0;

1092  (
UCh¬
)((
HighCh
 << 8è| 
LowCh
);

1093 
	}
}

1103 
	#CHECK_SOURCE_LIMIT
(
šdex
) \

1104 ià(
¬gs
->
sourû
+
šdex
 >‡rgs->
sourûLim™
){\

1105 *
”r
 = 
U_TRUNCATED_CHAR_FOUND
;\

1106 
¬gs
->
sourû
 =‡rgs->
sourûLim™
;\

1107  0xffff;}

	)

1111 
UCh¬32


1112 
	$_LMBCSG‘NextUCh¬WÜk”
(
UCÚv”‹rToUnicodeArgs
* 
¬gs
,

1113 
UE¼ÜCode
* 
”r
)

1115 
UCh¬32
 
uniCh¬
 = 0;

1116 
ulmbcs_by‹_t
 
CurBy‹
;

1119 ià(
¬gs
->
sourû
 >ğ¬gs->
sourûLim™
)

1121 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1125 
CurBy‹
 = *((
ulmbcs_by‹_t
 *è(
¬gs
->
sourû
++));

1139 if(((
CurBy‹
 > 
ULMBCS_C0END
è&& (CurBy‹ < 
ULMBCS_C1START
))

1140 || (
CurBy‹
 == 0)

1141 || 
CurBy‹
 =ğ
ULMBCS_HT
 || CurBy‹ =ğ
ULMBCS_CR


1142 || 
CurBy‹
 =ğ
ULMBCS_LF
 || CurBy‹ =ğ
ULMBCS_123SYSTEMRANGE
)

1144 
uniCh¬
 = 
CurBy‹
;

1148 
UCÚv”‹rD©aLMBCS
 * 
exŒaInfo
;

1149 
ulmbcs_by‹_t
 
group
;

1150 
UCÚv”‹rSh¬edD©a
 *
úv
;

1152 ià(
CurBy‹
 =ğ
ULMBCS_GRP_CTRL
)

1154 
ulmbcs_by‹_t
 
C0C1by‹
;

1155 
	`CHECK_SOURCE_LIMIT
(1);

1156 
C0C1by‹
 = *(
¬gs
->
sourû
)++;

1157 
uniCh¬
 = (
C0C1by‹
 < 
ULMBCS_C1START
è? C0C1by‹ - 
ULMBCS_CTRLOFFSET
 : C0C1byte;

1160 ià(
CurBy‹
 =ğ
ULMBCS_GRP_UNICODE
)

1162 
	`CHECK_SOURCE_LIMIT
(2);

1165  
	`G‘UniFromLMBCSUni
(&(
¬gs
->
sourû
));

1167 ià(
CurBy‹
 <ğ
ULMBCS_CTRLOFFSET
)

1169 
group
 = 
CurBy‹
;

1170 
exŒaInfo
 = (
UCÚv”‹rD©aLMBCS
 *è
¬gs
->
cÚv”‹r
->extraInfo;

1171 ià(
group
 > 
ULMBCS_GRP_LAST
 || (
úv
 = 
exŒaInfo
->
O±G½CÚv”‹r
[group]è=ğ
NULL
)

1174 *
”r
 = 
U_INVALID_CHAR_FOUND
;

1176 ià(
group
 >ğ
ULMBCS_DOUBLEOPTGROUP_START
)

1179 
	`CHECK_SOURCE_LIMIT
(2);

1182 ià(*
¬gs
->
sourû
 =ğ
group
) {

1184 ++
¬gs
->
sourû
;

1185 
uniCh¬
 = 
	`uúv_MBCSSim¶eG‘NextUCh¬
(
úv
, 
¬gs
->
sourû
, 1, 
FALSE
);

1186 ++
¬gs
->
sourû
;

1189 
uniCh¬
 = 
	`uúv_MBCSSim¶eG‘NextUCh¬
(
úv
, 
¬gs
->
sourû
, 2, 
FALSE
);

1190 
¬gs
->
sourû
 += 2;

1194 
	`CHECK_SOURCE_LIMIT
(1);

1195 
CurBy‹
 = *(
¬gs
->
sourû
)++;

1197 ià(
CurBy‹
 >ğ
ULMBCS_C1START
)

1199 
uniCh¬
 = 
	`_MBCS_SINGLE_SIMPLE_GET_NEXT_BMP
(
úv
, 
CurBy‹
);

1206 
by‹s
[2];

1208 
exŒaInfo
 = (
UCÚv”‹rD©aLMBCS
 *è
¬gs
->
cÚv”‹r
->extraInfo;

1209 
úv
 = 
exŒaInfo
->
O±G½CÚv”‹r
 [
ULMBCS_GRP_EXCEPT
];

1212 
by‹s
[0] = 
group
;

1213 
by‹s
[1] = 
CurBy‹
;

1214 
uniCh¬
 = 
	`uúv_MBCSSim¶eG‘NextUCh¬
(
úv
, 
by‹s
, 2, 
FALSE
);

1218 ià(
CurBy‹
 >ğ
ULMBCS_C1START
)

1220 
exŒaInfo
 = (
UCÚv”‹rD©aLMBCS
 *è
¬gs
->
cÚv”‹r
->extraInfo;

1221 
group
 = 
exŒaInfo
->
O±Group
;

1222 
úv
 = 
exŒaInfo
->
O±G½CÚv”‹r
[
group
];

1223 ià(
group
 >ğ
ULMBCS_DOUBLEOPTGROUP_START
)

1225 ià(!
	`uúv_MBCSIsL—dBy‹
(
úv
, 
CurBy‹
))

1227 
	`CHECK_SOURCE_LIMIT
(0);

1230 
uniCh¬
 = 
	`uúv_MBCSSim¶eG‘NextUCh¬
(
úv
, 
¬gs
->
sourû
 - 1, 1, 
FALSE
);

1234 
	`CHECK_SOURCE_LIMIT
(1);

1236 
uniCh¬
 = 
	`uúv_MBCSSim¶eG‘NextUCh¬
(
úv
, 
¬gs
->
sourû
 - 1, 2, 
FALSE
);

1237 ++
¬gs
->
sourû
;

1242 
uniCh¬
 = 
	`_MBCS_SINGLE_SIMPLE_GET_NEXT_BMP
(
úv
, 
CurBy‹
);

1246  
uniCh¬
;

1247 
	}
}

1254 
	$_LMBCSToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
* 
¬gs
,

1255 
UE¼ÜCode
* 
”r
)

1257 
LMBCS
 [
ULMBCS_CHARSIZE_MAX
];

1258 
UCh¬
 
uniCh¬
;

1259 cÚ¡ * 
§veSourû
;

1260 cÚ¡ * 
pS¹LMBCS
 = 
¬gs
->
sourû
;

1261 cÚ¡ * 
”rSourû
 = 
NULL
;

1262 
št8_t
 
§veby‹s
 = 0;

1265 
	`U_SUCCESS
(*
”r
è&& 
¬gs
->
sourûLim™
 >‡rgs->
sourû
 &&‡rgs->
rg‘Lim™
 >‡rgs->
rg‘
)

1267 
§veSourû
 = 
¬gs
->
sourû
;

1269 ià(
¬gs
->
cÚv”‹r
->
toUL’gth
)

1271 cÚ¡ *
§veSourûLim™
;

1272 
size_t
 
size_Şd
 = 
¬gs
->
cÚv”‹r
->
toUL’gth
;

1275 
size_t
 
size_Ãw_maybe_1
 = (
LMBCS
è- 
size_Şd
;

1276 
size_t
 
size_Ãw_maybe_2
 = 
¬gs
->
sourûLim™
 -‡rgs->
sourû
;

1277 
size_t
 
size_Ãw
 = (
size_Ãw_maybe_1
 < 
size_Ãw_maybe_2
) ? size_new_maybe_1 : size_new_maybe_2;

1280 
	`u´v_memıy
(
LMBCS
, 
¬gs
->
cÚv”‹r
->
toUBy‹s
, 
size_Şd
);

1281 
	`u´v_memıy
(
LMBCS
 + 
size_Şd
, 
¬gs
->
sourû
, 
size_Ãw
);

1282 
§veSourûLim™
 = 
¬gs
->
sourûLim™
;

1283 
¬gs
->
sourû
 = 
”rSourû
 = 
LMBCS
;

1284 
¬gs
->
sourûLim™
 = 
LMBCS
+
size_Şd
+
size_Ãw
;

1285 
§veby‹s
 = (
št8_t
)(
size_Şd
+
size_Ãw
);

1286 
uniCh¬
 = (
UCh¬
è
	`_LMBCSG‘NextUCh¬WÜk”
(
¬gs
, 
”r
);

1287 
¬gs
->
sourû
 = 
§veSourû
 + (×rgs->sourû - 
LMBCS
è- 
size_Şd
);

1288 
¬gs
->
sourûLim™
 = 
§veSourûLim™
;

1290 ià(*
”r
 =ğ
U_TRUNCATED_CHAR_FOUND
)

1293 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 
§veby‹s
;

1294 
	`u´v_memıy
(
¬gs
->
cÚv”‹r
->
toUBy‹s
, 
LMBCS
, 
§veby‹s
);

1295 
¬gs
->
sourû
 =‡rgs->
sourûLim™
;

1296 *
”r
 = 
U_ZERO_ERROR
;

1302 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 0;

1307 
”rSourû
 = 
§veSourû
;

1308 
uniCh¬
 = (
UCh¬
è
	`_LMBCSG‘NextUCh¬WÜk”
(
¬gs
, 
”r
);

1309 
§veby‹s
 = (
št8_t
)(
¬gs
->
sourû
 - 
§veSourû
);

1311 ià(
	`U_SUCCESS
(*
”r
))

1313 ià(
uniCh¬
 < 0xfffe)

1315 *(
¬gs
->
rg‘
)++ = 
uniCh¬
;

1316 if(
¬gs
->
off£ts
)

1318 *(
¬gs
->
off£ts
)++ = (
št32_t
)(
§veSourû
 - 
pS¹LMBCS
);

1321 ià(
uniCh¬
 == 0xfffe)

1323 *
”r
 = 
U_INVALID_CHAR_FOUND
;

1327 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

1332 ià(
	`U_SUCCESS
(*
”r
è&& 
¬gs
->
sourûLim™
 >‡rgs->
sourû
 &&‡rgs->
rg‘Lim™
 <ğ¬gs->
rg‘
)

1334 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

1336 ià(
	`U_FAILURE
(*
”r
))

1339 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 
§veby‹s
;

1340 ià(
§veby‹s
 > 0) {

1341 
	`u´v_memıy
(
¬gs
->
cÚv”‹r
->
toUBy‹s
, 
”rSourû
, 
§veby‹s
);

1343 ià(*
”r
 =ğ
U_TRUNCATED_CHAR_FOUND
) {

1344 *
”r
 = 
U_ZERO_ERROR
;

1347 
	}
}

1350 
	$DEFINE_LMBCS_OPEN
(1)

1351 
	$DEFINE_LMBCS_OPEN
(2)

1352 
	$DEFINE_LMBCS_OPEN
(3)

1353 
	$DEFINE_LMBCS_OPEN
(4)

1354 
	$DEFINE_LMBCS_OPEN
(5)

1355 
	$DEFINE_LMBCS_OPEN
(6)

1356 
	$DEFINE_LMBCS_OPEN
(8)

1357 
	$DEFINE_LMBCS_OPEN
(11)

1358 
	$DEFINE_LMBCS_OPEN
(16)

1359 
	$DEFINE_LMBCS_OPEN
(17)

1360 
	$DEFINE_LMBCS_OPEN
(18)

1361 
	$DEFINE_LMBCS_OPEN
(19)

1364 
	$DECLARE_LMBCS_DATA
(1)

1365 
	$DECLARE_LMBCS_DATA
(2)

1366 
	$DECLARE_LMBCS_DATA
(3)

1367 
	$DECLARE_LMBCS_DATA
(4)

1368 
	$DECLARE_LMBCS_DATA
(5)

1369 
	$DECLARE_LMBCS_DATA
(6)

1370 
	$DECLARE_LMBCS_DATA
(8)

1371 
	$DECLARE_LMBCS_DATA
(11)

1372 
	$DECLARE_LMBCS_DATA
(16)

1373 
	$DECLARE_LMBCS_DATA
(17)

1374 
	$DECLARE_LMBCS_DATA
(18)

1375 
	$DECLARE_LMBCS_DATA
(19)

	@ucnv_set.c

21 
	~"unicode/uty³s.h
"

22 
	~"unicode/u£t.h
"

23 
	~"unicode/uúv.h
"

24 
	~"uúv_bld.h
"

25 
	~"u£t_imp.h
"

27 #ià!
UCONFIG_NO_CONVERSION


29 
U_CAPI
 
U_EXPORT2


30 
	$uúv_g‘UnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

31 
US‘
 *
£tFlIn
,

32 
UCÚv”‹rUnicodeS‘
 
whichS‘
,

33 
UE¼ÜCode
 *
pE¼ÜCode
) {

35 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

38 if(
úv
==
NULL
 || 
£tFlIn
==NULL || 
whichS‘
<
UCNV_ROUNDTRIP_SET
 || 
UCNV_SET_COUNT
<=whichSet) {

39 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

44 if(
úv
->
sh¬edD©a
->
im¶
->
g‘UnicodeS‘
==
NULL
) {

45 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

50 
US‘Add”
 
§
={

51 
NULL
,

52 
u£t_add
,

53 
u£t_addRªge
,

54 
u£t_addSŒšg
,

55 
u£t_»move
,

56 
u£t_»moveRªge


58 
§
.
£t
=
£tFlIn
;

61 
	`u£t_ş—r
(
£tFlIn
);

64 
úv
->
sh¬edD©a
->
im¶
->
	`g‘UnicodeS‘
(úv, &
§
, 
whichS‘
, 
pE¼ÜCode
);

66 
	}
}

	@ucnv_u16.c

17 
	~"unicode/uty³s.h
"

19 #ià!
UCONFIG_NO_CONVERSION


21 
	~"unicode/uúv.h
"

22 
	~"uúv_bld.h
"

23 
	~"uúv_úv.h
"

24 
	~"cmemÜy.h
"

27 
	mUCNV_NEED_TO_WRITE_BOM
=1

35 
_UTF16ToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

36 
UE¼ÜCode
 *
pE¼ÜCode
);

40 #ià
U_IS_BIG_ENDIAN


41 
	#_UTF16PEFromUnicodeW™hOff£ts
 
_UTF16BEFromUnicodeW™hOff£ts


	)

43 
	#_UTF16PEFromUnicodeW™hOff£ts
 
_UTF16LEFromUnicodeW™hOff£ts


	)

48 
	$_UTF16BEFromUnicodeW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

49 
UE¼ÜCode
 *
pE¼ÜCode
) {

50 
UCÚv”‹r
 *
úv
;

51 cÚ¡ 
UCh¬
 *
sourû
;

52 *
rg‘
;

53 
št32_t
 *
off£ts
;

55 
ušt32_t
 
rg‘C­ac™y
, 
Ëngth
, 
sourûIndex
;

56 
UCh¬
 
c
, 
Œa
;

57 
ov”æow
[4];

59 
sourû
=
pArgs
->source;

60 
Ëngth
=(
št32_t
)(
pArgs
->
sourûLim™
-
sourû
);

61 if(
Ëngth
<=0) {

66 
úv
=
pArgs
->
cÚv”‹r
;

69 if(
úv
->
äomUnicodeStus
==
UCNV_NEED_TO_WRITE_BOM
) {

70 cÚ¡ 
bom
[]={ ()0xfe, ()0xff };

71 
	`uúv_äomUWr™eBy‹s
(
úv
,

72 
bom
, 2,

73 &
pArgs
->
rg‘
,…Args->
rg‘Lim™
,

74 &
pArgs
->
off£ts
, -1,

75 
pE¼ÜCode
);

76 
úv
->
äomUnicodeStus
=0;

79 
rg‘
=
pArgs
->target;

80 if(
rg‘
 >ğ
pArgs
->
rg‘Lim™
) {

81 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

85 
rg‘C­ac™y
=(
ušt32_t
)(
pArgs
->
rg‘Lim™
-
rg‘
);

86 
off£ts
=
pArgs
->offsets;

87 
sourûIndex
=0;

91 if((
c
=(
UCh¬
)
úv
->
äomUCh¬32
)!=0 && 
	`U16_IS_TRAIL
(
Œa
=*
sourû
è&& 
rg‘C­ac™y
>=4) {

93 ++
sourû
;

94 --
Ëngth
;

95 
rg‘
[0]=(
ušt8_t
)(
c
>>8);

96 
rg‘
[1]=(
ušt8_t
)
c
;

97 
rg‘
[2]=(
ušt8_t
)(
Œa
>>8);

98 
rg‘
[3]=(
ušt8_t
)
Œa
;

99 
rg‘
+=4;

100 
rg‘C­ac™y
-=4;

101 if(
off£ts
!=
NULL
) {

102 *
off£ts
++=-1;

103 *
off£ts
++=-1;

104 *
off£ts
++=-1;

105 *
off£ts
++=-1;

107 
sourûIndex
=1;

108 
úv
->
äomUCh¬32
=
c
=0;

111 if(
c
==0) {

113 
ušt32_t
 
couÁ
=2*
Ëngth
;

114 if(
couÁ
>
rg‘C­ac™y
) {

115 
couÁ
=
rg‘C­ac™y
&~1;

118 
rg‘C­ac™y
-=
couÁ
;

119 
couÁ
>>=1;

120 
Ëngth
-=
couÁ
;

122 if(
off£ts
==
NULL
) {

123 
couÁ
>0) {

124 
c
=*
sourû
++;

125 if(
	`U16_IS_SINGLE
(
c
)) {

126 
rg‘
[0]=(
ušt8_t
)(
c
>>8);

127 
rg‘
[1]=(
ušt8_t
)
c
;

128 
rg‘
+=2;

129 } if(
	`U16_IS_SURROGATE_LEAD
(
c
è&& 
couÁ
>=2 && 
	`U16_IS_TRAIL
(
Œa
=*
sourû
)) {

130 ++
sourû
;

131 --
couÁ
;

132 
rg‘
[0]=(
ušt8_t
)(
c
>>8);

133 
rg‘
[1]=(
ušt8_t
)
c
;

134 
rg‘
[2]=(
ušt8_t
)(
Œa
>>8);

135 
rg‘
[3]=(
ušt8_t
)
Œa
;

136 
rg‘
+=4;

140 --
couÁ
;

143 
couÁ
>0) {

144 
c
=*
sourû
++;

145 if(
	`U16_IS_SINGLE
(
c
)) {

146 
rg‘
[0]=(
ušt8_t
)(
c
>>8);

147 
rg‘
[1]=(
ušt8_t
)
c
;

148 
rg‘
+=2;

149 *
off£ts
++=
sourûIndex
;

150 *
off£ts
++=
sourûIndex
++;

151 } if(
	`U16_IS_SURROGATE_LEAD
(
c
è&& 
couÁ
>=2 && 
	`U16_IS_TRAIL
(
Œa
=*
sourû
)) {

152 ++
sourû
;

153 --
couÁ
;

154 
rg‘
[0]=(
ušt8_t
)(
c
>>8);

155 
rg‘
[1]=(
ušt8_t
)
c
;

156 
rg‘
[2]=(
ušt8_t
)(
Œa
>>8);

157 
rg‘
[3]=(
ušt8_t
)
Œa
;

158 
rg‘
+=4;

159 *
off£ts
++=
sourûIndex
;

160 *
off£ts
++=
sourûIndex
;

161 *
off£ts
++=
sourûIndex
;

162 *
off£ts
++=
sourûIndex
;

163 
sourûIndex
+=2;

167 --
couÁ
;

171 if(
couÁ
==0) {

173 if(
Ëngth
>0 && 
rg‘C­ac™y
>0) {

180 if(
	`U16_IS_SINGLE
(
c
=*
sourû
++)) {

181 
ov”æow
[0]=()(
c
>>8);

182 
ov”æow
[1]=()
c
;

183 
Ëngth
=2;

184 
c
=0;

188 
Ëngth
=0;

189 
c
=0;

193 
rg‘C­ac™y
+=2*
couÁ
;

196 
Ëngth
=0;

199 if(
c
!=0) {

205 
Ëngth
=0;

206 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

207 if(
sourû
<
pArgs
->
sourûLim™
) {

208 if(
	`U16_IS_TRAIL
(
Œa
=*
sourû
)) {

210 ++
sourû
;

211 
ov”æow
[0]=()(
c
>>8);

212 
ov”æow
[1]=()
c
;

213 
ov”æow
[2]=()(
Œa
>>8);

214 
ov”æow
[3]=()
Œa
;

215 
Ëngth
=4;

216 
c
=0;

219 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

226 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

228 
úv
->
äomUCh¬32
=
c
;

231 if(
Ëngth
>0) {

233 
	`uúv_äomUWr™eBy‹s
(
úv
,

234 
ov”æow
, 
Ëngth
,

235 (**)&
rg‘
, 
pArgs
->
rg‘Lim™
,

236 &
off£ts
, 
sourûIndex
,

237 
pE¼ÜCode
);

238 
rg‘C­ac™y
=(
ušt32_t
)(
pArgs
->
rg‘Lim™
-(*)
rg‘
);

241 if(
	`U_SUCCESS
(*
pE¼ÜCode
è&& 
sourû
<
pArgs
->
sourûLim™
 && 
rg‘C­ac™y
==0) {

242 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

246 
pArgs
->
sourû
=source;

247 
pArgs
->
rg‘
=(*)target;

248 
pArgs
->
off£ts
=offsets;

249 
	}
}

252 
	$_UTF16BEToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

253 
UE¼ÜCode
 *
pE¼ÜCode
) {

254 
UCÚv”‹r
 *
úv
;

255 cÚ¡ 
ušt8_t
 *
sourû
;

256 
UCh¬
 *
rg‘
;

257 
št32_t
 *
off£ts
;

259 
ušt32_t
 
rg‘C­ac™y
, 
Ëngth
, 
couÁ
, 
sourûIndex
;

260 
UCh¬
 
c
, 
Œa
;

262 if(
pArgs
->
cÚv”‹r
->
mode
<8) {

263 
	`_UTF16ToUnicodeW™hOff£ts
(
pArgs
, 
pE¼ÜCode
);

267 
úv
=
pArgs
->
cÚv”‹r
;

268 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

269 
Ëngth
=(
št32_t
)((cÚ¡ 
ušt8_t
 *)
pArgs
->
sourûLim™
-
sourû
);

270 if(
Ëngth
<=0 && 
úv
->
toUnicodeStus
==0) {

275 
rg‘
=
pArgs
->target;

276 if(
rg‘
 >ğ
pArgs
->
rg‘Lim™
) {

277 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

281 
rg‘C­ac™y
=(
ušt32_t
)(
pArgs
->
rg‘Lim™
-
rg‘
);

282 
off£ts
=
pArgs
->offsets;

283 
sourûIndex
=0;

284 
c
=0;

287 if(
úv
->
toUnicodeStus
!=0) {

294 
úv
->
toUBy‹s
[0]=(
ušt8_t
)úv->
toUnicodeStus
;

295 
úv
->
toUL’gth
=1;

296 
úv
->
toUnicodeStus
=0;

298 if((
couÁ
=
úv
->
toUL’gth
)!=0) {

299 
ušt8_t
 *
p
=
úv
->
toUBy‹s
;

301 
p
[
couÁ
++]=*
sourû
++;

302 ++
sourûIndex
;

303 --
Ëngth
;

304 if(
couÁ
==2) {

305 
c
=((
UCh¬
)
p
[0]<<8)|p[1];

306 if(
	`U16_IS_SINGLE
(
c
)) {

308 *
rg‘
++=
c
;

309 if(
off£ts
!=
NULL
) {

310 *
off£ts
++=-1;

312 --
rg‘C­ac™y
;

313 
couÁ
=0;

314 
c
=0;

316 } if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

318 
c
=0;

323 } if(
couÁ
==4) {

324 
c
=((
UCh¬
)
p
[0]<<8)|p[1];

325 
Œa
=((
UCh¬
)
p
[2]<<8)|p[3];

326 if(
	`U16_IS_TRAIL
(
Œa
)) {

328 *
rg‘
++=
c
;

329 if(
rg‘C­ac™y
>=2) {

330 *
rg‘
++=
Œa
;

331 if(
off£ts
!=
NULL
) {

332 *
off£ts
++=-1;

333 *
off£ts
++=-1;

335 
rg‘C­ac™y
-=2;

337 
rg‘C­ac™y
=0;

338 
úv
->
UCh¬E¼ÜBufãr
[0]=
Œa
;

339 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

340 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

342 
couÁ
=0;

343 
c
=0;

347 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

350 if(((cÚ¡ 
ušt8_t
 *)
pArgs
->
sourû
-source)>=2) {

351 
sourû
-=2;

358 
úv
->
toUnicodeStus
=0x100|
p
[2];

359 --
sourû
;

361 
úv
->
toUL’gth
=2;

364 
pArgs
->
sourû
=(const *)source;

365 
pArgs
->
rg‘
=target;

366 
pArgs
->
off£ts
=offsets;

370 } 
Ëngth
>0);

371 
úv
->
toUL’gth
=(
št8_t
)
couÁ
;

375 
couÁ
=2*
rg‘C­ac™y
;

376 if(
couÁ
>
Ëngth
) {

377 
couÁ
=
Ëngth
&~1;

379 if(
c
==0 && 
couÁ
>0) {

380 
Ëngth
-=
couÁ
;

381 
couÁ
>>=1;

382 
rg‘C­ac™y
-=
couÁ
;

383 if(
off£ts
==
NULL
) {

385 
c
=((
UCh¬
)
sourû
[0]<<8)|source[1];

386 
sourû
+=2;

387 if(
	`U16_IS_SINGLE
(
c
)) {

388 *
rg‘
++=
c
;

389 } if(
	`U16_IS_SURROGATE_LEAD
(
c
è&& 
couÁ
>=2 &&

390 
	`U16_IS_TRAIL
(
Œa
=((
UCh¬
)
sourû
[0]<<8)|source[1])

392 
sourû
+=2;

393 --
couÁ
;

394 *
rg‘
++=
c
;

395 *
rg‘
++=
Œa
;

399 } --
couÁ
>0);

402 
c
=((
UCh¬
)
sourû
[0]<<8)|source[1];

403 
sourû
+=2;

404 if(
	`U16_IS_SINGLE
(
c
)) {

405 *
rg‘
++=
c
;

406 *
off£ts
++=
sourûIndex
;

407 
sourûIndex
+=2;

408 } if(
	`U16_IS_SURROGATE_LEAD
(
c
è&& 
couÁ
>=2 &&

409 
	`U16_IS_TRAIL
(
Œa
=((
UCh¬
)
sourû
[0]<<8)|source[1])

411 
sourû
+=2;

412 --
couÁ
;

413 *
rg‘
++=
c
;

414 *
rg‘
++=
Œa
;

415 *
off£ts
++=
sourûIndex
;

416 *
off£ts
++=
sourûIndex
;

417 
sourûIndex
+=4;

421 } --
couÁ
>0);

424 if(
couÁ
==0) {

426 
c
=0;

429 
Ëngth
+=2*(
couÁ
-1);

430 
rg‘C­ac™y
+=
couÁ
;

434 if(
c
!=0) {

440 
úv
->
toUBy‹s
[0]=(
ušt8_t
)(
c
>>8);

441 
úv
->
toUBy‹s
[1]=(
ušt8_t
)
c
;

442 
úv
->
toUL’gth
=2;

444 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

445 if(
Ëngth
>=2) {

446 if(
	`U16_IS_TRAIL
(
Œa
=((
UCh¬
)
sourû
[0]<<8)|source[1])) {

448 
sourû
+=2;

449 
Ëngth
-=2;

450 *
rg‘
++=
c
;

451 if(
off£ts
!=
NULL
) {

452 *
off£ts
++=
sourûIndex
;

454 
úv
->
UCh¬E¼ÜBufãr
[0]=
Œa
;

455 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

456 
úv
->
toUL’gth
=0;

457 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

460 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

467 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

471 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

473 if(
Ëngth
>0) {

474 if(
rg‘C­ac™y
==0) {

475 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

478 
úv
->
toUBy‹s
[úv->
toUL’gth
++]=*
sourû
++;

484 
pArgs
->
sourû
=(const *)source;

485 
pArgs
->
rg‘
=target;

486 
pArgs
->
off£ts
=offsets;

487 
	}
}

489 
UCh¬32


490 
	$_UTF16BEG‘NextUCh¬
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
, 
UE¼ÜCode
 *
”r
) {

491 cÚ¡ 
ušt8_t
 *
s
, *
sourûLim™
;

492 
UCh¬32
 
c
;

494 if(
pArgs
->
cÚv”‹r
->
mode
<8) {

495  
UCNV_GET_NEXT_UCHAR_USE_TO_U
;

498 
s
=(cÚ¡ 
ušt8_t
 *)
pArgs
->
sourû
;

499 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

501 if(
s
>=
sourûLim™
) {

503 *
”r
=
U_INDEX_OUTOFBOUNDS_ERROR
;

507 if(
s
+2>
sourûLim™
) {

509 
pArgs
->
cÚv”‹r
->
toUBy‹s
[0]=*
s
++;

510 
pArgs
->
cÚv”‹r
->
toUL’gth
=1;

511 
pArgs
->
sourû
=(cÚ¡ *)
s
;

512 *
”r
 = 
U_TRUNCATED_CHAR_FOUND
;

517 
c
=((
UCh¬32
)*
s
<<8)|s[1];

518 
s
+=2;

521 if(
	`U_IS_SURROGATE
(
c
)) {

522 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

523 if(
s
+2<=
sourûLim™
) {

524 
UCh¬
 
Œa
;

527 
Œa
=((
UCh¬
)*
s
<<8)|s[1];

528 if(
	`U16_IS_TRAIL
(
Œa
)) {

529 
c
=
	`U16_GET_SUPPLEMENTARY
(c, 
Œa
);

530 
s
+=2;

533 
c
=-2;

537 
ušt8_t
 *
by‹s
=
pArgs
->
cÚv”‹r
->
toUBy‹s
;

538 
s
-=2;

539 
pArgs
->
cÚv”‹r
->
toUL’gth
=(
št8_t
)(
sourûLim™
-
s
);

541 *
by‹s
++=*
s
++;

542 } 
s
<
sourûLim™
);

544 
c
=0xffff;

545 *
”r
=
U_TRUNCATED_CHAR_FOUND
;

549 
c
=-2;

552 if(
c
<0) {

554 
ušt8_t
 *
by‹s
=
pArgs
->
cÚv”‹r
->
toUBy‹s
;

555 
pArgs
->
cÚv”‹r
->
toUL’gth
=2;

556 *
by‹s
=*(
s
-2);

557 
by‹s
[1]=*(
s
-1);

559 
c
=0xffff;

560 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

564 
pArgs
->
sourû
=(cÚ¡ *)
s
;

565  
c
;

566 
	}
}

569 
	$_UTF16BERe£t
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rRe£tChoiû
 
choiû
) {

570 if(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

572 if(
	`UCNV_GET_VERSION
(
úv
)==0) {

573 
úv
->
mode
=8;

575 
úv
->
mode
=0;

578 if(
choiû
!=
UCNV_RESET_TO_UNICODE
 && 
	`UCNV_GET_VERSION
(
úv
)==1) {

580 
úv
->
äomUnicodeStus
=
UCNV_NEED_TO_WRITE_BOM
;

582 
	}
}

585 
	$_UTF16BEO³n
(
UCÚv”‹r
 *
úv
,

586 
UCÚv”‹rLßdArgs
 *
pArgs
,

587 
UE¼ÜCode
 *
pE¼ÜCode
) {

588 if(
	`UCNV_GET_VERSION
(
úv
)<=1) {

589 
	`_UTF16BERe£t
(
úv
, 
UCNV_RESET_BOTH
);

591 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

593 
	}
}

596 
	$_UTF16BEG‘Name
(cÚ¡ 
UCÚv”‹r
 *
úv
) {

597 if(
	`UCNV_GET_VERSION
(
úv
)==0) {

602 
	}
}

604 cÚ¡ 
UCÚv”‹rIm¶
 
	g_UTF16BEIm¶
={

605 
UCNV_UTF16_BigEndŸn
,

607 
NULL
,

608 
NULL
,

610 
_UTF16BEO³n
,

611 
NULL
,

612 
_UTF16BERe£t
,

614 
_UTF16BEToUnicodeW™hOff£ts
,

615 
_UTF16BEToUnicodeW™hOff£ts
,

616 
_UTF16BEFromUnicodeW™hOff£ts
,

617 
_UTF16BEFromUnicodeW™hOff£ts
,

618 
_UTF16BEG‘NextUCh¬
,

620 
NULL
,

621 
_UTF16BEG‘Name
,

622 
NULL
,

623 
NULL
,

624 
uúv_g‘NÚSu¼og©eUnicodeS‘


627 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_UTF16BESticD©a
={

628 (
UCÚv”‹rSticD©a
),

630 1200, 
UCNV_IBM
, 
UCNV_UTF16_BigEndŸn
, 2, 2,

631 { 0xff, 0xfd, 0, 0 },2,
FALSE
,FALSE,

638 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_UTF16BED©a
={

639 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),

640 
NULL
, NULL, &
_UTF16BESticD©a
, 
FALSE
, &
_UTF16BEIm¶
,

647 
	$_UTF16LEFromUnicodeW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

648 
UE¼ÜCode
 *
pE¼ÜCode
) {

649 
UCÚv”‹r
 *
úv
;

650 cÚ¡ 
UCh¬
 *
sourû
;

651 *
rg‘
;

652 
št32_t
 *
off£ts
;

654 
ušt32_t
 
rg‘C­ac™y
, 
Ëngth
, 
sourûIndex
;

655 
UCh¬
 
c
, 
Œa
;

656 
ov”æow
[4];

658 
sourû
=
pArgs
->source;

659 
Ëngth
=(
št32_t
)(
pArgs
->
sourûLim™
-
sourû
);

660 if(
Ëngth
<=0) {

665 
úv
=
pArgs
->
cÚv”‹r
;

668 if(
úv
->
äomUnicodeStus
==
UCNV_NEED_TO_WRITE_BOM
) {

669 cÚ¡ 
bom
[]={ ()0xff, ()0xfe };

670 
	`uúv_äomUWr™eBy‹s
(
úv
,

671 
bom
, 2,

672 &
pArgs
->
rg‘
,…Args->
rg‘Lim™
,

673 &
pArgs
->
off£ts
, -1,

674 
pE¼ÜCode
);

675 
úv
->
äomUnicodeStus
=0;

678 
rg‘
=
pArgs
->target;

679 if(
rg‘
 >ğ
pArgs
->
rg‘Lim™
) {

680 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

684 
rg‘C­ac™y
=(
ušt32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

685 
off£ts
=
pArgs
->offsets;

686 
sourûIndex
=0;

690 if((
c
=(
UCh¬
)
úv
->
äomUCh¬32
)!=0 && 
	`U16_IS_TRAIL
(
Œa
=*
sourû
è&& 
rg‘C­ac™y
>=4) {

692 ++
sourû
;

693 --
Ëngth
;

694 
rg‘
[0]=(
ušt8_t
)
c
;

695 
rg‘
[1]=(
ušt8_t
)(
c
>>8);

696 
rg‘
[2]=(
ušt8_t
)
Œa
;

697 
rg‘
[3]=(
ušt8_t
)(
Œa
>>8);

698 
rg‘
+=4;

699 
rg‘C­ac™y
-=4;

700 if(
off£ts
!=
NULL
) {

701 *
off£ts
++=-1;

702 *
off£ts
++=-1;

703 *
off£ts
++=-1;

704 *
off£ts
++=-1;

706 
sourûIndex
=1;

707 
úv
->
äomUCh¬32
=
c
=0;

710 if(
c
==0) {

712 
ušt32_t
 
couÁ
=2*
Ëngth
;

713 if(
couÁ
>
rg‘C­ac™y
) {

714 
couÁ
=
rg‘C­ac™y
&~1;

717 
rg‘C­ac™y
-=
couÁ
;

718 
couÁ
>>=1;

719 
Ëngth
-=
couÁ
;

721 if(
off£ts
==
NULL
) {

722 
couÁ
>0) {

723 
c
=*
sourû
++;

724 if(
	`U16_IS_SINGLE
(
c
)) {

725 
rg‘
[0]=(
ušt8_t
)
c
;

726 
rg‘
[1]=(
ušt8_t
)(
c
>>8);

727 
rg‘
+=2;

728 } if(
	`U16_IS_SURROGATE_LEAD
(
c
è&& 
couÁ
>=2 && 
	`U16_IS_TRAIL
(
Œa
=*
sourû
)) {

729 ++
sourû
;

730 --
couÁ
;

731 
rg‘
[0]=(
ušt8_t
)
c
;

732 
rg‘
[1]=(
ušt8_t
)(
c
>>8);

733 
rg‘
[2]=(
ušt8_t
)
Œa
;

734 
rg‘
[3]=(
ušt8_t
)(
Œa
>>8);

735 
rg‘
+=4;

739 --
couÁ
;

742 
couÁ
>0) {

743 
c
=*
sourû
++;

744 if(
	`U16_IS_SINGLE
(
c
)) {

745 
rg‘
[0]=(
ušt8_t
)
c
;

746 
rg‘
[1]=(
ušt8_t
)(
c
>>8);

747 
rg‘
+=2;

748 *
off£ts
++=
sourûIndex
;

749 *
off£ts
++=
sourûIndex
++;

750 } if(
	`U16_IS_SURROGATE_LEAD
(
c
è&& 
couÁ
>=2 && 
	`U16_IS_TRAIL
(
Œa
=*
sourû
)) {

751 ++
sourû
;

752 --
couÁ
;

753 
rg‘
[0]=(
ušt8_t
)
c
;

754 
rg‘
[1]=(
ušt8_t
)(
c
>>8);

755 
rg‘
[2]=(
ušt8_t
)
Œa
;

756 
rg‘
[3]=(
ušt8_t
)(
Œa
>>8);

757 
rg‘
+=4;

758 *
off£ts
++=
sourûIndex
;

759 *
off£ts
++=
sourûIndex
;

760 *
off£ts
++=
sourûIndex
;

761 *
off£ts
++=
sourûIndex
;

762 
sourûIndex
+=2;

766 --
couÁ
;

770 if(
couÁ
==0) {

772 if(
Ëngth
>0 && 
rg‘C­ac™y
>0) {

779 if(
	`U16_IS_SINGLE
(
c
=*
sourû
++)) {

780 
ov”æow
[0]=()
c
;

781 
ov”æow
[1]=()(
c
>>8);

782 
Ëngth
=2;

783 
c
=0;

787 
Ëngth
=0;

788 
c
=0;

792 
rg‘C­ac™y
+=2*
couÁ
;

795 
Ëngth
=0;

798 if(
c
!=0) {

804 
Ëngth
=0;

805 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

806 if(
sourû
<
pArgs
->
sourûLim™
) {

807 if(
	`U16_IS_TRAIL
(
Œa
=*
sourû
)) {

809 ++
sourû
;

810 
ov”æow
[0]=()
c
;

811 
ov”æow
[1]=()(
c
>>8);

812 
ov”æow
[2]=()
Œa
;

813 
ov”æow
[3]=()(
Œa
>>8);

814 
Ëngth
=4;

815 
c
=0;

818 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

825 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

827 
úv
->
äomUCh¬32
=
c
;

830 if(
Ëngth
>0) {

832 
	`uúv_äomUWr™eBy‹s
(
úv
,

833 
ov”æow
, 
Ëngth
,

834 &
rg‘
, 
pArgs
->
rg‘Lim™
,

835 &
off£ts
, 
sourûIndex
,

836 
pE¼ÜCode
);

837 
rg‘C­ac™y
=(
ušt32_t
)(
pArgs
->
rg‘Lim™
-(*)
rg‘
);

840 if(
	`U_SUCCESS
(*
pE¼ÜCode
è&& 
sourû
<
pArgs
->
sourûLim™
 && 
rg‘C­ac™y
==0) {

841 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

845 
pArgs
->
sourû
=source;

846 
pArgs
->
rg‘
=target;

847 
pArgs
->
off£ts
=offsets;

848 
	}
}

851 
	$_UTF16LEToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

852 
UE¼ÜCode
 *
pE¼ÜCode
) {

853 
UCÚv”‹r
 *
úv
;

854 cÚ¡ 
ušt8_t
 *
sourû
;

855 
UCh¬
 *
rg‘
;

856 
št32_t
 *
off£ts
;

858 
ušt32_t
 
rg‘C­ac™y
, 
Ëngth
, 
couÁ
, 
sourûIndex
;

859 
UCh¬
 
c
, 
Œa
;

861 if(
pArgs
->
cÚv”‹r
->
mode
<8) {

862 
	`_UTF16ToUnicodeW™hOff£ts
(
pArgs
, 
pE¼ÜCode
);

866 
úv
=
pArgs
->
cÚv”‹r
;

867 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

868 
Ëngth
=(
št32_t
)((cÚ¡ 
ušt8_t
 *)
pArgs
->
sourûLim™
-
sourû
);

869 if(
Ëngth
<=0 && 
úv
->
toUnicodeStus
==0) {

874 
rg‘
=
pArgs
->target;

875 if(
rg‘
 >ğ
pArgs
->
rg‘Lim™
) {

876 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

880 
rg‘C­ac™y
=(
ušt32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

881 
off£ts
=
pArgs
->offsets;

882 
sourûIndex
=0;

883 
c
=0;

886 if(
úv
->
toUnicodeStus
!=0) {

893 
úv
->
toUBy‹s
[0]=(
ušt8_t
)úv->
toUnicodeStus
;

894 
úv
->
toUL’gth
=1;

895 
úv
->
toUnicodeStus
=0;

897 if((
couÁ
=
úv
->
toUL’gth
)!=0) {

898 
ušt8_t
 *
p
=
úv
->
toUBy‹s
;

900 
p
[
couÁ
++]=*
sourû
++;

901 ++
sourûIndex
;

902 --
Ëngth
;

903 if(
couÁ
==2) {

904 
c
=((
UCh¬
)
p
[1]<<8)|p[0];

905 if(
	`U16_IS_SINGLE
(
c
)) {

907 *
rg‘
++=
c
;

908 if(
off£ts
!=
NULL
) {

909 *
off£ts
++=-1;

911 --
rg‘C­ac™y
;

912 
couÁ
=0;

913 
c
=0;

915 } if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

917 
c
=0;

922 } if(
couÁ
==4) {

923 
c
=((
UCh¬
)
p
[1]<<8)|p[0];

924 
Œa
=((
UCh¬
)
p
[3]<<8)|p[2];

925 if(
	`U16_IS_TRAIL
(
Œa
)) {

927 *
rg‘
++=
c
;

928 if(
rg‘C­ac™y
>=2) {

929 *
rg‘
++=
Œa
;

930 if(
off£ts
!=
NULL
) {

931 *
off£ts
++=-1;

932 *
off£ts
++=-1;

934 
rg‘C­ac™y
-=2;

936 
rg‘C­ac™y
=0;

937 
úv
->
UCh¬E¼ÜBufãr
[0]=
Œa
;

938 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

939 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

941 
couÁ
=0;

942 
c
=0;

946 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

949 if(((cÚ¡ 
ušt8_t
 *)
pArgs
->
sourû
-source)>=2) {

950 
sourû
-=2;

957 
úv
->
toUnicodeStus
=0x100|
p
[2];

958 --
sourû
;

960 
úv
->
toUL’gth
=2;

963 
pArgs
->
sourû
=(const *)source;

964 
pArgs
->
rg‘
=target;

965 
pArgs
->
off£ts
=offsets;

969 } 
Ëngth
>0);

970 
úv
->
toUL’gth
=(
št8_t
)
couÁ
;

974 
couÁ
=2*
rg‘C­ac™y
;

975 if(
couÁ
>
Ëngth
) {

976 
couÁ
=
Ëngth
&~1;

978 if(
c
==0 && 
couÁ
>0) {

979 
Ëngth
-=
couÁ
;

980 
couÁ
>>=1;

981 
rg‘C­ac™y
-=
couÁ
;

982 if(
off£ts
==
NULL
) {

984 
c
=((
UCh¬
)
sourû
[1]<<8)|source[0];

985 
sourû
+=2;

986 if(
	`U16_IS_SINGLE
(
c
)) {

987 *
rg‘
++=
c
;

988 } if(
	`U16_IS_SURROGATE_LEAD
(
c
è&& 
couÁ
>=2 &&

989 
	`U16_IS_TRAIL
(
Œa
=((
UCh¬
)
sourû
[1]<<8)|source[0])

991 
sourû
+=2;

992 --
couÁ
;

993 *
rg‘
++=
c
;

994 *
rg‘
++=
Œa
;

998 } --
couÁ
>0);

1001 
c
=((
UCh¬
)
sourû
[1]<<8)|source[0];

1002 
sourû
+=2;

1003 if(
	`U16_IS_SINGLE
(
c
)) {

1004 *
rg‘
++=
c
;

1005 *
off£ts
++=
sourûIndex
;

1006 
sourûIndex
+=2;

1007 } if(
	`U16_IS_SURROGATE_LEAD
(
c
è&& 
couÁ
>=2 &&

1008 
	`U16_IS_TRAIL
(
Œa
=((
UCh¬
)
sourû
[1]<<8)|source[0])

1010 
sourû
+=2;

1011 --
couÁ
;

1012 *
rg‘
++=
c
;

1013 *
rg‘
++=
Œa
;

1014 *
off£ts
++=
sourûIndex
;

1015 *
off£ts
++=
sourûIndex
;

1016 
sourûIndex
+=4;

1020 } --
couÁ
>0);

1023 if(
couÁ
==0) {

1025 
c
=0;

1028 
Ëngth
+=2*(
couÁ
-1);

1029 
rg‘C­ac™y
+=
couÁ
;

1033 if(
c
!=0) {

1039 
úv
->
toUBy‹s
[0]=(
ušt8_t
)
c
;

1040 
úv
->
toUBy‹s
[1]=(
ušt8_t
)(
c
>>8);

1041 
úv
->
toUL’gth
=2;

1043 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

1044 if(
Ëngth
>=2) {

1045 if(
	`U16_IS_TRAIL
(
Œa
=((
UCh¬
)
sourû
[1]<<8)|source[0])) {

1047 
sourû
+=2;

1048 
Ëngth
-=2;

1049 *
rg‘
++=
c
;

1050 if(
off£ts
!=
NULL
) {

1051 *
off£ts
++=
sourûIndex
;

1053 
úv
->
UCh¬E¼ÜBufãr
[0]=
Œa
;

1054 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

1055 
úv
->
toUL’gth
=0;

1056 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1059 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1066 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1070 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

1072 if(
Ëngth
>0) {

1073 if(
rg‘C­ac™y
==0) {

1074 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1077 
úv
->
toUBy‹s
[úv->
toUL’gth
++]=*
sourû
++;

1083 
pArgs
->
sourû
=(const *)source;

1084 
pArgs
->
rg‘
=target;

1085 
pArgs
->
off£ts
=offsets;

1086 
	}
}

1088 
UCh¬32


1089 
	$_UTF16LEG‘NextUCh¬
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
, 
UE¼ÜCode
 *
”r
) {

1090 cÚ¡ 
ušt8_t
 *
s
, *
sourûLim™
;

1091 
UCh¬32
 
c
;

1093 if(
pArgs
->
cÚv”‹r
->
mode
<8) {

1094  
UCNV_GET_NEXT_UCHAR_USE_TO_U
;

1097 
s
=(cÚ¡ 
ušt8_t
 *)
pArgs
->
sourû
;

1098 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

1100 if(
s
>=
sourûLim™
) {

1102 *
”r
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1106 if(
s
+2>
sourûLim™
) {

1108 
pArgs
->
cÚv”‹r
->
toUBy‹s
[0]=*
s
++;

1109 
pArgs
->
cÚv”‹r
->
toUL’gth
=1;

1110 
pArgs
->
sourû
=(cÚ¡ *)
s
;

1111 *
”r
 = 
U_TRUNCATED_CHAR_FOUND
;

1116 
c
=((
UCh¬32
)
s
[1]<<8)|*s;

1117 
s
+=2;

1120 if(
	`U_IS_SURROGATE
(
c
)) {

1121 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) {

1122 if(
s
+2<=
sourûLim™
) {

1123 
UCh¬
 
Œa
;

1126 
Œa
=((
UCh¬
)
s
[1]<<8)|*s;

1127 if(
	`U16_IS_TRAIL
(
Œa
)) {

1128 
c
=
	`U16_GET_SUPPLEMENTARY
(c, 
Œa
);

1129 
s
+=2;

1132 
c
=-2;

1136 
ušt8_t
 *
by‹s
=
pArgs
->
cÚv”‹r
->
toUBy‹s
;

1137 
s
-=2;

1138 
pArgs
->
cÚv”‹r
->
toUL’gth
=(
št8_t
)(
sourûLim™
-
s
);

1140 *
by‹s
++=*
s
++;

1141 } 
s
<
sourûLim™
);

1143 
c
=0xffff;

1144 *
”r
=
U_TRUNCATED_CHAR_FOUND
;

1148 
c
=-2;

1151 if(
c
<0) {

1153 
ušt8_t
 *
by‹s
=
pArgs
->
cÚv”‹r
->
toUBy‹s
;

1154 
pArgs
->
cÚv”‹r
->
toUL’gth
=2;

1155 *
by‹s
=*(
s
-2);

1156 
by‹s
[1]=*(
s
-1);

1158 
c
=0xffff;

1159 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

1163 
pArgs
->
sourû
=(cÚ¡ *)
s
;

1164  
c
;

1165 
	}
}

1168 
	$_UTF16LERe£t
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rRe£tChoiû
 
choiû
) {

1169 if(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

1171 if(
	`UCNV_GET_VERSION
(
úv
)==0) {

1172 
úv
->
mode
=8;

1174 
úv
->
mode
=0;

1177 if(
choiû
!=
UCNV_RESET_TO_UNICODE
 && 
	`UCNV_GET_VERSION
(
úv
)==1) {

1179 
úv
->
äomUnicodeStus
=
UCNV_NEED_TO_WRITE_BOM
;

1181 
	}
}

1184 
	$_UTF16LEO³n
(
UCÚv”‹r
 *
úv
,

1185 
UCÚv”‹rLßdArgs
 *
pArgs
,

1186 
UE¼ÜCode
 *
pE¼ÜCode
) {

1187 if(
	`UCNV_GET_VERSION
(
úv
)<=1) {

1188 
	`_UTF16LERe£t
(
úv
, 
UCNV_RESET_BOTH
);

1190 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1192 
	}
}

1195 
	$_UTF16LEG‘Name
(cÚ¡ 
UCÚv”‹r
 *
úv
) {

1196 if(
	`UCNV_GET_VERSION
(
úv
)==0) {

1201 
	}
}

1203 cÚ¡ 
UCÚv”‹rIm¶
 
	g_UTF16LEIm¶
={

1204 
UCNV_UTF16_L™eEndŸn
,

1206 
NULL
,

1207 
NULL
,

1209 
_UTF16LEO³n
,

1210 
NULL
,

1211 
_UTF16LERe£t
,

1213 
_UTF16LEToUnicodeW™hOff£ts
,

1214 
_UTF16LEToUnicodeW™hOff£ts
,

1215 
_UTF16LEFromUnicodeW™hOff£ts
,

1216 
_UTF16LEFromUnicodeW™hOff£ts
,

1217 
_UTF16LEG‘NextUCh¬
,

1219 
NULL
,

1220 
_UTF16LEG‘Name
,

1221 
NULL
,

1222 
NULL
,

1223 
uúv_g‘NÚSu¼og©eUnicodeS‘


1227 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_UTF16LESticD©a
={

1228 (
UCÚv”‹rSticD©a
),

1230 1202, 
UCNV_IBM
, 
UCNV_UTF16_L™eEndŸn
, 2, 2,

1231 { 0xfd, 0xff, 0, 0 },2,
FALSE
,FALSE,

1238 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_UTF16LED©a
={

1239 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),

1240 
NULL
, NULL, &
_UTF16LESticD©a
, 
FALSE
, &
_UTF16LEIm¶
,

1271 
	$_UTF16Re£t
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rRe£tChoiû
 
choiû
) {

1272 if(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

1274 
úv
->
mode
=0;

1276 if(
choiû
!=
UCNV_RESET_TO_UNICODE
) {

1278 
úv
->
äomUnicodeStus
=
UCNV_NEED_TO_WRITE_BOM
;

1280 
	}
}

1282 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_UTF16v2D©a
;

1285 
	$_UTF16O³n
(
UCÚv”‹r
 *
úv
,

1286 
UCÚv”‹rLßdArgs
 *
pArgs
,

1287 
UE¼ÜCode
 *
pE¼ÜCode
) {

1288 if(
	`UCNV_GET_VERSION
(
úv
)<=2) {

1289 if(
	`UCNV_GET_VERSION
(
úv
)==2 && !
pArgs
->
ÚlyTe¡IsLßdabË
) {

1296 
úv
->
sh¬edD©a
=(
UCÚv”‹rSh¬edD©a
*)&
_UTF16v2D©a
;

1297 
	`u´v_memıy
(
úv
->
subCh¬s
, 
_UTF16v2D©a
.
¡©icD©a
->
subCh¬
, 
UCNV_MAX_SUBCHAR_LEN
);

1299 
	`_UTF16Re£t
(
úv
, 
UCNV_RESET_BOTH
);

1301 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1303 
	}
}

1306 
	$_UTF16G‘Name
(cÚ¡ 
UCÚv”‹r
 *
úv
) {

1307 if(
	`UCNV_GET_VERSION
(
úv
)==0) {

1309 } if(
	`UCNV_GET_VERSION
(
úv
)==1) {

1314 
	}
}

1316 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_UTF16D©a
;

1318 
	#IS_UTF16BE
(
úv
è((úv)->
sh¬edD©a
==&
_UTF16BED©a
)

	)

1319 
	#IS_UTF16LE
(
úv
è((úv)->
sh¬edD©a
==&
_UTF16LED©a
)

	)

1320 
	#IS_UTF16
(
úv
è((úv)->
sh¬edD©a
==&
_UTF16D©a
 || (úv)->sh¬edD©a==&
_UTF16v2D©a
)

	)

1323 
	$_UTF16ToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

1324 
UE¼ÜCode
 *
pE¼ÜCode
) {

1325 
UCÚv”‹r
 *
úv
=
pArgs
->
cÚv”‹r
;

1326 cÚ¡ *
sourû
=
pArgs
->source;

1327 cÚ¡ *
sourûLim™
=
pArgs
->sourceLimit;

1328 
št32_t
 *
off£ts
=
pArgs
->offsets;

1330 
št32_t
 
¡©e
, 
off£tD–
;

1331 
ušt8_t
 
b
;

1333 
¡©e
=
úv
->
mode
;

1340 
off£tD–
=0;

1342 
sourû
<
sourûLim™
 && 
	`U_SUCCESS
(*
pE¼ÜCode
)) {

1343 
¡©e
) {

1345 
úv
->
toUBy‹s
[0]=(
ušt8_t
)*
sourû
++;

1346 
úv
->
toUL’gth
=1;

1347 
¡©e
=1;

1356 
b
=*
sourû
;

1357 if(
úv
->
toUBy‹s
[0]==0xã && 
b
==0xff) {

1358 if(
	`IS_UTF16LE
(
úv
)) {

1359 
¡©e
=7;

1361 
¡©e
=8;

1363 } if(
úv
->
toUBy‹s
[0]==0xfà&& 
b
==0xfe) {

1364 if(
	`IS_UTF16BE
(
úv
)) {

1365 
¡©e
=6;

1367 
¡©e
=9;

1369 } if((
	`IS_UTF16
(
úv
è&& 
	`UCNV_GET_VERSION
(cnv)==1)) {

1370 
¡©e
=6;

1372 if(
¡©e
>=8) {

1374 ++
sourû
;

1375 
úv
->
toUL’gth
=0;

1376 
off£tD–
=(
št32_t
)(
sourû
-
pArgs
->source);

1377 } if(
¡©e
<6) {

1379 if(
sourû
!=
pArgs
->source) {

1381 
sourû
=
pArgs
->source;

1382 
úv
->
toUL’gth
=0;

1384 if(
	`IS_UTF16LE
(
úv
)) {

1386 
¡©e
=9;

1389 
¡©e
=8;

1399 
úv
->
toUBy‹s
[1]=
b
;

1400 
úv
->
toUL’gth
=2;

1401 
pArgs
->
sourû
=source+1;

1408 
úv
->
mode
=
¡©e
+2;

1409 *
pE¼ÜCode
=
U_ILLEGAL_ESCAPE_SEQUENCE
;

1413 
úv
->
mode
=
¡©e
;

1417 
pArgs
->
sourû
=source;

1418 
	`_UTF16BEToUnicodeW™hOff£ts
(
pArgs
, 
pE¼ÜCode
);

1419 
sourû
=
pArgs
->source;

1423 
pArgs
->
sourû
=source;

1424 
	`_UTF16LEToUnicodeW™hOff£ts
(
pArgs
, 
pE¼ÜCode
);

1425 
sourû
=
pArgs
->source;

1433 if(
off£ts
!=
NULL
 && 
off£tD–
!=0) {

1434 
št32_t
 *
off£tsLim™
=
pArgs
->
off£ts
;

1435 
off£ts
<
off£tsLim™
) {

1436 *
off£ts
++ +ğ
off£tD–
;

1440 
pArgs
->
sourû
=source;

1442 if(
sourû
==
sourûLim™
 && 
pArgs
->
æush
) {

1444 
¡©e
) {

1448 
	`_UTF16BEToUnicodeW™hOff£ts
(
pArgs
, 
pE¼ÜCode
);

1451 
	`_UTF16LEToUnicodeW™hOff£ts
(
pArgs
, 
pE¼ÜCode
);

1459 
úv
->
mode
=
¡©e
;

1460 
	}
}

1462 
UCh¬32


1463 
	$_UTF16G‘NextUCh¬
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

1464 
UE¼ÜCode
 *
pE¼ÜCode
) {

1465 
pArgs
->
cÚv”‹r
->
mode
) {

1467  
	`_UTF16BEG‘NextUCh¬
(
pArgs
, 
pE¼ÜCode
);

1469  
	`_UTF16LEG‘NextUCh¬
(
pArgs
, 
pE¼ÜCode
);

1471  
UCNV_GET_NEXT_UCHAR_USE_TO_U
;

1473 
	}
}

1475 cÚ¡ 
UCÚv”‹rIm¶
 
	g_UTF16Im¶
 = {

1476 
UCNV_UTF16
,

1478 
NULL
,

1479 
NULL
,

1481 
_UTF16O³n
,

1482 
NULL
,

1483 
_UTF16Re£t
,

1485 
_UTF16ToUnicodeW™hOff£ts
,

1486 
_UTF16ToUnicodeW™hOff£ts
,

1487 
_UTF16PEFromUnicodeW™hOff£ts
,

1488 
_UTF16PEFromUnicodeW™hOff£ts
,

1489 
_UTF16G‘NextUCh¬
,

1491 
NULL
,

1492 
_UTF16G‘Name
,

1493 
NULL
,

1494 
NULL
,

1495 
uúv_g‘NÚSu¼og©eUnicodeS‘


1498 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_UTF16SticD©a
 = {

1499 (
UCÚv”‹rSticD©a
),

1502 
UCNV_IBM
, 
UCNV_UTF16
, 2, 2,

1503 #ià
U_IS_BIG_ENDIAN


1508 
FALSE
, FALSE,

1514 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_UTF16D©a
 = {

1515 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),

1516 
NULL
, NULL, &
_UTF16SticD©a
, 
FALSE
, &
_UTF16Im¶
,

1520 cÚ¡ 
UCÚv”‹rIm¶
 
	g_UTF16v2Im¶
 = {

1521 
UCNV_UTF16
,

1523 
NULL
,

1524 
NULL
,

1526 
_UTF16O³n
,

1527 
NULL
,

1528 
_UTF16Re£t
,

1530 
_UTF16ToUnicodeW™hOff£ts
,

1531 
_UTF16ToUnicodeW™hOff£ts
,

1532 
_UTF16BEFromUnicodeW™hOff£ts
,

1533 
_UTF16BEFromUnicodeW™hOff£ts
,

1534 
_UTF16G‘NextUCh¬
,

1536 
NULL
,

1537 
_UTF16G‘Name
,

1538 
NULL
,

1539 
NULL
,

1540 
uúv_g‘NÚSu¼og©eUnicodeS‘


1543 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_UTF16v2SticD©a
 = {

1544 (
UCÚv”‹rSticD©a
),

1547 
UCNV_IBM
, 
UCNV_UTF16
, 2, 2,

1549 
FALSE
, FALSE,

1555 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_UTF16v2D©a
 = {

1556 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),

1557 
NULL
, NULL, &
_UTF16v2SticD©a
, 
FALSE
, &
_UTF16v2Im¶
,

	@ucnv_u32.c

17 
	~"unicode/uty³s.h
"

19 #ià!
UCONFIG_NO_CONVERSION


21 
	~"unicode/uúv.h
"

22 
	~"uúv_bld.h
"

23 
	~"uúv_úv.h
"

24 
	~"cmemÜy.h
"

26 
	#MAXIMUM_UCS2
 0x0000FFFF

	)

27 
	#MAXIMUM_UTF
 0x0010FFFF

	)

28 
	#HALF_SHIFT
 10

	)

29 
	#HALF_BASE
 0x0010000

	)

30 
	#HALF_MASK
 0x3FF

	)

31 
	#SURROGATE_HIGH_START
 0xD800

	)

32 
	#SURROGATE_LOW_START
 0xDC00

	)

35 
	#SURROGATE_LOW_BASE
 9216

	)

38 
	mUCNV_NEED_TO_WRITE_BOM
=1

44 
	$T_UCÚv”‹r_toUnicode_UTF32_BE
(
UCÚv”‹rToUnicodeArgs
 * 
¬gs
,

45 
UE¼ÜCode
 * 
”r
)

47 cÚ¡ *
mySourû
 = (*è
¬gs
->
sourû
;

48 
UCh¬
 *
myT¬g‘
 = 
¬gs
->
rg‘
;

49 cÚ¡ *
sourûLim™
 = (*è
¬gs
->sourceLimit;

50 cÚ¡ 
UCh¬
 *
rg‘Lim™
 = 
¬gs
->targetLimit;

51 *
toUBy‹s
 = 
¬gs
->
cÚv”‹r
->toUBytes;

52 
ušt32_t
 
ch
, 
i
;

55 ià(
¬gs
->
cÚv”‹r
->
toUnicodeStus
 && 
myT¬g‘
 < 
rg‘Lim™
) {

56 
i
 = 
¬gs
->
cÚv”‹r
->
toUL’gth
;

57 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 0;

59 
ch
 = 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 - 1;

60 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 = 0;

61 
mÜeby‹s
;

64 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
) {

65 
i
 = 0;

66 
ch
 = 0;

67 
mÜeby‹s
:

68 
i
 < (
ušt32_t
)) {

69 ià(
mySourû
 < 
sourûLim™
) {

70 
ch
 = (ch << 8è| (
ušt8_t
)(*
mySourû
);

71 
toUBy‹s
[
i
++] = (è*(
mySourû
++);

76 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 = 
ch
 + 1;

77 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
è
i
;

78 
dÚefÜnow
;

82 ià(
ch
 <ğ
MAXIMUM_UTF
 && !
	`U_IS_SURROGATE
(ch)) {

84 ià(
ch
 <ğ
MAXIMUM_UCS2
)

87 *(
myT¬g‘
++èğ(
UCh¬
è
ch
;

91 *(
myT¬g‘
++èğ
	`U16_LEAD
(
ch
);

92 
ch
 = 
	`U16_TRAIL
(ch);

93 ià(
myT¬g‘
 < 
rg‘Lim™
) {

94 *(
myT¬g‘
++èğ(
UCh¬
)
ch
;

98 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãr
[0] = (
UCh¬
è
ch
;

99 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãrL’gth
 = 1;

100 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

106 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
)
i
;

107 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

112 
dÚefÜnow
:

113 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
)) {

115 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

118 
¬gs
->
rg‘
 = 
myT¬g‘
;

119 
¬gs
->
sourû
 = (cÚ¡ *è
mySourû
;

120 
	}
}

123 
	$T_UCÚv”‹r_toUnicode_UTF32_BE_OFFSET_LOGIC
(
UCÚv”‹rToUnicodeArgs
 * 
¬gs
,

124 
UE¼ÜCode
 * 
”r
)

126 cÚ¡ *
mySourû
 = (*è
¬gs
->
sourû
;

127 
UCh¬
 *
myT¬g‘
 = 
¬gs
->
rg‘
;

128 
št32_t
 *
myOff£ts
 = 
¬gs
->
off£ts
;

129 cÚ¡ *
sourûLim™
 = (*è
¬gs
->sourceLimit;

130 cÚ¡ 
UCh¬
 *
rg‘Lim™
 = 
¬gs
->targetLimit;

131 *
toUBy‹s
 = 
¬gs
->
cÚv”‹r
->toUBytes;

132 
ušt32_t
 
ch
, 
i
;

133 
št32_t
 
off£tNum
 = 0;

136 ià(
¬gs
->
cÚv”‹r
->
toUnicodeStus
 && 
myT¬g‘
 < 
rg‘Lim™
) {

137 
i
 = 
¬gs
->
cÚv”‹r
->
toUL’gth
;

138 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 0;

140 
ch
 = 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 - 1;

141 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 = 0;

142 
mÜeby‹s
;

145 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
) {

146 
i
 = 0;

147 
ch
 = 0;

148 
mÜeby‹s
:

149 
i
 < (
ušt32_t
)) {

150 ià(
mySourû
 < 
sourûLim™
) {

151 
ch
 = (ch << 8è| (
ušt8_t
)(*
mySourû
);

152 
toUBy‹s
[
i
++] = (è*(
mySourû
++);

157 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 = 
ch
 + 1;

158 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
è
i
;

159 
dÚefÜnow
;

163 ià(
ch
 <ğ
MAXIMUM_UTF
 && !
	`U_IS_SURROGATE
(ch)) {

165 ià(
ch
 <ğ
MAXIMUM_UCS2
) {

167 *(
myT¬g‘
++èğ(
UCh¬
è
ch
;

168 *(
myOff£ts
++èğ
off£tNum
;

172 *(
myT¬g‘
++èğ
	`U16_LEAD
(
ch
);

173 *
myOff£ts
++ = 
off£tNum
;

174 
ch
 = 
	`U16_TRAIL
(ch);

175 ià(
myT¬g‘
 < 
rg‘Lim™
)

177 *(
myT¬g‘
++èğ(
UCh¬
)
ch
;

178 *(
myOff£ts
++èğ
off£tNum
;

182 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãr
[0] = (
UCh¬
è
ch
;

183 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãrL’gth
 = 1;

184 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

190 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
)
i
;

191 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

194 
off£tNum
 +ğ
i
;

197 
dÚefÜnow
:

198 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
))

201 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

204 
¬gs
->
rg‘
 = 
myT¬g‘
;

205 
¬gs
->
sourû
 = (cÚ¡ *è
mySourû
;

206 
¬gs
->
off£ts
 = 
myOff£ts
;

207 
	}
}

210 
	$T_UCÚv”‹r_äomUnicode_UTF32_BE
(
UCÚv”‹rFromUnicodeArgs
 * 
¬gs
,

211 
UE¼ÜCode
 * 
”r
)

213 cÚ¡ 
UCh¬
 *
mySourû
 = 
¬gs
->
sourû
;

214 *
myT¬g‘
;

215 cÚ¡ 
UCh¬
 *
sourûLim™
 = 
¬gs
->sourceLimit;

216 cÚ¡ *
rg‘Lim™
 = (*è
¬gs
->targetLimit;

217 
UCh¬32
 
ch
, 
ch2
;

218 
šdexToWr™e
;

219 
‹mp
[(
ušt32_t
)];

221 if(
mySourû
 >ğ
sourûLim™
) {

227 if(
¬gs
->
cÚv”‹r
->
äomUnicodeStus
==
UCNV_NEED_TO_WRITE_BOM
) {

228 cÚ¡ 
bom
[]={ 0, 0, ()0xfe, ()0xff };

229 
	`uúv_äomUWr™eBy‹s
(
¬gs
->
cÚv”‹r
,

230 
bom
, 4,

231 &
¬gs
->
rg‘
,‡rgs->
rg‘Lim™
,

232 &
¬gs
->
off£ts
, -1,

233 
”r
);

234 
¬gs
->
cÚv”‹r
->
äomUnicodeStus
=0;

237 
myT¬g‘
 = (*è
¬gs
->
rg‘
;

238 
‹mp
[0] = 0;

240 ià(
¬gs
->
cÚv”‹r
->
äomUCh¬32
) {

241 
ch
 = 
¬gs
->
cÚv”‹r
->
äomUCh¬32
;

242 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 0;

243 
lowsurog©e
;

246 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
) {

247 
ch
 = *(
mySourû
++);

249 ià(
	`UTF_IS_SURROGATE
(
ch
)) {

250 ià(
	`U_IS_LEAD
(
ch
)) {

251 
lowsurog©e
:

252 ià(
mySourû
 < 
sourûLim™
) {

253 
ch2
 = *
mySourû
;

254 ià(
	`U_IS_TRAIL
(
ch2
)) {

255 
ch
 = ((ch - 
SURROGATE_HIGH_START
è<< 
HALF_SHIFT
è+ 
ch2
 + 
SURROGATE_LOW_BASE
;

256 
mySourû
++;

261 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

262 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

268 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

269 ià(
¬gs
->
æush
) {

272 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

280 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

281 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

287 
‹mp
[1] = (
ušt8_t
è(
ch
 >> 16 & 0x1F);

288 
‹mp
[2] = (
ušt8_t
è(
ch
 >> 8);

289 
‹mp
[3] = (
ušt8_t
è(
ch
);

291 
šdexToWr™e
 = 0; indexToWr™<ğ(
ušt32_t
) - 1; indexToWrite++) {

292 ià(
myT¬g‘
 < 
rg‘Lim™
) {

293 *(
myT¬g‘
++èğ
‹mp
[
šdexToWr™e
];

296 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = 
‹mp
[
šdexToWr™e
];

297 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

302 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
)) {

303 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

306 
¬gs
->
rg‘
 = (*è
myT¬g‘
;

307 
¬gs
->
sourû
 = 
mySourû
;

308 
	}
}

311 
	$T_UCÚv”‹r_äomUnicode_UTF32_BE_OFFSET_LOGIC
(
UCÚv”‹rFromUnicodeArgs
 * 
¬gs
,

312 
UE¼ÜCode
 * 
”r
)

314 cÚ¡ 
UCh¬
 *
mySourû
 = 
¬gs
->
sourû
;

315 *
myT¬g‘
;

316 
št32_t
 *
myOff£ts
;

317 cÚ¡ 
UCh¬
 *
sourûLim™
 = 
¬gs
->sourceLimit;

318 cÚ¡ *
rg‘Lim™
 = (*è
¬gs
->targetLimit;

319 
UCh¬32
 
ch
, 
ch2
;

320 
št32_t
 
off£tNum
 = 0;

321 
šdexToWr™e
;

322 
‹mp
[(
ušt32_t
)];

324 if(
mySourû
 >ğ
sourûLim™
) {

330 if(
¬gs
->
cÚv”‹r
->
äomUnicodeStus
==
UCNV_NEED_TO_WRITE_BOM
) {

331 cÚ¡ 
bom
[]={ 0, 0, ()0xfe, ()0xff };

332 
	`uúv_äomUWr™eBy‹s
(
¬gs
->
cÚv”‹r
,

333 
bom
, 4,

334 &
¬gs
->
rg‘
,‡rgs->
rg‘Lim™
,

335 &
¬gs
->
off£ts
, -1,

336 
”r
);

337 
¬gs
->
cÚv”‹r
->
äomUnicodeStus
=0;

340 
myT¬g‘
 = (*è
¬gs
->
rg‘
;

341 
myOff£ts
 = 
¬gs
->
off£ts
;

342 
‹mp
[0] = 0;

344 ià(
¬gs
->
cÚv”‹r
->
äomUCh¬32
) {

345 
ch
 = 
¬gs
->
cÚv”‹r
->
äomUCh¬32
;

346 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 0;

347 
lowsurog©e
;

350 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
) {

351 
ch
 = *(
mySourû
++);

353 ià(
	`UTF_IS_SURROGATE
(
ch
)) {

354 ià(
	`U_IS_LEAD
(
ch
)) {

355 
lowsurog©e
:

356 ià(
mySourû
 < 
sourûLim™
) {

357 
ch2
 = *
mySourû
;

358 ià(
	`U_IS_TRAIL
(
ch2
)) {

359 
ch
 = ((ch - 
SURROGATE_HIGH_START
è<< 
HALF_SHIFT
è+ 
ch2
 + 
SURROGATE_LOW_BASE
;

360 
mySourû
++;

365 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

366 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

372 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

373 ià(
¬gs
->
æush
) {

376 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

384 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

385 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

391 
‹mp
[1] = (
ušt8_t
è(
ch
 >> 16 & 0x1F);

392 
‹mp
[2] = (
ušt8_t
è(
ch
 >> 8);

393 
‹mp
[3] = (
ušt8_t
è(
ch
);

395 
šdexToWr™e
 = 0; indexToWr™<ğ(
ušt32_t
) - 1; indexToWrite++) {

396 ià(
myT¬g‘
 < 
rg‘Lim™
) {

397 *(
myT¬g‘
++èğ
‹mp
[
šdexToWr™e
];

398 *(
myOff£ts
++èğ
off£tNum
;

401 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = 
‹mp
[
šdexToWr™e
];

402 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

405 
off£tNum
 = off£tNum + 1 + (
‹mp
[1] != 0);

408 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
)) {

409 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

412 
¬gs
->
rg‘
 = (*è
myT¬g‘
;

413 
¬gs
->
sourû
 = 
mySourû
;

414 
¬gs
->
off£ts
 = 
myOff£ts
;

415 
	}
}

417 
UCh¬32


418 
	$T_UCÚv”‹r_g‘NextUCh¬_UTF32_BE
(
UCÚv”‹rToUnicodeArgs
* 
¬gs
,

419 
UE¼ÜCode
* 
”r
)

421 cÚ¡ 
ušt8_t
 *
mySourû
;

422 
UCh¬32
 
myUCh¬
;

423 
št32_t
 
Ëngth
;

425 
mySourû
 = (cÚ¡ 
ušt8_t
 *)
¬gs
->
sourû
;

426 ià(
mySourû
 >ğ(cÚ¡ 
ušt8_t
 *)
¬gs
->
sourûLim™
)

429 *
”r
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

433 
Ëngth
 = (
št32_t
)((cÚ¡ 
ušt8_t
 *)
¬gs
->
sourûLim™
 - 
mySourû
);

434 ià(
Ëngth
 < 4)

437 
	`u´v_memıy
(
¬gs
->
cÚv”‹r
->
toUBy‹s
, 
mySourû
, 
Ëngth
);

438 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
)
Ëngth
;

439 
¬gs
->
sourû
 = (cÚ¡ *)(
mySourû
 + 
Ëngth
);

440 *
”r
 = 
U_TRUNCATED_CHAR_FOUND
;

445 
myUCh¬
 = ((
UCh¬32
)
mySourû
[0] << 24)

446 | ((
UCh¬32
)
mySourû
[1] << 16)

447 | ((
UCh¬32
)
mySourû
[2] << 8)

448 | ((
UCh¬32
)
mySourû
[3]);

450 
¬gs
->
sourû
 = (cÚ¡ *)(
mySourû
 + 4);

451 ià((
ušt32_t
)
myUCh¬
 <ğ
MAXIMUM_UTF
 && !
	`U_IS_SURROGATE
(myUChar)) {

452  
myUCh¬
;

455 
	`u´v_memıy
(
¬gs
->
cÚv”‹r
->
toUBy‹s
, 
mySourû
, 4);

456 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 4;

458 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

460 
	}
}

462 cÚ¡ 
UCÚv”‹rIm¶
 
	g_UTF32BEIm¶
 = {

463 
UCNV_UTF32_BigEndŸn
,

465 
NULL
,

466 
NULL
,

468 
NULL
,

469 
NULL
,

470 
NULL
,

472 
T_UCÚv”‹r_toUnicode_UTF32_BE
,

473 
T_UCÚv”‹r_toUnicode_UTF32_BE_OFFSET_LOGIC
,

474 
T_UCÚv”‹r_äomUnicode_UTF32_BE
,

475 
T_UCÚv”‹r_äomUnicode_UTF32_BE_OFFSET_LOGIC
,

476 
T_UCÚv”‹r_g‘NextUCh¬_UTF32_BE
,

478 
NULL
,

479 
NULL
,

480 
NULL
,

481 
NULL
,

482 
uúv_g‘NÚSu¼og©eUnicodeS‘


486 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_UTF32BESticD©a
 = {

487 (
UCÚv”‹rSticD©a
),

490 
UCNV_IBM
, 
UCNV_UTF32_BigEndŸn
, 4, 4,

491 { 0, 0, 0xff, 0xfd }, 4, 
FALSE
, FALSE,

497 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_UTF32BED©a
 = {

498 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),

499 
NULL
, NULL, &
_UTF32BESticD©a
, 
FALSE
, &
_UTF32BEIm¶
,

506 
	$T_UCÚv”‹r_toUnicode_UTF32_LE
(
UCÚv”‹rToUnicodeArgs
 * 
¬gs
,

507 
UE¼ÜCode
 * 
”r
)

509 cÚ¡ *
mySourû
 = (*è
¬gs
->
sourû
;

510 
UCh¬
 *
myT¬g‘
 = 
¬gs
->
rg‘
;

511 cÚ¡ *
sourûLim™
 = (*è
¬gs
->sourceLimit;

512 cÚ¡ 
UCh¬
 *
rg‘Lim™
 = 
¬gs
->targetLimit;

513 *
toUBy‹s
 = 
¬gs
->
cÚv”‹r
->toUBytes;

514 
ušt32_t
 
ch
, 
i
;

517 ià(
¬gs
->
cÚv”‹r
->
toUnicodeStus
 && 
myT¬g‘
 < 
rg‘Lim™
)

519 
i
 = 
¬gs
->
cÚv”‹r
->
toUL’gth
;

520 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 0;

523 
ch
 = 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 - 1;

524 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 = 0;

525 
mÜeby‹s
;

528 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
)

530 
i
 = 0;

531 
ch
 = 0;

532 
mÜeby‹s
:

533 
i
 < (
ušt32_t
))

535 ià(
mySourû
 < 
sourûLim™
)

537 
ch
 |ğ((
ušt8_t
)(*
mySourû
)è<< (
i
 * 8);

538 
toUBy‹s
[
i
++] = (è*(
mySourû
++);

544 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 = 
ch
 + 1;

545 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
è
i
;

546 
dÚefÜnow
;

550 ià(
ch
 <ğ
MAXIMUM_UTF
 && !
	`U_IS_SURROGATE
(ch)) {

552 ià(
ch
 <ğ
MAXIMUM_UCS2
) {

554 *(
myT¬g‘
++èğ(
UCh¬
è
ch
;

558 *(
myT¬g‘
++èğ
	`U16_LEAD
(
ch
);

559 
ch
 = 
	`U16_TRAIL
(ch);

560 ià(
myT¬g‘
 < 
rg‘Lim™
) {

561 *(
myT¬g‘
++èğ(
UCh¬
)
ch
;

565 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãr
[0] = (
UCh¬
è
ch
;

566 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãrL’gth
 = 1;

567 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

573 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
)
i
;

574 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

579 
dÚefÜnow
:

580 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
))

583 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

586 
¬gs
->
rg‘
 = 
myT¬g‘
;

587 
¬gs
->
sourû
 = (cÚ¡ *è
mySourû
;

588 
	}
}

591 
	$T_UCÚv”‹r_toUnicode_UTF32_LE_OFFSET_LOGIC
(
UCÚv”‹rToUnicodeArgs
 * 
¬gs
,

592 
UE¼ÜCode
 * 
”r
)

594 cÚ¡ *
mySourû
 = (*è
¬gs
->
sourû
;

595 
UCh¬
 *
myT¬g‘
 = 
¬gs
->
rg‘
;

596 
št32_t
 *
myOff£ts
 = 
¬gs
->
off£ts
;

597 cÚ¡ *
sourûLim™
 = (*è
¬gs
->sourceLimit;

598 cÚ¡ 
UCh¬
 *
rg‘Lim™
 = 
¬gs
->targetLimit;

599 *
toUBy‹s
 = 
¬gs
->
cÚv”‹r
->toUBytes;

600 
ušt32_t
 
ch
, 
i
;

601 
št32_t
 
off£tNum
 = 0;

604 ià(
¬gs
->
cÚv”‹r
->
toUnicodeStus
 && 
myT¬g‘
 < 
rg‘Lim™
)

606 
i
 = 
¬gs
->
cÚv”‹r
->
toUL’gth
;

607 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 0;

610 
ch
 = 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 - 1;

611 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 = 0;

612 
mÜeby‹s
;

615 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
)

617 
i
 = 0;

618 
ch
 = 0;

619 
mÜeby‹s
:

620 
i
 < (
ušt32_t
))

622 ià(
mySourû
 < 
sourûLim™
)

624 
ch
 |ğ((
ušt8_t
)(*
mySourû
)è<< (
i
 * 8);

625 
toUBy‹s
[
i
++] = (è*(
mySourû
++);

631 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 = 
ch
 + 1;

632 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
è
i
;

633 
dÚefÜnow
;

637 ià(
ch
 <ğ
MAXIMUM_UTF
 && !
	`U_IS_SURROGATE
(ch))

640 ià(
ch
 <ğ
MAXIMUM_UCS2
)

643 *(
myT¬g‘
++èğ(
UCh¬
è
ch
;

644 *(
myOff£ts
++èğ
off£tNum
;

648 *(
myT¬g‘
++èğ
	`U16_LEAD
(
ch
);

649 *(
myOff£ts
++èğ
off£tNum
;

650 
ch
 = 
	`U16_TRAIL
(ch);

651 ià(
myT¬g‘
 < 
rg‘Lim™
)

653 *(
myT¬g‘
++èğ(
UCh¬
)
ch
;

654 *(
myOff£ts
++èğ
off£tNum
;

659 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãr
[0] = (
UCh¬
è
ch
;

660 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãrL’gth
 = 1;

661 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

668 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
)
i
;

669 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

672 
off£tNum
 +ğ
i
;

675 
dÚefÜnow
:

676 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
))

679 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

682 
¬gs
->
rg‘
 = 
myT¬g‘
;

683 
¬gs
->
sourû
 = (cÚ¡ *è
mySourû
;

684 
¬gs
->
off£ts
 = 
myOff£ts
;

685 
	}
}

688 
	$T_UCÚv”‹r_äomUnicode_UTF32_LE
(
UCÚv”‹rFromUnicodeArgs
 * 
¬gs
,

689 
UE¼ÜCode
 * 
”r
)

691 cÚ¡ 
UCh¬
 *
mySourû
 = 
¬gs
->
sourû
;

692 *
myT¬g‘
;

693 cÚ¡ 
UCh¬
 *
sourûLim™
 = 
¬gs
->sourceLimit;

694 cÚ¡ *
rg‘Lim™
 = (*è
¬gs
->targetLimit;

695 
UCh¬32
 
ch
, 
ch2
;

696 
šdexToWr™e
;

697 
‹mp
[(
ušt32_t
)];

699 if(
mySourû
 >ğ
sourûLim™
) {

705 if(
¬gs
->
cÚv”‹r
->
äomUnicodeStus
==
UCNV_NEED_TO_WRITE_BOM
) {

706 cÚ¡ 
bom
[]={ ()0xff, ()0xfe, 0, 0 };

707 
	`uúv_äomUWr™eBy‹s
(
¬gs
->
cÚv”‹r
,

708 
bom
, 4,

709 &
¬gs
->
rg‘
,‡rgs->
rg‘Lim™
,

710 &
¬gs
->
off£ts
, -1,

711 
”r
);

712 
¬gs
->
cÚv”‹r
->
äomUnicodeStus
=0;

715 
myT¬g‘
 = (*è
¬gs
->
rg‘
;

716 
‹mp
[3] = 0;

718 ià(
¬gs
->
cÚv”‹r
->
äomUCh¬32
)

720 
ch
 = 
¬gs
->
cÚv”‹r
->
äomUCh¬32
;

721 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 0;

722 
lowsurog©e
;

725 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
)

727 
ch
 = *(
mySourû
++);

729 ià(
	`UTF_IS_SURROGATE
(
ch
)) {

730 ià(
	`U_IS_LEAD
(
ch
))

732 
lowsurog©e
:

733 ià(
mySourû
 < 
sourûLim™
)

735 
ch2
 = *
mySourû
;

736 ià(
	`U_IS_TRAIL
(
ch2
)) {

737 
ch
 = ((ch - 
SURROGATE_HIGH_START
è<< 
HALF_SHIFT
è+ 
ch2
 + 
SURROGATE_LOW_BASE
;

738 
mySourû
++;

743 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

744 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

750 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

751 ià(
¬gs
->
æush
) {

754 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

762 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

763 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

769 
‹mp
[2] = (
ušt8_t
è(
ch
 >> 16 & 0x1F);

770 
‹mp
[1] = (
ušt8_t
è(
ch
 >> 8);

771 
‹mp
[0] = (
ušt8_t
è(
ch
);

773 
šdexToWr™e
 = 0; indexToWr™<ğ(
ušt32_t
) - 1; indexToWrite++)

775 ià(
myT¬g‘
 < 
rg‘Lim™
)

777 *(
myT¬g‘
++èğ
‹mp
[
šdexToWr™e
];

781 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = 
‹mp
[
šdexToWr™e
];

782 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

787 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
))

789 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

792 
¬gs
->
rg‘
 = (*è
myT¬g‘
;

793 
¬gs
->
sourû
 = 
mySourû
;

794 
	}
}

797 
	$T_UCÚv”‹r_äomUnicode_UTF32_LE_OFFSET_LOGIC
(
UCÚv”‹rFromUnicodeArgs
 * 
¬gs
,

798 
UE¼ÜCode
 * 
”r
)

800 cÚ¡ 
UCh¬
 *
mySourû
 = 
¬gs
->
sourû
;

801 *
myT¬g‘
;

802 
št32_t
 *
myOff£ts
;

803 cÚ¡ 
UCh¬
 *
sourûLim™
 = 
¬gs
->sourceLimit;

804 cÚ¡ *
rg‘Lim™
 = (*è
¬gs
->targetLimit;

805 
UCh¬32
 
ch
, 
ch2
;

806 
šdexToWr™e
;

807 
‹mp
[(
ušt32_t
)];

808 
št32_t
 
off£tNum
 = 0;

810 if(
mySourû
 >ğ
sourûLim™
) {

816 if(
¬gs
->
cÚv”‹r
->
äomUnicodeStus
==
UCNV_NEED_TO_WRITE_BOM
) {

817 cÚ¡ 
bom
[]={ ()0xff, ()0xfe, 0, 0 };

818 
	`uúv_äomUWr™eBy‹s
(
¬gs
->
cÚv”‹r
,

819 
bom
, 4,

820 &
¬gs
->
rg‘
,‡rgs->
rg‘Lim™
,

821 &
¬gs
->
off£ts
, -1,

822 
”r
);

823 
¬gs
->
cÚv”‹r
->
äomUnicodeStus
=0;

826 
myT¬g‘
 = (*è
¬gs
->
rg‘
;

827 
myOff£ts
 = 
¬gs
->
off£ts
;

828 
‹mp
[3] = 0;

830 ià(
¬gs
->
cÚv”‹r
->
äomUCh¬32
)

832 
ch
 = 
¬gs
->
cÚv”‹r
->
äomUCh¬32
;

833 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 0;

834 
lowsurog©e
;

837 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
)

839 
ch
 = *(
mySourû
++);

841 ià(
	`UTF_IS_SURROGATE
(
ch
)) {

842 ià(
	`U_IS_LEAD
(
ch
))

844 
lowsurog©e
:

845 ià(
mySourû
 < 
sourûLim™
)

847 
ch2
 = *
mySourû
;

848 ià(
	`U_IS_TRAIL
(
ch2
))

850 
ch
 = ((ch - 
SURROGATE_HIGH_START
è<< 
HALF_SHIFT
è+ 
ch2
 + 
SURROGATE_LOW_BASE
;

851 
mySourû
++;

856 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

857 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

863 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

864 ià(
¬gs
->
æush
) {

867 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

875 
¬gs
->
cÚv”‹r
->
äomUCh¬32
 = 
ch
;

876 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

882 
‹mp
[2] = (
ušt8_t
è(
ch
 >> 16 & 0x1F);

883 
‹mp
[1] = (
ušt8_t
è(
ch
 >> 8);

884 
‹mp
[0] = (
ušt8_t
è(
ch
);

886 
šdexToWr™e
 = 0; indexToWr™<ğ(
ušt32_t
) - 1; indexToWrite++)

888 ià(
myT¬g‘
 < 
rg‘Lim™
)

890 *(
myT¬g‘
++èğ
‹mp
[
šdexToWr™e
];

891 *(
myOff£ts
++èğ
off£tNum
;

895 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = 
‹mp
[
šdexToWr™e
];

896 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

899 
off£tNum
 = off£tNum + 1 + (
‹mp
[2] != 0);

902 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
))

904 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

907 
¬gs
->
rg‘
 = (*è
myT¬g‘
;

908 
¬gs
->
sourû
 = 
mySourû
;

909 
¬gs
->
off£ts
 = 
myOff£ts
;

910 
	}
}

912 
UCh¬32


913 
	$T_UCÚv”‹r_g‘NextUCh¬_UTF32_LE
(
UCÚv”‹rToUnicodeArgs
* 
¬gs
,

914 
UE¼ÜCode
* 
”r
)

916 cÚ¡ 
ušt8_t
 *
mySourû
;

917 
UCh¬32
 
myUCh¬
;

918 
št32_t
 
Ëngth
;

920 
mySourû
 = (cÚ¡ 
ušt8_t
 *)
¬gs
->
sourû
;

921 ià(
mySourû
 >ğ(cÚ¡ 
ušt8_t
 *)
¬gs
->
sourûLim™
)

924 *
”r
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

928 
Ëngth
 = (
št32_t
)((cÚ¡ 
ušt8_t
 *)
¬gs
->
sourûLim™
 - 
mySourû
);

929 ià(
Ëngth
 < 4)

932 
	`u´v_memıy
(
¬gs
->
cÚv”‹r
->
toUBy‹s
, 
mySourû
, 
Ëngth
);

933 
¬gs
->
cÚv”‹r
->
toUL’gth
 = (
št8_t
)
Ëngth
;

934 
¬gs
->
sourû
 = (cÚ¡ *)(
mySourû
 + 
Ëngth
);

935 *
”r
 = 
U_TRUNCATED_CHAR_FOUND
;

940 
myUCh¬
 = ((
UCh¬32
)
mySourû
[3] << 24)

941 | ((
UCh¬32
)
mySourû
[2] << 16)

942 | ((
UCh¬32
)
mySourû
[1] << 8)

943 | ((
UCh¬32
)
mySourû
[0]);

945 
¬gs
->
sourû
 = (cÚ¡ *)(
mySourû
 + 4);

946 ià((
ušt32_t
)
myUCh¬
 <ğ
MAXIMUM_UTF
 && !
	`U_IS_SURROGATE
(myUChar)) {

947  
myUCh¬
;

950 
	`u´v_memıy
(
¬gs
->
cÚv”‹r
->
toUBy‹s
, 
mySourû
, 4);

951 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 4;

953 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

955 
	}
}

957 cÚ¡ 
UCÚv”‹rIm¶
 
	g_UTF32LEIm¶
 = {

958 
UCNV_UTF32_L™eEndŸn
,

960 
NULL
,

961 
NULL
,

963 
NULL
,

964 
NULL
,

965 
NULL
,

967 
T_UCÚv”‹r_toUnicode_UTF32_LE
,

968 
T_UCÚv”‹r_toUnicode_UTF32_LE_OFFSET_LOGIC
,

969 
T_UCÚv”‹r_äomUnicode_UTF32_LE
,

970 
T_UCÚv”‹r_äomUnicode_UTF32_LE_OFFSET_LOGIC
,

971 
T_UCÚv”‹r_g‘NextUCh¬_UTF32_LE
,

973 
NULL
,

974 
NULL
,

975 
NULL
,

976 
NULL
,

977 
uúv_g‘NÚSu¼og©eUnicodeS‘


981 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_UTF32LESticD©a
 = {

982 (
UCÚv”‹rSticD©a
),

985 
UCNV_IBM
, 
UCNV_UTF32_L™eEndŸn
, 4, 4,

986 { 0xfd, 0xff, 0, 0 }, 4, 
FALSE
, FALSE,

993 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_UTF32LED©a
 = {

994 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),

995 
NULL
, NULL, &
_UTF32LESticD©a
, 
FALSE
, &
_UTF32LEIm¶
,

1023 
	$_UTF32Re£t
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rRe£tChoiû
 
choiû
) {

1024 if(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

1026 
úv
->
mode
=0;

1028 if(
choiû
!=
UCNV_RESET_TO_UNICODE
) {

1030 
úv
->
äomUnicodeStus
=
UCNV_NEED_TO_WRITE_BOM
;

1032 
	}
}

1035 
	$_UTF32O³n
(
UCÚv”‹r
 *
úv
,

1036 
UCÚv”‹rLßdArgs
 *
pArgs
,

1037 
UE¼ÜCode
 *
pE¼ÜCode
) {

1038 
	`_UTF32Re£t
(
úv
, 
UCNV_RESET_BOTH
);

1039 
	}
}

1041 cÚ¡ 
	gutf32BOM
[8]={ 0, 0, ()0xfe, ()0xff, ()0xff, ()0xfe, 0, 0 };

1044 
	$_UTF32ToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

1045 
UE¼ÜCode
 *
pE¼ÜCode
) {

1046 
UCÚv”‹r
 *
úv
=
pArgs
->
cÚv”‹r
;

1047 cÚ¡ *
sourû
=
pArgs
->source;

1048 cÚ¡ *
sourûLim™
=
pArgs
->sourceLimit;

1049 
št32_t
 *
off£ts
=
pArgs
->offsets;

1051 
št32_t
 
¡©e
, 
off£tD–
;

1052 
b
;

1054 
¡©e
=
úv
->
mode
;

1061 
off£tD–
=0;

1063 
sourû
<
sourûLim™
 && 
	`U_SUCCESS
(*
pE¼ÜCode
)) {

1064 
¡©e
) {

1066 
b
=*
sourû
;

1067 if(
b
==0) {

1068 
¡©e
=1;

1069 } if(
b
==()0xff) {

1070 
¡©e
=5;

1072 
¡©e
=8;

1075 ++
sourû
;

1083 if(*
sourû
==
utf32BOM
[
¡©e
]) {

1084 ++
¡©e
;

1085 ++
sourû
;

1086 if(
¡©e
==4) {

1087 
¡©e
=8;

1088 
off£tD–
=(
št32_t
)(
sourû
-
pArgs
->source);

1089 } if(
¡©e
==8) {

1090 
¡©e
=9;

1091 
off£tD–
=(
št32_t
)(
sourû
-
pArgs
->source);

1095 
št32_t
 
couÁ
=(št32_t)(
sourû
-
pArgs
->source);

1098 
sourû
=
pArgs
->source;

1100 if(
couÁ
==(
¡©e
&3)) {

1103 
UBoŞ
 
ŞdFlush
=
pArgs
->
æush
;

1106 
pArgs
->
sourû
=
utf32BOM
+(
¡©e
&4);

1107 
pArgs
->
sourûLim™
õArgs->
sourû
+((
¡©e
&3)-
couÁ
);

1108 
pArgs
->
æush
=
FALSE
;

1111 
	`T_UCÚv”‹r_toUnicode_UTF32_BE
(
pArgs
, 
pE¼ÜCode
);

1114 
pArgs
->
sourûLim™
=sourceLimit;

1115 
pArgs
->
æush
=
ŞdFlush
;

1117 
¡©e
=8;

1123 
pArgs
->
sourû
=source;

1124 if(
off£ts
==
NULL
) {

1125 
	`T_UCÚv”‹r_toUnicode_UTF32_BE
(
pArgs
, 
pE¼ÜCode
);

1127 
	`T_UCÚv”‹r_toUnicode_UTF32_BE_OFFSET_LOGIC
(
pArgs
, 
pE¼ÜCode
);

1129 
sourû
=
pArgs
->source;

1133 
pArgs
->
sourû
=source;

1134 if(
off£ts
==
NULL
) {

1135 
	`T_UCÚv”‹r_toUnicode_UTF32_LE
(
pArgs
, 
pE¼ÜCode
);

1137 
	`T_UCÚv”‹r_toUnicode_UTF32_LE_OFFSET_LOGIC
(
pArgs
, 
pE¼ÜCode
);

1139 
sourû
=
pArgs
->source;

1147 if(
off£ts
!=
NULL
 && 
off£tD–
!=0) {

1148 
št32_t
 *
off£tsLim™
=
pArgs
->
off£ts
;

1149 
off£ts
<
off£tsLim™
) {

1150 *
off£ts
++ +ğ
off£tD–
;

1154 
pArgs
->
sourû
=source;

1156 if(
sourû
==
sourûLim™
 && 
pArgs
->
æush
) {

1158 
¡©e
) {

1162 
	`T_UCÚv”‹r_toUnicode_UTF32_BE
(
pArgs
, 
pE¼ÜCode
);

1165 
	`T_UCÚv”‹r_toUnicode_UTF32_LE
(
pArgs
, 
pE¼ÜCode
);

1169 
pArgs
->
sourû
=
utf32BOM
+(
¡©e
&4);

1170 
pArgs
->
sourûLim™
õArgs->
sourû
+(
¡©e
&3);

1173 
	`T_UCÚv”‹r_toUnicode_UTF32_BE
(
pArgs
, 
pE¼ÜCode
);

1174 
pArgs
->
sourû
=source;

1175 
pArgs
->
sourûLim™
=sourceLimit;

1176 
¡©e
=8;

1181 
úv
->
mode
=
¡©e
;

1182 
	}
}

1184 
UCh¬32


1185 
	$_UTF32G‘NextUCh¬
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

1186 
UE¼ÜCode
 *
pE¼ÜCode
) {

1187 
pArgs
->
cÚv”‹r
->
mode
) {

1189  
	`T_UCÚv”‹r_g‘NextUCh¬_UTF32_BE
(
pArgs
, 
pE¼ÜCode
);

1191  
	`T_UCÚv”‹r_g‘NextUCh¬_UTF32_LE
(
pArgs
, 
pE¼ÜCode
);

1193  
UCNV_GET_NEXT_UCHAR_USE_TO_U
;

1195 
	}
}

1197 cÚ¡ 
UCÚv”‹rIm¶
 
	g_UTF32Im¶
 = {

1198 
UCNV_UTF32
,

1200 
NULL
,

1201 
NULL
,

1203 
_UTF32O³n
,

1204 
NULL
,

1205 
_UTF32Re£t
,

1207 
_UTF32ToUnicodeW™hOff£ts
,

1208 
_UTF32ToUnicodeW™hOff£ts
,

1209 #ià
U_IS_BIG_ENDIAN


1210 
T_UCÚv”‹r_äomUnicode_UTF32_BE
,

1211 
T_UCÚv”‹r_äomUnicode_UTF32_BE_OFFSET_LOGIC
,

1213 
T_UCÚv”‹r_äomUnicode_UTF32_LE
,

1214 
T_UCÚv”‹r_äomUnicode_UTF32_LE_OFFSET_LOGIC
,

1216 
_UTF32G‘NextUCh¬
,

1218 
NULL
,

1219 
NULL
,

1220 
NULL
,

1221 
NULL
,

1222 
uúv_g‘NÚSu¼og©eUnicodeS‘


1226 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_UTF32SticD©a
 = {

1227 (
UCÚv”‹rSticD©a
),

1230 
UCNV_IBM
, 
UCNV_UTF32
, 4, 4,

1231 #ià
U_IS_BIG_ENDIAN


1236 
FALSE
, FALSE,

1242 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_UTF32D©a
 = {

1243 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),

1244 
NULL
, NULL, &
_UTF32SticD©a
, 
FALSE
, &
_UTF32Im¶
,

	@ucnv_u7.c

17 
	~"unicode/uty³s.h
"

19 #ià!
UCONFIG_NO_CONVERSION


21 
	~"unicode/uúv.h
"

22 
	~"uúv_bld.h
"

23 
	~"uúv_úv.h
"

69 
	#šS‘D
(
c
) \

70 ((
ušt8_t
)((
c
)-97)<26 || (uint8_t)((c)-65)<26 || \

71 (
ušt8_t
)((
c
)-48)<10 || \

72 (
ušt8_t
)((
c
)-39)<3 || \

73 (
ušt8_t
)((
c
)-44)<4 || \

74 (
c
)==58 || (c)==63 \

75 )

	)

77 
	#šS‘O
(
c
) \

78 ((
ušt8_t
)((
c
)-33)<6 || \

79 (
ušt8_t
)((
c
)-59)<4 || \

80 (
ušt8_t
)((
c
)-93)<4 || \

81 (
ušt8_t
)((
c
)-123)<3 || \

82 (
c
)==42 || (c)==64 || (c)==91 \

83 )

	)

85 
	#isCRLFTAB
(
c
è((c)==13 || (c)==10 || (c)==9)

	)

86 
	#isCRLFSPTAB
(
c
è((c)==32 || (c)==13 || (c)==10 || (c)==9)

	)

88 
	#PLUS
 43

	)

89 
	#MINUS
 45

	)

90 
	#BACKSLASH
 92

	)

91 
	#TILDE
 126

	)

94 
	#isLeg®UTF7
(
c
è(((
ušt8_t
)((c)-32)<94 && (c)!=
BACKSLASH
è|| 
	`isCRLFTAB
(c))

	)

97 cÚ¡ 
UBoŞ
 
	g’codeDœeùlyMaximum
[128]={

113 cÚ¡ 
UBoŞ
 
	g’codeDœeùlyRe¡riùed
[128]={

128 cÚ¡ 
ušt8_t


129 
	gtoBa£64
[64]={

142 cÚ¡ 
št8_t


143 
	gäomBa£64
[128]={

179 
	$_UTF7Re£t
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rRe£tChoiû
 
choiû
) {

180 if(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

182 
úv
->
toUnicodeStus
=0x1000000;

183 
úv
->
toUL’gth
=0;

185 if(
choiû
!=
UCNV_RESET_TO_UNICODE
) {

187 
úv
->
äomUnicodeStus
=(cnv->fromUnicodeStatus&0xf0000000)|0x1000000;

189 
	}
}

192 
	$_UTF7O³n
(
UCÚv”‹r
 *
úv
,

193 
UCÚv”‹rLßdArgs
 *
pArgs
,

194 
UE¼ÜCode
 *
pE¼ÜCode
) {

195 if(
	`UCNV_GET_VERSION
(
úv
)<=1) {

197 
úv
->
äomUnicodeStus
=
	`UCNV_GET_VERSION
(cnv)<<28;

198 
	`_UTF7Re£t
(
úv
, 
UCNV_RESET_BOTH
);

200 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

202 
	}
}

205 
	$_UTF7ToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

206 
UE¼ÜCode
 *
pE¼ÜCode
) {

207 
UCÚv”‹r
 *
úv
;

208 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

209 
UCh¬
 *
rg‘
;

210 cÚ¡ 
UCh¬
 *
rg‘Lim™
;

211 
št32_t
 *
off£ts
;

213 
ušt8_t
 *
by‹s
;

214 
ušt8_t
 
by‹Index
;

216 
št32_t
 
Ëngth
, 
rg‘C­ac™y
;

219 
ušt16_t
 
b™s
;

220 
št8_t
 
ba£64CouÁ”
;

221 
UBoŞ
 
šDœeùMode
;

223 
št8_t
 
ba£64V®ue
;

225 
št32_t
 
sourûIndex
, 
ÃxtSourûIndex
;

227 
ušt8_t
 
b
;

229 
úv
=
pArgs
->
cÚv”‹r
;

231 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

232 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

233 
rg‘
=
pArgs
->target;

234 
rg‘Lim™
=
pArgs
->targetLimit;

235 
off£ts
=
pArgs
->offsets;

238 
ušt32_t
 
¡©us
=
úv
->
toUnicodeStus
;

239 
šDœeùMode
=(
UBoŞ
)((
¡©us
>>24)&1);

240 
ba£64CouÁ”
=(
št8_t
)(
¡©us
>>16);

241 
b™s
=(
ušt16_t
)
¡©us
;

243 
by‹s
=
úv
->
toUBy‹s
;

244 
by‹Index
=
úv
->
toUL’gth
;

247 
sourûIndex
=
by‹Index
==0 ? 0 : -1;

248 
ÃxtSourûIndex
=0;

250 if(
šDœeùMode
) {

251 
dœeùMode
:

260 
by‹Index
=0;

261 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
);

262 
rg‘C­ac™y
=(
št32_t
)(
rg‘Lim™
-
rg‘
);

263 if(
Ëngth
>
rg‘C­ac™y
) {

264 
Ëngth
=
rg‘C­ac™y
;

266 
Ëngth
>0) {

267 
b
=*
sourû
++;

268 if(!
	`isLeg®UTF7
(
b
)) {

270 
by‹s
[0]=
b
;

271 
by‹Index
=1;

272 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

274 } if(
b
!=
PLUS
) {

276 *
rg‘
++=
b
;

277 if(
off£ts
!=
NULL
) {

278 *
off£ts
++=
sourûIndex
++;

282 
ÃxtSourûIndex
=++
sourûIndex
;

283 
šDœeùMode
=
FALSE
;

284 
by‹Index
=0;

285 
b™s
=0;

286 
ba£64CouÁ”
=-1;

287 
unicodeMode
;

289 --
Ëngth
;

291 if(
sourû
<
sourûLim™
 && 
rg‘
>=
rg‘Lim™
) {

293 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

296 
unicodeMode
:

307 
sourû
<
sourûLim™
) {

308 if(
rg‘
<
rg‘Lim™
) {

309 
by‹s
[
by‹Index
++]=
b
=*
sourû
++;

310 ++
ÃxtSourûIndex
;

311 if(
b
>=126) {

313 
šDœeùMode
=
TRUE
;

314 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

316 } if((
ba£64V®ue
=
äomBa£64
[
b
])>=0) {

318 
ba£64CouÁ”
) {

321 
b™s
=
ba£64V®ue
;

322 
ba£64CouÁ”
=1;

328 
b™s
=(
ušt16_t
)((b™s<<6)|
ba£64V®ue
);

329 ++
ba£64CouÁ”
;

332 *
rg‘
++=(
UCh¬
)((
b™s
<<4)|(
ba£64V®ue
>>2));

333 if(
off£ts
!=
NULL
) {

334 *
off£ts
++=
sourûIndex
;

335 
sourûIndex
=
ÃxtSourûIndex
-1;

337 
by‹s
[0]=
b
;

338 
by‹Index
=1;

339 
b™s
=(
ušt16_t
)(
ba£64V®ue
&3);

340 
ba£64CouÁ”
=3;

343 *
rg‘
++=(
UCh¬
)((
b™s
<<2)|(
ba£64V®ue
>>4));

344 if(
off£ts
!=
NULL
) {

345 *
off£ts
++=
sourûIndex
;

346 
sourûIndex
=
ÃxtSourûIndex
-1;

348 
by‹s
[0]=
b
;

349 
by‹Index
=1;

350 
b™s
=(
ušt16_t
)(
ba£64V®ue
&15);

351 
ba£64CouÁ”
=6;

354 *
rg‘
++=(
UCh¬
)((
b™s
<<6)|
ba£64V®ue
);

355 if(
off£ts
!=
NULL
) {

356 *
off£ts
++=
sourûIndex
;

357 
sourûIndex
=
ÃxtSourûIndex
;

359 
by‹Index
=0;

360 
b™s
=0;

361 
ba£64CouÁ”
=0;

367 } if(
ba£64V®ue
==-2) {

369 
šDœeùMode
=
TRUE
;

370 if(
ba£64CouÁ”
==-1) {

372 *
rg‘
++=
PLUS
;

373 if(
off£ts
!=
NULL
) {

374 *
off£ts
++=
sourûIndex
-1;

378 if(
b™s
!=0) {

380 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

384 
sourûIndex
=
ÃxtSourûIndex
;

385 
dœeùMode
;

386 } if(
ba£64V®ue
==-1) {

388 
šDœeùMode
=
TRUE
;

389 if(
ba£64CouÁ”
==-1) {

392 --
sourûIndex
;

393 
by‹s
[0]=
PLUS
;

394 
by‹s
[1]=
b
;

395 
by‹Index
=2;

396 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

398 } if(
b™s
==0) {

400 --
sourû
;

401 
sourûIndex
=
ÃxtSourûIndex
-1;

402 
dœeùMode
;

405 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

410 
šDœeùMode
=
TRUE
;

411 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

416 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

422 if(
	`U_SUCCESS
(*
pE¼ÜCode
è&& 
pArgs
->
æush
 && 
sourû
==
sourûLim™
 && 
b™s
==0) {

429 
by‹Index
=0;

433 
úv
->
toUnicodeStus
=((
ušt32_t
)
šDœeùMode
<<24)|((ušt32_t)((
ušt8_t
)
ba£64CouÁ”
)<<16)|(ušt32_t)
b™s
;

434 
úv
->
toUL’gth
=
by‹Index
;

437 
pArgs
->
sourû
=(const *)source;

438 
pArgs
->
rg‘
=target;

439 
pArgs
->
off£ts
=offsets;

441 
	}
}

444 
	$_UTF7FromUnicodeW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

445 
UE¼ÜCode
 *
pE¼ÜCode
) {

446 
UCÚv”‹r
 *
úv
;

447 cÚ¡ 
UCh¬
 *
sourû
, *
sourûLim™
;

448 
ušt8_t
 *
rg‘
, *
rg‘Lim™
;

449 
št32_t
 *
off£ts
;

451 
št32_t
 
Ëngth
, 
rg‘C­ac™y
, 
sourûIndex
;

452 
UCh¬
 
c
;

455 cÚ¡ 
UBoŞ
 *
’codeDœeùly
;

456 
ušt8_t
 
b™s
;

457 
št8_t
 
ba£64CouÁ”
;

458 
UBoŞ
 
šDœeùMode
;

461 
úv
=
pArgs
->
cÚv”‹r
;

464 
sourû
=
pArgs
->source;

465 
sourûLim™
=
pArgs
->sourceLimit;

466 
rg‘
=(
ušt8_t
 *)
pArgs
->target;

467 
rg‘Lim™
=(
ušt8_t
 *)
pArgs
->targetLimit;

468 
off£ts
=
pArgs
->offsets;

472 
ušt32_t
 
¡©us
=
úv
->
äomUnicodeStus
;

473 
’codeDœeùly
ğ
¡©us
<0x10000000 ? 
’codeDœeùlyMaximum
 : 
’codeDœeùlyRe¡riùed
;

474 
šDœeùMode
=(
UBoŞ
)((
¡©us
>>24)&1);

475 
ba£64CouÁ”
=(
št8_t
)(
¡©us
>>16);

476 
b™s
=(
ušt8_t
)
¡©us
;

480 
sourûIndex
=0;

482 if(
šDœeùMode
) {

483 
dœeùMode
:

484 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
);

485 
rg‘C­ac™y
=(
št32_t
)(
rg‘Lim™
-
rg‘
);

486 if(
Ëngth
>
rg‘C­ac™y
) {

487 
Ëngth
=
rg‘C­ac™y
;

489 
Ëngth
>0) {

490 
c
=*
sourû
++;

492 if(
c
<=127 && 
’codeDœeùly
[c]) {

494 *
rg‘
++=(
ušt8_t
)
c
;

495 if(
off£ts
!=
NULL
) {

496 *
off£ts
++=
sourûIndex
++;

498 } if(
c
==
PLUS
) {

500 *
rg‘
++=
PLUS
;

501 if(
rg‘
<
rg‘Lim™
) {

502 *
rg‘
++=
MINUS
;

503 if(
off£ts
!=
NULL
) {

504 *
off£ts
++=
sourûIndex
;

505 *
off£ts
++=
sourûIndex
++;

508 
dœeùMode
;

510 if(
off£ts
!=
NULL
) {

511 *
off£ts
++=
sourûIndex
++;

513 
úv
->
ch¬E¼ÜBufãr
[0]=
MINUS
;

514 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

515 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

520 --
sourû
;

521 *
rg‘
++=
PLUS
;

522 if(
off£ts
!=
NULL
) {

523 *
off£ts
++=
sourûIndex
;

525 
šDœeùMode
=
FALSE
;

526 
ba£64CouÁ”
=0;

527 
unicodeMode
;

529 --
Ëngth
;

531 if(
sourû
<
sourûLim™
 && 
rg‘
>=
rg‘Lim™
) {

533 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

536 
unicodeMode
:

537 
sourû
<
sourûLim™
) {

538 if(
rg‘
<
rg‘Lim™
) {

539 
c
=*
sourû
++;

540 if(
c
<=127 && 
’codeDœeùly
[c]) {

542 
šDœeùMode
=
TRUE
;

545 --
sourû
;

548 if(
ba£64CouÁ”
!=0) {

550 *
rg‘
++=
toBa£64
[
b™s
];

551 if(
off£ts
!=
NULL
) {

552 *
off£ts
++=
sourûIndex
-1;

555 if(
äomBa£64
[
c
]!=-1) {

557 if(
rg‘
<
rg‘Lim™
) {

558 *
rg‘
++=
MINUS
;

559 if(
off£ts
!=
NULL
) {

560 *
off£ts
++=
sourûIndex
-1;

563 
úv
->
ch¬E¼ÜBufãr
[0]=
MINUS
;

564 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

565 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

569 
dœeùMode
;

580 
ba£64CouÁ”
) {

582 *
rg‘
++=
toBa£64
[
c
>>10];

583 if(
rg‘
<
rg‘Lim™
) {

584 *
rg‘
++=
toBa£64
[(
c
>>4)&0x3f];

585 if(
off£ts
!=
NULL
) {

586 *
off£ts
++=
sourûIndex
;

587 *
off£ts
++=
sourûIndex
++;

590 if(
off£ts
!=
NULL
) {

591 *
off£ts
++=
sourûIndex
++;

593 
úv
->
ch¬E¼ÜBufãr
[0]=
toBa£64
[(
c
>>4)&0x3f];

594 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

595 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

597 
b™s
=(
ušt8_t
)((
c
&15)<<2);

598 
ba£64CouÁ”
=1;

601 *
rg‘
++=
toBa£64
[
b™s
|(
c
>>14)];

602 if(
rg‘
<
rg‘Lim™
) {

603 *
rg‘
++=
toBa£64
[(
c
>>8)&0x3f];

604 if(
rg‘
<
rg‘Lim™
) {

605 *
rg‘
++=
toBa£64
[(
c
>>2)&0x3f];

606 if(
off£ts
!=
NULL
) {

607 *
off£ts
++=
sourûIndex
;

608 *
off£ts
++=
sourûIndex
;

609 *
off£ts
++=
sourûIndex
++;

612 if(
off£ts
!=
NULL
) {

613 *
off£ts
++=
sourûIndex
;

614 *
off£ts
++=
sourûIndex
++;

616 
úv
->
ch¬E¼ÜBufãr
[0]=
toBa£64
[(
c
>>2)&0x3f];

617 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

618 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

621 if(
off£ts
!=
NULL
) {

622 *
off£ts
++=
sourûIndex
++;

624 
úv
->
ch¬E¼ÜBufãr
[0]=
toBa£64
[(
c
>>8)&0x3f];

625 
úv
->
ch¬E¼ÜBufãr
[1]=
toBa£64
[(
c
>>2)&0x3f];

626 
úv
->
ch¬E¼ÜBufãrL’gth
=2;

627 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

629 
b™s
=(
ušt8_t
)((
c
&3)<<4);

630 
ba£64CouÁ”
=2;

633 *
rg‘
++=
toBa£64
[
b™s
|(
c
>>12)];

634 if(
rg‘
<
rg‘Lim™
) {

635 *
rg‘
++=
toBa£64
[(
c
>>6)&0x3f];

636 if(
rg‘
<
rg‘Lim™
) {

637 *
rg‘
++=
toBa£64
[
c
&0x3f];

638 if(
off£ts
!=
NULL
) {

639 *
off£ts
++=
sourûIndex
;

640 *
off£ts
++=
sourûIndex
;

641 *
off£ts
++=
sourûIndex
++;

644 if(
off£ts
!=
NULL
) {

645 *
off£ts
++=
sourûIndex
;

646 *
off£ts
++=
sourûIndex
++;

648 
úv
->
ch¬E¼ÜBufãr
[0]=
toBa£64
[
c
&0x3f];

649 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

650 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

653 if(
off£ts
!=
NULL
) {

654 *
off£ts
++=
sourûIndex
++;

656 
úv
->
ch¬E¼ÜBufãr
[0]=
toBa£64
[(
c
>>6)&0x3f];

657 
úv
->
ch¬E¼ÜBufãr
[1]=
toBa£64
[
c
&0x3f];

658 
úv
->
ch¬E¼ÜBufãrL’gth
=2;

659 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

661 
b™s
=0;

662 
ba£64CouÁ”
=0;

671 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

677 if(
pArgs
->
æush
 && 
sourû
>=
sourûLim™
) {

679 if(!
šDœeùMode
 && 
ba£64CouÁ”
!=0) {

680 if(
rg‘
<
rg‘Lim™
) {

681 *
rg‘
++=
toBa£64
[
b™s
];

682 if(
off£ts
!=
NULL
) {

683 *
off£ts
++=
sourûIndex
-1;

686 
úv
->
ch¬E¼ÜBufãr
[úv->
ch¬E¼ÜBufãrL’gth
++]=
toBa£64
[
b™s
];

687 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

691 
úv
->
äomUnicodeStus
=(cnv->fromUnicodeStatus&0xf0000000)|0x1000000;

694 
úv
->
äomUnicodeStus
=

695 (
úv
->
äomUnicodeStus
&0xf0000000)|

696 ((
ušt32_t
)
šDœeùMode
<<24)|((ušt32_t)
ba£64CouÁ”
<<16)|(ušt32_t)
b™s
;

700 
pArgs
->
sourû
=source;

701 
pArgs
->
rg‘
=(*)target;

702 
pArgs
->
off£ts
=offsets;

704 
	}
}

707 
	$_UTF7G‘Name
(cÚ¡ 
UCÚv”‹r
 *
úv
) {

708 
úv
->
äomUnicodeStus
>>28) {

714 
	}
}

716 cÚ¡ 
UCÚv”‹rIm¶
 
	g_UTF7Im¶
={

717 
UCNV_UTF7
,

719 
NULL
,

720 
NULL
,

722 
_UTF7O³n
,

723 
NULL
,

724 
_UTF7Re£t
,

726 
_UTF7ToUnicodeW™hOff£ts
,

727 
_UTF7ToUnicodeW™hOff£ts
,

728 
_UTF7FromUnicodeW™hOff£ts
,

729 
_UTF7FromUnicodeW™hOff£ts
,

730 
NULL
,

732 
NULL
,

733 
_UTF7G‘Name
,

734 
NULL
,

735 
NULL
,

736 
uúv_g‘Com¶‘eUnicodeS‘


739 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_UTF7SticD©a
={

740 (
UCÚv”‹rSticD©a
),

743 
UCNV_IBM
, 
UCNV_UTF7
,

746 
FALSE
, FALSE,

752 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_UTF7D©a
={

753 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
)0),

754 
NULL
, NULL, &
_UTF7SticD©a
, 
FALSE
, &
_UTF7Im¶
,

832 
	#AMPERSAND
 0x26

	)

833 
	#COMMA
 0x2c

	)

834 
	#SLASH
 0x2f

	)

837 
	#isLeg®IMAP
(
c
è(0x20<=(cè&& (c)<=0x7e)

	)

840 
	#šS‘DIMAP
(
c
è(
	`isLeg®IMAP
(cè&& c!=
AMPERSAND
)

	)

842 
	#TO_BASE64_IMAP
(
n
è(Ò)<63 ? 
toBa£64
[n] : 
COMMA
)

	)

843 
	#FROM_BASE64_IMAP
(
c
è((c)==
COMMA
 ? 63 : (c)==
SLASH
 ? -1 : 
äomBa£64
[c])

	)

862 
	$_IMAPToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

863 
UE¼ÜCode
 *
pE¼ÜCode
) {

864 
UCÚv”‹r
 *
úv
;

865 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

866 
UCh¬
 *
rg‘
;

867 cÚ¡ 
UCh¬
 *
rg‘Lim™
;

868 
št32_t
 *
off£ts
;

870 
ušt8_t
 *
by‹s
;

871 
ušt8_t
 
by‹Index
;

873 
št32_t
 
Ëngth
, 
rg‘C­ac™y
;

876 
ušt16_t
 
b™s
;

877 
št8_t
 
ba£64CouÁ”
;

878 
UBoŞ
 
šDœeùMode
;

880 
št8_t
 
ba£64V®ue
;

882 
št32_t
 
sourûIndex
, 
ÃxtSourûIndex
;

884 
UCh¬
 
c
;

885 
ušt8_t
 
b
;

888 
úv
=
pArgs
->
cÚv”‹r
;

890 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

891 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

892 
rg‘
=
pArgs
->target;

893 
rg‘Lim™
=
pArgs
->targetLimit;

894 
off£ts
=
pArgs
->offsets;

897 
ušt32_t
 
¡©us
=
úv
->
toUnicodeStus
;

898 
šDœeùMode
=(
UBoŞ
)((
¡©us
>>24)&1);

899 
ba£64CouÁ”
=(
št8_t
)(
¡©us
>>16);

900 
b™s
=(
ušt16_t
)
¡©us
;

902 
by‹s
=
úv
->
toUBy‹s
;

903 
by‹Index
=
úv
->
toUL’gth
;

906 
sourûIndex
=
by‹Index
==0 ? 0 : -1;

907 
ÃxtSourûIndex
=0;

909 if(
šDœeùMode
) {

910 
dœeùMode
:

918 
by‹Index
=0;

919 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
);

920 
rg‘C­ac™y
=(
št32_t
)(
rg‘Lim™
-
rg‘
);

921 if(
Ëngth
>
rg‘C­ac™y
) {

922 
Ëngth
=
rg‘C­ac™y
;

924 
Ëngth
>0) {

925 
b
=*
sourû
++;

926 if(!
	`isLeg®IMAP
(
b
)) {

928 
by‹s
[0]=
b
;

929 
by‹Index
=1;

930 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

932 } if(
b
!=
AMPERSAND
) {

934 *
rg‘
++=
b
;

935 if(
off£ts
!=
NULL
) {

936 *
off£ts
++=
sourûIndex
++;

940 
ÃxtSourûIndex
=++
sourûIndex
;

941 
šDœeùMode
=
FALSE
;

942 
by‹Index
=0;

943 
b™s
=0;

944 
ba£64CouÁ”
=-1;

945 
unicodeMode
;

947 --
Ëngth
;

949 if(
sourû
<
sourûLim™
 && 
rg‘
>=
rg‘Lim™
) {

951 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

954 
unicodeMode
:

966 
sourû
<
sourûLim™
) {

967 if(
rg‘
<
rg‘Lim™
) {

968 
by‹s
[
by‹Index
++]=
b
=*
sourû
++;

969 ++
ÃxtSourûIndex
;

970 if(
b
>0x7e) {

972 
šDœeùMode
=
TRUE
;

973 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

975 } if((
ba£64V®ue
=
	`FROM_BASE64_IMAP
(
b
))>=0) {

977 
ba£64CouÁ”
) {

980 
b™s
=
ba£64V®ue
;

981 
ba£64CouÁ”
=1;

987 
b™s
=(
ušt16_t
)((b™s<<6)|
ba£64V®ue
);

988 ++
ba£64CouÁ”
;

991 
c
=(
UCh¬
)((
b™s
<<4)|(
ba£64V®ue
>>2));

992 if(
	`isLeg®IMAP
(
c
)) {

994 
šDœeùMode
=
TRUE
;

995 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

996 
’dloİ
;

998 *
rg‘
++=
c
;

999 if(
off£ts
!=
NULL
) {

1000 *
off£ts
++=
sourûIndex
;

1001 
sourûIndex
=
ÃxtSourûIndex
-1;

1003 
by‹s
[0]=
b
;

1004 
by‹Index
=1;

1005 
b™s
=(
ušt16_t
)(
ba£64V®ue
&3);

1006 
ba£64CouÁ”
=3;

1009 
c
=(
UCh¬
)((
b™s
<<2)|(
ba£64V®ue
>>4));

1010 if(
	`isLeg®IMAP
(
c
)) {

1012 
šDœeùMode
=
TRUE
;

1013 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1014 
’dloİ
;

1016 *
rg‘
++=
c
;

1017 if(
off£ts
!=
NULL
) {

1018 *
off£ts
++=
sourûIndex
;

1019 
sourûIndex
=
ÃxtSourûIndex
-1;

1021 
by‹s
[0]=
b
;

1022 
by‹Index
=1;

1023 
b™s
=(
ušt16_t
)(
ba£64V®ue
&15);

1024 
ba£64CouÁ”
=6;

1027 
c
=(
UCh¬
)((
b™s
<<6)|
ba£64V®ue
);

1028 if(
	`isLeg®IMAP
(
c
)) {

1030 
šDœeùMode
=
TRUE
;

1031 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1032 
’dloİ
;

1034 *
rg‘
++=
c
;

1035 if(
off£ts
!=
NULL
) {

1036 *
off£ts
++=
sourûIndex
;

1037 
sourûIndex
=
ÃxtSourûIndex
;

1039 
by‹Index
=0;

1040 
b™s
=0;

1041 
ba£64CouÁ”
=0;

1047 } if(
ba£64V®ue
==-2) {

1049 
šDœeùMode
=
TRUE
;

1050 if(
ba£64CouÁ”
==-1) {

1052 *
rg‘
++=
AMPERSAND
;

1053 if(
off£ts
!=
NULL
) {

1054 *
off£ts
++=
sourûIndex
-1;

1058 if(
b™s
!=0 || (
ba£64CouÁ”
!=0 && base64Counter!=3 && base64Counter!=6)) {

1061 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1065 
sourûIndex
=
ÃxtSourûIndex
;

1066 
dœeùMode
;

1068 if(
ba£64CouÁ”
==-1) {

1071 --
sourûIndex
;

1072 
by‹s
[0]=
AMPERSAND
;

1073 
by‹s
[1]=
b
;

1074 
by‹Index
=2;

1079 
šDœeùMode
=
TRUE
;

1080 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1085 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1090 
’dloİ
:

1102 ifĞ
	`U_SUCCESS
(*
pE¼ÜCode
) &&

1103 !
šDœeùMode
 && 
by‹Index
==0 &&

1104 
pArgs
->
æush
 && 
sourû
>=
sourûLim™


1106 if(
ba£64CouÁ”
==-1) {

1109 
by‹s
[0]=
AMPERSAND
;

1110 
by‹Index
=1;

1114 
šDœeùMode
=
TRUE
;

1115 *
pE¼ÜCode
=
U_TRUNCATED_CHAR_FOUND
;

1119 
úv
->
toUnicodeStus
=((
ušt32_t
)
šDœeùMode
<<24)|((ušt32_t)((
ušt8_t
)
ba£64CouÁ”
)<<16)|(ušt32_t)
b™s
;

1120 
úv
->
toUL’gth
=
by‹Index
;

1123 
pArgs
->
sourû
=(const *)source;

1124 
pArgs
->
rg‘
=target;

1125 
pArgs
->
off£ts
=offsets;

1127 
	}
}

1130 
	$_IMAPFromUnicodeW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

1131 
UE¼ÜCode
 *
pE¼ÜCode
) {

1132 
UCÚv”‹r
 *
úv
;

1133 cÚ¡ 
UCh¬
 *
sourû
, *
sourûLim™
;

1134 
ušt8_t
 *
rg‘
, *
rg‘Lim™
;

1135 
št32_t
 *
off£ts
;

1137 
št32_t
 
Ëngth
, 
rg‘C­ac™y
, 
sourûIndex
;

1138 
UCh¬
 
c
;

1139 
ušt8_t
 
b
;

1142 
ušt8_t
 
b™s
;

1143 
št8_t
 
ba£64CouÁ”
;

1144 
UBoŞ
 
šDœeùMode
;

1147 
úv
=
pArgs
->
cÚv”‹r
;

1150 
sourû
=
pArgs
->source;

1151 
sourûLim™
=
pArgs
->sourceLimit;

1152 
rg‘
=(
ušt8_t
 *)
pArgs
->target;

1153 
rg‘Lim™
=(
ušt8_t
 *)
pArgs
->targetLimit;

1154 
off£ts
=
pArgs
->offsets;

1158 
ušt32_t
 
¡©us
=
úv
->
äomUnicodeStus
;

1159 
šDœeùMode
=(
UBoŞ
)((
¡©us
>>24)&1);

1160 
ba£64CouÁ”
=(
št8_t
)(
¡©us
>>16);

1161 
b™s
=(
ušt8_t
)
¡©us
;

1165 
sourûIndex
=0;

1167 if(
šDœeùMode
) {

1168 
dœeùMode
:

1169 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
);

1170 
rg‘C­ac™y
=(
št32_t
)(
rg‘Lim™
-
rg‘
);

1171 if(
Ëngth
>
rg‘C­ac™y
) {

1172 
Ëngth
=
rg‘C­ac™y
;

1174 
Ëngth
>0) {

1175 
c
=*
sourû
++;

1177 if(
	`šS‘DIMAP
(
c
)) {

1179 *
rg‘
++=(
ušt8_t
)
c
;

1180 if(
off£ts
!=
NULL
) {

1181 *
off£ts
++=
sourûIndex
++;

1183 } if(
c
==
AMPERSAND
) {

1185 *
rg‘
++=
AMPERSAND
;

1186 if(
rg‘
<
rg‘Lim™
) {

1187 *
rg‘
++=
MINUS
;

1188 if(
off£ts
!=
NULL
) {

1189 *
off£ts
++=
sourûIndex
;

1190 *
off£ts
++=
sourûIndex
++;

1193 
dœeùMode
;

1195 if(
off£ts
!=
NULL
) {

1196 *
off£ts
++=
sourûIndex
++;

1198 
úv
->
ch¬E¼ÜBufãr
[0]=
MINUS
;

1199 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

1200 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1205 --
sourû
;

1206 *
rg‘
++=
AMPERSAND
;

1207 if(
off£ts
!=
NULL
) {

1208 *
off£ts
++=
sourûIndex
;

1210 
šDœeùMode
=
FALSE
;

1211 
ba£64CouÁ”
=0;

1212 
unicodeMode
;

1214 --
Ëngth
;

1216 if(
sourû
<
sourûLim™
 && 
rg‘
>=
rg‘Lim™
) {

1218 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1221 
unicodeMode
:

1222 
sourû
<
sourûLim™
) {

1223 if(
rg‘
<
rg‘Lim™
) {

1224 
c
=*
sourû
++;

1225 if(
	`isLeg®IMAP
(
c
)) {

1227 
šDœeùMode
=
TRUE
;

1230 --
sourû
;

1233 if(
ba£64CouÁ”
!=0) {

1235 *
rg‘
++=
	`TO_BASE64_IMAP
(
b™s
);

1236 if(
off£ts
!=
NULL
) {

1237 *
off£ts
++=
sourûIndex
-1;

1241 if(
rg‘
<
rg‘Lim™
) {

1242 *
rg‘
++=
MINUS
;

1243 if(
off£ts
!=
NULL
) {

1244 *
off£ts
++=
sourûIndex
-1;

1247 
úv
->
ch¬E¼ÜBufãr
[0]=
MINUS
;

1248 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

1249 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1252 
dœeùMode
;

1263 
ba£64CouÁ”
) {

1265 
b
=(
ušt8_t
)(
c
>>10);

1266 *
rg‘
++=
	`TO_BASE64_IMAP
(
b
);

1267 if(
rg‘
<
rg‘Lim™
) {

1268 
b
=(
ušt8_t
)((
c
>>4)&0x3f);

1269 *
rg‘
++=
	`TO_BASE64_IMAP
(
b
);

1270 if(
off£ts
!=
NULL
) {

1271 *
off£ts
++=
sourûIndex
;

1272 *
off£ts
++=
sourûIndex
++;

1275 if(
off£ts
!=
NULL
) {

1276 *
off£ts
++=
sourûIndex
++;

1278 
b
=(
ušt8_t
)((
c
>>4)&0x3f);

1279 
úv
->
ch¬E¼ÜBufãr
[0]=
	`TO_BASE64_IMAP
(
b
);

1280 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

1281 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1283 
b™s
=(
ušt8_t
)((
c
&15)<<2);

1284 
ba£64CouÁ”
=1;

1287 
b
=(
ušt8_t
)(
b™s
|(
c
>>14));

1288 *
rg‘
++=
	`TO_BASE64_IMAP
(
b
);

1289 if(
rg‘
<
rg‘Lim™
) {

1290 
b
=(
ušt8_t
)((
c
>>8)&0x3f);

1291 *
rg‘
++=
	`TO_BASE64_IMAP
(
b
);

1292 if(
rg‘
<
rg‘Lim™
) {

1293 
b
=(
ušt8_t
)((
c
>>2)&0x3f);

1294 *
rg‘
++=
	`TO_BASE64_IMAP
(
b
);

1295 if(
off£ts
!=
NULL
) {

1296 *
off£ts
++=
sourûIndex
;

1297 *
off£ts
++=
sourûIndex
;

1298 *
off£ts
++=
sourûIndex
++;

1301 if(
off£ts
!=
NULL
) {

1302 *
off£ts
++=
sourûIndex
;

1303 *
off£ts
++=
sourûIndex
++;

1305 
b
=(
ušt8_t
)((
c
>>2)&0x3f);

1306 
úv
->
ch¬E¼ÜBufãr
[0]=
	`TO_BASE64_IMAP
(
b
);

1307 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

1308 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1311 if(
off£ts
!=
NULL
) {

1312 *
off£ts
++=
sourûIndex
++;

1314 
b
=(
ušt8_t
)((
c
>>8)&0x3f);

1315 
úv
->
ch¬E¼ÜBufãr
[0]=
	`TO_BASE64_IMAP
(
b
);

1316 
b
=(
ušt8_t
)((
c
>>2)&0x3f);

1317 
úv
->
ch¬E¼ÜBufãr
[1]=
	`TO_BASE64_IMAP
(
b
);

1318 
úv
->
ch¬E¼ÜBufãrL’gth
=2;

1319 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1321 
b™s
=(
ušt8_t
)((
c
&3)<<4);

1322 
ba£64CouÁ”
=2;

1325 
b
=(
ušt8_t
)(
b™s
|(
c
>>12));

1326 *
rg‘
++=
	`TO_BASE64_IMAP
(
b
);

1327 if(
rg‘
<
rg‘Lim™
) {

1328 
b
=(
ušt8_t
)((
c
>>6)&0x3f);

1329 *
rg‘
++=
	`TO_BASE64_IMAP
(
b
);

1330 if(
rg‘
<
rg‘Lim™
) {

1331 
b
=(
ušt8_t
)(
c
&0x3f);

1332 *
rg‘
++=
	`TO_BASE64_IMAP
(
b
);

1333 if(
off£ts
!=
NULL
) {

1334 *
off£ts
++=
sourûIndex
;

1335 *
off£ts
++=
sourûIndex
;

1336 *
off£ts
++=
sourûIndex
++;

1339 if(
off£ts
!=
NULL
) {

1340 *
off£ts
++=
sourûIndex
;

1341 *
off£ts
++=
sourûIndex
++;

1343 
b
=(
ušt8_t
)(
c
&0x3f);

1344 
úv
->
ch¬E¼ÜBufãr
[0]=
	`TO_BASE64_IMAP
(
b
);

1345 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

1346 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1349 if(
off£ts
!=
NULL
) {

1350 *
off£ts
++=
sourûIndex
++;

1352 
b
=(
ušt8_t
)((
c
>>6)&0x3f);

1353 
úv
->
ch¬E¼ÜBufãr
[0]=
	`TO_BASE64_IMAP
(
b
);

1354 
b
=(
ušt8_t
)(
c
&0x3f);

1355 
úv
->
ch¬E¼ÜBufãr
[1]=
	`TO_BASE64_IMAP
(
b
);

1356 
úv
->
ch¬E¼ÜBufãrL’gth
=2;

1357 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1359 
b™s
=0;

1360 
ba£64CouÁ”
=0;

1369 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1375 if(
pArgs
->
æush
 && 
sourû
>=
sourûLim™
) {

1377 if(!
šDœeùMode
) {

1378 if(
ba£64CouÁ”
!=0) {

1379 if(
rg‘
<
rg‘Lim™
) {

1380 *
rg‘
++=
	`TO_BASE64_IMAP
(
b™s
);

1381 if(
off£ts
!=
NULL
) {

1382 *
off£ts
++=
sourûIndex
-1;

1385 
úv
->
ch¬E¼ÜBufãr
[úv->
ch¬E¼ÜBufãrL’gth
++]=
	`TO_BASE64_IMAP
(
b™s
);

1386 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1390 if(
rg‘
<
rg‘Lim™
) {

1391 *
rg‘
++=
MINUS
;

1392 if(
off£ts
!=
NULL
) {

1393 *
off£ts
++=
sourûIndex
-1;

1396 
úv
->
ch¬E¼ÜBufãr
[úv->
ch¬E¼ÜBufãrL’gth
++]=
MINUS
;

1397 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1401 
úv
->
äomUnicodeStus
=(cnv->fromUnicodeStatus&0xf0000000)|0x1000000;

1404 
úv
->
äomUnicodeStus
=

1405 (
úv
->
äomUnicodeStus
&0xf0000000)|

1406 ((
ušt32_t
)
šDœeùMode
<<24)|((ušt32_t)
ba£64CouÁ”
<<16)|(ušt32_t)
b™s
;

1410 
pArgs
->
sourû
=source;

1411 
pArgs
->
rg‘
=(*)target;

1412 
pArgs
->
off£ts
=offsets;

1414 
	}
}

1416 cÚ¡ 
UCÚv”‹rIm¶
 
	g_IMAPIm¶
={

1417 
UCNV_IMAP_MAILBOX
,

1419 
NULL
,

1420 
NULL
,

1422 
_UTF7O³n
,

1423 
NULL
,

1424 
_UTF7Re£t
,

1426 
_IMAPToUnicodeW™hOff£ts
,

1427 
_IMAPToUnicodeW™hOff£ts
,

1428 
_IMAPFromUnicodeW™hOff£ts
,

1429 
_IMAPFromUnicodeW™hOff£ts
,

1430 
NULL
,

1432 
NULL
,

1433 
NULL
,

1434 
NULL
,

1435 
NULL
,

1436 
uúv_g‘Com¶‘eUnicodeS‘


1439 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_IMAPSticD©a
={

1440 (
UCÚv”‹rSticD©a
),

1443 
UCNV_IBM
, 
UCNV_IMAP_MAILBOX
,

1446 
FALSE
, FALSE,

1452 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_IMAPD©a
={

1453 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
)0),

1454 
NULL
, NULL, &
_IMAPSticD©a
, 
FALSE
, &
_IMAPIm¶
,

	@ucnv_u8.c

21 
	~"unicode/uty³s.h
"

23 #ià!
UCONFIG_NO_CONVERSION


25 
	~"unicode/uúv.h
"

26 
	~"uúv_bld.h
"

27 
	~"uúv_úv.h
"

28 
	~"cmemÜy.h
"

34 
U_CFUNC
 
uúv_äomUnicode_UTF8
(
UCÚv”‹rFromUnicodeArgs
 *
¬gs
,

35 
UE¼ÜCode
 *
”r
);

36 
U_CFUNC
 
uúv_äomUnicode_UTF8_OFFSETS_LOGIC
(
UCÚv”‹rFromUnicodeArgs
 *
¬gs
,

37 
UE¼ÜCode
 *
”r
);

46 
	#MAXIMUM_UCS2
 0x0000FFFF

	)

47 
	#MAXIMUM_UTF
 0x0010FFFF

	)

48 
	#MAXIMUM_UCS4
 0x7FFFFFFF

	)

49 
	#HALF_SHIFT
 10

	)

50 
	#HALF_BASE
 0x0010000

	)

51 
	#HALF_MASK
 0x3FF

	)

52 
	#SURROGATE_HIGH_START
 0xD800

	)

53 
	#SURROGATE_HIGH_END
 0xDBFF

	)

54 
	#SURROGATE_LOW_START
 0xDC00

	)

55 
	#SURROGATE_LOW_END
 0xDFFF

	)

58 
	#SURROGATE_LOW_BASE
 9216

	)

60 cÚ¡ 
ušt32_t
 
	goff£tsFromUTF8
[7] = {0,

61 (
ušt32_t
) 0x00000000, (uint32_t) 0x00003080, (uint32_t) 0x000E2080,

62 (
ušt32_t
) 0x03C82080, (uint32_t) 0xFA082080, (uint32_t) 0x82082080

67 cÚ¡ 
št8_t
 
	gby‹sFromUTF8
[256] = {

84 cÚ¡ 
ušt32_t


85 
	gutf8_mšCh¬32
[7]={ 0, 0, 0x80, 0x800, 0x10000, 0xffffffff, 0xffffffff };

87 
	$uúv_toUnicode_UTF8
 (
UCÚv”‹rToUnicodeArgs
 * 
¬gs
,

88 
UE¼ÜCode
 * 
”r
)

90 
UCÚv”‹r
 *
úv
 = 
¬gs
->
cÚv”‹r
;

91 cÚ¡ *
mySourû
 = (*è
¬gs
->
sourû
;

92 
UCh¬
 *
myT¬g‘
 = 
¬gs
->
rg‘
;

93 cÚ¡ *
sourûLim™
 = (*è
¬gs
->sourceLimit;

94 cÚ¡ 
UCh¬
 *
rg‘Lim™
 = 
¬gs
->targetLimit;

95 *
toUBy‹s
 = 
úv
->toUBytes;

96 
UBoŞ
 
isCESU8
 = (UBoŞ)(
úv
->
sh¬edD©a
 =ğ&
_CESU8D©a
);

97 
ušt32_t
 
ch
, 
ch2
 = 0;

98 
št32_t
 
i
, 
šBy‹s
;

101 ià(
úv
->
toUnicodeStus
 && 
myT¬g‘
 < 
rg‘Lim™
)

103 
šBy‹s
 = 
úv
->
mode
;

104 
i
 = 
úv
->
toUL’gth
;

105 
úv
->
toUL’gth
 = 0;

107 
ch
 = 
úv
->
toUnicodeStus
;

108 
úv
->
toUnicodeStus
 = 0;

109 
mÜeby‹s
;

113 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
)

115 
ch
 = *(
mySourû
++);

116 ià(
ch
 < 0x80)

118 *(
myT¬g‘
++èğ(
UCh¬
è
ch
;

123 
toUBy‹s
[0] = ()
ch
;

124 
šBy‹s
 = 
by‹sFromUTF8
[
ch
];

125 
i
 = 1;

127 
mÜeby‹s
:

128 
i
 < 
šBy‹s
)

130 ià(
mySourû
 < 
sourûLim™
)

132 
toUBy‹s
[
i
] = (è(
ch2
 = *
mySourû
);

133 ià(!
	`UTF8_IS_TRAIL
(
ch2
))

137 
ch
 = (ch << 6è+ 
ch2
;

138 ++
mySourû
;

139 
i
++;

144 
úv
->
toUnicodeStus
 = 
ch
;

145 
úv
->
mode
 = 
šBy‹s
;

146 
úv
->
toUL’gth
 = (
št8_t
è
i
;

147 
dÚefÜnow
;

152 
ch
 -ğ
off£tsFromUTF8
[
šBy‹s
];

166 ià(
i
 =ğ
šBy‹s
 && 
ch
 <ğ
MAXIMUM_UTF
 && ch >ğ
utf8_mšCh¬32
[i] &&

167 (
isCESU8
 ? 
i
 <ğ3 : !
	`UTF_IS_SURROGATE
(
ch
)))

170 ià(
ch
 <ğ
MAXIMUM_UCS2
)

173 *(
myT¬g‘
++èğ(
UCh¬
è
ch
;

178 
ch
 -ğ
HALF_BASE
;

179 *(
myT¬g‘
++èğ(
UCh¬
è((
ch
 >> 
HALF_SHIFT
è+ 
SURROGATE_HIGH_START
);

180 
ch
 = (ch & 
HALF_MASK
è+ 
SURROGATE_LOW_START
;

181 ià(
myT¬g‘
 < 
rg‘Lim™
)

183 *(
myT¬g‘
++èğ(
UCh¬
)
ch
;

188 
úv
->
UCh¬E¼ÜBufãr
[0] = (
UCh¬
è
ch
;

189 
úv
->
UCh¬E¼ÜBufãrL’gth
 = 1;

190 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

197 
úv
->
toUL’gth
 = (
št8_t
)
i
;

198 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

204 
dÚefÜnow
:

205 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
))

208 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

211 
¬gs
->
rg‘
 = 
myT¬g‘
;

212 
¬gs
->
sourû
 = (cÚ¡ *è
mySourû
;

213 
	}
}

215 
	$uúv_toUnicode_UTF8_OFFSETS_LOGIC
 (
UCÚv”‹rToUnicodeArgs
 * 
¬gs
,

216 
UE¼ÜCode
 * 
”r
)

218 
UCÚv”‹r
 *
úv
 = 
¬gs
->
cÚv”‹r
;

219 cÚ¡ *
mySourû
 = (*è
¬gs
->
sourû
;

220 
UCh¬
 *
myT¬g‘
 = 
¬gs
->
rg‘
;

221 
št32_t
 *
myOff£ts
 = 
¬gs
->
off£ts
;

222 
št32_t
 
off£tNum
 = 0;

223 cÚ¡ *
sourûLim™
 = (*è
¬gs
->sourceLimit;

224 cÚ¡ 
UCh¬
 *
rg‘Lim™
 = 
¬gs
->targetLimit;

225 *
toUBy‹s
 = 
úv
->toUBytes;

226 
UBoŞ
 
isCESU8
 = (UBoŞ)(
úv
->
sh¬edD©a
 =ğ&
_CESU8D©a
);

227 
ušt32_t
 
ch
, 
ch2
 = 0;

228 
št32_t
 
i
, 
šBy‹s
;

231 ià(
úv
->
toUnicodeStus
 && 
myT¬g‘
 < 
rg‘Lim™
)

233 
šBy‹s
 = 
úv
->
mode
;

234 
i
 = 
úv
->
toUL’gth
;

235 
úv
->
toUL’gth
 = 0;

237 
ch
 = 
úv
->
toUnicodeStus
;

238 
úv
->
toUnicodeStus
 = 0;

239 
mÜeby‹s
;

242 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
)

244 
ch
 = *(
mySourû
++);

245 ià(
ch
 < 0x80)

247 *(
myT¬g‘
++èğ(
UCh¬
è
ch
;

248 *(
myOff£ts
++èğ
off£tNum
++;

252 
toUBy‹s
[0] = ()
ch
;

253 
šBy‹s
 = 
by‹sFromUTF8
[
ch
];

254 
i
 = 1;

256 
mÜeby‹s
:

257 
i
 < 
šBy‹s
)

259 ià(
mySourû
 < 
sourûLim™
)

261 
toUBy‹s
[
i
] = (è(
ch2
 = *
mySourû
);

262 ià(!
	`UTF8_IS_TRAIL
(
ch2
))

266 
ch
 = (ch << 6è+ 
ch2
;

267 ++
mySourû
;

268 
i
++;

272 
úv
->
toUnicodeStus
 = 
ch
;

273 
úv
->
mode
 = 
šBy‹s
;

274 
úv
->
toUL’gth
 = (
št8_t
)
i
;

275 
dÚefÜnow
;

280 
ch
 -ğ
off£tsFromUTF8
[
šBy‹s
];

294 ià(
i
 =ğ
šBy‹s
 && 
ch
 <ğ
MAXIMUM_UTF
 && ch >ğ
utf8_mšCh¬32
[i] &&

295 (
isCESU8
 ? 
i
 <ğ3 : !
	`UTF_IS_SURROGATE
(
ch
)))

298 ià(
ch
 <ğ
MAXIMUM_UCS2
)

301 *(
myT¬g‘
++èğ(
UCh¬
è
ch
;

302 *(
myOff£ts
++èğ
off£tNum
;

307 
ch
 -ğ
HALF_BASE
;

308 *(
myT¬g‘
++èğ(
UCh¬
è((
ch
 >> 
HALF_SHIFT
è+ 
SURROGATE_HIGH_START
);

309 *(
myOff£ts
++èğ
off£tNum
;

310 
ch
 = (ch & 
HALF_MASK
è+ 
SURROGATE_LOW_START
;

311 ià(
myT¬g‘
 < 
rg‘Lim™
)

313 *(
myT¬g‘
++èğ(
UCh¬
)
ch
;

314 *(
myOff£ts
++èğ
off£tNum
;

318 
úv
->
UCh¬E¼ÜBufãr
[0] = (
UCh¬
è
ch
;

319 
úv
->
UCh¬E¼ÜBufãrL’gth
 = 1;

320 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

323 
off£tNum
 +ğ
i
;

327 
úv
->
toUL’gth
 = (
št8_t
)
i
;

328 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

334 
dÚefÜnow
:

335 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
))

337 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

340 
¬gs
->
rg‘
 = 
myT¬g‘
;

341 
¬gs
->
sourû
 = (cÚ¡ *è
mySourû
;

342 
¬gs
->
off£ts
 = 
myOff£ts
;

343 
	}
}

345 
U_CFUNC
 
	$uúv_äomUnicode_UTF8
 (
UCÚv”‹rFromUnicodeArgs
 * 
¬gs
,

346 
UE¼ÜCode
 * 
”r
)

348 
UCÚv”‹r
 *
úv
 = 
¬gs
->
cÚv”‹r
;

349 cÚ¡ 
UCh¬
 *
mySourû
 = 
¬gs
->
sourû
;

350 cÚ¡ 
UCh¬
 *
sourûLim™
 = 
¬gs
->sourceLimit;

351 
ušt8_t
 *
myT¬g‘
 = (ušt8_ˆ*è
¬gs
->
rg‘
;

352 cÚ¡ 
ušt8_t
 *
rg‘Lim™
 = (ušt8_ˆ*è
¬gs
->targetLimit;

353 
ušt8_t
 *
‹mpPŒ
;

354 
UCh¬32
 
ch
;

355 
ušt8_t
 
‹mpBuf
[4];

356 
št32_t
 
šdexToWr™e
;

357 
UBoŞ
 
isNÙCESU8
 = (UBoŞ)(
úv
->
sh¬edD©a
 !ğ&
_CESU8D©a
);

359 ià(
úv
->
äomUCh¬32
 && 
myT¬g‘
 < 
rg‘Lim™
)

361 
ch
 = 
úv
->
äomUCh¬32
;

362 
úv
->
äomUCh¬32
 = 0;

363 
lowsu¼og©e
;

366 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
)

368 
ch
 = *(
mySourû
++);

370 ià(
ch
 < 0x80)

372 *(
myT¬g‘
++èğ(
ušt8_t
è
ch
;

374 ià(
ch
 < 0x800)

376 *(
myT¬g‘
++èğ(
ušt8_t
è((
ch
 >> 6) | 0xc0);

377 ià(
myT¬g‘
 < 
rg‘Lim™
)

379 *(
myT¬g‘
++èğ(
ušt8_t
è((
ch
 & 0x3f) | 0x80);

383 
úv
->
ch¬E¼ÜBufãr
[0] = (
ušt8_t
è((
ch
 & 0x3f) | 0x80);

384 
úv
->
ch¬E¼ÜBufãrL’gth
 = 1;

385 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

390 if(
	`UTF_IS_SURROGATE
(
ch
è&& 
isNÙCESU8
) {

391 
lowsu¼og©e
:

392 ià(
mySourû
 < 
sourûLim™
) {

394 if(
	`UTF_IS_SURROGATE_FIRST
(
ch
è&& 
	`UTF_IS_SECOND_SURROGATE
(*
mySourû
)) {

396 
ch
=
	`UTF16_GET_PAIR_VALUE
(ch, *
mySourû
);

397 ++
mySourû
;

403 
úv
->
äomUCh¬32
 = 
ch
;

404 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

410 
úv
->
äomUCh¬32
 = 
ch
;

417 
‹mpPŒ
 = (((
rg‘Lim™
 - 
myT¬g‘
è>ğ4è? myT¬g‘ : 
‹mpBuf
);

419 ià(
ch
 <ğ
MAXIMUM_UCS2
) {

420 
šdexToWr™e
 = 2;

421 
‹mpPŒ
[0] = (
ušt8_t
è((
ch
 >> 12) | 0xe0);

424 
šdexToWr™e
 = 3;

425 
‹mpPŒ
[0] = (
ušt8_t
è((
ch
 >> 18) | 0xf0);

426 
‹mpPŒ
[1] = (
ušt8_t
è(((
ch
 >> 12) & 0x3f) | 0x80);

428 
‹mpPŒ
[
šdexToWr™e
-1] = (
ušt8_t
è(((
ch
 >> 6) & 0x3f) | 0x80);

429 
‹mpPŒ
[
šdexToWr™e
] = (
ušt8_t
è((
ch
 & 0x3f) | 0x80);

431 ià(
‹mpPŒ
 =ğ
myT¬g‘
) {

433 
myT¬g‘
 +ğ(
šdexToWr™e
 + 1);

437 ; 
‹mpPŒ
 <ğ(
‹mpBuf
 + 
šdexToWr™e
);empPtr++) {

438 ià(
myT¬g‘
 < 
rg‘Lim™
) {

439 *(
myT¬g‘
++èğ*
‹mpPŒ
;

442 
úv
->
ch¬E¼ÜBufãr
[úv->
ch¬E¼ÜBufãrL’gth
++] = *
‹mpPŒ
;

443 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

450 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
))

452 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

455 
¬gs
->
rg‘
 = (*è
myT¬g‘
;

456 
¬gs
->
sourû
 = 
mySourû
;

457 
	}
}

459 
U_CFUNC
 
	$uúv_äomUnicode_UTF8_OFFSETS_LOGIC
 (
UCÚv”‹rFromUnicodeArgs
 * 
¬gs
,

460 
UE¼ÜCode
 * 
”r
)

462 
UCÚv”‹r
 *
úv
 = 
¬gs
->
cÚv”‹r
;

463 cÚ¡ 
UCh¬
 *
mySourû
 = 
¬gs
->
sourû
;

464 
št32_t
 *
myOff£ts
 = 
¬gs
->
off£ts
;

465 cÚ¡ 
UCh¬
 *
sourûLim™
 = 
¬gs
->sourceLimit;

466 
ušt8_t
 *
myT¬g‘
 = (ušt8_ˆ*è
¬gs
->
rg‘
;

467 cÚ¡ 
ušt8_t
 *
rg‘Lim™
 = (ušt8_ˆ*è
¬gs
->targetLimit;

468 
ušt8_t
 *
‹mpPŒ
;

469 
UCh¬32
 
ch
;

470 
št32_t
 
off£tNum
, 
ÃxtSourûIndex
;

471 
št32_t
 
šdexToWr™e
;

472 
ušt8_t
 
‹mpBuf
[4];

473 
UBoŞ
 
isNÙCESU8
 = (UBoŞ)(
úv
->
sh¬edD©a
 !ğ&
_CESU8D©a
);

475 ià(
úv
->
äomUCh¬32
 && 
myT¬g‘
 < 
rg‘Lim™
)

477 
ch
 = 
úv
->
äomUCh¬32
;

478 
úv
->
äomUCh¬32
 = 0;

479 
off£tNum
 = -1;

480 
ÃxtSourûIndex
 = 0;

481 
lowsu¼og©e
;

483 
off£tNum
 = 0;

486 
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 < 
rg‘Lim™
)

488 
ch
 = *(
mySourû
++);

490 ià(
ch
 < 0x80)

492 *(
myOff£ts
++èğ
off£tNum
++;

493 *(
myT¬g‘
++èğ(è
ch
;

495 ià(
ch
 < 0x800)

497 *(
myOff£ts
++èğ
off£tNum
;

498 *(
myT¬g‘
++èğ(
ušt8_t
è((
ch
 >> 6) | 0xc0);

499 ià(
myT¬g‘
 < 
rg‘Lim™
)

501 *(
myOff£ts
++èğ
off£tNum
++;

502 *(
myT¬g‘
++èğ(
ušt8_t
è((
ch
 & 0x3f) | 0x80);

506 
úv
->
ch¬E¼ÜBufãr
[0] = (
ušt8_t
è((
ch
 & 0x3f) | 0x80);

507 
úv
->
ch¬E¼ÜBufãrL’gth
 = 1;

508 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

514 
ÃxtSourûIndex
 = 
off£tNum
 + 1;

516 if(
	`UTF_IS_SURROGATE
(
ch
è&& 
isNÙCESU8
) {

517 
lowsu¼og©e
:

518 ià(
mySourû
 < 
sourûLim™
) {

520 if(
	`UTF_IS_SURROGATE_FIRST
(
ch
è&& 
	`UTF_IS_SECOND_SURROGATE
(*
mySourû
)) {

522 
ch
=
	`UTF16_GET_PAIR_VALUE
(ch, *
mySourû
);

523 ++
mySourû
;

524 ++
ÃxtSourûIndex
;

530 
úv
->
äomUCh¬32
 = 
ch
;

531 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

537 
úv
->
äomUCh¬32
 = 
ch
;

544 
‹mpPŒ
 = (((
rg‘Lim™
 - 
myT¬g‘
è>ğ4è? myT¬g‘ : 
‹mpBuf
);

546 ià(
ch
 <ğ
MAXIMUM_UCS2
) {

547 
šdexToWr™e
 = 2;

548 
‹mpPŒ
[0] = (
ušt8_t
è((
ch
 >> 12) | 0xe0);

551 
šdexToWr™e
 = 3;

552 
‹mpPŒ
[0] = (
ušt8_t
è((
ch
 >> 18) | 0xf0);

553 
‹mpPŒ
[1] = (
ušt8_t
è(((
ch
 >> 12) & 0x3f) | 0x80);

555 
‹mpPŒ
[
šdexToWr™e
-1] = (
ušt8_t
è(((
ch
 >> 6) & 0x3f) | 0x80);

556 
‹mpPŒ
[
šdexToWr™e
] = (
ušt8_t
è((
ch
 & 0x3f) | 0x80);

558 ià(
‹mpPŒ
 =ğ
myT¬g‘
) {

560 
myT¬g‘
 +ğ(
šdexToWr™e
 + 1);

561 
myOff£ts
[0] = 
off£tNum
;

562 
myOff£ts
[1] = 
off£tNum
;

563 
myOff£ts
[2] = 
off£tNum
;

564 ià(
šdexToWr™e
 >= 3) {

565 
myOff£ts
[3] = 
off£tNum
;

567 
myOff£ts
 +ğ(
šdexToWr™e
 + 1);

571 ; 
‹mpPŒ
 <ğ(
‹mpBuf
 + 
šdexToWr™e
);empPtr++) {

572 ià(
myT¬g‘
 < 
rg‘Lim™
)

574 *(
myOff£ts
++èğ
off£tNum
;

575 *(
myT¬g‘
++èğ*
‹mpPŒ
;

579 
úv
->
ch¬E¼ÜBufãr
[úv->
ch¬E¼ÜBufãrL’gth
++] = *
‹mpPŒ
;

580 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

584 
off£tNum
 = 
ÃxtSourûIndex
;

588 ià(
mySourû
 < 
sourûLim™
 && 
myT¬g‘
 >ğ
rg‘Lim™
 && 
	`U_SUCCESS
(*
”r
))

590 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

593 
¬gs
->
rg‘
 = (*è
myT¬g‘
;

594 
¬gs
->
sourû
 = 
mySourû
;

595 
¬gs
->
off£ts
 = 
myOff£ts
;

596 
	}
}

598 
UCh¬32
 
	$uúv_g‘NextUCh¬_UTF8
(
UCÚv”‹rToUnicodeArgs
 *
¬gs
,

599 
UE¼ÜCode
 *
”r
) {

600 
UCÚv”‹r
 *
úv
;

601 cÚ¡ 
ušt8_t
 *
sourûIn™Ÿl
;

602 cÚ¡ 
ušt8_t
 *
sourû
;

603 
ušt16_t
 
exŒaBy‹sToWr™e
;

604 
ušt8_t
 
myBy‹
;

605 
UCh¬32
 
ch
;

606 
št8_t
 
i
, 
isLeg®Sequ’û
;

610 
úv
 = 
¬gs
->
cÚv”‹r
;

611 
sourûIn™Ÿl
 = 
sourû
 = (cÚ¡ 
ušt8_t
 *)
¬gs
->source;

612 ià(
sourû
 >ğ(cÚ¡ 
ušt8_t
 *)
¬gs
->
sourûLim™
)

615 *
”r
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

619 
myBy‹
 = (
ušt8_t
)*(
sourû
++);

620 ià(
myBy‹
 < 0x80)

622 
¬gs
->
sourû
 = (const *)source;

623  (
UCh¬32
)
myBy‹
;

626 
exŒaBy‹sToWr™e
 = (
ušt16_t
)
by‹sFromUTF8
[
myBy‹
];

627 ià(
exŒaBy‹sToWr™e
 == 0) {

628 
úv
->
toUBy‹s
[0] = 
myBy‹
;

629 
úv
->
toUL’gth
 = 1;

630 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

631 
¬gs
->
sourû
 = (const *)source;

636 ià(((cÚ¡ *)
sourû
 + 
exŒaBy‹sToWr™e
 - 1è> 
¬gs
->
sourûLim™
)

639 
úv
->
toUBy‹s
[0] = 
myBy‹
;

640 
i
 = 1;

641 *
”r
 = 
U_TRUNCATED_CHAR_FOUND
;

642 
sourû
 < (cÚ¡ 
ušt8_t
 *)
¬gs
->
sourûLim™
) {

643 if(
	`U8_IS_TRAIL
(
myBy‹
 = *
sourû
)) {

644 
úv
->
toUBy‹s
[
i
++] = 
myBy‹
;

645 ++
sourû
;

648 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

652 
úv
->
toUL’gth
 = 
i
;

653 
¬gs
->
sourû
 = (const *)source;

657 
isLeg®Sequ’û
 = 1;

658 
ch
 = 
myBy‹
 << 6;

659 
exŒaBy‹sToWr™e
)

663 
ch
 +ğ(
myBy‹
 = *
sourû
);

664 
ch
 <<= 6;

665 ià(!
	`UTF8_IS_TRAIL
(
myBy‹
))

667 
isLeg®Sequ’û
 = 0;

670 ++
sourû
;

672 
ch
 +ğ(
myBy‹
 = *
sourû
);

673 
ch
 <<= 6;

674 ià(!
	`UTF8_IS_TRAIL
(
myBy‹
))

676 
isLeg®Sequ’û
 = 0;

679 ++
sourû
;

681 
ch
 +ğ(
myBy‹
 = *
sourû
);

682 
ch
 <<= 6;

683 ià(!
	`UTF8_IS_TRAIL
(
myBy‹
))

685 
isLeg®Sequ’û
 = 0;

688 ++
sourû
;

690 
ch
 +ğ(
myBy‹
 = *
sourû
);

691 
ch
 <<= 6;

692 ià(!
	`UTF8_IS_TRAIL
(
myBy‹
))

694 
isLeg®Sequ’û
 = 0;

697 ++
sourû
;

699 
ch
 +ğ(
myBy‹
 = *
sourû
);

700 ià(!
	`UTF8_IS_TRAIL
(
myBy‹
))

702 
isLeg®Sequ’û
 = 0;

705 ++
sourû
;

707 
ch
 -ğ
off£tsFromUTF8
[
exŒaBy‹sToWr™e
];

708 
¬gs
->
sourû
 = (const *)source;

721 ià(
isLeg®Sequ’û
 &&

722 (
ušt32_t
)
ch
 <ğ
MAXIMUM_UTF
 &&

723 (
ušt32_t
)
ch
 >ğ
utf8_mšCh¬32
[
exŒaBy‹sToWr™e
] &&

724 !
	`U_IS_SURROGATE
(
ch
)

726  
ch
;

729 
i
 = 0; 
sourûIn™Ÿl
 < 
sourû
; ++i) {

730 
úv
->
toUBy‹s
[
i
] = *
sourûIn™Ÿl
++;

732 
úv
->
toUL’gth
 = 
i
;

733 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

735 
	}
}

740 cÚ¡ 
UCh¬32


741 
	gutf8_mšLeg®
[5]={ 0, 0, 0x80, 0x800, 0x10000 };

744 cÚ¡ 
UCh¬32


745 
	gutf8_off£ts
[7]={ 0, 0, 0x3080, 0xE2080, 0x3C82080 };

749 
	$uúv_UTF8FromUTF8
(
UCÚv”‹rFromUnicodeArgs
 *
pFromUArgs
,

750 
UCÚv”‹rToUnicodeArgs
 *
pToUArgs
,

751 
UE¼ÜCode
 *
pE¼ÜCode
) {

752 
UCÚv”‹r
 *
utf8
, *
úv
;

753 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

754 
ušt8_t
 *
rg‘
;

755 
št32_t
 
rg‘C­ac™y
;

756 
št32_t
 
couÁ
;

758 
št8_t
 
ŞdToUL’gth
, 
toUL’gth
, 
toULim™
;

760 
UCh¬32
 
c
;

761 
ušt8_t
 
b
, 
t1
, 
t2
;

764 
utf8
=
pToUArgs
->
cÚv”‹r
;

765 
úv
=
pFromUArgs
->
cÚv”‹r
;

766 
sourû
=(
ušt8_t
 *)
pToUArgs
->source;

767 
sourûLim™
=(
ušt8_t
 *)
pToUArgs
->sourceLimit;

768 
rg‘
=(
ušt8_t
 *)
pFromUArgs
->target;

769 
rg‘C­ac™y
=(
št32_t
)(
pFromUArgs
->
rg‘Lim™
-pFromUArgs->
rg‘
);

772 
c
=(
UCh¬32
)
utf8
->
toUnicodeStus
;

773 if(
c
!=0) {

774 
toUL’gth
=
ŞdToUL’gth
=
utf8
->toULength;

775 
toULim™
=(
št8_t
)
utf8
->
mode
;

777 
toUL’gth
=
ŞdToUL’gth
=
toULim™
=0;

780 
couÁ
=(
št32_t
)(
sourûLim™
-
sourû
)+
ŞdToUL’gth
;

781 if(
couÁ
<
toULim™
) {

786 } if(
rg‘C­ac™y
<
toULim™
) {

791 *
pE¼ÜCode
=
U_USING_DEFAULT_WARNING
;

810 
št32_t
 
i
;

812 if(
couÁ
>
rg‘C­ac™y
) {

813 
couÁ
=
rg‘C­ac™y
;

816 
i
=0;

817 
i
<3 && i<(
couÁ
-
toULim™
)) {

818 
b
=
sourû
[
couÁ
-
ŞdToUL’gth
-
i
-1];

819 if(
	`U8_IS_TRAIL
(
b
)) {

820 ++
i
;

822 if(
i
<
utf8_couÁT¿By‹s
[
b
]) {

824 
couÁ
-=
i
+1;

831 if(
c
!=0) {

832 
utf8
->
toUnicodeStus
=0;

833 
utf8
->
toUL’gth
=0;

834 
mÜeBy‹s
;

839 
couÁ
>0) {

840 
b
=*
sourû
++;

841 if((
št8_t
)
b
>=0) {

843 *
rg‘
++=
b
;

844 --
couÁ
;

847 if(
b
>0xe0) {

849 (
t1
=
sourû
[0]è>ğ0x80 && ((
b
<0xed && (t1 <= 0xbf)) ||

850 (
b
==0xed && (
t1
 <= 0x9f))) &&

851 (
t2
=
sourû
[1]) >= 0x80 &&2 <= 0xbf

853 
sourû
+=2;

854 *
rg‘
++=
b
;

855 *
rg‘
++=
t1
;

856 *
rg‘
++=
t2
;

857 
couÁ
-=3;

860 } if(
b
<0xe0) {

862 
b
>=0xc2 &&

863 (
t1
=*
sourû
) >= 0x80 &&1 <= 0xbf

865 ++
sourû
;

866 *
rg‘
++=
b
;

867 *
rg‘
++=
t1
;

868 
couÁ
-=2;

871 } if(
b
==0xe0) {

873 (
t1
=
sourû
[0]) >= 0xa0 &&1 <= 0xbf &&

874 (
t2
=
sourû
[1]) >= 0x80 &&2 <= 0xbf

876 
sourû
+=2;

877 *
rg‘
++=
b
;

878 *
rg‘
++=
t1
;

879 *
rg‘
++=
t2
;

880 
couÁ
-=3;

886 
ŞdToUL’gth
=0;

887 
toUL’gth
=1;

888 
toULim™
=
utf8_couÁT¿By‹s
[
b
]+1;

889 
c
=
b
;

890 
mÜeBy‹s
:

891 
toUL’gth
<
toULim™
) {

892 if(
sourû
<
sourûLim™
) {

893 
b
=*
sourû
;

894 if(
	`U8_IS_TRAIL
(
b
)) {

895 ++
sourû
;

896 ++
toUL’gth
;

897 
c
=(c<<6)+
b
;

903 
sourû
-=(
toUL’gth
-
ŞdToUL’gth
);

904 
ŞdToUL’gth
<
toUL’gth
) {

905 
utf8
->
toUBy‹s
[
ŞdToUL’gth
++]=*
sourû
++;

907 
utf8
->
toUnicodeStus
=
c
;

908 
utf8
->
toUL’gth
=toULength;

909 
utf8
->
mode
=
toULim™
;

910 
pToUArgs
->
sourû
=(*)source;

911 
pFromUArgs
->
rg‘
=(*)target;

916 ifĞ
toUL’gth
==
toULim™
 &&

917 (
toUL’gth
==3 ||oULength==2) &&

918 (
c
-=
utf8_off£ts
[
toUL’gth
])>=
utf8_mšLeg®
[toULength] &&

919 (
c
<=0xd7ff || 0xe000<=c)

923 
toUL’gth
==
toULim™
 &&oULength==4 &&

924 (0x10000<=(
c
-=
utf8_off£ts
[4]) && c<=0x10ffff)

929 
sourû
-=(
toUL’gth
-
ŞdToUL’gth
);

930 
ŞdToUL’gth
<
toUL’gth
) {

931 
utf8
->
toUBy‹s
[
ŞdToUL’gth
++]=*
sourû
++;

933 
utf8
->
toUL’gth
=toULength;

934 
pToUArgs
->
sourû
=(*)source;

935 
pFromUArgs
->
rg‘
=(*)target;

936 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

942 
št8_t
 
i
;

944 
i
=0; i<
ŞdToUL’gth
; ++i) {

945 *
rg‘
++=
utf8
->
toUBy‹s
[
i
];

947 
sourû
-=(
toUL’gth
-
ŞdToUL’gth
);

948 ; 
i
<
toUL’gth
; ++i) {

949 *
rg‘
++=*
sourû
++;

951 
couÁ
-=
toUL’gth
;

956 if(
	`U_SUCCESS
(*
pE¼ÜCode
è&& 
sourû
<
sourûLim™
) {

957 if(
rg‘
==(cÚ¡ 
ušt8_t
 *)
pFromUArgs
->
rg‘Lim™
) {

958 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

960 
b
=*
sourû
;

961 
toULim™
=
utf8_couÁT¿By‹s
[
b
]+1;

962 if(
toULim™
>(
sourûLim™
-
sourû
)) {

964 
toUL’gth
=0;

965 
c
=
b
;

967 
utf8
->
toUBy‹s
[
toUL’gth
++]=
b
;

968 if(++
sourû
==
sourûLim™
) {

970 
utf8
->
toUnicodeStus
=
c
;

971 
utf8
->
toUL’gth
=toULength;

972 
utf8
->
mode
=
toULim™
;

974 } if(!
	`U8_IS_TRAIL
(
b
=*
sourû
)) {

976 
utf8
->
toUL’gth
=toULength;

977 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

980 
c
=(c<<6)+
b
;

984 *
pE¼ÜCode
=
U_USING_DEFAULT_WARNING
;

990 
pToUArgs
->
sourû
=(*)source;

991 
pFromUArgs
->
rg‘
=(*)target;

992 
	}
}

996 cÚ¡ 
UCÚv”‹rIm¶
 
	g_UTF8Im¶
={

997 
UCNV_UTF8
,

999 
NULL
,

1000 
NULL
,

1002 
NULL
,

1003 
NULL
,

1004 
NULL
,

1006 
uúv_toUnicode_UTF8
,

1007 
uúv_toUnicode_UTF8_OFFSETS_LOGIC
,

1008 
uúv_äomUnicode_UTF8
,

1009 
uúv_äomUnicode_UTF8_OFFSETS_LOGIC
,

1010 
uúv_g‘NextUCh¬_UTF8
,

1012 
NULL
,

1013 
NULL
,

1014 
NULL
,

1015 
NULL
,

1016 
uúv_g‘NÚSu¼og©eUnicodeS‘
,

1018 
uúv_UTF8FromUTF8
,

1019 
uúv_UTF8FromUTF8


1023 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_UTF8SticD©a
={

1024 (
UCÚv”‹rSticD©a
),

1026 1208, 
UCNV_IBM
, 
UCNV_UTF8
,

1028 { 0xef, 0xbf, 0xbd, 0 },3,
FALSE
,FALSE,

1035 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_UTF8D©a
={

1036 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),

1037 
NULL
, NULL, &
_UTF8SticD©a
, 
FALSE
, &
_UTF8Im¶
,

1043 cÚ¡ 
UCÚv”‹rIm¶
 
	g_CESU8Im¶
={

1044 
UCNV_CESU8
,

1046 
NULL
,

1047 
NULL
,

1049 
NULL
,

1050 
NULL
,

1051 
NULL
,

1053 
uúv_toUnicode_UTF8
,

1054 
uúv_toUnicode_UTF8_OFFSETS_LOGIC
,

1055 
uúv_äomUnicode_UTF8
,

1056 
uúv_äomUnicode_UTF8_OFFSETS_LOGIC
,

1057 
NULL
,

1059 
NULL
,

1060 
NULL
,

1061 
NULL
,

1062 
NULL
,

1063 
uúv_g‘Com¶‘eUnicodeS‘


1066 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_CESU8SticD©a
={

1067 (
UCÚv”‹rSticD©a
),

1070 
UCNV_UNKNOWN
, 
UCNV_CESU8
, 1, 3,

1071 { 0xef, 0xbf, 0xbd, 0 },3,
FALSE
,FALSE,

1078 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_CESU8D©a
={

1079 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),

1080 
NULL
, NULL, &
_CESU8SticD©a
, 
FALSE
, &
_CESU8Im¶
,

	@ucnvbocu.c

20 
	~"unicode/uty³s.h
"

22 #ià!
UCONFIG_NO_CONVERSION


24 
	~"unicode/uúv.h
"

25 
	~"unicode/uúv_cb.h
"

26 
	~"uúv_bld.h
"

27 
	~"uúv_úv.h
"

51 
	#BOCU1_ASCII_PREV
 0x40

	)

54 
	#BOCU1_MIN
 0x21

	)

55 
	#BOCU1_MIDDLE
 0x90

	)

56 
	#BOCU1_MAX_LEAD
 0xã

	)

57 
	#BOCU1_MAX_TRAIL
 0xff

	)

58 
	#BOCU1_RESET
 0xff

	)

61 
	#BOCU1_COUNT
 (
BOCU1_MAX_LEAD
-
BOCU1_MIN
+1)

	)

64 
	#BOCU1_TRAIL_CONTROLS_COUNT
 20

	)

65 
	#BOCU1_TRAIL_BYTE_OFFSET
 (
BOCU1_MIN
-
BOCU1_TRAIL_CONTROLS_COUNT
)

	)

68 
	#BOCU1_TRAIL_COUNT
 ((
BOCU1_MAX_TRAIL
-
BOCU1_MIN
+1)+
BOCU1_TRAIL_CONTROLS_COUNT
)

	)

74 
	#BOCU1_SINGLE
 64

	)

77 
	#BOCU1_LEAD_2
 43

	)

78 
	#BOCU1_LEAD_3
 3

	)

79 
	#BOCU1_LEAD_4
 1

	)

82 
	#BOCU1_REACH_POS_1
 (
BOCU1_SINGLE
-1)

	)

83 
	#BOCU1_REACH_NEG_1
 (-
BOCU1_SINGLE
)

	)

86 
	#BOCU1_REACH_POS_2
 (
BOCU1_REACH_POS_1
+
BOCU1_LEAD_2
*
BOCU1_TRAIL_COUNT
)

	)

87 
	#BOCU1_REACH_NEG_2
 (
BOCU1_REACH_NEG_1
-
BOCU1_LEAD_2
*
BOCU1_TRAIL_COUNT
)

	)

90 
	#BOCU1_REACH_POS_3
 \

91 (
BOCU1_REACH_POS_2
+
BOCU1_LEAD_3
*
BOCU1_TRAIL_COUNT
*BOCU1_TRAIL_COUNT)

	)

93 
	#BOCU1_REACH_NEG_3
 (
BOCU1_REACH_NEG_2
-
BOCU1_LEAD_3
*
BOCU1_TRAIL_COUNT
*BOCU1_TRAIL_COUNT)

	)

96 
	#BOCU1_START_POS_2
 (
BOCU1_MIDDLE
+
BOCU1_REACH_POS_1
+1)

	)

97 
	#BOCU1_START_POS_3
 (
BOCU1_START_POS_2
+
BOCU1_LEAD_2
)

	)

98 
	#BOCU1_START_POS_4
 (
BOCU1_START_POS_3
+
BOCU1_LEAD_3
)

	)

101 
	#BOCU1_START_NEG_2
 (
BOCU1_MIDDLE
+
BOCU1_REACH_NEG_1
)

	)

102 
	#BOCU1_START_NEG_3
 (
BOCU1_START_NEG_2
-
BOCU1_LEAD_2
)

	)

103 
	#BOCU1_START_NEG_4
 (
BOCU1_START_NEG_3
-
BOCU1_LEAD_3
)

	)

107 
	#BOCU1_LENGTH_FROM_LEAD
(
Ëad
) \

108 ((
BOCU1_START_NEG_2
<=(
Ëad
è&& (Ëad)<
BOCU1_START_POS_2
) ? 1 : \

109 (
BOCU1_START_NEG_3
<=(
Ëad
è&& (Ëad)<
BOCU1_START_POS_3
) ? 2 : \

110 (
BOCU1_START_NEG_4
<=(
Ëad
è&& (Ëad)<
BOCU1_START_POS_4
è? 3 : 4)

	)

113 
	#BOCU1_LENGTH_FROM_PACKED
(
·cked
) \

114 ((
ušt32_t
)(
·cked
)<0x04000000 ? (·cked)>>24 : 4)

	)

144 
	#BOCU1_TRAIL_TO_BYTE
(
t
è(Ñ)>=
BOCU1_TRAIL_CONTROLS_COUNT
 ? (t)+
BOCU1_TRAIL_BYTE_OFFSET
 : 
bocu1T¿ToBy‹
[t])

	)

152 cÚ¡ 
št8_t


153 
	gbocu1By‹ToT¿
[
BOCU1_MIN
]={

175 cÚ¡ 
št8_t


176 
	gbocu1T¿ToBy‹
[
BOCU1_TRAIL_CONTROLS_COUNT
]={

200 
	#NEGDIVMOD
(
n
, 
d
, 
m
) { \

201 (
m
)=(
n
)%(
d
); \

202 (
n
)/=(
d
); \

203 if((
m
)<0) { \

204 --(
n
); \

205 (
m
)+=(
d
); \

207 }

	)

211 
	#BOCU1_SIMPLE_PREV
(
c
è(((c)&~0x7f)+
BOCU1_ASCII_PREV
)

	)

220 
U_INLINE
 
št32_t


221 
	$bocu1P»v
(
št32_t
 
c
) {

223 ifĞ
c
<=0x309f) {

226 } if(0x4e00<=
c
 && c<=0x9fa5) {

228  0x4e00-
BOCU1_REACH_NEG_2
;

229 } if(0xac00<=
c
 ) {

234  
	`BOCU1_SIMPLE_PREV
(
c
);

236 
	}
}

239 
	#BOCU1_PREV
(
c
è((c)<0x3040 || (c)>0xd7a3 ? 
	`BOCU1_SIMPLE_PREV
(cè: 
	`bocu1P»v
(c))

	)

270 
št32_t


271 
	$·ckDiff
(
št32_t
 
diff
) {

272 
št32_t
 
»suÉ
, 
m
;

274 if(
diff
>=
BOCU1_REACH_NEG_1
) {

277 if(
diff
<=
BOCU1_REACH_POS_1
) {

279  0x01000000|(
BOCU1_MIDDLE
+
diff
);

282 if(
diff
<=
BOCU1_REACH_POS_2
) {

284 
diff
-=
BOCU1_REACH_POS_1
+1;

285 
»suÉ
=0x02000000;

287 
m
=
diff
%
BOCU1_TRAIL_COUNT
;

288 
diff
/=
BOCU1_TRAIL_COUNT
;

289 
»suÉ
|=
	`BOCU1_TRAIL_TO_BYTE
(
m
);

291 
»suÉ
|=(
BOCU1_START_POS_2
+
diff
)<<8;

292 } if(
diff
<=
BOCU1_REACH_POS_3
) {

294 
diff
-=
BOCU1_REACH_POS_2
+1;

295 
»suÉ
=0x03000000;

297 
m
=
diff
%
BOCU1_TRAIL_COUNT
;

298 
diff
/=
BOCU1_TRAIL_COUNT
;

299 
»suÉ
|=
	`BOCU1_TRAIL_TO_BYTE
(
m
);

301 
m
=
diff
%
BOCU1_TRAIL_COUNT
;

302 
diff
/=
BOCU1_TRAIL_COUNT
;

303 
»suÉ
|=
	`BOCU1_TRAIL_TO_BYTE
(
m
)<<8;

305 
»suÉ
|=(
BOCU1_START_POS_3
+
diff
)<<16;

308 
diff
-=
BOCU1_REACH_POS_3
+1;

310 
m
=
diff
%
BOCU1_TRAIL_COUNT
;

311 
diff
/=
BOCU1_TRAIL_COUNT
;

312 
»suÉ
=
	`BOCU1_TRAIL_TO_BYTE
(
m
);

314 
m
=
diff
%
BOCU1_TRAIL_COUNT
;

315 
diff
/=
BOCU1_TRAIL_COUNT
;

316 
»suÉ
|=
	`BOCU1_TRAIL_TO_BYTE
(
m
)<<8;

322 
»suÉ
|=
	`BOCU1_TRAIL_TO_BYTE
(
diff
)<<16;

324 
»suÉ
|=((
ušt32_t
)
BOCU1_START_POS_4
)<<24;

328 if(
diff
>=
BOCU1_REACH_NEG_2
) {

330 
diff
-=
BOCU1_REACH_NEG_1
;

331 
»suÉ
=0x02000000;

333 
	`NEGDIVMOD
(
diff
, 
BOCU1_TRAIL_COUNT
, 
m
);

334 
»suÉ
|=
	`BOCU1_TRAIL_TO_BYTE
(
m
);

336 
»suÉ
|=(
BOCU1_START_NEG_2
+
diff
)<<8;

337 } if(
diff
>=
BOCU1_REACH_NEG_3
) {

339 
diff
-=
BOCU1_REACH_NEG_2
;

340 
»suÉ
=0x03000000;

342 
	`NEGDIVMOD
(
diff
, 
BOCU1_TRAIL_COUNT
, 
m
);

343 
»suÉ
|=
	`BOCU1_TRAIL_TO_BYTE
(
m
);

345 
	`NEGDIVMOD
(
diff
, 
BOCU1_TRAIL_COUNT
, 
m
);

346 
»suÉ
|=
	`BOCU1_TRAIL_TO_BYTE
(
m
)<<8;

348 
»suÉ
|=(
BOCU1_START_NEG_3
+
diff
)<<16;

351 
diff
-=
BOCU1_REACH_NEG_3
;

353 
	`NEGDIVMOD
(
diff
, 
BOCU1_TRAIL_COUNT
, 
m
);

354 
»suÉ
=
	`BOCU1_TRAIL_TO_BYTE
(
m
);

356 
	`NEGDIVMOD
(
diff
, 
BOCU1_TRAIL_COUNT
, 
m
);

357 
»suÉ
|=
	`BOCU1_TRAIL_TO_BYTE
(
m
)<<8;

364 
m
=
diff
+
BOCU1_TRAIL_COUNT
;

365 
»suÉ
|=
	`BOCU1_TRAIL_TO_BYTE
(
m
)<<16;

367 
»suÉ
|=
BOCU1_MIN
<<24;

370  
»suÉ
;

371 
	}
}

376 
	#DIFF_IS_SINGLE
(
diff
è(
BOCU1_REACH_NEG_1
<=(diffè&& (diff)<=
BOCU1_REACH_POS_1
)

	)

379 
	#PACK_SINGLE_DIFF
(
diff
è(
BOCU1_MIDDLE
+(diff))

	)

382 
	#DIFF_IS_DOUBLE
(
diff
è(
BOCU1_REACH_NEG_2
<=(diffè&& (diff)<=
BOCU1_REACH_POS_2
)

	)

385 
	$_Bocu1FromUnicodeW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

386 
UE¼ÜCode
 *
pE¼ÜCode
) {

387 
UCÚv”‹r
 *
úv
;

388 cÚ¡ 
UCh¬
 *
sourû
, *
sourûLim™
;

389 
ušt8_t
 *
rg‘
;

390 
št32_t
 
rg‘C­ac™y
;

391 
št32_t
 *
off£ts
;

393 
št32_t
 
´ev
, 
c
, 
diff
;

395 
št32_t
 
sourûIndex
, 
ÃxtSourûIndex
;

397 
	`U_ALIGN_CODE
(16)

400 
úv
=
pArgs
->
cÚv”‹r
;

401 
sourû
=
pArgs
->source;

402 
sourûLim™
=
pArgs
->sourceLimit;

403 
rg‘
=(
ušt8_t
 *)
pArgs
->target;

404 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

405 
off£ts
=
pArgs
->offsets;

408 
c
=
úv
->
äomUCh¬32
;

409 
´ev
=(
št32_t
)
úv
->
äomUnicodeStus
;

410 if(
´ev
==0) {

411 
´ev
=
BOCU1_ASCII_PREV
;

415 
sourûIndex
ğ
c
==0 ? 0 : -1;

416 
ÃxtSourûIndex
=0;

419 if(
c
!=0 && 
rg‘C­ac™y
>0) {

420 
g‘T¿
;

423 
ç¡SšgË
:

426 
diff
=(
št32_t
)(
sourûLim™
-
sourû
);

427 if(
rg‘C­ac™y
>
diff
) {

428 
rg‘C­ac™y
=
diff
;

430 
rg‘C­ac™y
>0 && (
c
=*
sourû
)<0x3000) {

431 if(
c
<=0x20) {

432 if(
c
!=0x20) {

433 
´ev
=
BOCU1_ASCII_PREV
;

435 *
rg‘
++=(
ušt8_t
)
c
;

436 *
off£ts
++=
ÃxtSourûIndex
++;

437 ++
sourû
;

438 --
rg‘C­ac™y
;

440 
diff
=
c
-
´ev
;

441 if(
	`DIFF_IS_SINGLE
(
diff
)) {

442 
´ev
=
	`BOCU1_SIMPLE_PREV
(
c
);

443 *
rg‘
++=(
ušt8_t
)
	`PACK_SINGLE_DIFF
(
diff
);

444 *
off£ts
++=
ÃxtSourûIndex
++;

445 ++
sourû
;

446 --
rg‘C­ac™y
;

453 
rg‘C­ac™y
=(
št32_t
)((cÚ¡ 
ušt8_t
 *)
pArgs
->
rg‘Lim™
-
rg‘
);

454 
sourûIndex
=
ÃxtSourûIndex
;

457 
sourû
<
sourûLim™
) {

458 if(
rg‘C­ac™y
>0) {

459 
c
=*
sourû
++;

460 ++
ÃxtSourûIndex
;

462 if(
c
<=0x20) {

468 if(
c
!=0x20) {

469 
´ev
=
BOCU1_ASCII_PREV
;

471 *
rg‘
++=(
ušt8_t
)
c
;

472 *
off£ts
++=
sourûIndex
;

473 --
rg‘C­ac™y
;

475 
sourûIndex
=
ÃxtSourûIndex
;

479 if(
	`UTF_IS_LEAD
(
c
)) {

480 
g‘T¿
:

481 if(
sourû
<
sourûLim™
) {

483 
UCh¬
 
Œa
=*
sourû
;

484 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

485 ++
sourû
;

486 ++
ÃxtSourûIndex
;

487 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
Œa
);

491 
c
=-c;

505 
diff
=
c
-
´ev
;

506 
´ev
=
	`BOCU1_PREV
(
c
);

507 if(
	`DIFF_IS_SINGLE
(
diff
)) {

508 *
rg‘
++=(
ušt8_t
)
	`PACK_SINGLE_DIFF
(
diff
);

509 *
off£ts
++=
sourûIndex
;

510 --
rg‘C­ac™y
;

511 
sourûIndex
=
ÃxtSourûIndex
;

512 if(
c
<0x3000) {

513 
ç¡SšgË
;

515 } if(
	`DIFF_IS_DOUBLE
(
diff
è&& 2<=
rg‘C­ac™y
) {

517 
št32_t
 
m
;

519 if(
diff
>=0) {

520 
diff
-=
BOCU1_REACH_POS_1
+1;

521 
m
=
diff
%
BOCU1_TRAIL_COUNT
;

522 
diff
/=
BOCU1_TRAIL_COUNT
;

523 
diff
+=
BOCU1_START_POS_2
;

525 
diff
-=
BOCU1_REACH_NEG_1
;

526 
	`NEGDIVMOD
(
diff
, 
BOCU1_TRAIL_COUNT
, 
m
);

527 
diff
+=
BOCU1_START_NEG_2
;

529 *
rg‘
++=(
ušt8_t
)
diff
;

530 *
rg‘
++=(
ušt8_t
)
	`BOCU1_TRAIL_TO_BYTE
(
m
);

531 *
off£ts
++=
sourûIndex
;

532 *
off£ts
++=
sourûIndex
;

533 
rg‘C­ac™y
-=2;

534 
sourûIndex
=
ÃxtSourûIndex
;

536 
št32_t
 
Ëngth
;

538 
diff
=
	`·ckDiff
(diff);

539 
Ëngth
=
	`BOCU1_LENGTH_FROM_PACKED
(
diff
);

543 if(
Ëngth
<=
rg‘C­ac™y
) {

544 
Ëngth
) {

547 *
rg‘
++=(
ušt8_t
)(
diff
>>24);

548 *
off£ts
++=
sourûIndex
;

550 *
rg‘
++=(
ušt8_t
)(
diff
>>16);

551 *
off£ts
++=
sourûIndex
;

553 *
rg‘
++=(
ušt8_t
)(
diff
>>8);

554 *
off£ts
++=
sourûIndex
;

556 *
rg‘
++=(
ušt8_t
)
diff
;

557 *
off£ts
++=
sourûIndex
;

562 
rg‘C­ac™y
-=
Ëngth
;

563 
sourûIndex
=
ÃxtSourûIndex
;

565 
ušt8_t
 *
ch¬E¼ÜBufãr
;

574 
Ëngth
-=
rg‘C­ac™y
;

575 
ch¬E¼ÜBufãr
=(
ušt8_t
 *)
úv
->charErrorBuffer;

576 
Ëngth
) {

579 *
ch¬E¼ÜBufãr
++=(
ušt8_t
)(
diff
>>16);

581 *
ch¬E¼ÜBufãr
++=(
ušt8_t
)(
diff
>>8);

583 *
ch¬E¼ÜBufãr
=(
ušt8_t
)
diff
;

588 
úv
->
ch¬E¼ÜBufãrL’gth
=(
št8_t
)
Ëngth
;

591 
diff
>>=8*
Ëngth
;

592 
rg‘C­ac™y
) {

595 *
rg‘
++=(
ušt8_t
)(
diff
>>16);

596 *
off£ts
++=
sourûIndex
;

598 *
rg‘
++=(
ušt8_t
)(
diff
>>8);

599 *
off£ts
++=
sourûIndex
;

601 *
rg‘
++=(
ušt8_t
)
diff
;

602 *
off£ts
++=
sourûIndex
;

609 
rg‘C­ac™y
=0;

610 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

616 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

622 
úv
->
äomUCh¬32
ğ
c
<0 ? -c : 0;

623 
úv
->
äomUnicodeStus
=(
ušt32_t
)
´ev
;

626 
pArgs
->
sourû
=source;

627 
pArgs
->
rg‘
=(*)target;

628 
pArgs
->
off£ts
=offsets;

629 
	}
}

639 
	$_Bocu1FromUnicode
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

640 
UE¼ÜCode
 *
pE¼ÜCode
) {

641 
UCÚv”‹r
 *
úv
;

642 cÚ¡ 
UCh¬
 *
sourû
, *
sourûLim™
;

643 
ušt8_t
 *
rg‘
;

644 
št32_t
 
rg‘C­ac™y
;

646 
št32_t
 
´ev
, 
c
, 
diff
;

649 
úv
=
pArgs
->
cÚv”‹r
;

650 
sourû
=
pArgs
->source;

651 
sourûLim™
=
pArgs
->sourceLimit;

652 
rg‘
=(
ušt8_t
 *)
pArgs
->target;

653 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

656 
c
=
úv
->
äomUCh¬32
;

657 
´ev
=(
št32_t
)
úv
->
äomUnicodeStus
;

658 if(
´ev
==0) {

659 
´ev
=
BOCU1_ASCII_PREV
;

663 if(
c
!=0 && 
rg‘C­ac™y
>0) {

664 
g‘T¿
;

667 
ç¡SšgË
:

670 
diff
=(
št32_t
)(
sourûLim™
-
sourû
);

671 if(
rg‘C­ac™y
>
diff
) {

672 
rg‘C­ac™y
=
diff
;

674 
rg‘C­ac™y
>0 && (
c
=*
sourû
)<0x3000) {

675 if(
c
<=0x20) {

676 if(
c
!=0x20) {

677 
´ev
=
BOCU1_ASCII_PREV
;

679 *
rg‘
++=(
ušt8_t
)
c
;

681 
diff
=
c
-
´ev
;

682 if(
	`DIFF_IS_SINGLE
(
diff
)) {

683 
´ev
=
	`BOCU1_SIMPLE_PREV
(
c
);

684 *
rg‘
++=(
ušt8_t
)
	`PACK_SINGLE_DIFF
(
diff
);

689 ++
sourû
;

690 --
rg‘C­ac™y
;

693 
rg‘C­ac™y
=(
št32_t
)((cÚ¡ 
ušt8_t
 *)
pArgs
->
rg‘Lim™
-
rg‘
);

696 
sourû
<
sourûLim™
) {

697 if(
rg‘C­ac™y
>0) {

698 
c
=*
sourû
++;

700 if(
c
<=0x20) {

706 if(
c
!=0x20) {

707 
´ev
=
BOCU1_ASCII_PREV
;

709 *
rg‘
++=(
ušt8_t
)
c
;

710 --
rg‘C­ac™y
;

714 if(
	`UTF_IS_LEAD
(
c
)) {

715 
g‘T¿
:

716 if(
sourû
<
sourûLim™
) {

718 
UCh¬
 
Œa
=*
sourû
;

719 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

720 ++
sourû
;

721 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
Œa
);

725 
c
=-c;

739 
diff
=
c
-
´ev
;

740 
´ev
=
	`BOCU1_PREV
(
c
);

741 if(
	`DIFF_IS_SINGLE
(
diff
)) {

742 *
rg‘
++=(
ušt8_t
)
	`PACK_SINGLE_DIFF
(
diff
);

743 --
rg‘C­ac™y
;

744 if(
c
<0x3000) {

745 
ç¡SšgË
;

747 } if(
	`DIFF_IS_DOUBLE
(
diff
è&& 2<=
rg‘C­ac™y
) {

749 
št32_t
 
m
;

751 if(
diff
>=0) {

752 
diff
-=
BOCU1_REACH_POS_1
+1;

753 
m
=
diff
%
BOCU1_TRAIL_COUNT
;

754 
diff
/=
BOCU1_TRAIL_COUNT
;

755 
diff
+=
BOCU1_START_POS_2
;

757 
diff
-=
BOCU1_REACH_NEG_1
;

758 
	`NEGDIVMOD
(
diff
, 
BOCU1_TRAIL_COUNT
, 
m
);

759 
diff
+=
BOCU1_START_NEG_2
;

761 *
rg‘
++=(
ušt8_t
)
diff
;

762 *
rg‘
++=(
ušt8_t
)
	`BOCU1_TRAIL_TO_BYTE
(
m
);

763 
rg‘C­ac™y
-=2;

765 
št32_t
 
Ëngth
;

767 
diff
=
	`·ckDiff
(diff);

768 
Ëngth
=
	`BOCU1_LENGTH_FROM_PACKED
(
diff
);

772 if(
Ëngth
<=
rg‘C­ac™y
) {

773 
Ëngth
) {

776 *
rg‘
++=(
ušt8_t
)(
diff
>>24);

778 *
rg‘
++=(
ušt8_t
)(
diff
>>16);

780 *
rg‘
++=(
ušt8_t
)(
diff
>>8);

782 *
rg‘
++=(
ušt8_t
)
diff
;

787 
rg‘C­ac™y
-=
Ëngth
;

789 
ušt8_t
 *
ch¬E¼ÜBufãr
;

798 
Ëngth
-=
rg‘C­ac™y
;

799 
ch¬E¼ÜBufãr
=(
ušt8_t
 *)
úv
->charErrorBuffer;

800 
Ëngth
) {

803 *
ch¬E¼ÜBufãr
++=(
ušt8_t
)(
diff
>>16);

805 *
ch¬E¼ÜBufãr
++=(
ušt8_t
)(
diff
>>8);

807 *
ch¬E¼ÜBufãr
=(
ušt8_t
)
diff
;

812 
úv
->
ch¬E¼ÜBufãrL’gth
=(
št8_t
)
Ëngth
;

815 
diff
>>=8*
Ëngth
;

816 
rg‘C­ac™y
) {

819 *
rg‘
++=(
ušt8_t
)(
diff
>>16);

821 *
rg‘
++=(
ušt8_t
)(
diff
>>8);

823 *
rg‘
++=(
ušt8_t
)
diff
;

830 
rg‘C­ac™y
=0;

831 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

837 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

843 
úv
->
äomUCh¬32
ğ
c
<0 ? -c : 0;

844 
úv
->
äomUnicodeStus
=(
ušt32_t
)
´ev
;

847 
pArgs
->
sourû
=source;

848 
pArgs
->
rg‘
=(*)target;

849 
	}
}

860 
U_INLINE
 
št32_t


861 
	$decodeBocu1L—dBy‹
(
št32_t
 
b
) {

862 
št32_t
 
diff
, 
couÁ
;

864 if(
b
>=
BOCU1_START_NEG_2
) {

866 if(
b
<
BOCU1_START_POS_3
) {

868 
diff
=((
št32_t
)
b
-
BOCU1_START_POS_2
)*
BOCU1_TRAIL_COUNT
+
BOCU1_REACH_POS_1
+1;

869 
couÁ
=1;

870 } if(
b
<
BOCU1_START_POS_4
) {

872 
diff
=((
št32_t
)
b
-
BOCU1_START_POS_3
)*
BOCU1_TRAIL_COUNT
*BOCU1_TRAIL_COUNT+
BOCU1_REACH_POS_2
+1;

873 
couÁ
=2;

876 
diff
=
BOCU1_REACH_POS_3
+1;

877 
couÁ
=3;

881 if(
b
>=
BOCU1_START_NEG_3
) {

883 
diff
=((
št32_t
)
b
-
BOCU1_START_NEG_2
)*
BOCU1_TRAIL_COUNT
+
BOCU1_REACH_NEG_1
;

884 
couÁ
=1;

885 } if(
b
>
BOCU1_MIN
) {

887 
diff
=((
št32_t
)
b
-
BOCU1_START_NEG_3
)*
BOCU1_TRAIL_COUNT
*BOCU1_TRAIL_COUNT+
BOCU1_REACH_NEG_2
;

888 
couÁ
=2;

891 
diff
=-
BOCU1_TRAIL_COUNT
*BOCU1_TRAIL_COUNT*BOCU1_TRAIL_COUNT+
BOCU1_REACH_NEG_3
;

892 
couÁ
=3;

897  (
diff
<<2)|
couÁ
;

898 
	}
}

909 
U_INLINE
 
št32_t


910 
	$decodeBocu1T¿By‹
(
št32_t
 
couÁ
, iÁ32_ˆ
b
) {

911 if(
b
<=0x20) {

913 
b
=
bocu1By‹ToT¿
[b];

915 #ià
BOCU1_MAX_TRAIL
<0xff

916 } if(
b
>
BOCU1_MAX_TRAIL
) {

920 
b
-=
BOCU1_TRAIL_BYTE_OFFSET
;

924 if(
couÁ
==1) {

925  
b
;

926 } if(
couÁ
==2) {

927  
b
*
BOCU1_TRAIL_COUNT
;

929  
b
*(
BOCU1_TRAIL_COUNT
*BOCU1_TRAIL_COUNT);

931 
	}
}

934 
	$_Bocu1ToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

935 
UE¼ÜCode
 *
pE¼ÜCode
) {

936 
UCÚv”‹r
 *
úv
;

937 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

938 
UCh¬
 *
rg‘
;

939 cÚ¡ 
UCh¬
 *
rg‘Lim™
;

940 
št32_t
 *
off£ts
;

942 
št32_t
 
´ev
, 
couÁ
, 
diff
, 
c
;

944 
št8_t
 
by‹Index
;

945 
ušt8_t
 *
by‹s
;

947 
št32_t
 
sourûIndex
, 
ÃxtSourûIndex
;

950 
úv
=
pArgs
->
cÚv”‹r
;

951 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

952 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

953 
rg‘
=
pArgs
->target;

954 
rg‘Lim™
=
pArgs
->targetLimit;

955 
off£ts
=
pArgs
->offsets;

958 
´ev
=(
št32_t
)
úv
->
toUnicodeStus
;

959 if(
´ev
==0) {

960 
´ev
=
BOCU1_ASCII_PREV
;

962 
diff
=
úv
->
mode
;

963 
couÁ
=
diff
&3;

964 
diff
>>=2;

966 
by‹Index
=
úv
->
toUL’gth
;

967 
by‹s
=
úv
->
toUBy‹s
;

970 
sourûIndex
=
by‹Index
==0 ? 0 : -1;

971 
ÃxtSourûIndex
=0;

974 if(
couÁ
>0 && 
by‹Index
>0 && 
rg‘
<
rg‘Lim™
) {

975 
g‘T¿
;

978 
ç¡SšgË
:

981 
diff
=(
št32_t
)(
sourûLim™
-
sourû
);

982 
couÁ
=(
št32_t
)(
pArgs
->
rg‘Lim™
-
rg‘
);

983 if(
couÁ
>
diff
) {

984 
couÁ
=
diff
;

986 
couÁ
>0) {

987 if(
BOCU1_START_NEG_2
<=(
c
=*
sourû
è&& c<
BOCU1_START_POS_2
) {

988 
c
=
´ev
+(c-
BOCU1_MIDDLE
);

989 if(
c
<0x3000) {

990 *
rg‘
++=(
UCh¬
)
c
;

991 *
off£ts
++=
ÃxtSourûIndex
++;

992 
´ev
=
	`BOCU1_SIMPLE_PREV
(
c
);

996 } if(
c
<=0x20) {

997 if(
c
!=0x20) {

998 
´ev
=
BOCU1_ASCII_PREV
;

1000 *
rg‘
++=(
UCh¬
)
c
;

1001 *
off£ts
++=
ÃxtSourûIndex
++;

1005 ++
sourû
;

1006 --
couÁ
;

1008 
sourûIndex
=
ÃxtSourûIndex
;

1011 
sourû
<
sourûLim™
) {

1012 if(
rg‘
>=
rg‘Lim™
) {

1014 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1018 ++
ÃxtSourûIndex
;

1019 
c
=*
sourû
++;

1020 if(
BOCU1_START_NEG_2
<=
c
 && c<
BOCU1_START_POS_2
) {

1022 
c
=
´ev
+(c-
BOCU1_MIDDLE
);

1023 if(
c
<0x3000) {

1024 *
rg‘
++=(
UCh¬
)
c
;

1025 *
off£ts
++=
sourûIndex
;

1026 
´ev
=
	`BOCU1_SIMPLE_PREV
(
c
);

1027 
sourûIndex
=
ÃxtSourûIndex
;

1028 
ç¡SšgË
;

1030 } if(
c
<=0x20) {

1035 if(
c
!=0x20) {

1036 
´ev
=
BOCU1_ASCII_PREV
;

1038 *
rg‘
++=(
UCh¬
)
c
;

1039 *
off£ts
++=
sourûIndex
;

1040 
sourûIndex
=
ÃxtSourûIndex
;

1042 } if(
BOCU1_START_NEG_3
<=
c
 && c<
BOCU1_START_POS_3
 && 
sourû
<
sourûLim™
) {

1044 if(
c
>=
BOCU1_MIDDLE
) {

1045 
diff
=((
št32_t
)
c
-
BOCU1_START_POS_2
)*
BOCU1_TRAIL_COUNT
+
BOCU1_REACH_POS_1
+1;

1047 
diff
=((
št32_t
)
c
-
BOCU1_START_NEG_2
)*
BOCU1_TRAIL_COUNT
+
BOCU1_REACH_NEG_1
;

1051 ++
ÃxtSourûIndex
;

1052 
c
=
	`decodeBocu1T¿By‹
(1, *
sourû
++);

1053 if(
c
<0 || (
ušt32_t
)(c=
´ev
+
diff
+c)>0x10ffff) {

1054 
by‹s
[0]=
sourû
[-2];

1055 
by‹s
[1]=
sourû
[-1];

1056 
by‹Index
=2;

1057 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1060 } if(
c
==
BOCU1_RESET
) {

1062 
´ev
=
BOCU1_ASCII_PREV
;

1063 
sourûIndex
=
ÃxtSourûIndex
;

1071 
by‹s
[0]=(
ušt8_t
)
c
;

1072 
by‹Index
=1;

1074 
diff
=
	`decodeBocu1L—dBy‹
(
c
);

1075 
couÁ
=
diff
&3;

1076 
diff
>>=2;

1077 
g‘T¿
:

1079 if(
sourû
>=
sourûLim™
) {

1080 
’dloİ
;

1082 ++
ÃxtSourûIndex
;

1083 
c
=
by‹s
[
by‹Index
++]=*
sourû
++;

1086 
c
=
	`decodeBocu1T¿By‹
(
couÁ
, c);

1087 if(
c
<0) {

1088 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1089 
’dloİ
;

1092 
diff
+=
c
;

1093 if(--
couÁ
==0) {

1095 
by‹Index
=0;

1096 
c
=
´ev
+
diff
;

1097 if((
ušt32_t
)
c
>0x10ffff) {

1098 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1099 
’dloİ
;

1107 
´ev
=
	`BOCU1_PREV
(
c
);

1108 if(
c
<=0xffff) {

1109 *
rg‘
++=(
UCh¬
)
c
;

1110 *
off£ts
++=
sourûIndex
;

1113 *
rg‘
++=
	`UTF16_LEAD
(
c
);

1114 if(
rg‘
<
rg‘Lim™
) {

1115 *
rg‘
++=
	`UTF16_TRAIL
(
c
);

1116 *
off£ts
++=
sourûIndex
;

1117 *
off£ts
++=
sourûIndex
;

1120 *
off£ts
++=
sourûIndex
;

1121 
úv
->
UCh¬E¼ÜBufãr
[0]=
	`UTF16_TRAIL
(
c
);

1122 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

1123 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1127 
sourûIndex
=
ÃxtSourûIndex
;

1129 
’dloİ
:

1131 if(*
pE¼ÜCode
==
U_ILLEGAL_CHAR_FOUND
) {

1133 
úv
->
toUnicodeStus
=
BOCU1_ASCII_PREV
;

1134 
úv
->
mode
=0;

1137 
úv
->
toUnicodeStus
=(
ušt32_t
)
´ev
;

1138 
úv
->
mode
=(
diff
<<2)|
couÁ
;

1140 
úv
->
toUL’gth
=
by‹Index
;

1143 
pArgs
->
sourû
=(const *)source;

1144 
pArgs
->
rg‘
=target;

1145 
pArgs
->
off£ts
=offsets;

1147 
	}
}

1157 
	$_Bocu1ToUnicode
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

1158 
UE¼ÜCode
 *
pE¼ÜCode
) {

1159 
UCÚv”‹r
 *
úv
;

1160 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

1161 
UCh¬
 *
rg‘
;

1162 cÚ¡ 
UCh¬
 *
rg‘Lim™
;

1164 
št32_t
 
´ev
, 
couÁ
, 
diff
, 
c
;

1166 
št8_t
 
by‹Index
;

1167 
ušt8_t
 *
by‹s
;

1169 
	`U_ALIGN_CODE
(16)

1172 
úv
=
pArgs
->
cÚv”‹r
;

1173 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

1174 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

1175 
rg‘
=
pArgs
->target;

1176 
rg‘Lim™
=
pArgs
->targetLimit;

1179 
´ev
=(
št32_t
)
úv
->
toUnicodeStus
;

1180 if(
´ev
==0) {

1181 
´ev
=
BOCU1_ASCII_PREV
;

1183 
diff
=
úv
->
mode
;

1184 
couÁ
=
diff
&3;

1185 
diff
>>=2;

1187 
by‹Index
=
úv
->
toUL’gth
;

1188 
by‹s
=
úv
->
toUBy‹s
;

1191 if(
couÁ
>0 && 
by‹Index
>0 && 
rg‘
<
rg‘Lim™
) {

1192 
g‘T¿
;

1195 
ç¡SšgË
:

1198 
diff
=(
št32_t
)(
sourûLim™
-
sourû
);

1199 
couÁ
=(
št32_t
)(
pArgs
->
rg‘Lim™
-
rg‘
);

1200 if(
couÁ
>
diff
) {

1201 
couÁ
=
diff
;

1203 
couÁ
>0) {

1204 if(
BOCU1_START_NEG_2
<=(
c
=*
sourû
è&& c<
BOCU1_START_POS_2
) {

1205 
c
=
´ev
+(c-
BOCU1_MIDDLE
);

1206 if(
c
<0x3000) {

1207 *
rg‘
++=(
UCh¬
)
c
;

1208 
´ev
=
	`BOCU1_SIMPLE_PREV
(
c
);

1212 } if(
c
<=0x20) {

1213 if(
c
!=0x20) {

1214 
´ev
=
BOCU1_ASCII_PREV
;

1216 *
rg‘
++=(
UCh¬
)
c
;

1220 ++
sourû
;

1221 --
couÁ
;

1225 
sourû
<
sourûLim™
) {

1226 if(
rg‘
>=
rg‘Lim™
) {

1228 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1232 
c
=*
sourû
++;

1233 if(
BOCU1_START_NEG_2
<=
c
 && c<
BOCU1_START_POS_2
) {

1235 
c
=
´ev
+(c-
BOCU1_MIDDLE
);

1236 if(
c
<0x3000) {

1237 *
rg‘
++=(
UCh¬
)
c
;

1238 
´ev
=
	`BOCU1_SIMPLE_PREV
(
c
);

1239 
ç¡SšgË
;

1241 } if(
c
<=0x20) {

1246 if(
c
!=0x20) {

1247 
´ev
=
BOCU1_ASCII_PREV
;

1249 *
rg‘
++=(
UCh¬
)
c
;

1251 } if(
BOCU1_START_NEG_3
<=
c
 && c<
BOCU1_START_POS_3
 && 
sourû
<
sourûLim™
) {

1253 if(
c
>=
BOCU1_MIDDLE
) {

1254 
diff
=((
št32_t
)
c
-
BOCU1_START_POS_2
)*
BOCU1_TRAIL_COUNT
+
BOCU1_REACH_POS_1
+1;

1256 
diff
=((
št32_t
)
c
-
BOCU1_START_NEG_2
)*
BOCU1_TRAIL_COUNT
+
BOCU1_REACH_NEG_1
;

1260 
c
=
	`decodeBocu1T¿By‹
(1, *
sourû
++);

1261 if(
c
<0 || (
ušt32_t
)(c=
´ev
+
diff
+c)>0x10ffff) {

1262 
by‹s
[0]=
sourû
[-2];

1263 
by‹s
[1]=
sourû
[-1];

1264 
by‹Index
=2;

1265 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1268 } if(
c
==
BOCU1_RESET
) {

1270 
´ev
=
BOCU1_ASCII_PREV
;

1278 
by‹s
[0]=(
ušt8_t
)
c
;

1279 
by‹Index
=1;

1281 
diff
=
	`decodeBocu1L—dBy‹
(
c
);

1282 
couÁ
=
diff
&3;

1283 
diff
>>=2;

1284 
g‘T¿
:

1286 if(
sourû
>=
sourûLim™
) {

1287 
’dloİ
;

1289 
c
=
by‹s
[
by‹Index
++]=*
sourû
++;

1292 
c
=
	`decodeBocu1T¿By‹
(
couÁ
, c);

1293 if(
c
<0) {

1294 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1295 
’dloİ
;

1298 
diff
+=
c
;

1299 if(--
couÁ
==0) {

1301 
by‹Index
=0;

1302 
c
=
´ev
+
diff
;

1303 if((
ušt32_t
)
c
>0x10ffff) {

1304 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1305 
’dloİ
;

1313 
´ev
=
	`BOCU1_PREV
(
c
);

1314 if(
c
<=0xffff) {

1315 *
rg‘
++=(
UCh¬
)
c
;

1318 *
rg‘
++=
	`UTF16_LEAD
(
c
);

1319 if(
rg‘
<
rg‘Lim™
) {

1320 *
rg‘
++=
	`UTF16_TRAIL
(
c
);

1323 
úv
->
UCh¬E¼ÜBufãr
[0]=
	`UTF16_TRAIL
(
c
);

1324 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

1325 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1330 
’dloİ
:

1332 if(*
pE¼ÜCode
==
U_ILLEGAL_CHAR_FOUND
) {

1334 
úv
->
toUnicodeStus
=
BOCU1_ASCII_PREV
;

1335 
úv
->
mode
=0;

1338 
úv
->
toUnicodeStus
=(
ušt32_t
)
´ev
;

1339 
úv
->
mode
=(
diff
<<2)|
couÁ
;

1341 
úv
->
toUL’gth
=
by‹Index
;

1344 
pArgs
->
sourû
=(const *)source;

1345 
pArgs
->
rg‘
=target;

1347 
	}
}

1351 cÚ¡ 
UCÚv”‹rIm¶
 
	g_Bocu1Im¶
={

1352 
UCNV_BOCU1
,

1354 
NULL
,

1355 
NULL
,

1357 
NULL
,

1358 
NULL
,

1359 
NULL
,

1361 
_Bocu1ToUnicode
,

1362 
_Bocu1ToUnicodeW™hOff£ts
,

1363 
_Bocu1FromUnicode
,

1364 
_Bocu1FromUnicodeW™hOff£ts
,

1365 
NULL
,

1367 
NULL
,

1368 
NULL
,

1369 
NULL
,

1370 
NULL
,

1371 
uúv_g‘Com¶‘eUnicodeS‘


1374 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_Bocu1SticD©a
={

1375 (
UCÚv”‹rSticD©a
),

1378 
UCNV_IBM
, 
UCNV_BOCU1
,

1381 
FALSE
, FALSE,

1387 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_Bocu1D©a
={

1388 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
)0),

1389 
NULL
, NULL, &
_Bocu1SticD©a
, 
FALSE
, &
_Bocu1Im¶
,

	@ucnvdisp.c

21 
	~"unicode/uty³s.h
"

23 #ià!
UCONFIG_NO_CONVERSION


25 
	~"unicode/u¡ršg.h
"

26 
	~"unicode/u»s.h
"

27 
	~"unicode/uúv.h
"

28 
	~"c¡ršg.h
"

29 
	~"u¡r_imp.h
"

30 
	~"uúv_imp.h
"

31 
	~"putimp.h
"

33 
U_CAPI
 
št32_t
 
U_EXPORT2


34 
	$uúv_g‘Di¥ÏyName
(cÚ¡ 
UCÚv”‹r
 *
úv
,

35 cÚ¡ *
di¥ÏyLoÿË
,

36 
UCh¬
 *
di¥ÏyName
, 
št32_t
 
di¥ÏyNameC­ac™y
,

37 
UE¼ÜCode
 *
pE¼ÜCode
) {

38 
UResourûBundË
 *
rb
;

39 cÚ¡ 
UCh¬
 *
Çme
;

40 
št32_t
 
Ëngth
;

41 
UE¼ÜCode
 
loÿlStus
 = 
U_ZERO_ERROR
;

44 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

48 if(
úv
==
NULL
 || 
di¥ÏyNameC­ac™y
<0 || (di¥ÏyNameC­ac™y>0 && 
di¥ÏyName
==NULL)) {

49 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

54 
rb
=
	`u»s_İ’
(
NULL
, 
di¥ÏyLoÿË
, 
pE¼ÜCode
);

55 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

60 
Çme
=
	`u»s_g‘SŒšgByKey
(
rb
, 
úv
->
sh¬edD©a
->
¡©icD©a
->Çme, &
Ëngth
, &
loÿlStus
);

61 
	`u»s_şo£
(
rb
);

63 if(
	`U_SUCCESS
(
loÿlStus
)) {

65 ià(*
pE¼ÜCode
 =ğ
U_ZERO_ERROR
) {

66 *
pE¼ÜCode
 = 
loÿlStus
;

68 
	`u_memıy
(
di¥ÏyName
, 
Çme
, 
	`u´v_mš
(
Ëngth
, 
di¥ÏyNameC­ac™y
)*
U_SIZEOF_UCHAR
);

71 
Ëngth
=(
št32_t
)
	`u´v_¡¾’
(
úv
->
sh¬edD©a
->
¡©icD©a
->
Çme
);

72 
	`u_ch¬sToUCh¬s
(
úv
->
sh¬edD©a
->
¡©icD©a
->
Çme
, 
di¥ÏyName
, 
	`u´v_mš
(
Ëngth
, 
di¥ÏyNameC­ac™y
));

74  
	`u_‹rmš©eUCh¬s
(
di¥ÏyName
, 
di¥ÏyNameC­ac™y
, 
Ëngth
, 
pE¼ÜCode
);

75 
	}
}

	@ucnvhz.c

17 
	~"unicode/uty³s.h
"

19 #ià!
UCONFIG_NO_CONVERSION
 && !
UCONFIG_NO_LEGACY_CONVERSION


21 
	~"cmemÜy.h
"

22 
	~"unicode/uúv.h
"

23 
	~"unicode/uúv_cb.h
"

24 
	~"unicode/u£t.h
"

25 
	~"uúv_bld.h
"

26 
	~"uúv_úv.h
"

27 
	~"uúv_imp.h
"

29 
	#UCNV_TILDE
 0x7E

	)

30 
	#UCNV_OPEN_BRACE
 0x7B

	)

31 
	#UCNV_CLOSE_BRACE
 0x7D

	)

32 
	#SB_ESCAPE
 "\x7E\x7D"

	)

33 
	#DB_ESCAPE
 "\x7E\x7B"

	)

34 
	#TILDE_ESCAPE
 "\x7E\x7E"

	)

35 
	#ESC_LEN
 2

	)

38 
	#CONCAT_ESCAPE_MACRO
Ğ
¬gs
, 
rg‘Index
,
rg‘L’gth
,
¡rToAµ’d
, 
”r
, 
Ën
,
sourûIndex
){ \

39 
Ën
-->0){ \

40 if(
rg‘Index
 < 
rg‘L’gth
){ \

41 
¬gs
->
rg‘
[
rg‘Index
] = (è*
¡rToAµ’d
; \

42 if(
¬gs
->
off£ts
!=
NULL
){ \

43 *(
off£ts
++èğ
sourûIndex
-1; \

45 
rg‘Index
++; \

48 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[(ïrgs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = (è*
¡rToAµ’d
; \

49 *
”r
 =
U_BUFFER_OVERFLOW_ERROR
; \

51 
¡rToAµ’d
++; \

53 }

	)

57 
UCÚv”‹r
* 
	mgbCÚv”‹r
;

58 
št32_t
 
	mrg‘Index
;

59 
št32_t
 
	msourûIndex
;

60 
UBoŞ
 
	misEsÿ³Aµ’ded
;

61 
UBoŞ
 
	misS‹DBCS
;

62 
UBoŞ
 
	misT¬g‘UCh¬DBCS
;

63 
UBoŞ
 
	misEm±ySegm’t
;

64 }
	tUCÚv”‹rD©aHZ
;

69 
	$_HZO³n
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rLßdArgs
 *
pArgs
, 
UE¼ÜCode
 *
”rÜCode
){

70 
UCÚv”‹r
 *
gbCÚv”‹r
;

71 if(
pArgs
->
ÚlyTe¡IsLßdabË
) {

72 
	`uúv_ÿnC»©eCÚv”‹r
("GBK", 
”rÜCode
);

75 
gbCÚv”‹r
 = 
	`uúv_İ’
("GBK", 
”rÜCode
);

76 if(
	`U_FAILURE
(*
”rÜCode
)) {

79 
úv
->
toUnicodeStus
 = 0;

80 
úv
->
äomUnicodeStus
= 0;

81 
úv
->
mode
=0;

82 
úv
->
äomUCh¬32
=0x0000;

83 
úv
->
exŒaInfo
 = 
	`u´v_m®loc
((
UCÚv”‹rD©aHZ
));

84 if(
úv
->
exŒaInfo
 !ğ
NULL
){

85 
	`u´v_mem£t
(
úv
->
exŒaInfo
, 0, (
UCÚv”‹rD©aHZ
));

86 ((
UCÚv”‹rD©aHZ
*)
úv
->
exŒaInfo
)->
gbCÚv”‹r
 = gbConverter;

89 
	`uúv_şo£
(
gbCÚv”‹r
);

90 *
”rÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

93 
	}
}

96 
	$_HZClo£
(
UCÚv”‹r
 *
úv
){

97 if(
úv
->
exŒaInfo
 !ğ
NULL
) {

98 
	`uúv_şo£
 (((
UCÚv”‹rD©aHZ
 *è(
úv
->
exŒaInfo
))->
gbCÚv”‹r
);

99 if(!
úv
->
isExŒaLoÿl
) {

100 
	`u´v_ä“
(
úv
->
exŒaInfo
);

102 
úv
->
exŒaInfo
 = 
NULL
;

104 
	}
}

107 
	$_HZRe£t
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rRe£tChoiû
 
choiû
){

108 if(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

109 
úv
->
toUnicodeStus
 = 0;

110 
úv
->
mode
=0;

111 if(
úv
->
exŒaInfo
 !ğ
NULL
){

112 ((
UCÚv”‹rD©aHZ
*)
úv
->
exŒaInfo
)->
isS‹DBCS
 = 
FALSE
;

113 ((
UCÚv”‹rD©aHZ
*)
úv
->
exŒaInfo
)->
isEm±ySegm’t
 = 
FALSE
;

116 if(
choiû
!=
UCNV_RESET_TO_UNICODE
) {

117 
úv
->
äomUnicodeStus
= 0;

118 
úv
->
äomUCh¬32
=0x0000;

119 if(
úv
->
exŒaInfo
 !ğ
NULL
){

120 ((
UCÚv”‹rD©aHZ
*)
úv
->
exŒaInfo
)->
isEsÿ³Aµ’ded
 = 
FALSE
;

121 ((
UCÚv”‹rD©aHZ
*)
úv
->
exŒaInfo
)->
rg‘Index
 = 0;

122 ((
UCÚv”‹rD©aHZ
*)
úv
->
exŒaInfo
)->
sourûIndex
 = 0;

123 ((
UCÚv”‹rD©aHZ
*)
úv
->
exŒaInfo
)->
isT¬g‘UCh¬DBCS
 = 
FALSE
;

126 
	}
}

154 
	$UCÚv”‹r_toUnicode_HZ_OFFSETS_LOGIC
(
UCÚv”‹rToUnicodeArgs
 *
¬gs
,

155 
UE¼ÜCode
* 
”r
){

156 
‹mpBuf
[2];

157 cÚ¡ *
mySourû
 = ( *è
¬gs
->
sourû
;

158 
UCh¬
 *
myT¬g‘
 = 
¬gs
->
rg‘
;

159 cÚ¡ *
mySourûLim™
 = 
¬gs
->
sourûLim™
;

160 
UCh¬32
 
rg‘UniCh¬
 = 0x0000;

161 
št32_t
 
mySourûCh¬
 = 0x0000;

162 
UCÚv”‹rD©aHZ
* 
myD©a
=(UCÚv”‹rD©aHZ*)(
¬gs
->
cÚv”‹r
->
exŒaInfo
);

163 
‹mpBuf
[0]=0;

164 
‹mpBuf
[1]=0;

172 
mySourû
< 
mySourûLim™
){

174 if(
myT¬g‘
 < 
¬gs
->
rg‘Lim™
){

176 
mySourûCh¬
ğ(è*
mySourû
++;

178 if(
¬gs
->
cÚv”‹r
->
mode
 =ğ
UCNV_TILDE
) {

180 
¬gs
->
cÚv”‹r
->
mode
=0;

181 
mySourûCh¬
) {

185 
UCNV_TILDE
:

186 if(
¬gs
->
off£ts
) {

187 
¬gs
->
off£ts
[
myT¬g‘
 -‡rgs->
rg‘
]=(
št32_t
)(
mySourû
 -‡rgs->
sourû
 - 2);

189 *(
myT¬g‘
++)=(
UCh¬
)
mySourûCh¬
;

190 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

192 
UCNV_OPEN_BRACE
:

193 
UCNV_CLOSE_BRACE
:

194 
myD©a
->
isS‹DBCS
 = (
mySourûCh¬
 =ğ
UCNV_OPEN_BRACE
);

195 ià(
myD©a
->
isEm±ySegm’t
) {

196 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

197 *
”r
 = 
U_ILLEGAL_ESCAPE_SEQUENCE
;

198 
¬gs
->
cÚv”‹r
->
toUC®lbackR—sÚ
 = 
UCNV_IRREGULAR
;

199 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0] = 
UCNV_TILDE
;

200 
¬gs
->
cÚv”‹r
->
toUBy‹s
[1] = 
mySourûCh¬
;

201 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 2;

202 
¬gs
->
rg‘
 = 
myT¬g‘
;

203 
¬gs
->
sourû
 = 
mySourû
;

206 
myD©a
->
isEm±ySegm’t
 = 
TRUE
;

218 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

219 *
”r
 = 
U_ILLEGAL_ESCAPE_SEQUENCE
;

220 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0] = 
UCNV_TILDE
;

221 ifĞ
myD©a
->
isS‹DBCS
 ?

222 (0x21 <ğ
mySourûCh¬
 && mySourceChar <= 0x7e) :

223 
mySourûCh¬
 <= 0x7f

226 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 1;

227 --
mySourû
;

230 
¬gs
->
cÚv”‹r
->
toUBy‹s
[1] = 
mySourûCh¬
;

231 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 2;

233 
¬gs
->
rg‘
 = 
myT¬g‘
;

234 
¬gs
->
sourû
 = 
mySourû
;

237 } if(
myD©a
->
isS‹DBCS
) {

238 if(
¬gs
->
cÚv”‹r
->
toUnicodeStus
 == 0x00){

240 if(
mySourûCh¬
 =ğ
UCNV_TILDE
) {

241 
¬gs
->
cÚv”‹r
->
mode
 = 
UCNV_TILDE
;

244 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 = (
ušt32_t
è(
mySourûCh¬
 | 0x100);

245 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

251 
ËadIsOk
, 
ŒaIsOk
;

252 
ušt32_t
 
ËadBy‹
 = 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 & 0xff;

253 
rg‘UniCh¬
 = 0xffff;

264 
ËadIsOk
 = (
ušt8_t
)(
ËadBy‹
 - 0x21) <= (0x7d - 0x21);

265 
ŒaIsOk
 = (
ušt8_t
)(
mySourûCh¬
 - 0x21) <= (0x7e - 0x21);

266 ià(
ËadIsOk
 && 
ŒaIsOk
) {

267 
‹mpBuf
[0] = (è(
ËadBy‹
+0x80) ;

268 
‹mpBuf
[1] = (è(
mySourûCh¬
+0x80);

269 
rg‘UniCh¬
 = 
	`uúv_MBCSSim¶eG‘NextUCh¬
(
myD©a
->
gbCÚv”‹r
->
sh¬edD©a
,

270 
‹mpBuf
, 2, 
¬gs
->
cÚv”‹r
->
u£F®lback
);

271 
mySourûCh¬
ğ(
ËadBy‹
 << 8) | mySourceChar;

272 } ià(
ŒaIsOk
) {

274 --
mySourû
;

275 
mySourûCh¬
 = (
št32_t
)
ËadBy‹
;

279 
mySourûCh¬
ğ0x10000 | (
ËadBy‹
 << 8) | mySourceChar;

281 
¬gs
->
cÚv”‹r
->
toUnicodeStus
 =0x00;

285 if(
mySourûCh¬
 =ğ
UCNV_TILDE
) {

286 
¬gs
->
cÚv”‹r
->
mode
 = 
UCNV_TILDE
;

288 } if(
mySourûCh¬
 <= 0x7f) {

289 
rg‘UniCh¬
 = (
UCh¬
)
mySourûCh¬
;

290 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

292 
rg‘UniCh¬
 = 0xffff;

293 
myD©a
->
isEm±ySegm’t
 = 
FALSE
;

296 if(
rg‘UniCh¬
 < 0xfffe){

297 if(
¬gs
->
off£ts
) {

298 
¬gs
->
off£ts
[
myT¬g‘
 -‡rgs->
rg‘
]=(
št32_t
)(
mySourû
 -‡rgs->
sourû
 - 1-(
myD©a
->
isS‹DBCS
));

301 *(
myT¬g‘
++)=(
UCh¬
)
rg‘UniCh¬
;

304 if(
rg‘UniCh¬
 == 0xfffe){

305 *
”r
 = 
U_INVALID_CHAR_FOUND
;

308 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

310 if(
mySourûCh¬
 > 0xff){

311 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0] = (
ušt8_t
)(
mySourûCh¬
 >> 8);

312 
¬gs
->
cÚv”‹r
->
toUBy‹s
[1] = (
ušt8_t
)
mySourûCh¬
;

313 
¬gs
->
cÚv”‹r
->
toUL’gth
=2;

316 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0] = (
ušt8_t
)
mySourûCh¬
;

317 
¬gs
->
cÚv”‹r
->
toUL’gth
=1;

323 *
”r
 =
U_BUFFER_OVERFLOW_ERROR
;

328 
¬gs
->
rg‘
 = 
myT¬g‘
;

329 
¬gs
->
sourû
 = 
mySourû
;

330 
	}
}

334 
	$UCÚv”‹r_äomUnicode_HZ_OFFSETS_LOGIC
 (
UCÚv”‹rFromUnicodeArgs
 * 
¬gs
,

335 
UE¼ÜCode
 * 
”r
){

336 cÚ¡ 
UCh¬
 *
mySourû
 = 
¬gs
->
sourû
;

337 *
myT¬g‘
 = 
¬gs
->
rg‘
;

338 
št32_t
* 
off£ts
 = 
¬gs
->offsets;

339 
št32_t
 
mySourûIndex
 = 0;

340 
št32_t
 
myT¬g‘Index
 = 0;

341 
št32_t
 
rg‘L’gth
 = (št32_t)(
¬gs
->
rg‘Lim™
 - 
myT¬g‘
);

342 
št32_t
 
mySourûL’gth
 = (št32_t)(
¬gs
->
sourûLim™
 -‡rgs->
sourû
);

343 
št32_t
 
Ëngth
=0;

344 
ušt32_t
 
rg‘UniCh¬
 = 0x0000;

345 
UCh¬32
 
mySourûCh¬
 = 0x0000;

346 
UCÚv”‹rD©aHZ
 *
myCÚv”‹rD©a
=(UCÚv”‹rD©aHZ*)
¬gs
->
cÚv”‹r
->
exŒaInfo
;

347 
UBoŞ
 
isT¬g‘UCh¬DBCS
 = (UBoŞè
myCÚv”‹rD©a
->isTargetUCharDBCS;

348 
UBoŞ
 
ŞdIsT¬g‘UCh¬DBCS
 = 
isT¬g‘UCh¬DBCS
;

349 
Ën
 =0;

350 cÚ¡ * 
escSeq
=
NULL
;

357 if(
¬gs
->
cÚv”‹r
->
äomUCh¬32
!=0 && 
myT¬g‘Index
 < 
rg‘L’gth
) {

358 
g‘T¿
;

361 
mySourûIndex
 < 
mySourûL’gth
){

362 
rg‘UniCh¬
 = 
missšgCh¬M¬k”
;

363 ià(
myT¬g‘Index
 < 
rg‘L’gth
){

365 
mySourûCh¬
 = (
UCh¬
è
mySourû
[
mySourûIndex
++];

368 
ŞdIsT¬g‘UCh¬DBCS
 = 
isT¬g‘UCh¬DBCS
;

369 if(
mySourûCh¬
 ==
UCNV_TILDE
){

371 
Ën
 = 
ESC_LEN
;

372 
escSeq
 = 
TILDE_ESCAPE
;

373 
	`CONCAT_ESCAPE_MACRO
(
¬gs
, 
myT¬g‘Index
, 
rg‘L’gth
, 
escSeq
,
”r
,
Ën
,
mySourûIndex
);

375 } if(
mySourûCh¬
 <= 0x7f) {

376 
Ëngth
 = 1;

377 
rg‘UniCh¬
 = 
mySourûCh¬
;

379 
Ëngth
ğ
	`uúv_MBCSFromUCh¬32
(
myCÚv”‹rD©a
->
gbCÚv”‹r
->
sh¬edD©a
,

380 
mySourûCh¬
,&
rg‘UniCh¬
,
¬gs
->
cÚv”‹r
->
u£F®lback
);

382 ifĞ
Ëngth
 == 2 &&

383 (
ušt16_t
)(
rg‘UniCh¬
 - 0xa1a1) <= (0xfdfe - 0xa1a1) &&

384 (
ušt8_t
)(
rg‘UniCh¬
 - 0xa1) <= (0xfe - 0xa1)

386 
rg‘UniCh¬
 -= 0x8080;

388 
rg‘UniCh¬
 = 
missšgCh¬M¬k”
;

391 ià(
rg‘UniCh¬
 !ğ
missšgCh¬M¬k”
){

392 
myCÚv”‹rD©a
->
isT¬g‘UCh¬DBCS
 = isT¬g‘UCh¬DBCS = (
UBoŞ
)(
rg‘UniCh¬
>0x00FF);

393 if(
ŞdIsT¬g‘UCh¬DBCS
 !ğ
isT¬g‘UCh¬DBCS
 || !
myCÚv”‹rD©a
->
isEsÿ³Aµ’ded
 ){

395 if(!
isT¬g‘UCh¬DBCS
){

396 
Ën
 =
ESC_LEN
;

397 
escSeq
 = 
SB_ESCAPE
;

398 
	`CONCAT_ESCAPE_MACRO
(
¬gs
, 
myT¬g‘Index
, 
rg‘L’gth
, 
escSeq
,
”r
,
Ën
,
mySourûIndex
);

399 
myCÚv”‹rD©a
->
isEsÿ³Aµ’ded
 = 
TRUE
;

402 
Ën
 =
ESC_LEN
;

403 
escSeq
 = 
DB_ESCAPE
;

404 
	`CONCAT_ESCAPE_MACRO
(
¬gs
, 
myT¬g‘Index
, 
rg‘L’gth
, 
escSeq
,
”r
,
Ën
,
mySourûIndex
);

405 
myCÚv”‹rD©a
->
isEsÿ³Aµ’ded
 = 
TRUE
;

410 if(
isT¬g‘UCh¬DBCS
){

411 ifĞ
myT¬g‘Index
 <
rg‘L’gth
){

412 
myT¬g‘
[
myT¬g‘Index
++] =(è(
rg‘UniCh¬
 >> 8);

413 if(
off£ts
){

414 *(
off£ts
++èğ
mySourûIndex
-1;

416 if(
myT¬g‘Index
 < 
rg‘L’gth
){

417 
myT¬g‘
[
myT¬g‘Index
++] =(è
rg‘UniCh¬
;

418 if(
off£ts
){

419 *(
off£ts
++èğ
mySourûIndex
-1;

422 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = (è
rg‘UniCh¬
;

423 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

426 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] =(è(
rg‘UniCh¬
 >> 8);

427 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = (è
rg‘UniCh¬
;

428 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

432 ifĞ
myT¬g‘Index
 <
rg‘L’gth
){

433 
myT¬g‘
[
myT¬g‘Index
++] = (è(
rg‘UniCh¬
 );

434 if(
off£ts
){

435 *(
off£ts
++èğ
mySourûIndex
-1;

439 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = (è
rg‘UniCh¬
;

440 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

449 if(
	`UTF_IS_SURROGATE
(
mySourûCh¬
)) {

450 if(
	`UTF_IS_SURROGATE_FIRST
(
mySourûCh¬
)) {

451 
¬gs
->
cÚv”‹r
->
äomUCh¬32
=
mySourûCh¬
;

452 
g‘T¿
:

454 if(
mySourûIndex
 < 
mySourûL’gth
) {

456 
UCh¬
 
Œa
=(UCh¬è
¬gs
->
sourû
[
mySourûIndex
];

457 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

458 ++
mySourûIndex
;

459 
mySourûCh¬
=
	`UTF16_GET_PAIR_VALUE
(
¬gs
->
cÚv”‹r
->
äomUCh¬32
, 
Œa
);

460 
¬gs
->
cÚv”‹r
->
äomUCh¬32
=0x00;

462 *
”r
 = 
U_INVALID_CHAR_FOUND
;

467 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

471 *
”r
 = 
U_ZERO_ERROR
;

476 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

480 *
”r
 = 
U_INVALID_CHAR_FOUND
;

483 
¬gs
->
cÚv”‹r
->
äomUCh¬32
=
mySourûCh¬
;

488 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
;

491 
rg‘UniCh¬
=
missšgCh¬M¬k”
;

494 
¬gs
->
rg‘
 +ğ
myT¬g‘Index
;

495 
¬gs
->
sourû
 +ğ
mySourûIndex
;

496 
myCÚv”‹rD©a
->
isT¬g‘UCh¬DBCS
 = isTargetUCharDBCS;

497 
	}
}

500 
	$_HZ_Wr™eSub
(
UCÚv”‹rFromUnicodeArgs
 *
¬gs
, 
št32_t
 
off£tIndex
, 
UE¼ÜCode
 *
”r
) {

501 
UCÚv”‹r
 *
úv
 = 
¬gs
->
cÚv”‹r
;

502 
UCÚv”‹rD©aHZ
 *
cÚvD©a
=(UCÚv”‹rD©aHZ *è
úv
->
exŒaInfo
;

503 *
p
;

504 
bufãr
[4];

505 
p
 = 
bufãr
;

507 ifĞ
cÚvD©a
->
isT¬g‘UCh¬DBCS
){

508 *
p
++ğ
UCNV_TILDE
;

509 *
p
++ğ
UCNV_CLOSE_BRACE
;

510 
cÚvD©a
->
isT¬g‘UCh¬DBCS
=
FALSE
;

512 *
p
++ğ()
úv
->
subCh¬s
[0];

514 
	`uúv_cbFromUWr™eBy‹s
(
¬gs
,

515 
bufãr
, (
št32_t
)(
p
 - buffer),

516 
off£tIndex
, 
”r
);

517 
	}
}

529 
	sşÚeHZSŒuù


531 
UCÚv”‹r
 
	múv
;

532 
UCÚv”‹r
 
	msubCnv
;

533 
UAligÃdMemÜy
 
	md—dS·û
;

534 
UCÚv”‹rD©aHZ
 
	mmyd©a
;

538 
UCÚv”‹r
 *

539 
	$_HZ_SaãClÚe
(cÚ¡ 
UCÚv”‹r
 *
úv
,

540 *
¡ackBufãr
,

541 
št32_t
 *
pBufãrSize
,

542 
UE¼ÜCode
 *
¡©us
)

544 
şÚeHZSŒuù
 * 
loÿlClÚe
;

545 
št32_t
 
size
, 
bufãrSizeN“ded
 = (
şÚeHZSŒuù
);

547 ià(
	`U_FAILURE
(*
¡©us
)){

551 ià(*
pBufãrSize
 == 0){

552 *
pBufãrSize
 = 
bufãrSizeN“ded
;

556 
loÿlClÚe
 = (
şÚeHZSŒuù
 *)
¡ackBufãr
;

559 
	`u´v_memıy
(&
loÿlClÚe
->
myd©a
, 
úv
->
exŒaInfo
, (
UCÚv”‹rD©aHZ
));

560 
loÿlClÚe
->
úv
.
exŒaInfo
 = &loÿlClÚe->
myd©a
;

561 
loÿlClÚe
->
úv
.
isExŒaLoÿl
 = 
TRUE
;

564 
size
 = (
št32_t
)((
UCÚv”‹r
è+ (
UAligÃdMemÜy
));

565 ((
UCÚv”‹rD©aHZ
*)
loÿlClÚe
->
úv
.
exŒaInfo
)->
gbCÚv”‹r
 =

566 
	`uúv_§ãClÚe
(((
UCÚv”‹rD©aHZ
*)
úv
->
exŒaInfo
)->
gbCÚv”‹r
, &
loÿlClÚe
->
subCnv
, &
size
, 
¡©us
);

568  &
loÿlClÚe
->
úv
;

569 
	}
}

572 
	$_HZ_G‘UnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

573 cÚ¡ 
US‘Add”
 *
§
,

574 
UCÚv”‹rUnicodeS‘
 
which
,

575 
UE¼ÜCode
 *
pE¼ÜCode
) {

577 
§
->
	`addRªge
(§->
£t
, 0, 0x7f);

580 
	`uúv_MBCSG‘F‹»dUnicodeS‘FÜUnicode
(

581 ((
UCÚv”‹rD©aHZ
*)
úv
->
exŒaInfo
)->
gbCÚv”‹r
->
sh¬edD©a
,

582 
§
, 
which
, 
UCNV_SET_FILTER_HZ
,

583 
pE¼ÜCode
);

584 
	}
}

586 cÚ¡ 
UCÚv”‹rIm¶
 
	g_HZIm¶
={

588 
UCNV_HZ
,

590 
NULL
,

591 
NULL
,

593 
_HZO³n
,

594 
_HZClo£
,

595 
_HZRe£t
,

597 
UCÚv”‹r_toUnicode_HZ_OFFSETS_LOGIC
,

598 
UCÚv”‹r_toUnicode_HZ_OFFSETS_LOGIC
,

599 
UCÚv”‹r_äomUnicode_HZ_OFFSETS_LOGIC
,

600 
UCÚv”‹r_äomUnicode_HZ_OFFSETS_LOGIC
,

601 
NULL
,

603 
NULL
,

604 
NULL
,

605 
_HZ_Wr™eSub
,

606 
_HZ_SaãClÚe
,

607 
_HZ_G‘UnicodeS‘


610 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_HZSticD©a
={

611 (
UCÚv”‹rSticD©a
),

614 
UCNV_IBM
,

615 
UCNV_HZ
,

620 
FALSE
,

621 
FALSE
,

629 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_HZD©a
={

630 (
UCÚv”‹rSh¬edD©a
),

631 ~((
ušt32_t
) 0),

632 
NULL
,

633 
NULL
,

634 &
_HZSticD©a
,

635 
FALSE
,

636 &
_HZIm¶
,

	@ucnvisci.c

18 
	~"unicode/uty³s.h
"

20 #ià!
UCONFIG_NO_CONVERSION
 && !
UCONFIG_NO_LEGACY_CONVERSION


22 
	~"cmemÜy.h
"

23 
	~"uúv_bld.h
"

24 
	~"unicode/uúv.h
"

25 
	~"uúv_úv.h
"

26 
	~"unicode/uúv_cb.h
"

27 
	~"unicode/u£t.h
"

28 
	~"c¡ršg.h
"

30 
	#UCNV_OPTIONS_VERSION_MASK
 0xf

	)

31 
	#NUKTA
 0x093c

	)

32 
	#HALANT
 0x094d

	)

33 
	#ZWNJ
 0x200ø

	)

34 
	#ZWJ
 0x200d

	)

35 
	#INVALID_CHAR
 0xffff

	)

36 
	#ATR
 0xEF

	)

37 
	#EXT
 0xF0

	)

38 
	#DANDA
 0x0964

	)

39 
	#DOUBLE_DANDA
 0x0965

	)

40 
	#ISCII_NUKTA
 0xE9

	)

41 
	#ISCII_HALANT
 0xE8

	)

42 
	#ISCII_DANDA
 0xEA

	)

43 
	#ISCII_INV
 0xD9

	)

44 
	#ISCII_VOWEL_SIGN_E
 0xE0

	)

45 
	#INDIC_BLOCK_BEGIN
 0x0900

	)

46 
	#INDIC_BLOCK_END
 0x0D7F

	)

47 
	#INDIC_RANGE
 (
INDIC_BLOCK_END
 - 
INDIC_BLOCK_BEGIN
)

	)

48 
	#VOCALLIC_RR
 0x0931

	)

49 
	#LF
 0x0A

	)

50 
	#ASCII_END
 0xA0

	)

51 
	#NO_CHAR_MARKER
 0xFFFE

	)

52 
	#TELUGU_DELTA
 
DELTA
 * 
TELUGU


	)

53 
	#DEV_ABBR_SIGN
 0x0970

	)

54 
	#DEV_ANUDATTA
 0x0952

	)

55 
	#EXT_RANGE_BEGIN
 0xA1

	)

56 
	#EXT_RANGE_END
 0xEE

	)

58 
	#PNJ_DELTA
 0x0100

	)

59 
	#PNJ_BINDI
 0x0A02

	)

60 
	#PNJ_TIPPI
 0x0A70

	)

61 
	#PNJ_SIGN_VIRAMA
 0x0A4D

	)

62 
	#PNJ_ADHAK
 0x0A71

	)

63 
	#PNJ_HA
 0x0A39

	)

64 
	#PNJ_RRA
 0x0A5C

	)

66 
US‘
* 
	gPNJ_BINDI_TIPPI_SET
ğ
NULL
;

67 
US‘
* 
	gPNJ_CONSONANT_SET
ğ
NULL
;

70 
	mDEVANAGARI
 =0,

71 
	mBENGALI
,

72 
	mGURMUKHI
,

73 
	mGUJARATI
,

74 
	mORIYA
,

75 
	mTAMIL
,

76 
	mTELUGU
,

77 
	mKANNADA
,

78 
	mMALAYALAM
,

79 
	mDELTA
=0x80

80 }
	tUniLªg
;

87 
	mDEF
 = 0x40,

88 
	mRMN
 = 0x41,

89 
	mDEV
 = 0x42,

90 
	mBNG
 = 0x43,

91 
	mTML
 = 0x44,

92 
	mTLG
 = 0x45,

93 
	mASM
 = 0x46,

94 
	mORI
 = 0x47,

95 
	mKND
 = 0x48,

96 
	mMLM
 = 0x49,

97 
	mGJR
 = 0x4A,

98 
	mPNJ
 = 0x4B,

99 
	mARB
 = 0x71,

100 
	mPES
 = 0x72,

101 
	mURD
 = 0x73,

102 
	mSND
 = 0x74,

103 
	mKSM
 = 0x75,

104 
	mPST
 = 0x76

105 }
	tISCIILªg
;

108 
	mDEV_MASK
 =0x80,

109 
	mPNJ_MASK
 =0x40,

110 
	mGJR_MASK
 =0x20,

111 
	mORI_MASK
 =0x10,

112 
	mBNG_MASK
 =0x08,

113 
	mKND_MASK
 =0x04,

114 
	mMLM_MASK
 =0x02,

115 
	mTML_MASK
 =0x01,

116 
	mZERO
 =0x00

117 }
	tMaskEnum
;

119 
	#ISCII_CNV_PREFIX
 "ISCII,v”siÚ="

	)

122 
UCh¬
 
	mcÚ‹xtCh¬ToUnicode
;

123 
UCh¬
 
	mcÚ‹xtCh¬FromUnicode
;

124 
ušt16_t
 
	mdefD–ToUnicode
;

125 
ušt16_t
 
	mcu¼’tD–FromUnicode
;

126 
ušt16_t
 
	mcu¼’tD–ToUnicode
;

127 
MaskEnum
 
	mcu¼’tMaskFromUnicode
;

128 
MaskEnum
 
	mcu¼’tMaskToUnicode
;

129 
MaskEnum
 
	mdefMaskToUnicode
;

130 
UBoŞ
 
	misFœ¡Bufãr
;

131 
UBoŞ
 
	m»£tToDeçuÉToUnicode
;

132 
	mÇme
[(
ISCII_CNV_PREFIX
) + 1];

133 
UCh¬32
 
	m´evToUnicodeStus
;

134 } 
	tUCÚv”‹rD©aISCII
;

136 
	sLookupD©aSŒuù
 {

137 
UniLªg
 
	muniLªg
;

138 
MaskEnum
 
	mmaskEnum
;

139 
ISCIILªg
 
	misciiLªg
;

140 } 
	tLookupD©aSŒuù
;

142 cÚ¡ 
LookupD©aSŒuù
 
	glookupIn™ŸlD©a
[]={

143 { 
DEVANAGARI
, 
DEV_MASK
, 
DEV
 },

144 { 
BENGALI
, 
BNG_MASK
, 
BNG
 },

145 { 
GURMUKHI
, 
PNJ_MASK
, 
PNJ
 },

146 { 
GUJARATI
, 
GJR_MASK
, 
GJR
 },

147 { 
ORIYA
, 
ORI_MASK
, 
ORI
 },

148 { 
TAMIL
, 
TML_MASK
, 
TML
 },

149 { 
TELUGU
, 
KND_MASK
, 
TLG
 },

150 { 
KANNADA
, 
KND_MASK
, 
KND
 },

151 { 
MALAYALAM
, 
MLM_MASK
, 
MLM
 }

154 
	$š™ŸlizeS‘s
() {

156 
PNJ_CONSONANT_SET
 = 
	`u£t_İ’
(0,0);

157 
	`u£t_ş—r
(
PNJ_CONSONANT_SET
);

159 
	`u£t_addRªge
(
PNJ_CONSONANT_SET
, 0x0A15, 0x0A28);

160 
	`u£t_addRªge
(
PNJ_CONSONANT_SET
, 0x0A2A, 0x0A30);

161 
	`u£t_addRªge
(
PNJ_CONSONANT_SET
, 0x0A35, 0x0A36);

162 
	`u£t_addRªge
(
PNJ_CONSONANT_SET
, 0x0A38, 0x0A39);

164 
PNJ_BINDI_TIPPI_SET
 = 
	`u£t_şÚe
(
PNJ_CONSONANT_SET
);

165 
	`u£t_add
(
PNJ_BINDI_TIPPI_SET
, 0x0A05);

166 
	`u£t_add
(
PNJ_BINDI_TIPPI_SET
, 0x0A07);

167 
	`u£t_add
(
PNJ_BINDI_TIPPI_SET
, 0x0A3F);

168 
	`u£t_addRªge
(
PNJ_BINDI_TIPPI_SET
, 0x0A41, 0x0A42);

170 
	`u£t_com·ù
(
PNJ_CONSONANT_SET
);

171 
	`u£t_com·ù
(
PNJ_BINDI_TIPPI_SET
);

172 
	}
}

174 
	$_ISCIIO³n
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rLßdArgs
 *
pArgs
, 
UE¼ÜCode
 *
”rÜCode
) {

175 if(
pArgs
->
ÚlyTe¡IsLßdabË
) {

180 
	`š™ŸlizeS‘s
();

182 
úv
->
exŒaInfo
 = 
	`u´v_m®loc
((
UCÚv”‹rD©aISCII
));

184 ià(
úv
->
exŒaInfo
 !ğ
NULL
) {

185 
št32_t
 
Ën
=0;

186 
UCÚv”‹rD©aISCII
 *
cÚv”‹rD©a
=

187 (
UCÚv”‹rD©aISCII
 *è
úv
->
exŒaInfo
;

188 
cÚv”‹rD©a
->
cÚ‹xtCh¬ToUnicode
=
NO_CHAR_MARKER
;

189 
úv
->
toUnicodeStus
 = 
missšgCh¬M¬k”
;

190 
cÚv”‹rD©a
->
cÚ‹xtCh¬FromUnicode
=0x0000;

191 
cÚv”‹rD©a
->
»£tToDeçuÉToUnicode
=
FALSE
;

193 ià((
pArgs
->
İtiÚs
 & 
UCNV_OPTIONS_VERSION_MASK
) < 9) {

195 
cÚv”‹rD©a
->
cu¼’tD–FromUnicode


196 ğ
cÚv”‹rD©a
->
cu¼’tD–ToUnicode


197 ğ
cÚv”‹rD©a
->
defD–ToUnicode
 = (
ušt16_t
)(
lookupIn™ŸlD©a
[
pArgs
->
İtiÚs
 & 
UCNV_OPTIONS_VERSION_MASK
].
uniLªg
 * 
DELTA
);

199 
cÚv”‹rD©a
->
cu¼’tMaskFromUnicode


200 ğ
cÚv”‹rD©a
->
cu¼’tMaskToUnicode


201 ğ
cÚv”‹rD©a
->
defMaskToUnicode
 = 
lookupIn™ŸlD©a
[
pArgs
->
İtiÚs
 & 
UCNV_OPTIONS_VERSION_MASK
].
maskEnum
;

203 
cÚv”‹rD©a
->
isFœ¡Bufãr
=
TRUE
;

204 ()
	`u´v_¡rıy
(
cÚv”‹rD©a
->
Çme
, 
ISCII_CNV_PREFIX
);

205 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
cÚv”‹rD©a
->
Çme
);

206 
cÚv”‹rD©a
->
Çme
[
Ën
]ğ()((
pArgs
->
İtiÚs
 & 
UCNV_OPTIONS_VERSION_MASK
) + '0');

207 
cÚv”‹rD©a
->
Çme
[
Ën
+1]=0;

209 
cÚv”‹rD©a
->
´evToUnicodeStus
 = 0x0000;

211 
	`u´v_ä“
(
úv
->
exŒaInfo
);

212 
úv
->
exŒaInfo
 = 
NULL
;

213 *
”rÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

217 *
”rÜCode
 =
U_MEMORY_ALLOCATION_ERROR
;

219 
	}
}

221 
	$_ISCIIClo£
(
UCÚv”‹r
 *
úv
) {

222 ià(
úv
->
exŒaInfo
!=
NULL
) {

223 ià(!
úv
->
isExŒaLoÿl
) {

224 
	`u´v_ä“
(
úv
->
exŒaInfo
);

226 
úv
->
exŒaInfo
=
NULL
;

228 ià(
PNJ_CONSONANT_SET
 !ğ
NULL
) {

229 
	`u£t_şo£
(
PNJ_CONSONANT_SET
);

230 
PNJ_CONSONANT_SET
 = 
NULL
;

232 ià(
PNJ_BINDI_TIPPI_SET
 !ğ
NULL
) {

233 
	`u£t_şo£
(
PNJ_BINDI_TIPPI_SET
);

234 
PNJ_BINDI_TIPPI_SET
 = 
NULL
;

236 
	}
}

238 cÚ¡ * 
	$_ISCIIg‘Name
(cÚ¡ 
UCÚv”‹r
* 
úv
) {

239 ià(
úv
->
exŒaInfo
) {

240 
UCÚv”‹rD©aISCII
* 
myD©a
ğ(UCÚv”‹rD©aISCII*)
úv
->
exŒaInfo
;

241  
myD©a
->
Çme
;

243  
NULL
;

244 
	}
}

246 
	$_ISCIIRe£t
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rRe£tChoiû
 
choiû
) {

247 
UCÚv”‹rD©aISCII
* 
d©a
 =(UCÚv”‹rD©aISCII *è(
úv
->
exŒaInfo
);

248 ià(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

249 
úv
->
toUnicodeStus
 = 
missšgCh¬M¬k”
;

250 
úv
->
mode
=0;

251 
d©a
->
cu¼’tD–ToUnicode
=d©a->
defD–ToUnicode
;

252 
d©a
->
cu¼’tMaskToUnicode
 = d©a->
defMaskToUnicode
;

253 
d©a
->
cÚ‹xtCh¬ToUnicode
=
NO_CHAR_MARKER
;

254 
d©a
->
´evToUnicodeStus
 = 0x0000;

256 ià(
choiû
!=
UCNV_RESET_TO_UNICODE
) {

257 
úv
->
äomUCh¬32
=0x0000;

258 
d©a
->
cÚ‹xtCh¬FromUnicode
=0x00;

259 
d©a
->
cu¼’tMaskFromUnicode
=d©a->
defMaskToUnicode
;

260 
d©a
->
cu¼’tD–FromUnicode
=d©a->
defD–ToUnicode
;

261 
d©a
->
isFœ¡Bufãr
=
TRUE
;

262 
d©a
->
»£tToDeçuÉToUnicode
=
FALSE
;

264 
	}
}

286 cÚ¡ 
ušt8_t
 
	gv®id™yTabË
[128] = {

290  
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

291  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
ZERO
 + ZERO + ZERO ,

292  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

293  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

294  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

295  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

296  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

297  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

298  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

299  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

300  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

301  
DEV_MASK
 + 
ZERO
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + ZERO ,

302  
DEV_MASK
 + 
ZERO
 + ZERO + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + ZERO ,

303  
DEV_MASK
 + 
ZERO
 + 
GJR_MASK
 + ZERO + ZERO + ZERO + ZERO + ZERO ,

304  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

305  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

306  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

307  
DEV_MASK
 + 
ZERO
 + 
GJR_MASK
 + ZERO + ZERO + ZERO + ZERO + ZERO ,

308  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

309  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

310  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

311  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

312  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

313  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

314  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

315  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

316  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

317  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

318  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

319  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

320  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

321  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

322  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

323  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

324  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

325  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

326  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

327  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

328  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

329  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

330  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

331  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + 
TML_MASK
 ,

332  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

333  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

334  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

335  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

336  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

337  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

338  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

339  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + 
MLM_MASK
 + 
TML_MASK
 ,

340  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

341  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
ZERO
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

342  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + 
MLM_MASK
 + 
TML_MASK
 ,

343  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
ZERO
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

344  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
ZERO
 ,

345  
DEV_MASK
 + 
ZERO
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

346  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

347  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

348  
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

349  
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

350  
DEV_MASK
 + 
PNJ_MASK
 + 
ZERO
 + 
ORI_MASK
 + 
BNG_MASK
 + ZERO + ZERO + ZERO ,

351  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

352  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

353  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

354  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

355  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

356  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

357  
DEV_MASK
 + 
ZERO
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + ZERO ,

358  
DEV_MASK
 + 
ZERO
 + 
GJR_MASK
 + ZERO + 
BNG_MASK
 + 
KND_MASK
 + ZERO + ZERO ,

359  
DEV_MASK
 + 
ZERO
 + 
GJR_MASK
 + ZERO + ZERO + ZERO + ZERO + ZERO ,

360  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

361  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

362  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

363  
DEV_MASK
 + 
ZERO
 + 
GJR_MASK
 + ZERO + ZERO + ZERO + ZERO + ZERO ,

364  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

365  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

366  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

367  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

368  
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

369  
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

370  
DEV_MASK
 + 
ZERO
 + 
GJR_MASK
 + ZERO + ZERO + ZERO + ZERO + ZERO ,

371  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

372  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

373  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

374  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

375  
ZERO
 + ZERO + ZERO + ZERO + ZERO + 
KND_MASK
 + ZERO + ZERO ,

376  
ZERO
 + ZERO + ZERO + 
ORI_MASK
 + ZERO + 
KND_MASK
 + ZERO + ZERO ,

377  
ZERO
 + ZERO + ZERO + 
ORI_MASK
 + 
BNG_MASK
 + ZERO + 
MLM_MASK
 + ZERO ,

378  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

379  
DEV_MASK
 + 
PNJ_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO ,

380  
DEV_MASK
 + 
PNJ_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO ,

381  
DEV_MASK
 + 
PNJ_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO ,

382  
DEV_MASK
 + 
PNJ_MASK
 + 
ZERO
 + ZERO + 
BNG_MASK
 + ZERO + ZERO + ZERO ,

383  
DEV_MASK
 + 
ZERO
 + ZERO + 
ORI_MASK
 + 
BNG_MASK
 + ZERO + ZERO + ZERO ,

384  
DEV_MASK
 + 
PNJ_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO ,

385  
DEV_MASK
 + 
ZERO
 + ZERO + 
ORI_MASK
 + 
BNG_MASK
 + ZERO + ZERO + ZERO ,

386  
DEV_MASK
 + 
ZERO
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + ZERO ,

387  
DEV_MASK
 + 
ZERO
 + ZERO + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + ZERO ,

388  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + 
BNG_MASK
 + ZERO + ZERO + ZERO ,

389  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + 
BNG_MASK
 + ZERO + ZERO + ZERO ,

390  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

391  
DEV_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO ,

392  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

393  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

394  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

395  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

396  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

397  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

398  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

399  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

400  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

401  
DEV_MASK
 + 
PNJ_MASK
 + 
GJR_MASK
 + 
ORI_MASK
 + 
BNG_MASK
 + 
KND_MASK
 + 
MLM_MASK
 + 
TML_MASK
 ,

402  
DEV_MASK
 + 
PNJ_MASK
 + 
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO ,

408  
ZERO
 + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO + ZERO

411 cÚ¡ 
ušt16_t
 
	gäomUnicodeTabË
[128]={

541 cÚ¡ 
ušt16_t
 
	gtoUnicodeTabË
[256]={

800 cÚ¡ 
ušt16_t
 
	gvow–SignES³cŸlCa£s
[][2]={

805 cÚ¡ 
ušt16_t
 
	gnukS³cŸlCa£s
[][2]={

825 
	#WRITE_TO_TARGET_FROM_U
(
¬gs
,
off£ts
,
sourû
,
rg‘
,
rg‘Lim™
,
rg‘By‹Un™
,
”r
){ \

826 
št32_t
 
off£t
 = (št32_t)(
sourû
 - 
¬gs
->source-1); \

828 if(
rg‘
 < 
rg‘Lim™
){ \

829 if(
rg‘By‹Un™
 <= 0xFF){ \

830 *(
rg‘
)++ = (
ušt8_t
)(
rg‘By‹Un™
); \

831 if(
off£ts
){ \

832 *(
off£ts
++èğ
off£t
; \

835 ià(
rg‘By‹Un™
 > 0xFFFF) { \

836 *(
rg‘
)++ = (
ušt8_t
)(
rg‘By‹Un™
>>16); \

837 ià(
off£ts
) { \

838 --
off£t
; \

839 *(
off£ts
++èğ
off£t
; \

842 ià(!(
rg‘
 < 
rg‘Lim™
)) { \

843 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = \

844 (
ušt8_t
)(
rg‘By‹Un™
 >> 8); \

845 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = \

846 (
ušt8_t
)
rg‘By‹Un™
; \

847 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
; \

849 *(
rg‘
)++ = (
ušt8_t
)(
rg‘By‹Un™
>>8); \

850 if(
off£ts
){ \

851 *(
off£ts
++èğ
off£t
; \

853 if(
rg‘
 < 
rg‘Lim™
){ \

854 *(
rg‘
)++ = (
ušt8_t
è
rg‘By‹Un™
; \

855 if(
off£ts
){ \

856 *(
off£ts
++èğ
off£t
 ; \

859 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] =\

860 (
ušt8_t
è(
rg‘By‹Un™
); \

861 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
; \

866 ià(
rg‘By‹Un™
 & 0xFF0000) { \

867 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = \

868 (
ušt8_t
è(
rg‘By‹Un™
 >>16); \

870 if(
rg‘By‹Un™
 & 0xFF00){ \

871 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = \

872 (
ušt8_t
è(
rg‘By‹Un™
 >>8); \

874 
¬gs
->
cÚv”‹r
->
ch¬E¼ÜBufãr
[¬gs->cÚv”‹r->
ch¬E¼ÜBufãrL’gth
++] = \

875 (
ušt8_t
è(
rg‘By‹Un™
); \

876 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
; \

878 }

	)

887 
	$UCÚv”‹r_äomUnicode_ISCII_OFFSETS_LOGIC
(

888 
UCÚv”‹rFromUnicodeArgs
 * 
¬gs
, 
UE¼ÜCode
 * 
”r
) {

889 cÚ¡ 
UCh¬
 *
sourû
 = 
¬gs
->source;

890 cÚ¡ 
UCh¬
 *
sourûLim™
 = 
¬gs
->sourceLimit;

891 *
rg‘
 = (*è
¬gs
->target;

892 *
rg‘Lim™
 = (*è
¬gs
->targetLimit;

893 
št32_t
* 
off£ts
 = 
¬gs
->offsets;

894 
ušt32_t
 
rg‘By‹Un™
 = 0x0000;

895 
UCh¬32
 
sourûCh¬
 = 0x0000;

896 
UCh¬32
 
‹mpCÚ‹xtFromUnicode
 = 0x0000;

897 
UCÚv”‹rD©aISCII
 *
cÚv”‹rD©a
;

898 
ušt16_t
 
ÃwD–
=0;

899 
ušt16_t
 
¿nge
 = 0;

900 
UBoŞ
 
d–Chªged
 = 
FALSE
;

902 ià((
¬gs
->
cÚv”‹r
 =ğ
NULL
è|| (¬gs->
rg‘Lim™
 <‡rgs->
rg‘
è|| (¬gs->
sourûLim™
 <‡rgs->
sourû
)) {

903 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

907 
cÚv”‹rD©a
=(
UCÚv”‹rD©aISCII
*)
¬gs
->
cÚv”‹r
->
exŒaInfo
;

908 
ÃwD–
=
cÚv”‹rD©a
->
cu¼’tD–FromUnicode
;

909 
¿nge
 = (
ušt16_t
)(
ÃwD–
/
DELTA
);

911 ià((
sourûCh¬
 = 
¬gs
->
cÚv”‹r
->
äomUCh¬32
)!=0) {

912 
g‘T¿
;

916 
sourû
 < 
sourûLim™
) {

918 ià(
¬gs
->
cÚv”‹r
->
äomUnicodeStus
 =ğ
LF
) {

919 
rg‘By‹Un™
 = 
ATR
<<8;

920 
rg‘By‹Un™
 +ğ(
ušt8_t
è
lookupIn™ŸlD©a
[
¿nge
].
isciiLªg
;

921 
¬gs
->
cÚv”‹r
->
äomUnicodeStus
 = 0x0000;

923 
	`WRITE_TO_TARGET_FROM_U
(
¬gs
,
off£ts
,
sourû
,
rg‘
,
rg‘Lim™
,
rg‘By‹Un™
,
”r
);

924 ià(
	`U_FAILURE
(*
”r
)) {

929 
sourûCh¬
 = *
sourû
++;

930 
‹mpCÚ‹xtFromUnicode
 = 
cÚv”‹rD©a
->
cÚ‹xtCh¬FromUnicode
;

932 
rg‘By‹Un™
 = 
missšgCh¬M¬k”
;

935 ià(
sourûCh¬
 <ğ
ASCII_END
) {

936 
¬gs
->
cÚv”‹r
->
äomUnicodeStus
 = 
sourûCh¬
;

937 
	`WRITE_TO_TARGET_FROM_U
(
¬gs
,
off£ts
,
sourû
,
rg‘
,
rg‘Lim™
,
sourûCh¬
,
”r
);

938 ià(
	`U_FAILURE
(*
”r
)) {

943 
sourûCh¬
) {

944 
ZWNJ
:

946 ià(
cÚv”‹rD©a
->
cÚ‹xtCh¬FromUnicode
) {

947 
cÚv”‹rD©a
->
cÚ‹xtCh¬FromUnicode
 = 0x00;

948 
rg‘By‹Un™
 = 
ISCII_HALANT
;

951 
cÚv”‹rD©a
->
cÚ‹xtCh¬FromUnicode
 = 0x00;

955 
ZWJ
:

957 ià(
cÚv”‹rD©a
->
cÚ‹xtCh¬FromUnicode
) {

958 
rg‘By‹Un™
 = 
ISCII_NUKTA
;

960 
rg‘By‹Un™
 =
ISCII_INV
;

962 
cÚv”‹rD©a
->
cÚ‹xtCh¬FromUnicode
 = 0x00;

966 ià((
ušt16_t
)(
INDIC_BLOCK_END
-
sourûCh¬
è<ğ
INDIC_RANGE
) {

971 ià(
sourûCh¬
!ğ
DANDA
 && sourûCh¬ !ğ
DOUBLE_DANDA
) {

973 
¿nge
 =(
ušt16_t
)((
sourûCh¬
-
INDIC_BLOCK_BEGIN
)/
DELTA
);

974 
ÃwD–
 =(
ušt16_t
)(
¿nge
*
DELTA
);

977 ià(
ÃwD–
!ğ
cÚv”‹rD©a
->
cu¼’tD–FromUnicode
 || cÚv”‹rD©a->
isFœ¡Bufãr
) {

978 
cÚv”‹rD©a
->
cu¼’tD–FromUnicode
 = 
ÃwD–
;

979 
cÚv”‹rD©a
->
cu¼’tMaskFromUnicode
 = 
lookupIn™ŸlD©a
[
¿nge
].
maskEnum
;

980 
d–Chªged
 =
TRUE
;

981 
cÚv”‹rD©a
->
isFœ¡Bufãr
=
FALSE
;

984 ià(
cÚv”‹rD©a
->
cu¼’tD–FromUnicode
 =ğ
PNJ_DELTA
) {

985 ià(
sourûCh¬
 =ğ
PNJ_TIPPI
) {

987 
sourûCh¬
 = 
PNJ_BINDI
;

988 } ià(
sourûCh¬
 =ğ
PNJ_ADHAK
) {

990 
cÚv”‹rD©a
->
cÚ‹xtCh¬FromUnicode
 = 
PNJ_ADHAK
;

996 
sourûCh¬
 -ğ
cÚv”‹rD©a
->
cu¼’tD–FromUnicode
;

1000 
rg‘By‹Un™
=
äomUnicodeTabË
[(
ušt8_t
)
sourûCh¬
];

1003 ià((
v®id™yTabË
[(
ušt8_t
)
sourûCh¬
] & 
cÚv”‹rD©a
->
cu¼’tMaskFromUnicode
)==0) {

1005 ià(
cÚv”‹rD©a
->
cu¼’tD–FromUnicode
!=(
TELUGU_DELTA
è|| 
sourûCh¬
!=
VOCALLIC_RR
) {

1006 
rg‘By‹Un™
=
missšgCh¬M¬k”
;

1010 ià(
d–Chªged
) {

1014 
ušt32_t
 
‹mp
=0;

1015 
‹mp
 =(
ušt16_t
)(
ATR
<<8);

1016 
‹mp
 +ğ(
ušt16_t
)((
ušt8_t
è
lookupIn™ŸlD©a
[
¿nge
].
isciiLªg
);

1018 
d–Chªged
=
FALSE
;

1020 
	`WRITE_TO_TARGET_FROM_U
(
¬gs
,
off£ts
,
sourû
,
rg‘
,
rg‘Lim™
,
‹mp
,
”r
);

1021 ià(
	`U_FAILURE
(*
”r
)) {

1026 ià(
cÚv”‹rD©a
->
cu¼’tD–FromUnicode
 =ğ
PNJ_DELTA
 && (
sourûCh¬
 + PNJ_DELTAè=ğ
PNJ_ADHAK
) {

1031 
cÚv”‹rD©a
->
cÚ‹xtCh¬FromUnicode
 = 0x00;

1034 ià(
cÚv”‹rD©a
->
cu¼’tD–FromUnicode
 =ğ
PNJ_DELTA
 && 
‹mpCÚ‹xtFromUnicode
 =ğ
PNJ_ADHAK
 && 
	`u£t_cÚšs
(
PNJ_CONSONANT_SET
, (
sourûCh¬
 + PNJ_DELTA))) {

1037 
cÚv”‹rD©a
->
cÚ‹xtCh¬FromUnicode
 = 0x0000;

1038 
rg‘By‹Un™
 =¬g‘By‹Un™ << 16 | 
ISCII_HALANT
 << 8 |argetByteUnit;

1040 
	`WRITE_TO_TARGET_FROM_U
(
¬gs
, 
off£ts
, 
sourû
, 
rg‘
, 
rg‘Lim™
, 
rg‘By‹Un™
,
”r
);

1041 ià(
	`U_FAILURE
(*
”r
)) {

1044 } ià(
rg‘By‹Un™
 !ğ
missšgCh¬M¬k”
) {

1045 ià(
rg‘By‹Un™
==
ISCII_HALANT
) {

1046 
cÚv”‹rD©a
->
cÚ‹xtCh¬FromUnicode
 = (
UCh¬
)
rg‘By‹Un™
;

1049 
	`WRITE_TO_TARGET_FROM_U
(
¬gs
,
off£ts
,
sourû
,
rg‘
,
rg‘Lim™
,
rg‘By‹Un™
,
”r
);

1050 ià(
	`U_FAILURE
(*
”r
)) {

1056 ià(
	`UTF_IS_SURROGATE
(
sourûCh¬
)) {

1057 ià(
	`UTF_IS_SURROGATE_FIRST
(
sourûCh¬
)) {

1058 
g‘T¿
:

1060 ià(
sourû
 < 
sourûLim™
) {

1062 
UCh¬
 
Œa
ğ(*
sourû
);

1063 ià(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

1064 
sourû
++;

1065 
sourûCh¬
=
	`UTF16_GET_PAIR_VALUE
(sourûCh¬, 
Œa
);

1066 *
”r
 =
U_INVALID_CHAR_FOUND
;

1072 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

1076 *
”r
 = 
U_ZERO_ERROR
;

1081 *
”r
=
U_ILLEGAL_CHAR_FOUND
;

1085 *
”r
 = 
U_INVALID_CHAR_FOUND
;

1088 
¬gs
->
cÚv”‹r
->
äomUCh¬32
=
sourûCh¬
;

1094 
¬gs
->
sourû
 = source;

1095 
¬gs
->
rg‘
 = (*)target;

1096 
	}
}

1098 cÚ¡ 
ušt16_t
 
	glookupTabË
[][2]={

1099 { 
ZERO
, ZERO },

1100 { 
ZERO
, ZERO },

1101 { 
DEVANAGARI
, 
DEV_MASK
 },

1102 { 
BENGALI
, 
BNG_MASK
 },

1103 { 
TAMIL
, 
TML_MASK
 },

1104 { 
TELUGU
, 
KND_MASK
 },

1105 { 
BENGALI
, 
BNG_MASK
 },

1106 { 
ORIYA
, 
ORI_MASK
 },

1107 { 
KANNADA
, 
KND_MASK
 },

1108 { 
MALAYALAM
, 
MLM_MASK
 },

1109 { 
GUJARATI
, 
GJR_MASK
 },

1110 { 
GURMUKHI
, 
PNJ_MASK
 }

1113 
	#WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,
off£ts
,
off£t
,
rg‘UniCh¬
,
d–
, 
”r
){\

1115 if(
rg‘UniCh¬
>
ASCII_END
 && \

1116 
rg‘UniCh¬
 !ğ
ZWJ
 && \

1117 
rg‘UniCh¬
 !ğ
ZWNJ
 && \

1118 
rg‘UniCh¬
 !ğ
DANDA
 && \

1119 
rg‘UniCh¬
 !ğ
DOUBLE_DANDA
){ \

1121 
rg‘UniCh¬
+=(
ušt16_t
)(
d–
); \

1124 if(
rg‘
<
¬gs
->
rg‘Lim™
){ \

1125 *(
rg‘
)++ = (
UCh¬
)
rg‘UniCh¬
; \

1126 if(
off£ts
){ \

1127 *(
off£ts
)++ = (
št32_t
)(
off£t
); \

1130 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãr
[¬gs->cÚv”‹r->
UCh¬E¼ÜBufãrL’gth
++] = \

1131 (
UCh¬
)
rg‘UniCh¬
; \

1132 *
”r
 = 
U_BUFFER_OVERFLOW_ERROR
; \

1134 }

	)

1136 
	#GET_MAPPING
(
sourûCh¬
,
rg‘UniCh¬
,
d©a
){ \

1137 
rg‘UniCh¬
 = 
toUnicodeTabË
[(
sourûCh¬
)] ; \

1139 if(
sourûCh¬
> 
ASCII_END
 && \

1140 (
v®id™yTabË
[(
ušt8_t
)
rg‘UniCh¬
] & 
d©a
->
cu¼’tMaskToUnicode
)==0){ \

1142 if(
d©a
->
cu¼’tD–ToUnicode
!=(
TELUGU_DELTA
) || \

1143 
rg‘UniCh¬
!=
VOCALLIC_RR
){ \

1144 
rg‘UniCh¬
=
missšgCh¬M¬k”
; \

1147 }

	)

1170 
	$UCÚv”‹r_toUnicode_ISCII_OFFSETS_LOGIC
(
UCÚv”‹rToUnicodeArgs
 *
¬gs
, 
UE¼ÜCode
* 
”r
) {

1171 cÚ¡ *
sourû
 = ( *è
¬gs
->source;

1172 
UCh¬
 *
rg‘
 = 
¬gs
->target;

1173 cÚ¡ *
sourûLim™
 = 
¬gs
->sourceLimit;

1174 cÚ¡ 
UCh¬
* 
rg‘Lim™
 = 
¬gs
->targetLimit;

1175 
ušt32_t
 
rg‘UniCh¬
 = 0x0000;

1176 
ušt8_t
 
sourûCh¬
 = 0x0000;

1177 
UCÚv”‹rD©aISCII
* 
d©a
;

1178 
UCh¬32
* 
toUnicodeStus
=
NULL
;

1179 
UCh¬32
 
‹mpT¬g‘UniCh¬
 = 0x0000;

1180 
UCh¬
* 
cÚ‹xtCh¬ToUnicode
ğ
NULL
;

1181 
UBoŞ
 
found
;

1182 
i
;

1183 
off£t
 = 0;

1185 ià((
¬gs
->
cÚv”‹r
 =ğ
NULL
è|| (
rg‘
 <‡rgs->rg‘è|| (
sourû
 <‡rgs->source)) {

1186 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1190 
d©a
 = (
UCÚv”‹rD©aISCII
*)(
¬gs
->
cÚv”‹r
->
exŒaInfo
);

1191 
cÚ‹xtCh¬ToUnicode
 = &
d©a
->contextCharToUnicode;

1192 
toUnicodeStus
 = (
UCh¬32
*)&
¬gs
->
cÚv”‹r
->toUnicodeStatus;

1194 
	`U_SUCCESS
(*
”r
è&& 
sourû
<
sourûLim™
) {

1196 
rg‘UniCh¬
 = 
missšgCh¬M¬k”
;

1198 ià(
rg‘
 < 
rg‘Lim™
) {

1199 
sourûCh¬
 = ()*(
sourû
)++;

1202 ià(*
cÚ‹xtCh¬ToUnicode
==
ATR
) {

1209 ià((
ušt8_t
)(
PNJ
-
sourûCh¬
)<=PNJ-
DEV
) {

1210 
d©a
->
cu¼’tD–ToUnicode
 = (
ušt16_t
)(
lookupTabË
[
sourûCh¬
 & 0x0F][0] * 
DELTA
);

1211 
d©a
->
cu¼’tMaskToUnicode
 = (
MaskEnum
)
lookupTabË
[
sourûCh¬
 & 0x0F][1];

1212 } ià(
sourûCh¬
==
DEF
) {

1214 
d©a
->
cu¼’tD–ToUnicode
 = d©a->
defD–ToUnicode
;

1215 
d©a
->
cu¼’tMaskToUnicode
 = d©a->
defMaskToUnicode
;

1217 ià((
sourûCh¬
 >= 0x21 && sourceChar <= 0x3F)) {

1220 *
”r
 =
U_ILLEGAL_CHAR_FOUND
;

1222 *
cÚ‹xtCh¬ToUnicode
=
NO_CHAR_MARKER
;

1223 
CALLBACK
;

1228 *
cÚ‹xtCh¬ToUnicode
=
NO_CHAR_MARKER
;

1232 } ià(*
cÚ‹xtCh¬ToUnicode
==
EXT
) {

1234 ià((
ušt8_t
è(
EXT_RANGE_END
 - 
sourûCh¬
è<ğ(EXT_RANGE_END - 
EXT_RANGE_BEGIN
)) {

1236 ià(
sourûCh¬
==0xBF || sourceChar == 0xB8) {

1237 
rg‘UniCh¬
 = (
sourûCh¬
==0xBFè? 
DEV_ABBR_SIGN
 : 
DEV_ANUDATTA
;

1240 ià(
v®id™yTabË
[(
ušt8_t
)
rg‘UniCh¬
] & 
d©a
->
cu¼’tMaskToUnicode
) {

1241 *
cÚ‹xtCh¬ToUnicode
ğ
NO_CHAR_MARKER
;

1244 ià(
d©a
->
´evToUnicodeStus
) {

1245 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -1),
d©a
->
´evToUnicodeStus
,0,
”r
);

1246 
d©a
->
´evToUnicodeStus
 = 0x0000;

1249 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -2),
rg‘UniCh¬
,
d©a
->
cu¼’tD–ToUnicode
,
”r
);

1255 
rg‘UniCh¬
 = 
missšgCh¬M¬k”
;

1256 *
”r
ğ
U_INVALID_CHAR_FOUND
;

1259 *
cÚ‹xtCh¬ToUnicode
ğ
NO_CHAR_MARKER
;

1260 *
”r
 = 
U_ILLEGAL_CHAR_FOUND
;

1262 
CALLBACK
;

1263 } ià(*
cÚ‹xtCh¬ToUnicode
==
ISCII_INV
) {

1264 ià(
sourûCh¬
==
ISCII_HALANT
) {

1265 
rg‘UniCh¬
 = 0x0020;

1267 
rg‘UniCh¬
 = 
ZWJ
;

1271 ià(
d©a
->
´evToUnicodeStus
) {

1272 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -1),
d©a
->
´evToUnicodeStus
,0,
”r
);

1273 
d©a
->
´evToUnicodeStus
 = 0x0000;

1276 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -2),
rg‘UniCh¬
,
d©a
->
cu¼’tD–ToUnicode
,
”r
);

1278 *
cÚ‹xtCh¬ToUnicode
=
NO_CHAR_MARKER
;

1282 
sourûCh¬
) {

1283 
ISCII_INV
:

1284 
EXT
:

1285 
ATR
:

1286 *
cÚ‹xtCh¬ToUnicode
 = (
UCh¬
)
sourûCh¬
;

1288 ià(*
toUnicodeStus
 !ğ
missšgCh¬M¬k”
) {

1290 ià(
d©a
->
´evToUnicodeStus
) {

1291 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -1),
d©a
->
´evToUnicodeStus
,0,
”r
);

1292 
d©a
->
´evToUnicodeStus
 = 0x0000;

1294 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -2),*
toUnicodeStus
,
d©a
->
cu¼’tD–ToUnicode
,
”r
);

1295 *
toUnicodeStus
 = 
missšgCh¬M¬k”
;

1298 
ISCII_DANDA
:

1300 ià(*
cÚ‹xtCh¬ToUnicode
=ğ
ISCII_DANDA
) {

1301 
rg‘UniCh¬
 = 
DOUBLE_DANDA
;

1303 *
cÚ‹xtCh¬ToUnicode
 = 
NO_CHAR_MARKER
;

1304 *
toUnicodeStus
 = 
missšgCh¬M¬k”
;

1306 
	`GET_MAPPING
(
sourûCh¬
,
rg‘UniCh¬
,
d©a
);

1307 *
cÚ‹xtCh¬ToUnicode
 = 
sourûCh¬
;

1310 
ISCII_HALANT
:

1312 ià(*
cÚ‹xtCh¬ToUnicode
 =ğ
ISCII_HALANT
) {

1313 
rg‘UniCh¬
 = 
ZWNJ
;

1315 *
cÚ‹xtCh¬ToUnicode
 = 
NO_CHAR_MARKER
;

1317 
	`GET_MAPPING
(
sourûCh¬
,
rg‘UniCh¬
,
d©a
);

1318 *
cÚ‹xtCh¬ToUnicode
 = 
sourûCh¬
;

1324 
d©a
->
»£tToDeçuÉToUnicode
 = 
TRUE
;

1325 
	`GET_MAPPING
(
sourûCh¬
,
rg‘UniCh¬
,
d©a
)

1327 *
cÚ‹xtCh¬ToUnicode
 = 
sourûCh¬
;

1330 
ISCII_VOWEL_SIGN_E
:

1331 
i
=1;

1332 
found
=
FALSE
;

1333 ; 
i
<
vow–SignES³cŸlCa£s
[0][0]; i++) {

1334 ià(
vow–SignES³cŸlCa£s
[
i
][0]==(
ušt8_t
)*
cÚ‹xtCh¬ToUnicode
) {

1335 
rg‘UniCh¬
=
vow–SignES³cŸlCa£s
[
i
][1];

1336 
found
=
TRUE
;

1340 ià(
found
) {

1342 ià(
v®id™yTabË
[(
ušt8_t
)
rg‘UniCh¬
] & 
d©a
->
cu¼’tMaskToUnicode
) {

1344 *
cÚ‹xtCh¬ToUnicode
ğ
NO_CHAR_MARKER
;

1345 *
toUnicodeStus
 = 
missšgCh¬M¬k”
;

1349 
	`GET_MAPPING
(
sourûCh¬
,
rg‘UniCh¬
,
d©a
);

1350 *
cÚ‹xtCh¬ToUnicode
 = 
sourûCh¬
;

1353 
ISCII_NUKTA
:

1355 ià(*
cÚ‹xtCh¬ToUnicode
 =ğ
ISCII_HALANT
) {

1356 
rg‘UniCh¬
 = 
ZWJ
;

1358 *
cÚ‹xtCh¬ToUnicode
 = 
NO_CHAR_MARKER
;

1360 } ià(
d©a
->
cu¼’tD–ToUnicode
 =ğ
PNJ_DELTA
 && d©a->
cÚ‹xtCh¬ToUnicode
 == 0xc0) {

1362 ià(
d©a
->
´evToUnicodeStus
) {

1363 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -1),
d©a
->
´evToUnicodeStus
,0,
”r
);

1364 
d©a
->
´evToUnicodeStus
 = 0x0000;

1369 
rg‘UniCh¬
 = 
PNJ_RRA
;

1370 
	`WRITE_TO_TARGET_TO_U
(
¬gs
, 
sourû
, 
rg‘
,‡rgs->
off£ts
, (sourû-¬gs->sourû)-2, 
rg‘UniCh¬
, 0, 
”r
);

1371 ià(
	`U_SUCCESS
(*
”r
)) {

1372 
rg‘UniCh¬
 = 
PNJ_SIGN_VIRAMA
;

1373 
	`WRITE_TO_TARGET_TO_U
(
¬gs
, 
sourû
, 
rg‘
,‡rgs->
off£ts
, (sourû-¬gs->sourû)-2, 
rg‘UniCh¬
, 0, 
”r
);

1374 ià(
	`U_SUCCESS
(*
”r
)) {

1375 
rg‘UniCh¬
 = 
PNJ_HA
;

1376 
	`WRITE_TO_TARGET_TO_U
(
¬gs
, 
sourû
, 
rg‘
,‡rgs->
off£ts
, (sourû-¬gs->sourû)-2, 
rg‘UniCh¬
, 0, 
”r
);

1378 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãr
[¬gs->cÚv”‹r->
UCh¬E¼ÜBufãrL’gth
++]ğ
PNJ_HA
;

1381 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãr
[¬gs->cÚv”‹r->
UCh¬E¼ÜBufãrL’gth
++]ğ
PNJ_SIGN_VIRAMA
;

1382 
¬gs
->
cÚv”‹r
->
UCh¬E¼ÜBufãr
[¬gs->cÚv”‹r->
UCh¬E¼ÜBufãrL’gth
++]ğ
PNJ_HA
;

1384 *
toUnicodeStus
 = 
missšgCh¬M¬k”
;

1385 
d©a
->
cÚ‹xtCh¬ToUnicode
 = 
NO_CHAR_MARKER
;

1389 
i
=1;

1390 
found
 =
FALSE
;

1391 ; 
i
<
nukS³cŸlCa£s
[0][0]; i++) {

1392 ià(
nukS³cŸlCa£s
[
i
][0]==(
ušt8_t
)

1393 *
cÚ‹xtCh¬ToUnicode
) {

1394 
rg‘UniCh¬
=
nukS³cŸlCa£s
[
i
][1];

1395 
found
 =
TRUE
;

1399 ià(
found
) {

1401 ià(
v®id™yTabË
[(
ušt8_t
)
rg‘UniCh¬
] & 
d©a
->
cu¼’tMaskToUnicode
) {

1403 *
cÚ‹xtCh¬ToUnicode
ğ
NO_CHAR_MARKER
;

1404 *
toUnicodeStus
 = 
missšgCh¬M¬k”
;

1405 ià(
d©a
->
cu¼’tD–ToUnicode
 =ğ
PNJ_DELTA
) {

1407 ià(
d©a
->
´evToUnicodeStus
) {

1408 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -1),
d©a
->
´evToUnicodeStus
,0,
”r
);

1409 
d©a
->
´evToUnicodeStus
 = 0x0000;

1411 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -2),
rg‘UniCh¬
,
d©a
->
cu¼’tD–ToUnicode
,
”r
);

1420 :
	`GET_MAPPING
(
sourûCh¬
,
rg‘UniCh¬
,
d©a
)

1422 *
cÚ‹xtCh¬ToUnicode
 = 
sourûCh¬
;

1426 ià(*
toUnicodeStus
 !ğ
missšgCh¬M¬k”
) {

1428 ià(
d©a
->
cu¼’tD–ToUnicode
 =ğ
PNJ_DELTA
 && d©a->
´evToUnicodeStus
 !ğ0 && 
	`u£t_cÚšs
(
PNJ_CONSONANT_SET
, data->prevToUnicodeStatus) &&

1429 (*
toUnicodeStus
 + 
PNJ_DELTA
è=ğ
PNJ_SIGN_VIRAMA
 && (
rg‘UniCh¬
 + PNJ_DELTAè=ğ
d©a
->
´evToUnicodeStus
) {

1431 
off£t
 = ()(
sourû
-
¬gs
->source - 3);

1432 
‹mpT¬g‘UniCh¬
 = 
PNJ_ADHAK
;

1433 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,
off£t
,
‹mpT¬g‘UniCh¬
,0,
”r
);

1434 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,
off£t
,
d©a
->
´evToUnicodeStus
,0,
”r
);

1435 
d©a
->
´evToUnicodeStus
 = 0x0000;

1436 *
toUnicodeStus
 = 
missšgCh¬M¬k”
;

1440 ià(
d©a
->
´evToUnicodeStus
) {

1441 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -1),
d©a
->
´evToUnicodeStus
,0,
”r
);

1442 
d©a
->
´evToUnicodeStus
 = 0x0000;

1447 ià(
d©a
->
cu¼’tD–ToUnicode
 =ğ
PNJ_DELTA
 && (
rg‘UniCh¬
 + PNJ_DELTAè=ğ
PNJ_BINDI
 && 
	`u£t_cÚšs
(
PNJ_BINDI_TIPPI_SET
, (*
toUnicodeStus
 + PNJ_DELTA))) {

1448 
rg‘UniCh¬
 = 
PNJ_TIPPI
 - 
PNJ_DELTA
;

1449 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -2),*
toUnicodeStus
,
PNJ_DELTA
,
”r
);

1450 } ià(
d©a
->
cu¼’tD–ToUnicode
 =ğ
PNJ_DELTA
 && (
rg‘UniCh¬
 + PNJ_DELTAè=ğ
PNJ_SIGN_VIRAMA
 && 
	`u£t_cÚšs
(
PNJ_CONSONANT_SET
, (*
toUnicodeStus
 + PNJ_DELTA))) {

1452 
d©a
->
´evToUnicodeStus
 = *
toUnicodeStus
 + 
PNJ_DELTA
;

1455 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû-¬gs->sourû -2),*
toUnicodeStus
,
d©a
->
cu¼’tD–ToUnicode
,
”r
);

1458 *
toUnicodeStus
 = 
missšgCh¬M¬k”
;

1461 ià(
rg‘UniCh¬
 !ğ
missšgCh¬M¬k”
) {

1463 *
toUnicodeStus
 = (
UCh¬
è
rg‘UniCh¬
;

1464 ià(
d©a
->
»£tToDeçuÉToUnicode
==
TRUE
) {

1465 
d©a
->
cu¼’tD–ToUnicode
 = d©a->
defD–ToUnicode
;

1466 
d©a
->
cu¼’tMaskToUnicode
 = d©a->
defMaskToUnicode
;

1467 
d©a
->
»£tToDeçuÉToUnicode
=
FALSE
;

1474 *
”r
 = 
U_INVALID_CHAR_FOUND
;

1475 
CALLBACK
:

1476 
¬gs
->
cÚv”‹r
->
toUBy‹s
[0] = (
ušt8_t
è
sourûCh¬
;

1477 
¬gs
->
cÚv”‹r
->
toUL’gth
 = 1;

1482 *
”r
 =
U_BUFFER_OVERFLOW_ERROR
;

1487 ià(
	`U_SUCCESS
(*
”r
è&& 
¬gs
->
æush
 && 
sourû
 =ğ
sourûLim™
) {

1489 
UCÚv”‹r
 *
úv
 = 
¬gs
->
cÚv”‹r
;

1491 ià(*
cÚ‹xtCh¬ToUnicode
==
ATR
 || *cÚ‹xtCh¬ToUnicode==
EXT
 || *cÚ‹xtCh¬ToUnicode==
ISCII_INV
) {

1493 
úv
->
toUBy‹s
[0] = (
ušt8_t
)*
cÚ‹xtCh¬ToUnicode
;

1494 
úv
->
toUL’gth
 = 1;

1497 *
cÚ‹xtCh¬ToUnicode
 = 
NO_CHAR_MARKER
;

1499 
úv
->
toUL’gth
 = 0;

1502 ià(*
toUnicodeStus
 !ğ
missšgCh¬M¬k”
) {

1504 
	`WRITE_TO_TARGET_TO_U
(
¬gs
,
sourû
,
rg‘
,¬gs->
off£ts
,(sourû -‡rgs->sourû -1),*
toUnicodeStus
,
d©a
->
cu¼’tD–ToUnicode
,
”r
);

1505 *
toUnicodeStus
 = 
missšgCh¬M¬k”
;

1509 
¬gs
->
rg‘
 =arget;

1510 
¬gs
->
sourû
 = source;

1511 
	}
}

1514 
	sşÚeISCIISŒuù
 {

1515 
UCÚv”‹r
 
	múv
;

1516 
UCÚv”‹rD©aISCII
 
	mmyd©a
;

1519 
UCÚv”‹r
 *

1520 
	$_ISCII_SaãClÚe
(cÚ¡ 
UCÚv”‹r
 *
úv
,

1521 *
¡ackBufãr
,

1522 
št32_t
 *
pBufãrSize
,

1523 
UE¼ÜCode
 *
¡©us
)

1525 
şÚeISCIISŒuù
 * 
loÿlClÚe
;

1526 
št32_t
 
bufãrSizeN“ded
 = (
şÚeISCIISŒuù
);

1528 ià(
	`U_FAILURE
(*
¡©us
)) {

1532 ià(*
pBufãrSize
 == 0) {

1533 *
pBufãrSize
 = 
bufãrSizeN“ded
;

1537 
loÿlClÚe
 = (
şÚeISCIISŒuù
 *)
¡ackBufãr
;

1540 
	`u´v_memıy
(&
loÿlClÚe
->
myd©a
, 
úv
->
exŒaInfo
, (
UCÚv”‹rD©aISCII
));

1541 
loÿlClÚe
->
úv
.
exŒaInfo
 = &loÿlClÚe->
myd©a
;

1542 
loÿlClÚe
->
úv
.
isExŒaLoÿl
 = 
TRUE
;

1544  &
loÿlClÚe
->
úv
;

1545 
	}
}

1548 
	$_ISCIIG‘UnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

1549 cÚ¡ 
US‘Add”
 *
§
,

1550 
UCÚv”‹rUnicodeS‘
 
which
,

1551 
UE¼ÜCode
 *
pE¼ÜCode
)

1553 
št32_t
 
idx
, 
süt
;

1554 
ušt8_t
 
mask
;

1558 
§
->
	`addRªge
(§->
£t
, 0, 
ASCII_END
);

1559 
süt
 = 
DEVANAGARI
; süˆ<ğ
MALAYALAM
; script++) {

1560 
mask
 = (
ušt8_t
)(
lookupIn™ŸlD©a
[
süt
].
maskEnum
);

1561 
idx
 = 0; idx < 
DELTA
; idx++) {

1563 ià((
v®id™yTabË
[
idx
] & 
mask
è|| (
süt
==
TELUGU
 && idx==0x31)) {

1564 
§
->
	`add
(§->
£t
, 
idx
 + (
süt
 * 
DELTA
è+ 
INDIC_BLOCK_BEGIN
);

1568 
§
->
	`add
(§->
£t
, 
DANDA
);

1569 
§
->
	`add
(§->
£t
, 
DOUBLE_DANDA
);

1570 
§
->
	`add
(§->
£t
, 
ZWNJ
);

1571 
§
->
	`add
(§->
£t
, 
ZWJ
);

1572 
	}
}

1574 cÚ¡ 
UCÚv”‹rIm¶
 
	g_ISCIIIm¶
={

1576 
UCNV_ISCII
,

1578 
NULL
,

1579 
NULL
,

1581 
_ISCIIO³n
,

1582 
_ISCIIClo£
,

1583 
_ISCIIRe£t
,

1585 
UCÚv”‹r_toUnicode_ISCII_OFFSETS_LOGIC
,

1586 
UCÚv”‹r_toUnicode_ISCII_OFFSETS_LOGIC
,

1587 
UCÚv”‹r_äomUnicode_ISCII_OFFSETS_LOGIC
,

1588 
UCÚv”‹r_äomUnicode_ISCII_OFFSETS_LOGIC
,

1589 
NULL
,

1591 
NULL
,

1592 
_ISCIIg‘Name
,

1593 
NULL
,

1594 
_ISCII_SaãClÚe
,

1595 
_ISCIIG‘UnicodeS‘


1598 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_ISCIISticD©a
={

1599 (
UCÚv”‹rSticD©a
),

1602 
UCNV_IBM
,

1603 
UCNV_ISCII
,

1608 
FALSE
,

1609 
FALSE
,

1616 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_ISCIID©a
={

1617 (
UCÚv”‹rSh¬edD©a
),

1618 ~((
ušt32_t
) 0),

1619 
NULL
,

1620 
NULL
,

1621 &
_ISCIISticD©a
,

1622 
FALSE
,

1623 &
_ISCIIIm¶
,

	@ucnvlat1.c

15 
	~"unicode/uty³s.h
"

17 #ià!
UCONFIG_NO_CONVERSION


19 
	~"unicode/uúv.h
"

20 
	~"unicode/u£t.h
"

21 
	~"uúv_bld.h
"

22 
	~"uúv_úv.h
"

25 
	#LATIN1_UNROLL_FROM_UNICODE
 1

	)

31 
	$_L©š1ToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

32 
UE¼ÜCode
 *
pE¼ÜCode
) {

33 cÚ¡ 
ušt8_t
 *
sourû
;

34 
UCh¬
 *
rg‘
;

35 
št32_t
 
rg‘C­ac™y
, 
Ëngth
;

36 
št32_t
 *
off£ts
;

38 
št32_t
 
sourûIndex
;

41 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

42 
rg‘
=
pArgs
->target;

43 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

44 
off£ts
=
pArgs
->offsets;

46 
sourûIndex
=0;

52 
Ëngth
=(
št32_t
)((cÚ¡ 
ušt8_t
 *)
pArgs
->
sourûLim™
-
sourû
);

53 if(
Ëngth
<=
rg‘C­ac™y
) {

54 
rg‘C­ac™y
=
Ëngth
;

57 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

58 
Ëngth
=
rg‘C­ac™y
;

61 if(
rg‘C­ac™y
>=8) {

63 
št32_t
 
couÁ
, 
loİs
;

65 
loİs
=
couÁ
=
rg‘C­ac™y
>>3;

66 
Ëngth
=
rg‘C­ac™y
&=0x7;

68 
rg‘
[0]=
sourû
[0];

69 
rg‘
[1]=
sourû
[1];

70 
rg‘
[2]=
sourû
[2];

71 
rg‘
[3]=
sourû
[3];

72 
rg‘
[4]=
sourû
[4];

73 
rg‘
[5]=
sourû
[5];

74 
rg‘
[6]=
sourû
[6];

75 
rg‘
[7]=
sourû
[7];

76 
rg‘
+=8;

77 
sourû
+=8;

78 } --
couÁ
>0);

80 if(
off£ts
!=
NULL
) {

82 
off£ts
[0]=
sourûIndex
++;

83 
off£ts
[1]=
sourûIndex
++;

84 
off£ts
[2]=
sourûIndex
++;

85 
off£ts
[3]=
sourûIndex
++;

86 
off£ts
[4]=
sourûIndex
++;

87 
off£ts
[5]=
sourûIndex
++;

88 
off£ts
[6]=
sourûIndex
++;

89 
off£ts
[7]=
sourûIndex
++;

90 
off£ts
+=8;

91 } --
loİs
>0);

96 
rg‘C­ac™y
>0) {

97 *
rg‘
++=*
sourû
++;

98 --
rg‘C­ac™y
;

102 
pArgs
->
sourû
=(const *)source;

103 
pArgs
->
rg‘
=target;

106 if(
off£ts
!=
NULL
) {

107 
Ëngth
>0) {

108 *
off£ts
++=
sourûIndex
++;

109 --
Ëngth
;

111 
pArgs
->
off£ts
=offsets;

113 
	}
}

116 
UCh¬32


117 
	$_L©š1G‘NextUCh¬
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

118 
UE¼ÜCode
 *
pE¼ÜCode
) {

119 cÚ¡ 
ušt8_t
 *
sourû
=(cÚ¡ ušt8_ˆ*)
pArgs
->source;

120 if(
sourû
<(cÚ¡ 
ušt8_t
 *)
pArgs
->
sourûLim™
) {

121 
pArgs
->
sourû
=(const *)(source+1);

122  *
sourû
;

126 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

128 
	}
}

132 
	$_L©š1FromUnicodeW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

133 
UE¼ÜCode
 *
pE¼ÜCode
) {

134 
UCÚv”‹r
 *
úv
;

135 cÚ¡ 
UCh¬
 *
sourû
, *
sourûLim™
;

136 
ušt8_t
 *
rg‘
, *
ŞdT¬g‘
;

137 
št32_t
 
rg‘C­ac™y
, 
Ëngth
;

138 
št32_t
 *
off£ts
;

140 
UCh¬32
 
ı
;

141 
UCh¬
 
c
, 
max
;

143 
št32_t
 
sourûIndex
;

146 
úv
=
pArgs
->
cÚv”‹r
;

147 
sourû
=
pArgs
->source;

148 
sourûLim™
=
pArgs
->sourceLimit;

149 
rg‘
=
ŞdT¬g‘
=(
ušt8_t
 *)
pArgs
->target;

150 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

151 
off£ts
=
pArgs
->offsets;

153 if(
úv
->
sh¬edD©a
==&
_L©š1D©a
) {

154 
max
=0xff;

156 
max
=0x7f;

160 
ı
=
úv
->
äomUCh¬32
;

163 
sourûIndex
ğ
ı
==0 ? 0 : -1;

169 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
);

170 if(
Ëngth
<
rg‘C­ac™y
) {

171 
rg‘C­ac™y
=
Ëngth
;

175 if(
ı
!=0 && 
rg‘C­ac™y
>0) {

176 
g‘T¿
;

179 #ià
LATIN1_UNROLL_FROM_UNICODE


181 if(
rg‘C­ac™y
>=16) {

182 
št32_t
 
couÁ
, 
loİs
;

183 
UCh¬
 
u
, 
ÜedCh¬s
;

185 
loİs
=
couÁ
=
rg‘C­ac™y
>>4;

187 
ÜedCh¬s
=
u
=*
sourû
++;

188 *
rg‘
++=(
ušt8_t
)
u
;

189 
ÜedCh¬s
|=
u
=*
sourû
++;

190 *
rg‘
++=(
ušt8_t
)
u
;

191 
ÜedCh¬s
|=
u
=*
sourû
++;

192 *
rg‘
++=(
ušt8_t
)
u
;

193 
ÜedCh¬s
|=
u
=*
sourû
++;

194 *
rg‘
++=(
ušt8_t
)
u
;

195 
ÜedCh¬s
|=
u
=*
sourû
++;

196 *
rg‘
++=(
ušt8_t
)
u
;

197 
ÜedCh¬s
|=
u
=*
sourû
++;

198 *
rg‘
++=(
ušt8_t
)
u
;

199 
ÜedCh¬s
|=
u
=*
sourû
++;

200 *
rg‘
++=(
ušt8_t
)
u
;

201 
ÜedCh¬s
|=
u
=*
sourû
++;

202 *
rg‘
++=(
ušt8_t
)
u
;

203 
ÜedCh¬s
|=
u
=*
sourû
++;

204 *
rg‘
++=(
ušt8_t
)
u
;

205 
ÜedCh¬s
|=
u
=*
sourû
++;

206 *
rg‘
++=(
ušt8_t
)
u
;

207 
ÜedCh¬s
|=
u
=*
sourû
++;

208 *
rg‘
++=(
ušt8_t
)
u
;

209 
ÜedCh¬s
|=
u
=*
sourû
++;

210 *
rg‘
++=(
ušt8_t
)
u
;

211 
ÜedCh¬s
|=
u
=*
sourû
++;

212 *
rg‘
++=(
ušt8_t
)
u
;

213 
ÜedCh¬s
|=
u
=*
sourû
++;

214 *
rg‘
++=(
ušt8_t
)
u
;

215 
ÜedCh¬s
|=
u
=*
sourû
++;

216 *
rg‘
++=(
ušt8_t
)
u
;

217 
ÜedCh¬s
|=
u
=*
sourû
++;

218 *
rg‘
++=(
ušt8_t
)
u
;

221 if(
ÜedCh¬s
>
max
) {

223 
sourû
-=16;

224 
rg‘
-=16;

227 } --
couÁ
>0);

228 
couÁ
=
loİs
-count;

229 
rg‘C­ac™y
-=16*
couÁ
;

231 if(
off£ts
!=
NULL
) {

232 
ŞdT¬g‘
+=16*
couÁ
;

233 
couÁ
>0) {

234 *
off£ts
++=
sourûIndex
++;

235 *
off£ts
++=
sourûIndex
++;

236 *
off£ts
++=
sourûIndex
++;

237 *
off£ts
++=
sourûIndex
++;

238 *
off£ts
++=
sourûIndex
++;

239 *
off£ts
++=
sourûIndex
++;

240 *
off£ts
++=
sourûIndex
++;

241 *
off£ts
++=
sourûIndex
++;

242 *
off£ts
++=
sourûIndex
++;

243 *
off£ts
++=
sourûIndex
++;

244 *
off£ts
++=
sourûIndex
++;

245 *
off£ts
++=
sourûIndex
++;

246 *
off£ts
++=
sourûIndex
++;

247 *
off£ts
++=
sourûIndex
++;

248 *
off£ts
++=
sourûIndex
++;

249 *
off£ts
++=
sourûIndex
++;

250 --
couÁ
;

257 
c
=0;

258 
rg‘C­ac™y
>0 && (
c
=*
sourû
++)<=
max
) {

260 *
rg‘
++=(
ušt8_t
)
c
;

261 --
rg‘C­ac™y
;

264 if(
c
>
max
) {

265 
ı
=
c
;

266 if(!
	`U_IS_SURROGATE
(
ı
)) {

268 } if(
	`U_IS_SURROGATE_LEAD
(
ı
)) {

269 
g‘T¿
:

270 if(
sourû
<
sourûLim™
) {

272 
UCh¬
 
Œa
=*
sourû
;

273 if(
	`U16_IS_TRAIL
(
Œa
)) {

274 ++
sourû
;

275 
ı
=
	`U16_GET_SUPPLEMENTARY
(ı, 
Œa
);

284 
úv
->
äomUCh¬32
=
ı
;

285 
noMÜeIÅut
;

292 *
pE¼ÜCode
ğ
	`U_IS_SURROGATE
(
ı
è? 
U_ILLEGAL_CHAR_FOUND
 : 
U_INVALID_CHAR_FOUND
;

293 
úv
->
äomUCh¬32
=
ı
;

295 
noMÜeIÅut
:

298 if(
off£ts
!=
NULL
) {

299 
size_t
 
couÁ
=
rg‘
-
ŞdT¬g‘
;

300 
couÁ
>0) {

301 *
off£ts
++=
sourûIndex
++;

302 --
couÁ
;

306 if(
	`U_SUCCESS
(*
pE¼ÜCode
è&& 
sourû
<
sourûLim™
 && 
rg‘
>=(
ušt8_t
 *)
pArgs
->
rg‘Lim™
) {

308 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

312 
pArgs
->
sourû
=source;

313 
pArgs
->
rg‘
=(*)target;

314 
pArgs
->
off£ts
=offsets;

315 
	}
}

319 
	$uúv_L©š1FromUTF8
(
UCÚv”‹rFromUnicodeArgs
 *
pFromUArgs
,

320 
UCÚv”‹rToUnicodeArgs
 *
pToUArgs
,

321 
UE¼ÜCode
 *
pE¼ÜCode
) {

322 
UCÚv”‹r
 *
utf8
;

323 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

324 
ušt8_t
 *
rg‘
;

325 
št32_t
 
rg‘C­ac™y
;

327 
UCh¬32
 
c
;

328 
ušt8_t
 
b
, 
t1
;

331 
utf8
=
pToUArgs
->
cÚv”‹r
;

332 
sourû
=(
ušt8_t
 *)
pToUArgs
->source;

333 
sourûLim™
=(
ušt8_t
 *)
pToUArgs
->sourceLimit;

334 
rg‘
=(
ušt8_t
 *)
pFromUArgs
->target;

335 
rg‘C­ac™y
=(
št32_t
)(
pFromUArgs
->
rg‘Lim™
-pFromUArgs->
rg‘
);

338 
c
=(
UCh¬32
)
utf8
->
toUnicodeStus
;

339 if(
c
!=0 && 
sourû
<
sourûLim™
) {

340 if(
rg‘C­ac™y
==0) {

341 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

343 } if(
c
>=0xc2 && c<=0xc3 && (
t1
=(
ušt8_t
)(*
sourû
-0x80)) <= 0x3f) {

344 ++
sourû
;

345 *
rg‘
++=(
ušt8_t
)(((
c
&3)<<6)|
t1
);

346 --
rg‘C­ac™y
;

348 
utf8
->
toUnicodeStus
=0;

349 
utf8
->
toUL’gth
=0;

352 *
pE¼ÜCode
=
U_USING_DEFAULT_WARNING
;

365 if(
sourû
<
sourûLim™
 && 
	`U8_IS_LEAD
(*(sourceLimit-1))) {

366 --
sourûLim™
;

370 
sourû
<
sourûLim™
) {

371 if(
rg‘C­ac™y
>0) {

372 
b
=*
sourû
++;

373 if((
št8_t
)
b
>=0) {

375 *
rg‘
++=(
ušt8_t
)
b
;

376 --
rg‘C­ac™y
;

378 
b
>=0xc2 && b<=0xc3 &&

379 (
t1
=(
ušt8_t
)(*
sourû
-0x80)) <= 0x3f

381 ++
sourû
;

382 *
rg‘
++=(
ušt8_t
)(((
b
&3)<<6)|
t1
);

383 --
rg‘C­ac™y
;

386 
pToUArgs
->
sourû
=(*)(source-1);

387 
pFromUArgs
->
rg‘
=(*)target;

388 *
pE¼ÜCode
=
U_USING_DEFAULT_WARNING
;

393 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

405 if(
	`U_SUCCESS
(*
pE¼ÜCode
è&& 
sourû
<(
sourûLim™
=(
ušt8_t
 *)
pToUArgs
->sourceLimit)) {

406 
utf8
->
toUnicodeStus
=utf8->
toUBy‹s
[0]=
b
=*
sourû
++;

407 
utf8
->
toUL’gth
=1;

408 
utf8
->
mode
=
utf8_couÁT¿By‹s
[
b
]+1;

412 
pToUArgs
->
sourû
=(*)source;

413 
pFromUArgs
->
rg‘
=(*)target;

414 
	}
}

417 
	$_L©š1G‘UnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

418 cÚ¡ 
US‘Add”
 *
§
,

419 
UCÚv”‹rUnicodeS‘
 
which
,

420 
UE¼ÜCode
 *
pE¼ÜCode
) {

421 
§
->
	`addRªge
(§->
£t
, 0, 0xff);

422 
	}
}

424 cÚ¡ 
UCÚv”‹rIm¶
 
	g_L©š1Im¶
={

425 
UCNV_LATIN_1
,

427 
NULL
,

428 
NULL
,

430 
NULL
,

431 
NULL
,

432 
NULL
,

434 
_L©š1ToUnicodeW™hOff£ts
,

435 
_L©š1ToUnicodeW™hOff£ts
,

436 
_L©š1FromUnicodeW™hOff£ts
,

437 
_L©š1FromUnicodeW™hOff£ts
,

438 
_L©š1G‘NextUCh¬
,

440 
NULL
,

441 
NULL
,

442 
NULL
,

443 
NULL
,

444 
_L©š1G‘UnicodeS‘
,

446 
NULL
,

447 
uúv_L©š1FromUTF8


450 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_L©š1SticD©a
={

451 (
UCÚv”‹rSticD©a
),

453 819, 
UCNV_IBM
, 
UCNV_LATIN_1
, 1, 1,

454 { 0x1a, 0, 0, 0 }, 1, 
FALSE
, FALSE,

460 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_L©š1D©a
={

461 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),

462 
NULL
, NULL, &
_L©š1SticD©a
, 
FALSE
, &
_L©š1Im¶
,

470 
	$_ASCIIToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

471 
UE¼ÜCode
 *
pE¼ÜCode
) {

472 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

473 
UCh¬
 *
rg‘
, *
ŞdT¬g‘
;

474 
št32_t
 
rg‘C­ac™y
, 
Ëngth
;

475 
št32_t
 *
off£ts
;

477 
št32_t
 
sourûIndex
;

479 
ušt8_t
 
c
;

482 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

483 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

484 
rg‘
=
ŞdT¬g‘
=
pArgs
->target;

485 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

486 
off£ts
=
pArgs
->offsets;

489 
sourûIndex
=0;

495 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
);

496 if(
Ëngth
<
rg‘C­ac™y
) {

497 
rg‘C­ac™y
=
Ëngth
;

500 if(
rg‘C­ac™y
>=8) {

502 
št32_t
 
couÁ
, 
loİs
;

503 
UCh¬
 
ÜedCh¬s
;

505 
loİs
=
couÁ
=
rg‘C­ac™y
>>3;

507 
ÜedCh¬s
=
rg‘
[0]=
sourû
[0];

508 
ÜedCh¬s
|=
rg‘
[1]=
sourû
[1];

509 
ÜedCh¬s
|=
rg‘
[2]=
sourû
[2];

510 
ÜedCh¬s
|=
rg‘
[3]=
sourû
[3];

511 
ÜedCh¬s
|=
rg‘
[4]=
sourû
[4];

512 
ÜedCh¬s
|=
rg‘
[5]=
sourû
[5];

513 
ÜedCh¬s
|=
rg‘
[6]=
sourû
[6];

514 
ÜedCh¬s
|=
rg‘
[7]=
sourû
[7];

517 if(
ÜedCh¬s
>0x7f) {

521 
sourû
+=8;

522 
rg‘
+=8;

523 } --
couÁ
>0);

524 
couÁ
=
loİs
-count;

525 
rg‘C­ac™y
-=
couÁ
*8;

527 if(
off£ts
!=
NULL
) {

528 
ŞdT¬g‘
+=
couÁ
*8;

529 
couÁ
>0) {

530 
off£ts
[0]=
sourûIndex
++;

531 
off£ts
[1]=
sourûIndex
++;

532 
off£ts
[2]=
sourûIndex
++;

533 
off£ts
[3]=
sourûIndex
++;

534 
off£ts
[4]=
sourûIndex
++;

535 
off£ts
[5]=
sourûIndex
++;

536 
off£ts
[6]=
sourûIndex
++;

537 
off£ts
[7]=
sourûIndex
++;

538 
off£ts
+=8;

539 --
couÁ
;

545 
c
=0;

546 
rg‘C­ac™y
>0 && (
c
=*
sourû
++)<=0x7f) {

547 *
rg‘
++=
c
;

548 --
rg‘C­ac™y
;

551 if(
c
>0x7f) {

553 
UCÚv”‹r
 *
úv
=
pArgs
->
cÚv”‹r
;

554 
úv
->
toUBy‹s
[0]=
c
;

555 
úv
->
toUL’gth
=1;

556 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

557 } if(
sourû
<
sourûLim™
 && 
rg‘
>=
pArgs
->
rg‘Lim™
) {

559 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

563 if(
off£ts
!=
NULL
) {

564 
size_t
 
couÁ
=
rg‘
-
ŞdT¬g‘
;

565 
couÁ
>0) {

566 *
off£ts
++=
sourûIndex
++;

567 --
couÁ
;

572 
pArgs
->
sourû
=(const *)source;

573 
pArgs
->
rg‘
=target;

574 
pArgs
->
off£ts
=offsets;

575 
	}
}

578 
UCh¬32


579 
	$_ASCIIG‘NextUCh¬
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

580 
UE¼ÜCode
 *
pE¼ÜCode
) {

581 cÚ¡ 
ušt8_t
 *
sourû
;

582 
ušt8_t
 
b
;

584 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

585 if(
sourû
<(cÚ¡ 
ušt8_t
 *)
pArgs
->
sourûLim™
) {

586 
b
=*
sourû
++;

587 
pArgs
->
sourû
=(const *)source;

588 if(
b
<=0x7f) {

589  
b
;

591 
UCÚv”‹r
 *
úv
=
pArgs
->
cÚv”‹r
;

592 
úv
->
toUBy‹s
[0]=
b
;

593 
úv
->
toUL’gth
=1;

594 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

600 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

602 
	}
}

606 
	$uúv_ASCIIFromUTF8
(
UCÚv”‹rFromUnicodeArgs
 *
pFromUArgs
,

607 
UCÚv”‹rToUnicodeArgs
 *
pToUArgs
,

608 
UE¼ÜCode
 *
pE¼ÜCode
) {

609 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

610 
ušt8_t
 *
rg‘
;

611 
št32_t
 
rg‘C­ac™y
, 
Ëngth
;

613 
ušt8_t
 
c
;

615 if(
pToUArgs
->
cÚv”‹r
->
toUnicodeStus
!=0) {

617 *
pE¼ÜCode
=
U_USING_DEFAULT_WARNING
;

622 
sourû
=(cÚ¡ 
ušt8_t
 *)
pToUArgs
->source;

623 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pToUArgs
->sourceLimit;

624 
rg‘
=(
ušt8_t
 *)
pFromUArgs
->target;

625 
rg‘C­ac™y
=(
št32_t
)(
pFromUArgs
->
rg‘Lim™
-pFromUArgs->
rg‘
);

631 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
);

632 if(
Ëngth
<
rg‘C­ac™y
) {

633 
rg‘C­ac™y
=
Ëngth
;

637 if(
rg‘C­ac™y
>=16) {

638 
št32_t
 
couÁ
, 
loİs
;

639 
ušt8_t
 
ÜedCh¬s
;

641 
loİs
=
couÁ
=
rg‘C­ac™y
>>4;

643 
ÜedCh¬s
=*
rg‘
++=*
sourû
++;

644 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

645 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

646 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

647 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

648 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

649 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

650 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

651 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

652 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

653 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

654 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

655 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

656 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

657 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

658 
ÜedCh¬s
|=*
rg‘
++=*
sourû
++;

661 if(
ÜedCh¬s
>0x7f) {

663 
sourû
-=16;

664 
rg‘
-=16;

667 } --
couÁ
>0);

668 
couÁ
=
loİs
-count;

669 
rg‘C­ac™y
-=16*
couÁ
;

673 
c
=0;

674 
rg‘C­ac™y
>0 && (
c
=*
sourû
)<=0x7f) {

675 ++
sourû
;

676 *
rg‘
++=
c
;

677 --
rg‘C­ac™y
;

680 if(
c
>0x7f) {

682 *
pE¼ÜCode
=
U_USING_DEFAULT_WARNING
;

683 } if(
sourû
<
sourûLim™
 && 
rg‘
>=(cÚ¡ 
ušt8_t
 *)
pFromUArgs
->
rg‘Lim™
) {

685 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

689 
pToUArgs
->
sourû
=(const *)source;

690 
pFromUArgs
->
rg‘
=(*)target;

691 
	}
}

694 
	$_ASCIIG‘UnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

695 cÚ¡ 
US‘Add”
 *
§
,

696 
UCÚv”‹rUnicodeS‘
 
which
,

697 
UE¼ÜCode
 *
pE¼ÜCode
) {

698 
§
->
	`addRªge
(§->
£t
, 0, 0x7f);

699 
	}
}

701 cÚ¡ 
UCÚv”‹rIm¶
 
	g_ASCIIIm¶
={

702 
UCNV_US_ASCII
,

704 
NULL
,

705 
NULL
,

707 
NULL
,

708 
NULL
,

709 
NULL
,

711 
_ASCIIToUnicodeW™hOff£ts
,

712 
_ASCIIToUnicodeW™hOff£ts
,

713 
_L©š1FromUnicodeW™hOff£ts
,

714 
_L©š1FromUnicodeW™hOff£ts
,

715 
_ASCIIG‘NextUCh¬
,

717 
NULL
,

718 
NULL
,

719 
NULL
,

720 
NULL
,

721 
_ASCIIG‘UnicodeS‘
,

723 
NULL
,

724 
uúv_ASCIIFromUTF8


727 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_ASCIISticD©a
={

728 (
UCÚv”‹rSticD©a
),

730 367, 
UCNV_IBM
, 
UCNV_US_ASCII
, 1, 1,

731 { 0x1a, 0, 0, 0 }, 1, 
FALSE
, FALSE,

737 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_ASCIID©a
={

738 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
) 0),

739 
NULL
, NULL, &
_ASCIISticD©a
, 
FALSE
, &
_ASCIIIm¶
,

	@ucnvmbcs.c

43 
	~"unicode/uty³s.h
"

45 #ià!
UCONFIG_NO_CONVERSION
 && !
UCONFIG_NO_LEGACY_CONVERSION


47 
	~"unicode/uúv.h
"

48 
	~"unicode/uúv_cb.h
"

49 
	~"unicode/ud©a.h
"

50 
	~"unicode/u£t.h
"

51 
	~"uúv_bld.h
"

52 
	~"uúvmbcs.h
"

53 
	~"uúv_ext.h
"

54 
	~"uúv_úv.h
"

55 
	~"umu‹x.h
"

56 
	~"cmemÜy.h
"

57 
	~"c¡ršg.h
"

60 
	#MBCS_UNROLL_SINGLE_TO_BMP
 1

	)

61 
	#MBCS_UNROLL_SINGLE_FROM_BMP
 0

	)

360 cÚ¡ 
UCÚv”‹rIm¶
 
	g_SBCSUTF8Im¶
;

361 cÚ¡ 
UCÚv”‹rIm¶
 
	g_DBCSUTF8Im¶
;

366 
	#LINEAR_18030
(
a
, 
b
, 
c
, 
d
è(((×)*10+(b))*126L+(c))*10L+(d))

	)

368 
	#LINEAR_18030_BASE
 
	`LINEAR_18030
(0x81, 0x30, 0x81, 0x30)

	)

370 
	#LINEAR
(
x
è
	`LINEAR_18030
(x>>24, (x>>16)&0xff, (x>>8)&0xff, x&0xff)

	)

381 cÚ¡ 
ušt32_t


382 
	ggb18030Rªges
[13][4]={

383 {0x10000, 0x10FFFF, 
LINEAR
(0x90308130), LINEAR(0xE3329A35)},

384 {0x9FA6, 0xD7FF, 
LINEAR
(0x82358F33), LINEAR(0x8336C738)},

385 {0x0452, 0x200F, 
LINEAR
(0x8130D330), LINEAR(0x8136A531)},

386 {0xE865, 0xF92B, 
LINEAR
(0x8336D030), LINEAR(0x84308534)},

387 {0x2643, 0x2E80, 
LINEAR
(0x8137A839), LINEAR(0x8138FD38)},

388 {0xFA2A, 0xFE2F, 
LINEAR
(0x84309C38), LINEAR(0x84318537)},

389 {0x3CE1, 0x4055, 
LINEAR
(0x8231D438), LINEAR(0x8232AF32)},

390 {0x361B, 0x3917, 
LINEAR
(0x8230A633), LINEAR(0x8230F237)},

391 {0x49B8, 0x4C76, 
LINEAR
(0x8234A131), LINEAR(0x8234E733)},

392 {0x4160, 0x4336, 
LINEAR
(0x8232C937), LINEAR(0x8232F837)},

393 {0x478E, 0x4946, 
LINEAR
(0x8233E838), LINEAR(0x82349638)},

394 {0x44D7, 0x464B, 
LINEAR
(0x8233A339), LINEAR(0x8233C931)},

395 {0xFFE6, 0xFFFF, 
LINEAR
(0x8431A234), LINEAR(0x8431A439)}

399 
	#_MBCS_OPTION_GB18030
 0x8000

	)

402 
	#_MBCS_OPTION_KEIS
 0x01000

	)

403 
	#_MBCS_OPTION_JEF
 0x02000

	)

404 
	#_MBCS_OPTION_JIPS
 0x04000

	)

406 
	#KEIS_SO_CHAR_1
 0x0A

	)

407 
	#KEIS_SO_CHAR_2
 0x42

	)

408 
	#KEIS_SI_CHAR_1
 0x0A

	)

409 
	#KEIS_SI_CHAR_2
 0x41

	)

411 
	#JEF_SO_CHAR
 0x28

	)

412 
	#JEF_SI_CHAR
 0x29

	)

414 
	#JIPS_SO_CHAR_1
 0x1A

	)

415 
	#JIPS_SO_CHAR_2
 0x70

	)

416 
	#JIPS_SI_CHAR_1
 0x1A

	)

417 
	#JIPS_SI_CHAR_2
 0x71

	)

419 
	eSISO_O±iÚ
 {

420 
	mSI
,

421 
	mSO


423 
SISO_O±iÚ
 
	tSISO_O±iÚ
;

425 
št32_t
 
	$g‘SISOBy‹s
(
SISO_O±iÚ
 
İtiÚ
, 
ušt32_t
 
úvO±iÚ
, 
ušt8_t
 *
v®ue
) {

426 
št32_t
 
SISOL’gth
 = 0;

428 
İtiÚ
) {

429 
SI
:

430 ià((
úvO±iÚ
&
_MBCS_OPTION_KEIS
)!=0) {

431 
v®ue
[0] = 
KEIS_SI_CHAR_1
;

432 
v®ue
[1] = 
KEIS_SI_CHAR_2
;

433 
SISOL’gth
 = 2;

434 } ià((
úvO±iÚ
&
_MBCS_OPTION_JEF
)!=0) {

435 
v®ue
[0] = 
JEF_SI_CHAR
;

436 
SISOL’gth
 = 1;

437 } ià((
úvO±iÚ
&
_MBCS_OPTION_JIPS
)!=0) {

438 
v®ue
[0] = 
JIPS_SI_CHAR_1
;

439 
v®ue
[1] = 
JIPS_SI_CHAR_2
;

440 
SISOL’gth
 = 2;

442 
v®ue
[0] = 
UCNV_SI
;

443 
SISOL’gth
 = 1;

446 
SO
:

447 ià((
úvO±iÚ
&
_MBCS_OPTION_KEIS
)!=0) {

448 
v®ue
[0] = 
KEIS_SO_CHAR_1
;

449 
v®ue
[1] = 
KEIS_SO_CHAR_2
;

450 
SISOL’gth
 = 2;

451 } ià((
úvO±iÚ
&
_MBCS_OPTION_JEF
)!=0) {

452 
v®ue
[0] = 
JEF_SO_CHAR
;

453 
SISOL’gth
 = 1;

454 } ià((
úvO±iÚ
&
_MBCS_OPTION_JIPS
)!=0) {

455 
v®ue
[0] = 
JIPS_SO_CHAR_1
;

456 
v®ue
[1] = 
JIPS_SO_CHAR_2
;

457 
SISOL’gth
 = 2;

459 
v®ue
[0] = 
UCNV_SO
;

460 
SISOL’gth
 = 1;

468  
SISOL’gth
;

469 
	}
}

486 
UBoŞ
 
	tU_CALLCONV


487 
	tUCÚv”‹rEnumToUC®lback
(cÚ¡ *
	tcÚ‹xt
, 
	tušt32_t
 
	tv®ue
, 
	tUCh¬32
 
	tcodePošts
[32]);

490 
UBoŞ


491 
	$’umToU
(
UCÚv”‹rMBCSTabË
 *
mbcsTabË
, 
št8_t
 
¡©ePrİs
[],

492 
št32_t
 
¡©e
, 
ušt32_t
 
off£t
,

493 
ušt32_t
 
v®ue
,

494 
UCÚv”‹rEnumToUC®lback
 *
ÿÎback
, cÚ¡ *
cÚ‹xt
,

495 
UE¼ÜCode
 *
pE¼ÜCode
) {

496 
UCh¬32
 
codePošts
[32];

497 cÚ¡ 
št32_t
 *
row
;

498 cÚ¡ 
ušt16_t
 *
unicodeCodeUn™s
;

499 
UCh¬32
 
ªyCodePošts
;

500 
št32_t
 
b
, 
lim™
;

502 
row
=
mbcsTabË
->
¡©eTabË
[
¡©e
];

503 
unicodeCodeUn™s
=
mbcsTabË
->unicodeCodeUnits;

505 
v®ue
<<=8;

506 
ªyCodePošts
=-1;

508 
b
=(
¡©ePrİs
[
¡©e
]&0x38)<<2;

509 if(
b
==0 && 
¡©ePrİs
[
¡©e
]>=0x40) {

511 
codePošts
[0]=
U_SENTINEL
;

512 
b
=1;

514 
lim™
=((
¡©ePrİs
[
¡©e
]&7)+1)<<5;

515 
b
<
lim™
) {

516 
št32_t
 
’Œy
=
row
[
b
];

517 if(
	`MBCS_ENTRY_IS_TRANSITION
(
’Œy
)) {

518 
št32_t
 
ÃxtS‹
=
	`MBCS_ENTRY_TRANSITION_STATE
(
’Œy
);

519 if(
¡©ePrİs
[
ÃxtS‹
]>=0) {

521 if(!
	`’umToU
(

522 
mbcsTabË
, 
¡©ePrİs
, 
ÃxtS‹
,

523 
off£t
+
	`MBCS_ENTRY_TRANSITION_OFFSET
(
’Œy
),

524 
v®ue
|(
ušt32_t
)
b
,

525 
ÿÎback
, 
cÚ‹xt
,

526 
pE¼ÜCode
)) {

527  
FALSE
;

530 
codePošts
[
b
&0x1f]=
U_SENTINEL
;

532 
UCh¬32
 
c
;

533 
št32_t
 
aùiÚ
;

539 
aùiÚ
=
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
);

540 if(
aùiÚ
==
MBCS_STATE_VALID_DIRECT_16
) {

542 
c
=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

543 } if(
aùiÚ
==
MBCS_STATE_VALID_16
) {

544 
št32_t
 
fš®Off£t
=
off£t
+
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

545 
c
=
unicodeCodeUn™s
[
fš®Off£t
];

546 if(
c
<0xfffe) {

549 
c
=
U_SENTINEL
;

551 } if(
aùiÚ
==
MBCS_STATE_VALID_16_PAIR
) {

552 
št32_t
 
fš®Off£t
=
off£t
+
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

553 
c
=
unicodeCodeUn™s
[
fš®Off£t
++];

554 if(
c
<0xd800) {

556 } if(
c
<=0xdbff) {

558 
c
=((c&0x3ff)<<10)+
unicodeCodeUn™s
[
fš®Off£t
]+(0x10000-0xdc00);

559 } if(
c
==0xe000) {

561 
c
=
unicodeCodeUn™s
[
fš®Off£t
];

563 
c
=
U_SENTINEL
;

565 } if(
aùiÚ
==
MBCS_STATE_VALID_DIRECT_20
) {

567 
c
=(
UCh¬32
)(
	`MBCS_ENTRY_FINAL_VALUE
(
’Œy
)+0x10000);

569 
c
=
U_SENTINEL
;

572 
codePošts
[
b
&0x1f]=
c
;

573 
ªyCodePošts
&=
c
;

575 if(((++
b
)&0x1f)==0) {

576 if(
ªyCodePošts
>=0) {

577 if(!
	`ÿÎback
(
cÚ‹xt
, 
v®ue
|(
ušt32_t
)(
b
-0x20), 
codePošts
)) {

578  
FALSE
;

580 
ªyCodePošts
=-1;

584  
TRUE
;

585 
	}
}

592 
št8_t


593 
g‘S‹Prİ
(cÚ¡ 
št32_t
 (*
¡©eTabË
)[256], 
št8_t
 
¡©ePrİs
[], 
¡©e
) {

594 cÚ¡ 
št32_t
 *
	grow
;

595 
št32_t
 
	gmš
, 
	gmax
, 
	g’Œy
, 
	gÃxtS‹
;

597 
	grow
=
¡©eTabË
[
¡©e
];

598 
	g¡©ePrİs
[
¡©e
]=0;

601 
	gmš
=0;; ++min) {

602 
	g’Œy
=
row
[
mš
];

603 
	gÃxtS‹
=
MBCS_ENTRY_STATE
(
’Œy
);

604 if(
	g¡©ePrİs
[
ÃxtS‹
]==-1) {

605 
g‘S‹Prİ
(
¡©eTabË
, 
¡©ePrİs
, 
ÃxtS‹
);

607 if(
MBCS_ENTRY_IS_TRANSITION
(
’Œy
)) {

608 if(
	g¡©ePrİs
[
ÃxtS‹
]>=0) {

611 } if(
MBCS_ENTRY_FINAL_ACTION
(
’Œy
)<
	gMBCS_STATE_UNASSIGNED
) {

614 if(
	gmš
==0xff) {

615 
¡©ePrİs
[
¡©e
]=-0x40;

616  
	g¡©ePrİs
[
¡©e
];

619 
	g¡©ePrİs
[
¡©e
]|=(
št8_t
)((
mš
>>5)<<3);

622 
	gmax
=0xff; 
	gmš
<max; --max) {

623 
	g’Œy
=
row
[
max
];

624 
	gÃxtS‹
=
MBCS_ENTRY_STATE
(
’Œy
);

625 if(
	g¡©ePrİs
[
ÃxtS‹
]==-1) {

626 
g‘S‹Prİ
(
¡©eTabË
, 
¡©ePrİs
, 
ÃxtS‹
);

628 if(
MBCS_ENTRY_IS_TRANSITION
(
’Œy
)) {

629 if(
	g¡©ePrİs
[
ÃxtS‹
]>=0) {

632 } if(
MBCS_ENTRY_FINAL_ACTION
(
’Œy
)<
	gMBCS_STATE_UNASSIGNED
) {

636 
	g¡©ePrİs
[
¡©e
]|=(
št8_t
)(
max
>>5);

639 
	gmš
<=
max
) {

640 
’Œy
=
row
[
mš
];

641 
	gÃxtS‹
=
MBCS_ENTRY_STATE
(
’Œy
);

642 if(
	g¡©ePrİs
[
ÃxtS‹
]==-1) {

643 
g‘S‹Prİ
(
¡©eTabË
, 
¡©ePrİs
, 
ÃxtS‹
);

645 if(
MBCS_ENTRY_IS_FINAL
(
’Œy
)) {

646 
	g¡©ePrİs
[
ÃxtS‹
]|=0x40;

647 if(
MBCS_ENTRY_FINAL_ACTION
(
’Œy
)<=
MBCS_STATE_FALLBACK_DIRECT_20
) {

648 
¡©ePrİs
[
¡©e
]|=0x40;

651 ++
	gmš
;

653  
	g¡©ePrİs
[
¡©e
];

665 
	$uúv_MBCSEnumToUnicode
(
UCÚv”‹rMBCSTabË
 *
mbcsTabË
,

666 
UCÚv”‹rEnumToUC®lback
 *
ÿÎback
, cÚ¡ *
cÚ‹xt
,

667 
UE¼ÜCode
 *
pE¼ÜCode
) {

686 
št8_t
 
¡©ePrİs
[
MBCS_MAX_STATE_COUNT
];

687 
št32_t
 
¡©e
;

689 
	`u´v_mem£t
(
¡©ePrİs
, -1, (stateProps));

692 
	`g‘S‹Prİ
(
mbcsTabË
->
¡©eTabË
, 
¡©ePrİs
, 0);

694 
¡©e
=0; s‹<
mbcsTabË
->
couÁS‹s
; ++state) {

698 if(
¡©ePrİs
[
¡©e
]>=0x40) {

700 
	`’umToU
(

701 
mbcsTabË
, 
¡©ePrİs
, 
¡©e
, 0, 0,

702 
ÿÎback
, 
cÚ‹xt
,

703 
pE¼ÜCode
);

706 
	}
}

708 
U_CFUNC
 

709 
	$uúv_MBCSG‘F‹»dUnicodeS‘FÜUnicode
(cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

710 cÚ¡ 
US‘Add”
 *
§
,

711 
UCÚv”‹rUnicodeS‘
 
which
,

712 
UCÚv”‹rS‘F‹r
 
f‹r
,

713 
UE¼ÜCode
 *
pE¼ÜCode
) {

714 cÚ¡ 
UCÚv”‹rMBCSTabË
 *
mbcsTabË
;

715 cÚ¡ 
ušt16_t
 *
bË
;

717 
ušt32_t
 
¡3
;

718 
ušt16_t
 
¡1
, 
maxSge1
, 
¡2
;

720 
UCh¬32
 
c
;

723 
mbcsTabË
=&
sh¬edD©a
->
mbcs
;

724 
bË
=
mbcsTabË
->
äomUnicodeTabË
;

725 if(
mbcsTabË
->
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
) {

726 
maxSge1
=0x440;

728 
maxSge1
=0x40;

731 
c
=0;

733 if(
mbcsTabË
->
ouutTy³
==
MBCS_OUTPUT_1
) {

734 cÚ¡ 
ušt16_t
 *
¡age2
, *
¡age3
, *
»suÉs
;

735 
ušt16_t
 
mšV®ue
;

737 
»suÉs
=(cÚ¡ 
ušt16_t
 *)
mbcsTabË
->
äomUnicodeBy‹s
;

744 if(
which
==
UCNV_ROUNDTRIP_SET
) {

746 
mšV®ue
=0xf00;

749 
mšV®ue
=0x800;

752 
¡1
=0; st1<
maxSge1
; ++st1) {

753 
¡2
=
bË
[
¡1
];

754 if(
¡2
>
maxSge1
) {

755 
¡age2
=
bË
+
¡2
;

756 
¡2
=0; st2<64; ++st2) {

757 if((
¡3
=
¡age2
[
¡2
])!=0) {

759 
¡age3
=
»suÉs
+
¡3
;

762 if(*
¡age3
++>=
mšV®ue
) {

763 
§
->
	`add
(§->
£t
, 
c
);

765 } (++
c
&0xf)!=0);

767 
c
+=16;

771 
c
+=1024;

775 cÚ¡ 
ušt32_t
 *
¡age2
;

776 cÚ¡ 
ušt8_t
 *
¡age3
, *
by‹s
;

777 
ušt32_t
 
¡3MuÉl›r
;

778 
ušt32_t
 
v®ue
;

779 
UBoŞ
 
u£F®lback
;

781 
by‹s
=
mbcsTabË
->
äomUnicodeBy‹s
;

783 
u£F®lback
=(
UBoŞ
)(
which
==
UCNV_ROUNDTRIP_AND_FALLBACK_SET
);

785 
mbcsTabË
->
ouutTy³
) {

786 
MBCS_OUTPUT_3
:

787 
MBCS_OUTPUT_4_EUC
:

788 
¡3MuÉl›r
=3;

790 
MBCS_OUTPUT_4
:

791 
¡3MuÉl›r
=4;

794 
¡3MuÉl›r
=2;

798 
¡1
=0; st1<
maxSge1
; ++st1) {

799 
¡2
=
bË
[
¡1
];

800 if(
¡2
>(
maxSge1
>>1)) {

801 
¡age2
=(cÚ¡ 
ušt32_t
 *)
bË
+
¡2
;

802 
¡2
=0; st2<64; ++st2) {

803 if((
¡3
=
¡age2
[
¡2
])!=0) {

805 
¡age3
=
by‹s
+
¡3MuÉl›r
*16*(
ušt32_t
)(
ušt16_t
)
¡3
;

808 
¡3
>>=16;

815 
f‹r
) {

816 
UCNV_SET_FILTER_NONE
:

818 if(
¡3
&1) {

819 
§
->
	`add
(§->
£t
, 
c
);

820 
¡age3
+=
¡3MuÉl›r
;

821 } if(
u£F®lback
) {

822 
ušt8_t
 
b
=0;

823 
¡3MuÉl›r
) {

825 
b
|=*
¡age3
++;

827 
b
|=*
¡age3
++;

829 
b
|=
¡age3
[0]|stage3[1];

830 
¡age3
+=2;

834 if(
b
!=0) {

835 
§
->
	`add
(§->
£t
, 
c
);

838 
¡3
>>=1;

839 } (++
c
&0xf)!=0);

841 
UCNV_SET_FILTER_DBCS_ONLY
:

844 if(((
¡3
&1)!=0 || 
u£F®lback
è&& *((cÚ¡ 
ušt16_t
 *)
¡age3
)>=0x100) {

845 
§
->
	`add
(§->
£t
, 
c
);

847 
¡3
>>=1;

848 
¡age3
+=2;

849 } (++
c
&0xf)!=0);

851 
UCNV_SET_FILTER_2022_CN
:

854 if(((
¡3
&1)!=0 || 
u£F®lback
è&& ((
v®ue
=*
¡age3
)==0x81 || value==0x82)) {

855 
§
->
	`add
(§->
£t
, 
c
);

857 
¡3
>>=1;

858 
¡age3
+=3;

859 } (++
c
&0xf)!=0);

861 
UCNV_SET_FILTER_SJIS
:

864 if(((
¡3
&1)!=0 || 
u£F®lback
è&& (
v®ue
=*((cÚ¡ 
ušt16_t
 *)
¡age3
))>=0x8140 && value<=0xeffc) {

865 
§
->
	`add
(§->
£t
, 
c
);

867 
¡3
>>=1;

868 
¡age3
+=2;

869 } (++
c
&0xf)!=0);

871 
UCNV_SET_FILTER_GR94DBCS
:

874 ifĞ((
¡3
&1)!=0 || 
u£F®lback
) &&

875 (
ušt16_t
)((
v®ue
=*((cÚ¡ ušt16_ˆ*)
¡age3
)) - 0xa1a1)<=(0xfefe - 0xa1a1) &&

876 (
ušt8_t
)(
v®ue
-0xa1)<=(0xfe - 0xa1)

878 
§
->
	`add
(§->
£t
, 
c
);

880 
¡3
>>=1;

881 
¡age3
+=2;

882 } (++
c
&0xf)!=0);

884 
UCNV_SET_FILTER_HZ
:

887 ifĞ((
¡3
&1)!=0 || 
u£F®lback
) &&

888 (
ušt16_t
)((
v®ue
=*((cÚ¡ ušt16_ˆ*)
¡age3
))-0xa1a1)<=(0xfdfe - 0xa1a1) &&

889 (
ušt8_t
)(
v®ue
-0xa1)<=(0xfe - 0xa1)

891 
§
->
	`add
(§->
£t
, 
c
);

893 
¡3
>>=1;

894 
¡age3
+=2;

895 } (++
c
&0xf)!=0);

898 *
pE¼ÜCode
=
U_INTERNAL_PROGRAM_ERROR
;

902 
c
+=16;

906 
c
+=1024;

911 
	`uúv_extG‘UnicodeS‘
(
sh¬edD©a
, 
§
, 
which
, 
f‹r
, 
pE¼ÜCode
);

912 
	}
}

914 
U_CFUNC
 

915 
	$uúv_MBCSG‘UnicodeS‘FÜUnicode
(cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

916 cÚ¡ 
US‘Add”
 *
§
,

917 
UCÚv”‹rUnicodeS‘
 
which
,

918 
UE¼ÜCode
 *
pE¼ÜCode
) {

919 
	`uúv_MBCSG‘F‹»dUnicodeS‘FÜUnicode
(

920 
sh¬edD©a
, 
§
, 
which
,

921 
sh¬edD©a
->
mbcs
.
ouutTy³
==
MBCS_OUTPUT_DBCS_ONLY
 ?

922 
UCNV_SET_FILTER_DBCS_ONLY
 :

923 
UCNV_SET_FILTER_NONE
,

924 
pE¼ÜCode
);

925 
	}
}

928 
	$uúv_MBCSG‘UnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

929 cÚ¡ 
US‘Add”
 *
§
,

930 
UCÚv”‹rUnicodeS‘
 
which
,

931 
UE¼ÜCode
 *
pE¼ÜCode
) {

932 if(
úv
->
İtiÚs
&
_MBCS_OPTION_GB18030
) {

933 
§
->
	`addRªge
(§->
£t
, 0, 0xd7ff);

934 
§
->
	`addRªge
(§->
£t
, 0xe000, 0x10ffff);

936 
	`uúv_MBCSG‘UnicodeS‘FÜUnicode
(
úv
->
sh¬edD©a
, 
§
, 
which
, 
pE¼ÜCode
);

938 
	}
}

957 
UCh¬32


958 
	$_extFromU
(
UCÚv”‹r
 *
úv
, cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

959 
UCh¬32
 
ı
,

960 cÚ¡ 
UCh¬
 **
sourû
, cÚ¡ UCh¬ *
sourûLim™
,

961 
ušt8_t
 **
rg‘
, cÚ¡ ušt8_ˆ*
rg‘Lim™
,

962 
št32_t
 **
off£ts
, iÁ32_ˆ
sourûIndex
,

963 
UBoŞ
 
æush
,

964 
UE¼ÜCode
 *
pE¼ÜCode
) {

965 cÚ¡ 
št32_t
 *
cx
;

967 
úv
->
u£SubCh¬1
=
FALSE
;

969 ifĞ(
cx
=
sh¬edD©a
->
mbcs
.
extIndexes
)!=
NULL
 &&

970 
	`uúv_extIn™ŸlM©chFromU
(

971 
úv
, 
cx
,

972 
ı
, 
sourû
, 
sourûLim™
,

973 (**)
rg‘
, (*)
rg‘Lim™
,

974 
off£ts
, 
sourûIndex
,

975 
æush
,

976 
pE¼ÜCode
)

982 if((
úv
->
İtiÚs
&
_MBCS_OPTION_GB18030
)!=0) {

983 cÚ¡ 
ušt32_t
 *
¿nge
;

984 
št32_t
 
i
;

986 
¿nge
=
gb18030Rªges
[0];

987 
i
=0; i<(
gb18030Rªges
)/(gb18030Rªges[0]); 
¿nge
+=4, ++i) {

988 if(
¿nge
[0]<=(
ušt32_t
)
ı
 && (uint32_t)cp<=range[1]) {

990 
ušt32_t
 
lš—r
;

991 
by‹s
[4];

994 
lš—r
=
¿nge
[2]-
LINEAR_18030_BASE
;

997 
lš—r
+=((
ušt32_t
)
ı
-
¿nge
[0]);

1000 
by‹s
[3]=()(0x30+
lš—r
%10);†inear/=10;

1001 
by‹s
[2]=()(0x81+
lš—r
%126);†inear/=126;

1002 
by‹s
[1]=()(0x30+
lš—r
%10);†inear/=10;

1003 
by‹s
[0]=()(0x81+
lš—r
);

1006 
	`uúv_äomUWr™eBy‹s
(
úv
,

1007 
by‹s
, 4, (**)
rg‘
, (*)
rg‘Lim™
,

1008 
off£ts
, 
sourûIndex
, 
pE¼ÜCode
);

1015 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

1016  
ı
;

1017 
	}
}

1024 
št8_t


1025 
	$_extToU
(
UCÚv”‹r
 *
úv
, cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

1026 
št8_t
 
Ëngth
,

1027 cÚ¡ 
ušt8_t
 **
sourû
, cÚ¡ ušt8_ˆ*
sourûLim™
,

1028 
UCh¬
 **
rg‘
, cÚ¡ UCh¬ *
rg‘Lim™
,

1029 
št32_t
 **
off£ts
, iÁ32_ˆ
sourûIndex
,

1030 
UBoŞ
 
æush
,

1031 
UE¼ÜCode
 *
pE¼ÜCode
) {

1032 cÚ¡ 
št32_t
 *
cx
;

1034 ifĞ(
cx
=
sh¬edD©a
->
mbcs
.
extIndexes
)!=
NULL
 &&

1035 
	`uúv_extIn™ŸlM©chToU
(

1036 
úv
, 
cx
,

1037 
Ëngth
, (cÚ¡ **)
sourû
, (cÚ¡ *)
sourûLim™
,

1038 
rg‘
, 
rg‘Lim™
,

1039 
off£ts
, 
sourûIndex
,

1040 
æush
,

1041 
pE¼ÜCode
)

1047 if(
Ëngth
==4 && (
úv
->
İtiÚs
&
_MBCS_OPTION_GB18030
)!=0) {

1048 cÚ¡ 
ušt32_t
 *
¿nge
;

1049 
ušt32_t
 
lš—r
;

1050 
št32_t
 
i
;

1052 
lš—r
=
	`LINEAR_18030
(
úv
->
toUBy‹s
[0], cnv->toUBytes[1], cnv->toUBytes[2], cnv->toUBytes[3]);

1053 
¿nge
=
gb18030Rªges
[0];

1054 
i
=0; i<(
gb18030Rªges
)/(gb18030Rªges[0]); 
¿nge
+=4, ++i) {

1055 if(
¿nge
[2]<=
lš—r
 &&†inear<=range[3]) {

1057 *
pE¼ÜCode
=
U_ZERO_ERROR
;

1060 
lš—r
=
¿nge
[0]+(linear-range[2]);

1063 
	`uúv_toUWr™eCodePošt
(
úv
, 
lš—r
, 
rg‘
, 
rg‘Lim™
, 
off£ts
, 
sourûIndex
, 
pE¼ÜCode
);

1071 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

1072  
Ëngth
;

1073 
	}
}

1099 
	#EBCDIC_LF
 0x25

	)

1100 
	#EBCDIC_NL
 0x15

	)

1103 
	#EBCDIC_RT_LF
 0xf25

	)

1104 
	#EBCDIC_RT_NL
 0xf15

	)

1107 
	#U_LF
 0x0a

	)

1108 
	#U_NL
 0x85

	)

1110 
UBoŞ


1111 
	$_EBCDICSw­LFNL
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1112 
UCÚv”‹rMBCSTabË
 *
mbcsTabË
;

1114 cÚ¡ 
ušt16_t
 *
bË
, *
»suÉs
;

1115 cÚ¡ 
ušt8_t
 *
by‹s
;

1117 
	`št32_t
 (*
ÃwS‹TabË
)[256];

1118 
ušt16_t
 *
ÃwResuÉs
;

1119 
ušt8_t
 *
p
;

1120 *
Çme
;

1122 
ušt32_t
 
¡age2EÁry
;

1123 
ušt32_t
 
size
, 
sizeofFromUBy‹s
;

1125 
mbcsTabË
=&
sh¬edD©a
->
mbcs
;

1127 
bË
=
mbcsTabË
->
äomUnicodeTabË
;

1128 
by‹s
=
mbcsTabË
->
äomUnicodeBy‹s
;

1129 
»suÉs
=(cÚ¡ 
ušt16_t
 *)
by‹s
;

1138 (
mbcsTabË
->
ouutTy³
==
MBCS_OUTPUT_1
 || mbcsTabË->ouutTy³==
MBCS_OUTPUT_2_SISO
) &&

1139 
mbcsTabË
->
¡©eTabË
[0][
EBCDIC_LF
]==
	`MBCS_ENTRY_FINAL
(0, 
MBCS_STATE_VALID_DIRECT_16
, 
U_LF
) &&

1140 
mbcsTabË
->
¡©eTabË
[0][
EBCDIC_NL
]==
	`MBCS_ENTRY_FINAL
(0, 
MBCS_STATE_VALID_DIRECT_16
, 
U_NL
)

1142  
FALSE
;

1145 if(
mbcsTabË
->
ouutTy³
==
MBCS_OUTPUT_1
) {

1147 
EBCDIC_RT_LF
==
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
»suÉs
, 
U_LF
) &&

1148 
EBCDIC_RT_NL
==
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
»suÉs
, 
U_NL
)

1150  
FALSE
;

1153 
¡age2EÁry
=
	`MBCS_STAGE_2_FROM_U
(
bË
, 
U_LF
);

1155 
	`MBCS_FROM_U_IS_ROUNDTRIP
(
¡age2EÁry
, 
U_LF
)!=0 &&

1156 
EBCDIC_LF
==
	`MBCS_VALUE_2_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
U_LF
)

1158  
FALSE
;

1161 
¡age2EÁry
=
	`MBCS_STAGE_2_FROM_U
(
bË
, 
U_NL
);

1163 
	`MBCS_FROM_U_IS_ROUNDTRIP
(
¡age2EÁry
, 
U_NL
)!=0 &&

1164 
EBCDIC_NL
==
	`MBCS_VALUE_2_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
U_NL
)

1166  
FALSE
;

1170 if(
mbcsTabË
->
äomUBy‹sL’gth
>0) {

1175 
sizeofFromUBy‹s
=
mbcsTabË
->
äomUBy‹sL’gth
;

1189 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

1190  
FALSE
;

1200 
size
=

1201 
mbcsTabË
->
couÁS‹s
*1024+

1202 
sizeofFromUBy‹s
+

1203 
UCNV_MAX_CONVERTER_NAME_LENGTH
+20;

1204 
p
=(
ušt8_t
 *)
	`u´v_m®loc
(
size
);

1205 if(
p
==
NULL
) {

1206 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1207  
FALSE
;

1211 
ÃwS‹TabË
=(
	`št32_t
 (*)[256])
p
;

1212 
	`u´v_memıy
(
ÃwS‹TabË
, 
mbcsTabË
->
¡©eTabË
, mbcsTabË->
couÁS‹s
*1024);

1214 
ÃwS‹TabË
[0][
EBCDIC_LF
]=
	`MBCS_ENTRY_FINAL
(0, 
MBCS_STATE_VALID_DIRECT_16
, 
U_NL
);

1215 
ÃwS‹TabË
[0][
EBCDIC_NL
]=
	`MBCS_ENTRY_FINAL
(0, 
MBCS_STATE_VALID_DIRECT_16
, 
U_LF
);

1218 
ÃwResuÉs
=(
ušt16_t
 *)
ÃwS‹TabË
[
mbcsTabË
->
couÁS‹s
];

1219 
	`u´v_memıy
(
ÃwResuÉs
, 
by‹s
, 
sizeofFromUBy‹s
);

1222 if(
mbcsTabË
->
ouutTy³
==
MBCS_OUTPUT_1
) {

1223 
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
ÃwResuÉs
, 
U_LF
)=
EBCDIC_RT_NL
;

1224 
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
ÃwResuÉs
, 
U_NL
)=
EBCDIC_RT_LF
;

1226 
¡age2EÁry
=
	`MBCS_STAGE_2_FROM_U
(
bË
, 
U_LF
);

1227 
	`MBCS_VALUE_2_FROM_STAGE_2
(
ÃwResuÉs
, 
¡age2EÁry
, 
U_LF
)=
EBCDIC_NL
;

1229 
¡age2EÁry
=
	`MBCS_STAGE_2_FROM_U
(
bË
, 
U_NL
);

1230 
	`MBCS_VALUE_2_FROM_STAGE_2
(
ÃwResuÉs
, 
¡age2EÁry
, 
U_NL
)=
EBCDIC_LF
;

1234 
Çme
=(*)
ÃwResuÉs
+
sizeofFromUBy‹s
;

1235 
	`u´v_¡rıy
(
Çme
, 
sh¬edD©a
->
¡©icD©a
->name);

1236 
	`u´v_¡rÿt
(
Çme
, 
UCNV_SWAP_LFNL_OPTION_STRING
);

1239 
	`umtx_lock
(
NULL
);

1240 if(
mbcsTabË
->
sw­LFNLS‹TabË
==
NULL
) {

1241 
mbcsTabË
->
sw­LFNLS‹TabË
=
ÃwS‹TabË
;

1242 
mbcsTabË
->
sw­LFNLFromUnicodeBy‹s
=(
ušt8_t
 *)
ÃwResuÉs
;

1243 
mbcsTabË
->
sw­LFNLName
=
Çme
;

1245 
ÃwS‹TabË
=
NULL
;

1247 
	`umtx_uÆock
(
NULL
);

1250 if(
ÃwS‹TabË
!=
NULL
) {

1251 
	`u´v_ä“
(
ÃwS‹TabË
);

1253  
TRUE
;

1254 
	}
}

1259 
UBoŞ
 
U_CALLCONV


1260 
	$wr™eSge3RoundŒ
(cÚ¡ *
cÚ‹xt
, 
ušt32_t
 
v®ue
, 
UCh¬32
 
codePošts
[32]) {

1261 
UCÚv”‹rMBCSTabË
 *
mbcsTabË
=(UCÚv”‹rMBCSTabË *)
cÚ‹xt
;

1262 cÚ¡ 
ušt16_t
 *
bË
;

1263 
ušt32_t
 *
¡age2
;

1264 
ušt8_t
 *
by‹s
, *
p
;

1265 
UCh¬32
 
c
;

1266 
št32_t
 
i
, 
¡3
;

1268 
bË
=
mbcsTabË
->
äomUnicodeTabË
;

1269 
by‹s
=(
ušt8_t
 *)
mbcsTabË
->
äomUnicodeBy‹s
;

1272 
mbcsTabË
->
ouutTy³
) {

1273 
MBCS_OUTPUT_3_EUC
:

1274 if(
v®ue
<=0xffff) {

1277 } if(
v®ue
<=0x8effff) {

1279 
v®ue
&=0x7fff;

1282 
v®ue
&=0xff7f;

1285 
MBCS_OUTPUT_4_EUC
:

1286 if(
v®ue
<=0xffffff) {

1289 } if(
v®ue
<=0x8effffff) {

1291 
v®ue
&=0x7fffff;

1294 
v®ue
&=0xff7fff;

1301 
i
=0; i<=0x1f; ++
v®ue
, ++i) {

1302 
c
=
codePošts
[
i
];

1303 if(
c
<0) {

1308 
¡age2
=((
ušt32_t
 *)
bË
)+bË[
c
>>10]+((c>>4)&0x3f);

1309 
p
=
by‹s
;

1310 
¡3
=(
št32_t
)(
ušt16_t
)*
¡age2
*16+(
c
&0xf);

1313 
mbcsTabË
->
ouutTy³
) {

1314 
MBCS_OUTPUT_3
:

1315 
MBCS_OUTPUT_4_EUC
:

1316 
p
+=
¡3
*3;

1317 
p
[0]=(
ušt8_t
)(
v®ue
>>16);

1318 
p
[1]=(
ušt8_t
)(
v®ue
>>8);

1319 
p
[2]=(
ušt8_t
)
v®ue
;

1321 
MBCS_OUTPUT_4
:

1322 ((
ušt32_t
 *)
p
)[
¡3
]=
v®ue
;

1326 ((
ušt16_t
 *)
p
)[
¡3
]=(ušt16_t)
v®ue
;

1331 *
¡age2
|=(1UL<<(16+(
c
&0xf)));

1333  
TRUE
;

1334 
	}
}

1337 
	$»cÚ¡™u‹D©a
(
UCÚv”‹rMBCSTabË
 *
mbcsTabË
,

1338 
ušt32_t
 
¡age1L’gth
, ušt32_ˆ
¡age2L’gth
,

1339 
ušt32_t
 
fuÎSge2L’gth
,

1340 
UE¼ÜCode
 *
pE¼ÜCode
) {

1341 
ušt16_t
 *
¡age1
;

1342 
ušt32_t
 *
¡age2
;

1343 
ušt8_t
 *
by‹s
;

1344 
ušt32_t
 
d©aL’gth
=
¡age1L’gth
*2+
fuÎSge2L’gth
*4+
mbcsTabË
->
äomUBy‹sL’gth
;

1345 
mbcsTabË
->
»cÚ¡™u‹dD©a
=(
ušt8_t
 *)
	`u´v_m®loc
(
d©aL’gth
);

1346 if(
mbcsTabË
->
»cÚ¡™u‹dD©a
==
NULL
) {

1347 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1350 
	`u´v_mem£t
(
mbcsTabË
->
»cÚ¡™u‹dD©a
, 0, 
d©aL’gth
);

1353 
¡age1
=(
ušt16_t
 *)
mbcsTabË
->
»cÚ¡™u‹dD©a
;

1354 
	`u´v_memıy
(
¡age1
, 
mbcsTabË
->
äomUnicodeTabË
, 
¡age1L’gth
*2);

1356 
¡age2
=(
ušt32_t
 *)(
¡age1
+
¡age1L’gth
);

1357 
	`u´v_memıy
(
¡age2
+(
fuÎSge2L’gth
-
¡age2L’gth
),

1358 
mbcsTabË
->
äomUnicodeTabË
+
¡age1L’gth
,

1359 
¡age2L’gth
*4);

1361 
mbcsTabË
->
äomUnicodeTabË
=
¡age1
;

1362 
mbcsTabË
->
äomUnicodeBy‹s
=
by‹s
=(
ušt8_t
 *)(
¡age2
+
fuÎSge2L’gth
);

1365 
¡age2
=(
ušt32_t
 *)
¡age1
;

1369 
št32_t
 
¡ageUTF8L’gth
=((št32_t)
mbcsTabË
->
maxFa¡UCh¬
+1)>>6;

1370 
št32_t
 
¡ageUTF8Index
=0;

1371 
št32_t
 
¡1
, 
¡2
, 
¡3
, 
i
;

1373 
¡1
=0; 
¡ageUTF8Index
<
¡ageUTF8L’gth
; ++st1) {

1374 
¡2
=
¡age1
[
¡1
];

1375 if(
¡2
!=
¡age1L’gth
/2) {

1377 
i
=0; i<16; ++i) {

1378 
¡3
=
mbcsTabË
->
mbcsIndex
[
¡ageUTF8Index
++];

1379 if(
¡3
!=0) {

1381 
¡3
>>=4;

1386 
¡age2
[
¡2
++]=
¡3
++;

1387 
¡age2
[
¡2
++]=
¡3
++;

1388 
¡age2
[
¡2
++]=
¡3
++;

1389 
¡age2
[
¡2
++]=
¡3
;

1392 
¡2
+=4;

1397 
¡ageUTF8Index
+=16;

1403 
	`uúv_MBCSEnumToUnicode
(
mbcsTabË
, 
wr™eSge3RoundŒ
, mbcsTabË, 
pE¼ÜCode
);

1404 
	}
}

1409 
	$uúv_MBCSLßd
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

1410 
UCÚv”‹rLßdArgs
 *
pArgs
,

1411 cÚ¡ 
ušt8_t
 *
¿w
,

1412 
UE¼ÜCode
 *
pE¼ÜCode
) {

1413 
UD©aInfo
 
šfo
;

1414 
UCÚv”‹rMBCSTabË
 *
mbcsTabË
=&
sh¬edD©a
->
mbcs
;

1415 
_MBCSH—d”
 *
h—d”
=(_MBCSH—d” *)
¿w
;

1416 
ušt32_t
 
off£t
;

1417 
ušt32_t
 
h—d”L’gth
;

1418 
UBoŞ
 
noFromU
=
FALSE
;

1420 if(
h—d”
->
v”siÚ
[0]==4) {

1421 
h—d”L’gth
=
MBCS_HEADER_V4_LENGTH
;

1422 } if(
h—d”
->
v”siÚ
[0]==5 && header->version[1]>=3 &&

1423 (
h—d”
->
İtiÚs
&
MBCS_OPT_UNKNOWN_INCOMPATIBLE_MASK
)==0) {

1424 
h—d”L’gth
=
h—d”
->
İtiÚs
&
MBCS_OPT_LENGTH_MASK
;

1425 
noFromU
=(
UBoŞ
)((
h—d”
->
İtiÚs
&
MBCS_OPT_NO_FROM_U
)!=0);

1427 *
pE¼ÜCode
=
U_INVALID_TABLE_FORMAT
;

1431 
mbcsTabË
->
ouutTy³
=(
ušt8_t
)
h—d”
->
æags
;

1432 if(
noFromU
 && 
mbcsTabË
->
ouutTy³
==
MBCS_OUTPUT_1
) {

1433 *
pE¼ÜCode
=
U_INVALID_TABLE_FORMAT
;

1438 
off£t
=
h—d”
->
æags
>>8;

1439 if(
off£t
!=0) {

1440 
mbcsTabË
->
extIndexes
=(cÚ¡ 
št32_t
 *)(
¿w
+
off£t
);

1443 if(
mbcsTabË
->
ouutTy³
==
MBCS_OUTPUT_EXT_ONLY
) {

1444 
UCÚv”‹rLßdArgs
 
¬gs
={ 0 };

1445 
UCÚv”‹rSh¬edD©a
 *
ba£Sh¬edD©a
;

1446 cÚ¡ 
št32_t
 *
extIndexes
;

1447 cÚ¡ *
ba£Name
;

1450 if((
extIndexes
=
mbcsTabË
->extIndexes)==
NULL
) {

1452 *
pE¼ÜCode
=
U_INVALID_TABLE_FORMAT
;

1456 if(
pArgs
->
Ã¡edLßds
!=1) {

1458 *
pE¼ÜCode
=
U_INVALID_TABLE_FILE
;

1463 
ba£Name
=(cÚ¡ *)
h—d”
+
h—d”L’gth
*4;

1464 if(0==
	`u´v_¡rcmp
(
ba£Name
, 
sh¬edD©a
->
¡©icD©a
->
Çme
)) {

1466 *
pE¼ÜCode
=
U_INVALID_TABLE_FORMAT
;

1471 
¬gs
.
size
=(
UCÚv”‹rLßdArgs
);

1472 
¬gs
.
Ã¡edLßds
=2;

1473 
¬gs
.
ÚlyTe¡IsLßdabË
=
pArgs
->onlyTestIsLoadable;

1474 
¬gs
.
»£rved
=
pArgs
->reserved;

1475 
¬gs
.
İtiÚs
=
pArgs
->options;

1476 
¬gs
.
pkg
=
pArgs
->pkg;

1477 
¬gs
.
Çme
=
ba£Name
;

1478 
ba£Sh¬edD©a
=
	`uúv_lßd
(&
¬gs
, 
pE¼ÜCode
);

1479 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1482 ifĞ
ba£Sh¬edD©a
->
¡©icD©a
->
cÚv”siÚTy³
!=
UCNV_MBCS
 ||

1483 
ba£Sh¬edD©a
->
mbcs
.ba£Sh¬edD©a!=
NULL


1485 
	`uúv_uÆßd
(
ba£Sh¬edD©a
);

1486 *
pE¼ÜCode
=
U_INVALID_TABLE_FORMAT
;

1489 if(
pArgs
->
ÚlyTe¡IsLßdabË
) {

1496 
	`uúv_uÆßd
(
ba£Sh¬edD©a
);

1501 
	`u´v_memıy
(
mbcsTabË
, &
ba£Sh¬edD©a
->
mbcs
, (
UCÚv”‹rMBCSTabË
));

1504 
mbcsTabË
->
ba£Sh¬edD©a
=baseSharedData;

1505 
mbcsTabË
->
extIndexes
=extIndexes;

1514 
mbcsTabË
->
sw­LFNLS‹TabË
=
NULL
;

1515 
mbcsTabË
->
sw­LFNLFromUnicodeBy‹s
=
NULL
;

1516 
mbcsTabË
->
sw­LFNLName
=
NULL
;

1522 
mbcsTabË
->
»cÚ¡™u‹dD©a
=
NULL
;

1528 ifĞ
sh¬edD©a
->
¡©icD©a
->
cÚv”siÚTy³
==
UCNV_DBCS
 ||

1529 (
sh¬edD©a
->
¡©icD©a
->
cÚv”siÚTy³
==
UCNV_MBCS
 &&

1530 
sh¬edD©a
->
¡©icD©a
->
mšBy‹sP”Ch¬
>=2)

1532 if(
ba£Sh¬edD©a
->
mbcs
.
ouutTy³
==
MBCS_OUTPUT_2_SISO
) {

1534 
št32_t
 
’Œy
;

1537 
’Œy
=
mbcsTabË
->
¡©eTabË
[0][0xe];

1538 ifĞ
	`MBCS_ENTRY_IS_FINAL
(
’Œy
) &&

1539 
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
)==
MBCS_STATE_CHANGE_ONLY
 &&

1540 
	`MBCS_ENTRY_FINAL_STATE
(
’Œy
)!=0

1542 
mbcsTabË
->
dbcsOÆyS‹
=(
ušt8_t
)
	`MBCS_ENTRY_FINAL_STATE
(
’Œy
);

1544 
mbcsTabË
->
ouutTy³
=
MBCS_OUTPUT_DBCS_ONLY
;

1547 
ba£Sh¬edD©a
->
¡©icD©a
->
cÚv”siÚTy³
==
UCNV_MBCS
 &&

1548 
ba£Sh¬edD©a
->
¡©icD©a
->
mšBy‹sP”Ch¬
==1 &&

1549 
ba£Sh¬edD©a
->
¡©icD©a
->
maxBy‹sP”Ch¬
==2 &&

1550 
mbcsTabË
->
couÁS‹s
<=127

1553 
	`št32_t
 (*
ÃwS‹TabË
)[256];

1554 
št32_t
 *
¡©e
;

1555 
št32_t
 
i
, 
couÁ
;

1558 
couÁ
=
mbcsTabË
->
couÁS‹s
;

1559 
ÃwS‹TabË
=(
	`št32_t
 (*)[256])
	`u´v_m®loc
((
couÁ
+1)*1024);

1560 if(
ÃwS‹TabË
==
NULL
) {

1561 
	`uúv_uÆßd
(
ba£Sh¬edD©a
);

1562 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1566 
	`u´v_memıy
(
ÃwS‹TabË
, 
mbcsTabË
->
¡©eTabË
, 
couÁ
*1024);

1569 
¡©e
=
ÃwS‹TabË
[0];

1570 
i
=0; i<256; ++i) {

1571 if(
	`MBCS_ENTRY_IS_FINAL
(
¡©e
[
i
])) {

1572 
¡©e
[
i
]=
	`MBCS_ENTRY_TRANSITION
(
couÁ
, 0);

1577 
¡©e
=
ÃwS‹TabË
[
couÁ
];

1578 
i
=0; i<256; ++i) {

1579 
¡©e
[
i
]=
	`MBCS_ENTRY_FINAL
(0, 
MBCS_STATE_ILLEGAL
, 0);

1581 
mbcsTabË
->
¡©eTabË
=(cÚ¡ 
	`št32_t
 (*)[256])
ÃwS‹TabË
;

1582 
mbcsTabË
->
couÁS‹s
=(
ušt8_t
)(
couÁ
+1);

1583 
mbcsTabË
->
¡©eTabËOwÃd
=
TRUE
;

1585 
mbcsTabË
->
ouutTy³
=
MBCS_OUTPUT_DBCS_ONLY
;

1599 
mbcsTabË
->
ouutTy³
) {

1600 
MBCS_OUTPUT_1
:

1601 
MBCS_OUTPUT_2
:

1602 
MBCS_OUTPUT_3
:

1603 
MBCS_OUTPUT_4
:

1604 
MBCS_OUTPUT_3_EUC
:

1605 
MBCS_OUTPUT_4_EUC
:

1606 
MBCS_OUTPUT_2_SISO
:

1610 *
pE¼ÜCode
=
U_INVALID_TABLE_FORMAT
;

1613 if(
pArgs
->
ÚlyTe¡IsLßdabË
) {

1623 
mbcsTabË
->
couÁS‹s
=(
ušt8_t
)
h—d”
->countStates;

1624 
mbcsTabË
->
couÁToUF®lbacks
=
h—d”
->countToUFallbacks;

1625 
mbcsTabË
->
¡©eTabË
=(cÚ¡ 
	`št32_t
 (*)[256])(
¿w
+
h—d”L’gth
*4);

1626 
mbcsTabË
->
toUF®lbacks
=(cÚ¡ 
_MBCSToUF®lback
 *)(mbcsTabË->
¡©eTabË
+
h—d”
->
couÁS‹s
);

1627 
mbcsTabË
->
unicodeCodeUn™s
=(cÚ¡ 
ušt16_t
 *)(
¿w
+
h—d”
->
off£tToUCodeUn™s
);

1629 
mbcsTabË
->
äomUnicodeTabË
=(cÚ¡ 
ušt16_t
 *)(
¿w
+
h—d”
->
off£tFromUTabË
);

1630 
mbcsTabË
->
äomUnicodeBy‹s
=(cÚ¡ 
ušt8_t
 *)(
¿w
+
h—d”
->
off£tFromUBy‹s
);

1631 
mbcsTabË
->
äomUBy‹sL’gth
=
h—d”
->fromUBytesLength;

1637 
šfo
.
size
=(
UD©aInfo
);

1638 
	`ud©a_g‘Info
((
UD©aMemÜy
 *)
sh¬edD©a
->
d©aMemÜy
, &
šfo
);

1639 if(
šfo
.
fÜm©V”siÚ
[0]>6 || (info.formatVersion[0]==6 && info.formatVersion[1]>=1)) {

1641 
mbcsTabË
->
unicodeMask
=(
ušt8_t
)(
sh¬edD©a
->
¡©icD©a
->unicodeMask&3);

1644 
mbcsTabË
->
unicodeMask
=
UCNV_HAS_SUPPLEMENTARY
|
UCNV_HAS_SURROGATES
;

1655 ifĞ
h—d”
->
v”siÚ
[1]>=3 &&

1656 (
mbcsTabË
->
unicodeMask
&
UCNV_HAS_SURROGATES
)==0 &&

1657 (
mbcsTabË
->
couÁS‹s
==1 ?

1658 (
h—d”
->
v”siÚ
[2]>=(
SBCS_FAST_MAX
>>8)) :

1659 (
h—d”
->
v”siÚ
[2]>=(
MBCS_FAST_MAX
>>8))

1662 
mbcsTabË
->
utf8Fr›ndly
=
TRUE
;

1664 if(
mbcsTabË
->
couÁS‹s
==1) {

1670 
št32_t
 
i
;

1671 
i
=0; i<(
SBCS_FAST_LIMIT
>>6); ++i) {

1672 
mbcsTabË
->
sbcsIndex
[
i
]=mbcsTabË->
äomUnicodeTabË
[mbcsTable->fromUnicodeTable[i>>4]+((i<<2)&0x3c)];

1675 
mbcsTabË
->
maxFa¡UCh¬
=
SBCS_FAST_MAX
;

1682 
mbcsTabË
->
mbcsIndex
=(cÚ¡ 
ušt16_t
 *)

1683 (
mbcsTabË
->
äomUnicodeBy‹s
+

1684 (
noFromU
 ? 0 : 
mbcsTabË
->
äomUBy‹sL’gth
));

1685 
mbcsTabË
->
maxFa¡UCh¬
=(((
UCh¬
)
h—d”
->
v”siÚ
[2])<<8)|0xff;

1691 
ušt32_t
 
asciiRoundŒs
=0xffffffff;

1692 
št32_t
 
i
;

1694 
i
=0; i<0x80; ++i) {

1695 if(
mbcsTabË
->
¡©eTabË
[0][
i
]!=
	`MBCS_ENTRY_FINAL
(0, 
MBCS_STATE_VALID_DIRECT_16
, i)) {

1696 
asciiRoundŒs
&=~((
ušt32_t
)1<<(
i
>>2));

1699 
mbcsTabË
->
asciiRoundŒs
=asciiRoundtrips;

1702 if(
noFromU
) {

1703 
ušt32_t
 
¡age1L’gth
=

1704 
mbcsTabË
->
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
 ?

1706 
ušt32_t
 
¡age2L’gth
=

1707 (
h—d”
->
off£tFromUBy‹s
-h—d”->
off£tFromUTabË
)/4-

1708 
¡age1L’gth
/2;

1709 
	`»cÚ¡™u‹D©a
(
mbcsTabË
, 
¡age1L’gth
, 
¡age2L’gth
, 
h—d”
->
fuÎSge2L’gth
, 
pE¼ÜCode
);

1714 if(
mbcsTabË
->
utf8Fr›ndly
) {

1715 if(
mbcsTabË
->
couÁS‹s
==1) {

1716 
sh¬edD©a
->
im¶
=&
_SBCSUTF8Im¶
;

1718 if(
mbcsTabË
->
ouutTy³
==
MBCS_OUTPUT_2
) {

1719 
sh¬edD©a
->
im¶
=&
_DBCSUTF8Im¶
;

1724 if(
mbcsTabË
->
ouutTy³
==
MBCS_OUTPUT_DBCS_ONLY
 || mbcsTabË->ouutTy³==
MBCS_OUTPUT_2_SISO
) {

1729 
mbcsTabË
->
asciiRoundŒs
=0;

1731 
	}
}

1734 
	$uúv_MBCSUÆßd
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
) {

1735 
UCÚv”‹rMBCSTabË
 *
mbcsTabË
=&
sh¬edD©a
->
mbcs
;

1737 if(
mbcsTabË
->
sw­LFNLS‹TabË
!=
NULL
) {

1738 
	`u´v_ä“
(
mbcsTabË
->
sw­LFNLS‹TabË
);

1740 if(
mbcsTabË
->
¡©eTabËOwÃd
) {

1741 
	`u´v_ä“
((*)
mbcsTabË
->
¡©eTabË
);

1743 if(
mbcsTabË
->
ba£Sh¬edD©a
!=
NULL
) {

1744 
	`uúv_uÆßd
(
mbcsTabË
->
ba£Sh¬edD©a
);

1746 if(
mbcsTabË
->
»cÚ¡™u‹dD©a
!=
NULL
) {

1747 
	`u´v_ä“
(
mbcsTabË
->
»cÚ¡™u‹dD©a
);

1749 
	}
}

1752 
	$uúv_MBCSO³n
(
UCÚv”‹r
 *
úv
,

1753 
UCÚv”‹rLßdArgs
 *
pArgs
,

1754 
UE¼ÜCode
 *
pE¼ÜCode
) {

1755 
UCÚv”‹rMBCSTabË
 *
mbcsTabË
;

1756 cÚ¡ 
št32_t
 *
extIndexes
;

1757 
ušt8_t
 
ouutTy³
;

1758 
št8_t
 
maxBy‹sP”UCh¬
;

1760 if(
pArgs
->
ÚlyTe¡IsLßdabË
) {

1764 
mbcsTabË
=&
úv
->
sh¬edD©a
->
mbcs
;

1765 
ouutTy³
=
mbcsTabË
->outputType;

1767 if(
ouutTy³
==
MBCS_OUTPUT_DBCS_ONLY
) {

1769 
úv
->
İtiÚs
=
pArgs
->İtiÚs&=~
UCNV_OPTION_SWAP_LFNL
;

1772 if((
pArgs
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

1774 
UBoŞ
 
isCached
;

1776 
	`umtx_lock
(
NULL
);

1777 
isCached
=
mbcsTabË
->
sw­LFNLS‹TabË
!=
NULL
;

1778 
	`umtx_uÆock
(
NULL
);

1780 if(!
isCached
) {

1781 if(!
	`_EBCDICSw­LFNL
(
úv
->
sh¬edD©a
, 
pE¼ÜCode
)) {

1782 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1787 
úv
->
İtiÚs
=
pArgs
->İtiÚs&=~
UCNV_OPTION_SWAP_LFNL
;

1792 if(
	`u´v_¡r¡r
(
pArgs
->
Çme
, "18030")!=
NULL
) {

1793 if(
	`u´v_¡r¡r
(
pArgs
->
Çme
, "gb18030")!=
NULL
 || uprv_strstr(pArgs->name, "GB18030")!=NULL) {

1795 
úv
->
İtiÚs
|=
_MBCS_OPTION_GB18030
;

1797 } if((
	`u´v_¡r¡r
(
pArgs
->
Çme
, "KEIS")!=
NULL
) || (uprv_strstr(pArgs->name, "keis")!=NULL)) {

1799 
úv
->
İtiÚs
|=
_MBCS_OPTION_KEIS
;

1800 } if((
	`u´v_¡r¡r
(
pArgs
->
Çme
, "JEF")!=
NULL
) || (uprv_strstr(pArgs->name, "jef")!=NULL)) {

1802 
úv
->
İtiÚs
|=
_MBCS_OPTION_JEF
;

1803 } if((
	`u´v_¡r¡r
(
pArgs
->
Çme
, "JIPS")!=
NULL
) || (uprv_strstr(pArgs->name, "jips")!=NULL)) {

1805 
úv
->
İtiÚs
|=
_MBCS_OPTION_JIPS
;

1809 if(
ouutTy³
==
MBCS_OUTPUT_2_SISO
) {

1810 
úv
->
maxBy‹sP”UCh¬
=3;

1813 
extIndexes
=
mbcsTabË
->extIndexes;

1814 if(
extIndexes
!=
NULL
) {

1815 
maxBy‹sP”UCh¬
=(
št8_t
)
	`UCNV_GET_MAX_BYTES_PER_UCHAR
(
extIndexes
);

1816 if(
ouutTy³
==
MBCS_OUTPUT_2_SISO
) {

1817 ++
maxBy‹sP”UCh¬
;

1820 if(
maxBy‹sP”UCh¬
>
úv
->maxBytesPerUChar) {

1821 
úv
->
maxBy‹sP”UCh¬
=maxBytesPerUChar;

1832 
úv
->
toUnicodeStus
=0;

1833 
úv
->
mode
=0;

1834 
úv
->
toUL’gth
=0;

1837 
úv
->
äomUCh¬32
=0;

1838 
úv
->
äomUnicodeStus
=1;

1840 
	}
}

1843 
	$uúv_MBCSG‘Name
(cÚ¡ 
UCÚv”‹r
 *
úv
) {

1844 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0 && cnv->
sh¬edD©a
->
mbcs
.
sw­LFNLName
!=
NULL
) {

1845  
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLName
;

1847  
úv
->
sh¬edD©a
->
¡©icD©a
->
Çme
;

1849 
	}
}

1853 
UCh¬32


1854 
	$uúv_MBCSG‘F®lback
(
UCÚv”‹rMBCSTabË
 *
mbcsTabË
, 
ušt32_t
 
off£t
) {

1855 cÚ¡ 
_MBCSToUF®lback
 *
toUF®lbacks
;

1856 
ušt32_t
 
i
, 
¡¬t
, 
lim™
;

1858 
lim™
=
mbcsTabË
->
couÁToUF®lbacks
;

1859 if(
lim™
>0) {

1861 
toUF®lbacks
=
mbcsTabË
->toUFallbacks;

1862 
¡¬t
=0;

1863 
¡¬t
<
lim™
-1) {

1864 
i
=(
¡¬t
+
lim™
)/2;

1865 if(
off£t
<
toUF®lbacks
[
i
].offset) {

1866 
lim™
=
i
;

1868 
¡¬t
=
i
;

1873 if(
off£t
==
toUF®lbacks
[
¡¬t
].offset) {

1874  
toUF®lbacks
[
¡¬t
].
codePošt
;

1879 
	}
}

1883 
	$uúv_MBCSSšgËToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

1884 
UE¼ÜCode
 *
pE¼ÜCode
) {

1885 
UCÚv”‹r
 *
úv
;

1886 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

1887 
UCh¬
 *
rg‘
;

1888 cÚ¡ 
UCh¬
 *
rg‘Lim™
;

1889 
št32_t
 *
off£ts
;

1891 cÚ¡ 
	`št32_t
 (*
¡©eTabË
)[256];

1893 
št32_t
 
sourûIndex
;

1895 
št32_t
 
’Œy
;

1896 
UCh¬
 
c
;

1897 
ušt8_t
 
aùiÚ
;

1900 
úv
=
pArgs
->
cÚv”‹r
;

1901 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

1902 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

1903 
rg‘
=
pArgs
->target;

1904 
rg‘Lim™
=
pArgs
->targetLimit;

1905 
off£ts
=
pArgs
->offsets;

1907 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

1908 
¡©eTabË
=(cÚ¡ 
	`št32_t
 (*)[256])
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLS‹TabË
;

1910 
¡©eTabË
=
úv
->
sh¬edD©a
->
mbcs
.stateTable;

1914 
sourûIndex
=0;

1917 
sourû
<
sourûLim™
) {

1926 if(
rg‘
>=
rg‘Lim™
) {

1928 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1932 
’Œy
=
¡©eTabË
[0][*
sourû
++];

1936 if(
	`MBCS_ENTRY_FINAL_IS_VALID_DIRECT_16
(
’Œy
)) {

1938 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

1939 if(
off£ts
!=
NULL
) {

1940 *
off£ts
++=
sourûIndex
;

1944 ++
sourûIndex
;

1952 
aùiÚ
=(
ušt8_t
)(
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
));

1953 if(
aùiÚ
==
MBCS_STATE_VALID_DIRECT_20
 ||

1954 (
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_20
 && 
	`UCNV_TO_U_USE_FALLBACK
(
úv
))

1956 
’Œy
=
	`MBCS_ENTRY_FINAL_VALUE
(entry);

1958 *
rg‘
++=(
UCh¬
)(0xd800|(UCh¬)(
’Œy
>>10));

1959 if(
off£ts
!=
NULL
) {

1960 *
off£ts
++=
sourûIndex
;

1962 
c
=(
UCh¬
)(0xdc00|(UCh¬)(
’Œy
&0x3ff));

1963 if(
rg‘
<
rg‘Lim™
) {

1964 *
rg‘
++=
c
;

1965 if(
off£ts
!=
NULL
) {

1966 *
off£ts
++=
sourûIndex
;

1970 
úv
->
UCh¬E¼ÜBufãr
[0]=
c
;

1971 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

1972 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1976 ++
sourûIndex
;

1978 } if(
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_16
) {

1979 if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
)) {

1981 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

1982 if(
off£ts
!=
NULL
) {

1983 *
off£ts
++=
sourûIndex
;

1986 ++
sourûIndex
;

1989 } if(
aùiÚ
==
MBCS_STATE_UNASSIGNED
) {

1991 } if(
aùiÚ
==
MBCS_STATE_ILLEGAL
) {

1993 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1996 ++
sourûIndex
;

2000 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2005 
pArgs
->
sourû
=(const *)source;

2006 
úv
->
toUBy‹s
[0]=*(
sourû
-1);

2007 
úv
->
toUL’gth
=
	`_extToU
(úv, cnv->
sh¬edD©a
,

2008 1, &
sourû
, 
sourûLim™
,

2009 &
rg‘
, 
rg‘Lim™
,

2010 &
off£ts
, 
sourûIndex
,

2011 
pArgs
->
æush
,

2012 
pE¼ÜCode
);

2013 
sourûIndex
+=1+(
št32_t
)(
sourû
-(cÚ¡ 
ušt8_t
 *)
pArgs
->source);

2015 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2023 
pArgs
->
sourû
=(const *)source;

2024 
pArgs
->
rg‘
=target;

2025 
pArgs
->
off£ts
=offsets;

2026 
	}
}

2035 
	$uúv_MBCSSšgËToBMPW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

2036 
UE¼ÜCode
 *
pE¼ÜCode
) {

2037 
UCÚv”‹r
 *
úv
;

2038 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
, *
Ï¡Sourû
;

2039 
UCh¬
 *
rg‘
;

2040 
št32_t
 
rg‘C­ac™y
, 
Ëngth
;

2041 
št32_t
 *
off£ts
;

2043 cÚ¡ 
	`št32_t
 (*
¡©eTabË
)[256];

2045 
št32_t
 
sourûIndex
;

2047 
št32_t
 
’Œy
;

2048 
ušt8_t
 
aùiÚ
;

2051 
úv
=
pArgs
->
cÚv”‹r
;

2052 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

2053 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

2054 
rg‘
=
pArgs
->target;

2055 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

2056 
off£ts
=
pArgs
->offsets;

2058 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

2059 
¡©eTabË
=(cÚ¡ 
	`št32_t
 (*)[256])
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLS‹TabË
;

2061 
¡©eTabË
=
úv
->
sh¬edD©a
->
mbcs
.stateTable;

2065 
sourûIndex
=0;

2066 
Ï¡Sourû
=
sourû
;

2072 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
);

2073 if(
Ëngth
<
rg‘C­ac™y
) {

2074 
rg‘C­ac™y
=
Ëngth
;

2077 #ià
MBCS_UNROLL_SINGLE_TO_BMP


2080 
uÄŞËd
:

2081 if(
rg‘C­ac™y
>=16) {

2082 
št32_t
 
couÁ
, 
loİs
, 
ÜedEÁr›s
;

2084 
loİs
=
couÁ
=
rg‘C­ac™y
>>4;

2086 
ÜedEÁr›s
=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2087 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2088 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2089 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2090 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2091 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2092 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2093 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2094 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2095 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2096 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2097 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2098 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2099 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2100 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2101 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2102 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2103 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2104 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2105 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2106 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2107 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2108 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2109 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2110 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2111 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2112 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2113 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2114 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2115 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2116 
ÜedEÁr›s
|=
’Œy
=
¡©eTabË
[0][*
sourû
++];

2117 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2120 if(!
	`MBCS_ENTRY_FINAL_IS_VALID_DIRECT_16
(
ÜedEÁr›s
)) {

2122 
sourû
-=16;

2123 
rg‘
-=16;

2126 } --
couÁ
>0);

2127 
couÁ
=
loİs
-count;

2128 
rg‘C­ac™y
-=16*
couÁ
;

2130 if(
off£ts
!=
NULL
) {

2131 
Ï¡Sourû
+=16*
couÁ
;

2132 
couÁ
>0) {

2133 *
off£ts
++=
sourûIndex
++;

2134 *
off£ts
++=
sourûIndex
++;

2135 *
off£ts
++=
sourûIndex
++;

2136 *
off£ts
++=
sourûIndex
++;

2137 *
off£ts
++=
sourûIndex
++;

2138 *
off£ts
++=
sourûIndex
++;

2139 *
off£ts
++=
sourûIndex
++;

2140 *
off£ts
++=
sourûIndex
++;

2141 *
off£ts
++=
sourûIndex
++;

2142 *
off£ts
++=
sourûIndex
++;

2143 *
off£ts
++=
sourûIndex
++;

2144 *
off£ts
++=
sourûIndex
++;

2145 *
off£ts
++=
sourûIndex
++;

2146 *
off£ts
++=
sourûIndex
++;

2147 *
off£ts
++=
sourûIndex
++;

2148 *
off£ts
++=
sourûIndex
++;

2149 --
couÁ
;

2156 
rg‘C­ac™y
 > 0 && 
sourû
 < 
sourûLim™
) {

2157 
’Œy
=
¡©eTabË
[0][*
sourû
++];

2161 if(
	`MBCS_ENTRY_FINAL_IS_VALID_DIRECT_16
(
’Œy
)) {

2163 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2164 --
rg‘C­ac™y
;

2172 
aùiÚ
=(
ušt8_t
)(
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
));

2173 if(
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_16
) {

2174 if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
)) {

2176 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2177 --
rg‘C­ac™y
;

2180 } if(
aùiÚ
==
MBCS_STATE_UNASSIGNED
) {

2182 } if(
aùiÚ
==
MBCS_STATE_ILLEGAL
) {

2184 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

2191 if(
off£ts
!=
NULL
) {

2192 
št32_t
 
couÁ
=(št32_t)(
sourû
-
Ï¡Sourû
);

2195 --
couÁ
>0) {

2196 *
off£ts
++=
sourûIndex
++;

2201 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2206 
Ï¡Sourû
=
sourû
;

2207 
úv
->
toUBy‹s
[0]=*(
sourû
-1);

2208 
úv
->
toUL’gth
=
	`_extToU
(úv, cnv->
sh¬edD©a
,

2209 1, &
sourû
, 
sourûLim™
,

2210 &
rg‘
, 
pArgs
->
rg‘Lim™
,

2211 &
off£ts
, 
sourûIndex
,

2212 
pArgs
->
æush
,

2213 
pE¼ÜCode
);

2214 
sourûIndex
+=1+(
št32_t
)(
sourû
-
Ï¡Sourû
);

2216 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2222 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-
rg‘
);

2223 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
);

2224 if(
Ëngth
<
rg‘C­ac™y
) {

2225 
rg‘C­ac™y
=
Ëngth
;

2229 #ià
MBCS_UNROLL_SINGLE_TO_BMP


2231 
uÄŞËd
;

2235 if(
	`U_SUCCESS
(*
pE¼ÜCode
è&& 
sourû
<
sourûLim™
 && 
rg‘
>=
pArgs
->
rg‘Lim™
) {

2237 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

2241 if(
off£ts
!=
NULL
) {

2242 
size_t
 
couÁ
=
sourû
-
Ï¡Sourû
;

2243 
couÁ
>0) {

2244 *
off£ts
++=
sourûIndex
++;

2245 --
couÁ
;

2250 
pArgs
->
sourû
=(const *)source;

2251 
pArgs
->
rg‘
=target;

2252 
pArgs
->
off£ts
=offsets;

2253 
	}
}

2255 
UBoŞ


2256 
hasV®idT¿By‹s
(cÚ¡ 
št32_t
 (*
¡©eTabË
)[256], 
ušt8_t
 
¡©e
) {

2257 cÚ¡ 
št32_t
 *
	grow
=
¡©eTabË
[
¡©e
];

2258 
št32_t
 
	gb
, 
	g’Œy
;

2260 
	g’Œy
=
row
[0xa1];

2261 ifĞ!
MBCS_ENTRY_IS_TRANSITION
(
’Œy
) &&

2262 
MBCS_ENTRY_FINAL_ACTION
(
’Œy
)!=
MBCS_STATE_ILLEGAL


2264  
TRUE
;

2266 
	g’Œy
=
row
[0x41];

2267 ifĞ!
MBCS_ENTRY_IS_TRANSITION
(
’Œy
) &&

2268 
MBCS_ENTRY_FINAL_ACTION
(
’Œy
)!=
MBCS_STATE_ILLEGAL


2270  
TRUE
;

2273 
	gb
=0; b<=0xff; ++b) {

2274 
	g’Œy
=
row
[
b
];

2275 ifĞ!
MBCS_ENTRY_IS_TRANSITION
(
’Œy
) &&

2276 
MBCS_ENTRY_FINAL_ACTION
(
’Œy
)!=
MBCS_STATE_ILLEGAL


2278  
TRUE
;

2282 
	gb
=0; b<=0xff; ++b) {

2283 
	g’Œy
=
row
[
b
];

2284 ifĞ
MBCS_ENTRY_IS_TRANSITION
(
’Œy
) &&

2285 
hasV®idT¿By‹s
(
¡©eTabË
, (
ušt8_t
)
MBCS_ENTRY_TRANSITION_STATE
(
’Œy
))

2287  
	gTRUE
;

2290  
	gFALSE
;

2298 
UBoŞ


2299 
isSšgËOrL—d
(cÚ¡ 
št32_t
 (*
¡©eTabË
)[256], 
ušt8_t
 
¡©e
, 
UBoŞ
 
isDBCSOÆy
, ušt8_ˆ
b
) {

2300 cÚ¡ 
št32_t
 *
	grow
=
¡©eTabË
[
¡©e
];

2301 
št32_t
 
	g’Œy
=
row
[
b
];

2302 if(
MBCS_ENTRY_IS_TRANSITION
(
’Œy
)) {

2303  
hasV®idT¿By‹s
(
¡©eTabË
, (
ušt8_t
)
MBCS_ENTRY_TRANSITION_STATE
(
’Œy
));

2305 
ušt8_t
 
	gaùiÚ
=(ušt8_t)(
MBCS_ENTRY_FINAL_ACTION
(
’Œy
));

2306 if(
	gaùiÚ
==
MBCS_STATE_CHANGE_ONLY
 && 
isDBCSOÆy
) {

2307  
FALSE
;

2309  
	gaùiÚ
!=
MBCS_STATE_ILLEGAL
;

2314 
U_CFUNC
 

2315 
	$uúv_MBCSToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

2316 
UE¼ÜCode
 *
pE¼ÜCode
) {

2317 
UCÚv”‹r
 *
úv
;

2318 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

2319 
UCh¬
 *
rg‘
;

2320 cÚ¡ 
UCh¬
 *
rg‘Lim™
;

2321 
št32_t
 *
off£ts
;

2323 cÚ¡ 
	`št32_t
 (*
¡©eTabË
)[256];

2324 cÚ¡ 
ušt16_t
 *
unicodeCodeUn™s
;

2326 
ušt32_t
 
off£t
;

2327 
ušt8_t
 
¡©e
;

2328 
št8_t
 
by‹Index
;

2329 
ušt8_t
 *
by‹s
;

2331 
št32_t
 
sourûIndex
, 
ÃxtSourûIndex
;

2333 
št32_t
 
’Œy
;

2334 
UCh¬
 
c
;

2335 
ušt8_t
 
aùiÚ
;

2338 
úv
=
pArgs
->
cÚv”‹r
;

2340 if(
úv
->
´eToUL’gth
>0) {

2345 
	`uúv_extCÚtšueM©chToU
(
úv
, 
pArgs
, -1, 
pE¼ÜCode
);

2347 if(
	`U_FAILURE
(*
pE¼ÜCode
è|| 
úv
->
´eToUL’gth
<0) {

2352 if(
úv
->
sh¬edD©a
->
mbcs
.
couÁS‹s
==1) {

2353 if(!(
úv
->
sh¬edD©a
->
mbcs
.
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
)) {

2354 
	`uúv_MBCSSšgËToBMPW™hOff£ts
(
pArgs
, 
pE¼ÜCode
);

2356 
	`uúv_MBCSSšgËToUnicodeW™hOff£ts
(
pArgs
, 
pE¼ÜCode
);

2362 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

2363 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

2364 
rg‘
=
pArgs
->target;

2365 
rg‘Lim™
=
pArgs
->targetLimit;

2366 
off£ts
=
pArgs
->offsets;

2368 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

2369 
¡©eTabË
=(cÚ¡ 
	`št32_t
 (*)[256])
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLS‹TabË
;

2371 
¡©eTabË
=
úv
->
sh¬edD©a
->
mbcs
.stateTable;

2373 
unicodeCodeUn™s
=
úv
->
sh¬edD©a
->
mbcs
.unicodeCodeUnits;

2376 
off£t
=
úv
->
toUnicodeStus
;

2377 
by‹Index
=
úv
->
toUL’gth
;

2378 
by‹s
=
úv
->
toUBy‹s
;

2385 if((
¡©e
=(
ušt8_t
)(
úv
->
mode
))==0) {

2386 
¡©e
=
úv
->
sh¬edD©a
->
mbcs
.
dbcsOÆyS‹
;

2390 
sourûIndex
=
by‹Index
==0 ? 0 : -1;

2391 
ÃxtSourûIndex
=0;

2394 
sourû
<
sourûLim™
) {

2403 if(
rg‘
>=
rg‘Lim™
) {

2405 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

2409 if(
by‹Index
==0) {

2411 if(
off£ts
==
NULL
) {

2413 
’Œy
=
¡©eTabË
[
¡©e
][*
sourû
];

2414 if(
	`MBCS_ENTRY_IS_TRANSITION
(
’Œy
)) {

2415 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_TRANSITION_STATE
(
’Œy
);

2416 
off£t
=
	`MBCS_ENTRY_TRANSITION_OFFSET
(
’Œy
);

2418 ++
sourû
;

2419 ifĞ
sourû
<
sourûLim™
 &&

2420 
	`MBCS_ENTRY_IS_FINAL
(
’Œy
=
¡©eTabË
[
¡©e
][*
sourû
]) &&

2421 
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
)==
MBCS_STATE_VALID_16
 &&

2422 (
c
=
unicodeCodeUn™s
[
off£t
+
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
)])<0xfffe

2424 ++
sourû
;

2425 *
rg‘
++=
c
;

2426 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_FINAL_STATE
(
’Œy
);

2427 
off£t
=0;

2430 
by‹s
[0]=*(
sourû
-1);

2431 
by‹Index
=1;

2435 if(
	`MBCS_ENTRY_FINAL_IS_VALID_DIRECT_16
(
’Œy
)) {

2437 ++
sourû
;

2438 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2439 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_FINAL_STATE
(
’Œy
);

2445 } 
sourû
<
sourûLim™
 && 
rg‘
<
rg‘Lim™
);

2448 
’Œy
=
¡©eTabË
[
¡©e
][*
sourû
];

2449 if(
	`MBCS_ENTRY_IS_TRANSITION
(
’Œy
)) {

2450 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_TRANSITION_STATE
(
’Œy
);

2451 
off£t
=
	`MBCS_ENTRY_TRANSITION_OFFSET
(
’Œy
);

2453 ++
sourû
;

2454 ifĞ
sourû
<
sourûLim™
 &&

2455 
	`MBCS_ENTRY_IS_FINAL
(
’Œy
=
¡©eTabË
[
¡©e
][*
sourû
]) &&

2456 
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
)==
MBCS_STATE_VALID_16
 &&

2457 (
c
=
unicodeCodeUn™s
[
off£t
+
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
)])<0xfffe

2459 ++
sourû
;

2460 *
rg‘
++=
c
;

2461 if(
off£ts
!=
NULL
) {

2462 *
off£ts
++=
sourûIndex
;

2463 
sourûIndex
=(
ÃxtSourûIndex
+=2);

2465 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_FINAL_STATE
(
’Œy
);

2466 
off£t
=0;

2469 ++
ÃxtSourûIndex
;

2470 
by‹s
[0]=*(
sourû
-1);

2471 
by‹Index
=1;

2475 if(
	`MBCS_ENTRY_FINAL_IS_VALID_DIRECT_16
(
’Œy
)) {

2477 ++
sourû
;

2478 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2479 if(
off£ts
!=
NULL
) {

2480 *
off£ts
++=
sourûIndex
;

2481 
sourûIndex
=++
ÃxtSourûIndex
;

2483 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_FINAL_STATE
(
’Œy
);

2489 } 
sourû
<
sourûLim™
 && 
rg‘
<
rg‘Lim™
);

2496 if(
sourû
>=
sourûLim™
) {

2499 if(
rg‘
>=
rg‘Lim™
) {

2501 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

2505 ++
ÃxtSourûIndex
;

2506 
by‹s
[
by‹Index
++]=*
sourû
++;

2508 ++
ÃxtSourûIndex
;

2509 
’Œy
=
¡©eTabË
[
¡©e
][
by‹s
[
by‹Index
++]=*
sourû
++];

2512 if(
	`MBCS_ENTRY_IS_TRANSITION
(
’Œy
)) {

2513 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_TRANSITION_STATE
(
’Œy
);

2514 
off£t
+=
	`MBCS_ENTRY_TRANSITION_OFFSET
(
’Œy
);

2519 
úv
->
mode
=
¡©e
;

2522 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_FINAL_STATE
(
’Œy
);

2528 
aùiÚ
=(
ušt8_t
)(
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
));

2529 if(
aùiÚ
==
MBCS_STATE_VALID_16
) {

2530 
off£t
+=
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2531 
c
=
unicodeCodeUn™s
[
off£t
];

2532 if(
c
<0xfffe) {

2534 *
rg‘
++=
c
;

2535 if(
off£ts
!=
NULL
) {

2536 *
off£ts
++=
sourûIndex
;

2538 
by‹Index
=0;

2539 } if(
c
==0xfffe) {

2540 if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
è&& (
’Œy
=(
št32_t
)
	`uúv_MBCSG‘F®lback
(&úv->
sh¬edD©a
->
mbcs
, 
off£t
))!=0xfffe) {

2542 *
rg‘
++=(
UCh¬
)
’Œy
;

2543 if(
off£ts
!=
NULL
) {

2544 *
off£ts
++=
sourûIndex
;

2546 
by‹Index
=0;

2550 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

2552 } if(
aùiÚ
==
MBCS_STATE_VALID_DIRECT_16
) {

2554 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2555 if(
off£ts
!=
NULL
) {

2556 *
off£ts
++=
sourûIndex
;

2558 
by‹Index
=0;

2559 } if(
aùiÚ
==
MBCS_STATE_VALID_16_PAIR
) {

2560 
off£t
+=
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2561 
c
=
unicodeCodeUn™s
[
off£t
++];

2562 if(
c
<0xd800) {

2564 *
rg‘
++=
c
;

2565 if(
off£ts
!=
NULL
) {

2566 *
off£ts
++=
sourûIndex
;

2568 
by‹Index
=0;

2569 } if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
è? 
c
<=0xdfff : c<=0xdbff) {

2571 *
rg‘
++=(
UCh¬
)(
c
&0xdbff);

2572 if(
off£ts
!=
NULL
) {

2573 *
off£ts
++=
sourûIndex
;

2575 
by‹Index
=0;

2576 if(
rg‘
<
rg‘Lim™
) {

2577 *
rg‘
++=
unicodeCodeUn™s
[
off£t
];

2578 if(
off£ts
!=
NULL
) {

2579 *
off£ts
++=
sourûIndex
;

2583 
úv
->
UCh¬E¼ÜBufãr
[0]=
unicodeCodeUn™s
[
off£t
];

2584 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

2585 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

2587 
off£t
=0;

2590 } if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
è? (
c
&0xfffe)==0xe000 : c==0xe000) {

2592 *
rg‘
++=
unicodeCodeUn™s
[
off£t
];

2593 if(
off£ts
!=
NULL
) {

2594 *
off£ts
++=
sourûIndex
;

2596 
by‹Index
=0;

2597 } if(
c
==0xffff) {

2599 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

2601 } if(
aùiÚ
==
MBCS_STATE_VALID_DIRECT_20
 ||

2602 (
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_20
 && 
	`UCNV_TO_U_USE_FALLBACK
(
úv
))

2604 
’Œy
=
	`MBCS_ENTRY_FINAL_VALUE
(entry);

2606 *
rg‘
++=(
UCh¬
)(0xd800|(UCh¬)(
’Œy
>>10));

2607 if(
off£ts
!=
NULL
) {

2608 *
off£ts
++=
sourûIndex
;

2610 
by‹Index
=0;

2611 
c
=(
UCh¬
)(0xdc00|(UCh¬)(
’Œy
&0x3ff));

2612 if(
rg‘
<
rg‘Lim™
) {

2613 *
rg‘
++=
c
;

2614 if(
off£ts
!=
NULL
) {

2615 *
off£ts
++=
sourûIndex
;

2619 
úv
->
UCh¬E¼ÜBufãr
[0]=
c
;

2620 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

2621 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

2623 
off£t
=0;

2626 } if(
aùiÚ
==
MBCS_STATE_CHANGE_ONLY
) {

2634 if(
úv
->
sh¬edD©a
->
mbcs
.
dbcsOÆyS‹
==0) {

2635 
by‹Index
=0;

2638 
¡©e
=(
ušt8_t
)(
úv
->
mode
);

2641 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

2643 } if(
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_16
) {

2644 if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
)) {

2646 *
rg‘
++=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2647 if(
off£ts
!=
NULL
) {

2648 *
off£ts
++=
sourûIndex
;

2650 
by‹Index
=0;

2652 } if(
aùiÚ
==
MBCS_STATE_UNASSIGNED
) {

2654 } if(
aùiÚ
==
MBCS_STATE_ILLEGAL
) {

2656 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

2659 
by‹Index
=0;

2663 
off£t
=0;

2665 if(
by‹Index
==0) {

2666 
sourûIndex
=
ÃxtSourûIndex
;

2667 } if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2669 if(
by‹Index
>1) {

2676 
UBoŞ
 
isDBCSOÆy
=(UBoŞ)(
úv
->
sh¬edD©a
->
mbcs
.
dbcsOÆyS‹
!=0);

2677 
št8_t
 
i
;

2678 
i
=1;

2679 
i
<
by‹Index
 && !
	`isSšgËOrL—d
(
¡©eTabË
, 
¡©e
, 
isDBCSOÆy
, 
by‹s
[i]);

2680 ++
i
) {}

2681 if(
i
<
by‹Index
) {

2683 
št8_t
 
backOutDi¡ªû
=
by‹Index
-
i
;

2684 
št32_t
 
by‹sFromThisBufãr
=(št32_t)(
sourû
-(cÚ¡ 
ušt8_t
 *)
pArgs
->source);

2685 
by‹Index
=
i
;

2686 if(
backOutDi¡ªû
<=
by‹sFromThisBufãr
) {

2687 
sourû
-=
backOutDi¡ªû
;

2690 
úv
->
´eToUL’gth
=(
št8_t
)(
by‹sFromThisBufãr
-
backOutDi¡ªû
);

2692 
	`u´v_memıy
(
úv
->
´eToU
, 
by‹s
+
i
, -úv->
´eToUL’gth
);

2693 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

2700 
pArgs
->
sourû
=(const *)source;

2701 
by‹Index
=
	`_extToU
(
úv
, cnv->
sh¬edD©a
,

2702 
by‹Index
, &
sourû
, 
sourûLim™
,

2703 &
rg‘
, 
rg‘Lim™
,

2704 &
off£ts
, 
sourûIndex
,

2705 
pArgs
->
æush
,

2706 
pE¼ÜCode
);

2707 
sourûIndex
=
ÃxtSourûIndex
+=(
št32_t
)(
sourû
-(cÚ¡ 
ušt8_t
 *)
pArgs
->source);

2709 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2717 
úv
->
toUnicodeStus
=
off£t
;

2718 
úv
->
mode
=
¡©e
;

2719 
úv
->
toUL’gth
=
by‹Index
;

2722 
pArgs
->
sourû
=(const *)source;

2723 
pArgs
->
rg‘
=target;

2724 
pArgs
->
off£ts
=offsets;

2725 
	}
}

2731 
UCh¬32


2732 
	$uúv_MBCSSšgËG‘NextUCh¬
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

2733 
UE¼ÜCode
 *
pE¼ÜCode
) {

2734 
UCÚv”‹r
 *
úv
;

2735 cÚ¡ 
	`št32_t
 (*
¡©eTabË
)[256];

2736 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

2738 
št32_t
 
’Œy
;

2739 
ušt8_t
 
aùiÚ
;

2742 
úv
=
pArgs
->
cÚv”‹r
;

2743 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

2744 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

2745 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

2746 
¡©eTabË
=(cÚ¡ 
	`št32_t
 (*)[256])
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLS‹TabË
;

2748 
¡©eTabË
=
úv
->
sh¬edD©a
->
mbcs
.stateTable;

2752 
sourû
<
sourûLim™
) {

2753 
’Œy
=
¡©eTabË
[0][*
sourû
++];

2757 
pArgs
->
sourû
=(const *)source;

2759 if(
	`MBCS_ENTRY_FINAL_IS_VALID_DIRECT_16
(
’Œy
)) {

2761  (
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2768 
aùiÚ
=(
ušt8_t
)(
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
));

2769 ifĞ
aùiÚ
==
MBCS_STATE_VALID_DIRECT_20
 ||

2770 (
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_20
 && 
	`UCNV_TO_U_USE_FALLBACK
(
úv
))

2773  (
UCh¬32
)(
	`MBCS_ENTRY_FINAL_VALUE
(
’Œy
)+0x10000);

2774 } if(
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_16
) {

2775 if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
)) {

2777  (
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2779 } if(
aùiÚ
==
MBCS_STATE_UNASSIGNED
) {

2781 } if(
aùiÚ
==
MBCS_STATE_ILLEGAL
) {

2783 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

2789 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2794 
pArgs
->
sourû
=(const *)source-1;

2795  
UCNV_GET_NEXT_UCHAR_USE_TO_U
;

2800 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

2802 
	}
}

2816 
UCh¬32


2817 
	$uúv_MBCSG‘NextUCh¬
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

2818 
UE¼ÜCode
 *
pE¼ÜCode
) {

2819 
UCÚv”‹r
 *
úv
;

2820 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
, *
Ï¡Sourû
;

2822 cÚ¡ 
	`št32_t
 (*
¡©eTabË
)[256];

2823 cÚ¡ 
ušt16_t
 *
unicodeCodeUn™s
;

2825 
ušt32_t
 
off£t
;

2826 
ušt8_t
 
¡©e
;

2828 
št32_t
 
’Œy
;

2829 
UCh¬32
 
c
;

2830 
ušt8_t
 
aùiÚ
;

2833 
úv
=
pArgs
->
cÚv”‹r
;

2835 if(
úv
->
´eToUL’gth
>0) {

2837  
UCNV_GET_NEXT_UCHAR_USE_TO_U
;

2840 if(
úv
->
sh¬edD©a
->
mbcs
.
unicodeMask
&
UCNV_HAS_SURROGATES
) {

2846  
UCNV_GET_NEXT_UCHAR_USE_TO_U
;

2847 } if(
úv
->
sh¬edD©a
->
mbcs
.
couÁS‹s
==1) {

2848  
	`uúv_MBCSSšgËG‘NextUCh¬
(
pArgs
, 
pE¼ÜCode
);

2852 
sourû
=
Ï¡Sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

2853 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

2855 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

2856 
¡©eTabË
=(cÚ¡ 
	`št32_t
 (*)[256])
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLS‹TabË
;

2858 
¡©eTabË
=
úv
->
sh¬edD©a
->
mbcs
.stateTable;

2860 
unicodeCodeUn™s
=
úv
->
sh¬edD©a
->
mbcs
.unicodeCodeUnits;

2863 
off£t
=
úv
->
toUnicodeStus
;

2870 if((
¡©e
=(
ušt8_t
)(
úv
->
mode
))==0) {

2871 
¡©e
=
úv
->
sh¬edD©a
->
mbcs
.
dbcsOÆyS‹
;

2875 
c
=
U_SENTINEL
;

2876 
sourû
<
sourûLim™
) {

2877 
’Œy
=
¡©eTabË
[
¡©e
][*
sourû
++];

2878 if(
	`MBCS_ENTRY_IS_TRANSITION
(
’Œy
)) {

2879 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_TRANSITION_STATE
(
’Œy
);

2880 
off£t
+=
	`MBCS_ENTRY_TRANSITION_OFFSET
(
’Œy
);

2883 ifĞ
sourû
<
sourûLim™
 &&

2884 
	`MBCS_ENTRY_IS_FINAL
(
’Œy
=
¡©eTabË
[
¡©e
][*
sourû
]) &&

2885 
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
)==
MBCS_STATE_VALID_16
 &&

2886 (
c
=
unicodeCodeUn™s
[
off£t
+
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
)])<0xfffe

2888 ++
sourû
;

2889 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_FINAL_STATE
(
’Œy
);

2895 
úv
->
mode
=
¡©e
;

2898 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_FINAL_STATE
(
’Œy
);

2904 
aùiÚ
=(
ušt8_t
)(
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
));

2905 if(
aùiÚ
==
MBCS_STATE_VALID_DIRECT_16
) {

2907 
c
=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2909 } if(
aùiÚ
==
MBCS_STATE_VALID_16
) {

2910 
off£t
+=
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2911 
c
=
unicodeCodeUn™s
[
off£t
];

2912 if(
c
<0xfffe) {

2915 } if(
c
==0xfffe) {

2916 if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
è&& (
c
=
	`uúv_MBCSG‘F®lback
(&úv->
sh¬edD©a
->
mbcs
, 
off£t
))!=0xfffe) {

2921 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

2923 } if(
aùiÚ
==
MBCS_STATE_VALID_16_PAIR
) {

2924 
off£t
+=
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2925 
c
=
unicodeCodeUn™s
[
off£t
++];

2926 if(
c
<0xd800) {

2929 } if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
è? 
c
<=0xdfff : c<=0xdbff) {

2931 
c
=((c&0x3ff)<<10)+
unicodeCodeUn™s
[
off£t
]+(0x10000-0xdc00);

2933 } if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
è? (
c
&0xfffe)==0xe000 : c==0xe000) {

2935 
c
=
unicodeCodeUn™s
[
off£t
];

2937 } if(
c
==0xffff) {

2939 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

2941 } if(
aùiÚ
==
MBCS_STATE_VALID_DIRECT_20
 ||

2942 (
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_20
 && 
	`UCNV_TO_U_USE_FALLBACK
(
úv
))

2945 
c
=(
UCh¬32
)(
	`MBCS_ENTRY_FINAL_VALUE
(
’Œy
)+0x10000);

2947 } if(
aùiÚ
==
MBCS_STATE_CHANGE_ONLY
) {

2955 if(
úv
->
sh¬edD©a
->
mbcs
.
dbcsOÆyS‹
!=0) {

2957 
¡©e
=(
ušt8_t
)(
úv
->
mode
);

2960 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

2962 } if(
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_16
) {

2963 if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
)) {

2965 
c
=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

2968 } if(
aùiÚ
==
MBCS_STATE_UNASSIGNED
) {

2970 } if(
aùiÚ
==
MBCS_STATE_ILLEGAL
) {

2972 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

2975 
off£t
=0;

2976 
Ï¡Sourû
=
sourû
;

2981 
off£t
=0;

2983 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2988 
úv
->
toUnicodeStus
=0;

2989 
úv
->
mode
=
¡©e
;

2990 
pArgs
->
sourû
=(cÚ¡ *)
Ï¡Sourû
;

2991  
UCNV_GET_NEXT_UCHAR_USE_TO_U
;

2996 if(
c
<0) {

2997 if(
	`U_SUCCESS
(*
pE¼ÜCode
è&& 
sourû
==
sourûLim™
 && 
Ï¡Sourû
<source) {

2999 
ušt8_t
 *
by‹s
=
úv
->
toUBy‹s
;

3000 
úv
->
toUL’gth
=(
št8_t
)(
sourû
-
Ï¡Sourû
);

3002 *
by‹s
++=*
Ï¡Sourû
++;

3003 } 
Ï¡Sourû
<
sourû
);

3004 *
pE¼ÜCode
=
U_TRUNCATED_CHAR_FOUND
;

3005 } if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

3013 
UBoŞ
 
isDBCSOÆy
=(UBoŞ)(
úv
->
sh¬edD©a
->
mbcs
.
dbcsOÆyS‹
!=0);

3014 
ušt8_t
 *
by‹s
=
úv
->
toUBy‹s
;

3015 *
by‹s
++=*
Ï¡Sourû
++;

3016 if(
Ï¡Sourû
==
sourû
) {

3017 
úv
->
toUL’gth
=1;

3019 
št8_t
 
i
;

3020 
i
=1;

3021 
Ï¡Sourû
<
sourû
 && !
	`isSšgËOrL—d
(
¡©eTabË
, 
¡©e
, 
isDBCSOÆy
, *lastSource);

3022 ++
i


3024 *
by‹s
++=*
Ï¡Sourû
++;

3026 
úv
->
toUL’gth
=
i
;

3027 
sourû
=
Ï¡Sourû
;

3031 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

3033 
c
=0xffff;

3037 
úv
->
toUnicodeStus
=0;

3038 
úv
->
mode
=
¡©e
;

3041 
pArgs
->
sourû
=(const *)source;

3042  
c
;

3043 
	}
}

3055 
U_CFUNC
 
UCh¬32


3056 
	$uúv_MBCSSšgËSim¶eG‘NextUCh¬
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

3057 
ušt8_t
 
b
, 
UBoŞ
 
u£F®lback
) {

3058 
št32_t
 
’Œy
;

3059 
ušt8_t
 
aùiÚ
;

3061 
’Œy
=
sh¬edD©a
->
mbcs
.
¡©eTabË
[0][
b
];

3064 if(
	`MBCS_ENTRY_FINAL_IS_VALID_DIRECT_16
(
’Œy
)) {

3066  (
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

3073 
aùiÚ
=(
ušt8_t
)(
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
));

3074 if(
aùiÚ
==
MBCS_STATE_VALID_DIRECT_20
) {

3076  0x10000+
	`MBCS_ENTRY_FINAL_VALUE
(
’Œy
);

3077 } if(
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_16
) {

3078 if(!
	`TO_U_USE_FALLBACK
(
u£F®lback
)) {

3082  (
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

3083 } if(
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_20
) {

3084 if(!
	`TO_U_USE_FALLBACK
(
u£F®lback
)) {

3088  0x10000+
	`MBCS_ENTRY_FINAL_VALUE
(
’Œy
);

3089 } if(
aùiÚ
==
MBCS_STATE_UNASSIGNED
) {

3091 } if(
aùiÚ
==
MBCS_STATE_ILLEGAL
) {

3097 
	}
}

3113 
U_CFUNC
 
UCh¬32


3114 
	$uúv_MBCSSim¶eG‘NextUCh¬
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

3115 cÚ¡ *
sourû
, 
št32_t
 
Ëngth
,

3116 
UBoŞ
 
u£F®lback
) {

3117 cÚ¡ 
	`št32_t
 (*
¡©eTabË
)[256];

3118 cÚ¡ 
ušt16_t
 *
unicodeCodeUn™s
;

3120 
ušt32_t
 
off£t
;

3121 
ušt8_t
 
¡©e
, 
aùiÚ
;

3123 
UCh¬32
 
c
;

3124 
št32_t
 
i
, 
’Œy
;

3126 if(
Ëngth
<=0) {

3139 if(
sh¬edD©a
->
mbcs
.
couÁS‹s
==1) {

3140 if(
Ëngth
==1) {

3141  
	`uúv_MBCSSšgËSim¶eG‘NextUCh¬
(
sh¬edD©a
, (
ušt8_t
)*
sourû
, 
u£F®lback
);

3149 
¡©eTabË
=
sh¬edD©a
->
mbcs
.stateTable;

3150 
unicodeCodeUn™s
=
sh¬edD©a
->
mbcs
.unicodeCodeUnits;

3153 
off£t
=0;

3154 
¡©e
=
sh¬edD©a
->
mbcs
.
dbcsOÆyS‹
;

3157 
i
=0;;) {

3158 
’Œy
=
¡©eTabË
[
¡©e
][(
ušt8_t
)
sourû
[
i
++]];

3159 if(
	`MBCS_ENTRY_IS_TRANSITION
(
’Œy
)) {

3160 
¡©e
=(
ušt8_t
)
	`MBCS_ENTRY_TRANSITION_STATE
(
’Œy
);

3161 
off£t
+=
	`MBCS_ENTRY_TRANSITION_OFFSET
(
’Œy
);

3163 if(
i
==
Ëngth
) {

3171 
aùiÚ
=(
ušt8_t
)(
	`MBCS_ENTRY_FINAL_ACTION
(
’Œy
));

3172 if(
aùiÚ
==
MBCS_STATE_VALID_16
) {

3173 
off£t
+=
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

3174 
c
=
unicodeCodeUn™s
[
off£t
];

3175 if(
c
!=0xfffe) {

3177 } if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
)) {

3178 
c
=
	`uúv_MBCSG‘F®lback
(&
sh¬edD©a
->
mbcs
, 
off£t
);

3182 } if(
aùiÚ
==
MBCS_STATE_VALID_DIRECT_16
) {

3184 
c
=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

3186 } if(
aùiÚ
==
MBCS_STATE_VALID_16_PAIR
) {

3187 
off£t
+=
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

3188 
c
=
unicodeCodeUn™s
[
off£t
++];

3189 if(
c
<0xd800) {

3191 } if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
è? 
c
<=0xdfff : c<=0xdbff) {

3193 
c
=(
UCh¬32
)(((c&0x3ff)<<10)+
unicodeCodeUn™s
[
off£t
]+(0x10000-0xdc00));

3194 } if(
	`UCNV_TO_U_USE_FALLBACK
(
úv
è? (
c
&0xfffe)==0xe000 : c==0xe000) {

3196 
c
=
unicodeCodeUn™s
[
off£t
];

3197 } if(
c
==0xffff) {

3200 
c
=0xfffe;

3203 } if(
aùiÚ
==
MBCS_STATE_VALID_DIRECT_20
) {

3205 
c
=0x10000+
	`MBCS_ENTRY_FINAL_VALUE
(
’Œy
);

3207 } if(
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_16
) {

3208 if(!
	`TO_U_USE_FALLBACK
(
u£F®lback
)) {

3209 
c
=0xfffe;

3213 
c
=(
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
);

3215 } if(
aùiÚ
==
MBCS_STATE_FALLBACK_DIRECT_20
) {

3216 if(!
	`TO_U_USE_FALLBACK
(
u£F®lback
)) {

3217 
c
=0xfffe;

3221 
c
=0x10000+
	`MBCS_ENTRY_FINAL_VALUE
(
’Œy
);

3223 } if(
aùiÚ
==
MBCS_STATE_UNASSIGNED
) {

3224 
c
=0xfffe;

3236 if(
i
!=
Ëngth
) {

3241 if(
c
==0xfffe) {

3243 cÚ¡ 
št32_t
 *
cx
=
sh¬edD©a
->
mbcs
.
extIndexes
;

3244 if(
cx
!=
NULL
) {

3245  
	`uúv_extSim¶eM©chToU
(
cx
, 
sourû
, 
Ëngth
, 
u£F®lback
);

3249  
c
;

3250 
	}
}

3256 
	$uúv_MBCSDoubËFromUnicodeW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

3257 
UE¼ÜCode
 *
pE¼ÜCode
) {

3258 
UCÚv”‹r
 *
úv
;

3259 cÚ¡ 
UCh¬
 *
sourû
, *
sourûLim™
;

3260 
ušt8_t
 *
rg‘
;

3261 
št32_t
 
rg‘C­ac™y
;

3262 
št32_t
 *
off£ts
;

3264 cÚ¡ 
ušt16_t
 *
bË
;

3265 cÚ¡ 
ušt16_t
 *
mbcsIndex
;

3266 cÚ¡ 
ušt8_t
 *
by‹s
;

3268 
UCh¬32
 
c
;

3270 
št32_t
 
sourûIndex
, 
ÃxtSourûIndex
;

3272 
ušt32_t
 
¡age2EÁry
;

3273 
ušt32_t
 
asciiRoundŒs
;

3274 
ušt32_t
 
v®ue
;

3275 
ušt8_t
 
unicodeMask
;

3278 
úv
=
pArgs
->
cÚv”‹r
;

3279 
unicodeMask
=
úv
->
sh¬edD©a
->
mbcs
.unicodeMask;

3282 
sourû
=
pArgs
->source;

3283 
sourûLim™
=
pArgs
->sourceLimit;

3284 
rg‘
=(
ušt8_t
 *)
pArgs
->target;

3285 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

3286 
off£ts
=
pArgs
->offsets;

3288 
bË
=
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeTabË
;

3289 
mbcsIndex
=
úv
->
sh¬edD©a
->
mbcs
.mbcsIndex;

3290 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

3291 
by‹s
=
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLFromUnicodeBy‹s
;

3293 
by‹s
=
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
;

3295 
asciiRoundŒs
=
úv
->
sh¬edD©a
->
mbcs
.asciiRoundtrips;

3298 
c
=
úv
->
äomUCh¬32
;

3301 
sourûIndex
ğ
c
==0 ? 0 : -1;

3302 
ÃxtSourûIndex
=0;

3305 if(
c
!=0 && 
rg‘C­ac™y
>0) {

3306 
g‘T¿
;

3309 
sourû
<
sourûLim™
) {

3318 if(
rg‘C­ac™y
>0) {

3324 
c
=*
sourû
++;

3325 ++
ÃxtSourûIndex
;

3326 if(
c
<=0x7à&& 
	`IS_ASCII_ROUNDTRIP
(c, 
asciiRoundŒs
)) {

3327 *
rg‘
++=(
ušt8_t
)
c
;

3328 if(
off£ts
!=
NULL
) {

3329 *
off£ts
++=
sourûIndex
;

3330 
sourûIndex
=
ÃxtSourûIndex
;

3332 --
rg‘C­ac™y
;

3333 
c
=0;

3341 if(
c
<=0xd7ff) {

3342 
v®ue
=
	`DBCS_RESULT_FROM_MOST_BMP
(
mbcsIndex
, (cÚ¡ 
ušt16_t
 *)
by‹s
, 
c
);

3344 if(
v®ue
==0) {

3345 
uÇssigÃd
;

3354 if(
	`UTF_IS_SURROGATE
(
c
è&& !(
unicodeMask
&
UCNV_HAS_SURROGATES
)) {

3355 if(
	`UTF_IS_SURROGATE_FIRST
(
c
)) {

3356 
g‘T¿
:

3357 if(
sourû
<
sourûLim™
) {

3359 
UCh¬
 
Œa
=*
sourû
;

3360 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

3361 ++
sourû
;

3362 ++
ÃxtSourûIndex
;

3363 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
Œa
);

3364 if(!(
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
)) {

3367 
uÇssigÃd
;

3374 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

3384 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

3390 
¡age2EÁry
=
	`MBCS_STAGE_2_FROM_U
(
bË
, 
c
);

3394 
v®ue
=
	`MBCS_VALUE_2_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
c
);

3397 if(!(
	`MBCS_FROM_U_IS_ROUNDTRIP
(
¡age2EÁry
, 
c
) ||

3398 (
	`UCNV_FROM_U_USE_FALLBACK
(
úv
, 
c
è&& 
v®ue
!=0))

3406 
uÇssigÃd
:

3408 
pArgs
->
sourû
=source;

3409 
c
=
	`_extFromU
(
úv
, cnv->
sh¬edD©a
,

3410 
c
, &
sourû
, 
sourûLim™
,

3411 &
rg‘
,¬g‘+
rg‘C­ac™y
,

3412 &
off£ts
, 
sourûIndex
,

3413 
pArgs
->
æush
,

3414 
pE¼ÜCode
);

3415 
ÃxtSourûIndex
+=(
št32_t
)(
sourû
-
pArgs
->source);

3417 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

3424 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-(*)
rg‘
);

3427 
sourûIndex
=
ÃxtSourûIndex
;

3435 if(
v®ue
<=0xff) {

3437 *
rg‘
++=(
ušt8_t
)
v®ue
;

3438 if(
off£ts
!=
NULL
) {

3439 *
off£ts
++=
sourûIndex
;

3441 --
rg‘C­ac™y
;

3443 *
rg‘
++=(
ušt8_t
)(
v®ue
>>8);

3444 if(2<=
rg‘C­ac™y
) {

3445 *
rg‘
++=(
ušt8_t
)
v®ue
;

3446 if(
off£ts
!=
NULL
) {

3447 *
off£ts
++=
sourûIndex
;

3448 *
off£ts
++=
sourûIndex
;

3450 
rg‘C­ac™y
-=2;

3452 if(
off£ts
!=
NULL
) {

3453 *
off£ts
++=
sourûIndex
;

3455 
úv
->
ch¬E¼ÜBufãr
[0]=()
v®ue
;

3456 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

3459 
rg‘C­ac™y
=0;

3460 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

3461 
c
=0;

3467 
c
=0;

3468 
sourûIndex
=
ÃxtSourûIndex
;

3472 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

3478 
úv
->
äomUCh¬32
=
c
;

3481 
pArgs
->
sourû
=source;

3482 
pArgs
->
rg‘
=(*)target;

3483 
pArgs
->
off£ts
=offsets;

3484 
	}
}

3488 
	$uúv_MBCSSšgËFromUnicodeW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

3489 
UE¼ÜCode
 *
pE¼ÜCode
) {

3490 
UCÚv”‹r
 *
úv
;

3491 cÚ¡ 
UCh¬
 *
sourû
, *
sourûLim™
;

3492 
ušt8_t
 *
rg‘
;

3493 
št32_t
 
rg‘C­ac™y
;

3494 
št32_t
 *
off£ts
;

3496 cÚ¡ 
ušt16_t
 *
bË
;

3497 cÚ¡ 
ušt16_t
 *
»suÉs
;

3499 
UCh¬32
 
c
;

3501 
št32_t
 
sourûIndex
, 
ÃxtSourûIndex
;

3503 
ušt16_t
 
v®ue
, 
mšV®ue
;

3504 
UBoŞ
 
hasSuµËm’ry
;

3507 
úv
=
pArgs
->
cÚv”‹r
;

3508 
sourû
=
pArgs
->source;

3509 
sourûLim™
=
pArgs
->sourceLimit;

3510 
rg‘
=(
ušt8_t
 *)
pArgs
->target;

3511 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

3512 
off£ts
=
pArgs
->offsets;

3514 
bË
=
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeTabË
;

3515 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

3516 
»suÉs
=(
ušt16_t
 *)
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLFromUnicodeBy‹s
;

3518 
»suÉs
=(
ušt16_t
 *)
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
;

3521 if(
úv
->
u£F®lback
) {

3523 
mšV®ue
=0x800;

3526 
mšV®ue
=0xc00;

3528 
hasSuµËm’ry
=(
UBoŞ
)(
úv
->
sh¬edD©a
->
mbcs
.
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
);

3531 
c
=
úv
->
äomUCh¬32
;

3534 
sourûIndex
ğ
c
==0 ? 0 : -1;

3535 
ÃxtSourûIndex
=0;

3538 if(
c
!=0 && 
rg‘C­ac™y
>0) {

3539 
g‘T¿
;

3542 
sourû
<
sourûLim™
) {

3551 if(
rg‘C­ac™y
>0) {

3557 
c
=*
sourû
++;

3558 ++
ÃxtSourûIndex
;

3559 if(
	`UTF_IS_SURROGATE
(
c
)) {

3560 if(
	`UTF_IS_SURROGATE_FIRST
(
c
)) {

3561 
g‘T¿
:

3562 if(
sourû
<
sourûLim™
) {

3564 
UCh¬
 
Œa
=*
sourû
;

3565 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

3566 ++
sourû
;

3567 ++
ÃxtSourûIndex
;

3568 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
Œa
);

3569 if(!
hasSuµËm’ry
) {

3572 
uÇssigÃd
;

3579 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

3589 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

3595 
v®ue
=
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
»suÉs
, 
c
);

3598 if(
v®ue
>=
mšV®ue
) {

3602 *
rg‘
++=(
ušt8_t
)
v®ue
;

3603 if(
off£ts
!=
NULL
) {

3604 *
off£ts
++=
sourûIndex
;

3606 --
rg‘C­ac™y
;

3609 
c
=0;

3610 
sourûIndex
=
ÃxtSourûIndex
;

3612 
uÇssigÃd
:

3614 
pArgs
->
sourû
=source;

3615 
c
=
	`_extFromU
(
úv
, cnv->
sh¬edD©a
,

3616 
c
, &
sourû
, 
sourûLim™
,

3617 &
rg‘
,¬g‘+
rg‘C­ac™y
,

3618 &
off£ts
, 
sourûIndex
,

3619 
pArgs
->
æush
,

3620 
pE¼ÜCode
);

3621 
ÃxtSourûIndex
+=(
št32_t
)(
sourû
-
pArgs
->source);

3623 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

3630 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-(*)
rg‘
);

3633 
sourûIndex
=
ÃxtSourûIndex
;

3638 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

3644 
úv
->
äomUCh¬32
=
c
;

3647 
pArgs
->
sourû
=source;

3648 
pArgs
->
rg‘
=(*)target;

3649 
pArgs
->
off£ts
=offsets;

3650 
	}
}

3664 
	$uúv_MBCSSšgËFromBMPW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

3665 
UE¼ÜCode
 *
pE¼ÜCode
) {

3666 
UCÚv”‹r
 *
úv
;

3667 cÚ¡ 
UCh¬
 *
sourû
, *
sourûLim™
, *
Ï¡Sourû
;

3668 
ušt8_t
 *
rg‘
;

3669 
št32_t
 
rg‘C­ac™y
, 
Ëngth
;

3670 
št32_t
 *
off£ts
;

3672 cÚ¡ 
ušt16_t
 *
bË
;

3673 cÚ¡ 
ušt16_t
 *
»suÉs
;

3675 
UCh¬32
 
c
;

3677 
št32_t
 
sourûIndex
;

3679 
ušt32_t
 
asciiRoundŒs
;

3680 
ušt16_t
 
v®ue
, 
mšV®ue
;

3683 
úv
=
pArgs
->
cÚv”‹r
;

3684 
sourû
=
pArgs
->source;

3685 
sourûLim™
=
pArgs
->sourceLimit;

3686 
rg‘
=(
ušt8_t
 *)
pArgs
->target;

3687 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

3688 
off£ts
=
pArgs
->offsets;

3690 
bË
=
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeTabË
;

3691 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

3692 
»suÉs
=(
ušt16_t
 *)
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLFromUnicodeBy‹s
;

3694 
»suÉs
=(
ušt16_t
 *)
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
;

3696 
asciiRoundŒs
=
úv
->
sh¬edD©a
->
mbcs
.asciiRoundtrips;

3698 if(
úv
->
u£F®lback
) {

3700 
mšV®ue
=0x800;

3703 
mšV®ue
=0xc00;

3707 
c
=
úv
->
äomUCh¬32
;

3710 
sourûIndex
ğ
c
==0 ? 0 : -1;

3711 
Ï¡Sourû
=
sourû
;

3717 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
);

3718 if(
Ëngth
<
rg‘C­ac™y
) {

3719 
rg‘C­ac™y
=
Ëngth
;

3723 if(
c
!=0 && 
rg‘C­ac™y
>0) {

3724 
g‘T¿
;

3727 #ià
MBCS_UNROLL_SINGLE_FROM_BMP


3730 
uÄŞËd
:

3731 if(
rg‘C­ac™y
>=4) {

3732 
št32_t
 
couÁ
, 
loİs
;

3733 
ušt16_t
 
ªdedV®ues
;

3735 
loİs
=
couÁ
=
rg‘C­ac™y
>>2;

3737 
c
=*
sourû
++;

3738 
ªdedV®ues
=
v®ue
=
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
»suÉs
, 
c
);

3739 *
rg‘
++=(
ušt8_t
)
v®ue
;

3740 
c
=*
sourû
++;

3741 
ªdedV®ues
&=
v®ue
=
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
»suÉs
, 
c
);

3742 *
rg‘
++=(
ušt8_t
)
v®ue
;

3743 
c
=*
sourû
++;

3744 
ªdedV®ues
&=
v®ue
=
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
»suÉs
, 
c
);

3745 *
rg‘
++=(
ušt8_t
)
v®ue
;

3746 
c
=*
sourû
++;

3747 
ªdedV®ues
&=
v®ue
=
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
»suÉs
, 
c
);

3748 *
rg‘
++=(
ušt8_t
)
v®ue
;

3751 if(
ªdedV®ues
<
mšV®ue
) {

3753 
sourû
-=4;

3754 
rg‘
-=4;

3757 } --
couÁ
>0);

3758 
couÁ
=
loİs
-count;

3759 
rg‘C­ac™y
-=4*
couÁ
;

3761 if(
off£ts
!=
NULL
) {

3762 
Ï¡Sourû
+=4*
couÁ
;

3763 
couÁ
>0) {

3764 *
off£ts
++=
sourûIndex
++;

3765 *
off£ts
++=
sourûIndex
++;

3766 *
off£ts
++=
sourûIndex
++;

3767 *
off£ts
++=
sourûIndex
++;

3768 --
couÁ
;

3772 
c
=0;

3776 
rg‘C­ac™y
>0) {

3782 
c
=*
sourû
++;

3789 if(
c
<=0x7à&& 
	`IS_ASCII_ROUNDTRIP
(c, 
asciiRoundŒs
)) {

3790 *
rg‘
++=(
ušt8_t
)
c
;

3791 --
rg‘C­ac™y
;

3792 
c
=0;

3795 
v®ue
=
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
»suÉs
, 
c
);

3797 if(
v®ue
>=
mšV®ue
) {

3801 *
rg‘
++=(
ušt8_t
)
v®ue
;

3802 --
rg‘C­ac™y
;

3805 
c
=0;

3807 } if(!
	`UTF_IS_SURROGATE
(
c
)) {

3809 } if(
	`UTF_IS_SURROGATE_FIRST
(
c
)) {

3810 
g‘T¿
:

3811 if(
sourû
<
sourûLim™
) {

3813 
UCh¬
 
Œa
=*
sourû
;

3814 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

3815 ++
sourû
;

3816 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
Œa
);

3822 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

3827 ià(
pArgs
->
æush
) {

3828 *
pE¼ÜCode
=
U_TRUNCATED_CHAR_FOUND
;

3835 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

3842 
Ëngth
=
	`U16_LENGTH
(
c
);

3845 if(
off£ts
!=
NULL
) {

3846 
št32_t
 
couÁ
=(št32_t)(
sourû
-
Ï¡Sourû
);

3849 
couÁ
-=
Ëngth
;

3851 
couÁ
>0) {

3852 *
off£ts
++=
sourûIndex
++;

3853 --
couÁ
;

3859 
Ï¡Sourû
=
sourû
;

3860 
c
=
	`_extFromU
(
úv
, cnv->
sh¬edD©a
,

3861 
c
, &
sourû
, 
sourûLim™
,

3862 &
rg‘
, (cÚ¡ 
ušt8_t
 *)(
pArgs
->
rg‘Lim™
),

3863 &
off£ts
, 
sourûIndex
,

3864 
pArgs
->
æush
,

3865 
pE¼ÜCode
);

3866 
sourûIndex
+=
Ëngth
+(
št32_t
)(
sourû
-
Ï¡Sourû
);

3867 
Ï¡Sourû
=
sourû
;

3869 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

3876 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-(*)
rg‘
);

3877 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
);

3878 if(
Ëngth
<
rg‘C­ac™y
) {

3879 
rg‘C­ac™y
=
Ëngth
;

3883 #ià
MBCS_UNROLL_SINGLE_FROM_BMP


3885 
uÄŞËd
;

3889 if(
	`U_SUCCESS
(*
pE¼ÜCode
è&& 
sourû
<
sourûLim™
 && 
rg‘
>=(
ušt8_t
 *)
pArgs
->
rg‘Lim™
) {

3891 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

3895 if(
off£ts
!=
NULL
) {

3896 
size_t
 
couÁ
=
sourû
-
Ï¡Sourû
;

3897 ià(
couÁ
 > 0 && *
pE¼ÜCode
 =ğ
U_TRUNCATED_CHAR_FOUND
) {

3903 
couÁ
--;

3905 
couÁ
>0) {

3906 *
off£ts
++=
sourûIndex
++;

3907 --
couÁ
;

3912 
úv
->
äomUCh¬32
=
c
;

3915 
pArgs
->
sourû
=source;

3916 
pArgs
->
rg‘
=(*)target;

3917 
pArgs
->
off£ts
=offsets;

3918 
	}
}

3920 
U_CFUNC
 

3921 
	$uúv_MBCSFromUnicodeW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

3922 
UE¼ÜCode
 *
pE¼ÜCode
) {

3923 
UCÚv”‹r
 *
úv
;

3924 cÚ¡ 
UCh¬
 *
sourû
, *
sourûLim™
;

3925 
ušt8_t
 *
rg‘
;

3926 
št32_t
 
rg‘C­ac™y
;

3927 
št32_t
 *
off£ts
;

3929 cÚ¡ 
ušt16_t
 *
bË
;

3930 cÚ¡ 
ušt16_t
 *
mbcsIndex
;

3931 cÚ¡ 
ušt8_t
 *
p
, *
by‹s
;

3932 
ušt8_t
 
ouutTy³
;

3934 
UCh¬32
 
c
;

3936 
št32_t
 
´evSourûIndex
, 
sourûIndex
, 
ÃxtSourûIndex
;

3938 
ušt32_t
 
¡age2EÁry
;

3939 
ušt32_t
 
asciiRoundŒs
;

3940 
ušt32_t
 
v®ue
;

3941 
ušt8_t
 
si_v®ue
[2] = {0, 0};

3942 
ušt8_t
 
so_v®ue
[2] = {0, 0};

3943 
ušt8_t
 
si_v®ue_Ëngth
, 
so_v®ue_Ëngth
;

3944 
št32_t
 
Ëngth
 = 0, 
´evL’gth
;

3945 
ušt8_t
 
unicodeMask
;

3947 
úv
=
pArgs
->
cÚv”‹r
;

3949 if(
úv
->
´eFromUFœ¡CP
>=0) {

3954 
	`uúv_extCÚtšueM©chFromU
(
úv
, 
pArgs
, -1, 
pE¼ÜCode
);

3956 if(
	`U_FAILURE
(*
pE¼ÜCode
è|| 
úv
->
´eFromUL’gth
<0) {

3962 
ouutTy³
=
úv
->
sh¬edD©a
->
mbcs
.outputType;

3963 
unicodeMask
=
úv
->
sh¬edD©a
->
mbcs
.unicodeMask;

3964 if(
ouutTy³
==
MBCS_OUTPUT_1
 && !(
unicodeMask
&
UCNV_HAS_SURROGATES
)) {

3965 if(!(
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
)) {

3966 
	`uúv_MBCSSšgËFromBMPW™hOff£ts
(
pArgs
, 
pE¼ÜCode
);

3968 
	`uúv_MBCSSšgËFromUnicodeW™hOff£ts
(
pArgs
, 
pE¼ÜCode
);

3971 } if(
ouutTy³
==
MBCS_OUTPUT_2
 && 
úv
->
sh¬edD©a
->
mbcs
.
utf8Fr›ndly
) {

3972 
	`uúv_MBCSDoubËFromUnicodeW™hOff£ts
(
pArgs
, 
pE¼ÜCode
);

3977 
sourû
=
pArgs
->source;

3978 
sourûLim™
=
pArgs
->sourceLimit;

3979 
rg‘
=(
ušt8_t
 *)
pArgs
->target;

3980 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

3981 
off£ts
=
pArgs
->offsets;

3983 
bË
=
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeTabË
;

3984 if(
úv
->
sh¬edD©a
->
mbcs
.
utf8Fr›ndly
) {

3985 
mbcsIndex
=
úv
->
sh¬edD©a
->
mbcs
.mbcsIndex;

3987 
mbcsIndex
=
NULL
;

3989 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

3990 
by‹s
=
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLFromUnicodeBy‹s
;

3992 
by‹s
=
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
;

3994 
asciiRoundŒs
=
úv
->
sh¬edD©a
->
mbcs
.asciiRoundtrips;

3997 
c
=
úv
->
äomUCh¬32
;

3999 if(
ouutTy³
==
MBCS_OUTPUT_2_SISO
) {

4000 
´evL’gth
=
úv
->
äomUnicodeStus
;

4001 if(
´evL’gth
==0) {

4003 
´evL’gth
=1;

4007 
´evL’gth
=0;

4011 
´evSourûIndex
=-1;

4012 
sourûIndex
ğ
c
==0 ? 0 : -1;

4013 
ÃxtSourûIndex
=0;

4016 
si_v®ue_Ëngth
 = 
	`g‘SISOBy‹s
(
SI
, 
úv
->
İtiÚs
, 
si_v®ue
);

4017 
so_v®ue_Ëngth
 = 
	`g‘SISOBy‹s
(
SO
, 
úv
->
İtiÚs
, 
so_v®ue
);

4033 if(
c
!=0 && 
rg‘C­ac™y
>0) {

4034 
g‘T¿
;

4037 
sourû
<
sourûLim™
) {

4046 if(
rg‘C­ac™y
>0) {

4052 
c
=*
sourû
++;

4053 ++
ÃxtSourûIndex
;

4054 if(
c
<=0x7à&& 
	`IS_ASCII_ROUNDTRIP
(c, 
asciiRoundŒs
)) {

4055 *
rg‘
++=(
ušt8_t
)
c
;

4056 if(
off£ts
!=
NULL
) {

4057 *
off£ts
++=
sourûIndex
;

4058 
´evSourûIndex
=
sourûIndex
;

4059 
sourûIndex
=
ÃxtSourûIndex
;

4061 --
rg‘C­ac™y
;

4062 
c
=0;

4070 if(
c
<=0xd7fà&& 
mbcsIndex
!=
NULL
) {

4071 
v®ue
=
mbcsIndex
[
c
>>6];

4075 
ouutTy³
) {

4076 
MBCS_OUTPUT_2
:

4077 
v®ue
=((cÚ¡ 
ušt16_t
 *)
by‹s
)[v®u+(
c
&0x3f)];

4078 if(
v®ue
<=0xff) {

4079 if(
v®ue
==0) {

4080 
uÇssigÃd
;

4082 
Ëngth
=1;

4085 
Ëngth
=2;

4088 
MBCS_OUTPUT_2_SISO
:

4099 
úv
->
äomUnicodeStus
=
´evL’gth
;

4100 
v®ue
=((cÚ¡ 
ušt16_t
 *)
by‹s
)[v®u+(
c
&0x3f)];

4101 if(
v®ue
<=0xff) {

4102 if(
v®ue
==0) {

4103 
uÇssigÃd
;

4104 } if(
´evL’gth
<=1) {

4105 
Ëngth
=1;

4108 ià(
si_v®ue_Ëngth
 == 1) {

4109 
v®ue
|=(
ušt32_t
)
si_v®ue
[0]<<8;

4110 
Ëngth
 = 2;

4111 } ià(
si_v®ue_Ëngth
 == 2) {

4112 
v®ue
|=(
ušt32_t
)
si_v®ue
[1]<<8;

4113 
v®ue
|=(
ušt32_t
)
si_v®ue
[0]<<16;

4114 
Ëngth
 = 3;

4116 
´evL’gth
=1;

4119 if(
´evL’gth
==2) {

4120 
Ëngth
=2;

4123 ià(
so_v®ue_Ëngth
 == 1) {

4124 
v®ue
|=(
ušt32_t
)
so_v®ue
[0]<<16;

4125 
Ëngth
 = 3;

4126 } ià(
so_v®ue_Ëngth
 == 2) {

4127 
v®ue
|=(
ušt32_t
)
so_v®ue
[1]<<16;

4128 
v®ue
|=(
ušt32_t
)
so_v®ue
[0]<<24;

4129 
Ëngth
 = 4;

4131 
´evL’gth
=2;

4135 
MBCS_OUTPUT_DBCS_ONLY
:

4137 
v®ue
=((cÚ¡ 
ušt16_t
 *)
by‹s
)[v®u+(
c
&0x3f)];

4138 if(
v®ue
<=0xff) {

4140 
uÇssigÃd
;

4142 
Ëngth
=2;

4145 
MBCS_OUTPUT_3
:

4146 
p
=
by‹s
+(
v®ue
+(
c
&0x3f))*3;

4147 
v®ue
=((
ušt32_t
)*
p
<<16)|((uint32_t)p[1]<<8)|p[2];

4148 if(
v®ue
<=0xff) {

4149 if(
v®ue
==0) {

4150 
uÇssigÃd
;

4152 
Ëngth
=1;

4154 } if(
v®ue
<=0xffff) {

4155 
Ëngth
=2;

4157 
Ëngth
=3;

4160 
MBCS_OUTPUT_4
:

4161 
v®ue
=((cÚ¡ 
ušt32_t
 *)
by‹s
)[v®u+(
c
&0x3f)];

4162 if(
v®ue
<=0xff) {

4163 if(
v®ue
==0) {

4164 
uÇssigÃd
;

4166 
Ëngth
=1;

4168 } if(
v®ue
<=0xffff) {

4169 
Ëngth
=2;

4170 } if(
v®ue
<=0xffffff) {

4171 
Ëngth
=3;

4173 
Ëngth
=4;

4176 
MBCS_OUTPUT_3_EUC
:

4177 
v®ue
=((cÚ¡ 
ušt16_t
 *)
by‹s
)[v®u+(
c
&0x3f)];

4179 if(
v®ue
<=0xff) {

4180 if(
v®ue
==0) {

4181 
uÇssigÃd
;

4183 
Ëngth
=1;

4185 } if((
v®ue
&0x8000)==0) {

4186 
v®ue
|=0x8e8000;

4187 
Ëngth
=3;

4188 } if((
v®ue
&0x80)==0) {

4189 
v®ue
|=0x8f0080;

4190 
Ëngth
=3;

4192 
Ëngth
=2;

4195 
MBCS_OUTPUT_4_EUC
:

4196 
p
=
by‹s
+(
v®ue
+(
c
&0x3f))*3;

4197 
v®ue
=((
ušt32_t
)*
p
<<16)|((uint32_t)p[1]<<8)|p[2];

4199 if(
v®ue
<=0xff) {

4200 if(
v®ue
==0) {

4201 
uÇssigÃd
;

4203 
Ëngth
=1;

4205 } if(
v®ue
<=0xffff) {

4206 
Ëngth
=2;

4207 } if((
v®ue
&0x800000)==0) {

4208 
v®ue
|=0x8e800000;

4209 
Ëngth
=4;

4210 } if((
v®ue
&0x8000)==0) {

4211 
v®ue
|=0x8f008000;

4212 
Ëngth
=4;

4214 
Ëngth
=3;

4226 
v®ue
=0;

4227 
Ëngth
=0;

4237 if(
	`UTF_IS_SURROGATE
(
c
è&& !(
unicodeMask
&
UCNV_HAS_SURROGATES
)) {

4238 if(
	`UTF_IS_SURROGATE_FIRST
(
c
)) {

4239 
g‘T¿
:

4240 if(
sourû
<
sourûLim™
) {

4242 
UCh¬
 
Œa
=*
sourû
;

4243 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

4244 ++
sourû
;

4245 ++
ÃxtSourûIndex
;

4246 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
Œa
);

4247 if(!(
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
)) {

4249 
úv
->
äomUnicodeStus
=
´evL’gth
;

4251 
uÇssigÃd
;

4258 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

4268 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

4307 
¡age2EÁry
=
	`MBCS_STAGE_2_FROM_U
(
bË
, 
c
);

4310 
ouutTy³
) {

4311 
MBCS_OUTPUT_2
:

4312 
v®ue
=
	`MBCS_VALUE_2_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
c
);

4313 if(
v®ue
<=0xff) {

4314 
Ëngth
=1;

4316 
Ëngth
=2;

4319 
MBCS_OUTPUT_2_SISO
:

4330 
úv
->
äomUnicodeStus
=
´evL’gth
;

4331 
v®ue
=
	`MBCS_VALUE_2_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
c
);

4332 if(
v®ue
<=0xff) {

4333 if(
v®ue
==0 && 
	`MBCS_FROM_U_IS_ROUNDTRIP
(
¡age2EÁry
, 
c
)==0) {

4335 
Ëngth
=0;

4336 } if(
´evL’gth
<=1) {

4337 
Ëngth
=1;

4340 ià(
si_v®ue_Ëngth
 == 1) {

4341 
v®ue
|=(
ušt32_t
)
si_v®ue
[0]<<8;

4342 
Ëngth
 = 2;

4343 } ià(
si_v®ue_Ëngth
 == 2) {

4344 
v®ue
|=(
ušt32_t
)
si_v®ue
[1]<<8;

4345 
v®ue
|=(
ušt32_t
)
si_v®ue
[0]<<16;

4346 
Ëngth
 = 3;

4348 
´evL’gth
=1;

4351 if(
´evL’gth
==2) {

4352 
Ëngth
=2;

4355 ià(
so_v®ue_Ëngth
 == 1) {

4356 
v®ue
|=(
ušt32_t
)
so_v®ue
[0]<<16;

4357 
Ëngth
 = 3;

4358 } ià(
so_v®ue_Ëngth
 == 2) {

4359 
v®ue
|=(
ušt32_t
)
so_v®ue
[1]<<16;

4360 
v®ue
|=(
ušt32_t
)
so_v®ue
[0]<<24;

4361 
Ëngth
 = 4;

4363 
´evL’gth
=2;

4367 
MBCS_OUTPUT_DBCS_ONLY
:

4369 
v®ue
=
	`MBCS_VALUE_2_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
c
);

4370 if(
v®ue
<=0xff) {

4372 
v®ue
=
¡age2EÁry
=0;

4373 
Ëngth
=0;

4375 
Ëngth
=2;

4378 
MBCS_OUTPUT_3
:

4379 
p
=
	`MBCS_POINTER_3_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
c
);

4380 
v®ue
=((
ušt32_t
)*
p
<<16)|((uint32_t)p[1]<<8)|p[2];

4381 if(
v®ue
<=0xff) {

4382 
Ëngth
=1;

4383 } if(
v®ue
<=0xffff) {

4384 
Ëngth
=2;

4386 
Ëngth
=3;

4389 
MBCS_OUTPUT_4
:

4390 
v®ue
=
	`MBCS_VALUE_4_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
c
);

4391 if(
v®ue
<=0xff) {

4392 
Ëngth
=1;

4393 } if(
v®ue
<=0xffff) {

4394 
Ëngth
=2;

4395 } if(
v®ue
<=0xffffff) {

4396 
Ëngth
=3;

4398 
Ëngth
=4;

4401 
MBCS_OUTPUT_3_EUC
:

4402 
v®ue
=
	`MBCS_VALUE_2_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
c
);

4404 if(
v®ue
<=0xff) {

4405 
Ëngth
=1;

4406 } if((
v®ue
&0x8000)==0) {

4407 
v®ue
|=0x8e8000;

4408 
Ëngth
=3;

4409 } if((
v®ue
&0x80)==0) {

4410 
v®ue
|=0x8f0080;

4411 
Ëngth
=3;

4413 
Ëngth
=2;

4416 
MBCS_OUTPUT_4_EUC
:

4417 
p
=
	`MBCS_POINTER_3_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
c
);

4418 
v®ue
=((
ušt32_t
)*
p
<<16)|((uint32_t)p[1]<<8)|p[2];

4420 if(
v®ue
<=0xff) {

4421 
Ëngth
=1;

4422 } if(
v®ue
<=0xffff) {

4423 
Ëngth
=2;

4424 } if((
v®ue
&0x800000)==0) {

4425 
v®ue
|=0x8e800000;

4426 
Ëngth
=4;

4427 } if((
v®ue
&0x8000)==0) {

4428 
v®ue
|=0x8f008000;

4429 
Ëngth
=4;

4431 
Ëngth
=3;

4443 
v®ue
=
¡age2EÁry
=0;

4444 
Ëngth
=0;

4449 if(!(
	`MBCS_FROM_U_IS_ROUNDTRIP
(
¡age2EÁry
, 
c
)!=0 ||

4450 (
	`UCNV_FROM_U_USE_FALLBACK
(
úv
, 
c
è&& 
v®ue
!=0))

4458 
uÇssigÃd
:

4460 
pArgs
->
sourû
=source;

4461 
c
=
	`_extFromU
(
úv
, cnv->
sh¬edD©a
,

4462 
c
, &
sourû
, 
sourûLim™
,

4463 &
rg‘
,¬g‘+
rg‘C­ac™y
,

4464 &
off£ts
, 
sourûIndex
,

4465 
pArgs
->
æush
,

4466 
pE¼ÜCode
);

4467 
ÃxtSourûIndex
+=(
št32_t
)(
sourû
-
pArgs
->source);

4468 
´evL’gth
=
úv
->
äomUnicodeStus
;

4470 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

4477 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-(*)
rg‘
);

4480 if(
off£ts
!=
NULL
) {

4481 
´evSourûIndex
=
sourûIndex
;

4482 
sourûIndex
=
ÃxtSourûIndex
;

4491 if(
Ëngth
<=
rg‘C­ac™y
) {

4492 if(
off£ts
==
NULL
) {

4493 
Ëngth
) {

4496 *
rg‘
++=(
ušt8_t
)(
v®ue
>>24);

4498 *
rg‘
++=(
ušt8_t
)(
v®ue
>>16);

4500 *
rg‘
++=(
ušt8_t
)(
v®ue
>>8);

4502 *
rg‘
++=(
ušt8_t
)
v®ue
;

4508 
Ëngth
) {

4511 *
rg‘
++=(
ušt8_t
)(
v®ue
>>24);

4512 *
off£ts
++=
sourûIndex
;

4514 *
rg‘
++=(
ušt8_t
)(
v®ue
>>16);

4515 *
off£ts
++=
sourûIndex
;

4517 *
rg‘
++=(
ušt8_t
)(
v®ue
>>8);

4518 *
off£ts
++=
sourûIndex
;

4520 *
rg‘
++=(
ušt8_t
)
v®ue
;

4521 *
off£ts
++=
sourûIndex
;

4527 
rg‘C­ac™y
-=
Ëngth
;

4529 
ušt8_t
 *
ch¬E¼ÜBufãr
;

4538 
Ëngth
-=
rg‘C­ac™y
;

4539 
ch¬E¼ÜBufãr
=(
ušt8_t
 *)
úv
->charErrorBuffer;

4540 
Ëngth
) {

4543 *
ch¬E¼ÜBufãr
++=(
ušt8_t
)(
v®ue
>>16);

4545 *
ch¬E¼ÜBufãr
++=(
ušt8_t
)(
v®ue
>>8);

4547 *
ch¬E¼ÜBufãr
=(
ušt8_t
)
v®ue
;

4552 
úv
->
ch¬E¼ÜBufãrL’gth
=(
št8_t
)
Ëngth
;

4555 
v®ue
>>=8*
Ëngth
;

4556 
rg‘C­ac™y
) {

4559 *
rg‘
++=(
ušt8_t
)(
v®ue
>>16);

4560 if(
off£ts
!=
NULL
) {

4561 *
off£ts
++=
sourûIndex
;

4564 *
rg‘
++=(
ušt8_t
)(
v®ue
>>8);

4565 if(
off£ts
!=
NULL
) {

4566 *
off£ts
++=
sourûIndex
;

4569 *
rg‘
++=(
ušt8_t
)
v®ue
;

4570 if(
off£ts
!=
NULL
) {

4571 *
off£ts
++=
sourûIndex
;

4579 
rg‘C­ac™y
=0;

4580 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

4581 
c
=0;

4586 
c
=0;

4587 if(
off£ts
!=
NULL
) {

4588 
´evSourûIndex
=
sourûIndex
;

4589 
sourûIndex
=
ÃxtSourûIndex
;

4594 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

4609 ifĞ
	`U_SUCCESS
(*
pE¼ÜCode
) &&

4610 
ouutTy³
==
MBCS_OUTPUT_2_SISO
 && 
´evL’gth
==2 &&

4611 
pArgs
->
æush
 && 
sourû
>=
sourûLim™
 && 
c
==0

4614 if(
rg‘C­ac™y
>0) {

4615 *
rg‘
++=(
ušt8_t
)
si_v®ue
[0];

4616 ià(
si_v®ue_Ëngth
 == 2) {

4617 ià(
rg‘C­ac™y
<2) {

4618 
úv
->
ch¬E¼ÜBufãr
[0]=(
ušt8_t
)
si_v®ue
[1];

4619 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

4620 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

4622 *
rg‘
++=(
ušt8_t
)
si_v®ue
[1];

4625 if(
off£ts
!=
NULL
) {

4627 *
off£ts
++=
´evSourûIndex
;

4631 
úv
->
ch¬E¼ÜBufãr
[0]=(
ušt8_t
)
si_v®ue
[0];

4632 ià(
si_v®ue_Ëngth
 == 2) {

4633 
úv
->
ch¬E¼ÜBufãr
[1]=(
ušt8_t
)
si_v®ue
[1];

4635 
úv
->
ch¬E¼ÜBufãrL’gth
=
si_v®ue_Ëngth
;

4636 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

4638 
´evL’gth
=1;

4642 
úv
->
äomUCh¬32
=
c
;

4643 
úv
->
äomUnicodeStus
=
´evL’gth
;

4646 
pArgs
->
sourû
=source;

4647 
pArgs
->
rg‘
=(*)target;

4648 
pArgs
->
off£ts
=offsets;

4649 
	}
}

4668 
U_CFUNC
 
št32_t


4669 
	$uúv_MBCSFromUCh¬32
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

4670 
UCh¬32
 
c
, 
ušt32_t
 *
pV®ue
,

4671 
UBoŞ
 
u£F®lback
) {

4672 cÚ¡ 
št32_t
 *
cx
;

4673 cÚ¡ 
ušt16_t
 *
bË
;

4676 cÚ¡ 
ušt8_t
 *
p
;

4678 
ušt32_t
 
¡age2EÁry
;

4679 
ušt32_t
 
v®ue
;

4680 
št32_t
 
Ëngth
;

4683 if(
c
<=0xfffà|| (
sh¬edD©a
->
mbcs
.
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
)) {

4684 
bË
=
sh¬edD©a
->
mbcs
.
äomUnicodeTabË
;

4687 if(
sh¬edD©a
->
mbcs
.
ouutTy³
==
MBCS_OUTPUT_1
) {

4688 
v®ue
=
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, (
ušt16_t
 *)
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
, 
c
);

4690 if(
u£F®lback
 ? 
v®ue
>=0x800 : value>=0xc00) {

4691 *
pV®ue
=
v®ue
&0xff;

4695 
¡age2EÁry
=
	`MBCS_STAGE_2_FROM_U
(
bË
, 
c
);

4698 
sh¬edD©a
->
mbcs
.
ouutTy³
) {

4699 
MBCS_OUTPUT_2
:

4700 
v®ue
=
	`MBCS_VALUE_2_FROM_STAGE_2
(
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
, 
¡age2EÁry
, 
c
);

4701 if(
v®ue
<=0xff) {

4702 
Ëngth
=1;

4704 
Ëngth
=2;

4709 
MBCS_OUTPUT_DBCS_ONLY
:

4711 
v®ue
=
	`MBCS_VALUE_2_FROM_STAGE_2
(
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
, 
¡age2EÁry
, 
c
);

4712 if(
v®ue
<=0xff) {

4714 
v®ue
=
¡age2EÁry
=0;

4715 
Ëngth
=0;

4717 
Ëngth
=2;

4720 
MBCS_OUTPUT_3
:

4721 
p
=
	`MBCS_POINTER_3_FROM_STAGE_2
(
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
, 
¡age2EÁry
, 
c
);

4722 
v®ue
=((
ušt32_t
)*
p
<<16)|((uint32_t)p[1]<<8)|p[2];

4723 if(
v®ue
<=0xff) {

4724 
Ëngth
=1;

4725 } if(
v®ue
<=0xffff) {

4726 
Ëngth
=2;

4728 
Ëngth
=3;

4731 
MBCS_OUTPUT_4
:

4732 
v®ue
=
	`MBCS_VALUE_4_FROM_STAGE_2
(
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
, 
¡age2EÁry
, 
c
);

4733 if(
v®ue
<=0xff) {

4734 
Ëngth
=1;

4735 } if(
v®ue
<=0xffff) {

4736 
Ëngth
=2;

4737 } if(
v®ue
<=0xffffff) {

4738 
Ëngth
=3;

4740 
Ëngth
=4;

4743 
MBCS_OUTPUT_3_EUC
:

4744 
v®ue
=
	`MBCS_VALUE_2_FROM_STAGE_2
(
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
, 
¡age2EÁry
, 
c
);

4746 if(
v®ue
<=0xff) {

4747 
Ëngth
=1;

4748 } if((
v®ue
&0x8000)==0) {

4749 
v®ue
|=0x8e8000;

4750 
Ëngth
=3;

4751 } if((
v®ue
&0x80)==0) {

4752 
v®ue
|=0x8f0080;

4753 
Ëngth
=3;

4755 
Ëngth
=2;

4758 
MBCS_OUTPUT_4_EUC
:

4759 
p
=
	`MBCS_POINTER_3_FROM_STAGE_2
(
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
, 
¡age2EÁry
, 
c
);

4760 
v®ue
=((
ušt32_t
)*
p
<<16)|((uint32_t)p[1]<<8)|p[2];

4762 if(
v®ue
<=0xff) {

4763 
Ëngth
=1;

4764 } if(
v®ue
<=0xffff) {

4765 
Ëngth
=2;

4766 } if((
v®ue
&0x800000)==0) {

4767 
v®ue
|=0x8e800000;

4768 
Ëngth
=4;

4769 } if((
v®ue
&0x8000)==0) {

4770 
v®ue
|=0x8f008000;

4771 
Ëngth
=4;

4773 
Ëngth
=3;

4783 ifĞ
	`MBCS_FROM_U_IS_ROUNDTRIP
(
¡age2EÁry
, 
c
) ||

4784 (
	`FROM_U_USE_FALLBACK
(
u£F®lback
, 
c
è&& 
v®ue
!=0)

4792 *
pV®ue
=
v®ue
;

4793  
Ëngth
;

4798 
cx
=
sh¬edD©a
->
mbcs
.
extIndexes
;

4799 if(
cx
!=
NULL
) {

4800 
Ëngth
=
	`uúv_extSim¶eM©chFromU
(
cx
, 
c
, 
pV®ue
, 
u£F®lback
);

4801  
Ëngth
>=0 ?†ength : -length;

4806 
	}
}

4822 
U_CFUNC
 
št32_t


4823 
	$uúv_MBCSSšgËFromUCh¬32
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

4824 
UCh¬32
 
c
,

4825 
UBoŞ
 
u£F®lback
) {

4826 cÚ¡ 
ušt16_t
 *
bË
;

4827 
št32_t
 
v®ue
;

4830 if(
c
>=0x10000 && !(
sh¬edD©a
->
mbcs
.
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
)) {

4835 
bË
=
sh¬edD©a
->
mbcs
.
äomUnicodeTabË
;

4838 
v®ue
=
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, (
ušt16_t
 *)
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
, 
c
);

4840 if(
u£F®lback
 ? 
v®ue
>=0x800 : value>=0xc00) {

4841  
v®ue
&0xff;

4845 
	}
}

4851 cÚ¡ 
UCh¬32


4852 
	gutf8_mšLeg®
[5]={ 0, 0, 0x80, 0x800, 0x10000 };

4855 cÚ¡ 
UCh¬32


4856 
	gutf8_off£ts
[7]={ 0, 0, 0x3080, 0xE2080, 0x3C82080 };

4859 
	$uúv_SBCSFromUTF8
(
UCÚv”‹rFromUnicodeArgs
 *
pFromUArgs
,

4860 
UCÚv”‹rToUnicodeArgs
 *
pToUArgs
,

4861 
UE¼ÜCode
 *
pE¼ÜCode
) {

4862 
UCÚv”‹r
 *
utf8
, *
úv
;

4863 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

4864 
ušt8_t
 *
rg‘
;

4865 
št32_t
 
rg‘C­ac™y
;

4867 cÚ¡ 
ušt16_t
 *
bË
, *
sbcsIndex
;

4868 cÚ¡ 
ušt16_t
 *
»suÉs
;

4870 
št8_t
 
ŞdToUL’gth
, 
toUL’gth
, 
toULim™
;

4872 
UCh¬32
 
c
;

4873 
ušt8_t
 
b
, 
t1
, 
t2
;

4875 
ušt32_t
 
asciiRoundŒs
;

4876 
ušt16_t
 
v®ue
, 
mšV®ue
;

4877 
UBoŞ
 
hasSuµËm’ry
;

4880 
utf8
=
pToUArgs
->
cÚv”‹r
;

4881 
úv
=
pFromUArgs
->
cÚv”‹r
;

4882 
sourû
=(
ušt8_t
 *)
pToUArgs
->source;

4883 
sourûLim™
=(
ušt8_t
 *)
pToUArgs
->sourceLimit;

4884 
rg‘
=(
ušt8_t
 *)
pFromUArgs
->target;

4885 
rg‘C­ac™y
=(
št32_t
)(
pFromUArgs
->
rg‘Lim™
-pFromUArgs->
rg‘
);

4887 
bË
=
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeTabË
;

4888 
sbcsIndex
=
úv
->
sh¬edD©a
->
mbcs
.sbcsIndex;

4889 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

4890 
»suÉs
=(
ušt16_t
 *)
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLFromUnicodeBy‹s
;

4892 
»suÉs
=(
ušt16_t
 *)
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
;

4894 
asciiRoundŒs
=
úv
->
sh¬edD©a
->
mbcs
.asciiRoundtrips;

4896 if(
úv
->
u£F®lback
) {

4898 
mšV®ue
=0x800;

4901 
mšV®ue
=0xc00;

4903 
hasSuµËm’ry
=(
UBoŞ
)(
úv
->
sh¬edD©a
->
mbcs
.
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
);

4906 
c
=(
UCh¬32
)
utf8
->
toUnicodeStus
;

4907 if(
c
!=0) {

4908 
toUL’gth
=
ŞdToUL’gth
=
utf8
->toULength;

4909 
toULim™
=(
št8_t
)
utf8
->
mode
;

4911 
toUL’gth
=
ŞdToUL’gth
=
toULim™
=0;

4923 
št32_t
 
i
, 
Ëngth
;

4925 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
è- (
toULim™
-
ŞdToUL’gth
);

4926 
i
=0; i<3 && i<
Ëngth
;) {

4927 
b
=*(
sourûLim™
-
i
-1);

4928 if(
	`U8_IS_TRAIL
(
b
)) {

4929 ++
i
;

4931 if(
i
<
utf8_couÁT¿By‹s
[
b
]) {

4933 
sourûLim™
-=
i
+1;

4940 if(
c
!=0 && 
rg‘C­ac™y
>0) {

4941 
utf8
->
toUnicodeStus
=0;

4942 
utf8
->
toUL’gth
=0;

4943 
mÜeBy‹s
;

4966 
sourû
<
sourûLim™
) {

4967 if(
rg‘C­ac™y
>0) {

4968 
b
=*
sourû
++;

4969 if((
št8_t
)
b
>=0) {

4971 if(
	`IS_ASCII_ROUNDTRIP
(
b
, 
asciiRoundŒs
)) {

4972 *
rg‘
++=(
ušt8_t
)
b
;

4973 --
rg‘C­ac™y
;

4976 
c
=
b
;

4977 
v®ue
=
	`SBCS_RESULT_FROM_UTF8
(
sbcsIndex
, 
»suÉs
, 0, 
c
);

4980 if(
b
<0xe0) {

4982 
b
>=0xc2 &&

4983 (
t1
=(
ušt8_t
)(*
sourû
-0x80)) <= 0x3f

4985 
c
=
b
&0x1f;

4986 ++
sourû
;

4987 
v®ue
=
	`SBCS_RESULT_FROM_UTF8
(
sbcsIndex
, 
»suÉs
, 
c
, 
t1
);

4988 if(
v®ue
>=
mšV®ue
) {

4989 *
rg‘
++=(
ušt8_t
)
v®ue
;

4990 --
rg‘C­ac™y
;

4993 
c
=(c<<6)|
t1
;

4996 
c
=-1;

4998 } if(
b
==0xe0) {

5000 (
t1
=(
ušt8_t
)(
sourû
[0]-0x80)) <= 0x3f &&1 >= 0x20 &&

5001 (
t2
=(
ušt8_t
)(
sourû
[1]-0x80)) <= 0x3f

5003 
c
=
t1
;

5004 
sourû
+=2;

5005 
v®ue
=
	`SBCS_RESULT_FROM_UTF8
(
sbcsIndex
, 
»suÉs
, 
c
, 
t2
);

5006 if(
v®ue
>=
mšV®ue
) {

5007 *
rg‘
++=(
ušt8_t
)
v®ue
;

5008 --
rg‘C­ac™y
;

5011 
c
=(c<<6)|
t2
;

5014 
c
=-1;

5017 
c
=-1;

5020 if(
c
<0) {

5022 
ŞdToUL’gth
=0;

5023 
toUL’gth
=1;

5024 
toULim™
=
utf8_couÁT¿By‹s
[
b
]+1;

5025 
c
=
b
;

5026 
mÜeBy‹s
:

5027 
toUL’gth
<
toULim™
) {

5035 if(
sourû
<(
ušt8_t
 *)
pToUArgs
->
sourûLim™
) {

5036 
b
=*
sourû
;

5037 if(
	`U8_IS_TRAIL
(
b
)) {

5038 ++
sourû
;

5039 ++
toUL’gth
;

5040 
c
=(c<<6)+
b
;

5046 
sourû
-=(
toUL’gth
-
ŞdToUL’gth
);

5047 
ŞdToUL’gth
<
toUL’gth
) {

5048 
utf8
->
toUBy‹s
[
ŞdToUL’gth
++]=*
sourû
++;

5050 
utf8
->
toUnicodeStus
=
c
;

5051 
utf8
->
toUL’gth
=toULength;

5052 
utf8
->
mode
=
toULim™
;

5053 
pToUArgs
->
sourû
=(*)source;

5054 
pFromUArgs
->
rg‘
=(*)target;

5059 ifĞ
toUL’gth
==
toULim™
 &&

5060 (
toUL’gth
==3 ||oULength==2) &&

5061 (
c
-=
utf8_off£ts
[
toUL’gth
])>=
utf8_mšLeg®
[toULength] &&

5062 (
c
<=0xd7ff || 0xe000<=c)

5064 
v®ue
=
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
»suÉs
, 
c
);

5066 
toUL’gth
==
toULim™
 &&oULength==4 &&

5067 (0x10000<=(
c
-=
utf8_off£ts
[4]) && c<=0x10ffff)

5070 if(!
hasSuµËm’ry
) {

5072 
v®ue
=0;

5074 
v®ue
=
	`MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
»suÉs
, 
c
);

5078 
sourû
-=(
toUL’gth
-
ŞdToUL’gth
);

5079 
ŞdToUL’gth
<
toUL’gth
) {

5080 
utf8
->
toUBy‹s
[
ŞdToUL’gth
++]=*
sourû
++;

5082 
utf8
->
toUL’gth
=toULength;

5083 
pToUArgs
->
sourû
=(*)source;

5084 
pFromUArgs
->
rg‘
=(*)target;

5085 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

5091 if(
v®ue
>=
mšV®ue
) {

5093 *
rg‘
++=(
ušt8_t
)
v®ue
;

5094 --
rg‘C­ac™y
;

5103 cÚ¡ 
UCh¬
 
nul
=0;

5104 cÚ¡ 
UCh¬
 *
noSourû
=&
nul
;

5105 
c
=
	`_extFromU
(
úv
, cnv->
sh¬edD©a
,

5106 
c
, &
noSourû
,‚oSource,

5107 &
rg‘
,¬g‘+
rg‘C­ac™y
,

5108 
NULL
, -1,

5109 
pFromUArgs
->
æush
,

5110 
pE¼ÜCode
);

5112 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

5114 
úv
->
äomUCh¬32
=
c
;

5116 } if(
úv
->
´eFromUFœ¡CP
>=0) {

5128 
rg‘C­ac™y
=(
št32_t
)(
pFromUArgs
->
rg‘Lim™
-(*)
rg‘
);

5133 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

5143 if(
	`U_SUCCESS
(*
pE¼ÜCode
è&& 
sourû
<(
sourûLim™
=(
ušt8_t
 *)
pToUArgs
->sourceLimit)) {

5144 
c
=
utf8
->
toUBy‹s
[0]=
b
=*
sourû
++;

5145 
toUL’gth
=1;

5146 
toULim™
=
utf8_couÁT¿By‹s
[
b
]+1;

5147 
sourû
<
sourûLim™
) {

5148 
utf8
->
toUBy‹s
[
toUL’gth
++]=
b
=*
sourû
++;

5149 
c
=(c<<6)+
b
;

5151 
utf8
->
toUnicodeStus
=
c
;

5152 
utf8
->
toUL’gth
=toULength;

5153 
utf8
->
mode
=
toULim™
;

5157 
pToUArgs
->
sourû
=(*)source;

5158 
pFromUArgs
->
rg‘
=(*)target;

5159 
	}
}

5162 
	$uúv_DBCSFromUTF8
(
UCÚv”‹rFromUnicodeArgs
 *
pFromUArgs
,

5163 
UCÚv”‹rToUnicodeArgs
 *
pToUArgs
,

5164 
UE¼ÜCode
 *
pE¼ÜCode
) {

5165 
UCÚv”‹r
 *
utf8
, *
úv
;

5166 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

5167 
ušt8_t
 *
rg‘
;

5168 
št32_t
 
rg‘C­ac™y
;

5170 cÚ¡ 
ušt16_t
 *
bË
, *
mbcsIndex
;

5171 cÚ¡ 
ušt16_t
 *
»suÉs
;

5173 
št8_t
 
ŞdToUL’gth
, 
toUL’gth
, 
toULim™
;

5175 
UCh¬32
 
c
;

5176 
ušt8_t
 
b
, 
t1
, 
t2
;

5178 
ušt32_t
 
¡age2EÁry
;

5179 
ušt32_t
 
asciiRoundŒs
;

5180 
ušt16_t
 
v®ue
, 
mšV®ue
;

5181 
UBoŞ
 
hasSuµËm’ry
;

5184 
utf8
=
pToUArgs
->
cÚv”‹r
;

5185 
úv
=
pFromUArgs
->
cÚv”‹r
;

5186 
sourû
=(
ušt8_t
 *)
pToUArgs
->source;

5187 
sourûLim™
=(
ušt8_t
 *)
pToUArgs
->sourceLimit;

5188 
rg‘
=(
ušt8_t
 *)
pFromUArgs
->target;

5189 
rg‘C­ac™y
=(
št32_t
)(
pFromUArgs
->
rg‘Lim™
-pFromUArgs->
rg‘
);

5191 
bË
=
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeTabË
;

5192 
mbcsIndex
=
úv
->
sh¬edD©a
->
mbcs
.mbcsIndex;

5193 if((
úv
->
İtiÚs
&
UCNV_OPTION_SWAP_LFNL
)!=0) {

5194 
»suÉs
=(
ušt16_t
 *)
úv
->
sh¬edD©a
->
mbcs
.
sw­LFNLFromUnicodeBy‹s
;

5196 
»suÉs
=(
ušt16_t
 *)
úv
->
sh¬edD©a
->
mbcs
.
äomUnicodeBy‹s
;

5198 
asciiRoundŒs
=
úv
->
sh¬edD©a
->
mbcs
.asciiRoundtrips;

5200 if(
úv
->
u£F®lback
) {

5202 
mšV®ue
=0x800;

5205 
mšV®ue
=0xc00;

5207 
hasSuµËm’ry
=(
UBoŞ
)(
úv
->
sh¬edD©a
->
mbcs
.
unicodeMask
&
UCNV_HAS_SUPPLEMENTARY
);

5210 
c
=(
UCh¬32
)
utf8
->
toUnicodeStus
;

5211 if(
c
!=0) {

5212 
toUL’gth
=
ŞdToUL’gth
=
utf8
->toULength;

5213 
toULim™
=(
št8_t
)
utf8
->
mode
;

5215 
toUL’gth
=
ŞdToUL’gth
=
toULim™
=0;

5227 
št32_t
 
i
, 
Ëngth
;

5229 
Ëngth
=(
št32_t
)(
sourûLim™
-
sourû
è- (
toULim™
-
ŞdToUL’gth
);

5230 
i
=0; i<3 && i<
Ëngth
;) {

5231 
b
=*(
sourûLim™
-
i
-1);

5232 if(
	`U8_IS_TRAIL
(
b
)) {

5233 ++
i
;

5235 if(
i
<
utf8_couÁT¿By‹s
[
b
]) {

5237 
sourûLim™
-=
i
+1;

5244 if(
c
!=0 && 
rg‘C­ac™y
>0) {

5245 
utf8
->
toUnicodeStus
=0;

5246 
utf8
->
toUL’gth
=0;

5247 
mÜeBy‹s
;

5252 
sourû
<
sourûLim™
) {

5253 if(
rg‘C­ac™y
>0) {

5254 
b
=*
sourû
++;

5255 if((
št8_t
)
b
>=0) {

5257 if(
	`IS_ASCII_ROUNDTRIP
(
b
, 
asciiRoundŒs
)) {

5258 *
rg‘
++=
b
;

5259 --
rg‘C­ac™y
;

5262 
v®ue
=
	`DBCS_RESULT_FROM_UTF8
(
mbcsIndex
, 
»suÉs
, 0, 
b
);

5263 if(
v®ue
==0) {

5264 
c
=
b
;

5265 
uÇssigÃd
;

5269 if(
b
>0xe0) {

5271 (((
t1
=(
ušt8_t
)(
sourû
[0]-0x80), 
b
<0xed) && (t1 <= 0x3f)) ||

5272 (
b
==0xed && (
t1
 <= 0x1f))) &&

5273 (
t2
=(
ušt8_t
)(
sourû
[1]-0x80)) <= 0x3f

5275 
c
=((
b
&0xf)<<6)|
t1
;

5276 
sourû
+=2;

5277 
v®ue
=
	`DBCS_RESULT_FROM_UTF8
(
mbcsIndex
, 
»suÉs
, 
c
, 
t2
);

5278 if(
v®ue
==0) {

5279 
c
=(c<<6)|
t2
;

5280 
uÇssigÃd
;

5283 
c
=-1;

5285 } if(
b
<0xe0) {

5287 
b
>=0xc2 &&

5288 (
t1
=(
ušt8_t
)(*
sourû
-0x80)) <= 0x3f

5290 
c
=
b
&0x1f;

5291 ++
sourû
;

5292 
v®ue
=
	`DBCS_RESULT_FROM_UTF8
(
mbcsIndex
, 
»suÉs
, 
c
, 
t1
);

5293 if(
v®ue
==0) {

5294 
c
=(c<<6)|
t1
;

5295 
uÇssigÃd
;

5298 
c
=-1;

5301 
c
=-1;

5304 if(
c
<0) {

5306 
ŞdToUL’gth
=0;

5307 
toUL’gth
=1;

5308 
toULim™
=
utf8_couÁT¿By‹s
[
b
]+1;

5309 
c
=
b
;

5310 
mÜeBy‹s
:

5311 
toUL’gth
<
toULim™
) {

5319 if(
sourû
<(
ušt8_t
 *)
pToUArgs
->
sourûLim™
) {

5320 
b
=*
sourû
;

5321 if(
	`U8_IS_TRAIL
(
b
)) {

5322 ++
sourû
;

5323 ++
toUL’gth
;

5324 
c
=(c<<6)+
b
;

5330 
sourû
-=(
toUL’gth
-
ŞdToUL’gth
);

5331 
ŞdToUL’gth
<
toUL’gth
) {

5332 
utf8
->
toUBy‹s
[
ŞdToUL’gth
++]=*
sourû
++;

5334 
utf8
->
toUnicodeStus
=
c
;

5335 
utf8
->
toUL’gth
=toULength;

5336 
utf8
->
mode
=
toULim™
;

5337 
pToUArgs
->
sourû
=(*)source;

5338 
pFromUArgs
->
rg‘
=(*)target;

5343 ifĞ
toUL’gth
==
toULim™
 &&

5344 (
toUL’gth
==3 ||oULength==2) &&

5345 (
c
-=
utf8_off£ts
[
toUL’gth
])>=
utf8_mšLeg®
[toULength] &&

5346 (
c
<=0xd7ff || 0xe000<=c)

5348 
¡age2EÁry
=
	`MBCS_STAGE_2_FROM_U
(
bË
, 
c
);

5350 
toUL’gth
==
toULim™
 &&oULength==4 &&

5351 (0x10000<=(
c
-=
utf8_off£ts
[4]) && c<=0x10ffff)

5354 if(!
hasSuµËm’ry
) {

5356 
¡age2EÁry
=0;

5358 
¡age2EÁry
=
	`MBCS_STAGE_2_FROM_U
(
bË
, 
c
);

5362 
sourû
-=(
toUL’gth
-
ŞdToUL’gth
);

5363 
ŞdToUL’gth
<
toUL’gth
) {

5364 
utf8
->
toUBy‹s
[
ŞdToUL’gth
++]=*
sourû
++;

5366 
utf8
->
toUL’gth
=toULength;

5367 
pToUArgs
->
sourû
=(*)source;

5368 
pFromUArgs
->
rg‘
=(*)target;

5369 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

5375 
v®ue
=
	`MBCS_VALUE_2_FROM_STAGE_2
(
»suÉs
, 
¡age2EÁry
, 
c
);

5378 if(!(
	`MBCS_FROM_U_IS_ROUNDTRIP
(
¡age2EÁry
, 
c
) ||

5379 (
	`UCNV_FROM_U_USE_FALLBACK
(
úv
, 
c
è&& 
v®ue
!=0))

5381 
uÇssigÃd
;

5388 if(
v®ue
<=0xff) {

5390 *
rg‘
++=(
ušt8_t
)
v®ue
;

5391 --
rg‘C­ac™y
;

5393 *
rg‘
++=(
ušt8_t
)(
v®ue
>>8);

5394 if(2<=
rg‘C­ac™y
) {

5395 *
rg‘
++=(
ušt8_t
)
v®ue
;

5396 
rg‘C­ac™y
-=2;

5398 
úv
->
ch¬E¼ÜBufãr
[0]=()
v®ue
;

5399 
úv
->
ch¬E¼ÜBufãrL’gth
=1;

5402 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

5408 
uÇssigÃd
:

5416 cÚ¡ 
UCh¬
 
nul
=0;

5417 cÚ¡ 
UCh¬
 *
noSourû
=&
nul
;

5418 
c
=
	`_extFromU
(
úv
, cnv->
sh¬edD©a
,

5419 
c
, &
noSourû
,‚oSource,

5420 &
rg‘
,¬g‘+
rg‘C­ac™y
,

5421 
NULL
, -1,

5422 
pFromUArgs
->
æush
,

5423 
pE¼ÜCode
);

5425 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

5427 
úv
->
äomUCh¬32
=
c
;

5429 } if(
úv
->
´eFromUFœ¡CP
>=0) {

5441 
rg‘C­ac™y
=(
št32_t
)(
pFromUArgs
->
rg‘Lim™
-(*)
rg‘
);

5447 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

5457 if(
	`U_SUCCESS
(*
pE¼ÜCode
è&& 
sourû
<(
sourûLim™
=(
ušt8_t
 *)
pToUArgs
->sourceLimit)) {

5458 
c
=
utf8
->
toUBy‹s
[0]=
b
=*
sourû
++;

5459 
toUL’gth
=1;

5460 
toULim™
=
utf8_couÁT¿By‹s
[
b
]+1;

5461 
sourû
<
sourûLim™
) {

5462 
utf8
->
toUBy‹s
[
toUL’gth
++]=
b
=*
sourû
++;

5463 
c
=(c<<6)+
b
;

5465 
utf8
->
toUnicodeStus
=
c
;

5466 
utf8
->
toUL’gth
=toULength;

5467 
utf8
->
mode
=
toULim™
;

5471 
pToUArgs
->
sourû
=(*)source;

5472 
pFromUArgs
->
rg‘
=(*)target;

5473 
	}
}

5478 
	$uúv_MBCSG‘S¹”s
(cÚ¡ 
UCÚv”‹r
* 
úv
,

5479 
UBoŞ
 
¡¬‹rs
[256],

5480 
UE¼ÜCode
 *
pE¼ÜCode
) {

5481 cÚ¡ 
št32_t
 *
¡©e0
;

5482 
i
;

5484 
¡©e0
=
úv
->
sh¬edD©a
->
mbcs
.
¡©eTabË
[úv->sh¬edD©a->mbcs.
dbcsOÆyS‹
];

5485 
i
=0; i<256; ++i) {

5487 
¡¬‹rs
[
i
]ğ(
UBoŞ
)
	`MBCS_ENTRY_IS_TRANSITION
(
¡©e0
[i]);

5489 
	}
}

5495 
U_CFUNC
 
UBoŞ


5496 
	$uúv_MBCSIsL—dBy‹
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
, 
by‹
) {

5497  (
UBoŞ
)
	`MBCS_ENTRY_IS_TRANSITION
(
sh¬edD©a
->
mbcs
.
¡©eTabË
[0][(
ušt8_t
)
by‹
]);

5498 
	}
}

5501 
	$uúv_MBCSWr™eSub
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

5502 
št32_t
 
off£tIndex
,

5503 
UE¼ÜCode
 *
pE¼ÜCode
) {

5504 
UCÚv”‹r
 *
úv
=
pArgs
->
cÚv”‹r
;

5505 *
p
, *
subch¬
;

5506 
bufãr
[4];

5507 
št32_t
 
Ëngth
;

5510 ifĞ
úv
->
subCh¬1
!=0 &&

5511 (
úv
->
sh¬edD©a
->
mbcs
.
extIndexes
!=
NULL
 ?

5512 
úv
->
u£SubCh¬1
 :

5513 (
úv
->
šv®idUCh¬Bufãr
[0]<=0xff))

5516 
subch¬
=(*)&
úv
->
subCh¬1
;

5517 
Ëngth
=1;

5520 
subch¬
=(*)
úv
->
subCh¬s
;

5521 
Ëngth
=
úv
->
subCh¬L’
;

5525 
úv
->
u£SubCh¬1
=
FALSE
;

5527 ià(
úv
->
sh¬edD©a
->
mbcs
.
ouutTy³
 =ğ
MBCS_OUTPUT_2_SISO
) {

5528 
p
=
bufãr
;

5531 
Ëngth
) {

5533 if(
úv
->
äomUnicodeStus
==2) {

5535 
úv
->
äomUnicodeStus
=1;

5536 *
p
++=
UCNV_SI
;

5538 *
p
++=
subch¬
[0];

5541 if(
úv
->
äomUnicodeStus
<=1) {

5543 
úv
->
äomUnicodeStus
=2;

5544 *
p
++=
UCNV_SO
;

5546 *
p
++=
subch¬
[0];

5547 *
p
++=
subch¬
[1];

5550 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

5553 
subch¬
=
bufãr
;

5554 
Ëngth
=(
št32_t
)(
p
-
bufãr
);

5557 
	`uúv_cbFromUWr™eBy‹s
(
pArgs
, 
subch¬
, 
Ëngth
, 
off£tIndex
, 
pE¼ÜCode
);

5558 
	}
}

5560 
U_CFUNC
 
UCÚv”‹rTy³


5561 
	$uúv_MBCSG‘Ty³
(cÚ¡ 
UCÚv”‹r
* 
cÚv”‹r
) {

5563 if(
cÚv”‹r
->
sh¬edD©a
->
mbcs
.
couÁS‹s
==1) {

5564  (
UCÚv”‹rTy³
)
UCNV_SBCS
;

5565 } if((
cÚv”‹r
->
sh¬edD©a
->
mbcs
.
ouutTy³
&0xff)==
MBCS_OUTPUT_2_SISO
) {

5566  (
UCÚv”‹rTy³
)
UCNV_EBCDIC_STATEFUL
;

5567 } if(
cÚv”‹r
->
sh¬edD©a
->
¡©icD©a
->
mšBy‹sP”Ch¬
==2 && cÚv”‹r->sh¬edD©a->¡©icD©a->
maxBy‹sP”Ch¬
==2) {

5568  (
UCÚv”‹rTy³
)
UCNV_DBCS
;

5570  (
UCÚv”‹rTy³
)
UCNV_MBCS
;

5571 
	}
}

5573 cÚ¡ 
UCÚv”‹rIm¶
 
	g_SBCSUTF8Im¶
={

5574 
UCNV_MBCS
,

5576 
uúv_MBCSLßd
,

5577 
uúv_MBCSUÆßd
,

5579 
uúv_MBCSO³n
,

5580 
NULL
,

5581 
NULL
,

5583 
uúv_MBCSToUnicodeW™hOff£ts
,

5584 
uúv_MBCSToUnicodeW™hOff£ts
,

5585 
uúv_MBCSFromUnicodeW™hOff£ts
,

5586 
uúv_MBCSFromUnicodeW™hOff£ts
,

5587 
uúv_MBCSG‘NextUCh¬
,

5589 
uúv_MBCSG‘S¹”s
,

5590 
uúv_MBCSG‘Name
,

5591 
uúv_MBCSWr™eSub
,

5592 
NULL
,

5593 
uúv_MBCSG‘UnicodeS‘
,

5595 
NULL
,

5596 
uúv_SBCSFromUTF8


5599 cÚ¡ 
UCÚv”‹rIm¶
 
	g_DBCSUTF8Im¶
={

5600 
UCNV_MBCS
,

5602 
uúv_MBCSLßd
,

5603 
uúv_MBCSUÆßd
,

5605 
uúv_MBCSO³n
,

5606 
NULL
,

5607 
NULL
,

5609 
uúv_MBCSToUnicodeW™hOff£ts
,

5610 
uúv_MBCSToUnicodeW™hOff£ts
,

5611 
uúv_MBCSFromUnicodeW™hOff£ts
,

5612 
uúv_MBCSFromUnicodeW™hOff£ts
,

5613 
uúv_MBCSG‘NextUCh¬
,

5615 
uúv_MBCSG‘S¹”s
,

5616 
uúv_MBCSG‘Name
,

5617 
uúv_MBCSWr™eSub
,

5618 
NULL
,

5619 
uúv_MBCSG‘UnicodeS‘
,

5621 
NULL
,

5622 
uúv_DBCSFromUTF8


5625 cÚ¡ 
UCÚv”‹rIm¶
 
	g_MBCSIm¶
={

5626 
UCNV_MBCS
,

5628 
uúv_MBCSLßd
,

5629 
uúv_MBCSUÆßd
,

5631 
uúv_MBCSO³n
,

5632 
NULL
,

5633 
NULL
,

5635 
uúv_MBCSToUnicodeW™hOff£ts
,

5636 
uúv_MBCSToUnicodeW™hOff£ts
,

5637 
uúv_MBCSFromUnicodeW™hOff£ts
,

5638 
uúv_MBCSFromUnicodeW™hOff£ts
,

5639 
uúv_MBCSG‘NextUCh¬
,

5641 
uúv_MBCSG‘S¹”s
,

5642 
uúv_MBCSG‘Name
,

5643 
uúv_MBCSWr™eSub
,

5644 
NULL
,

5645 
uúv_MBCSG‘UnicodeS‘


5653 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_MBCSD©a
={

5654 (
UCÚv”‹rSh¬edD©a
), 1,

5655 
NULL
, NULL, NULL, 
FALSE
, &
_MBCSIm¶
,

	@ucnvmbcs.h

17 #iâdeà
__UCNVMBCS_H__


18 
	#__UCNVMBCS_H__


	)

20 
	~"unicode/uty³s.h
"

22 #ià!
UCONFIG_NO_CONVERSION


24 
	~"unicode/uúv.h
"

25 
	~"uúv_úv.h
"

26 
	~"uúv_ext.h
"

241 
	mMBCS_MAX_STATE_COUNT
=128

249 
	mMBCS_STATE_VALID_DIRECT_16
,

250 
	mMBCS_STATE_VALID_DIRECT_20
,

252 
	mMBCS_STATE_FALLBACK_DIRECT_16
,

253 
	mMBCS_STATE_FALLBACK_DIRECT_20
,

255 
	mMBCS_STATE_VALID_16
,

256 
	mMBCS_STATE_VALID_16_PAIR
,

258 
	mMBCS_STATE_UNASSIGNED
,

259 
	mMBCS_STATE_ILLEGAL
,

261 
	mMBCS_STATE_CHANGE_ONLY


265 
	#MBCS_ENTRY_TRANSITION
(
¡©e
, 
off£t
è(
št32_t
)(((št32_t)(¡©e)<<24L)|(off£t))

	)

266 
	#MBCS_ENTRY_TRANSITION_SET_OFFSET
(
’Œy
, 
off£t
è(
št32_t
)((ÓÁry)&0xff000000)|(off£t))

	)

267 
	#MBCS_ENTRY_TRANSITION_ADD_OFFSET
(
’Œy
, 
off£t
è(
št32_t
)(ÓÁry)+(off£t))

	)

269 
	#MBCS_ENTRY_FINAL
(
¡©e
, 
aùiÚ
, 
v®ue
è(
št32_t
)(0x80000000|((št32_t)(¡©e)<<24L)|(×ùiÚ)<<20L)|(v®ue))

	)

270 
	#MBCS_ENTRY_SET_FINAL
(
’Œy
è(
št32_t
)(ÓÁry)|0x80000000)

	)

271 
	#MBCS_ENTRY_FINAL_SET_ACTION
(
’Œy
, 
aùiÚ
è(
št32_t
)((ÓÁry)&0xff0fffff)|((št32_t)×ùiÚ)<<20L))

	)

272 
	#MBCS_ENTRY_FINAL_SET_VALUE
(
’Œy
, 
v®ue
è(
št32_t
)((ÓÁry)&0xfff00000)|(v®ue))

	)

273 
	#MBCS_ENTRY_FINAL_SET_ACTION_VALUE
(
’Œy
, 
aùiÚ
, 
v®ue
è(
št32_t
)((ÓÁry)&0xff000000)|((št32_t)×ùiÚ)<<20L)|(v®ue))

	)

275 
	#MBCS_ENTRY_SET_STATE
(
’Œy
, 
¡©e
è(
št32_t
)((ÓÁry)&0x80ffffff)|((št32_t)(¡©e)<<24L))

	)

277 
	#MBCS_ENTRY_STATE
(
’Œy
è((ÓÁry)>>24)&0x7f)

	)

279 
	#MBCS_ENTRY_IS_TRANSITION
(
’Œy
è(ÓÁry)>=0)

	)

280 
	#MBCS_ENTRY_IS_FINAL
(
’Œy
è(ÓÁry)<0)

	)

282 
	#MBCS_ENTRY_TRANSITION_STATE
(
’Œy
è(ÓÁry)>>24)

	)

283 
	#MBCS_ENTRY_TRANSITION_OFFSET
(
’Œy
è(ÓÁry)&0xffffff)

	)

285 
	#MBCS_ENTRY_FINAL_STATE
(
’Œy
è((ÓÁry)>>24)&0x7f)

	)

286 
	#MBCS_ENTRY_FINAL_IS_VALID_DIRECT_16
(
’Œy
è(ÓÁry)<(
št32_t
)0x80100000)

	)

287 
	#MBCS_ENTRY_FINAL_ACTION
(
’Œy
è((ÓÁry)>>20)&0xf)

	)

288 
	#MBCS_ENTRY_FINAL_VALUE
(
’Œy
è(ÓÁry)&0xfffff)

	)

289 
	#MBCS_ENTRY_FINAL_VALUE_16
(
’Œy
è(
ušt16_t
)ÓÁry)

	)

291 
	#IS_ASCII_ROUNDTRIP
(
b
, 
asciiRoundŒs
è((×sciiRoundŒsè& (1<<((b)>>2)))!=0)

	)

294 
	#MBCS_SINGLE_RESULT_FROM_U
(
bË
, 
»suÉs
, 
c
èÔesuÉs)[ (bË)[ (bË)[(c)>>10] +(((c)>>4)&0x3fè] +((c)&0xfè]

	)

297 
	#SBCS_RESULT_FROM_LOW_BMP
(
bË
, 
»suÉs
, 
c
èÔesuÉs)[ (bË)[(c)>>6] +((c)&0x3fè]

	)

300 
	#SBCS_RESULT_FROM_UTF8
(
bË
, 
»suÉs
, 
l
, 
t
èÔesuÉs)[ (bË)[l] +Ñè]

	)

303 
	#MBCS_STAGE_2_FROM_U
(
bË
, 
c
è((cÚ¡ 
ušt32_t
 *)ÑabË))[ (bË)[(c)>>10] +(((c)>>4)&0x3fè]

	)

304 
	#MBCS_FROM_U_IS_ROUNDTRIP
(
¡age2EÁry
, 
c
èĞ((¡age2EÁryè& ((
ušt32_t
)1<< (16+((c)&0xf)è)è!=0)

	)

306 
	#MBCS_VALUE_2_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
c
è((
ušt16_t
 *)(by‹s))[16*(
ušt32_t
)(ušt16_t)(¡age2EÁry)+((c)&0xf)]

	)

307 
	#MBCS_VALUE_4_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
c
è((
ušt32_t
 *)(by‹s))[16*(ušt32_t)(
ušt16_t
)(¡age2EÁry)+((c)&0xf)]

	)

309 
	#MBCS_POINTER_3_FROM_STAGE_2
(
by‹s
, 
¡age2EÁry
, 
c
è((by‹s)+(16*(
ušt32_t
)(
ušt16_t
)(¡age2EÁry)+((c)&0xf))*3)

	)

312 
	#DBCS_RESULT_FROM_MOST_BMP
(
bË
, 
»suÉs
, 
c
èÔesuÉs)[ (bË)[(c)>>6] +((c)&0x3fè]

	)

315 
	#DBCS_RESULT_FROM_UTF8
(
bË
, 
»suÉs
, 
É1
, 
t2
èÔesuÉs)[ (bË)[É1] +Ñ2è]

	)

324 
	mMBCS_OUTPUT_1
,

325 
	mMBCS_OUTPUT_2
,

326 
	mMBCS_OUTPUT_3
,

327 
	mMBCS_OUTPUT_4
,

329 
	mMBCS_OUTPUT_3_EUC
=8,

330 
	mMBCS_OUTPUT_4_EUC
,

332 
	mMBCS_OUTPUT_2_SISO
=12,

333 
	mMBCS_OUTPUT_2_HZ
,

335 
	mMBCS_OUTPUT_EXT_ONLY
,

337 
	mMBCS_OUTPUT_COUNT
,

339 
	mMBCS_OUTPUT_DBCS_ONLY
=0xdb

347 
ušt32_t
 
	moff£t
;

348 
UCh¬32
 
	mcodePošt
;

349 } 
	t_MBCSToUF®lback
;

353 
	mSBCS_FAST_MAX
=0x0fff,

354 
	mSBCS_FAST_LIMIT
=
SBCS_FAST_MAX
+1,

355 
	mMBCS_FAST_MAX
=0xd7ff,

356 
	mMBCS_FAST_LIMIT
=
MBCS_FAST_MAX
+1

365 
	sUCÚv”‹rMBCSTabË
 {

367 
ušt8_t
 
	mcouÁS‹s
, 
	mdbcsOÆyS‹
, 
	m¡©eTabËOwÃd
;

368 
ušt32_t
 
	mcouÁToUF®lbacks
;

370 cÚ¡ 
št32_t
 (*
¡©eTabË
) [256];

371 
št32_t
 (*
sw­LFNLS‹TabË
) [256];

372 cÚ¡ 
ušt16_t
 *
	municodeCodeUn™s
 ;

373 cÚ¡ 
_MBCSToUF®lback
 *
	mtoUF®lbacks
;

376 cÚ¡ 
ušt16_t
 *
	mäomUnicodeTabË
;

377 cÚ¡ 
ušt16_t
 *
	mmbcsIndex
;

378 
ušt16_t
 
	msbcsIndex
[
SBCS_FAST_LIMIT
>>6];

379 cÚ¡ 
ušt8_t
 *
	mäomUnicodeBy‹s
;

380 
ušt8_t
 *
	msw­LFNLFromUnicodeBy‹s
;

381 
ušt32_t
 
	mäomUBy‹sL’gth
;

382 
ušt8_t
 
	mouutTy³
, 
	municodeMask
;

383 
UBoŞ
 
	mutf8Fr›ndly
;

384 
UCh¬
 
	mmaxFa¡UCh¬
;

387 
ušt32_t
 
	masciiRoundŒs
;

390 
ušt8_t
 *
	m»cÚ¡™u‹dD©a
;

393 *
	msw­LFNLName
;

396 
UCÚv”‹rSh¬edD©a
 *
	mba£Sh¬edD©a
;

397 cÚ¡ 
št32_t
 *
	mextIndexes
;

398 } 
	tUCÚv”‹rMBCSTabË
;

401 
	mMBCS_OPT_LENGTH_MASK
=0x3f,

402 
	mMBCS_OPT_NO_FROM_U
=0x40,

407 
	mMBCS_OPT_INCOMPATIBLE_MASK
=0xffc0,

412 
	mMBCS_OPT_UNKNOWN_INCOMPATIBLE_MASK
=0xff80

416 
	mMBCS_HEADER_V4_LENGTH
=8,

417 
	mMBCS_HEADER_V5_MIN_LENGTH
=9

424 
UV”siÚInfo
 
	mv”siÚ
;

425 
ušt32_t
 
	mcouÁS‹s
,

426 
	mcouÁToUF®lbacks
,

427 
	moff£tToUCodeUn™s
,

428 
	moff£tFromUTabË
,

429 
	moff£tFromUBy‹s
,

430 
	mæags
,

431 
	mäomUBy‹sL’gth
;

434 
ušt32_t
 
	mİtiÚs
;

437 
ušt32_t
 
	mfuÎSge2L’gth
;

438 } 
	t_MBCSH—d”
;

453 
U_CFUNC
 
UCh¬32


454 
uúv_MBCSSim¶eG‘NextUCh¬
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

455 cÚ¡ *
sourû
, 
št32_t
 
Ëngth
,

456 
UBoŞ
 
u£F®lback
);

463 
U_CFUNC
 
UCh¬32


464 
uúv_MBCSSšgËSim¶eG‘NextUCh¬
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

465 
ušt8_t
 
b
, 
UBoŞ
 
u£F®lback
);

473 
	#_MBCS_SINGLE_SIMPLE_GET_NEXT_BMP
(
sh¬edD©a
, 
b
) \

474 (
UCh¬
)
	`MBCS_ENTRY_FINAL_VALUE_16
((
sh¬edD©a
)->
mbcs
.
¡©eTabË
[0][(
ušt8_t
)(
b
)])

	)

480 
U_CFUNC
 
UBoŞ


481 
uúv_MBCSIsL—dBy‹
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
, 
by‹
);

484 
	#_MBCS_IS_LEAD_BYTE
(
sh¬edD©a
, 
by‹
) \

485 (
UBoŞ
)
	`MBCS_ENTRY_IS_TRANSITION
((
sh¬edD©a
)->
mbcs
.
¡©eTabË
[0][(
ušt8_t
)(
by‹
)])

	)

504 
U_CFUNC
 
št32_t


505 
uúv_MBCSFromUCh¬32
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

506 
UCh¬32
 
c
, 
ušt32_t
 *
pV®ue
,

507 
UBoŞ
 
u£F®lback
);

515 
U_CFUNC
 
št32_t


516 
uúv_MBCSSšgËFromUCh¬32
(
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

517 
UCh¬32
 
c
,

518 
UBoŞ
 
u£F®lback
);

524 
U_CFUNC
 
UCÚv”‹rTy³


525 
uúv_MBCSG‘Ty³
(cÚ¡ 
UCÚv”‹r
* 
cÚv”‹r
);

527 
U_CFUNC
 

528 
uúv_MBCSFromUnicodeW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

529 
UE¼ÜCode
 *
pE¼ÜCode
);

530 
U_CFUNC
 

531 
uúv_MBCSToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

532 
UE¼ÜCode
 *
pE¼ÜCode
);

542 
U_CFUNC
 

543 
uúv_MBCSG‘UnicodeS‘FÜUnicode
(cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

544 cÚ¡ 
US‘Add”
 *
§
,

545 
UCÚv”‹rUnicodeS‘
 
which
,

546 
UE¼ÜCode
 *
pE¼ÜCode
);

554 
U_CFUNC
 

555 
uúv_MBCSG‘F‹»dUnicodeS‘FÜUnicode
(cÚ¡ 
UCÚv”‹rSh¬edD©a
 *
sh¬edD©a
,

556 cÚ¡ 
US‘Add”
 *
§
,

557 
UCÚv”‹rUnicodeS‘
 
which
,

558 
UCÚv”‹rS‘F‹r
 
f‹r
,

559 
UE¼ÜCode
 *
pE¼ÜCode
);

	@ucnvscsu.c

22 
	~"unicode/uty³s.h
"

24 #ià!
UCONFIG_NO_CONVERSION


26 
	~"unicode/uúv.h
"

27 
	~"unicode/uúv_cb.h
"

28 
	~"uúv_bld.h
"

29 
	~"uúv_úv.h
"

30 
	~"cmemÜy.h
"

36 
	mSQ0
=0x01,

37 
	mSQ7
=0x08,

38 
	mSDX
=0x0B,

39 
	mSrs
=0x0C,

40 
	mSQU
=0x0E,

41 
	mSCU
=0x0F,

42 
	mSC0
=0x10,

43 
	mSC7
=0x17,

44 
	mSD0
=0x18,

45 
	mSD7
=0x1F,

47 
	mUC0
=0xE0,

48 
	mUC7
=0xE7,

49 
	mUD0
=0xE8,

50 
	mUD7
=0xEF,

51 
	mUQU
=0xF0,

52 
	mUDX
=0xF1,

53 
	mUrs
=0xF2

62 
	mg­Th»shŞd
=0x68,

63 
	mg­Off£t
=0xAC00,

66 
	m»£rvedS¹
=0xA8,

69 
	mfixedTh»shŞd
=0xF9

73 cÚ¡ 
ušt32_t
 
	g¡©icOff£ts
[8]={

85 cÚ¡ 
ušt32_t
 
	gš™ŸlDyÇmicOff£ts
[8]={

97 cÚ¡ 
ušt32_t
 
	gfixedOff£ts
[]={

109 
	m»adCommªd
,

110 
	mquÙePaœOÃ
,

111 
	mquÙePaœTwo
,

112 
	mquÙeOÃ
,

113 
	mdefšePaœOÃ
,

114 
	mdefšePaœTwo
,

115 
	mdefšeOÃ


118 
	sSCSUD©a
 {

120 
ušt32_t
 
	mtoUDyÇmicOff£ts
[8];

121 
ušt32_t
 
	mäomUDyÇmicOff£ts
[8];

124 
UBoŞ
 
	mtoUIsSšgËBy‹Mode
;

125 
ušt8_t
 
	mtoUS‹
;

126 
št8_t
 
	mtoUQuÙeWšdow
, 
	mtoUDyÇmicWšdow
;

127 
ušt8_t
 
	mtoUBy‹OÃ
;

128 
ušt8_t
 
	mtoUPaddšg
[3];

131 
UBoŞ
 
	mäomUIsSšgËBy‹Mode
;

132 
št8_t
 
	mäomUDyÇmicWšdow
;

141 
ušt8_t
 
	mloÿË
;

142 
št8_t
 
	mÃxtWšdowU£Index
;

143 
št8_t
 
	mwšdowU£
[8];

144 } 
	tSCSUD©a
;

146 cÚ¡ 
št8_t
 
	gš™ŸlWšdowU£
[8]={ 7, 0, 3, 2, 4, 5, 6, 1 };

147 cÚ¡ 
št8_t
 
	gš™ŸlWšdowU£_ja
[8]={ 3, 2, 4, 1, 0, 7, 5, 6 };

150 
	mlG’”ic
, 
	ml_ja


156 
	$_SCSURe£t
(
UCÚv”‹r
 *
úv
, 
UCÚv”‹rRe£tChoiû
 
choiû
) {

157 
SCSUD©a
 *
scsu
=(SCSUD©¨*)
úv
->
exŒaInfo
;

159 if(
choiû
<=
UCNV_RESET_TO_UNICODE
) {

161 
	`u´v_memıy
(
scsu
->
toUDyÇmicOff£ts
, 
š™ŸlDyÇmicOff£ts
, 32);

163 
scsu
->
toUIsSšgËBy‹Mode
=
TRUE
;

164 
scsu
->
toUS‹
=
»adCommªd
;

165 
scsu
->
toUQuÙeWšdow
=scsu->
toUDyÇmicWšdow
=0;

166 
scsu
->
toUBy‹OÃ
=0;

168 
úv
->
toUL’gth
=0;

170 if(
choiû
!=
UCNV_RESET_TO_UNICODE
) {

172 
	`u´v_memıy
(
scsu
->
äomUDyÇmicOff£ts
, 
š™ŸlDyÇmicOff£ts
, 32);

174 
scsu
->
äomUIsSšgËBy‹Mode
=
TRUE
;

175 
scsu
->
äomUDyÇmicWšdow
=0;

177 
scsu
->
ÃxtWšdowU£Index
=0;

178 
scsu
->
loÿË
) {

179 
l_ja
:

180 
	`u´v_memıy
(
scsu
->
wšdowU£
, 
š™ŸlWšdowU£_ja
, 8);

183 
	`u´v_memıy
(
scsu
->
wšdowU£
, 
š™ŸlWšdowU£
, 8);

187 
úv
->
äomUCh¬32
=0;

189 
	}
}

192 
	$_SCSUO³n
(
UCÚv”‹r
 *
úv
,

193 
UCÚv”‹rLßdArgs
 *
pArgs
,

194 
UE¼ÜCode
 *
pE¼ÜCode
) {

195 cÚ¡ *
loÿË
=
pArgs
->locale;

196 if(
pArgs
->
ÚlyTe¡IsLßdabË
) {

199 
úv
->
exŒaInfo
=
	`u´v_m®loc
((
SCSUD©a
));

200 if(
úv
->
exŒaInfo
!=
NULL
) {

201 if(
loÿË
!=
NULL
 &&†ocale[0]=='j' &&†ocale[1]=='a' && (locale[2]==0 ||†ocale[2]=='_')) {

202 ((
SCSUD©a
 *)
úv
->
exŒaInfo
)->
loÿË
=
l_ja
;

204 ((
SCSUD©a
 *)
úv
->
exŒaInfo
)->
loÿË
=
lG’”ic
;

206 
	`_SCSURe£t
(
úv
, 
UCNV_RESET_BOTH
);

208 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

212 
úv
->
subUCh¬s
[0]=0xfffd;

213 
úv
->
subCh¬L’
=-1;

214 
	}
}

217 
	$_SCSUClo£
(
UCÚv”‹r
 *
úv
) {

218 if(
úv
->
exŒaInfo
!=
NULL
) {

219 if(!
úv
->
isExŒaLoÿl
) {

220 
	`u´v_ä“
(
úv
->
exŒaInfo
);

222 
úv
->
exŒaInfo
=
NULL
;

224 
	}
}

229 
	$_SCSUToUnicodeW™hOff£ts
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

230 
UE¼ÜCode
 *
pE¼ÜCode
) {

231 
UCÚv”‹r
 *
úv
;

232 
SCSUD©a
 *
scsu
;

233 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

234 
UCh¬
 *
rg‘
;

235 cÚ¡ 
UCh¬
 *
rg‘Lim™
;

236 
št32_t
 *
off£ts
;

237 
UBoŞ
 
isSšgËBy‹Mode
;

238 
ušt8_t
 
¡©e
, 
by‹OÃ
;

239 
št8_t
 
quÙeWšdow
, 
dyÇmicWšdow
;

241 
št32_t
 
sourûIndex
, 
ÃxtSourûIndex
;

243 
ušt8_t
 
b
;

246 
úv
=
pArgs
->
cÚv”‹r
;

247 
scsu
=(
SCSUD©a
 *)
úv
->
exŒaInfo
;

249 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

250 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

251 
rg‘
=
pArgs
->target;

252 
rg‘Lim™
=
pArgs
->targetLimit;

253 
off£ts
=
pArgs
->offsets;

256 
isSšgËBy‹Mode
=
scsu
->
toUIsSšgËBy‹Mode
;

257 
¡©e
=
scsu
->
toUS‹
;

258 
quÙeWšdow
=
scsu
->
toUQuÙeWšdow
;

259 
dyÇmicWšdow
=
scsu
->
toUDyÇmicWšdow
;

260 
by‹OÃ
=
scsu
->
toUBy‹OÃ
;

263 
sourûIndex
=
¡©e
==
»adCommªd
 ? 0 : -1;

264 
ÃxtSourûIndex
=0;

285 if(
isSšgËBy‹Mode
) {

287 if(
¡©e
==
»adCommªd
) {

288 
ç¡SšgË
:

289 
sourû
<
sourûLim™
 && 
rg‘
<
rg‘Lim™
 && (
b
=*source)>=0x20) {

290 ++
sourû
;

291 ++
ÃxtSourûIndex
;

292 if(
b
<=0x7f) {

294 *
rg‘
++=(
UCh¬
)
b
;

295 if(
off£ts
!=
NULL
) {

296 *
off£ts
++=
sourûIndex
;

300 
ušt32_t
 
c
=
scsu
->
toUDyÇmicOff£ts
[
dyÇmicWšdow
]+(
b
&0x7f);

301 if(
c
<=0xffff) {

302 *
rg‘
++=(
UCh¬
)
c
;

303 if(
off£ts
!=
NULL
) {

304 *
off£ts
++=
sourûIndex
;

308 *
rg‘
++=(
UCh¬
)(0xd7c0+(
c
>>10));

309 if(
rg‘
<
rg‘Lim™
) {

310 *
rg‘
++=(
UCh¬
)(0xdc00|(
c
&0x3ff));

311 if(
off£ts
!=
NULL
) {

312 *
off£ts
++=
sourûIndex
;

313 *
off£ts
++=
sourûIndex
;

317 if(
off£ts
!=
NULL
) {

318 *
off£ts
++=
sourûIndex
;

320 
úv
->
UCh¬E¼ÜBufãr
[0]=(
UCh¬
)(0xdc00|(
c
&0x3ff));

321 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

322 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

323 
’dloİ
;

327 
sourûIndex
=
ÃxtSourûIndex
;

332 
sšgËBy‹Mode
:

333 
sourû
<
sourûLim™
) {

334 if(
rg‘
>=
rg‘Lim™
) {

336 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

339 
b
=*
sourû
++;

340 ++
ÃxtSourûIndex
;

341 
¡©e
) {

342 
»adCommªd
:

345 if((1UL<<
b
)&0x2601 ) {

347 *
rg‘
++=(
UCh¬
)
b
;

348 if(
off£ts
!=
NULL
) {

349 *
off£ts
++=
sourûIndex
;

351 
sourûIndex
=
ÃxtSourûIndex
;

352 
ç¡SšgË
;

353 } if(
SC0
<=
b
) {

354 if(
b
<=
SC7
) {

355 
dyÇmicWšdow
=(
št8_t
)(
b
-
SC0
);

356 
sourûIndex
=
ÃxtSourûIndex
;

357 
ç¡SšgË
;

359 
dyÇmicWšdow
=(
št8_t
)(
b
-
SD0
);

360 
¡©e
=
defšeOÃ
;

362 } ifĞ
b
<=
SQ7
) {

363 
quÙeWšdow
=(
št8_t
)(
b
-
SQ0
);

364 
¡©e
=
quÙeOÃ
;

365 } if(
b
==
SDX
) {

366 
¡©e
=
defšePaœOÃ
;

367 } if(
b
==
SQU
) {

368 
¡©e
=
quÙePaœOÃ
;

369 } if(
b
==
SCU
) {

370 
sourûIndex
=
ÃxtSourûIndex
;

371 
isSšgËBy‹Mode
=
FALSE
;

372 
ç¡Unicode
;

375 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

376 
úv
->
toUBy‹s
[0]=
b
;

377 
úv
->
toUL’gth
=1;

378 
’dloİ
;

382 
úv
->
toUBy‹s
[0]=
b
;

383 
úv
->
toUL’gth
=1;

385 
quÙePaœOÃ
:

386 
by‹OÃ
=
b
;

387 
úv
->
toUBy‹s
[1]=
b
;

388 
úv
->
toUL’gth
=2;

389 
¡©e
=
quÙePaœTwo
;

391 
quÙePaœTwo
:

392 *
rg‘
++=(
UCh¬
)((
by‹OÃ
<<8)|
b
);

393 if(
off£ts
!=
NULL
) {

394 *
off£ts
++=
sourûIndex
;

396 
sourûIndex
=
ÃxtSourûIndex
;

397 
¡©e
=
»adCommªd
;

398 
ç¡SšgË
;

399 
quÙeOÃ
:

400 if(
b
<0x80) {

402 *
rg‘
++=(
UCh¬
)(
¡©icOff£ts
[
quÙeWšdow
]+
b
);

403 if(
off£ts
!=
NULL
) {

404 *
off£ts
++=
sourûIndex
;

408 
ušt32_t
 
c
=
scsu
->
toUDyÇmicOff£ts
[
quÙeWšdow
]+(
b
&0x7f);

409 if(
c
<=0xffff) {

410 *
rg‘
++=(
UCh¬
)
c
;

411 if(
off£ts
!=
NULL
) {

412 *
off£ts
++=
sourûIndex
;

416 *
rg‘
++=(
UCh¬
)(0xd7c0+(
c
>>10));

417 if(
rg‘
<
rg‘Lim™
) {

418 *
rg‘
++=(
UCh¬
)(0xdc00|(
c
&0x3ff));

419 if(
off£ts
!=
NULL
) {

420 *
off£ts
++=
sourûIndex
;

421 *
off£ts
++=
sourûIndex
;

425 if(
off£ts
!=
NULL
) {

426 *
off£ts
++=
sourûIndex
;

428 
úv
->
UCh¬E¼ÜBufãr
[0]=(
UCh¬
)(0xdc00|(
c
&0x3ff));

429 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

430 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

431 
’dloİ
;

435 
sourûIndex
=
ÃxtSourûIndex
;

436 
¡©e
=
»adCommªd
;

437 
ç¡SšgË
;

438 
defšePaœOÃ
:

439 
dyÇmicWšdow
=(
št8_t
)((
b
>>5)&7);

440 
by‹OÃ
=(
ušt8_t
)(
b
&0x1f);

441 
úv
->
toUBy‹s
[1]=
b
;

442 
úv
->
toUL’gth
=2;

443 
¡©e
=
defšePaœTwo
;

445 
defšePaœTwo
:

446 
scsu
->
toUDyÇmicOff£ts
[
dyÇmicWšdow
]=0x10000+(
by‹OÃ
<<15UL | 
b
<<7UL);

447 
sourûIndex
=
ÃxtSourûIndex
;

448 
¡©e
=
»adCommªd
;

449 
ç¡SšgË
;

450 
defšeOÃ
:

451 if(
b
==0) {

453 
úv
->
toUBy‹s
[1]=
b
;

454 
úv
->
toUL’gth
=2;

455 
’dloİ
;

456 } if(
b
<
g­Th»shŞd
) {

457 
scsu
->
toUDyÇmicOff£ts
[
dyÇmicWšdow
]=
b
<<7UL;

458 } if((
ušt8_t
)(
b
-
g­Th»shŞd
)<(
»£rvedS¹
-gapThreshold)) {

459 
scsu
->
toUDyÇmicOff£ts
[
dyÇmicWšdow
]=(
b
<<7UL)+
g­Off£t
;

460 } if(
b
>=
fixedTh»shŞd
) {

461 
scsu
->
toUDyÇmicOff£ts
[
dyÇmicWšdow
]=
fixedOff£ts
[
b
-
fixedTh»shŞd
];

464 
úv
->
toUBy‹s
[1]=
b
;

465 
úv
->
toUL’gth
=2;

466 
’dloİ
;

468 
sourûIndex
=
ÃxtSourûIndex
;

469 
¡©e
=
»adCommªd
;

470 
ç¡SšgË
;

475 if(
¡©e
==
»adCommªd
) {

476 
ç¡Unicode
:

477 
sourû
+1<
sourûLim™
 && 
rg‘
<
rg‘Lim™
 && (
ušt8_t
)((
b
=*sourû)-
UC0
)>(
Urs
-UC0)) {

478 *
rg‘
++=(
UCh¬
)((
b
<<8)|
sourû
[1]);

479 if(
off£ts
!=
NULL
) {

480 *
off£ts
++=
sourûIndex
;

482 
sourûIndex
=
ÃxtSourûIndex
;

483 
ÃxtSourûIndex
+=2;

484 
sourû
+=2;

490 
sourû
<
sourûLim™
) {

491 if(
rg‘
>=
rg‘Lim™
) {

493 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

496 
b
=*
sourû
++;

497 ++
ÃxtSourûIndex
;

498 
¡©e
) {

499 
»adCommªd
:

500 if((
ušt8_t
)(
b
-
UC0
)>(
Urs
-UC0)) {

501 
by‹OÃ
=
b
;

502 
úv
->
toUBy‹s
[0]=
b
;

503 
úv
->
toUL’gth
=1;

504 
¡©e
=
quÙePaœTwo
;

505 } ifĞ
b
<=
UC7
) {

506 
dyÇmicWšdow
=(
št8_t
)(
b
-
UC0
);

507 
sourûIndex
=
ÃxtSourûIndex
;

508 
isSšgËBy‹Mode
=
TRUE
;

509 
ç¡SšgË
;

510 } ifĞ
b
<=
UD7
) {

511 
dyÇmicWšdow
=(
št8_t
)(
b
-
UD0
);

512 
isSšgËBy‹Mode
=
TRUE
;

513 
úv
->
toUBy‹s
[0]=
b
;

514 
úv
->
toUL’gth
=1;

515 
¡©e
=
defšeOÃ
;

516 
sšgËBy‹Mode
;

517 } if(
b
==
UDX
) {

518 
isSšgËBy‹Mode
=
TRUE
;

519 
úv
->
toUBy‹s
[0]=
b
;

520 
úv
->
toUL’gth
=1;

521 
¡©e
=
defšePaœOÃ
;

522 
sšgËBy‹Mode
;

523 } if(
b
==
UQU
) {

524 
úv
->
toUBy‹s
[0]=
b
;

525 
úv
->
toUL’gth
=1;

526 
¡©e
=
quÙePaœOÃ
;

529 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

530 
úv
->
toUBy‹s
[0]=
b
;

531 
úv
->
toUL’gth
=1;

532 
’dloİ
;

535 
quÙePaœOÃ
:

536 
by‹OÃ
=
b
;

537 
úv
->
toUBy‹s
[1]=
b
;

538 
úv
->
toUL’gth
=2;

539 
¡©e
=
quÙePaœTwo
;

541 
quÙePaœTwo
:

542 *
rg‘
++=(
UCh¬
)((
by‹OÃ
<<8)|
b
);

543 if(
off£ts
!=
NULL
) {

544 *
off£ts
++=
sourûIndex
;

546 
sourûIndex
=
ÃxtSourûIndex
;

547 
¡©e
=
»adCommªd
;

548 
ç¡Unicode
;

552 
’dloİ
:

555 if(
	`U_FAILURE
(*
pE¼ÜCode
è&& *pE¼ÜCode!=
U_BUFFER_OVERFLOW_ERROR
) {

557 
¡©e
=
»adCommªd
;

558 } if(
¡©e
==
»adCommªd
) {

560 
úv
->
toUL’gth
=0;

562 
scsu
->
toUIsSšgËBy‹Mode
=
isSšgËBy‹Mode
;

563 
scsu
->
toUS‹
=
¡©e
;

564 
scsu
->
toUQuÙeWšdow
=
quÙeWšdow
;

565 
scsu
->
toUDyÇmicWšdow
=
dyÇmicWšdow
;

566 
scsu
->
toUBy‹OÃ
=
by‹OÃ
;

569 
pArgs
->
sourû
=(const *)source;

570 
pArgs
->
rg‘
=target;

571 
pArgs
->
off£ts
=offsets;

573 
	}
}

583 
	$_SCSUToUnicode
(
UCÚv”‹rToUnicodeArgs
 *
pArgs
,

584 
UE¼ÜCode
 *
pE¼ÜCode
) {

585 
UCÚv”‹r
 *
úv
;

586 
SCSUD©a
 *
scsu
;

587 cÚ¡ 
ušt8_t
 *
sourû
, *
sourûLim™
;

588 
UCh¬
 *
rg‘
;

589 cÚ¡ 
UCh¬
 *
rg‘Lim™
;

590 
UBoŞ
 
isSšgËBy‹Mode
;

591 
ušt8_t
 
¡©e
, 
by‹OÃ
;

592 
št8_t
 
quÙeWšdow
, 
dyÇmicWšdow
;

594 
ušt8_t
 
b
;

597 
úv
=
pArgs
->
cÚv”‹r
;

598 
scsu
=(
SCSUD©a
 *)
úv
->
exŒaInfo
;

600 
sourû
=(cÚ¡ 
ušt8_t
 *)
pArgs
->source;

601 
sourûLim™
=(cÚ¡ 
ušt8_t
 *)
pArgs
->sourceLimit;

602 
rg‘
=
pArgs
->target;

603 
rg‘Lim™
=
pArgs
->targetLimit;

606 
isSšgËBy‹Mode
=
scsu
->
toUIsSšgËBy‹Mode
;

607 
¡©e
=
scsu
->
toUS‹
;

608 
quÙeWšdow
=
scsu
->
toUQuÙeWšdow
;

609 
dyÇmicWšdow
=
scsu
->
toUDyÇmicWšdow
;

610 
by‹OÃ
=
scsu
->
toUBy‹OÃ
;

631 if(
isSšgËBy‹Mode
) {

633 if(
¡©e
==
»adCommªd
) {

634 
ç¡SšgË
:

635 
sourû
<
sourûLim™
 && 
rg‘
<
rg‘Lim™
 && (
b
=*source)>=0x20) {

636 ++
sourû
;

637 if(
b
<=0x7f) {

639 *
rg‘
++=(
UCh¬
)
b
;

642 
ušt32_t
 
c
=
scsu
->
toUDyÇmicOff£ts
[
dyÇmicWšdow
]+(
b
&0x7f);

643 if(
c
<=0xffff) {

644 *
rg‘
++=(
UCh¬
)
c
;

647 *
rg‘
++=(
UCh¬
)(0xd7c0+(
c
>>10));

648 if(
rg‘
<
rg‘Lim™
) {

649 *
rg‘
++=(
UCh¬
)(0xdc00|(
c
&0x3ff));

652 
úv
->
UCh¬E¼ÜBufãr
[0]=(
UCh¬
)(0xdc00|(
c
&0x3ff));

653 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

654 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

655 
’dloİ
;

663 
sšgËBy‹Mode
:

664 
sourû
<
sourûLim™
) {

665 if(
rg‘
>=
rg‘Lim™
) {

667 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

670 
b
=*
sourû
++;

671 
¡©e
) {

672 
»adCommªd
:

675 if((1UL<<
b
)&0x2601 ) {

677 *
rg‘
++=(
UCh¬
)
b
;

678 
ç¡SšgË
;

679 } if(
SC0
<=
b
) {

680 if(
b
<=
SC7
) {

681 
dyÇmicWšdow
=(
št8_t
)(
b
-
SC0
);

682 
ç¡SšgË
;

684 
dyÇmicWšdow
=(
št8_t
)(
b
-
SD0
);

685 
¡©e
=
defšeOÃ
;

687 } ifĞ
b
<=
SQ7
) {

688 
quÙeWšdow
=(
št8_t
)(
b
-
SQ0
);

689 
¡©e
=
quÙeOÃ
;

690 } if(
b
==
SDX
) {

691 
¡©e
=
defšePaœOÃ
;

692 } if(
b
==
SQU
) {

693 
¡©e
=
quÙePaœOÃ
;

694 } if(
b
==
SCU
) {

695 
isSšgËBy‹Mode
=
FALSE
;

696 
ç¡Unicode
;

699 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

700 
úv
->
toUBy‹s
[0]=
b
;

701 
úv
->
toUL’gth
=1;

702 
’dloİ
;

706 
úv
->
toUBy‹s
[0]=
b
;

707 
úv
->
toUL’gth
=1;

709 
quÙePaœOÃ
:

710 
by‹OÃ
=
b
;

711 
úv
->
toUBy‹s
[1]=
b
;

712 
úv
->
toUL’gth
=2;

713 
¡©e
=
quÙePaœTwo
;

715 
quÙePaœTwo
:

716 *
rg‘
++=(
UCh¬
)((
by‹OÃ
<<8)|
b
);

717 
¡©e
=
»adCommªd
;

718 
ç¡SšgË
;

719 
quÙeOÃ
:

720 if(
b
<0x80) {

722 *
rg‘
++=(
UCh¬
)(
¡©icOff£ts
[
quÙeWšdow
]+
b
);

725 
ušt32_t
 
c
=
scsu
->
toUDyÇmicOff£ts
[
quÙeWšdow
]+(
b
&0x7f);

726 if(
c
<=0xffff) {

727 *
rg‘
++=(
UCh¬
)
c
;

730 *
rg‘
++=(
UCh¬
)(0xd7c0+(
c
>>10));

731 if(
rg‘
<
rg‘Lim™
) {

732 *
rg‘
++=(
UCh¬
)(0xdc00|(
c
&0x3ff));

735 
úv
->
UCh¬E¼ÜBufãr
[0]=(
UCh¬
)(0xdc00|(
c
&0x3ff));

736 
úv
->
UCh¬E¼ÜBufãrL’gth
=1;

737 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

738 
’dloİ
;

742 
¡©e
=
»adCommªd
;

743 
ç¡SšgË
;

744 
defšePaœOÃ
:

745 
dyÇmicWšdow
=(
št8_t
)((
b
>>5)&7);

746 
by‹OÃ
=(
ušt8_t
)(
b
&0x1f);

747 
úv
->
toUBy‹s
[1]=
b
;

748 
úv
->
toUL’gth
=2;

749 
¡©e
=
defšePaœTwo
;

751 
defšePaœTwo
:

752 
scsu
->
toUDyÇmicOff£ts
[
dyÇmicWšdow
]=0x10000+(
by‹OÃ
<<15UL | 
b
<<7UL);

753 
¡©e
=
»adCommªd
;

754 
ç¡SšgË
;

755 
defšeOÃ
:

756 if(
b
==0) {

758 
úv
->
toUBy‹s
[1]=
b
;

759 
úv
->
toUL’gth
=2;

760 
’dloİ
;

761 } if(
b
<
g­Th»shŞd
) {

762 
scsu
->
toUDyÇmicOff£ts
[
dyÇmicWšdow
]=
b
<<7UL;

763 } if((
ušt8_t
)(
b
-
g­Th»shŞd
)<(
»£rvedS¹
-gapThreshold)) {

764 
scsu
->
toUDyÇmicOff£ts
[
dyÇmicWšdow
]=(
b
<<7UL)+
g­Off£t
;

765 } if(
b
>=
fixedTh»shŞd
) {

766 
scsu
->
toUDyÇmicOff£ts
[
dyÇmicWšdow
]=
fixedOff£ts
[
b
-
fixedTh»shŞd
];

769 
úv
->
toUBy‹s
[1]=
b
;

770 
úv
->
toUL’gth
=2;

771 
’dloİ
;

773 
¡©e
=
»adCommªd
;

774 
ç¡SšgË
;

779 if(
¡©e
==
»adCommªd
) {

780 
ç¡Unicode
:

781 
sourû
+1<
sourûLim™
 && 
rg‘
<
rg‘Lim™
 && (
ušt8_t
)((
b
=*sourû)-
UC0
)>(
Urs
-UC0)) {

782 *
rg‘
++=(
UCh¬
)((
b
<<8)|
sourû
[1]);

783 
sourû
+=2;

789 
sourû
<
sourûLim™
) {

790 if(
rg‘
>=
rg‘Lim™
) {

792 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

795 
b
=*
sourû
++;

796 
¡©e
) {

797 
»adCommªd
:

798 if((
ušt8_t
)(
b
-
UC0
)>(
Urs
-UC0)) {

799 
by‹OÃ
=
b
;

800 
úv
->
toUBy‹s
[0]=
b
;

801 
úv
->
toUL’gth
=1;

802 
¡©e
=
quÙePaœTwo
;

803 } ifĞ
b
<=
UC7
) {

804 
dyÇmicWšdow
=(
št8_t
)(
b
-
UC0
);

805 
isSšgËBy‹Mode
=
TRUE
;

806 
ç¡SšgË
;

807 } ifĞ
b
<=
UD7
) {

808 
dyÇmicWšdow
=(
št8_t
)(
b
-
UD0
);

809 
isSšgËBy‹Mode
=
TRUE
;

810 
úv
->
toUBy‹s
[0]=
b
;

811 
úv
->
toUL’gth
=1;

812 
¡©e
=
defšeOÃ
;

813 
sšgËBy‹Mode
;

814 } if(
b
==
UDX
) {

815 
isSšgËBy‹Mode
=
TRUE
;

816 
úv
->
toUBy‹s
[0]=
b
;

817 
úv
->
toUL’gth
=1;

818 
¡©e
=
defšePaœOÃ
;

819 
sšgËBy‹Mode
;

820 } if(
b
==
UQU
) {

821 
úv
->
toUBy‹s
[0]=
b
;

822 
úv
->
toUL’gth
=1;

823 
¡©e
=
quÙePaœOÃ
;

826 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

827 
úv
->
toUBy‹s
[0]=
b
;

828 
úv
->
toUL’gth
=1;

829 
’dloİ
;

832 
quÙePaœOÃ
:

833 
by‹OÃ
=
b
;

834 
úv
->
toUBy‹s
[1]=
b
;

835 
úv
->
toUL’gth
=2;

836 
¡©e
=
quÙePaœTwo
;

838 
quÙePaœTwo
:

839 *
rg‘
++=(
UCh¬
)((
by‹OÃ
<<8)|
b
);

840 
¡©e
=
»adCommªd
;

841 
ç¡Unicode
;

845 
’dloİ
:

848 if(
	`U_FAILURE
(*
pE¼ÜCode
è&& *pE¼ÜCode!=
U_BUFFER_OVERFLOW_ERROR
) {

850 
¡©e
=
»adCommªd
;

851 } if(
¡©e
==
»adCommªd
) {

853 
úv
->
toUL’gth
=0;

855 
scsu
->
toUIsSšgËBy‹Mode
=
isSšgËBy‹Mode
;

856 
scsu
->
toUS‹
=
¡©e
;

857 
scsu
->
toUQuÙeWšdow
=
quÙeWšdow
;

858 
scsu
->
toUDyÇmicWšdow
=
dyÇmicWšdow
;

859 
scsu
->
toUBy‹OÃ
=
by‹OÃ
;

862 
pArgs
->
sourû
=(const *)source;

863 
pArgs
->
rg‘
=target;

865 
	}
}

881 
št8_t


882 
	$g‘Wšdow
(cÚ¡ 
ušt32_t
 
off£ts
[8], ušt32_ˆ
c
) {

883 
i
;

884 
i
=0; i<8; ++i) {

885 if((
ušt32_t
)(
c
-
off£ts
[
i
])<=0x7f) {

886  (
št8_t
)(
i
);

890 
	}
}

893 
UBoŞ


894 
	$isInOff£tWšdowOrDœeù
(
ušt32_t
 
off£t
, ušt32_ˆ
c
) {

895  (
UBoŞ
)(
c
<=
off£t
+0x7f &&

896 (
c
>=
off£t
 || (c<=0x7f &&

897 (
c
>=0x20 || (1UL<<c)&0x2601))));

900 
	}
}

905 
št8_t


906 
	$g‘NextDyÇmicWšdow
(
SCSUD©a
 *
scsu
) {

907 
št8_t
 
wšdow
=
scsu
->
wšdowU£
[scsu->
ÃxtWšdowU£Index
];

908 if(++
scsu
->
ÃxtWšdowU£Index
==8) {

909 
scsu
->
ÃxtWšdowU£Index
=0;

911  
wšdow
;

912 
	}
}

921 
	$u£DyÇmicWšdow
(
SCSUD©a
 *
scsu
, 
št8_t
 
wšdow
) {

928 
i
, 
j
;

930 
i
=
scsu
->
ÃxtWšdowU£Index
;

932 if(--
i
<0) {

933 
i
=7;

935 } 
scsu
->
wšdowU£
[
i
]!=
wšdow
);

938 
j
=
i
+1;

939 if(
j
==8) {

940 
j
=0;

942 
j
!=
scsu
->
ÃxtWšdowU£Index
) {

943 
scsu
->
wšdowU£
[
i
]=scsu->wšdowU£[
j
];

944 
i
=
j
;

945 if(++
j
==8) { j=0; }

949 
scsu
->
wšdowU£
[
i
]=
wšdow
;

950 
	}
}

961 
	$g‘DyÇmicOff£t
(
ušt32_t
 
c
, ušt32_ˆ*
pOff£t
) {

962 
i
;

964 
i
=0; i<7; ++i) {

965 if((
ušt32_t
)(
c
-
fixedOff£ts
[
i
])<=0x7f) {

966 *
pOff£t
=
fixedOff£ts
[
i
];

967  0xf9+
i
;

971 if(
c
<0x80) {

974 } if(
c
<0x3400 ||

975 (
ušt32_t
)(
c
-0x10000)<(0x14000-0x10000) ||

976 (
ušt32_t
)(
c
-0x1d000)<=(0x1ffff-0x1d000)

979 *
pOff£t
=
c
&0x7fffff80;

980  ()(
c
>>7);

981 } if(0xe000<=
c
 && c!=0xfeff && c<0xfff0) {

983 *
pOff£t
=
c
&0x7fffff80;

984  ()((
c
-
g­Off£t
)>>7);

988 
	}
}

1008 
	$_SCSUFromUnicodeW™hOff£ts
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

1009 
UE¼ÜCode
 *
pE¼ÜCode
) {

1010 
UCÚv”‹r
 *
úv
;

1011 
SCSUD©a
 *
scsu
;

1012 cÚ¡ 
UCh¬
 *
sourû
, *
sourûLim™
;

1013 
ušt8_t
 *
rg‘
;

1014 
št32_t
 
rg‘C­ac™y
;

1015 
št32_t
 *
off£ts
;

1017 
UBoŞ
 
isSšgËBy‹Mode
;

1018 
ušt8_t
 
dyÇmicWšdow
;

1019 
ušt32_t
 
cu¼’tOff£t
;

1021 
ušt32_t
 
c
, 
d–
;

1023 
št32_t
 
sourûIndex
, 
ÃxtSourûIndex
;

1025 
št32_t
 
Ëngth
;

1028 
ušt32_t
 
off£t
;

1029 
UCh¬
 
Ëad
, 
Œa
;

1030 
code
;

1031 
št8_t
 
wšdow
;

1034 
úv
=
pArgs
->
cÚv”‹r
;

1035 
scsu
=(
SCSUD©a
 *)
úv
->
exŒaInfo
;

1038 
sourû
=
pArgs
->source;

1039 
sourûLim™
=
pArgs
->sourceLimit;

1040 
rg‘
=(
ušt8_t
 *)
pArgs
->target;

1041 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

1042 
off£ts
=
pArgs
->offsets;

1045 
isSšgËBy‹Mode
=
scsu
->
äomUIsSšgËBy‹Mode
;

1046 
dyÇmicWšdow
=
scsu
->
äomUDyÇmicWšdow
;

1047 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
];

1049 
c
=
úv
->
äomUCh¬32
;

1052 
sourûIndex
ğ
c
==0 ? 0 : -1;

1053 
ÃxtSourûIndex
=0;

1056 
loİ
:

1057 if(
isSšgËBy‹Mode
) {

1058 if(
c
!=0 && 
rg‘C­ac™y
>0) {

1059 
g‘T¿SšgË
;

1064 
sourû
<
sourûLim™
) {

1065 if(
rg‘C­ac™y
<=0) {

1067 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1070 
c
=*
sourû
++;

1071 ++
ÃxtSourûIndex
;

1073 if((
c
-0x20)<=0x5f) {

1075 *
rg‘
++=(
ušt8_t
)
c
;

1076 if(
off£ts
!=
NULL
) {

1077 *
off£ts
++=
sourûIndex
;

1079 --
rg‘C­ac™y
;

1080 } if(
c
<0x20) {

1081 if((1UL<<
c
)&0x2601 ) {

1083 *
rg‘
++=(
ušt8_t
)
c
;

1084 if(
off£ts
!=
NULL
) {

1085 *
off£ts
++=
sourûIndex
;

1087 --
rg‘C­ac™y
;

1090 
c
|=
SQ0
<<8;

1091 
Ëngth
=2;

1092 
ouutBy‹s
;

1094 } if((
d–
=
c
-
cu¼’tOff£t
)<=0x7f) {

1096 *
rg‘
++=(
ušt8_t
)(
d–
|0x80);

1097 if(
off£ts
!=
NULL
) {

1098 *
off£ts
++=
sourûIndex
;

1100 --
rg‘C­ac™y
;

1101 } if(
	`UTF_IS_SURROGATE
(
c
)) {

1102 if(
	`UTF_IS_SURROGATE_FIRST
(
c
)) {

1103 
g‘T¿SšgË
:

1104 
Ëad
=(
UCh¬
)
c
;

1105 if(
sourû
<
sourûLim™
) {

1107 
Œa
=*
sourû
;

1108 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

1109 ++
sourû
;

1110 ++
ÃxtSourûIndex
;

1111 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
Œa
);

1117 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1118 
’dloİ
;

1127 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1128 
’dloİ
;

1132 if((
d–
=
c
-
cu¼’tOff£t
)<=0x7f) {

1134 *
rg‘
++=(
ušt8_t
)(
d–
|0x80);

1135 if(
off£ts
!=
NULL
) {

1136 *
off£ts
++=
sourûIndex
;

1138 --
rg‘C­ac™y
;

1139 } if((
wšdow
=
	`g‘Wšdow
(
scsu
->
äomUDyÇmicOff£ts
, 
c
))>=0) {

1141 
dyÇmicWšdow
=
wšdow
;

1142 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
];

1143 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1144 
c
=((
ušt32_t
)(
SC0
+
dyÇmicWšdow
)<<8)|(c-
cu¼’tOff£t
)|0x80;

1145 
Ëngth
=2;

1146 
ouutBy‹s
;

1147 } if((
code
=
	`g‘DyÇmicOff£t
(
c
, &
off£t
))>=0) {

1150 
code
-=0x200;

1151 
dyÇmicWšdow
=
	`g‘NextDyÇmicWšdow
(
scsu
);

1152 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
]=
off£t
;

1153 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1154 
c
=((
ušt32_t
)
SDX
<<24)|((ušt32_t)
dyÇmicWšdow
<<21)|((ušt32_t)
code
<<8)|(c-
cu¼’tOff£t
)|0x80;

1155 
Ëngth
=4;

1156 
ouutBy‹s
;

1159 
isSšgËBy‹Mode
=
FALSE
;

1160 *
rg‘
++=(
ušt8_t
)
SCU
;

1161 if(
off£ts
!=
NULL
) {

1162 *
off£ts
++=
sourûIndex
;

1164 --
rg‘C­ac™y
;

1165 
c
=((
ušt32_t
)
Ëad
<<16)|
Œa
;

1166 
Ëngth
=4;

1167 
ouutBy‹s
;

1169 } if(
c
<0xa0) {

1171 
c
=(c&0x7f)|(
SQ0
+1)<<8;

1172 
Ëngth
=2;

1173 
ouutBy‹s
;

1174 } if(
c
==0xfeff || c>=0xfff0) {

1176 
c
|=
SQU
<<16;

1177 
Ëngth
=3;

1178 
ouutBy‹s
;

1181 if((
wšdow
=
	`g‘Wšdow
(
scsu
->
äomUDyÇmicOff£ts
, 
c
))>=0) {

1183 if(
sourû
>=
sourûLim™
 || 
	`isInOff£tWšdowOrDœeù
(
scsu
->
äomUDyÇmicOff£ts
[
wšdow
], *source)) {

1185 
dyÇmicWšdow
=
wšdow
;

1186 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
];

1187 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1188 
c
=((
ušt32_t
)(
SC0
+
dyÇmicWšdow
)<<8)|(c-
cu¼’tOff£t
)|0x80;

1189 
Ëngth
=2;

1190 
ouutBy‹s
;

1193 
c
=((
ušt32_t
)(
SQ0
+
wšdow
)<<8)|(c-
scsu
->
äomUDyÇmicOff£ts
[window])|0x80;

1194 
Ëngth
=2;

1195 
ouutBy‹s
;

1197 } if((
wšdow
=
	`g‘Wšdow
(
¡©icOff£ts
, 
c
))>=0) {

1199 
c
=((
ušt32_t
)(
SQ0
+
wšdow
)<<8)|(c-
¡©icOff£ts
[window]);

1200 
Ëngth
=2;

1201 
ouutBy‹s
;

1202 } if((
code
=
	`g‘DyÇmicOff£t
(
c
, &
off£t
))>=0) {

1204 
dyÇmicWšdow
=
	`g‘NextDyÇmicWšdow
(
scsu
);

1205 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
]=
off£t
;

1206 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1207 
c
=((
ušt32_t
)(
SD0
+
dyÇmicWšdow
)<<16)|((ušt32_t)
code
<<8)|(c-
cu¼’tOff£t
)|0x80;

1208 
Ëngth
=3;

1209 
ouutBy‹s
;

1210 } if((
ušt32_t
)(
c
-0x3400)<(0xd800-0x3400) &&

1211 (
sourû
>=
sourûLim™
 || (
ušt32_t
)(*source-0x3400)<(0xd800-0x3400))

1218 
isSšgËBy‹Mode
=
FALSE
;

1219 
c
|=
SCU
<<16;

1220 
Ëngth
=3;

1221 
ouutBy‹s
;

1224 
c
|=
SQU
<<16;

1225 
Ëngth
=3;

1226 
ouutBy‹s
;

1231 
c
=0;

1232 
sourûIndex
=
ÃxtSourûIndex
;

1235 if(
c
!=0 && 
rg‘C­ac™y
>0) {

1236 
g‘T¿Unicode
;

1241 
sourû
<
sourûLim™
) {

1242 if(
rg‘C­ac™y
<=0) {

1244 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1247 
c
=*
sourû
++;

1248 ++
ÃxtSourûIndex
;

1250 if((
ušt32_t
)(
c
-0x3400)<(0xd800-0x3400)) {

1252 if(
rg‘C­ac™y
>=2) {

1253 *
rg‘
++=(
ušt8_t
)(
c
>>8);

1254 *
rg‘
++=(
ušt8_t
)
c
;

1255 if(
off£ts
!=
NULL
) {

1256 *
off£ts
++=
sourûIndex
;

1257 *
off£ts
++=
sourûIndex
;

1259 
rg‘C­ac™y
-=2;

1261 
Ëngth
=2;

1262 
ouutBy‹s
;

1264 } if((
ušt32_t
)(
c
-0x3400)>=(0xf300-0x3400) ) {

1266 if(!(
sourû
<
sourûLim™
 && (
ušt32_t
)(*source-0x3400)<(0xd800-0x3400))) {

1267 if(((
ušt32_t
)(
c
-0x30)<10 || (uint32_t)(c-0x61)<26 || (uint32_t)(c-0x41)<26)) {

1269 
isSšgËBy‹Mode
=
TRUE
;

1270 
c
|=((
ušt32_t
)(
UC0
+
dyÇmicWšdow
)<<8)|c;

1271 
Ëngth
=2;

1272 
ouutBy‹s
;

1273 } if((
wšdow
=
	`g‘Wšdow
(
scsu
->
äomUDyÇmicOff£ts
, 
c
))>=0) {

1275 
isSšgËBy‹Mode
=
TRUE
;

1276 
dyÇmicWšdow
=
wšdow
;

1277 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
];

1278 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1279 
c
=((
ušt32_t
)(
UC0
+
dyÇmicWšdow
)<<8)|(c-
cu¼’tOff£t
)|0x80;

1280 
Ëngth
=2;

1281 
ouutBy‹s
;

1282 } if((
code
=
	`g‘DyÇmicOff£t
(
c
, &
off£t
))>=0) {

1284 
isSšgËBy‹Mode
=
TRUE
;

1285 
dyÇmicWšdow
=
	`g‘NextDyÇmicWšdow
(
scsu
);

1286 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
]=
off£t
;

1287 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1288 
c
=((
ušt32_t
)(
UD0
+
dyÇmicWšdow
)<<16)|((ušt32_t)
code
<<8)|(c-
cu¼’tOff£t
)|0x80;

1289 
Ëngth
=3;

1290 
ouutBy‹s
;

1295 
Ëngth
=2;

1296 
ouutBy‹s
;

1297 } if(
c
<0xe000) {

1299 if(
	`UTF_IS_SURROGATE_FIRST
(
c
)) {

1300 
g‘T¿Unicode
:

1301 
Ëad
=(
UCh¬
)
c
;

1302 if(
sourû
<
sourûLim™
) {

1304 
Œa
=*
sourû
;

1305 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

1306 ++
sourû
;

1307 ++
ÃxtSourûIndex
;

1308 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
Œa
);

1314 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1315 
’dloİ
;

1324 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1325 
’dloİ
;

1329 ifĞ(
wšdow
=
	`g‘Wšdow
(
scsu
->
äomUDyÇmicOff£ts
, 
c
))>=0 &&

1330 !(
sourû
<
sourûLim™
 && (
ušt32_t
)(*source-0x3400)<(0xd800-0x3400))

1337 
isSšgËBy‹Mode
=
TRUE
;

1338 
dyÇmicWšdow
=
wšdow
;

1339 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
];

1340 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1341 
c
=((
ušt32_t
)(
UC0
+
dyÇmicWšdow
)<<8)|(c-
cu¼’tOff£t
)|0x80;

1342 
Ëngth
=2;

1343 
ouutBy‹s
;

1344 } if(
sourû
<
sourûLim™
 && 
Ëad
==*source &&

1345 (
code
=
	`g‘DyÇmicOff£t
(
c
, &
off£t
))>=0

1348 
isSšgËBy‹Mode
=
TRUE
;

1349 
code
-=0x200;

1350 
dyÇmicWšdow
=
	`g‘NextDyÇmicWšdow
(
scsu
);

1351 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
]=
off£t
;

1352 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1353 
c
=((
ušt32_t
)
UDX
<<24)|((ušt32_t)
dyÇmicWšdow
<<21)|((ušt32_t)
code
<<8)|(c-
cu¼’tOff£t
)|0x80;

1354 
Ëngth
=4;

1355 
ouutBy‹s
;

1358 
c
=((
ušt32_t
)
Ëad
<<16)|
Œa
;

1359 
Ëngth
=4;

1360 
ouutBy‹s
;

1364 
c
|=
UQU
<<16;

1365 
Ëngth
=3;

1366 
ouutBy‹s
;

1370 
c
=0;

1371 
sourûIndex
=
ÃxtSourûIndex
;

1374 
’dloİ
:

1377 
scsu
->
äomUIsSšgËBy‹Mode
=
isSšgËBy‹Mode
;

1378 
scsu
->
äomUDyÇmicWšdow
=
dyÇmicWšdow
;

1380 
úv
->
äomUCh¬32
=
c
;

1383 
pArgs
->
sourû
=source;

1384 
pArgs
->
rg‘
=(*)target;

1385 
pArgs
->
off£ts
=offsets;

1388 
ouutBy‹s
:

1391 if(
Ëngth
<=
rg‘C­ac™y
) {

1392 if(
off£ts
==
NULL
) {

1393 
Ëngth
) {

1396 *
rg‘
++=(
ušt8_t
)(
c
>>24);

1398 *
rg‘
++=(
ušt8_t
)(
c
>>16);

1400 *
rg‘
++=(
ušt8_t
)(
c
>>8);

1402 *
rg‘
++=(
ušt8_t
)
c
;

1408 
Ëngth
) {

1411 *
rg‘
++=(
ušt8_t
)(
c
>>24);

1412 *
off£ts
++=
sourûIndex
;

1414 *
rg‘
++=(
ušt8_t
)(
c
>>16);

1415 *
off£ts
++=
sourûIndex
;

1417 *
rg‘
++=(
ušt8_t
)(
c
>>8);

1418 *
off£ts
++=
sourûIndex
;

1420 *
rg‘
++=(
ušt8_t
)
c
;

1421 *
off£ts
++=
sourûIndex
;

1427 
rg‘C­ac™y
-=
Ëngth
;

1430 
c
=0;

1431 
sourûIndex
=
ÃxtSourûIndex
;

1432 
loİ
;

1434 
ušt8_t
 *
p
;

1444 
Ëngth
-=
rg‘C­ac™y
;

1445 
p
=(
ušt8_t
 *)
úv
->
ch¬E¼ÜBufãr
;

1446 
Ëngth
) {

1449 *
p
++=(
ušt8_t
)(
c
>>24);

1451 *
p
++=(
ušt8_t
)(
c
>>16);

1453 *
p
++=(
ušt8_t
)(
c
>>8);

1455 *
p
=(
ušt8_t
)
c
;

1460 
úv
->
ch¬E¼ÜBufãrL’gth
=(
št8_t
)
Ëngth
;

1463 
c
>>=8*
Ëngth
;

1464 
rg‘C­ac™y
) {

1467 *
rg‘
++=(
ušt8_t
)(
c
>>16);

1468 if(
off£ts
!=
NULL
) {

1469 *
off£ts
++=
sourûIndex
;

1472 *
rg‘
++=(
ušt8_t
)(
c
>>8);

1473 if(
off£ts
!=
NULL
) {

1474 *
off£ts
++=
sourûIndex
;

1477 *
rg‘
++=(
ušt8_t
)
c
;

1478 if(
off£ts
!=
NULL
) {

1479 *
off£ts
++=
sourûIndex
;

1486 
rg‘C­ac™y
=0;

1487 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1488 
c
=0;

1489 
’dloİ
;

1491 
	}
}

1501 
	$_SCSUFromUnicode
(
UCÚv”‹rFromUnicodeArgs
 *
pArgs
,

1502 
UE¼ÜCode
 *
pE¼ÜCode
) {

1503 
UCÚv”‹r
 *
úv
;

1504 
SCSUD©a
 *
scsu
;

1505 cÚ¡ 
UCh¬
 *
sourû
, *
sourûLim™
;

1506 
ušt8_t
 *
rg‘
;

1507 
št32_t
 
rg‘C­ac™y
;

1509 
UBoŞ
 
isSšgËBy‹Mode
;

1510 
ušt8_t
 
dyÇmicWšdow
;

1511 
ušt32_t
 
cu¼’tOff£t
;

1513 
ušt32_t
 
c
, 
d–
;

1515 
št32_t
 
Ëngth
;

1518 
ušt32_t
 
off£t
;

1519 
UCh¬
 
Ëad
, 
Œa
;

1520 
code
;

1521 
št8_t
 
wšdow
;

1524 
úv
=
pArgs
->
cÚv”‹r
;

1525 
scsu
=(
SCSUD©a
 *)
úv
->
exŒaInfo
;

1528 
sourû
=
pArgs
->source;

1529 
sourûLim™
=
pArgs
->sourceLimit;

1530 
rg‘
=(
ušt8_t
 *)
pArgs
->target;

1531 
rg‘C­ac™y
=(
št32_t
)(
pArgs
->
rg‘Lim™
-pArgs->
rg‘
);

1534 
isSšgËBy‹Mode
=
scsu
->
äomUIsSšgËBy‹Mode
;

1535 
dyÇmicWšdow
=
scsu
->
äomUDyÇmicWšdow
;

1536 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
];

1538 
c
=
úv
->
äomUCh¬32
;

1541 
loİ
:

1542 if(
isSšgËBy‹Mode
) {

1543 if(
c
!=0 && 
rg‘C­ac™y
>0) {

1544 
g‘T¿SšgË
;

1549 
sourû
<
sourûLim™
) {

1550 if(
rg‘C­ac™y
<=0) {

1552 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1555 
c
=*
sourû
++;

1557 if((
c
-0x20)<=0x5f) {

1559 *
rg‘
++=(
ušt8_t
)
c
;

1560 --
rg‘C­ac™y
;

1561 } if(
c
<0x20) {

1562 if((1UL<<
c
)&0x2601 ) {

1564 *
rg‘
++=(
ušt8_t
)
c
;

1565 --
rg‘C­ac™y
;

1568 
c
|=
SQ0
<<8;

1569 
Ëngth
=2;

1570 
ouutBy‹s
;

1572 } if((
d–
=
c
-
cu¼’tOff£t
)<=0x7f) {

1574 *
rg‘
++=(
ušt8_t
)(
d–
|0x80);

1575 --
rg‘C­ac™y
;

1576 } if(
	`UTF_IS_SURROGATE
(
c
)) {

1577 if(
	`UTF_IS_SURROGATE_FIRST
(
c
)) {

1578 
g‘T¿SšgË
:

1579 
Ëad
=(
UCh¬
)
c
;

1580 if(
sourû
<
sourûLim™
) {

1582 
Œa
=*
sourû
;

1583 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

1584 ++
sourû
;

1585 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
Œa
);

1591 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1592 
’dloİ
;

1601 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1602 
’dloİ
;

1606 if((
d–
=
c
-
cu¼’tOff£t
)<=0x7f) {

1608 *
rg‘
++=(
ušt8_t
)(
d–
|0x80);

1609 --
rg‘C­ac™y
;

1610 } if((
wšdow
=
	`g‘Wšdow
(
scsu
->
äomUDyÇmicOff£ts
, 
c
))>=0) {

1612 
dyÇmicWšdow
=
wšdow
;

1613 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
];

1614 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1615 
c
=((
ušt32_t
)(
SC0
+
dyÇmicWšdow
)<<8)|(c-
cu¼’tOff£t
)|0x80;

1616 
Ëngth
=2;

1617 
ouutBy‹s
;

1618 } if((
code
=
	`g‘DyÇmicOff£t
(
c
, &
off£t
))>=0) {

1621 
code
-=0x200;

1622 
dyÇmicWšdow
=
	`g‘NextDyÇmicWšdow
(
scsu
);

1623 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
]=
off£t
;

1624 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1625 
c
=((
ušt32_t
)
SDX
<<24)|((ušt32_t)
dyÇmicWšdow
<<21)|((ušt32_t)
code
<<8)|(c-
cu¼’tOff£t
)|0x80;

1626 
Ëngth
=4;

1627 
ouutBy‹s
;

1630 
isSšgËBy‹Mode
=
FALSE
;

1631 *
rg‘
++=(
ušt8_t
)
SCU
;

1632 --
rg‘C­ac™y
;

1633 
c
=((
ušt32_t
)
Ëad
<<16)|
Œa
;

1634 
Ëngth
=4;

1635 
ouutBy‹s
;

1637 } if(
c
<0xa0) {

1639 
c
=(c&0x7f)|(
SQ0
+1)<<8;

1640 
Ëngth
=2;

1641 
ouutBy‹s
;

1642 } if(
c
==0xfeff || c>=0xfff0) {

1644 
c
|=
SQU
<<16;

1645 
Ëngth
=3;

1646 
ouutBy‹s
;

1649 if((
wšdow
=
	`g‘Wšdow
(
scsu
->
äomUDyÇmicOff£ts
, 
c
))>=0) {

1651 if(
sourû
>=
sourûLim™
 || 
	`isInOff£tWšdowOrDœeù
(
scsu
->
äomUDyÇmicOff£ts
[
wšdow
], *source)) {

1653 
dyÇmicWšdow
=
wšdow
;

1654 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
];

1655 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1656 
c
=((
ušt32_t
)(
SC0
+
dyÇmicWšdow
)<<8)|(c-
cu¼’tOff£t
)|0x80;

1657 
Ëngth
=2;

1658 
ouutBy‹s
;

1661 
c
=((
ušt32_t
)(
SQ0
+
wšdow
)<<8)|(c-
scsu
->
äomUDyÇmicOff£ts
[window])|0x80;

1662 
Ëngth
=2;

1663 
ouutBy‹s
;

1665 } if((
wšdow
=
	`g‘Wšdow
(
¡©icOff£ts
, 
c
))>=0) {

1667 
c
=((
ušt32_t
)(
SQ0
+
wšdow
)<<8)|(c-
¡©icOff£ts
[window]);

1668 
Ëngth
=2;

1669 
ouutBy‹s
;

1670 } if((
code
=
	`g‘DyÇmicOff£t
(
c
, &
off£t
))>=0) {

1672 
dyÇmicWšdow
=
	`g‘NextDyÇmicWšdow
(
scsu
);

1673 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
]=
off£t
;

1674 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1675 
c
=((
ušt32_t
)(
SD0
+
dyÇmicWšdow
)<<16)|((ušt32_t)
code
<<8)|(c-
cu¼’tOff£t
)|0x80;

1676 
Ëngth
=3;

1677 
ouutBy‹s
;

1678 } if((
ušt32_t
)(
c
-0x3400)<(0xd800-0x3400) &&

1679 (
sourû
>=
sourûLim™
 || (
ušt32_t
)(*source-0x3400)<(0xd800-0x3400))

1686 
isSšgËBy‹Mode
=
FALSE
;

1687 
c
|=
SCU
<<16;

1688 
Ëngth
=3;

1689 
ouutBy‹s
;

1692 
c
|=
SQU
<<16;

1693 
Ëngth
=3;

1694 
ouutBy‹s
;

1699 
c
=0;

1702 if(
c
!=0 && 
rg‘C­ac™y
>0) {

1703 
g‘T¿Unicode
;

1708 
sourû
<
sourûLim™
) {

1709 if(
rg‘C­ac™y
<=0) {

1711 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1714 
c
=*
sourû
++;

1716 if((
ušt32_t
)(
c
-0x3400)<(0xd800-0x3400)) {

1718 if(
rg‘C­ac™y
>=2) {

1719 *
rg‘
++=(
ušt8_t
)(
c
>>8);

1720 *
rg‘
++=(
ušt8_t
)
c
;

1721 
rg‘C­ac™y
-=2;

1723 
Ëngth
=2;

1724 
ouutBy‹s
;

1726 } if((
ušt32_t
)(
c
-0x3400)>=(0xf300-0x3400) ) {

1728 if(!(
sourû
<
sourûLim™
 && (
ušt32_t
)(*source-0x3400)<(0xd800-0x3400))) {

1729 if(((
ušt32_t
)(
c
-0x30)<10 || (uint32_t)(c-0x61)<26 || (uint32_t)(c-0x41)<26)) {

1731 
isSšgËBy‹Mode
=
TRUE
;

1732 
c
|=((
ušt32_t
)(
UC0
+
dyÇmicWšdow
)<<8)|c;

1733 
Ëngth
=2;

1734 
ouutBy‹s
;

1735 } if((
wšdow
=
	`g‘Wšdow
(
scsu
->
äomUDyÇmicOff£ts
, 
c
))>=0) {

1737 
isSšgËBy‹Mode
=
TRUE
;

1738 
dyÇmicWšdow
=
wšdow
;

1739 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
];

1740 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1741 
c
=((
ušt32_t
)(
UC0
+
dyÇmicWšdow
)<<8)|(c-
cu¼’tOff£t
)|0x80;

1742 
Ëngth
=2;

1743 
ouutBy‹s
;

1744 } if((
code
=
	`g‘DyÇmicOff£t
(
c
, &
off£t
))>=0) {

1746 
isSšgËBy‹Mode
=
TRUE
;

1747 
dyÇmicWšdow
=
	`g‘NextDyÇmicWšdow
(
scsu
);

1748 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
]=
off£t
;

1749 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1750 
c
=((
ušt32_t
)(
UD0
+
dyÇmicWšdow
)<<16)|((ušt32_t)
code
<<8)|(c-
cu¼’tOff£t
)|0x80;

1751 
Ëngth
=3;

1752 
ouutBy‹s
;

1757 
Ëngth
=2;

1758 
ouutBy‹s
;

1759 } if(
c
<0xe000) {

1761 if(
	`UTF_IS_SURROGATE_FIRST
(
c
)) {

1762 
g‘T¿Unicode
:

1763 
Ëad
=(
UCh¬
)
c
;

1764 if(
sourû
<
sourûLim™
) {

1766 
Œa
=*
sourû
;

1767 if(
	`UTF_IS_SECOND_SURROGATE
(
Œa
)) {

1768 ++
sourû
;

1769 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
Œa
);

1775 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1776 
’dloİ
;

1785 *
pE¼ÜCode
=
U_ILLEGAL_CHAR_FOUND
;

1786 
’dloİ
;

1790 ifĞ(
wšdow
=
	`g‘Wšdow
(
scsu
->
äomUDyÇmicOff£ts
, 
c
))>=0 &&

1791 !(
sourû
<
sourûLim™
 && (
ušt32_t
)(*source-0x3400)<(0xd800-0x3400))

1798 
isSšgËBy‹Mode
=
TRUE
;

1799 
dyÇmicWšdow
=
wšdow
;

1800 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
];

1801 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1802 
c
=((
ušt32_t
)(
UC0
+
dyÇmicWšdow
)<<8)|(c-
cu¼’tOff£t
)|0x80;

1803 
Ëngth
=2;

1804 
ouutBy‹s
;

1805 } if(
sourû
<
sourûLim™
 && 
Ëad
==*source &&

1806 (
code
=
	`g‘DyÇmicOff£t
(
c
, &
off£t
))>=0

1809 
isSšgËBy‹Mode
=
TRUE
;

1810 
code
-=0x200;

1811 
dyÇmicWšdow
=
	`g‘NextDyÇmicWšdow
(
scsu
);

1812 
cu¼’tOff£t
=
scsu
->
äomUDyÇmicOff£ts
[
dyÇmicWšdow
]=
off£t
;

1813 
	`u£DyÇmicWšdow
(
scsu
, 
dyÇmicWšdow
);

1814 
c
=((
ušt32_t
)
UDX
<<24)|((ušt32_t)
dyÇmicWšdow
<<21)|((ušt32_t)
code
<<8)|(c-
cu¼’tOff£t
)|0x80;

1815 
Ëngth
=4;

1816 
ouutBy‹s
;

1819 
c
=((
ušt32_t
)
Ëad
<<16)|
Œa
;

1820 
Ëngth
=4;

1821 
ouutBy‹s
;

1825 
c
|=
UQU
<<16;

1826 
Ëngth
=3;

1827 
ouutBy‹s
;

1831 
c
=0;

1834 
’dloİ
:

1837 
scsu
->
äomUIsSšgËBy‹Mode
=
isSšgËBy‹Mode
;

1838 
scsu
->
äomUDyÇmicWšdow
=
dyÇmicWšdow
;

1840 
úv
->
äomUCh¬32
=
c
;

1843 
pArgs
->
sourû
=source;

1844 
pArgs
->
rg‘
=(*)target;

1847 
ouutBy‹s
:

1850 if(
Ëngth
<=
rg‘C­ac™y
) {

1851 
Ëngth
) {

1854 *
rg‘
++=(
ušt8_t
)(
c
>>24);

1856 *
rg‘
++=(
ušt8_t
)(
c
>>16);

1858 *
rg‘
++=(
ušt8_t
)(
c
>>8);

1860 *
rg‘
++=(
ušt8_t
)
c
;

1865 
rg‘C­ac™y
-=
Ëngth
;

1868 
c
=0;

1869 
loİ
;

1871 
ušt8_t
 *
p
;

1881 
Ëngth
-=
rg‘C­ac™y
;

1882 
p
=(
ušt8_t
 *)
úv
->
ch¬E¼ÜBufãr
;

1883 
Ëngth
) {

1886 *
p
++=(
ušt8_t
)(
c
>>24);

1888 *
p
++=(
ušt8_t
)(
c
>>16);

1890 *
p
++=(
ušt8_t
)(
c
>>8);

1892 *
p
=(
ušt8_t
)
c
;

1897 
úv
->
ch¬E¼ÜBufãrL’gth
=(
št8_t
)
Ëngth
;

1900 
c
>>=8*
Ëngth
;

1901 
rg‘C­ac™y
) {

1904 *
rg‘
++=(
ušt8_t
)(
c
>>16);

1906 *
rg‘
++=(
ušt8_t
)(
c
>>8);

1908 *
rg‘
++=(
ušt8_t
)
c
;

1914 
rg‘C­ac™y
=0;

1915 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1916 
c
=0;

1917 
’dloİ
;

1919 
	}
}

1924 
	$_SCSUG‘Name
(cÚ¡ 
UCÚv”‹r
 *
úv
) {

1925 
SCSUD©a
 *
scsu
=(SCSUD©¨*)
úv
->
exŒaInfo
;

1927 
scsu
->
loÿË
) {

1928 
l_ja
:

1933 
	}
}

1936 
	sşÚeSCSUSŒuù


1938 
UCÚv”‹r
 
	múv
;

1939 
SCSUD©a
 
	mmyd©a
;

1942 
UCÚv”‹r
 *

1943 
	$_SCSUSaãClÚe
(cÚ¡ 
UCÚv”‹r
 *
úv
,

1944 *
¡ackBufãr
,

1945 
št32_t
 *
pBufãrSize
,

1946 
UE¼ÜCode
 *
¡©us
)

1948 
şÚeSCSUSŒuù
 * 
loÿlClÚe
;

1949 
št32_t
 
bufãrSizeN“ded
 = (
şÚeSCSUSŒuù
);

1951 ià(
	`U_FAILURE
(*
¡©us
)){

1955 ià(*
pBufãrSize
 == 0){

1956 *
pBufãrSize
 = 
bufãrSizeN“ded
;

1960 
loÿlClÚe
 = (
şÚeSCSUSŒuù
 *)
¡ackBufãr
;

1963 
	`u´v_memıy
(&
loÿlClÚe
->
myd©a
, 
úv
->
exŒaInfo
, (
SCSUD©a
));

1964 
loÿlClÚe
->
úv
.
exŒaInfo
 = &loÿlClÚe->
myd©a
;

1965 
loÿlClÚe
->
úv
.
isExŒaLoÿl
 = 
TRUE
;

1967  &
loÿlClÚe
->
úv
;

1968 
	}
}

1971 cÚ¡ 
UCÚv”‹rIm¶
 
	g_SCSUIm¶
={

1972 
UCNV_SCSU
,

1974 
NULL
,

1975 
NULL
,

1977 
_SCSUO³n
,

1978 
_SCSUClo£
,

1979 
_SCSURe£t
,

1981 
_SCSUToUnicode
,

1982 
_SCSUToUnicodeW™hOff£ts
,

1983 
_SCSUFromUnicode
,

1984 
_SCSUFromUnicodeW™hOff£ts
,

1985 
NULL
,

1987 
NULL
,

1988 
_SCSUG‘Name
,

1989 
NULL
,

1990 
_SCSUSaãClÚe
,

1991 
uúv_g‘Com¶‘eUnicodeS‘


1994 cÚ¡ 
UCÚv”‹rSticD©a
 
	g_SCSUSticD©a
={

1995 (
UCÚv”‹rSticD©a
),

1998 
UCNV_IBM
, 
UCNV_SCSU
,

2005 
FALSE
, FALSE,

2011 cÚ¡ 
UCÚv”‹rSh¬edD©a
 
	g_SCSUD©a
={

2012 (
UCÚv”‹rSh¬edD©a
), ~((
ušt32_t
)0),

2013 
NULL
, NULL, &
_SCSUSticD©a
, 
FALSE
, &
_SCSUIm¶
,

	@ucnvsel.cpp

27 
	~"unicode/uúv£l.h
"

29 
	~<¡ršg.h
>

31 
	~"unicode/uch¬.h
"

32 
	~"unicode/uni£t.h
"

33 
	~"unicode/uúv.h
"

34 
	~"unicode/u¡ršg.h
"

35 
	~"unicode/uchr™”.h
"

36 
	~"uŒ›2.h
"

37 
	~"´İsvec.h
"

38 
	~"uas£¹.h
"

39 
	~"ucmnd©a.h
"

40 
	~"u’umimp.h
"

41 
	~"cmemÜy.h
"

42 
	~"c¡ršg.h
"

44 
U_NAMESPACE_USE


46 
	sUCÚv”‹rS–eùÜ
 {

47 
UTr›2
 *
	mŒ›
;

48 
ušt32_t
* 
	mpv
;

49 
št32_t
 
	mpvCouÁ
;

50 ** 
	m’codšgs
;

51 
št32_t
 
	m’codšgsCouÁ
;

52 
št32_t
 
	m’codšgSŒL’gth
;

53 
ušt8_t
* 
	msw­³d
;

54 
UBoŞ
 
	mownPv
, 
	mownEncodšgSŒšgs
;

57 
	$g’”©eS–eùÜD©a
(
UCÚv”‹rS–eùÜ
* 
»suÉ
,

58 
UPrİsVeùÜs
 *
upvec
,

59 cÚ¡ 
US‘
* 
exşudedCodePošts
,

60 cÚ¡ 
UCÚv”‹rUnicodeS‘
 
whichS‘
,

61 
UE¼ÜCode
* 
¡©us
) {

62 ià(
	`U_FAILURE
(*
¡©us
)) {

66 
št32_t
 
cŞumns
 = (
»suÉ
->
’codšgsCouÁ
+31)/32;

69 
št32_t
 
cŞ
 = 0; cŞ < 
cŞumns
; col++) {

70 
	`upvec_£tV®ue
(
upvec
, 
UPVEC_ERROR_VALUE_CP
, UPVEC_ERROR_VALUE_CP,

71 
cŞ
, ~0, ~0, 
¡©us
);

74 
št32_t
 
i
 = 0; i < 
»suÉ
->
’codšgsCouÁ
; ++i) {

75 
ušt32_t
 
mask
;

76 
ušt32_t
 
cŞumn
;

77 
št32_t
 
™em_couÁ
;

78 
št32_t
 
j
;

79 
UCÚv”‹r
* 
‹¡_cÚv”‹r
 = 
	`uúv_İ’
(
»suÉ
->
’codšgs
[
i
], 
¡©us
);

80 ià(
	`U_FAILURE
(*
¡©us
)) {

83 
US‘
* 
unicode_pošt_£t
;

84 
unicode_pošt_£t
 = 
	`u£t_İ’
(1, 0);

86 
	`uúv_g‘UnicodeS‘
(
‹¡_cÚv”‹r
, 
unicode_pošt_£t
,

87 
whichS‘
, 
¡©us
);

88 ià(
	`U_FAILURE
(*
¡©us
)) {

89 
	`uúv_şo£
(
‹¡_cÚv”‹r
);

93 
cŞumn
 = 
i
 / 32;

94 
mask
 = 1 << (
i
%32);

96 
™em_couÁ
 = 
	`u£t_g‘I‹mCouÁ
(
unicode_pošt_£t
);

98 
j
 = 0; j < 
™em_couÁ
; ++j) {

99 
UCh¬32
 
¡¬t_ch¬
;

100 
UCh¬32
 
’d_ch¬
;

101 
UE¼ÜCode
 
sm®lStus
 = 
U_ZERO_ERROR
;

102 
	`u£t_g‘I‹m
(
unicode_pošt_£t
, 
j
, &
¡¬t_ch¬
, &
’d_ch¬
, 
NULL
, 0,

103 &
sm®lStus
);

104 ià(
	`U_FAILURE
(
sm®lStus
)) {

108 
	`upvec_£tV®ue
(
upvec
, 
¡¬t_ch¬
, 
’d_ch¬
, 
cŞumn
, ~0, 
mask
,

109 
¡©us
);

112 
	`uúv_şo£
(
‹¡_cÚv”‹r
);

113 
	`u£t_şo£
(
unicode_pošt_£t
);

114 ià(
	`U_FAILURE
(*
¡©us
)) {

120 ià(
exşudedCodePošts
) {

121 
št32_t
 
™em_couÁ
 = 
	`u£t_g‘I‹mCouÁ
(
exşudedCodePošts
);

122 
št32_t
 
j
 = 0; j < 
™em_couÁ
; ++j) {

123 
UCh¬32
 
¡¬t_ch¬
;

124 
UCh¬32
 
’d_ch¬
;

126 
	`u£t_g‘I‹m
(
exşudedCodePošts
, 
j
, &
¡¬t_ch¬
, &
’d_ch¬
, 
NULL
, 0,

127 
¡©us
);

128 
št32_t
 
cŞ
 = 0; cŞ < 
cŞumns
; col++) {

129 
	`upvec_£tV®ue
(
upvec
, 
¡¬t_ch¬
, 
’d_ch¬
, 
cŞ
, ~0, ~0,

130 
¡©us
);

137 
»suÉ
->
Œ›
 = 
	`upvec_com·ùToUTr›2W™hRowIndexes
(
upvec
, 
¡©us
);

138 
»suÉ
->
pv
 = 
	`upvec_şÚeA¼ay
(
upvec
, &»suÉ->
pvCouÁ
, 
NULL
, 
¡©us
);

139 
»suÉ
->
pvCouÁ
 *ğ
cŞumns
;

140 
»suÉ
->
ownPv
 = 
TRUE
;

141 
	}
}

145 
U_CAPI
 
UCÚv”‹rS–eùÜ
* 
U_EXPORT2


146 
	$uúv£l_İ’
(cÚ¡ * cÚ¡* 
cÚv”‹rLi¡
, 
št32_t
 
cÚv”‹rLi¡Size
,

147 cÚ¡ 
US‘
* 
exşudedCodePošts
,

148 cÚ¡ 
UCÚv”‹rUnicodeS‘
 
whichS‘
, 
UE¼ÜCode
* 
¡©us
) {

150 ià(
	`U_FAILURE
(*
¡©us
)) {

151  
NULL
;

154 ià(
cÚv”‹rLi¡Size
 < 0 || (
cÚv”‹rLi¡
 =ğ
NULL
 && converterListSize != 0)) {

155 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

156  
NULL
;

160 
LoÿlUCÚv”‹rS–eùÜPoš‹r
 
	`ÃwS–eùÜ
(

161 (
UCÚv”‹rS–eùÜ
*)
	`u´v_m®loc
((UConverterSelector)));

162 ià(
ÃwS–eùÜ
.
	`isNuÎ
()) {

163 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

164  
NULL
;

166 
	`u´v_mem£t
(
ÃwS–eùÜ
.
	`g‘AlŸs
(), 0, (
UCÚv”‹rS–eùÜ
));

168 ià(
cÚv”‹rLi¡Size
 == 0) {

169 
cÚv”‹rLi¡
 = 
NULL
;

170 
cÚv”‹rLi¡Size
 = 
	`uúv_couÁAvaabË
();

172 
ÃwS–eùÜ
->
’codšgs
 =

173 (**)
	`u´v_m®loc
(
cÚv”‹rLi¡Size
 * (*));

174 ià(!
ÃwS–eùÜ
->
’codšgs
) {

175 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

176  
NULL
;

178 
ÃwS–eùÜ
->
’codšgs
[0] = 
NULL
;

181 
št32_t
 
tÙ®Size
 = 0;

182 
št32_t
 
i
;

183 
i
 = 0; i < 
cÚv”‹rLi¡Size
; i++) {

184 
tÙ®Size
 +=

185 (
št32_t
)
	`u´v_¡¾’
(
cÚv”‹rLi¡
 !ğ
NULL
 ? cÚv”‹rLi¡[
i
] : 
	`uúv_g‘AvaabËName
(i)) + 1;

188 
št32_t
 
’codšgSŒPaddšg
 = 
tÙ®Size
 & 3;

189 ià(
’codšgSŒPaddšg
 != 0) {

190 
’codšgSŒPaddšg
 = 4 -ƒncodingStrPadding;

192 
ÃwS–eùÜ
->
’codšgSŒL’gth
 = 
tÙ®Size
 +ğ
’codšgSŒPaddšg
;

193 * 
®lSŒšgs
 = (*è
	`u´v_m®loc
(
tÙ®Size
);

194 ià(!
®lSŒšgs
) {

195 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

196  
NULL
;

199 
i
 = 0; i < 
cÚv”‹rLi¡Size
; i++) {

200 
ÃwS–eùÜ
->
’codšgs
[
i
] = 
®lSŒšgs
;

201 
	`u´v_¡rıy
(
ÃwS–eùÜ
->
’codšgs
[
i
],

202 
cÚv”‹rLi¡
 !ğ
NULL
 ? cÚv”‹rLi¡[
i
] : 
	`uúv_g‘AvaabËName
(i));

203 
®lSŒšgs
 +ğ
	`u´v_¡¾’
(
ÃwS–eùÜ
->
’codšgs
[
i
]) + 1;

205 
’codšgSŒPaddšg
 > 0) {

206 *
®lSŒšgs
++ = 0;

207 --
’codšgSŒPaddšg
;

210 
ÃwS–eùÜ
->
ownEncodšgSŒšgs
 = 
TRUE
;

211 
ÃwS–eùÜ
->
’codšgsCouÁ
 = 
cÚv”‹rLi¡Size
;

212 
UPrİsVeùÜs
 *
upvec
 = 
	`upvec_İ’
((
cÚv”‹rLi¡Size
+31)/32, 
¡©us
);

213 
	`g’”©eS–eùÜD©a
(
ÃwS–eùÜ
.
	`g‘AlŸs
(), 
upvec
, 
exşudedCodePošts
, 
whichS‘
, 
¡©us
);

214 
	`upvec_şo£
(
upvec
);

216 ià(
	`U_FAILURE
(*
¡©us
)) {

217  
NULL
;

220  
ÃwS–eùÜ
.
	`Üphª
();

221 
	}
}

224 
U_CAPI
 
U_EXPORT2


225 
	$uúv£l_şo£
(
UCÚv”‹rS–eùÜ
 *
£l
) {

226 ià(!
£l
) {

229 ià(
£l
->
ownEncodšgSŒšgs
) {

230 
	`u´v_ä“
(
£l
->
’codšgs
[0]);

232 
	`u´v_ä“
(
£l
->
’codšgs
);

233 ià(
£l
->
ownPv
) {

234 
	`u´v_ä“
(
£l
->
pv
);

236 
	`uŒ›2_şo£
(
£l
->
Œ›
);

237 
	`u´v_ä“
(
£l
->
sw­³d
);

238 
	`u´v_ä“
(
£l
);

239 
	}
}

241 cÚ¡ 
UD©aInfo
 
	gd©aInfo
 = {

242 (
UD©aInfo
),

245 
U_IS_BIG_ENDIAN
,

246 
U_CHARSET_FAMILY
,

247 
U_SIZEOF_UCHAR
,

256 
	mUCNVSEL_INDEX_TRIE_SIZE
,

257 
	mUCNVSEL_INDEX_PV_COUNT
,

258 
	mUCNVSEL_INDEX_NAMES_COUNT
,

259 
	mUCNVSEL_INDEX_NAMES_LENGTH
,

260 
	mUCNVSEL_INDEX_SIZE
 = 15,

261 
	mUCNVSEL_INDEX_COUNT
 = 16

277 
U_CAPI
 
št32_t
 
U_EXPORT2


278 
	$uúv£l_£rŸlize
(cÚ¡ 
UCÚv”‹rS–eùÜ
* 
£l
,

279 * 
bufãr
, 
št32_t
 
bufãrC­ac™y
, 
UE¼ÜCode
* 
¡©us
) {

281 ià(
	`U_FAILURE
(*
¡©us
)) {

285 
ušt8_t
 *
p
 = (ušt8_ˆ*)
bufãr
;

286 ià(
bufãrC­ac™y
 < 0 ||

287 (
bufãrC­ac™y
 > 0 && (
p
 =ğ
NULL
 || (
	`U_POINTER_MASK_LSB
(p, 3) != 0)))

289 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

293 
št32_t
 
£rŸlizedTr›Size
 = 
	`uŒ›2_£rŸlize
(
£l
->
Œ›
, 
NULL
, 0, 
¡©us
);

294 ià(*
¡©us
 !ğ
U_BUFFER_OVERFLOW_ERROR
 && 
	`U_FAILURE
(*status)) {

297 *
¡©us
 = 
U_ZERO_ERROR
;

299 
D©aH—d”
 
h—d”
;

300 
	`u´v_mem£t
(&
h—d”
, 0, (header));

301 
h—d”
.
d©aH—d”
.
h—d”Size
 = (
ušt16_t
)(((header) + 15) & ~15);

302 
h—d”
.
d©aH—d”
.
magic1
 = 0xda;

303 
h—d”
.
d©aH—d”
.
magic2
 = 0x27;

304 
	`u´v_memıy
(&
h—d”
.
šfo
, &
d©aInfo
, (dataInfo));

306 
št32_t
 
šdexes
[
UCNVSEL_INDEX_COUNT
] = {

307 
£rŸlizedTr›Size
,

308 
£l
->
pvCouÁ
,

309 
£l
->
’codšgsCouÁ
,

310 
£l
->
’codšgSŒL’gth


313 
št32_t
 
tÙ®Size
 =

314 
h—d”
.
d©aH—d”
.
h—d”Size
 +

315 (
št32_t
)(
šdexes
) +

316 
£rŸlizedTr›Size
 +

317 
£l
->
pvCouÁ
 * 4 +

318 
£l
->
’codšgSŒL’gth
;

319 
šdexes
[
UCNVSEL_INDEX_SIZE
] = 
tÙ®Size
 - 
h—d”
.
d©aH—d”
.
h—d”Size
;

320 ià(
tÙ®Size
 > 
bufãrC­ac™y
) {

321 *
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

322  
tÙ®Size
;

325 
št32_t
 
Ëngth
 = 
h—d”
.
d©aH—d”
.
h—d”Size
;

326 
	`u´v_memıy
(
p
, &
h—d”
, (header));

327 
	`u´v_mem£t
(
p
 + (
h—d”
), 0, 
Ëngth
 - (header));

328 
p
 +ğ
Ëngth
;

330 
Ëngth
 = (
št32_t
)(
šdexes
);

331 
	`u´v_memıy
(
p
, 
šdexes
, 
Ëngth
);

332 
p
 +ğ
Ëngth
;

334 
	`uŒ›2_£rŸlize
(
£l
->
Œ›
, 
p
, 
£rŸlizedTr›Size
, 
¡©us
);

335 
p
 +ğ
£rŸlizedTr›Size
;

337 
Ëngth
 = 
£l
->
pvCouÁ
 * 4;

338 
	`u´v_memıy
(
p
, 
£l
->
pv
, 
Ëngth
);

339 
p
 +ğ
Ëngth
;

341 
	`u´v_memıy
(
p
, 
£l
->
’codšgs
[0], s–->
’codšgSŒL’gth
);

342 
p
 +ğ
£l
->
’codšgSŒL’gth
;

344  
tÙ®Size
;

345 
	}
}

364 
št32_t


365 
	$uúv£l_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

366 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
,

367 *
outD©a
, 
UE¼ÜCode
 *
¡©us
) {

369 
št32_t
 
h—d”Size
 = 
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
¡©us
);

370 if(
	`U_FAILURE
(*
¡©us
)) {

375 cÚ¡ 
UD©aInfo
 *
pInfo
 = (cÚ¡ UD©aInfØ*)((cÚ¡ *)
šD©a
 + 4);

377 
pInfo
->
d©aFÜm©
[0] == 0x43 &&

378 
pInfo
->
d©aFÜm©
[1] == 0x53 &&

379 
pInfo
->
d©aFÜm©
[2] == 0x65 &&

380 
pInfo
->
d©aFÜm©
[3] == 0x6c

382 
	`ud©a_´štE¼Ü
(
ds
, "ucnvsel_swap(): data format %02x.%02x.%02x.%02x is‚ot„ecognized‡s UConverterSelector data\n",

383 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

384 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3]);

385 *
¡©us
 = 
U_INVALID_FORMAT_ERROR
;

388 if(
pInfo
->
fÜm©V”siÚ
[0] != 1) {

389 
	`ud©a_´štE¼Ü
(
ds
, "ucnvsel_swap(): format version %02x is‚ot supported\n",

390 
pInfo
->
fÜm©V”siÚ
[0]);

391 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

395 if(
Ëngth
 >= 0) {

396 
Ëngth
 -ğ
h—d”Size
;

397 if(
Ëngth
 < 16*4) {

398 
	`ud©a_´štE¼Ü
(
ds
, "ucnvsel_swap():oo few bytes (%d‡fter header) for UConverterSelector data\n",

399 
Ëngth
);

400 *
¡©us
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

405 cÚ¡ 
ušt8_t
 *
šBy‹s
 = (cÚ¡ ušt8_ˆ*)
šD©a
 + 
h—d”Size
;

406 
ušt8_t
 *
outBy‹s
 = (ušt8_ˆ*)
outD©a
 + 
h—d”Size
;

409 cÚ¡ 
št32_t
 *
šIndexes
 = (cÚ¡ iÁ32_ˆ*)
šBy‹s
;

410 
št32_t
 
šdexes
[16];

411 
št32_t
 
i
;

412 
i
 = 0; i < 16; ++i) {

413 
šdexes
[
i
] = 
	`ud©a_»adIÁ32
(
ds
, 
šIndexes
[i]);

417 
št32_t
 
size
 = 
šdexes
[
UCNVSEL_INDEX_SIZE
];

418 if(
Ëngth
 >= 0) {

419 if(
Ëngth
 < 
size
) {

420 
	`ud©a_´štE¼Ü
(
ds
, "ucnvsel_swap():oo few bytes (%d‡fter header) for‡ll of UConverterSelector data\n",

421 
Ëngth
);

422 *
¡©us
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

427 if(
šBy‹s
 !ğ
outBy‹s
) {

428 
	`u´v_memıy
(
outBy‹s
, 
šBy‹s
, 
size
);

431 
št32_t
 
off£t
 = 0, 
couÁ
;

434 
couÁ
 = 
UCNVSEL_INDEX_COUNT
*4;

435 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
, 
couÁ
, 
outBy‹s
, 
¡©us
);

436 
off£t
 +ğ
couÁ
;

439 
couÁ
 = 
šdexes
[
UCNVSEL_INDEX_TRIE_SIZE
];

440 
	`uŒ›2_sw­
(
ds
, 
šBy‹s
 + 
off£t
, 
couÁ
, 
outBy‹s
 + off£t, 
¡©us
);

441 
off£t
 +ğ
couÁ
;

444 
couÁ
 = 
šdexes
[
UCNVSEL_INDEX_PV_COUNT
]*4;

445 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
 + 
off£t
, 
couÁ
, 
outBy‹s
 + off£t, 
¡©us
);

446 
off£t
 +ğ
couÁ
;

449 
couÁ
 = 
šdexes
[
UCNVSEL_INDEX_NAMES_LENGTH
];

450 
ds
->
	`sw­InvCh¬s
(ds, 
šBy‹s
 + 
off£t
, 
couÁ
, 
outBy‹s
 + off£t, 
¡©us
);

451 
off£t
 +ğ
couÁ
;

453 
	`U_ASSERT
(
off£t
 =ğ
size
);

456  
h—d”Size
 + 
size
;

457 
	}
}

460 
U_CAPI
 
UCÚv”‹rS–eùÜ
* 
U_EXPORT2


461 
	$uúv£l_İ’FromS”Ÿlized
(cÚ¡ * 
bufãr
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
* 
¡©us
) {

463 ià(
	`U_FAILURE
(*
¡©us
)) {

464  
NULL
;

467 cÚ¡ 
ušt8_t
 *
p
 = (cÚ¡ ušt8_ˆ*)
bufãr
;

468 ià(
Ëngth
 <= 0 ||

469 (
Ëngth
 > 0 && (
p
 =ğ
NULL
 || (
	`U_POINTER_MASK_LSB
(p, 3) != 0)))

471 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

472  
NULL
;

475 ià(
Ëngth
 < 32) {

477 *
¡©us
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

478  
NULL
;

480 cÚ¡ 
D©aH—d”
 *
pH—d”
 = (cÚ¡ D©aH—d” *)
p
;

482 
pH—d”
->
d©aH—d”
.
magic1
==0xda &&

483 
pH—d”
->
d©aH—d”
.
magic2
==0x27 &&

484 
pH—d”
->
šfo
.
d©aFÜm©
[0] == 0x43 &&

485 
pH—d”
->
šfo
.
d©aFÜm©
[1] == 0x53 &&

486 
pH—d”
->
šfo
.
d©aFÜm©
[2] == 0x65 &&

487 
pH—d”
->
šfo
.
d©aFÜm©
[3] == 0x6c

490 *
¡©us
 = 
U_INVALID_FORMAT_ERROR
;

491  
NULL
;

493 ià(
pH—d”
->
šfo
.
fÜm©V”siÚ
[0] != 1) {

494 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

495  
NULL
;

497 
ušt8_t
* 
sw­³d
 = 
NULL
;

498 ià(
pH—d”
->
šfo
.
isBigEndŸn
 !ğ
U_IS_BIG_ENDIAN
 ||

499 
pH—d”
->
šfo
.
ch¬£tFamy
 !ğ
U_CHARSET_FAMILY


502 
UD©aSw­³r
 *
ds
 =

503 
	`ud©a_İ’Sw­³rFÜIÅutD©a
(
p
, 
Ëngth
, 
U_IS_BIG_ENDIAN
, 
U_CHARSET_FAMILY
, 
¡©us
);

504 
št32_t
 
tÙ®Size
 = 
	`uúv£l_sw­
(
ds
, 
p
, -1, 
NULL
, 
¡©us
);

505 ià(
	`U_FAILURE
(*
¡©us
)) {

506 
	`ud©a_şo£Sw­³r
(
ds
);

507  
NULL
;

509 ià(
Ëngth
 < 
tÙ®Size
) {

510 
	`ud©a_şo£Sw­³r
(
ds
);

511 *
¡©us
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

512  
NULL
;

514 
sw­³d
 = (
ušt8_t
*)
	`u´v_m®loc
(
tÙ®Size
);

515 ià(
sw­³d
 =ğ
NULL
) {

516 
	`ud©a_şo£Sw­³r
(
ds
);

517 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

518  
NULL
;

520 
	`uúv£l_sw­
(
ds
, 
p
, 
Ëngth
, 
sw­³d
, 
¡©us
);

521 
	`ud©a_şo£Sw­³r
(
ds
);

522 ià(
	`U_FAILURE
(*
¡©us
)) {

523 
	`u´v_ä“
(
sw­³d
);

524  
NULL
;

526 
p
 = 
sw­³d
;

527 
pH—d”
 = (cÚ¡ 
D©aH—d”
 *)
p
;

529 ià(
Ëngth
 < (
pH—d”
->
d©aH—d”
.
h—d”Size
 + 16 * 4)) {

531 
	`u´v_ä“
(
sw­³d
);

532 *
¡©us
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

533  
NULL
;

535 
p
 +ğ
pH—d”
->
d©aH—d”
.
h—d”Size
;

536 
Ëngth
 -ğ
pH—d”
->
d©aH—d”
.
h—d”Size
;

538 cÚ¡ 
št32_t
 *
šdexes
 = (cÚ¡ iÁ32_ˆ*)
p
;

539 ià(
Ëngth
 < 
šdexes
[
UCNVSEL_INDEX_SIZE
]) {

540 
	`u´v_ä“
(
sw­³d
);

541 *
¡©us
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

542  
NULL
;

544 
p
 +ğ
UCNVSEL_INDEX_COUNT
 * 4;

546 
UCÚv”‹rS–eùÜ
* 
£l
 = (UCÚv”‹rS–eùÜ*)
	`u´v_m®loc
((UConverterSelector));

547 **
’codšgs
 =

548 (**)
	`u´v_m®loc
(

549 
šdexes
[
UCNVSEL_INDEX_NAMES_COUNT
] * (*));

550 ià(
£l
 =ğ
NULL
 || 
’codšgs
 == NULL) {

551 
	`u´v_ä“
(
sw­³d
);

552 
	`u´v_ä“
(
£l
);

553 
	`u´v_ä“
(
’codšgs
);

554 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

555  
NULL
;

557 
	`u´v_mem£t
(
£l
, 0, (
UCÚv”‹rS–eùÜ
));

558 
£l
->
pvCouÁ
 = 
šdexes
[
UCNVSEL_INDEX_PV_COUNT
];

559 
£l
->
’codšgs
 =ƒncodings;

560 
£l
->
’codšgsCouÁ
 = 
šdexes
[
UCNVSEL_INDEX_NAMES_COUNT
];

561 
£l
->
’codšgSŒL’gth
 = 
šdexes
[
UCNVSEL_INDEX_NAMES_LENGTH
];

562 
£l
->
sw­³d
 = swapped;

564 
£l
->
Œ›
 = 
	`uŒ›2_İ’FromS”Ÿlized
(
UTRIE2_16_VALUE_BITS
,

565 
p
, 
šdexes
[
UCNVSEL_INDEX_TRIE_SIZE
], 
NULL
,

566 
¡©us
);

567 
p
 +ğ
šdexes
[
UCNVSEL_INDEX_TRIE_SIZE
];

568 ià(
	`U_FAILURE
(*
¡©us
)) {

569 
	`uúv£l_şo£
(
£l
);

570  
NULL
;

573 
£l
->
pv
 = (
ušt32_t
 *)
p
;

574 
p
 +ğ
£l
->
pvCouÁ
 * 4;

576 * 
s
 = (*)
p
;

577 
št32_t
 
i
 = 0; i < 
£l
->
’codšgsCouÁ
; ++i) {

578 
£l
->
’codšgs
[
i
] = 
s
;

579 
s
 +ğ
	`u´v_¡¾’
(s) + 1;

581 
p
 +ğ
£l
->
’codšgSŒL’gth
;

583  
£l
;

584 
	}
}

588 
	sEnum”©Ü
 {

589 
št16_t
* 
	mšdex
;

590 
št16_t
 
	mËngth
;

591 
št16_t
 
	mcur
;

592 cÚ¡ 
UCÚv”‹rS–eùÜ
* 
	m£l
;

595 
U_CDECL_BEGIN


597 
U_CALLCONV


598 
	$uúv£l_şo£_£ËùÜ_™”©Ü
(
UEnum”©iÚ
 *
’um”©Ü
) {

599 
	`u´v_ä“
(((
Enum”©Ü
*)(
’um”©Ü
->
cÚ‹xt
))->
šdex
);

600 
	`u´v_ä“
(
’um”©Ü
->
cÚ‹xt
);

601 
	`u´v_ä“
(
’um”©Ü
);

602 
	}
}

605 
št32_t
 
U_CALLCONV


606 
	$uúv£l_couÁ_’codšgs
(
UEnum”©iÚ
 *
’um”©Ü
, 
UE¼ÜCode
 *
¡©us
) {

608 ià(
	`U_FAILURE
(*
¡©us
)) {

611  ((
Enum”©Ü
*)(
’um”©Ü
->
cÚ‹xt
))->
Ëngth
;

612 
	}
}

615 cÚ¡ * 
U_CALLCONV
 
	$uúv£l_Ãxt_’codšg
(
UEnum”©iÚ
* 
’um”©Ü
,

616 
št32_t
* 
»suÉL’gth
,

617 
UE¼ÜCode
* 
¡©us
) {

619 ià(
	`U_FAILURE
(*
¡©us
)) {

620  
NULL
;

623 
št16_t
 
cur
 = ((
Enum”©Ü
*)(
’um”©Ü
->
cÚ‹xt
))->cur;

624 cÚ¡ 
UCÚv”‹rS–eùÜ
* 
£l
;

625 cÚ¡ * 
»suÉ
;

626 ià(
cur
 >ğ((
Enum”©Ü
*)(
’um”©Ü
->
cÚ‹xt
))->
Ëngth
) {

627  
NULL
;

629 
£l
 = ((
Enum”©Ü
*)(
’um”©Ü
->
cÚ‹xt
))->sel;

630 
»suÉ
 = 
£l
->
’codšgs
[((
Enum”©Ü
*)(
’um”©Ü
->
cÚ‹xt
))->
šdex
[
cur
] ];

631 ((
Enum”©Ü
*)(
’um”©Ü
->
cÚ‹xt
))->
cur
++;

632 ià(
»suÉL’gth
) {

633 *
»suÉL’gth
 = (
št32_t
)
	`u´v_¡¾’
(
»suÉ
);

635  
»suÉ
;

636 
	}
}

638 
U_CALLCONV
 
	$uúv£l_»£t_™”©Ü
(
UEnum”©iÚ
* 
’um”©Ü
,

639 
UE¼ÜCode
* 
¡©us
) {

641 ià(
	`U_FAILURE
(*
¡©us
)) {

644 ((
Enum”©Ü
*)(
’um”©Ü
->
cÚ‹xt
))->
cur
 = 0;

645 
	}
}

647 
U_CDECL_END


650 cÚ¡ 
UEnum”©iÚ
 
	gdeçuÉEncodšgs
 = {

651 
NULL
,

652 
NULL
,

653 
uúv£l_şo£_£ËùÜ_™”©Ü
,

654 
uúv£l_couÁ_’codšgs
,

655 
u’um_uÃxtDeçuÉ
,

656 
uúv£l_Ãxt_’codšg
,

657 
uúv£l_»£t_™”©Ü


663 
UBoŞ
 
	$š‹r£ùMasks
(
ušt32_t
* 
de¡
, cÚ¡ ušt32_t* 
sourû1
, 
št32_t
 
Ën
) {

664 
št32_t
 
i
;

665 
ušt32_t
 
ÜedDe¡
 = 0;

666 
i
 = 0 ; i < 
Ën
 ; ++i) {

667 
ÜedDe¡
 |ğ(
de¡
[
i
] &ğ
sourû1
[i]);

669  
ÜedDe¡
 == 0;

670 
	}
}

674 
št16_t
 
	$couÁOÃs
(
ušt32_t
* 
mask
, 
št32_t
 
Ën
) {

675 
št32_t
 
i
, 
tÙ®OÃs
 = 0;

676 
i
 = 0 ; i < 
Ën
 ; ++i) {

677 
ušt32_t
 
’t
 = 
mask
[
i
];

678 ; 
’t
; 
tÙ®OÃs
++)

680 
’t
 &=ƒnt - 1;

683  
tÙ®OÃs
;

684 
	}
}

688 
UEnum”©iÚ
 *
	$£ËùFÜMask
(cÚ¡ 
UCÚv”‹rS–eùÜ
* 
£l
,

689 
ušt32_t
 *
mask
, 
UE¼ÜCode
 *
¡©us
) {

692 
Enum”©Ü
* 
»suÉ
 = (Enum”©Ü*)
	`u´v_m®loc
((Enumerator));

693 ià(
»suÉ
 =ğ
NULL
) {

694 
	`u´v_ä“
(
mask
);

695 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

696  
NULL
;

698 
»suÉ
->
šdex
 = 
NULL
;

699 
»suÉ
->
Ëngth
 =„esuÉ->
cur
 = 0;

700 
»suÉ
->
£l
 = sel;

702 
UEnum”©iÚ
 *
’
 = (UEnum”©iÚ *)
	`u´v_m®loc
((UEnumeration));

703 ià(
’
 =ğ
NULL
) {

705 
	`u´v_ä“
(
mask
);

706 
	`u´v_ä“
(
»suÉ
);

707 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

708  
NULL
;

710 
	`memıy
(
’
, &
deçuÉEncodšgs
, (
UEnum”©iÚ
));

711 
’
->
cÚ‹xt
 = 
»suÉ
;

713 
št32_t
 
cŞumns
 = (
£l
->
’codšgsCouÁ
+31)/32;

714 
št16_t
 
numOÃs
 = 
	`couÁOÃs
(
mask
, 
cŞumns
);

716 ià(
numOÃs
 > 0) {

717 
»suÉ
->
šdex
 = (
št16_t
*è
	`u´v_m®loc
(
numOÃs
 * (int16_t));

719 
št32_t
 
i
, 
j
;

720 
št16_t
 
k
 = 0;

721 
j
 = 0 ; j < 
cŞumns
; j++) {

722 
ušt32_t
 
v
 = 
mask
[
j
];

723 
i
 = 0 ; i < 32 && 
k
 < 
£l
->
’codšgsCouÁ
; i++, k++) {

724 ià((
v
 & 1) != 0) {

725 
»suÉ
->
šdex
[»suÉ->
Ëngth
++] = 
k
;

727 
v
 >>= 1;

732 
	`u´v_ä“
(
mask
);

733  
’
;

734 
	}
}

737 
U_CAPI
 
UEnum”©iÚ
 * 
U_EXPORT2


738 
	$uúv£l_£ËùFÜSŒšg
(cÚ¡ 
UCÚv”‹rS–eùÜ
* 
£l
,

739 cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 *
¡©us
) {

741 ià(
	`U_FAILURE
(*
¡©us
)) {

742  
NULL
;

745 ià(
£l
 =ğ
NULL
 || (
s
 =ğNULL && 
Ëngth
 != 0)) {

746 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

747  
NULL
;

750 
št32_t
 
cŞumns
 = (
£l
->
’codšgsCouÁ
+31)/32;

751 
ušt32_t
* 
mask
 = (ušt32_t*è
	`u´v_m®loc
(
cŞumns
 * 4);

752 ià(
mask
 =ğ
NULL
) {

753 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

754  
NULL
;

756 
	`u´v_mem£t
(
mask
, ~0, 
cŞumns
 *4);

758 cÚ¡ 
UCh¬
 *
lim™
;

759 ià(
Ëngth
 >= 0) {

760 
lim™
 = 
s
 + 
Ëngth
;

762 
lim™
 = 
NULL
;

765 
lim™
 =ğ
NULL
 ? *
s
 != 0 : s !=†imit) {

766 
UCh¬32
 
c
;

767 
ušt16_t
 
pvIndex
;

768 
	`UTRIE2_U16_NEXT16
(
£l
->
Œ›
, 
s
, 
lim™
, 
c
, 
pvIndex
);

769 ià(
	`š‹r£ùMasks
(
mask
, 
£l
->
pv
+
pvIndex
, 
cŞumns
)) {

773  
	`£ËùFÜMask
(
£l
, 
mask
, 
¡©us
);

774 
	}
}

777 
U_CAPI
 
UEnum”©iÚ
 * 
U_EXPORT2


778 
	$uúv£l_£ËùFÜUTF8
(cÚ¡ 
UCÚv”‹rS–eùÜ
* 
£l
,

779 cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 *
¡©us
) {

781 ià(
	`U_FAILURE
(*
¡©us
)) {

782  
NULL
;

785 ià(
£l
 =ğ
NULL
 || (
s
 =ğNULL && 
Ëngth
 != 0)) {

786 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

787  
NULL
;

790 
št32_t
 
cŞumns
 = (
£l
->
’codšgsCouÁ
+31)/32;

791 
ušt32_t
* 
mask
 = (ušt32_t*è
	`u´v_m®loc
(
cŞumns
 * 4);

792 ià(
mask
 =ğ
NULL
) {

793 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

794  
NULL
;

796 
	`u´v_mem£t
(
mask
, ~0, 
cŞumns
 *4);

798 ià(
Ëngth
 < 0) {

799 
Ëngth
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

801 cÚ¡ *
lim™
 = 
s
 + 
Ëngth
;

803 
s
 !ğ
lim™
) {

804 
ušt16_t
 
pvIndex
;

805 
	`UTRIE2_U8_NEXT16
(
£l
->
Œ›
, 
s
, 
lim™
, 
pvIndex
);

806 ià(
	`š‹r£ùMasks
(
mask
, 
£l
->
pv
+
pvIndex
, 
cŞumns
)) {

810  
	`£ËùFÜMask
(
£l
, 
mask
, 
¡©us
);

811 
	}
}

	@ucol_swp.cpp

19 
	~"unicode/ud©a.h
"

20 
	~"uŒ›.h
"

21 
	~"ud©aswp.h
"

22 
	~"cmemÜy.h
"

23 
	~"ucŞ_imp.h
"

24 
	~"ucŞ_swp.h
"

32 
U_CAPI
 
št32_t
 
U_EXPORT2


33 
	$uŒ›_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

34 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

35 
UE¼ÜCode
 *
pE¼ÜCode
) {

36 cÚ¡ 
UTr›H—d”
 *
šTr›
;

37 
UTr›H—d”
 
Œ›
;

38 
št32_t
 
size
;

39 
UBoŞ
 
d©aIs32
;

41 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

44 if(
ds
==
NULL
 || 
šD©a
==NULL || (
Ëngth
>=0 && 
outD©a
==NULL)) {

45 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

50 if(
Ëngth
>=0 && (
ušt32_t
î’gth<(
UTr›H—d”
)) {

51 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

55 
šTr›
=(cÚ¡ 
UTr›H—d”
 *)
šD©a
;

56 
Œ›
.
sigÇtu»
=
ds
->
	`»adUIÁ32
(
šTr›
->signature);

57 
Œ›
.
İtiÚs
=
ds
->
	`»adUIÁ32
(
šTr›
->options);

58 
Œ›
.
šdexL’gth
=
	`ud©a_»adIÁ32
(
ds
, 
šTr›
->indexLength);

59 
Œ›
.
d©aL’gth
=
	`ud©a_»adIÁ32
(
ds
, 
šTr›
->dataLength);

61 ifĞ
Œ›
.
sigÇtu»
!=0x54726965 ||

62 (
Œ›
.
İtiÚs
&
UTRIE_OPTIONS_SHIFT_MASK
)!=
UTRIE_SHIFT
 ||

63 ((
Œ›
.
İtiÚs
>>
UTRIE_OPTIONS_INDEX_SHIFT
)&
UTRIE_OPTIONS_SHIFT_MASK
)!=
UTRIE_INDEX_SHIFT
 ||

64 
Œ›
.
šdexL’gth
<
UTRIE_BMP_INDEX_LENGTH
 ||

65 (
Œ›
.
šdexL’gth
&(
UTRIE_SURROGATE_BLOCK_COUNT
-1))!=0 ||

66 
Œ›
.
d©aL’gth
<
UTRIE_DATA_BLOCK_LENGTH
 ||

67 (
Œ›
.
d©aL’gth
&(
UTRIE_DATA_GRANULARITY
-1))!=0 ||

68 ((
Œ›
.
İtiÚs
&
UTRIE_OPTIONS_LATIN1_IS_LINEAR
)!=0 &&r›.
d©aL’gth
<(
UTRIE_DATA_BLOCK_LENGTH
+0x100))

70 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

74 
d©aIs32
=(
UBoŞ
)((
Œ›
.
İtiÚs
&
UTRIE_OPTIONS_DATA_IS_32_BIT
)!=0);

75 
size
=(
UTr›H—d”
)+
Œ›
.
šdexL’gth
*2+Œ›.
d©aL’gth
*(
d©aIs32
?4:2);

77 if(
Ëngth
>=0) {

78 
UTr›H—d”
 *
outTr›
;

80 if(
Ëngth
<
size
) {

81 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

85 
outTr›
=(
UTr›H—d”
 *)
outD©a
;

88 
ds
->
	`sw­A¼ay32
(ds, 
šTr›
, (
UTr›H—d”
), 
outTr›
, 
pE¼ÜCode
);

91 if(
d©aIs32
) {

92 
ds
->
	`sw­A¼ay16
(ds, 
šTr›
+1, 
Œ›
.
šdexL’gth
*2, 
outTr›
+1, 
pE¼ÜCode
);

93 
ds
->
	`sw­A¼ay32
(ds, (cÚ¡ 
ušt16_t
 *)(
šTr›
+1)+
Œ›
.
šdexL’gth
,r›.
d©aL’gth
*4,

94 (
ušt16_t
 *)(
outTr›
+1)+
Œ›
.
šdexL’gth
, 
pE¼ÜCode
);

96 
ds
->
	`sw­A¼ay16
(ds, 
šTr›
+1, (
Œ›
.
šdexL’gth
+Œ›.
d©aL’gth
)*2, 
outTr›
+1, 
pE¼ÜCode
);

100  
size
;

101 
	}
}

103 #ià!
UCONFIG_NO_COLLATION


106 
U_CAPI
 
UBoŞ
 
U_EXPORT2


107 
	$ucŞ_looksLikeCŞÏtiÚBš¬y
(cÚ¡ 
UD©aSw­³r
 *
ds
,

108 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
) {

109 cÚ¡ 
ušt8_t
 *
šBy‹s
;

110 cÚ¡ 
UCATabËH—d”
 *
šH—d”
;

111 
UCATabËH—d”
 
h—d”
;

113 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<-1) {

114  
FALSE
;

117 
šBy‹s
=(cÚ¡ 
ušt8_t
 *)
šD©a
;

118 
šH—d”
=(cÚ¡ 
UCATabËH—d”
 *)
šD©a
;

126 
	`u´v_mem£t
(&
h—d”
, 0, (header));

127 if(
Ëngth
<0) {

128 
h—d”
.
size
=
	`ud©a_»adIÁ32
(
ds
, 
šH—d”
->size);

129 } if((
Ëngth
<(42*4è||†’gth<(
h—d”
.
size
=
	`ud©a_»adIÁ32
(
ds
, 
šH—d”
->size)))) {

130  
FALSE
;

133 
h—d”
.
magic
=
ds
->
	`»adUIÁ32
(
šH—d”
->magic);

135 
h—d”
.
magic
==
UCOL_HEADER_MAGIC
 &&

136 
šH—d”
->
fÜm©V”siÚ
[0]==3

139  
FALSE
;

142 if(
šH—d”
->
isBigEndŸn
!=
ds
->
šIsBigEndŸn
 || inH—d”->
ch¬S‘Famy
!=ds->
šCh¬£t
) {

143  
FALSE
;

146  
TRUE
;

147 
	}
}

150 
U_CAPI
 
št32_t
 
U_EXPORT2


151 
	$ucŞ_sw­Bš¬y
(cÚ¡ 
UD©aSw­³r
 *
ds
,

152 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

153 
UE¼ÜCode
 *
pE¼ÜCode
) {

154 cÚ¡ 
ušt8_t
 *
šBy‹s
;

155 
ušt8_t
 *
outBy‹s
;

157 cÚ¡ 
UCATabËH—d”
 *
šH—d”
;

158 
UCATabËH—d”
 *
outH—d”
;

159 
UCATabËH—d”
 
h—d”
;

161 
ušt32_t
 
couÁ
;

164 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

167 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<-1 || (Ëngth>0 && 
outD©a
==NULL)) {

168 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

172 
šBy‹s
=(cÚ¡ 
ušt8_t
 *)
šD©a
;

173 
outBy‹s
=(
ušt8_t
 *)
outD©a
;

175 
šH—d”
=(cÚ¡ 
UCATabËH—d”
 *)
šD©a
;

176 
outH—d”
=(
UCATabËH—d”
 *)
outD©a
;

184 
	`u´v_mem£t
(&
h—d”
, 0, (header));

185 if(
Ëngth
<0) {

186 
h—d”
.
size
=
	`ud©a_»adIÁ32
(
ds
, 
šH—d”
->size);

187 } if((
Ëngth
<(42*4è||†’gth<(
h—d”
.
size
=
	`ud©a_»adIÁ32
(
ds
, 
šH—d”
->size)))) {

188 
	`ud©a_´štE¼Ü
(
ds
, "ucol_swapBinary():oo few bytes (%d‡fter header) for collation data\n",

189 
Ëngth
);

190 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

194 
h—d”
.
magic
=
ds
->
	`»adUIÁ32
(
šH—d”
->magic);

196 
h—d”
.
magic
==
UCOL_HEADER_MAGIC
 &&

197 
šH—d”
->
fÜm©V”siÚ
[0]==3

200 
	`ud©a_´štE¼Ü
(
ds
, "ucol_swapBinary(): magic 0x%08x or format version %02x.%02x is‚ot‡ collation binary\n",

201 
h—d”
.
magic
,

202 
šH—d”
->
fÜm©V”siÚ
[0], inHeader->formatVersion[1]);

203 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

207 if(
šH—d”
->
isBigEndŸn
!=
ds
->
šIsBigEndŸn
 || inH—d”->
ch¬S‘Famy
!=ds->
šCh¬£t
) {

208 
	`ud©a_´štE¼Ü
(
ds
, "ucol_swapBinary():ƒndianness %d or charset %d does‚ot matchhe swapper\n",

209 
šH—d”
->
isBigEndŸn
, inH—d”->
ch¬S‘Famy
);

210 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

214 if(
Ëngth
>=0) {

216 if(
šBy‹s
!=
outBy‹s
) {

217 
	`u´v_memıy
(
outBy‹s
, 
šBy‹s
, 
h—d”
.
size
);

223 
h—d”
.
İtiÚs
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->options);

224 
h—d”
.
UCACÚ¡s
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->UCAConsts);

225 
h—d”
.
cÚŒaùiÚUCACombos
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->contractionUCACombos);

226 
h—d”
.
m­pšgPos™iÚ
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->mappingPosition);

227 
h—d”
.
ex·nsiÚ
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->expansion);

228 
h—d”
.
cÚŒaùiÚIndex
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->contractionIndex);

229 
h—d”
.
cÚŒaùiÚCEs
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->contractionCEs);

230 
h—d”
.
cÚŒaùiÚSize
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->contractionSize);

231 
h—d”
.
’dEx·nsiÚCE
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->endExpansionCE);

232 
h—d”
.
ex·nsiÚCESize
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->expansionCESize);

233 
h—d”
.
’dEx·nsiÚCECouÁ
ğ
	`ud©a_»adIÁ32
(
ds
, 
šH—d”
->endExpansionCECount);

234 
h—d”
.
cÚŒaùiÚUCACombosSize
=
	`ud©a_»adIÁ32
(
ds
, 
šH—d”
->contractionUCACombosSize);

235 
h—d”
.
sütToL—dBy‹
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->scriptToLeadByte);

236 
h—d”
.
ËadBy‹ToSüt
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->leadByteToScript);

239 
ds
->
	`sw­A¼ay32
(ds, 
šH—d”
, (
št32_t
)((cÚ¡ *)&šH—d”->
jamoS³cŸl
-(const *)inHeader),

240 
outH—d”
, 
pE¼ÜCode
);

241 
ds
->
	`sw­A¼ay32
(ds, &(
šH—d”
->
sütToL—dBy‹
), (
h—d”
.sütToL—dBy‹è+ (h—d”.
ËadBy‹ToSüt
),

242 &(
outH—d”
->
sütToL—dBy‹
), 
pE¼ÜCode
);

244 
outH—d”
->
isBigEndŸn
=
ds
->
outIsBigEndŸn
;

245 
outH—d”
->
ch¬S‘Famy
=
ds
->
outCh¬£t
;

248 if(
h—d”
.
İtiÚs
!=0) {

249 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
h—d”
.
İtiÚs
, h—d”.
ex·nsiÚ
-header.options,

250 
outBy‹s
+
h—d”
.
İtiÚs
, 
pE¼ÜCode
);

254 if(
h—d”
.
m­pšgPos™iÚ
!=0 && h—d”.
ex·nsiÚ
!=0) {

255 if(
h—d”
.
cÚŒaùiÚIndex
!=0) {

257 
couÁ
=
h—d”
.
cÚŒaùiÚIndex
-h—d”.
ex·nsiÚ
;

260 
couÁ
=
h—d”
.
m­pšgPos™iÚ
-h—d”.
ex·nsiÚ
;

262 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
h—d”
.
ex·nsiÚ
, (
št32_t
)
couÁ
,

263 
outBy‹s
+
h—d”
.
ex·nsiÚ
, 
pE¼ÜCode
);

267 if(
h—d”
.
cÚŒaùiÚSize
!=0) {

269 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
h—d”
.
cÚŒaùiÚIndex
, h—d”.
cÚŒaùiÚSize
*2,

270 
outBy‹s
+
h—d”
.
cÚŒaùiÚIndex
, 
pE¼ÜCode
);

273 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
h—d”
.
cÚŒaùiÚCEs
, h—d”.
cÚŒaùiÚSize
*4,

274 
outBy‹s
+
h—d”
.
cÚŒaùiÚCEs
, 
pE¼ÜCode
);

278 if(
h—d”
.
m­pšgPos™iÚ
!=0) {

279 
couÁ
=
h—d”
.
’dEx·nsiÚCE
-h—d”.
m­pšgPos™iÚ
;

280 
	`uŒ›_sw­
(
ds
, 
šBy‹s
+
h—d”
.
m­pšgPos™iÚ
, (
št32_t
)
couÁ
,

281 
outBy‹s
+
h—d”
.
m­pšgPos™iÚ
, 
pE¼ÜCode
);

285 if(
h—d”
.
’dEx·nsiÚCECouÁ
!=0) {

286 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
h—d”
.
’dEx·nsiÚCE
, h—d”.
’dEx·nsiÚCECouÁ
*4,

287 
outBy‹s
+
h—d”
.
’dEx·nsiÚCE
, 
pE¼ÜCode
);

293 if(
h—d”
.
UCACÚ¡s
!=0) {

298 
couÁ
=
h—d”
.
cÚŒaùiÚUCACombos
-h—d”.
UCACÚ¡s
;

299 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
h—d”
.
UCACÚ¡s
, h—d”.
cÚŒaùiÚUCACombos
-header.UCAConsts,

300 
outBy‹s
+
h—d”
.
UCACÚ¡s
, 
pE¼ÜCode
);

304 if(
h—d”
.
cÚŒaùiÚUCACombosSize
!=0) {

305 
couÁ
=
h—d”
.
cÚŒaùiÚUCACombosSize
*
šH—d”
->
cÚŒaùiÚUCACombosWidth
*
U_SIZEOF_UCHAR
;

306 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
h—d”
.
cÚŒaùiÚUCACombos
, (
št32_t
)
couÁ
,

307 
outBy‹s
+
h—d”
.
cÚŒaùiÚUCACombos
, 
pE¼ÜCode
);

311 if(
h—d”
.
sütToL—dBy‹
!=0) {

312 
šdexCouÁ
 = 
ds
->
	`»adUIÁ16
(*((
ušt16_t
*)(
šBy‹s
+
h—d”
.
sütToL—dBy‹
)));

313 
d©aCouÁ
 = 
ds
->
	`»adUIÁ16
(*((
ušt16_t
*)(
šBy‹s
+
h—d”
.
sütToL—dBy‹
 + 2)));

314 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
h—d”
.
sütToL—dBy‹
,

315 4 + (4 * 
šdexCouÁ
è+ (2 * 
d©aCouÁ
),

316 
outBy‹s
+
h—d”
.
sütToL—dBy‹
, 
pE¼ÜCode
);

320 if(
h—d”
.
ËadBy‹ToSüt
!=0) {

321 
šdexCouÁ
 = 
ds
->
	`»adUIÁ16
(*((
ušt16_t
*)(
šBy‹s
+
h—d”
.
ËadBy‹ToSüt
)));

322 
d©aCouÁ
 = 
ds
->
	`»adUIÁ16
(*((
ušt16_t
*)(
šBy‹s
+
h—d”
.
ËadBy‹ToSüt
 + 2)));

323 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
h—d”
.
ËadBy‹ToSüt
,

324 4 + (2 * 
šdexCouÁ
è+ (2 * 
d©aCouÁ
),

325 
outBy‹s
+
h—d”
.
ËadBy‹ToSüt
, 
pE¼ÜCode
);

329  
h—d”
.
size
;

330 
	}
}

333 
U_CAPI
 
št32_t
 
U_EXPORT2


334 
	$ucŞ_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

335 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

336 
UE¼ÜCode
 *
pE¼ÜCode
) {

338 cÚ¡ 
UD©aInfo
 *
pInfo
;

339 
št32_t
 
h—d”Size
, 
cŞÏtiÚSize
;

342 
h—d”Size
=
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
pE¼ÜCode
);

343 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

348 
pInfo
=(cÚ¡ 
UD©aInfo
 *)((cÚ¡ *)
šD©a
+4);

350 
pInfo
->
d©aFÜm©
[0]==0x55 &&

351 
pInfo
->
d©aFÜm©
[1]==0x43 &&

352 
pInfo
->
d©aFÜm©
[2]==0x6f &&

353 
pInfo
->
d©aFÜm©
[3]==0x6c &&

354 
pInfo
->
fÜm©V”siÚ
[0]==3

357 
	`ud©a_´štE¼Ü
(
ds
, "ucol_swap(): data format %02x.%02x.%02x.%02x (format version %02x.%02x) is‚ot‡ collation file\n",

358 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

359 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3],

360 
pInfo
->
fÜm©V”siÚ
[0],…Info->formatVersion[1]);

361 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

365 
cŞÏtiÚSize
=
	`ucŞ_sw­Bš¬y
(
ds
,

366 (cÚ¡ *)
šD©a
+
h—d”Size
,

367 
Ëngth
>=0 ?†’gth-
h—d”Size
 : -1,

368 (*)
outD©a
+
h—d”Size
,

369 
pE¼ÜCode
);

370 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

371  
h—d”Size
+
cŞÏtiÚSize
;

375 
	}
}

378 
U_CAPI
 
št32_t
 
U_EXPORT2


379 
	$ucŞ_sw­Inv”£UCA
(cÚ¡ 
UD©aSw­³r
 *
ds
,

380 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

381 
UE¼ÜCode
 *
pE¼ÜCode
) {

382 cÚ¡ 
UD©aInfo
 *
pInfo
;

383 
št32_t
 
h—d”Size
;

385 cÚ¡ 
ušt8_t
 *
šBy‹s
;

386 
ušt8_t
 *
outBy‹s
;

388 cÚ¡ 
Inv”£UCATabËH—d”
 *
šH—d”
;

389 
Inv”£UCATabËH—d”
 *
outH—d”
;

390 
Inv”£UCATabËH—d”
 
h—d”
={ 0,0,0,0,0,{0,0,0,0},{0,0,0,0,0,0,0,0} };

393 
h—d”Size
=
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
pE¼ÜCode
);

394 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

399 
pInfo
=(cÚ¡ 
UD©aInfo
 *)((cÚ¡ *)
šD©a
+4);

401 
pInfo
->
d©aFÜm©
[0]==0x49 &&

402 
pInfo
->
d©aFÜm©
[1]==0x6e &&

403 
pInfo
->
d©aFÜm©
[2]==0x76 &&

404 
pInfo
->
d©aFÜm©
[3]==0x43 &&

405 
pInfo
->
fÜm©V”siÚ
[0]==2 &&

406 
pInfo
->
fÜm©V”siÚ
[1]>=1

408 
	`ud©a_´štE¼Ü
(
ds
, "ucol_swapInverseUCA(): data format %02x.%02x.%02x.%02x (format version %02x.%02x) is‚ot‡n inverse UCA collation file\n",

409 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

410 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3],

411 
pInfo
->
fÜm©V”siÚ
[0],…Info->formatVersion[1]);

412 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

416 
šBy‹s
=(cÚ¡ 
ušt8_t
 *)
šD©a
+
h—d”Size
;

417 
outBy‹s
=(
ušt8_t
 *)
outD©a
+
h—d”Size
;

419 
šH—d”
=(cÚ¡ 
Inv”£UCATabËH—d”
 *)
šBy‹s
;

420 
outH—d”
=(
Inv”£UCATabËH—d”
 *)
outBy‹s
;

428 if(
Ëngth
<0) {

429 
h—d”
.
by‹Size
=
	`ud©a_»adIÁ32
(
ds
, 
šH—d”
->byteSize);

431 ((
Ëngth
-
h—d”Size
)<(8*4) ||

432 (
ušt32_t
)(
Ëngth
-
h—d”Size
)<(
h—d”
.
by‹Size
=
	`ud©a_»adIÁ32
(
ds
, 
šH—d”
->byteSize)))

434 
	`ud©a_´štE¼Ü
(
ds
, "ucol_swapInverseUCA():oo few bytes (%d‡fter header) for inverse UCA collation data\n",

435 
Ëngth
);

436 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

440 if(
Ëngth
>=0) {

442 if(
šBy‹s
!=
outBy‹s
) {

443 
	`u´v_memıy
(
outBy‹s
, 
šBy‹s
, 
h—d”
.
by‹Size
);

449 
h—d”
.
bËSize
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->tableSize);

450 
h—d”
.
cÚtsSize
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->contsSize);

451 
h—d”
.
bË
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->table);

452 
h—d”
.
cÚts
ğ
ds
->
	`»adUIÁ32
(
šH—d”
->conts);

455 
ds
->
	`sw­A¼ay32
(ds, 
šH—d”
, 5*4, 
outH—d”
, 
pE¼ÜCode
);

458 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
h—d”
.
bË
, h—d”.
bËSize
*3*4,

459 
outBy‹s
+
h—d”
.
bË
, 
pE¼ÜCode
);

462 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
h—d”
.
cÚts
, h—d”.
cÚtsSize
*
U_SIZEOF_UCHAR
,

463 
outBy‹s
+
h—d”
.
cÚts
, 
pE¼ÜCode
);

466  
h—d”Size
+
h—d”
.
by‹Size
;

467 
	}
}

	@ucol_swp.h

19 #iâdeà
__UCOL_SWP_H__


20 
	#__UCOL_SWP_H__


	)

22 
	~"unicode/uty³s.h
"

24 #ià!
UCONFIG_NO_COLLATION


26 
	~"ud©aswp.h
"

32 
U_INTERNAL
 
UBoŞ
 
U_EXPORT2


33 
ucŞ_looksLikeCŞÏtiÚBš¬y
(cÚ¡ 
UD©aSw­³r
 *
ds
,

34 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
);

41 
U_CAPI
 
št32_t
 
U_EXPORT2


42 
ucŞ_sw­Bš¬y
(cÚ¡ 
UD©aSw­³r
 *
ds
,

43 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

44 
UE¼ÜCode
 *
pE¼ÜCode
);

50 
U_CAPI
 
št32_t
 
U_EXPORT2


51 
ucŞ_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

52 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

53 
UE¼ÜCode
 *
pE¼ÜCode
);

59 
U_CAPI
 
št32_t
 
U_EXPORT2


60 
ucŞ_sw­Inv”£UCA
(cÚ¡ 
UD©aSw­³r
 *
ds
,

61 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

62 
UE¼ÜCode
 *
pE¼ÜCode
);

	@udata.cpp

17 
	~"unicode/uty³s.h
"

19 #ifdeà
U_LINUX


26 
	~"unicode/put.h
"

27 
	~"unicode/ud©a.h
"

28 
	~"unicode/uv”siÚ.h
"

29 
	~"ch¬¡r.h
"

30 
	~"cmemÜy.h
"

31 
	~"c¡ršg.h
"

32 
	~"putimp.h
"

33 
	~"uşn_cmn.h
"

34 
	~"ucmnd©a.h
"

35 
	~"ud©amem.h
"

36 
	~"uhash.h
"

37 
	~"um­fe.h
"

38 
	~"umu‹x.h
"

69 #ià
defšed
(
UDATA_DEBUG
)

70 
	~<¡dio.h
>

73 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

75 
U_NAMESPACE_USE


99 
UD©aMemÜy
 *
	ggCommÚICUD©aA¼ay
[10] = { 
NULL
 };

101 
UBoŞ
 
	ggHaveTr›dToLßdCommÚD©a
 = 
FALSE
;

103 
UHashbË
 *
	ggCommÚD©aCache
 = 
NULL
;

105 
UD©aFeAcûss
 
	ggD©aFeAcûss
 = 
UDATA_DEFAULT_ACCESS
;

107 
UBoŞ
 
U_CALLCONV


108 
	$ud©a_ş—nup
()

110 
št32_t
 
i
;

112 ià(
gCommÚD©aCache
) {

113 
	`uhash_şo£
(
gCommÚD©aCache
);

114 
gCommÚD©aCache
 = 
NULL
;

117 
i
 = 0; i < 
	`LENGTHOF
(
gCommÚICUD©aA¼ay
è&& gCommÚICUD©aA¼ay[i] !ğ
NULL
; ++i) {

118 
	`ud©a_şo£
(
gCommÚICUD©aA¼ay
[
i
]);

119 
gCommÚICUD©aA¼ay
[
i
] = 
NULL
;

121 
gHaveTr›dToLßdCommÚD©a
 = 
FALSE
;

123  
TRUE
;

124 
	}
}

132 
UBoŞ


133 
	$£tCommÚICUD©a
(
UD©aMemÜy
 *
pD©a
,

134 
UBoŞ
 
w¬n
,

136 
UE¼ÜCode
 *
pE¼
)

138 
UD©aMemÜy
 *
ÃwCommÚD©a
 = 
	`UD©aMemÜy_ü—‹NewIn¡ªû
(
pE¼
);

139 
št32_t
 
i
;

140 
UBoŞ
 
didUpd©e
 = 
FALSE
;

141 ià(
	`U_FAILURE
(*
pE¼
)) {

142  
FALSE
;

149 
	`UD©amemÜy_assign
(
ÃwCommÚD©a
, 
pD©a
);

150 
	`umtx_lock
(
NULL
);

151 
i
 = 0; i < 
	`LENGTHOF
(
gCommÚICUD©aA¼ay
); ++i) {

152 ià(
gCommÚICUD©aA¼ay
[
i
] =ğ
NULL
) {

153 
gCommÚICUD©aA¼ay
[
i
] = 
ÃwCommÚD©a
;

154 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_UDATA
, 
ud©a_ş—nup
);

155 
didUpd©e
 = 
TRUE
;

157 } ià(
gCommÚICUD©aA¼ay
[
i
]->
pH—d”
 =ğ
pD©a
->pHeader) {

162 
	`umtx_uÆock
(
NULL
);

164 ià(
i
 =ğ
	`LENGTHOF
(
gCommÚICUD©aA¼ay
è&& 
w¬n
) {

165 *
pE¼
 = 
U_USING_DEFAULT_WARNING
;

167 ià(!
didUpd©e
) {

168 
	`u´v_ä“
(
ÃwCommÚD©a
);

170  
didUpd©e
;

171 
	}
}

173 
UBoŞ


174 
	$£tCommÚICUD©aPoš‹r
(cÚ¡ *
pD©a
, 
UBoŞ
 , 
UE¼ÜCode
 *
pE¼ÜCode
) {

175 
UD©aMemÜy
 
tD©a
;

176 
	`UD©aMemÜy_š™
(&
tD©a
);

177 
tD©a
.
pH—d”
 = (cÚ¡ 
D©aH—d”
 *)
pD©a
;

178 
	`ud©a_checkCommÚD©a
(&
tD©a
, 
pE¼ÜCode
);

179  
	`£tCommÚICUD©a
(&
tD©a
, 
FALSE
, 
pE¼ÜCode
);

180 
	}
}

183 
	$fšdBa£Çme
(cÚ¡ *
·th
) {

184 cÚ¡ *
ba£Çme
=
	`u´v_¡¼chr
(
·th
, 
U_FILE_SEP_CHAR
);

185 if(
ba£Çme
==
NULL
) {

186  
·th
;

188  
ba£Çme
+1;

190 
	}
}

192 #ifdeà
UDATA_DEBUG


194 
	$·ckageNameFromP©h
(cÚ¡ *
·th
)

196 if((
·th
 =ğ
NULL
) || (*path == 0)) {

197  
U_ICUDATA_NAME
;

200 
·th
 = 
	`fšdBa£Çme
(path);

202 if((
·th
 =ğ
NULL
) || (*path == 0)) {

203  
U_ICUDATA_NAME
;

206  
·th
;

207 
	}
}

222 
	sD©aCacheEËm’t
 {

223 *
	mÇme
;

224 
UD©aMemÜy
 *
	m™em
;

225 } 
	tD©aCacheEËm’t
;

234 
U_CALLCONV
 
	$D©aCacheEËm’t_d–‘”
(*
pDCEl
) {

235 
D©aCacheEËm’t
 *
p
 = (D©aCacheEËm’ˆ*)
pDCEl
;

236 
	`ud©a_şo£
(
p
->
™em
);

237 
	`u´v_ä“
(
p
->
Çme
);

238 
	`u´v_ä“
(
pDCEl
);

239 
	}
}

245 
UHashbË
 *
	$ud©a_g‘HashTabË
() {

246 
UE¼ÜCode
 
”r
 = 
U_ZERO_ERROR
;

247 
UBoŞ
 
ÿcheIsIn™Ÿlized
;

248 
UHashbË
 *
tHT
 = 
NULL
;

250 
	`UMTX_CHECK
(
NULL
, (
gCommÚD©aCache
 !ğNULL), 
ÿcheIsIn™Ÿlized
);

252 ià(
ÿcheIsIn™Ÿlized
) {

253  
gCommÚD©aCache
;

256 
tHT
 = 
	`uhash_İ’
(
uhash_hashCh¬s
, 
uhash_com·»Ch¬s
, 
NULL
, &
”r
);

258 ià(
tHT
 =ğ
NULL
) {

259  
NULL
;

261 
	`uhash_£tV®ueD–‘”
(
tHT
, 
D©aCacheEËm’t_d–‘”
);

263 
	`umtx_lock
(
NULL
);

264 ià(
gCommÚD©aCache
 =ğ
NULL
) {

265 
gCommÚD©aCache
 = 
tHT
;

266 
tHT
 = 
NULL
;

267 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_UDATA
, 
ud©a_ş—nup
);

269 
	`umtx_uÆock
(
NULL
);

270 ià(
tHT
 !ğ
NULL
) {

271 
	`uhash_şo£
(
tHT
);

274 ià(
	`U_FAILURE
(
”r
)) {

275  
NULL
;

277  
gCommÚD©aCache
;

278 
	}
}

282 
UD©aMemÜy
 *
	$ud©a_fšdCachedD©a
(cÚ¡ *
·th
)

284 
UHashbË
 *
hbË
;

285 
UD©aMemÜy
 *
»tV®
 = 
NULL
;

286 
D©aCacheEËm’t
 *
–
;

287 cÚ¡ *
ba£Name
;

289 
ba£Name
 = 
	`fšdBa£Çme
(
·th
);

290 
hbË
 = 
	`ud©a_g‘HashTabË
();

291 
	`umtx_lock
(
NULL
);

292 
–
 = (
D©aCacheEËm’t
 *)
	`uhash_g‘
(
hbË
, 
ba£Name
);

293 
	`umtx_uÆock
(
NULL
);

294 ià(
–
 !ğ
NULL
) {

295 
»tV®
 = 
–
->
™em
;

297 #ifdeà
UDATA_DEBUG


298 
	`årštf
(
¡d”r
, "Cache: [%s] -> %p\n", 
ba£Name
, 
»tV®
);

300  
»tV®
;

301 
	}
}

304 
UD©aMemÜy
 *
	$ud©a_ÿcheD©aI‹m
(cÚ¡ *
·th
, 
UD©aMemÜy
 *
™em
, 
UE¼ÜCode
 *
pE¼
) {

305 
D©aCacheEËm’t
 *
ÃwEËm’t
;

306 cÚ¡ *
ba£Name
;

307 
št32_t
 
ÇmeL’
;

308 
UHashbË
 *
hbË
;

309 
D©aCacheEËm’t
 *
ŞdV®ue
 = 
NULL
;

310 
UE¼ÜCode
 
subE¼
 = 
U_ZERO_ERROR
;

312 ià(
	`U_FAILURE
(*
pE¼
)) {

313  
NULL
;

319 
ÃwEËm’t
 = (
D©aCacheEËm’t
 *)
	`u´v_m®loc
((DataCacheElement));

320 ià(
ÃwEËm’t
 =ğ
NULL
) {

321 *
pE¼
 = 
U_MEMORY_ALLOCATION_ERROR
;

322  
NULL
;

324 
ÃwEËm’t
->
™em
 = 
	`UD©aMemÜy_ü—‹NewIn¡ªû
(
pE¼
);

325 ià(
	`U_FAILURE
(*
pE¼
)) {

326 
	`u´v_ä“
(
ÃwEËm’t
);

327  
NULL
;

329 
	`UD©amemÜy_assign
(
ÃwEËm’t
->
™em
, item);

331 
ba£Name
 = 
	`fšdBa£Çme
(
·th
);

332 
ÇmeL’
 = (
št32_t
)
	`u´v_¡¾’
(
ba£Name
);

333 
ÃwEËm’t
->
Çme
 = (*)
	`u´v_m®loc
(
ÇmeL’
+1);

334 ià(
ÃwEËm’t
->
Çme
 =ğ
NULL
) {

335 *
pE¼
 = 
U_MEMORY_ALLOCATION_ERROR
;

336 
	`u´v_ä“
(
ÃwEËm’t
->
™em
);

337 
	`u´v_ä“
(
ÃwEËm’t
);

338  
NULL
;

340 
	`u´v_¡rıy
(
ÃwEËm’t
->
Çme
, 
ba£Name
);

344 
hbË
 = 
	`ud©a_g‘HashTabË
();

345 
	`umtx_lock
(
NULL
);

346 
ŞdV®ue
 = (
D©aCacheEËm’t
 *)
	`uhash_g‘
(
hbË
, 
·th
);

347 ià(
ŞdV®ue
 !ğ
NULL
) {

348 
subE¼
 = 
U_USING_DEFAULT_WARNING
;

351 
	`uhash_put
(

352 
hbË
,

353 
ÃwEËm’t
->
Çme
,

354 
ÃwEËm’t
,

355 &
subE¼
);

357 
	`umtx_uÆock
(
NULL
);

359 #ifdeà
UDATA_DEBUG


360 
	`årštf
(
¡d”r
, "Cache: [%s] <<< %°: %s. vFunc=%p\n", 
ÃwEËm’t
->
Çme
,

361 
ÃwEËm’t
->
™em
, 
	`u_”rÜName
(
subE¼
),‚ewEËm’t->™em->
vFuncs
);

364 ià(
subE¼
 =ğ
U_USING_DEFAULT_WARNING
 || 
	`U_FAILURE
(subErr)) {

365 *
pE¼
 = 
subE¼
;

366 
	`u´v_ä“
(
ÃwEËm’t
->
Çme
);

367 
	`u´v_ä“
(
ÃwEËm’t
->
™em
);

368 
	`u´v_ä“
(
ÃwEËm’t
);

369  
ŞdV®ue
 ? oldV®ue->
™em
 : 
NULL
;

372  
ÃwEËm’t
->
™em
;

373 
	}
}

382 
	#U_DATA_PATHITER_BUFSIZ
 128

	)

385 
U_NAMESPACE_BEGIN


387 şas 
	cUD©aP©hI‹¿tÜ


389 
	mpublic
:

390 
UD©aP©hI‹¿tÜ
(cÚ¡ *
·th
, cÚ¡ *
pkg
,

391 cÚ¡ *
™em
, cÚ¡ *
suffix
, 
UBoŞ
 
doCheckLa¡Four
,

392 
UE¼ÜCode
 *
pE¼ÜCode
);

393 cÚ¡ *
Ãxt
(
UE¼ÜCode
 *
pE¼ÜCode
);

395 
	m´iv©e
:

396 cÚ¡ *
·th
;

397 cÚ¡ *
	mÃxtP©h
;

398 cÚ¡ *
	mba£Çme
;

399 cÚ¡ *
	msuffix
;

401 
ušt32_t
 
	mba£ÇmeL’
;

403 
Ch¬SŒšg
 
	m™emP©h
;

404 
Ch¬SŒšg
 
	m·thBufãr
;

405 
Ch¬SŒšg
 
	m·ckageStub
;

407 
UBoŞ
 
	mcheckLa¡Four
;

421 
	gUD©aP©hI‹¿tÜ
::
	$UD©aP©hI‹¿tÜ
(cÚ¡ *
šP©h
, cÚ¡ *
pkg
,

422 cÚ¡ *
™em
, cÚ¡ *
šSuffix
, 
UBoŞ
 
doCheckLa¡Four
,

423 
UE¼ÜCode
 *
pE¼ÜCode
)

425 #ifdeà
UDATA_DEBUG


426 
	`årštf
(
¡d”r
, "SUFFIX1=% PATH=%s\n", 
šSuffix
, 
šP©h
);

429 if(
šP©h
 =ğ
NULL
) {

430 
·th
 = 
	`u_g‘D©aDœeùÜy
();

432 
·th
 = 
šP©h
;

436 if(
pkg
 !ğ
NULL
) {

437 
·ckageStub
.
	`­³nd
(
U_FILE_SEP_CHAR
, *
pE¼ÜCode
).­³nd(
pkg
, *pErrorCode);

438 #ifdeà
UDATA_DEBUG


439 
	`årštf
(
¡d”r
, "STUB=% [%d]\n", 
·ckageStub
.
	`d©a
(),…ackageStub.
	`Ëngth
());

444 
ba£Çme
 = 
	`fšdBa£Çme
(
™em
);

445 
ba£ÇmeL’
 = (
št32_t
)
	`u´v_¡¾’
(
ba£Çme
);

448 if(
ba£Çme
 =ğ
™em
) {

449 
ÃxtP©h
 = 
·th
;

451 
™emP©h
.
	`­³nd
(
™em
, (
št32_t
)(
ba£Çme
-™em), *
pE¼ÜCode
);

452 
ÃxtP©h
 = 
™emP©h
.
	`d©a
();

454 #ifdeà
UDATA_DEBUG


455 
	`årštf
(
¡d”r
, "SUFFIX=% [%p]\n", 
šSuffix
, inSuffix);

459 if(
šSuffix
 !ğ
NULL
) {

460 
suffix
 = 
šSuffix
;

462 
suffix
 = "";

465 
checkLa¡Four
 = 
doCheckLa¡Four
;

469 #ifdeà
UDATA_DEBUG


470 
	`årštf
(
¡d”r
, "%p: init %s -> [path=%s], [base=%s], [suff=%s], [itempath=%s], [nextpath=%s], [checklast4=%s]\n",

471 
™”
,

472 
™em
,

473 
·th
,

474 
ba£Çme
,

475 
suffix
,

476 
™emP©h
.
	`d©a
(),

477 
ÃxtP©h
,

478 
checkLa¡Four
?"TRUE":"false");

480 
	}
}

489 cÚ¡ *
	gUD©aP©hI‹¿tÜ
::
	$Ãxt
(
UE¼ÜCode
 *
pE¼ÜCode
)

491 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

492  
NULL
;

495 cÚ¡ *
cu¼’tP©h
 = 
NULL
;

496 
št32_t
 
·thL’
 = 0;

497 cÚ¡ *
·thBa£Çme
;

501 ifĞ
ÃxtP©h
 =ğ
NULL
 ) {

504 
cu¼’tP©h
 = 
ÃxtP©h
;

506 if(
ÃxtP©h
 =ğ
™emP©h
.
	`d©a
()) {

507 
ÃxtP©h
 = 
·th
;

508 
·thL’
 = (
št32_t
)
	`u´v_¡¾’
(
cu¼’tP©h
);

511 
ÃxtP©h
 = 
	`u´v_¡rchr
(
cu¼’tP©h
, 
U_PATH_SEP_CHAR
);

512 if(
ÃxtP©h
 =ğ
NULL
) {

514 
·thL’
 = (
št32_t
)
	`u´v_¡¾’
(
cu¼’tP©h
);

517 
·thL’
 = (
št32_t
)(
ÃxtP©h
 - 
cu¼’tP©h
);

519 
ÃxtP©h
 ++;

523 if(
·thL’
 == 0) {

527 #ifdeà
UDATA_DEBUG


528 
	`årštf
(
¡d”r
, "»¡ oà·th (IDDèğ%s\n", 
cu¼’tP©h
);

529 
	`årštf
(
¡d”r
, " ");

531 
ušt32_t
 
qqq
;

532 
qqq
=0;qqq<
·thL’
;qqq++)

534 
	`årštf
(
¡d”r
, " ");

537 
	`årštf
(
¡d”r
, "^\n");

540 
·thBufãr
.
	`ş—r
().
	`­³nd
(
cu¼’tP©h
, 
·thL’
, *
pE¼ÜCode
);

543 
·thBa£Çme
 = 
	`fšdBa£Çme
(
·thBufãr
.
	`d©a
());

545 if(
checkLa¡Four
 =ğ
TRUE
 &&

546 (
·thL’
>=4) &&

547 
	`u´v_¡ºcmp
(
·thBufãr
.
	`d©a
(è+(
·thL’
-4), 
suffix
, 4)==0 &&

548 
	`u´v_¡ºcmp
(
	`fšdBa£Çme
(
·thBufãr
.
	`d©a
()), 
ba£Çme
, 
ba£ÇmeL’
)==0 &&

549 
	`u´v_¡¾’
(
·thBa£Çme
)==(
ba£ÇmeL’
+4)) {

551 #ifdeà
UDATA_DEBUG


552 
	`årštf
(
¡d”r
, "Hav% fÚh·th: %s\n", 
suffix
, 
·thBufãr
.
	`d©a
());

558 if(
·thBufãr
[
·thL’
-1] !ğ
U_FILE_SEP_CHAR
) {

559 if((
·thL’
>=4) &&

560 
	`u´v_¡ºcmp
(
·thBufãr
.
	`d©a
()+(
·thL’
-4), ".dat", 4) == 0)

562 #ifdeà
UDATA_DEBUG


563 
	`årštf
(
¡d”r
, "skpšg‚Ú-dœeùÜy .d© f%s\n", 
·thBufãr
.
	`d©a
());

569 if(!
·ckageStub
.
	`isEm±y
() &&

570 (
·thL’
 > 
·ckageStub
.
	`Ëngth
()) &&

571 !
	`u´v_¡rcmp
(
·thBufãr
.
	`d©a
(è+ 
·thL’
 - 
·ckageStub
.
	`Ëngth
(),…ackageStub.data())) {

572 #ifdeà
UDATA_DEBUG


573 
	`årštf
(
¡d”r
, "Found stub % (wÈadd…ackag% oàËÀ%d)\n", 
·ckageStub
.
	`d©a
(), 
ba£Çme
, 
ba£ÇmeL’
);

575 
·thBufãr
.
	`Œunÿ‹
(
·thL’
 - 
·ckageStub
.
	`Ëngth
());

577 
·thBufãr
.
	`­³nd
(
U_FILE_SEP_CHAR
, *
pE¼ÜCode
);

581 
·thBufãr
.
	`­³nd
(
·ckageStub
.
	`d©a
()+1,…ackageStub.
	`Ëngth
()-1, *
pE¼ÜCode
);

583 if(*
suffix
)

585 
·thBufãr
.
	`­³nd
(
suffix
, *
pE¼ÜCode
);

589 #ifdeà
UDATA_DEBUG


590 
	`årštf
(
¡d”r
, " --> %s\n", 
·thBufãr
.
	`d©a
());

593  
·thBufãr
.
	`d©a
();

595 } 
·th
);

598  
NULL
;

599 
	}
}

601 
U_NAMESPACE_END


613 "C" cÚ¡ 
D©aH—d”
 
U_DATA_API
 
U_ICUDATA_ENTRY_POINT
;

635 
UD©aMemÜy
 *

636 
	$İ’CommÚD©a
(cÚ¡ *
·th
,

637 
št32_t
 
commÚD©aIndex
,

638 
UE¼ÜCode
 *
pE¼ÜCode
)

640 
UD©aMemÜy
 
tD©a
;

641 cÚ¡ *
·thBufãr
;

642 cÚ¡ *
šBa£Çme
;

644 ià(
	`U_FAILURE
(*
pE¼ÜCode
)) {

645  
NULL
;

648 
	`UD©aMemÜy_š™
(&
tD©a
);

651 ià(
commÚD©aIndex
 >= 0) {

653 if(
commÚD©aIndex
 >ğ
	`LENGTHOF
(
gCommÚICUD©aA¼ay
)) {

654  
NULL
;

656 if(
gCommÚICUD©aA¼ay
[
commÚD©aIndex
] =ğ
NULL
) {

657 
št32_t
 
i
;

658 
i
 = 0; i < 
commÚD©aIndex
; ++i) {

659 if(
gCommÚICUD©aA¼ay
[
i
]->
pH—d”
 =ğ&
U_ICUDATA_ENTRY_POINT
) {

661  
NULL
;

678 
	`£tCommÚICUD©aPoš‹r
(&
U_ICUDATA_ENTRY_POINT
, 
FALSE
, 
pE¼ÜCode
);

680  
gCommÚICUD©aA¼ay
[
commÚD©aIndex
];

688 
šBa£Çme
 = 
	`fšdBa£Çme
(
·th
);

689 #ifdeà
UDATA_DEBUG


690 
	`årštf
(
¡d”r
, "šBa£Çmğ%s\n", 
šBa£Çme
);

693 if(*
šBa£Çme
==0) {

696 #ifdeà
UDATA_DEBUG


697 
	`årštf
(
¡d”r
, "ocd:‚Øba£Çmš %s, bašg.\n", 
·th
);

699 *
pE¼ÜCode
=
U_FILE_ACCESS_ERROR
;

700  
NULL
;

707 
UD©aMemÜy
 *
d©aToR‘uº
 = 
	`ud©a_fšdCachedD©a
(
šBa£Çme
);

708 ià(
d©aToR‘uº
 !ğ
NULL
) {

709  
d©aToR‘uº
;

717 
UD©aP©hI‹¿tÜ
 
	`™”
(
	`u_g‘D©aDœeùÜy
(), 
šBa£Çme
, 
·th
, ".d©", 
TRUE
, 
pE¼ÜCode
);

719 (
	`UD©aMemÜy_isLßded
(&
tD©a
)==
FALSE
è&& (
·thBufãr
 = 
™”
.
	`Ãxt
(
pE¼ÜCode
)è!ğ
NULL
)

721 #ifdeà
UDATA_DEBUG


722 
	`årštf
(
¡d”r
, "ocd:ryšg…©h % - ", 
·thBufãr
);

724 
	`u´v_m­Fe
(&
tD©a
, 
·thBufãr
);

725 #ifdeà
UDATA_DEBUG


726 
	`årštf
(
¡d”r
, "%s\n", 
	`UD©aMemÜy_isLßded
(&
tD©a
)?"LOADED":"not†oaded");

730 #ià
	`defšed
(
OS390_STUBDATA
è&& defšed(
OS390BATCH
)

731 ià(!
	`UD©aMemÜy_isLßded
(&
tD©a
)) {

732 
ourP©hBufãr
[1024];

734 
	`u´v_¡ºıy
(
ourP©hBufãr
, 
·th
, 1019);

735 
ourP©hBufãr
[1019]=0;

736 
	`u´v_¡rÿt
(
ourP©hBufãr
, ".dat");

737 
	`u´v_m­Fe
(&
tD©a
, 
ourP©hBufãr
);

741 ià(!
	`UD©aMemÜy_isLßded
(&
tD©a
)) {

743 *
pE¼ÜCode
=
U_FILE_ACCESS_ERROR
;

744  
NULL
;

748 
	`ud©a_checkCommÚD©a
(&
tD©a
, 
pE¼ÜCode
);

754  
	`ud©a_ÿcheD©aI‹m
(
šBa£Çme
, &
tD©a
, 
pE¼ÜCode
);

755 
	}
}

768 
UBoŞ
 
	$ex‹ndICUD©a
(
UE¼ÜCode
 *
pE¼
)

770 
UD©aMemÜy
 *
pD©a
;

771 
UD©aMemÜy
 
cİyPD©a
;

772 
UBoŞ
 
didUpd©e
 = 
FALSE
;

784 #ià
MAP_IMPLEMENTATION
==
MAP_STDIO


785 
UMTX
 
ex‹ndICUD©aMu‹x
 = 
NULL
;

786 
	`umtx_lock
(&
ex‹ndICUD©aMu‹x
);

788 if(!
gHaveTr›dToLßdCommÚD©a
) {

789 
gHaveTr›dToLßdCommÚD©a
 = 
TRUE
;

792 
pD©a
 = 
	`İ’CommÚD©a
(

793 
U_ICUDATA_NAME
,

795 
pE¼
);

799 
	`UD©aMemÜy_š™
(&
cİyPD©a
);

800 if(
pD©a
 !ğ
NULL
) {

801 
	`UD©amemÜy_assign
(&
cİyPD©a
, 
pD©a
);

802 
cİyPD©a
.
m­
 = 0;

803 
cİyPD©a
.
m­Addr
 = 0;

809 
didUpd©e
 =

810 
	`£tCommÚICUD©a
(&
cİyPD©a
,

811 
FALSE
,

812 
pE¼
);

815 #ià
MAP_IMPLEMENTATION
==
MAP_STDIO


816 
	`umtx_uÆock
(&
ex‹ndICUD©aMu‹x
);

818  
didUpd©e
;

822 
	}
}

829 
U_CAPI
 
U_EXPORT2


830 
	$ud©a_£tCommÚD©a
(cÚ¡ *
d©a
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

831 
UD©aMemÜy
 
d©aMemÜy
;

833 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

837 if(
d©a
==
NULL
) {

838 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

843 
	`UD©aMemÜy_š™
(&
d©aMemÜy
);

844 
	`UD©aMemÜy_£tD©a
(&
d©aMemÜy
, 
d©a
);

845 
	`ud©a_checkCommÚD©a
(&
d©aMemÜy
, 
pE¼ÜCode
);

846 ià(
	`U_FAILURE
(*
pE¼ÜCode
)) {;}

850 
	`£tCommÚICUD©a
(&
d©aMemÜy
, 
TRUE
, 
pE¼ÜCode
);

851 
	}
}

858 
U_CAPI
 
U_EXPORT2


859 
	$ud©a_£tAµD©a
(cÚ¡ *
·th
, cÚ¡ *
d©a
, 
UE¼ÜCode
 *
”r
)

861 
UD©aMemÜy
 
udm
;

863 if(
”r
==
NULL
 || 
	`U_FAILURE
(*err)) {

866 if(
d©a
==
NULL
) {

867 *
”r
=
U_ILLEGAL_ARGUMENT_ERROR
;

871 
	`UD©aMemÜy_š™
(&
udm
);

872 
	`UD©aMemÜy_£tD©a
(&
udm
, 
d©a
);

873 
	`ud©a_checkCommÚD©a
(&
udm
, 
”r
);

874 
	`ud©a_ÿcheD©aI‹m
(
·th
, &
udm
, 
”r
);

875 
	}
}

888 
UD©aMemÜy
 *

889 
	gcheckD©aI‹m


891 cÚ¡ 
D©aH—d”
 *
	gpH—d”
,

892 
UD©aMemÜyIsAcû±abË
 *
	gisAcû±abË
,

893 *
	gcÚ‹xt
,

894 cÚ¡ *
	gty³
,

895 cÚ¡ *
	gÇme
,

896 
UE¼ÜCode
 *
	gnÚF©®E¼
,

899 
UE¼ÜCode
 *
	gçlE¼


902 
UD©aMemÜy
 *
	grD©aMem
 = 
NULL
;

904 ià(
U_FAILURE
(*
çlE¼
)) {

905  
	gNULL
;

908 if(
	gpH—d”
->
	gd©aH—d”
.
	gmagic1
==0xda &&

909 
pH—d”
->
d©aH—d”
.
magic2
==0x27 &&

910 (
isAcû±abË
==
NULL
 || isAcû±abË(
cÚ‹xt
, 
ty³
, 
Çme
, &
pH—d”
->
šfo
))

912 
	grD©aMem
=
UD©aMemÜy_ü—‹NewIn¡ªû
(
çlE¼
);

913 ià(
U_FAILURE
(*
çlE¼
)) {

914  
	gNULL
;

916 
	grD©aMem
->
	gpH—d”
 = 
pH—d”
;

921 *
	gnÚF©®E¼
=
U_INVALID_FORMAT_ERROR
;

923  
	grD©aMem
;

929 
UD©aMemÜy
 *
	$doLßdFromIndividu®Fes
(cÚ¡ *
pkgName
,

930 cÚ¡ *
d©aP©h
, cÚ¡ *
tocEÁryP©hSuffix
,

932 cÚ¡ *
·th
, cÚ¡ *
ty³
, cÚ¡ *
Çme
,

933 
UD©aMemÜyIsAcû±abË
 *
isAcû±abË
, *
cÚ‹xt
,

934 
UE¼ÜCode
 *
subE¼ÜCode
,

935 
UE¼ÜCode
 *
pE¼ÜCode
)

937 cÚ¡ *
·thBufãr
;

938 
UD©aMemÜy
 
d©aMemÜy
;

939 
UD©aMemÜy
 *
pEÁryD©a
;

943 
UD©aP©hI‹¿tÜ
 
	`™”
(
d©aP©h
, 
pkgName
, 
·th
, 
tocEÁryP©hSuffix
, 
FALSE
, 
pE¼ÜCode
);

945 (
·thBufãr
 = 
™”
.
	`Ãxt
(
pE¼ÜCode
)))

947 #ifdeà
UDATA_DEBUG


948 
	`årštf
(
¡d”r
, "UDATA:ryšg individu® f%s\n", 
·thBufãr
);

950 if(
	`u´v_m­Fe
(&
d©aMemÜy
, 
·thBufãr
))

952 
pEÁryD©a
 = 
	`checkD©aI‹m
(
d©aMemÜy
.
pH—d”
, 
isAcû±abË
, 
cÚ‹xt
, 
ty³
, 
Çme
, 
subE¼ÜCode
, 
pE¼ÜCode
);

953 ià(
pEÁryD©a
 !ğ
NULL
) {

957 
pEÁryD©a
->
m­Addr
 = 
d©aMemÜy
.mapAddr;

958 
pEÁryD©a
->
m­
 = 
d©aMemÜy
.map;

960 #ifdeà
UDATA_DEBUG


961 
	`årštf
(
¡d”r
, "** M­³d fe: %s\n", 
·thBufãr
);

963  
pEÁryD©a
;

967 
	`ud©a_şo£
(&
d©aMemÜy
);

970 ià(
	`U_FAILURE
(*
pE¼ÜCode
)) {

971  
NULL
;

975 *
subE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

977 #ifdeà
UDATA_DEBUG


978 
	`årštf
(
¡d”r
, "%s\n", 
	`UD©aMemÜy_isLßded
(&
d©aMemÜy
)?"LOADED":"not†oaded");

981  
NULL
;

982 
	}
}

987 
UD©aMemÜy
 *
	$doLßdFromCommÚD©a
(
UBoŞ
 
isICUD©a
, const * ,

988 cÚ¡ * , cÚ¡ * , cÚ¡ *
tocEÁryName
,

990 cÚ¡ *
·th
, cÚ¡ *
ty³
, cÚ¡ *
Çme
,

991 
UD©aMemÜyIsAcû±abË
 *
isAcû±abË
, *
cÚ‹xt
,

992 
UE¼ÜCode
 *
subE¼ÜCode
,

993 
UE¼ÜCode
 *
pE¼ÜCode
)

995 
UD©aMemÜy
 *
pEÁryD©a
;

996 cÚ¡ 
D©aH—d”
 *
pH—d”
;

997 
UD©aMemÜy
 *
pCommÚD©a
;

998 
št32_t
 
commÚD©aIndex
;

1008 
commÚD©aIndex
 = 
isICUD©a
 ? 0 : -1;;) {

1009 
pCommÚD©a
=
	`İ’CommÚD©a
(
·th
, 
commÚD©aIndex
, 
subE¼ÜCode
);

1011 if(
	`U_SUCCESS
(*
subE¼ÜCode
è&& 
pCommÚD©a
!=
NULL
) {

1012 
št32_t
 
Ëngth
;

1015 
pH—d”
=
pCommÚD©a
->
vFuncs
->
	`Lookup
ÕCommÚD©a, 
tocEÁryName
, &
Ëngth
, 
subE¼ÜCode
);

1016 #ifdeà
UDATA_DEBUG


1017 
	`årštf
(
¡d”r
, "%s:…H—d”=%°- %s\n", 
tocEÁryName
, 
pH—d”
, 
	`u_”rÜName
(*
subE¼ÜCode
));

1020 if(
pH—d”
!=
NULL
) {

1021 
pEÁryD©a
 = 
	`checkD©aI‹m
(
pH—d”
, 
isAcû±abË
, 
cÚ‹xt
, 
ty³
, 
Çme
, 
subE¼ÜCode
, 
pE¼ÜCode
);

1022 #ifdeà
UDATA_DEBUG


1023 
	`årštf
(
¡d”r
, "pEÁryD©a=%p\n", 
pEÁryD©a
);

1025 ià(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1026  
NULL
;

1028 ià(
pEÁryD©a
 !ğ
NULL
) {

1029 
pEÁryD©a
->
Ëngth
 =†ength;

1030  
pEÁryD©a
;

1037 ià(!
isICUD©a
) {

1038  
NULL
;

1039 } ià(
pCommÚD©a
 !ğ
NULL
) {

1040 ++
commÚD©aIndex
;

1041 } ià(
	`ex‹ndICUD©a
(
subE¼ÜCode
)) {

1044  
NULL
;

1047 
	}
}

1081 
UD©aMemÜy
 *

1082 
	$doO³nChoiû
(cÚ¡ *
·th
, cÚ¡ *
ty³
, cÚ¡ *
Çme
,

1083 
UD©aMemÜyIsAcû±abË
 *
isAcû±abË
, *
cÚ‹xt
,

1084 
UE¼ÜCode
 *
pE¼ÜCode
)

1086 
UD©aMemÜy
 *
»tV®
 = 
NULL
;

1088 cÚ¡ *
d©aP©h
;

1090 
št32_t
 
tocEÁrySuffixIndex
;

1091 cÚ¡ *
tocEÁryP©hSuffix
;

1092 
UE¼ÜCode
 
subE¼ÜCode
=
U_ZERO_ERROR
;

1093 cÚ¡ *
Œ“Ch¬
;

1095 
UBoŞ
 
isICUD©a
 = 
FALSE
;

1099 if(
·th
 =ğ
NULL
 ||

1100 !
	`¡rcmp
(
·th
, 
U_ICUDATA_ALIAS
) ||

1101 !
	`u´v_¡ºcmp
(
·th
, 
U_ICUDATA_NAME
 
U_TREE_SEPARATOR_STRING
,

1102 
	`u´v_¡¾’
(
U_ICUDATA_NAME
 
U_TREE_SEPARATOR_STRING
)) ||

1103 !
	`u´v_¡ºcmp
(
·th
, 
U_ICUDATA_ALIAS
 
U_TREE_SEPARATOR_STRING
,

1104 
	`u´v_¡¾’
(
U_ICUDATA_ALIAS
 
U_TREE_SEPARATOR_STRING
))) {

1105 
isICUD©a
 = 
TRUE
;

1108 #ià(
U_FILE_SEP_CHAR
 !ğ
U_FILE_ALT_SEP_CHAR
)

1110 
Ch¬SŒšg
 
®tS•P©h
;

1111 if(
·th
) {

1112 if(
	`u´v_¡rchr
(
·th
,
U_FILE_ALT_SEP_CHAR
è!ğ
NULL
) {

1113 
®tS•P©h
.
	`­³nd
(
·th
, *
pE¼ÜCode
);

1114 *
p
;

1115 (
p
=
	`u´v_¡rchr
(
®tS•P©h
.
	`d©a
(), 
U_FILE_ALT_SEP_CHAR
))) {

1116 *
p
 = 
U_FILE_SEP_CHAR
;

1118 #ià
	`defšed
 (
UDATA_DEBUG
)

1119 
	`årštf
(
¡d”r
, "Chªged…©h from [%s]Ø[%s]\n", 
·th
, 
®tS•P©h
.
s
);

1121 
·th
 = 
®tS•P©h
.
	`d©a
();

1126 
Ch¬SŒšg
 
tocEÁryName
;

1127 
Ch¬SŒšg
 
tocEÁryP©h
;

1129 
Ch¬SŒšg
 
pkgName
;

1130 
Ch¬SŒšg
 
Œ“Name
;

1133 if(
·th
==
NULL
) {

1134 
pkgName
.
	`­³nd
(
U_ICUDATA_NAME
, *
pE¼ÜCode
);

1136 cÚ¡ *
pkg
;

1137 cÚ¡ *
fœ¡
;

1138 
pkg
 = 
	`u´v_¡¼chr
(
·th
, 
U_FILE_SEP_CHAR
);

1139 
fœ¡
 = 
	`u´v_¡rchr
(
·th
, 
U_FILE_SEP_CHAR
);

1140 if(
	`u´v_·thIsAbsŞu‹
(
·th
è|| (
pkg
 !ğ
fœ¡
)) {

1142 if(
pkg
) {

1143 
pkgName
.
	`­³nd
(
pkg
+1, *
pE¼ÜCode
);

1145 
pkgName
.
	`­³nd
(
·th
, *
pE¼ÜCode
);

1148 
Œ“Ch¬
 = 
	`u´v_¡rchr
(
·th
, 
U_TREE_SEPARATOR
);

1149 if(
Œ“Ch¬
) {

1150 
Œ“Name
.
	`­³nd
(
Œ“Ch¬
+1, *
pE¼ÜCode
);

1151 if(
isICUD©a
) {

1152 
pkgName
.
	`­³nd
(
U_ICUDATA_NAME
, *
pE¼ÜCode
);

1154 
pkgName
.
	`­³nd
(
·th
, (
št32_t
)(
Œ“Ch¬
-·th), *
pE¼ÜCode
);

1155 ià(
fœ¡
 =ğ
NULL
) {

1160 
·th
 = 
pkgName
.
	`d©a
();

1164 if(
isICUD©a
) {

1165 
pkgName
.
	`­³nd
(
U_ICUDATA_NAME
, *
pE¼ÜCode
);

1167 
pkgName
.
	`­³nd
(
·th
, *
pE¼ÜCode
);

1173 #ifdeà
UDATA_DEBUG


1174 
	`årštf
(
¡d”r
, " P=% T=%s\n", 
pkgName
.
	`d©a
(), 
Œ“Name
.data());

1183 
tocEÁryName
.
	`­³nd
(
pkgName
, *
pE¼ÜCode
);

1184 
tocEÁryP©h
.
	`­³nd
(
pkgName
, *
pE¼ÜCode
);

1185 
tocEÁrySuffixIndex
 = 
tocEÁryName
.
	`Ëngth
();

1187 if(!
Œ“Name
.
	`isEm±y
()) {

1188 
tocEÁryName
.
	`­³nd
(
U_TREE_ENTRY_SEP_CHAR
, *
pE¼ÜCode
).­³nd(
Œ“Name
, *pErrorCode);

1189 
tocEÁryP©h
.
	`­³nd
(
U_FILE_SEP_CHAR
, *
pE¼ÜCode
).­³nd(
Œ“Name
, *pErrorCode);

1192 
tocEÁryName
.
	`­³nd
(
U_TREE_ENTRY_SEP_CHAR
, *
pE¼ÜCode
).­³nd(
Çme
, *pErrorCode);

1193 
tocEÁryP©h
.
	`­³nd
(
U_FILE_SEP_CHAR
, *
pE¼ÜCode
).­³nd(
Çme
, *pErrorCode);

1194 if(
ty³
!=
NULL
 && *type!=0) {

1195 
tocEÁryName
.
	`­³nd
(".", *
pE¼ÜCode
).­³nd(
ty³
, *pErrorCode);

1196 
tocEÁryP©h
.
	`­³nd
(".", *
pE¼ÜCode
).­³nd(
ty³
, *pErrorCode);

1198 
tocEÁryP©hSuffix
 = 
tocEÁryP©h
.
	`d©a
()+
tocEÁrySuffixIndex
;

1200 #ifdeà
UDATA_DEBUG


1201 
	`årštf
(
¡d”r
, "ocEÁryNamğ%s\n", 
tocEÁryName
.
	`d©a
());

1202 
	`årštf
(
¡d”r
, "ocEÁryP©h = %s\n", 
tocEÁryName
.
	`d©a
());

1205 if(
·th
 =ğ
NULL
) {

1206 
·th
 = 
COMMON_DATA_NAME
;

1210 #ifdeà
UDATA_DEBUG


1211 
	`årštf
(
¡d”r
, "IND: inBa£Çmğ%s,…kg=%s\n", "Ò/a)", 
	`·ckageNameFromP©h
(
·th
));

1215 
d©aP©h
 = 
	`u_g‘D©aDœeùÜy
();

1218 if(
gD©aFeAcûss
 =ğ
UDATA_PACKAGES_FIRST
) {

1219 #ifdeà
UDATA_DEBUG


1220 
	`årštf
(
¡d”r
, "Trying…ackages (UDATA_PACKAGES_FIRST)\n");

1223 
»tV®
 = 
	`doLßdFromCommÚD©a
(
isICUD©a
,

1224 
pkgName
.
	`d©a
(), 
d©aP©h
, 
tocEÁryP©hSuffix
, 
tocEÁryName
.data(),

1225 
·th
, 
ty³
, 
Çme
, 
isAcû±abË
, 
cÚ‹xt
, &
subE¼ÜCode
, 
pE¼ÜCode
);

1226 if((
»tV®
 !ğ
NULL
è|| 
	`U_FAILURE
(*
pE¼ÜCode
)) {

1227  
»tV®
;

1232 if((
gD©aFeAcûss
==
UDATA_PACKAGES_FIRST
) ||

1233 (
gD©aFeAcûss
==
UDATA_FILES_FIRST
)) {

1234 #ifdeà
UDATA_DEBUG


1235 
	`årštf
(
¡d”r
, "Trying individual files\n");

1238 ià((
d©aP©h
 && *d©aP©hè|| !
isICUD©a
) {

1239 
»tV®
 = 
	`doLßdFromIndividu®Fes
(
pkgName
.
	`d©a
(), 
d©aP©h
, 
tocEÁryP©hSuffix
,

1240 
·th
, 
ty³
, 
Çme
, 
isAcû±abË
, 
cÚ‹xt
, &
subE¼ÜCode
, 
pE¼ÜCode
);

1241 if((
»tV®
 !ğ
NULL
è|| 
	`U_FAILURE
(*
pE¼ÜCode
)) {

1242  
»tV®
;

1248 if((
gD©aFeAcûss
==
UDATA_ONLY_PACKAGES
) ||

1249 (
gD©aFeAcûss
==
UDATA_FILES_FIRST
)) {

1250 #ifdeà
UDATA_DEBUG


1251 
	`årštf
(
¡d”r
, "Trying…ackages (UDATA_ONLY_PACKAGES || UDATA_FILES_FIRST)\n");

1253 
»tV®
 = 
	`doLßdFromCommÚD©a
(
isICUD©a
,

1254 
pkgName
.
	`d©a
(), 
d©aP©h
, 
tocEÁryP©hSuffix
, 
tocEÁryName
.data(),

1255 
·th
, 
ty³
, 
Çme
, 
isAcû±abË
, 
cÚ‹xt
, &
subE¼ÜCode
, 
pE¼ÜCode
);

1256 if((
»tV®
 !ğ
NULL
è|| 
	`U_FAILURE
(*
pE¼ÜCode
)) {

1257  
»tV®
;

1264 if(
gD©aFeAcûss
==
UDATA_NO_FILES
) {

1265 #ifdeà
UDATA_DEBUG


1266 
	`årštf
(
¡d”r
, "Trying common data (UDATA_NO_FILES)\n");

1268 
»tV®
 = 
	`doLßdFromCommÚD©a
(
isICUD©a
,

1269 
pkgName
.
	`d©a
(), "", 
tocEÁryP©hSuffix
, 
tocEÁryName
.data(),

1270 
·th
, 
ty³
, 
Çme
, 
isAcû±abË
, 
cÚ‹xt
, &
subE¼ÜCode
, 
pE¼ÜCode
);

1271 if((
»tV®
 !ğ
NULL
è|| 
	`U_FAILURE
(*
pE¼ÜCode
)) {

1272  
»tV®
;

1277 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

1278 if(
	`U_SUCCESS
(
subE¼ÜCode
)) {

1280 *
pE¼ÜCode
=
U_FILE_ACCESS_ERROR
;

1283 *
pE¼ÜCode
=
subE¼ÜCode
;

1286  
»tV®
;

1287 
	}
}

1293 
U_CAPI
 
UD©aMemÜy
 * 
U_EXPORT2


1294 
	$ud©a_İ’
(cÚ¡ *
·th
, cÚ¡ *
ty³
, cÚ¡ *
Çme
,

1295 
UE¼ÜCode
 *
pE¼ÜCode
) {

1296 #ifdeà
UDATA_DEBUG


1297 
	`årštf
(
¡d”r
, "ud©a_İ’(): O³nšg: % : % . %s\n", (
·th
?·th:"NULL"), 
Çme
, 
ty³
);

1298 
	`fæush
(
¡d”r
);

1301 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1302  
NULL
;

1303 } if(
Çme
==
NULL
 || *name==0) {

1304 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1305  
NULL
;

1307  
	`doO³nChoiû
(
·th
, 
ty³
, 
Çme
, 
NULL
, NULL, 
pE¼ÜCode
);

1309 
	}
}

1313 
U_CAPI
 
UD©aMemÜy
 * 
U_EXPORT2


1314 
	$ud©a_İ’Choiû
(cÚ¡ *
·th
, cÚ¡ *
ty³
, cÚ¡ *
Çme
,

1315 
UD©aMemÜyIsAcû±abË
 *
isAcû±abË
, *
cÚ‹xt
,

1316 
UE¼ÜCode
 *
pE¼ÜCode
) {

1317 #ifdeà
UDATA_DEBUG


1318 
	`årštf
(
¡d”r
, "ud©a_İ’Choiû(): O³nšg: % : % . %s\n", (
·th
?·th:"NULL"), 
Çme
, 
ty³
);

1321 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1322  
NULL
;

1323 } if(
Çme
==
NULL
 || *Çme==0 || 
isAcû±abË
==NULL) {

1324 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1325  
NULL
;

1327  
	`doO³nChoiû
(
·th
, 
ty³
, 
Çme
, 
isAcû±abË
, 
cÚ‹xt
, 
pE¼ÜCode
);

1329 
	}
}

1333 
U_CAPI
 
U_EXPORT2


1334 
	$ud©a_g‘Info
(
UD©aMemÜy
 *
pD©a
, 
UD©aInfo
 *
pInfo
) {

1335 if(
pInfo
!=
NULL
) {

1336 if(
pD©a
!=
NULL
 &&…D©a->
pH—d”
!=NULL) {

1337 cÚ¡ 
UD©aInfo
 *
šfo
=&
pD©a
->
pH—d”
->info;

1338 
ušt16_t
 
d©aInfoSize
=
	`ud©a_g‘InfoSize
(
šfo
);

1339 if(
pInfo
->
size
>
d©aInfoSize
) {

1340 
pInfo
->
size
=
d©aInfoSize
;

1342 
	`u´v_memıy
((
ušt16_t
 *)
pInfo
+1, (cÚ¡ ušt16_ˆ*)
šfo
+1,…Info->
size
-2);

1343 if(
šfo
->
isBigEndŸn
!=
U_IS_BIG_ENDIAN
) {

1345 
ušt16_t
 
x
=
šfo
->
»£rvedWÜd
;

1346 
pInfo
->
»£rvedWÜd
=(
ušt16_t
)((
x
<<8)|(x>>8));

1349 
pInfo
->
size
=0;

1352 
	}
}

1355 
U_CAPI
 
U_EXPORT2
 
	$ud©a_£tFeAcûss
(
UD©aFeAcûss
 
acûss
, 
UE¼ÜCode
 * )

1357 
gD©aFeAcûss
 = 
acûss
;

1358 
	}
}

	@udatamem.c

20 
	~"unicode/uty³s.h
"

21 
	~"cmemÜy.h
"

22 
	~"unicode/ud©a.h
"

24 
	~"ud©amem.h
"

26 
U_CFUNC
 
	$UD©aMemÜy_š™
(
UD©aMemÜy
 *
This
) {

27 
	`u´v_mem£t
(
This
, 0, (
UD©aMemÜy
));

28 
This
->
Ëngth
=-1;

29 
	}
}

32 
U_CFUNC
 
	$UD©amemÜy_assign
(
UD©aMemÜy
 *
de¡
, UD©aMemÜy *
sourû
) {

34 
UBoŞ
 
m®loûdFÏg
 = 
de¡
->
h—pAÎoÿ‹d
;

35 
	`u´v_memıy
(
de¡
, 
sourû
, (
UD©aMemÜy
));

36 
de¡
->
h—pAÎoÿ‹d
 = 
m®loûdFÏg
;

37 
	}
}

39 
U_CFUNC
 
UD©aMemÜy
 *
	$UD©aMemÜy_ü—‹NewIn¡ªû
(
UE¼ÜCode
 *
pE¼
) {

40 
UD©aMemÜy
 *
This
;

42 ià(
	`U_FAILURE
(*
pE¼
)) {

43  
NULL
;

45 
This
 = 
	`u´v_m®loc
((
UD©aMemÜy
));

46 ià(
This
 =ğ
NULL
) {

47 *
pE¼
 = 
U_MEMORY_ALLOCATION_ERROR
; }

49 
	`UD©aMemÜy_š™
(
This
);

50 
This
->
h—pAÎoÿ‹d
 = 
TRUE
;

52  
This
;

53 
	}
}

56 
U_CFUNC
 cÚ¡ 
D©aH—d”
 *

57 
	$UD©aMemÜy_nÜm®izeD©aPoš‹r
(cÚ¡ *
p
) {

59 cÚ¡ 
D©aH—d”
 *
pdh
 = (cÚ¡ D©aH—d” *)
p
;

60 if(
pdh
==
NULL
 || (pdh->
d©aH—d”
.
magic1
==0xd¨&&…dh->d©aH—d”.
magic2
==0x27)) {

61  
pdh
;

63 #ifdeà
OS400


76  (cÚ¡ 
D©aH—d”
 *)*((cÚ¡ **)
p
+1);

78  (cÚ¡ 
D©aH—d”
 *)((cÚ¡ *)
p
+1);

81 
	}
}

84 
U_CFUNC
 
	$UD©aMemÜy_£tD©a
 (
UD©aMemÜy
 *
This
, cÚ¡ *
d©aAddr
) {

85 
This
->
pH—d”
 = 
	`UD©aMemÜy_nÜm®izeD©aPoš‹r
(
d©aAddr
);

86 
	}
}

89 
U_CAPI
 
U_EXPORT2


90 
	$ud©a_şo£
(
UD©aMemÜy
 *
pD©a
) {

91 if(
pD©a
!=
NULL
) {

92 
	`u´v_unm­Fe
(
pD©a
);

93 if(
pD©a
->
h—pAÎoÿ‹d
 ) {

94 
	`u´v_ä“
(
pD©a
);

96 
	`UD©aMemÜy_š™
(
pD©a
);

99 
	}
}

101 
U_CAPI
 cÚ¡ * 
U_EXPORT2


102 
	$ud©a_g‘MemÜy
(
UD©aMemÜy
 *
pD©a
) {

103 if(
pD©a
!=
NULL
 &&…D©a->
pH—d”
!=NULL) {

104  (*)(
pD©a
->
pH—d”
)+
	`ud©a_g‘H—d”Size
(pData->pHeader);

106  
NULL
;

108 
	}
}

130 
U_CAPI
 
št32_t
 
U_EXPORT2


131 
	$ud©a_g‘L’gth
(cÚ¡ 
UD©aMemÜy
 *
pD©a
) {

132 if(
pD©a
!=
NULL
 &&…D©a->
pH—d”
!=NULL &&…D©a->
Ëngth
>=0) {

137  
pD©a
->
Ëngth
-
	`ud©a_g‘H—d”Size
ÕD©a->
pH—d”
);

141 
	}
}

148 
U_CAPI
 cÚ¡ * 
U_EXPORT2


149 
	$ud©a_g‘RawMemÜy
(cÚ¡ 
UD©aMemÜy
 *
pD©a
) {

150 if(
pD©a
!=
NULL
 &&…D©a->
pH—d”
!=NULL) {

151  
pD©a
->
pH—d”
;

153  
NULL
;

155 
	}
}

157 
U_CFUNC
 
UBoŞ
 
	$UD©aMemÜy_isLßded
(cÚ¡ 
UD©aMemÜy
 *
This
) {

158  
This
->
pH—d”
 !ğ
NULL
;

159 
	}
}

	@udatamem.h

19 #iâdeà
__UDATAMEM_H__


20 
	#__UDATAMEM_H__


	)

22 
	~"unicode/ud©a.h
"

23 
	~"ucmnd©a.h
"

25 
	sUD©aMemÜy
 {

26 cÚ¡ 
commÚD©aFuncs
 *
	mvFuncs
;

28 cÚ¡ 
D©aH—d”
 *
	mpH—d”
;

30 cÚ¡ *
	mtoc
;

32 
UBoŞ
 
	mh—pAÎoÿ‹d
;

35 *
	mm­Addr
;

38 *
	mm­
;

42 
št32_t
 
	mËngth
;

45 
U_CFUNC
 
UD©aMemÜy
 *
UD©aMemÜy_ü—‹NewIn¡ªû
(
UE¼ÜCode
 *
pE¼
);

46 
U_CFUNC
 
UD©amemÜy_assign
 (
UD©aMemÜy
 *
de¡
, UD©aMemÜy *
sourû
);

47 
U_CFUNC
 
UD©aMemÜy_š™
 (
UD©aMemÜy
 *
This
);

48 
U_CFUNC
 
UBoŞ
 
UD©aMemÜy_isLßded
(cÚ¡ 
UD©aMemÜy
 *
This
);

49 
U_CFUNC
 
UD©aMemÜy_£tD©a
 (
UD©aMemÜy
 *
This
, cÚ¡ *
d©aAddr
);

51 
U_CFUNC
 cÚ¡ 
D©aH—d”
 *
UD©aMemÜy_nÜm®izeD©aPoš‹r
(cÚ¡ *
p
);

53 
U_CAPI
 
št32_t
 
U_EXPORT2


54 
ud©a_g‘L’gth
(cÚ¡ 
UD©aMemÜy
 *
pD©a
);

56 
U_CAPI
 cÚ¡ * 
U_EXPORT2


57 
ud©a_g‘RawMemÜy
(cÚ¡ 
UD©aMemÜy
 *
pD©a
);

	@udataswp.c

21 
	~<¡d¬g.h
>

22 
	~"unicode/uty³s.h
"

23 
	~"unicode/ud©a.h
"

24 
	~"ucmnd©a.h
"

25 
	~"cmemÜy.h
"

26 
	~"ud©aswp.h
"

30 
št32_t
 
U_CALLCONV


31 
	$u´v_sw­A¼ay16
(cÚ¡ 
UD©aSw­³r
 *
ds
,

32 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

33 
UE¼ÜCode
 *
pE¼ÜCode
) {

34 cÚ¡ 
ušt16_t
 *
p
;

35 
ušt16_t
 *
q
;

36 
št32_t
 
couÁ
;

37 
ušt16_t
 
x
;

39 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

42 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<0 || (Ëngth&1)!=0 || 
outD©a
==NULL) {

43 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

48 
p
=(cÚ¡ 
ušt16_t
 *)
šD©a
;

49 
q
=(
ušt16_t
 *)
outD©a
;

50 
couÁ
=
Ëngth
/2;

51 
couÁ
>0) {

52 
x
=*
p
++;

53 *
q
++=(
ušt16_t
)((
x
<<8)|(x>>8));

54 --
couÁ
;

57  
Ëngth
;

58 
	}
}

60 
št32_t
 
U_CALLCONV


61 
	$u´v_cİyA¼ay16
(cÚ¡ 
UD©aSw­³r
 *
ds
,

62 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

63 
UE¼ÜCode
 *
pE¼ÜCode
) {

64 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

67 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<0 || (Ëngth&1)!=0 || 
outD©a
==NULL) {

68 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

72 if(
Ëngth
>0 && 
šD©a
!=
outD©a
) {

73 
	`u´v_memıy
(
outD©a
, 
šD©a
, 
Ëngth
);

75  
Ëngth
;

76 
	}
}

78 
št32_t
 
U_CALLCONV


79 
	$u´v_sw­A¼ay32
(cÚ¡ 
UD©aSw­³r
 *
ds
,

80 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

81 
UE¼ÜCode
 *
pE¼ÜCode
) {

82 cÚ¡ 
ušt32_t
 *
p
;

83 
ušt32_t
 *
q
;

84 
št32_t
 
couÁ
;

85 
ušt32_t
 
x
;

87 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

90 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<0 || (Ëngth&3)!=0 || 
outD©a
==NULL) {

91 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

96 
p
=(cÚ¡ 
ušt32_t
 *)
šD©a
;

97 
q
=(
ušt32_t
 *)
outD©a
;

98 
couÁ
=
Ëngth
/4;

99 
couÁ
>0) {

100 
x
=*
p
++;

101 *
q
++=(
ušt32_t
)((
x
<<24)|((x<<8)&0xff0000)|((x>>8)&0xff00)|(x>>24));

102 --
couÁ
;

105  
Ëngth
;

106 
	}
}

108 
št32_t
 
U_CALLCONV


109 
	$u´v_cİyA¼ay32
(cÚ¡ 
UD©aSw­³r
 *
ds
,

110 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

111 
UE¼ÜCode
 *
pE¼ÜCode
) {

112 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

115 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<0 || (Ëngth&3)!=0 || 
outD©a
==NULL) {

116 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

120 if(
Ëngth
>0 && 
šD©a
!=
outD©a
) {

121 
	`u´v_memıy
(
outD©a
, 
šD©a
, 
Ëngth
);

123  
Ëngth
;

124 
	}
}

126 
ušt16_t
 
U_CALLCONV


127 
	$u´v_»adSw­UIÁ16
(
ušt16_t
 
x
) {

128  (
ušt16_t
)((
x
<<8)|(x>>8));

129 
	}
}

131 
ušt16_t
 
U_CALLCONV


132 
	$u´v_»adDœeùUIÁ16
(
ušt16_t
 
x
) {

133  
x
;

134 
	}
}

136 
ušt32_t
 
U_CALLCONV


137 
	$u´v_»adSw­UIÁ32
(
ušt32_t
 
x
) {

138  (
ušt32_t
)((
x
<<24)|((x<<8)&0xff0000)|((x>>8)&0xff00)|(x>>24));

139 
	}
}

141 
ušt32_t
 
U_CALLCONV


142 
	$u´v_»adDœeùUIÁ32
(
ušt32_t
 
x
) {

143  
x
;

144 
	}
}

146 
U_CALLCONV


147 
	$u´v_wr™eSw­UIÁ16
(
ušt16_t
 *
p
, ušt16_ˆ
x
) {

148 *
p
=(
ušt16_t
)((
x
<<8)|(x>>8));

149 
	}
}

151 
U_CALLCONV


152 
	$u´v_wr™eDœeùUIÁ16
(
ušt16_t
 *
p
, ušt16_ˆ
x
) {

153 *
p
=
x
;

154 
	}
}

156 
U_CALLCONV


157 
	$u´v_wr™eSw­UIÁ32
(
ušt32_t
 *
p
, ušt32_ˆ
x
) {

158 *
p
=(
ušt32_t
)((
x
<<24)|((x<<8)&0xff0000)|((x>>8)&0xff00)|(x>>24));

159 
	}
}

161 
U_CALLCONV


162 
	$u´v_wr™eDœeùUIÁ32
(
ušt32_t
 *
p
, ušt32_ˆ
x
) {

163 *
p
=
x
;

164 
	}
}

166 
U_CAPI
 
št16_t
 
U_EXPORT2


167 
	$ud©a_»adIÁ16
(cÚ¡ 
UD©aSw­³r
 *
ds
, 
št16_t
 
x
) {

168  (
št16_t
)
ds
->
	`»adUIÁ16
((
ušt16_t
)
x
);

169 
	}
}

171 
U_CAPI
 
št32_t
 
U_EXPORT2


172 
	$ud©a_»adIÁ32
(cÚ¡ 
UD©aSw­³r
 *
ds
, 
št32_t
 
x
) {

173  (
št32_t
)
ds
->
	`»adUIÁ32
((
ušt32_t
)
x
);

174 
	}
}

181 
U_CAPI
 
št32_t
 
U_EXPORT2


182 
	$ud©a_sw­InvSŒšgBlock
(cÚ¡ 
UD©aSw­³r
 *
ds
,

183 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

184 
UE¼ÜCode
 *
pE¼ÜCode
) {

185 cÚ¡ *
šCh¬s
;

186 
št32_t
 
¡ršgsL’gth
;

188 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

191 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<0 || (Ëngth>0 && 
outD©a
==NULL)) {

192 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

197 
šCh¬s
=(cÚ¡ *)
šD©a
;

198 
¡ršgsL’gth
=
Ëngth
;

199 
¡ršgsL’gth
>0 && 
šCh¬s
[stringsLength-1]!=0) {

200 --
¡ršgsL’gth
;

204 
ds
->
	`sw­InvCh¬s
(ds, 
šD©a
, 
¡ršgsL’gth
, 
outD©a
, 
pE¼ÜCode
);

207 if(
šD©a
!=
outD©a
 && 
Ëngth
>
¡ršgsL’gth
) {

208 
	`u´v_memıy
((*)
outD©a
+
¡ršgsL’gth
, 
šCh¬s
+¡ršgsL’gth, 
Ëngth
-stringsLength);

212 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

213  
Ëngth
;

217 
	}
}

219 
U_CAPI
 
U_EXPORT2


220 
	$ud©a_´štE¼Ü
(cÚ¡ 
UD©aSw­³r
 *
ds
,

221 cÚ¡ *
fmt
,

223 
va_li¡
 
¬gs
;

225 if(
ds
->
´štE¼Ü
!=
NULL
) {

226 
	`va_¡¬t
(
¬gs
, 
fmt
);

227 
ds
->
	`´štE¼Ü
(ds->
´štE¼ÜCÚ‹xt
, 
fmt
, 
¬gs
);

228 
	`va_’d
(
¬gs
);

230 
	}
}

234 
U_CAPI
 
št32_t
 
U_EXPORT2


235 
	$ud©a_sw­D©aH—d”
(cÚ¡ 
UD©aSw­³r
 *
ds
,

236 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

237 
UE¼ÜCode
 *
pE¼ÜCode
) {

238 cÚ¡ 
D©aH—d”
 *
pH—d”
;

239 
ušt16_t
 
h—d”Size
, 
šfoSize
;

242 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

245 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<-1 || (Ëngth>0 && 
outD©a
==NULL)) {

246 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

251 
pH—d”
=(cÚ¡ 
D©aH—d”
 *)
šD©a
;

252 ifĞ(
Ëngth
>=0 &&†’gth<(
D©aH—d”
)) ||

253 
pH—d”
->
d©aH—d”
.
magic1
!=0xda ||

254 
pH—d”
->
d©aH—d”
.
magic2
!=0x27 ||

255 
pH—d”
->
šfo
.
sizeofUCh¬
!=2

257 
	`ud©a_´štE¼Ü
(
ds
, "udata_swapDataHeader(): initial bytes do‚ot†ook†ike ICU data\n");

258 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

262 
h—d”Size
=
ds
->
	`»adUIÁ16
(
pH—d”
->
d©aH—d”
.headerSize);

263 
šfoSize
=
ds
->
	`»adUIÁ16
(
pH—d”
->
šfo
.
size
);

265 ifĞ
h—d”Size
<(
D©aH—d”
) ||

266 
šfoSize
<(
UD©aInfo
) ||

267 
h—d”Size
<((
pH—d”
->
d©aH—d”
)+
šfoSize
) ||

268 (
Ëngth
>=0 &&†’gth<
h—d”Size
)

270 
	`ud©a_´štE¼Ü
(
ds
, "udata_swapDataHeader(): header size mismatch - headerSize %d infoSize %d†ength %d\n",

271 
h—d”Size
, 
šfoSize
, 
Ëngth
);

272 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

276 if(
Ëngth
>0) {

277 
D©aH—d”
 *
outH—d”
;

278 cÚ¡ *
s
;

279 
št32_t
 
maxL’gth
;

282 if(
šD©a
!=
outD©a
) {

283 
	`u´v_memıy
(
outD©a
, 
šD©a
, 
h—d”Size
);

285 
outH—d”
=(
D©aH—d”
 *)
outD©a
;

287 
outH—d”
->
šfo
.
isBigEndŸn
 = 
ds
->
outIsBigEndŸn
;

288 
outH—d”
->
šfo
.
ch¬£tFamy
 = 
ds
->
outCh¬£t
;

291 
ds
->
	`sw­A¼ay16
(ds, &
pH—d”
->
d©aH—d”
.
h—d”Size
, 2, &
outH—d”
->d©aH—d”.h—d”Size, 
pE¼ÜCode
);

294 
ds
->
	`sw­A¼ay16
(ds, &
pH—d”
->
šfo
.
size
, 4, &
outH—d”
->šfo.size, 
pE¼ÜCode
);

297 
šfoSize
+=(
pH—d”
->
d©aH—d”
);

298 
s
=(cÚ¡ *)
šD©a
+
šfoSize
;

299 
maxL’gth
=
h—d”Size
-
šfoSize
;

301 
Ëngth
=0;†’gth<
maxL’gth
 && 
s
[length]!=0; ++length) {}

303 
ds
->
	`sw­InvCh¬s
(ds, 
s
, 
Ëngth
, (*)
outD©a
+
šfoSize
, 
pE¼ÜCode
);

306  
h—d”Size
;

307 
	}
}

311 
U_CAPI
 
UD©aSw­³r
 * 
U_EXPORT2


312 
	$ud©a_İ’Sw­³r
(
UBoŞ
 
šIsBigEndŸn
, 
ušt8_t
 
šCh¬£t
,

313 
UBoŞ
 
outIsBigEndŸn
, 
ušt8_t
 
outCh¬£t
,

314 
UE¼ÜCode
 *
pE¼ÜCode
) {

315 
UD©aSw­³r
 *
sw­³r
;

317 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

318  
NULL
;

320 if(
šCh¬£t
>
U_EBCDIC_FAMILY
 || 
outCh¬£t
>U_EBCDIC_FAMILY) {

321 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

322  
NULL
;

326 
sw­³r
=
	`u´v_m®loc
((
UD©aSw­³r
));

327 if(
sw­³r
==
NULL
) {

328 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

329  
NULL
;

331 
	`u´v_mem£t
(
sw­³r
, 0, (
UD©aSw­³r
));

334 
sw­³r
->
šIsBigEndŸn
=inIsBigEndian;

335 
sw­³r
->
šCh¬£t
=inCharset;

336 
sw­³r
->
outIsBigEndŸn
=outIsBigEndian;

337 
sw­³r
->
outCh¬£t
=outCharset;

339 
sw­³r
->
»adUIÁ16
ğ
šIsBigEndŸn
==
U_IS_BIG_ENDIAN
 ? 
u´v_»adDœeùUIÁ16
 : 
u´v_»adSw­UIÁ16
;

340 
sw­³r
->
»adUIÁ32
ğ
šIsBigEndŸn
==
U_IS_BIG_ENDIAN
 ? 
u´v_»adDœeùUIÁ32
 : 
u´v_»adSw­UIÁ32
;

342 
sw­³r
->
wr™eUIÁ16
ğ
outIsBigEndŸn
==
U_IS_BIG_ENDIAN
 ? 
u´v_wr™eDœeùUIÁ16
 : 
u´v_wr™eSw­UIÁ16
;

343 
sw­³r
->
wr™eUIÁ32
ğ
outIsBigEndŸn
==
U_IS_BIG_ENDIAN
 ? 
u´v_wr™eDœeùUIÁ32
 : 
u´v_wr™eSw­UIÁ32
;

345 
sw­³r
->
com·»InvCh¬s
ğ
outCh¬£t
==
U_ASCII_FAMILY
 ? 
u´v_com·»InvAscii
 : 
u´v_com·»InvEbcdic
;

347 
sw­³r
->
sw­A¼ay16
ğ
šIsBigEndŸn
==
outIsBigEndŸn
 ? 
u´v_cİyA¼ay16
 : 
u´v_sw­A¼ay16
;

348 
sw­³r
->
sw­A¼ay32
ğ
šIsBigEndŸn
==
outIsBigEndŸn
 ? 
u´v_cİyA¼ay32
 : 
u´v_sw­A¼ay32
;

350 if(
šCh¬£t
==
U_ASCII_FAMILY
) {

351 
sw­³r
->
sw­InvCh¬s
ğ
outCh¬£t
==
U_ASCII_FAMILY
 ? 
u´v_cİyAscii
 : 
u´v_ebcdicFromAscii
;

353 
sw­³r
->
sw­InvCh¬s
ğ
outCh¬£t
==
U_EBCDIC_FAMILY
 ? 
u´v_cİyEbcdic
 : 
u´v_asciiFromEbcdic
;

356  
sw­³r
;

357 
	}
}

359 
U_CAPI
 
UD©aSw­³r
 * 
U_EXPORT2


360 
	$ud©a_İ’Sw­³rFÜIÅutD©a
(cÚ¡ *
d©a
, 
št32_t
 
Ëngth
,

361 
UBoŞ
 
outIsBigEndŸn
, 
ušt8_t
 
outCh¬£t
,

362 
UE¼ÜCode
 *
pE¼ÜCode
) {

363 cÚ¡ 
D©aH—d”
 *
pH—d”
;

364 
ušt16_t
 
h—d”Size
, 
šfoSize
;

365 
UBoŞ
 
šIsBigEndŸn
;

366 
št8_t
 
šCh¬£t
;

368 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

369  
NULL
;

371 ifĞ
d©a
==
NULL
 ||

372 (
Ëngth
>=0 &&†’gth<(
D©aH—d”
)) ||

373 
outCh¬£t
>
U_EBCDIC_FAMILY


375 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

376  
NULL
;

379 
pH—d”
=(cÚ¡ 
D©aH—d”
 *)
d©a
;

380 ifĞ(
Ëngth
>=0 &&†’gth<(
D©aH—d”
)) ||

381 
pH—d”
->
d©aH—d”
.
magic1
!=0xda ||

382 
pH—d”
->
d©aH—d”
.
magic2
!=0x27 ||

383 
pH—d”
->
šfo
.
sizeofUCh¬
!=2

385 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

389 
šIsBigEndŸn
=(
UBoŞ
)
pH—d”
->
šfo
.
isBigEndŸn
;

390 
šCh¬£t
=
pH—d”
->
šfo
.
ch¬£tFamy
;

392 if(
šIsBigEndŸn
==
U_IS_BIG_ENDIAN
) {

393 
h—d”Size
=
pH—d”
->
d©aH—d”
.headerSize;

394 
šfoSize
=
pH—d”
->
šfo
.
size
;

396 
h—d”Size
=
	`u´v_»adSw­UIÁ16
(
pH—d”
->
d©aH—d”
.headerSize);

397 
šfoSize
=
	`u´v_»adSw­UIÁ16
(
pH—d”
->
šfo
.
size
);

400 ifĞ
h—d”Size
<(
D©aH—d”
) ||

401 
šfoSize
<(
UD©aInfo
) ||

402 
h—d”Size
<((
pH—d”
->
d©aH—d”
)+
šfoSize
) ||

403 (
Ëngth
>=0 &&†’gth<
h—d”Size
)

405 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

409  
	`ud©a_İ’Sw­³r
(
šIsBigEndŸn
, 
šCh¬£t
, 
outIsBigEndŸn
, 
outCh¬£t
, 
pE¼ÜCode
);

410 
	}
}

412 
U_CAPI
 
U_EXPORT2


413 
	$ud©a_şo£Sw­³r
(
UD©aSw­³r
 *
ds
) {

414 
	`u´v_ä“
(
ds
);

415 
	}
}

	@udataswp.h

21 #iâdeà
__UDATASWP_H__


22 
	#__UDATASWP_H__


	)

24 
	~<¡d¬g.h
>

25 
	~"unicode/uty³s.h
"

29 
U_CDECL_BEGIN


31 
	gUD©aSw­³r
;

32 
UD©aSw­³r
 
	tUD©aSw­³r
;

87 
št32_t
 
	tU_CALLCONV


88 
	tUD©aSw­Fn
(cÚ¡ 
	tUD©aSw­³r
 *
	tds
,

89 cÚ¡ *
	tšD©a
, 
	tšt32_t
 
	tËngth
, *
	toutD©a
,

90 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

96 
ušt16_t
 
	tU_CALLCONV


97 
	tUD©aR—dUIÁ16
(
	tušt16_t
 
	tx
);

103 
ušt32_t
 
	tU_CALLCONV


104 
	tUD©aR—dUIÁ32
(
	tušt32_t
 
	tx
);

110 
	tU_CALLCONV


111 
	tUD©aWr™eUIÁ16
(
	tušt16_t
 *
	tp
, ušt16_ˆ
	tx
);

117 
	tU_CALLCONV


118 
	tUD©aWr™eUIÁ32
(
	tušt32_t
 *
	tp
, ušt32_ˆ
	tx
);

130 
št32_t
 
	tU_CALLCONV


131 
	tUD©aCom·»InvCh¬s
(cÚ¡ 
	tUD©aSw­³r
 *
	tds
,

132 cÚ¡ *
	toutSŒšg
, 
	tšt32_t
 
	toutL’gth
,

133 cÚ¡ 
	tUCh¬
 *
	tloÿlSŒšg
, 
	tšt32_t
 
	tloÿlL’gth
);

146 
	tU_CALLCONV


147 
	tUD©aPrštE¼Ü
(*
	tcÚ‹xt
, cÚ¡ *
	tfmt
, 
	tva_li¡
 
	t¬gs
);

149 
	sUD©aSw­³r
 {

151 
UBoŞ
 
	mšIsBigEndŸn
;

153 
ušt8_t
 
	mšCh¬£t
;

155 
UBoŞ
 
	moutIsBigEndŸn
;

157 
ušt8_t
 
	moutCh¬£t
;

162 
UD©aR—dUIÁ16
 *
	m»adUIÁ16
;

164 
UD©aR—dUIÁ32
 *
	m»adUIÁ32
;

166 
UD©aCom·»InvCh¬s
 *
	mcom·»InvCh¬s
;

171 
UD©aWr™eUIÁ16
 *
	mwr™eUIÁ16
;

173 
UD©aWr™eUIÁ32
 *
	mwr™eUIÁ32
;

178 
UD©aSw­Fn
 *
	msw­A¼ay16
;

180 
UD©aSw­Fn
 *
	msw­A¼ay32
;

182 
UD©aSw­Fn
 *
	msw­InvCh¬s
;

189 
UD©aPrštE¼Ü
 *
	m´štE¼Ü
;

191 *
	m´štE¼ÜCÚ‹xt
;

194 
U_CDECL_END


196 
U_CAPI
 
UD©aSw­³r
 * 
U_EXPORT2


197 
ud©a_İ’Sw­³r
(
UBoŞ
 
šIsBigEndŸn
, 
ušt8_t
 
šCh¬£t
,

198 
UBoŞ
 
outIsBigEndŸn
, 
ušt8_t
 
outCh¬£t
,

199 
UE¼ÜCode
 *
pE¼ÜCode
);

210 
U_CAPI
 
UD©aSw­³r
 * 
U_EXPORT2


211 
ud©a_İ’Sw­³rFÜIÅutD©a
(cÚ¡ *
d©a
, 
št32_t
 
Ëngth
,

212 
UBoŞ
 
outIsBigEndŸn
, 
ušt8_t
 
outCh¬£t
,

213 
UE¼ÜCode
 *
pE¼ÜCode
);

215 
U_CAPI
 
U_EXPORT2


216 
ud©a_şo£Sw­³r
(
UD©aSw­³r
 *
ds
);

227 
U_CAPI
 
št32_t
 
U_EXPORT2


228 
ud©a_sw­D©aH—d”
(cÚ¡ 
UD©aSw­³r
 *
ds
,

229 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

230 
UE¼ÜCode
 *
pE¼ÜCode
);

236 
U_CAPI
 
št16_t
 
U_EXPORT2


237 
ud©a_»adIÁ16
(cÚ¡ 
UD©aSw­³r
 *
ds
, 
št16_t
 
x
);

243 
U_CAPI
 
št32_t
 
U_EXPORT2


244 
ud©a_»adIÁ32
(cÚ¡ 
UD©aSw­³r
 *
ds
, 
št32_t
 
x
);

251 
U_CAPI
 
št32_t
 
U_EXPORT2


252 
ud©a_sw­InvSŒšgBlock
(cÚ¡ 
UD©aSw­³r
 *
ds
,

253 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

254 
UE¼ÜCode
 *
pE¼ÜCode
);

256 
U_CAPI
 
U_EXPORT2


257 
ud©a_´štE¼Ü
(cÚ¡ 
UD©aSw­³r
 *
ds
,

258 cÚ¡ *
fmt
,

269 
U_CAPI
 
št32_t
 
U_EXPORT2


270 
u´v_ebcdicFromAscii
(cÚ¡ 
UD©aSw­³r
 *
ds
,

271 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

272 
UE¼ÜCode
 *
pE¼ÜCode
);

278 
U_CFUNC
 
št32_t


279 
u´v_cİyAscii
(cÚ¡ 
UD©aSw­³r
 *
ds
,

280 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

281 
UE¼ÜCode
 *
pE¼ÜCode
);

287 
U_CFUNC
 
št32_t


288 
u´v_asciiFromEbcdic
(cÚ¡ 
UD©aSw­³r
 *
ds
,

289 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

290 
UE¼ÜCode
 *
pE¼ÜCode
);

296 
U_CFUNC
 
št32_t


297 
u´v_cİyEbcdic
(cÚ¡ 
UD©aSw­³r
 *
ds
,

298 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

299 
UE¼ÜCode
 *
pE¼ÜCode
);

305 
U_CFUNC
 
št32_t


306 
u´v_com·»InvAscii
(cÚ¡ 
UD©aSw­³r
 *
ds
,

307 cÚ¡ *
outSŒšg
, 
št32_t
 
outL’gth
,

308 cÚ¡ 
UCh¬
 *
loÿlSŒšg
, 
št32_t
 
loÿlL’gth
);

314 
U_CFUNC
 
št32_t


315 
u´v_com·»InvEbcdic
(cÚ¡ 
UD©aSw­³r
 *
ds
,

316 cÚ¡ *
outSŒšg
, 
št32_t
 
outL’gth
,

317 cÚ¡ 
UCh¬
 *
loÿlSŒšg
, 
št32_t
 
loÿlL’gth
);

340 
U_CAPI
 
UD©aMemÜy
 * 
U_EXPORT2


341 
ud©a_İ’Sw­
(cÚ¡ *
·th
, cÚ¡ *
ty³
, cÚ¡ *
Çme
,

342 
UD©aMemÜyIsAcû±abË
 *
isAcû±abË
, *
isAcû±abËCÚ‹xt
,

343 
UD©aSw­Fn
 *
sw­
,

344 
UD©aPrštE¼Ü
 *
´štE¼Ü
, *
´štE¼ÜCÚ‹xt
,

345 
UE¼ÜCode
 *
pE¼ÜCode
);

	@uenum.c

17 
	~"unicode/put.h
"

18 
	~"u’umimp.h
"

19 
	~"cmemÜy.h
"

23 
št32_t
 
	mËn
;

24 
	md©a
;

25 } 
	t_UEnumBufãr
;

28 cÚ¡ 
št32_t
 
	gPAD
 = 8;

32 * 
	$_g‘Bufãr
(
UEnum”©iÚ
* 
’
, 
št32_t
 
ÿ·c™y
) {

34 ià(
’
->
ba£CÚ‹xt
 !ğ
NULL
) {

35 ià(((
_UEnumBufãr
*è
’
->
ba£CÚ‹xt
)->
Ën
 < 
ÿ·c™y
) {

36 
ÿ·c™y
 +ğ
PAD
;

37 
’
->
ba£CÚ‹xt
 = 
	`u´v_»®loc
(en->baseContext,

38 (
št32_t
è+ 
ÿ·c™y
);

39 ià(
’
->
ba£CÚ‹xt
 =ğ
NULL
) {

40  
NULL
;

42 ((
_UEnumBufãr
*è
’
->
ba£CÚ‹xt
)->
Ën
 = 
ÿ·c™y
;

45 
ÿ·c™y
 +ğ
PAD
;

46 
’
->
ba£CÚ‹xt
 = 
	`u´v_m®loc
((
št32_t
è+ 
ÿ·c™y
);

47 ià(
’
->
ba£CÚ‹xt
 =ğ
NULL
) {

48  
NULL
;

50 ((
_UEnumBufãr
*è
’
->
ba£CÚ‹xt
)->
Ën
 = 
ÿ·c™y
;

53  (*è& ((
_UEnumBufãr
*è
’
->
ba£CÚ‹xt
)->
d©a
;

54 
	}
}

56 
U_CAPI
 
U_EXPORT2


57 
	$u’um_şo£
(
UEnum”©iÚ
* 
’
)

59 ià(
’
) {

60 ià(
’
->
şo£
 !ğ
NULL
) {

61 ià(
’
->
ba£CÚ‹xt
) {

62 
	`u´v_ä“
(
’
->
ba£CÚ‹xt
);

64 
’
->
	`şo£
(en);

66 
	`u´v_ä“
(
’
);

69 
	}
}

71 
U_CAPI
 
št32_t
 
U_EXPORT2


72 
	$u’um_couÁ
(
UEnum”©iÚ
* 
’
, 
UE¼ÜCode
* 
¡©us
)

74 ià(!
’
 || 
	`U_FAILURE
(*
¡©us
)) {

77 ià(
’
->
couÁ
 !ğ
NULL
) {

78  
’
->
	`couÁ
Ón, 
¡©us
);

80 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

83 
	}
}

86 
U_CAPI
 cÚ¡ 
UCh¬
* 
U_EXPORT2


87 
	$u’um_uÃxtDeçuÉ
(
UEnum”©iÚ
* 
’
,

88 
št32_t
* 
»suÉL’gth
,

89 
UE¼ÜCode
* 
¡©us
)

91 
UCh¬
 *
u¡r
 = 
NULL
;

92 
št32_t
 
Ën
 = 0;

93 ià(
’
->
Ãxt
 !ğ
NULL
) {

94 cÚ¡ *
c¡r
 = 
’
->
	`Ãxt
Ón, &
Ën
, 
¡©us
);

95 ià(
c¡r
 !ğ
NULL
) {

96 
u¡r
 = (
UCh¬
*è
	`_g‘Bufãr
(
’
, (
Ën
+1) * (UChar));

97 ià(
u¡r
 =ğ
NULL
) {

98 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

100 
	`u_ch¬sToUCh¬s
(
c¡r
, 
u¡r
, 
Ën
+1);

104 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

106 ià(
»suÉL’gth
) {

107 *
»suÉL’gth
 = 
Ën
;

109  
u¡r
;

110 
	}
}

113 
U_CAPI
 cÚ¡ * 
U_EXPORT2


114 
	$u’um_ÃxtDeçuÉ
(
UEnum”©iÚ
* 
’
,

115 
št32_t
* 
»suÉL’gth
,

116 
UE¼ÜCode
* 
¡©us
)

118 ià(
’
->
uNext
 !ğ
NULL
) {

119 *
‹mpCh¬V®
;

120 cÚ¡ 
UCh¬
 *
‹mpUCh¬V®
 = 
’
->
	`uNext
Ón, 
»suÉL’gth
, 
¡©us
);

121 ià(
‹mpUCh¬V®
 =ğ
NULL
) {

122  
NULL
;

124 
‹mpCh¬V®
 = (*)

125 
	`_g‘Bufãr
(
’
, (*
»suÉL’gth
+1) * ());

126 ià(!
‹mpCh¬V®
) {

127 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

128  
NULL
;

130 
	`u_UCh¬sToCh¬s
(
‹mpUCh¬V®
, 
‹mpCh¬V®
, *
»suÉL’gth
 + 1);

131  
‹mpCh¬V®
;

133 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

134  
NULL
;

136 
	}
}

138 
U_CAPI
 cÚ¡ 
UCh¬
* 
U_EXPORT2


139 
	$u’um_uÃxt
(
UEnum”©iÚ
* 
’
,

140 
št32_t
* 
»suÉL’gth
,

141 
UE¼ÜCode
* 
¡©us
)

143 ià(!
’
 || 
	`U_FAILURE
(*
¡©us
)) {

144  
NULL
;

146 ià(
’
->
uNext
 !ğ
NULL
) {

147  
’
->
	`uNext
Ón, 
»suÉL’gth
, 
¡©us
);

149 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

150  
NULL
;

152 
	}
}

154 
U_CAPI
 cÚ¡ * 
U_EXPORT2


155 
	$u’um_Ãxt
(
UEnum”©iÚ
* 
’
,

156 
št32_t
* 
»suÉL’gth
,

157 
UE¼ÜCode
* 
¡©us
)

159 ià(!
’
 || 
	`U_FAILURE
(*
¡©us
)) {

160  
NULL
;

162 ià(
’
->
Ãxt
 !ğ
NULL
) {

163  
’
->
	`Ãxt
Ón, 
»suÉL’gth
, 
¡©us
);

165 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

166  
NULL
;

168 
	}
}

170 
U_CAPI
 
U_EXPORT2


171 
	$u’um_»£t
(
UEnum”©iÚ
* 
’
, 
UE¼ÜCode
* 
¡©us
)

173 ià(!
’
 || 
	`U_FAILURE
(*
¡©us
)) {

176 ià(
’
->
»£t
 !ğ
NULL
) {

177 
’
->
	`»£t
Ón, 
¡©us
);

179 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

181 
	}
}

	@uenumimp.h

17 #iâdeà
__UENUMIMP_H


18 
	#__UENUMIMP_H


	)

20 
	~"unicode/u’um.h
"

22 
U_CDECL_BEGIN


42 
	tU_CALLCONV


43 
	tUEnumClo£
(
	tUEnum”©iÚ
 *
	t’
);

55 
št32_t
 
	tU_CALLCONV


56 
	tUEnumCouÁ
(
	tUEnum”©iÚ
 *
	t’
, 
	tUE¼ÜCode
 *
	t¡©us
);

70 cÚ¡ 
	tUCh¬
* 
	tU_CALLCONV


71 
	tUEnumUNext
(
	tUEnum”©iÚ
* 
	t’
,

72 
	tšt32_t
* 
	t»suÉL’gth
,

73 
	tUE¼ÜCode
* 
	t¡©us
);

87 cÚ¡ * 
	tU_CALLCONV


88 
	tUEnumNext
(
	tUEnum”©iÚ
* 
	t’
,

89 
	tšt32_t
* 
	t»suÉL’gth
,

90 
	tUE¼ÜCode
* 
	t¡©us
);

101 
	tU_CALLCONV


102 
	tUEnumRe£t
(
	tUEnum”©iÚ
* 
	t’
,

103 
	tUE¼ÜCode
* 
	t¡©us
);

106 
	sUEnum”©iÚ
 {

108 *
	mba£CÚ‹xt
;

111 *
	mcÚ‹xt
;

118 
UEnumClo£
 *
	mşo£
;

120 
UEnumCouÁ
 *
	mcouÁ
;

122 
UEnumUNext
 *
	muNext
;

124 
UEnumNext
 *
	mÃxt
;

126 
UEnumRe£t
 *
	m»£t
;

129 
U_CDECL_END


137 
U_CAPI
 cÚ¡ 
UCh¬
* 
U_EXPORT2


138 
u’um_uÃxtDeçuÉ
(
UEnum”©iÚ
* 
’
,

139 
št32_t
* 
»suÉL’gth
,

140 
UE¼ÜCode
* 
¡©us
);

148 
U_CAPI
 cÚ¡ * 
U_EXPORT2


149 
u’um_ÃxtDeçuÉ
(
UEnum”©iÚ
* 
’
,

150 
št32_t
* 
»suÉL’gth
,

151 
UE¼ÜCode
* 
¡©us
);

	@uhash.c

13 
	~"uhash.h
"

14 
	~"unicode/u¡ršg.h
"

15 
	~"c¡ršg.h
"

16 
	~"cmemÜy.h
"

17 
	~"uas£¹.h
"

78 cÚ¡ 
št32_t
 
	gPRIMES
[] = {

85 
	#PRIMES_LENGTH
 ((
PRIMES
è/ (PRIMES[0]))

	)

86 
	#DEFAULT_PRIME_INDEX
 3

	)

94 cÚ¡ 
	gRESIZE_POLICY_RATIO_TABLE
[6] = {

112 
	#HASH_DELETED
 ((
št32_t
è0x80000000)

	)

113 
	#HASH_EMPTY
 ((
št32_t
è
HASH_DELETED
 + 1)

	)

115 
	#IS_EMPTY_OR_DELETED
(
x
è((xè< 0)

	)

119 
	#HASH_DELETE_KEY_VALUE
(
hash
, 
keypoš‹r
, 
v®u•oš‹r
) \

120 ià(
hash
->
keyD–‘”
 !ğ
NULL
 && 
keypoš‹r
 != NULL) { \

121 (*
hash
->
keyD–‘”
)(
keypoš‹r
); \

123 ià(
hash
->
v®ueD–‘”
 !ğ
NULL
 && 
v®u•oš‹r
 != NULL) { \

124 (*
hash
->
v®ueD–‘”
)(
v®u•oš‹r
); \

125 }

	)

132 
	#HINT_KEY_POINTER
 (1)

	)

133 
	#HINT_VALUE_POINTER
 (2)

	)

139 
UHashTok


140 
	$_uhash_£tEËm’t
(
UHashbË
 *
hash
, 
UHashEËm’t
* 
e
,

141 
št32_t
 
hashcode
,

142 
UHashTok
 
key
, UHashTok 
v®ue
, 
št8_t
 
hšt
) {

144 
UHashTok
 
ŞdV®ue
 = 
e
->
v®ue
;

145 ià(
hash
->
keyD–‘”
 !ğ
NULL
 && 
e
->
key
.
poš‹r
 != NULL &&

146 
e
->
key
.
poš‹r
 != key.pointer) {

147 (*
hash
->
keyD–‘”
)(
e
->
key
.
poš‹r
);

149 ià(
hash
->
v®ueD–‘”
 !ğ
NULL
) {

150 ià(
ŞdV®ue
.
poš‹r
 !ğ
NULL
 &&

151 
ŞdV®ue
.
poš‹r
 !ğ
v®ue
.pointer) {

152 (*
hash
->
v®ueD–‘”
)(
ŞdV®ue
.
poš‹r
);

154 
ŞdV®ue
.
poš‹r
 = 
NULL
;

162 ià(
hšt
 & 
HINT_KEY_POINTER
) {

163 
e
->
key
.
poš‹r
 = key.pointer;

165 
e
->
key
 = key;

167 ià(
hšt
 & 
HINT_VALUE_POINTER
) {

168 
e
->
v®ue
.
poš‹r
 = value.pointer;

170 
e
->
v®ue
 = value;

172 
e
->
hashcode
 = hashcode;

173  
ŞdV®ue
;

174 
	}
}

179 
UHashTok


180 
	$_uhash_š‹º®RemoveEËm’t
(
UHashbË
 *
hash
, 
UHashEËm’t
* 
e
) {

181 
UHashTok
 
em±y
;

182 
	`U_ASSERT
(!
	`IS_EMPTY_OR_DELETED
(
e
->
hashcode
));

183 --
hash
->
couÁ
;

184 
em±y
.
poš‹r
 = 
NULL
;ƒm±y.
š‹g”
 = 0;

185  
	`_uhash_£tEËm’t
(
hash
, 
e
, 
HASH_DELETED
, 
em±y
,ƒmpty, 0);

186 
	}
}

189 
	$_uhash_š‹º®S‘ResizePŞicy
(
UHashbË
 *
hash
, 
UHashResizePŞicy
 
pŞicy
) {

190 
	`U_ASSERT
(
hash
 !ğ
NULL
);

191 
	`U_ASSERT
(((
št32_t
)
pŞicy
) >= 0);

192 
	`U_ASSERT
(((
št32_t
)
pŞicy
) < 3);

193 
hash
->
lowW©”R©io
 = 
RESIZE_POLICY_RATIO_TABLE
[
pŞicy
 * 2];

194 
hash
->
highW©”R©io
 = 
RESIZE_POLICY_RATIO_TABLE
[
pŞicy
 * 2 + 1];

195 
	}
}

207 
	$_uhash_®loÿ‹
(
UHashbË
 *
hash
,

208 
št32_t
 
´imeIndex
,

209 
UE¼ÜCode
 *
¡©us
) {

211 
UHashEËm’t
 *
p
, *
lim™
;

212 
UHashTok
 
em±ytok
;

214 ià(
	`U_FAILURE
(*
¡©us
)) ;

216 
	`U_ASSERT
(
´imeIndex
 >ğ0 &&…rimeIndex < 
PRIMES_LENGTH
);

218 
hash
->
´imeIndex
 =…rimeIndex;

219 
hash
->
Ëngth
 = 
PRIMES
[
´imeIndex
];

221 
p
 = 
hash
->
–em’ts
 = (
UHashEËm’t
*)

222 
	`u´v_m®loc
((
UHashEËm’t
è* 
hash
->
Ëngth
);

224 ià(
hash
->
–em’ts
 =ğ
NULL
) {

225 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

229 
em±ytok
.
poš‹r
 = 
NULL
;

230 
em±ytok
.
š‹g”
 = 0;

232 
lim™
 = 
p
 + 
hash
->
Ëngth
;

233 
p
 < 
lim™
) {

234 
p
->
key
 = 
em±ytok
;

235 
p
->
v®ue
 = 
em±ytok
;

236 
p
->
hashcode
 = 
HASH_EMPTY
;

237 ++
p
;

240 
hash
->
couÁ
 = 0;

241 
hash
->
lowW©”M¬k
 = (
št32_t
)(hash->
Ëngth
 * hash->
lowW©”R©io
);

242 
hash
->
highW©”M¬k
 = (
št32_t
)(hash->
Ëngth
 * hash->
highW©”R©io
);

243 
	}
}

245 
UHashbË
*

246 
	$_uhash_š™
(
UHashbË
 *
»suÉ
,

247 
UHashFunùiÚ
 *
keyHash
,

248 
UKeyCom·¿tÜ
 *
keyComp
,

249 
UV®ueCom·¿tÜ
 *
v®ueComp
,

250 
št32_t
 
´imeIndex
,

251 
UE¼ÜCode
 *
¡©us
)

253 ià(
	`U_FAILURE
(*
¡©us
)è 
NULL
;

254 
	`U_ASSERT
(
keyHash
 !ğ
NULL
);

255 
	`U_ASSERT
(
keyComp
 !ğ
NULL
);

257 
»suÉ
->
keyHash”
 = 
keyHash
;

258 
»suÉ
->
keyCom·¿tÜ
 = 
keyComp
;

259 
»suÉ
->
v®ueCom·¿tÜ
 = 
v®ueComp
;

260 
»suÉ
->
keyD–‘”
 = 
NULL
;

261 
»suÉ
->
v®ueD–‘”
 = 
NULL
;

262 
»suÉ
->
®loÿ‹d
 = 
FALSE
;

263 
	`_uhash_š‹º®S‘ResizePŞicy
(
»suÉ
, 
U_GROW
);

265 
	`_uhash_®loÿ‹
(
»suÉ
, 
´imeIndex
, 
¡©us
);

267 ià(
	`U_FAILURE
(*
¡©us
)) {

268  
NULL
;

271  
»suÉ
;

272 
	}
}

274 
UHashbË
*

275 
	$_uhash_ü—‹
(
UHashFunùiÚ
 *
keyHash
,

276 
UKeyCom·¿tÜ
 *
keyComp
,

277 
UV®ueCom·¿tÜ
 *
v®ueComp
,

278 
št32_t
 
´imeIndex
,

279 
UE¼ÜCode
 *
¡©us
) {

280 
UHashbË
 *
»suÉ
;

282 ià(
	`U_FAILURE
(*
¡©us
)è 
NULL
;

284 
»suÉ
 = (
UHashbË
*è
	`u´v_m®loc
((UHashtable));

285 ià(
»suÉ
 =ğ
NULL
) {

286 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

287  
NULL
;

290 
	`_uhash_š™
(
»suÉ
, 
keyHash
, 
keyComp
, 
v®ueComp
, 
´imeIndex
, 
¡©us
);

291 
»suÉ
->
®loÿ‹d
 = 
TRUE
;

293 ià(
	`U_FAILURE
(*
¡©us
)) {

294 
	`u´v_ä“
(
»suÉ
);

295  
NULL
;

298  
»suÉ
;

299 
	}
}

329 
UHashEËm’t
*

330 
	$_uhash_fšd
(cÚ¡ 
UHashbË
 *
hash
, 
UHashTok
 
key
,

331 
št32_t
 
hashcode
) {

333 
št32_t
 
fœ¡D–‘ed
 = -1;

334 
št32_t
 
theIndex
, 
¡¬tIndex
;

335 
št32_t
 
jump
 = 0;

336 
št32_t
 
bËHash
;

337 
UHashEËm’t
 *
–em’ts
 = 
hash
->elements;

339 
hashcode
 &= 0x7FFFFFFF;

340 
¡¬tIndex
 = 
theIndex
 = (
hashcode
 ^ 0x4000000è% 
hash
->
Ëngth
;

343 
bËHash
 = 
–em’ts
[
theIndex
].
hashcode
;

344 ià(
bËHash
 =ğ
hashcode
) {

345 ià((*
hash
->
keyCom·¿tÜ
)(
key
, 
–em’ts
[
theIndex
].key)) {

346  &(
–em’ts
[
theIndex
]);

348 } ià(!
	`IS_EMPTY_OR_DELETED
(
bËHash
)) {

353 } ià(
bËHash
 =ğ
HASH_EMPTY
) {

355 } ià(
fœ¡D–‘ed
 < 0) {

356 
fœ¡D–‘ed
 = 
theIndex
;

358 ià(
jump
 == 0) {

363 
jump
 = (
hashcode
 % (
hash
->
Ëngth
 - 1)) + 1;

365 
theIndex
 = (theIndex + 
jump
è% 
hash
->
Ëngth
;

366 } 
theIndex
 !ğ
¡¬tIndex
);

368 ià(
fœ¡D–‘ed
 >= 0) {

369 
theIndex
 = 
fœ¡D–‘ed
;

370 } ià(
bËHash
 !ğ
HASH_EMPTY
) {

376 
	`U_ASSERT
(
FALSE
);

377  
NULL
;

379  &(
–em’ts
[
theIndex
]);

380 
	}
}

392 
	$_uhash_»hash
(
UHashbË
 *
hash
, 
UE¼ÜCode
 *
¡©us
) {

394 
UHashEËm’t
 *
Şd
 = 
hash
->
–em’ts
;

395 
št32_t
 
ŞdL’gth
 = 
hash
->
Ëngth
;

396 
št32_t
 
ÃwPrimeIndex
 = 
hash
->
´imeIndex
;

397 
št32_t
 
i
;

399 ià(
hash
->
couÁ
 > hash->
highW©”M¬k
) {

400 ià(++
ÃwPrimeIndex
 >ğ
PRIMES_LENGTH
) {

403 } ià(
hash
->
couÁ
 < hash->
lowW©”M¬k
) {

404 ià(--
ÃwPrimeIndex
 < 0) {

411 
	`_uhash_®loÿ‹
(
hash
, 
ÃwPrimeIndex
, 
¡©us
);

413 ià(
	`U_FAILURE
(*
¡©us
)) {

414 
hash
->
–em’ts
 = 
Şd
;

415 
hash
->
Ëngth
 = 
ŞdL’gth
;

419 
i
 = 
ŞdL’gth
 - 1; i >= 0; --i) {

420 ià(!
	`IS_EMPTY_OR_DELETED
(
Şd
[
i
].
hashcode
)) {

421 
UHashEËm’t
 *
e
 = 
	`_uhash_fšd
(
hash
, 
Şd
[
i
].
key
, old[i].
hashcode
);

422 
	`U_ASSERT
(
e
 !ğ
NULL
);

423 
	`U_ASSERT
(
e
->
hashcode
 =ğ
HASH_EMPTY
);

424 
e
->
key
 = 
Şd
[
i
].key;

425 
e
->
v®ue
 = 
Şd
[
i
].value;

426 
e
->
hashcode
 = 
Şd
[
i
].hashcode;

427 ++
hash
->
couÁ
;

431 
	`u´v_ä“
(
Şd
);

432 
	}
}

434 
UHashTok


435 
	$_uhash_»move
(
UHashbË
 *
hash
,

436 
UHashTok
 
key
) {

444 
UHashTok
 
»suÉ
;

445 
UHashEËm’t
* 
e
 = 
	`_uhash_fšd
(
hash
, 
key
, hash->
	`keyHash”
(key));

446 
	`U_ASSERT
(
e
 !ğ
NULL
);

447 
»suÉ
.
poš‹r
 = 
NULL
;

448 
»suÉ
.
š‹g”
 = 0;

449 ià(!
	`IS_EMPTY_OR_DELETED
(
e
->
hashcode
)) {

450 
»suÉ
 = 
	`_uhash_š‹º®RemoveEËm’t
(
hash
, 
e
);

451 ià(
hash
->
couÁ
 < hash->
lowW©”M¬k
) {

452 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

453 
	`_uhash_»hash
(
hash
, &
¡©us
);

456  
»suÉ
;

457 
	}
}

459 
UHashTok


460 
	$_uhash_put
(
UHashbË
 *
hash
,

461 
UHashTok
 
key
,

462 
UHashTok
 
v®ue
,

463 
št8_t
 
hšt
,

464 
UE¼ÜCode
 *
¡©us
) {

471 
št32_t
 
hashcode
;

472 
UHashEËm’t
* 
e
;

473 
UHashTok
 
em±ytok
;

475 ià(
	`U_FAILURE
(*
¡©us
)) {

476 
”r
;

478 
	`U_ASSERT
(
hash
 !ğ
NULL
);

480 ià((
hšt
 & 
HINT_VALUE_POINTER
è&& 
v®ue
.
poš‹r
 =ğ
NULL
) {

484  
	`_uhash_»move
(
hash
, 
key
);

486 ià(
hash
->
couÁ
 > hash->
highW©”M¬k
) {

487 
	`_uhash_»hash
(
hash
, 
¡©us
);

488 ià(
	`U_FAILURE
(*
¡©us
)) {

489 
”r
;

493 
hashcode
 = (*
hash
->
keyHash”
)(
key
);

494 
e
 = 
	`_uhash_fšd
(
hash
, 
key
, 
hashcode
);

495 
	`U_ASSERT
(
e
 !ğ
NULL
);

497 ià(
	`IS_EMPTY_OR_DELETED
(
e
->
hashcode
)) {

505 ++
hash
->
couÁ
;

506 ià(
hash
->
couÁ
 =ğhash->
Ëngth
) {

508 --
hash
->
couÁ
;

509 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

510 
”r
;

518  
	`_uhash_£tEËm’t
(
hash
, 
e
, 
hashcode
 & 0x7FFFFFFF, 
key
, 
v®ue
, 
hšt
);

520 
”r
:

525 
	`HASH_DELETE_KEY_VALUE
(
hash
, 
key
.
poš‹r
, 
v®ue
.pointer);

526 
em±ytok
.
poš‹r
 = 
NULL
;ƒm±ytok.
š‹g”
 = 0;

527  
em±ytok
;

528 
	}
}

535 
U_CAPI
 
UHashbË
* 
U_EXPORT2


536 
	$uhash_İ’
(
UHashFunùiÚ
 *
keyHash
,

537 
UKeyCom·¿tÜ
 *
keyComp
,

538 
UV®ueCom·¿tÜ
 *
v®ueComp
,

539 
UE¼ÜCode
 *
¡©us
) {

541  
	`_uhash_ü—‹
(
keyHash
, 
keyComp
, 
v®ueComp
, 
DEFAULT_PRIME_INDEX
, 
¡©us
);

542 
	}
}

544 
U_CAPI
 
UHashbË
* 
U_EXPORT2


545 
	$uhash_İ’Size
(
UHashFunùiÚ
 *
keyHash
,

546 
UKeyCom·¿tÜ
 *
keyComp
,

547 
UV®ueCom·¿tÜ
 *
v®ueComp
,

548 
št32_t
 
size
,

549 
UE¼ÜCode
 *
¡©us
) {

552 
št32_t
 
i
 = 0;

553 
i
<(
PRIMES_LENGTH
-1è&& 
PRIMES
[i]<
size
) {

554 ++
i
;

557  
	`_uhash_ü—‹
(
keyHash
, 
keyComp
, 
v®ueComp
, 
i
, 
¡©us
);

558 
	}
}

560 
U_CAPI
 
UHashbË
* 
U_EXPORT2


561 
	$uhash_š™
(
UHashbË
 *
flšResuÉ
,

562 
UHashFunùiÚ
 *
keyHash
,

563 
UKeyCom·¿tÜ
 *
keyComp
,

564 
UV®ueCom·¿tÜ
 *
v®ueComp
,

565 
UE¼ÜCode
 *
¡©us
) {

567  
	`_uhash_š™
(
flšResuÉ
, 
keyHash
, 
keyComp
, 
v®ueComp
, 
DEFAULT_PRIME_INDEX
, 
¡©us
);

568 
	}
}

570 
U_CAPI
 
U_EXPORT2


571 
	$uhash_şo£
(
UHashbË
 *
hash
) {

572 ià(
hash
 =ğ
NULL
) {

575 ià(
hash
->
–em’ts
 !ğ
NULL
) {

576 ià(
hash
->
keyD–‘”
 !ğ
NULL
 || hash->
v®ueD–‘”
 != NULL) {

577 
št32_t
 
pos
=-1;

578 
UHashEËm’t
 *
e
;

579 (
e
 = (
UHashEËm’t
*è
	`uhash_ÃxtEËm’t
(
hash
, &
pos
)è!ğ
NULL
) {

580 
	`HASH_DELETE_KEY_VALUE
(
hash
, 
e
->
key
.
poš‹r
,ƒ->
v®ue
.pointer);

583 
	`u´v_ä“
(
hash
->
–em’ts
);

584 
hash
->
–em’ts
 = 
NULL
;

586 ià(
hash
->
®loÿ‹d
) {

587 
	`u´v_ä“
(
hash
);

589 
	}
}

591 
U_CAPI
 
UHashFunùiÚ
 *
U_EXPORT2


592 
	$uhash_£tKeyHash”
(
UHashbË
 *
hash
, 
UHashFunùiÚ
 *
â
) {

593 
UHashFunùiÚ
 *
»suÉ
 = 
hash
->
keyHash”
;

594 
hash
->
keyHash”
 = 
â
;

595  
»suÉ
;

596 
	}
}

598 
U_CAPI
 
UKeyCom·¿tÜ
 *
U_EXPORT2


599 
	$uhash_£tKeyCom·¿tÜ
(
UHashbË
 *
hash
, 
UKeyCom·¿tÜ
 *
â
) {

600 
UKeyCom·¿tÜ
 *
»suÉ
 = 
hash
->
keyCom·¿tÜ
;

601 
hash
->
keyCom·¿tÜ
 = 
â
;

602  
»suÉ
;

603 
	}
}

604 
U_CAPI
 
UV®ueCom·¿tÜ
 *
U_EXPORT2


605 
	$uhash_£tV®ueCom·¿tÜ
(
UHashbË
 *
hash
, 
UV®ueCom·¿tÜ
 *
â
){

606 
UV®ueCom·¿tÜ
 *
»suÉ
 = 
hash
->
v®ueCom·¿tÜ
;

607 
hash
->
v®ueCom·¿tÜ
 = 
â
;

608  
»suÉ
;

609 
	}
}

611 
U_CAPI
 
UObjeùD–‘”
 *
U_EXPORT2


612 
	$uhash_£tKeyD–‘”
(
UHashbË
 *
hash
, 
UObjeùD–‘”
 *
â
) {

613 
UObjeùD–‘”
 *
»suÉ
 = 
hash
->
keyD–‘”
;

614 
hash
->
keyD–‘”
 = 
â
;

615  
»suÉ
;

616 
	}
}

618 
U_CAPI
 
UObjeùD–‘”
 *
U_EXPORT2


619 
	$uhash_£tV®ueD–‘”
(
UHashbË
 *
hash
, 
UObjeùD–‘”
 *
â
) {

620 
UObjeùD–‘”
 *
»suÉ
 = 
hash
->
v®ueD–‘”
;

621 
hash
->
v®ueD–‘”
 = 
â
;

622  
»suÉ
;

623 
	}
}

625 
U_CAPI
 
U_EXPORT2


626 
	$uhash_£tResizePŞicy
(
UHashbË
 *
hash
, 
UHashResizePŞicy
 
pŞicy
) {

627 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

628 
	`_uhash_š‹º®S‘ResizePŞicy
(
hash
, 
pŞicy
);

629 
hash
->
lowW©”M¬k
 = (
št32_t
)(hash->
Ëngth
 * hash->
lowW©”R©io
);

630 
hash
->
highW©”M¬k
 = (
št32_t
)(hash->
Ëngth
 * hash->
highW©”R©io
);

631 
	`_uhash_»hash
(
hash
, &
¡©us
);

632 
	}
}

634 
U_CAPI
 
št32_t
 
U_EXPORT2


635 
	$uhash_couÁ
(cÚ¡ 
UHashbË
 *
hash
) {

636  
hash
->
couÁ
;

637 
	}
}

639 
U_CAPI
 * 
U_EXPORT2


640 
	$uhash_g‘
(cÚ¡ 
UHashbË
 *
hash
,

641 cÚ¡ * 
key
) {

642 
UHashTok
 
keyhŞd”
;

643 
keyhŞd”
.
poš‹r
 = (*è
key
;

644  
	`_uhash_fšd
(
hash
, 
keyhŞd”
, hash->
	`keyHash”
(keyhŞd”))->
v®ue
.
poš‹r
;

645 
	}
}

647 
U_CAPI
 * 
U_EXPORT2


648 
	$uhash_ig‘
(cÚ¡ 
UHashbË
 *
hash
,

649 
št32_t
 
key
) {

650 
UHashTok
 
keyhŞd”
;

651 
keyhŞd”
.
š‹g”
 = 
key
;

652  
	`_uhash_fšd
(
hash
, 
keyhŞd”
, hash->
	`keyHash”
(keyhŞd”))->
v®ue
.
poš‹r
;

653 
	}
}

655 
U_CAPI
 
št32_t
 
U_EXPORT2


656 
	$uhash_g‘i
(cÚ¡ 
UHashbË
 *
hash
,

657 cÚ¡ * 
key
) {

658 
UHashTok
 
keyhŞd”
;

659 
keyhŞd”
.
poš‹r
 = (*è
key
;

660  
	`_uhash_fšd
(
hash
, 
keyhŞd”
, hash->
	`keyHash”
(keyhŞd”))->
v®ue
.
š‹g”
;

661 
	}
}

663 
U_CAPI
 
št32_t
 
U_EXPORT2


664 
	$uhash_ig‘i
(cÚ¡ 
UHashbË
 *
hash
,

665 
št32_t
 
key
) {

666 
UHashTok
 
keyhŞd”
;

667 
keyhŞd”
.
š‹g”
 = 
key
;

668  
	`_uhash_fšd
(
hash
, 
keyhŞd”
, hash->
	`keyHash”
(keyhŞd”))->
v®ue
.
š‹g”
;

669 
	}
}

671 
U_CAPI
 * 
U_EXPORT2


672 
	$uhash_put
(
UHashbË
 *
hash
,

673 * 
key
,

674 * 
v®ue
,

675 
UE¼ÜCode
 *
¡©us
) {

676 
UHashTok
 
keyhŞd”
, 
v®uehŞd”
;

677 
keyhŞd”
.
poš‹r
 = 
key
;

678 
v®uehŞd”
.
poš‹r
 = 
v®ue
;

679  
	`_uhash_put
(
hash
, 
keyhŞd”
, 
v®uehŞd”
,

680 
HINT_KEY_POINTER
 | 
HINT_VALUE_POINTER
,

681 
¡©us
).
poš‹r
;

682 
	}
}

684 
U_CAPI
 * 
U_EXPORT2


685 
	$uhash_ut
(
UHashbË
 *
hash
,

686 
št32_t
 
key
,

687 * 
v®ue
,

688 
UE¼ÜCode
 *
¡©us
) {

689 
UHashTok
 
keyhŞd”
, 
v®uehŞd”
;

690 
keyhŞd”
.
š‹g”
 = 
key
;

691 
v®uehŞd”
.
poš‹r
 = 
v®ue
;

692  
	`_uhash_put
(
hash
, 
keyhŞd”
, 
v®uehŞd”
,

693 
HINT_VALUE_POINTER
,

694 
¡©us
).
poš‹r
;

695 
	}
}

697 
U_CAPI
 
št32_t
 
U_EXPORT2


698 
	$uhash_puti
(
UHashbË
 *
hash
,

699 * 
key
,

700 
št32_t
 
v®ue
,

701 
UE¼ÜCode
 *
¡©us
) {

702 
UHashTok
 
keyhŞd”
, 
v®uehŞd”
;

703 
keyhŞd”
.
poš‹r
 = 
key
;

704 
v®uehŞd”
.
š‹g”
 = 
v®ue
;

705  
	`_uhash_put
(
hash
, 
keyhŞd”
, 
v®uehŞd”
,

706 
HINT_KEY_POINTER
,

707 
¡©us
).
š‹g”
;

708 
	}
}

711 
U_CAPI
 
št32_t
 
U_EXPORT2


712 
	$uhash_uti
(
UHashbË
 *
hash
,

713 
št32_t
 
key
,

714 
št32_t
 
v®ue
,

715 
UE¼ÜCode
 *
¡©us
) {

716 
UHashTok
 
keyhŞd”
, 
v®uehŞd”
;

717 
keyhŞd”
.
š‹g”
 = 
key
;

718 
v®uehŞd”
.
š‹g”
 = 
v®ue
;

719  
	`_uhash_put
(
hash
, 
keyhŞd”
, 
v®uehŞd”
,

721 
¡©us
).
š‹g”
;

722 
	}
}

724 
U_CAPI
 * 
U_EXPORT2


725 
	$uhash_»move
(
UHashbË
 *
hash
,

726 cÚ¡ * 
key
) {

727 
UHashTok
 
keyhŞd”
;

728 
keyhŞd”
.
poš‹r
 = (*è
key
;

729  
	`_uhash_»move
(
hash
, 
keyhŞd”
).
poš‹r
;

730 
	}
}

732 
U_CAPI
 * 
U_EXPORT2


733 
	$uhash_œemove
(
UHashbË
 *
hash
,

734 
št32_t
 
key
) {

735 
UHashTok
 
keyhŞd”
;

736 
keyhŞd”
.
š‹g”
 = 
key
;

737  
	`_uhash_»move
(
hash
, 
keyhŞd”
).
poš‹r
;

738 
	}
}

740 
U_CAPI
 
št32_t
 
U_EXPORT2


741 
	$uhash_»movei
(
UHashbË
 *
hash
,

742 cÚ¡ * 
key
) {

743 
UHashTok
 
keyhŞd”
;

744 
keyhŞd”
.
poš‹r
 = (*è
key
;

745  
	`_uhash_»move
(
hash
, 
keyhŞd”
).
š‹g”
;

746 
	}
}

748 
U_CAPI
 
št32_t
 
U_EXPORT2


749 
	$uhash_œemovei
(
UHashbË
 *
hash
,

750 
št32_t
 
key
) {

751 
UHashTok
 
keyhŞd”
;

752 
keyhŞd”
.
š‹g”
 = 
key
;

753  
	`_uhash_»move
(
hash
, 
keyhŞd”
).
š‹g”
;

754 
	}
}

756 
U_CAPI
 
U_EXPORT2


757 
	$uhash_»moveAÎ
(
UHashbË
 *
hash
) {

758 
št32_t
 
pos
 = -1;

759 cÚ¡ 
UHashEËm’t
 *
e
;

760 
	`U_ASSERT
(
hash
 !ğ
NULL
);

761 ià(
hash
->
couÁ
 != 0) {

762 (
e
 = 
	`uhash_ÃxtEËm’t
(
hash
, &
pos
)è!ğ
NULL
) {

763 
	`uhash_»moveEËm’t
(
hash
, 
e
);

766 
	`U_ASSERT
(
hash
->
couÁ
 == 0);

767 
	}
}

769 
U_CAPI
 cÚ¡ 
UHashEËm’t
* 
U_EXPORT2


770 
	$uhash_fšd
(cÚ¡ 
UHashbË
 *
hash
, cÚ¡ * 
key
) {

771 
UHashTok
 
keyhŞd”
;

772 cÚ¡ 
UHashEËm’t
 *
e
;

773 
keyhŞd”
.
poš‹r
 = (*è
key
;

774 
e
 = 
	`_uhash_fšd
(
hash
, 
keyhŞd”
, hash->
	`keyHash”
(keyholder));

775  
	`IS_EMPTY_OR_DELETED
(
e
->
hashcode
è? 
NULL
 :ƒ;

776 
	}
}

778 
U_CAPI
 cÚ¡ 
UHashEËm’t
* 
U_EXPORT2


779 
	$uhash_ÃxtEËm’t
(cÚ¡ 
UHashbË
 *
hash
, 
št32_t
 *
pos
) {

783 
št32_t
 
i
;

784 
	`U_ASSERT
(
hash
 !ğ
NULL
);

785 
i
 = *
pos
 + 1; i < 
hash
->
Ëngth
; ++i) {

786 ià(!
	`IS_EMPTY_OR_DELETED
(
hash
->
–em’ts
[
i
].
hashcode
)) {

787 *
pos
 = 
i
;

788  &(
hash
->
–em’ts
[
i
]);

793  
NULL
;

794 
	}
}

796 
U_CAPI
 * 
U_EXPORT2


797 
	$uhash_»moveEËm’t
(
UHashbË
 *
hash
, cÚ¡ 
UHashEËm’t
* 
e
) {

798 
	`U_ASSERT
(
hash
 !ğ
NULL
);

799 
	`U_ASSERT
(
e
 !ğ
NULL
);

800 ià(!
	`IS_EMPTY_OR_DELETED
(
e
->
hashcode
)) {

801 
UHashEËm’t
 *
nû
 = (UHashEËm’ˆ*)
e
;

802  
	`_uhash_š‹º®RemoveEËm’t
(
hash
, 
nû
).
poš‹r
;

804  
NULL
;

805 
	}
}

844 
	#STRING_HASH
(
TYPE
, 
STR
, 
STRLEN
, 
DEREF
) \

845 
št32_t
 
hash
 = 0; \

846 cÚ¡ 
TYPE
 *
p
 = (cÚ¡ TYPE*è
STR
; \

847 ià(
p
 !ğ
NULL
) { \

848 
št32_t
 
Ën
 = (št32_t)(
STRLEN
); \

849 
št32_t
 
šc
 = ((
Ën
 - 32) / 32) + 1; \

850 cÚ¡ 
TYPE
 *
lim™
 = 
p
 + 
Ën
; \

851 
p
<
lim™
) { \

852 
hash
 = (hash * 37è+ 
DEREF
; \

853 
p
 +ğ
šc
; \

856  
hash


	)

858 
U_CAPI
 
št32_t
 
U_EXPORT2


859 
	$uhash_hashUCh¬s
(cÚ¡ 
UHashTok
 
key
) {

860 
	`STRING_HASH
(
UCh¬
, 
key
.
poš‹r
, 
	`u_¡¾’
(
p
), *p);

861 
	}
}

864 
U_CAPI
 
št32_t
 
U_EXPORT2


865 
	$uhash_hashUCh¬sN
(cÚ¡ 
UCh¬
 *
¡r
, 
št32_t
 
Ëngth
) {

866 
	`STRING_HASH
(
UCh¬
, 
¡r
, 
Ëngth
, *
p
);

867 
	}
}

869 
U_CAPI
 
št32_t
 
U_EXPORT2


870 
	$uhash_hashCh¬s
(cÚ¡ 
UHashTok
 
key
) {

871 
	`STRING_HASH
(
ušt8_t
, 
key
.
poš‹r
, 
	`u´v_¡¾’
((*)
p
), *p);

872 
	}
}

874 
U_CAPI
 
št32_t
 
U_EXPORT2


875 
	$uhash_hashICh¬s
(cÚ¡ 
UHashTok
 
key
) {

876 
	`STRING_HASH
(
ušt8_t
, 
key
.
poš‹r
, 
	`u´v_¡¾’
((*)
p
), 
	`u´v_tŞow”
(*p));

877 
	}
}

879 
U_CAPI
 
UBoŞ
 
U_EXPORT2


880 
	$uhash_equ®s
(cÚ¡ 
UHashbË
* 
hash1
, cÚ¡ UHashbË* 
hash2
){

882 
št32_t
 
couÁ1
, 
couÁ2
, 
pos
, 
i
;

884 if(
hash1
==
hash2
){

885  
TRUE
;

896 ià(
hash1
==
NULL
 || 
hash2
==NULL ||

897 
hash1
->
keyCom·¿tÜ
 !ğ
hash2
->keyComparator ||

898 
hash1
->
v®ueCom·¿tÜ
 !ğ
hash2
->valueComparator ||

899 
hash1
->
v®ueCom·¿tÜ
 =ğ
NULL
)

905  
FALSE
;

908 
couÁ1
 = 
	`uhash_couÁ
(
hash1
);

909 
couÁ2
 = 
	`uhash_couÁ
(
hash2
);

910 if(
couÁ1
!=
couÁ2
){

911  
FALSE
;

914 
pos
=-1;

915 
i
=0; i<
couÁ1
; i++){

916 cÚ¡ 
UHashEËm’t
* 
–em1
 = 
	`uhash_ÃxtEËm’t
(
hash1
, &
pos
);

917 cÚ¡ 
UHashTok
 
key1
 = 
–em1
->
key
;

918 cÚ¡ 
UHashTok
 
v®1
 = 
–em1
->
v®ue
;

923 cÚ¡ 
UHashEËm’t
* 
–em2
 = 
	`_uhash_fšd
(
hash2
, 
key1
, hash2->
	`keyHash”
(key1));

924 cÚ¡ 
UHashTok
 
v®2
 = 
–em2
->
v®ue
;

925 if(
hash1
->
	`v®ueCom·¿tÜ
(
v®1
, 
v®2
)==
FALSE
){

926  
FALSE
;

929  
TRUE
;

930 
	}
}

936 
U_CAPI
 
UBoŞ
 
U_EXPORT2


937 
	$uhash_com·»UCh¬s
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
) {

938 cÚ¡ 
UCh¬
 *
p1
 = (cÚ¡ UCh¬*è
key1
.
poš‹r
;

939 cÚ¡ 
UCh¬
 *
p2
 = (cÚ¡ UCh¬*è
key2
.
poš‹r
;

940 ià(
p1
 =ğ
p2
) {

941  
TRUE
;

943 ià(
p1
 =ğ
NULL
 || 
p2
 == NULL) {

944  
FALSE
;

946 *
p1
 !ğ0 && *p1 =ğ*
p2
) {

947 ++
p1
;

948 ++
p2
;

950  (
UBoŞ
)(*
p1
 =ğ*
p2
);

951 
	}
}

953 
U_CAPI
 
UBoŞ
 
U_EXPORT2


954 
	$uhash_com·»Ch¬s
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
) {

955 cÚ¡ *
p1
 = (cÚ¡ *è
key1
.
poš‹r
;

956 cÚ¡ *
p2
 = (cÚ¡ *è
key2
.
poš‹r
;

957 ià(
p1
 =ğ
p2
) {

958  
TRUE
;

960 ià(
p1
 =ğ
NULL
 || 
p2
 == NULL) {

961  
FALSE
;

963 *
p1
 !ğ0 && *p1 =ğ*
p2
) {

964 ++
p1
;

965 ++
p2
;

967  (
UBoŞ
)(*
p1
 =ğ*
p2
);

968 
	}
}

970 
U_CAPI
 
UBoŞ
 
U_EXPORT2


971 
	$uhash_com·»ICh¬s
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
) {

972 cÚ¡ *
p1
 = (cÚ¡ *è
key1
.
poš‹r
;

973 cÚ¡ *
p2
 = (cÚ¡ *è
key2
.
poš‹r
;

974 ià(
p1
 =ğ
p2
) {

975  
TRUE
;

977 ià(
p1
 =ğ
NULL
 || 
p2
 == NULL) {

978  
FALSE
;

980 *
p1
 !ğ0 && 
	`u´v_tŞow”
(*p1è=ğu´v_tŞow”(*
p2
)) {

981 ++
p1
;

982 ++
p2
;

984  (
UBoŞ
)(*
p1
 =ğ*
p2
);

985 
	}
}

991 
U_CAPI
 
št32_t
 
U_EXPORT2


992 
	$uhash_hashLÚg
(cÚ¡ 
UHashTok
 
key
) {

993  
key
.
š‹g”
;

994 
	}
}

996 
U_CAPI
 
UBoŞ
 
U_EXPORT2


997 
	$uhash_com·»LÚg
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
) {

998  (
UBoŞ
)(
key1
.
š‹g”
 =ğ
key2
.integer);

999 
	}
}

1005 
U_CAPI
 
U_EXPORT2


1006 
	$uhash_ä“Block
(*
obj
) {

1007 
	`u´v_ä“
(
obj
);

1008 
	}
}

	@uhash.h

13 #iâdeà
UHASH_H


14 
	#UHASH_H


	)

16 
	~"unicode/uty³s.h
"

76 
U_CDECL_BEGIN


88 
	uUHashTok
 {

89 * 
	mpoš‹r
;

90 
št32_t
 
	mš‹g”
;

92 
UHashTok
 
	tUHashTok
;

97 
	sUHashEËm’t
 {

99 
št32_t
 
	mhashcode
;

100 
UHashTok
 
	mv®ue
;

101 
UHashTok
 
	mkey
;

103 
UHashEËm’t
 
	tUHashEËm’t
;

110 
št32_t
 
	tU_CALLCONV
 
	tUHashFunùiÚ
(cÚ¡ 
	tUHashTok
 
	tkey
);

118 
UBoŞ
 
	tU_CALLCONV
 
	tUKeyCom·¿tÜ
(cÚ¡ 
	tUHashTok
 
	tkey1
,

119 cÚ¡ 
	tUHashTok
 
	tkey2
);

126 
UBoŞ
 
	tU_CALLCONV
 
	tUV®ueCom·¿tÜ
(cÚ¡ 
	tUHashTok
 
	tv®1
,

127 cÚ¡ 
	tUHashTok
 
	tv®2
);

135 
	tU_CALLCONV
 
	tUObjeùD–‘”
(* 
	tobj
);

141 
	eUHashResizePŞicy
 {

142 
	mU_GROW
,

143 
	mU_GROW_AND_SHRINK
,

144 
	mU_FIXED


151 
	sUHashbË
 {

155 
UHashEËm’t
 *
	m–em’ts
;

159 
UHashFunùiÚ
 *
	mkeyHash”
;

161 
UKeyCom·¿tÜ
 *
	mkeyCom·¿tÜ
;

163 
UV®ueCom·¿tÜ
 *
	mv®ueCom·¿tÜ
;

165 
UObjeùD–‘”
 *
	mkeyD–‘”
;

167 
UObjeùD–‘”
 *
	mv®ueD–‘”
;

172 
št32_t
 
	mcouÁ
;

175 
št32_t
 
	mËngth
;

180 
št32_t
 
	mhighW©”M¬k
;

181 
št32_t
 
	mlowW©”M¬k
;

182 
	mhighW©”R©io
;

183 
	mlowW©”R©io
;

185 
št8_t
 
	m´imeIndex
;

187 
UBoŞ
 
	m®loÿ‹d
;

189 
UHashbË
 
	tUHashbË
;

191 
U_CDECL_END


207 
U_CAPI
 
UHashbË
* 
U_EXPORT2


208 
uhash_İ’
(
UHashFunùiÚ
 *
keyHash
,

209 
UKeyCom·¿tÜ
 *
keyComp
,

210 
UV®ueCom·¿tÜ
 *
v®ueComp
,

211 
UE¼ÜCode
 *
¡©us
);

224 
U_CAPI
 
UHashbË
* 
U_EXPORT2


225 
uhash_İ’Size
(
UHashFunùiÚ
 *
keyHash
,

226 
UKeyCom·¿tÜ
 *
keyComp
,

227 
UV®ueCom·¿tÜ
 *
v®ueComp
,

228 
št32_t
 
size
,

229 
UE¼ÜCode
 *
¡©us
);

241 
U_CAPI
 
UHashbË
* 
U_EXPORT2


242 
uhash_š™
(
UHashbË
 *
hash
,

243 
UHashFunùiÚ
 *
keyHash
,

244 
UKeyCom·¿tÜ
 *
keyComp
,

245 
UV®ueCom·¿tÜ
 *
v®ueComp
,

246 
UE¼ÜCode
 *
¡©us
);

252 
U_CAPI
 
U_EXPORT2


253 
uhash_şo£
(
UHashbË
 *
hash
);

263 
U_CAPI
 
UHashFunùiÚ
 *
U_EXPORT2


264 
uhash_£tKeyHash”
(
UHashbË
 *
hash
, 
UHashFunùiÚ
 *
â
);

273 
U_CAPI
 
UKeyCom·¿tÜ
 *
U_EXPORT2


274 
uhash_£tKeyCom·¿tÜ
(
UHashbË
 *
hash
, 
UKeyCom·¿tÜ
 *
â
);

283 
U_CAPI
 
UV®ueCom·¿tÜ
 *
U_EXPORT2


284 
uhash_£tV®ueCom·¿tÜ
(
UHashbË
 *
hash
, 
UV®ueCom·¿tÜ
 *
â
);

296 
U_CAPI
 
UObjeùD–‘”
 *
U_EXPORT2


297 
uhash_£tKeyD–‘”
(
UHashbË
 *
hash
, 
UObjeùD–‘”
 *
â
);

309 
U_CAPI
 
UObjeùD–‘”
 *
U_EXPORT2


310 
uhash_£tV®ueD–‘”
(
UHashbË
 *
hash
, 
UObjeùD–‘”
 *
â
);

319 
U_CAPI
 
U_EXPORT2


320 
uhash_£tResizePŞicy
(
UHashbË
 *
hash
, 
UHashResizePŞicy
 
pŞicy
);

327 
U_CAPI
 
št32_t
 
U_EXPORT2


328 
uhash_couÁ
(cÚ¡ 
UHashbË
 *
hash
);

343 
U_CAPI
 * 
U_EXPORT2


344 
uhash_put
(
UHashbË
 *
hash
,

345 *
key
,

346 *
v®ue
,

347 
UE¼ÜCode
 *
¡©us
);

361 
U_CAPI
 * 
U_EXPORT2


362 
uhash_ut
(
UHashbË
 *
hash
,

363 
št32_t
 
key
,

364 * 
v®ue
,

365 
UE¼ÜCode
 *
¡©us
);

379 
U_CAPI
 
št32_t
 
U_EXPORT2


380 
uhash_puti
(
UHashbË
 *
hash
,

381 * 
key
,

382 
št32_t
 
v®ue
,

383 
UE¼ÜCode
 *
¡©us
);

397 
U_CAPI
 
št32_t
 
U_EXPORT2


398 
uhash_uti
(
UHashbË
 *
hash
,

399 
št32_t
 
key
,

400 
št32_t
 
v®ue
,

401 
UE¼ÜCode
 *
¡©us
);

410 
U_CAPI
 * 
U_EXPORT2


411 
uhash_g‘
(cÚ¡ 
UHashbË
 *
hash
,

412 cÚ¡ *
key
);

421 
U_CAPI
 * 
U_EXPORT2


422 
uhash_ig‘
(cÚ¡ 
UHashbË
 *
hash
,

423 
št32_t
 
key
);

432 
U_CAPI
 
št32_t
 
U_EXPORT2


433 
uhash_g‘i
(cÚ¡ 
UHashbË
 *
hash
,

434 cÚ¡ * 
key
);

442 
U_CAPI
 
št32_t
 
U_EXPORT2


443 
uhash_ig‘i
(cÚ¡ 
UHashbË
 *
hash
,

444 
št32_t
 
key
);

452 
U_CAPI
 * 
U_EXPORT2


453 
uhash_»move
(
UHashbË
 *
hash
,

454 cÚ¡ *
key
);

462 
U_CAPI
 * 
U_EXPORT2


463 
uhash_œemove
(
UHashbË
 *
hash
,

464 
št32_t
 
key
);

472 
U_CAPI
 
št32_t
 
U_EXPORT2


473 
uhash_»movei
(
UHashbË
 *
hash
,

474 cÚ¡ * 
key
);

482 
U_CAPI
 
št32_t
 
U_EXPORT2


483 
uhash_œemovei
(
UHashbË
 *
hash
,

484 
št32_t
 
key
);

490 
U_CAPI
 
U_EXPORT2


491 
uhash_»moveAÎ
(
UHashbË
 *
hash
);

504 
U_CAPI
 cÚ¡ 
UHashEËm’t
* 
U_EXPORT2


505 
uhash_fšd
(cÚ¡ 
UHashbË
 *
hash
, cÚ¡ * 
key
);

520 
U_CAPI
 cÚ¡ 
UHashEËm’t
* 
U_EXPORT2


521 
uhash_ÃxtEËm’t
(cÚ¡ 
UHashbË
 *
hash
,

522 
št32_t
 *
pos
);

535 
U_CAPI
 * 
U_EXPORT2


536 
uhash_»moveEËm’t
(
UHashbË
 *
hash
, cÚ¡ 
UHashEËm’t
* 
e
);

569 
U_CAPI
 
št32_t
 
U_EXPORT2


570 
uhash_hashUCh¬s
(cÚ¡ 
UHashTok
 
key
);

579 
U_CAPI
 
št32_t
 
U_EXPORT2


580 
uhash_hashCh¬s
(cÚ¡ 
UHashTok
 
key
);

583 
U_CAPI
 
št32_t
 
U_EXPORT2


584 
uhash_hashUCh¬sN
(cÚ¡ 
UCh¬
 *
key
, 
št32_t
 
Ëngth
);

593 
U_CAPI
 
št32_t
 
U_EXPORT2


594 
uhash_hashICh¬s
(cÚ¡ 
UHashTok
 
key
);

603 
U_CAPI
 
UBoŞ
 
U_EXPORT2


604 
uhash_com·»UCh¬s
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
);

613 
U_CAPI
 
UBoŞ
 
U_EXPORT2


614 
uhash_com·»Ch¬s
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
);

623 
U_CAPI
 
UBoŞ
 
U_EXPORT2


624 
uhash_com·»ICh¬s
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
);

635 
U_CAPI
 
št32_t
 
U_EXPORT2


636 
uhash_hashUnicodeSŒšg
(cÚ¡ 
UHashTok
 
key
);

644 
U_CAPI
 
št32_t
 
U_EXPORT2


645 
uhash_hashCa£ËssUnicodeSŒšg
(cÚ¡ 
UHashTok
 
key
);

653 
U_CAPI
 
UBoŞ
 
U_EXPORT2


654 
uhash_com·»UnicodeSŒšg
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
);

663 
U_CAPI
 
UBoŞ
 
U_EXPORT2


664 
uhash_com·»Ca£ËssUnicodeSŒšg
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
);

670 
U_CAPI
 
U_EXPORT2


671 
uhash_d–‘eUnicodeSŒšg
(*
obj
);

682 
U_CAPI
 
št32_t
 
U_EXPORT2


683 
uhash_hashLÚg
(cÚ¡ 
UHashTok
 
key
);

691 
U_CAPI
 
UBoŞ
 
U_EXPORT2


692 
uhash_com·»LÚg
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
);

702 
U_CAPI
 
U_EXPORT2


703 
uhash_d–‘eHashbË
(*
obj
);

709 
U_CAPI
 
U_EXPORT2


710 
uhash_d–‘eUObjeù
(*
obj
);

717 
U_CAPI
 
U_EXPORT2


718 
uhash_ä“Block
(*
obj
);

726 
U_CAPI
 
UBoŞ
 
U_EXPORT2


727 
uhash_equ®s
(cÚ¡ 
UHashbË
* 
hash1
, cÚ¡ UHashbË* 
hash2
);

	@uhash_us.cpp

13 
	~"uhash.h
"

14 
	~"hash.h
"

15 
	~"uveùÜ.h
"

16 
	~"unicode/uni¡r.h
"

17 
	~"unicode/uch¬.h
"

23 
U_CAPI
 
št32_t
 
U_EXPORT2


24 
	$uhash_hashUnicodeSŒšg
(cÚ¡ 
UHashTok
 
key
) {

25 
U_NAMESPACE_USE


26 cÚ¡ 
UnicodeSŒšg
 *
¡r
 = (cÚ¡ UnicodeSŒšg*è
key
.
poš‹r
;

27  (
¡r
 =ğ
NULL
è? 0 : sŒ->
	`hashCode
();

28 
	}
}

30 
U_CAPI
 
U_EXPORT2


31 
	$uhash_d–‘eUnicodeSŒšg
(*
obj
) {

32 
U_NAMESPACE_USE


33 
	`d–‘e
 (
UnicodeSŒšg
*è
obj
;

34 
	}
}

36 
U_CAPI
 
UBoŞ
 
U_EXPORT2


37 
	$uhash_com·»UnicodeSŒšg
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
) {

38 
U_NAMESPACE_USE


39 cÚ¡ 
UnicodeSŒšg
 *
¡r1
 = (cÚ¡ UnicodeSŒšg*è
key1
.
poš‹r
;

40 cÚ¡ 
UnicodeSŒšg
 *
¡r2
 = (cÚ¡ UnicodeSŒšg*è
key2
.
poš‹r
;

41 ià(
¡r1
 =ğ
¡r2
) {

42  
TRUE
;

44 ià(
¡r1
 =ğ
NULL
 || 
¡r2
 == NULL) {

45  
FALSE
;

47  *
¡r1
 =ğ*
¡r2
;

48 
	}
}

53 
U_CAPI
 
U_EXPORT2


54 
	$uhash_d–‘eHashbË
(*
obj
) {

55 
U_NAMESPACE_USE


56 
	`d–‘e
 (
HashbË
*è
obj
;

57 
	}
}

62 
U_CAPI
 
U_EXPORT2


63 
	$uhash_d–‘eUObjeù
(*
obj
) {

64 
U_NAMESPACE_USE


65 
	`d–‘e
 (
UObjeù
*è
obj
;

66 
	}
}

	@uidna.cpp

17 
	~"unicode/uty³s.h
"

19 #ià!
UCONFIG_NO_IDNA


21 
	~"unicode/uidÇ.h
"

22 
	~"unicode/u¡ršg.h
"

23 
	~"unicode/u¥»p.h
"

24 
	~"punycode.h
"

25 
	~"u¡r_imp.h
"

26 
	~"cmemÜy.h
"

27 
	~"uas£¹.h
"

28 
	~"¥½im¶.h
"

31 cÚ¡ 
UCh¬
 
	gACE_PREFIX
[] ={ 0x0078,0x006E,0x002d,0x002d } ;

32 
	#ACE_PREFIX_LENGTH
 4

	)

34 
	#MAX_LABEL_LENGTH
 63

	)

36 
	#MAX_LABEL_BUFFER_SIZE
 100

	)

38 
	#MAX_DOMAIN_NAME_LENGTH
 255

	)

40 
	#MAX_IDN_BUFFER_SIZE
 
MAX_DOMAIN_NAME_LENGTH
+1

	)

42 
	#LOWER_CASE_DELTA
 0x0020

	)

43 
	#HYPHEN
 0x002D

	)

44 
	#FULL_STOP
 0x002E

	)

45 
	#CAPITAL_A
 0x0041

	)

46 
	#CAPITAL_Z
 0x005A

	)

48 
šlše
 
UCh¬


49 
	$toASCIILow”
(
UCh¬
 
ch
){

50 if(
CAPITAL_A
 <ğ
ch
 && ch <ğ
CAPITAL_Z
){

51  
ch
 + 
LOWER_CASE_DELTA
;

53  
ch
;

54 
	}
}

56 
šlše
 
UBoŞ


57 
	$¡¬tsW™hP»fix
(cÚ¡ 
UCh¬
* 
¤c
 , 
št32_t
 
¤cL’gth
){

58 
UBoŞ
 
¡¬tsW™hP»fix
 = 
TRUE
;

60 if(
¤cL’gth
 < 
ACE_PREFIX_LENGTH
){

61  
FALSE
;

64 
št8_t
 
i
=0; i< 
ACE_PREFIX_LENGTH
; i++){

65 if(
	`toASCIILow”
(
¤c
[
i
]è!ğ
ACE_PREFIX
[i]){

66 
¡¬tsW™hP»fix
 = 
FALSE
;

69  
¡¬tsW™hP»fix
;

70 
	}
}

73 
šlše
 
št32_t


74 
	$com·»Ca£In£ns™iveASCII
(cÚ¡ 
UCh¬
* 
s1
, 
št32_t
 
s1L’
,

75 cÚ¡ 
UCh¬
* 
s2
, 
št32_t
 
s2L’
){

77 
št32_t
 
mšL’gth
;

78 
št32_t
 
ËngthResuÉ
;

81 if(
s1L’
 !ğ
s2L’
) {

82 if(
s1L’
 < 
s2L’
) {

83 
mšL’gth
 = 
s1L’
;

84 
ËngthResuÉ
 = -1;

86 
mšL’gth
 = 
s2L’
;

87 
ËngthResuÉ
 = 1;

91 
mšL’gth
 = 
s1L’
;

92 
ËngthResuÉ
 = 0;

95 
UCh¬
 
c1
,
c2
;

96 
št32_t
 
rc
;

98 
št32_t
 
i
 =0; ;i++) {

101 if(
i
 =ğ
mšL’gth
) {

102  
ËngthResuÉ
;

105 
c1
 = 
s1
[
i
];

106 
c2
 = 
s2
[
i
];

109 if(
c1
!=
c2
) {

110 
rc
=(
št32_t
)
	`toASCIILow”
(
c1
)-(št32_téoASCIILow”(
c2
);

111 if(
rc
!=0) {

112 
ËngthResuÉ
=
rc
;

117  
ËngthResuÉ
;

118 
	}
}

129 
šlše
 
UBoŞ
 
	$isLab–S•¬©Ü
(
UCh¬
 
ch
){

130 
ch
){

135  
TRUE
;

137  
FALSE
;

139 
	}
}

144 
šlše
 
št32_t


145 
	$g‘NextS•¬©Ü
(
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

146 
UCh¬
 **
lim™
, 
UBoŞ
 *
dÚe
){

147 if(
¤cL’gth
 == -1){

148 
št32_t
 
i
;

149 
i
=0 ; ;i++){

150 if(
¤c
[
i
] == 0){

151 *
lim™
 = 
¤c
 + 
i
;

152 *
dÚe
 = 
TRUE
;

153  
i
;

155 if(
	`isLab–S•¬©Ü
(
¤c
[
i
])){

156 *
lim™
 = 
¤c
 + (
i
+1);

157  
i
;

162 
št32_t
 
i
;

163 
i
=0;i<
¤cL’gth
;i++){

164 if(
	`isLab–S•¬©Ü
(
¤c
[
i
])){

165 *
lim™
 = 
¤c
 + (
i
+1);

166  
i
;

171 *
lim™
 = 
¤c
+
¤cL’gth
;

172 *
dÚe
 = 
TRUE
;

174  
i
;

176 
	}
}

177 
šlše
 
UBoŞ
 
	$isLDHCh¬
(
UCh¬
 
ch
){

179 if(
ch
>0x007A){

180  
FALSE
;

183 ifĞ(
ch
==0x002D) ||

184 (0x0030 <ğ
ch
 && ch <= 0x0039) ||

185 (0x0041 <ğ
ch
 && ch <= 0x005A) ||

186 (0x0061 <ğ
ch
 && ch <= 0x007A)

188  
TRUE
;

190  
FALSE
;

191 
	}
}

193 
št32_t


194 
	$_š‹º®_toASCII
(cÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

195 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

196 
št32_t
 
İtiÚs
,

197 
USŒšgP»pProfe
* 
Çm•»p
,

198 
UP¬£E¼Ü
* 
·r£E¼Ü
,

199 
UE¼ÜCode
* 
¡©us
)

203 
UCh¬
 
b1Sck
[
MAX_LABEL_BUFFER_SIZE
], 
b2Sck
[MAX_LABEL_BUFFER_SIZE];

205 
UCh¬
 *
b1
 = 
b1Sck
, *
b2
 = 
b2Sck
;

206 
št32_t
 
b1L’
=0, 
b2L’
,

207 
b1C­ac™y
 = 
MAX_LABEL_BUFFER_SIZE
,

208 
b2C­ac™y
 = 
MAX_LABEL_BUFFER_SIZE
 ,

209 
»qL’gth
=0;

211 
št32_t
 
ÇmeP»pO±iÚs
 = ((
İtiÚs
 & 
UIDNA_ALLOW_UNASSIGNED
è!ğ0è? 
USPREP_ALLOW_UNASSIGNED
: 0;

212 
UBoŞ
* 
ÿ£FÏgs
 = 
NULL
;

215 
UBoŞ
 
¤cIsASCII
 = 
TRUE
;

217 
UBoŞ
 
¤cIsLDH
 = 
TRUE
;

219 
št32_t
 
j
=0;

222 
UBoŞ
 
u£STD3ASCIIRuËs
 = (UBoŞ)((
İtiÚs
 & 
UIDNA_USE_STD3_RULES
) != 0);

224 
št32_t
 
çPos
 = -1;

226 if(
¤cL’gth
 == -1){

227 
¤cL’gth
 = 
	`u_¡¾’
(
¤c
);

230 if(
¤cL’gth
 > 
b1C­ac™y
){

231 
b1
 = (
UCh¬
*è
	`u´v_m®loc
(
¤cL’gth
 * 
U_SIZEOF_UCHAR
);

232 if(
b1
==
NULL
){

233 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

234 
CLEANUP
;

236 
b1C­ac™y
 = 
¤cL’gth
;

240  
j
=0;j<
¤cL’gth
;j++){

241 if(
¤c
[
j
] > 0x7F){

242 
¤cIsASCII
 = 
FALSE
;

244 
b1
[
b1L’
++] = 
¤c
[
j
];

248 if(
¤cIsASCII
 =ğ
FALSE
){

251 
b1L’
 = 
	`u¥»p_´•¬e
(
Çm•»p
, 
¤c
, 
¤cL’gth
, 
b1
, 
b1C­ac™y
, 
ÇmeP»pO±iÚs
, 
·r£E¼Ü
, 
¡©us
);

253 if(*
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
){

256 if(
b1
 !ğ
b1Sck
){

257 
	`u´v_ä“
(
b1
);

259 
b1
 = (
UCh¬
*è
	`u´v_m®loc
(
b1L’
 * 
U_SIZEOF_UCHAR
);

260 if(
b1
==
NULL
){

261 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

262 
CLEANUP
;

265 *
¡©us
 = 
U_ZERO_ERROR
;

267 
b1L’
 = 
	`u¥»p_´•¬e
(
Çm•»p
, 
¤c
, 
¤cL’gth
, 
b1
, b1L’, 
ÇmeP»pO±iÚs
, 
·r£E¼Ü
, 
¡©us
);

271 if(
	`U_FAILURE
(*
¡©us
)){

272 
CLEANUP
;

274 if(
b1L’
 == 0){

275 *
¡©us
 = 
U_IDNA_ZERO_LENGTH_LABEL_ERROR
;

276 
CLEANUP
;

280 
¤cIsASCII
 = 
TRUE
;

281  
j
=0;j<
b1L’
;j++){

283 if(
b1
[
j
] > 0x7F){

284 
¤cIsASCII
 = 
FALSE
;

285 }if(
	`isLDHCh¬
(
b1
[
j
])==
FALSE
){

286 
¤cIsLDH
 = 
FALSE
;

287 
çPos
 = 
j
;

290 if(
u£STD3ASCIIRuËs
 =ğ
TRUE
){

297 ifĞ
¤cIsLDH
 =ğ
FALSE


298 || 
b1
[0] =ğ
HYPHEN
 || b1[
b1L’
-1] == HYPHEN){

299 *
¡©us
 = 
U_IDNA_STD3_ASCII_RULES_ERROR
;

302 if(
¤cIsLDH
==
FALSE
){

304 
	`u´v_syÁaxE¼Ü
(
b1
,
çPos
, 
b1L’
,
·r£E¼Ü
);

305 }if(
b1
[0] =ğ
HYPHEN
){

307 
	`u´v_syÁaxE¼Ü
(
b1
,0,
b1L’
,
·r£E¼Ü
);

310 
	`u´v_syÁaxE¼Ü
(
b1
, (
b1L’
>0è? b1L’-1 : b1L’, b1L’,
·r£E¼Ü
);

313 
CLEANUP
;

317 if(
¤cIsASCII
){

318 if(
b1L’
 <ğ
de¡C­ac™y
){

319 
	`u´v_memmove
(
de¡
, 
b1
, 
b1L’
 * 
U_SIZEOF_UCHAR
);

320 
»qL’gth
 = 
b1L’
;

322 
»qL’gth
 = 
b1L’
;

323 
CLEANUP
;

327 if(!
	`¡¬tsW™hP»fix
(
b1
,
b1L’
)){

336 
b2L’
 = 
	`u_¡rToPunycode
(
b1
,
b1L’
,
b2
,
b2C­ac™y
,
ÿ£FÏgs
, 
¡©us
);

338 if(*
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
){

341 
b2
 = (
UCh¬
*è
	`u´v_m®loc
(
b2L’
 * 
U_SIZEOF_UCHAR
);

342 if(
b2
 =ğ
NULL
){

343 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

344 
CLEANUP
;

347 *
¡©us
 = 
U_ZERO_ERROR
;

349 
b2L’
 = 
	`u_¡rToPunycode
(
b1
,
b1L’
,
b2
,b2L’,
ÿ£FÏgs
, 
¡©us
);

352 if(
	`U_FAILURE
(*
¡©us
)){

353 
CLEANUP
;

358 
»qL’gth
 = 
b2L’
+
ACE_PREFIX_LENGTH
;

360 if(
»qL’gth
 > 
de¡C­ac™y
){

361 *
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

362 
CLEANUP
;

365 
	`u´v_memıy
(
de¡
,
ACE_PREFIX
,
ACE_PREFIX_LENGTH
 * 
U_SIZEOF_UCHAR
);

367 
	`u´v_memıy
(
de¡
+
ACE_PREFIX_LENGTH
, 
b2
, 
b2L’
 * 
U_SIZEOF_UCHAR
);

370 *
¡©us
 = 
U_IDNA_ACE_PREFIX_ERROR
;

372 
	`u´v_syÁaxE¼Ü
(
b1
,0,
b1L’
,
·r£E¼Ü
);

373 
CLEANUP
;

377 if(
»qL’gth
 > 
MAX_LABEL_LENGTH
){

378 *
¡©us
 = 
U_IDNA_LABEL_TOO_LONG_ERROR
;

381 
CLEANUP
:

382 if(
b1
 !ğ
b1Sck
){

383 
	`u´v_ä“
(
b1
);

385 if(
b2
 !ğ
b2Sck
){

386 
	`u´v_ä“
(
b2
);

388 
	`u´v_ä“
(
ÿ£FÏgs
);

390  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
»qL’gth
, 
¡©us
);

391 
	}
}

393 
št32_t


394 
	$_š‹º®_toUnicode
(cÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

395 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

396 
št32_t
 
İtiÚs
,

397 
USŒšgP»pProfe
* 
Çm•»p
,

398 
UP¬£E¼Ü
* 
·r£E¼Ü
,

399 
UE¼ÜCode
* 
¡©us
)

404 
št32_t
 
ÇmeP»pO±iÚs
 = ((
İtiÚs
 & 
UIDNA_ALLOW_UNASSIGNED
è!ğ0è? 
USPREP_ALLOW_UNASSIGNED
: 0;

407 
UCh¬
 
b1Sck
[
MAX_LABEL_BUFFER_SIZE
], 
b2Sck
[MAX_LABEL_BUFFER_SIZE], 
b3Sck
[MAX_LABEL_BUFFER_SIZE];

410 
UCh¬
 *
b1
 = 
b1Sck
, *
b2
 = 
b2Sck
, *
b1Prime
=
NULL
, *
b3
=
b3Sck
;

411 
št32_t
 
b1L’
, 
b2L’
, 
b1PrimeL’
, 
b3L’
,

412 
b1C­ac™y
 = 
MAX_LABEL_BUFFER_SIZE
,

413 
b2C­ac™y
 = 
MAX_LABEL_BUFFER_SIZE
,

414 
b3C­ac™y
 = 
MAX_LABEL_BUFFER_SIZE
,

415 
»qL’gth
=0;

417 
b1L’
 = 0;

418 
UBoŞ
* 
ÿ£FÏgs
 = 
NULL
;

420 
UBoŞ
 
¤cIsASCII
 = 
TRUE
;

425 if(
¤cL’gth
==-1){

426 
¤cL’gth
 = 0;

427 ;
¤c
[
¤cL’gth
]!=0;){

428 if(
¤c
[
¤cL’gth
]> 0x7f){

429 
¤cIsASCII
 = 
FALSE
;

437 
¤cL’gth
++;

439 }if(
¤cL’gth
 > 0){

440 
št32_t
 
j
=0; j<
¤cL’gth
; j++){

441 if(
¤c
[
j
]> 0x7f){

442 
¤cIsASCII
 = 
FALSE
;

455 if(
¤cIsASCII
 =ğ
FALSE
){

457 
b1L’
 = 
	`u¥»p_´•¬e
(
Çm•»p
, 
¤c
, 
¤cL’gth
, 
b1
, 
b1C­ac™y
, 
ÇmeP»pO±iÚs
, 
·r£E¼Ü
, 
¡©us
);

458 if(*
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
){

461 
b1
 = (
UCh¬
*è
	`u´v_m®loc
(
b1L’
 * 
U_SIZEOF_UCHAR
);

462 if(
b1
==
NULL
){

463 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

464 
CLEANUP
;

467 *
¡©us
 = 
U_ZERO_ERROR
;

469 
b1L’
 = 
	`u¥»p_´•¬e
(
Çm•»p
, 
¤c
, 
¤cL’gth
, 
b1
, b1L’, 
ÇmeP»pO±iÚs
, 
·r£E¼Ü
, 
¡©us
);

472 if(
	`U_FAILURE
(*
¡©us
)){

473 
CLEANUP
;

478 
b1
 = (
UCh¬
*è
¤c
;

479 
b1L’
 = 
¤cL’gth
;

489 if(
	`¡¬tsW™hP»fix
(
b1
,
b1L’
)){

492 
b1Prime
 = 
b1
 + 
ACE_PREFIX_LENGTH
;

493 
b1PrimeL’
 = 
b1L’
 - 
ACE_PREFIX_LENGTH
;

496 
b2L’
 = 
	`u_¡rFromPunycode
(
b1Prime
, 
b1PrimeL’
, 
b2
, 
b2C­ac™y
, 
ÿ£FÏgs
,
¡©us
);

498 if(*
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
){

501 
b2
 = (
UCh¬
*è
	`u´v_m®loc
(
b2L’
 * 
U_SIZEOF_UCHAR
);

502 if(
b2
==
NULL
){

503 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

504 
CLEANUP
;

507 *
¡©us
 = 
U_ZERO_ERROR
;

509 
b2L’
 = 
	`u_¡rFromPunycode
(
b1Prime
, 
b1PrimeL’
, 
b2
, b2L’, 
ÿ£FÏgs
, 
¡©us
);

514 
b3L’
 = 
	`uidÇ_toASCII
(
b2
, 
b2L’
, 
b3
, 
b3C­ac™y
, 
İtiÚs
, 
·r£E¼Ü
, 
¡©us
);

516 if(*
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
){

519 
b3
 = (
UCh¬
*è
	`u´v_m®loc
(
b3L’
 * 
U_SIZEOF_UCHAR
);

520 if(
b3
==
NULL
){

521 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

522 
CLEANUP
;

525 *
¡©us
 = 
U_ZERO_ERROR
;

527 
b3L’
 = 
	`uidÇ_toASCII
(
b2
,
b2L’
,
b3
,b3L’,
İtiÚs
,
·r£E¼Ü
, 
¡©us
);

531 if(
	`U_FAILURE
(*
¡©us
)){

532 
CLEANUP
;

536 if(
	`com·»Ca£In£ns™iveASCII
(
b1
, 
b1L’
, 
b3
, 
b3L’
) !=0){

538 *
¡©us
 = 
U_IDNA_VERIFICATION_ERROR
;

539 
CLEANUP
;

543 
»qL’gth
 = 
b2L’
;

544 if(
b2L’
 <ğ
de¡C­ac™y
) {

545 
	`u´v_memmove
(
de¡
, 
b2
, 
b2L’
 * 
U_SIZEOF_UCHAR
);

573 if(
¤cL’gth
 <ğ
de¡C­ac™y
){

574 
	`u´v_memmove
(
de¡
,
¤c
,
¤cL’gth
 * 
U_SIZEOF_UCHAR
);

576 
»qL’gth
 = 
¤cL’gth
;

580 
CLEANUP
:

582 if(
b1
 !ğ
b1Sck
 && b1!=
¤c
){

583 
	`u´v_ä“
(
b1
);

585 if(
b2
 !ğ
b2Sck
){

586 
	`u´v_ä“
(
b2
);

588 
	`u´v_ä“
(
ÿ£FÏgs
);

596 if(
	`U_FAILURE
(*
¡©us
)){

598 if(
de¡
 && 
¤cL’gth
 <ğ
de¡C­ac™y
){

600 
	`U_ASSERT
(
¤cL’gth
 >= 0);

601 
	`u´v_memmove
(
de¡
,
¤c
,
¤cL’gth
 * 
U_SIZEOF_UCHAR
);

603 
»qL’gth
 = 
¤cL’gth
;

604 *
¡©us
 = 
U_ZERO_ERROR
;

607  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
»qL’gth
, 
¡©us
);

608 
	}
}

610 
U_CAPI
 
št32_t
 
U_EXPORT2


611 
	$uidÇ_toASCII
(cÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

612 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

613 
št32_t
 
İtiÚs
,

614 
UP¬£E¼Ü
* 
·r£E¼Ü
,

615 
UE¼ÜCode
* 
¡©us
){

617 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

620 if((
¤c
==
NULL
è|| (
¤cL’gth
 < -1è|| (
de¡C­ac™y
<0è|| (!
de¡
 && destCapacity > 0)){

621 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

625 
USŒšgP»pProfe
* 
Çm•»p
 = 
	`u¥»p_İ’ByTy³
(
USPREP_RFC3491_NAMEPREP
, 
¡©us
);

627 if(
	`U_FAILURE
(*
¡©us
)){

631 
št32_t
 
»tL’
 = 
	`_š‹º®_toASCII
(
¤c
, 
¤cL’gth
, 
de¡
, 
de¡C­ac™y
, 
İtiÚs
, 
Çm•»p
, 
·r£E¼Ü
, 
¡©us
);

634 
	`u¥»p_şo£
(
Çm•»p
);

636  
»tL’
;

637 
	}
}

639 
U_CAPI
 
št32_t
 
U_EXPORT2


640 
	$uidÇ_toUnicode
(cÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

641 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

642 
št32_t
 
İtiÚs
,

643 
UP¬£E¼Ü
* 
·r£E¼Ü
,

644 
UE¼ÜCode
* 
¡©us
){

646 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

649 ifĞ(
¤c
==
NULL
è|| (
¤cL’gth
 < -1è|| (
de¡C­ac™y
<0è|| (!
de¡
 && destCapacity > 0)){

650 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

654 
USŒšgP»pProfe
* 
Çm•»p
 = 
	`u¥»p_İ’ByTy³
(
USPREP_RFC3491_NAMEPREP
, 
¡©us
);

656 if(
	`U_FAILURE
(*
¡©us
)){

660 
št32_t
 
»tL’
 = 
	`_š‹º®_toUnicode
(
¤c
, 
¤cL’gth
, 
de¡
, 
de¡C­ac™y
, 
İtiÚs
, 
Çm•»p
, 
·r£E¼Ü
, 
¡©us
);

662 
	`u¥»p_şo£
(
Çm•»p
);

664  
»tL’
;

665 
	}
}

668 
U_CAPI
 
št32_t
 
U_EXPORT2


669 
	$uidÇ_IDNToASCII
ĞcÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

670 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

671 
št32_t
 
İtiÚs
,

672 
UP¬£E¼Ü
 *
·r£E¼Ü
,

673 
UE¼ÜCode
 *
¡©us
){

675 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

678 if((
¤c
==
NULL
è|| (
¤cL’gth
 < -1è|| (
de¡C­ac™y
<0è|| (!
de¡
 && destCapacity > 0)){

679 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

683 
št32_t
 
»qL’gth
 = 0;

685 
USŒšgP»pProfe
* 
Çm•»p
 = 
	`u¥»p_İ’ByTy³
(
USPREP_RFC3491_NAMEPREP
, 
¡©us
);

687 if(
	`U_FAILURE
(*
¡©us
)){

692 
UCh¬
 *
d–im™”
 = (UCh¬*)
¤c
;

693 
UCh¬
 *
Ïb–S¹
 = (UCh¬*)
¤c
;

694 
UCh¬
 *
cu¼’tDe¡
 = (UCh¬*è
de¡
;

695 
št32_t
 
»maššgL’
 = 
¤cL’gth
;

696 
št32_t
 
»maššgDe¡C­ac™y
 = 
de¡C­ac™y
;

697 
št32_t
 
Ïb–L’
 = 0, 
Ïb–ReqL’gth
 = 0;

698 
UBoŞ
 
dÚe
 = 
FALSE
;

703 
Ïb–L’
 = 
	`g‘NextS•¬©Ü
(
Ïb–S¹
,
»maššgL’
, &
d–im™”
,&
dÚe
);

704 
Ïb–ReqL’gth
 = 0;

705 if(!(
Ïb–L’
==0 && 
dÚe
)){

707 
Ïb–ReqL’gth
 = 
	`_š‹º®_toASCII
Ğ
Ïb–S¹
, 
Ïb–L’
,

708 
cu¼’tDe¡
, 
»maššgDe¡C­ac™y
,

709 
İtiÚs
, 
Çm•»p
,

710 
·r£E¼Ü
, 
¡©us
);

712 if(*
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
){

714 *
¡©us
 = 
U_ZERO_ERROR
;

715 
»maššgDe¡C­ac™y
 = 0;

720 if(
	`U_FAILURE
(*
¡©us
)){

724 
»qL’gth
 +=
Ïb–ReqL’gth
;

726 if(
Ïb–ReqL’gth
 < 
»maššgDe¡C­ac™y
){

727 
cu¼’tDe¡
 = cu¼’tDe¡ + 
Ïb–ReqL’gth
;

728 
»maššgDe¡C­ac™y
 -ğ
Ïb–ReqL’gth
;

731 
»maššgDe¡C­ac™y
 = 0;

734 if(
dÚe
 =ğ
TRUE
){

739 if(
»maššgDe¡C­ac™y
 > 0){

740 *
cu¼’tDe¡
++ = 
FULL_STOP
;

741 
»maššgDe¡C­ac™y
--;

743 
»qL’gth
++;

745 
Ïb–S¹
 = 
d–im™”
;

746 if(
»maššgL’
 >0 ){

747 
»maššgL’
 = (
št32_t
)(
¤cL’gth
 - (
d–im™”
 - 
¤c
));

752 if(
»qL’gth
 > 
MAX_DOMAIN_NAME_LENGTH
){

753 *
¡©us
 = 
U_IDNA_DOMAIN_NAME_TOO_LONG_ERROR
;

756 
	`u¥»p_şo£
(
Çm•»p
);

758  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
»qL’gth
, 
¡©us
);

759 
	}
}

761 
U_CAPI
 
št32_t
 
U_EXPORT2


762 
	$uidÇ_IDNToUnicode
ĞcÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

763 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

764 
št32_t
 
İtiÚs
,

765 
UP¬£E¼Ü
* 
·r£E¼Ü
,

766 
UE¼ÜCode
* 
¡©us
){

768 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

771 if((
¤c
==
NULL
è|| (
¤cL’gth
 < -1è|| (
de¡C­ac™y
<0è|| (!
de¡
 && destCapacity > 0)){

772 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

776 
št32_t
 
»qL’gth
 = 0;

778 
USŒšgP»pProfe
* 
Çm•»p
 = 
	`u¥»p_İ’ByTy³
(
USPREP_RFC3491_NAMEPREP
, 
¡©us
);

780 if(
	`U_FAILURE
(*
¡©us
)){

785 
UCh¬
 *
d–im™”
 = (UCh¬*)
¤c
;

786 
UCh¬
 *
Ïb–S¹
 = (UCh¬*)
¤c
;

787 
UCh¬
 *
cu¼’tDe¡
 = (UCh¬*è
de¡
;

788 
št32_t
 
»maššgL’
 = 
¤cL’gth
;

789 
št32_t
 
»maššgDe¡C­ac™y
 = 
de¡C­ac™y
;

790 
št32_t
 
Ïb–L’
 = 0, 
Ïb–ReqL’gth
 = 0;

791 
UBoŞ
 
dÚe
 = 
FALSE
;

795 
Ïb–L’
 = 
	`g‘NextS•¬©Ü
(
Ïb–S¹
,
»maššgL’
, &
d–im™”
,&
dÚe
);

808 
Ïb–ReqL’gth
 = 
	`_š‹º®_toUnicode
(
Ïb–S¹
, 
Ïb–L’
,

809 
cu¼’tDe¡
, 
»maššgDe¡C­ac™y
,

810 
İtiÚs
, 
Çm•»p
,

811 
·r£E¼Ü
, 
¡©us
);

813 if(*
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
){

814 *
¡©us
 = 
U_ZERO_ERROR
;

815 
»maššgDe¡C­ac™y
 = 0;

818 if(
	`U_FAILURE
(*
¡©us
)){

822 
»qL’gth
 +=
Ïb–ReqL’gth
;

824 if(
Ïb–ReqL’gth
 < 
»maššgDe¡C­ac™y
){

825 
cu¼’tDe¡
 = cu¼’tDe¡ + 
Ïb–ReqL’gth
;

826 
»maššgDe¡C­ac™y
 -ğ
Ïb–ReqL’gth
;

829 
»maššgDe¡C­ac™y
 = 0;

832 if(
dÚe
 =ğ
TRUE
){

838 if(
»maššgDe¡C­ac™y
 > 0){

839 *
cu¼’tDe¡
++ = *(
Ïb–S¹
 + 
Ïb–L’
);

840 
»maššgDe¡C­ac™y
--;

842 
»qL’gth
++;

844 
Ïb–S¹
 = 
d–im™”
;

845 if(
»maššgL’
 >0 ){

846 
»maššgL’
 = (
št32_t
)(
¤cL’gth
 - (
d–im™”
 - 
¤c
));

851 if(
»qL’gth
 > 
MAX_DOMAIN_NAME_LENGTH
){

852 *
¡©us
 = 
U_IDNA_DOMAIN_NAME_TOO_LONG_ERROR
;

855 
	`u¥»p_şo£
(
Çm•»p
);

857  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
»qL’gth
, 
¡©us
);

858 
	}
}

860 
U_CAPI
 
št32_t
 
U_EXPORT2


861 
	$uidÇ_com·»
ĞcÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

862 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

863 
št32_t
 
İtiÚs
,

864 
UE¼ÜCode
* 
¡©us
){

866 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

870 
UCh¬
 
b1Sck
[
MAX_IDN_BUFFER_SIZE
], 
b2Sck
[MAX_IDN_BUFFER_SIZE];

871 
UCh¬
 *
b1
 = 
b1Sck
, *
b2
 = 
b2Sck
;

872 
št32_t
 
b1L’
, 
b2L’
, 
b1C­ac™y
 = 
MAX_IDN_BUFFER_SIZE
, 
b2C­ac™y
 = MAX_IDN_BUFFER_SIZE;

873 
št32_t
 
»suÉ
=-1;

875 
UP¬£E¼Ü
 
·r£E¼Ü
;

877 
b1L’
 = 
	`uidÇ_IDNToASCII
(
s1
, 
Ëngth1
, 
b1
, 
b1C­ac™y
, 
İtiÚs
, &
·r£E¼Ü
, 
¡©us
);

878 if(*
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
){

880 
b1
 = (
UCh¬
*è
	`u´v_m®loc
(
b1L’
 * 
U_SIZEOF_UCHAR
);

881 if(
b1
==
NULL
){

882 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

883 
CLEANUP
;

886 *
¡©us
 = 
U_ZERO_ERROR
;

888 
b1L’
 = 
	`uidÇ_IDNToASCII
(
s1
,
Ëngth1
,
b1
,b1L’, 
İtiÚs
, &
·r£E¼Ü
, 
¡©us
);

892 
b2L’
 = 
	`uidÇ_IDNToASCII
(
s2
,
Ëngth2
, 
b2
,
b2C­ac™y
, 
İtiÚs
, &
·r£E¼Ü
, 
¡©us
);

893 if(*
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
){

895 
b2
 = (
UCh¬
*è
	`u´v_m®loc
(
b2L’
 * 
U_SIZEOF_UCHAR
);

896 if(
b2
==
NULL
){

897 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

898 
CLEANUP
;

901 *
¡©us
 = 
U_ZERO_ERROR
;

903 
b2L’
 = 
	`uidÇ_IDNToASCII
(
s2
, 
Ëngth2
, 
b2
, b2L’, 
İtiÚs
, &
·r£E¼Ü
, 
¡©us
);

907 
»suÉ
 = 
	`com·»Ca£In£ns™iveASCII
(
b1
,
b1L’
,
b2
,
b2L’
);

909 
CLEANUP
:

910 if(
b1
 !ğ
b1Sck
){

911 
	`u´v_ä“
(
b1
);

914 if(
b2
 !ğ
b2Sck
){

915 
	`u´v_ä“
(
b2
);

918  
»suÉ
;

919 
	}
}

	@uinit.c

17 
	~"unicode/uty³s.h
"

18 
	~"unicode/icu¶ug.h
"

19 
	~"unicode/uş—n.h
"

20 
	~"cmemÜy.h
"

21 
	~"icu¶ugimp.h
"

22 
	~"uas£¹.h
"

23 
	~"uşn.h
"

24 
	~"uşn_cmn.h
"

25 
	~"uúv_io.h
"

26 
	~"umu‹x.h
"

27 
	~"uŒacimp.h
"

29 
UBoŞ
 
	ggICUIn™Ÿlized
 = 
FALSE
;

30 
UMTX
 
	ggICUIn™Mu‹x
 = 
NULL
;

37 
U_CAPI
 
U_EXPORT2


38 
	$u_ş—nup
()

40 
	`UTRACE_ENTRY_OC
(
UTRACE_U_CLEANUP
);

41 
	`umtx_lock
(
NULL
);

42 
	`umtx_uÆock
(
NULL
);

44 
	`uşn_lib_ş—nup
();

46 
	`umtx_de¡roy
(&
gICUIn™Mu‹x
);

47 
	`umtx_ş—nup
();

48 
	`cmemÜy_ş—nup
();

49 
gICUIn™Ÿlized
 = 
FALSE
;

50 
	`UTRACE_EXIT
();

52 
	`uŒaû_ş—nup
();

54 
	}
}

59 
U_CAPI
 
U_EXPORT2


60 
	$u_š™
(
UE¼ÜCode
 *
¡©us
) {

61 
	`UTRACE_ENTRY_OC
(
UTRACE_U_INIT
);

63 
	`u¶ug_š™
(
¡©us
);

65 
	`umtx_lock
(&
gICUIn™Mu‹x
);

66 ià(
gICUIn™Ÿlized
 || 
	`U_FAILURE
(*
¡©us
)) {

67 
	`umtx_uÆock
(&
gICUIn™Mu‹x
);

68 
	`UTRACE_EXIT_STATUS
(*
¡©us
);

84 #ià!
UCONFIG_NO_CONVERSION


85 
	`uúv_io_couÁKnownCÚv”‹rs
(
¡©us
);

88 
gICUIn™Ÿlized
 = 
TRUE
;

89 
	`umtx_uÆock
(&
gICUIn™Mu‹x
);

90 
	`UTRACE_EXIT_STATUS
(*
¡©us
);

91 
	}
}

	@uinvchar.c

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/u¡ršg.h
"

22 
	~"ud©aswp.h
"

23 
	~"c¡ršg.h
"

24 
	~"cmemÜy.h
"

25 
	~"uas£¹.h
"

26 
	~"ušvch¬.h
"

63 cÚ¡ 
ušt8_t
 
	gasciiFromEbcdic
[256]={

85 cÚ¡ 
ušt8_t
 
	gebcdicFromAscii
[256]={

132 cÚ¡ 
ušt32_t
 
	gšv¬ŸÁCh¬s
[4]={

143 
	#UCHAR_IS_INVARIANT
(
c
è(((c)<=0x7fè&& (
šv¬ŸÁCh¬s
[(c)>>5]&((
ušt32_t
)1<<((c)&0x1f)))!=0)

	)

146 
	#SCHAR_IS_INVARIANT
(
c
è((0<=(c)è&& 
	`UCHAR_IS_INVARIANT
(c))

	)

148 #ià
U_CHARSET_FAMILY
==
U_ASCII_FAMILY


149 
	#CHAR_TO_UCHAR
(
c
è
	)
c

150 
	#UCHAR_TO_CHAR
(
c
è
	)
c

151 #–ià
U_CHARSET_FAMILY
==
U_EBCDIC_FAMILY


152 
	#CHAR_TO_UCHAR
(
u
è
asciiFromEbcdic
[u]

	)

153 
	#UCHAR_TO_CHAR
(
u
è
ebcdicFromAscii
[u]

	)

155 #”rÜ 
U_CHARSET_FAMILY
 
is
 
nÙ
 
v®id


159 
U_CAPI
 
U_EXPORT2


160 
	$u_ch¬sToUCh¬s
(cÚ¡ *
cs
, 
UCh¬
 *
us
, 
št32_t
 
Ëngth
) {

161 
UCh¬
 
u
;

162 
ušt8_t
 
c
;

169 
Ëngth
>0) {

170 
c
=(
ušt8_t
)(*
cs
++);

171 
u
=(
UCh¬
)
	`CHAR_TO_UCHAR
(
c
);

172 
	`U_ASSERT
((
u
!=0 || 
c
==0));

173 *
us
++=
u
;

174 --
Ëngth
;

176 
	}
}

178 
U_CAPI
 
U_EXPORT2


179 
	$u_UCh¬sToCh¬s
(cÚ¡ 
UCh¬
 *
us
, *
cs
, 
št32_t
 
Ëngth
) {

180 
UCh¬
 
u
;

182 
Ëngth
>0) {

183 
u
=*
us
++;

184 if(!
	`UCHAR_IS_INVARIANT
(
u
)) {

185 
	`U_ASSERT
(
FALSE
);

186 
u
=0;

188 *
cs
++=()
	`UCHAR_TO_CHAR
(
u
);

189 --
Ëngth
;

191 
	}
}

193 
U_CAPI
 
UBoŞ
 
U_EXPORT2


194 
	$u´v_isInv¬ŸÁSŒšg
(cÚ¡ *
s
, 
št32_t
 
Ëngth
) {

195 
ušt8_t
 
c
;

198 if(
Ëngth
<0) {

200 
c
=(
ušt8_t
)*
s
++;

201 if(
c
==0) {

206 if(
Ëngth
==0) {

209 --
Ëngth
;

210 
c
=(
ušt8_t
)*
s
++;

211 if(
c
==0) {

221 #ià
U_CHARSET_FAMILY
==
U_ASCII_FAMILY


222 if(!
	`UCHAR_IS_INVARIANT
(
c
)) {

223  
FALSE
;

225 #–ià
U_CHARSET_FAMILY
==
U_EBCDIC_FAMILY


226 
c
=
	`CHAR_TO_UCHAR
(c);

227 if(
c
==0 || !
	`UCHAR_IS_INVARIANT
(c)) {

228  
FALSE
;

231 #”rÜ 
U_CHARSET_FAMILY
 
is
 
nÙ
 
v®id


234  
TRUE
;

235 
	}
}

237 
U_CAPI
 
UBoŞ
 
U_EXPORT2


238 
	$u´v_isInv¬ŸÁUSŒšg
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
) {

239 
UCh¬
 
c
;

242 if(
Ëngth
<0) {

244 
c
=*
s
++;

245 if(
c
==0) {

250 if(
Ëngth
==0) {

253 --
Ëngth
;

254 
c
=*
s
++;

261 if(!
	`UCHAR_IS_INVARIANT
(
c
)) {

262  
FALSE
;

265  
TRUE
;

266 
	}
}

271 
U_CAPI
 
št32_t
 
U_EXPORT2


272 
	$u´v_ebcdicFromAscii
(cÚ¡ 
UD©aSw­³r
 *
ds
,

273 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

274 
UE¼ÜCode
 *
pE¼ÜCode
) {

275 cÚ¡ 
ušt8_t
 *
s
;

276 
ušt8_t
 *
t
;

277 
ušt8_t
 
c
;

279 
št32_t
 
couÁ
;

281 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

284 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<0 || (Ëngth>0 && 
outD©a
==NULL)) {

285 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

290 
s
=(cÚ¡ 
ušt8_t
 *)
šD©a
;

291 
t
=(
ušt8_t
 *)
outD©a
;

292 
couÁ
=
Ëngth
;

293 
couÁ
>0) {

294 
c
=*
s
++;

295 if(!
	`UCHAR_IS_INVARIANT
(
c
)) {

296 
	`ud©a_´štE¼Ü
(
ds
, "uprv_ebcdicFromAscii() string[%d] contains‡ variant character in…osition %d\n",

297 
Ëngth
,†’gth-
couÁ
);

298 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

301 *
t
++=
ebcdicFromAscii
[
c
];

302 --
couÁ
;

305  
Ëngth
;

306 
	}
}

309 
U_CFUNC
 
št32_t


310 
	$u´v_cİyAscii
(cÚ¡ 
UD©aSw­³r
 *
ds
,

311 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

312 
UE¼ÜCode
 *
pE¼ÜCode
) {

313 cÚ¡ 
ušt8_t
 *
s
;

314 
ušt8_t
 
c
;

316 
št32_t
 
couÁ
;

318 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

321 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<0 || (Ëngth>0 && 
outD©a
==NULL)) {

322 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

327 
s
=(cÚ¡ 
ušt8_t
 *)
šD©a
;

328 
couÁ
=
Ëngth
;

329 
couÁ
>0) {

330 
c
=*
s
++;

331 if(!
	`UCHAR_IS_INVARIANT
(
c
)) {

332 
	`ud©a_´štE¼Ü
(
ds
, "uprv_copyFromAscii() string[%d] contains‡ variant character in…osition %d\n",

333 
Ëngth
,†’gth-
couÁ
);

334 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

337 --
couÁ
;

340 if(
Ëngth
>0 && 
šD©a
!=
outD©a
) {

341 
	`u´v_memıy
(
outD©a
, 
šD©a
, 
Ëngth
);

344  
Ëngth
;

345 
	}
}

348 
U_CFUNC
 
št32_t


349 
	$u´v_asciiFromEbcdic
(cÚ¡ 
UD©aSw­³r
 *
ds
,

350 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

351 
UE¼ÜCode
 *
pE¼ÜCode
) {

352 cÚ¡ 
ušt8_t
 *
s
;

353 
ušt8_t
 *
t
;

354 
ušt8_t
 
c
;

356 
št32_t
 
couÁ
;

358 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

361 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<0 || (Ëngth>0 && 
outD©a
==NULL)) {

362 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

367 
s
=(cÚ¡ 
ušt8_t
 *)
šD©a
;

368 
t
=(
ušt8_t
 *)
outD©a
;

369 
couÁ
=
Ëngth
;

370 
couÁ
>0) {

371 
c
=*
s
++;

372 if(
c
!=0 && ((c=
asciiFromEbcdic
[c])==0 || !
	`UCHAR_IS_INVARIANT
(c))) {

373 
	`ud©a_´štE¼Ü
(
ds
, "uprv_asciiFromEbcdic() string[%d] contains‡ variant character in…osition %d\n",

374 
Ëngth
,†’gth-
couÁ
);

375 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

378 *
t
++=
c
;

379 --
couÁ
;

382  
Ëngth
;

383 
	}
}

386 
U_CFUNC
 
št32_t


387 
	$u´v_cİyEbcdic
(cÚ¡ 
UD©aSw­³r
 *
ds
,

388 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

389 
UE¼ÜCode
 *
pE¼ÜCode
) {

390 cÚ¡ 
ušt8_t
 *
s
;

391 
ušt8_t
 
c
;

393 
št32_t
 
couÁ
;

395 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

398 if(
ds
==
NULL
 || 
šD©a
==NULL || 
Ëngth
<0 || (Ëngth>0 && 
outD©a
==NULL)) {

399 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

404 
s
=(cÚ¡ 
ušt8_t
 *)
šD©a
;

405 
couÁ
=
Ëngth
;

406 
couÁ
>0) {

407 
c
=*
s
++;

408 if(
c
!=0 && ((c=
asciiFromEbcdic
[c])==0 || !
	`UCHAR_IS_INVARIANT
(c))) {

409 
	`ud©a_´štE¼Ü
(
ds
, "uprv_copyEbcdic() string[%] contains‡ variant character in…osition %d\n",

410 
Ëngth
,†’gth-
couÁ
);

411 *
pE¼ÜCode
=
U_INVALID_CHAR_FOUND
;

414 --
couÁ
;

417 if(
Ëngth
>0 && 
šD©a
!=
outD©a
) {

418 
	`u´v_memıy
(
outD©a
, 
šD©a
, 
Ëngth
);

421  
Ëngth
;

422 
	}
}

425 
U_CFUNC
 
št32_t


426 
	$u´v_com·»InvAscii
(cÚ¡ 
UD©aSw­³r
 *
ds
,

427 cÚ¡ *
outSŒšg
, 
št32_t
 
outL’gth
,

428 cÚ¡ 
UCh¬
 *
loÿlSŒšg
, 
št32_t
 
loÿlL’gth
) {

429 
št32_t
 
mšL’gth
;

430 
UCh¬32
 
c1
, 
c2
;

431 
ušt8_t
 
c
;

433 if(
outSŒšg
==
NULL
 || 
outL’gth
<-1 || 
loÿlSŒšg
==NULL || 
loÿlL’gth
<-1) {

437 if(
outL’gth
<0) {

438 
outL’gth
=(
št32_t
)
	`u´v_¡¾’
(
outSŒšg
);

440 if(
loÿlL’gth
<0) {

441 
loÿlL’gth
=
	`u_¡¾’
(
loÿlSŒšg
);

444 
mšL’gth
ğ
outL’gth
<
loÿlL’gth
 ? outLength :†ocalLength;

446 
mšL’gth
>0) {

447 
c
=(
ušt8_t
)*
outSŒšg
++;

448 if(
	`UCHAR_IS_INVARIANT
(
c
)) {

449 
c1
=
c
;

451 
c1
=-1;

454 
c2
=*
loÿlSŒšg
++;

455 if(!
	`UCHAR_IS_INVARIANT
(
c2
)) {

456 
c2
=-2;

459 if((
c1
-=
c2
)!=0) {

460  
c1
;

463 --
mšL’gth
;

467  
outL’gth
-
loÿlL’gth
;

468 
	}
}

470 
U_CFUNC
 
št32_t


471 
	$u´v_com·»InvEbcdic
(cÚ¡ 
UD©aSw­³r
 *
ds
,

472 cÚ¡ *
outSŒšg
, 
št32_t
 
outL’gth
,

473 cÚ¡ 
UCh¬
 *
loÿlSŒšg
, 
št32_t
 
loÿlL’gth
) {

474 
št32_t
 
mšL’gth
;

475 
UCh¬32
 
c1
, 
c2
;

476 
ušt8_t
 
c
;

478 if(
outSŒšg
==
NULL
 || 
outL’gth
<-1 || 
loÿlSŒšg
==NULL || 
loÿlL’gth
<-1) {

482 if(
outL’gth
<0) {

483 
outL’gth
=(
št32_t
)
	`u´v_¡¾’
(
outSŒšg
);

485 if(
loÿlL’gth
<0) {

486 
loÿlL’gth
=
	`u_¡¾’
(
loÿlSŒšg
);

489 
mšL’gth
ğ
outL’gth
<
loÿlL’gth
 ? outLength :†ocalLength;

491 
mšL’gth
>0) {

492 
c
=(
ušt8_t
)*
outSŒšg
++;

493 if(
c
==0) {

494 
c1
=0;

495 } if((
c1
=
asciiFromEbcdic
[
c
])!=0 && 
	`UCHAR_IS_INVARIANT
(c1)) {

498 
c1
=-1;

501 
c2
=*
loÿlSŒšg
++;

502 if(!
	`UCHAR_IS_INVARIANT
(
c2
)) {

503 
c2
=-2;

506 if((
c1
-=
c2
)!=0) {

507  
c1
;

510 --
mšL’gth
;

514  
outL’gth
-
loÿlL’gth
;

515 
	}
}

517 
U_CAPI
 
št32_t
 
U_EXPORT2


518 
	$u´v_com·»InvEbcdicAsAscii
(cÚ¡ *
s1
, cÚ¡ *
s2
) {

519 
št32_t
 
c1
, 
c2
;

521 ;; ++
s1
, ++
s2
) {

522 
c1
=(
ušt8_t
)*
s1
;

523 
c2
=(
ušt8_t
)*
s2
;

524 if(
c1
!=
c2
) {

525 if(
c1
!=0 && ((c1=
asciiFromEbcdic
[c1])==0 || !
	`UCHAR_IS_INVARIANT
(c1))) {

526 
c1
=-(
št32_t
)(
ušt8_t
)*
s1
;

528 if(
c2
!=0 && ((c2=
asciiFromEbcdic
[c2])==0 || !
	`UCHAR_IS_INVARIANT
(c2))) {

529 
c2
=-(
št32_t
)(
ušt8_t
)*
s2
;

531  
c1
-
c2
;

532 } if(
c1
==0) {

536 
	}
}

539 
U_INTERNAL
 
ušt8_t
* 
U_EXPORT2


540 
	$u´v_«¡ºıy
(
ušt8_t
 *
d¡
, cÚ¡ ušt8_ˆ*
¤c
, 
št32_t
 
n
)

542 
ušt8_t
 *
Üig_d¡
 = 
d¡
;

544 if(
n
==-1) {

545 
n
 = 
	`u´v_¡¾’
((cÚ¡ *)
¤c
)+1;

548 *
¤c
 && 
n
>0) {

549 *(
d¡
++èğ
asciiFromEbcdic
[*(
¤c
++)];

550 
n
--;

553 
n
>0) {

554 *(
d¡
++) = 0;

555 
n
--;

557  
Üig_d¡
;

558 
	}
}

560 
U_INTERNAL
 
ušt8_t
* 
U_EXPORT2


561 
	$u´v_—¡ºıy
(
ušt8_t
 *
d¡
, cÚ¡ ušt8_ˆ*
¤c
, 
št32_t
 
n
)

563 
ušt8_t
 *
Üig_d¡
 = 
d¡
;

565 if(
n
==-1) {

566 
n
 = 
	`u´v_¡¾’
((cÚ¡ *)
¤c
)+1;

569 *
¤c
 && 
n
>0) {

570 
ch
 = 
ebcdicFromAscii
[*(
¤c
++)];

571 if(
ch
 == 0) {

572 
ch
 = 
ebcdicFromAscii
[0x3f];

574 *(
d¡
++èğ
ch
;

575 
n
--;

578 
n
>0) {

579 *(
d¡
++) = 0;

580 
n
--;

582  
Üig_d¡
;

583 
	}
}

	@uinvchar.h

20 #iâdeà
__UINVCHAR_H__


21 
	#__UINVCHAR_H__


	)

23 
	~"unicode/uty³s.h
"

35 
U_INTERNAL
 
UBoŞ
 
U_EXPORT2


36 
u´v_isInv¬ŸÁSŒšg
(cÚ¡ *
s
, 
št32_t
 
Ëngth
);

48 
U_INTERNAL
 
UBoŞ
 
U_EXPORT2


49 
u´v_isInv¬ŸÁUSŒšg
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
);

56 #ià
U_CHARSET_FAMILY
==
U_ASCII_FAMILY


57 
	#U_UPPER_ORDINAL
(
x
è((x)-'A')

	)

58 #–ià
U_CHARSET_FAMILY
==
U_EBCDIC_FAMILY


59 
	#U_UPPER_ORDINAL
(
x
) (((x) < 'J') ? ((x)-'A') : \

60 (((
x
) < 'S') ? ((x)-'J'+9) : \

61 ((
x
)-'S'+18)))

	)

63 #”rÜ 
Unknown
 
ch¬£t
 
çmy
!

70 
U_INTERNAL
 
št32_t
 
U_EXPORT2


71 
u´v_com·»InvEbcdicAsAscii
(cÚ¡ *
s1
, cÚ¡ *
s2
);

78 #ià
U_CHARSET_FAMILY
==
U_ASCII_FAMILY


79 
	#u´v_com·»InvCh¬sAsAscii
(
s1
, 
s2
è
	`u´v_¡rcmp
(s1, s2)

	)

80 #–ià
U_CHARSET_FAMILY
==
U_EBCDIC_FAMILY


81 
	#u´v_com·»InvCh¬sAsAscii
(
s1
, 
s2
è
	`u´v_com·»InvEbcdicAsAscii
(s1, s2)

	)

83 #”rÜ 
Unknown
 
ch¬£t
 
çmy
!

91 
U_INTERNAL
 
ušt8_t
* 
U_EXPORT2


92 
u´v_«¡ºıy
(
ušt8_t
 *
d¡
, cÚ¡ ušt8_ˆ*
¤c
, 
št32_t
 
n
);

100 
U_INTERNAL
 
ušt8_t
* 
U_EXPORT2


101 
u´v_—¡ºıy
(
ušt8_t
 *
d¡
, cÚ¡ ušt8_ˆ*
¤c
, 
št32_t
 
n
);

	@uiter.cpp

17 
	~"unicode/uty³s.h
"

18 
	~"unicode/u¡ršg.h
"

19 
	~"unicode/ch¬™”.h
"

20 
	~"unicode/»p.h
"

21 
	~"unicode/u™”.h
"

22 
	~"c¡ršg.h
"

24 
	gU_NAMESPACE_USE


26 
	#IS_EVEN
(
n
è((Ò)&1)==0)

	)

27 
	#IS_POINTER_EVEN
(
p
è
	`IS_EVEN
((
size_t
í)

	)

29 
U_CDECL_BEGIN


33 
št32_t
 
U_CALLCONV


34 
	$noİG‘Index
(
UCh¬I‹¿tÜ
 * , 
UCh¬I‹¿tÜOrigš
 ) {

36 
	}
}

38 
št32_t
 
U_CALLCONV


39 
	$noİMove
(
UCh¬I‹¿tÜ
 * , 
št32_t
 , 
UCh¬I‹¿tÜOrigš
 ) {

41 
	}
}

43 
UBoŞ
 
U_CALLCONV


44 
	$noİHasNext
(
UCh¬I‹¿tÜ
 * ) {

45  
FALSE
;

46 
	}
}

48 
UCh¬32
 
U_CALLCONV


49 
	$noİCu¼’t
(
UCh¬I‹¿tÜ
 * ) {

50  
U_SENTINEL
;

51 
	}
}

53 
ušt32_t
 
U_CALLCONV


54 
	$noİG‘S‹
(cÚ¡ 
UCh¬I‹¿tÜ
 * ) {

55  
UITER_NO_STATE
;

56 
	}
}

58 
U_CALLCONV


59 
	$noİS‘S‹
(
UCh¬I‹¿tÜ
 * , 
ušt32_t
 , 
UE¼ÜCode
 *
pE¼ÜCode
) {

60 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

61 
	}
}

63 cÚ¡ 
UCh¬I‹¿tÜ
 
	gnoİI‹¿tÜ
={

65 
noİG‘Index
,

66 
noİMove
,

67 
noİHasNext
,

68 
noİHasNext
,

69 
noİCu¼’t
,

70 
noİCu¼’t
,

71 
noİCu¼’t
,

72 
NULL
,

73 
noİG‘S‹
,

74 
noİS‘S‹


86 
št32_t
 
U_CALLCONV


87 
	$¡ršgI‹¿tÜG‘Index
(
UCh¬I‹¿tÜ
 *
™”
, 
UCh¬I‹¿tÜOrigš
 
Üigš
) {

88 
Üigš
) {

89 
UITER_ZERO
:

91 
UITER_START
:

92  
™”
->
¡¬t
;

93 
UITER_CURRENT
:

94  
™”
->
šdex
;

95 
UITER_LIMIT
:

96  
™”
->
lim™
;

97 
UITER_LENGTH
:

98  
™”
->
Ëngth
;

104 
	}
}

106 
št32_t
 
U_CALLCONV


107 
	$¡ršgI‹¿tÜMove
(
UCh¬I‹¿tÜ
 *
™”
, 
št32_t
 
d–
, 
UCh¬I‹¿tÜOrigš
 
Üigš
) {

108 
št32_t
 
pos
;

110 
Üigš
) {

111 
UITER_ZERO
:

112 
pos
=
d–
;

114 
UITER_START
:

115 
pos
=
™”
->
¡¬t
+
d–
;

117 
UITER_CURRENT
:

118 
pos
=
™”
->
šdex
+
d–
;

120 
UITER_LIMIT
:

121 
pos
=
™”
->
lim™
+
d–
;

123 
UITER_LENGTH
:

124 
pos
=
™”
->
Ëngth
+
d–
;

130 if(
pos
<
™”
->
¡¬t
) {

131 
pos
=
™”
->
¡¬t
;

132 } if(
pos
>
™”
->
lim™
) {

133 
pos
=
™”
->
lim™
;

136  
™”
->
šdex
=
pos
;

137 
	}
}

139 
UBoŞ
 
U_CALLCONV


140 
	$¡ršgI‹¿tÜHasNext
(
UCh¬I‹¿tÜ
 *
™”
) {

141  
™”
->
šdex
<™”->
lim™
;

142 
	}
}

144 
UBoŞ
 
U_CALLCONV


145 
	$¡ršgI‹¿tÜHasP»vious
(
UCh¬I‹¿tÜ
 *
™”
) {

146  
™”
->
šdex
>™”->
¡¬t
;

147 
	}
}

149 
UCh¬32
 
U_CALLCONV


150 
	$¡ršgI‹¿tÜCu¼’t
(
UCh¬I‹¿tÜ
 *
™”
) {

151 if(
™”
->
šdex
<™”->
lim™
) {

152  ((cÚ¡ 
UCh¬
 *)(
™”
->
cÚ‹xt
))[™”->
šdex
];

154  
U_SENTINEL
;

156 
	}
}

158 
UCh¬32
 
U_CALLCONV


159 
	$¡ršgI‹¿tÜNext
(
UCh¬I‹¿tÜ
 *
™”
) {

160 if(
™”
->
šdex
<™”->
lim™
) {

161  ((cÚ¡ 
UCh¬
 *)(
™”
->
cÚ‹xt
))[™”->
šdex
++];

163  
U_SENTINEL
;

165 
	}
}

167 
UCh¬32
 
U_CALLCONV


168 
	$¡ršgI‹¿tÜP»vious
(
UCh¬I‹¿tÜ
 *
™”
) {

169 if(
™”
->
šdex
>™”->
¡¬t
) {

170  ((cÚ¡ 
UCh¬
 *)(
™”
->
cÚ‹xt
))[--™”->
šdex
];

172  
U_SENTINEL
;

174 
	}
}

176 
ušt32_t
 
U_CALLCONV


177 
	$¡ršgI‹¿tÜG‘S‹
(cÚ¡ 
UCh¬I‹¿tÜ
 *
™”
) {

178  (
ušt32_t
)
™”
->
šdex
;

179 
	}
}

181 
U_CALLCONV


182 
	$¡ršgI‹¿tÜS‘S‹
(
UCh¬I‹¿tÜ
 *
™”
, 
ušt32_t
 
¡©e
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

183 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

185 } if(
™”
==
NULL
) {

186 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

187 } if((
št32_t
)
¡©e
<
™”
->
¡¬t
 || i‹r->
lim™
<(int32_t)state) {

188 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

190 
™”
->
šdex
=(
št32_t
)
¡©e
;

192 
	}
}

194 cÚ¡ 
UCh¬I‹¿tÜ
 
	g¡ršgI‹¿tÜ
={

196 
¡ršgI‹¿tÜG‘Index
,

197 
¡ršgI‹¿tÜMove
,

198 
¡ršgI‹¿tÜHasNext
,

199 
¡ršgI‹¿tÜHasP»vious
,

200 
¡ršgI‹¿tÜCu¼’t
,

201 
¡ršgI‹¿tÜNext
,

202 
¡ršgI‹¿tÜP»vious
,

203 
NULL
,

204 
¡ršgI‹¿tÜG‘S‹
,

205 
¡ršgI‹¿tÜS‘S‹


208 
U_CAPI
 
U_EXPORT2


209 
	$u™”_£tSŒšg
(
UCh¬I‹¿tÜ
 *
™”
, cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
) {

210 if(
™”
!=0) {

211 if(
s
!=0 && 
Ëngth
>=-1) {

212 *
™”
=
¡ršgI‹¿tÜ
;

213 
™”
->
cÚ‹xt
=
s
;

214 if(
Ëngth
>=0) {

215 
™”
->
Ëngth
=length;

217 
™”
->
Ëngth
=
	`u_¡¾’
(
s
);

219 
™”
->
lim™
=™”->
Ëngth
;

221 *
™”
=
noİI‹¿tÜ
;

224 
	}
}

239 
šlše
 
UCh¬32


240 
	$utf16BEI‹¿tÜG‘
(
UCh¬I‹¿tÜ
 *
™”
, 
št32_t
 
šdex
) {

241 cÚ¡ 
ušt8_t
 *
p
=(cÚ¡ ušt8_ˆ*)
™”
->
cÚ‹xt
;

242  ((
UCh¬
)
p
[2*
šdex
]<<8)|(UChar)p[2*index+1];

243 
	}
}

245 
UCh¬32
 
U_CALLCONV


246 
	$utf16BEI‹¿tÜCu¼’t
(
UCh¬I‹¿tÜ
 *
™”
) {

247 
št32_t
 
šdex
;

249 if((
šdex
=
™”
->šdex)<™”->
lim™
) {

250  
	`utf16BEI‹¿tÜG‘
(
™”
, 
šdex
);

252  
U_SENTINEL
;

254 
	}
}

256 
UCh¬32
 
U_CALLCONV


257 
	$utf16BEI‹¿tÜNext
(
UCh¬I‹¿tÜ
 *
™”
) {

258 
št32_t
 
šdex
;

260 if((
šdex
=
™”
->šdex)<™”->
lim™
) {

261 
™”
->
šdex
=index+1;

262  
	`utf16BEI‹¿tÜG‘
(
™”
, 
šdex
);

264  
U_SENTINEL
;

266 
	}
}

268 
UCh¬32
 
U_CALLCONV


269 
	$utf16BEI‹¿tÜP»vious
(
UCh¬I‹¿tÜ
 *
™”
) {

270 
št32_t
 
šdex
;

272 if((
šdex
=
™”
->šdex)>™”->
¡¬t
) {

273 
™”
->
šdex
=--index;

274  
	`utf16BEI‹¿tÜG‘
(
™”
, 
šdex
);

276  
U_SENTINEL
;

278 
	}
}

280 cÚ¡ 
UCh¬I‹¿tÜ
 
	gutf16BEI‹¿tÜ
={

282 
¡ršgI‹¿tÜG‘Index
,

283 
¡ršgI‹¿tÜMove
,

284 
¡ršgI‹¿tÜHasNext
,

285 
¡ršgI‹¿tÜHasP»vious
,

286 
utf16BEI‹¿tÜCu¼’t
,

287 
utf16BEI‹¿tÜNext
,

288 
utf16BEI‹¿tÜP»vious
,

289 
NULL
,

290 
¡ršgI‹¿tÜG‘S‹
,

291 
¡ršgI‹¿tÜS‘S‹


299 
št32_t


300 
	$utf16BE_¡¾’
(cÚ¡ *
s
) {

301 if(
	`IS_POINTER_EVEN
(
s
)) {

307  
	`u_¡¾’
((cÚ¡ 
UCh¬
 *)
s
);

310 cÚ¡ *
p
=
s
;

312 !(*
p
==0 &&…[1]==0)) {

313 
p
+=2;

315  (
št32_t
)((
p
-
s
)/2);

317 
	}
}

319 
U_CAPI
 
U_EXPORT2


320 
	$u™”_£tUTF16BE
(
UCh¬I‹¿tÜ
 *
™”
, cÚ¡ *
s
, 
št32_t
 
Ëngth
) {

321 if(
™”
!=
NULL
) {

323 if(
s
!=
NULL
 && (
Ëngth
==-1 || (Ëngth>=0 && 
	`IS_EVEN
(length)))) {

325 
Ëngth
>>=1;

327 if(
U_IS_BIG_ENDIAN
 && 
	`IS_POINTER_EVEN
(
s
)) {

329 
	`u™”_£tSŒšg
(
™”
, (cÚ¡ 
UCh¬
 *)
s
, 
Ëngth
);

333 *
™”
=
utf16BEI‹¿tÜ
;

334 
™”
->
cÚ‹xt
=
s
;

335 if(
Ëngth
>=0) {

336 
™”
->
Ëngth
=length;

338 
™”
->
Ëngth
=
	`utf16BE_¡¾’
(
s
);

340 
™”
->
lim™
=™”->
Ëngth
;

342 *
™”
=
noİI‹¿tÜ
;

345 
	}
}

356 
št32_t
 
U_CALLCONV


357 
	$ch¬aù”I‹¿tÜG‘Index
(
UCh¬I‹¿tÜ
 *
™”
, 
UCh¬I‹¿tÜOrigš
 
Üigš
) {

358 
Üigš
) {

359 
UITER_ZERO
:

361 
UITER_START
:

362  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`¡¬tIndex
();

363 
UITER_CURRENT
:

364  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`g‘Index
();

365 
UITER_LIMIT
:

366  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`’dIndex
();

367 
UITER_LENGTH
:

368  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`g‘L’gth
();

374 
	}
}

376 
št32_t
 
U_CALLCONV


377 
	$ch¬aù”I‹¿tÜMove
(
UCh¬I‹¿tÜ
 *
™”
, 
št32_t
 
d–
, 
UCh¬I‹¿tÜOrigš
 
Üigš
) {

378 
Üigš
) {

379 
UITER_ZERO
:

380 ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`£tIndex
(
d–
);

381  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`g‘Index
();

382 
UITER_START
:

383 
UITER_CURRENT
:

384 
UITER_LIMIT
:

385  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`move
(
d–
, (Ch¬aù”I‹¿tÜ::
EOrigš
)
Üigš
);

386 
UITER_LENGTH
:

387 ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`£tIndex
(((Ch¬aù”I‹¿tÜ *)(™”->cÚ‹xt))->
	`g‘L’gth
()+
d–
);

388  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`g‘Index
();

394 
	}
}

396 
UBoŞ
 
U_CALLCONV


397 
	$ch¬aù”I‹¿tÜHasNext
(
UCh¬I‹¿tÜ
 *
™”
) {

398  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`hasNext
();

399 
	}
}

401 
UBoŞ
 
U_CALLCONV


402 
	$ch¬aù”I‹¿tÜHasP»vious
(
UCh¬I‹¿tÜ
 *
™”
) {

403  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`hasP»vious
();

404 
	}
}

406 
UCh¬32
 
U_CALLCONV


407 
	$ch¬aù”I‹¿tÜCu¼’t
(
UCh¬I‹¿tÜ
 *
™”
) {

408 
UCh¬32
 
c
;

410 
c
=((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`cu¼’t
();

411 if(
c
!=0xfffà|| ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`hasNext
()) {

412  
c
;

414  
U_SENTINEL
;

416 
	}
}

418 
UCh¬32
 
U_CALLCONV


419 
	$ch¬aù”I‹¿tÜNext
(
UCh¬I‹¿tÜ
 *
™”
) {

420 if(((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`hasNext
()) {

421  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`ÃxtPo¡Inc
();

423  
U_SENTINEL
;

425 
	}
}

427 
UCh¬32
 
U_CALLCONV


428 
	$ch¬aù”I‹¿tÜP»vious
(
UCh¬I‹¿tÜ
 *
™”
) {

429 if(((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`hasP»vious
()) {

430  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`´evious
();

432  
U_SENTINEL
;

434 
	}
}

436 
ušt32_t
 
U_CALLCONV


437 
	$ch¬aù”I‹¿tÜG‘S‹
(cÚ¡ 
UCh¬I‹¿tÜ
 *
™”
) {

438  ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`g‘Index
();

439 
	}
}

441 
U_CALLCONV


442 
	$ch¬aù”I‹¿tÜS‘S‹
(
UCh¬I‹¿tÜ
 *
™”
, 
ušt32_t
 
¡©e
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

443 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

445 } if(
™”
==
NULL
 || i‹r->
cÚ‹xt
==NULL) {

446 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

447 } if((
št32_t
)
¡©e
<((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`¡¬tIndex
(è|| ((Ch¬aù”I‹¿tÜ *)(™”->cÚ‹xt))->
	`’dIndex
()<(int32_t)state) {

448 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

450 ((
Ch¬aù”I‹¿tÜ
 *)(
™”
->
cÚ‹xt
))->
	`£tIndex
((
št32_t
)
¡©e
);

452 
	}
}

454 cÚ¡ 
UCh¬I‹¿tÜ
 
	gch¬aù”I‹¿tÜW¿µ”
={

456 
ch¬aù”I‹¿tÜG‘Index
,

457 
ch¬aù”I‹¿tÜMove
,

458 
ch¬aù”I‹¿tÜHasNext
,

459 
ch¬aù”I‹¿tÜHasP»vious
,

460 
ch¬aù”I‹¿tÜCu¼’t
,

461 
ch¬aù”I‹¿tÜNext
,

462 
ch¬aù”I‹¿tÜP»vious
,

463 
NULL
,

464 
ch¬aù”I‹¿tÜG‘S‹
,

465 
ch¬aù”I‹¿tÜS‘S‹


468 
U_CAPI
 
U_EXPORT2


469 
	$u™”_£tCh¬aù”I‹¿tÜ
(
UCh¬I‹¿tÜ
 *
™”
, 
Ch¬aù”I‹¿tÜ
 *
ch¬I‹r
) {

470 if(
™”
!=0) {

471 if(
ch¬I‹r
!=0) {

472 *
™”
=
ch¬aù”I‹¿tÜW¿µ”
;

473 
™”
->
cÚ‹xt
=
ch¬I‹r
;

475 *
™”
=
noİI‹¿tÜ
;

478 
	}
}

491 
UCh¬32
 
U_CALLCONV


492 
	$»¶aûabËI‹¿tÜCu¼’t
(
UCh¬I‹¿tÜ
 *
™”
) {

493 if(
™”
->
šdex
<™”->
lim™
) {

494  ((
R•ÏûabË
 *)(
™”
->
cÚ‹xt
))->
	`ch¬At
(™”->
šdex
);

496  
U_SENTINEL
;

498 
	}
}

500 
UCh¬32
 
U_CALLCONV


501 
	$»¶aûabËI‹¿tÜNext
(
UCh¬I‹¿tÜ
 *
™”
) {

502 if(
™”
->
šdex
<™”->
lim™
) {

503  ((
R•ÏûabË
 *)(
™”
->
cÚ‹xt
))->
	`ch¬At
(™”->
šdex
++);

505  
U_SENTINEL
;

507 
	}
}

509 
UCh¬32
 
U_CALLCONV


510 
	$»¶aûabËI‹¿tÜP»vious
(
UCh¬I‹¿tÜ
 *
™”
) {

511 if(
™”
->
šdex
>™”->
¡¬t
) {

512  ((
R•ÏûabË
 *)(
™”
->
cÚ‹xt
))->
	`ch¬At
(--™”->
šdex
);

514  
U_SENTINEL
;

516 
	}
}

518 cÚ¡ 
UCh¬I‹¿tÜ
 
	g»¶aûabËI‹¿tÜ
={

520 
¡ršgI‹¿tÜG‘Index
,

521 
¡ršgI‹¿tÜMove
,

522 
¡ršgI‹¿tÜHasNext
,

523 
¡ršgI‹¿tÜHasP»vious
,

524 
»¶aûabËI‹¿tÜCu¼’t
,

525 
»¶aûabËI‹¿tÜNext
,

526 
»¶aûabËI‹¿tÜP»vious
,

527 
NULL
,

528 
¡ršgI‹¿tÜG‘S‹
,

529 
¡ršgI‹¿tÜS‘S‹


532 
U_CAPI
 
U_EXPORT2


533 
	$u™”_£tR•ÏûabË
(
UCh¬I‹¿tÜ
 *
™”
, cÚ¡ 
R•ÏûabË
 *
»p
) {

534 if(
™”
!=0) {

535 if(
»p
!=0) {

536 *
™”
=
»¶aûabËI‹¿tÜ
;

537 
™”
->
cÚ‹xt
=
»p
;

538 
™”
->
lim™
=™”->
Ëngth
=
»p
->
	`Ëngth
();

540 *
™”
=
noİI‹¿tÜ
;

543 
	}
}

555 
	#UITER_CNV_CAPACITY
 16

	)

583 
št32_t
 
U_CALLCONV


584 
	$utf8I‹¿tÜG‘Index
(
UCh¬I‹¿tÜ
 *
™”
, 
UCh¬I‹¿tÜOrigš
 
Üigš
) {

585 
Üigš
) {

586 
UITER_ZERO
:

587 
UITER_START
:

589 
UITER_CURRENT
:

590 if(
™”
->
šdex
<0) {

592 cÚ¡ 
ušt8_t
 *
s
;

593 
UCh¬32
 
c
;

594 
št32_t
 
i
, 
lim™
, 
šdex
;

596 
s
=(cÚ¡ 
ušt8_t
 *)
™”
->
cÚ‹xt
;

597 
i
=
šdex
=0;

598 
lim™
=
™”
->
¡¬t
;

599 
i
<
lim™
) {

600 
	`U8_NEXT
(
s
, 
i
, 
lim™
, 
c
);

601 if(
c
<=0xffff) {

602 ++
šdex
;

604 
šdex
+=2;

608 
™”
->
¡¬t
=
i
;

609 if(
i
==
™”
->
lim™
) {

610 
™”
->
Ëngth
=
šdex
;

612 if(
™”
->
»£rvedF›ld
!=0) {

613 --
šdex
;

615 
™”
->
šdex
=index;

617  
™”
->
šdex
;

618 
UITER_LIMIT
:

619 
UITER_LENGTH
:

620 if(
™”
->
Ëngth
<0) {

621 cÚ¡ 
ušt8_t
 *
s
;

622 
UCh¬32
 
c
;

623 
št32_t
 
i
, 
lim™
, 
Ëngth
;

625 
s
=(cÚ¡ 
ušt8_t
 *)
™”
->
cÚ‹xt
;

626 if(
™”
->
šdex
<0) {

631 
i
=
Ëngth
=0;

632 
lim™
=
™”
->
¡¬t
;

635 
i
<
lim™
) {

636 
	`U8_NEXT
(
s
, 
i
, 
lim™
, 
c
);

637 if(
c
<=0xffff) {

638 ++
Ëngth
;

640 
Ëngth
+=2;

645 
™”
->
¡¬t
=
i
;

646 
™”
->
šdex
ğ™”->
»£rvedF›ld
!=0 ? 
Ëngth
-1 :†ength;

648 
i
=
™”
->
¡¬t
;

649 
Ëngth
=
™”
->
šdex
;

650 if(
™”
->
»£rvedF›ld
!=0) {

651 ++
Ëngth
;

656 
lim™
=
™”
->limit;

657 
i
<
lim™
) {

658 
	`U8_NEXT
(
s
, 
i
, 
lim™
, 
c
);

659 if(
c
<=0xffff) {

660 ++
Ëngth
;

662 
Ëngth
+=2;

665 
™”
->
Ëngth
=length;

667  
™”
->
Ëngth
;

673 
	}
}

675 
št32_t
 
U_CALLCONV


676 
	$utf8I‹¿tÜMove
(
UCh¬I‹¿tÜ
 *
™”
, 
št32_t
 
d–
, 
UCh¬I‹¿tÜOrigš
 
Üigš
) {

677 cÚ¡ 
ušt8_t
 *
s
;

678 
UCh¬32
 
c
;

679 
št32_t
 
pos
;

680 
št32_t
 
i
;

681 
UBoŞ
 
havePos
;

684 
Üigš
) {

685 
UITER_ZERO
:

686 
UITER_START
:

687 
pos
=
d–
;

688 
havePos
=
TRUE
;

691 
UITER_CURRENT
:

692 if(
™”
->
šdex
>=0) {

693 
pos
=
™”
->
šdex
+
d–
;

694 
havePos
=
TRUE
;

697 
pos
=0;

698 
havePos
=
FALSE
;

701 
UITER_LIMIT
:

702 
UITER_LENGTH
:

703 if(
™”
->
Ëngth
>=0) {

704 
pos
=
™”
->
Ëngth
+
d–
;

705 
havePos
=
TRUE
;

708 
™”
->
šdex
=-1;

709 
™”
->
¡¬t
=™”->
lim™
;

710 
™”
->
»£rvedF›ld
=0;

711 if(
d–
>=0) {

712  
UITER_UNKNOWN_INDEX
;

715 
pos
=0;

716 
havePos
=
FALSE
;

724 if(
havePos
) {

726 if(
pos
<=0) {

727 
™”
->
šdex
=™”->
¡¬t
=™”->
»£rvedF›ld
=0;

729 } if(
™”
->
Ëngth
>=0 && 
pos
>=iter->length) {

730 
™”
->
šdex
=™”->
Ëngth
;

731 
™”
->
¡¬t
=™”->
lim™
;

732 
™”
->
»£rvedF›ld
=0;

733  
™”
->
šdex
;

737 if(
™”
->
šdex
<0 || 
pos
<iter->index/2) {

739 
™”
->
šdex
=™”->
¡¬t
=™”->
»£rvedF›ld
=0;

740 } if(
™”
->
Ëngth
>=0 && (™”->Ëngth-
pos
)<Õos-™”->
šdex
)) {

746 
™”
->
šdex
=™”->
Ëngth
;

747 
™”
->
¡¬t
=™”->
lim™
;

748 
™”
->
»£rvedF›ld
=0;

751 
d–
=
pos
-
™”
->
šdex
;

752 if(
d–
==0) {

753  
™”
->
šdex
;

757 if(
d–
==0) {

758  
UITER_UNKNOWN_INDEX
;

759 } if(-
d–
>=
™”
->
¡¬t
) {

761 
™”
->
šdex
=™”->
¡¬t
=™”->
»£rvedF›ld
=0;

763 } if(
d–
>=(
™”
->
lim™
-™”->
¡¬t
)) {

765 
™”
->
šdex
=™”->
Ëngth
;

766 
™”
->
¡¬t
=™”->
lim™
;

767 
™”
->
»£rvedF›ld
=0;

768  
™”
->
šdex
>=0 ? i‹r->šdex : (
št32_t
)
UITER_UNKNOWN_INDEX
;

775 
s
=(cÚ¡ 
ušt8_t
 *)
™”
->
cÚ‹xt
;

776 
pos
=
™”
->
šdex
;

777 
i
=
™”
->
¡¬t
;

778 if(
d–
>0) {

780 
št32_t
 
lim™
=
™”
->limit;

781 if(
™”
->
»£rvedF›ld
!=0) {

782 
™”
->
»£rvedF›ld
=0;

783 ++
pos
;

784 --
d–
;

786 
d–
>0 && 
i
<
lim™
) {

787 
	`U8_NEXT
(
s
, 
i
, 
lim™
, 
c
);

788 if(
c
<0xffff) {

789 ++
pos
;

790 --
d–
;

791 } if(
d–
>=2) {

792 
pos
+=2;

793 
d–
-=2;

796 
™”
->
»£rvedF›ld
=
c
;

797 ++
pos
;

801 if(
i
==
lim™
) {

802 if(
™”
->
Ëngth
<0 && i‹r->
šdex
>=0) {

803 
™”
->
Ëngth
ğ™”->
»£rvedF›ld
==0 ? 
pos
 :…os+1;

804 } if(
™”
->
šdex
<0 && i‹r->
Ëngth
>=0) {

805 
™”
->
šdex
ğ™”->
»£rvedF›ld
==0 ? i‹r->
Ëngth
 : iter->length-1;

810 if(
™”
->
»£rvedF›ld
!=0) {

811 
™”
->
»£rvedF›ld
=0;

812 
i
-=4;

813 --
pos
;

814 ++
d–
;

816 
d–
<0 && 
i
>0) {

817 
	`U8_PREV
(
s
, 0, 
i
, 
c
);

818 if(
c
<0xffff) {

819 --
pos
;

820 ++
d–
;

821 } if(
d–
<=-2) {

822 
pos
-=2;

823 
d–
+=2;

826 
i
+=4;

827 
™”
->
»£rvedF›ld
=
c
;

828 --
pos
;

834 
™”
->
¡¬t
=
i
;

835 if(
™”
->
šdex
>=0) {

836  
™”
->
šdex
=
pos
;

839 if(
i
<=1) {

840  
™”
->
šdex
=
i
;

843  
UITER_UNKNOWN_INDEX
;

846 
	}
}

848 
UBoŞ
 
U_CALLCONV


849 
	$utf8I‹¿tÜHasNext
(
UCh¬I‹¿tÜ
 *
™”
) {

850  
™”
->
¡¬t
<™”->
lim™
 || i‹r->
»£rvedF›ld
!=0;

851 
	}
}

853 
UBoŞ
 
U_CALLCONV


854 
	$utf8I‹¿tÜHasP»vious
(
UCh¬I‹¿tÜ
 *
™”
) {

855  
™”
->
¡¬t
>0;

856 
	}
}

858 
UCh¬32
 
U_CALLCONV


859 
	$utf8I‹¿tÜCu¼’t
(
UCh¬I‹¿tÜ
 *
™”
) {

860 if(
™”
->
»£rvedF›ld
!=0) {

861  
	`U16_TRAIL
(
™”
->
»£rvedF›ld
);

862 } if(
™”
->
¡¬t
<™”->
lim™
) {

863 cÚ¡ 
ušt8_t
 *
s
=(cÚ¡ ušt8_ˆ*)
™”
->
cÚ‹xt
;

864 
UCh¬32
 
c
;

865 
št32_t
 
i
=
™”
->
¡¬t
;

867 
	`U8_NEXT
(
s
, 
i
, 
™”
->
lim™
, 
c
);

868 if(
c
<0) {

870 } if(
c
<=0xffff) {

871  
c
;

873  
	`U16_LEAD
(
c
);

876  
U_SENTINEL
;

878 
	}
}

880 
UCh¬32
 
U_CALLCONV


881 
	$utf8I‹¿tÜNext
(
UCh¬I‹¿tÜ
 *
™”
) {

882 
št32_t
 
šdex
;

884 if(
™”
->
»£rvedF›ld
!=0) {

885 
UCh¬
 
Œa
=
	`U16_TRAIL
(
™”
->
»£rvedF›ld
);

886 
™”
->
»£rvedF›ld
=0;

887 if((
šdex
=
™”
->index)>=0) {

888 
™”
->
šdex
=index+1;

890  
Œa
;

891 } if(
™”
->
¡¬t
<™”->
lim™
) {

892 cÚ¡ 
ušt8_t
 *
s
=(cÚ¡ ušt8_ˆ*)
™”
->
cÚ‹xt
;

893 
UCh¬32
 
c
;

895 
	`U8_NEXT
(
s
, 
™”
->
¡¬t
, i‹r->
lim™
, 
c
);

896 if((
šdex
=
™”
->index)>=0) {

897 
™”
->
šdex
=++index;

898 if(
™”
->
Ëngth
<0 && i‹r->
¡¬t
==™”->
lim™
) {

899 
™”
->
Ëngth
ğ
c
<=0xfffà? 
šdex
 : index+1;

901 } if(
™”
->
¡¬t
==™”->
lim™
 && i‹r->
Ëngth
>=0) {

902 
™”
->
šdex
ğ
c
<=0xfffà? i‹r->
Ëngth
 : iter->length-1;

904 if(
c
<0) {

906 } if(
c
<=0xffff) {

907  
c
;

909 
™”
->
»£rvedF›ld
=
c
;

910  
	`U16_LEAD
(
c
);

913  
U_SENTINEL
;

915 
	}
}

917 
UCh¬32
 
U_CALLCONV


918 
	$utf8I‹¿tÜP»vious
(
UCh¬I‹¿tÜ
 *
™”
) {

919 
št32_t
 
šdex
;

921 if(
™”
->
»£rvedF›ld
!=0) {

922 
UCh¬
 
Ëad
=
	`U16_LEAD
(
™”
->
»£rvedF›ld
);

923 
™”
->
»£rvedF›ld
=0;

924 
™”
->
¡¬t
-=4;

925 if((
šdex
=
™”
->index)>0) {

926 
™”
->
šdex
=index-1;

928  
Ëad
;

929 } if(
™”
->
¡¬t
>0) {

930 cÚ¡ 
ušt8_t
 *
s
=(cÚ¡ ušt8_ˆ*)
™”
->
cÚ‹xt
;

931 
UCh¬32
 
c
;

933 
	`U8_PREV
(
s
, 0, 
™”
->
¡¬t
, 
c
);

934 if((
šdex
=
™”
->index)>0) {

935 
™”
->
šdex
=index-1;

936 } if(
™”
->
¡¬t
<=1) {

937 
™”
->
šdex
ğ
c
<=0xfffà? i‹r->
¡¬t
 : iter->start+1;

939 if(
c
<0) {

941 } if(
c
<=0xffff) {

942  
c
;

944 
™”
->
¡¬t
+=4;

945 
™”
->
»£rvedF›ld
=
c
;

946  
	`U16_TRAIL
(
c
);

949  
U_SENTINEL
;

951 
	}
}

953 
ušt32_t
 
U_CALLCONV


954 
	$utf8I‹¿tÜG‘S‹
(cÚ¡ 
UCh¬I‹¿tÜ
 *
™”
) {

955 
ušt32_t
 
¡©e
=(ušt32_t)(
™”
->
¡¬t
<<1);

956 if(
™”
->
»£rvedF›ld
!=0) {

957 
¡©e
|=1;

959  
¡©e
;

960 
	}
}

962 
U_CALLCONV


963 
	$utf8I‹¿tÜS‘S‹
(
UCh¬I‹¿tÜ
 *
™”
,

964 
ušt32_t
 
¡©e
,

965 
UE¼ÜCode
 *
pE¼ÜCode
)

967 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

969 } if(
™”
==
NULL
) {

970 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

971 } if(
¡©e
==
	`utf8I‹¿tÜG‘S‹
(
™”
)) {

974 
št32_t
 
šdex
=(št32_t)(
¡©e
>>1);

975 
¡©e
&=1;

977 if((
¡©e
==0 ? 
šdex
<0 : index<4è|| 
™”
->
lim™
<index) {

978 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

980 
™”
->
¡¬t
=
šdex
;

981 if(
šdex
<=1) {

982 
™”
->
šdex
=index;

984 
™”
->
šdex
=-1;

986 if(
¡©e
==0) {

987 
™”
->
»£rvedF›ld
=0;

990 
UCh¬32
 
c
;

991 
	`U8_PREV
((cÚ¡ 
ušt8_t
 *)
™”
->
cÚ‹xt
, 0, 
šdex
, 
c
);

992 if(
c
<=0xffff) {

993 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

995 
™”
->
»£rvedF›ld
=
c
;

1000 
	}
}

1002 cÚ¡ 
UCh¬I‹¿tÜ
 
	gutf8I‹¿tÜ
={

1004 
utf8I‹¿tÜG‘Index
,

1005 
utf8I‹¿tÜMove
,

1006 
utf8I‹¿tÜHasNext
,

1007 
utf8I‹¿tÜHasP»vious
,

1008 
utf8I‹¿tÜCu¼’t
,

1009 
utf8I‹¿tÜNext
,

1010 
utf8I‹¿tÜP»vious
,

1011 
NULL
,

1012 
utf8I‹¿tÜG‘S‹
,

1013 
utf8I‹¿tÜS‘S‹


1016 
U_CAPI
 
U_EXPORT2


1017 
	$u™”_£tUTF8
(
UCh¬I‹¿tÜ
 *
™”
, cÚ¡ *
s
, 
št32_t
 
Ëngth
) {

1018 if(
™”
!=0) {

1019 if(
s
!=0 && 
Ëngth
>=-1) {

1020 *
™”
=
utf8I‹¿tÜ
;

1021 
™”
->
cÚ‹xt
=
s
;

1022 if(
Ëngth
>=0) {

1023 
™”
->
lim™
=
Ëngth
;

1025 
™”
->
lim™
=(
št32_t
)
	`u´v_¡¾’
(
s
);

1027 
™”
->
Ëngth
ğ™”->
lim™
<=1 ? iter->limit : -1;

1029 *
™”
=
noİI‹¿tÜ
;

1032 
	}
}

1036 
U_CAPI
 
UCh¬32
 
U_EXPORT2


1037 
	$u™”_cu¼’t32
(
UCh¬I‹¿tÜ
 *
™”
) {

1038 
UCh¬32
 
c
, 
c2
;

1040 
c
=
™”
->
	`cu¼’t
(iter);

1041 if(
	`UTF_IS_SURROGATE
(
c
)) {

1042 if(
	`UTF_IS_SURROGATE_FIRST
(
c
)) {

1047 
™”
->
	`move
(™”, 1, 
UITER_CURRENT
);

1048 if(
	`UTF_IS_SECOND_SURROGATE
(
c2
=
™”
->
	`cu¼’t
(iter))) {

1049 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
c2
);

1053 
™”
->
	`move
(™”, -1, 
UITER_CURRENT
);

1055 if(
	`UTF_IS_FIRST_SURROGATE
(
c2
=
™”
->
	`´evious
(iter))) {

1056 
c
=
	`UTF16_GET_PAIR_VALUE
(
c2
, c);

1058 if(
c2
>=0) {

1060 
™”
->
	`move
(™”, 1, 
UITER_CURRENT
);

1064  
c
;

1065 
	}
}

1067 
U_CAPI
 
UCh¬32
 
U_EXPORT2


1068 
	$u™”_Ãxt32
(
UCh¬I‹¿tÜ
 *
™”
) {

1069 
UCh¬32
 
c
, 
c2
;

1071 
c
=
™”
->
	`Ãxt
(iter);

1072 if(
	`UTF_IS_FIRST_SURROGATE
(
c
)) {

1073 if(
	`UTF_IS_SECOND_SURROGATE
(
c2
=
™”
->
	`Ãxt
(iter))) {

1074 
c
=
	`UTF16_GET_PAIR_VALUE
(c, 
c2
);

1075 } if(
c2
>=0) {

1077 
™”
->
	`move
(™”, -1, 
UITER_CURRENT
);

1080  
c
;

1081 
	}
}

1083 
U_CAPI
 
UCh¬32
 
U_EXPORT2


1084 
	$u™”_´evious32
(
UCh¬I‹¿tÜ
 *
™”
) {

1085 
UCh¬32
 
c
, 
c2
;

1087 
c
=
™”
->
	`´evious
(iter);

1088 if(
	`UTF_IS_SECOND_SURROGATE
(
c
)) {

1089 if(
	`UTF_IS_FIRST_SURROGATE
(
c2
=
™”
->
	`´evious
(iter))) {

1090 
c
=
	`UTF16_GET_PAIR_VALUE
(
c2
, c);

1091 } if(
c2
>=0) {

1093 
™”
->
	`move
(™”, 1, 
UITER_CURRENT
);

1096  
c
;

1097 
	}
}

1099 
U_CAPI
 
ušt32_t
 
U_EXPORT2


1100 
	$u™”_g‘S‹
(cÚ¡ 
UCh¬I‹¿tÜ
 *
™”
) {

1101 if(
™”
==
NULL
 || i‹r->
g‘S‹
==NULL) {

1102  
UITER_NO_STATE
;

1104  
™”
->
	`g‘S‹
(iter);

1106 
	}
}

1108 
U_CAPI
 
U_EXPORT2


1109 
	$u™”_£tS‹
(
UCh¬I‹¿tÜ
 *
™”
, 
ušt32_t
 
¡©e
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1110 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1112 } if(
™”
==
NULL
) {

1113 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1114 } if(
™”
->
£tS‹
==
NULL
) {

1115 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

1117 
™”
->
	`£tS‹
(™”, 
¡©e
, 
pE¼ÜCode
);

1119 
	}
}

1121 
	gU_CDECL_END


	@ulist.c

8 
	~"uli¡.h
"

9 
	~"cmemÜy.h
"

10 
	~"c¡ršg.h
"

11 
	~"u’umimp.h
"

13 
ULi¡Node
 
	tULi¡Node
;

14 
	sULi¡Node
 {

15 *
	md©a
;

17 
ULi¡Node
 *
	mÃxt
;

18 
ULi¡Node
 *
	m´evious
;

21 
UBoŞ
 
	mfÜûD–‘e
;

24 
	sULi¡
 {

25 
ULi¡Node
 *
	mcu¼
;

26 
ULi¡Node
 *
	mh—d
;

27 
ULi¡Node
 *
	m
;

29 
št32_t
 
	msize
;

30 
št32_t
 
	mcu¼’tIndex
;

33 
uli¡_addFœ¡I‹m
(
ULi¡
 *
li¡
, 
ULi¡Node
 *
ÃwI‹m
);

35 
U_CAPI
 
ULi¡
 *
U_EXPORT2
 
	$uli¡_ü—‹Em±yLi¡
(
UE¼ÜCode
 *
¡©us
) {

36 
ULi¡
 *
ÃwLi¡
 = 
NULL
;

38 ià(
	`U_FAILURE
(*
¡©us
)) {

39  
NULL
;

42 
ÃwLi¡
 = (
ULi¡
 *)
	`u´v_m®loc
((UList));

43 ià(
ÃwLi¡
 =ğ
NULL
) {

44 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

45  
NULL
;

48 
ÃwLi¡
->
cu¼
 = 
NULL
;

49 
ÃwLi¡
->
h—d
 = 
NULL
;

50 
ÃwLi¡
->

 = 
NULL
;

51 
ÃwLi¡
->
size
 = 0;

52 
ÃwLi¡
->
cu¼’tIndex
 = -1;

54  
ÃwLi¡
;

55 
	}
}

61 
	$uli¡_addFœ¡I‹m
(
ULi¡
 *
li¡
, 
ULi¡Node
 *
ÃwI‹m
) {

62 
ÃwI‹m
->
Ãxt
 = 
NULL
;

63 
ÃwI‹m
->
´evious
 = 
NULL
;

64 
li¡
->
h—d
 = 
ÃwI‹m
;

65 
li¡
->

 = 
ÃwI‹m
;

66 
li¡
->
cu¼’tIndex
 = 0;

67 
	}
}

69 
U_CAPI
 
U_EXPORT2
 
	$uli¡_addI‹mEndLi¡
(
ULi¡
 *
li¡
, cÚ¡ *
d©a
, 
UBoŞ
 
fÜûD–‘e
, 
UE¼ÜCode
 *
¡©us
) {

70 
ULi¡Node
 *
ÃwI‹m
 = 
NULL
;

72 ià(
	`U_FAILURE
(*
¡©us
è|| 
li¡
 =ğ
NULL
 || 
d©a
 == NULL) {

76 
ÃwI‹m
 = (
ULi¡Node
 *)
	`u´v_m®loc
((UListNode));

77 ià(
ÃwI‹m
 =ğ
NULL
) {

78 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

81 
ÃwI‹m
->
d©a
 = (*)(data);

82 
ÃwI‹m
->
fÜûD–‘e
 = forceDelete;

84 ià(
li¡
->
size
 == 0) {

85 
	`uli¡_addFœ¡I‹m
(
li¡
, 
ÃwI‹m
);

87 
ÃwI‹m
->
Ãxt
 = 
NULL
;

88 
ÃwI‹m
->
´evious
 = 
li¡
->

;

89 
li¡
->

->
Ãxt
 = 
ÃwI‹m
;

90 
li¡
->

 = 
ÃwI‹m
;

93 
li¡
->
size
++;

94 
	}
}

96 
U_CAPI
 
U_EXPORT2
 
	$uli¡_addI‹mBegšLi¡
(
ULi¡
 *
li¡
, cÚ¡ *
d©a
, 
UBoŞ
 
fÜûD–‘e
, 
UE¼ÜCode
 *
¡©us
) {

97 
ULi¡Node
 *
ÃwI‹m
 = 
NULL
;

99 ià(
	`U_FAILURE
(*
¡©us
è|| 
li¡
 =ğ
NULL
 || 
d©a
 == NULL) {

103 
ÃwI‹m
 = (
ULi¡Node
 *)
	`u´v_m®loc
((UListNode));

104 ià(
ÃwI‹m
 =ğ
NULL
) {

105 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

108 
ÃwI‹m
->
d©a
 = (*)(data);

109 
ÃwI‹m
->
fÜûD–‘e
 = forceDelete;

111 ià(
li¡
->
size
 == 0) {

112 
	`uli¡_addFœ¡I‹m
(
li¡
, 
ÃwI‹m
);

114 
ÃwI‹m
->
´evious
 = 
NULL
;

115 
ÃwI‹m
->
Ãxt
 = 
li¡
->
h—d
;

116 
li¡
->
h—d
->
´evious
 = 
ÃwI‹m
;

117 
li¡
->
h—d
 = 
ÃwI‹m
;

118 
li¡
->
cu¼’tIndex
++;

121 
li¡
->
size
++;

122 
	}
}

124 
U_CAPI
 
UBoŞ
 
U_EXPORT2
 
	$uli¡_cÚšsSŒšg
(cÚ¡ 
ULi¡
 *
li¡
, cÚ¡ *
d©a
, 
št32_t
 
Ëngth
) {

125 
UBoŞ
 
»suÉ
 = 
FALSE
;

126 cÚ¡ 
ULi¡Node
 *
poš‹r
 = 
NULL
;

128 ià(
li¡
 !ğ
NULL
 &&†i¡->
size
 != 0) {

129 
poš‹r
 = 
li¡
->
h—d
;

131 
poš‹r
 !ğ
NULL
) {

132 ià(
Ëngth
 =ğ
	`u´v_¡¾’
(
poš‹r
->
d©a
)) {

133 ià(
	`u´v_memcmp
(
d©a
, 
poš‹r
->d©a, 
Ëngth
) == 0) {

134 
»suÉ
 = 
TRUE
;

139 
poš‹r
 =…oš‹r->
Ãxt
;

143  
»suÉ
;

144 
	}
}

146 
U_CAPI
 *
U_EXPORT2
 
	$uli¡_g‘Next
(
ULi¡
 *
li¡
) {

147 
ULi¡Node
 *
cu¼
 = 
NULL
;

149 ià(
li¡
 =ğ
NULL
 ||†i¡->
cu¼
 == NULL) {

150  
NULL
;

153 
cu¼
 = 
li¡
->curr;

154 
li¡
->
cu¼
 = cu¼->
Ãxt
;

155 
li¡
->
cu¼’tIndex
++;

157  
cu¼
->
d©a
;

158 
	}
}

160 
U_CAPI
 
št32_t
 
U_EXPORT2
 
	$uli¡_g‘Li¡Size
(cÚ¡ 
ULi¡
 *
li¡
) {

161 ià(
li¡
 !ğ
NULL
) {

162  
li¡
->
size
;

166 
	}
}

168 
U_CAPI
 
U_EXPORT2
 
	$uli¡_»£tLi¡
(
ULi¡
 *
li¡
) {

169 ià(
li¡
 !ğ
NULL
) {

170 
li¡
->
cu¼
 =†i¡->
h—d
;

171 
li¡
->
cu¼’tIndex
 = 0;

173 
	}
}

175 
U_CAPI
 
U_EXPORT2
 
	$uli¡_d–‘eLi¡
(
ULi¡
 *
li¡
) {

176 
ULi¡Node
 *
li¡H—d
 = 
NULL
;

177 
ULi¡Node
 *
li¡Poš‹r
 = 
NULL
;

179 ià(
li¡
 !ğ
NULL
) {

180 
li¡H—d
 = 
li¡
->
h—d
;

181 
li¡Poš‹r
 = 
li¡H—d
;

182 
li¡H—d
 !ğ
NULL
) {

183 
li¡Poš‹r
 = 
li¡H—d
->
Ãxt
;

185 ià(
li¡H—d
->
fÜûD–‘e
) {

186 
	`u´v_ä“
(
li¡H—d
->
d©a
);

189 
	`u´v_ä“
(
li¡H—d
);

190 
li¡H—d
 = 
li¡Poš‹r
;

192 
	`u´v_ä“
(
li¡
);

193 
li¡
 = 
NULL
;

195 
	}
}

197 
U_CAPI
 
U_EXPORT2
 
	$uli¡_şo£_keywÜd_v®ues_™”©Ü
(
UEnum”©iÚ
 *
’
) {

198 ià(
’
 !ğ
NULL
) {

199 
	`uli¡_d–‘eLi¡
((
ULi¡
 *)(
’
->
cÚ‹xt
));

200 
	`u´v_ä“
(
’
);

202 
	}
}

204 
U_CAPI
 
št32_t
 
U_EXPORT2
 
	$uli¡_couÁ_keywÜd_v®ues
(
UEnum”©iÚ
 *
’
, 
UE¼ÜCode
 *
¡©us
) {

205 ià(
	`U_FAILURE
(*
¡©us
)) {

209  
	`uli¡_g‘Li¡Size
((
ULi¡
 *)(
’
->
cÚ‹xt
));

210 
	}
}

212 
U_CAPI
 cÚ¡ * 
U_EXPORT2
 
	$uli¡_Ãxt_keywÜd_v®ue
(
UEnum”©iÚ
 *
’
, 
št32_t
 *
»suÉL’gth
, 
UE¼ÜCode
 *
¡©us
) {

213 ià(
	`U_FAILURE
(*
¡©us
)) {

214  
NULL
;

219  (cÚ¡ *)
	`uli¡_g‘Next
((
ULi¡
 *)(
’
->
cÚ‹xt
));

220 
	}
}

222 
U_CAPI
 
U_EXPORT2
 
	$uli¡_»£t_keywÜd_v®ues_™”©Ü
(
UEnum”©iÚ
 *
’
, 
UE¼ÜCode
 *
¡©us
) {

223 ià(
	`U_FAILURE
(*
¡©us
)) {

227 
	`uli¡_»£tLi¡
((
ULi¡
 *)(
’
->
cÚ‹xt
));

228 
	}
}

230 
U_CAPI
 
ULi¡
 * 
U_EXPORT2
 
	$uli¡_g‘Li¡FromEnum
(
UEnum”©iÚ
 *
’
) {

231  (
ULi¡
 *)(
’
->
cÚ‹xt
);

232 
	}
}

	@ulist.h

8 #iâdeà
ULIST_H


9 
	#ULIST_H


	)

11 
	~"unicode/uty³s.h
"

12 
	~"unicode/u’um.h
"

14 
	gULi¡
;

15 
ULi¡
 
	tULi¡
;

17 
U_CAPI
 
ULi¡
 * 
U_EXPORT2
 
uli¡_ü—‹Em±yLi¡
(
UE¼ÜCode
 *
¡©us
);

19 
U_CAPI
 
U_EXPORT2
 
uli¡_addI‹mEndLi¡
(
ULi¡
 *
li¡
, cÚ¡ *
d©a
, 
UBoŞ
 
fÜûD–‘e
, 
UE¼ÜCode
 *
¡©us
);

21 
U_CAPI
 
U_EXPORT2
 
uli¡_addI‹mBegšLi¡
(
ULi¡
 *
li¡
, cÚ¡ *
d©a
, 
UBoŞ
 
fÜûD–‘e
, 
UE¼ÜCode
 *
¡©us
);

23 
U_CAPI
 
UBoŞ
 
U_EXPORT2
 
uli¡_cÚšsSŒšg
(cÚ¡ 
ULi¡
 *
li¡
, cÚ¡ *
d©a
, 
št32_t
 
Ëngth
);

25 
U_CAPI
 *
U_EXPORT2
 
uli¡_g‘Next
(
ULi¡
 *
li¡
);

27 
U_CAPI
 
št32_t
 
U_EXPORT2
 
uli¡_g‘Li¡Size
(cÚ¡ 
ULi¡
 *
li¡
);

29 
U_CAPI
 
U_EXPORT2
 
uli¡_»£tLi¡
(
ULi¡
 *
li¡
);

31 
U_CAPI
 
U_EXPORT2
 
uli¡_d–‘eLi¡
(
ULi¡
 *
li¡
);

36 
U_CAPI
 
U_EXPORT2
 
uli¡_şo£_keywÜd_v®ues_™”©Ü
(
UEnum”©iÚ
 *
’
);

38 
U_CAPI
 
št32_t
 
U_EXPORT2
 
uli¡_couÁ_keywÜd_v®ues
(
UEnum”©iÚ
 *
’
, 
UE¼ÜCode
 *
¡©us
);

40 
U_CAPI
 cÚ¡ * 
U_EXPORT2
 
uli¡_Ãxt_keywÜd_v®ue
(
UEnum”©iÚ
* 
’
, 
št32_t
 *
»suÉL’gth
, 
UE¼ÜCode
* 
¡©us
);

42 
U_CAPI
 
U_EXPORT2
 
uli¡_»£t_keywÜd_v®ues_™”©Ü
(
UEnum”©iÚ
* 
’
, 
UE¼ÜCode
* 
¡©us
);

44 
U_CAPI
 
ULi¡
 * 
U_EXPORT2
 
uli¡_g‘Li¡FromEnum
(
UEnum”©iÚ
 *
’
);

	@uloc.c

31 
	~"unicode/uty³s.h
"

32 
	~"unicode/u¡ršg.h
"

33 
	~"unicode/uloc.h
"

35 
	~"putimp.h
"

36 
	~"u¡r_imp.h
"

37 
	~"ulocimp.h
"

38 
	~"umu‹x.h
"

39 
	~"c¡ršg.h
"

40 
	~"cmemÜy.h
"

41 
	~"uşn_cmn.h
"

42 
	~"locm­.h
"

43 
	~"u¬rsÜt.h
"

44 
	~"u’umimp.h
"

45 
	~"uas£¹.h
"

47 
	~<¡dio.h
>

52 
U_CFUNC
 
loÿË_£t_deçuÉ
(cÚ¡ *
id
);

53 
U_CFUNC
 cÚ¡ *
loÿË_g‘_deçuÉ
();

54 
U_CFUNC
 
št32_t


55 
loÿË_g‘KeywÜds
(cÚ¡ *
loÿËID
,

56 
´ev
,

57 *
keywÜds
, 
št32_t
 
keywÜdC­ac™y
,

58 *
v®ues
, 
št32_t
 
v®uesC­ac™y
, iÁ32_ˆ*
v®L’
,

59 
UBoŞ
 
v®uesToo
,

60 
UE¼ÜCode
 *
¡©us
);

95 cÚ¡ * cÚ¡ 
	gLANGUAGES
[] = {

155 
NULL
,

157 
NULL


159 cÚ¡ * cÚ¡ 
	gDEPRECATED_LANGUAGES
[]={

160 "š", "iw", "ji", "jw", 
NULL
, NULL

162 cÚ¡ * cÚ¡ 
	gREPLACEMENT_LANGUAGES
[]={

163 "id", "he", "yi", "jv", 
NULL
, NULL

182 cÚ¡ * cÚ¡ 
	gLANGUAGES_3
[] = {

297 
NULL
,

300 
NULL


327 cÚ¡ * cÚ¡ 
	gCOUNTRIES
[] = {

358 
NULL
,

360 
NULL


363 cÚ¡ * cÚ¡ 
	gDEPRECATED_COUNTRIES
[] ={

364 "BU", "CS", "DY", "FX", "HV", "NH", "RH", "TP", "YU", "ZR", 
NULL
, NULL

366 cÚ¡ * cÚ¡ 
	gREPLACEMENT_COUNTRIES
[] = {

368 "MM", "RS", "BJ", "FR", "BF", "VU", "ZW", "TL", "RS", "CD", 
NULL
, NULL

384 cÚ¡ * cÚ¡ 
	gCOUNTRIES_3
[] = {

445 
NULL
,

448 
NULL


451 
	sCªÚiÿliz©iÚM­
 {

452 cÚ¡ *
	mid
;

453 cÚ¡ *
	mÿnÚiÿlID
;

454 cÚ¡ *
	mkeywÜd
;

455 cÚ¡ *
	mv®ue
;

456 } 
	tCªÚiÿliz©iÚM­
;

462 cÚ¡ 
CªÚiÿliz©iÚM­
 
	gCANONICALIZE_MAP
[] = {

463 { "", "’_US_POSIX", 
NULL
, NULL },

464 { "c", "’_US_POSIX", 
NULL
, NULL },

465 { "posix", "’_US_POSIX", 
NULL
, NULL },

466 { "¬t_LOJBAN", "jbo", 
NULL
, NULL },

467 { "az_AZ_CYRL", "az_Cy¾_AZ", 
NULL
, NULL },

468 { "az_AZ_LATN", "az_L©n_AZ", 
NULL
, NULL },

470 { "ûl_GAULISH", "ûl__GAULISH", 
NULL
, NULL },

471 { "de_1901", "de__1901", 
NULL
, NULL },

472 { "de_1906", "de__1906", 
NULL
, NULL },

478 { "’_BOONT", "’__BOONT", 
NULL
, NULL },

479 { "’_SCOUSE", "’__SCOUSE", 
NULL
, NULL },

494 { "nb_NO_NY", "Â_NO", 
NULL
, NULL },

498 { "¦_ROZAJ", "¦__ROZAJ", 
NULL
, NULL },

499 { "¤_SP_CYRL", "¤_Cy¾_RS", 
NULL
, NULL },

500 { "¤_SP_LATN", "¤_L©n_RS", 
NULL
, NULL },

501 { "¤_YU_CYRILLIC", "¤_Cy¾_RS", 
NULL
, NULL },

503 { "uz_UZ_CYRILLIC", "uz_Cy¾_UZ", 
NULL
, NULL },

504 { "uz_UZ_CYRL", "uz_Cy¾_UZ", 
NULL
, NULL },

505 { "uz_UZ_LATN", "uz_L©n_UZ", 
NULL
, NULL },

506 { "zh_CHS", "zh_Hªs", 
NULL
, NULL },

507 { "zh_CHT", "zh_Hªt", 
NULL
, NULL },

508 { "zh_GAN", "zh__GAN", 
NULL
, NULL },

509 { "zh_GUOYU", "zh", 
NULL
, NULL },

510 { "zh_HAKKA", "zh__HAKKA", 
NULL
, NULL },

511 { "zh_MIN", "zh__MIN", 
NULL
, NULL },

512 { "zh_MIN_NAN", "zh__MINNAN", 
NULL
, NULL },

513 { "zh_WUU", "zh__WUU", 
NULL
, NULL },

514 { "zh_XIANG", "zh__XIANG", 
NULL
, NULL },

515 { "zh_YUE", "zh__YUE", 
NULL
, NULL },

518 
	sV¬ŸÁM­
 {

519 cÚ¡ *
	mv¬ŸÁ
;

520 cÚ¡ *
	mkeywÜd
;

521 cÚ¡ *
	mv®ue
;

522 } 
	tV¬ŸÁM­
;

524 cÚ¡ 
V¬ŸÁM­
 
	gVARIANT_MAP
[] = {

532 
	#_hasBCP47Ex‹nsiÚ
(
id
è(id && 
	`u´v_¡r¡r
(id, "@"è=ğ
NULL
 && 
	`g‘ShÜ‹¡SubgL’gth
(
loÿËID
è=ğ1)

	)

534 
	#_CÚv”tBCP47
(
fš®ID
, 
id
, 
bufãr
, 
Ëngth
,
”r
) \

535 ià(
	`uloc_fÜLªguageTag
(
id
, 
bufãr
, 
Ëngth
, 
NULL
, 
”r
è<ğ0 || 
	`U_FAILURE
(*err)) { \

536 
fš®ID
=
id
; \

538 
fš®ID
=
bufãr
; \

539 }

	)

541 
št32_t
 
	$g‘ShÜ‹¡SubgL’gth
(cÚ¡ *
loÿËID
) {

542 
št32_t
 
loÿËIDL’gth
 = 
	`u´v_¡¾’
(
loÿËID
);

543 
št32_t
 
Ëngth
 = 
loÿËIDL’gth
;

544 
št32_t
 
tmpL’gth
 = 0;

545 
št32_t
 
i
;

546 
UBoŞ
 
»£t
 = 
TRUE
;

548 
i
 = 0; i < 
loÿËIDL’gth
; i++) {

549 ià(
loÿËID
[
i
] != '_' &&†ocaleID[i] != '-') {

550 ià(
»£t
) {

551 
tmpL’gth
 = 0;

552 
»£t
 = 
FALSE
;

554 
tmpL’gth
++;

556 ià(
tmpL’gth
 !ğ0 &&mpL’gth < 
Ëngth
) {

557 
Ëngth
 = 
tmpL’gth
;

559 
»£t
 = 
TRUE
;

563  
Ëngth
;

564 
	}
}

568 
	#ULOC_KEYWORD_BUFFER_LEN
 25

	)

569 
	#ULOC_MAX_NO_KEYWORDS
 25

	)

571 
U_CAPI
 cÚ¡ * 
U_EXPORT2


572 
	$loÿË_g‘KeywÜdsS¹
(cÚ¡ *
loÿËID
) {

573 cÚ¡ *
»suÉ
 = 
NULL
;

574 if((
»suÉ
 = 
	`u´v_¡rchr
(
loÿËID
, '@')è!ğ
NULL
) {

575  
»suÉ
;

577 #ià(
U_CHARSET_FAMILY
 =ğ
U_EBCDIC_FAMILY
)

582 cÚ¡ 
ušt8_t
 
ebcdicSigns
[] = { 0x7C, 0x44, 0x66, 0x80, 0xAC, 0xAE, 0xAF, 0xB5, 0xEC, 0xEF, 0x00 };

583 cÚ¡ 
ušt8_t
 *
ch¬ToFšd
 = 
ebcdicSigns
;

584 *
ch¬ToFšd
) {

585 if((
»suÉ
 = 
	`u´v_¡rchr
(
loÿËID
, *
ch¬ToFšd
)è!ğ
NULL
) {

586  
»suÉ
;

588 
ch¬ToFšd
++;

592  
NULL
;

593 
	}
}

601 
št32_t
 
	$loÿË_ÿnÚKeywÜdName
(*
buf
, cÚ¡ *
keywÜdName
, 
UE¼ÜCode
 *
¡©us
)

603 
št32_t
 
i
;

604 
št32_t
 
keywÜdNameL’
 = (št32_t)
	`u´v_¡¾’
(
keywÜdName
);

606 if(
keywÜdNameL’
 >ğ
ULOC_KEYWORD_BUFFER_LEN
) {

608 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

613 
i
 = 0; i < 
keywÜdNameL’
; i++) {

614 
buf
[
i
] = 
	`u´v_tŞow”
(
keywÜdName
[i]);

616 
buf
[
i
] = 0;

618  
keywÜdNameL’
;

619 
	}
}

622 
	mkeywÜd
[
ULOC_KEYWORD_BUFFER_LEN
];

623 
št32_t
 
	mkeywÜdL’
;

624 cÚ¡ *
	mv®ueS¹
;

625 
št32_t
 
	mv®ueL’
;

626 } 
	tKeywÜdSŒuù
;

628 
št32_t
 
U_CALLCONV


629 
	$com·»KeywÜdSŒuùs
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
Ëá
, cÚ¡ *
right
) {

630 cÚ¡ * 
ËáSŒšg
 = ((cÚ¡ 
KeywÜdSŒuù
 *)
Ëá
)->
keywÜd
;

631 cÚ¡ * 
rightSŒšg
 = ((cÚ¡ 
KeywÜdSŒuù
 *)
right
)->
keywÜd
;

632  
	`u´v_¡rcmp
(
ËáSŒšg
, 
rightSŒšg
);

633 
	}
}

641 
št32_t


642 
	$_g‘KeywÜds
(cÚ¡ *
loÿËID
,

643 
´ev
,

644 *
keywÜds
, 
št32_t
 
keywÜdC­ac™y
,

645 *
v®ues
, 
št32_t
 
v®uesC­ac™y
, iÁ32_ˆ*
v®L’
,

646 
UBoŞ
 
v®uesToo
,

647 cÚ¡ * 
addKeywÜd
,

648 cÚ¡ * 
addV®ue
,

649 
UE¼ÜCode
 *
¡©us
)

651 
KeywÜdSŒuù
 
keywÜdLi¡
[
ULOC_MAX_NO_KEYWORDS
];

653 
št32_t
 
maxKeywÜds
 = 
ULOC_MAX_NO_KEYWORDS
;

654 
št32_t
 
numKeywÜds
 = 0;

655 cÚ¡ * 
pos
 = 
loÿËID
;

656 cÚ¡ * 
equ®Sign
 = 
NULL
;

657 cÚ¡ * 
£micŞÚ
 = 
NULL
;

658 
št32_t
 
i
 = 0, 
j
, 
n
;

659 
št32_t
 
keywÜdsL’
 = 0;

660 
št32_t
 
v®uesL’
 = 0;

662 if(
´ev
 == '@') {

665 
UBoŞ
 
du¶iÿ‹
 = 
FALSE
;

667 *
pos
 == ' ') {

668 
pos
++;

670 ià(!*
pos
) {

673 if(
numKeywÜds
 =ğ
maxKeywÜds
) {

674 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

677 
equ®Sign
 = 
	`u´v_¡rchr
(
pos
, '=');

678 
£micŞÚ
 = 
	`u´v_¡rchr
(
pos
, ';');

681 if(!
equ®Sign
 || (
£micŞÚ
 && semicolon<equalSign)) {

682 *
¡©us
 = 
U_INVALID_FORMAT_ERROR
;

686 if(
equ®Sign
 - 
pos
 >ğ
ULOC_KEYWORD_BUFFER_LEN
) {

688 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

691 
i
 = 0, 
n
 = 0; i < 
equ®Sign
 - 
pos
; ++i) {

692 ià(
pos
[
i
] != ' ') {

693 
keywÜdLi¡
[
numKeywÜds
].
keywÜd
[
n
++] = 
	`u´v_tŞow”
(
pos
[
i
]);

696 
keywÜdLi¡
[
numKeywÜds
].
keywÜd
[
n
] = 0;

697 
keywÜdLi¡
[
numKeywÜds
].
keywÜdL’
 = 
n
;

699 
equ®Sign
++;

701 *
equ®Sign
 == ' ') {

702 
equ®Sign
++;

704 
keywÜdLi¡
[
numKeywÜds
].
v®ueS¹
 = 
equ®Sign
;

706 
pos
 = 
£micŞÚ
;

707 
i
 = 0;

708 if(
pos
) {

709 *(
pos
 - 
i
 - 1) == ' ') {

710 
i
++;

712 
keywÜdLi¡
[
numKeywÜds
].
v®ueL’
 = (
št32_t
)(
pos
 - 
equ®Sign
 - 
i
);

713 
pos
++;

715 
i
 = (
št32_t
)
	`u´v_¡¾’
(
equ®Sign
);

716 
equ®Sign
[
i
-1] == ' ') {

717 
i
--;

719 
keywÜdLi¡
[
numKeywÜds
].
v®ueL’
 = 
i
;

722 
j
=0; j<
numKeywÜds
; ++j) {

723 ià(
	`u´v_¡rcmp
(
keywÜdLi¡
[
j
].
keywÜd
, keywÜdLi¡[
numKeywÜds
].keyword) == 0) {

724 
du¶iÿ‹
 = 
TRUE
;

728 ià(!
du¶iÿ‹
) {

729 ++
numKeywÜds
;

731 } 
pos
);

734 ià(
addKeywÜd
 !ğ
NULL
) {

735 
UBoŞ
 
du¶iÿ‹
 = 
FALSE
;

736 
	`U_ASSERT
(
addV®ue
 !ğ
NULL
);

739 
j
=0; j<
numKeywÜds
; ++j) {

740 ià(
	`u´v_¡rcmp
(
keywÜdLi¡
[
j
].
keywÜd
, 
addKeywÜd
) == 0) {

741 
du¶iÿ‹
 = 
TRUE
;

745 ià(!
du¶iÿ‹
) {

746 ià(
numKeywÜds
 =ğ
maxKeywÜds
) {

747 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

750 
	`u´v_¡rıy
(
keywÜdLi¡
[
numKeywÜds
].
keywÜd
, 
addKeywÜd
);

751 
keywÜdLi¡
[
numKeywÜds
].
keywÜdL’
 = (
št32_t
)
	`u´v_¡¾’
(
addKeywÜd
);

752 
keywÜdLi¡
[
numKeywÜds
].
v®ueS¹
 = 
addV®ue
;

753 
keywÜdLi¡
[
numKeywÜds
].
v®ueL’
 = (
št32_t
)
	`u´v_¡¾’
(
addV®ue
);

754 ++
numKeywÜds
;

757 
	`U_ASSERT
(
addV®ue
 =ğ
NULL
);

762 
	`u´v_sÜtA¼ay
(
keywÜdLi¡
, 
numKeywÜds
, (
KeywÜdSŒuù
), 
com·»KeywÜdSŒuùs
, 
NULL
, 
FALSE
, 
¡©us
);

765 
i
 = 0; i < 
numKeywÜds
; i++) {

766 if(
keywÜdsL’
 + 
keywÜdLi¡
[
i
].
keywÜdL’
 + 1< 
keywÜdC­ac™y
) {

767 
	`u´v_¡rıy
(
keywÜds
+
keywÜdsL’
, 
keywÜdLi¡
[
i
].
keywÜd
);

768 if(
v®uesToo
) {

769 
keywÜds
[
keywÜdsL’
 + 
keywÜdLi¡
[
i
].
keywÜdL’
] = '=';

771 
keywÜds
[
keywÜdsL’
 + 
keywÜdLi¡
[
i
].
keywÜdL’
] = 0;

774 
keywÜdsL’
 +ğ
keywÜdLi¡
[
i
].
keywÜdL’
 + 1;

775 if(
v®uesToo
) {

776 if(
keywÜdsL’
 + 
keywÜdLi¡
[
i
].
v®ueL’
 < 
keywÜdC­ac™y
) {

777 
	`u´v_¡ºıy
(
keywÜds
+
keywÜdsL’
, 
keywÜdLi¡
[
i
].
v®ueS¹
, keywÜdLi¡[i].
v®ueL’
);

779 
keywÜdsL’
 +ğ
keywÜdLi¡
[
i
].
v®ueL’
;

781 if(
i
 < 
numKeywÜds
 - 1) {

782 if(
keywÜdsL’
 < 
keywÜdC­ac™y
) {

783 
keywÜds
[
keywÜdsL’
] = ';';

785 
keywÜdsL’
++;

788 if(
v®ues
) {

789 if(
v®uesL’
 + 
keywÜdLi¡
[
i
].
v®ueL’
 + 1< 
v®uesC­ac™y
) {

790 
	`u´v_¡rıy
(
v®ues
+
v®uesL’
, 
keywÜdLi¡
[
i
].
v®ueS¹
);

791 
v®ues
[
v®uesL’
 + 
keywÜdLi¡
[
i
].
v®ueL’
] = 0;

793 
v®uesL’
 +ğ
keywÜdLi¡
[
i
].
v®ueL’
 + 1;

796 if(
v®ues
) {

797 
v®ues
[
v®uesL’
] = 0;

798 if(
v®L’
) {

799 *
v®L’
 = 
v®uesL’
;

802  
	`u_‹rmš©eCh¬s
(
keywÜds
, 
keywÜdC­ac™y
, 
keywÜdsL’
, 
¡©us
);

806 
	}
}

808 
U_CFUNC
 
št32_t


809 
	$loÿË_g‘KeywÜds
(cÚ¡ *
loÿËID
,

810 
´ev
,

811 *
keywÜds
, 
št32_t
 
keywÜdC­ac™y
,

812 *
v®ues
, 
št32_t
 
v®uesC­ac™y
, iÁ32_ˆ*
v®L’
,

813 
UBoŞ
 
v®uesToo
,

814 
UE¼ÜCode
 *
¡©us
) {

815  
	`_g‘KeywÜds
(
loÿËID
, 
´ev
, 
keywÜds
, 
keywÜdC­ac™y
,

816 
v®ues
, 
v®uesC­ac™y
, 
v®L’
, 
v®uesToo
,

817 
NULL
, NULL, 
¡©us
);

818 
	}
}

820 
U_CAPI
 
št32_t
 
U_EXPORT2


821 
	$uloc_g‘KeywÜdV®ue
(cÚ¡ * 
loÿËID
,

822 cÚ¡ * 
keywÜdName
,

823 * 
bufãr
, 
št32_t
 
bufãrC­ac™y
,

824 
UE¼ÜCode
* 
¡©us
)

826 cÚ¡ * 
¡¬tS—rchH”e
 = 
NULL
;

827 cÚ¡ * 
ÃxtS•¬©Ü
 = 
NULL
;

828 
keywÜdNameBufãr
[
ULOC_KEYWORD_BUFFER_LEN
];

829 
loÿËKeywÜdNameBufãr
[
ULOC_KEYWORD_BUFFER_LEN
];

830 
št32_t
 
i
 = 0;

831 
št32_t
 
»suÉ
 = 0;

833 if(
¡©us
 && 
	`U_SUCCESS
(*¡©usè&& 
loÿËID
) {

834 
‹mpBufãr
[
ULOC_FULLNAME_CAPACITY
];

835 cÚ¡ * 
tmpLoÿËID
;

837 ià(
	`_hasBCP47Ex‹nsiÚ
(
loÿËID
)) {

838 
	`_CÚv”tBCP47
(
tmpLoÿËID
, 
loÿËID
, 
‹mpBufãr
, ÑempBufãr), 
¡©us
);

840 
tmpLoÿËID
=
loÿËID
;

843 
¡¬tS—rchH”e
 = 
	`u´v_¡rchr
(
tmpLoÿËID
, '@');

844 if(
¡¬tS—rchH”e
 =ğ
NULL
) {

849 
	`loÿË_ÿnÚKeywÜdName
(
keywÜdNameBufãr
, 
keywÜdName
, 
¡©us
);

850 if(
	`U_FAILURE
(*
¡©us
)) {

855 
¡¬tS—rchH”e
) {

856 
¡¬tS—rchH”e
++;

858 *
¡¬tS—rchH”e
 == ' ') {

859 
¡¬tS—rchH”e
++;

861 
ÃxtS•¬©Ü
 = 
	`u´v_¡rchr
(
¡¬tS—rchH”e
, '=');

863 if(!
ÃxtS•¬©Ü
) {

866 if(
ÃxtS•¬©Ü
 - 
¡¬tS—rchH”e
 >ğ
ULOC_KEYWORD_BUFFER_LEN
) {

868 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

871 
i
 = 0; i < 
ÃxtS•¬©Ü
 - 
¡¬tS—rchH”e
; i++) {

872 
loÿËKeywÜdNameBufãr
[
i
] = 
	`u´v_tŞow”
(
¡¬tS—rchH”e
[i]);

875 
¡¬tS—rchH”e
[
i
-1] == ' ') {

876 
i
--;

878 
loÿËKeywÜdNameBufãr
[
i
] = 0;

880 
¡¬tS—rchH”e
 = 
	`u´v_¡rchr
(
ÃxtS•¬©Ü
, ';');

882 if(
	`u´v_¡rcmp
(
keywÜdNameBufãr
, 
loÿËKeywÜdNameBufãr
) == 0) {

883 
ÃxtS•¬©Ü
++;

884 *
ÃxtS•¬©Ü
 == ' ') {

885 
ÃxtS•¬©Ü
++;

888 if(
¡¬tS—rchH”e
 && s¹S—rchH”- 
ÃxtS•¬©Ü
 < 
bufãrC­ac™y
) {

889 *(
¡¬tS—rchH”e
-1) == ' ') {

890 
¡¬tS—rchH”e
--;

892 
	`u´v_¡ºıy
(
bufãr
, 
ÃxtS•¬©Ü
, 
¡¬tS—rchH”e
 -‚extSeparator);

893 
»suÉ
 = 
	`u_‹rmš©eCh¬s
(
bufãr
, 
bufãrC­ac™y
, (
št32_t
)(
¡¬tS—rchH”e
 - 
ÃxtS•¬©Ü
), 
¡©us
);

894 } if(!
¡¬tS—rchH”e
 && (
št32_t
)
	`u´v_¡¾’
(
ÃxtS•¬©Ü
è< 
bufãrC­ac™y
) {

895 
i
 = (
št32_t
)
	`u´v_¡¾’
(
ÃxtS•¬©Ü
);

896 
ÃxtS•¬©Ü
[
i
 - 1] == ' ') {

897 
i
--;

899 
	`u´v_¡ºıy
(
bufãr
, 
ÃxtS•¬©Ü
, 
i
);

900 
»suÉ
 = 
	`u_‹rmš©eCh¬s
(
bufãr
, 
bufãrC­ac™y
, 
i
, 
¡©us
);

903 *
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

904 if(
¡¬tS—rchH”e
) {

905 
»suÉ
 = (
št32_t
)(
¡¬tS—rchH”e
 - 
ÃxtS•¬©Ü
);

907 
»suÉ
 = (
št32_t
)
	`u´v_¡¾’
(
ÃxtS•¬©Ü
);

910  
»suÉ
;

915 
	}
}

917 
U_CAPI
 
št32_t
 
U_EXPORT2


918 
	$uloc_£tKeywÜdV®ue
(cÚ¡ * 
keywÜdName
,

919 cÚ¡ * 
keywÜdV®ue
,

920 * 
bufãr
, 
št32_t
 
bufãrC­ac™y
,

921 
UE¼ÜCode
* 
¡©us
)

924 
št32_t
 
keywÜdNameL’
;

925 
št32_t
 
keywÜdV®ueL’
;

926 
št32_t
 
bufL’
;

927 
št32_t
 
ÃedL’
 = 0;

928 
št32_t
 
foundV®ueL’
;

929 
št32_t
 
keywÜdAtEnd
 = 0;

930 
keywÜdNameBufãr
[
ULOC_KEYWORD_BUFFER_LEN
];

931 
loÿËKeywÜdNameBufãr
[
ULOC_KEYWORD_BUFFER_LEN
];

932 
št32_t
 
i
 = 0;

933 
št32_t
 
rc
;

934 * 
ÃxtS•¬©Ü
 = 
NULL
;

935 * 
ÃxtEqu®sign
 = 
NULL
;

936 * 
¡¬tS—rchH”e
 = 
NULL
;

937 * 
keywÜdS¹
 = 
NULL
;

938 *
š£¹H”e
 = 
NULL
;

939 if(
	`U_FAILURE
(*
¡©us
)) {

942 if(
bufãrC­ac™y
>1) {

943 
bufL’
 = (
št32_t
)
	`u´v_¡¾’
(
bufãr
);

945 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

948 if(
bufãrC­ac™y
<
bufL’
) {

950 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

953 if(
keywÜdV®ue
 && !*keywordValue) {

954 
keywÜdV®ue
 = 
NULL
;

956 if(
keywÜdV®ue
) {

957 
keywÜdV®ueL’
 = (
št32_t
)
	`u´v_¡¾’
(
keywÜdV®ue
);

959 
keywÜdV®ueL’
 = 0;

961 
keywÜdNameL’
 = 
	`loÿË_ÿnÚKeywÜdName
(
keywÜdNameBufãr
, 
keywÜdName
, 
¡©us
);

962 if(
	`U_FAILURE
(*
¡©us
)) {

965 
¡¬tS—rchH”e
 = (*)
	`loÿË_g‘KeywÜdsS¹
(
bufãr
);

966 if(
¡¬tS—rchH”e
 =ğ
NULL
 || (startSearchHere[1]==0)) {

967 if(!
keywÜdV®ue
) {

968  
bufL’
;

971 
ÃedL’
 = 
bufL’
+1+
keywÜdNameL’
+1+
keywÜdV®ueL’
;

972 if(
¡¬tS—rchH”e
) {

973 
ÃedL’
--;

976 
¡¬tS—rchH”e
=
bufãr
+
bufL’
;

978 if(
ÃedL’
 >ğ
bufãrC­ac™y
) {

979 *
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

980  
ÃedL’
;

982 *
¡¬tS—rchH”e
 = '@';

983 
¡¬tS—rchH”e
++;

984 
	`u´v_¡rıy
(
¡¬tS—rchH”e
, 
keywÜdNameBufãr
);

985 
¡¬tS—rchH”e
 +ğ
keywÜdNameL’
;

986 *
¡¬tS—rchH”e
 = '=';

987 
¡¬tS—rchH”e
++;

988 
	`u´v_¡rıy
(
¡¬tS—rchH”e
, 
keywÜdV®ue
);

989 
¡¬tS—rchH”e
+=
keywÜdV®ueL’
;

990  
ÃedL’
;

993 
keywÜdS¹
 = 
¡¬tS—rchH”e
;

995 
keywÜdS¹
) {

996 
keywÜdS¹
++;

998 *
keywÜdS¹
 == ' ') {

999 
keywÜdS¹
++;

1001 
ÃxtEqu®sign
 = 
	`u´v_¡rchr
(
keywÜdS¹
, '=');

1003 if(!
ÃxtEqu®sign
) {

1006 if(
ÃxtEqu®sign
 - 
keywÜdS¹
 >ğ
ULOC_KEYWORD_BUFFER_LEN
) {

1008 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

1011 
i
 = 0; i < 
ÃxtEqu®sign
 - 
keywÜdS¹
; i++) {

1012 
loÿËKeywÜdNameBufãr
[
i
] = 
	`u´v_tŞow”
(
keywÜdS¹
[i]);

1015 
keywÜdS¹
[
i
-1] == ' ') {

1016 
i
--;

1018 
loÿËKeywÜdNameBufãr
[
i
] = 0;

1020 
ÃxtS•¬©Ü
 = 
	`u´v_¡rchr
(
ÃxtEqu®sign
, ';');

1021 
rc
 = 
	`u´v_¡rcmp
(
keywÜdNameBufãr
, 
loÿËKeywÜdNameBufãr
);

1022 if(
rc
 == 0) {

1023 
ÃxtEqu®sign
++;

1024 *
ÃxtEqu®sign
 == ' ') {

1025 
ÃxtEqu®sign
++;

1028 ià(
ÃxtS•¬©Ü
) {

1029 
keywÜdAtEnd
 = 0;

1030 
foundV®ueL’
 = (
št32_t
)(
ÃxtS•¬©Ü
 - 
ÃxtEqu®sign
);

1032 
keywÜdAtEnd
 = 1;

1033 
foundV®ueL’
 = (
št32_t
)
	`u´v_¡¾’
(
ÃxtEqu®sign
);

1035 if(
keywÜdV®ue
) {

1036 if(
foundV®ueL’
 =ğ
keywÜdV®ueL’
) {

1037 
	`u´v_¡ºıy
(
ÃxtEqu®sign
, 
keywÜdV®ue
, 
keywÜdV®ueL’
);

1038  
bufL’
;

1039 } if(
foundV®ueL’
 > 
keywÜdV®ueL’
) {

1040 
št32_t
 
d–
 = 
foundV®ueL’
 - 
keywÜdV®ueL’
;

1041 if(
ÃxtS•¬©Ü
) {

1042 
	`u´v_memmove
(
ÃxtS•¬©Ü
 - 
d–
,‚extS•¬©Ü, 
bufL’
-ÒextS•¬©Ü-
bufãr
));

1044 
	`u´v_¡ºıy
(
ÃxtEqu®sign
, 
keywÜdV®ue
, 
keywÜdV®ueL’
);

1045 
bufL’
 -ğ
d–
;

1046 
bufãr
[
bufL’
]=0;

1047  
bufL’
;

1049 
št32_t
 
d–
 = 
keywÜdV®ueL’
 - 
foundV®ueL’
;

1050 if((
bufL’
+
d–
è>ğ
bufãrC­ac™y
) {

1051 *
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

1052  
bufL’
+
d–
;

1054 if(
ÃxtS•¬©Ü
) {

1055 
	`u´v_memmove
(
ÃxtS•¬©Ü
+
d–
,ÃxtS•¬©Ü, 
bufL’
-ÒextS•¬©Ü-
bufãr
));

1057 
	`u´v_¡ºıy
(
ÃxtEqu®sign
, 
keywÜdV®ue
, 
keywÜdV®ueL’
);

1058 
bufL’
 +ğ
d–
;

1059 
bufãr
[
bufL’
]=0;

1060  
bufL’
;

1063 if(
keywÜdAtEnd
) {

1065 
keywÜdS¹
[-1] = 0;

1066  (
št32_t
)((
keywÜdS¹
-
bufãr
)-1);

1068 
	`u´v_memmove
(
keywÜdS¹
, 
ÃxtS•¬©Ü
+1, 
bufL’
-(ÒextS•¬©Ü+1)-
bufãr
));

1069 
keywÜdS¹
[
bufL’
-((
ÃxtS•¬©Ü
+1)-
bufãr
)]=0;

1070  (
št32_t
)(
bufL’
-((
ÃxtS•¬©Ü
+1)-
keywÜdS¹
));

1073 } if(
rc
<0){

1075 
š£¹H”e
 = 
keywÜdS¹
;

1077 
keywÜdS¹
 = 
ÃxtS•¬©Ü
;

1080 if(!
keywÜdV®ue
) {

1081  
bufL’
;

1085 
ÃedL’
 = 
bufL’
+1+
keywÜdNameL’
+1+
keywÜdV®ueL’
;

1086 if(
ÃedL’
 >ğ
bufãrC­ac™y
) {

1087 *
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

1088  
ÃedL’
;

1091 if(
š£¹H”e
) {

1092 
	`u´v_memmove
(
š£¹H”e
+(1+
keywÜdNameL’
+1+
keywÜdV®ueL’
), in£¹H”e, 
bufL’
-(š£¹H”e-
bufãr
));

1093 
keywÜdS¹
 = 
š£¹H”e
;

1095 
keywÜdS¹
 = 
bufãr
+
bufL’
;

1096 *
keywÜdS¹
 = ';';

1097 
keywÜdS¹
++;

1099 
	`u´v_¡ºıy
(
keywÜdS¹
, 
keywÜdNameBufãr
, 
keywÜdNameL’
);

1100 
keywÜdS¹
 +ğ
keywÜdNameL’
;

1101 *
keywÜdS¹
 = '=';

1102 
keywÜdS¹
++;

1103 
	`u´v_¡ºıy
(
keywÜdS¹
, 
keywÜdV®ue
, 
keywÜdV®ueL’
);

1104 
keywÜdS¹
+=
keywÜdV®ueL’
;

1105 if(
š£¹H”e
) {

1106 *
keywÜdS¹
 = ';';

1107 
keywÜdS¹
++;

1109 
bufãr
[
ÃedL’
]=0;

1110  
ÃedL’
;

1111 
	}
}

1115 
	#_isP»fixL‘‹r
(
a
è(×=='x')||×=='X')||×=='i')||×=='I'))

	)

1119 
	#_isIDP»fix
(
s
è(
	`_isP»fixL‘‹r
(s[0])&&
	`_isIDS•¬©Ü
(s[1]))

	)

1124 
	#_isT”mš©Ü
(
a
è(×==0)||×=='.')||×=='@'))

	)

1126 * 
	$_¡ºchr
(cÚ¡ * 
¡r
, 
št32_t
 
Ën
, 
c
) {

1127 
	`U_ASSERT
(
¡r
 !ğ0 && 
Ën
 >= 0);

1128 
Ën
-- != 0) {

1129 
d
 = *
¡r
;

1130 ià(
d
 =ğ
c
) {

1131  (*è
¡r
;

1132 } ià(
d
 == 0) {

1135 ++
¡r
;

1137  
NULL
;

1138 
	}
}

1147 
št16_t
 
	$_fšdIndex
(cÚ¡ * cÚ¡* 
li¡
, cÚ¡ * 
key
)

1149 cÚ¡ * cÚ¡* 
ªchÜ
 = 
li¡
;

1150 
št32_t
 
·ss
 = 0;

1153 
·ss
++ < 2) {

1154 *
li¡
) {

1155 ià(
	`u´v_¡rcmp
(
key
, *
li¡
) == 0) {

1156  (
št16_t
)(
li¡
 - 
ªchÜ
);

1158 
li¡
++;

1160 ++
li¡
;

1163 
	}
}

1166 
U_INLINE
 
št32_t


1167 
	$_cİyCouÁ
(*
de¡
, 
št32_t
 
de¡C­ac™y
, cÚ¡ *
¤c
) {

1168 cÚ¡ *
ªchÜ
;

1169 
c
;

1171 
ªchÜ
=
¤c
;

1173 if((
c
=*
¤c
)==0) {

1174  (
št32_t
)(
¤c
-
ªchÜ
);

1176 if(
de¡C­ac™y
<=0) {

1177  (
št32_t
)((
¤c
-
ªchÜ
)+
	`u´v_¡¾’
(src));

1179 ++
¤c
;

1180 *
de¡
++=
c
;

1181 --
de¡C­ac™y
;

1183 
	}
}

1185 
U_CFUNC
 const *

1186 
	$uloc_g‘Cu¼’tCouÁryID
(cÚ¡ * 
ŞdID
){

1187 
št32_t
 
off£t
 = 
	`_fšdIndex
(
DEPRECATED_COUNTRIES
, 
ŞdID
);

1188 ià(
off£t
 >= 0) {

1189  
REPLACEMENT_COUNTRIES
[
off£t
];

1191  
ŞdID
;

1192 
	}
}

1193 
U_CFUNC
 const *

1194 
	$uloc_g‘Cu¼’tLªguageID
(cÚ¡ * 
ŞdID
){

1195 
št32_t
 
off£t
 = 
	`_fšdIndex
(
DEPRECATED_LANGUAGES
, 
ŞdID
);

1196 ià(
off£t
 >= 0) {

1197  
REPLACEMENT_LANGUAGES
[
off£t
];

1199  
ŞdID
;

1200 
	}
}

1209 
U_CFUNC
 
št32_t


1210 
	$ulocimp_g‘Lªguage
(cÚ¡ *
loÿËID
,

1211 *
Ïnguage
, 
št32_t
 
ÏnguageC­ac™y
,

1212 cÚ¡ **
pEnd
) {

1213 
št32_t
 
i
=0;

1214 
št32_t
 
off£t
;

1215 
Ïng
[4]={ 0, 0, 0, 0 };

1218 if(
	`_isIDP»fix
(
loÿËID
)) {

1219 if(
i
<
ÏnguageC­ac™y
) {

1220 
Ïnguage
[
i
]=()
	`u´v_tŞow”
(*
loÿËID
);

1222 if(
i
<
ÏnguageC­ac™y
) {

1223 
Ïnguage
[
i
+1]='-';

1225 
i
+=2;

1226 
loÿËID
+=2;

1230 !
	`_isT”mš©Ü
(*
loÿËID
è&& !
	`_isIDS•¬©Ü
(*localeID)) {

1231 if(
i
<
ÏnguageC­ac™y
) {

1232 
Ïnguage
[
i
]=()
	`u´v_tŞow”
(*
loÿËID
);

1234 if(
i
<3) {

1235 
Ïng
[
i
]=()
	`u´v_tŞow”
(*
loÿËID
);

1237 
i
++;

1238 
loÿËID
++;

1241 if(
i
==3) {

1243 
off£t
=
	`_fšdIndex
(
LANGUAGES_3
, 
Ïng
);

1244 if(
off£t
>=0) {

1245 
i
=
	`_cİyCouÁ
(
Ïnguage
, 
ÏnguageC­ac™y
, 
LANGUAGES
[
off£t
]);

1249 if(
pEnd
!=
NULL
) {

1250 *
pEnd
=
loÿËID
;

1252  
i
;

1253 
	}
}

1255 
U_CFUNC
 
št32_t


1256 
	$ulocimp_g‘Süt
(cÚ¡ *
loÿËID
,

1257 *
süt
, 
št32_t
 
sütC­ac™y
,

1258 cÚ¡ **
pEnd
)

1260 
št32_t
 
idL’
 = 0;

1262 ià(
pEnd
 !ğ
NULL
) {

1263 *
pEnd
 = 
loÿËID
;

1267 !
	`_isT”mš©Ü
(
loÿËID
[
idL’
]è&& !
	`_isIDS•¬©Ü
(localeID[idLen])) {

1268 
idL’
++;

1272 ià(
idL’
 == 4) {

1273 
št32_t
 
i
;

1274 ià(
pEnd
 !ğ
NULL
) {

1275 *
pEnd
 = 
loÿËID
+
idL’
;

1277 if(
idL’
 > 
sütC­ac™y
) {

1278 
idL’
 = 
sütC­ac™y
;

1280 ià(
idL’
 >= 1) {

1281 
süt
[0]=()
	`u´v_touµ”
(*(
loÿËID
++));

1283 
i
 = 1; i < 
idL’
; i++) {

1284 
süt
[
i
]=()
	`u´v_tŞow”
(*(
loÿËID
++));

1288 
idL’
 = 0;

1290  
idL’
;

1291 
	}
}

1293 
U_CFUNC
 
št32_t


1294 
	$ulocimp_g‘CouÁry
(cÚ¡ *
loÿËID
,

1295 *
couÁry
, 
št32_t
 
couÁryC­ac™y
,

1296 cÚ¡ **
pEnd
)

1298 
št32_t
 
idL’
=0;

1299 
úty
[
ULOC_COUNTRY_CAPACITY
]={ 0, 0, 0, 0 };

1300 
št32_t
 
off£t
;

1303 !
	`_isT”mš©Ü
(
loÿËID
[
idL’
]è&& !
	`_isIDS•¬©Ü
(localeID[idLen])) {

1304 if(
idL’
<(
ULOC_COUNTRY_CAPACITY
-1)) {

1305 
úty
[
idL’
]=()
	`u´v_touµ”
(
loÿËID
[idLen]);

1307 
idL’
++;

1311 ià(
idL’
 == 2 || idLen == 3) {

1312 
UBoŞ
 
gÙCouÁry
 = 
FALSE
;

1314 if(
idL’
==3) {

1315 
off£t
=
	`_fšdIndex
(
COUNTRIES_3
, 
úty
);

1316 if(
off£t
>=0) {

1317 
idL’
=
	`_cİyCouÁ
(
couÁry
, 
couÁryC­ac™y
, 
COUNTRIES
[
off£t
]);

1318 
gÙCouÁry
 = 
TRUE
;

1321 ià(!
gÙCouÁry
) {

1322 
št32_t
 
i
 = 0;

1323 
i
 = 0; i < 
idL’
; i++) {

1324 ià(
i
 < 
couÁryC­ac™y
) {

1325 
couÁry
[
i
]=()
	`u´v_touµ”
(
loÿËID
[i]);

1329 
loÿËID
+=
idL’
;

1331 
idL’
 = 0;

1334 if(
pEnd
!=
NULL
) {

1335 *
pEnd
=
loÿËID
;

1338  
idL’
;

1339 
	}
}

1345 
št32_t


1346 
	$_g‘V¬ŸÁEx
(cÚ¡ *
loÿËID
,

1347 
´ev
,

1348 *
v¬ŸÁ
, 
št32_t
 
v¬ŸÁC­ac™y
,

1349 
UBoŞ
 
ÃedS•¬©Ü
) {

1350 
št32_t
 
i
=0;

1353 if(
	`_isIDS•¬©Ü
(
´ev
)) {

1355 !
	`_isT”mš©Ü
(*
loÿËID
)) {

1356 ià(
ÃedS•¬©Ü
) {

1357 ià(
i
<
v¬ŸÁC­ac™y
) {

1358 
v¬ŸÁ
[
i
] = '_';

1360 ++
i
;

1361 
ÃedS•¬©Ü
 = 
FALSE
;

1363 if(
i
<
v¬ŸÁC­ac™y
) {

1364 
v¬ŸÁ
[
i
]=()
	`u´v_touµ”
(*
loÿËID
);

1365 if(
v¬ŸÁ
[
i
]=='-') {

1366 
v¬ŸÁ
[
i
]='_';

1369 
i
++;

1370 
loÿËID
++;

1375 if(
i
==0) {

1376 if(
´ev
=='@') {

1378 } if((
loÿËID
=
	`loÿË_g‘KeywÜdsS¹
ÖoÿËID))!=
NULL
) {

1379 ++
loÿËID
;

1383 !
	`_isT”mš©Ü
(*
loÿËID
)) {

1384 ià(
ÃedS•¬©Ü
) {

1385 ià(
i
<
v¬ŸÁC­ac™y
) {

1386 
v¬ŸÁ
[
i
] = '_';

1388 ++
i
;

1389 
ÃedS•¬©Ü
 = 
FALSE
;

1391 if(
i
<
v¬ŸÁC­ac™y
) {

1392 
v¬ŸÁ
[
i
]=()
	`u´v_touµ”
(*
loÿËID
);

1393 if(
v¬ŸÁ
[
i
]=='-' || variant[i]==',') {

1394 
v¬ŸÁ
[
i
]='_';

1397 
i
++;

1398 
loÿËID
++;

1402  
i
;

1403 
	}
}

1405 
št32_t


1406 
	$_g‘V¬ŸÁ
(cÚ¡ *
loÿËID
,

1407 
´ev
,

1408 *
v¬ŸÁ
, 
št32_t
 
v¬ŸÁC­ac™y
) {

1409  
	`_g‘V¬ŸÁEx
(
loÿËID
, 
´ev
, 
v¬ŸÁ
, 
v¬ŸÁC­ac™y
, 
FALSE
);

1410 
	}
}

1424 
št32_t


1425 
	$_d–‘eV¬ŸÁ
(* 
v¬ŸÁs
, 
št32_t
 
v¬ŸÁsL’
,

1426 cÚ¡ * 
toD–‘e
, 
št32_t
 
toD–‘eL’
)

1428 
št32_t
 
d–
 = 0;

1430 
UBoŞ
 
æag
 = 
FALSE
;

1431 ià(
v¬ŸÁsL’
 < 
toD–‘eL’
) {

1432  
d–
;

1434 ià(
	`u´v_¡ºcmp
(
v¬ŸÁs
, 
toD–‘e
, 
toD–‘eL’
) == 0 &&

1435 (
v¬ŸÁsL’
 =ğ
toD–‘eL’
 ||

1436 (
æag
=(
v¬ŸÁs
[
toD–‘eL’
] == '_'))))

1438 
št32_t
 
d
 = 
toD–‘eL’
 + (
æag
?1:0);

1439 
v¬ŸÁsL’
 -ğ
d
;

1440 
d–
 +ğ
d
;

1441 ià(
v¬ŸÁsL’
 > 0) {

1442 
	`u´v_memmove
(
v¬ŸÁs
, v¬ŸÁs+
d
, 
v¬ŸÁsL’
);

1445 * 
p
 = 
	`_¡ºchr
(
v¬ŸÁs
, 
v¬ŸÁsL’
, '_');

1446 ià(
p
 =ğ
NULL
) {

1447  
d–
;

1449 ++
p
;

1450 
v¬ŸÁsL’
 -ğ(
št32_t
)(
p
 - 
v¬ŸÁs
);

1451 
v¬ŸÁs
 = 
p
;

1454 
	}
}

1458 
	sUKeywÜdsCÚ‹xt
 {

1459 * 
	mkeywÜds
;

1460 * 
	mcu¼’t
;

1461 } 
	tUKeywÜdsCÚ‹xt
;

1463 
U_CALLCONV


1464 
	$uloc_kw_şo£KeywÜds
(
UEnum”©iÚ
 *
’um”©Ü
) {

1465 
	`u´v_ä“
(((
UKeywÜdsCÚ‹xt
 *)
’um”©Ü
->
cÚ‹xt
)->
keywÜds
);

1466 
	`u´v_ä“
(
’um”©Ü
->
cÚ‹xt
);

1467 
	`u´v_ä“
(
’um”©Ü
);

1468 
	}
}

1470 
št32_t
 
U_CALLCONV


1471 
	$uloc_kw_couÁKeywÜds
(
UEnum”©iÚ
 *
’
, 
UE¼ÜCode
 *
¡©us
) {

1472 *
kw
 = ((
UKeywÜdsCÚ‹xt
 *)
’
->
cÚ‹xt
)->
keywÜds
;

1473 
št32_t
 
»suÉ
 = 0;

1474 *
kw
) {

1475 
»suÉ
++;

1476 
kw
 +ğ
	`u´v_¡¾’
(kw)+1;

1478  
»suÉ
;

1479 
	}
}

1481 cÚ¡ * 
U_CALLCONV


1482 
	$uloc_kw_ÃxtKeywÜd
(
UEnum”©iÚ
* 
’
,

1483 
št32_t
* 
»suÉL’gth
,

1484 
UE¼ÜCode
* 
¡©us
) {

1485 cÚ¡ * 
»suÉ
 = ((
UKeywÜdsCÚ‹xt
 *)
’
->
cÚ‹xt
)->
cu¼’t
;

1486 
št32_t
 
Ën
 = 0;

1487 if(*
»suÉ
) {

1488 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(((
UKeywÜdsCÚ‹xt
 *)
’
->
cÚ‹xt
)->
cu¼’t
);

1489 ((
UKeywÜdsCÚ‹xt
 *)
’
->
cÚ‹xt
)->
cu¼’t
 +ğ
Ën
+1;

1491 
»suÉ
 = 
NULL
;

1493 ià(
»suÉL’gth
) {

1494 *
»suÉL’gth
 = 
Ën
;

1496  
»suÉ
;

1497 
	}
}

1499 
U_CALLCONV


1500 
	$uloc_kw_»£tKeywÜds
(
UEnum”©iÚ
* 
’
,

1501 
UE¼ÜCode
* 
¡©us
) {

1502 ((
UKeywÜdsCÚ‹xt
 *)
’
->
cÚ‹xt
)->
cu¼’t
 = ((UKeywÜdsCÚ‹xˆ*ën->cÚ‹xt)->
keywÜds
;

1503 
	}
}

1505 cÚ¡ 
UEnum”©iÚ
 
	ggKeywÜdsEnum
 = {

1506 
NULL
,

1507 
NULL
,

1508 
uloc_kw_şo£KeywÜds
,

1509 
uloc_kw_couÁKeywÜds
,

1510 
u’um_uÃxtDeçuÉ
,

1511 
uloc_kw_ÃxtKeywÜd
,

1512 
uloc_kw_»£tKeywÜds


1515 
U_CAPI
 
UEnum”©iÚ
* 
U_EXPORT2


1516 
	$uloc_İ’KeywÜdLi¡
(cÚ¡ *
keywÜdLi¡
, 
št32_t
 
keywÜdLi¡Size
, 
UE¼ÜCode
* 
¡©us
)

1518 
UKeywÜdsCÚ‹xt
 *
myCÚ‹xt
 = 
NULL
;

1519 
UEnum”©iÚ
 *
»suÉ
 = 
NULL
;

1521 if(
	`U_FAILURE
(*
¡©us
)) {

1522  
NULL
;

1524 
»suÉ
 = (
UEnum”©iÚ
 *)
	`u´v_m®loc
((UEnumeration));

1526 ià(
»suÉ
 =ğ
NULL
) {

1527 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1528  
NULL
;

1530 
	`u´v_memıy
(
»suÉ
, &
gKeywÜdsEnum
, (
UEnum”©iÚ
));

1531 
myCÚ‹xt
 = 
	`u´v_m®loc
((
UKeywÜdsCÚ‹xt
));

1532 ià(
myCÚ‹xt
 =ğ
NULL
) {

1533 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1534 
	`u´v_ä“
(
»suÉ
);

1535  
NULL
;

1537 
myCÚ‹xt
->
keywÜds
 = (*)
	`u´v_m®loc
(
keywÜdLi¡Size
+1);

1538 
	`u´v_memıy
(
myCÚ‹xt
->
keywÜds
, 
keywÜdLi¡
, 
keywÜdLi¡Size
);

1539 
myCÚ‹xt
->
keywÜds
[
keywÜdLi¡Size
] = 0;

1540 
myCÚ‹xt
->
cu¼’t
 = myCÚ‹xt->
keywÜds
;

1541 
»suÉ
->
cÚ‹xt
 = 
myCÚ‹xt
;

1542  
»suÉ
;

1543 
	}
}

1545 
U_CAPI
 
UEnum”©iÚ
* 
U_EXPORT2


1546 
	$uloc_İ’KeywÜds
(cÚ¡ * 
loÿËID
,

1547 
UE¼ÜCode
* 
¡©us
)

1549 
št32_t
 
i
=0;

1550 
keywÜds
[256];

1551 
št32_t
 
keywÜdsC­ac™y
 = 256;

1552 
‹mpBufãr
[
ULOC_FULLNAME_CAPACITY
];

1553 cÚ¡ * 
tmpLoÿËID
;

1555 if(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1559 ià(
	`_hasBCP47Ex‹nsiÚ
(
loÿËID
)) {

1560 
	`_CÚv”tBCP47
(
tmpLoÿËID
, 
loÿËID
, 
‹mpBufãr
, ÑempBufãr), 
¡©us
);

1562 ià(
loÿËID
==
NULL
) {

1563 
loÿËID
=
	`uloc_g‘DeçuÉ
();

1565 
tmpLoÿËID
=
loÿËID
;

1569 
	`ulocimp_g‘Lªguage
(
tmpLoÿËID
, 
NULL
, 0, &tmpLocaleID);

1570 if(
	`_isIDS•¬©Ü
(*
tmpLoÿËID
)) {

1571 cÚ¡ *
sütID
;

1573 
	`ulocimp_g‘Süt
(
tmpLoÿËID
+1, 
NULL
, 0, &
sütID
);

1574 if(
sütID
 !ğ
tmpLoÿËID
+1) {

1576 
tmpLoÿËID
 = 
sütID
;

1579 ià(
	`_isIDS•¬©Ü
(*
tmpLoÿËID
)) {

1580 
	`ulocimp_g‘CouÁry
(
tmpLoÿËID
+1, 
NULL
, 0, &tmpLocaleID);

1581 if(
	`_isIDS•¬©Ü
(*
tmpLoÿËID
)) {

1582 
	`_g‘V¬ŸÁ
(
tmpLoÿËID
+1, *tmpLoÿËID, 
NULL
, 0);

1588 if((
tmpLoÿËID
 = 
	`loÿË_g‘KeywÜdsS¹
ÑmpLoÿËID)è!ğ
NULL
) {

1589 
i
=
	`loÿË_g‘KeywÜds
(
tmpLoÿËID
+1, '@', 
keywÜds
, 
keywÜdsC­ac™y
, 
NULL
, 0, NULL, 
FALSE
, 
¡©us
);

1592 if(
i
) {

1593  
	`uloc_İ’KeywÜdLi¡
(
keywÜds
, 
i
, 
¡©us
);

1595  
NULL
;

1597 
	}
}

1601 
	#_ULOC_STRIP_KEYWORDS
 0x2

	)

1602 
	#_ULOC_CANONICALIZE
 0x1

	)

1604 
	#OPTION_SET
(
İtiÚs
, 
mask
è((İtiÚ & maskè!ğ0)

	)

1606 cÚ¡ 
	gi_deçuÉ
[] = {'i', '-', 'd', 'e', 'f', 'a', 'u', 'l', 't'};

1607 
	#I_DEFAULT_LENGTH
 ( 
i_deçuÉ
 /  i_deçuÉ[0])

	)

1616 
št32_t


1617 
	$_ÿnÚiÿlize
(cÚ¡ * 
loÿËID
,

1618 * 
»suÉ
,

1619 
št32_t
 
»suÉC­ac™y
,

1620 
ušt32_t
 
İtiÚs
,

1621 
UE¼ÜCode
* 
”r
) {

1622 
št32_t
 
j
, 
Ën
, 
f›ldCouÁ
=0, 
sütSize
=0, 
v¬ŸÁSize
=0, 
ÇmeC­ac™y
;

1623 
loÿËBufãr
[
ULOC_FULLNAME_CAPACITY
];

1624 
‹mpBufãr
[
ULOC_FULLNAME_CAPACITY
];

1625 cÚ¡ * 
ÜigLoÿËID
;

1626 cÚ¡ * 
tmpLoÿËID
;

1627 cÚ¡ * 
keywÜdAssign
 = 
NULL
;

1628 cÚ¡ * 
£·¿tÜIndiÿtÜ
 = 
NULL
;

1629 cÚ¡ * 
addKeywÜd
 = 
NULL
;

1630 cÚ¡ * 
addV®ue
 = 
NULL
;

1631 * 
Çme
;

1632 * 
v¬ŸÁ
 = 
NULL
;

1634 ià(
	`U_FAILURE
(*
”r
)) {

1638 ià(
	`_hasBCP47Ex‹nsiÚ
(
loÿËID
)) {

1639 
	`_CÚv”tBCP47
(
tmpLoÿËID
, 
loÿËID
, 
‹mpBufãr
, ÑempBufãr), 
”r
);

1641 ià(
loÿËID
==
NULL
) {

1642 
loÿËID
=
	`uloc_g‘DeçuÉ
();

1644 
tmpLoÿËID
=
loÿËID
;

1647 
ÜigLoÿËID
=
tmpLoÿËID
;

1652 (
»suÉ
 =ğ
NULL
 || 
»suÉC­ac™y
 < (
loÿËBufãr
))) {

1653 
Çme
 = 
loÿËBufãr
;

1654 
ÇmeC­ac™y
 = (
loÿËBufãr
);

1656 
Çme
 = 
»suÉ
;

1657 
ÇmeC­ac™y
 = 
»suÉC­ac™y
;

1661 
Ën
=
	`ulocimp_g‘Lªguage
(
tmpLoÿËID
, 
Çme
, 
ÇmeC­ac™y
, &tmpLocaleID);

1663 if(
Ën
 =ğ
I_DEFAULT_LENGTH
 && 
	`u´v_¡ºcmp
(
ÜigLoÿËID
, 
i_deçuÉ
,†en) == 0) {

1664 cÚ¡ *
d
 = 
	`uloc_g‘DeçuÉ
();

1666 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
d
);

1668 ià(
Çme
 !ğ
NULL
) {

1669 
	`u´v_¡ºıy
(
Çme
, 
d
, 
Ën
);

1671 } if(
	`_isIDS•¬©Ü
(*
tmpLoÿËID
)) {

1672 cÚ¡ *
sütID
;

1674 ++
f›ldCouÁ
;

1675 if(
Ën
<
ÇmeC­ac™y
) {

1676 
Çme
[
Ën
]='_';

1678 ++
Ën
;

1680 
sütSize
=
	`ulocimp_g‘Süt
(
tmpLoÿËID
+1, 
Çme
+
Ën
, 
ÇmeC­ac™y
-Ën, &
sütID
);

1681 if(
sütSize
 > 0) {

1683 
tmpLoÿËID
 = 
sütID
;

1684 ++
f›ldCouÁ
;

1685 
Ën
+=
sütSize
;

1686 ià(
	`_isIDS•¬©Ü
(*
tmpLoÿËID
)) {

1688 if(
Ën
<
ÇmeC­ac™y
) {

1689 
Çme
[
Ën
]='_';

1691 ++
Ën
;

1695 ià(
	`_isIDS•¬©Ü
(*
tmpLoÿËID
)) {

1696 cÚ¡ *
úŒyID
;

1697 
št32_t
 
úŒySize
 = 
	`ulocimp_g‘CouÁry
(
tmpLoÿËID
+1, 
Çme
+
Ën
, 
ÇmeC­ac™y
-Ën, &
úŒyID
);

1698 ià(
úŒySize
 > 0) {

1700 
tmpLoÿËID
 = 
úŒyID
;

1701 
Ën
+=
úŒySize
;

1703 if(
	`_isIDS•¬©Ü
(*
tmpLoÿËID
)) {

1705 ià(
úŒySize
 > 0) {

1706 ++
f›ldCouÁ
;

1707 if(
Ën
<
ÇmeC­ac™y
) {

1708 
Çme
[
Ën
]='_';

1710 ++
Ën
;

1713 
v¬ŸÁSize
 = 
	`_g‘V¬ŸÁ
(
tmpLoÿËID
+1, *tmpLoÿËID, 
Çme
+
Ën
, 
ÇmeC­ac™y
-len);

1714 ià(
v¬ŸÁSize
 > 0) {

1715 
v¬ŸÁ
 = 
Çme
+
Ën
;

1716 
Ën
 +ğ
v¬ŸÁSize
;

1717 
tmpLoÿËID
 +ğ
v¬ŸÁSize
 + 1;

1724 ià(!
	`OPTION_SET
(
İtiÚs
, 
_ULOC_CANONICALIZE
è&& *
tmpLoÿËID
 == '.') {

1725 
UBoŞ
 
dÚe
 = 
FALSE
;

1727 
c
 = *
tmpLoÿËID
;

1728 
c
) {

1731 
dÚe
 = 
TRUE
;

1734 ià(
Ën
<
ÇmeC­ac™y
) {

1735 
Çme
[
Ën
] = 
c
;

1737 ++
Ën
;

1738 ++
tmpLoÿËID
;

1741 } !
dÚe
);

1746 ià((
tmpLoÿËID
=
	`loÿË_g‘KeywÜdsS¹
ÑmpLoÿËID))!=
NULL
) {

1747 
keywÜdAssign
 = 
	`u´v_¡rchr
(
tmpLoÿËID
, '=');

1748 
£·¿tÜIndiÿtÜ
 = 
	`u´v_¡rchr
(
tmpLoÿËID
, ';');

1752 ià(!
	`OPTION_SET
(
İtiÚs
, 
_ULOC_CANONICALIZE
) &&

1753 
tmpLoÿËID
 !ğ
NULL
 && 
keywÜdAssign
 == NULL) {

1755 
c
 = *
tmpLoÿËID
;

1756 ià(
c
 == 0) {

1759 ià(
Ën
<
ÇmeC­ac™y
) {

1760 
Çme
[
Ën
] = 
c
;

1762 ++
Ën
;

1763 ++
tmpLoÿËID
;

1767 ià(
	`OPTION_SET
(
İtiÚs
, 
_ULOC_CANONICALIZE
)) {

1769 ià(
tmpLoÿËID
!=
NULL
 && 
keywÜdAssign
==NULL) {

1770 
št32_t
 
posixV¬ŸÁSize
;

1772 ià(
f›ldCouÁ
 < 2 || (f›ldCouÁ < 3 && 
sütSize
 > 0)) {

1774 if(
Ën
<
ÇmeC­ac™y
) {

1775 
Çme
[
Ën
]='_';

1777 ++
Ën
;

1778 ++
f›ldCouÁ
;

1779 } 
f›ldCouÁ
<2);

1781 
posixV¬ŸÁSize
 = 
	`_g‘V¬ŸÁEx
(
tmpLoÿËID
+1, '@', 
Çme
+
Ën
, 
ÇmeC­ac™y
-len,

1782 (
UBoŞ
)(
v¬ŸÁSize
 > 0));

1783 ià(
posixV¬ŸÁSize
 > 0) {

1784 ià(
v¬ŸÁ
 =ğ
NULL
) {

1785 
v¬ŸÁ
 = 
Çme
+
Ën
;

1787 
Ën
 +ğ
posixV¬ŸÁSize
;

1788 
v¬ŸÁSize
 +ğ
posixV¬ŸÁSize
;

1793 ià(
v¬ŸÁ
) {

1794 
j
=0; j<(
št32_t
)((
VARIANT_MAP
)/(VARIANT_MAP[0])); j++) {

1795 cÚ¡ * 
v¬ŸÁToCom·»
 = 
VARIANT_MAP
[
j
].
v¬ŸÁ
;

1796 
št32_t
 
n
 = (št32_t)
	`u´v_¡¾’
(
v¬ŸÁToCom·»
);

1797 
št32_t
 
v¬ŸÁL’
 = 
	`_d–‘eV¬ŸÁ
(
v¬ŸÁ
, 
	`u´v_mš
(
v¬ŸÁSize
, (
ÇmeC­ac™y
-
Ën
)), 
v¬ŸÁToCom·»
, 
n
);

1798 
Ën
 -ğ
v¬ŸÁL’
;

1799 ià(
v¬ŸÁL’
 > 0) {

1800 ià(
Çme
[
Ën
-1] == '_') {

1801 --
Ën
;

1803 
addKeywÜd
 = 
VARIANT_MAP
[
j
].
keywÜd
;

1804 
addV®ue
 = 
VARIANT_MAP
[
j
].
v®ue
;

1808 ià(
Çme
[
Ën
-1] == '_') {

1809 --
Ën
;

1814 
j
=0; j<(
št32_t
)((
CANONICALIZE_MAP
)/(CANONICALIZE_MAP[0])); j++) {

1815 cÚ¡ * 
id
 = 
CANONICALIZE_MAP
[
j
].id;

1816 
št32_t
 
n
 = (št32_t)
	`u´v_¡¾’
(
id
);

1817 ià(
Ën
 =ğ
n
 && 
	`u´v_¡ºcmp
(
Çme
, 
id
,‚) == 0) {

1818 ià(
n
 =ğ0 && 
tmpLoÿËID
 !ğ
NULL
) {

1821 
Ën
 = 
	`_cİyCouÁ
(
Çme
, 
ÇmeC­ac™y
, 
CANONICALIZE_MAP
[
j
].
ÿnÚiÿlID
);

1822 ià(
CANONICALIZE_MAP
[
j
].
keywÜd
) {

1823 
addKeywÜd
 = 
CANONICALIZE_MAP
[
j
].
keywÜd
;

1824 
addV®ue
 = 
CANONICALIZE_MAP
[
j
].
v®ue
;

1831 ià(!
	`OPTION_SET
(
İtiÚs
, 
_ULOC_STRIP_KEYWORDS
)) {

1832 ià(
tmpLoÿËID
!=
NULL
 && 
keywÜdAssign
!=NULL &&

1833 (!
£·¿tÜIndiÿtÜ
 || s•¬©ÜIndiÿtÜ > 
keywÜdAssign
)) {

1834 if(
Ën
<
ÇmeC­ac™y
) {

1835 
Çme
[
Ën
]='@';

1837 ++
Ën
;

1838 ++
f›ldCouÁ
;

1839 
Ën
 +ğ
	`_g‘KeywÜds
(
tmpLoÿËID
+1, '@', 
Çme
+Ën, 
ÇmeC­ac™y
-Ën, 
NULL
, 0, NULL, 
TRUE
,

1840 
addKeywÜd
, 
addV®ue
, 
”r
);

1841 } ià(
addKeywÜd
 !ğ
NULL
) {

1842 
	`U_ASSERT
(
addV®ue
 !ğ
NULL
);

1844 
Ën
 +ğ
	`_cİyCouÁ
(
Çme
+Ën, 
ÇmeC­ac™y
-len, "@");

1845 
Ën
 +ğ
	`_cİyCouÁ
(
Çme
+Ën, 
ÇmeC­ac™y
-Ën, 
addKeywÜd
);

1846 
Ën
 +ğ
	`_cİyCouÁ
(
Çme
+Ën, 
ÇmeC­ac™y
-len, "=");

1847 
Ën
 +ğ
	`_cİyCouÁ
(
Çme
+Ën, 
ÇmeC­ac™y
-Ën, 
addV®ue
);

1851 ià(
	`U_SUCCESS
(*
”r
è&& 
»suÉ
 !ğ
NULL
 && 
Çme
 =ğ
loÿËBufãr
) {

1852 
	`u´v_¡ºıy
(
»suÉ
, 
loÿËBufãr
, (
Ën
 > 
»suÉC­ac™y
) ?„esultCapacity :†en);

1855  
	`u_‹rmš©eCh¬s
(
»suÉ
, 
»suÉC­ac™y
, 
Ën
, 
”r
);

1856 
	}
}

1860 
U_CAPI
 
št32_t
 
U_EXPORT2


1861 
	$uloc_g‘P¬’t
(cÚ¡ * 
loÿËID
,

1862 * 
·»Á
,

1863 
št32_t
 
·»ÁC­ac™y
,

1864 
UE¼ÜCode
* 
”r
)

1866 cÚ¡ *
Ï¡Und”scÜe
;

1867 
št32_t
 
i
;

1869 ià(
	`U_FAILURE
(*
”r
))

1872 ià(
loÿËID
 =ğ
NULL
)

1873 
loÿËID
 = 
	`uloc_g‘DeçuÉ
();

1875 
Ï¡Und”scÜe
=
	`u´v_¡¼chr
(
loÿËID
, '_');

1876 if(
Ï¡Und”scÜe
!=
NULL
) {

1877 
i
=(
št32_t
)(
Ï¡Und”scÜe
-
loÿËID
);

1879 
i
=0;

1882 if(
i
>0 && 
·»Á
 !ğ
loÿËID
) {

1883 
	`u´v_memıy
(
·»Á
, 
loÿËID
, 
	`u´v_mš
(
i
, 
·»ÁC­ac™y
));

1885  
	`u_‹rmš©eCh¬s
(
·»Á
, 
·»ÁC­ac™y
, 
i
, 
”r
);

1886 
	}
}

1888 
U_CAPI
 
št32_t
 
U_EXPORT2


1889 
	$uloc_g‘Lªguage
(cÚ¡ * 
loÿËID
,

1890 * 
Ïnguage
,

1891 
št32_t
 
ÏnguageC­ac™y
,

1892 
UE¼ÜCode
* 
”r
)

1895 
št32_t
 
i
=0;

1897 ià(
”r
==
NULL
 || 
	`U_FAILURE
(*err)) {

1901 if(
loÿËID
==
NULL
) {

1902 
loÿËID
=
	`uloc_g‘DeçuÉ
();

1905 
i
=
	`ulocimp_g‘Lªguage
(
loÿËID
, 
Ïnguage
, 
ÏnguageC­ac™y
, 
NULL
);

1906  
	`u_‹rmš©eCh¬s
(
Ïnguage
, 
ÏnguageC­ac™y
, 
i
, 
”r
);

1907 
	}
}

1909 
U_CAPI
 
št32_t
 
U_EXPORT2


1910 
	$uloc_g‘Süt
(cÚ¡ * 
loÿËID
,

1911 * 
süt
,

1912 
št32_t
 
sütC­ac™y
,

1913 
UE¼ÜCode
* 
”r
)

1915 
št32_t
 
i
=0;

1917 if(
”r
==
NULL
 || 
	`U_FAILURE
(*err)) {

1921 if(
loÿËID
==
NULL
) {

1922 
loÿËID
=
	`uloc_g‘DeçuÉ
();

1926 
	`ulocimp_g‘Lªguage
(
loÿËID
, 
NULL
, 0, &localeID);

1927 if(
	`_isIDS•¬©Ü
(*
loÿËID
)) {

1928 
i
=
	`ulocimp_g‘Süt
(
loÿËID
+1, 
süt
, 
sütC­ac™y
, 
NULL
);

1930  
	`u_‹rmš©eCh¬s
(
süt
, 
sütC­ac™y
, 
i
, 
”r
);

1931 
	}
}

1933 
U_CAPI
 
št32_t
 
U_EXPORT2


1934 
	$uloc_g‘CouÁry
(cÚ¡ * 
loÿËID
,

1935 * 
couÁry
,

1936 
št32_t
 
couÁryC­ac™y
,

1937 
UE¼ÜCode
* 
”r
)

1939 
št32_t
 
i
=0;

1941 if(
”r
==
NULL
 || 
	`U_FAILURE
(*err)) {

1945 if(
loÿËID
==
NULL
) {

1946 
loÿËID
=
	`uloc_g‘DeçuÉ
();

1950 
	`ulocimp_g‘Lªguage
(
loÿËID
, 
NULL
, 0, &localeID);

1951 if(
	`_isIDS•¬©Ü
(*
loÿËID
)) {

1952 cÚ¡ *
sütID
;

1954 
	`ulocimp_g‘Süt
(
loÿËID
+1, 
NULL
, 0, &
sütID
);

1955 if(
sütID
 !ğ
loÿËID
+1) {

1957 
loÿËID
 = 
sütID
;

1959 if(
	`_isIDS•¬©Ü
(*
loÿËID
)) {

1960 
i
=
	`ulocimp_g‘CouÁry
(
loÿËID
+1, 
couÁry
, 
couÁryC­ac™y
, 
NULL
);

1963  
	`u_‹rmš©eCh¬s
(
couÁry
, 
couÁryC­ac™y
, 
i
, 
”r
);

1964 
	}
}

1966 
U_CAPI
 
št32_t
 
U_EXPORT2


1967 
	$uloc_g‘V¬ŸÁ
(cÚ¡ * 
loÿËID
,

1968 * 
v¬ŸÁ
,

1969 
št32_t
 
v¬ŸÁC­ac™y
,

1970 
UE¼ÜCode
* 
”r
)

1972 
‹mpBufãr
[
ULOC_FULLNAME_CAPACITY
];

1973 cÚ¡ * 
tmpLoÿËID
;

1974 
št32_t
 
i
=0;

1976 if(
”r
==
NULL
 || 
	`U_FAILURE
(*err)) {

1980 ià(
	`_hasBCP47Ex‹nsiÚ
(
loÿËID
)) {

1981 
	`_CÚv”tBCP47
(
tmpLoÿËID
, 
loÿËID
, 
‹mpBufãr
, ÑempBufãr), 
”r
);

1983 ià(
loÿËID
==
NULL
) {

1984 
loÿËID
=
	`uloc_g‘DeçuÉ
();

1986 
tmpLoÿËID
=
loÿËID
;

1990 
	`ulocimp_g‘Lªguage
(
tmpLoÿËID
, 
NULL
, 0, &tmpLocaleID);

1991 if(
	`_isIDS•¬©Ü
(*
tmpLoÿËID
)) {

1992 cÚ¡ *
sütID
;

1994 
	`ulocimp_g‘Süt
(
tmpLoÿËID
+1, 
NULL
, 0, &
sütID
);

1995 if(
sütID
 !ğ
tmpLoÿËID
+1) {

1997 
tmpLoÿËID
 = 
sütID
;

2000 ià(
	`_isIDS•¬©Ü
(*
tmpLoÿËID
)) {

2001 cÚ¡ *
úŒyID
;

2002 
	`ulocimp_g‘CouÁry
(
tmpLoÿËID
+1, 
NULL
, 0, &
úŒyID
);

2003 ià(
úŒyID
 !ğ
tmpLoÿËID
+1) {

2005 
tmpLoÿËID
 = 
úŒyID
;

2007 if(
	`_isIDS•¬©Ü
(*
tmpLoÿËID
)) {

2009 ià(
tmpLoÿËID
 !ğ
úŒyID
 && 
	`_isIDS•¬©Ü
(tmpLocaleID[1])) {

2010 
tmpLoÿËID
++;

2012 
i
=
	`_g‘V¬ŸÁ
(
tmpLoÿËID
+1, *tmpLoÿËID, 
v¬ŸÁ
, 
v¬ŸÁC­ac™y
);

2024  
	`u_‹rmš©eCh¬s
(
v¬ŸÁ
, 
v¬ŸÁC­ac™y
, 
i
, 
”r
);

2025 
	}
}

2027 
U_CAPI
 
št32_t
 
U_EXPORT2


2028 
	$uloc_g‘Name
(cÚ¡ * 
loÿËID
,

2029 * 
Çme
,

2030 
št32_t
 
ÇmeC­ac™y
,

2031 
UE¼ÜCode
* 
”r
)

2033  
	`_ÿnÚiÿlize
(
loÿËID
, 
Çme
, 
ÇmeC­ac™y
, 0, 
”r
);

2034 
	}
}

2036 
U_CAPI
 
št32_t
 
U_EXPORT2


2037 
	$uloc_g‘Ba£Name
(cÚ¡ * 
loÿËID
,

2038 * 
Çme
,

2039 
št32_t
 
ÇmeC­ac™y
,

2040 
UE¼ÜCode
* 
”r
)

2042  
	`_ÿnÚiÿlize
(
loÿËID
, 
Çme
, 
ÇmeC­ac™y
, 
_ULOC_STRIP_KEYWORDS
, 
”r
);

2043 
	}
}

2045 
U_CAPI
 
št32_t
 
U_EXPORT2


2046 
	$uloc_ÿnÚiÿlize
(cÚ¡ * 
loÿËID
,

2047 * 
Çme
,

2048 
št32_t
 
ÇmeC­ac™y
,

2049 
UE¼ÜCode
* 
”r
)

2051  
	`_ÿnÚiÿlize
(
loÿËID
, 
Çme
, 
ÇmeC­ac™y
, 
_ULOC_CANONICALIZE
, 
”r
);

2052 
	}
}

2054 
U_CAPI
 cÚ¡ * 
U_EXPORT2


2055 
	$uloc_g‘ISO3Lªguage
(cÚ¡ * 
loÿËID
)

2057 
št16_t
 
off£t
;

2058 
Ïng
[
ULOC_LANG_CAPACITY
];

2059 
UE¼ÜCode
 
”r
 = 
U_ZERO_ERROR
;

2061 ià(
loÿËID
 =ğ
NULL
)

2063 
loÿËID
 = 
	`uloc_g‘DeçuÉ
();

2065 
	`uloc_g‘Lªguage
(
loÿËID
, 
Ïng
, 
ULOC_LANG_CAPACITY
, &
”r
);

2066 ià(
	`U_FAILURE
(
”r
))

2068 
off£t
 = 
	`_fšdIndex
(
LANGUAGES
, 
Ïng
);

2069 ià(
off£t
 < 0)

2071  
LANGUAGES_3
[
off£t
];

2072 
	}
}

2074 
U_CAPI
 cÚ¡ * 
U_EXPORT2


2075 
	$uloc_g‘ISO3CouÁry
(cÚ¡ * 
loÿËID
)

2077 
št16_t
 
off£t
;

2078 
úŒy
[
ULOC_LANG_CAPACITY
];

2079 
UE¼ÜCode
 
”r
 = 
U_ZERO_ERROR
;

2081 ià(
loÿËID
 =ğ
NULL
)

2083 
loÿËID
 = 
	`uloc_g‘DeçuÉ
();

2085 
	`uloc_g‘CouÁry
(
loÿËID
, 
úŒy
, 
ULOC_LANG_CAPACITY
, &
”r
);

2086 ià(
	`U_FAILURE
(
”r
))

2088 
off£t
 = 
	`_fšdIndex
(
COUNTRIES
, 
úŒy
);

2089 ià(
off£t
 < 0)

2092  
COUNTRIES_3
[
off£t
];

2093 
	}
}

2095 
U_CAPI
 
ušt32_t
 
U_EXPORT2


2096 
	$uloc_g‘LCID
(cÚ¡ * 
loÿËID
)

2098 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

2099 
ÏngID
[
ULOC_FULLNAME_CAPACITY
];

2101 
	`uloc_g‘Lªguage
(
loÿËID
, 
ÏngID
, ÖªgID), &
¡©us
);

2102 ià(
	`U_FAILURE
(
¡©us
)) {

2106  
	`u´v_cÚv”tToLCID
(
ÏngID
, 
loÿËID
, &
¡©us
);

2107 
	}
}

2109 
U_CAPI
 
št32_t
 
U_EXPORT2


2110 
	$uloc_g‘LoÿËFÜLCID
(
ušt32_t
 
ho¡id
, *
loÿË
, 
št32_t
 
loÿËC­ac™y
,

2111 
UE¼ÜCode
 *
¡©us
)

2113 
št32_t
 
Ëngth
;

2114 cÚ¡ *
posix
 = 
	`u´v_cÚv”tToPosix
(
ho¡id
, 
¡©us
);

2115 ià(
	`U_FAILURE
(*
¡©us
è|| 
posix
 =ğ
NULL
) {

2118 
Ëngth
 = (
št32_t
)
	`u´v_¡¾’
(
posix
);

2119 ià(
Ëngth
+1 > 
loÿËC­ac™y
) {

2120 *
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

2123 
	`u´v_¡rıy
(
loÿË
, 
posix
);

2125  
Ëngth
;

2126 
	}
}

2130 
U_CAPI
 cÚ¡ * 
U_EXPORT2


2131 
	$uloc_g‘DeçuÉ
()

2133  
	`loÿË_g‘_deçuÉ
();

2134 
	}
}

2136 
U_CAPI
 
U_EXPORT2


2137 
	$uloc_£tDeçuÉ
(cÚ¡ * 
ÃwDeçuÉLoÿË
,

2138 
UE¼ÜCode
* 
”r
)

2140 ià(
	`U_FAILURE
(*
”r
))

2145 
	`loÿË_£t_deçuÉ
(
ÃwDeçuÉLoÿË
);

2146 
	}
}

2154 
U_CAPI
 cÚ¡ * cÚ¡* 
U_EXPORT2


2155 
	$uloc_g‘ISOLªguages
()

2157  
LANGUAGES
;

2158 
	}
}

2166 
U_CAPI
 cÚ¡ * cÚ¡* 
U_EXPORT2


2167 
	$uloc_g‘ISOCouÁr›s
()

2169  
COUNTRIES
;

2170 
	}
}

2174 
	ggDecim®
 = 0;

2179 
	$_uloc_¡¹od
(cÚ¡ *
¡¬t
, **
’d
) {

2180 *
decim®
;

2181 *
myEnd
;

2182 
buf
[30];

2183 
rv
;

2184 ià(!
gDecim®
) {

2185 
»p
[5];

2189 
	`¥rštf
(
»p
, "%+1.1f", 1.0);

2190 
gDecim®
 = 
»p
[2];

2193 if(
gDecim®
 == '.') {

2194  
	`u´v_¡¹od
(
¡¬t
, 
’d
);

2196 
	`u´v_¡ºıy
(
buf
, 
¡¬t
, 29);

2197 
buf
[29]=0;

2198 
decim®
 = 
	`u´v_¡rchr
(
buf
, '.');

2199 if(
decim®
) {

2200 *
decim®
 = 
gDecim®
;

2202  
	`u´v_¡¹od
(
¡¬t
, 
’d
);

2204 
rv
 = 
	`u´v_¡¹od
(
buf
, &
myEnd
);

2205 if(
’d
) {

2206 *
’d
 = (*)(
¡¬t
+(
myEnd
-
buf
));

2208  
rv
;

2210 
	}
}

2213 
	mq
;

2214 
št32_t
 
	mdummy
;

2215 *
	mloÿË
;

2216 } 
	t_acû±LªgI‹m
;

2218 
št32_t
 
U_CALLCONV


2219 
	$uloc_acû±LªguageCom·»
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
a
, cÚ¡ *
b
)

2221 cÚ¡ 
_acû±LªgI‹m
 *
¯
 = (cÚ¡ _acû±LªgI‹m*)
a
;

2222 cÚ¡ 
_acû±LªgI‹m
 *
bb
 = (cÚ¡ _acû±LªgI‹m*)
b
;

2224 
št32_t
 
rc
 = 0;

2225 if(
bb
->
q
 < 
¯
->q) {

2226 
rc
 = -1;

2227 } if(
bb
->
q
 > 
¯
->q) {

2228 
rc
 = 1;

2230 
rc
 = 0;

2233 if(
rc
==0) {

2234 
rc
 = 
	`u´v_¡ricmp
(
¯
->
loÿË
, 
bb
->locale);

2237 #ià
	`defšed
(
ULOC_DEBUG
)

2244  
rc
;

2245 
	}
}

2251 
U_CAPI
 
št32_t
 
U_EXPORT2


2252 
	$uloc_acû±LªguageFromHTTP
(*
»suÉ
, 
št32_t
 
»suÉAvaabË
, 
UAcû±ResuÉ
 *
outResuÉ
,

2253 cÚ¡ *
h‰pAcû±Lªguage
,

2254 
UEnum”©iÚ
* 
avaabËLoÿËs
,

2255 
UE¼ÜCode
 *
¡©us
)

2257 
_acû±LªgI‹m
 *
j
;

2258 
_acû±LªgI‹m
 
sm®lBufãr
[30];

2259 **
¡rs
;

2260 
tmp
[
ULOC_FULLNAME_CAPACITY
 +1];

2261 
št32_t
 
n
 = 0;

2262 cÚ¡ *
™emEnd
;

2263 cÚ¡ *
·¿mEnd
;

2264 cÚ¡ *
s
;

2265 cÚ¡ *
t
;

2266 
št32_t
 
»s
;

2267 
št32_t
 
i
;

2268 
št32_t
 
l
 = (št32_t)
	`u´v_¡¾’
(
h‰pAcû±Lªguage
);

2269 
št32_t
 
jSize
;

2270 *
‹mp¡r
;

2272 
j
 = 
sm®lBufãr
;

2273 
jSize
 = (
sm®lBufãr
)/(smallBuffer[0]);

2274 if(
	`U_FAILURE
(*
¡©us
)) {

2278 
s
=
h‰pAcû±Lªguage
;s&&*s;) {

2279 
	`is¥aû
(*
s
))

2280 
s
++;

2281 
™emEnd
=
	`u´v_¡rchr
(
s
,',');

2282 
·¿mEnd
=
	`u´v_¡rchr
(
s
,';');

2283 if(!
™emEnd
) {

2284 
™emEnd
 = 
h‰pAcû±Lªguage
+
l
;

2286 if(
·¿mEnd
 &&…¬amEnd<
™emEnd
) {

2288 
t
 = 
·¿mEnd
+1;

2289 if(*
t
=='q') {

2290 
t
++;

2292 
	`is¥aû
(*
t
)) {

2293 
t
++;

2295 if(*
t
=='=') {

2296 
t
++;

2298 
	`is¥aû
(*
t
)) {

2299 
t
++;

2301 
j
[
n
].
q
 = ()
	`_uloc_¡¹od
(
t
,
NULL
);

2304 
j
[
n
].
q
 = 1.0f;

2305 
·¿mEnd
 = 
™emEnd
;

2307 
j
[
n
].
dummy
=0;

2309 
t
=(
·¿mEnd
-1);Õ¬amEnd>
s
)&&
	`is¥aû
(*t);t--)

2312 
‹mp¡r
 = 
	`u´v_¡ºdup
(
s
,(
št32_t
)((
t
+1)-s));

2313 ià(
‹mp¡r
 =ğ
NULL
) {

2314 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

2317 
j
[
n
].
loÿË
 = 
‹mp¡r
;

2318 
	`uloc_ÿnÚiÿlize
(
j
[
n
].
loÿË
,
tmp
,Ñmp)/Ñmp[0]),
¡©us
);

2319 if(
	`¡rcmp
(
j
[
n
].
loÿË
,
tmp
)) {

2320 
	`u´v_ä“
(
j
[
n
].
loÿË
);

2321 
j
[
n
].
loÿË
=
	`u´v_¡rdup
(
tmp
);

2323 #ià
	`defšed
(
ULOC_DEBUG
)

2326 
n
++;

2327 
s
 = 
™emEnd
;

2328 *
s
==',') {

2329 
s
++;

2331 if(
n
>=
jSize
) {

2332 if(
j
==
sm®lBufãr
) {

2333 
j
 = 
	`u´v_m®loc
((j[0])*(
jSize
*2));

2334 if(
j
!=
NULL
) {

2335 
	`u´v_memıy
(
j
,
sm®lBufãr
,(j[0])*
jSize
);

2337 #ià
	`defšed
(
ULOC_DEBUG
)

2338 
	`årštf
(
¡d”r
,"m®loûd‡ˆsiz%d\n", 
jSize
);

2341 
j
 = 
	`u´v_»®loc
(j, (j[0])*
jSize
*2);

2342 #ià
	`defšed
(
ULOC_DEBUG
)

2343 
	`årštf
(
¡d”r
,"»-®loûd‡ˆsiz%d\n", 
jSize
);

2346 
jSize
 *= 2;

2347 if(
j
==
NULL
) {

2348 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

2353 
	`u´v_sÜtA¼ay
(
j
, 
n
, (j[0]), 
uloc_acû±LªguageCom·»
, 
NULL
, 
TRUE
, 
¡©us
);

2354 if(
	`U_FAILURE
(*
¡©us
)) {

2355 if(
j
 !ğ
sm®lBufãr
) {

2356 #ià
	`defšed
(
ULOC_DEBUG
)

2357 
	`årštf
(
¡d”r
,"ä“šg j %p\n", 
j
);

2359 
	`u´v_ä“
(
j
);

2363 
¡rs
 = 
	`u´v_m®loc
((
size_t
)((¡rs[0])*
n
));

2365 ià(
¡rs
 =ğ
NULL
) {

2366 
	`u´v_ä“
(
j
);

2367 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

2370 
i
=0;i<
n
;i++) {

2371 #ià
	`defšed
(
ULOC_DEBUG
)

2374 
¡rs
[
i
]=
j
[i].
loÿË
;

2376 
»s
 = 
	`uloc_acû±Lªguage
(
»suÉ
, 
»suÉAvaabË
, 
outResuÉ
,

2377 (cÚ¡ **)
¡rs
, 
n
, 
avaabËLoÿËs
, 
¡©us
);

2378 
i
=0;i<
n
;i++) {

2379 
	`u´v_ä“
(
¡rs
[
i
]);

2381 
	`u´v_ä“
(
¡rs
);

2382 if(
j
 !ğ
sm®lBufãr
) {

2383 #ià
	`defšed
(
ULOC_DEBUG
)

2384 
	`årštf
(
¡d”r
,"ä“šg j %p\n", 
j
);

2386 
	`u´v_ä“
(
j
);

2388  
»s
;

2389 
	}
}

2392 
U_CAPI
 
št32_t
 
U_EXPORT2


2393 
	$uloc_acû±Lªguage
(*
»suÉ
, 
št32_t
 
»suÉAvaabË
,

2394 
UAcû±ResuÉ
 *
outResuÉ
, cÚ¡ **
acû±Li¡
,

2395 
št32_t
 
acû±Li¡CouÁ
,

2396 
UEnum”©iÚ
* 
avaabËLoÿËs
,

2397 
UE¼ÜCode
 *
¡©us
)

2399 
št32_t
 
i
,
j
;

2400 
št32_t
 
Ën
;

2401 
št32_t
 
maxL’
=0;

2402 
tmp
[
ULOC_FULLNAME_CAPACITY
+1];

2403 cÚ¡ *
l
;

2404 **
çÎbackLi¡
;

2405 if(
	`U_FAILURE
(*
¡©us
)) {

2408 
çÎbackLi¡
 = 
	`u´v_m®loc
((
size_t
)((çÎbackLi¡[0])*
acû±Li¡CouÁ
));

2409 if(
çÎbackLi¡
==
NULL
) {

2410 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

2413 
i
=0;i<
acû±Li¡CouÁ
;i++) {

2414 #ià
	`defšed
(
ULOC_DEBUG
)

2415 
	`årštf
(
¡d”r
,"%02d: %s\n", 
i
, 
acû±Li¡
[i]);

2417 (
l
=
	`u’um_Ãxt
(
avaabËLoÿËs
, 
NULL
, 
¡©us
))) {

2418 #ià
	`defšed
(
ULOC_DEBUG
)

2419 
	`årštf
(
¡d”r
," %s\n", 
l
);

2421 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
l
);

2422 if(!
	`u´v_¡rcmp
(
acû±Li¡
[
i
], 
l
)) {

2423 if(
outResuÉ
) {

2424 *
outResuÉ
 = 
ULOC_ACCEPT_VALID
;

2426 #ià
	`defšed
(
ULOC_DEBUG
)

2427 
	`årštf
(
¡d”r
, "MATCH! %s\n", 
l
);

2429 if(
Ën
>0) {

2430 
	`u´v_¡ºıy
(
»suÉ
, 
l
, 
	`u´v_mš
(
Ën
, 
»suÉAvaabË
));

2432 
j
=0;j<
i
;j++) {

2433 
	`u´v_ä“
(
çÎbackLi¡
[
j
]);

2435 
	`u´v_ä“
(
çÎbackLi¡
);

2436  
	`u_‹rmš©eCh¬s
(
»suÉ
, 
»suÉAvaabË
, 
Ën
, 
¡©us
);

2438 if(
Ën
>
maxL’
) {

2439 
maxL’
 = 
Ën
;

2442 
	`u’um_»£t
(
avaabËLoÿËs
, 
¡©us
);

2444 if(
	`uloc_g‘P¬’t
(
acû±Li¡
[
i
], 
tmp
, Ñmp)/Ñmp[0]), 
¡©us
)!=0) {

2445 
çÎbackLi¡
[
i
] = 
	`u´v_¡rdup
(
tmp
);

2447 
çÎbackLi¡
[
i
]=0;

2451 
maxL’
--;maxLen>0;maxLen--) {

2452 
i
=0;i<
acû±Li¡CouÁ
;i++) {

2453 if(
çÎbackLi¡
[
i
] && ((
št32_t
)
	`u´v_¡¾’
(çÎbackLi¡[i])==
maxL’
)) {

2454 #ià
	`defšed
(
ULOC_DEBUG
)

2455 
	`årštf
(
¡d”r
,"Try: [%s]", 
çÎbackLi¡
[
i
]);

2457 (
l
=
	`u’um_Ãxt
(
avaabËLoÿËs
, 
NULL
, 
¡©us
))) {

2458 #ià
	`defšed
(
ULOC_DEBUG
)

2459 
	`årštf
(
¡d”r
," %s\n", 
l
);

2461 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
l
);

2462 if(!
	`u´v_¡rcmp
(
çÎbackLi¡
[
i
], 
l
)) {

2463 if(
outResuÉ
) {

2464 *
outResuÉ
 = 
ULOC_ACCEPT_FALLBACK
;

2466 #ià
	`defšed
(
ULOC_DEBUG
)

2467 
	`årštf
(
¡d”r
, "çÎback MATCH! %s\n", 
l
);

2469 if(
Ën
>0) {

2470 
	`u´v_¡ºıy
(
»suÉ
, 
l
, 
	`u´v_mš
(
Ën
, 
»suÉAvaabË
));

2472 
j
=0;j<
acû±Li¡CouÁ
;j++) {

2473 
	`u´v_ä“
(
çÎbackLi¡
[
j
]);

2475 
	`u´v_ä“
(
çÎbackLi¡
);

2476  
	`u_‹rmš©eCh¬s
(
»suÉ
, 
»suÉAvaabË
, 
Ën
, 
¡©us
);

2479 
	`u’um_»£t
(
avaabËLoÿËs
, 
¡©us
);

2481 if(
	`uloc_g‘P¬’t
(
çÎbackLi¡
[
i
], 
tmp
, Ñmp)/Ñmp[0]), 
¡©us
)!=0) {

2482 
	`u´v_ä“
(
çÎbackLi¡
[
i
]);

2483 
çÎbackLi¡
[
i
] = 
	`u´v_¡rdup
(
tmp
);

2485 
	`u´v_ä“
(
çÎbackLi¡
[
i
]);

2486 
çÎbackLi¡
[
i
]=0;

2490 if(
outResuÉ
) {

2491 *
outResuÉ
 = 
ULOC_ACCEPT_FAILED
;

2494 
i
=0;i<
acû±Li¡CouÁ
;i++) {

2495 
	`u´v_ä“
(
çÎbackLi¡
[
i
]);

2497 
	`u´v_ä“
(
çÎbackLi¡
);

2499 
	}
}

	@uloc_tag.c

8 
	~"unicode/uty³s.h
"

9 
	~"unicode/u»s.h
"

10 
	~"unicode/put.h
"

11 
	~"unicode/uloc.h
"

12 
	~"u¡r_imp.h
"

13 
	~"cmemÜy.h
"

14 
	~"c¡ršg.h
"

15 
	~"putimp.h
"

16 
	~"ušvch¬.h
"

19 
	sV¬ŸÁLi¡EÁry
 {

20 cÚ¡ *
	mv¬ŸÁ
;

21 
V¬ŸÁLi¡EÁry
 *
	mÃxt
;

22 } 
	tV¬ŸÁLi¡EÁry
;

25 
	sEx‹nsiÚLi¡EÁry
 {

26 cÚ¡ *
	mkey
;

27 cÚ¡ *
	mv®ue
;

28 
Ex‹nsiÚLi¡EÁry
 *
	mÃxt
;

29 } 
	tEx‹nsiÚLi¡EÁry
;

31 
	#MAXEXTLANG
 3

	)

32 
	sULªguageTag
 {

33 *
	mbuf
;

34 cÚ¡ *
	mÏnguage
;

35 cÚ¡ *
	mexªg
[
MAXEXTLANG
];

36 cÚ¡ *
	msüt
;

37 cÚ¡ *
	m»giÚ
;

38 
V¬ŸÁLi¡EÁry
 *
	mv¬ŸÁs
;

39 
Ex‹nsiÚLi¡EÁry
 *
	mex‹nsiÚs
;

40 cÚ¡ *
	m´iv©eu£
;

41 cÚ¡ *
	mg¿ndçth”ed
;

42 } 
	tULªguageTag
;

44 
	#MINLEN
 2

	)

45 
	#SEP
 '-'

	)

46 
	#PRIVATEUSE
 'x'

	)

47 
	#LDMLEXT
 'u'

	)

49 
	#LOCALE_SEP
 '_'

	)

50 
	#LOCALE_EXT_SEP
 '@'

	)

51 
	#LOCALE_KEYWORD_SEP
 ';'

	)

52 
	#LOCALE_KEY_TYPE_SEP
 '='

	)

54 
	#ISALPHA
(
c
è(((c)>='A' && (c)<='Z'è|| ((c)>='a' && (c)<='z'))

	)

55 
	#ISNUMERIC
(
c
è((c)>='0' && (c)<='9')

	)

57 cÚ¡ * 
	gEMPTY
 = "";

58 cÚ¡ * 
	gLANG_UND
 = "und";

59 cÚ¡ * 
	gPRIVATEUSE_KEY
 = "x";

60 cÚ¡ * 
	g_POSIX
 = "_POSIX";

61 cÚ¡ * 
	gPOSIX_KEY
 = "va";

62 cÚ¡ * 
	gPOSIX_VALUE
 = "posix";

64 
	#LANG_UND_LEN
 3

	)

66 cÚ¡ * 
	gGRANDFATHERED
[] = {

94 
NULL
, NULL

97 cÚ¡ * 
	gDEPRECATEDLANGS
[] = {

102 
NULL
, NULL

113 
ULªguageTag
*

114 
uÉag_·r£
(cÚ¡ * 
g
, 
št32_t
 
gL’
, iÁ32_t* 
·r£dL’
, 
UE¼ÜCode
* 
¡©us
);

117 
uÉag_şo£
(
ULªguageTag
* 
Ïngg
);

120 
uÉag_g‘Lªguage
(cÚ¡ 
ULªguageTag
* 
Ïngg
);

124 
uÉag_g‘JDKLªguage
(cÚ¡ 
ULªguageTag
* 
Ïngg
);

128 
uÉag_g‘Exªg
(cÚ¡ 
ULªguageTag
* 
Ïngg
, 
št32_t
 
idx
);

130 
št32_t


131 
uÉag_g‘ExªgSize
(cÚ¡ 
ULªguageTag
* 
Ïngg
);

134 
uÉag_g‘Süt
(cÚ¡ 
ULªguageTag
* 
Ïngg
);

137 
uÉag_g‘RegiÚ
(cÚ¡ 
ULªguageTag
* 
Ïngg
);

140 
uÉag_g‘V¬ŸÁ
(cÚ¡ 
ULªguageTag
* 
Ïngg
, 
št32_t
 
idx
);

142 
št32_t


143 
uÉag_g‘V¬ŸÁsSize
(cÚ¡ 
ULªguageTag
* 
Ïngg
);

146 
uÉag_g‘Ex‹nsiÚKey
(cÚ¡ 
ULªguageTag
* 
Ïngg
, 
št32_t
 
idx
);

149 
uÉag_g‘Ex‹nsiÚV®ue
(cÚ¡ 
ULªguageTag
* 
Ïngg
, 
št32_t
 
idx
);

151 
št32_t


152 
uÉag_g‘Ex‹nsiÚsSize
(cÚ¡ 
ULªguageTag
* 
Ïngg
);

155 
uÉag_g‘Priv©eU£
(cÚ¡ 
ULªguageTag
* 
Ïngg
);

159 
uÉag_g‘G¿ndçth”ed
(cÚ¡ 
ULªguageTag
* 
Ïngg
);

170 
UBoŞ


171 
	$_isAÍhaSŒšg
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

172 
št32_t
 
i
;

173 
i
 = 0; i < 
Ën
; i++) {

174 ià(!
	`ISALPHA
(*(
s
 + 
i
))) {

175  
FALSE
;

178  
TRUE
;

179 
	}
}

181 
UBoŞ


182 
	$_isNum”icSŒšg
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

183 
št32_t
 
i
;

184 
i
 = 0; i < 
Ën
; i++) {

185 ià(!
	`ISNUMERIC
(*(
s
 + 
i
))) {

186  
FALSE
;

189  
TRUE
;

190 
	}
}

192 
UBoŞ


193 
	$_isAÍhaNum”icSŒšg
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

194 
št32_t
 
i
;

195 
i
 = 0; i < 
Ën
; i++) {

196 ià(!
	`ISALPHA
(*(
s
 + 
i
)è&& !
	`ISNUMERIC
(*(s + i))) {

197  
FALSE
;

200  
TRUE
;

201 
	}
}

203 
UBoŞ


204 
	$_isLªguageSubg
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

212 ià(
Ën
 < 0) {

213 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

215 ià(
Ën
 >ğ2 &&†’ <ğ8 && 
	`_isAÍhaSŒšg
(
s
,†en)) {

216  
TRUE
;

218  
FALSE
;

219 
	}
}

221 
UBoŞ


222 
	$_isExªgSubg
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

227 ià(
Ën
 < 0) {

228 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

230 ià(
Ën
 =ğ3 && 
	`_isAÍhaSŒšg
(
s
,†en)) {

231  
TRUE
;

233  
FALSE
;

234 
	}
}

236 
UBoŞ


237 
	$_isSütSubg
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

241 ià(
Ën
 < 0) {

242 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

244 ià(
Ën
 =ğ4 && 
	`_isAÍhaSŒšg
(
s
,†en)) {

245  
TRUE
;

247  
FALSE
;

248 
	}
}

250 
UBoŞ


251 
	$_isRegiÚSubg
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

256 ià(
Ën
 < 0) {

257 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

259 ià(
Ën
 =ğ2 && 
	`_isAÍhaSŒšg
(
s
,†en)) {

260  
TRUE
;

262 ià(
Ën
 =ğ3 && 
	`_isNum”icSŒšg
(
s
,†en)) {

263  
TRUE
;

265  
FALSE
;

266 
	}
}

268 
UBoŞ


269 
	$_isV¬ŸÁSubg
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

274 ià(
Ën
 < 0) {

275 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

277 ià(
Ën
 >ğ5 &&†’ <ğ8 && 
	`_isAÍhaSŒšg
(
s
,†en)) {

278  
TRUE
;

280 ià(
Ën
 =ğ4 && 
	`ISNUMERIC
(*
s
è&& 
	`_isAÍhaNum”icSŒšg
(s + 1, 3)) {

281  
TRUE
;

283  
FALSE
;

284 
	}
}

286 
UBoŞ


287 
	$_isEx‹nsiÚSšgËtÚ
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

291 ià(
Ën
 < 0) {

292 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

294 ià(
Ën
 =ğ1 && 
	`ISALPHA
(*
s
è&& (
	`u´v_tŞow”
(*sè!ğ
PRIVATEUSE
)) {

295  
TRUE
;

297  
FALSE
;

298 
	}
}

300 
UBoŞ


301 
	$_isEx‹nsiÚSubg
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

305 ià(
Ën
 < 0) {

306 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

308 ià(
Ën
 >ğ2 &&†’ <ğ8 && 
	`_isAÍhaNum”icSŒšg
(
s
,†en)) {

309  
TRUE
;

311  
FALSE
;

312 
	}
}

314 
UBoŞ


315 
	$_isEx‹nsiÚSubgs
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

316 cÚ¡ *
p
 = 
s
;

317 cÚ¡ *
pSubg
 = 
NULL
;

319 ià(
Ën
 < 0) {

320 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

323 (
p
 - 
s
è< 
Ën
) {

324 ià(*
p
 =ğ
SEP
) {

325 ià(
pSubg
 =ğ
NULL
) {

326  
FALSE
;

328 ià(!
	`_isEx‹nsiÚSubg
(
pSubg
, (
št32_t
)(
p
 -…Subtag))) {

329  
FALSE
;

331 
pSubg
 = 
NULL
;

332 } ià(
pSubg
 =ğ
NULL
) {

333 
pSubg
 = 
p
;

335 
p
++;

337 ià(
pSubg
 =ğ
NULL
) {

338  
FALSE
;

340  
	`_isEx‹nsiÚSubg
(
pSubg
, (
št32_t
)(
p
 -…Subtag));

341 
	}
}

343 
UBoŞ


344 
	$_isPriv©eu£V®ueSubg
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

348 ià(
Ën
 < 0) {

349 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

351 ià(
Ën
 >ğ1 &&†’ <ğ8 && 
	`_isAÍhaNum”icSŒšg
(
s
,†en)) {

352  
TRUE
;

354  
FALSE
;

355 
	}
}

357 
UBoŞ


358 
	$_isPriv©eu£V®ueSubgs
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

359 cÚ¡ *
p
 = 
s
;

360 cÚ¡ *
pSubg
 = 
NULL
;

362 ià(
Ën
 < 0) {

363 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

366 (
p
 - 
s
è< 
Ën
) {

367 ià(*
p
 =ğ
SEP
) {

368 ià(
pSubg
 =ğ
NULL
) {

369  
FALSE
;

371 ià(!
	`_isPriv©eu£V®ueSubg
(
pSubg
, (
št32_t
)(
p
 -…Subtag))) {

372  
FALSE
;

374 
pSubg
 = 
NULL
;

375 } ià(
pSubg
 =ğ
NULL
) {

376 
pSubg
 = 
p
;

378 
p
++;

380 ià(
pSubg
 =ğ
NULL
) {

381  
FALSE
;

383  
	`_isPriv©eu£V®ueSubg
(
pSubg
, (
št32_t
)(
p
 -…Subtag));

384 
	}
}

386 
UBoŞ


387 
	$_isLDMLKey
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

388 ià(
Ën
 < 0) {

389 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

391 ià(
Ën
 =ğ2 && 
	`_isAÍhaNum”icSŒšg
(
s
,†en)) {

392  
TRUE
;

394  
FALSE
;

395 
	}
}

397 
UBoŞ


398 
	$_isLDMLTy³
(cÚ¡ * 
s
, 
št32_t
 
Ën
) {

399 ià(
Ën
 < 0) {

400 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
s
);

402 ià(
Ën
 >ğ3 &&†’ <ğ8 && 
	`_isAÍhaNum”icSŒšg
(
s
,†en)) {

403  
TRUE
;

405  
FALSE
;

406 
	}
}

416 
UBoŞ


417 
	$_addV¬ŸÁToLi¡
(
V¬ŸÁLi¡EÁry
 **
fœ¡
, V¬ŸÁLi¡EÁry *
v¬
) {

418 
UBoŞ
 
bAdded
 = 
TRUE
;

420 ià(*
fœ¡
 =ğ
NULL
) {

421 
v¬
->
Ãxt
 = 
NULL
;

422 *
fœ¡
 = 
v¬
;

424 
V¬ŸÁLi¡EÁry
 *
´ev
, *
cur
;

425 
št32_t
 
cmp
;

428 
´ev
 = 
NULL
;

429 
cur
 = *
fœ¡
;

430 
TRUE
) {

431 ià(
cur
 =ğ
NULL
) {

432 
´ev
->
Ãxt
 = 
v¬
;

433 
v¬
->
Ãxt
 = 
NULL
;

436 
cmp
 = 
	`u´v_com·»InvCh¬sAsAscii
(
v¬
->
v¬ŸÁ
, 
cur
->variant);

437 ià(
cmp
 < 0) {

438 ià(
´ev
 =ğ
NULL
) {

439 *
fœ¡
 = 
v¬
;

441 
´ev
->
Ãxt
 = 
v¬
;

443 
v¬
->
Ãxt
 = 
cur
;

446 ià(
cmp
 == 0) {

448 
bAdded
 = 
FALSE
;

451 
´ev
 = 
cur
;

452 
cur
 = cur->
Ãxt
;

456  
bAdded
;

457 
	}
}

460 
UBoŞ


461 
	$_addEx‹nsiÚToLi¡
(
Ex‹nsiÚLi¡EÁry
 **
fœ¡
, Ex‹nsiÚLi¡EÁry *
ext
, 
UBoŞ
 
loÿËToBCP
) {

462 
UBoŞ
 
bAdded
 = 
TRUE
;

464 ià(*
fœ¡
 =ğ
NULL
) {

465 
ext
->
Ãxt
 = 
NULL
;

466 *
fœ¡
 = 
ext
;

468 
Ex‹nsiÚLi¡EÁry
 *
´ev
, *
cur
;

469 
št32_t
 
cmp
;

472 
´ev
 = 
NULL
;

473 
cur
 = *
fœ¡
;

474 
TRUE
) {

475 ià(
cur
 =ğ
NULL
) {

476 
´ev
->
Ãxt
 = 
ext
;

477 
ext
->
Ãxt
 = 
NULL
;

480 ià(
loÿËToBCP
) {

482 
št32_t
 
Ën
, 
cu¾’
;

484 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
ext
->
key
);

485 
cu¾’
 = (
št32_t
)
	`u´v_¡¾’
(
cur
->
key
);

487 ià(
Ën
 =ğ1 && 
cu¾’
 == 1) {

488 ià(*(
ext
->
key
è=ğ*(
cur
->key)) {

489 
cmp
 = 0;

490 } ià(*(
ext
->
key
è=ğ
PRIVATEUSE
) {

491 
cmp
 = 1;

492 } ià(*(
cur
->
key
è=ğ
PRIVATEUSE
) {

493 
cmp
 = -1;

495 
cmp
 = *(
ext
->
key
è- *(
cur
->key);

497 } ià(
Ën
 == 1) {

498 
cmp
 = *(
ext
->
key
è- 
LDMLEXT
;

499 } ià(
cu¾’
 == 1) {

500 
cmp
 = 
LDMLEXT
 - *(
cur
->
key
);

502 
cmp
 = 
	`u´v_com·»InvCh¬sAsAscii
(
ext
->
key
, 
cur
->key);

505 
cmp
 = 
	`u´v_com·»InvCh¬sAsAscii
(
ext
->
key
, 
cur
->key);

507 ià(
cmp
 < 0) {

508 ià(
´ev
 =ğ
NULL
) {

509 *
fœ¡
 = 
ext
;

511 
´ev
->
Ãxt
 = 
ext
;

513 
ext
->
Ãxt
 = 
cur
;

516 ià(
cmp
 == 0) {

518 
bAdded
 = 
FALSE
;

521 
´ev
 = 
cur
;

522 
cur
 = cur->
Ãxt
;

526  
bAdded
;

527 
	}
}

530 
	$_š™ŸlizeULªguageTag
(
ULªguageTag
* 
Ïngg
) {

531 
št32_t
 
i
;

533 
Ïngg
->
buf
 = 
NULL
;

535 
Ïngg
->
Ïnguage
 = 
EMPTY
;

536 
i
 = 0; i < 
MAXEXTLANG
; i++) {

537 
Ïngg
->
exªg
[
i
] = 
NULL
;

540 
Ïngg
->
süt
 = 
EMPTY
;

541 
Ïngg
->
»giÚ
 = 
EMPTY
;

543 
Ïngg
->
v¬ŸÁs
 = 
NULL
;

544 
Ïngg
->
ex‹nsiÚs
 = 
NULL
;

546 
Ïngg
->
g¿ndçth”ed
 = 
EMPTY
;

547 
Ïngg
->
´iv©eu£
 = 
EMPTY
;

548 
	}
}

550 
	#KEYTYPEDATA
 "keyTy³D©a"

	)

551 
	#KEYMAP
 "keyM­"

	)

552 
	#TYPEMAP
 "ty³M­"

	)

553 
	#TYPEALIAS
 "ty³AlŸs"

	)

554 
	#MAX_BCP47_SUBTAG_LEN
 9

	)

555 
	#MAX_LDML_KEY_LEN
 22

	)

556 
	#MAX_LDML_TYPE_LEN
 32

	)

558 
št32_t


559 
	$_ldmlKeyToBCP47
(cÚ¡ * 
key
, 
št32_t
 
keyL’
,

560 * 
bıKey
, 
št32_t
 
bıKeyC­ac™y
,

561 
UE¼ÜCode
 *
¡©us
) {

562 
UResourûBundË
 *
rb
;

563 
keyBuf
[
MAX_LDML_KEY_LEN
];

564 
bıKeyBuf
[
MAX_BCP47_SUBTAG_LEN
];

565 
št32_t
 
»suÉL’
 = 0;

566 
št32_t
 
i
;

567 
UE¼ÜCode
 
tmpStus
 = 
U_ZERO_ERROR
;

568 cÚ¡ 
UCh¬
 *
uBıKey
;

569 
št32_t
 
bıKeyL’
;

571 ià(
keyL’
 < 0) {

572 
keyL’
 = (
št32_t
)
	`u´v_¡¾’
(
key
);

575 ià(
keyL’
 >ğ(
keyBuf
)) {

577 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

581 
	`u´v_memıy
(
keyBuf
, 
key
, 
keyL’
);

582 
keyBuf
[
keyL’
] = 0;

585 
i
 = 0; i < 
keyL’
; i++) {

586 
keyBuf
[
i
] = 
	`u´v_tŞow”
(keyBuf[i]);

589 
rb
 = 
	`u»s_İ’Dœeù
(
NULL
, 
KEYTYPEDATA
, 
¡©us
);

590 
	`u»s_g‘ByKey
(
rb
, 
KEYMAP
,„b, 
¡©us
);

592 ià(
	`U_FAILURE
(*
¡©us
)) {

593 
	`u»s_şo£
(
rb
);

597 
uBıKey
 = 
	`u»s_g‘SŒšgByKey
(
rb
, 
keyBuf
, &
bıKeyL’
, &
tmpStus
);

598 ià(
	`U_SUCCESS
(
tmpStus
)) {

599 
	`u_UCh¬sToCh¬s
(
uBıKey
, 
bıKeyBuf
, 
bıKeyL’
);

600 
bıKeyBuf
[
bıKeyL’
] = 0;

601 
»suÉL’
 = 
bıKeyL’
;

603 ià(
	`_isLDMLKey
(
key
, 
keyL’
)) {

604 
	`u´v_memıy
(
bıKeyBuf
, 
key
, 
keyL’
);

605 
bıKeyBuf
[
keyL’
] = 0;

606 
»suÉL’
 = 
keyL’
;

609 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

612 
	`u»s_şo£
(
rb
);

614 ià(
	`U_FAILURE
(*
¡©us
)) {

618 
	`u´v_memıy
(
bıKey
, 
bıKeyBuf
, 
	`u´v_mš
(
»suÉL’
, 
bıKeyC­ac™y
));

619  
	`u_‹rmš©eCh¬s
(
bıKey
, 
bıKeyC­ac™y
, 
»suÉL’
, 
¡©us
);

620 
	}
}

622 
št32_t


623 
	$_bı47ToLDMLKey
(cÚ¡ * 
bıKey
, 
št32_t
 
bıKeyL’
,

624 * 
key
, 
št32_t
 
keyC­ac™y
,

625 
UE¼ÜCode
 *
¡©us
) {

626 
UResourûBundË
 *
rb
;

627 
bıKeyBuf
[
MAX_BCP47_SUBTAG_LEN
];

628 
št32_t
 
»suÉL’
 = 0;

629 
št32_t
 
i
;

630 cÚ¡ *
»sKey
 = 
NULL
;

631 
UResourûBundË
 *
m­D©a
;

633 ià(
bıKeyL’
 < 0) {

634 
bıKeyL’
 = (
št32_t
)
	`u´v_¡¾’
(
bıKey
);

637 ià(
bıKeyL’
 >ğ(
bıKeyBuf
)) {

638 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

642 
	`u´v_memıy
(
bıKeyBuf
, 
bıKey
, 
bıKeyL’
);

643 
bıKeyBuf
[
bıKeyL’
] = 0;

646 
i
 = 0; i < 
bıKeyL’
; i++) {

647 
bıKeyBuf
[
i
] = 
	`u´v_tŞow”
(bcpKeyBuf[i]);

650 
rb
 = 
	`u»s_İ’Dœeù
(
NULL
, 
KEYTYPEDATA
, 
¡©us
);

651 
	`u»s_g‘ByKey
(
rb
, 
KEYMAP
,„b, 
¡©us
);

652 ià(
	`U_FAILURE
(*
¡©us
)) {

653 
	`u»s_şo£
(
rb
);

657 
m­D©a
 = 
	`u»s_g‘NextResourû
(
rb
, 
NULL
, 
¡©us
);

658 
	`U_SUCCESS
(*
¡©us
)) {

659 cÚ¡ 
UCh¬
 *
uBıKey
;

660 
tmpBıKeyBuf
[
MAX_BCP47_SUBTAG_LEN
];

661 
št32_t
 
tmpBıKeyL’
;

663 
uBıKey
 = 
	`u»s_g‘SŒšg
(
m­D©a
, &
tmpBıKeyL’
, 
¡©us
);

664 ià(
	`U_FAILURE
(*
¡©us
)) {

667 
	`u_UCh¬sToCh¬s
(
uBıKey
, 
tmpBıKeyBuf
, 
tmpBıKeyL’
);

668 
tmpBıKeyBuf
[
tmpBıKeyL’
] = 0;

669 ià(
	`u´v_com·»InvCh¬sAsAscii
(
bıKeyBuf
, 
tmpBıKeyBuf
) == 0) {

671 
»sKey
 = 
	`u»s_g‘Key
(
m­D©a
);

672 
»suÉL’
 = (
št32_t
)
	`u´v_¡¾’
(
»sKey
);

675 ià(!
	`u»s_hasNext
(
rb
)) {

678 
	`u»s_g‘NextResourû
(
rb
, 
m­D©a
, 
¡©us
);

680 
	`u»s_şo£
(
m­D©a
);

681 
	`u»s_şo£
(
rb
);

683 ià(
	`U_FAILURE
(*
¡©us
)) {

687 ià(
»sKey
 =ğ
NULL
) {

688 
»sKey
 = 
bıKeyBuf
;

689 
»suÉL’
 = 
bıKeyL’
;

692 
	`u´v_memıy
(
key
, 
»sKey
, 
	`u´v_mš
(
»suÉL’
, 
keyC­ac™y
));

693  
	`u_‹rmš©eCh¬s
(
key
, 
keyC­ac™y
, 
»suÉL’
, 
¡©us
);

694 
	}
}

696 
št32_t


697 
	$_ldmlTy³ToBCP47
(cÚ¡ * 
key
, 
št32_t
 
keyL’
,

698 cÚ¡ * 
ty³
, 
št32_t
 
ty³L’
,

699 * 
bıTy³
, 
št32_t
 
bıTy³C­ac™y
,

700 
UE¼ÜCode
 *
¡©us
) {

701 
UResourûBundË
 *
rb
, *
keyTy³D©a
, *
ty³M­FÜKey
;

702 
keyBuf
[
MAX_LDML_KEY_LEN
];

703 
ty³Buf
[
MAX_LDML_TYPE_LEN
];

704 
bıTy³Buf
[
MAX_BCP47_SUBTAG_LEN
];

705 
št32_t
 
»suÉL’
 = 0;

706 
št32_t
 
i
;

707 
UE¼ÜCode
 
tmpStus
 = 
U_ZERO_ERROR
;

708 cÚ¡ 
UCh¬
 *
uBıTy³
, *
uCªÚiÿlTy³
;

709 
št32_t
 
bıTy³L’
, 
ÿnÚiÿlTy³L’
;

710 
UBoŞ
 
isTimezÚe
 = 
FALSE
;

712 ià(
keyL’
 < 0) {

713 
keyL’
 = (
št32_t
)
	`u´v_¡¾’
(
key
);

715 ià(
keyL’
 >ğ(
keyBuf
)) {

717 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

720 
	`u´v_memıy
(
keyBuf
, 
key
, 
keyL’
);

721 
keyBuf
[
keyL’
] = 0;

724 
i
 = 0; i < 
keyL’
; i++) {

725 
keyBuf
[
i
] = 
	`u´v_tŞow”
(keyBuf[i]);

727 ià(
	`u´v_com·»InvCh¬sAsAscii
(
keyBuf
, "timezone") == 0) {

728 
isTimezÚe
 = 
TRUE
;

731 ià(
ty³L’
 < 0) {

732 
ty³L’
 = (
št32_t
)
	`u´v_¡¾’
(
ty³
);

734 ià(
ty³L’
 >ğ(
ty³Buf
)) {

735 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

739 ià(
isTimezÚe
) {

741 
i
 = 0; i < 
ty³L’
; i++) {

742 ià(*(
ty³
 + 
i
) == '/') {

743 
ty³Buf
[
i
] = ':';

745 
ty³Buf
[
i
] = *(
ty³
 + i);

748 
ty³Buf
[
ty³L’
] = 0;

749 
ty³
 = &
ty³Buf
[0];

752 
keyTy³D©a
 = 
	`u»s_İ’Dœeù
(
NULL
, 
KEYTYPEDATA
, 
¡©us
);

753 
rb
 = 
	`u»s_g‘ByKey
(
keyTy³D©a
, 
TYPEMAP
, 
NULL
, 
¡©us
);

754 ià(
	`U_FAILURE
(*
¡©us
)) {

755 
	`u»s_şo£
(
rb
);

756 
	`u»s_şo£
(
keyTy³D©a
);

760 
ty³M­FÜKey
 = 
	`u»s_g‘ByKey
(
rb
, 
keyBuf
, 
NULL
, &
tmpStus
);

761 
uBıTy³
 = 
	`u»s_g‘SŒšgByKey
(
ty³M­FÜKey
, 
ty³
, &
bıTy³L’
, &
tmpStus
);

762 ià(
	`U_SUCCESS
(
tmpStus
)) {

763 
	`u_UCh¬sToCh¬s
(
uBıTy³
, 
bıTy³Buf
, 
bıTy³L’
);

764 
»suÉL’
 = 
bıTy³L’
;

765 } ià(
tmpStus
 =ğ
U_MISSING_RESOURCE_ERROR
) {

767 
tmpStus
 = 
U_ZERO_ERROR
;

768 
	`u»s_g‘ByKey
(
keyTy³D©a
, 
TYPEALIAS
, 
rb
, &
tmpStus
);

769 
	`u»s_g‘ByKey
(
rb
, 
keyBuf
,„b, &
tmpStus
);

770 
uCªÚiÿlTy³
 = 
	`u»s_g‘SŒšgByKey
(
rb
, 
ty³
, &
ÿnÚiÿlTy³L’
, &
tmpStus
);

771 ià(
	`U_SUCCESS
(
tmpStus
)) {

772 
	`u_UCh¬sToCh¬s
(
uCªÚiÿlTy³
, 
ty³Buf
, 
ÿnÚiÿlTy³L’
);

773 ià(
isTimezÚe
) {

775 
i
 = 0; i < 
ÿnÚiÿlTy³L’
; i++) {

776 ià(
ty³Buf
[
i
] == '/') {

777 
ty³Buf
[
i
] = ':';

781 
ty³Buf
[
ÿnÚiÿlTy³L’
] = 0;

784 
uBıTy³
 = 
	`u»s_g‘SŒšgByKey
(
ty³M­FÜKey
, 
ty³Buf
, &
bıTy³L’
, &
tmpStus
);

785 ià(
	`U_SUCCESS
(
tmpStus
)) {

786 
	`u_UCh¬sToCh¬s
(
uBıTy³
, 
bıTy³Buf
, 
bıTy³L’
);

787 
»suÉL’
 = 
bıTy³L’
;

790 ià(
tmpStus
 =ğ
U_MISSING_RESOURCE_ERROR
) {

791 ià(
	`_isLDMLTy³
(
ty³
, 
ty³L’
)) {

792 
	`u´v_memıy
(
bıTy³Buf
, 
ty³
, 
ty³L’
);

793 
»suÉL’
 = 
ty³L’
;

796 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

800 *
¡©us
 = 
tmpStus
;

802 
	`u»s_şo£
(
rb
);

803 
	`u»s_şo£
(
ty³M­FÜKey
);

804 
	`u»s_şo£
(
keyTy³D©a
);

806 ià(
	`U_FAILURE
(*
¡©us
)) {

810 
	`u´v_memıy
(
bıTy³
, 
bıTy³Buf
, 
	`u´v_mš
(
»suÉL’
, 
bıTy³C­ac™y
));

811  
	`u_‹rmš©eCh¬s
(
bıTy³
, 
bıTy³C­ac™y
, 
»suÉL’
, 
¡©us
);

812 
	}
}

814 
št32_t


815 
	$_bı47ToLDMLTy³
(cÚ¡ * 
key
, 
št32_t
 
keyL’
,

816 cÚ¡ * 
bıTy³
, 
št32_t
 
bıTy³L’
,

817 * 
ty³
, 
št32_t
 
ty³C­ac™y
,

818 
UE¼ÜCode
 *
¡©us
) {

819 
UResourûBundË
 *
rb
;

820 
keyBuf
[
MAX_LDML_KEY_LEN
];

821 
bıTy³Buf
[
MAX_BCP47_SUBTAG_LEN
];

822 
št32_t
 
»suÉL’
 = 0;

823 
št32_t
 
i
;

824 cÚ¡ *
»sTy³
 = 
NULL
;

825 
UResourûBundË
 *
m­D©a
;

826 
UE¼ÜCode
 
tmpStus
 = 
U_ZERO_ERROR
;

827 
št32_t
 
cİyL’
;

829 ià(
keyL’
 < 0) {

830 
keyL’
 = (
št32_t
)
	`u´v_¡¾’
(
key
);

833 ià(
keyL’
 >ğ(
keyBuf
)) {

835 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

838 
	`u´v_memıy
(
keyBuf
, 
key
, 
keyL’
);

839 
keyBuf
[
keyL’
] = 0;

842 
i
 = 0; i < 
keyL’
; i++) {

843 
keyBuf
[
i
] = 
	`u´v_tŞow”
(keyBuf[i]);

847 ià(
bıTy³L’
 < 0) {

848 
bıTy³L’
 = (
št32_t
)
	`u´v_¡¾’
(
bıTy³
);

851 ià(
bıTy³L’
 >ğ(
bıTy³Buf
)) {

852 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

856 
	`u´v_memıy
(
bıTy³Buf
, 
bıTy³
, 
bıTy³L’
);

857 
bıTy³Buf
[
bıTy³L’
] = 0;

860 
i
 = 0; i < 
bıTy³L’
; i++) {

861 
bıTy³Buf
[
i
] = 
	`u´v_tŞow”
(bcpTypeBuf[i]);

864 
rb
 = 
	`u»s_İ’Dœeù
(
NULL
, 
KEYTYPEDATA
, 
¡©us
);

865 
	`u»s_g‘ByKey
(
rb
, 
TYPEMAP
,„b, 
¡©us
);

866 ià(
	`U_FAILURE
(*
¡©us
)) {

867 
	`u»s_şo£
(
rb
);

871 
	`u»s_g‘ByKey
(
rb
, 
keyBuf
,„b, &
tmpStus
);

872 
m­D©a
 = 
	`u»s_g‘NextResourû
(
rb
, 
NULL
, &
tmpStus
);

873 
	`U_SUCCESS
(
tmpStus
)) {

874 cÚ¡ 
UCh¬
 *
uBıTy³
;

875 
tmpBıTy³Buf
[
MAX_BCP47_SUBTAG_LEN
];

876 
št32_t
 
tmpBıTy³L’
;

878 
uBıTy³
 = 
	`u»s_g‘SŒšg
(
m­D©a
, &
tmpBıTy³L’
, &
tmpStus
);

879 ià(
	`U_FAILURE
(
tmpStus
)) {

882 
	`u_UCh¬sToCh¬s
(
uBıTy³
, 
tmpBıTy³Buf
, 
tmpBıTy³L’
);

883 
tmpBıTy³Buf
[
tmpBıTy³L’
] = 0;

884 ià(
	`u´v_com·»InvCh¬sAsAscii
(
bıTy³Buf
, 
tmpBıTy³Buf
) == 0) {

886 
»sTy³
 = 
	`u»s_g‘Key
(
m­D©a
);

887 
»suÉL’
 = (
št32_t
)
	`u´v_¡¾’
(
»sTy³
);

890 ià(!
	`u»s_hasNext
(
rb
)) {

893 
	`u»s_g‘NextResourû
(
rb
, 
m­D©a
, &
tmpStus
);

895 
	`u»s_şo£
(
m­D©a
);

896 
	`u»s_şo£
(
rb
);

898 ià(
	`U_FAILURE
(
tmpStus
è&&mpStu !ğ
U_MISSING_RESOURCE_ERROR
) {

899 *
¡©us
 = 
tmpStus
;

903 ià(
»sTy³
 =ğ
NULL
) {

904 
»sTy³
 = 
bıTy³Buf
;

905 
»suÉL’
 = 
bıTy³L’
;

908 
cİyL’
 = 
	`u´v_mš
(
»suÉL’
, 
ty³C­ac™y
);

909 
	`u´v_memıy
(
ty³
, 
»sTy³
, 
cİyL’
);

911 ià(
	`u´v_com·»InvCh¬sAsAscii
(
keyBuf
, "timezone") == 0) {

912 
i
 = 0; i < 
cİyL’
; i++) {

913 ià(*(
ty³
 + 
i
) == ':') {

914 *(
ty³
 + 
i
) = '/';

919  
	`u_‹rmš©eCh¬s
(
ty³
, 
ty³C­ac™y
, 
»suÉL’
, 
¡©us
);

920 
	}
}

922 
št32_t


923 
	$_­³ndLªguageToLªguageTag
(cÚ¡ * 
loÿËID
, * 
­³ndAt
, 
št32_t
 
ÿ·c™y
, 
UBoŞ
 
¡riù
, 
UE¼ÜCode
* 
¡©us
) {

924 
buf
[
ULOC_LANG_CAPACITY
];

925 
UE¼ÜCode
 
tmpStus
 = 
U_ZERO_ERROR
;

926 
št32_t
 
Ën
, 
i
;

927 
št32_t
 
»¦’
 = 0;

929 ià(
	`U_FAILURE
(*
¡©us
)) {

933 
Ën
 = 
	`uloc_g‘Lªguage
(
loÿËID
, 
buf
, (buf), &
tmpStus
);

934 ià(
	`U_FAILURE
(
tmpStus
è||mpStu =ğ
U_STRING_NOT_TERMINATED_WARNING
) {

935 ià(
¡riù
) {

936 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

939 
Ën
 = 0;

944 ià(
Ën
 == 0) {

945 ià(
»¦’
 < 
ÿ·c™y
) {

946 
	`u´v_memıy
(
­³ndAt
 + 
»¦’
, 
LANG_UND
, 
	`u´v_mš
(
LANG_UND_LEN
, 
ÿ·c™y
 -„eslen));

948 
»¦’
 +ğ
LANG_UND_LEN
;

949 } ià(!
	`_isLªguageSubg
(
buf
, 
Ën
)) {

951 ià(
¡riù
) {

952 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

955 ià(
»¦’
 < 
ÿ·c™y
) {

956 
	`u´v_memıy
(
­³ndAt
 + 
»¦’
, 
LANG_UND
, 
	`u´v_mš
(
LANG_UND_LEN
, 
ÿ·c™y
 -„eslen));

958 
»¦’
 +ğ
LANG_UND_LEN
;

961 
i
 = 0; 
DEPRECATEDLANGS
[i] !ğ
NULL
; i += 2) {

962 ià(
	`u´v_com·»InvCh¬sAsAscii
(
buf
, 
DEPRECATEDLANGS
[
i
]) == 0) {

963 
	`u´v_¡rıy
(
buf
, 
DEPRECATEDLANGS
[
i
 + 1]);

964 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
buf
);

968 ià(
»¦’
 < 
ÿ·c™y
) {

969 
	`u´v_memıy
(
­³ndAt
 + 
»¦’
, 
buf
, 
	`u´v_mš
(
Ën
, 
ÿ·c™y
 -„eslen));

971 
»¦’
 +ğ
Ën
;

973 
	`u_‹rmš©eCh¬s
(
­³ndAt
, 
ÿ·c™y
, 
»¦’
, 
¡©us
);

974  
»¦’
;

975 
	}
}

977 
št32_t


978 
	$_­³ndSütToLªguageTag
(cÚ¡ * 
loÿËID
, * 
­³ndAt
, 
št32_t
 
ÿ·c™y
, 
UBoŞ
 
¡riù
, 
UE¼ÜCode
* 
¡©us
) {

979 
buf
[
ULOC_SCRIPT_CAPACITY
];

980 
UE¼ÜCode
 
tmpStus
 = 
U_ZERO_ERROR
;

981 
št32_t
 
Ën
;

982 
št32_t
 
»¦’
 = 0;

984 ià(
	`U_FAILURE
(*
¡©us
)) {

988 
Ën
 = 
	`uloc_g‘Süt
(
loÿËID
, 
buf
, (buf), &
tmpStus
);

989 ià(
	`U_FAILURE
(
tmpStus
è||mpStu =ğ
U_STRING_NOT_TERMINATED_WARNING
) {

990 ià(
¡riù
) {

991 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

996 ià(
Ën
 > 0) {

997 ià(!
	`_isSütSubg
(
buf
, 
Ën
)) {

999 ià(
¡riù
) {

1000 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1004 ià(
»¦’
 < 
ÿ·c™y
) {

1005 *(
­³ndAt
 + 
»¦’
èğ
SEP
;

1007 
»¦’
++;

1009 ià(
»¦’
 < 
ÿ·c™y
) {

1010 
	`u´v_memıy
(
­³ndAt
 + 
»¦’
, 
buf
, 
	`u´v_mš
(
Ën
, 
ÿ·c™y
 -„eslen));

1012 
»¦’
 +ğ
Ën
;

1015 
	`u_‹rmš©eCh¬s
(
­³ndAt
, 
ÿ·c™y
, 
»¦’
, 
¡©us
);

1016  
»¦’
;

1017 
	}
}

1019 
št32_t


1020 
	$_­³ndRegiÚToLªguageTag
(cÚ¡ * 
loÿËID
, * 
­³ndAt
, 
št32_t
 
ÿ·c™y
, 
UBoŞ
 
¡riù
, 
UE¼ÜCode
* 
¡©us
) {

1021 
buf
[
ULOC_COUNTRY_CAPACITY
];

1022 
UE¼ÜCode
 
tmpStus
 = 
U_ZERO_ERROR
;

1023 
št32_t
 
Ën
;

1024 
št32_t
 
»¦’
 = 0;

1026 ià(
	`U_FAILURE
(*
¡©us
)) {

1030 
Ën
 = 
	`uloc_g‘CouÁry
(
loÿËID
, 
buf
, (buf), &
tmpStus
);

1031 ià(
	`U_FAILURE
(
tmpStus
è||mpStu =ğ
U_STRING_NOT_TERMINATED_WARNING
) {

1032 ià(
¡riù
) {

1033 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1038 ià(
Ën
 > 0) {

1039 ià(!
	`_isRegiÚSubg
(
buf
, 
Ën
)) {

1041 ià(
¡riù
) {

1042 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1046 ià(
»¦’
 < 
ÿ·c™y
) {

1047 *(
­³ndAt
 + 
»¦’
èğ
SEP
;

1049 
»¦’
++;

1051 ià(
»¦’
 < 
ÿ·c™y
) {

1052 
	`u´v_memıy
(
­³ndAt
 + 
»¦’
, 
buf
, 
	`u´v_mš
(
Ën
, 
ÿ·c™y
 -„eslen));

1054 
»¦’
 +ğ
Ën
;

1057 
	`u_‹rmš©eCh¬s
(
­³ndAt
, 
ÿ·c™y
, 
»¦’
, 
¡©us
);

1058  
»¦’
;

1059 
	}
}

1061 
št32_t


1062 
	$_­³ndV¬ŸÁsToLªguageTag
(cÚ¡ * 
loÿËID
, * 
­³ndAt
, 
št32_t
 
ÿ·c™y
, 
UBoŞ
 
¡riù
, UBoŞ *
hadPosix
, 
UE¼ÜCode
* 
¡©us
) {

1063 
buf
[
ULOC_FULLNAME_CAPACITY
];

1064 
UE¼ÜCode
 
tmpStus
 = 
U_ZERO_ERROR
;

1065 
št32_t
 
Ën
, 
i
;

1066 
št32_t
 
»¦’
 = 0;

1068 ià(
	`U_FAILURE
(*
¡©us
)) {

1072 
Ën
 = 
	`uloc_g‘V¬ŸÁ
(
loÿËID
, 
buf
, (buf), &
tmpStus
);

1073 ià(
	`U_FAILURE
(
tmpStus
è||mpStu =ğ
U_STRING_NOT_TERMINATED_WARNING
) {

1074 ià(
¡riù
) {

1075 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1080 ià(
Ën
 > 0) {

1081 *
p
, *
pV¬
;

1082 
UBoŞ
 
bNext
 = 
TRUE
;

1083 
V¬ŸÁLi¡EÁry
 *
v¬
;

1084 
V¬ŸÁLi¡EÁry
 *
v¬Fœ¡
 = 
NULL
;

1086 
pV¬
 = 
NULL
;

1087 
p
 = 
buf
;

1088 
bNext
) {

1089 ià(*
p
 =ğ
SEP
 || *°=ğ
LOCALE_SEP
 || *p == 0) {

1090 ià(*
p
 == 0) {

1091 
bNext
 = 
FALSE
;

1093 *
p
 = 0;

1095 ià(
pV¬
 =ğ
NULL
) {

1096 ià(
¡riù
) {

1097 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1104 
i
 = 0; *(
pV¬
 + i) != 0; i++) {

1105 *(
pV¬
 + 
i
èğ
	`u´v_tŞow”
(*(pVar + i));

1109 ià(
	`_isV¬ŸÁSubg
(
pV¬
, -1)) {

1110 ià(
	`u´v_¡rcmp
(
pV¬
,
POSIX_VALUE
)) {

1112 
v¬
 = 
	`u´v_m®loc
((
V¬ŸÁLi¡EÁry
));

1113 ià(
v¬
 =ğ
NULL
) {

1114 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1117 
v¬
->
v¬ŸÁ
 = 
pV¬
;

1118 ià(!
	`_addV¬ŸÁToLi¡
(&
v¬Fœ¡
, 
v¬
)) {

1120 
	`u´v_ä“
(
v¬
);

1121 ià(
¡riù
) {

1122 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1129 *
hadPosix
 = 
TRUE
;

1131 } ià(
¡riù
) {

1132 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1137 
pV¬
 = 
NULL
;

1138 } ià(
pV¬
 =ğ
NULL
) {

1139 
pV¬
 = 
p
;

1141 
p
++;

1144 ià(
	`U_SUCCESS
(*
¡©us
)) {

1145 ià(
v¬Fœ¡
 !ğ
NULL
) {

1146 
št32_t
 
v¬L’
;

1149 
v¬
 = 
v¬Fœ¡
;

1150 
v¬
 !ğ
NULL
) {

1151 ià(
»¦’
 < 
ÿ·c™y
) {

1152 *(
­³ndAt
 + 
»¦’
èğ
SEP
;

1154 
»¦’
++;

1155 
v¬L’
 = (
št32_t
)
	`u´v_¡¾’
(
v¬
->
v¬ŸÁ
);

1156 ià(
»¦’
 < 
ÿ·c™y
) {

1157 
	`u´v_memıy
(
­³ndAt
 + 
»¦’
, 
v¬
->
v¬ŸÁ
, 
	`u´v_mš
(
v¬L’
, 
ÿ·c™y
 -„eslen));

1159 
»¦’
 +ğ
v¬L’
;

1160 
v¬
 = v¬->
Ãxt
;

1166 
v¬
 = 
v¬Fœ¡
;

1167 
v¬
 !ğ
NULL
) {

1168 
V¬ŸÁLi¡EÁry
 *
tmpV¬
 = 
v¬
->
Ãxt
;

1169 
	`u´v_ä“
(
v¬
);

1170 
v¬
 = 
tmpV¬
;

1173 ià(
	`U_FAILURE
(*
¡©us
)) {

1178 
	`u_‹rmš©eCh¬s
(
­³ndAt
, 
ÿ·c™y
, 
»¦’
, 
¡©us
);

1179  
»¦’
;

1180 
	}
}

1182 
št32_t


1183 
	$_­³ndKeywÜdsToLªguageTag
(cÚ¡ * 
loÿËID
, * 
­³ndAt
, 
št32_t
 
ÿ·c™y
, 
UBoŞ
 
¡riù
, UBoŞ 
hadPosix
, 
UE¼ÜCode
* 
¡©us
) {

1184 
buf
[
ULOC_KEYWORD_AND_VALUES_CAPACITY
];

1185 
UEnum”©iÚ
 *
keywÜdEnum
 = 
NULL
;

1186 
št32_t
 
»¦’
 = 0;

1188 
keywÜdEnum
 = 
	`uloc_İ’KeywÜds
(
loÿËID
, 
¡©us
);

1189 ià(
	`U_FAILURE
(*
¡©us
è&& !
hadPosix
) {

1190 
	`u’um_şo£
(
keywÜdEnum
);

1193 ià(
keywÜdEnum
 !ğ
NULL
 || 
hadPosix
) {

1195 
št32_t
 
Ën
;

1196 cÚ¡ *
key
;

1197 
Ex‹nsiÚLi¡EÁry
 *
fœ¡Ext
 = 
NULL
;

1198 
Ex‹nsiÚLi¡EÁry
 *
ext
;

1199 
extBuf
[
ULOC_KEYWORD_AND_VALUES_CAPACITY
];

1200 *
pExtBuf
 = 
extBuf
;

1201 
št32_t
 
extBufC­ac™y
 = (
extBuf
);

1202 cÚ¡ *
bıKey
, *
bıV®ue
;

1203 
UE¼ÜCode
 
tmpStus
 = 
U_ZERO_ERROR
;

1204 
št32_t
 
keyËn
;

1205 
UBoŞ
 
isLDMLKeywÜd
;

1207 
TRUE
) {

1208 
key
 = 
	`u’um_Ãxt
(
keywÜdEnum
, 
NULL
, 
¡©us
);

1209 ià(
key
 =ğ
NULL
) {

1212 
Ën
 = 
	`uloc_g‘KeywÜdV®ue
(
loÿËID
, 
key
, 
buf
, (buf), &
tmpStus
);

1213 ià(
	`U_FAILURE
(
tmpStus
)) {

1214 ià(
¡riù
) {

1215 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1219 
tmpStus
 = 
U_ZERO_ERROR
;

1223 
keyËn
 = (
št32_t
)
	`u´v_¡¾’
(
key
);

1224 
isLDMLKeywÜd
 = (
keyËn
 > 1);

1226 ià(
isLDMLKeywÜd
) {

1227 
št32_t
 
modKeyL’
;

1230 
modKeyL’
 = 
	`_ldmlKeyToBCP47
(
key
, 
keyËn
, 
pExtBuf
, 
extBufC­ac™y
, &
tmpStus
);

1231 ià(
	`U_FAILURE
(
tmpStus
è||mpStu =ğ
U_STRING_NOT_TERMINATED_WARNING
) {

1232 ià(
¡riù
) {

1233 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1236 
tmpStus
 = 
U_ZERO_ERROR
;

1240 
bıKey
 = 
pExtBuf
;

1241 
pExtBuf
 +ğ(
modKeyL’
 + 1);

1242 
extBufC­ac™y
 -ğ(
modKeyL’
 + 1);

1244 
Ën
 = 
	`_ldmlTy³ToBCP47
(
key
, 
keyËn
, 
buf
,†’, 
pExtBuf
, 
extBufC­ac™y
, &
tmpStus
);

1245 ià(
	`U_FAILURE
(
tmpStus
è||mpStu =ğ
U_STRING_NOT_TERMINATED_WARNING
) {

1246 ià(
¡riù
) {

1247 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1250 
tmpStus
 = 
U_ZERO_ERROR
;

1253 
bıV®ue
 = 
pExtBuf
;

1254 
pExtBuf
 +ğ(
Ën
 + 1);

1255 
extBufC­ac™y
 -ğ(
Ën
 + 1);

1257 ià(*
key
 =ğ
PRIVATEUSE
) {

1258 ià(!
	`_isPriv©eu£V®ueSubgs
(
buf
, 
Ën
)) {

1259 ià(
¡riù
) {

1260 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1266 ià(!
	`_isEx‹nsiÚSšgËtÚ
(
key
, 
keyËn
è|| !
	`_isEx‹nsiÚSubgs
(
buf
, 
Ën
)) {

1267 ià(
¡riù
) {

1268 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1274 
bıKey
 = 
key
;

1275 ià((
Ën
 + 1è< 
extBufC­ac™y
) {

1276 
	`u´v_memıy
(
pExtBuf
, 
buf
, 
Ën
);

1277 
bıV®ue
 = 
pExtBuf
;

1279 
pExtBuf
 +ğ
Ën
;

1281 *
pExtBuf
 = 0;

1282 
pExtBuf
++;

1284 
extBufC­ac™y
 -ğ(
Ën
 + 1);

1286 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1292 
ext
 = 
	`u´v_m®loc
((
Ex‹nsiÚLi¡EÁry
));

1293 ià(
ext
 =ğ
NULL
) {

1294 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1297 
ext
->
key
 = 
bıKey
;

1298 
ext
->
v®ue
 = 
bıV®ue
;

1300 ià(!
	`_addEx‹nsiÚToLi¡
(&
fœ¡Ext
, 
ext
, 
TRUE
)) {

1301 
	`u´v_ä“
(
ext
);

1302 ià(
¡riù
) {

1303 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1310 ià(
hadPosix
) {

1312 
ext
 = 
	`u´v_m®loc
((
Ex‹nsiÚLi¡EÁry
));

1313 ià(
ext
 =ğ
NULL
) {

1314 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1316 
ext
->
key
 = 
POSIX_KEY
;

1317 
ext
->
v®ue
 = 
POSIX_VALUE
;

1319 ià(!
	`_addEx‹nsiÚToLi¡
(&
fœ¡Ext
, 
ext
, 
TRUE
)) {

1320 
	`u´v_ä“
(
ext
);

1324 ià(
	`U_SUCCESS
(*
¡©us
è&& (
fœ¡Ext
 !ğ
NULL
)) {

1325 
UBoŞ
 
¡¬tLDMLEx‹nsiÚ
 = 
FALSE
;

1328 
ext
 = 
fœ¡Ext
;

1329 
ext
 !ğ
NULL
) {

1330 ià((
št32_t
)
	`u´v_¡¾’
(
ext
->
key
è> 1 && !
¡¬tLDMLEx‹nsiÚ
) {

1332 ià(
»¦’
 < 
ÿ·c™y
) {

1333 *(
­³ndAt
 + 
»¦’
èğ
SEP
;

1335 
»¦’
++;

1336 ià(
»¦’
 < 
ÿ·c™y
) {

1337 *(
­³ndAt
 + 
»¦’
èğ
LDMLEXT
;

1339 
»¦’
++;

1340 
¡¬tLDMLEx‹nsiÚ
 = 
TRUE
;

1343 ià(
»¦’
 < 
ÿ·c™y
) {

1344 *(
­³ndAt
 + 
»¦’
èğ
SEP
;

1346 
»¦’
++;

1347 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
ext
->
key
);

1348 ià(
»¦’
 < 
ÿ·c™y
) {

1349 
	`u´v_memıy
(
­³ndAt
 + 
»¦’
, 
ext
->
key
, 
	`u´v_mš
(
Ën
, 
ÿ·c™y
 -„eslen));

1351 
»¦’
 +ğ
Ën
;

1352 ià(
»¦’
 < 
ÿ·c™y
) {

1353 *(
­³ndAt
 + 
»¦’
èğ
SEP
;

1355 
»¦’
++;

1356 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
ext
->
v®ue
);

1357 ià(
»¦’
 < 
ÿ·c™y
) {

1358 
	`u´v_memıy
(
­³ndAt
 + 
»¦’
, 
ext
->
v®ue
, 
	`u´v_mš
(
Ën
, 
ÿ·c™y
 -„eslen));

1360 
»¦’
 +ğ
Ën
;

1362 
ext
 =ƒxt->
Ãxt
;

1366 
ext
 = 
fœ¡Ext
;

1367 
ext
 !ğ
NULL
) {

1368 
Ex‹nsiÚLi¡EÁry
 *
tmpExt
 = 
ext
->
Ãxt
;

1369 
	`u´v_ä“
(
ext
);

1370 
ext
 = 
tmpExt
;

1373 
	`u’um_şo£
(
keywÜdEnum
);

1375 ià(
	`U_FAILURE
(*
¡©us
)) {

1380  
	`u_‹rmš©eCh¬s
(
­³ndAt
, 
ÿ·c™y
, 
»¦’
, 
¡©us
);

1381 
	}
}

1389 
	$_­³ndLDMLEx‹nsiÚAsKeywÜds
(cÚ¡ * 
ldmËxt
, 
Ex‹nsiÚLi¡EÁry
** 
­³ndTo
, * 
buf
, 
št32_t
 
bufSize
, 
UBoŞ
 *
posixV¬ŸÁ
, 
UE¼ÜCode
 *
¡©us
) {

1390 cÚ¡ *
p
, *
pNext
, *
pS•
;

1391 cÚ¡ *
pBıKey
, *
pBıTy³
;

1392 cÚ¡ *
pKey
, *
pTy³
;

1393 
št32_t
 
bıKeyL’
 = 0, 
bıTy³L’
;

1394 
Ex‹nsiÚLi¡EÁry
 *
kwd
, *
ÃxtKwd
;

1395 
Ex‹nsiÚLi¡EÁry
 *
kwdFœ¡
 = 
NULL
;

1396 
št32_t
 
bufIdx
 = 0;

1397 
št32_t
 
Ën
;

1399 
pNext
 = 
ldmËxt
;

1400 
pBıKey
 = 
pBıTy³
 = 
NULL
;

1401 
pNext
) {

1402 
p
 = 
pS•
 = 
pNext
;

1405 *
pS•
) {

1406 ià(*
pS•
 =ğ
SEP
) {

1409 
pS•
++;

1411 ià(*
pS•
 == 0) {

1413 
pNext
 = 
NULL
;

1415 
pNext
 = 
pS•
 + 1;

1418 ià(
pBıKey
 =ğ
NULL
) {

1419 
pBıKey
 = 
p
;

1420 
bıKeyL’
 = (
št32_t
)(
pS•
 - 
p
);

1422 
pBıTy³
 = 
p
;

1423 
bıTy³L’
 = (
št32_t
)(
pS•
 - 
p
);

1426 
Ën
 = 
	`_bı47ToLDMLKey
(
pBıKey
, 
bıKeyL’
, 
buf
 + 
bufIdx
, 
bufSize
 - bufIdx - 1, 
¡©us
);

1427 ià(
	`U_FAILURE
(*
¡©us
)) {

1428 
ş—nup
;

1430 
pKey
 = 
buf
 + 
bufIdx
;

1431 
bufIdx
 +ğ
Ën
;

1432 *(
buf
 + 
bufIdx
) = 0;

1433 
bufIdx
++;

1436 
Ën
 = 
	`_bı47ToLDMLTy³
(
pKey
, -1, 
pBıTy³
, 
bıTy³L’
, 
buf
 + 
bufIdx
, 
bufSize
 - bufIdx - 1, 
¡©us
);

1437 ià(
	`U_FAILURE
(*
¡©us
)) {

1438 
ş—nup
;

1440 
pTy³
 = 
buf
 + 
bufIdx
;

1441 
bufIdx
 +ğ
Ën
;

1442 *(
buf
 + 
bufIdx
) = 0;

1443 
bufIdx
++;

1448 iàĞ!
	`u´v_¡rcmp
(
pKey
,
POSIX_KEY
è&& !u´v_¡rcmp(
pTy³
,
POSIX_VALUE
) ) {

1449 *
posixV¬ŸÁ
 = 
TRUE
;

1452 
kwd
 = 
	`u´v_m®loc
((
Ex‹nsiÚLi¡EÁry
));

1453 ià(
kwd
 =ğ
NULL
) {

1454 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1455 
ş—nup
;

1458 
kwd
->
key
 = 
pKey
;

1459 
kwd
->
v®ue
 = 
pTy³
;

1461 ià(!
	`_addEx‹nsiÚToLi¡
(&
kwdFœ¡
, 
kwd
, 
FALSE
)) {

1462 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1463 
	`u´v_ä“
(
kwd
);

1464 
ş—nup
;

1469 
pBıKey
 = 
NULL
;

1470 
pBıTy³
 = 
NULL
;

1474 ià(
pBıKey
 !ğ
NULL
) {

1475 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1476 
ş—nup
;

1479 
kwd
 = 
kwdFœ¡
;

1480 
kwd
 !ğ
NULL
) {

1481 
ÃxtKwd
 = 
kwd
->
Ãxt
;

1482 
	`_addEx‹nsiÚToLi¡
(
­³ndTo
, 
kwd
, 
FALSE
);

1483 
kwd
 = 
ÃxtKwd
;

1488 
ş—nup
:

1489 
kwd
 = 
kwdFœ¡
;

1490 
kwd
 !ğ
NULL
) {

1491 
ÃxtKwd
 = 
kwd
->
Ãxt
;

1492 
	`u´v_ä“
(
kwd
);

1493 
kwd
 = 
ÃxtKwd
;

1495 
	}
}

1498 
št32_t


1499 
	$_­³ndKeywÜds
(
ULªguageTag
* 
Ïngg
, * 
­³ndAt
, 
št32_t
 
ÿ·c™y
, 
UE¼ÜCode
* 
¡©us
) {

1500 
št32_t
 
»¦’
 = 0;

1501 
št32_t
 
i
, 
n
;

1502 
št32_t
 
Ën
;

1503 
Ex‹nsiÚLi¡EÁry
 *
kwdFœ¡
 = 
NULL
;

1504 
Ex‹nsiÚLi¡EÁry
 *
kwd
;

1505 cÚ¡ *
key
, *
ty³
;

1506 
kwdBuf
[
ULOC_KEYWORDS_CAPACITY
];

1507 
UBoŞ
 
posixV¬ŸÁ
 = 
FALSE
;

1509 ià(
	`U_FAILURE
(*
¡©us
)) {

1513 
n
 = 
	`uÉag_g‘Ex‹nsiÚsSize
(
Ïngg
);

1516 
i
 = 0; i < 
n
; i++) {

1517 
key
 = 
	`uÉag_g‘Ex‹nsiÚKey
(
Ïngg
, 
i
);

1518 
ty³
 = 
	`uÉag_g‘Ex‹nsiÚV®ue
(
Ïngg
, 
i
);

1519 ià(*
key
 =ğ
LDMLEXT
) {

1520 
	`_­³ndLDMLEx‹nsiÚAsKeywÜds
(
ty³
, &
kwdFœ¡
, 
kwdBuf
, (kwdBuf), &
posixV¬ŸÁ
, 
¡©us
);

1521 ià(
	`U_FAILURE
(*
¡©us
)) {

1525 
kwd
 = 
	`u´v_m®loc
((
Ex‹nsiÚLi¡EÁry
));

1526 ià(
kwd
 =ğ
NULL
) {

1527 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1530 
kwd
->
key
 = key;

1531 
kwd
->
v®ue
 = 
ty³
;

1532 ià(!
	`_addEx‹nsiÚToLi¡
(&
kwdFœ¡
, 
kwd
, 
FALSE
)) {

1533 
	`u´v_ä“
(
kwd
);

1534 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1540 ià(
	`U_SUCCESS
(*
¡©us
)) {

1541 
ty³
 = 
	`uÉag_g‘Priv©eU£
(
Ïngg
);

1542 ià((
št32_t
)
	`u´v_¡¾’
(
ty³
) > 0) {

1544 
kwd
 = 
	`u´v_m®loc
((
Ex‹nsiÚLi¡EÁry
));

1545 ià(
kwd
 =ğ
NULL
) {

1546 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1548 
kwd
->
key
 = 
PRIVATEUSE_KEY
;

1549 
kwd
->
v®ue
 = 
ty³
;

1550 ià(!
	`_addEx‹nsiÚToLi¡
(&
kwdFœ¡
, 
kwd
, 
FALSE
)) {

1551 
	`u´v_ä“
(
kwd
);

1552 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1560 ià(
	`U_SUCCESS
(*
¡©us
è&& 
posixV¬ŸÁ
) {

1561 
Ën
 = (
št32_t
è
	`u´v_¡¾’
(
_POSIX
);

1562 ià(
»¦’
 < 
ÿ·c™y
) {

1563 
	`u´v_memıy
(
­³ndAt
 + 
»¦’
, 
_POSIX
, 
	`u´v_mš
(
Ën
, 
ÿ·c™y
 -„eslen));

1565 
»¦’
 +ğ
Ën
;

1568 ià(
	`U_SUCCESS
(*
¡©us
è&& 
kwdFœ¡
 !ğ
NULL
) {

1570 
kwd
 = 
kwdFœ¡
;

1571 
kwd
 !ğ
NULL
) {

1572 ià(
»¦’
 < 
ÿ·c™y
) {

1573 ià(
kwd
 =ğ
kwdFœ¡
) {

1575 *(
­³ndAt
 + 
»¦’
èğ
LOCALE_EXT_SEP
;

1578 *(
­³ndAt
 + 
»¦’
èğ
LOCALE_KEYWORD_SEP
;

1581 
»¦’
++;

1584 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
kwd
->
key
);

1585 ià(
»¦’
 < 
ÿ·c™y
) {

1586 
	`u´v_memıy
(
­³ndAt
 + 
»¦’
, 
kwd
->
key
, 
	`u´v_mš
(
Ën
, 
ÿ·c™y
 -„eslen));

1588 
»¦’
 +ğ
Ën
;

1591 ià(
»¦’
 < 
ÿ·c™y
) {

1592 *(
­³ndAt
 + 
»¦’
èğ
LOCALE_KEY_TYPE_SEP
;

1594 
»¦’
++;

1597 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
kwd
->
v®ue
);

1598 ià(
»¦’
 < 
ÿ·c™y
) {

1599 
	`u´v_memıy
(
­³ndAt
 + 
»¦’
, 
kwd
->
v®ue
, 
	`u´v_mš
(
Ën
, 
ÿ·c™y
 -„eslen));

1601 
»¦’
 +ğ
Ën
;

1603 
kwd
 = kwd->
Ãxt
;

1608 
kwd
 = 
kwdFœ¡
;

1609 
kwd
 !ğ
NULL
) {

1610 
Ex‹nsiÚLi¡EÁry
 *
tmpKwd
 = 
kwd
->
Ãxt
;

1611 
	`u´v_ä“
(
kwd
);

1612 
kwd
 = 
tmpKwd
;

1615 ià(
	`U_FAILURE
(*
¡©us
)) {

1619  
	`u_‹rmš©eCh¬s
(
­³ndAt
, 
ÿ·c™y
, 
»¦’
, 
¡©us
);

1620 
	}
}

1631 
	#LANG
 0x0001

	)

1632 
	#EXTL
 0x0002

	)

1633 
	#SCRT
 0x0004

	)

1634 
	#REGN
 0x0008

	)

1635 
	#VART
 0x0010

	)

1636 
	#EXTS
 0x0020

	)

1637 
	#EXTV
 0x0040

	)

1638 
	#PRIV
 0x0080

	)

1640 
ULªguageTag
*

1641 
	$uÉag_·r£
(cÚ¡ * 
g
, 
št32_t
 
gL’
, iÁ32_t* 
·r£dL’
, 
UE¼ÜCode
* 
¡©us
) {

1642 
ULªguageTag
 *
t
;

1643 *
gBuf
;

1644 
št16_t
 
Ãxt
;

1645 *
pSubg
, *
pNext
, *
pLa¡GoodPos™iÚ
;

1646 
št32_t
 
subgL’
;

1647 
št32_t
 
exªgIdx
;

1648 
Ex‹nsiÚLi¡EÁry
 *
pEx‹nsiÚ
;

1649 *
pExtV®ueSubg
, *
pExtV®ueSubgEnd
;

1650 
št32_t
 
i
;

1651 
UBoŞ
 
isLDMLEx‹nsiÚ
, 
»qLDMLTy³
;

1653 ià(
·r£dL’
 !ğ
NULL
) {

1654 *
·r£dL’
 = 0;

1657 ià(
	`U_FAILURE
(*
¡©us
)) {

1658  
NULL
;

1661 ià(
gL’
 < 0) {

1662 
gL’
 = (
št32_t
)
	`u´v_¡¾’
(
g
);

1666 
gBuf
 = (*)
	`u´v_m®loc
(
gL’
 + 1);

1667 ià(
gBuf
 =ğ
NULL
) {

1668 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1669  
NULL
;

1671 
	`u´v_memıy
(
gBuf
, 
g
, 
gL’
);

1672 *(
gBuf
 + 
gL’
) = 0;

1675 
t
 = (
ULªguageTag
*)
	`u´v_m®loc
((ULanguageTag));

1676 
	`_š™ŸlizeULªguageTag
(
t
);

1677 
t
->
buf
 = 
gBuf
;

1678 ià(
t
 =ğ
NULL
) {

1679 
	`u´v_ä“
(
gBuf
);

1680 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1681  
NULL
;

1684 ià(
gL’
 < 
MINLEN
) {

1686  
t
;

1690 
i
 = 0; 
GRANDFATHERED
[i] !ğ
NULL
; i += 2) {

1691 ià(
	`T_CSŒšg_¡ricmp
(
GRANDFATHERED
[
i
], 
gBuf
) == 0) {

1693 
	`u´v_¡rıy
(
t
->
buf
, 
GRANDFATHERED
[
i
 + 1]);

1694 
t
->
Ïnguage
 =->
buf
;

1695 ià(
·r£dL’
 !ğ
NULL
) {

1696 *
·r£dL’
 = 
gL’
;

1698  
t
;

1711 
Ãxt
 = 
LANG
 | 
PRIV
;

1712 
pNext
 = 
pLa¡GoodPos™iÚ
 = 
gBuf
;

1713 
exªgIdx
 = 0;

1714 
pEx‹nsiÚ
 = 
NULL
;

1715 
pExtV®ueSubg
 = 
NULL
;

1716 
pExtV®ueSubgEnd
 = 
NULL
;

1717 
isLDMLEx‹nsiÚ
 = 
FALSE
;

1718 
»qLDMLTy³
 = 
FALSE
;

1720 
pNext
) {

1721 *
pS•
;

1723 
pSubg
 = 
pNext
;

1726 
pS•
 = 
pSubg
;

1727 *
pS•
) {

1728 ià(*
pS•
 =ğ
SEP
) {

1731 
pS•
++;

1733 ià(*
pS•
 == 0) {

1735 
pNext
 = 
NULL
;

1737 
pNext
 = 
pS•
 + 1;

1739 
subgL’
 = (
št32_t
)(
pS•
 - 
pSubg
);

1741 ià(
Ãxt
 & 
LANG
) {

1742 ià(
	`_isLªguageSubg
(
pSubg
, 
subgL’
)) {

1743 *
pS•
 = 0;

1744 
t
->
Ïnguage
 = 
	`T_CSŒšg_toLow”Ca£
(
pSubg
);

1746 
pLa¡GoodPos™iÚ
 = 
pS•
;

1747 
Ãxt
 = 
EXTL
 | 
SCRT
 | 
REGN
 | 
VART
 | 
EXTS
 | 
PRIV
;

1751 ià(
Ãxt
 & 
EXTL
) {

1752 ià(
	`_isExªgSubg
(
pSubg
, 
subgL’
)) {

1753 *
pS•
 = 0;

1754 
t
->
exªg
[
exªgIdx
++] = 
	`T_CSŒšg_toLow”Ca£
(
pSubg
);

1756 
pLa¡GoodPos™iÚ
 = 
pS•
;

1757 ià(
exªgIdx
 < 3) {

1758 
Ãxt
 = 
EXTL
 | 
SCRT
 | 
REGN
 | 
VART
 | 
EXTS
 | 
PRIV
;

1760 
Ãxt
 = 
SCRT
 | 
REGN
 | 
VART
 | 
EXTS
 | 
PRIV
;

1765 ià(
Ãxt
 & 
SCRT
) {

1766 ià(
	`_isSütSubg
(
pSubg
, 
subgL’
)) {

1767 *
p
 = 
pSubg
;

1769 *
pS•
 = 0;

1772 *
p
 = 
	`u´v_touµ”
(*p);

1773 
p
++;

1774 ; *
p
;…++) {

1775 *
p
 = 
	`u´v_tŞow”
(*p);

1778 
t
->
süt
 = 
pSubg
;

1780 
pLa¡GoodPos™iÚ
 = 
pS•
;

1781 
Ãxt
 = 
REGN
 | 
VART
 | 
EXTS
 | 
PRIV
;

1785 ià(
Ãxt
 & 
REGN
) {

1786 ià(
	`_isRegiÚSubg
(
pSubg
, 
subgL’
)) {

1787 *
pS•
 = 0;

1788 
t
->
»giÚ
 = 
	`T_CSŒšg_toUµ”Ca£
(
pSubg
);

1790 
pLa¡GoodPos™iÚ
 = 
pS•
;

1791 
Ãxt
 = 
VART
 | 
EXTS
 | 
PRIV
;

1795 ià(
Ãxt
 & 
VART
) {

1796 ià(
	`_isV¬ŸÁSubg
(
pSubg
, 
subgL’
)) {

1797 
V¬ŸÁLi¡EÁry
 *
v¬
;

1798 
UBoŞ
 
isAdded
;

1800 
v¬
 = (
V¬ŸÁLi¡EÁry
*)
	`u´v_m®loc
((VariantListEntry));

1801 ià(
v¬
 =ğ
NULL
) {

1802 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1803 
”rÜ
;

1805 *
pS•
 = 0;

1806 
v¬
->
v¬ŸÁ
 = 
	`T_CSŒšg_toUµ”Ca£
(
pSubg
);

1807 
isAdded
 = 
	`_addV¬ŸÁToLi¡
(&(
t
->
v¬ŸÁs
), 
v¬
);

1808 ià(!
isAdded
) {

1810 
	`u´v_ä“
(
v¬
);

1813 
pLa¡GoodPos™iÚ
 = 
pS•
;

1814 
Ãxt
 = 
VART
 | 
EXTS
 | 
PRIV
;

1818 ià(
Ãxt
 & 
EXTS
) {

1819 ià(
	`_isEx‹nsiÚSšgËtÚ
(
pSubg
, 
subgL’
)) {

1820 ià(
pEx‹nsiÚ
 !ğ
NULL
) {

1821 ià(
pExtV®ueSubg
 =ğ
NULL
 || 
pExtV®ueSubgEnd
 == NULL) {

1823 
	`u´v_ä“
(
pEx‹nsiÚ
);

1824 
pEx‹nsiÚ
 = 
NULL
;

1829 *
pExtV®ueSubgEnd
 = 0;

1830 
pEx‹nsiÚ
->
v®ue
 = 
	`T_CSŒšg_toLow”Ca£
(
pExtV®ueSubg
);

1833 ià(
	`_addEx‹nsiÚToLi¡
(&(
t
->
ex‹nsiÚs
), 
pEx‹nsiÚ
, 
FALSE
)) {

1834 
pLa¡GoodPos™iÚ
 = 
pExtV®ueSubgEnd
;

1837 
	`u´v_ä“
(
pEx‹nsiÚ
);

1838 
pEx‹nsiÚ
 = 
NULL
;

1842 ià(
isLDMLEx‹nsiÚ
 && 
»qLDMLTy³
) {

1844 
pEx‹nsiÚ
 = 
NULL
;

1849 
isLDMLEx‹nsiÚ
 = (
	`u´v_tŞow”
(*
pSubg
è=ğ
LDMLEXT
);

1852 
pEx‹nsiÚ
 = 
	`u´v_m®loc
((
Ex‹nsiÚLi¡EÁry
));

1853 ià(
pEx‹nsiÚ
 =ğ
NULL
) {

1854 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1855 
”rÜ
;

1857 *
pS•
 = 0;

1858 
pEx‹nsiÚ
->
key
 = 
	`T_CSŒšg_toLow”Ca£
(
pSubg
);

1859 
pEx‹nsiÚ
->
v®ue
 = 
NULL
;

1865 
pExtV®ueSubg
 = 
NULL
;

1866 
pExtV®ueSubgEnd
 = 
NULL
;

1868 
Ãxt
 = 
EXTV
;

1872 ià(
Ãxt
 & 
EXTV
) {

1873 ià(
	`_isEx‹nsiÚSubg
(
pSubg
, 
subgL’
)) {

1874 ià(
isLDMLEx‹nsiÚ
) {

1875 ià(
»qLDMLTy³
) {

1877 ià(!
	`_isLDMLTy³
(
pSubg
, 
subgL’
)) {

1882 
pExtV®ueSubgEnd
 = 
pS•
;

1883 
»qLDMLTy³
 = 
FALSE
;

1884 
Ãxt
 = 
EXTS
 | 
EXTV
 | 
PRIV
;

1887 ià(!
	`_isLDMLKey
(
pSubg
, 
subgL’
)) {

1892 
»qLDMLTy³
 = 
TRUE
;

1893 
Ãxt
 = 
EXTV
;

1897 
pExtV®ueSubgEnd
 = 
pS•
;

1898 
Ãxt
 = 
EXTS
 | 
EXTV
 | 
PRIV
;

1901 ià(
pExtV®ueSubg
 =ğ
NULL
) {

1904 
pExtV®ueSubg
 = 
pSubg
;

1909 ià(
Ãxt
 & 
PRIV
) {

1910 ià(
	`u´v_tŞow”
(*
pSubg
è=ğ
PRIVATEUSE
) {

1911 *
pPrivu£V®
;

1913 ià(
pEx‹nsiÚ
 !ğ
NULL
) {

1915 ià(
pExtV®ueSubg
 =ğ
NULL
 || 
pExtV®ueSubgEnd
 == NULL) {

1917 
	`u´v_ä“
(
pEx‹nsiÚ
);

1918 
pEx‹nsiÚ
 = 
NULL
;

1922 *
pExtV®ueSubgEnd
 = 0;

1923 
pEx‹nsiÚ
->
v®ue
 = 
	`T_CSŒšg_toLow”Ca£
(
pExtV®ueSubg
);

1926 ià(
	`_addEx‹nsiÚToLi¡
(&(
t
->
ex‹nsiÚs
), 
pEx‹nsiÚ
, 
FALSE
)) {

1927 
pLa¡GoodPos™iÚ
 = 
pExtV®ueSubgEnd
;

1928 
pEx‹nsiÚ
 = 
NULL
;

1931 
	`u´v_ä“
(
pEx‹nsiÚ
);

1932 
pEx‹nsiÚ
 = 
NULL
;

1939 ià(
pNext
 =ğ
NULL
) {

1944 
pPrivu£V®
 = 
pNext
;

1947 
pNext
) {

1948 
pSubg
 = 
pNext
;

1949 
pS•
 = 
pSubg
;

1950 *
pS•
) {

1951 ià(*
pS•
 =ğ
SEP
) {

1954 
pS•
++;

1956 ià(*
pS•
 == 0) {

1958 
pNext
 = 
NULL
;

1960 
pNext
 = 
pS•
 + 1;

1962 
subgL’
 = (
št32_t
)(
pS•
 - 
pSubg
);

1964 ià(
	`_isPriv©eu£V®ueSubg
(
pSubg
, 
subgL’
)) {

1965 
pLa¡GoodPos™iÚ
 = 
pS•
;

1970 ià(
pLa¡GoodPos™iÚ
 - 
pPrivu£V®
 > 0) {

1971 *
pLa¡GoodPos™iÚ
 = 0;

1972 
t
->
´iv©eu£
 = 
	`T_CSŒšg_toLow”Ca£
(
pPrivu£V®
);

1983 ià(
pEx‹nsiÚ
 !ğ
NULL
) {

1985 ià(
pExtV®ueSubg
 =ğ
NULL
 || 
pExtV®ueSubgEnd
 == NULL) {

1987 
	`u´v_ä“
(
pEx‹nsiÚ
);

1990 *
pExtV®ueSubgEnd
 = 0;

1991 
pEx‹nsiÚ
->
v®ue
 = 
	`T_CSŒšg_toLow”Ca£
(
pExtV®ueSubg
);

1993 ià(
	`_addEx‹nsiÚToLi¡
(&(
t
->
ex‹nsiÚs
), 
pEx‹nsiÚ
, 
FALSE
)) {

1994 
pLa¡GoodPos™iÚ
 = 
pExtV®ueSubgEnd
;

1996 
	`u´v_ä“
(
pEx‹nsiÚ
);

2001 ià(
·r£dL’
 !ğ
NULL
) {

2002 *
·r£dL’
 = (
št32_t
)(
pLa¡GoodPos™iÚ
 - 
t
->
buf
);

2005  
t
;

2007 
”rÜ
:

2008 
	`u´v_ä“
(
t
);

2009  
NULL
;

2010 
	}
}

2013 
	$uÉag_şo£
(
ULªguageTag
* 
Ïngg
) {

2015 ià(
Ïngg
 =ğ
NULL
) {

2019 
	`u´v_ä“
(
Ïngg
->
buf
);

2021 ià(
Ïngg
->
v¬ŸÁs
) {

2022 
V¬ŸÁLi¡EÁry
 *
curV¬
 = 
Ïngg
->
v¬ŸÁs
;

2023 
curV¬
) {

2024 
V¬ŸÁLi¡EÁry
 *
ÃxtV¬
 = 
curV¬
->
Ãxt
;

2025 
	`u´v_ä“
(
curV¬
);

2026 
curV¬
 = 
ÃxtV¬
;

2030 ià(
Ïngg
->
ex‹nsiÚs
) {

2031 
Ex‹nsiÚLi¡EÁry
 *
curExt
 = 
Ïngg
->
ex‹nsiÚs
;

2032 
curExt
) {

2033 
Ex‹nsiÚLi¡EÁry
 *
ÃxtExt
 = 
curExt
->
Ãxt
;

2034 
	`u´v_ä“
(
curExt
);

2035 
curExt
 = 
ÃxtExt
;

2039 
	`u´v_ä“
(
Ïngg
);

2040 
	}
}

2043 
	$uÉag_g‘Lªguage
(cÚ¡ 
ULªguageTag
* 
Ïngg
) {

2044  
Ïngg
->
Ïnguage
;

2045 
	}
}

2049 
	$uÉag_g‘JDKLªguage
(cÚ¡ 
ULªguageTag
* 
Ïngg
) {

2050 
št32_t
 
i
;

2051 
i
 = 0; 
DEPRECATEDLANGS
[i] !ğ
NULL
; i += 2) {

2052 ià(
	`u´v_com·»InvCh¬sAsAscii
(
DEPRECATEDLANGS
[
i
], 
Ïngg
->
Ïnguage
) == 0) {

2053  
DEPRECATEDLANGS
[
i
 + 1];

2056  
Ïngg
->
Ïnguage
;

2057 
	}
}

2061 
	$uÉag_g‘Exªg
(cÚ¡ 
ULªguageTag
* 
Ïngg
, 
št32_t
 
idx
) {

2062 ià(
idx
 >ğ0 && idx < 
MAXEXTLANG
) {

2063  
Ïngg
->
exªg
[
idx
];

2065  
NULL
;

2066 
	}
}

2068 
št32_t


2069 
	$uÉag_g‘ExªgSize
(cÚ¡ 
ULªguageTag
* 
Ïngg
) {

2070 
št32_t
 
size
 = 0;

2071 
št32_t
 
i
;

2072 
i
 = 0; i < 
MAXEXTLANG
; i++) {

2073 ià(
Ïngg
->
exªg
[
i
]) {

2074 
size
++;

2077  
size
;

2078 
	}
}

2081 
	$uÉag_g‘Süt
(cÚ¡ 
ULªguageTag
* 
Ïngg
) {

2082  
Ïngg
->
süt
;

2083 
	}
}

2086 
	$uÉag_g‘RegiÚ
(cÚ¡ 
ULªguageTag
* 
Ïngg
) {

2087  
Ïngg
->
»giÚ
;

2088 
	}
}

2091 
	$uÉag_g‘V¬ŸÁ
(cÚ¡ 
ULªguageTag
* 
Ïngg
, 
št32_t
 
idx
) {

2092 cÚ¡ *
v¬
 = 
NULL
;

2093 
V¬ŸÁLi¡EÁry
 *
cur
 = 
Ïngg
->
v¬ŸÁs
;

2094 
št32_t
 
i
 = 0;

2095 
cur
) {

2096 ià(
i
 =ğ
idx
) {

2097 
v¬
 = 
cur
->
v¬ŸÁ
;

2100 
cur
 = cur->
Ãxt
;

2101 
i
++;

2103  
v¬
;

2104 
	}
}

2106 
št32_t


2107 
	$uÉag_g‘V¬ŸÁsSize
(cÚ¡ 
ULªguageTag
* 
Ïngg
) {

2108 
št32_t
 
size
 = 0;

2109 
V¬ŸÁLi¡EÁry
 *
cur
 = 
Ïngg
->
v¬ŸÁs
;

2110 
TRUE
) {

2111 ià(
cur
 =ğ
NULL
) {

2114 
size
++;

2115 
cur
 = cur->
Ãxt
;

2117  
size
;

2118 
	}
}

2121 
	$uÉag_g‘Ex‹nsiÚKey
(cÚ¡ 
ULªguageTag
* 
Ïngg
, 
št32_t
 
idx
) {

2122 cÚ¡ *
key
 = 
NULL
;

2123 
Ex‹nsiÚLi¡EÁry
 *
cur
 = 
Ïngg
->
ex‹nsiÚs
;

2124 
št32_t
 
i
 = 0;

2125 
cur
) {

2126 ià(
i
 =ğ
idx
) {

2127 
key
 = 
cur
->key;

2130 
cur
 = cur->
Ãxt
;

2131 
i
++;

2133  
key
;

2134 
	}
}

2137 
	$uÉag_g‘Ex‹nsiÚV®ue
(cÚ¡ 
ULªguageTag
* 
Ïngg
, 
št32_t
 
idx
) {

2138 cÚ¡ *
v®
 = 
NULL
;

2139 
Ex‹nsiÚLi¡EÁry
 *
cur
 = 
Ïngg
->
ex‹nsiÚs
;

2140 
št32_t
 
i
 = 0;

2141 
cur
) {

2142 ià(
i
 =ğ
idx
) {

2143 
v®
 = 
cur
->
v®ue
;

2146 
cur
 = cur->
Ãxt
;

2147 
i
++;

2149  
v®
;

2150 
	}
}

2152 
št32_t


2153 
	$uÉag_g‘Ex‹nsiÚsSize
(cÚ¡ 
ULªguageTag
* 
Ïngg
) {

2154 
št32_t
 
size
 = 0;

2155 
Ex‹nsiÚLi¡EÁry
 *
cur
 = 
Ïngg
->
ex‹nsiÚs
;

2156 
TRUE
) {

2157 ià(
cur
 =ğ
NULL
) {

2160 
size
++;

2161 
cur
 = cur->
Ãxt
;

2163  
size
;

2164 
	}
}

2167 
	$uÉag_g‘Priv©eU£
(cÚ¡ 
ULªguageTag
* 
Ïngg
) {

2168  
Ïngg
->
´iv©eu£
;

2169 
	}
}

2173 
	$uÉag_g‘G¿ndçth”ed
(cÚ¡ 
ULªguageTag
* 
Ïngg
) {

2174  
Ïngg
->
g¿ndçth”ed
;

2175 
	}
}

2186 
U_DRAFT
 
št32_t
 
U_EXPORT2


2187 
	$uloc_toLªguageTag
(cÚ¡ * 
loÿËID
,

2188 * 
Ïngg
,

2189 
št32_t
 
ÏnggC­ac™y
,

2190 
UBoŞ
 
¡riù
,

2191 
UE¼ÜCode
* 
¡©us
) {

2193 
ÿnÚiÿl
[256];

2194 
št32_t
 
»¦’
 = 0;

2195 
UE¼ÜCode
 
tmpStus
 = 
U_ZERO_ERROR
;

2196 
UBoŞ
 
hadPosix
 = 
FALSE
;

2199 
ÿnÚiÿl
[0] = 0;

2200 ià(
	`u´v_¡¾’
(
loÿËID
) > 0) {

2201 
	`uloc_ÿnÚiÿlize
(
loÿËID
, 
ÿnÚiÿl
, (ÿnÚiÿl), &
tmpStus
);

2202 ià(
tmpStus
 !ğ
U_ZERO_ERROR
) {

2203 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

2208 
»¦’
 +ğ
	`_­³ndLªguageToLªguageTag
(
ÿnÚiÿl
, 
Ïngg
, 
ÏnggC­ac™y
, 
¡riù
, 
¡©us
);

2209 
»¦’
 +ğ
	`_­³ndSütToLªguageTag
(
ÿnÚiÿl
, 
Ïngg
 +„e¦’, 
ÏnggC­ac™y
 -„e¦’, 
¡riù
, 
¡©us
);

2210 
»¦’
 +ğ
	`_­³ndRegiÚToLªguageTag
(
ÿnÚiÿl
, 
Ïngg
 +„e¦’, 
ÏnggC­ac™y
 -„e¦’, 
¡riù
, 
¡©us
);

2211 
»¦’
 +ğ
	`_­³ndV¬ŸÁsToLªguageTag
(
ÿnÚiÿl
, 
Ïngg
 +„e¦’, 
ÏnggC­ac™y
 -„e¦’, 
¡riù
, &
hadPosix
, 
¡©us
);

2212 
»¦’
 +ğ
	`_­³ndKeywÜdsToLªguageTag
(
ÿnÚiÿl
, 
Ïngg
 +„e¦’, 
ÏnggC­ac™y
 -„e¦’, 
¡riù
, 
hadPosix
, 
¡©us
);

2214  
»¦’
;

2215 
	}
}

2218 
U_DRAFT
 
št32_t
 
U_EXPORT2


2219 
	$uloc_fÜLªguageTag
(cÚ¡ * 
Ïngg
,

2220 * 
loÿËID
,

2221 
št32_t
 
loÿËIDC­ac™y
,

2222 
št32_t
* 
·r£dL’gth
,

2223 
UE¼ÜCode
* 
¡©us
) {

2224 
ULªguageTag
 *
É
;

2225 
št32_t
 
»¦’
 = 0;

2226 cÚ¡ *
subg
, *
p
;

2227 
št32_t
 
Ën
;

2228 
št32_t
 
i
, 
n
;

2229 
UBoŞ
 
noRegiÚ
 = 
TRUE
;

2231 
É
 = 
	`uÉag_·r£
(
Ïngg
, -1, 
·r£dL’gth
, 
¡©us
);

2232 ià(
	`U_FAILURE
(*
¡©us
)) {

2237 
subg
 = 
	`uÉag_g‘ExªgSize
(
É
è> 0 ? 
	`uÉag_g‘Exªg
Öt, 0è: 
	`uÉag_g‘Lªguage
(lt);

2238 ià(
	`u´v_com·»InvCh¬sAsAscii
(
subg
, 
LANG_UND
) != 0) {

2239 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
subg
);

2240 ià(
Ën
 > 0) {

2241 ià(
»¦’
 < 
loÿËIDC­ac™y
) {

2242 
	`u´v_memıy
(
loÿËID
, 
subg
, 
	`u´v_mš
(
Ën
, 
loÿËIDC­ac™y
 - 
»¦’
));

2244 
»¦’
 +ğ
Ën
;

2249 
subg
 = 
	`uÉag_g‘Süt
(
É
);

2250 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
subg
);

2251 ià(
Ën
 > 0) {

2252 ià(
»¦’
 < 
loÿËIDC­ac™y
) {

2253 *(
loÿËID
 + 
»¦’
èğ
LOCALE_SEP
;

2255 
»¦’
++;

2258 
p
 = 
subg
;

2259 *
p
) {

2260 ià(
»¦’
 < 
loÿËIDC­ac™y
) {

2261 ià(
p
 =ğ
subg
) {

2262 *(
loÿËID
 + 
»¦’
èğ
	`u´v_touµ”
(*
p
);

2264 *(
loÿËID
 + 
»¦’
èğ*
p
;

2267 
»¦’
++;

2268 
p
++;

2273 
subg
 = 
	`uÉag_g‘RegiÚ
(
É
);

2274 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
subg
);

2275 ià(
Ën
 > 0) {

2276 ià(
»¦’
 < 
loÿËIDC­ac™y
) {

2277 *(
loÿËID
 + 
»¦’
èğ
LOCALE_SEP
;

2279 
»¦’
++;

2281 
p
 = 
subg
;

2282 *
p
) {

2283 ià(
»¦’
 < 
loÿËIDC­ac™y
) {

2284 *(
loÿËID
 + 
»¦’
èğ
	`u´v_touµ”
(*
p
);

2286 
»¦’
++;

2287 
p
++;

2289 
noRegiÚ
 = 
FALSE
;

2293 
n
 = 
	`uÉag_g‘V¬ŸÁsSize
(
É
);

2294 ià(
n
 > 0) {

2295 ià(
noRegiÚ
) {

2296 ià(
»¦’
 < 
loÿËIDC­ac™y
) {

2297 *(
loÿËID
 + 
»¦’
èğ
LOCALE_SEP
;

2299 
»¦’
++;

2302 
i
 = 0; i < 
n
; i++) {

2303 
subg
 = 
	`uÉag_g‘V¬ŸÁ
(
É
, 
i
);

2304 ià(
»¦’
 < 
loÿËIDC­ac™y
) {

2305 *(
loÿËID
 + 
»¦’
èğ
LOCALE_SEP
;

2307 
»¦’
++;

2309 
p
 = 
subg
;

2310 *
p
) {

2311 ià(
»¦’
 < 
loÿËIDC­ac™y
) {

2312 *(
loÿËID
 + 
»¦’
èğ
	`u´v_touµ”
(*
p
);

2314 
»¦’
++;

2315 
p
++;

2321 
n
 = 
	`uÉag_g‘Ex‹nsiÚsSize
(
É
);

2322 
subg
 = 
	`uÉag_g‘Priv©eU£
(
É
);

2323 ià(
n
 > 0 || 
	`u´v_¡¾’
(
subg
) > 0) {

2324 ià(
»¦’
 == 0) {

2326 ià(
»¦’
 < 
loÿËIDC­ac™y
) {

2327 
	`u´v_memıy
(
loÿËID
 + 
»¦’
, 
LANG_UND
, 
	`u´v_mš
(
LANG_UND_LEN
, 
loÿËIDC­ac™y
 -„eslen));

2329 
»¦’
 +ğ
LANG_UND_LEN
;

2331 
Ën
 = 
	`_­³ndKeywÜds
(
É
, 
loÿËID
 + 
»¦’
, 
loÿËIDC­ac™y
 -„e¦’, 
¡©us
);

2332 
»¦’
 +ğ
Ën
;

2335 
	`uÉag_şo£
(
É
);

2336  
	`u_‹rmš©eCh¬s
(
loÿËID
, 
loÿËIDC­ac™y
, 
»¦’
, 
¡©us
);

2337 
	}
}

	@ulocimp.h

8 #iâdeà
ULOCIMP_H


9 
	#ULOCIMP_H


	)

11 
	~"unicode/uloc.h
"

21 
U_CAPI
 
UEnum”©iÚ
* 
U_EXPORT2


22 
uloc_İ’KeywÜdLi¡
(cÚ¡ *
keywÜdLi¡
, 
št32_t
 
keywÜdLi¡Size
, 
UE¼ÜCode
* 
¡©us
);

28 
U_CAPI
 cÚ¡ 
UCh¬
 * 
U_EXPORT2


29 
uloc_g‘TabËSŒšgW™hF®lback
(

30 cÚ¡ *
·th
,

31 cÚ¡ *
loÿË
,

32 cÚ¡ *
bËKey
,

33 cÚ¡ *
subTabËKey
,

34 cÚ¡ *
™emKey
,

35 
št32_t
 *
pL’gth
,

36 
UE¼ÜCode
 *
pE¼ÜCode
);

39 
	#_isIDS•¬©Ü
(
a
è× =ğ'_' ||‡ =ğ'-')

	)

41 
U_CFUNC
 const *

42 
uloc_g‘Cu¼’tCouÁryID
(cÚ¡ * 
ŞdID
);

44 
U_CFUNC
 const *

45 
uloc_g‘Cu¼’tLªguageID
(cÚ¡ * 
ŞdID
);

47 
U_CFUNC
 
št32_t


48 
ulocimp_g‘Lªguage
(cÚ¡ *
loÿËID
,

49 *
Ïnguage
, 
št32_t
 
ÏnguageC­ac™y
,

50 cÚ¡ **
pEnd
);

52 
U_CFUNC
 
št32_t


53 
ulocimp_g‘Süt
(cÚ¡ *
loÿËID
,

54 *
süt
, 
št32_t
 
sütC­ac™y
,

55 cÚ¡ **
pEnd
);

57 
U_CFUNC
 
št32_t


58 
ulocimp_g‘CouÁry
(cÚ¡ *
loÿËID
,

59 *
couÁry
, 
št32_t
 
couÁryC­ac™y
,

60 cÚ¡ **
pEnd
);

62 
U_CAPI
 cÚ¡ * 
U_EXPORT2


63 
loÿË_g‘KeywÜdsS¹
(cÚ¡ *
loÿËID
);

	@umapfile.c

19 
	~"unicode/put.h
"

20 
	~"ud©amem.h
"

21 
	~"um­fe.h
"

25 #ià
MAP_IMPLEMENTATION
==
MAP_WIN32


26 
	#WIN32_LEAN_AND_MEAN


	)

27 
	#VC_EXTRALEAN


	)

28 
	#NOUSER


	)

29 
	#NOSERVICE


	)

30 
	#NOIME


	)

31 
	#NOMCX


	)

32 
	~<wšdows.h
>

33 
	~"cmemÜy.h
"

35 
HANDLE
 
	tMemÜyM­
;

37 
	#IS_MAP
(
m­
è((m­)!=
NULL
)

	)

38 #–ià
MAP_IMPLEMENTATION
==
MAP_POSIX
 || MAP_IMPLEMENTATION==
MAP_390DLL


39 
size_t
 
	tMemÜyM­
;

41 
	#IS_MAP
(
m­
è((m­)!=0)

	)

43 
	~<uni¡d.h
>

44 
	~<sys/mmª.h
>

45 
	~<sys/¡©.h
>

46 
	~<fú.h
>

48 #iâdeà
MAP_FAILED


49 
	#MAP_FAILED
 ((*)-1)

	)

52 #ià
MAP_IMPLEMENTATION
==
MAP_390DLL


54 
	~<dÎ.h
>

55 
	~"c¡ršg.h
"

56 
	~"cmemÜy.h
"

57 
	~"unicode/ud©a.h
"

58 
	#LIB_PREFIX
 "lib"

	)

59 
	#LIB_SUFFIX
 ".dÎ"

	)

61 
	#U_ICUDATA_ENTRY_NAME
 "icudt" 
U_ICU_VERSION_SHORT
 
U_LIB_SUFFIX_C_NAME_STRING
 "_d©"

	)

63 #ià
defšed
(
U_DARWIN
)

64 
	~<T¬g‘CÚd™iÚ®s.h
>

67 #–ià
MAP_IMPLEMENTATION
==
MAP_STDIO


68 
	~<¡dio.h
>

69 
	~"cmemÜy.h
"

71 *
	tMemÜyM­
;

73 
	#IS_MAP
(
m­
è((m­)!=
NULL
)

	)

82 #ià
MAP_IMPLEMENTATION
==
MAP_NONE


83 
U_CFUNC
 
UBoŞ


84 
	$u´v_m­Fe
(
UD©aMemÜy
 *
pD©a
, cÚ¡ *
·th
) {

85 
	`UD©aMemÜy_š™
(
pD©a
);

86  
FALSE
;

87 
	}
}

89 
U_CFUNC
 
	$u´v_unm­Fe
(
UD©aMemÜy
 *
pD©a
) {

91 
	}
}

92 #–ià
MAP_IMPLEMENTATION
==
MAP_WIN32


93 
U_CFUNC
 
UBoŞ


94 
	$u´v_m­Fe
(

95 
UD©aMemÜy
 *
pD©a
,

97 cÚ¡ *
·th


100 
HANDLE
 
m­
;

101 
HANDLE
 
fe
;

102 
SECURITY_ATTRIBUTES
 
m­pšgA‰ribu‹s
;

103 
SECURITY_ATTRIBUTES
 *
m­pšgA‰ribu‹sPŒ
 = 
NULL
;

104 
SECURITY_DESCRIPTOR
 
£cur™yDesc
;

106 
	`UD©aMemÜy_š™
(
pD©a
);

109 
fe
=
	`C»©eFeA
(
·th
, 
GENERIC_READ
, 
FILE_SHARE_READ
, 
NULL
,

110 
OPEN_EXISTING
,

111 
FILE_ATTRIBUTE_NORMAL
|
FILE_FLAG_RANDOM_ACCESS
, 
NULL
);

112 if(
fe
==
INVALID_HANDLE_VALUE
) {

113  
FALSE
;

118 ià(
	`In™ŸlizeSecur™yDesütÜ
(&
£cur™yDesc
, 
SECURITY_DESCRIPTOR_REVISION
)) {

120 ià(
	`S‘Secur™yDesütÜDaş
(&
£cur™yDesc
, 
TRUE
, (
PACL
)
NULL
, 
FALSE
)) {

122 
	`u´v_mem£t
(&
m­pšgA‰ribu‹s
, 0, (mappingAttributes));

123 
m­pšgA‰ribu‹s
.
nL’gth
 = (mappingAttributes);

124 
m­pšgA‰ribu‹s
.
ÍSecur™yDesütÜ
 = &
£cur™yDesc
;

125 
m­pšgA‰ribu‹s
.
bInh”™HªdË
 = 
FALSE
;

126 
m­pšgA‰ribu‹sPŒ
 = &
m­pšgA‰ribu‹s
;

133 
m­
=
	`C»©eFeM­pšg
(
fe
, 
m­pšgA‰ribu‹sPŒ
, 
PAGE_READONLY
, 0, 0, 
NULL
);

134 
	`Clo£HªdË
(
fe
);

135 if(
m­
==
NULL
) {

136  
FALSE
;

140 
pD©a
->
pH—d”
=(cÚ¡ 
D©aH—d”
 *)
	`M­V›wOfFe
(
m­
, 
FILE_MAP_READ
, 0, 0, 0);

141 if(
pD©a
->
pH—d”
==
NULL
) {

142 
	`Clo£HªdË
(
m­
);

143  
FALSE
;

145 
pD©a
->
m­
=map;

146  
TRUE
;

147 
	}
}

149 
U_CFUNC
 

150 
	$u´v_unm­Fe
(
UD©aMemÜy
 *
pD©a
) {

151 if(
pD©a
!=
NULL
 &&…D©a->
m­
!=NULL) {

152 
	`Unm­V›wOfFe
(
pD©a
->
pH—d”
);

153 
	`Clo£HªdË
(
pD©a
->
m­
);

154 
pD©a
->
pH—d”
=
NULL
;

155 
pD©a
->
m­
=
NULL
;

157 
	}
}

161 #–ià
MAP_IMPLEMENTATION
==
MAP_POSIX


162 
U_CFUNC
 
UBoŞ


163 
	$u´v_m­Fe
(
UD©aMemÜy
 *
pD©a
, cÚ¡ *
·th
) {

164 
fd
;

165 
Ëngth
;

166 
¡©
 
my¡©
;

167 *
d©a
;

169 
	`UD©aMemÜy_š™
(
pD©a
);

172 if(
	`¡©
(
·th
, &
my¡©
)!=0 || my¡©.
¡_size
<=0) {

173  
FALSE
;

175 
Ëngth
=
my¡©
.
¡_size
;

178 
fd
=
	`İ’
(
·th
, 
O_RDONLY
);

179 if(
fd
==-1) {

180  
FALSE
;

184 #iâdeà
U_HPUX


185 
d©a
=
	`mm­
(0, 
Ëngth
, 
PROT_READ
, 
MAP_SHARED
, 
fd
, 0);

187 
d©a
=
	`mm­
(0, 
Ëngth
, 
PROT_READ
, 
MAP_PRIVATE
, 
fd
, 0);

189 
	`şo£
(
fd
);

190 if(
d©a
==
MAP_FAILED
) {

191  
FALSE
;

194 
pD©a
->
m­
 = (*)
d©a
 + 
Ëngth
;

195 
pD©a
->
pH—d”
=(cÚ¡ 
D©aH—d”
 *)
d©a
;

196 
pD©a
->
m­Addr
 = 
d©a
;

197 #ià
	`defšed
(
U_DARWIN
è&& 
TARGET_OS_IPHONE


198 
	`posix_madvi£
(
d©a
, 
Ëngth
, 
POSIX_MADV_RANDOM
);

200  
TRUE
;

201 
	}
}

203 
U_CFUNC
 

204 
	$u´v_unm­Fe
(
UD©aMemÜy
 *
pD©a
) {

205 if(
pD©a
!=
NULL
 &&…D©a->
m­
!=NULL) {

206 
size_t
 
d©aL’
 = (*)
pD©a
->
m­
 - (*íD©a->
m­Addr
;

207 if(
	`munm­
(
pD©a
->
m­Addr
, 
d©aL’
)==-1) {

209 
pD©a
->
pH—d”
=
NULL
;

210 
pD©a
->
m­
=0;

211 
pD©a
->
m­Addr
=
NULL
;

213 
	}
}

217 #–ià
MAP_IMPLEMENTATION
==
MAP_STDIO


219 
št32_t


220 
	$um­_fsize
(
FILE
 *
f
) {

221 
št32_t
 
§vedPos
 = 
	`á–l
(
f
);

222 
št32_t
 
size
 = 0;

226 
	`f£ek
(
f
, 0, 
SEEK_END
);

227 
size
 = (
št32_t
)
	`á–l
(
f
);

228 
	`f£ek
(
f
, 
§vedPos
, 
SEEK_SET
);

229  
size
;

230 
	}
}

232 
U_CFUNC
 
UBoŞ


233 
	$u´v_m­Fe
(
UD©aMemÜy
 *
pD©a
, cÚ¡ *
·th
) {

234 
FILE
 *
fe
;

235 
št32_t
 
feL’gth
;

236 *
p
;

238 
	`UD©aMemÜy_š™
(
pD©a
);

240 
fe
=
	`fİ’
(
·th
, "rb");

241 if(
fe
==
NULL
) {

242  
FALSE
;

246 
feL’gth
=
	`um­_fsize
(
fe
);

247 if(
	`ã¼Ü
(
fe
è|| 
feL’gth
<=20) {

248 
	`fşo£
(
fe
);

249  
FALSE
;

253 
p
=
	`u´v_m®loc
(
feL’gth
);

254 if(
p
==
NULL
) {

255 
	`fşo£
(
fe
);

256  
FALSE
;

260 if(
feL’gth
!=
	`ä—d
(
p
, 1, feL’gth, 
fe
)) {

261 
	`u´v_ä“
(
p
);

262 
	`fşo£
(
fe
);

263  
FALSE
;

266 
	`fşo£
(
fe
);

267 
pD©a
->
m­
=
p
;

268 
pD©a
->
pH—d”
=(cÚ¡ 
D©aH—d”
 *)
p
;

269 
pD©a
->
m­Addr
=
p
;

270  
TRUE
;

271 
	}
}

273 
U_CFUNC
 

274 
	$u´v_unm­Fe
(
UD©aMemÜy
 *
pD©a
) {

275 if(
pD©a
!=
NULL
 &&…D©a->
m­
!=NULL) {

276 
	`u´v_ä“
(
pD©a
->
m­
);

277 
pD©a
->
m­
 = 
NULL
;

278 
pD©a
->
m­Addr
 = 
NULL
;

279 
pD©a
->
pH—d”
 = 
NULL
;

281 
	}
}

284 #–ià
MAP_IMPLEMENTATION
==
MAP_390DLL


295 *
	$¡rıy_»tuºEnd
(*
de¡
, cÚ¡ *
¤c
)

297 (*
de¡
=*
¤c
)!=0) {

298 ++
de¡
;

299 ++
¤c
;

301  
de¡
;

302 
	}
}

326 *
	$u´v_compu‹DœP©h
(cÚ¡ *
·th
, *
·thBufãr
)

328 *
fš®SÏsh
;

329 
št32_t
 
·thL’
;

331 
fš®SÏsh
 = 0;

332 ià(
·th
 != 0) {

333 
fš®SÏsh
 = 
	`u´v_¡¼chr
(
·th
, 
U_FILE_SEP_CHAR
);

336 *
·thBufãr
 = 0;

337 ià(
fš®SÏsh
 == 0) {

340 cÚ¡ *
icuD©aDœ
;

341 
icuD©aDœ
=
	`u_g‘D©aDœeùÜy
();

342 if(
icuD©aDœ
!=
NULL
 && *icuDataDir!=0) {

343  
	`¡rıy_»tuºEnd
(
·thBufãr
, 
icuD©aDœ
);

346  
·thBufãr
;

352 
·thL’
 = (
št32_t
)(
fš®SÏsh
 - 
·th
 + 1);

353 
	`u´v_memıy
(
·thBufãr
, 
·th
, 
·thL’
);

354 *(
·thBufãr
+
·thL’
) = 0;

355  
·thBufãr
+
·thL’
;

356 
	}
}

359 
	#DATA_TYPE
 "d©"

	)

361 
U_CFUNC
 
UBoŞ
 
	$u´v_m­Fe
(
UD©aMemÜy
 *
pD©a
, cÚ¡ *
·th
) {

362 cÚ¡ *
šBa£Çme
;

363 *
ba£Çme
;

364 
·thBufãr
[1024];

365 cÚ¡ 
D©aH—d”
 *
pH—d”
;

366 
dÎhªdË
 *
hªdË
;

367 *
v®
=0;

369 
šBa£Çme
=
	`u´v_¡¼chr
(
·th
, 
U_FILE_SEP_CHAR
);

370 if(
šBa£Çme
==
NULL
) {

371 
šBa£Çme
 = 
·th
;

373 
šBa£Çme
++;

375 
ba£Çme
=
	`u´v_compu‹DœP©h
(
·th
, 
·thBufãr
);

376 if(
	`u´v_¡rcmp
(
šBa£Çme
, 
U_ICUDATA_NAME
".dat") != 0) {

378 
fd
;

379 
Ëngth
;

380 
¡©
 
my¡©
;

381 *
d©a
;

382 
	`UD©aMemÜy_š™
(
pD©a
);

385 if(
	`¡©
(
·th
, &
my¡©
)!=0 || my¡©.
¡_size
<=0) {

386  
FALSE
;

388 
Ëngth
=
my¡©
.
¡_size
;

391 
fd
=
	`İ’
(
·th
, 
O_RDONLY
);

392 if(
fd
==-1) {

393  
FALSE
;

397 
d©a
=
	`mm­
(0, 
Ëngth
, 
PROT_READ
, 
MAP_PRIVATE
, 
fd
, 0);

398 
	`şo£
(
fd
);

399 if(
d©a
==
MAP_FAILED
) {

400  
FALSE
;

402 
pD©a
->
m­
 = (*)
d©a
 + 
Ëngth
;

403 
pD©a
->
pH—d”
=(cÚ¡ 
D©aH—d”
 *)
d©a
;

404 
pD©a
->
m­Addr
 = 
d©a
;

405  
TRUE
;

408 #ifdeà
OS390BATCH


418 
	`u´v_¡rıy
(
·thBufãr
, "IXMI" 
U_ICU_VERSION_SHORT
 "DA");

421 
	`u´v_¡rıy
(
ba£Çme
, 
LIB_PREFIX
 
U_LIBICUDATA_NAME
 
U_ICU_VERSION_SHORT
 
LIB_SUFFIX
);

424 #ifdeà
UDATA_DEBUG


425 
	`årštf
(
¡d”r
, "dÎlßd: % ", 
·thBufãr
);

428 
hªdË
=
	`dÎlßd
(
·thBufãr
);

430 #ifdeà
UDATA_DEBUG


431 
	`årštf
(
¡d”r
, " -> %08X\n", 
hªdË
 );

434 if(
hªdË
 !ğ
NULL
) {

437 
	`UD©aMemÜy_š™
(
pD©a
);

438 
v®
=
	`dÎqu”yv¬
((
dÎhªdË
*)
hªdË
, 
U_ICUDATA_ENTRY_NAME
);

439 if(
v®
 == 0) {

441  
FALSE
;

443 #ifdeà
UDATA_DEBUG


444 
	`årštf
(
¡d”r
, "dÎqu”yv¬(%08X, %sè-> %08X\n", 
hªdË
, 
U_ICUDATA_ENTRY_NAME
, 
v®
);

447 
pD©a
->
pH—d”
=(cÚ¡ 
D©aH—d”
 *)
v®
;

448  
TRUE
;

450  
FALSE
;

452 
	}
}

454 
U_CFUNC
 
	$u´v_unm­Fe
(
UD©aMemÜy
 *
pD©a
) {

455 if(
pD©a
!=
NULL
 &&…D©a->
m­
!=NULL) {

456 
	`u´v_ä“
(
pD©a
->
m­
);

457 
pD©a
->
m­
 = 
NULL
;

458 
pD©a
->
m­Addr
 = 
NULL
;

459 
pD©a
->
pH—d”
 = 
NULL
;

461 
	}
}

464 #”rÜ 
MAP_IMPLEMENTATION
 
is
 
£t
 
šcÜ»ùly


	@umapfile.h

23 #iâdeà
__UMAPFILE_H__


24 
	#__UMAPFILE_H__


	)

26 
	~"unicode/put.h
"

27 
	~"unicode/ud©a.h
"

29 
U_CFUNC
 
UBoŞ
 
u´v_m­Fe
(
UD©aMemÜy
 *
pdm
, cÚ¡ *
·th
);

30 
U_CFUNC
 
u´v_unm­Fe
(
UD©aMemÜy
 *
pD©a
);

33 
	#MAP_NONE
 0

	)

34 
	#MAP_WIN32
 1

	)

35 
	#MAP_POSIX
 2

	)

36 
	#MAP_STDIO
 3

	)

37 
	#MAP_390DLL
 4

	)

39 #ià
UCONFIG_NO_FILE_IO


40 
	#MAP_IMPLEMENTATION
 
MAP_NONE


	)

41 #–ià
defšed
(
U_WINDOWS
)

42 
	#MAP_IMPLEMENTATION
 
MAP_WIN32


	)

43 #–ià
U_HAVE_MMAP
 || 
defšed
(
OS390
)

44 #ià
defšed
(
OS390
è&& defšed (
OS390_STUBDATA
)

46 
	#MAP_IMPLEMENTATION
 
MAP_390DLL


	)

48 
	#MAP_IMPLEMENTATION
 
MAP_POSIX


	)

51 
	#MAP_IMPLEMENTATION
 
MAP_STDIO


	)

	@umath.c

11 
	~"putimp.h
"

13 
U_CAPI
 
št32_t
 
U_EXPORT2


14 
	$u´v_max
(
št32_t
 
x
, iÁ32_ˆ
y
)

16  (
x
 > 
y
 ? x : y);

17 
	}
}

19 
U_CAPI
 
št32_t
 
U_EXPORT2


20 
	$u´v_mš
(
št32_t
 
x
, iÁ32_ˆ
y
)

22  (
x
 > 
y
 ? y : x);

23 
	}
}

	@umutex.c

21 
	~"unicode/uty³s.h
"

22 
	~"uas£¹.h
"

23 
	~"uşn_cmn.h
"

30 #ià
defšed
(
U_DARWIN
)

31 
	~<Avaab™yMaüos.h
>

32 #ià(
ICU_USE_THREADS
 =ğ1è&& 
defšed
(
MAC_OS_X_VERSION_10_4
è&& defšed(
MAC_OS_X_VERSION_MIN_REQUIRED
) && (MAC_OS_X_VERSION_MIN_REQUIRED >= MAC_OS_X_VERSION_10_4)

33 #ià
defšed
(
__STRICT_ANSI__
)

34 
	#UPRV_REMAP_INLINE


	)

35 
	#šlše


	)

37 
	~<libk”n/OSAtomic.h
>

38 
	#USE_MAC_OS_ATOMIC_INCREMENT
 1

	)

39 #ià
defšed
(
UPRV_REMAP_INLINE
)

40 #undeà
šlše


41 #undeà
UPRV_REMAP_INLINE


47 
	#POSIX


	)

49 #ià
defšed
(
U_WINDOWS
)

50 #undeà
POSIX


52 #ià
defšed
(
macštosh
)

53 #undeà
POSIX


55 #ià
defšed
(
OS2
)

56 #undeà
POSIX


59 #ià
defšed
(
POSIX
è&& (
ICU_USE_THREADS
==1)

60 
	~<±h»ad.h
>

64 #ifdeà
U_WINDOWS


65 
	#WIN32_LEAN_AND_MEAN


	)

66 
	#VC_EXTRALEAN


	)

67 
	#NOUSER


	)

68 
	#NOSERVICE


	)

69 
	#NOIME


	)

70 
	#NOMCX


	)

71 
	~<wšdows.h
>

74 
	~"umu‹x.h
"

75 
	~"cmemÜy.h
"

108 #ià(
ICU_USE_THREADS
 == 0)

109 
	#MUTEX_TYPE
 *

	)

110 
	#PLATFORM_MUTEX_INIT
(
m
)

	)

111 
	#PLATFORM_MUTEX_LOCK
(
m
)

	)

112 
	#PLATFORM_MUTEX_UNLOCK
(
m
)

	)

113 
	#PLATFORM_MUTEX_DESTROY
(
m
)

	)

114 
	#PLATFORM_MUTEX_INITIALIZER
 
NULL


	)

115 
	#SYNC_COMPARE_AND_SWAP
(
de¡
, 
Şdv®
, 
Ãwv®
) \

116 
	`mu‹xed_com·»_ªd_sw­
(
de¡
, 
Ãwv®
, 
Şdv®
)

	)

119 #–ià
defšed
(
U_WINDOWS
)

120 
	#MUTEX_TYPE
 
CRITICAL_SECTION


	)

121 
	#PLATFORM_MUTEX_INIT
(
m
è
	`In™ŸlizeCr™iÿlSeùiÚ
(m)

	)

122 
	#PLATFORM_MUTEX_LOCK
(
m
è
	`EÁ”Cr™iÿlSeùiÚ
(m)

	)

123 
	#PLATFORM_MUTEX_UNLOCK
(
m
è
	`L—veCr™iÿlSeùiÚ
(m)

	)

124 
	#PLATFORM_MUTEX_DESTROY
(
m
è
	`D–‘eCr™iÿlSeùiÚ
(m)

	)

125 
	#SYNC_COMPARE_AND_SWAP
(
de¡
, 
Şdv®
, 
Ãwv®
) \

126 
	`IÁ”lockedCom·»ExchªgePoš‹r
(
de¡
, 
Ãwv®
, 
Şdv®
)

	)

129 #–ià
defšed
(
POSIX
)

130 
	#MUTEX_TYPE
 
±h»ad_mu‹x_t


	)

131 
	#PLATFORM_MUTEX_INIT
(
m
è
	`±h»ad_mu‹x_š™
(m, 
NULL
)

	)

132 
	#PLATFORM_MUTEX_LOCK
(
m
è
	`±h»ad_mu‹x_lock
(m)

	)

133 
	#PLATFORM_MUTEX_UNLOCK
(
m
è
	`±h»ad_mu‹x_uÆock
(m)

	)

134 
	#PLATFORM_MUTEX_DESTROY
(
m
è
	`±h»ad_mu‹x_de¡roy
(m)

	)

135 
	#PLATFORM_MUTEX_INITIALIZER
 
PTHREAD_MUTEX_INITIALIZER


	)

136 #ià(
U_HAVE_GCC_ATOMICS
 == 1)

137 
	#SYNC_COMPARE_AND_SWAP
(
de¡
, 
Şdv®
, 
Ãwv®
) \

138 
	`__sync_v®_com·»_ªd_sw­
(
de¡
, 
Şdv®
, 
Ãwv®
)

	)

140 
	#SYNC_COMPARE_AND_SWAP
(
de¡
, 
Şdv®
, 
Ãwv®
) \

141 
	`mu‹xed_com·»_ªd_sw­
(
de¡
, 
Ãwv®
, 
Şdv®
)

	)

147 
	#MUTEX_TYPE
 *

	)

148 
	#PLATFORM_MUTEX_INIT
(
m
)

	)

149 
	#PLATFORM_MUTEX_LOCK
(
m
)

	)

150 
	#PLATFORM_MUTEX_UNLOCK
(
m
)

	)

151 
	#PLATFORM_MUTEX_DESTROY
(
m
)

	)

152 
	#SYNC_COMPARE_AND_SWAP
(
de¡
, 
Şdv®
, 
Ãwv®
) \

153 
	`mu‹xed_com·»_ªd_sw­
(
de¡
, 
Ãwv®
, 
Şdv®
)

	)

158 *
mu‹xed_com·»_ªd_sw­
(**
de¡
, *
Ãwv®
, *
Şdv®
);

159 
ICUMu‹x
 
	tICUMu‹x
;

168 
	sICUMu‹x
 {

169 
UMTX
 *
	mowÃr
;

172 
UBoŞ
 
	mh—pAÎoÿ‹d
;

177 
ICUMu‹x
 *
	mÃxt
;

180 
št32_t
 
	m»cursiÚCouÁ
;

182 
MUTEX_TYPE
 
	m¶©fÜmMu‹x
;

184 
UMTX
 
	mu£rMu‹x
;

195 #ià
defšed
(
POSIX
)

196 
UMTX
 
	gglob®UMTX
;

197 
ICUMu‹x
 
	gglob®Mu‹x
 = {&
glob®UMTX
, 
FALSE
, 
NULL
, 0, 
PLATFORM_MUTEX_INITIALIZER
, NULL};

198 
UMTX
 
	gglob®UMTX
 = &
glob®Mu‹x
;

200 
UMTX
 
	gglob®UMTX
 = 
NULL
;

212 
ICUMu‹x
 *
	gmu‹xLi¡H—d
;

220 
UMtxIn™Fn
 *
	gpMu‹xIn™Fn
 = 
NULL
;

221 
UMtxFn
 *
	gpMu‹xDe¡royFn
 = 
NULL
;

222 
UMtxFn
 *
	gpMu‹xLockFn
 = 
NULL
;

223 
UMtxFn
 *
	gpMu‹xUÆockFn
 = 
NULL
;

224 cÚ¡ *
	ggMu‹xCÚ‹xt
 = 
NULL
;

230 
U_CAPI
 
U_EXPORT2


231 
	$umtx_lock
(
UMTX
 *
mu‹x
)

233 
ICUMu‹x
 *
m
;

235 ià(
mu‹x
 =ğ
NULL
) {

236 
mu‹x
 = &
glob®UMTX
;

238 
m
 = (
ICUMu‹x
 *)*
mu‹x
;

239 ià(
m
 =ğ
NULL
) {

243 
	`umtx_š™
(
mu‹x
);

244 
m
 = (
ICUMu‹x
 *)*
mu‹x
;

246 
	`U_ASSERT
(
m
->
owÃr
 =ğ
mu‹x
);

248 ià(
pMu‹xLockFn
 !ğ
NULL
) {

249 (*
pMu‹xLockFn
)(
gMu‹xCÚ‹xt
, &
m
->
u£rMu‹x
);

251 
	`PLATFORM_MUTEX_LOCK
(&
m
->
¶©fÜmMu‹x
);

254 #ià
	`defšed
(
U_DEBUG
)

255 
m
->
»cursiÚCouÁ
++;

256 
	`U_ASSERT
(
m
->
»cursiÚCouÁ
 == 1);

260 
	}
}

267 
U_CAPI
 
U_EXPORT2


268 
	$umtx_uÆock
(
UMTX
* 
mu‹x
)

270 
ICUMu‹x
 *
m
;

271 if(
mu‹x
 =ğ
NULL
) {

272 
mu‹x
 = &
glob®UMTX
;

274 
m
 = (
ICUMu‹x
 *)*
mu‹x
;

275 ià(
m
 =ğ
NULL
) {

276 
	`U_ASSERT
(
FALSE
);

279 
	`U_ASSERT
(
m
->
owÃr
 =ğ
mu‹x
);

281 #ià
	`defšed
 (
U_DEBUG
)

282 
m
->
»cursiÚCouÁ
--;

283 
	`U_ASSERT
(
m
->
»cursiÚCouÁ
 == 0);

286 ià(
pMu‹xUÆockFn
) {

287 (*
pMu‹xUÆockFn
)(
gMu‹xCÚ‹xt
, &
m
->
u£rMu‹x
);

289 
	`PLATFORM_MUTEX_UNLOCK
(&
m
->
¶©fÜmMu‹x
);

291 
	}
}

297 
ICUMu‹x
 *
	$umtx_ù
(
ICUMu‹x
 *
m
) {

298 ià(
m
 =ğ
NULL
) {

299 
m
 = (
ICUMu‹x
 *)
	`u´v_m®loc
((ICUMutex));

300 
m
->
h—pAÎoÿ‹d
 = 
TRUE
;

302 
m
->
Ãxt
 = 
NULL
;

303 
m
->
»cursiÚCouÁ
 = 0;

304 
m
->
u£rMu‹x
 = 
NULL
;

305 ià(
pMu‹xIn™Fn
 !ğ
NULL
) {

306 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

307 (*
pMu‹xIn™Fn
)(
gMu‹xCÚ‹xt
, &
m
->
u£rMu‹x
, &
¡©us
);

308 
	`U_ASSERT
(
	`U_SUCCESS
(
¡©us
));

310 
	`PLATFORM_MUTEX_INIT
(&
m
->
¶©fÜmMu‹x
);

312  
m
;

313 
	}
}

319 
	$umtx_dt
(
ICUMu‹x
 *
m
) {

320 ià(
pMu‹xDe¡royFn
 !ğ
NULL
) {

321 (*
pMu‹xDe¡royFn
)(
gMu‹xCÚ‹xt
, &
m
->
u£rMu‹x
);

322 
m
->
u£rMu‹x
 = 
NULL
;

324 
	`PLATFORM_MUTEX_DESTROY
(&
m
->
¶©fÜmMu‹x
);

327 ià(
m
->
h—pAÎoÿ‹d
) {

328 
	`u´v_ä“
(
m
);

330 
	}
}

333 
U_CAPI
 
U_EXPORT2


334 
	$umtx_š™
(
UMTX
 *
mu‹x
) {

335 
ICUMu‹x
 *
m
 = 
NULL
;

336 *
Üigš®V®ue
;

338 ià(*
mu‹x
 !ğ
NULL
) {

344 #ià
	`defšed
(
POSIX
)

345 ià(
mu‹x
 =ğ&
glob®UMTX
) {

346 
m
 = &
glob®Mu‹x
;

350 
m
 = 
	`umtx_ù
(m);

351 
Üigš®V®ue
 = 
	`SYNC_COMPARE_AND_SWAP
(
mu‹x
, 
NULL
, 
m
);

352 ià(
Üigš®V®ue
 !ğ
NULL
) {

353 
	`umtx_dt
(
m
);

357 
m
->
owÃr
 = 
mu‹x
;

363 
	`umtx_lock
(
NULL
);

364 
m
->
Ãxt
 = 
mu‹xLi¡H—d
;

365 
mu‹xLi¡H—d
 = 
m
;

366 
	`umtx_uÆock
(
NULL
);

368 
	}
}

378 
U_CAPI
 
U_EXPORT2


379 
	$umtx_de¡roy
(
UMTX
 *
mu‹x
) {

380 
ICUMu‹x
 *
m
;

385 
	`U_ASSERT
(
mu‹x
 !ğ
NULL
);

386 ià(
mu‹x
 =ğ
NULL
) {

390 
m
 = (
ICUMu‹x
 *)*
mu‹x
;

391 ià(
m
 =ğ
NULL
) {

395 
	`U_ASSERT
(
m
->
owÃr
 =ğ
mu‹x
);

396 ià(
m
->
owÃr
 !ğ
mu‹x
) {

401 
	`umtx_lock
(
NULL
);

402 ià(
mu‹xLi¡H—d
 =ğ
m
) {

403 
mu‹xLi¡H—d
 = 
m
->
Ãxt
;

405 
ICUMu‹x
 *
´ev
;

406 
´ev
 = 
mu‹xLi¡H—d
;…»v!=
NULL
 &&…»v->
Ãxt
!=
m
;…rev =…rev->next);

408 ià(
´ev
 !ğ
NULL
) {

409 
´ev
->
Ãxt
 = 
m
->next;

412 
	`umtx_uÆock
(
NULL
);

414 
	`umtx_dt
(
m
);

415 *
mu‹x
 = 
NULL
;

416 
	}
}

420 
U_CAPI
 
U_EXPORT2


421 
	$u_£tMu‹xFunùiÚs
(cÚ¡ *
cÚ‹xt
, 
UMtxIn™Fn
 *
i
, 
UMtxFn
 *
d
, UMtxFÀ*
l
, UMtxFÀ*
u
,

422 
UE¼ÜCode
 *
¡©us
) {

423 ià(
	`U_FAILURE
(*
¡©us
)) {

428 ià(
i
==
NULL
 || 
d
==NULL || 
l
==NULL || 
u
==NULL) {

429 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

434 ià(
	`cmemÜy_šU£
()) {

435 *
¡©us
 = 
U_INVALID_STATE_ERROR
;

442 
	`umtx_de¡roy
(&
glob®UMTX
);

445 
pMu‹xIn™Fn
 = 
i
;

446 
pMu‹xDe¡royFn
 = 
d
;

447 
pMu‹xLockFn
 = 
l
;

448 
pMu‹xUÆockFn
 = 
u
;

449 
gMu‹xCÚ‹xt
 = 
cÚ‹xt
;

451 #ià
	`defšed
 (
POSIX
)

454 
	`umtx_š™
(&
glob®UMTX
);

456 
	}
}

469 *
	$mu‹xed_com·»_ªd_sw­
(**
de¡
, *
Ãwv®
, *
Şdv®
) {

470 *
‹mp
;

471 
UBoŞ
 
ÃedUÆock
 = 
FALSE
;

473 ià(
glob®UMTX
 !ğ
NULL
) {

474 
	`umtx_lock
(&
glob®UMTX
);

475 
ÃedUÆock
 = 
TRUE
;

478 
‹mp
 = *
de¡
;

479 ià(
‹mp
 =ğ
Şdv®
) {

480 *
de¡
 = 
Ãwv®
;

483 ià(
ÃedUÆock
) {

484 
	`umtx_uÆock
(&
glob®UMTX
);

486  
‹mp
;

487 
	}
}

500 
UMtxAtomicFn
 *
	gpIncFn
 = 
NULL
;

501 
UMtxAtomicFn
 *
	gpDecFn
 = 
NULL
;

502 cÚ¡ *
	ggIncDecCÚ‹xt
 = 
NULL
;

504 
UMTX
 
	ggIncDecMu‹x
 = 
NULL
;

506 
U_CAPI
 
št32_t
 
U_EXPORT2


507 
	$umtx_©omic_šc
(
št32_t
 *
p
) {

508 
št32_t
 
»tV®
;

509 ià(
pIncFn
) {

510 
»tV®
 = (*
pIncFn
)(
gIncDecCÚ‹xt
, 
p
);

512 #ià
	`defšed
 (
U_WINDOWS
è&& 
ICU_USE_THREADS
 == 1

513 
»tV®
 = 
	`IÁ”lockedInüem’t
((
LONG
*)
p
);

514 #–ià
	`defšed
(
USE_MAC_OS_ATOMIC_INCREMENT
)

515 
»tV®
 = 
	`OSAtomicInüem’t32B¬r›r
(
p
);

516 #–ià(
U_HAVE_GCC_ATOMICS
 == 1)

517 
»tV®
 = 
	`__sync_add_ªd_ãtch
(
p
, 1);

518 #–ià
	`defšed
 (
POSIX
è&& 
ICU_USE_THREADS
 == 1

519 
	`umtx_lock
(&
gIncDecMu‹x
);

520 
»tV®
 = ++(*
p
);

521 
	`umtx_uÆock
(&
gIncDecMu‹x
);

524 
»tV®
 = ++(*
p
);

527  
»tV®
;

528 
	}
}

530 
U_CAPI
 
št32_t
 
U_EXPORT2


531 
	$umtx_©omic_dec
(
št32_t
 *
p
) {

532 
št32_t
 
»tV®
;

533 ià(
pDecFn
) {

534 
»tV®
 = (*
pDecFn
)(
gIncDecCÚ‹xt
, 
p
);

536 #ià
	`defšed
 (
U_WINDOWS
è&& 
ICU_USE_THREADS
 == 1

537 
»tV®
 = 
	`IÁ”lockedDeüem’t
((
LONG
*)
p
);

538 #–ià
	`defšed
(
USE_MAC_OS_ATOMIC_INCREMENT
)

539 
»tV®
 = 
	`OSAtomicDeüem’t32B¬r›r
(
p
);

540 #–ià(
U_HAVE_GCC_ATOMICS
 == 1)

541 
»tV®
 = 
	`__sync_sub_ªd_ãtch
(
p
, 1);

542 #–ià
	`defšed
 (
POSIX
è&& 
ICU_USE_THREADS
 == 1

543 
	`umtx_lock
(&
gIncDecMu‹x
);

544 
»tV®
 = --(*
p
);

545 
	`umtx_uÆock
(&
gIncDecMu‹x
);

548 
»tV®
 = --(*
p
);

551  
»tV®
;

552 
	}
}

556 
U_CAPI
 
U_EXPORT2


557 
	$u_£tAtomicIncDecFunùiÚs
(cÚ¡ *
cÚ‹xt
, 
UMtxAtomicFn
 *

, UMtxAtomicFÀ*
dp
,

558 
UE¼ÜCode
 *
¡©us
) {

559 ià(
	`U_FAILURE
(*
¡©us
)) {

563 ià(

==
NULL
 || 
dp
==NULL) {

564 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

568 ià(
	`cmemÜy_šU£
()) {

569 *
¡©us
 = 
U_INVALID_STATE_ERROR
;

573 
pIncFn
 = 

;

574 
pDecFn
 = 
dp
;

575 
gIncDecCÚ‹xt
 = 
cÚ‹xt
;

577 #ià!
U_RELEASE


579 
št32_t
 
‹¡IÁ
 = 0;

580 
	`U_ASSERT
(
	`umtx_©omic_šc
(&
‹¡IÁ
) == 1);

581 
	`U_ASSERT
(
‹¡IÁ
 == 1);

582 
	`U_ASSERT
(
	`umtx_©omic_dec
(&
‹¡IÁ
) == 0);

583 
	`U_ASSERT
(
‹¡IÁ
 == 0);

586 
	}
}

595 
U_CFUNC
 
UBoŞ
 
	$umtx_ş—nup
() {

596 
ICUMu‹x
 *
thisMu‹x
 = 
NULL
;

597 
ICUMu‹x
 *
ÃxtMu‹x
 = 
NULL
;

601 
	`mu‹xed_com·»_ªd_sw­
(&
glob®UMTX
, 
NULL
, NULL);

606 
thisMu‹x
=
mu‹xLi¡H—d
;hisMu‹x!=
NULL
;hisMu‹x=
ÃxtMu‹x
) {

607 
UMTX
 *
umtx
 = 
thisMu‹x
->
owÃr
;

608 
ÃxtMu‹x
 = 
thisMu‹x
->
Ãxt
;

609 
	`U_ASSERT
(*
umtx
 = (*)
thisMu‹x
);

610 ià(
umtx
 !ğ&
glob®UMTX
) {

611 
	`umtx_de¡roy
(
umtx
);

614 
	`umtx_de¡roy
(&
glob®UMTX
);

616 
pMu‹xIn™Fn
 = 
NULL
;

617 
pMu‹xDe¡royFn
 = 
NULL
;

618 
pMu‹xLockFn
 = 
NULL
;

619 
pMu‹xUÆockFn
 = 
NULL
;

620 
gMu‹xCÚ‹xt
 = 
NULL
;

621 
pIncFn
 = 
NULL
;

622 
pDecFn
 = 
NULL
;

623 
gIncDecCÚ‹xt
 = 
NULL
;

624 
gIncDecMu‹x
 = 
NULL
;

626 #ià
	`defšed
 (
POSIX
)

630 
	`umtx_š™
(&
glob®UMTX
);

632  
TRUE
;

633 
	}
}

	@umutex.h

18 #iâdeà
UMUTEX_H


19 
	#UMUTEX_H


	)

21 
	~"unicode/uty³s.h
"

22 
	~"unicode/uş—n.h
"

26 #ifdeà
APP_NO_THREADS


27 
	#ICU_USE_THREADS
 0

	)

37 #iâdeà
ICU_USE_THREADS


38 
	#ICU_USE_THREADS
 1

	)

45 #ià!
defšed
(
UMTX_STRONG_MEMORY_MODEL
)

46 
	#UMTX_STRONG_MEMORY_MODEL
 0

	)

64 #ià
UMTX_STRONG_MEMORY_MODEL


66 
	#UMTX_CHECK
(
pMu‹x
, 
ex´essiÚ
, 
»suÉ
) \

67 (
»suÉ
)=(
ex´essiÚ
)

	)

71 
	#UMTX_CHECK
(
pMu‹x
, 
ex´essiÚ
, 
»suÉ
) \

72 
	`umtx_lock
(
pMu‹x
); \

73 (
»suÉ
)=(
ex´essiÚ
); \

74 
	`umtx_uÆock
(
pMu‹x
)

	)

101 
U_CAPI
 
U_EXPORT2
 
umtx_lock
 ( 
UMTX
* 
mu‹x
 );

108 
U_CAPI
 
U_EXPORT2
 
umtx_uÆock
 ( 
UMTX
* 
mu‹x
 );

119 
U_CAPI
 
U_EXPORT2
 
umtx_š™
 ( 
UMTX
* 
mu‹x
 );

129 
U_CAPI
 
U_EXPORT2
 
umtx_de¡roy
Ğ
UMTX
 *
mu‹x
 );

142 
U_CAPI
 
št32_t
 
U_EXPORT2
 
umtx_©omic_šc
(int32_t *);

143 
U_CAPI
 
št32_t
 
U_EXPORT2
 
umtx_©omic_dec
(int32_t *);

	@unames.c

17 
	~"unicode/uty³s.h
"

18 
	~"unicode/put.h
"

19 
	~"unicode/uch¬.h
"

20 
	~"unicode/ud©a.h
"

21 
	~"u¡r_imp.h
"

22 
	~"umu‹x.h
"

23 
	~"cmemÜy.h
"

24 
	~"c¡ršg.h
"

25 
	~"uşn_cmn.h
"

26 
	~"ud©aswp.h
"

27 
	~"u´İs.h
"

31 
	#LENGTHOF
(
¬¿y
è(×¼ay)/(×¼ay)[0]))

	)

33 cÚ¡ 
	gDATA_NAME
[] = "unames";

34 cÚ¡ 
	gDATA_TYPE
[] = "icu";

36 
	#GROUP_SHIFT
 5

	)

37 
	#LINES_PER_GROUP
 (1UL<<
GROUP_SHIFT
)

	)

38 
	#GROUP_MASK
 (
LINES_PER_GROUP
-1)

	)

57 
	mGROUP_MSB
,

58 
	mGROUP_OFFSET_HIGH
,

59 
	mGROUP_OFFSET_LOW
,

60 
	mGROUP_LENGTH


68 
	#GET_GROUP_OFFSET
(
group
è((
št32_t
)(group)[
GROUP_OFFSET_HIGH
]<<16|(group)[
GROUP_OFFSET_LOW
])

	)

70 
	#NEXT_GROUP
(
group
è((group)+
GROUP_LENGTH
)

	)

71 
	#PREV_GROUP
(
group
è((group)-
GROUP_LENGTH
)

	)

74 
ušt32_t
 
	m¡¬t
, 
	m’d
;

75 
ušt8_t
 
	mty³
, 
	mv¬ŸÁ
;

76 
ušt16_t
 
	msize
;

77 } 
	tAlgÜ™hmicRªge
;

80 
ušt32_t
 
	mtok’SŒšgOff£t
, 
	mgroupsOff£t
, 
	mgroupSŒšgOff£t
, 
	m®gNamesOff£t
;

81 } 
	tUCh¬Names
;

92 
	#GET_GROUPS
(
Çmes
è(cÚ¡ 
ušt16_t
 *)((cÚ¡ *êames+Çmes->
groupsOff£t
)

	)

95 cÚ¡ *
	mÙh”Name
;

96 
UCh¬32
 
	mcode
;

97 } 
	tFšdName
;

99 
	#DO_FIND_NAME
 
NULL


	)

101 
UD©aMemÜy
 *
	guCh¬NamesD©a
=
NULL
;

102 
UCh¬Names
 *
	guCh¬Names
=
NULL
;

103 
UE¼ÜCode
 
	ggLßdE¼ÜCode
=
U_ZERO_ERROR
;

108 
št32_t
 
	ggMaxNameL’gth
=0;

114 
ušt32_t
 
	ggNameS‘
[8]={ 0 };

116 
	#U_NONCHARACTER_CODE_POINT
 
U_CHAR_CATEGORY_COUNT


	)

117 
	#U_LEAD_SURROGATE
 
U_CHAR_CATEGORY_COUNT
 + 1

	)

118 
	#U_TRAIL_SURROGATE
 
U_CHAR_CATEGORY_COUNT
 + 2

	)

120 
	#U_CHAR_EXTENDED_CATEGORY_COUNT
 (
U_CHAR_CATEGORY_COUNT
 + 3)

	)

122 cÚ¡ * cÚ¡ 
	gch¬C©Names
[
U_CHAR_EXTENDED_CATEGORY_COUNT
] = {

160 
UBoŞ
 
U_CALLCONV
 
	$uÇmes_ş—nup
()

162 if(
uCh¬NamesD©a
) {

163 
	`ud©a_şo£
(
uCh¬NamesD©a
);

164 
uCh¬NamesD©a
 = 
NULL
;

166 if(
uCh¬Names
) {

167 
uCh¬Names
 = 
NULL
;

169 
gMaxNameL’gth
=0;

170  
TRUE
;

171 
	}
}

173 
UBoŞ
 
U_CALLCONV


174 
	$isAcû±abË
(*
cÚ‹xt
,

175 cÚ¡ *
ty³
, cÚ¡ *
Çme
,

176 cÚ¡ 
UD©aInfo
 *
pInfo
) {

177  (
UBoŞ
)(

178 
pInfo
->
size
>=20 &&

179 
pInfo
->
isBigEndŸn
==
U_IS_BIG_ENDIAN
 &&

180 
pInfo
->
ch¬£tFamy
==
U_CHARSET_FAMILY
 &&

181 
pInfo
->
d©aFÜm©
[0]==0x75 &&

182 
pInfo
->
d©aFÜm©
[1]==0x6e &&

183 
pInfo
->
d©aFÜm©
[2]==0x61 &&

184 
pInfo
->
d©aFÜm©
[3]==0x6d &&

185 
pInfo
->
fÜm©V”siÚ
[0]==1);

186 
	}
}

188 
UBoŞ


189 
	$isD©aLßded
(
UE¼ÜCode
 *
pE¼ÜCode
) {

191 
UBoŞ
 
isCached
;

194 
	`UMTX_CHECK
(
NULL
, (
uCh¬Names
!=NULL), 
isCached
);

196 if(!
isCached
) {

197 
UCh¬Names
 *
Çmes
;

198 
UD©aMemÜy
 *
d©a
;

201 if(
	`U_FAILURE
(
gLßdE¼ÜCode
)) {

202 *
pE¼ÜCode
=
gLßdE¼ÜCode
;

203  
FALSE
;

207 
d©a
=
	`ud©a_İ’Choiû
(
NULL
, 
DATA_TYPE
, 
DATA_NAME
, 
isAcû±abË
, NULL, 
pE¼ÜCode
);

208 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

209 
gLßdE¼ÜCode
=*
pE¼ÜCode
;

210  
FALSE
;

213 
Çmes
=(
UCh¬Names
 *)
	`ud©a_g‘MemÜy
(
d©a
);

217 
	`umtx_lock
(
NULL
);

218 if(
uCh¬Names
==
NULL
) {

219 
uCh¬NamesD©a
=
d©a
;

220 
uCh¬Names
=
Çmes
;

221 
d©a
=
NULL
;

222 
Çmes
=
NULL
;

223 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_UNAMES
, 
uÇmes_ş—nup
);

225 
	`umtx_uÆock
(
NULL
);

229 if(
d©a
!=
NULL
) {

230 
	`ud©a_şo£
(
d©a
);

233  
TRUE
;

234 
	}
}

236 
	#WRITE_CHAR
(
bufãr
, 
bufãrL’gth
, 
bufãrPos
, 
c
) { \

237 if((
bufãrL’gth
)>0) { \

238 *(
bufãr
)++=
c
; \

239 --(
bufãrL’gth
); \

241 ++(
bufãrPos
); \

242 }

	)

244 
	#U_ISO_COMMENT
 
U_CHAR_NAME_CHOICE_COUNT


	)

258 
ušt16_t


259 
	$ex·ndName
(
UCh¬Names
 *
Çmes
,

260 cÚ¡ 
ušt8_t
 *
Çme
, 
ušt16_t
 
ÇmeL’gth
, 
UCh¬NameChoiû
 
ÇmeChoiû
,

261 *
bufãr
, 
ušt16_t
 
bufãrL’gth
) {

262 
ušt16_t
 *
tok’s
=(ušt16_ˆ*)
Çmes
+8;

263 
ušt16_t
 
tok’
, 
tok’CouÁ
=*
tok’s
++, 
bufãrPos
=0;

264 
ušt8_t
 *
tok’SŒšgs
=(ušt8_ˆ*)
Çmes
+Çmes->
tok’SŒšgOff£t
;

265 
ušt8_t
 
c
;

267 if(
ÇmeChoiû
!=
U_UNICODE_CHAR_NAME
 &&‚ameChoiû!=
U_EXTENDED_CHAR_NAME
) {

272 if((
ušt8_t
)';'>=
tok’CouÁ
 || 
tok’s
[(ušt8_t)';']==(
ušt16_t
)(-1)) {

273 
f›ldIndex
ğ
ÇmeChoiû
==
U_ISO_COMMENT
 ? 2 :‚ameChoice;

275 
ÇmeL’gth
>0) {

276 --
ÇmeL’gth
;

277 if(*
Çme
++==';') {

281 } --
f›ldIndex
>0);

288 
ÇmeL’gth
=0;

293 
ÇmeL’gth
>0) {

294 --
ÇmeL’gth
;

295 
c
=*
Çme
++;

297 if(
c
>=
tok’CouÁ
) {

298 if(
c
!=';') {

300 
	`WRITE_CHAR
(
bufãr
, 
bufãrL’gth
, 
bufãrPos
, 
c
);

306 
tok’
=
tok’s
[
c
];

307 if(
tok’
==(
ušt16_t
)(-2)) {

309 
tok’
=
tok’s
[
c
<<8|*
Çme
++];

310 --
ÇmeL’gth
;

312 if(
tok’
==(
ušt16_t
)(-1)) {

313 if(
c
!=';') {

315 
	`WRITE_CHAR
(
bufãr
, 
bufãrL’gth
, 
bufãrPos
, 
c
);

320 if(!
bufãrPos
 && 
ÇmeChoiû
 =ğ
U_EXTENDED_CHAR_NAME
) {

321 ià((
ušt8_t
)';'>=
tok’CouÁ
 || 
tok’s
[(ušt8_t)';']==(
ušt16_t
)(-1)) {

330 
ušt8_t
 *
tok’SŒšg
=
tok’SŒšgs
+
tok’
;

331 (
c
=*
tok’SŒšg
++)!=0) {

332 
	`WRITE_CHAR
(
bufãr
, 
bufãrL’gth
, 
bufãrPos
, 
c
);

339 if(
bufãrL’gth
>0) {

340 *
bufãr
=0;

343  
bufãrPos
;

344 
	}
}

351 
UBoŞ


352 
	$com·»Name
(
UCh¬Names
 *
Çmes
,

353 cÚ¡ 
ušt8_t
 *
Çme
, 
ušt16_t
 
ÇmeL’gth
, 
UCh¬NameChoiû
 
ÇmeChoiû
,

354 cÚ¡ *
Ùh”Name
) {

355 
ušt16_t
 *
tok’s
=(ušt16_ˆ*)
Çmes
+8;

356 
ušt16_t
 
tok’
, 
tok’CouÁ
=*
tok’s
++;

357 
ušt8_t
 *
tok’SŒšgs
=(ušt8_ˆ*)
Çmes
+Çmes->
tok’SŒšgOff£t
;

358 
ušt8_t
 
c
;

359 cÚ¡ *
ÜigOth”Name
 = 
Ùh”Name
;

361 if(
ÇmeChoiû
!=
U_UNICODE_CHAR_NAME
 &&‚ameChoiû!=
U_EXTENDED_CHAR_NAME
) {

366 if((
ušt8_t
)';'>=
tok’CouÁ
 || 
tok’s
[(ušt8_t)';']==(
ušt16_t
)(-1)) {

367 
f›ldIndex
ğ
ÇmeChoiû
==
U_ISO_COMMENT
 ? 2 :‚ameChoice;

369 
ÇmeL’gth
>0) {

370 --
ÇmeL’gth
;

371 if(*
Çme
++==';') {

375 } --
f›ldIndex
>0);

382 
ÇmeL’gth
=0;

387 
ÇmeL’gth
>0) {

388 --
ÇmeL’gth
;

389 
c
=*
Çme
++;

391 if(
c
>=
tok’CouÁ
) {

392 if(
c
!=';') {

394 if(()
c
!=*
Ùh”Name
++) {

395  
FALSE
;

402 
tok’
=
tok’s
[
c
];

403 if(
tok’
==(
ušt16_t
)(-2)) {

405 
tok’
=
tok’s
[
c
<<8|*
Çme
++];

406 --
ÇmeL’gth
;

408 if(
tok’
==(
ušt16_t
)(-1)) {

409 if(
c
!=';') {

411 if(()
c
!=*
Ùh”Name
++) {

412  
FALSE
;

418 if(
Ùh”Name
 =ğ
ÜigOth”Name
 && 
ÇmeChoiû
 =ğ
U_EXTENDED_CHAR_NAME
) {

419 ià((
ušt8_t
)';'>=
tok’CouÁ
 || 
tok’s
[(ušt8_t)';']==(
ušt16_t
)(-1)) {

428 
ušt8_t
 *
tok’SŒšg
=
tok’SŒšgs
+
tok’
;

429 (
c
=*
tok’SŒšg
++)!=0) {

430 if(()
c
!=*
Ùh”Name
++) {

431  
FALSE
;

439  (
UBoŞ
)(*
Ùh”Name
==0);

440 
	}
}

442 
ušt8_t
 
	$g‘Ch¬C©
(
UCh¬32
 
ı
) {

443 
ušt8_t
 
ÿt
;

445 ià(
	`UTF_IS_UNICODE_NONCHAR
(
ı
)) {

446  
U_NONCHARACTER_CODE_POINT
;

449 ià((
ÿt
 = 
	`u_ch¬Ty³
(
ı
)è=ğ
U_SURROGATE
) {

450 
ÿt
 = 
	`UTF_IS_LEAD
(
ı
è? 
U_LEAD_SURROGATE
 : 
U_TRAIL_SURROGATE
;

453  
ÿt
;

454 
	}
}

456 cÚ¡ *
	$g‘Ch¬C©Name
(
UCh¬32
 
ı
) {

457 
ušt8_t
 
ÿt
 = 
	`g‘Ch¬C©
(
ı
);

462 ià(
ÿt
 >ğ
	`LENGTHOF
(
ch¬C©Names
)) {

465  
ch¬C©Names
[
ÿt
];

467 
	}
}

469 
ušt16_t
 
	$g‘ExtName
(
ušt32_t
 
code
, *
bufãr
, 
ušt16_t
 
bufãrL’gth
) {

470 cÚ¡ *
ÿŠame
 = 
	`g‘Ch¬C©Name
(
code
);

471 
ušt16_t
 
Ëngth
 = 0;

473 
UCh¬32
 
ı
;

474 
ndig™s
, 
i
;

476 
	`WRITE_CHAR
(
bufãr
, 
bufãrL’gth
, 
Ëngth
, '<');

477 
ÿŠame
[
Ëngth
 - 1]) {

478 
	`WRITE_CHAR
(
bufãr
, 
bufãrL’gth
, 
Ëngth
, 
ÿŠame
[length - 1]);

480 
	`WRITE_CHAR
(
bufãr
, 
bufãrL’gth
, 
Ëngth
, '-');

481 
ı
 = 
code
, 
ndig™s
 = 0; cp; ++ndigits, cp >>= 4)

483 ià(
ndig™s
 < 4)

484 
ndig™s
 = 4;

485 
ı
 = 
code
, 
i
 = 
ndig™s
; (ı || i > 0è&& 
bufãrL’gth
; cp >>= 4, bufferLength--) {

486 
ušt8_t
 
v
 = (ušt8_t)(
ı
 & 0xf);

487 
bufãr
[--
i
] = (
v
 < 10 ? '0' + v : 'A' + v - 10);

489 
bufãr
 +ğ
ndig™s
;

490 
Ëngth
 +ğ
ndig™s
;

491 
	`WRITE_CHAR
(
bufãr
, 
bufãrL’gth
, 
Ëngth
, '>');

493  
Ëngth
;

494 
	}
}

503 cÚ¡ 
ušt16_t
 *

504 
	$g‘Group
(
UCh¬Names
 *
Çmes
, 
ušt32_t
 
code
) {

505 cÚ¡ 
ušt16_t
 *
groups
=
	`GET_GROUPS
(
Çmes
);

506 
ušt16_t
 
groupMSB
=(ušt16_t)(
code
>>
GROUP_SHIFT
),

507 
¡¬t
=0,

508 
lim™
=*
groups
++,

509 
numb”
;

512 
¡¬t
<
lim™
-1) {

513 
numb”
=(
ušt16_t
)((
¡¬t
+
lim™
)/2);

514 if(
groupMSB
<
groups
[
numb”
*
GROUP_LENGTH
+
GROUP_MSB
]) {

515 
lim™
=
numb”
;

517 
¡¬t
=
numb”
;

522  
groups
+
¡¬t
*
GROUP_LENGTH
;

523 
	}
}

535 cÚ¡ 
ušt8_t
 *

536 
ex·ndGroupL’gths
(cÚ¡ 
ušt8_t
 *
s
,

537 
ušt16_t
 
off£ts
[
LINES_PER_GROUP
+1], ušt16_ˆ
Ëngths
[LINES_PER_GROUP+1]) {

539 
ušt16_t
 
	gi
=0, 
	goff£t
=0, 
	gËngth
=0;

540 
ušt8_t
 
	gËngthBy‹
;

543 
	gi
<
	gLINES_PER_GROUP
) {

544 
	gËngthBy‹
=*
s
++;

547 if(
	gËngth
>=12) {

549 
Ëngth
=(
ušt16_t
)((Ö’gth&0x3)<<4|
ËngthBy‹
>>4)+12);

550 
	gËngthBy‹
&=0xf;

551 } if((
	gËngthBy‹
 )>=0xc0) {

553 
Ëngth
=(
ušt16_t
)((
ËngthBy‹
&0x3f)+12);

556 
	gËngth
=(
ušt16_t
)(
ËngthBy‹
>>4);

557 
	gËngthBy‹
&=0xf;

560 *
	goff£ts
++=
off£t
;

561 *
	gËngths
++=
Ëngth
;

563 
	goff£t
+=
Ëngth
;

564 ++
	gi
;

567 if((
	gËngthBy‹
&0xf0)==0) {

569 
Ëngth
=
ËngthBy‹
;

570 if(
	gËngth
<12) {

572 *
	goff£ts
++=
off£t
;

573 *
	gËngths
++=
Ëngth
;

575 
	goff£t
+=
Ëngth
;

576 ++
	gi
;

579 
	gËngth
=0;

584  
	gs
;

587 
ušt16_t


588 
	$ex·ndGroupName
(
UCh¬Names
 *
Çmes
, cÚ¡ 
ušt16_t
 *
group
,

589 
ušt16_t
 
lšeNumb”
, 
UCh¬NameChoiû
 
ÇmeChoiû
,

590 *
bufãr
, 
ušt16_t
 
bufãrL’gth
) {

591 
ušt16_t
 
off£ts
[
LINES_PER_GROUP
+2], 
Ëngths
[LINES_PER_GROUP+2];

592 cÚ¡ 
ušt8_t
 *
s
=(ušt8_ˆ*)
Çmes
+Çmes->
groupSŒšgOff£t
+
	`GET_GROUP_OFFSET
(
group
);

593 
s
=
	`ex·ndGroupL’gths
(s, 
off£ts
, 
Ëngths
);

594  
	`ex·ndName
(
Çmes
, 
s
+
off£ts
[
lšeNumb”
], 
Ëngths
[lšeNumb”], 
ÇmeChoiû
,

595 
bufãr
, 
bufãrL’gth
);

596 
	}
}

598 
ušt16_t


599 
	$g‘Name
(
UCh¬Names
 *
Çmes
, 
ušt32_t
 
code
, 
UCh¬NameChoiû
 
ÇmeChoiû
,

600 *
bufãr
, 
ušt16_t
 
bufãrL’gth
) {

601 cÚ¡ 
ušt16_t
 *
group
=
	`g‘Group
(
Çmes
, 
code
);

602 if((
ušt16_t
)(
code
>>
GROUP_SHIFT
)==
group
[
GROUP_MSB
]) {

603  
	`ex·ndGroupName
(
Çmes
, 
group
, (
ušt16_t
)(
code
&
GROUP_MASK
), 
ÇmeChoiû
,

604 
bufãr
, 
bufãrL’gth
);

608 if(
bufãrL’gth
>0) {

609 *
bufãr
=0;

613 
	}
}

619 
UBoŞ


620 
	$’umGroupNames
(
UCh¬Names
 *
Çmes
, cÚ¡ 
ušt16_t
 *
group
,

621 
UCh¬32
 
¡¬t
, UCh¬32 
’d
,

622 
UEnumCh¬NamesFn
 *
â
, *
cÚ‹xt
,

623 
UCh¬NameChoiû
 
ÇmeChoiû
) {

624 
ušt16_t
 
off£ts
[
LINES_PER_GROUP
+2], 
Ëngths
[LINES_PER_GROUP+2];

625 cÚ¡ 
ušt8_t
 *
s
=(ušt8_ˆ*)
Çmes
+Çmes->
groupSŒšgOff£t
+
	`GET_GROUP_OFFSET
(
group
);

627 
s
=
	`ex·ndGroupL’gths
(s, 
off£ts
, 
Ëngths
);

628 if(
â
!=
DO_FIND_NAME
) {

629 
bufãr
[200];

630 
ušt16_t
 
Ëngth
;

632 
¡¬t
<=
’d
) {

633 
Ëngth
=
	`ex·ndName
(
Çmes
, 
s
+
off£ts
[
¡¬t
&
GROUP_MASK
], 
Ëngths
[¡¬t&GROUP_MASK], 
ÇmeChoiû
, 
bufãr
, (buffer));

634 ià(!
Ëngth
 && 
ÇmeChoiû
 =ğ
U_EXTENDED_CHAR_NAME
) {

635 
bufãr
[
Ëngth
 = 
	`g‘ExtName
(
¡¬t
, buffer, (buffer))] = 0;

638 if(
Ëngth
>0) {

639 if(!
	`â
(
cÚ‹xt
, 
¡¬t
, 
ÇmeChoiû
, 
bufãr
, 
Ëngth
)) {

640  
FALSE
;

643 ++
¡¬t
;

646 cÚ¡ *
Ùh”Name
=((
FšdName
 *)
cÚ‹xt
)->otherName;

647 
¡¬t
<=
’d
) {

648 if(
	`com·»Name
(
Çmes
, 
s
+
off£ts
[
¡¬t
&
GROUP_MASK
], 
Ëngths
[¡¬t&GROUP_MASK], 
ÇmeChoiû
, 
Ùh”Name
)) {

649 ((
FšdName
 *)
cÚ‹xt
)->
code
=
¡¬t
;

650  
FALSE
;

652 ++
¡¬t
;

655  
TRUE
;

656 
	}
}

664 
UBoŞ


665 
	$’umExtNames
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
,

666 
UEnumCh¬NamesFn
 *
â
, *
cÚ‹xt
)

668 if(
â
!=
DO_FIND_NAME
) {

669 
bufãr
[200];

670 
ušt16_t
 
Ëngth
;

672 
¡¬t
<=
’d
) {

673 
bufãr
[
Ëngth
 = 
	`g‘ExtName
(
¡¬t
, buffer, (buffer))] = 0;

675 if(
Ëngth
>0) {

676 if(!
	`â
(
cÚ‹xt
, 
¡¬t
, 
U_EXTENDED_CHAR_NAME
, 
bufãr
, 
Ëngth
)) {

677  
FALSE
;

680 ++
¡¬t
;

684  
TRUE
;

685 
	}
}

687 
UBoŞ


688 
	$’umNames
(
UCh¬Names
 *
Çmes
,

689 
UCh¬32
 
¡¬t
, UCh¬32 
lim™
,

690 
UEnumCh¬NamesFn
 *
â
, *
cÚ‹xt
,

691 
UCh¬NameChoiû
 
ÇmeChoiû
) {

692 
ušt16_t
 
¡¬tGroupMSB
, 
’dGroupMSB
, 
groupCouÁ
;

693 cÚ¡ 
ušt16_t
 *
group
, *
groupLim™
;

695 
¡¬tGroupMSB
=(
ušt16_t
)(
¡¬t
>>
GROUP_SHIFT
);

696 
’dGroupMSB
=(
ušt16_t
)((
lim™
-1)>>
GROUP_SHIFT
);

699 
group
=
	`g‘Group
(
Çmes
, 
¡¬t
);

701 if(
¡¬tGroupMSB
==
’dGroupMSB
) {

702 if(
¡¬tGroupMSB
==
group
[
GROUP_MSB
]) {

704  
	`’umGroupNames
(
Çmes
, 
group
, 
¡¬t
, 
lim™
-1, 
â
, 
cÚ‹xt
, 
ÇmeChoiû
);

707 cÚ¡ 
ušt16_t
 *
groups
=
	`GET_GROUPS
(
Çmes
);

708 
groupCouÁ
=*
groups
++;

709 
groupLim™
=
groups
+
groupCouÁ
*
GROUP_LENGTH
;

711 if(
¡¬tGroupMSB
==
group
[
GROUP_MSB
]) {

713 if((
¡¬t
&
GROUP_MASK
)!=0) {

714 if(!
	`’umGroupNames
(
Çmes
, 
group
,

715 
¡¬t
, ((
UCh¬32
)
¡¬tGroupMSB
<<
GROUP_SHIFT
)+
LINES_PER_GROUP
-1,

716 
â
, 
cÚ‹xt
, 
ÇmeChoiû
)) {

717  
FALSE
;

719 
group
=
	`NEXT_GROUP
(group);

721 } if(
¡¬tGroupMSB
>
group
[
GROUP_MSB
]) {

723 cÚ¡ 
ušt16_t
 *
ÃxtGroup
=
	`NEXT_GROUP
(
group
);

724 ià(
ÃxtGroup
 < 
groupLim™
 &&‚extGroup[
GROUP_MSB
] > 
¡¬tGroupMSB
 && 
ÇmeChoiû
 =ğ
U_EXTENDED_CHAR_NAME
) {

725 
UCh¬32
 
’d
 = 
ÃxtGroup
[
GROUP_MSB
] << 
GROUP_SHIFT
;

726 ià(
’d
 > 
lim™
) {

727 
’d
 = 
lim™
;

729 ià(!
	`’umExtNames
(
¡¬t
, 
’d
 - 1, 
â
, 
cÚ‹xt
)) {

730  
FALSE
;

733 
group
=
ÃxtGroup
;

737 
group
<
groupLim™
 && group[
GROUP_MSB
]<
’dGroupMSB
) {

738 cÚ¡ 
ušt16_t
 *
ÃxtGroup
;

739 
¡¬t
=(
UCh¬32
)
group
[
GROUP_MSB
]<<
GROUP_SHIFT
;

740 if(!
	`’umGroupNames
(
Çmes
, 
group
, 
¡¬t
, s¹+
LINES_PER_GROUP
-1, 
â
, 
cÚ‹xt
, 
ÇmeChoiû
)) {

741  
FALSE
;

743 
ÃxtGroup
=
	`NEXT_GROUP
(
group
);

744 ià(
ÃxtGroup
 < 
groupLim™
 &&‚extGroup[
GROUP_MSB
] > 
group
[GROUP_MSB] + 1 && 
ÇmeChoiû
 =ğ
U_EXTENDED_CHAR_NAME
) {

745 
UCh¬32
 
’d
 = 
ÃxtGroup
[
GROUP_MSB
] << 
GROUP_SHIFT
;

746 ià(
’d
 > 
lim™
) {

747 
’d
 = 
lim™
;

749 ià(!
	`’umExtNames
((
group
[
GROUP_MSB
] + 1è<< 
GROUP_SHIFT
, 
’d
 - 1, 
â
, 
cÚ‹xt
)) {

750  
FALSE
;

753 
group
=
ÃxtGroup
;

757 if(
group
<
groupLim™
 && group[
GROUP_MSB
]==
’dGroupMSB
) {

758  
	`’umGroupNames
(
Çmes
, 
group
, (
lim™
-1)&~
GROUP_MASK
,†im™-1, 
â
, 
cÚ‹xt
, 
ÇmeChoiû
);

759 } ià(
ÇmeChoiû
 =ğ
U_EXTENDED_CHAR_NAME
 && 
group
 =ğ
groupLim™
) {

760 
UCh¬32
 
Ãxt
 = (
	`PREV_GROUP
(
group
)[
GROUP_MSB
] + 1è<< 
GROUP_SHIFT
;

761 ià(
Ãxt
 > 
¡¬t
) {

762 
¡¬t
 = 
Ãxt
;

765  
TRUE
;

771 ià(
ÇmeChoiû
 =ğ
U_EXTENDED_CHAR_NAME
) {

772 ià(
lim™
 > 
UCHAR_MAX_VALUE
 + 1) {

773 
lim™
 = 
UCHAR_MAX_VALUE
 + 1;

775  
	`’umExtNames
(
¡¬t
, 
lim™
 - 1, 
â
, 
cÚ‹xt
);

778  
TRUE
;

779 
	}
}

781 
ušt16_t


782 
	$wr™eFaùÜSuffix
(cÚ¡ 
ušt16_t
 *
çùÜs
, ušt16_ˆ
couÁ
,

783 cÚ¡ *
s
,

784 
ušt32_t
 
code
,

785 
ušt16_t
 
šdexes
[8],

786 cÚ¡ *
–em’tBa£s
[8], cÚ¡ *
–em’ts
[8],

787 *
bufãr
, 
ušt16_t
 
bufãrL’gth
) {

788 
ušt16_t
 
i
, 
çùÜ
, 
bufãrPos
=0;

789 
c
;

799 --
couÁ
;

800 
i
=
couÁ
; i>0; --i) {

801 
çùÜ
=
çùÜs
[
i
];

802 
šdexes
[
i
]=(
ušt16_t
)(
code
%
çùÜ
);

803 
code
/=
çùÜ
;

809 
šdexes
[0]=(
ušt16_t
)
code
;

813 if(
–em’tBa£s
!=
NULL
) {

814 *
–em’tBa£s
++=
s
;

818 
çùÜ
=
šdexes
[
i
];

819 
çùÜ
>0) {

820 *
s
++!=0) {}

821 --
çùÜ
;

823 if(
–em’ts
!=
NULL
) {

824 *
–em’ts
++=
s
;

828 (
c
=*
s
++)!=0) {

829 
	`WRITE_CHAR
(
bufãr
, 
bufãrL’gth
, 
bufãrPos
, 
c
);

833 if(
i
>=
couÁ
) {

838 
çùÜ
=(
ušt16_t
)(
çùÜs
[
i
]-
šdexes
[i]-1);

839 
çùÜ
>0) {

840 *
s
++!=0) {}

841 --
çùÜ
;

844 ++
i
;

848 if(
bufãrL’gth
>0) {

849 *
bufãr
=0;

852  
bufãrPos
;

853 
	}
}

860 
ušt16_t


861 
	$g‘AlgName
(
AlgÜ™hmicRªge
 *
¿nge
, 
ušt32_t
 
code
, 
UCh¬NameChoiû
 
ÇmeChoiû
,

862 *
bufãr
, 
ušt16_t
 
bufãrL’gth
) {

863 
ušt16_t
 
bufãrPos
=0;

866 if(
ÇmeChoiû
!=
U_UNICODE_CHAR_NAME
 &&‚ameChoiû!=
U_EXTENDED_CHAR_NAME
) {

868 if(
bufãrL’gth
>0) {

869 *
bufãr
=0;

874 
¿nge
->
ty³
) {

877 cÚ¡ *
s
=(cÚ¡ *)(
¿nge
+1);

878 
c
;

880 
ušt16_t
 
i
, 
couÁ
;

883 (
c
=*
s
++)!=0) {

884 
	`WRITE_CHAR
(
bufãr
, 
bufãrL’gth
, 
bufãrPos
, 
c
);

888 
couÁ
=
¿nge
->
v¬ŸÁ
;

891 if(
couÁ
<
bufãrL’gth
) {

892 
bufãr
[
couÁ
]=0;

895 
i
=
couÁ
; i>0;) {

896 if(--
i
<
bufãrL’gth
) {

897 
c
=()(
code
&0xf);

898 if(
c
<10) {

899 
c
+='0';

901 
c
+='A'-10;

903 
bufãr
[
i
]=
c
;

905 
code
>>=4;

908 
bufãrPos
+=
couÁ
;

913 
ušt16_t
 
šdexes
[8];

914 cÚ¡ 
ušt16_t
 *
çùÜs
=(cÚ¡ ušt16_ˆ*)(
¿nge
+1);

915 
ušt16_t
 
couÁ
=
¿nge
->
v¬ŸÁ
;

916 cÚ¡ *
s
=(cÚ¡ *)(
çùÜs
+
couÁ
);

917 
c
;

920 (
c
=*
s
++)!=0) {

921 
	`WRITE_CHAR
(
bufãr
, 
bufãrL’gth
, 
bufãrPos
, 
c
);

924 
bufãrPos
+=
	`wr™eFaùÜSuffix
(
çùÜs
, 
couÁ
,

925 
s
, 
code
-
¿nge
->
¡¬t
, 
šdexes
, 
NULL
, NULL, 
bufãr
, 
bufãrL’gth
);

931 if(
bufãrL’gth
>0) {

932 *
bufãr
=0;

937  
bufãrPos
;

938 
	}
}

944 
UBoŞ


945 
	$’umAlgNames
(
AlgÜ™hmicRªge
 *
¿nge
,

946 
UCh¬32
 
¡¬t
, UCh¬32 
lim™
,

947 
UEnumCh¬NamesFn
 *
â
, *
cÚ‹xt
,

948 
UCh¬NameChoiû
 
ÇmeChoiû
) {

949 
bufãr
[200];

950 
ušt16_t
 
Ëngth
;

952 if(
ÇmeChoiû
!=
U_UNICODE_CHAR_NAME
 &&‚ameChoiû!=
U_EXTENDED_CHAR_NAME
) {

953  
TRUE
;

956 
¿nge
->
ty³
) {

958 *
s
, *
’d
;

959 
c
;

962 
Ëngth
=
	`g‘AlgName
(
¿nge
, (
ušt32_t
)
¡¬t
, 
ÇmeChoiû
, 
bufãr
, (buffer));

963 if(
Ëngth
<=0) {

964  
TRUE
;

968 if(!
	`â
(
cÚ‹xt
, 
¡¬t
, 
ÇmeChoiû
, 
bufãr
, 
Ëngth
)) {

969  
FALSE
;

973 
’d
=
bufãr
;

974 *
’d
!=0) {

975 ++
’d
;

979 ++
¡¬t
<
lim™
) {

981 
s
=
’d
;

983 
c
=*--
s
;

984 if(('0'<=
c
 && c<'9') || ('A'<=c && c<'F')) {

985 *
s
=()(
c
+1);

987 } if(
c
=='9') {

988 *
s
='A';

990 } if(
c
=='F') {

991 *
s
='0';

995 if(!
	`â
(
cÚ‹xt
, 
¡¬t
, 
ÇmeChoiû
, 
bufãr
, 
Ëngth
)) {

996  
FALSE
;

1002 
ušt16_t
 
šdexes
[8];

1003 cÚ¡ *
–em’tBa£s
[8], *
–em’ts
[8];

1004 cÚ¡ 
ušt16_t
 *
çùÜs
=(cÚ¡ ušt16_ˆ*)(
¿nge
+1);

1005 
ušt16_t
 
couÁ
=
¿nge
->
v¬ŸÁ
;

1006 cÚ¡ *
s
=(cÚ¡ *)(
çùÜs
+
couÁ
);

1007 *
suffix
, *
t
;

1008 
ušt16_t
 
´efixL’gth
, 
i
, 
idx
;

1010 
c
;

1015 
suffix
=
bufãr
;

1016 
´efixL’gth
=0;

1017 (
c
=*
s
++)!=0) {

1018 *
suffix
++=
c
;

1019 ++
´efixL’gth
;

1023 
Ëngth
=(
ušt16_t
)(
´efixL’gth
+
	`wr™eFaùÜSuffix
(
çùÜs
, 
couÁ
,

1024 
s
, (
ušt32_t
)
¡¬t
-
¿nge
->start,

1025 
šdexes
, 
–em’tBa£s
, 
–em’ts
,

1026 
suffix
, (
ušt16_t
)((
bufãr
)-
´efixL’gth
)));

1029 if(!
	`â
(
cÚ‹xt
, 
¡¬t
, 
ÇmeChoiû
, 
bufãr
, 
Ëngth
)) {

1030  
FALSE
;

1034 ++
¡¬t
<
lim™
) {

1036 
i
=
couÁ
;

1038 
idx
=(
ušt16_t
)(
šdexes
[--
i
]+1);

1039 if(
idx
<
çùÜs
[
i
]) {

1041 
šdexes
[
i
]=
idx
;

1042 
s
=
–em’ts
[
i
];

1043 *
s
++!=0) {

1045 
–em’ts
[
i
]=
s
;

1049 
šdexes
[
i
]=0;

1050 
–em’ts
[
i
]=
–em’tBa£s
[i];

1055 
t
=
suffix
;

1056 
Ëngth
=
´efixL’gth
;

1057 
i
=0; i<
couÁ
; ++i) {

1058 
s
=
–em’ts
[
i
];

1059 (
c
=*
s
++)!=0) {

1060 *
t
++=
c
;

1061 ++
Ëngth
;

1065 *
t
=0;

1067 if(!
	`â
(
cÚ‹xt
, 
¡¬t
, 
ÇmeChoiû
, 
bufãr
, 
Ëngth
)) {

1068  
FALSE
;

1078  
TRUE
;

1079 
	}
}

1086 
UCh¬32


1087 
	$fšdAlgName
(
AlgÜ™hmicRªge
 *
¿nge
, 
UCh¬NameChoiû
 
ÇmeChoiû
, cÚ¡ *
Ùh”Name
) {

1088 
UCh¬32
 
code
;

1090 if(
ÇmeChoiû
!=
U_UNICODE_CHAR_NAME
 &&‚ameChoiû!=
U_EXTENDED_CHAR_NAME
) {

1094 
¿nge
->
ty³
) {

1097 cÚ¡ *
s
=(cÚ¡ *)(
¿nge
+1);

1098 
c
;

1100 
ušt16_t
 
i
, 
couÁ
;

1103 (
c
=*
s
++)!=0) {

1104 if(()
c
!=*
Ùh”Name
++) {

1110 
couÁ
=
¿nge
->
v¬ŸÁ
;

1111 
code
=0;

1112 
i
=0; i<
couÁ
; ++i) {

1113 
c
=*
Ùh”Name
++;

1114 if('0'<=
c
 && c<='9') {

1115 
code
=(code<<4)|(
c
-'0');

1116 } if('A'<=
c
 && c<='F') {

1117 
code
=(code<<4)|(
c
-'A'+10);

1124 if(*
Ùh”Name
==0 && 
¿nge
->
¡¬t
<=(
ušt32_t
)
code
 && (ušt32_t)code<ôªge->
’d
) {

1125  
code
;

1130 
bufãr
[64];

1131 
ušt16_t
 
šdexes
[8];

1132 cÚ¡ *
–em’tBa£s
[8], *
–em’ts
[8];

1133 cÚ¡ 
ušt16_t
 *
çùÜs
=(cÚ¡ ušt16_ˆ*)(
¿nge
+1);

1134 
ušt16_t
 
couÁ
=
¿nge
->
v¬ŸÁ
;

1135 cÚ¡ *
s
=(cÚ¡ *)(
çùÜs
+
couÁ
), *
t
;

1136 
UCh¬32
 
¡¬t
, 
lim™
;

1137 
ušt16_t
 
i
, 
idx
;

1139 
c
;

1144 (
c
=*
s
++)!=0) {

1145 if(()
c
!=*
Ùh”Name
++) {

1150 
¡¬t
=(
UCh¬32
)
¿nge
->start;

1151 
lim™
=(
UCh¬32
)(
¿nge
->
’d
+1);

1154 
	`wr™eFaùÜSuffix
(
çùÜs
, 
couÁ
, 
s
, 0,

1155 
šdexes
, 
–em’tBa£s
, 
–em’ts
, 
bufãr
, (buffer));

1158 if(0==
	`u´v_¡rcmp
(
Ùh”Name
, 
bufãr
)) {

1159  
¡¬t
;

1163 ++
¡¬t
<
lim™
) {

1165 
i
=
couÁ
;

1167 
idx
=(
ušt16_t
)(
šdexes
[--
i
]+1);

1168 if(
idx
<
çùÜs
[
i
]) {

1170 
šdexes
[
i
]=
idx
;

1171 
s
=
–em’ts
[
i
];

1172 *
s
++!=0) {}

1173 
–em’ts
[
i
]=
s
;

1177 
šdexes
[
i
]=0;

1178 
–em’ts
[
i
]=
–em’tBa£s
[i];

1183 
t
=
Ùh”Name
;

1184 
i
=0; i<
couÁ
; ++i) {

1185 
s
=
–em’ts
[
i
];

1186 (
c
=*
s
++)!=0) {

1187 if(
c
!=*
t
++) {

1188 
s
="";

1189 
i
=99;

1193 if(
i
<99 && *
t
==0) {

1194  
¡¬t
;

1205 
	}
}

1209 
	#SET_ADD
(
£t
, 
c
è((£t)[(
ušt8_t
)c>>5]|=((
ušt32_t
)1<<((ušt8_t)c&0x1f)))

	)

1210 
	#SET_CONTAINS
(
£t
, 
c
è(((£t)[(
ušt8_t
)c>>5]&((
ušt32_t
)1<<((ušt8_t)c&0x1f)))!=0)

	)

1212 
št32_t


1213 
	$ÿlcSŒšgS‘L’gth
(
ušt32_t
 
£t
[8], cÚ¡ *
s
) {

1214 
št32_t
 
Ëngth
=0;

1215 
c
;

1217 (
c
=*
s
++)!=0) {

1218 
	`SET_ADD
(
£t
, 
c
);

1219 ++
Ëngth
;

1221  
Ëngth
;

1222 
	}
}

1224 
št32_t


1225 
	$ÿlcAlgNameS‘sL’gths
(
št32_t
 
maxNameL’gth
) {

1226 
AlgÜ™hmicRªge
 *
¿nge
;

1227 
ušt32_t
 *
p
;

1228 
ušt32_t
 
¿ngeCouÁ
;

1229 
št32_t
 
Ëngth
;

1232 
p
=(
ušt32_t
 *)((
ušt8_t
 *)
uCh¬Names
+uCh¬Names->
®gNamesOff£t
);

1233 
¿ngeCouÁ
=*
p
;

1234 
¿nge
=(
AlgÜ™hmicRªge
 *)(
p
+1);

1235 
¿ngeCouÁ
>0) {

1236 
¿nge
->
ty³
) {

1240 
Ëngth
=
	`ÿlcSŒšgS‘L’gth
(
gNameS‘
, (cÚ¡ *)(
¿nge
+1))+¿nge->
v¬ŸÁ
;

1241 if(
Ëngth
>
maxNameL’gth
) {

1242 
maxNameL’gth
=
Ëngth
;

1247 cÚ¡ 
ušt16_t
 *
çùÜs
=(cÚ¡ ušt16_ˆ*)(
¿nge
+1);

1248 cÚ¡ *
s
;

1249 
št32_t
 
i
, 
couÁ
=
¿nge
->
v¬ŸÁ
, 
çùÜ
, 
çùÜL’gth
, 
maxFaùÜL’gth
;

1252 
s
=(cÚ¡ *)(
çùÜs
+
couÁ
);

1253 
Ëngth
=
	`ÿlcSŒšgS‘L’gth
(
gNameS‘
, 
s
);

1254 
s
+=
Ëngth
+1;

1257 
i
=0; i<
couÁ
; ++i) {

1258 
maxFaùÜL’gth
=0;

1259 
çùÜ
=
çùÜs
[
i
]; factor>0; --factor) {

1260 
çùÜL’gth
=
	`ÿlcSŒšgS‘L’gth
(
gNameS‘
, 
s
);

1261 
s
+=
çùÜL’gth
+1;

1262 if(
çùÜL’gth
>
maxFaùÜL’gth
) {

1263 
maxFaùÜL’gth
=
çùÜL’gth
;

1266 
Ëngth
+=
maxFaùÜL’gth
;

1269 if(
Ëngth
>
maxNameL’gth
) {

1270 
maxNameL’gth
=
Ëngth
;

1279 
¿nge
=(
AlgÜ™hmicRªge
 *)((
ušt8_t
 *ìªge+¿nge->
size
);

1280 --
¿ngeCouÁ
;

1282  
maxNameL’gth
;

1283 
	}
}

1285 
št32_t


1286 
	$ÿlcExtNameS‘sL’gths
(
št32_t
 
maxNameL’gth
) {

1287 
št32_t
 
i
, 
Ëngth
;

1289 
i
=0; i<
	`LENGTHOF
(
ch¬C©Names
); ++i) {

1297 
Ëngth
=9+
	`ÿlcSŒšgS‘L’gth
(
gNameS‘
, 
ch¬C©Names
[
i
]);

1298 if(
Ëngth
>
maxNameL’gth
) {

1299 
maxNameL’gth
=
Ëngth
;

1302  
maxNameL’gth
;

1303 
	}
}

1305 
št32_t


1306 
	$ÿlcNameS‘L’gth
(cÚ¡ 
ušt16_t
 *
tok’s
, ušt16_ˆ
tok’CouÁ
, cÚ¡ 
ušt8_t
 *
tok’SŒšgs
, 
št8_t
 *
tok’L’gths
,

1307 
ušt32_t
 
£t
[8],

1308 cÚ¡ 
ušt8_t
 **
pLše
, cÚ¡ ušt8_ˆ*
lšeLim™
) {

1309 cÚ¡ 
ušt8_t
 *
lše
=*
pLše
;

1310 
št32_t
 
Ëngth
=0, 
tok’L’gth
;

1311 
ušt16_t
 
c
, 
tok’
;

1313 
lše
!=
lšeLim™
 && (
c
=*lše++)!=(
ušt8_t
)';') {

1314 if(
c
>=
tok’CouÁ
) {

1316 
	`SET_ADD
(
£t
, 
c
);

1317 ++
Ëngth
;

1319 
tok’
=
tok’s
[
c
];

1320 if(
tok’
==(
ušt16_t
)(-2)) {

1322 
c
=c<<8|*
lše
++;

1323 
tok’
=
tok’s
[
c
];

1325 if(
tok’
==(
ušt16_t
)(-1)) {

1327 
	`SET_ADD
(
£t
, 
c
);

1328 ++
Ëngth
;

1331 if(
tok’L’gths
!=
NULL
) {

1333 
tok’L’gth
=
tok’L’gths
[
c
];

1334 if(
tok’L’gth
==0) {

1335 
tok’L’gth
=
	`ÿlcSŒšgS‘L’gth
(
£t
, (cÚ¡ *)
tok’SŒšgs
+
tok’
);

1336 
tok’L’gths
[
c
]=(
št8_t
)
tok’L’gth
;

1339 
tok’L’gth
=
	`ÿlcSŒšgS‘L’gth
(
£t
, (cÚ¡ *)
tok’SŒšgs
+
tok’
);

1341 
Ëngth
+=
tok’L’gth
;

1346 *
pLše
=
lše
;

1347  
Ëngth
;

1348 
	}
}

1351 
	$ÿlcGroupNameS‘sL’gths
(
št32_t
 
maxNameL’gth
) {

1352 
ušt16_t
 
off£ts
[
LINES_PER_GROUP
+2], 
Ëngths
[LINES_PER_GROUP+2];

1354 
ušt16_t
 *
tok’s
=(ušt16_ˆ*)
uCh¬Names
+8;

1355 
ušt16_t
 
tok’CouÁ
=*
tok’s
++;

1356 
ušt8_t
 *
tok’SŒšgs
=(ušt8_ˆ*)
uCh¬Names
+uCh¬Names->
tok’SŒšgOff£t
;

1358 
št8_t
 *
tok’L’gths
;

1360 cÚ¡ 
ušt16_t
 *
group
;

1361 cÚ¡ 
ušt8_t
 *
s
, *
lše
, *
lšeLim™
;

1363 
št32_t
 
groupCouÁ
, 
lšeNumb”
, 
Ëngth
;

1365 
tok’L’gths
=(
št8_t
 *)
	`u´v_m®loc
(
tok’CouÁ
);

1366 if(
tok’L’gths
!=
NULL
) {

1367 
	`u´v_mem£t
(
tok’L’gths
, 0, 
tok’CouÁ
);

1370 
group
=
	`GET_GROUPS
(
uCh¬Names
);

1371 
groupCouÁ
=*
group
++;

1374 
groupCouÁ
>0) {

1375 
s
=(
ušt8_t
 *)
uCh¬Names
+uCh¬Names->
groupSŒšgOff£t
+
	`GET_GROUP_OFFSET
(
group
);

1376 
s
=
	`ex·ndGroupL’gths
(s, 
off£ts
, 
Ëngths
);

1379 
lšeNumb”
=0;†šeNumb”<
LINES_PER_GROUP
; ++lineNumber) {

1380 
lše
=
s
+
off£ts
[
lšeNumb”
];

1381 
Ëngth
=
Ëngths
[
lšeNumb”
];

1382 if(
Ëngth
==0) {

1386 
lšeLim™
=
lše
+
Ëngth
;

1389 
Ëngth
=
	`ÿlcNameS‘L’gth
(
tok’s
, 
tok’CouÁ
, 
tok’SŒšgs
, 
tok’L’gths
, 
gNameS‘
, &
lše
, 
lšeLim™
);

1390 if(
Ëngth
>
maxNameL’gth
) {

1391 
maxNameL’gth
=
Ëngth
;

1393 if(
lše
==
lšeLim™
) {

1398 
Ëngth
=
	`ÿlcNameS‘L’gth
(
tok’s
, 
tok’CouÁ
, 
tok’SŒšgs
, 
tok’L’gths
, 
gNameS‘
, &
lše
, 
lšeLim™
);

1399 if(
Ëngth
>
maxNameL’gth
) {

1400 
maxNameL’gth
=
Ëngth
;

1402 if(
lše
==
lšeLim™
) {

1410 
group
=
	`NEXT_GROUP
(group);

1411 --
groupCouÁ
;

1414 if(
tok’L’gths
!=
NULL
) {

1415 
	`u´v_ä“
(
tok’L’gths
);

1419 
gMaxNameL’gth
=
maxNameL’gth
;

1420 
	}
}

1422 
UBoŞ


1423 
	$ÿlcNameS‘sL’gths
(
UE¼ÜCode
 *
pE¼ÜCode
) {

1424 cÚ¡ 
extCh¬s
[]="0123456789ABCDEF<>-";

1425 
št32_t
 
i
, 
maxNameL’gth
;

1427 if(
gMaxNameL’gth
!=0) {

1428  
TRUE
;

1431 if(!
	`isD©aLßded
(
pE¼ÜCode
)) {

1432  
FALSE
;

1436 
i
=0; i<(
extCh¬s
)-1; ++i) {

1437 
	`SET_ADD
(
gNameS‘
, 
extCh¬s
[
i
]);

1441 
maxNameL’gth
=
	`ÿlcAlgNameS‘sL’gths
(0);

1444 
maxNameL’gth
=
	`ÿlcExtNameS‘sL’gths
(maxNameLength);

1447 
	`ÿlcGroupNameS‘sL’gths
(
maxNameL’gth
);

1449  
TRUE
;

1450 
	}
}

1454 
U_CAPI
 
št32_t
 
U_EXPORT2


1455 
	$u_ch¬Name
(
UCh¬32
 
code
, 
UCh¬NameChoiû
 
ÇmeChoiû
,

1456 *
bufãr
, 
št32_t
 
bufãrL’gth
,

1457 
UE¼ÜCode
 *
pE¼ÜCode
) {

1458 
AlgÜ™hmicRªge
 *
®gRªge
;

1459 
ušt32_t
 *
p
;

1460 
ušt32_t
 
i
;

1461 
št32_t
 
Ëngth
;

1464 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1466 } if(
ÇmeChoiû
>=
U_CHAR_NAME_CHOICE_COUNT
 ||

1467 
bufãrL’gth
<0 || (bufãrL’gth>0 && 
bufãr
==
NULL
)

1469 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1473 if((
ušt32_t
)
code
>
UCHAR_MAX_VALUE
 || !
	`isD©aLßded
(
pE¼ÜCode
)) {

1474  
	`u_‹rmš©eCh¬s
(
bufãr
, 
bufãrL’gth
, 0, 
pE¼ÜCode
);

1477 
Ëngth
=0;

1480 
p
=(
ušt32_t
 *)((
ušt8_t
 *)
uCh¬Names
+uCh¬Names->
®gNamesOff£t
);

1481 
i
=*
p
;

1482 
®gRªge
=(
AlgÜ™hmicRªge
 *)(
p
+1);

1483 
i
>0) {

1484 if(
®gRªge
->
¡¬t
<=(
ušt32_t
)
code
 && (ušt32_t)code<÷lgRªge->
’d
) {

1485 
Ëngth
=
	`g‘AlgName
(
®gRªge
, (
ušt32_t
)
code
, 
ÇmeChoiû
, 
bufãr
, (
ušt16_t
)
bufãrL’gth
);

1488 
®gRªge
=(
AlgÜ™hmicRªge
 *)((
ušt8_t
 *ïlgRªge+®gRªge->
size
);

1489 --
i
;

1492 if(
i
==0) {

1493 ià(
ÇmeChoiû
 =ğ
U_EXTENDED_CHAR_NAME
) {

1494 
Ëngth
 = 
	`g‘Name
(
uCh¬Names
, (
ušt32_t
 )
code
, 
U_EXTENDED_CHAR_NAME
, 
bufãr
, (
ušt16_t
è
bufãrL’gth
);

1495 ià(!
Ëngth
) {

1497 
Ëngth
 = 
	`g‘ExtName
((
ušt32_t
è
code
, 
bufãr
, (
ušt16_t
è
bufãrL’gth
);

1501 
Ëngth
=
	`g‘Name
(
uCh¬Names
, (
ušt32_t
)
code
, 
ÇmeChoiû
, 
bufãr
, (
ušt16_t
)
bufãrL’gth
);

1505  
	`u_‹rmš©eCh¬s
(
bufãr
, 
bufãrL’gth
, 
Ëngth
, 
pE¼ÜCode
);

1506 
	}
}

1508 
U_CAPI
 
št32_t
 
U_EXPORT2


1509 
	$u_g‘ISOComm’t
(
UCh¬32
 
c
,

1510 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1511 
UE¼ÜCode
 *
pE¼ÜCode
) {

1512 
št32_t
 
Ëngth
;

1515 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1517 } if(
de¡C­ac™y
<0 || (de¡C­ac™y>0 && 
de¡
==
NULL
)) {

1518 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1522 if((
ušt32_t
)
c
>
UCHAR_MAX_VALUE
 || !
	`isD©aLßded
(
pE¼ÜCode
)) {

1523  
	`u_‹rmš©eCh¬s
(
de¡
, 
de¡C­ac™y
, 0, 
pE¼ÜCode
);

1527 
Ëngth
=
	`g‘Name
(
uCh¬Names
, (
ušt32_t
)
c
, 
U_ISO_COMMENT
, 
de¡
, (
ušt16_t
)
de¡C­ac™y
);

1528  
	`u_‹rmš©eCh¬s
(
de¡
, 
de¡C­ac™y
, 
Ëngth
, 
pE¼ÜCode
);

1529 
	}
}

1531 
U_CAPI
 
UCh¬32
 
U_EXPORT2


1532 
	$u_ch¬FromName
(
UCh¬NameChoiû
 
ÇmeChoiû
,

1533 cÚ¡ *
Çme
,

1534 
UE¼ÜCode
 *
pE¼ÜCode
) {

1535 
uµ”
[120], 
low”
[120];

1536 
FšdName
 
fšdName
;

1537 
AlgÜ™hmicRªge
 *
®gRªge
;

1538 
ušt32_t
 *
p
;

1539 
ušt32_t
 
i
;

1540 
UCh¬32
 
ı
 = 0;

1541 
c0
;

1542 
UCh¬32
 
”rÜ
 = 0xffff;

1544 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1545  
”rÜ
;

1548 if(
ÇmeChoiû
>=
U_CHAR_NAME_CHOICE_COUNT
 || 
Çme
==
NULL
 || *name==0) {

1549 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1550  
”rÜ
;

1553 if(!
	`isD©aLßded
(
pE¼ÜCode
)) {

1554  
”rÜ
;

1558 
i
=0; i<(
uµ”
); ++i) {

1559 if((
c0
=*
Çme
++)!=0) {

1560 
uµ”
[
i
]=
	`u´v_touµ”
(
c0
);

1561 
low”
[
i
]=
	`u´v_tŞow”
(
c0
);

1563 
uµ”
[
i
]=
low”
[i]=0;

1567 if(
i
==(
uµ”
)) {

1569 *
pE¼ÜCode
 = 
U_ILLEGAL_CHAR_FOUND
;

1570  
”rÜ
;

1574 ià(
low”
[0] == '<') {

1575 ià(
ÇmeChoiû
 =ğ
U_EXTENDED_CHAR_NAME
) {

1576 ià(
low”
[--
i
] == '>') {

1577 --
i
; 
low”
[i] &&†ower[i] != '-'; --i) {

1580 ià(
low”
[
i
] == '-') {

1581 
ušt32_t
 
cIdx
;

1583 
low”
[
i
] = 0;

1585 ++
i
; 
low”
[i] != '>'; ++i) {

1586 ià(
low”
[
i
] >= '0' &&†ower[i] <= '9') {

1587 
ı
 = (ı << 4è+ 
low”
[
i
] - '0';

1588 } ià(
low”
[
i
] >= 'a' &&†ower[i] <= 'f') {

1589 
ı
 = (ı << 4è+ 
low”
[
i
] - 'a' + 10;

1591 *
pE¼ÜCode
 = 
U_ILLEGAL_CHAR_FOUND
;

1592  
”rÜ
;

1600 
low”
[
i
] = 0, 
cIdx
 = 0; cIdx < 
	`LENGTHOF
(
ch¬C©Names
); ++cIdx) {

1602 ià(!
	`u´v_¡rcmp
(
low”
 + 1, 
ch¬C©Names
[
cIdx
])) {

1603 ià(
	`g‘Ch¬C©
(
ı
è=ğ
cIdx
) {

1604  
ı
;

1613 *
pE¼ÜCode
 = 
U_ILLEGAL_CHAR_FOUND
;

1614  
”rÜ
;

1618 
p
=(
ušt32_t
 *)((
ušt8_t
 *)
uCh¬Names
+uCh¬Names->
®gNamesOff£t
);

1619 
i
=*
p
;

1620 
®gRªge
=(
AlgÜ™hmicRªge
 *)(
p
+1);

1621 
i
>0) {

1622 if((
ı
=
	`fšdAlgName
(
®gRªge
, 
ÇmeChoiû
, 
uµ”
))!=0xffff) {

1623  
ı
;

1625 
®gRªge
=(
AlgÜ™hmicRªge
 *)((
ušt8_t
 *ïlgRªge+®gRªge->
size
);

1626 --
i
;

1630 
fšdName
.
Ùh”Name
=
uµ”
;

1631 
fšdName
.
code
=
”rÜ
;

1632 
	`’umNames
(
uCh¬Names
, 0, 
UCHAR_MAX_VALUE
 + 1, 
DO_FIND_NAME
, &
fšdName
, 
ÇmeChoiû
);

1633 ià(
fšdName
.
code
 =ğ
”rÜ
) {

1634 *
pE¼ÜCode
 = 
U_ILLEGAL_CHAR_FOUND
;

1636  
fšdName
.
code
;

1637 
	}
}

1639 
U_CAPI
 
U_EXPORT2


1640 
	$u_’umCh¬Names
(
UCh¬32
 
¡¬t
, UCh¬32 
lim™
,

1641 
UEnumCh¬NamesFn
 *
â
,

1642 *
cÚ‹xt
,

1643 
UCh¬NameChoiû
 
ÇmeChoiû
,

1644 
UE¼ÜCode
 *
pE¼ÜCode
) {

1645 
AlgÜ™hmicRªge
 *
®gRªge
;

1646 
ušt32_t
 *
p
;

1647 
ušt32_t
 
i
;

1649 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1653 if(
ÇmeChoiû
>=
U_CHAR_NAME_CHOICE_COUNT
 || 
â
==
NULL
) {

1654 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1658 if((
ušt32_t
è
lim™
 > 
UCHAR_MAX_VALUE
 + 1) {

1659 
lim™
 = 
UCHAR_MAX_VALUE
 + 1;

1661 if((
ušt32_t
)
¡¬t
>=(ušt32_t)
lim™
) {

1665 if(!
	`isD©aLßded
(
pE¼ÜCode
)) {

1671 
p
=(
ušt32_t
 *)((
ušt8_t
 *)
uCh¬Names
+uCh¬Names->
®gNamesOff£t
);

1672 
i
=*
p
;

1673 
®gRªge
=(
AlgÜ™hmicRªge
 *)(
p
+1);

1674 
i
>0) {

1677 if((
ušt32_t
)
¡¬t
<
®gRªge
->start) {

1678 if((
ušt32_t
)
lim™
<=
®gRªge
->
¡¬t
) {

1679 
	`’umNames
(
uCh¬Names
, 
¡¬t
, 
lim™
, 
â
, 
cÚ‹xt
, 
ÇmeChoiû
);

1682 if(!
	`’umNames
(
uCh¬Names
, 
¡¬t
, (
UCh¬32
)
®gRªge
->¡¬t, 
â
, 
cÚ‹xt
, 
ÇmeChoiû
)) {

1685 
¡¬t
=(
UCh¬32
)
®gRªge
->start;

1689 if((
ušt32_t
)
¡¬t
<=
®gRªge
->
’d
) {

1690 if((
ušt32_t
)
lim™
<=(
®gRªge
->
’d
+1)) {

1691 
	`’umAlgNames
(
®gRªge
, 
¡¬t
, 
lim™
, 
â
, 
cÚ‹xt
, 
ÇmeChoiû
);

1694 if(!
	`’umAlgNames
(
®gRªge
, 
¡¬t
, (
UCh¬32
ïlgRªge->
’d
+1, 
â
, 
cÚ‹xt
, 
ÇmeChoiû
)) {

1697 
¡¬t
=(
UCh¬32
)
®gRªge
->
’d
+1;

1700 
®gRªge
=(
AlgÜ™hmicRªge
 *)((
ušt8_t
 *ïlgRªge+®gRªge->
size
);

1701 --
i
;

1704 
	`’umNames
(
uCh¬Names
, 
¡¬t
, 
lim™
, 
â
, 
cÚ‹xt
, 
ÇmeChoiû
);

1705 
	}
}

1707 
U_CAPI
 
št32_t
 
U_EXPORT2


1708 
	$u´v_g‘MaxCh¬NameL’gth
() {

1709 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

1710 if(
	`ÿlcNameS‘sL’gths
(&
”rÜCode
)) {

1711  
gMaxNameL’gth
;

1715 
	}
}

1723 
	$ch¬S‘ToUS‘
(
ušt32_t
 
c£t
[8], cÚ¡ 
US‘Add”
 *
§
) {

1724 
UCh¬
 
us
[256];

1725 
cs
[256];

1727 
št32_t
 
i
, 
Ëngth
;

1728 
UE¼ÜCode
 
”rÜCode
;

1730 
”rÜCode
=
U_ZERO_ERROR
;

1732 if(!
	`ÿlcNameS‘sL’gths
(&
”rÜCode
)) {

1737 
Ëngth
=0;

1738 
i
=0; i<256; ++i) {

1739 if(
	`SET_CONTAINS
(
c£t
, 
i
)) {

1740 
cs
[
Ëngth
++]=()
i
;

1745 
	`u_ch¬sToUCh¬s
(
cs
, 
us
, 
Ëngth
);

1748 
i
=0; i<
Ëngth
; ++i) {

1749 if(
us
[
i
]!=0 || 
cs
[i]==0) {

1750 
§
->
	`add
(§->
£t
, 
us
[
i
]);

1753 
	}
}

1759 
U_CAPI
 
U_EXPORT2


1760 
	$u´v_g‘Ch¬NameCh¬aù”s
(cÚ¡ 
US‘Add”
 *
§
) {

1761 
	`ch¬S‘ToUS‘
(
gNameS‘
, 
§
);

1762 
	}
}

1778 
	$makeTok’M­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

1779 
št16_t
 
tok’s
[], 
ušt16_t
 
tok’CouÁ
,

1780 
ušt8_t
 
m­
[256],

1781 
UE¼ÜCode
 *
pE¼ÜCode
) {

1782 
UBoŞ
 
u£dOutCh¬
[256];

1783 
ušt16_t
 
i
, 
j
;

1784 
ušt8_t
 
c1
, 
c2
;

1786 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1790 if(
ds
->
šCh¬£t
==ds->
outCh¬£t
) {

1792 
i
=0; i<256; ++i) {

1793 
m­
[
i
]=(
ušt8_t
)i;

1796 
	`u´v_mem£t
(
m­
, 0, 256);

1797 
	`u´v_mem£t
(
u£dOutCh¬
, 0, 256);

1799 if(
tok’CouÁ
>256) {

1800 
tok’CouÁ
=256;

1804 
i
=1; i<
tok’CouÁ
; ++i) {

1805 if(
tok’s
[
i
]==-1) {

1807 
c1
=(
ušt8_t
)
i
;

1808 
ds
->
	`sw­InvCh¬s
(ds, &
c1
, 1, &
c2
, 
pE¼ÜCode
);

1809 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1810 
	`ud©a_´štE¼Ü
(
ds
, "unames/makeTokenMap() finds variant character 0x%02x used (input charset family %d)\n",

1811 
i
, 
ds
->
šCh¬£t
);

1816 
m­
[
c1
]=
c2
;

1817 
u£dOutCh¬
[
c2
]=
TRUE
;

1822 
i
=
j
=1; i<
tok’CouÁ
; ++i) {

1824 if(
m­
[
i
]==0) {

1826 
u£dOutCh¬
[
j
]) {

1827 ++
j
;

1829 
m­
[
i
]=(
ušt8_t
)
j
++;

1838 
	}
}

1840 
U_CAPI
 
št32_t
 
U_EXPORT2


1841 
	$uch¬_sw­Names
(cÚ¡ 
UD©aSw­³r
 *
ds
,

1842 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

1843 
UE¼ÜCode
 *
pE¼ÜCode
) {

1844 cÚ¡ 
UD©aInfo
 *
pInfo
;

1845 
št32_t
 
h—d”Size
;

1847 cÚ¡ 
ušt8_t
 *
šBy‹s
;

1848 
ušt8_t
 *
outBy‹s
;

1850 
ušt32_t
 
tok’SŒšgOff£t
, 
groupsOff£t
, 
groupSŒšgOff£t
, 
®gNamesOff£t
,

1851 
off£t
, 
i
, 
couÁ
, 
¡ršgsCouÁ
;

1853 cÚ¡ 
AlgÜ™hmicRªge
 *
šRªge
;

1854 
AlgÜ™hmicRªge
 *
outRªge
;

1857 
h—d”Size
=
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
pE¼ÜCode
);

1858 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1863 
pInfo
=(cÚ¡ 
UD©aInfo
 *)((cÚ¡ *)
šD©a
+4);

1865 
pInfo
->
d©aFÜm©
[0]==0x75 &&

1866 
pInfo
->
d©aFÜm©
[1]==0x6e &&

1867 
pInfo
->
d©aFÜm©
[2]==0x61 &&

1868 
pInfo
->
d©aFÜm©
[3]==0x6d &&

1869 
pInfo
->
fÜm©V”siÚ
[0]==1

1871 
	`ud©a_´štE¼Ü
(
ds
, "uchar_swapNames(): data format %02x.%02x.%02x.%02x (format version %02x) is‚ot„ecognized‡s unames.icu\n",

1872 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

1873 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3],

1874 
pInfo
->
fÜm©V”siÚ
[0]);

1875 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

1879 
šBy‹s
=(cÚ¡ 
ušt8_t
 *)
šD©a
+
h—d”Size
;

1880 
outBy‹s
=(
ušt8_t
 *)
outD©a
+
h—d”Size
;

1881 if(
Ëngth
<0) {

1882 
®gNamesOff£t
=
ds
->
	`»adUIÁ32
(((cÚ¡ 
ušt32_t
 *)
šBy‹s
)[3]);

1884 
Ëngth
-=
h—d”Size
;

1885 ifĞ
Ëngth
<20 ||

1886 (
ušt32_t
)
Ëngth
<(
®gNamesOff£t
=
ds
->
	`»adUIÁ32
(((cÚ¡ ušt32_ˆ*)
šBy‹s
)[3]))

1888 
	`ud©a_´štE¼Ü
(
ds
, "uchar_swapNames():oo few bytes (%d‡fter header) for unames.icu\n",

1889 
Ëngth
);

1890 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1895 if(
Ëngth
<0) {

1897 
off£t
=
®gNamesOff£t
;

1898 
couÁ
=
ds
->
	`»adUIÁ32
(*((cÚ¡ 
ušt32_t
 *)(
šBy‹s
+
off£t
)));

1899 
off£t
+=4;

1901 
i
=0; i<
couÁ
; ++i) {

1902 
šRªge
=(cÚ¡ 
AlgÜ™hmicRªge
 *)(
šBy‹s
+
off£t
);

1903 
off£t
+=
ds
->
	`»adUIÁ16
(
šRªge
->
size
);

1907 cÚ¡ 
ušt16_t
 *
p
;

1908 
ušt16_t
 *
q
, *
‹mp
;

1910 
št16_t
 
tok’s
[512];

1911 
ušt16_t
 
tok’CouÁ
;

1913 
ušt8_t
 
m­
[256], 
ŒaM­
[256];

1916 if(
šBy‹s
!=
outBy‹s
) {

1917 
	`u´v_memıy
(
outBy‹s
, 
šBy‹s
, 
Ëngth
);

1921 
tok’SŒšgOff£t
=
ds
->
	`»adUIÁ32
(((cÚ¡ 
ušt32_t
 *)
šBy‹s
)[0]);

1922 
groupsOff£t
=
ds
->
	`»adUIÁ32
(((cÚ¡ 
ušt32_t
 *)
šBy‹s
)[1]);

1923 
groupSŒšgOff£t
=
ds
->
	`»adUIÁ32
(((cÚ¡ 
ušt32_t
 *)
šBy‹s
)[2]);

1924 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
, 16, 
outBy‹s
, 
pE¼ÜCode
);

1930 
p
=(cÚ¡ 
ušt16_t
 *)(
šBy‹s
+16);

1931 
q
=(
ušt16_t
 *)(
outBy‹s
+16);

1934 
tok’CouÁ
=
ds
->
	`»adUIÁ16
(*
p
);

1935 
ds
->
	`sw­A¼ay16
(ds, 
p
, 2, 
q
, 
pE¼ÜCode
);

1936 ++
p
;

1937 ++
q
;

1940 if(
tok’CouÁ
<=512) {

1941 
couÁ
=
tok’CouÁ
;

1943 
couÁ
=512;

1945 
i
=0; i<
couÁ
; ++i) {

1946 
tok’s
[
i
]=
	`ud©a_»adIÁ16
(
ds
, 
p
[i]);

1948 ; 
i
<512; ++i) {

1949 
tok’s
[
i
]=0;

1951 
	`makeTok’M­
(
ds
, 
tok’s
, 
tok’CouÁ
, 
m­
, 
pE¼ÜCode
);

1952 
	`makeTok’M­
(
ds
, 
tok’s
+256, (
ušt16_t
)(
tok’CouÁ
>256 ?ok’CouÁ-256 : 0), 
ŒaM­
, 
pE¼ÜCode
);

1953 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1961 
‹mp
=(
ušt16_t
 *)
	`u´v_m®loc
(
tok’CouÁ
*2);

1962 if(
‹mp
==
NULL
) {

1963 
	`ud©a_´štE¼Ü
(
ds
, "out of memory swapping %u unames.icuokens\n",

1964 
tok’CouÁ
);

1965 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1970 
i
=0; i<
tok’CouÁ
 && i<256; ++i) {

1971 
ds
->
	`sw­A¼ay16
(ds, 
p
+
i
, 2, 
‹mp
+
m­
[i], 
pE¼ÜCode
);

1975 ; 
i
<
tok’CouÁ
; ++i) {

1976 
ds
->
	`sw­A¼ay16
(ds, 
p
+
i
, 2, 
‹mp
+(i&0xffffff00)+
ŒaM­
[i&0xff], 
pE¼ÜCode
);

1980 
	`u´v_memıy
(
q
, 
‹mp
, 
tok’CouÁ
*2);

1981 
	`u´v_ä“
(
‹mp
);

1987 
	`ud©a_sw­InvSŒšgBlock
(
ds
, 
šBy‹s
+
tok’SŒšgOff£t
, (
št32_t
)(
groupsOff£t
-tokenStringOffset),

1988 
outBy‹s
+
tok’SŒšgOff£t
, 
pE¼ÜCode
);

1989 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1990 
	`ud©a_´štE¼Ü
(
ds
, "uchar_swapNames(token strings) failed\n");

1995 
couÁ
=
ds
->
	`»adUIÁ16
(*((cÚ¡ 
ušt16_t
 *)(
šBy‹s
+
groupsOff£t
)));

1996 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
groupsOff£t
, (
št32_t
)((1+
couÁ
*3)*2),

1997 
outBy‹s
+
groupsOff£t
, 
pE¼ÜCode
);

2003 if(
ds
->
šCh¬£t
!=ds->
outCh¬£t
) {

2004 
ušt16_t
 
off£ts
[
LINES_PER_GROUP
+1], 
Ëngths
[LINES_PER_GROUP+1];

2006 cÚ¡ 
ušt8_t
 *
šSŒšgs
, *
ÃxtInSŒšgs
;

2007 
ušt8_t
 *
outSŒšgs
;

2009 
ušt8_t
 
c
;

2011 
šSŒšgs
=
šBy‹s
+
groupSŒšgOff£t
;

2012 
outSŒšgs
=
outBy‹s
+
groupSŒšgOff£t
;

2014 
¡ršgsCouÁ
=
®gNamesOff£t
-
groupSŒšgOff£t
;

2017 
¡ršgsCouÁ
>32) {

2018 
ÃxtInSŒšgs
=
	`ex·ndGroupL’gths
(
šSŒšgs
, 
off£ts
, 
Ëngths
);

2021 
¡ršgsCouÁ
-=(
ušt32_t
)(
ÃxtInSŒšgs
-
šSŒšgs
);

2022 
outSŒšgs
+=
ÃxtInSŒšgs
-
šSŒšgs
;

2023 
šSŒšgs
=
ÃxtInSŒšgs
;

2025 
couÁ
=
off£ts
[31]+
Ëngths
[31];

2026 
¡ršgsCouÁ
-=
couÁ
;

2029 
couÁ
>0) {

2030 
c
=*
šSŒšgs
++;

2031 *
outSŒšgs
++=
m­
[
c
];

2032 if(
tok’s
[
c
]!=-2) {

2033 --
couÁ
;

2036 *
outSŒšgs
++=
ŒaM­
[*
šSŒšgs
++];

2037 
couÁ
-=2;

2044 
off£t
=
®gNamesOff£t
;

2045 
couÁ
=
ds
->
	`»adUIÁ32
(*((cÚ¡ 
ušt32_t
 *)(
šBy‹s
+
off£t
)));

2046 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
+
off£t
, 4, 
outBy‹s
+off£t, 
pE¼ÜCode
);

2047 
off£t
+=4;

2049 
i
=0; i<
couÁ
; ++i) {

2050 if(
off£t
>(
ušt32_t
)
Ëngth
) {

2051 
	`ud©a_´štE¼Ü
(
ds
, "uchar_swapNames():oo few bytes (%d‡fter header) for unames.icu‡lgorithmic„ange %u\n",

2052 
Ëngth
, 
i
);

2053 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

2057 
šRªge
=(cÚ¡ 
AlgÜ™hmicRªge
 *)(
šBy‹s
+
off£t
);

2058 
outRªge
=(
AlgÜ™hmicRªge
 *)(
outBy‹s
+
off£t
);

2059 
off£t
+=
ds
->
	`»adUIÁ16
(
šRªge
->
size
);

2061 
ds
->
	`sw­A¼ay32
(ds, 
šRªge
, 8, 
outRªge
, 
pE¼ÜCode
);

2062 
ds
->
	`sw­A¼ay16
(ds, &
šRªge
->
size
, 2, &
outRªge
->size, 
pE¼ÜCode
);

2063 
šRªge
->
ty³
) {

2066 
ds
->
	`sw­InvCh¬s
(ds, 
šRªge
+1, (
št32_t
)
	`u´v_¡¾’
((const *)(inRange+1)),

2067 
outRªge
+1, 
pE¼ÜCode
);

2068 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2069 
	`ud©a_´štE¼Ü
(
ds
, "uchar_swapNames(prefix string of‡lgorithmic„ange %u) failed\n",

2070 
i
);

2077 
ušt32_t
 
çùÜsCouÁ
;

2079 
çùÜsCouÁ
=
šRªge
->
v¬ŸÁ
;

2080 
p
=(cÚ¡ 
ušt16_t
 *)(
šRªge
+1);

2081 
q
=(
ušt16_t
 *)(
outRªge
+1);

2082 
ds
->
	`sw­A¼ay16
(ds, 
p
, (
št32_t
)(
çùÜsCouÁ
*2), 
q
, 
pE¼ÜCode
);

2085 
p
+=
çùÜsCouÁ
;

2086 
q
+=
çùÜsCouÁ
;

2087 
¡ršgsCouÁ
=(
ušt32_t
)((
šBy‹s
+
off£t
)-(cÚ¡ 
ušt8_t
 *)
p
);

2088 
¡ršgsCouÁ
>0 && ((cÚ¡ 
ušt8_t
 *)
p
)[stringsCount-1]!=0) {

2089 --
¡ršgsCouÁ
;

2091 
ds
->
	`sw­InvCh¬s
(ds, 
p
, (
št32_t
)
¡ršgsCouÁ
, 
q
, 
pE¼ÜCode
);

2095 
	`ud©a_´štE¼Ü
(
ds
, "uchar_swapNames(): unknownype %u of‡lgorithmic„ange %u\n",

2096 
šRªge
->
ty³
, 
i
);

2097 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

2103  
h—d”Size
+(
št32_t
)
off£t
;

2104 
	}
}

	@unicode/brkiter.h

20 #iâdeà
BRKITER_H


21 
	#BRKITER_H


	)

23 
	~"unicode/uty³s.h
"

30 #ià
UCONFIG_NO_BREAK_ITERATION


32 
U_NAMESPACE_BEGIN


38 
şass
 
	gB»akI‹¿tÜ
;

40 
	gU_NAMESPACE_END


44 
	~"unicode/uobjeù.h
"

45 
	~"unicode/uni¡r.h
"

46 
	~"unicode/ch¬™”.h
"

47 
	~"unicode/locid.h
"

48 
	~"unicode/ubrk.h
"

49 
	~"unicode/¡»num.h
"

50 
	~"unicode/u‹xt.h
"

51 
	~"unicode/umisc.h
"

53 
U_NAMESPACE_BEGIN


100 şas 
	cU_COMMON_API
 
	mB»akI‹¿tÜ
 : 
public
 
UObjeù
 {

101 
public
:

106 
vœtu®
 ~
B»akI‹¿tÜ
();

121 
vœtu®
 
UBoŞ
 
	mİ”©Ü
==(cÚ¡ 
B»akI‹¿tÜ
&) const = 0;

129 
UBoŞ
 
	mİ”©Ü
!=(cÚ¡ 
B»akI‹¿tÜ
& 
rhs
ècÚ¡ {  !
İ”©Ü
==(rhs); }

136 
vœtu®
 
B»akI‹¿tÜ
* 
	$şÚe
() const = 0;

143 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const = 0;

149 
vœtu®
 
Ch¬aù”I‹¿tÜ
& 
	$g‘Text
() const = 0;

166 
vœtu®
 
UText
 *
	$g‘UText
(
UText
 *
flIn
, 
UE¼ÜCode
 &
¡©us
) const = 0;

174 
vœtu®
 
	`£tText
(cÚ¡ 
UnicodeSŒšg
 &
‹xt
) = 0;

189 
vœtu®
 
	`£tText
(
UText
 *
‹xt
, 
UE¼ÜCode
 &
¡©us
) = 0;

199 
vœtu®
 
	`adİtText
(
Ch¬aù”I‹¿tÜ
* 
™
) = 0;

207 
DONE
 = (
št32_t
)-1

208 
	}
};

214 
vœtu®
 
št32_t
 
fœ¡
() = 0;

220 
vœtu®
 
št32_t
 
Ï¡
() = 0;

228 
vœtu®
 
št32_t
 
´evious
() = 0;

236 
vœtu®
 
št32_t
 
Ãxt
() = 0;

243 
vœtu®
 
št32_t
 
	$cu¼’t
() const = 0;

253 
vœtu®
 
št32_t
 
	`fŞlowšg
(št32_ˆ
off£t
) = 0;

263 
vœtu®
 
št32_t
 
	`´eûdšg
(št32_ˆ
off£t
) = 0;

273 
vœtu®
 
UBoŞ
 
	`isBound¬y
(
št32_t
 
off£t
) = 0;

284 
vœtu®
 
št32_t
 
	`Ãxt
(št32_ˆ
n
) = 0;

305 
B»akI‹¿tÜ
* 
U_EXPORT2


306 
	`ü—‹WÜdIn¡ªû
(cÚ¡ 
LoÿË
& 
wh”e
, 
UE¼ÜCode
& 
¡©us
);

329 
B»akI‹¿tÜ
* 
U_EXPORT2


330 
	`ü—‹LšeIn¡ªû
(cÚ¡ 
LoÿË
& 
wh”e
, 
UE¼ÜCode
& 
¡©us
);

351 
B»akI‹¿tÜ
* 
U_EXPORT2


352 
	`ü—‹Ch¬aù”In¡ªû
(cÚ¡ 
LoÿË
& 
wh”e
, 
UE¼ÜCode
& 
¡©us
);

372 
B»akI‹¿tÜ
* 
U_EXPORT2


373 
	`ü—‹S’‹nûIn¡ªû
(cÚ¡ 
LoÿË
& 
wh”e
, 
UE¼ÜCode
& 
¡©us
);

397 
B»akI‹¿tÜ
* 
U_EXPORT2


398 
	`ü—‹T™ËIn¡ªû
(cÚ¡ 
LoÿË
& 
wh”e
, 
UE¼ÜCode
& 
¡©us
);

409 cÚ¡ 
LoÿË
* 
U_EXPORT2
 
	`g‘AvaabËLoÿËs
(
št32_t
& 
couÁ
);

420 
UnicodeSŒšg
& 
U_EXPORT2
 
	`g‘Di¥ÏyName
(cÚ¡ 
LoÿË
& 
objeùLoÿË
,

421 cÚ¡ 
LoÿË
& 
di¥ÏyLoÿË
,

422 
UnicodeSŒšg
& 
Çme
);

432 
UnicodeSŒšg
& 
U_EXPORT2
 
	`g‘Di¥ÏyName
(cÚ¡ 
LoÿË
& 
objeùLoÿË
,

433 
UnicodeSŒšg
& 
Çme
);

452 
vœtu®
 
B»akI‹¿tÜ
 * 
	`ü—‹BufãrClÚe
(*
¡ackBufãr
,

453 
št32_t
 &
BufãrSize
,

454 
UE¼ÜCode
 &
¡©us
) = 0;

462 
šlše
 
UBoŞ
 
	`isBufãrClÚe
();

464 #ià!
UCONFIG_NO_SERVICE


477 
URegi¡ryKey
 
U_EXPORT2
 
	`»gi¡”In¡ªû
(
B»akI‹¿tÜ
* 
toAdİt
,

478 cÚ¡ 
LoÿË
& 
loÿË
,

479 
UB»akI‹¿tÜTy³
 
kšd
,

480 
UE¼ÜCode
& 
¡©us
);

491 
UBoŞ
 
U_EXPORT2
 
	`uÄegi¡”
(
URegi¡ryKey
 
key
, 
UE¼ÜCode
& 
¡©us
);

499 
SŒšgEnum”©iÚ
* 
U_EXPORT2
 
	`g‘AvaabËLoÿËs
();

507 
LoÿË
 
	$g‘LoÿË
(
ULocD©aLoÿËTy³
 
ty³
, 
UE¼ÜCode
& 
¡©us
) const;

515 cÚ¡ *
	$g‘LoÿËID
(
ULocD©aLoÿËTy³
 
ty³
, 
UE¼ÜCode
& 
¡©us
) const;

517 
´iv©e
:

518 
B»akI‹¿tÜ
* 
	`budIn¡ªû
(cÚ¡ 
LoÿË
& 
loc
, cÚ¡ *
ty³
, 
št32_t
 
kšd
, 
UE¼ÜCode
& 
¡©us
);

519 
B»akI‹¿tÜ
* 
	`ü—‹In¡ªû
(cÚ¡ 
LoÿË
& 
loc
, 
št32_t
 
kšd
, 
UE¼ÜCode
& 
¡©us
);

520 
B»akI‹¿tÜ
* 
	`makeIn¡ªû
(cÚ¡ 
LoÿË
& 
loc
, 
št32_t
 
kšd
, 
UE¼ÜCode
& 
¡©us
);

522 
ä›nd
 
şass
 
ICUB»akI‹¿tÜFaùÜy
;

523 
ä›nd
 
şass
 
ICUB»akI‹¿tÜS”viû
;

525 
´Ùeùed
:

527 
	`B»akI‹¿tÜ
();

529 
UBoŞ
 
fBufãrClÚe
;

531 
	$B»akI‹¿tÜ
 (cÚ¡ 
B»akI‹¿tÜ
 &
Ùh”
è: 
	`UObjeù
(Ùh”), 
	$fBufãrClÚe
(
FALSE
è{
	}
}

533 
	g´iv©e
:

536 
aùu®LoÿË
[
ULOC_FULLNAME_CAPACITY
];

537 
	gv®idLoÿË
[
ULOC_FULLNAME_CAPACITY
];

543 
	gB»akI‹¿tÜ
& 
	gİ”©Ü
=(cÚ¡ 
B»akI‹¿tÜ
&);

546 
šlše
 
UBoŞ
 
	gB»akI‹¿tÜ
::
	$isBufãrClÚe
()

548  
fBufãrClÚe
;

549 
	}
}

551 
	gU_NAMESPACE_END


	@unicode/bytestream.h

30 #iâdeà
__BYTESTREAM_H__


31 
	#__BYTESTREAM_H__


	)

38 
	~"unicode/uty³s.h
"

39 
	~"unicode/uobjeù.h
"

40 
	~"unicode/¡d_¡ršg.h
"

42 
U_NAMESPACE_BEGIN


48 şas 
	cU_COMMON_API
 
	mBy‹Sšk
 : 
public
 
UMemÜy
 {

49 
public
:

54 
	$By‹Sšk
() { }

59 
vœtu®
 ~
	$By‹Sšk
(è{ 
	}
}

67 
vœtu®
 
Aµ’d
(cÚ¡ * 
by‹s
, 
št32_t
 
n
) = 0;

111 
vœtu®
 * 
G‘Aµ’dBufãr
(
št32_t
 
mš_ÿ·c™y
,

112 
št32_t
 
desœed_ÿ·c™y_hšt
,

113 * 
sü©ch
, 
št32_t
 
sü©ch_ÿ·c™y
,

114 
št32_t
* 
»suÉ_ÿ·c™y
);

124 
vœtu®
 
Flush
();

126 
	g´iv©e
:

127 
By‹Sšk
(const ByteSink &);

128 
	gBy‹Sšk
 &
	gİ”©Ü
=(cÚ¡ 
By‹Sšk
 &);

143 şas 
	cU_COMMON_API
 
	mCheckedA¼ayBy‹Sšk
 : 
public
 
By‹Sšk
 {

144 
public
:

151 
CheckedA¼ayBy‹Sšk
(* 
outbuf
, 
št32_t
 
ÿ·c™y
);

160 
vœtu®
 
	mCheckedA¼ayBy‹Sšk
& 
Re£t
();

167 
vœtu®
 
Aµ’d
(cÚ¡ * 
by‹s
, 
št32_t
 
n
);

182 
vœtu®
 * 
G‘Aµ’dBufãr
(
št32_t
 
mš_ÿ·c™y
,

183 
št32_t
 
desœed_ÿ·c™y_hšt
,

184 * 
sü©ch
, 
št32_t
 
sü©ch_ÿ·c™y
,

185 
št32_t
* 
»suÉ_ÿ·c™y
);

191 
št32_t
 
	$Numb”OfBy‹sWr™‹n
(ècÚ¡ {  
size_
; }

198 
UBoŞ
 
	$Ov”æowed
(ècÚ¡ {  
ov”æowed_
; 
	}
}

206 
št32_t
 
	$Numb”OfBy‹sAµ’ded
(ècÚ¡ {  
­³nded_
; 
	}
}

207 
	g´iv©e
:

208 * 
outbuf_
;

209 cÚ¡ 
št32_t
 
	gÿ·c™y_
;

210 
št32_t
 
	gsize_
;

211 
št32_t
 
	g­³nded_
;

212 
UBoŞ
 
	gov”æowed_
;

213 
CheckedA¼ayBy‹Sšk
();

214 
CheckedA¼ayBy‹Sšk
(const CheckedArrayByteSink &);

215 
	gCheckedA¼ayBy‹Sšk
 &
	gİ”©Ü
=(cÚ¡ 
CheckedA¼ayBy‹Sšk
 &);

218 #ià
U_HAVE_STD_STRING


225 
	g‹m¶©e
<
ty³Çme
 
	gSŒšgCÏss
>

226 şas 
	cSŒšgBy‹Sšk
 : 
public
 
By‹Sšk
 {

227 
public
:

233 
	$SŒšgBy‹Sšk
(
SŒšgCÏss
* 
de¡
è: 
	$de¡_
(
de¡
) { }

240 
vœtu®
 
	$Aµ’d
(cÚ¡ * 
d©a
, 
št32_t
 
n
è{ 
de¡_
->
	`­³nd
(d©a,‚); 
	}
}

241 
	g´iv©e
:

242 
SŒšgCÏss
* 
de¡_
;

243 
SŒšgBy‹Sšk
();

244 
SŒšgBy‹Sšk
(const StringByteSink &);

245 
	gSŒšgBy‹Sšk
 &
	gİ”©Ü
=(cÚ¡ 
SŒšgBy‹Sšk
 &);

250 
	gU_NAMESPACE_END


	@unicode/caniter.h

8 #iâdeà
CANITER_H


9 
	#CANITER_H


	)

11 
	~"unicode/uty³s.h
"

13 #ià!
UCONFIG_NO_NORMALIZATION


15 
	~"unicode/uobjeù.h
"

16 
	~"unicode/uni¡r.h
"

27 #iâdeà
CANITER_SKIP_ZEROES


28 
	#CANITER_SKIP_ZEROES
 
TRUE


	)

31 
U_NAMESPACE_BEGIN


33 
şass
 
	gHashbË
;

34 
şass
 
	gNÜm®iz”2
;

35 
şass
 
	gNÜm®iz”2Im¶
;

72 şas 
	cU_COMMON_API
 
	mCªÚiÿlI‹¿tÜ
 : 
public
 
UObjeù
 {

73 
public
:

80 
CªÚiÿlI‹¿tÜ
(cÚ¡ 
UnicodeSŒšg
 &
sourû
, 
UE¼ÜCode
 &
¡©us
);

86 
	mvœtu®
 ~
CªÚiÿlI‹¿tÜ
();

93 
UnicodeSŒšg
 
g‘Sourû
();

99 
»£t
();

108 
UnicodeSŒšg
 
Ãxt
();

117 
£tSourû
(cÚ¡ 
UnicodeSŒšg
 &
ÃwSourû
, 
UE¼ÜCode
 &
¡©us
);

128 
U_EXPORT2
 
³rmu‹
(
UnicodeSŒšg
 &
sourû
, 
UBoŞ
 
skZ”os
, 
HashbË
 *
»suÉ
, 
UE¼ÜCode
 &
¡©us
);

135 
UCÏssID
 
U_EXPORT2
 
g‘SticCÏssID
();

142 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

144 
´iv©e
:

147 
	`CªÚiÿlI‹¿tÜ
();

154 
	`CªÚiÿlI‹¿tÜ
(cÚ¡ 
CªÚiÿlI‹¿tÜ
& 
Ùh”
);

160 
CªÚiÿlI‹¿tÜ
& 
İ”©Ü
=(cÚ¡ CªÚiÿlI‹¿tÜ& 
Ùh”
);

163 
UnicodeSŒšg
 
sourû
;

164 
UBoŞ
 
dÚe
;

168 
UnicodeSŒšg
 **
p›ûs
;

169 
št32_t
 
p›ûs_Ëngth
;

170 
št32_t
 *
p›ûs_Ëngths
;

173 
št32_t
 *
cu¼’t
;

174 
št32_t
 
cu¼’t_Ëngth
;

177 
UnicodeSŒšg
 
bufãr
;

179 cÚ¡ 
NÜm®iz”2
 &
nfd
;

180 cÚ¡ 
NÜm®iz”2Im¶
 &
nfcIm¶
;

183 
UnicodeSŒšg
 *
	`g‘Equiv®’ts
(cÚ¡ UnicodeSŒšg &
£gm’t
, 
št32_t
 &
»suÉ_Ën
, 
UE¼ÜCode
 &
¡©us
);

186 
HashbË
 *
	`g‘Equiv®’ts2
(HashbË *
flšResuÉ
, cÚ¡ 
UCh¬
 *
£gm’t
, 
št32_t
 
£gL’
, 
UE¼ÜCode
 &
¡©us
);

195 
HashbË
 *
	`exŒaù
(HashbË *
flšResuÉ
, 
UCh¬32
 
comp
, cÚ¡ 
UCh¬
 *
£gm’t
, 
št32_t
 
£gL’
, iÁ32_ˆ
£gm’tPos
, 
UE¼ÜCode
 &
¡©us
);

198 
	`ş—nP›ûs
();

202 
U_NAMESPACE_END


	@unicode/chariter.h

10 #iâdeà
CHARITER_H


11 
	#CHARITER_H


	)

13 
	~"unicode/uty³s.h
"

14 
	~"unicode/uobjeù.h
"

15 
	~"unicode/uni¡r.h
"

21 
U_NAMESPACE_BEGIN


89 şas 
	cU_COMMON_API
 
	mFÜw¬dCh¬aù”I‹¿tÜ
 : 
public
 
UObjeù
 {

90 
public
:

96 ’um { 
DONE
 = 0xffff };

102 
	gvœtu®
 ~
FÜw¬dCh¬aù”I‹¿tÜ
();

112 
vœtu®
 
UBoŞ
 
	gİ”©Ü
==(cÚ¡ 
FÜw¬dCh¬aù”I‹¿tÜ
& 
th©
) const = 0;

124 
šlše
 
UBoŞ
 
	gİ”©Ü
!=(cÚ¡ 
FÜw¬dCh¬aù”I‹¿tÜ
& 
th©
) const;

131 
vœtu®
 
št32_t
 
	$hashCode
() const = 0;

140 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const = 0;

150 
vœtu®
 
UCh¬
 
	`ÃxtPo¡Inc
() = 0;

160 
vœtu®
 
UCh¬32
 
	`Ãxt32Po¡Inc
() = 0;

171 
vœtu®
 
UBoŞ
 
	`hasNext
() = 0;

173 
´Ùeùed
:

175 
	`FÜw¬dCh¬aù”I‹¿tÜ
();

178 
	`FÜw¬dCh¬aù”I‹¿tÜ
(cÚ¡ 
FÜw¬dCh¬aù”I‹¿tÜ
 &
Ùh”
);

184 
FÜw¬dCh¬aù”I‹¿tÜ
 &
İ”©Ü
=(cÚ¡ FÜw¬dCh¬aù”I‹¿tÜ&è{  *
this
; 
	}
}

356 şas 
	cU_COMMON_API
 
	mCh¬aù”I‹¿tÜ
 : 
public
 
FÜw¬dCh¬aù”I‹¿tÜ
 {

357 
public
:

362 
	eEOrigš
 { 
kS¹
, 
	mkCu¼’t
, 
	mkEnd
 };

372 
vœtu®
 
Ch¬aù”I‹¿tÜ
* 
	$şÚe
() const = 0;

381 
vœtu®
 
UCh¬
 
	`fœ¡
() = 0;

391 
vœtu®
 
UCh¬
 
	`fœ¡Po¡Inc
();

402 
vœtu®
 
UCh¬32
 
	`fœ¡32
() = 0;

412 
vœtu®
 
UCh¬32
 
	`fœ¡32Po¡Inc
();

421 
šlše
 
št32_t
 
	`£tToS¹
();

430 
vœtu®
 
UCh¬
 
	`Ï¡
() = 0;

439 
vœtu®
 
UCh¬32
 
	`Ï¡32
() = 0;

448 
šlše
 
št32_t
 
	`£tToEnd
();

458 
vœtu®
 
UCh¬
 
	`£tIndex
(
št32_t
 
pos™iÚ
) = 0;

471 
vœtu®
 
UCh¬32
 
	`£tIndex32
(
št32_t
 
pos™iÚ
) = 0;

478 
vœtu®
 
UCh¬
 
	$cu¼’t
() const = 0;

485 
vœtu®
 
UCh¬32
 
	$cu¼’t32
() const = 0;

494 
vœtu®
 
UCh¬
 
	`Ãxt
() = 0;

506 
vœtu®
 
UCh¬32
 
	`Ãxt32
() = 0;

515 
vœtu®
 
UCh¬
 
	`´evious
() = 0;

524 
vœtu®
 
UCh¬32
 
	`´evious32
() = 0;

535 
vœtu®
 
UBoŞ
 
	`hasP»vious
() = 0;

547 
šlše
 
št32_t
 
	$¡¬tIndex
() const;

558 
šlše
 
št32_t
 
	$’dIndex
() const;

568 
šlše
 
št32_t
 
	$g‘Index
() const;

576 
šlše
 
št32_t
 
	$g‘L’gth
() const;

589 
vœtu®
 
št32_t
 
	`move
(št32_ˆ
d–
, 
EOrigš
 
Üigš
) = 0;

602 
vœtu®
 
št32_t
 
	`move32
(št32_ˆ
d–
, 
EOrigš
 
Üigš
) = 0;

610 
vœtu®
 
	`g‘Text
(
UnicodeSŒšg
& 
»suÉ
) = 0;

612 
´Ùeùed
:

617 
	`Ch¬aù”I‹¿tÜ
();

623 
	`Ch¬aù”I‹¿tÜ
(
št32_t
 
Ëngth
);

629 
	`Ch¬aù”I‹¿tÜ
(
št32_t
 
Ëngth
, iÁ32_ˆ
pos™iÚ
);

635 
	`Ch¬aù”I‹¿tÜ
(
št32_t
 
Ëngth
, iÁ32_ˆ
‹xtBegš
, iÁ32_ˆ
‹xtEnd
, iÁ32_ˆ
pos™iÚ
);

643 
	`Ch¬aù”I‹¿tÜ
(cÚ¡ 
Ch¬aù”I‹¿tÜ
 &
th©
);

652 
Ch¬aù”I‹¿tÜ
 &
İ”©Ü
=(cÚ¡ Ch¬aù”I‹¿tÜ &
th©
);

659 
št32_t
 
‹xtL’gth
;

665 
št32_t
 
pos
;

671 
št32_t
 
begš
;

677 
št32_t
 
’d
;

678 
	}
};

680 
šlše
 
UBoŞ


681 
	gFÜw¬dCh¬aù”I‹¿tÜ
::
İ”©Ü
!=(cÚ¡ 
FÜw¬dCh¬aù”I‹¿tÜ
& 
th©
) const {

682  !
İ”©Ü
==(
th©
);

685 
šlše
 
št32_t


686 
	gCh¬aù”I‹¿tÜ
::
	$£tToS¹
() {

687  
	`move
(0, 
kS¹
);

688 
	}
}

690 
šlše
 
št32_t


691 
	gCh¬aù”I‹¿tÜ
::
	$£tToEnd
() {

692  
	`move
(0, 
kEnd
);

693 
	}
}

695 
šlše
 
št32_t


696 
	gCh¬aù”I‹¿tÜ
::
	$¡¬tIndex
() const {

697  
begš
;

698 
	}
}

700 
šlše
 
št32_t


701 
	gCh¬aù”I‹¿tÜ
::
	$’dIndex
() const {

702  
’d
;

703 
	}
}

705 
šlše
 
št32_t


706 
	gCh¬aù”I‹¿tÜ
::
	$g‘Index
() const {

707  
pos
;

708 
	}
}

710 
šlše
 
št32_t


711 
	gCh¬aù”I‹¿tÜ
::
	$g‘L’gth
() const {

712  
‹xtL’gth
;

713 
	}
}

715 
	gU_NAMESPACE_END


	@unicode/dbbi.h

11 #iâdeà
DBBI_H


12 
	#DBBI_H


	)

14 
	~"unicode/rbbi.h
"

16 #ià!
UCONFIG_NO_BREAK_ITERATION


23 
	gU_NAMESPACE_BEGIN


31 #iâdeà
U_HIDE_DEPRECATED_API


33 
RuËBa£dB»akI‹¿tÜ
 
	tDiùiÚ¬yBa£dB»akI‹¿tÜ
;

37 
	gU_NAMESPACE_END


	@unicode/docmain.h

	@unicode/dtintrv.h

12 #iâdeà
__DTINTRV_H__


13 
	#__DTINTRV_H__


	)

15 
	~"unicode/uty³s.h
"

16 
	~"unicode/uobjeù.h
"

24 
U_NAMESPACE_BEGIN


32 şas 
	cU_COMMON_API
 
	mD©eIÁ”v®
 : 
public
 
UObjeù
 {

33 
public
:

41 
D©eIÁ”v®
(
UD©e
 
äomD©e
, UD©
toD©e
);

47 
	mvœtu®
 ~
D©eIÁ”v®
();

54 
UD©e
 
	$g‘FromD©e
() const;

61 
UD©e
 
	$g‘ToD©e
() const;

75 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

88 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

95 
	`D©eIÁ”v®
(cÚ¡ 
D©eIÁ”v®
& 
Ùh”
);

101 
D©eIÁ”v®
& 
İ”©Ü
=(const DateInterval&);

108 
vœtu®
 
UBoŞ
 
İ”©Ü
==(cÚ¡ 
D©eIÁ”v®
& 
Ùh”
) const;

115 
UBoŞ
 
İ”©Ü
!=(cÚ¡ 
D©eIÁ”v®
& 
Ùh”
) const;

124 
vœtu®
 
D©eIÁ”v®
* 
	$şÚe
() const;

126 
´iv©e
:

130 
	`D©eIÁ”v®
();

132 
UD©e
 
äomD©e
;

133 
UD©e
 
toD©e
;

138 
šlše
 
UD©e


139 
D©eIÁ”v®
::
	$g‘FromD©e
() const {

140  
äomD©e
;

141 
	}
}

144 
šlše
 
UD©e


145 
	gD©eIÁ”v®
::
	$g‘ToD©e
() const {

146  
toD©e
;

147 
	}
}

150 
šlše
 
UBoŞ


151 
	gD©eIÁ”v®
::
İ”©Ü
!=(cÚ¡ 
D©eIÁ”v®
& 
Ùh”
) const {

152  ( !
İ”©Ü
==(
Ùh”
) );

156 
	gU_NAMESPACE_END


	@unicode/errorcode.h

17 #iâdeà
__ERRORCODE_H__


18 
	#__ERRORCODE_H__


	)

26 
	~"unicode/uty³s.h
"

27 
	~"unicode/uobjeù.h
"

29 
U_NAMESPACE_BEGIN


79 şas 
	cU_COMMON_API
 
	mE¼ÜCode
: 
public
 
UMemÜy
 {

80 
public
:

85 
	$E¼ÜCode
(è: 
	$”rÜCode
(
U_ZERO_ERROR
) {}

87 
vœtu®
 ~
	$E¼ÜCode
(è{
	}
}

89 
İ”©Ü
 
UE¼ÜCode
 & (è{  
”rÜCode
; }

91 
İ”©Ü
 
	gUE¼ÜCode
 * (è{  &
	g”rÜCode
; }

93 
UBoŞ
 
	$isSucûss
(ècÚ¡ {  
	`U_SUCCESS
(
”rÜCode
); 
	}
}

95 
UBoŞ
 
	$isFau»
(ècÚ¡ {  
	`U_FAILURE
(
”rÜCode
); 
	}
}

97 
UE¼ÜCode
 
	$g‘
(ècÚ¡ {  
”rÜCode
; 
	}
}

99 
	$£t
(
UE¼ÜCode
 
v®ue
è{ 
”rÜCode
=v®ue; 
	}
}

101 
UE¼ÜCode
 
»£t
();

111 
	$as£¹Sucûss
() const;

118 cÚ¡ * 
	$”rÜName
() const;

120 
´Ùeùed
:

125 
UE¼ÜCode
 
”rÜCode
;

132 
vœtu®
 
	$hªdËFau»
(ècÚ¡ {
	}
}

135 
	gU_NAMESPACE_END


	@unicode/icudataver.h

10 #iâdeà
__ICU_DATA_VER_H__


11 
	#__ICU_DATA_VER_H__


	)

13 
	~"unicode/uty³s.h
"

18 
	#U_ICU_VERSION_BUNDLE
 "icuv”"

	)

23 
	#U_ICU_STD_BUNDLE
 "icu¡d"

	)

28 
	#U_ICU_DATA_KEY
 "D©aV”siÚ"

	)

45 
U_INTERNAL
 
UBoŞ
 
U_EXPORT2
 
u_isD©aOld”
(
UV”siÚInfo
 
d©aV”siÚFlš
, UBoŞ *
isModif›dFlš
, 
UE¼ÜCode
 *
¡©us
);

55 
U_INTERNAL
 
U_EXPORT2
 
u_g‘D©aV”siÚ
(
UV”siÚInfo
 
d©aV”siÚFlš
, 
UE¼ÜCode
 *
¡©us
);

	@unicode/icuplug.h

105 #iâdeà
ICUPLUG_H


106 
	#ICUPLUG_H


	)

108 
	~"unicode/uty³s.h
"

120 
	gUPlugD©a
;

121 
UPlugD©a
 
	tUPlugD©a
;

130 
	#UPLUG_TOKEN
 0x54762486

	)

136 
	#UPLUG_NAME_MAX
 100

	)

145 
ušt32_t
 
	tUPlugTok’R‘uº
;

152 
	mUPLUG_REASON_QUERY
 = 0,

153 
	mUPLUG_REASON_LOAD
 = 1,

154 
	mUPLUG_REASON_UNLOAD
 = 2,

155 
UPLUG_REASON_COUNT


156 } 
	tUPlugR—sÚ
;

167 
	mUPLUG_LEVEL_INVALID
 = 0,

168 
	mUPLUG_LEVEL_UNKNOWN
 = 1,

169 
	mUPLUG_LEVEL_LOW
 = 2,

170 
	mUPLUG_LEVEL_HIGH
 = 3,

171 
UPLUG_LEVEL_COUNT


172 } 
	tUPlugLev–
;

181 
	$UPlugTok’R‘uº
 (
	tU_EXPORT2
 
	tUPlugEÁrypošt
) (

182 
	tUPlugD©a
 *
	t¶ug
,

183 
	tUPlugR—sÚ
 
	t»asÚ
,

184 
	tUE¼ÜCode
 *
	t¡©us
);

196 
U_CAPI
 
U_EXPORT2


197 
	`u¶ug_£tPlugNoUÆßd
(
UPlugD©a
 *
¶ug
, 
UBoŞ
 
dÚtUÆßd
);

205 
U_CAPI
 
U_EXPORT2


206 
	`u¶ug_£tPlugLev–
(
UPlugD©a
 *
¶ug
, 
UPlugLev–
 
Ëv–
);

214 
U_CAPI
 
UPlugLev–
 
U_EXPORT2


215 
	`u¶ug_g‘PlugLev–
(
UPlugD©a
 *
¶ug
);

224 
U_CAPI
 
UPlugLev–
 
U_EXPORT2


225 
	`u¶ug_g‘Cu¼’tLev–
();

233 
U_CAPI
 
UE¼ÜCode
 
U_EXPORT2


234 
	`u¶ug_g‘PlugLßdStus
(
UPlugD©a
 *
¶ug
);

242 
U_CAPI
 
U_EXPORT2


243 
	`u¶ug_£tPlugName
(
UPlugD©a
 *
¶ug
, cÚ¡ *
Çme
);

251 
U_CAPI
 cÚ¡ * 
U_EXPORT2


252 
	`u¶ug_g‘PlugName
(
UPlugD©a
 *
¶ug
);

260 
U_CAPI
 cÚ¡ * 
U_EXPORT2


261 
	`u¶ug_g‘SymbŞName
(
UPlugD©a
 *
¶ug
);

270 
U_CAPI
 cÚ¡ * 
U_EXPORT2


271 
	`u¶ug_g‘Lib¿ryName
(
UPlugD©a
 *
¶ug
, 
UE¼ÜCode
 *
¡©us
);

280 
U_CAPI
 * 
U_EXPORT2


281 
	`u¶ug_g‘Lib¿ry
(
UPlugD©a
 *
¶ug
);

289 
U_CAPI
 * 
U_EXPORT2


290 
	`u¶ug_g‘CÚ‹xt
(
UPlugD©a
 *
¶ug
);

298 
U_CAPI
 
U_EXPORT2


299 
	`u¶ug_£tCÚ‹xt
(
UPlugD©a
 *
¶ug
, *
cÚ‹xt
);

309 
U_CAPI
 cÚ¡ * 
U_EXPORT2


310 
	`u¶ug_g‘CÚfigu¿tiÚ
(
UPlugD©a
 *
¶ug
);

327 
U_CAPI
 
UPlugD©a
* 
U_EXPORT2


328 
	`u¶ug_ÃxtPlug
(
UPlugD©a
 *
´iÜ
);

342 
U_CAPI
 
UPlugD©a
* 
U_EXPORT2


343 
	`u¶ug_lßdPlugFromEÁrypošt
(
UPlugEÁrypošt
 *
’Œypošt
, cÚ¡ *
cÚfig
, 
UE¼ÜCode
 *
¡©us
);

356 
U_CAPI
 
UPlugD©a
* 
U_EXPORT2


357 
	`u¶ug_lßdPlugFromLib¿ry
(cÚ¡ *
libName
, cÚ¡ *
sym
, cÚ¡ *
cÚfig
, 
UE¼ÜCode
 *
¡©us
);

366 
U_CAPI
 
U_EXPORT2


367 
	`u¶ug_»movePlug
(
UPlugD©a
 *
¶ug
, 
UE¼ÜCode
 *
¡©us
);

	@unicode/idna.h

15 #iâdeà
__IDNA_H__


16 
	#__IDNA_H__


	)

23 
	~"unicode/uty³s.h
"

25 #ià!
UCONFIG_NO_IDNA


27 
	~"unicode/by‹¡»am.h
"

28 
	~"unicode/¡ršgp›û.h
"

29 
	~"unicode/uidÇ.h
"

30 
	~"unicode/uni¡r.h
"

32 
U_NAMESPACE_BEGIN


34 
şass
 
U_COMMON_API
 
	gIDNAInfo
;

48 şas 
	cU_COMMON_API
 
	mIDNA
 : 
public
 
UObjeù
 {

49 
public
:

83 
IDNA
 *

84 
ü—‹UTS46In¡ªû
(
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 &
”rÜCode
);

106 
vœtu®
 
	mUnicodeSŒšg
 &

107 
	$Ïb–ToASCII
(cÚ¡ 
UnicodeSŒšg
 &
Ïb–
, UnicodeSŒšg &
de¡
,

108 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const = 0;

128 
vœtu®
 
UnicodeSŒšg
 &

129 
	$Ïb–ToUnicode
(cÚ¡ 
UnicodeSŒšg
 &
Ïb–
, UnicodeSŒšg &
de¡
,

130 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const = 0;

152 
vœtu®
 
UnicodeSŒšg
 &

153 
	$ÇmeToASCII
(cÚ¡ 
UnicodeSŒšg
 &
Çme
, UnicodeSŒšg &
de¡
,

154 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const = 0;

174 
vœtu®
 
UnicodeSŒšg
 &

175 
	$ÇmeToUnicode
(cÚ¡ 
UnicodeSŒšg
 &
Çme
, UnicodeSŒšg &
de¡
,

176 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const = 0;

194 
vœtu®
 

195 
	$Ïb–ToASCII_UTF8
(cÚ¡ 
SŒšgP›û
 &
Ïb–
, 
By‹Sšk
 &
de¡
,

196 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

212 
vœtu®
 

213 
	$Ïb–ToUnicodeUTF8
(cÚ¡ 
SŒšgP›û
 &
Ïb–
, 
By‹Sšk
 &
de¡
,

214 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

230 
vœtu®
 

231 
	$ÇmeToASCII_UTF8
(cÚ¡ 
SŒšgP›û
 &
Çme
, 
By‹Sšk
 &
de¡
,

232 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

248 
vœtu®
 

249 
	$ÇmeToUnicodeUTF8
(cÚ¡ 
SŒšgP›û
 &
Çme
, 
By‹Sšk
 &
de¡
,

250 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

252 
´iv©e
:

254 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

257 
şass
 
UTS46
;

264 şas 
	cU_COMMON_API
 
IDNAInfo
 : 
public
 
UMemÜy
 {

265 
public
:

270 
	$IDNAInfo
(è: 
	`”rÜs
(0), 
	`Ïb–E¼Üs
(0), 
	`isT¿nsDiff
(
FALSE
), 
	`isBiDi
(FALSE), 
	$isOkBiDi
(
TRUE
) {}

276 
UBoŞ
 
	$hasE¼Üs
(ècÚ¡ {  
”rÜs
!=0; 
	}
}

283 
ušt32_t
 
	$g‘E¼Üs
(ècÚ¡ {  
”rÜs
; 
	}
}

297 
UBoŞ
 
	$isT¿ns™iÚ®Difã»Á
(ècÚ¡ {  
isT¿nsDiff
; 
	}
}

299 
	g´iv©e
:

300 
ä›nd
 
şass
 
UTS46
;

302 
IDNAInfo
(cÚ¡ IDNAInfØ&
Ùh”
);

303 
	gIDNAInfo
 &
	gİ”©Ü
=(cÚ¡ 
IDNAInfo
 &
Ùh”
);

305 
	$»£t
() {

306 
”rÜs
=
Ïb–E¼Üs
=0;

307 
isT¿nsDiff
=
FALSE
;

308 
isBiDi
=
FALSE
;

309 
isOkBiDi
=
TRUE
;

310 
	}
}

312 
ušt32_t
 
	g”rÜs
, 
	gÏb–E¼Üs
;

313 
UBoŞ
 
	gisT¿nsDiff
;

314 
UBoŞ
 
	gisBiDi
;

315 
UBoŞ
 
	gisOkBiDi
;

318 
	gU_NAMESPACE_END


	@unicode/localpointer.h

17 #iâdeà
__LOCALPOINTER_H__


18 
	#__LOCALPOINTER_H__


	)

39 
	~"unicode/uty³s.h
"

41 #ià
U_SHOW_CPLUSPLUS_API


43 
U_NAMESPACE_BEGIN


63 
	g‹m¶©e
<
ty³Çme
 
	gT
>

64 şas 
	cLoÿlPoš‹rBa£
 {

65 
	mpublic
:

71 
ex¶ic™
 
	$LoÿlPoš‹rBa£
(
T
 *
p
=
NULL
è: 
	$±r
(
p
) {}

77 ~
	$LoÿlPoš‹rBa£
(è{ 
	}
}

83 
UBoŞ
 
	$isNuÎ
(ècÚ¡ {  
±r
==
NULL
; 
	}
}

89 
UBoŞ
 
	$isV®id
(ècÚ¡ {  
±r
!=
NULL
; 
	}
}

97 
boŞ
 
	gİ”©Ü
==(cÚ¡ 
T
 *
Ùh”
ècÚ¡ {  
±r
==other; }

105 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
T
 *
Ùh”
ècÚ¡ {  
±r
!=other; }

111 
T
 *
	$g‘AlŸs
(ècÚ¡ {  
±r
; 
	}
}

117 
	gT
 &
	gİ”©Ü
*(ècÚ¡ {  *
	g±r
; }

123 
T
 *
	gİ”©Ü
->(ècÚ¡ {  
	g±r
; }

130 
T
 *
	$Üphª
() {

131 
T
 *
p
=
±r
;

132 
±r
=
NULL
;

133  
p
;

134 
	}
}

142 
	$adİtIn¡—d
(
T
 *
p
) {

144 
±r
=
p
;

145 
	}
}

146 
	g´Ùeùed
:

147 
T
 *
±r
;

148 
	g´iv©e
:

150 
boŞ
 
İ”©Ü
==(cÚ¡ 
LoÿlPoš‹rBa£
 &
Ùh”
);

151 
boŞ
 
	gİ”©Ü
!=(cÚ¡ 
LoÿlPoš‹rBa£
 &
Ùh”
);

153 
LoÿlPoš‹rBa£
(cÚ¡ LoÿlPoš‹rBa£ &
Ùh”
);

154 
	gİ”©Ü
=(cÚ¡ 
LoÿlPoš‹rBa£
 &
Ùh”
);

156 * 
U_EXPORT2
 
İ”©Ü
 
Ãw
(
size_t
 
size
);

157 * 
U_EXPORT2
 
İ”©Ü
 
	gÃw
[](
size_t
 
	gsize
);

158 #ià
U_HAVE_PLACEMENT_NEW


159 * 
U_EXPORT2
 
İ”©Ü
 
Ãw
(
size_t
, *
±r
);

181 
	g‹m¶©e
<
ty³Çme
 
	gT
>

182 
şass
 
	gLoÿlPoš‹r
 : 
public
 
LoÿlPoš‹rBa£
<
T
> {

183 
public
:

189 
ex¶ic™
 
LoÿlPoš‹r
(
T
 *
p
=
NULL
è: 
LoÿlPoš‹rBa£
<T>(p) {}

194 ~
LoÿlPoš‹r
() {

195 
d–‘e
 
LoÿlPoš‹rBa£
<
T
>::
±r
;

203 
adİtIn¡—d
(
T
 *
p
) {

204 
d–‘e
 
	gLoÿlPoš‹rBa£
<
	gT
>::
±r
;

205 
	gLoÿlPoš‹rBa£
<
	gT
>::
±r
=
p
;

227 
	g‹m¶©e
<
ty³Çme
 
	gT
>

228 
şass
 
	gLoÿlA¼ay
 : 
public
 
LoÿlPoš‹rBa£
<
T
> {

229 
public
:

235 
ex¶ic™
 
LoÿlA¼ay
(
T
 *
p
=
NULL
è: 
LoÿlPoš‹rBa£
<T>(p) {}

240 ~
LoÿlA¼ay
() {

241 
d–‘e
[] 
LoÿlPoš‹rBa£
<
T
>::
±r
;

249 
adİtIn¡—d
(
T
 *
p
) {

250 
	gd–‘e
[] 
	gLoÿlPoš‹rBa£
<
	gT
>::
±r
;

251 
	gLoÿlPoš‹rBa£
<
	gT
>::
±r
=
p
;

260 
	gT
 &
	gİ”©Ü
[](
±rdiff_t
 
	gi
ècÚ¡ {  
	gLoÿlPoš‹rBa£
<T>::
±r
[
i
]; }

286 
	#U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlPoš‹rCÏssName
, 
Ty³
, 
şo£FunùiÚ
) \

287 
şass
 
LoÿlPoš‹rCÏssName
 : 
public
 
LoÿlPoš‹rBa£
<
Ty³
> { \

288 
public
: \

289 
ex¶ic™
 
	`LoÿlPoš‹rCÏssName
(
Ty³
 *
p
=
NULL
è: 
LoÿlPoš‹rBa£
<Type>(p) {} \

290 ~
	`LoÿlPoš‹rCÏssName
(è{ 
	`şo£FunùiÚ
(
±r
); } \

291 
	`adİtIn¡—d
(
Ty³
 *
p
) { \

292 
	`şo£FunùiÚ
(
±r
); \

293 
±r
=
p
; \

295 }

	)

297 
	gU_NAMESPACE_END


	@unicode/locid.h

29 #iâdeà
LOCID_H


30 
	#LOCID_H


	)

32 
	~"unicode/uty³s.h
"

33 
	~"unicode/uobjeù.h
"

34 
	~"unicode/uni¡r.h
"

35 
	~"unicode/put.h
"

36 
	~"unicode/uloc.h
"

37 
	~"unicode/¡»num.h
"

180 
U_NAMESPACE_BEGIN


181 şas 
	cU_COMMON_API
 
	mLoÿË
 : 
public
 
UObjeù
 {

182 
public
:

184 cÚ¡ 
LoÿË
 &
U_EXPORT2
 
g‘RoÙ
();

186 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘English
();

188 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘F»nch
();

190 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘G”mª
();

192 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘IlŸn
();

194 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘J­ªe£
();

196 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘KÜ—n
();

198 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘Chše£
();

200 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘Sim¶if›dChše£
();

202 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘T¿d™iÚ®Chše£
();

205 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘F¿nû
();

207 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘G”mªy
();

209 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘Ily
();

211 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘J­ª
();

213 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘KÜ—
();

215 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘Chša
();

217 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘PRC
();

219 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘Taiwª
();

221 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘UK
();

223 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘US
();

225 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘Cªada
();

227 cÚ¡ 
	mLoÿË
 &
U_EXPORT2
 
g‘CªadaF»nch
();

237 
LoÿË
();

263 
LoÿË
ĞcÚ¡ * 
Ïnguage
,

264 cÚ¡ * 
couÁry
 = 0,

265 cÚ¡ * 
v¬ŸÁ
 = 0,

266 cÚ¡ * 
keywÜdsAndV®ues
 = 0);

274 
LoÿË
(cÚ¡ LoÿË& 
Ùh”
);

281 
	mvœtu®
 ~
LoÿË
() ;

290 
	mLoÿË
& 
	mİ”©Ü
=(cÚ¡ 
LoÿË
& 
Ùh”
);

299 
UBoŞ
 
	mİ”©Ü
==(cÚ¡ 
LoÿË
& 
Ùh”
) const;

309 
UBoŞ
 
	mİ”©Ü
!=(cÚ¡ 
LoÿË
& 
Ùh”
) const;

322 
LoÿË
 *
	$şÚe
() const;

339 cÚ¡ 
LoÿË
& 
U_EXPORT2
 
	`g‘DeçuÉ
();

353 
U_EXPORT2
 
	`£tDeçuÉ
(cÚ¡ 
LoÿË
& 
ÃwLoÿË
,

354 
UE¼ÜCode
& 
sucûss
);

365 
LoÿË
 
U_EXPORT2
 
	`ü—‹FromName
(cÚ¡ *
Çme
);

375 
LoÿË
 
U_EXPORT2
 
	`ü—‹CªÚiÿl
(cÚ¡ * 
Çme
);

382 
šlše
 cÚ¡ * 
	$g‘Lªguage
( ) const;

391 
šlše
 cÚ¡ * 
	$g‘Süt
( ) const;

398 
šlše
 cÚ¡ * 
	$g‘CouÁry
( ) const;

405 
šlše
 cÚ¡ * 
	$g‘V¬ŸÁ
( ) const;

415 
šlše
 cÚ¡ * 
	$g‘Name
() const;

424 cÚ¡ * 
	$g‘Ba£Name
() const;

435 
SŒšgEnum”©iÚ
 * 
	$ü—‹KeywÜds
(
UE¼ÜCode
 &
¡©us
) const;

448 
št32_t
 
	$g‘KeywÜdV®ue
(cÚ¡ * 
keywÜdName
, *
bufãr
, 
št32_t
 
bufãrC­ac™y
, 
UE¼ÜCode
 &
¡©us
) const;

461 
	`£tKeywÜdV®ue
(cÚ¡ * 
keywÜdName
, cÚ¡ * 
keywÜdV®ue
, 
UE¼ÜCode
 &
¡©us
);

469 cÚ¡ * 
	$g‘ISO3Lªguage
() const;

476 cÚ¡ * 
	$g‘ISO3CouÁry
() const;

485 
ušt32_t
 
	$g‘LCID
() const;

496 
UnicodeSŒšg
& 
	$g‘Di¥ÏyLªguage
(
UnicodeSŒšg
& 
di¥Lªg
) const;

511 
UnicodeSŒšg
& 
	$g‘Di¥ÏyLªguage
ĞcÚ¡ 
LoÿË
& 
di¥ÏyLoÿË
,

512 
UnicodeSŒšg
& 
di¥Lªg
) const;

523 
UnicodeSŒšg
& 
	$g‘Di¥ÏySüt
Ğ
UnicodeSŒšg
& 
di¥Süt
) const;

539 
UnicodeSŒšg
& 
	$g‘Di¥ÏySüt
ĞcÚ¡ 
LoÿË
& 
di¥ÏyLoÿË
,

540 
UnicodeSŒšg
& 
di¥Süt
) const;

551 
UnicodeSŒšg
& 
	$g‘Di¥ÏyCouÁry
Ğ
UnicodeSŒšg
& 
di¥CouÁry
) const;

567 
UnicodeSŒšg
& 
	$g‘Di¥ÏyCouÁry
ĞcÚ¡ 
LoÿË
& 
di¥ÏyLoÿË
,

568 
UnicodeSŒšg
& 
di¥CouÁry
) const;

577 
UnicodeSŒšg
& 
	$g‘Di¥ÏyV¬ŸÁ
Ğ
UnicodeSŒšg
& 
di¥V¬
) const;

587 
UnicodeSŒšg
& 
	$g‘Di¥ÏyV¬ŸÁ
ĞcÚ¡ 
LoÿË
& 
di¥ÏyLoÿË
,

588 
UnicodeSŒšg
& 
di¥V¬
) const;

601 
UnicodeSŒšg
& 
	$g‘Di¥ÏyName
Ğ
UnicodeSŒšg
& 
Çme
) const;

615 
UnicodeSŒšg
& 
	$g‘Di¥ÏyName
ĞcÚ¡ 
LoÿË
& 
di¥ÏyLoÿË
,

616 
UnicodeSŒšg
& 
Çme
) const;

622 
št32_t
 
	$hashCode
() const;

632 
	`£tToBogus
();

639 
UBoŞ
 
	$isBogus
() const;

649 cÚ¡ 
LoÿË
* 
U_EXPORT2
 
	`g‘AvaabËLoÿËs
(
št32_t
& 
couÁ
);

659 cÚ¡ * cÚ¡* 
U_EXPORT2
 
	`g‘ISOCouÁr›s
();

669 cÚ¡ * cÚ¡* 
U_EXPORT2
 
	`g‘ISOLªguages
();

676 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

683 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

685 
´Ùeùed
:

690 
	`£tFromPOSIXID
(cÚ¡ *
posixID
);

692 
´iv©e
:

699 
LoÿË
& 
	`š™
(cÚ¡ * 
cLoÿËID
, 
UBoŞ
 
ÿnÚiÿlize
);

706 
	eELoÿËTy³
 {

707 
eBOGUS


709 
	`LoÿË
(
ELoÿËTy³
);

714 
LoÿË
 *
	`g‘LoÿËCache
();

716 
Ïnguage
[
ULOC_LANG_CAPACITY
];

717 
süt
[
ULOC_SCRIPT_CAPACITY
];

718 
couÁry
[
ULOC_COUNTRY_CAPACITY
];

719 
št32_t
 
v¬ŸÁBegš
;

720 * 
fuÎName
;

721 
fuÎNameBufãr
[
ULOC_FULLNAME_CAPACITY
];

723 * 
ba£Name
;

724 
ba£NameBufãr
[
ULOC_FULLNAME_CAPACITY
];

726 
UBoŞ
 
fIsBogus
;

728 cÚ¡ 
LoÿË
 &
	`g‘LoÿË
(
locid
);

734 
ä›nd
 
	`loÿË_£t_deçuÉ_š‹º®
(const *);

735 
	}
};

737 
šlše
 
UBoŞ


738 
	gLoÿË
::
İ”©Ü
!=(cÚ¡ 
LoÿË
& 
Ùh”
) const

740  !
İ”©Ü
==(
Ùh”
);

743 
šlše
 const *

744 
	gLoÿË
::
	$g‘CouÁry
() const

746  
couÁry
;

747 
	}
}

749 
šlše
 const *

750 
	gLoÿË
::
	$g‘Lªguage
() const

752  
Ïnguage
;

753 
	}
}

755 
šlše
 const *

756 
	gLoÿË
::
	$g‘Süt
() const

758  
süt
;

759 
	}
}

761 
šlše
 const *

762 
	gLoÿË
::
	$g‘V¬ŸÁ
() const

764 
	`g‘Ba£Name
();

765  &
ba£Name
[
v¬ŸÁBegš
];

766 
	}
}

768 
šlše
 const *

769 
	gLoÿË
::
	$g‘Name
() const

771  
fuÎName
;

772 
	}
}

774 
šlše
 
UBoŞ


775 
	gLoÿË
::
	$isBogus
() const {

776  
fIsBogus
;

777 
	}
}

779 
	gU_NAMESPACE_END


	@unicode/normalizer2.h

17 #iâdeà
__NORMALIZER2_H__


18 
	#__NORMALIZER2_H__


	)

25 
	~"unicode/uty³s.h
"

27 #ià!
UCONFIG_NO_NORMALIZATION


29 
	~"unicode/uni£t.h
"

30 
	~"unicode/uni¡r.h
"

31 
	~"unicode/unÜm2.h
"

33 
U_NAMESPACE_BEGIN


78 şas 
	cU_COMMON_API
 
	mNÜm®iz”2
 : 
public
 
UObjeù
 {

79 
public
:

101 cÚ¡ 
NÜm®iz”2
 *

102 
g‘In¡ªû
(cÚ¡ *
·ckageName
,

103 cÚ¡ *
Çme
,

104 
UNÜm®iz©iÚ2Mode
 
mode
,

105 
UE¼ÜCode
 &
”rÜCode
);

117 
UnicodeSŒšg


118 
	$nÜm®ize
(cÚ¡ 
UnicodeSŒšg
 &
¤c
, 
UE¼ÜCode
 &
”rÜCode
) const {

119 
UnicodeSŒšg
 
»suÉ
;

120 
	`nÜm®ize
(
¤c
, 
»suÉ
, 
”rÜCode
);

121  
»suÉ
;

136 
vœtu®
 
UnicodeSŒšg
 &

137 
	$nÜm®ize
(cÚ¡ 
UnicodeSŒšg
 &
¤c
,

138 
UnicodeSŒšg
 &
de¡
,

139 
UE¼ÜCode
 &
”rÜCode
) const = 0;

154 
vœtu®
 
UnicodeSŒšg
 &

155 
	$nÜm®izeSecÚdAndAµ’d
(
UnicodeSŒšg
 &
fœ¡
,

156 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

157 
UE¼ÜCode
 &
”rÜCode
) const = 0;

172 
vœtu®
 
UnicodeSŒšg
 &

173 
	$­³nd
(
UnicodeSŒšg
 &
fœ¡
,

174 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

175 
UE¼ÜCode
 &
”rÜCode
) const = 0;

187 
vœtu®
 
UBoŞ


188 
	$g‘Decompos™iÚ
(
UCh¬32
 
c
, 
UnicodeSŒšg
 &
decompos™iÚ
) const = 0;

204 
vœtu®
 
UBoŞ


205 
	$isNÜm®ized
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const = 0;

222 
vœtu®
 
UNÜm®iz©iÚCheckResuÉ


223 
	$quickCheck
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const = 0;

247 
vœtu®
 
št32_t


248 
	$¥ªQuickCheckYes
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const = 0;

263 
vœtu®
 
UBoŞ
 
	$hasBound¬yBefÜe
(
UCh¬32
 
c
) const = 0;

279 
vœtu®
 
UBoŞ
 
	$hasBound¬yAá”
(
UCh¬32
 
c
) const = 0;

294 
vœtu®
 
UBoŞ
 
	$isIÃ¹
(
UCh¬32
 
c
) const = 0;

296 
´iv©e
:

298 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

299 
	}
};

312 şas 
	cU_COMMON_API
 
	mF‹»dNÜm®iz”2
 : 
public
 
NÜm®iz”2
 {

313 
public
:

324 
	$F‹»dNÜm®iz”2
(cÚ¡ 
NÜm®iz”2
 &
n2
, cÚ¡ 
UnicodeS‘
 &
f‹rS‘
) :

325 
	`nÜm2
(
n2
), 
	$£t
(
f‹rS‘
) {}

340 
vœtu®
 
UnicodeSŒšg
 &

341 
	$nÜm®ize
(cÚ¡ 
UnicodeSŒšg
 &
¤c
,

342 
UnicodeSŒšg
 &
de¡
,

343 
UE¼ÜCode
 &
”rÜCode
) const;

358 
vœtu®
 
UnicodeSŒšg
 &

359 
	$nÜm®izeSecÚdAndAµ’d
(
UnicodeSŒšg
 &
fœ¡
,

360 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

361 
UE¼ÜCode
 &
”rÜCode
) const;

376 
vœtu®
 
UnicodeSŒšg
 &

377 
	$­³nd
(
UnicodeSŒšg
 &
fœ¡
,

378 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

379 
UE¼ÜCode
 &
”rÜCode
) const;

391 
vœtu®
 
UBoŞ


392 
	$g‘Decompos™iÚ
(
UCh¬32
 
c
, 
UnicodeSŒšg
 &
decompos™iÚ
) const;

405 
vœtu®
 
UBoŞ


406 
	$isNÜm®ized
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const;

418 
vœtu®
 
UNÜm®iz©iÚCheckResuÉ


419 
	$quickCheck
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const;

431 
vœtu®
 
št32_t


432 
	$¥ªQuickCheckYes
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
UE¼ÜCode
 &
”rÜCode
) const;

442 
vœtu®
 
UBoŞ
 
	$hasBound¬yBefÜe
(
UCh¬32
 
c
) const;

452 
vœtu®
 
UBoŞ
 
	$hasBound¬yAá”
(
UCh¬32
 
c
) const;

461 
vœtu®
 
UBoŞ
 
	$isIÃ¹
(
UCh¬32
 
c
) const;

462 
´iv©e
:

463 
UnicodeSŒšg
 &

464 
	$nÜm®ize
(cÚ¡ 
UnicodeSŒšg
 &
¤c
,

465 
UnicodeSŒšg
 &
de¡
,

466 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
,

467 
UE¼ÜCode
 &
”rÜCode
) const;

469 
UnicodeSŒšg
 &

470 
	$nÜm®izeSecÚdAndAµ’d
(
UnicodeSŒšg
 &
fœ¡
,

471 cÚ¡ 
UnicodeSŒšg
 &
£cÚd
,

472 
UBoŞ
 
doNÜm®ize
,

473 
UE¼ÜCode
 &
”rÜCode
) const;

475 cÚ¡ 
NÜm®iz”2
 &
nÜm2
;

476 cÚ¡ 
UnicodeS‘
 &
£t
;

477 
	}
};

479 
	gU_NAMESPACE_END


	@unicode/normlzr.h

9 #iâdeà
NORMLZR_H


10 
	#NORMLZR_H


	)

12 
	~"unicode/uty³s.h
"

19 #ià!
UCONFIG_NO_NORMALIZATION


21 
	~"unicode/ch¬™”.h
"

22 
	~"unicode/nÜm®iz”2.h
"

23 
	~"unicode/uni¡r.h
"

24 
	~"unicode/unÜm.h
"

25 
	~"unicode/uobjeù.h
"

27 
U_NAMESPACE_BEGIN


130 şas 
	cU_COMMON_API
 
	mNÜm®iz”
 : 
public
 
UObjeù
 {

131 
public
:

138 
DONE
=0xffff

153 
NÜm®iz”
(cÚ¡ 
UnicodeSŒšg
& 
¡r
, 
UNÜm®iz©iÚMode
 
mode
);

166 
NÜm®iz”
(cÚ¡ 
UCh¬
* 
¡r
, 
št32_t
 
Ëngth
, 
UNÜm®iz©iÚMode
 
mode
);

178 
NÜm®iz”
(cÚ¡ 
Ch¬aù”I‹¿tÜ
& 
™”
, 
UNÜm®iz©iÚMode
 
mode
);

185 
NÜm®iz”
(cÚ¡ NÜm®iz”& 
cİy
);

191 
	gvœtu®
 ~
NÜm®iz”
();

212 
U_EXPORT2
 
nÜm®ize
(cÚ¡ 
UnicodeSŒšg
& 
sourû
,

213 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

214 
UnicodeSŒšg
& 
»suÉ
,

215 
UE¼ÜCode
 &
¡©us
);

234 
U_EXPORT2
 
compo£
(cÚ¡ 
UnicodeSŒšg
& 
sourû
,

235 
UBoŞ
 
com·t
, 
št32_t
 
İtiÚs
,

236 
UnicodeSŒšg
& 
»suÉ
,

237 
UE¼ÜCode
 &
¡©us
);

256 
U_EXPORT2
 
decompo£
(cÚ¡ 
UnicodeSŒšg
& 
sourû
,

257 
UBoŞ
 
com·t
, 
št32_t
 
İtiÚs
,

258 
UnicodeSŒšg
& 
»suÉ
,

259 
UE¼ÜCode
 &
¡©us
);

281 
šlše
 
UNÜm®iz©iÚCheckResuÉ


282 
quickCheck
(cÚ¡ 
UnicodeSŒšg
 &
sourû
, 
UNÜm®iz©iÚMode
 
mode
, 
UE¼ÜCode
 &
¡©us
);

297 
UNÜm®iz©iÚCheckResuÉ


298 
quickCheck
(cÚ¡ 
UnicodeSŒšg
 &
sourû
, 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
, 
UE¼ÜCode
 &
¡©us
);

320 
šlše
 
UBoŞ


321 
isNÜm®ized
(cÚ¡ 
UnicodeSŒšg
 &
¤c
, 
UNÜm®iz©iÚMode
 
mode
, 
UE¼ÜCode
 &
”rÜCode
);

338 
UBoŞ


339 
isNÜm®ized
(cÚ¡ 
UnicodeSŒšg
 &
¤c
, 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
, 
UE¼ÜCode
 &
”rÜCode
);

370 
	gUnicodeSŒšg
 &

371 
U_EXPORT2
 
cÚÿ‹Ç‹
(
UnicodeSŒšg
 &
Ëá
, UnicodeSŒšg &
right
,

372 
UnicodeSŒšg
 &
»suÉ
,

373 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

374 
UE¼ÜCode
 &
”rÜCode
);

440 
šlše
 
št32_t


441 
com·»
(cÚ¡ 
UnicodeSŒšg
 &
s1
, cÚ¡ UnicodeSŒšg &
s2
,

442 
ušt32_t
 
İtiÚs
,

443 
UE¼ÜCode
 &
”rÜCode
);

457 
UCh¬32
 
cu¼’t
();

467 
UCh¬32
 
fœ¡
();

477 
UCh¬32
 
Ï¡
();

493 
UCh¬32
 
Ãxt
();

509 
UCh¬32
 
´evious
();

520 
£tIndexOÆy
(
št32_t
 
šdex
);

527 
»£t
();

543 
št32_t
 
	$g‘Index
() const;

553 
št32_t
 
	$¡¬tIndex
() const;

565 
št32_t
 
	$’dIndex
() const;

575 
UBoŞ
 
İ”©Ü
==(cÚ¡ 
NÜm®iz”
& 
th©
) const;

585 
šlše
 
UBoŞ
 
İ”©Ü
!=(cÚ¡ 
NÜm®iz”
& 
th©
) const;

593 
NÜm®iz”
* 
	$şÚe
() const;

601 
št32_t
 
	$hashCode
() const;

622 
	`£tMode
(
UNÜm®iz©iÚMode
 
ÃwMode
);

634 
UNÜm®iz©iÚMode
 
	$g‘UMode
() const;

652 
	`£tO±iÚ
(
št32_t
 
İtiÚ
,

653 
UBoŞ
 
v®ue
);

665 
UBoŞ
 
	$g‘O±iÚ
(
št32_t
 
İtiÚ
) const;

675 
	`£tText
(cÚ¡ 
UnicodeSŒšg
& 
ÃwText
,

676 
UE¼ÜCode
 &
¡©us
);

686 
	`£tText
(cÚ¡ 
Ch¬aù”I‹¿tÜ
& 
ÃwText
,

687 
UE¼ÜCode
 &
¡©us
);

698 
	`£tText
(cÚ¡ 
UCh¬
* 
ÃwText
,

699 
št32_t
 
Ëngth
,

700 
UE¼ÜCode
 &
¡©us
);

707 
	`g‘Text
(
UnicodeSŒšg
& 
»suÉ
);

714 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

721 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

723 
´iv©e
:

728 
	`NÜm®iz”
();

729 
NÜm®iz”
 &
İ”©Ü
=(cÚ¡ NÜm®iz” &
th©
);

733 
UBoŞ
 
	`ÃxtNÜm®ize
();

734 
UBoŞ
 
	`´eviousNÜm®ize
();

736 
	`š™
();

737 
	`ş—rBufãr
();

743 
F‹»dNÜm®iz”2
*
fF‹»dNÜm2
;

744 cÚ¡ 
NÜm®iz”2
 *
fNÜm2
;

745 
UNÜm®iz©iÚMode
 
fUMode
;

746 
št32_t
 
fO±iÚs
;

749 
Ch¬aù”I‹¿tÜ
 *
‹xt
;

753 
št32_t
 
cu¼’tIndex
, 
ÃxtIndex
;

756 
UnicodeSŒšg
 
bufãr
;

757 
št32_t
 
bufãrPos
;

758 
	}
};

764 
šlše
 
UBoŞ


765 
	gNÜm®iz”
::
İ”©Ü
!ğ(cÚ¡ 
NÜm®iz”
& 
Ùh”
) const

766 {  ! 
İ”©Ü
==(
Ùh”
); }

768 
šlše
 
UNÜm®iz©iÚCheckResuÉ


769 
	gNÜm®iz”
::
	$quickCheck
(cÚ¡ 
UnicodeSŒšg
& 
sourû
,

770 
UNÜm®iz©iÚMode
 
mode
,

771 
UE¼ÜCode
 &
¡©us
) {

772  
	`quickCheck
(
sourû
, 
mode
, 0, 
¡©us
);

773 
	}
}

775 
šlše
 
UBoŞ


776 
	gNÜm®iz”
::
	$isNÜm®ized
(cÚ¡ 
UnicodeSŒšg
& 
sourû
,

777 
UNÜm®iz©iÚMode
 
mode
,

778 
UE¼ÜCode
 &
¡©us
) {

779  
	`isNÜm®ized
(
sourû
, 
mode
, 0, 
¡©us
);

780 
	}
}

782 
šlše
 
št32_t


783 
	gNÜm®iz”
::
	$com·»
(cÚ¡ 
UnicodeSŒšg
 &
s1
, cÚ¡ UnicodeSŒšg &
s2
,

784 
ušt32_t
 
İtiÚs
,

785 
UE¼ÜCode
 &
”rÜCode
) {

787  
	`unÜm_com·»
(
s1
.
	`g‘Bufãr
(), s1.
	`Ëngth
(),

788 
s2
.
	`g‘Bufãr
(), s2.
	`Ëngth
(),

789 
İtiÚs
,

790 &
”rÜCode
);

791 
	}
}

793 
	gU_NAMESPACE_END


	@unicode/parseerr.h

11 #iâdeà
PARSEERR_H


12 
	#PARSEERR_H


	)

14 
	~"unicode/uty³s.h
"

25 ’um { 
	mU_PARSE_CONTEXT_LEN
 = 16 };

56 
	sUP¬£E¼Ü
 {

65 
št32_t
 
	mlše
;

74 
št32_t
 
	moff£t
;

81 
UCh¬
 
	m´eCÚ‹xt
[
U_PARSE_CONTEXT_LEN
];

88 
UCh¬
 
	mpo¡CÚ‹xt
[
U_PARSE_CONTEXT_LEN
];

90 } 
	tUP¬£E¼Ü
;

	@unicode/parsepos.h

16 #iâdeà
PARSEPOS_H


17 
	#PARSEPOS_H


	)

19 
	~"unicode/uty³s.h
"

20 
	~"unicode/uobjeù.h
"

23 
U_NAMESPACE_BEGIN


47 şas 
	cU_COMMON_API
 
	mP¬£Pos™iÚ
 : 
public
 
UObjeù
 {

48 
public
:

53 
	$P¬£Pos™iÚ
()

54 : 
	`UObjeù
(),

55 
	`šdex
(0),

56 
	`”rÜIndex
(-1)

64 
	$P¬£Pos™iÚ
(
št32_t
 
ÃwIndex
)

65 : 
	`UObjeù
(),

66 
	`šdex
(
ÃwIndex
),

67 
	`”rÜIndex
(-1)

68 {
	}
}

75 
	$P¬£Pos™iÚ
(cÚ¡ 
P¬£Pos™iÚ
& 
cİy
)

76 : 
	`UObjeù
(
cİy
),

77 
	`šdex
(
cİy
.
šdex
),

78 
	$”rÜIndex
(
cİy
.
”rÜIndex
)

79 {
	}
}

85 
	gvœtu®
 ~
P¬£Pos™iÚ
();

91 
	gP¬£Pos™iÚ
& 
	gİ”©Ü
=(cÚ¡ 
P¬£Pos™iÚ
& 
cİy
);

98 
UBoŞ
 
	gİ”©Ü
==(cÚ¡ 
P¬£Pos™iÚ
& 
th©
) const;

105 
UBoŞ
 
	gİ”©Ü
!=(cÚ¡ 
P¬£Pos™iÚ
& 
th©
) const;

118 
P¬£Pos™iÚ
 *
	$şÚe
() const;

127 
št32_t
 
	$g‘Index
() const;

134 
	`£tIndex
(
št32_t
 
šdex
);

143 
	`£tE¼ÜIndex
(
št32_t
 
ei
);

150 
št32_t
 
	$g‘E¼ÜIndex
() const;

157 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

164 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

166 
´iv©e
:

173 
št32_t
 
šdex
;

178 
št32_t
 
”rÜIndex
;

180 
	}
};

182 
šlše
 
	gP¬£Pos™iÚ
&

183 
	gP¬£Pos™iÚ
::
İ”©Ü
=(cÚ¡ 
P¬£Pos™iÚ
& 
cİy
)

185 
šdex
 = 
cİy
.index;

186 
	g”rÜIndex
 = 
cİy
.
”rÜIndex
;

187  *
	gthis
;

190 
šlše
 
UBoŞ


191 
	gP¬£Pos™iÚ
::
İ”©Ü
==(cÚ¡ 
P¬£Pos™iÚ
& 
cİy
) const

193 if(
šdex
 !ğ
cİy
.šdex || 
”rÜIndex
 != copy.errorIndex)

194  
FALSE
;

196  
	gTRUE
;

199 
šlše
 
UBoŞ


200 
	gP¬£Pos™iÚ
::
İ”©Ü
!=(cÚ¡ 
P¬£Pos™iÚ
& 
cİy
) const

202  !
İ”©Ü
==(
cİy
);

205 
šlše
 
št32_t


206 
	gP¬£Pos™iÚ
::
	$g‘Index
() const

208  
šdex
;

209 
	}
}

211 
šlše
 

212 
	gP¬£Pos™iÚ
::
	$£tIndex
(
št32_t
 
off£t
)

214 
this
->
šdex
 = 
off£t
;

215 
	}
}

217 
šlše
 
št32_t


218 
	gP¬£Pos™iÚ
::
	$g‘E¼ÜIndex
() const

220  
”rÜIndex
;

221 
	}
}

223 
šlše
 

224 
	gP¬£Pos™iÚ
::
	$£tE¼ÜIndex
(
št32_t
 
ei
)

226 
this
->
”rÜIndex
 = 
ei
;

227 
	}
}

228 
	gU_NAMESPACE_END


	@unicode/platform.h

23 #iâdeà
_PLATFORM_H


24 
	#_PLATFORM_H


	)

32 #ià
defšed
(
UVERNUM_H
)

33 #”rÜ 
Do
 
nÙ
 
šşude
 
unicode
/
uv”num
.
h
 
befÜe
 #šşudšg unicode/
¶©fÜm
.h. 
In¡—d
 
of
 unicode/uv”num.h, #šşudunicode/
uv”siÚ
.h

40 #iâdeà
UCLN_NO_AUTO_CLEANUP


41 
	#UCLN_NO_AUTO_CLEANUP
 1

	)

45 #iâdeà
CYGWINMSVC


48 #iâdeà
U_LINUX


49 
	#U_LINUX


	)

57 #iâdeà
U_HAVE_DIRENT_H


58 
	#U_HAVE_DIRENT_H
 1

	)

62 #iâdeà
U_HAVE_INTTYPES_H


63 
	#U_HAVE_INTTYPES_H
 1

	)

80 #iâdeà
U_IOSTREAM_SOURCE


81 
	#U_IOSTREAM_SOURCE
 199711

	)

92 #ifdeà
HAVE_ANDROID_OS


93 
	#U_HAVE_STD_STRING
 0

	)

95 #iâdeà
U_HAVE_STD_STRING


96 
	#U_HAVE_STD_STRING
 1

	)

101 #iâdeà
U_HAVE_INT8_T


102 
	#U_HAVE_INT8_T
 1

	)

105 #iâdeà
U_HAVE_UINT8_T


106 
	#U_HAVE_UINT8_T
 1

	)

109 #iâdeà
U_HAVE_INT16_T


110 
	#U_HAVE_INT16_T
 1

	)

113 #iâdeà
U_HAVE_UINT16_T


114 
	#U_HAVE_UINT16_T
 1

	)

117 #iâdeà
U_HAVE_INT32_T


118 
	#U_HAVE_INT32_T
 1

	)

121 #iâdeà
U_HAVE_UINT32_T


122 
	#U_HAVE_UINT32_T
 1

	)

125 #iâdeà
U_HAVE_INT64_T


126 
	#U_HAVE_INT64_T
 1

	)

129 #iâdeà
U_HAVE_UINT64_T


130 
	#U_HAVE_UINT64_T
 1

	)

140 #iâdeà
U_HAVE_NAMESPACE


141 
	#U_HAVE_NAMESPACE
 1

	)

147 #ià
defšed
(
BYTE_ORDER
è&& defšed(
BIG_ENDIAN
)

148 
	#U_IS_BIG_ENDIAN
 (
BYTE_ORDER
 =ğ
BIG_ENDIAN
)

	)

150 
	#U_IS_BIG_ENDIAN
 0

	)

154 #iâdeà
ICU_USE_THREADS


155 
	#ICU_USE_THREADS
 1

	)

159 #ià
defšed
(
__GNUC__
è&& (defšed(
__i386__
è|| defšed(
__x86_64__
))

160 
	#UMTX_STRONG_MEMORY_MODEL
 1

	)

163 #iâdeà
U_DEBUG


164 
	#U_DEBUG
 1

	)

167 #iâdeà
U_RELEASE


168 
	#U_RELEASE
 0

	)

173 #iâdeà
U_DISABLE_RENAMING


174 
	#U_DISABLE_RENAMING
 0

	)

178 #iâdeà
U_OVERRIDE_CXX_ALLOCATION


179 
	#U_OVERRIDE_CXX_ALLOCATION
 1

	)

182 #iâdeà
U_HAVE_PLACEMENT_NEW


183 
	#U_HAVE_PLACEMENT_NEW
 1

	)

187 #iâdeà
U_ENABLE_TRACING


188 
	#U_ENABLE_TRACING
 0

	)

195 #iâdeà
U_ENABLE_DYLOAD


196 
	#U_ENABLE_DYLOAD
 1

	)

203 #iâdeà
U_CHECK_DYLOAD


204 
	#U_CHECK_DYLOAD
 1

	)

209 #iâdeà
U_DEFAULT_SHOW_DRAFT


210 
	#U_DEFAULT_SHOW_DRAFT
 1

	)

219 #ià((
defšed
(
OS390
è&& (!defšed(
__CHARSET_LIB
è|| !__CHARSET_LIB))è|| defšed(
OS400
)

220 
	#U_CHARSET_FAMILY
 1

	)

234 #ifdeà
HAVE_ANDROID_OS


235 
	#U_HAVE_WCHAR_H
 0

	)

236 
	#U_SIZEOF_WCHAR_T
 1

	)

238 
	#U_HAVE_WCSCPY
 0

	)

242 #iâdeà
U_HAVE_WCHAR_H


243 
	#U_HAVE_WCHAR_H
 1

	)

246 #iâdeà
U_SIZEOF_WCHAR_T


247 
	#U_SIZEOF_WCHAR_T
 4

	)

250 #iâdeà
U_HAVE_WCSCPY


251 
	#U_HAVE_WCSCPY
 1

	)

268 #iâdeà
U_GNUC_UTF16_STRING


269 
	#U_GNUC_UTF16_STRING
 0

	)

271 #ià1 || 
defšed
(
U_CHECK_UTF16_STRING
)

272 #ià(
defšed
(
__xlC__
è&& defšed(
__IBM_UTF_LITERAL
è&& 
U_SIZEOF_WCHAR_T
 != 2) \

273 || (
defšed
(
__HP_aCC
è&& 
	g__HP_aCC
 >= 035000) \

274 || (
defšed
(
__HP_cc
) && __HP_cc >= 111106) \

275 || 
U_GNUC_UTF16_STRING


276 
	#U_DECLARE_UTF16
(
¡ršg
è
u
 ## 
	)
string

277 #–ià(
defšed
(
__SUNPRO_CC
) && __SUNPRO_CC >= 0x550)

280 
	#U_DECLARE_UTF16
(
¡ršg
è
U
 ## 
	)
string

281 #–ià
U_SIZEOF_WCHAR_T
 == 2 \

282 && (
U_CHARSET_FAMILY
 =ğ0 || ((
defšed
(
OS390
è|| defšed(
OS400
)è&& 
	$defšed
(
__UCS2__
)))

283 
	#U_DECLARE_UTF16
(
¡ršg
è
L
 ## 
	)
string

296 #ià!
HAVE_ANDROID_OS


297 
	#U_HAVE_NL_LANGINFO
 1

	)

299 #iâdeà
U_HAVE_NL_LANGINFO_CODESET


300 
	#U_HAVE_NL_LANGINFO_CODESET
 0

	)

305 #iâdeà
U_NL_LANGINFO_CODESET


306 
	#U_NL_LANGINFO_CODESET
 
CODESET


	)

309 #ià!
HAVE_ANDROID_OS


311 
	#U_TZSET
 
tz£t


	)

314 
	#U_TIMEZONE
 
__timezÚe


	)

317 
	#U_TZNAME
 
tzÇme


	)

321 
	#U_HAVE_MMAP
 1

	)

322 
	#U_HAVE_POPEN
 1

	)

331 
	#U_EXPORT
 
	`__©Œibu‹__
((
	`visib™y
("deçuÉ")))

	)

332 #–ià(
	`defšed
(
__SUNPRO_CC
) && __SUNPRO_CC >= 0x550) \

333 || (
	`defšed
(
__SUNPRO_C
) && __SUNPRO_C >= 0x550)

334 
	#U_EXPORT
 
__glob®


	)

338 
	#U_EXPORT


	)

342 
	#U_EXPORT2


	)

345 #ià
	`defšed
(
U_CYGWIN
è&& !defšed(
__GNUC__
)

346 
	#U_IMPORT
 
	`__deş¥ec
(
dÎimpÜt
)

	)

348 
	#U_IMPORT


	)

357 #iâdeà
U_INLINE


358 #ifdeà
__ılu¥lus


359 
	#U_INLINE
 
šlše


	)

361 
	#U_INLINE
 
__šlše__


	)

365 #iâdeà
U_ALIGN_CODE


366 
	#U_ALIGN_CODE
(
n
)

	)

376 #ià!
	`defšed
(
__GCC_HAVE_SYNC_COMPARE_AND_SWAP_4
)

377 
	#U_HAVE_GCC_ATOMICS
 0

	)

385 #iâdeà
U_HAVE_GCC_ATOMICS


386 
	#U_HAVE_GCC_ATOMICS
 1

	)

399 #iâdeà
U_MAKE


400 
	#U_MAKE
 "make"

	)

415 
	#U_LIB_SUFFIX_C_NAME


	)

420 
	#U_LIB_SUFFIX_C_NAME_STRING
 ""

	)

425 
	#U_HAVE_LIB_SUFFIX
 0

	)

427 #ià
U_HAVE_LIB_SUFFIX


428 #iâdeà
U_ICU_ENTRY_POINT_RENAME


430 
	#U_ICU_ENTRY_POINT_RENAME
(
x
èx ## 
_
 ## 46 ##

	)

431 
	#U_DEF_ICUDATA_ENTRY_POINT
(
majÜ
, 
mšÜ
è
icudt
####majÜ##mšÜ##
_d©


	)

	@unicode/ppalmos.h

16 #iâdeà
U_PPALMOS_H


17 
	#U_PPALMOS_H


	)

25 #iâdeà
U_PALMOS


26 
	#U_PALMOS


	)

30 #ià
defšed
(
_MSC_VER
)

31 
	#U_INT64_IS_LONG_LONG
 0

	)

33 
	#U_INT64_IS_LONG_LONG
 1

	)

37 #iâdeà
U_HAVE_INTTYPES_H


38 
	#U_HAVE_INTTYPES_H
 1

	)

55 #iâdeà
U_IOSTREAM_SOURCE


56 
	#U_IOSTREAM_SOURCE
 199711

	)

60 #iâdeà
U_HAVE_INT8_T


61 
	#U_HAVE_INT8_T
 
U_HAVE_INTTYPES_H


	)

64 #iâdeà
U_HAVE_UINT8_T


65 
	#U_HAVE_UINT8_T
 
U_HAVE_INTTYPES_H


	)

68 #iâdeà
U_HAVE_INT16_T


69 
	#U_HAVE_INT16_T
 
U_HAVE_INTTYPES_H


	)

72 #iâdeà
U_HAVE_UINT16_T


73 
	#U_HAVE_UINT16_T
 
U_HAVE_INTTYPES_H


	)

76 #iâdeà
U_HAVE_INT32_T


77 
	#U_HAVE_INT32_T
 
U_HAVE_INTTYPES_H


	)

80 #iâdeà
U_HAVE_UINT32_T


81 
	#U_HAVE_UINT32_T
 
U_HAVE_INTTYPES_H


	)

84 #iâdeà
U_HAVE_INT64_T


85 
	#U_HAVE_INT64_T
 
U_HAVE_INTTYPES_H


	)

88 #iâdeà
U_HAVE_UINT64_T


89 
	#U_HAVE_UINT64_T
 
U_HAVE_INTTYPES_H


	)

99 #ià
U_HAVE_INTTYPES_H


100 
	~<š‰y³s.h
>

103 #ià! 
U_HAVE_INT8_T


104 sigÃd 
	tšt8_t
;

107 #ià! 
U_HAVE_UINT8_T


108 
	tušt8_t
;

111 #ià! 
U_HAVE_INT16_T


112 sigÃd 
	tšt16_t
;

115 #ià! 
U_HAVE_UINT16_T


116 
	tušt16_t
;

119 #ià! 
U_HAVE_INT32_T


120 sigÃd 
	tšt32_t
;

123 #ià! 
U_HAVE_UINT32_T


124 
	tušt32_t
;

127 #ià! 
U_HAVE_INT64_T


128 #ià
U_INT64_IS_LONG_LONG


129 sigÃd 
	tšt64_t
;

131 sigÃd 
	t__št64
 
	tšt64_t
;

135 #ià! 
U_HAVE_UINT64_T


136 #ià
U_INT64_IS_LONG_LONG


137 
	tušt64_t
;

139 
	t__št64
 
	tušt64_t
;

149 #iâdeà
U_HAVE_NAMESPACE


150 
	#U_HAVE_NAMESPACE
 1

	)

154 
	#U_IS_BIG_ENDIAN
 0

	)

157 
	#ICU_USE_THREADS
 1

	)

159 #iâdeà
U_DEBUG


160 #ifdeà
_DEBUG


161 
	#U_DEBUG
 1

	)

163 
	#U_DEBUG
 0

	)

167 #iâdeà
U_RELEASE


168 #ifdeà
NDEBUG


169 
	#U_RELEASE
 1

	)

171 
	#U_RELEASE
 0

	)

177 #iâdeà
U_DISABLE_RENAMING


178 
	#U_DISABLE_RENAMING
 0

	)

182 #iâdeà
U_OVERRIDE_CXX_ALLOCATION


183 
	#U_OVERRIDE_CXX_ALLOCATION
 1

	)

186 #iâdeà
U_HAVE_PLACEMENT_NEW


187 
	#U_HAVE_PLACEMENT_NEW
 0

	)

190 #ià!
defšed
(
U_HAVE_DEBUG_LOCATION_NEW
è&& defšed(
_MSC_VER
)

191 
	#U_HAVE_DEBUG_LOCATION_NEW
 0

	)

195 #iâdeà
U_ENABLE_TRACING


196 
	#U_ENABLE_TRACING
 1

	)

200 #iâdeà
U_DEFAULT_SHOW_DRAFT


201 
	#U_DEFAULT_SHOW_DRAFT
 1

	)

205 
	#U_HAVE_LIB_SUFFIX
 0

	)

206 
	#U_LIB_SUFFIX_C_NAME


	)

207 
	#U_LIB_SUFFIX_C_NAME_STRING
 ""

	)

213 
	#U_HAVE_WCHAR_H
 1

	)

214 
	#U_SIZEOF_WCHAR_T
 2

	)

216 
	#U_HAVE_WCSCPY
 0

	)

225 
	#U_TZSET
 
_tz£t


	)

228 
	#U_TIMEZONE
 
_timezÚe


	)

231 
	#U_TZNAME
 
_tzÇme


	)

234 
	#U_HAVE_MMAP
 0

	)

235 
	#U_HAVE_POPEN
 0

	)

241 
	#U_EXPORT


	)

242 
	#U_EXPORT2


	)

243 
	#U_IMPORT


	)

249 #iâdeà
U_INLINE


250 #ifdeà
__ılu¥lus


251 
	#U_INLINE
 
šlše


	)

253 
	#U_INLINE
 
__šlše


	)

257 #ià
defšed
(
_MSC_VER
è&& defšed(
_M_IX86
)

258 
	#U_ALIGN_CODE
(
v®
è
__asm
 
®ign
 
	)
v®

260 
	#U_ALIGN_CODE
(
v®
)

	)

268 #iâdeà
U_MAKE


269 
	#U_MAKE
 "nmake"

	)

270 
	#U_MAKE_IS_NMAKE
 1

	)

	@unicode/ptypes.h

20 #iâdeà
_PTYPES_H


21 
	#_PTYPES_H


	)

23 
	~<sys/ty³s.h
>

25 
	~"unicode/¶©fÜm.h
"

33 #ià
U_HAVE_INTTYPES_H


39 #ifdeà
OS390


41 
	~<ã©u»s.h
>

42 #ià! 
U_HAVE_INT8_T


43 sigÃd 
	tšt8_t
;

45 #ià!
defšed
(
__ušt8_t
)

46 
	#__ušt8_t
 1

	)

47 
	tušt8_t
;

51 
	~<š‰y³s.h
>

55 #ià! 
U_HAVE_INT8_T


56 sigÃd 
	tšt8_t
;

59 #ià! 
U_HAVE_UINT8_T


60 
	tušt8_t
;

63 #ià! 
U_HAVE_INT16_T


64 sigÃd 
	tšt16_t
;

67 #ià! 
U_HAVE_UINT16_T


68 
	tušt16_t
;

71 #ià! 
U_HAVE_INT32_T


72 sigÃd 
	tšt32_t
;

75 #ià! 
U_HAVE_UINT32_T


76 
	tušt32_t
;

79 #ià! 
U_HAVE_INT64_T


80 sigÃd 
	tšt64_t
;

84 #ià! 
U_HAVE_UINT64_T


85 
	tušt64_t
;

	@unicode/putil.h

24 #iâdeà
PUTIL_H


25 
	#PUTIL_H


	)

27 
	~"unicode/uty³s.h
"

35 #iâdeà
IEEE_754


36 
	#IEEE_754
 1

	)

73 
U_STABLE
 cÚ¡ * 
U_EXPORT2
 
u_g‘D©aDœeùÜy
();

94 
U_STABLE
 
U_EXPORT2
 
u_£tD©aDœeùÜy
(cÚ¡ *
dœeùÜy
);

96 #ià!
U_CHARSET_IS_UTF8


105 
U_INTERNAL
 cÚ¡ * 
U_EXPORT2
 
u´v_g‘DeçuÉCod•age
();

117 
U_INTERNAL
 cÚ¡ * 
U_EXPORT2
 
u´v_g‘DeçuÉLoÿËID
();

125 #ifdeà
XP_MAC


126 
	#U_FILE_SEP_CHAR
 ':'

	)

127 
	#U_FILE_ALT_SEP_CHAR
 ':'

	)

128 
	#U_PATH_SEP_CHAR
 ';'

	)

129 
	#U_FILE_SEP_STRING
 ":"

	)

130 
	#U_FILE_ALT_SEP_STRING
 ":"

	)

131 
	#U_PATH_SEP_STRING
 ";"

	)

132 #–ià
defšed
(
U_WINDOWS
)

133 
	#U_FILE_SEP_CHAR
 '\\'

	)

134 
	#U_FILE_ALT_SEP_CHAR
 '/'

	)

135 
	#U_PATH_SEP_CHAR
 ';'

	)

136 
	#U_FILE_SEP_STRING
 "\\"

	)

137 
	#U_FILE_ALT_SEP_STRING
 "/"

	)

138 
	#U_PATH_SEP_STRING
 ";"

	)

140 
	#U_FILE_SEP_CHAR
 '/'

	)

141 
	#U_FILE_ALT_SEP_CHAR
 '/'

	)

142 
	#U_PATH_SEP_CHAR
 ':'

	)

143 
	#U_FILE_SEP_STRING
 "/"

	)

144 
	#U_FILE_ALT_SEP_STRING
 "/"

	)

145 
	#U_PATH_SEP_STRING
 ":"

	)

168 
U_STABLE
 
U_EXPORT2


169 
u_ch¬sToUCh¬s
(cÚ¡ *
cs
, 
UCh¬
 *
us
, 
št32_t
 
Ëngth
);

190 
U_STABLE
 
U_EXPORT2


191 
u_UCh¬sToCh¬s
(cÚ¡ 
UCh¬
 *
us
, *
cs
, 
št32_t
 
Ëngth
);

	@unicode/pwin32.h

25 #iâdeà
U_WINDOWS


26 
	#U_WINDOWS


	)

29 #ià
defšed
(
__BORLANDC__
)

30 
	#U_HAVE_PLACEMENT_NEW
 0

	)

31 
	#__STDC_CONSTANT_MACROS


	)

35 #ià
defšed
(
_MSC_VER
)

36 
	#U_INT64_IS_LONG_LONG
 0

	)

38 
	#U_INT64_IS_LONG_LONG
 1

	)

42 #iâdeà
U_HAVE_INTTYPES_H


43 #ià
defšed
(
__BORLANDC__
è|| defšed(
__MINGW32__
)

44 
	#U_HAVE_INTTYPES_H
 1

	)

46 
	#U_HAVE_INTTYPES_H
 0

	)

64 #iâdeà
U_IOSTREAM_SOURCE


65 
	#U_IOSTREAM_SOURCE
 199711

	)

70 #iâdeà
U_HAVE_INT8_T


71 
	#U_HAVE_INT8_T
 
U_HAVE_INTTYPES_H


	)

74 #iâdeà
U_HAVE_UINT8_T


75 
	#U_HAVE_UINT8_T
 
U_HAVE_INTTYPES_H


	)

78 #iâdeà
U_HAVE_INT16_T


79 
	#U_HAVE_INT16_T
 
U_HAVE_INTTYPES_H


	)

82 #iâdeà
U_HAVE_UINT16_T


83 
	#U_HAVE_UINT16_T
 
U_HAVE_INTTYPES_H


	)

86 #iâdeà
U_HAVE_INT32_T


87 
	#U_HAVE_INT32_T
 
U_HAVE_INTTYPES_H


	)

90 #iâdeà
U_HAVE_UINT32_T


91 
	#U_HAVE_UINT32_T
 
U_HAVE_INTTYPES_H


	)

94 #iâdeà
U_HAVE_INT64_T


95 
	#U_HAVE_INT64_T
 
U_HAVE_INTTYPES_H


	)

98 #iâdeà
U_HAVE_UINT64_T


99 
	#U_HAVE_UINT64_T
 
U_HAVE_INTTYPES_H


	)

105 #ià!
U_INT64_IS_LONG_LONG


106 #iâdeà
INT64_C


107 
	#INT64_C
(
x
è((
št64_t
)x)

	)

109 #iâdeà
UINT64_C


110 
	#UINT64_C
(
x
è((
ušt64_t
)x)

	)

122 #ià
U_HAVE_INTTYPES_H


123 
	~<š‰y³s.h
>

126 #ià! 
U_HAVE_INT8_T


127 sigÃd 
	tšt8_t
;

130 #ià! 
U_HAVE_UINT8_T


131 
	tušt8_t
;

134 #ià! 
U_HAVE_INT16_T


135 sigÃd 
	tšt16_t
;

138 #ià! 
U_HAVE_UINT16_T


139 
	tušt16_t
;

142 #ià! 
U_HAVE_INT32_T


143 sigÃd 
	tšt32_t
;

146 #ià! 
U_HAVE_UINT32_T


147 
	tušt32_t
;

150 #ià! 
U_HAVE_INT64_T


151 #ià
U_INT64_IS_LONG_LONG


152 sigÃd 
	tšt64_t
;

154 sigÃd 
	t__št64
 
	tšt64_t
;

158 #ià! 
U_HAVE_UINT64_T


159 #ià
U_INT64_IS_LONG_LONG


160 
	tušt64_t
;

162 
	t__št64
 
	tušt64_t
;

176 #iâdeà
U_HAVE_NAMESPACE


177 
	#U_HAVE_NAMESPACE
 1

	)

181 
	#U_IS_BIG_ENDIAN
 0

	)

184 #iâdeà
ICU_USE_THREADS


185 
	#ICU_USE_THREADS
 1

	)

189 #iâdeà
UCLN_NO_AUTO_CLEANUP


190 
	#UCLN_NO_AUTO_CLEANUP
 1

	)

198 #ià
defšed
(
_M_IX86
è|| defšed(
_M_AMD64
è|| defšed(
_M_X64
è|| (defšed(
__GNUC__
è&& (defšed(
__i386__
è|| defšed(
__x86_64__
)))

199 
	#UMTX_STRONG_MEMORY_MODEL
 1

	)

203 #iâdeà
U_DEBUG


204 #ifdeà
_DEBUG


205 
	#U_DEBUG
 1

	)

207 
	#U_DEBUG
 0

	)

212 #iâdeà
U_RELEASE


213 #ifdeà
NDEBUG


214 
	#U_RELEASE
 1

	)

216 
	#U_RELEASE
 0

	)

222 #iâdeà
U_DISABLE_RENAMING


223 
	#U_DISABLE_RENAMING
 0

	)

227 #iâdeà
U_OVERRIDE_CXX_ALLOCATION


228 
	#U_OVERRIDE_CXX_ALLOCATION
 1

	)

231 #iâdeà
U_HAVE_PLACEMENT_NEW


232 
	#U_HAVE_PLACEMENT_NEW
 1

	)

235 #ià!
defšed
(
U_HAVE_DEBUG_LOCATION_NEW
è&& defšed(
_MSC_VER
)

236 
	#U_HAVE_DEBUG_LOCATION_NEW
 1

	)

240 #iâdeà
U_ENABLE_TRACING


241 
	#U_ENABLE_TRACING
 0

	)

245 #iâdeà
U_DEFAULT_SHOW_DRAFT


246 
	#U_DEFAULT_SHOW_DRAFT
 1

	)

250 #iâdeà
U_HAVE_LIB_SUFFIX


251 
	#U_HAVE_LIB_SUFFIX
 0

	)

253 #iâdeà
U_LIB_SUFFIX_C_NAME


254 
	#U_LIB_SUFFIX_C_NAME


	)

256 #iâdeà
U_LIB_SUFFIX_C_NAME_STRING


257 
	#U_LIB_SUFFIX_C_NAME_STRING
 ""

	)

265 
	#U_HAVE_WCHAR_H
 1

	)

266 
	#U_SIZEOF_WCHAR_T
 2

	)

268 
	#U_HAVE_WCSCPY
 1

	)

279 
	#U_DECLARE_UTF16
(
¡ršg
è
L
 ## 
	)
¡ršg

290 
	#U_TZSET
 
_tz£t


	)

296 
	#U_TIMEZONE
 
_timezÚe


	)

302 
	#U_TZNAME
 
_tzÇme


	)

308 
	#U_DAYLIGHT
 
_daylight


	)

311 
	#U_HAVE_MMAP
 0

	)

312 
	#U_HAVE_POPEN
 0

	)

314 #iâdeà
U_ENABLE_DYLOAD


315 
	#U_ENABLE_DYLOAD
 1

	)

325 #ifdeà
U_STATIC_IMPLEMENTATION


326 
	#U_EXPORT


	)

328 
	#U_EXPORT
 
	`__deş¥ec
(
dÎexpÜt
)

	)

330 
	#U_EXPORT2
 
__cdeş


	)

331 
	#U_IMPORT
 
	`__deş¥ec
(
dÎimpÜt
)

	)

338 #iâdeà
U_INLINE


339 #ifdeà
__ılu¥lus


340 
	#U_INLINE
 
šlše


	)

342 
	#U_INLINE
 
__šlše


	)

346 #ià
defšed
(
_MSC_VER
è&& defšed(
_M_IX86
è&& !defšed(
_MANAGED
)

347 
	#U_ALIGN_CODE
(
v®
è
__asm
 
®ign
 
	)
v®

349 
	#U_ALIGN_CODE
(
v®
)

	)

355 #ià
defšed
(
_MSC_VER
) && (_MSC_VER < 1400)

356 
	#U_HAVE_MSVC_2003_OR_EARLIER


	)

366 #iâdeà
U_MAKE


367 
	#U_MAKE
 "nmake"

	)

368 
	#U_MAKE_IS_NMAKE
 1

	)

	@unicode/rbbi.h

14 #iâdeà
RBBI_H


15 
	#RBBI_H


	)

17 
	~"unicode/uty³s.h
"

24 #ià!
UCONFIG_NO_BREAK_ITERATION


26 
	~"unicode/brk™”.h
"

27 
	~"unicode/ud©a.h
"

28 
	~"unicode/·r£”r.h
"

29 
	~"unicode/schr™”.h
"

30 
	~"unicode/uchr™”.h
"

33 
	gUTr›
;

35 
U_NAMESPACE_BEGIN


38 
	gRBBID©aH—d”
;

39 
şass
 
	gRuËBa£dB»akI‹¿tÜTabËs
;

40 
şass
 
	gB»akI‹¿tÜ
;

41 
şass
 
	gRBBID©aW¿µ”
;

42 
şass
 
	gUSck
;

43 
şass
 
	gLªguageB»akEngše
;

44 
şass
 
	gUnhªdËdEngše
;

45 
	gRBBIS‹TabË
;

65 şas 
	cU_COMMON_API
 
	mRuËBa£dB»akI‹¿tÜ
 : 
public
 
B»akI‹¿tÜ
 {

67 
´Ùeùed
:

72 
UText
 *
fText
;

79 
Ch¬aù”I‹¿tÜ
 *
	mfCh¬I‹r
;

86 
SŒšgCh¬aù”I‹¿tÜ
 *
	mfSCh¬I‹r
;

93 
UCh¬Ch¬aù”I‹¿tÜ
 *
	mfDCh¬I‹r
;

99 
RBBID©aW¿µ”
 *
	mfD©a
;

104 
št32_t
 
	mfLa¡RuËStusIndex
;

112 
UBoŞ
 
	mfLa¡StusIndexV®id
;

119 
ušt32_t
 
	mfDiùiÚ¬yCh¬CouÁ
;

128 
št32_t
* 
	mfCachedB»akPos™iÚs
;

134 
št32_t
 
	mfNumCachedB»akPos™iÚs
;

141 
št32_t
 
	mfPos™iÚInCache
;

150 
USck
 *
	mfLªguageB»akEngšes
;

159 
UnhªdËdEngše
 *
	mfUnhªdËdB»akEngše
;

166 
št32_t
 
	mfB»akTy³
;

168 
	m´Ùeùed
:

181 
	eEDÚtAdİt
 {

182 
kDÚtAdİt


195 
RuËBa£dB»akI‹¿tÜ
(
RBBID©aH—d”
* 
d©a
, 
UE¼ÜCode
 &
¡©us
);

205 
RuËBa£dB»akI‹¿tÜ
(cÚ¡ 
RBBID©aH—d”
* 
d©a
, 
EDÚtAdİt
 
dÚtAdİt
, 
UE¼ÜCode
 &
¡©us
);

208 
ä›nd
 
şass
 
	gRBBIRuËBud”
;

210 
ä›nd
 
şass
 
	gB»akI‹¿tÜ
;

214 
	gpublic
:

220 
RuËBa£dB»akI‹¿tÜ
();

228 
RuËBa£dB»akI‹¿tÜ
(cÚ¡ RuËBa£dB»akI‹¿tÜ& 
th©
);

238 
RuËBa£dB»akI‹¿tÜ
ĞcÚ¡ 
UnicodeSŒšg
 &
ruËs
,

239 
UP¬£E¼Ü
 &
·r£E¼Ü
,

240 
UE¼ÜCode
 &
¡©us
);

255 
RuËBa£dB»akI‹¿tÜ
(
UD©aMemÜy
* 
image
, 
UE¼ÜCode
 &
¡©us
);

261 
	gvœtu®
 ~
RuËBa£dB»akI‹¿tÜ
();

270 
	gRuËBa£dB»akI‹¿tÜ
& 
	gİ”©Ü
=(cÚ¡ 
RuËBa£dB»akI‹¿tÜ
& 
th©
);

280 
vœtu®
 
UBoŞ
 
	gİ”©Ü
==(cÚ¡ 
B»akI‹¿tÜ
& 
th©
) const;

289 
UBoŞ
 
	gİ”©Ü
!=(cÚ¡ 
B»akI‹¿tÜ
& 
th©
) const;

301 
vœtu®
 
B»akI‹¿tÜ
* 
	$şÚe
() const;

308 
vœtu®
 
št32_t
 
	$hashCode
() const;

315 
vœtu®
 cÚ¡ 
UnicodeSŒšg
& 
	$g‘RuËs
() const;

346 
vœtu®
 
Ch¬aù”I‹¿tÜ
& 
	$g‘Text
() const;

363 
vœtu®
 
UText
 *
	$g‘UText
(
UText
 *
flIn
, 
UE¼ÜCode
 &
¡©us
) const;

372 
vœtu®
 
	`adİtText
(
Ch¬aù”I‹¿tÜ
* 
ÃwText
);

380 
vœtu®
 
	`£tText
(cÚ¡ 
UnicodeSŒšg
& 
ÃwText
);

395 
vœtu®
 
	`£tText
(
UText
 *
‹xt
, 
UE¼ÜCode
 &
¡©us
);

402 
vœtu®
 
št32_t
 
	`fœ¡
();

409 
vœtu®
 
št32_t
 
	`Ï¡
();

421 
vœtu®
 
št32_t
 
	`Ãxt
(št32_ˆ
n
);

428 
vœtu®
 
št32_t
 
	`Ãxt
();

435 
vœtu®
 
št32_t
 
	`´evious
();

444 
vœtu®
 
št32_t
 
	`fŞlowšg
(št32_ˆ
off£t
);

453 
vœtu®
 
št32_t
 
	`´eûdšg
(št32_ˆ
off£t
);

463 
vœtu®
 
UBoŞ
 
	`isBound¬y
(
št32_t
 
off£t
);

470 
vœtu®
 
št32_t
 
	$cu¼’t
() const;

505 
vœtu®
 
št32_t
 
	$g‘RuËStus
() const;

530 
vœtu®
 
št32_t
 
	`g‘RuËStusVec
(št32_ˆ*
flInVec
, iÁ32_ˆ
ÿ·c™y
, 
UE¼ÜCode
 &
¡©us
);

543 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

556 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

582 
vœtu®
 
B»akI‹¿tÜ
 * 
	`ü—‹BufãrClÚe
(*
¡ackBufãr
,

583 
št32_t
 &
BufãrSize
,

584 
UE¼ÜCode
 &
¡©us
);

604 
vœtu®
 cÚ¡ 
ušt8_t
 *
	`g‘Bš¬yRuËs
(
ušt32_t
 &
Ëngth
);

607 
´Ùeùed
:

616 
vœtu®
 
	`»£t
();

627 
vœtu®
 
UBoŞ
 
	`isDiùiÚ¬yCh¬
(
UCh¬32
);

633 
vœtu®
 
št32_t
 
	$g‘B»akTy³
() const;

640 
vœtu®
 
	`£tB»akTy³
(
št32_t
 
ty³
);

647 
	`š™
();

649 
´iv©e
:

660 
št32_t
 
	`hªdËP»vious
(cÚ¡ 
RBBIS‹TabË
 *
¡©‘abË
);

671 
št32_t
 
	`hªdËNext
(cÚ¡ 
RBBIS‹TabË
 *
¡©‘abË
);

673 
´Ùeùed
:

689 
št32_t
 
	`checkDiùiÚ¬y
(št32_ˆ
¡¬tPos
, iÁ32_ˆ
’dPos
, 
UBoŞ
 
»v”£
);

691 
´iv©e
:

699 cÚ¡ 
LªguageB»akEngše
 *
	`g‘LªguageB»akEngše
(
UCh¬32
 
c
);

704 
	`makeRuËStusV®id
();

706 
	}
};

714 
šlše
 
UBoŞ
 
	gRuËBa£dB»akI‹¿tÜ
::
İ”©Ü
!=(cÚ¡ 
B»akI‹¿tÜ
& 
th©
) const {

715  !
İ”©Ü
==(
th©
);

718 
	gU_NAMESPACE_END


	@unicode/rep.h

14 #iâdeà
REP_H


15 
	#REP_H


	)

17 
	~"unicode/uobjeù.h
"

24 
U_NAMESPACE_BEGIN


26 
şass
 
	gUnicodeSŒšg
;

71 şas 
	cU_COMMON_API
 
	mR•ÏûabË
 : 
public
 
UObjeù
 {

73 
public
:

78 
vœtu®
 ~
R•ÏûabË
();

85 
šlše
 
št32_t
 
	$Ëngth
() const;

94 
šlše
 
UCh¬
 
	$ch¬At
(
št32_t
 
off£t
) const;

108 
šlše
 
UCh¬32
 
	$ch¬32At
(
št32_t
 
off£t
) const;

120 
vœtu®
 
	$exŒaùB‘w“n
(
št32_t
 
¡¬t
,

121 
št32_t
 
lim™
,

122 
UnicodeSŒšg
& 
rg‘
) const = 0;

144 
vœtu®
 
	`hªdËR•ÏûB‘w“n
(
št32_t
 
¡¬t
,

145 
št32_t
 
lim™
,

146 cÚ¡ 
UnicodeSŒšg
& 
‹xt
) = 0;

172 
vœtu®
 
	`cİy
(
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
, iÁ32_ˆ
de¡
) = 0;

183 
vœtu®
 
UBoŞ
 
	$hasM‘aD©a
() const;

200 
vœtu®
 
R•ÏûabË
 *
	$şÚe
() const;

202 
´Ùeùed
:

208 
	`R•ÏûabË
();

225 
vœtu®
 
št32_t
 
	$g‘L’gth
() const = 0;

231 
vœtu®
 
UCh¬
 
	$g‘Ch¬At
(
št32_t
 
off£t
) const = 0;

237 
vœtu®
 
UCh¬32
 
	$g‘Ch¬32At
(
št32_t
 
off£t
) const = 0;

240 
šlše
 
št32_t


241 
R•ÏûabË
::
	$Ëngth
() const {

242  
	`g‘L’gth
();

243 
	}
}

245 
šlše
 
UCh¬


246 
	gR•ÏûabË
::
	$ch¬At
(
št32_t
 
off£t
) const {

247  
	`g‘Ch¬At
(
off£t
);

248 
	}
}

250 
šlše
 
UCh¬32


251 
	gR•ÏûabË
::
	$ch¬32At
(
št32_t
 
off£t
) const {

252  
	`g‘Ch¬32At
(
off£t
);

253 
	}
}

257 
	gU_NAMESPACE_END


	@unicode/resbund.h

46 #iâdeà
RESBUND_H


47 
	#RESBUND_H


	)

49 
	~"unicode/uty³s.h
"

50 
	~"unicode/uobjeù.h
"

51 
	~"unicode/u»s.h
"

52 
	~"unicode/uni¡r.h
"

53 
	~"unicode/locid.h
"

60 
U_NAMESPACE_BEGIN


78 şas 
	cU_COMMON_API
 
	mResourûBundË
 : 
public
 
UObjeù
 {

79 
public
:

106 
ResourûBundË
(cÚ¡ 
UnicodeSŒšg
& 
·ckageName
,

107 cÚ¡ 
LoÿË
& 
loÿË
,

108 
UE¼ÜCode
& 
”r
);

121 
ResourûBundË
(cÚ¡ 
UnicodeSŒšg
& 
·ckageName
,

122 
UE¼ÜCode
& 
”r
);

130 
ResourûBundË
(
UE¼ÜCode
 &
”r
);

146 
ResourûBundË
(cÚ¡ * 
·ckageName
,

147 cÚ¡ 
LoÿË
& 
loÿË
,

148 
UE¼ÜCode
& 
”r
);

156 
ResourûBundË
(cÚ¡ ResourûBundË &
Üigš®
);

167 
ResourûBundË
(
UResourûBundË
 *
»s
,

168 
UE¼ÜCode
 &
¡©us
);

176 
	mResourûBundË
&

177 
	mİ”©Ü
=(cÚ¡ 
ResourûBundË
& 
Ùh”
);

182 
	mvœtu®
 ~
ResourûBundË
();

195 
ResourûBundË
 *
	$şÚe
() const;

207 
št32_t


208 
	$g‘Size
() const;

220 
UnicodeSŒšg


221 
	$g‘SŒšg
(
UE¼ÜCode
& 
¡©us
) const;

235 cÚ¡ 
ušt8_t
*

236 
	$g‘Bš¬y
(
št32_t
& 
Ën
, 
UE¼ÜCode
& 
¡©us
) const;

250 cÚ¡ 
št32_t
*

251 
	$g‘IÁVeùÜ
(
št32_t
& 
Ën
, 
UE¼ÜCode
& 
¡©us
) const;

264 
ušt32_t


265 
	$g‘UIÁ
(
UE¼ÜCode
& 
¡©us
) const;

278 
št32_t


279 
	$g‘IÁ
(
UE¼ÜCode
& 
¡©us
) const;

287 
UBoŞ


288 
	$hasNext
() const;

296 
	`»£tI‹¿tÜ
();

306 
	$g‘Key
() const;

316 
	$g‘Name
() const;

325 
UResTy³


326 
	$g‘Ty³
() const;

335 
ResourûBundË


336 
	`g‘Next
(
UE¼ÜCode
& 
¡©us
);

346 
UnicodeSŒšg


347 
	`g‘NextSŒšg
(
UE¼ÜCode
& 
¡©us
);

358 
UnicodeSŒšg


359 
	`g‘NextSŒšg
(cÚ¡ ** 
key
,

360 
UE¼ÜCode
& 
¡©us
);

370 
ResourûBundË


371 
	$g‘
(
št32_t
 
šdex
,

372 
UE¼ÜCode
& 
¡©us
) const;

382 
UnicodeSŒšg


383 
	$g‘SŒšgEx
(
št32_t
 
šdex
,

384 
UE¼ÜCode
& 
¡©us
) const;

395 
ResourûBundË


396 
	$g‘
(cÚ¡ * 
key
,

397 
UE¼ÜCode
& 
¡©us
) const;

408 
UnicodeSŒšg


409 
	$g‘SŒšgEx
(cÚ¡ * 
key
,

410 
UE¼ÜCode
& 
¡©us
) const;

422 
	$g‘V”siÚNumb”
() const;

432 
	$g‘V”siÚ
(
UV”siÚInfo
 
v”siÚInfo
) const;

440 cÚ¡ 
LoÿË
&

441 
	$g‘LoÿË
() const;

453 cÚ¡ 
LoÿË


454 
	$g‘LoÿË
(
ULocD©aLoÿËTy³
 
ty³
, 
UE¼ÜCode
 &
¡©us
) const;

459 
ResourûBundË


460 
	`g‘W™hF®lback
(cÚ¡ * 
key
, 
UE¼ÜCode
& 
¡©us
);

466 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

473 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

475 
´iv©e
:

476 
	`ResourûBundË
();

478 
UResourûBundË
 *
fResourû
;

479 
	`cÚ¡ruùFÜLoÿË
(cÚ¡ 
UnicodeSŒšg
& 
·th
, cÚ¡ 
LoÿË
& 
loÿË
, 
UE¼ÜCode
& 
”rÜ
);

480 
LoÿË
 *
fLoÿË
;

484 
U_NAMESPACE_END


	@unicode/schriter.h

18 #iâdeà
SCHRITER_H


19 
	#SCHRITER_H


	)

21 
	~"unicode/uty³s.h
"

22 
	~"unicode/ch¬™”.h
"

23 
	~"unicode/uchr™”.h
"

30 
U_NAMESPACE_BEGIN


43 şas 
	cU_COMMON_API
 
	mSŒšgCh¬aù”I‹¿tÜ
 : 
public
 
UCh¬Ch¬aù”I‹¿tÜ
 {

44 
public
:

52 
SŒšgCh¬aù”I‹¿tÜ
(cÚ¡ 
UnicodeSŒšg
& 
‹xtSŒ
);

63 
SŒšgCh¬aù”I‹¿tÜ
(cÚ¡ 
UnicodeSŒšg
& 
‹xtSŒ
,

64 
št32_t
 
‹xtPos
);

82 
SŒšgCh¬aù”I‹¿tÜ
(cÚ¡ 
UnicodeSŒšg
& 
‹xtSŒ
,

83 
št32_t
 
‹xtBegš
,

84 
št32_t
 
‹xtEnd
,

85 
št32_t
 
‹xtPos
);

95 
SŒšgCh¬aù”I‹¿tÜ
(cÚ¡ SŒšgCh¬aù”I‹¿tÜ& 
th©
);

101 
	mvœtu®
 ~
SŒšgCh¬aù”I‹¿tÜ
();

111 
	mSŒšgCh¬aù”I‹¿tÜ
&

112 
	mİ”©Ü
=(cÚ¡ 
SŒšgCh¬aù”I‹¿tÜ
& 
th©
);

122 
vœtu®
 
UBoŞ
 
	mİ”©Ü
==(cÚ¡ 
FÜw¬dCh¬aù”I‹¿tÜ
& 
th©
) const;

131 
vœtu®
 
Ch¬aù”I‹¿tÜ
* 
	$şÚe
() const;

138 
	`£tText
(cÚ¡ 
UnicodeSŒšg
& 
ÃwText
);

147 
vœtu®
 
	`g‘Text
(
UnicodeSŒšg
& 
»suÉ
);

154 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

161 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

163 
´Ùeùed
:

168 
	`SŒšgCh¬aù”I‹¿tÜ
();

176 
	`£tText
(cÚ¡ 
UCh¬
* 
ÃwText
, 
št32_t
 
ÃwTextL’gth
);

182 
UnicodeSŒšg
 
‹xt
;

186 
U_NAMESPACE_END


	@unicode/std_string.h

17 #iâdeà
__STD_STRING_H__


18 
	#__STD_STRING_H__


	)

26 
	~"unicode/uty³s.h
"

33 #iâdeà
U_HAVE_STD_STRING


34 
	#U_HAVE_STD_STRING
 1

	)

37 #ià
U_HAVE_STD_STRING


39 
	~<¡ršg
>

64 #iâdeà
U_STD_NSQ


65 #ià
U_HAVE_NAMESPACE


66 
	#U_STD_NS
 
¡d


	)

67 
	#U_STD_NSQ
 
U_STD_NS
::

	)

68 
	#U_STD_NS_USE
 
usšg
 
Çme¥aû
 
U_STD_NS
;

	)

70 
	#U_STD_NS


	)

71 
	#U_STD_NSQ


	)

72 
	#U_STD_NS_USE


	)

	@unicode/strenum.h

10 #iâdeà
STRENUM_H


11 
	#STRENUM_H


	)

13 
	~"unicode/uobjeù.h
"

14 
	~"unicode/uni¡r.h
"

21 
U_NAMESPACE_BEGIN


55 şas 
	cU_COMMON_API
 
	mSŒšgEnum”©iÚ
 : 
public
 
UObjeù
 {

56 
public
:

61 
vœtu®
 ~
SŒšgEnum”©iÚ
();

78 
vœtu®
 
SŒšgEnum”©iÚ
 *
	$şÚe
() const;

97 
vœtu®
 
št32_t
 
	$couÁ
(
UE¼ÜCode
& 
¡©us
) const = 0;

128 
vœtu®
 cÚ¡ * 
	`Ãxt
(
št32_t
 *
»suÉL’gth
, 
UE¼ÜCode
& 
¡©us
);

153 
vœtu®
 cÚ¡ 
UCh¬
* 
	`uÃxt
(
št32_t
 *
»suÉL’gth
, 
UE¼ÜCode
& 
¡©us
);

171 
vœtu®
 cÚ¡ 
UnicodeSŒšg
* 
	`¢ext
(
UE¼ÜCode
& 
¡©us
) = 0;

185 
vœtu®
 
	`»£t
(
UE¼ÜCode
& 
¡©us
) = 0;

194 
vœtu®
 
UBoŞ
 
İ”©Ü
==(cÚ¡ 
SŒšgEnum”©iÚ
& 
th©
)const;

202 
vœtu®
 
UBoŞ
 
İ”©Ü
!=(cÚ¡ 
SŒšgEnum”©iÚ
& 
th©
)const;

204 
´Ùeùed
:

209 
UnicodeSŒšg
 
uni¡r
;

214 
ch¬sBufãr
[32];

220 *
ch¬s
;

225 
št32_t
 
ch¬sC­ac™y
;

231 
	`SŒšgEnum”©iÚ
();

241 
	`’su»Ch¬sC­ac™y
(
št32_t
 
ÿ·c™y
, 
UE¼ÜCode
 &
¡©us
);

265 
UnicodeSŒšg
 *
	`£tCh¬s
(cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 &
¡©us
);

268 
U_NAMESPACE_END


	@unicode/stringpiece.h

20 #iâdeà
__STRINGPIECE_H__


21 
	#__STRINGPIECE_H__


	)

28 
	~"unicode/uty³s.h
"

29 
	~"unicode/uobjeù.h
"

30 
	~"unicode/¡d_¡ršg.h
"

34 
U_NAMESPACE_BEGIN


52 şas 
	cU_COMMON_API
 
	mSŒšgP›û
 : 
public
 
UMemÜy
 {

53 
´iv©e
:

54 cÚ¡ * 
±r_
;

55 
št32_t
 
	mËngth_
;

57 
	mpublic
:

62 
	$SŒšgP›û
(è: 
	`±r_
(
NULL
), 
	$Ëngth_
(0) { }

68 
	`SŒšgP›û
(cÚ¡ * 
¡r
);

69 #ià
U_HAVE_STD_STRING


74 
	$SŒšgP›û
(cÚ¡ 
U_STD_NSQ
 
¡ršg
& 
¡r
)

75 : 
	`±r_
(
¡r
.
	`d©a
()), 
	`Ëngth_
(
¡©ic_ÿ¡
<
št32_t
>(¡r.
	$size
())è{ 
	}
}

83 
	$SŒšgP›û
(cÚ¡ * 
off£t
, 
št32_t
 
Ën
è: 
	`±r_
(off£t), 
	$Ëngth_
(
Ën
è{ 
	}
}

90 
SŒšgP›û
(cÚ¡ SŒšgP›û& 
x
, 
št32_t
 
pos
);

99 
SŒšgP›û
(cÚ¡ SŒšgP›û& 
x
, 
št32_t
 
pos
, iÁ32_ˆ
Ën
);

111 cÚ¡ * 
	$d©a
(ècÚ¡ {  
±r_
; 
	}
}

117 
št32_t
 
	$size
(ècÚ¡ {  
Ëngth_
; 
	}
}

123 
št32_t
 
	$Ëngth
(ècÚ¡ {  
Ëngth_
; 
	}
}

129 
UBoŞ
 
	$em±y
(ècÚ¡ {  
Ëngth_
 =ğ0; 
	}
}

135 
	$ş—r
(è{ 
±r_
 = 
NULL
; 
Ëngth_
 = 0; 
	}
}

143 
	$£t
(cÚ¡ * 
d©a
, 
št32_t
 
Ën
è{ 
±r_
 = d©a; 
Ëngth_
 =†’; 
	}
}

150 
£t
(cÚ¡ * 
¡r
);

157 
	$»move_´efix
(
št32_t
 
n
) {

158 ià(
n
 >= 0) {

159 ià(
n
 > 
Ëngth_
) {

160 
n
 = 
Ëngth_
;

162 
±r_
 +ğ
n
;

163 
Ëngth_
 -ğ
n
;

165 
	}
}

172 
	$»move_suffix
(
št32_t
 
n
) {

173 ià(
n
 >= 0) {

174 ià(
n
 <ğ
Ëngth_
) {

175 
Ëngth_
 -ğ
n
;

177 
Ëngth_
 = 0;

180 
	}
}

186 cÚ¡ 
št32_t
 
	gÅos
 = 0x7fffffff;

196 
SŒšgP›û
 
	$sub¡r
(
št32_t
 
pos
, iÁ32_ˆ
Ën
 = 
Åos
) const {

197  
	`SŒšgP›û
(*
this
, 
pos
, 
Ën
);

198 
	}
}

208 
U_EXPORT
 
UBoŞ
 
U_EXPORT2


209 
	gİ”©Ü
==(cÚ¡ 
SŒšgP›û
& 
x
, cÚ¡ 
	gSŒšgP›û
& 
	gy
);

218 
šlše
 
UBoŞ
 
	gİ”©Ü
!=(cÚ¡ 
SŒšgP›û
& 
x
, cÚ¡ 
	gSŒšgP›û
& 
	gy
) {

219  !(
	gx
 =ğ
y
);

222 
	gU_NAMESPACE_END


	@unicode/symtable.h

10 #iâdeà
SYMTABLE_H


11 
	#SYMTABLE_H


	)

13 
	~"unicode/uty³s.h
"

14 
	~"unicode/uobjeù.h
"

22 
U_NAMESPACE_BEGIN


24 
şass
 
	gP¬£Pos™iÚ
;

25 
şass
 
	gUnicodeFunùÜ
;

26 
şass
 
	gUnicodeS‘
;

27 
şass
 
	gUnicodeSŒšg
;

54 şas 
	cU_COMMON_API
 
	mSymbŞTabË
 {

55 
	mpublic
:

61 ’um { 
SYMBOL_REF
 = 0x0024 };

67 
	gvœtu®
 ~
SymbŞTabË
();

78 
vœtu®
 cÚ¡ 
UnicodeSŒšg
* 
	$lookup
(cÚ¡ 
UnicodeSŒšg
& 
s
) const = 0;

88 
vœtu®
 cÚ¡ 
UnicodeFunùÜ
* 
	$lookupM©ch”
(
UCh¬32
 
ch
) const = 0;

107 
vœtu®
 
UnicodeSŒšg
 
	$·r£Reã»nû
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

108 
P¬£Pos™iÚ
& 
pos
, 
št32_t
 
lim™
) const = 0;

109 
	}
};

110 
	gU_NAMESPACE_END


	@unicode/ubidi.h

17 #iâdeà
UBIDI_H


18 
	#UBIDI_H


	)

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/uch¬.h
"

22 
	~"unicode/loÿÍoš‹r.h
"

330 
ušt8_t
 
	tUBiDiLev–
;

356 
	#UBIDI_DEFAULT_LTR
 0xã

	)

383 
	#UBIDI_DEFAULT_RTL
 0xff

	)

390 
	#UBIDI_MAX_EXPLICIT_LEVEL
 61

	)

396 
	#UBIDI_LEVEL_OVERRIDE
 0x80

	)

411 
	#UBIDI_MAP_NOWHERE
 (-1)

	)

417 
	eUBiDiDœeùiÚ
 {

429 
	mUBIDI_LTR
,

441 
	mUBIDI_RTL
,

448 
	mUBIDI_MIXED
,

455 
	mUBIDI_NEUTRAL


459 
UBiDiDœeùiÚ
 
	tUBiDiDœeùiÚ
;

471 
	gUBiDi
;

474 
UBiDi
 
	tUBiDi
;

491 
U_STABLE
 
UBiDi
 * 
U_EXPORT2


492 
ubidi_İ’
();

528 
U_STABLE
 
UBiDi
 * 
U_EXPORT2


529 
ubidi_İ’Sized
(
št32_t
 
maxL’gth
, iÁ32_ˆ
maxRunCouÁ
, 
UE¼ÜCode
 *
pE¼ÜCode
);

551 
U_STABLE
 
U_EXPORT2


552 
ubidi_şo£
(
UBiDi
 *
pBiDi
);

554 #ià
U_SHOW_CPLUSPLUS_API


556 
U_NAMESPACE_BEGIN


567 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUBiDiPoš‹r
, 
UBiDi
, 
ubidi_şo£
);

569 
	gU_NAMESPACE_END


621 
U_STABLE
 
U_EXPORT2


622 
ubidi_£tInv”£
(
UBiDi
 *
pBiDi
, 
UBoŞ
 
isInv”£
);

640 
U_STABLE
 
UBoŞ
 
U_EXPORT2


641 
ubidi_isInv”£
(
UBiDi
 *
pBiDi
);

663 
U_STABLE
 
U_EXPORT2


664 
ubidi_Üd”P¬ag¿phsLTR
(
UBiDi
 *
pBiDi
, 
UBoŞ
 
Üd”P¬ag¿phsLTR
);

677 
U_STABLE
 
UBoŞ
 
U_EXPORT2


678 
ubidi_isOrd”P¬ag¿phsLTR
(
UBiDi
 *
pBiDi
);

687 
	eUBiDiReÜd”šgMode
 {

691 
	mUBIDI_REORDER_DEFAULT
 = 0,

695 
	mUBIDI_REORDER_NUMBERS_SPECIAL
,

699 
	mUBIDI_REORDER_GROUP_NUMBERS_WITH_R
,

707 
	mUBIDI_REORDER_RUNS_ONLY
,

712 
	mUBIDI_REORDER_INVERSE_NUMBERS_AS_L
,

716 
	mUBIDI_REORDER_INVERSE_LIKE_DIRECT
,

720 
	mUBIDI_REORDER_INVERSE_FOR_NUMBERS_SPECIAL
,

723 
	mUBIDI_REORDER_COUNT


724 } 
	tUBiDiReÜd”šgMode
;

877 
U_STABLE
 
U_EXPORT2


878 
ubidi_£tReÜd”šgMode
(
UBiDi
 *
pBiDi
, 
UBiDiReÜd”šgMode
 
»Üd”šgMode
);

888 
U_STABLE
 
UBiDiReÜd”šgMode
 
U_EXPORT2


889 
ubidi_g‘ReÜd”šgMode
(
UBiDi
 *
pBiDi
);

898 
	eUBiDiReÜd”šgO±iÚ
 {

905 
	mUBIDI_OPTION_DEFAULT
 = 0,

951 
	mUBIDI_OPTION_INSERT_MARKS
 = 1,

969 
	mUBIDI_OPTION_REMOVE_CONTROLS
 = 2,

1017 
	mUBIDI_OPTION_STREAMING
 = 4

1018 } 
	tUBiDiReÜd”šgO±iÚ
;

1033 
U_STABLE
 
U_EXPORT2


1034 
ubidi_£tReÜd”šgO±iÚs
(
UBiDi
 *
pBiDi
, 
ušt32_t
 
»Üd”šgO±iÚs
);

1044 
U_STABLE
 
ušt32_t
 
U_EXPORT2


1045 
ubidi_g‘ReÜd”šgO±iÚs
(
UBiDi
 *
pBiDi
);

1126 
U_STABLE
 
U_EXPORT2


1127 
ubidi_£tP¬a
(
UBiDi
 *
pBiDi
, cÚ¡ 
UCh¬
 *
‹xt
, 
št32_t
 
Ëngth
,

1128 
UBiDiLev–
 
·¿Lev–
, UBiDiLev– *
embeddšgLev–s
,

1129 
UE¼ÜCode
 *
pE¼ÜCode
);

1177 
U_STABLE
 
U_EXPORT2


1178 
ubidi_£tLše
(cÚ¡ 
UBiDi
 *
pP¬aBiDi
,

1179 
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
,

1180 
UBiDi
 *
pLšeBiDi
,

1181 
UE¼ÜCode
 *
pE¼ÜCode
);

1198 
U_STABLE
 
UBiDiDœeùiÚ
 
U_EXPORT2


1199 
ubidi_g‘DœeùiÚ
(cÚ¡ 
UBiDi
 *
pBiDi
);

1228 
U_DRAFT
 
UBiDiDœeùiÚ
 
U_EXPORT2


1229 
ubidi_g‘Ba£DœeùiÚ
(cÚ¡ 
UCh¬
 *
‹xt
, 
št32_t
 
Ëngth
 );

1242 
U_STABLE
 cÚ¡ 
UCh¬
 * 
U_EXPORT2


1243 
ubidi_g‘Text
(cÚ¡ 
UBiDi
 *
pBiDi
);

1253 
U_STABLE
 
št32_t
 
U_EXPORT2


1254 
ubidi_g‘L’gth
(cÚ¡ 
UBiDi
 *
pBiDi
);

1271 
U_STABLE
 
UBiDiLev–
 
U_EXPORT2


1272 
ubidi_g‘P¬aLev–
(cÚ¡ 
UBiDi
 *
pBiDi
);

1282 
U_STABLE
 
št32_t
 
U_EXPORT2


1283 
ubidi_couÁP¬ag¿phs
(
UBiDi
 *
pBiDi
);

1319 
U_STABLE
 
št32_t
 
U_EXPORT2


1320 
ubidi_g‘P¬ag¿ph
(cÚ¡ 
UBiDi
 *
pBiDi
, 
št32_t
 
ch¬Index
, iÁ32_ˆ*
pP¬aS¹
,

1321 
št32_t
 *
pP¬aLim™
, 
UBiDiLev–
 *
pP¬aLev–
,

1322 
UE¼ÜCode
 *
pE¼ÜCode
);

1351 
U_STABLE
 
U_EXPORT2


1352 
ubidi_g‘P¬ag¿phByIndex
(cÚ¡ 
UBiDi
 *
pBiDi
, 
št32_t
 
·¿Index
,

1353 
št32_t
 *
pP¬aS¹
, iÁ32_ˆ*
pP¬aLim™
,

1354 
UBiDiLev–
 *
pP¬aLev–
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1371 
U_STABLE
 
UBiDiLev–
 
U_EXPORT2


1372 
ubidi_g‘Lev–At
(cÚ¡ 
UBiDi
 *
pBiDi
, 
št32_t
 
ch¬Index
);

1392 
U_STABLE
 cÚ¡ 
UBiDiLev–
 * 
U_EXPORT2


1393 
ubidi_g‘Lev–s
(
UBiDi
 *
pBiDi
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1419 
U_STABLE
 
U_EXPORT2


1420 
ubidi_g‘LogiÿlRun
(cÚ¡ 
UBiDi
 *
pBiDi
, 
št32_t
 
logiÿlPos™iÚ
,

1421 
št32_t
 *
pLogiÿlLim™
, 
UBiDiLev–
 *
pLev–
);

1438 
U_STABLE
 
št32_t
 
U_EXPORT2


1439 
ubidi_couÁRuns
(
UBiDi
 *
pBiDi
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1497 
U_STABLE
 
UBiDiDœeùiÚ
 
U_EXPORT2


1498 
ubidi_g‘Visu®Run
(
UBiDi
 *
pBiDi
, 
št32_t
 
runIndex
,

1499 
št32_t
 *
pLogiÿlS¹
, iÁ32_ˆ*
pL’gth
);

1538 
U_STABLE
 
št32_t
 
U_EXPORT2


1539 
ubidi_g‘Visu®Index
(
UBiDi
 *
pBiDi
, 
št32_t
 
logiÿlIndex
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1573 
U_STABLE
 
št32_t
 
U_EXPORT2


1574 
ubidi_g‘LogiÿlIndex
(
UBiDi
 *
pBiDi
, 
št32_t
 
visu®Index
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1616 
U_STABLE
 
U_EXPORT2


1617 
ubidi_g‘LogiÿlM­
(
UBiDi
 *
pBiDi
, 
št32_t
 *
šdexM­
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1652 
U_STABLE
 
U_EXPORT2


1653 
ubidi_g‘Visu®M­
(
UBiDi
 *
pBiDi
, 
št32_t
 *
šdexM­
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1675 
U_STABLE
 
U_EXPORT2


1676 
ubidi_»Üd”Logiÿl
(cÚ¡ 
UBiDiLev–
 *
Ëv–s
, 
št32_t
 
Ëngth
, iÁ32_ˆ*
šdexM­
);

1698 
U_STABLE
 
U_EXPORT2


1699 
ubidi_»Üd”Visu®
(cÚ¡ 
UBiDiLev–
 *
Ëv–s
, 
št32_t
 
Ëngth
, iÁ32_ˆ*
šdexM­
);

1733 
U_STABLE
 
U_EXPORT2


1734 
ubidi_šv”tM­
(cÚ¡ 
št32_t
 *
¤cM­
, iÁ32_ˆ*
de¡M­
, iÁ32_ˆ
Ëngth
);

1745 
	#UBIDI_KEEP_BASE_COMBINING
 1

	)

1755 
	#UBIDI_DO_MIRRORING
 2

	)

1769 
	#UBIDI_INSERT_LRM_FOR_NUMERIC
 4

	)

1782 
	#UBIDI_REMOVE_BIDI_CONTROLS
 8

	)

1798 
	#UBIDI_OUTPUT_REVERSE
 16

	)

1838 
U_STABLE
 
št32_t
 
U_EXPORT2


1839 
ubidi_g‘Proûs£dL’gth
(cÚ¡ 
UBiDi
 *
pBiDi
);

1868 
U_STABLE
 
št32_t
 
U_EXPORT2


1869 
ubidi_g‘ResuÉL’gth
(cÚ¡ 
UBiDi
 *
pBiDi
);

1871 
	gU_CDECL_BEGIN


1878 
	#U_BIDI_CLASS_DEFAULT
 
U_CHAR_DIRECTION_COUNT


	)

1900 
UCh¬DœeùiÚ
 
	tU_CALLCONV


1901 
	tUBiDiCÏssC®lback
(cÚ¡ *
	tcÚ‹xt
, 
	tUCh¬32
 
	tc
);

1903 
U_CDECL_END


1920 
U_STABLE
 
UCh¬DœeùiÚ
 
U_EXPORT2


1921 
ubidi_g‘Cu¡omizedCÏss
(
UBiDi
 *
pBiDi
, 
UCh¬32
 
c
);

1950 
U_STABLE
 
U_EXPORT2


1951 
ubidi_£tCÏssC®lback
(
UBiDi
 *
pBiDi
, 
UBiDiCÏssC®lback
 *
ÃwFn
,

1952 cÚ¡ *
ÃwCÚ‹xt
, 
UBiDiCÏssC®lback
 **
ŞdFn
,

1953 cÚ¡ **
ŞdCÚ‹xt
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1967 
U_STABLE
 
U_EXPORT2


1968 
ubidi_g‘CÏssC®lback
(
UBiDi
 *
pBiDi
, 
UBiDiCÏssC®lback
 **
â
, cÚ¡ **
cÚ‹xt
);

2035 
U_STABLE
 
št32_t
 
U_EXPORT2


2036 
ubidi_wr™eReÜd”ed
(
UBiDi
 *
pBiDi
,

2037 
UCh¬
 *
de¡
, 
št32_t
 
de¡Size
,

2038 
ušt16_t
 
İtiÚs
,

2039 
UE¼ÜCode
 *
pE¼ÜCode
);

2087 
U_STABLE
 
št32_t
 
U_EXPORT2


2088 
ubidi_wr™eRev”£
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

2089 
UCh¬
 *
de¡
, 
št32_t
 
de¡Size
,

2090 
ušt16_t
 
İtiÚs
,

2091 
UE¼ÜCode
 *
pE¼ÜCode
);

	@unicode/ubrk.h

8 #iâdeà
UBRK_H


9 
	#UBRK_H


	)

11 
	~"unicode/uty³s.h
"

12 
	~"unicode/uloc.h
"

13 
	~"unicode/u‹xt.h
"

14 
	~"unicode/loÿÍoš‹r.h
"

20 #iâdeà
UBRK_TYPEDEF_UBREAK_ITERATOR


21 
	#UBRK_TYPEDEF_UBREAK_ITERATOR


	)

26 
UB»akI‹¿tÜ
 
	tUB»akI‹¿tÜ
;

29 #ià!
UCONFIG_NO_BREAK_ITERATION


31 
	~"unicode/·r£”r.h
"

87 
	eUB»akI‹¿tÜTy³
 {

89 
	mUBRK_CHARACTER
 = 0,

91 
	mUBRK_WORD
 = 1,

93 
	mUBRK_LINE
 = 2,

95 
	mUBRK_SENTENCE
 = 3,

97 #iâdeà
U_HIDE_DEPRECATED_API


106 
	mUBRK_TITLE
 = 4,

108 
	mUBRK_COUNT
 = 5

109 } 
	tUB»akI‹¿tÜTy³
;

114 
	#UBRK_DONE
 ((
št32_t
è-1)

	)

125 
	eUWÜdB»ak
 {

128 
	mUBRK_WORD_NONE
 = 0,

130 
	mUBRK_WORD_NONE_LIMIT
 = 100,

132 
	mUBRK_WORD_NUMBER
 = 100,

134 
	mUBRK_WORD_NUMBER_LIMIT
 = 200,

137 
	mUBRK_WORD_LETTER
 = 200,

139 
	mUBRK_WORD_LETTER_LIMIT
 = 300,

141 
	mUBRK_WORD_KANA
 = 300,

143 
	mUBRK_WORD_KANA_LIMIT
 = 400,

145 
	mUBRK_WORD_IDEO
 = 400,

147 
	mUBRK_WORD_IDEO_LIMIT
 = 500

148 } 
	tUWÜdB»ak
;

158 
	eULšeB»akTag
 {

161 
	mUBRK_LINE_SOFT
 = 0,

163 
	mUBRK_LINE_SOFT_LIMIT
 = 100,

165 
	mUBRK_LINE_HARD
 = 100,

167 
	mUBRK_LINE_HARD_LIMIT
 = 200

168 } 
	tULšeB»akTag
;

180 
	eUS’‹nûB»akTag
 {

185 
	mUBRK_SENTENCE_TERM
 = 0,

187 
	mUBRK_SENTENCE_TERM_LIMIT
 = 100,

192 
	mUBRK_SENTENCE_SEP
 = 100,

194 
	mUBRK_SENTENCE_SEP_LIMIT
 = 200

196 } 
	tUS’‹nûB»akTag
;

213 
U_STABLE
 
UB»akI‹¿tÜ
* 
U_EXPORT2


214 
ubrk_İ’
(
UB»akI‹¿tÜTy³
 
ty³
,

215 cÚ¡ *
loÿË
,

216 cÚ¡ 
UCh¬
 *
‹xt
,

217 
št32_t
 
‹xtL’gth
,

218 
UE¼ÜCode
 *
¡©us
);

235 
U_STABLE
 
UB»akI‹¿tÜ
* 
U_EXPORT2


236 
ubrk_İ’RuËs
(cÚ¡ 
UCh¬
 *
ruËs
,

237 
št32_t
 
ruËsL’gth
,

238 cÚ¡ 
UCh¬
 *
‹xt
,

239 
št32_t
 
‹xtL’gth
,

240 
UP¬£E¼Ü
 *
·r£E¼
,

241 
UE¼ÜCode
 *
¡©us
);

259 
U_STABLE
 
UB»akI‹¿tÜ
 * 
U_EXPORT2


260 
ubrk_§ãClÚe
(

261 cÚ¡ 
UB»akI‹¿tÜ
 *
bi
,

262 *
¡ackBufãr
,

263 
št32_t
 *
pBufãrSize
,

264 
UE¼ÜCode
 *
¡©us
);

270 
	#U_BRK_SAFECLONE_BUFFERSIZE
 512

	)

278 
U_STABLE
 
U_EXPORT2


279 
ubrk_şo£
(
UB»akI‹¿tÜ
 *
bi
);

281 #ià
U_SHOW_CPLUSPLUS_API


283 
U_NAMESPACE_BEGIN


294 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUB»akI‹¿tÜPoš‹r
, 
UB»akI‹¿tÜ
, 
ubrk_şo£
);

296 
	gU_NAMESPACE_END


308 
U_STABLE
 
U_EXPORT2


309 
ubrk_£tText
(
UB»akI‹¿tÜ
* 
bi
,

310 cÚ¡ 
UCh¬
* 
‹xt
,

311 
št32_t
 
‹xtL’gth
,

312 
UE¼ÜCode
* 
¡©us
);

326 
U_STABLE
 
U_EXPORT2


327 
ubrk_£tUText
(
UB»akI‹¿tÜ
* 
bi
,

328 
UText
* 
‹xt
,

329 
UE¼ÜCode
* 
¡©us
);

341 
U_STABLE
 
št32_t
 
U_EXPORT2


342 
ubrk_cu¼’t
(cÚ¡ 
UB»akI‹¿tÜ
 *
bi
);

353 
U_STABLE
 
št32_t
 
U_EXPORT2


354 
ubrk_Ãxt
(
UB»akI‹¿tÜ
 *
bi
);

365 
U_STABLE
 
št32_t
 
U_EXPORT2


366 
ubrk_´evious
(
UB»akI‹¿tÜ
 *
bi
);

376 
U_STABLE
 
št32_t
 
U_EXPORT2


377 
ubrk_fœ¡
(
UB»akI‹¿tÜ
 *
bi
);

389 
U_STABLE
 
št32_t
 
U_EXPORT2


390 
ubrk_Ï¡
(
UB»akI‹¿tÜ
 *
bi
);

401 
U_STABLE
 
št32_t
 
U_EXPORT2


402 
ubrk_´eûdšg
(
UB»akI‹¿tÜ
 *
bi
,

403 
št32_t
 
off£t
);

414 
U_STABLE
 
št32_t
 
U_EXPORT2


415 
ubrk_fŞlowšg
(
UB»akI‹¿tÜ
 *
bi
,

416 
št32_t
 
off£t
);

427 
U_STABLE
 cÚ¡ * 
U_EXPORT2


428 
ubrk_g‘AvaabË
(
št32_t
 
šdex
);

438 
U_STABLE
 
št32_t
 
U_EXPORT2


439 
ubrk_couÁAvaabË
();

451 
U_STABLE
 
UBoŞ
 
U_EXPORT2


452 
ubrk_isBound¬y
(
UB»akI‹¿tÜ
 *
bi
, 
št32_t
 
off£t
);

463 
U_STABLE
 
št32_t
 
U_EXPORT2


464 
ubrk_g‘RuËStus
(
UB»akI‹¿tÜ
 *
bi
);

483 
U_STABLE
 
št32_t
 
U_EXPORT2


484 
ubrk_g‘RuËStusVec
(
UB»akI‹¿tÜ
 *
bi
, 
št32_t
 *
flInVec
, iÁ32_ˆ
ÿ·c™y
, 
UE¼ÜCode
 *
¡©us
);

495 
U_STABLE
 cÚ¡ * 
U_EXPORT2


496 
ubrk_g‘LoÿËByTy³
(cÚ¡ 
UB»akI‹¿tÜ
 *
bi
, 
ULocD©aLoÿËTy³
 
ty³
, 
UE¼ÜCode
* 
¡©us
);

	@unicode/ucasemap.h

19 #iâdeà
__UCASEMAP_H__


20 
	#__UCASEMAP_H__


	)

22 
	~"unicode/uty³s.h
"

23 
	~"unicode/u¡ršg.h
"

24 
	~"unicode/loÿÍoš‹r.h
"

44 
	gUCa£M­
;

45 
UCa£M­
 
	tUCa£M­
;

69 
U_STABLE
 
UCa£M­
 * 
U_EXPORT2


70 
uÿ£m­_İ’
(cÚ¡ *
loÿË
, 
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 *
pE¼ÜCode
);

77 
U_STABLE
 
U_EXPORT2


78 
uÿ£m­_şo£
(
UCa£M­
 *
csm
);

80 #ià
U_SHOW_CPLUSPLUS_API


82 
U_NAMESPACE_BEGIN


93 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUCa£M­Poš‹r
, 
UCa£M­
, 
uÿ£m­_şo£
);

95 
	gU_NAMESPACE_END


105 
U_STABLE
 cÚ¡ * 
U_EXPORT2


106 
uÿ£m­_g‘LoÿË
(cÚ¡ 
UCa£M­
 *
csm
);

114 
U_STABLE
 
ušt32_t
 
U_EXPORT2


115 
uÿ£m­_g‘O±iÚs
(cÚ¡ 
UCa£M­
 *
csm
);

128 
U_STABLE
 
U_EXPORT2


129 
uÿ£m­_£tLoÿË
(
UCa£M­
 *
csm
, cÚ¡ *
loÿË
, 
UE¼ÜCode
 *
pE¼ÜCode
);

142 
U_STABLE
 
U_EXPORT2


143 
uÿ£m­_£tO±iÚs
(
UCa£M­
 *
csm
, 
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 *
pE¼ÜCode
);

159 
	#U_TITLECASE_NO_LOWERCASE
 0x100

	)

184 
	#U_TITLECASE_NO_BREAK_ADJUSTMENT
 0x200

	)

186 #ià!
UCONFIG_NO_BREAK_ITERATION


195 
U_STABLE
 cÚ¡ 
UB»akI‹¿tÜ
 * 
U_EXPORT2


196 
uÿ£m­_g‘B»akI‹¿tÜ
(cÚ¡ 
UCa£M­
 *
csm
);

218 
U_STABLE
 
U_EXPORT2


219 
uÿ£m­_£tB»akI‹¿tÜ
(
UCa£M­
 *
csm
, 
UB»akI‹¿tÜ
 *
™”ToAdİt
, 
UE¼ÜCode
 *
pE¼ÜCode
);

267 
U_STABLE
 
št32_t
 
U_EXPORT2


268 
uÿ£m­_toT™Ë
(
UCa£M­
 *
csm
,

269 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

270 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

271 
UE¼ÜCode
 *
pE¼ÜCode
);

298 
U_STABLE
 
št32_t
 
U_EXPORT2


299 
uÿ£m­_utf8ToLow”
(cÚ¡ 
UCa£M­
 *
csm
,

300 *
de¡
, 
št32_t
 
de¡C­ac™y
,

301 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

302 
UE¼ÜCode
 *
pE¼ÜCode
);

327 
U_STABLE
 
št32_t
 
U_EXPORT2


328 
uÿ£m­_utf8ToUµ”
(cÚ¡ 
UCa£M­
 *
csm
,

329 *
de¡
, 
št32_t
 
de¡C­ac™y
,

330 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

331 
UE¼ÜCode
 *
pE¼ÜCode
);

333 #ià!
UCONFIG_NO_BREAK_ITERATION


379 
U_STABLE
 
št32_t
 
U_EXPORT2


380 
uÿ£m­_utf8ToT™Ë
(
UCa£M­
 *
csm
,

381 *
de¡
, 
št32_t
 
de¡C­ac™y
,

382 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

383 
UE¼ÜCode
 *
pE¼ÜCode
);

415 
U_STABLE
 
št32_t
 
U_EXPORT2


416 
uÿ£m­_utf8FŞdCa£
(cÚ¡ 
UCa£M­
 *
csm
,

417 *
de¡
, 
št32_t
 
de¡C­ac™y
,

418 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

419 
UE¼ÜCode
 *
pE¼ÜCode
);

	@unicode/ucat.h

11 #iâdeà
UCAT_H


12 
	#UCAT_H


	)

14 
	~"unicode/uty³s.h
"

15 
	~"unicode/u»s.h
"

64 
U_CDECL_BEGIN


71 
UResourûBundË
* 
	tu_Æ_ÿtd
;

104 
U_STABLE
 
u_Æ_ÿtd
 
U_EXPORT2


105 
u_ÿtİ’
(cÚ¡ * 
Çme
, cÚ¡ * 
loÿË
, 
UE¼ÜCode
* 
ec
);

115 
U_STABLE
 
U_EXPORT2


116 
u_ÿtşo£
(
u_Æ_ÿtd
 
ÿtd
);

150 
U_STABLE
 cÚ¡ 
UCh¬
* 
U_EXPORT2


151 
u_ÿtg‘s
(
u_Æ_ÿtd
 
ÿtd
, 
št32_t
 
£t_num
, iÁ32_ˆ
msg_num
,

152 cÚ¡ 
UCh¬
* 
s
,

153 
št32_t
* 
Ën
, 
UE¼ÜCode
* 
ec
);

155 
	gU_CDECL_END


	@unicode/uchar.h

23 #iâdeà
UCHAR_H


24 
	#UCHAR_H


	)

26 
	~"unicode/uty³s.h
"

28 
	gU_CDECL_BEGIN


42 
	#U_UNICODE_VERSION
 "6.0"

	)

124 
	#UCHAR_MIN_VALUE
 0

	)

134 
	#UCHAR_MAX_VALUE
 0x10ffff

	)

140 
	#U_MASK
(
x
è((
ušt32_t
)1<<(x))

	)

174 
	eUPrİ”ty
 {

186 
	mUCHAR_ALPHABETIC
=0,

188 
	mUCHAR_BINARY_START
=
UCHAR_ALPHABETIC
,

190 
	mUCHAR_ASCII_HEX_DIGIT
=1,

194 
	mUCHAR_BIDI_CONTROL
=2,

199 
	mUCHAR_BIDI_MIRRORED
=3,

201 
	mUCHAR_DASH
=4,

205 
	mUCHAR_DEFAULT_IGNORABLE_CODE_POINT
=5,

208 
	mUCHAR_DEPRECATED
=6,

211 
	mUCHAR_DIACRITIC
=7,

215 
	mUCHAR_EXTENDER
=8,

219 
	mUCHAR_FULL_COMPOSITION_EXCLUSION
=9,

223 
	mUCHAR_GRAPHEME_BASE
=10,

227 
	mUCHAR_GRAPHEME_EXTEND
=11,

230 
	mUCHAR_GRAPHEME_LINK
=12,

233 
	mUCHAR_HEX_DIGIT
=13,

236 
	mUCHAR_HYPHEN
=14,

241 
	mUCHAR_ID_CONTINUE
=15,

245 
	mUCHAR_ID_START
=16,

248 
	mUCHAR_IDEOGRAPHIC
=17,

252 
	mUCHAR_IDS_BINARY_OPERATOR
=18,

256 
	mUCHAR_IDS_TRINARY_OPERATOR
=19,

259 
	mUCHAR_JOIN_CONTROL
=20,

263 
	mUCHAR_LOGICAL_ORDER_EXCEPTION
=21,

266 
	mUCHAR_LOWERCASE
=22,

268 
	mUCHAR_MATH
=23,

272 
	mUCHAR_NONCHARACTER_CODE_POINT
=24,

274 
	mUCHAR_QUOTATION_MARK
=25,

278 
	mUCHAR_RADICAL
=26,

283 
	mUCHAR_SOFT_DOTTED
=27,

287 
	mUCHAR_TERMINAL_PUNCTUATION
=28,

291 
	mUCHAR_UNIFIED_IDEOGRAPH
=29,

294 
	mUCHAR_UPPERCASE
=30,

298 
	mUCHAR_WHITE_SPACE
=31,

302 
	mUCHAR_XID_CONTINUE
=32,

305 
	mUCHAR_XID_START
=33,

309 
	mUCHAR_CASE_SENSITIVE
=34,

314 
	mUCHAR_S_TERM
=35,

320 
	mUCHAR_VARIATION_SELECTOR
=36,

327 
	mUCHAR_NFD_INERT
=37,

334 
	mUCHAR_NFKD_INERT
=38,

341 
	mUCHAR_NFC_INERT
=39,

348 
	mUCHAR_NFKC_INERT
=40,

359 
	mUCHAR_SEGMENT_STARTER
=41,

364 
	mUCHAR_PATTERN_SYNTAX
=42,

369 
	mUCHAR_PATTERN_WHITE_SPACE
=43,

374 
	mUCHAR_POSIX_ALNUM
=44,

379 
	mUCHAR_POSIX_BLANK
=45,

384 
	mUCHAR_POSIX_GRAPH
=46,

389 
	mUCHAR_POSIX_PRINT
=47,

394 
	mUCHAR_POSIX_XDIGIT
=48,

396 
	mUCHAR_CASED
=49,

398 
	mUCHAR_CASE_IGNORABLE
=50,

400 
	mUCHAR_CHANGES_WHEN_LOWERCASED
=51,

402 
	mUCHAR_CHANGES_WHEN_UPPERCASED
=52,

404 
	mUCHAR_CHANGES_WHEN_TITLECASED
=53,

406 
	mUCHAR_CHANGES_WHEN_CASEFOLDED
=54,

408 
	mUCHAR_CHANGES_WHEN_CASEMAPPED
=55,

410 
	mUCHAR_CHANGES_WHEN_NFKC_CASEFOLDED
=56,

412 
	mUCHAR_BINARY_LIMIT
=57,

416 
	mUCHAR_BIDI_CLASS
=0x1000,

418 
	mUCHAR_INT_START
=
UCHAR_BIDI_CLASS
,

421 
	mUCHAR_BLOCK
=0x1001,

424 
	mUCHAR_CANONICAL_COMBINING_CLASS
=0x1002,

427 
	mUCHAR_DECOMPOSITION_TYPE
=0x1003,

431 
	mUCHAR_EAST_ASIAN_WIDTH
=0x1004,

434 
	mUCHAR_GENERAL_CATEGORY
=0x1005,

437 
	mUCHAR_JOINING_GROUP
=0x1006,

440 
	mUCHAR_JOINING_TYPE
=0x1007,

443 
	mUCHAR_LINE_BREAK
=0x1008,

446 
	mUCHAR_NUMERIC_TYPE
=0x1009,

449 
	mUCHAR_SCRIPT
=0x100A,

452 
	mUCHAR_HANGUL_SYLLABLE_TYPE
=0x100B,

455 
	mUCHAR_NFD_QUICK_CHECK
=0x100C,

458 
	mUCHAR_NFKD_QUICK_CHECK
=0x100D,

461 
	mUCHAR_NFC_QUICK_CHECK
=0x100E,

464 
	mUCHAR_NFKC_QUICK_CHECK
=0x100F,

471 
	mUCHAR_LEAD_CANONICAL_COMBINING_CLASS
=0x1010,

478 
	mUCHAR_TRAIL_CANONICAL_COMBINING_CLASS
=0x1011,

483 
	mUCHAR_GRAPHEME_CLUSTER_BREAK
=0x1012,

488 
	mUCHAR_SENTENCE_BREAK
=0x1013,

493 
	mUCHAR_WORD_BREAK
=0x1014,

495 
	mUCHAR_INT_LIMIT
=0x1015,

505 
	mUCHAR_GENERAL_CATEGORY_MASK
=0x2000,

507 
	mUCHAR_MASK_START
=
UCHAR_GENERAL_CATEGORY_MASK
,

509 
	mUCHAR_MASK_LIMIT
=0x2001,

513 
	mUCHAR_NUMERIC_VALUE
=0x3000,

515 
	mUCHAR_DOUBLE_START
=
UCHAR_NUMERIC_VALUE
,

517 
	mUCHAR_DOUBLE_LIMIT
=0x3001,

521 
	mUCHAR_AGE
=0x4000,

523 
	mUCHAR_STRING_START
=
UCHAR_AGE
,

526 
	mUCHAR_BIDI_MIRRORING_GLYPH
=0x4001,

529 
	mUCHAR_CASE_FOLDING
=0x4002,

532 
	mUCHAR_ISO_COMMENT
=0x4003,

535 
	mUCHAR_LOWERCASE_MAPPING
=0x4004,

538 
	mUCHAR_NAME
=0x4005,

541 
	mUCHAR_SIMPLE_CASE_FOLDING
=0x4006,

544 
	mUCHAR_SIMPLE_LOWERCASE_MAPPING
=0x4007,

547 
	mUCHAR_SIMPLE_TITLECASE_MAPPING
=0x4008,

550 
	mUCHAR_SIMPLE_UPPERCASE_MAPPING
=0x4009,

553 
	mUCHAR_TITLECASE_MAPPING
=0x400A,

556 
	mUCHAR_UNICODE_1_NAME
=0x400B,

559 
	mUCHAR_UPPERCASE_MAPPING
=0x400C,

561 
	mUCHAR_STRING_LIMIT
=0x400D,

570 
	mUCHAR_SCRIPT_EXTENSIONS
=0x7000,

572 
	mUCHAR_OTHER_PROPERTY_START
=
UCHAR_SCRIPT_EXTENSIONS
,

575 
	mUCHAR_OTHER_PROPERTY_LIMIT
=0x7001,

578 
	mUCHAR_INVALID_CODE
 = -1

579 } 
	tUPrİ”ty
;

586 
	eUCh¬C©egÜy


591 
	mU_UNASSIGNED
 = 0,

593 
	mU_GENERAL_OTHER_TYPES
 = 0,

595 
	mU_UPPERCASE_LETTER
 = 1,

597 
	mU_LOWERCASE_LETTER
 = 2,

599 
	mU_TITLECASE_LETTER
 = 3,

601 
	mU_MODIFIER_LETTER
 = 4,

603 
	mU_OTHER_LETTER
 = 5,

605 
	mU_NON_SPACING_MARK
 = 6,

607 
	mU_ENCLOSING_MARK
 = 7,

609 
	mU_COMBINING_SPACING_MARK
 = 8,

611 
	mU_DECIMAL_DIGIT_NUMBER
 = 9,

613 
	mU_LETTER_NUMBER
 = 10,

615 
	mU_OTHER_NUMBER
 = 11,

617 
	mU_SPACE_SEPARATOR
 = 12,

619 
	mU_LINE_SEPARATOR
 = 13,

621 
	mU_PARAGRAPH_SEPARATOR
 = 14,

623 
	mU_CONTROL_CHAR
 = 15,

625 
	mU_FORMAT_CHAR
 = 16,

627 
	mU_PRIVATE_USE_CHAR
 = 17,

629 
	mU_SURROGATE
 = 18,

631 
	mU_DASH_PUNCTUATION
 = 19,

633 
	mU_START_PUNCTUATION
 = 20,

635 
	mU_END_PUNCTUATION
 = 21,

637 
	mU_CONNECTOR_PUNCTUATION
 = 22,

639 
	mU_OTHER_PUNCTUATION
 = 23,

641 
	mU_MATH_SYMBOL
 = 24,

643 
	mU_CURRENCY_SYMBOL
 = 25,

645 
	mU_MODIFIER_SYMBOL
 = 26,

647 
	mU_OTHER_SYMBOL
 = 27,

649 
	mU_INITIAL_PUNCTUATION
 = 28,

651 
	mU_FINAL_PUNCTUATION
 = 29,

653 
	mU_CHAR_CATEGORY_COUNT


654 } 
	tUCh¬C©egÜy
;

670 
	#U_GC_CN_MASK
 
	`U_MASK
(
U_GENERAL_OTHER_TYPES
)

	)

673 
	#U_GC_LU_MASK
 
	`U_MASK
(
U_UPPERCASE_LETTER
)

	)

675 
	#U_GC_LL_MASK
 
	`U_MASK
(
U_LOWERCASE_LETTER
)

	)

677 
	#U_GC_LT_MASK
 
	`U_MASK
(
U_TITLECASE_LETTER
)

	)

679 
	#U_GC_LM_MASK
 
	`U_MASK
(
U_MODIFIER_LETTER
)

	)

681 
	#U_GC_LO_MASK
 
	`U_MASK
(
U_OTHER_LETTER
)

	)

684 
	#U_GC_MN_MASK
 
	`U_MASK
(
U_NON_SPACING_MARK
)

	)

686 
	#U_GC_ME_MASK
 
	`U_MASK
(
U_ENCLOSING_MARK
)

	)

688 
	#U_GC_MC_MASK
 
	`U_MASK
(
U_COMBINING_SPACING_MARK
)

	)

691 
	#U_GC_ND_MASK
 
	`U_MASK
(
U_DECIMAL_DIGIT_NUMBER
)

	)

693 
	#U_GC_NL_MASK
 
	`U_MASK
(
U_LETTER_NUMBER
)

	)

695 
	#U_GC_NO_MASK
 
	`U_MASK
(
U_OTHER_NUMBER
)

	)

698 
	#U_GC_ZS_MASK
 
	`U_MASK
(
U_SPACE_SEPARATOR
)

	)

700 
	#U_GC_ZL_MASK
 
	`U_MASK
(
U_LINE_SEPARATOR
)

	)

702 
	#U_GC_ZP_MASK
 
	`U_MASK
(
U_PARAGRAPH_SEPARATOR
)

	)

705 
	#U_GC_CC_MASK
 
	`U_MASK
(
U_CONTROL_CHAR
)

	)

707 
	#U_GC_CF_MASK
 
	`U_MASK
(
U_FORMAT_CHAR
)

	)

709 
	#U_GC_CO_MASK
 
	`U_MASK
(
U_PRIVATE_USE_CHAR
)

	)

711 
	#U_GC_CS_MASK
 
	`U_MASK
(
U_SURROGATE
)

	)

714 
	#U_GC_PD_MASK
 
	`U_MASK
(
U_DASH_PUNCTUATION
)

	)

716 
	#U_GC_PS_MASK
 
	`U_MASK
(
U_START_PUNCTUATION
)

	)

718 
	#U_GC_PE_MASK
 
	`U_MASK
(
U_END_PUNCTUATION
)

	)

720 
	#U_GC_PC_MASK
 
	`U_MASK
(
U_CONNECTOR_PUNCTUATION
)

	)

722 
	#U_GC_PO_MASK
 
	`U_MASK
(
U_OTHER_PUNCTUATION
)

	)

725 
	#U_GC_SM_MASK
 
	`U_MASK
(
U_MATH_SYMBOL
)

	)

727 
	#U_GC_SC_MASK
 
	`U_MASK
(
U_CURRENCY_SYMBOL
)

	)

729 
	#U_GC_SK_MASK
 
	`U_MASK
(
U_MODIFIER_SYMBOL
)

	)

731 
	#U_GC_SO_MASK
 
	`U_MASK
(
U_OTHER_SYMBOL
)

	)

734 
	#U_GC_PI_MASK
 
	`U_MASK
(
U_INITIAL_PUNCTUATION
)

	)

736 
	#U_GC_PF_MASK
 
	`U_MASK
(
U_FINAL_PUNCTUATION
)

	)

740 
	#U_GC_L_MASK
 \

741 (
U_GC_LU_MASK
|
U_GC_LL_MASK
|
U_GC_LT_MASK
|
U_GC_LM_MASK
|
U_GC_LO_MASK
)

	)

744 
	#U_GC_LC_MASK
 \

745 (
U_GC_LU_MASK
|
U_GC_LL_MASK
|
U_GC_LT_MASK
)

	)

748 
	#U_GC_M_MASK
 (
U_GC_MN_MASK
|
U_GC_ME_MASK
|
U_GC_MC_MASK
)

	)

751 
	#U_GC_N_MASK
 (
U_GC_ND_MASK
|
U_GC_NL_MASK
|
U_GC_NO_MASK
)

	)

754 
	#U_GC_Z_MASK
 (
U_GC_ZS_MASK
|
U_GC_ZL_MASK
|
U_GC_ZP_MASK
)

	)

757 
	#U_GC_C_MASK
 \

758 (
U_GC_CN_MASK
|
U_GC_CC_MASK
|
U_GC_CF_MASK
|
U_GC_CO_MASK
|
U_GC_CS_MASK
)

	)

761 
	#U_GC_P_MASK
 \

762 (
U_GC_PD_MASK
|
U_GC_PS_MASK
|
U_GC_PE_MASK
|
U_GC_PC_MASK
|
U_GC_PO_MASK
| \

763 
U_GC_PI_MASK
|
U_GC_PF_MASK
)

	)

766 
	#U_GC_S_MASK
 (
U_GC_SM_MASK
|
U_GC_SC_MASK
|
U_GC_SK_MASK
|
U_GC_SO_MASK
)

	)

772 
	eUCh¬DœeùiÚ
 {

776 
	mU_LEFT_TO_RIGHT
 = 0,

778 
	mU_RIGHT_TO_LEFT
 = 1,

780 
	mU_EUROPEAN_NUMBER
 = 2,

782 
	mU_EUROPEAN_NUMBER_SEPARATOR
 = 3,

784 
	mU_EUROPEAN_NUMBER_TERMINATOR
 = 4,

786 
	mU_ARABIC_NUMBER
 = 5,

788 
	mU_COMMON_NUMBER_SEPARATOR
 = 6,

790 
	mU_BLOCK_SEPARATOR
 = 7,

792 
	mU_SEGMENT_SEPARATOR
 = 8,

794 
	mU_WHITE_SPACE_NEUTRAL
 = 9,

796 
	mU_OTHER_NEUTRAL
 = 10,

798 
	mU_LEFT_TO_RIGHT_EMBEDDING
 = 11,

800 
	mU_LEFT_TO_RIGHT_OVERRIDE
 = 12,

802 
	mU_RIGHT_TO_LEFT_ARABIC
 = 13,

804 
	mU_RIGHT_TO_LEFT_EMBEDDING
 = 14,

806 
	mU_RIGHT_TO_LEFT_OVERRIDE
 = 15,

808 
	mU_POP_DIRECTIONAL_FORMAT
 = 16,

810 
	mU_DIR_NON_SPACING_MARK
 = 17,

812 
	mU_BOUNDARY_NEUTRAL
 = 18,

814 
	mU_CHAR_DIRECTION_COUNT


815 } 
	tUCh¬DœeùiÚ
;

821 
	eUBlockCode
 {

824 
	mUBLOCK_NO_BLOCK
 = 0,

827 
	mUBLOCK_BASIC_LATIN
 = 1,

830 
	mUBLOCK_LATIN_1_SUPPLEMENT
=2,

833 
	mUBLOCK_LATIN_EXTENDED_A
 =3,

836 
	mUBLOCK_LATIN_EXTENDED_B
 =4,

839 
	mUBLOCK_IPA_EXTENSIONS
 =5,

842 
	mUBLOCK_SPACING_MODIFIER_LETTERS
 =6,

845 
	mUBLOCK_COMBINING_DIACRITICAL_MARKS
 =7,

851 
	mUBLOCK_GREEK
 =8,

854 
	mUBLOCK_CYRILLIC
 =9,

857 
	mUBLOCK_ARMENIAN
 =10,

860 
	mUBLOCK_HEBREW
 =11,

863 
	mUBLOCK_ARABIC
 =12,

866 
	mUBLOCK_SYRIAC
 =13,

869 
	mUBLOCK_THAANA
 =14,

872 
	mUBLOCK_DEVANAGARI
 =15,

875 
	mUBLOCK_BENGALI
 =16,

878 
	mUBLOCK_GURMUKHI
 =17,

881 
	mUBLOCK_GUJARATI
 =18,

884 
	mUBLOCK_ORIYA
 =19,

887 
	mUBLOCK_TAMIL
 =20,

890 
	mUBLOCK_TELUGU
 =21,

893 
	mUBLOCK_KANNADA
 =22,

896 
	mUBLOCK_MALAYALAM
 =23,

899 
	mUBLOCK_SINHALA
 =24,

902 
	mUBLOCK_THAI
 =25,

905 
	mUBLOCK_LAO
 =26,

908 
	mUBLOCK_TIBETAN
 =27,

911 
	mUBLOCK_MYANMAR
 =28,

914 
	mUBLOCK_GEORGIAN
 =29,

917 
	mUBLOCK_HANGUL_JAMO
 =30,

920 
	mUBLOCK_ETHIOPIC
 =31,

923 
	mUBLOCK_CHEROKEE
 =32,

926 
	mUBLOCK_UNIFIED_CANADIAN_ABORIGINAL_SYLLABICS
 =33,

929 
	mUBLOCK_OGHAM
 =34,

932 
	mUBLOCK_RUNIC
 =35,

935 
	mUBLOCK_KHMER
 =36,

938 
	mUBLOCK_MONGOLIAN
 =37,

941 
	mUBLOCK_LATIN_EXTENDED_ADDITIONAL
 =38,

944 
	mUBLOCK_GREEK_EXTENDED
 =39,

947 
	mUBLOCK_GENERAL_PUNCTUATION
 =40,

950 
	mUBLOCK_SUPERSCRIPTS_AND_SUBSCRIPTS
 =41,

953 
	mUBLOCK_CURRENCY_SYMBOLS
 =42,

959 
	mUBLOCK_COMBINING_MARKS_FOR_SYMBOLS
 =43,

962 
	mUBLOCK_LETTERLIKE_SYMBOLS
 =44,

965 
	mUBLOCK_NUMBER_FORMS
 =45,

968 
	mUBLOCK_ARROWS
 =46,

971 
	mUBLOCK_MATHEMATICAL_OPERATORS
 =47,

974 
	mUBLOCK_MISCELLANEOUS_TECHNICAL
 =48,

977 
	mUBLOCK_CONTROL_PICTURES
 =49,

980 
	mUBLOCK_OPTICAL_CHARACTER_RECOGNITION
 =50,

983 
	mUBLOCK_ENCLOSED_ALPHANUMERICS
 =51,

986 
	mUBLOCK_BOX_DRAWING
 =52,

989 
	mUBLOCK_BLOCK_ELEMENTS
 =53,

992 
	mUBLOCK_GEOMETRIC_SHAPES
 =54,

995 
	mUBLOCK_MISCELLANEOUS_SYMBOLS
 =55,

998 
	mUBLOCK_DINGBATS
 =56,

1001 
	mUBLOCK_BRAILLE_PATTERNS
 =57,

1004 
	mUBLOCK_CJK_RADICALS_SUPPLEMENT
 =58,

1007 
	mUBLOCK_KANGXI_RADICALS
 =59,

1010 
	mUBLOCK_IDEOGRAPHIC_DESCRIPTION_CHARACTERS
 =60,

1013 
	mUBLOCK_CJK_SYMBOLS_AND_PUNCTUATION
 =61,

1016 
	mUBLOCK_HIRAGANA
 =62,

1019 
	mUBLOCK_KATAKANA
 =63,

1022 
	mUBLOCK_BOPOMOFO
 =64,

1025 
	mUBLOCK_HANGUL_COMPATIBILITY_JAMO
 =65,

1028 
	mUBLOCK_KANBUN
 =66,

1031 
	mUBLOCK_BOPOMOFO_EXTENDED
 =67,

1034 
	mUBLOCK_ENCLOSED_CJK_LETTERS_AND_MONTHS
 =68,

1037 
	mUBLOCK_CJK_COMPATIBILITY
 =69,

1040 
	mUBLOCK_CJK_UNIFIED_IDEOGRAPHS_EXTENSION_A
 =70,

1043 
	mUBLOCK_CJK_UNIFIED_IDEOGRAPHS
 =71,

1046 
	mUBLOCK_YI_SYLLABLES
 =72,

1049 
	mUBLOCK_YI_RADICALS
 =73,

1052 
	mUBLOCK_HANGUL_SYLLABLES
 =74,

1055 
	mUBLOCK_HIGH_SURROGATES
 =75,

1058 
	mUBLOCK_HIGH_PRIVATE_USE_SURROGATES
 =76,

1061 
	mUBLOCK_LOW_SURROGATES
 =77,

1072 
	mUBLOCK_PRIVATE_USE
 = 78,

1082 
	mUBLOCK_PRIVATE_USE_AREA
 =
UBLOCK_PRIVATE_USE
,

1085 
	mUBLOCK_CJK_COMPATIBILITY_IDEOGRAPHS
 =79,

1088 
	mUBLOCK_ALPHABETIC_PRESENTATION_FORMS
 =80,

1091 
	mUBLOCK_ARABIC_PRESENTATION_FORMS_A
 =81,

1094 
	mUBLOCK_COMBINING_HALF_MARKS
 =82,

1097 
	mUBLOCK_CJK_COMPATIBILITY_FORMS
 =83,

1100 
	mUBLOCK_SMALL_FORM_VARIANTS
 =84,

1103 
	mUBLOCK_ARABIC_PRESENTATION_FORMS_B
 =85,

1106 
	mUBLOCK_SPECIALS
 =86,

1109 
	mUBLOCK_HALFWIDTH_AND_FULLWIDTH_FORMS
 =87,

1114 
	mUBLOCK_OLD_ITALIC
 = 88 ,

1116 
	mUBLOCK_GOTHIC
 = 89 ,

1118 
	mUBLOCK_DESERET
 = 90 ,

1120 
	mUBLOCK_BYZANTINE_MUSICAL_SYMBOLS
 = 91 ,

1122 
	mUBLOCK_MUSICAL_SYMBOLS
 = 92 ,

1124 
	mUBLOCK_MATHEMATICAL_ALPHANUMERIC_SYMBOLS
 = 93 ,

1126 
	mUBLOCK_CJK_UNIFIED_IDEOGRAPHS_EXTENSION_B
 = 94 ,

1128 
	mUBLOCK_CJK_COMPATIBILITY_IDEOGRAPHS_SUPPLEMENT
 = 95 ,

1130 
	mUBLOCK_TAGS
 = 96,

1138 
	mUBLOCK_CYRILLIC_SUPPLEMENTARY
 = 97,

1140 
	mUBLOCK_CYRILLIC_SUPPLEMENT
 = 
UBLOCK_CYRILLIC_SUPPLEMENTARY
,

1142 
	mUBLOCK_TAGALOG
 = 98,

1144 
	mUBLOCK_HANUNOO
 = 99,

1146 
	mUBLOCK_BUHID
 = 100,

1148 
	mUBLOCK_TAGBANWA
 = 101,

1150 
	mUBLOCK_MISCELLANEOUS_MATHEMATICAL_SYMBOLS_A
 = 102,

1152 
	mUBLOCK_SUPPLEMENTAL_ARROWS_A
 = 103,

1154 
	mUBLOCK_SUPPLEMENTAL_ARROWS_B
 = 104,

1156 
	mUBLOCK_MISCELLANEOUS_MATHEMATICAL_SYMBOLS_B
 = 105,

1158 
	mUBLOCK_SUPPLEMENTAL_MATHEMATICAL_OPERATORS
 = 106,

1160 
	mUBLOCK_KATAKANA_PHONETIC_EXTENSIONS
 = 107,

1162 
	mUBLOCK_VARIATION_SELECTORS
 = 108,

1164 
	mUBLOCK_SUPPLEMENTARY_PRIVATE_USE_AREA_A
 = 109,

1166 
	mUBLOCK_SUPPLEMENTARY_PRIVATE_USE_AREA_B
 = 110,

1171 
	mUBLOCK_LIMBU
 = 111,

1173 
	mUBLOCK_TAI_LE
 = 112,

1175 
	mUBLOCK_KHMER_SYMBOLS
 = 113,

1177 
	mUBLOCK_PHONETIC_EXTENSIONS
 = 114,

1179 
	mUBLOCK_MISCELLANEOUS_SYMBOLS_AND_ARROWS
 = 115,

1181 
	mUBLOCK_YIJING_HEXAGRAM_SYMBOLS
 = 116,

1183 
	mUBLOCK_LINEAR_B_SYLLABARY
 = 117,

1185 
	mUBLOCK_LINEAR_B_IDEOGRAMS
 = 118,

1187 
	mUBLOCK_AEGEAN_NUMBERS
 = 119,

1189 
	mUBLOCK_UGARITIC
 = 120,

1191 
	mUBLOCK_SHAVIAN
 = 121,

1193 
	mUBLOCK_OSMANYA
 = 122,

1195 
	mUBLOCK_CYPRIOT_SYLLABARY
 = 123,

1197 
	mUBLOCK_TAI_XUAN_JING_SYMBOLS
 = 124,

1199 
	mUBLOCK_VARIATION_SELECTORS_SUPPLEMENT
 = 125,

1204 
	mUBLOCK_ANCIENT_GREEK_MUSICAL_NOTATION
 = 126,

1206 
	mUBLOCK_ANCIENT_GREEK_NUMBERS
 = 127,

1208 
	mUBLOCK_ARABIC_SUPPLEMENT
 = 128,

1210 
	mUBLOCK_BUGINESE
 = 129,

1212 
	mUBLOCK_CJK_STROKES
 = 130,

1214 
	mUBLOCK_COMBINING_DIACRITICAL_MARKS_SUPPLEMENT
 = 131,

1216 
	mUBLOCK_COPTIC
 = 132,

1218 
	mUBLOCK_ETHIOPIC_EXTENDED
 = 133,

1220 
	mUBLOCK_ETHIOPIC_SUPPLEMENT
 = 134,

1222 
	mUBLOCK_GEORGIAN_SUPPLEMENT
 = 135,

1224 
	mUBLOCK_GLAGOLITIC
 = 136,

1226 
	mUBLOCK_KHAROSHTHI
 = 137,

1228 
	mUBLOCK_MODIFIER_TONE_LETTERS
 = 138,

1230 
	mUBLOCK_NEW_TAI_LUE
 = 139,

1232 
	mUBLOCK_OLD_PERSIAN
 = 140,

1234 
	mUBLOCK_PHONETIC_EXTENSIONS_SUPPLEMENT
 = 141,

1236 
	mUBLOCK_SUPPLEMENTAL_PUNCTUATION
 = 142,

1238 
	mUBLOCK_SYLOTI_NAGRI
 = 143,

1240 
	mUBLOCK_TIFINAGH
 = 144,

1242 
	mUBLOCK_VERTICAL_FORMS
 = 145,

1247 
	mUBLOCK_NKO
 = 146,

1249 
	mUBLOCK_BALINESE
 = 147,

1251 
	mUBLOCK_LATIN_EXTENDED_C
 = 148,

1253 
	mUBLOCK_LATIN_EXTENDED_D
 = 149,

1255 
	mUBLOCK_PHAGS_PA
 = 150,

1257 
	mUBLOCK_PHOENICIAN
 = 151,

1259 
	mUBLOCK_CUNEIFORM
 = 152,

1261 
	mUBLOCK_CUNEIFORM_NUMBERS_AND_PUNCTUATION
 = 153,

1263 
	mUBLOCK_COUNTING_ROD_NUMERALS
 = 154,

1268 
	mUBLOCK_SUNDANESE
 = 155,

1270 
	mUBLOCK_LEPCHA
 = 156,

1272 
	mUBLOCK_OL_CHIKI
 = 157,

1274 
	mUBLOCK_CYRILLIC_EXTENDED_A
 = 158,

1276 
	mUBLOCK_VAI
 = 159,

1278 
	mUBLOCK_CYRILLIC_EXTENDED_B
 = 160,

1280 
	mUBLOCK_SAURASHTRA
 = 161,

1282 
	mUBLOCK_KAYAH_LI
 = 162,

1284 
	mUBLOCK_REJANG
 = 163,

1286 
	mUBLOCK_CHAM
 = 164,

1288 
	mUBLOCK_ANCIENT_SYMBOLS
 = 165,

1290 
	mUBLOCK_PHAISTOS_DISC
 = 166,

1292 
	mUBLOCK_LYCIAN
 = 167,

1294 
	mUBLOCK_CARIAN
 = 168,

1296 
	mUBLOCK_LYDIAN
 = 169,

1298 
	mUBLOCK_MAHJONG_TILES
 = 170,

1300 
	mUBLOCK_DOMINO_TILES
 = 171,

1305 
	mUBLOCK_SAMARITAN
 = 172,

1307 
	mUBLOCK_UNIFIED_CANADIAN_ABORIGINAL_SYLLABICS_EXTENDED
 = 173,

1309 
	mUBLOCK_TAI_THAM
 = 174,

1311 
	mUBLOCK_VEDIC_EXTENSIONS
 = 175,

1313 
	mUBLOCK_LISU
 = 176,

1315 
	mUBLOCK_BAMUM
 = 177,

1317 
	mUBLOCK_COMMON_INDIC_NUMBER_FORMS
 = 178,

1319 
	mUBLOCK_DEVANAGARI_EXTENDED
 = 179,

1321 
	mUBLOCK_HANGUL_JAMO_EXTENDED_A
 = 180,

1323 
	mUBLOCK_JAVANESE
 = 181,

1325 
	mUBLOCK_MYANMAR_EXTENDED_A
 = 182,

1327 
	mUBLOCK_TAI_VIET
 = 183,

1329 
	mUBLOCK_MEETEI_MAYEK
 = 184,

1331 
	mUBLOCK_HANGUL_JAMO_EXTENDED_B
 = 185,

1333 
	mUBLOCK_IMPERIAL_ARAMAIC
 = 186,

1335 
	mUBLOCK_OLD_SOUTH_ARABIAN
 = 187,

1337 
	mUBLOCK_AVESTAN
 = 188,

1339 
	mUBLOCK_INSCRIPTIONAL_PARTHIAN
 = 189,

1341 
	mUBLOCK_INSCRIPTIONAL_PAHLAVI
 = 190,

1343 
	mUBLOCK_OLD_TURKIC
 = 191,

1345 
	mUBLOCK_RUMI_NUMERAL_SYMBOLS
 = 192,

1347 
	mUBLOCK_KAITHI
 = 193,

1349 
	mUBLOCK_EGYPTIAN_HIEROGLYPHS
 = 194,

1351 
	mUBLOCK_ENCLOSED_ALPHANUMERIC_SUPPLEMENT
 = 195,

1353 
	mUBLOCK_ENCLOSED_IDEOGRAPHIC_SUPPLEMENT
 = 196,

1355 
	mUBLOCK_CJK_UNIFIED_IDEOGRAPHS_EXTENSION_C
 = 197,

1360 
	mUBLOCK_MANDAIC
 = 198,

1362 
	mUBLOCK_BATAK
 = 199,

1364 
	mUBLOCK_ETHIOPIC_EXTENDED_A
 = 200,

1366 
	mUBLOCK_BRAHMI
 = 201,

1368 
	mUBLOCK_BAMUM_SUPPLEMENT
 = 202,

1370 
	mUBLOCK_KANA_SUPPLEMENT
 = 203,

1372 
	mUBLOCK_PLAYING_CARDS
 = 204,

1374 
	mUBLOCK_MISCELLANEOUS_SYMBOLS_AND_PICTOGRAPHS
 = 205,

1376 
	mUBLOCK_EMOTICONS
 = 206,

1378 
	mUBLOCK_TRANSPORT_AND_MAP_SYMBOLS
 = 207,

1380 
	mUBLOCK_ALCHEMICAL_SYMBOLS
 = 208,

1382 
	mUBLOCK_CJK_UNIFIED_IDEOGRAPHS_EXTENSION_D
 = 209,

1385 
	mUBLOCK_COUNT
 = 210,

1388 
	mUBLOCK_INVALID_CODE
=-1

1392 
UBlockCode
 
	tUBlockCode
;

1401 
	eUEa¡AsŸnWidth
 {

1402 
	mU_EA_NEUTRAL
,

1403 
	mU_EA_AMBIGUOUS
,

1404 
	mU_EA_HALFWIDTH
,

1405 
	mU_EA_FULLWIDTH
,

1406 
	mU_EA_NARROW
,

1407 
	mU_EA_WIDE
,

1408 
	mU_EA_COUNT


1409 } 
	tUEa¡AsŸnWidth
;

1426 
	eUCh¬NameChoiû
 {

1427 
	mU_UNICODE_CHAR_NAME
,

1428 
	mU_UNICODE_10_CHAR_NAME
,

1429 
	mU_EXTENDED_CHAR_NAME
,

1430 
	mU_CHAR_NAME_ALIAS
,

1431 
	mU_CHAR_NAME_CHOICE_COUNT


1432 } 
	tUCh¬NameChoiû
;

1447 
	eUPrİ”tyNameChoiû
 {

1448 
	mU_SHORT_PROPERTY_NAME
,

1449 
	mU_LONG_PROPERTY_NAME
,

1450 
	mU_PROPERTY_NAME_CHOICE_COUNT


1451 } 
	tUPrİ”tyNameChoiû
;

1459 
	eUDecompos™iÚTy³
 {

1460 
	mU_DT_NONE
,

1461 
	mU_DT_CANONICAL
,

1462 
	mU_DT_COMPAT
,

1463 
	mU_DT_CIRCLE
,

1464 
	mU_DT_FINAL
,

1465 
	mU_DT_FONT
,

1466 
	mU_DT_FRACTION
,

1467 
	mU_DT_INITIAL
,

1468 
	mU_DT_ISOLATED
,

1469 
	mU_DT_MEDIAL
,

1470 
	mU_DT_NARROW
,

1471 
	mU_DT_NOBREAK
,

1472 
	mU_DT_SMALL
,

1473 
	mU_DT_SQUARE
,

1474 
	mU_DT_SUB
,

1475 
	mU_DT_SUPER
,

1476 
	mU_DT_VERTICAL
,

1477 
	mU_DT_WIDE
,

1478 
	mU_DT_COUNT


1479 } 
	tUDecompos™iÚTy³
;

1487 
	eUJoššgTy³
 {

1488 
	mU_JT_NON_JOINING
,

1489 
	mU_JT_JOIN_CAUSING
,

1490 
	mU_JT_DUAL_JOINING
,

1491 
	mU_JT_LEFT_JOINING
,

1492 
	mU_JT_RIGHT_JOINING
,

1493 
	mU_JT_TRANSPARENT
,

1494 
	mU_JT_COUNT


1495 } 
	tUJoššgTy³
;

1503 
	eUJoššgGroup
 {

1504 
	mU_JG_NO_JOINING_GROUP
,

1505 
	mU_JG_AIN
,

1506 
	mU_JG_ALAPH
,

1507 
	mU_JG_ALEF
,

1508 
	mU_JG_BEH
,

1509 
	mU_JG_BETH
,

1510 
	mU_JG_DAL
,

1511 
	mU_JG_DALATH_RISH
,

1512 
	mU_JG_E
,

1513 
	mU_JG_FEH
,

1514 
	mU_JG_FINAL_SEMKATH
,

1515 
	mU_JG_GAF
,

1516 
	mU_JG_GAMAL
,

1517 
	mU_JG_HAH
,

1518 
	mU_JG_TEH_MARBUTA_GOAL
,

1519 
	mU_JG_HAMZA_ON_HEH_GOAL
=
U_JG_TEH_MARBUTA_GOAL
,

1520 
	mU_JG_HE
,

1521 
	mU_JG_HEH
,

1522 
	mU_JG_HEH_GOAL
,

1523 
	mU_JG_HETH
,

1524 
	mU_JG_KAF
,

1525 
	mU_JG_KAPH
,

1526 
	mU_JG_KNOTTED_HEH
,

1527 
	mU_JG_LAM
,

1528 
	mU_JG_LAMADH
,

1529 
	mU_JG_MEEM
,

1530 
	mU_JG_MIM
,

1531 
	mU_JG_NOON
,

1532 
	mU_JG_NUN
,

1533 
	mU_JG_PE
,

1534 
	mU_JG_QAF
,

1535 
	mU_JG_QAPH
,

1536 
	mU_JG_REH
,

1537 
	mU_JG_REVERSED_PE
,

1538 
	mU_JG_SAD
,

1539 
	mU_JG_SADHE
,

1540 
	mU_JG_SEEN
,

1541 
	mU_JG_SEMKATH
,

1542 
	mU_JG_SHIN
,

1543 
	mU_JG_SWASH_KAF
,

1544 
	mU_JG_SYRIAC_WAW
,

1545 
	mU_JG_TAH
,

1546 
	mU_JG_TAW
,

1547 
	mU_JG_TEH_MARBUTA
,

1548 
	mU_JG_TETH
,

1549 
	mU_JG_WAW
,

1550 
	mU_JG_YEH
,

1551 
	mU_JG_YEH_BARREE
,

1552 
	mU_JG_YEH_WITH_TAIL
,

1553 
	mU_JG_YUDH
,

1554 
	mU_JG_YUDH_HE
,

1555 
	mU_JG_ZAIN
,

1556 
	mU_JG_FE
,

1557 
	mU_JG_KHAPH
,

1558 
	mU_JG_ZHAIN
,

1559 
	mU_JG_BURUSHASKI_YEH_BARREE
,

1560 
	mU_JG_FARSI_YEH
,

1561 
	mU_JG_NYA
,

1562 
	mU_JG_COUNT


1563 } 
	tUJoššgGroup
;

1571 
	eUG¿phemeClu¡”B»ak
 {

1572 
	mU_GCB_OTHER
 = 0,

1573 
	mU_GCB_CONTROL
 = 1,

1574 
	mU_GCB_CR
 = 2,

1575 
	mU_GCB_EXTEND
 = 3,

1576 
	mU_GCB_L
 = 4,

1577 
	mU_GCB_LF
 = 5,

1578 
	mU_GCB_LV
 = 6,

1579 
	mU_GCB_LVT
 = 7,

1580 
	mU_GCB_T
 = 8,

1581 
	mU_GCB_V
 = 9,

1582 
	mU_GCB_SPACING_MARK
 = 10,

1583 
	mU_GCB_PREPEND
 = 11,

1584 
	mU_GCB_COUNT
 = 12

1585 } 
	tUG¿phemeClu¡”B»ak
;

1594 
	eUWÜdB»akV®ues
 {

1595 
	mU_WB_OTHER
 = 0,

1596 
	mU_WB_ALETTER
 = 1,

1597 
	mU_WB_FORMAT
 = 2,

1598 
	mU_WB_KATAKANA
 = 3,

1599 
	mU_WB_MIDLETTER
 = 4,

1600 
	mU_WB_MIDNUM
 = 5,

1601 
	mU_WB_NUMERIC
 = 6,

1602 
	mU_WB_EXTENDNUMLET
 = 7,

1603 
	mU_WB_CR
 = 8,

1604 
	mU_WB_EXTEND
 = 9,

1605 
	mU_WB_LF
 = 10,

1606 
	mU_WB_MIDNUMLET
 =11,

1607 
	mU_WB_NEWLINE
 =12,

1608 
	mU_WB_COUNT
 = 13

1609 } 
	tUWÜdB»akV®ues
;

1617 
	eUS’‹nûB»ak
 {

1618 
	mU_SB_OTHER
 = 0,

1619 
	mU_SB_ATERM
 = 1,

1620 
	mU_SB_CLOSE
 = 2,

1621 
	mU_SB_FORMAT
 = 3,

1622 
	mU_SB_LOWER
 = 4,

1623 
	mU_SB_NUMERIC
 = 5,

1624 
	mU_SB_OLETTER
 = 6,

1625 
	mU_SB_SEP
 = 7,

1626 
	mU_SB_SP
 = 8,

1627 
	mU_SB_STERM
 = 9,

1628 
	mU_SB_UPPER
 = 10,

1629 
	mU_SB_CR
 = 11,

1630 
	mU_SB_EXTEND
 = 12,

1631 
	mU_SB_LF
 = 13,

1632 
	mU_SB_SCONTINUE
 = 14,

1633 
	mU_SB_COUNT
 = 15

1634 } 
	tUS’‹nûB»ak
;

1642 
	eULšeB»ak
 {

1643 
	mU_LB_UNKNOWN
 = 0,

1644 
	mU_LB_AMBIGUOUS
 = 1,

1645 
	mU_LB_ALPHABETIC
 = 2,

1646 
	mU_LB_BREAK_BOTH
 = 3,

1647 
	mU_LB_BREAK_AFTER
 = 4,

1648 
	mU_LB_BREAK_BEFORE
 = 5,

1649 
	mU_LB_MANDATORY_BREAK
 = 6,

1650 
	mU_LB_CONTINGENT_BREAK
 = 7,

1651 
	mU_LB_CLOSE_PUNCTUATION
 = 8,

1652 
	mU_LB_COMBINING_MARK
 = 9,

1653 
	mU_LB_CARRIAGE_RETURN
 = 10,

1654 
	mU_LB_EXCLAMATION
 = 11,

1655 
	mU_LB_GLUE
 = 12,

1656 
	mU_LB_HYPHEN
 = 13,

1657 
	mU_LB_IDEOGRAPHIC
 = 14,

1658 
	mU_LB_INSEPERABLE
 = 15,

1660 
	mU_LB_INSEPARABLE
=
U_LB_INSEPERABLE
,

1661 
	mU_LB_INFIX_NUMERIC
 = 16,

1662 
	mU_LB_LINE_FEED
 = 17,

1663 
	mU_LB_NONSTARTER
 = 18,

1664 
	mU_LB_NUMERIC
 = 19,

1665 
	mU_LB_OPEN_PUNCTUATION
 = 20,

1666 
	mU_LB_POSTFIX_NUMERIC
 = 21,

1667 
	mU_LB_PREFIX_NUMERIC
 = 22,

1668 
	mU_LB_QUOTATION
 = 23,

1669 
	mU_LB_COMPLEX_CONTEXT
 = 24,

1670 
	mU_LB_SURROGATE
 = 25,

1671 
	mU_LB_SPACE
 = 26,

1672 
	mU_LB_BREAK_SYMBOLS
 = 27,

1673 
	mU_LB_ZWSPACE
 = 28,

1674 
	mU_LB_NEXT_LINE
 = 29,

1675 
	mU_LB_WORD_JOINER
 = 30,

1676 
	mU_LB_H2
 = 31,

1677 
	mU_LB_H3
 = 32,

1678 
	mU_LB_JL
 = 33,

1679 
	mU_LB_JT
 = 34,

1680 
	mU_LB_JV
 = 35,

1681 
	mU_LB_CLOSE_PARENTHESIS
 = 36,

1682 
	mU_LB_COUNT
 = 37

1683 } 
	tULšeB»ak
;

1691 
	eUNum”icTy³
 {

1692 
	mU_NT_NONE
,

1693 
	mU_NT_DECIMAL
,

1694 
	mU_NT_DIGIT
,

1695 
	mU_NT_NUMERIC
,

1696 
	mU_NT_COUNT


1697 } 
	tUNum”icTy³
;

1705 
	eUHªgulSyÎabËTy³
 {

1706 
	mU_HST_NOT_APPLICABLE
,

1707 
	mU_HST_LEADING_JAMO
,

1708 
	mU_HST_VOWEL_JAMO
,

1709 
	mU_HST_TRAILING_JAMO
,

1710 
	mU_HST_LV_SYLLABLE
,

1711 
	mU_HST_LVT_SYLLABLE
,

1712 
	mU_HST_COUNT


1713 } 
	tUHªgulSyÎabËTy³
;

1741 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1742 
u_hasBš¬yPrİ”ty
(
UCh¬32
 
c
, 
UPrİ”ty
 
which
);

1756 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1757 
u_isUAÍhab‘ic
(
UCh¬32
 
c
);

1771 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1772 
u_isULow”ÿ£
(
UCh¬32
 
c
);

1786 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1787 
u_isUUµ”ÿ£
(
UCh¬32
 
c
);

1807 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1808 
u_isUWh™eS·û
(
UCh¬32
 
c
);

1847 
U_STABLE
 
št32_t
 
U_EXPORT2


1848 
u_g‘IÁPrİ”tyV®ue
(
UCh¬32
 
c
, 
UPrİ”ty
 
which
);

1868 
U_STABLE
 
št32_t
 
U_EXPORT2


1869 
u_g‘IÁPrİ”tyMšV®ue
(
UPrİ”ty
 
which
);

1897 
U_STABLE
 
št32_t
 
U_EXPORT2


1898 
u_g‘IÁPrİ”tyMaxV®ue
(
UPrİ”ty
 
which
);

1920 
U_STABLE
 
U_EXPORT2


1921 
u_g‘Num”icV®ue
(
UCh¬32
 
c
);

1930 
	#U_NO_NUMERIC_VALUE
 (()-123456789.)

	)

1955 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1956 
u_i¦ow”
(
UCh¬32
 
c
);

1982 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1983 
u_isuµ”
(
UCh¬32
 
c
);

1999 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2000 
u_i¡™Ë
(
UCh¬32
 
c
);

2020 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2021 
u_isdig™
(
UCh¬32
 
c
);

2041 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2042 
u_i§Íha
(
UCh¬32
 
c
);

2062 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2063 
u_i§Êum
(
UCh¬32
 
c
);

2085 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2086 
u_isxdig™
(
UCh¬32
 
c
);

2101 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2102 
u_i¥unù
(
UCh¬32
 
c
);

2120 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2121 
u_isg¿ph
(
UCh¬32
 
c
);

2149 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2150 
u_isbÏnk
(
UCh¬32
 
c
);

2174 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2175 
u_isdefšed
(
UCh¬32
 
c
);

2195 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2196 
u_is¥aû
(
UCh¬32
 
c
);

2216 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2217 
u_isJavaS·ûCh¬
(
UCh¬32
 
c
);

2256 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2257 
u_isWh™e¥aû
(
UCh¬32
 
c
);

2280 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2281 
u_isúŒl
(
UCh¬32
 
c
);

2295 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2296 
u_isISOCÚŒŞ
(
UCh¬32
 
c
);

2313 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2314 
u_i¥ršt
(
UCh¬32
 
c
);

2334 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2335 
u_isba£
(
UCh¬32
 
c
);

2353 
U_STABLE
 
UCh¬DœeùiÚ
 
U_EXPORT2


2354 
u_ch¬DœeùiÚ
(
UCh¬32
 
c
);

2371 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2372 
u_isMœrÜed
(
UCh¬32
 
c
);

2393 
U_STABLE
 
UCh¬32
 
U_EXPORT2


2394 
u_ch¬MœrÜ
(
UCh¬32
 
c
);

2407 
U_STABLE
 
št8_t
 
U_EXPORT2


2408 
u_ch¬Ty³
(
UCh¬32
 
c
);

2423 
	#U_GET_GC_MASK
(
c
è
	`U_MASK
(
	`u_ch¬Ty³
(c))

	)

2442 
UBoŞ
 
	tU_CALLCONV


2443 
	tUCh¬EnumTy³Rªge
(cÚ¡ *
	tcÚ‹xt
, 
	tUCh¬32
 
	t¡¬t
, UCh¬32 
	tlim™
, 
	tUCh¬C©egÜy
 
	tty³
);

2464 
U_STABLE
 
U_EXPORT2


2465 
u_’umCh¬Ty³s
(
UCh¬EnumTy³Rªge
 *
’umRªge
, cÚ¡ *
cÚ‹xt
);

2467 #ià!
UCONFIG_NO_NORMALIZATION


2476 
U_STABLE
 
ušt8_t
 
U_EXPORT2


2477 
u_g‘CombššgCÏss
(
UCh¬32
 
c
);

2504 
U_STABLE
 
št32_t
 
U_EXPORT2


2505 
u_ch¬Dig™V®ue
(
UCh¬32
 
c
);

2516 
U_STABLE
 
UBlockCode
 
U_EXPORT2


2517 
ublock_g‘Code
(
UCh¬32
 
c
);

2551 
U_STABLE
 
št32_t
 
U_EXPORT2


2552 
u_ch¬Name
(
UCh¬32
 
code
, 
UCh¬NameChoiû
 
ÇmeChoiû
,

2553 *
bufãr
, 
št32_t
 
bufãrL’gth
,

2554 
UE¼ÜCode
 *
pE¼ÜCode
);

2581 
U_STABLE
 
št32_t
 
U_EXPORT2


2582 
u_g‘ISOComm’t
(
UCh¬32
 
c
,

2583 *
de¡
, 
št32_t
 
de¡C­ac™y
,

2584 
UE¼ÜCode
 *
pE¼ÜCode
);

2606 
U_STABLE
 
UCh¬32
 
U_EXPORT2


2607 
u_ch¬FromName
(
UCh¬NameChoiû
 
ÇmeChoiû
,

2608 cÚ¡ *
Çme
,

2609 
UE¼ÜCode
 *
pE¼ÜCode
);

2628 
UBoŞ
 
	tU_CALLCONV
 
	tUEnumCh¬NamesFn
(*
	tcÚ‹xt
,

2629 
	tUCh¬32
 
	tcode
,

2630 
	tUCh¬NameChoiû
 
	tÇmeChoiû
,

2631 cÚ¡ *
	tÇme
,

2632 
	tšt32_t
 
	tËngth
);

2655 
U_STABLE
 
U_EXPORT2


2656 
u_’umCh¬Names
(
UCh¬32
 
¡¬t
, UCh¬32 
lim™
,

2657 
UEnumCh¬NamesFn
 *
â
,

2658 *
cÚ‹xt
,

2659 
UCh¬NameChoiû
 
ÇmeChoiû
,

2660 
UE¼ÜCode
 *
pE¼ÜCode
);

2693 
U_STABLE
 cÚ¡ * 
U_EXPORT2


2694 
u_g‘Prİ”tyName
(
UPrİ”ty
 
´İ”ty
,

2695 
UPrİ”tyNameChoiû
 
ÇmeChoiû
);

2716 
U_STABLE
 
UPrİ”ty
 
U_EXPORT2


2717 
u_g‘Prİ”tyEnum
(cÚ¡ * 
®Ÿs
);

2766 
U_STABLE
 cÚ¡ * 
U_EXPORT2


2767 
u_g‘Prİ”tyV®ueName
(
UPrİ”ty
 
´İ”ty
,

2768 
št32_t
 
v®ue
,

2769 
UPrİ”tyNameChoiû
 
ÇmeChoiû
);

2802 
U_STABLE
 
št32_t
 
U_EXPORT2


2803 
u_g‘Prİ”tyV®ueEnum
(
UPrİ”ty
 
´İ”ty
,

2804 cÚ¡ * 
®Ÿs
);

2823 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2824 
u_isIDS¹
(
UCh¬32
 
c
);

2847 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2848 
u_isIDP¬t
(
UCh¬32
 
c
);

2870 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2871 
u_isIDIgnÜabË
(
UCh¬32
 
c
);

2889 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2890 
u_isJavaIDS¹
(
UCh¬32
 
c
);

2910 
U_STABLE
 
UBoŞ
 
U_EXPORT2


2911 
u_isJavaIDP¬t
(
UCh¬32
 
c
);

2935 
U_STABLE
 
UCh¬32
 
U_EXPORT2


2936 
u_tŞow”
(
UCh¬32
 
c
);

2960 
U_STABLE
 
UCh¬32
 
U_EXPORT2


2961 
u_touµ”
(
UCh¬32
 
c
);

2985 
U_STABLE
 
UCh¬32
 
U_EXPORT2


2986 
u_tÙ™Ë
(
UCh¬32
 
c
);

2989 
	#U_FOLD_CASE_DEFAULT
 0

	)

3007 
	#U_FOLD_CASE_EXCLUDE_SPECIAL_I
 1

	)

3031 
U_STABLE
 
UCh¬32
 
U_EXPORT2


3032 
u_fŞdCa£
(
UCh¬32
 
c
, 
ušt32_t
 
İtiÚs
);

3072 
U_STABLE
 
št32_t
 
U_EXPORT2


3073 
u_dig™
(
UCh¬32
 
ch
, 
št8_t
 
¿dix
);

3103 
U_STABLE
 
UCh¬32
 
U_EXPORT2


3104 
u_fÜDig™
(
št32_t
 
dig™
, 
št8_t
 
¿dix
);

3120 
U_STABLE
 
U_EXPORT2


3121 
u_ch¬Age
(
UCh¬32
 
c
, 
UV”siÚInfo
 
v”siÚA¼ay
);

3134 
U_STABLE
 
U_EXPORT2


3135 
u_g‘UnicodeV”siÚ
(
UV”siÚInfo
 
v”siÚA¼ay
);

3137 #ià!
UCONFIG_NO_NORMALIZATION


3159 
U_STABLE
 
št32_t
 
U_EXPORT2


3160 
u_g‘FC_NFKC_Closu»
(
UCh¬32
 
c
, 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
, 
UE¼ÜCode
 *
pE¼ÜCode
);

3165 
	gU_CDECL_END


	@unicode/uchriter.h

8 #iâdeà
UCHRITER_H


9 
	#UCHRITER_H


	)

11 
	~"unicode/uty³s.h
"

12 
	~"unicode/ch¬™”.h
"

19 
U_NAMESPACE_BEGIN


33 şas 
	cU_COMMON_API
 
	mUCh¬Ch¬aù”I‹¿tÜ
 : 
public
 
Ch¬aù”I‹¿tÜ
 {

34 
public
:

44 
UCh¬Ch¬aù”I‹¿tÜ
(cÚ¡ 
UCh¬
* 
‹xtPŒ
, 
št32_t
 
Ëngth
);

59 
UCh¬Ch¬aù”I‹¿tÜ
(cÚ¡ 
UCh¬
* 
‹xtPŒ
, 
št32_t
 
Ëngth
,

60 
št32_t
 
pos™iÚ
);

78 
UCh¬Ch¬aù”I‹¿tÜ
(cÚ¡ 
UCh¬
* 
‹xtPŒ
, 
št32_t
 
Ëngth
,

79 
št32_t
 
‹xtBegš
,

80 
št32_t
 
‹xtEnd
,

81 
št32_t
 
pos™iÚ
);

90 
UCh¬Ch¬aù”I‹¿tÜ
(cÚ¡ UCh¬Ch¬aù”I‹¿tÜ& 
th©
);

96 
	mvœtu®
 ~
UCh¬Ch¬aù”I‹¿tÜ
();

106 
	mUCh¬Ch¬aù”I‹¿tÜ
&

107 
	mİ”©Ü
=(cÚ¡ 
UCh¬Ch¬aù”I‹¿tÜ
& 
th©
);

117 
vœtu®
 
UBoŞ
 
	mİ”©Ü
==(cÚ¡ 
FÜw¬dCh¬aù”I‹¿tÜ
& 
th©
) const;

124 
vœtu®
 
št32_t
 
	$hashCode
() const;

133 
vœtu®
 
Ch¬aù”I‹¿tÜ
* 
	$şÚe
() const;

142 
vœtu®
 
UCh¬
 
	`fœ¡
();

152 
vœtu®
 
UCh¬
 
	`fœ¡Po¡Inc
();

163 
vœtu®
 
UCh¬32
 
	`fœ¡32
();

173 
vœtu®
 
UCh¬32
 
	`fœ¡32Po¡Inc
();

182 
vœtu®
 
UCh¬
 
	`Ï¡
();

191 
vœtu®
 
UCh¬32
 
	`Ï¡32
();

201 
vœtu®
 
UCh¬
 
	`£tIndex
(
št32_t
 
pos™iÚ
);

214 
vœtu®
 
UCh¬32
 
	`£tIndex32
(
št32_t
 
pos™iÚ
);

221 
vœtu®
 
UCh¬
 
	$cu¼’t
() const;

228 
vœtu®
 
UCh¬32
 
	$cu¼’t32
() const;

237 
vœtu®
 
UCh¬
 
	`Ãxt
();

247 
vœtu®
 
UCh¬
 
	`ÃxtPo¡Inc
();

259 
vœtu®
 
UCh¬32
 
	`Ãxt32
();

269 
vœtu®
 
UCh¬32
 
	`Ãxt32Po¡Inc
();

280 
vœtu®
 
UBoŞ
 
	`hasNext
();

289 
vœtu®
 
UCh¬
 
	`´evious
();

298 
vœtu®
 
UCh¬32
 
	`´evious32
();

309 
vœtu®
 
UBoŞ
 
	`hasP»vious
();

322 
vœtu®
 
št32_t
 
	`move
(št32_ˆ
d–
, 
EOrigš
 
Üigš
);

335 
vœtu®
 
št32_t
 
	`move32
(št32_ˆ
d–
, 
EOrigš
 
Üigš
);

341 
	`£tText
(cÚ¡ 
UCh¬
* 
ÃwText
, 
št32_t
 
ÃwTextL’gth
);

350 
vœtu®
 
	`g‘Text
(
UnicodeSŒšg
& 
»suÉ
);

357 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

364 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

366 
´Ùeùed
:

371 
	`UCh¬Ch¬aù”I‹¿tÜ
();

376 cÚ¡ 
UCh¬
* 
‹xt
;

380 
U_NAMESPACE_END


	@unicode/uclean.h

17 #iâdeà
__UCLEAN_H__


18 
	#__UCLEAN_H__


	)

20 
	~"unicode/uty³s.h
"

52 
U_STABLE
 
U_EXPORT2


53 
u_š™
(
UE¼ÜCode
 *
¡©us
);

100 
U_STABLE
 
U_EXPORT2


101 
u_ş—nup
();

113 *
	tUMTX
;

131 
	tU_CALLCONV
 
	tUMtxIn™Fn
 (cÚ¡ *
	tcÚ‹xt
, 
	tUMTX
 *
	tmu‹x
, 
	tUE¼ÜCode
* 
	t¡©us
);

143 
	tU_CALLCONV
 
	tUMtxFn
 (cÚ¡ *
	tcÚ‹xt
, 
	tUMTX
 *
	tmu‹x
);

165 
U_STABLE
 
U_EXPORT2


166 
u_£tMu‹xFunùiÚs
(cÚ¡ *
cÚ‹xt
, 
UMtxIn™Fn
 *
š™
, 
UMtxFn
 *
de¡roy
, UMtxFÀ*
lock
, UMtxFÀ*
uÆock
,

167 
UE¼ÜCode
 *
¡©us
);

178 
št32_t
 
	tU_CALLCONV
 
	tUMtxAtomicFn
(cÚ¡ *
	tcÚ‹xt
, 
	tšt32_t
 *
	tp
);

195 
U_STABLE
 
U_EXPORT2


196 
u_£tAtomicIncDecFunùiÚs
(cÚ¡ *
cÚ‹xt
, 
UMtxAtomicFn
 *
šc
, UMtxAtomicFÀ*
dec
,

197 
UE¼ÜCode
 *
¡©us
);

209 *
	tU_CALLCONV
 
	tUMemAÎocFn
(cÚ¡ *
	tcÚ‹xt
, 
	tsize_t
 
	tsize
);

218 *
	tU_CALLCONV
 
	tUMemR—ÎocFn
(cÚ¡ *
	tcÚ‹xt
, *
	tmem
, 
	tsize_t
 
	tsize
);

229 
	tU_CALLCONV
 
	tUMemF»eFn
 (cÚ¡ *
	tcÚ‹xt
, *
	tmem
);

247 
U_STABLE
 
U_EXPORT2


248 
u_£tMemÜyFunùiÚs
(cÚ¡ *
cÚ‹xt
, 
UMemAÎocFn
 *
a
, 
UMemR—ÎocFn
 *
r
, 
UMemF»eFn
 *
f
,

249 
UE¼ÜCode
 *
¡©us
);

	@unicode/ucnv.h

47 #iâdeà
UCNV_H


48 
	#UCNV_H


	)

50 
	~"unicode/uúv_”r.h
"

51 
	~"unicode/u’um.h
"

52 
	~"unicode/loÿÍoš‹r.h
"

54 #iâdeà
__USET_H__


65 
	gUS‘
;

67 
US‘
 
	tUS‘
;

71 #ià!
UCONFIG_NO_CONVERSION


73 
	gU_CDECL_BEGIN


76 
	#UCNV_MAX_CONVERTER_NAME_LENGTH
 60

	)

78 
	#UCNV_MAX_FULL_FILE_NAME_LENGTH
 (600+
UCNV_MAX_CONVERTER_NAME_LENGTH
)

	)

81 
	#UCNV_SI
 0x0F

	)

83 
	#UCNV_SO
 0x0E

	)

91 
	mUCNV_UNSUPPORTED_CONVERTER
 = -1,

92 
	mUCNV_SBCS
 = 0,

93 
	mUCNV_DBCS
 = 1,

94 
	mUCNV_MBCS
 = 2,

95 
	mUCNV_LATIN_1
 = 3,

96 
	mUCNV_UTF8
 = 4,

97 
	mUCNV_UTF16_BigEndŸn
 = 5,

98 
	mUCNV_UTF16_L™eEndŸn
 = 6,

99 
	mUCNV_UTF32_BigEndŸn
 = 7,

100 
	mUCNV_UTF32_L™eEndŸn
 = 8,

101 
	mUCNV_EBCDIC_STATEFUL
 = 9,

102 
	mUCNV_ISO_2022
 = 10,

104 
	mUCNV_LMBCS_1
 = 11,

105 
	mUCNV_LMBCS_2
,

106 
	mUCNV_LMBCS_3
,

107 
	mUCNV_LMBCS_4
,

108 
	mUCNV_LMBCS_5
,

109 
	mUCNV_LMBCS_6
,

110 
	mUCNV_LMBCS_8
,

111 
	mUCNV_LMBCS_11
,

112 
	mUCNV_LMBCS_16
,

113 
	mUCNV_LMBCS_17
,

114 
	mUCNV_LMBCS_18
,

115 
	mUCNV_LMBCS_19
,

116 
	mUCNV_LMBCS_LAST
 = 
UCNV_LMBCS_19
,

117 
	mUCNV_HZ
,

118 
	mUCNV_SCSU
,

119 
	mUCNV_ISCII
,

120 
	mUCNV_US_ASCII
,

121 
	mUCNV_UTF7
,

122 
	mUCNV_BOCU1
,

123 
	mUCNV_UTF16
,

124 
	mUCNV_UTF32
,

125 
	mUCNV_CESU8
,

126 
	mUCNV_IMAP_MAILBOX
,

129 
	mUCNV_NUMBER_OF_SUPPORTED_CONVERTER_TYPES


131 } 
	tUCÚv”‹rTy³
;

143 
	mUCNV_UNKNOWN
 = -1,

144 
	mUCNV_IBM
 = 0

145 } 
	tUCÚv”‹rPÏtfÜm
;

162 (
	tU_EXPORT2
 *
	tUCÚv”‹rToUC®lback
) (

163 cÚ¡ * 
	tcÚ‹xt
,

164 
	tUCÚv”‹rToUnicodeArgs
 *
	t¬gs
,

165 cÚ¡ *
	tcodeUn™s
,

166 
	tšt32_t
 
	tËngth
,

167 
	tUCÚv”‹rC®lbackR—sÚ
 
	t»asÚ
,

168 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

185 (
	tU_EXPORT2
 *
	tUCÚv”‹rFromUC®lback
) (

186 cÚ¡ * 
	tcÚ‹xt
,

187 
	tUCÚv”‹rFromUnicodeArgs
 *
	t¬gs
,

188 cÚ¡ 
	tUCh¬
* 
	tcodeUn™s
,

189 
	tšt32_t
 
	tËngth
,

190 
	tUCh¬32
 
	tcodePošt
,

191 
	tUCÚv”‹rC®lbackR—sÚ
 
	t»asÚ
,

192 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

194 
U_CDECL_END


201 
	#UCNV_OPTION_SEP_CHAR
 ','

	)

208 
	#UCNV_OPTION_SEP_STRING
 ","

	)

215 
	#UCNV_VALUE_SEP_CHAR
 '='

	)

222 
	#UCNV_VALUE_SEP_STRING
 "="

	)

232 
	#UCNV_LOCALE_OPTION_STRING
 ",loÿË="

	)

245 
	#UCNV_VERSION_OPTION_STRING
 ",v”siÚ="

	)

257 
	#UCNV_SWAP_LFNL_OPTION_STRING
 ",sw­lâl"

	)

274 
U_STABLE
 
U_EXPORT2


275 
	`uúv_com·»Names
(cÚ¡ *
Çme1
, cÚ¡ *
Çme2
);

326 
U_STABLE
 
UCÚv”‹r
* 
U_EXPORT2


327 
	`uúv_İ’
(cÚ¡ *
cÚv”‹rName
, 
UE¼ÜCode
 *
”r
);

356 
U_STABLE
 
UCÚv”‹r
* 
U_EXPORT2


357 
	`uúv_İ’U
(cÚ¡ 
UCh¬
 *
Çme
,

358 
UE¼ÜCode
 *
”r
);

424 
U_STABLE
 
UCÚv”‹r
* 
U_EXPORT2


425 
	`uúv_İ’CCSID
(
št32_t
 
cod•age
,

426 
UCÚv”‹rPÏtfÜm
 
¶©fÜm
,

427 
UE¼ÜCode
 * 
”r
);

459 
U_STABLE
 
UCÚv”‹r
* 
U_EXPORT2


460 
	`uúv_İ’Package
(cÚ¡ *
·ckageName
, cÚ¡ *
cÚv”‹rName
, 
UE¼ÜCode
 *
”r
);

499 
U_STABLE
 
UCÚv”‹r
 * 
U_EXPORT2


500 
	`uúv_§ãClÚe
(cÚ¡ 
UCÚv”‹r
 *
úv
,

501 *
¡ackBufãr
,

502 
št32_t
 *
pBufãrSize
,

503 
UE¼ÜCode
 *
¡©us
);

511 
	#U_CNV_SAFECLONE_BUFFERSIZE
 1024

	)

524 
U_STABLE
 
U_EXPORT2


525 
	`uúv_şo£
(
UCÚv”‹r
 * 
cÚv”‹r
);

527 #ià
U_SHOW_CPLUSPLUS_API


529 
U_NAMESPACE_BEGIN


540 
	`U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUCÚv”‹rPoš‹r
, 
UCÚv”‹r
, 
uúv_şo£
);

542 
U_NAMESPACE_END


563 
U_STABLE
 
U_EXPORT2


564 
	`uúv_g‘Sub¡Ch¬s
(cÚ¡ 
UCÚv”‹r
 *
cÚv”‹r
,

565 *
subCh¬s
,

566 
št8_t
 *
Ën
,

567 
UE¼ÜCode
 *
”r
);

588 
U_STABLE
 
U_EXPORT2


589 
	`uúv_£tSub¡Ch¬s
(
UCÚv”‹r
 *
cÚv”‹r
,

590 cÚ¡ *
subCh¬s
,

591 
št8_t
 
Ën
,

592 
UE¼ÜCode
 *
”r
);

621 
U_STABLE
 
U_EXPORT2


622 
	`uúv_£tSub¡SŒšg
(
UCÚv”‹r
 *
úv
,

623 cÚ¡ 
UCh¬
 *
s
,

624 
št32_t
 
Ëngth
,

625 
UE¼ÜCode
 *
”r
);

640 
U_STABLE
 
U_EXPORT2


641 
	`uúv_g‘Inv®idCh¬s
(cÚ¡ 
UCÚv”‹r
 *
cÚv”‹r
,

642 *
”rBy‹s
,

643 
št8_t
 *
Ën
,

644 
UE¼ÜCode
 *
”r
);

659 
U_STABLE
 
U_EXPORT2


660 
	`uúv_g‘Inv®idUCh¬s
(cÚ¡ 
UCÚv”‹r
 *
cÚv”‹r
,

661 
UCh¬
 *
”rUCh¬s
,

662 
št8_t
 *
Ën
,

663 
UE¼ÜCode
 *
”r
);

672 
U_STABLE
 
U_EXPORT2


673 
	`uúv_»£t
(
UCÚv”‹r
 *
cÚv”‹r
);

683 
U_STABLE
 
U_EXPORT2


684 
	`uúv_»£tToUnicode
(
UCÚv”‹r
 *
cÚv”‹r
);

694 
U_STABLE
 
U_EXPORT2


695 
	`uúv_»£tFromUnicode
(
UCÚv”‹r
 *
cÚv”‹r
);

745 
U_STABLE
 
št8_t
 
U_EXPORT2


746 
	`uúv_g‘MaxCh¬Size
(cÚ¡ 
UCÚv”‹r
 *
cÚv”‹r
);

767 
	#UCNV_GET_MAX_BYTES_FOR_STRING
(
Ëngth
, 
maxCh¬Size
) \

768 (((
št32_t
)(
Ëngth
)+10)*(št32_t)(
maxCh¬Size
))

	)

778 
U_STABLE
 
št8_t
 
U_EXPORT2


779 
	`uúv_g‘MšCh¬Size
(cÚ¡ 
UCÚv”‹r
 *
cÚv”‹r
);

795 
U_STABLE
 
št32_t
 
U_EXPORT2


796 
	`uúv_g‘Di¥ÏyName
(cÚ¡ 
UCÚv”‹r
 *
cÚv”‹r
,

797 cÚ¡ *
di¥ÏyLoÿË
,

798 
UCh¬
 *
di¥ÏyName
,

799 
št32_t
 
di¥ÏyNameC­ac™y
,

800 
UE¼ÜCode
 *
”r
);

812 
U_STABLE
 cÚ¡ * 
U_EXPORT2


813 
	`uúv_g‘Name
(cÚ¡ 
UCÚv”‹r
 *
cÚv”‹r
, 
UE¼ÜCode
 *
”r
);

838 
U_STABLE
 
št32_t
 
U_EXPORT2


839 
	`uúv_g‘CCSID
(cÚ¡ 
UCÚv”‹r
 *
cÚv”‹r
,

840 
UE¼ÜCode
 *
”r
);

852 
U_STABLE
 
UCÚv”‹rPÏtfÜm
 
U_EXPORT2


853 
	`uúv_g‘PÏtfÜm
(cÚ¡ 
UCÚv”‹r
 *
cÚv”‹r
,

854 
UE¼ÜCode
 *
”r
);

864 
U_STABLE
 
UCÚv”‹rTy³
 
U_EXPORT2


865 
	`uúv_g‘Ty³
(cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
);

882 
U_STABLE
 
U_EXPORT2


883 
	`uúv_g‘S¹”s
(cÚ¡ 
UCÚv”‹r
* 
cÚv”‹r
,

884 
UBoŞ
 
¡¬‹rs
[256],

885 
UE¼ÜCode
* 
”r
);

893 
	eUCÚv”‹rUnicodeS‘
 {

895 
UCNV_ROUNDTRIP_SET
,

897 
UCNV_ROUNDTRIP_AND_FALLBACK_SET
,

899 
UCNV_SET_COUNT


900 } 
	tUCÚv”‹rUnicodeS‘
;

948 
U_STABLE
 
U_EXPORT2


949 
	`uúv_g‘UnicodeS‘
(cÚ¡ 
UCÚv”‹r
 *
úv
,

950 
US‘
 *
£tFlIn
,

951 
UCÚv”‹rUnicodeS‘
 
whichS‘
,

952 
UE¼ÜCode
 *
pE¼ÜCode
);

965 
U_STABLE
 
U_EXPORT2


966 
	`uúv_g‘ToUC®lBack
 (cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
,

967 
UCÚv”‹rToUC®lback
 *
aùiÚ
,

968 cÚ¡ **
cÚ‹xt
);

981 
U_STABLE
 
U_EXPORT2


982 
	`uúv_g‘FromUC®lBack
 (cÚ¡ 
UCÚv”‹r
 * 
cÚv”‹r
,

983 
UCÚv”‹rFromUC®lback
 *
aùiÚ
,

984 cÚ¡ **
cÚ‹xt
);

1001 
U_STABLE
 
U_EXPORT2


1002 
	`uúv_£tToUC®lBack
 (
UCÚv”‹r
 * 
cÚv”‹r
,

1003 
UCÚv”‹rToUC®lback
 
ÃwAùiÚ
,

1004 cÚ¡ * 
ÃwCÚ‹xt
,

1005 
UCÚv”‹rToUC®lback
 *
ŞdAùiÚ
,

1006 cÚ¡ ** 
ŞdCÚ‹xt
,

1007 
UE¼ÜCode
 * 
”r
);

1024 
U_STABLE
 
U_EXPORT2


1025 
	`uúv_£tFromUC®lBack
 (
UCÚv”‹r
 * 
cÚv”‹r
,

1026 
UCÚv”‹rFromUC®lback
 
ÃwAùiÚ
,

1027 cÚ¡ *
ÃwCÚ‹xt
,

1028 
UCÚv”‹rFromUC®lback
 *
ŞdAùiÚ
,

1029 cÚ¡ **
ŞdCÚ‹xt
,

1030 
UE¼ÜCode
 * 
”r
);

1090 
U_STABLE
 
U_EXPORT2


1091 
	`uúv_äomUnicode
 (
UCÚv”‹r
 * 
cÚv”‹r
,

1092 **
rg‘
,

1093 cÚ¡ *
rg‘Lim™
,

1094 cÚ¡ 
UCh¬
 ** 
sourû
,

1095 cÚ¡ 
UCh¬
 * 
sourûLim™
,

1096 
št32_t
* 
off£ts
,

1097 
UBoŞ
 
æush
,

1098 
UE¼ÜCode
 * 
”r
);

1159 
U_STABLE
 
U_EXPORT2


1160 
	`uúv_toUnicode
(
UCÚv”‹r
 *
cÚv”‹r
,

1161 
UCh¬
 **
rg‘
,

1162 cÚ¡ 
UCh¬
 *
rg‘Lim™
,

1163 cÚ¡ **
sourû
,

1164 cÚ¡ *
sourûLim™
,

1165 
št32_t
 *
off£ts
,

1166 
UBoŞ
 
æush
,

1167 
UE¼ÜCode
 *
”r
);

1196 
U_STABLE
 
št32_t
 
U_EXPORT2


1197 
	`uúv_äomUCh¬s
(
UCÚv”‹r
 *
úv
,

1198 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1199 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

1200 
UE¼ÜCode
 *
pE¼ÜCode
);

1228 
U_STABLE
 
št32_t
 
U_EXPORT2


1229 
	`uúv_toUCh¬s
(
UCÚv”‹r
 *
úv
,

1230 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1231 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

1232 
UE¼ÜCode
 *
pE¼ÜCode
);

1304 
U_STABLE
 
UCh¬32
 
U_EXPORT2


1305 
	`uúv_g‘NextUCh¬
(
UCÚv”‹r
 * 
cÚv”‹r
,

1306 cÚ¡ **
sourû
,

1307 cÚ¡ * 
sourûLim™
,

1308 
UE¼ÜCode
 * 
”r
);

1448 
U_STABLE
 
U_EXPORT2


1449 
	`uúv_cÚv”tEx
(
UCÚv”‹r
 *
rg‘Cnv
, UCÚv”‹¸*
sourûCnv
,

1450 **
rg‘
, cÚ¡ *
rg‘Lim™
,

1451 cÚ¡ **
sourû
, cÚ¡ *
sourûLim™
,

1452 
UCh¬
 *
pivÙS¹
, UCh¬ **
pivÙSourû
,

1453 
UCh¬
 **
pivÙT¬g‘
, cÚ¡ UCh¬ *
pivÙLim™
,

1454 
UBoŞ
 
»£t
, UBoŞ 
æush
,

1455 
UE¼ÜCode
 *
pE¼ÜCode
);

1512 
U_STABLE
 
št32_t
 
U_EXPORT2


1513 
	`uúv_cÚv”t
(cÚ¡ *
toCÚv”‹rName
,

1514 cÚ¡ *
äomCÚv”‹rName
,

1515 *
rg‘
,

1516 
št32_t
 
rg‘C­ac™y
,

1517 cÚ¡ *
sourû
,

1518 
št32_t
 
sourûL’gth
,

1519 
UE¼ÜCode
 *
pE¼ÜCode
);

1566 
U_STABLE
 
št32_t
 
U_EXPORT2


1567 
	`uúv_toAlgÜ™hmic
(
UCÚv”‹rTy³
 
®gÜ™hmicTy³
,

1568 
UCÚv”‹r
 *
úv
,

1569 *
rg‘
, 
št32_t
 
rg‘C­ac™y
,

1570 cÚ¡ *
sourû
, 
št32_t
 
sourûL’gth
,

1571 
UE¼ÜCode
 *
pE¼ÜCode
);

1618 
U_STABLE
 
št32_t
 
U_EXPORT2


1619 
	`uúv_äomAlgÜ™hmic
(
UCÚv”‹r
 *
úv
,

1620 
UCÚv”‹rTy³
 
®gÜ™hmicTy³
,

1621 *
rg‘
, 
št32_t
 
rg‘C­ac™y
,

1622 cÚ¡ *
sourû
, 
št32_t
 
sourûL’gth
,

1623 
UE¼ÜCode
 *
pE¼ÜCode
);

1632 
U_STABLE
 
št32_t
 
U_EXPORT2


1633 
	`uúv_æushCache
();

1642 
U_STABLE
 
št32_t
 
U_EXPORT2


1643 
	`uúv_couÁAvaabË
();

1655 
U_STABLE
 cÚ¡ * 
U_EXPORT2


1656 
	`uúv_g‘AvaabËName
(
št32_t
 
n
);

1670 
U_STABLE
 
UEnum”©iÚ
 * 
U_EXPORT2


1671 
	`uúv_İ’AÎNames
(
UE¼ÜCode
 *
pE¼ÜCode
);

1683 
U_STABLE
 
ušt16_t
 
U_EXPORT2


1684 
	`uúv_couÁAlŸ£s
(cÚ¡ *
®Ÿs
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1698 
U_STABLE
 cÚ¡ * 
U_EXPORT2


1699 
	`uúv_g‘AlŸs
(cÚ¡ *
®Ÿs
, 
ušt16_t
 
n
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1714 
U_STABLE
 
U_EXPORT2


1715 
	`uúv_g‘AlŸ£s
(cÚ¡ *
®Ÿs
, cÚ¡ **
®Ÿ£s
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1740 
U_STABLE
 
UEnum”©iÚ
 * 
U_EXPORT2


1741 
	`uúv_İ’Snd¬dNames
(cÚ¡ *
cÚvName
,

1742 cÚ¡ *
¡ªd¬d
,

1743 
UE¼ÜCode
 *
pE¼ÜCode
);

1750 
U_STABLE
 
ušt16_t
 
U_EXPORT2


1751 
	`uúv_couÁSnd¬ds
();

1760 
U_STABLE
 cÚ¡ * 
U_EXPORT2


1761 
	`uúv_g‘Snd¬d
(
ušt16_t
 
n
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1782 
U_STABLE
 cÚ¡ * 
U_EXPORT2


1783 
	`uúv_g‘Snd¬dName
(cÚ¡ *
Çme
, cÚ¡ *
¡ªd¬d
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1804 
U_STABLE
 cÚ¡ * 
U_EXPORT2


1805 
	`uúv_g‘CªÚiÿlName
(cÚ¡ *
®Ÿs
, cÚ¡ *
¡ªd¬d
, 
UE¼ÜCode
 *
pE¼ÜCode
);

1821 
U_STABLE
 cÚ¡ * 
U_EXPORT2


1822 
	`uúv_g‘DeçuÉName
();

1840 
U_STABLE
 
U_EXPORT2


1841 
	`uúv_£tDeçuÉName
(cÚ¡ *
Çme
);

1860 
U_STABLE
 
U_EXPORT2


1861 
	`uúv_fixFeS•¬©Ü
(cÚ¡ 
UCÚv”‹r
 *
úv
, 
UCh¬
 *
sourû
, 
št32_t
 
sourûL’
);

1871 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1872 
	`uúv_isAmbiguous
(cÚ¡ 
UCÚv”‹r
 *
úv
);

1889 
U_STABLE
 
U_EXPORT2


1890 
	`uúv_£tF®lback
(
UCÚv”‹r
 *
úv
, 
UBoŞ
 
u£sF®lback
);

1901 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1902 
	`uúv_u£sF®lback
(cÚ¡ 
UCÚv”‹r
 *
úv
);

1960 
U_STABLE
 cÚ¡ * 
U_EXPORT2


1961 
	`uúv_d‘eùUnicodeSigÇtu»
(cÚ¡ * 
sourû
,

1962 
št32_t
 
sourûL’gth
,

1963 
št32_t
 *
sigÇtu»L’gth
,

1964 
UE¼ÜCode
 *
pE¼ÜCode
);

1977 
U_STABLE
 
št32_t
 
U_EXPORT2


1978 
	`uúv_äomUCouÁP’dšg
(cÚ¡ 
UCÚv”‹r
* 
úv
, 
UE¼ÜCode
* 
¡©us
);

1991 
U_STABLE
 
št32_t
 
U_EXPORT2


1992 
	`uúv_toUCouÁP’dšg
(cÚ¡ 
UCÚv”‹r
* 
úv
, 
UE¼ÜCode
* 
¡©us
);

	@unicode/ucnv_cb.h

61 #iâdeà
UCNV_CB_H


62 
	#UCNV_CB_H


	)

64 
	~"unicode/uty³s.h
"

66 #ià!
UCONFIG_NO_CONVERSION


68 
	~"unicode/uúv.h
"

69 
	~"unicode/uúv_”r.h
"

85 
U_STABLE
 
U_EXPORT2


86 
uúv_cbFromUWr™eBy‹s
 (
UCÚv”‹rFromUnicodeArgs
 *
¬gs
,

87 cÚ¡ * 
sourû
,

88 
št32_t
 
Ëngth
,

89 
št32_t
 
off£tIndex
,

90 
UE¼ÜCode
 * 
”r
);

105 
U_STABLE
 
U_EXPORT2


106 
uúv_cbFromUWr™eSub
 (
UCÚv”‹rFromUnicodeArgs
 *
¬gs
,

107 
št32_t
 
off£tIndex
,

108 
UE¼ÜCode
 * 
”r
);

122 
U_STABLE
 
U_EXPORT2
 
uúv_cbFromUWr™eUCh¬s
(
UCÚv”‹rFromUnicodeArgs
 *
¬gs
,

123 cÚ¡ 
UCh¬
** 
sourû
,

124 cÚ¡ 
UCh¬
* 
sourûLim™
,

125 
št32_t
 
off£tIndex
,

126 
UE¼ÜCode
 * 
”r
);

141 
U_STABLE
 
U_EXPORT2
 
uúv_cbToUWr™eUCh¬s
 (
UCÚv”‹rToUnicodeArgs
 *
¬gs
,

142 cÚ¡ 
UCh¬
* 
sourû
,

143 
št32_t
 
Ëngth
,

144 
št32_t
 
off£tIndex
,

145 
UE¼ÜCode
 * 
”r
);

157 
U_STABLE
 
U_EXPORT2
 
uúv_cbToUWr™eSub
 (
UCÚv”‹rToUnicodeArgs
 *
¬gs
,

158 
št32_t
 
off£tIndex
,

159 
UE¼ÜCode
 * 
”r
);

	@unicode/ucnv_err.h

83 #iâdeà
UCNV_ERR_H


84 
	#UCNV_ERR_H


	)

86 
	~"unicode/uty³s.h
"

88 #ià!
UCONFIG_NO_CONVERSION


91 
	gUCÚv”‹r
;

94 
UCÚv”‹r
 
	tUCÚv”‹r
;

100 
	#UCNV_SUB_STOP_ON_ILLEGAL
 "i"

	)

106 
	#UCNV_SKIP_STOP_ON_ILLEGAL
 "i"

	)

112 
	#UCNV_ESCAPE_ICU
 
NULL


	)

117 
	#UCNV_ESCAPE_JAVA
 "J"

	)

123 
	#UCNV_ESCAPE_C
 "C"

	)

129 
	#UCNV_ESCAPE_XML_DEC
 "D"

	)

135 
	#UCNV_ESCAPE_XML_HEX
 "X"

	)

140 
	#UCNV_ESCAPE_UNICODE
 "U"

	)

147 
	#UCNV_ESCAPE_CSS2
 "S"

	)

156 
	mUCNV_UNASSIGNED
 = 0,

158 
	mUCNV_ILLEGAL
 = 1,

166 
	mUCNV_IRREGULAR
 = 2,

171 
	mUCNV_RESET
 = 3,

174 
	mUCNV_CLOSE
 = 4,

176 
	mUCNV_CLONE
 = 5

185 } 
	tUCÚv”‹rC®lbackR—sÚ
;

193 
ušt16_t
 
	msize
;

194 
UBoŞ
 
	mæush
;

195 
UCÚv”‹r
 *
	mcÚv”‹r
;

196 cÚ¡ 
UCh¬
 *
	msourû
;

197 cÚ¡ 
UCh¬
 *
	msourûLim™
;

198 *
	mrg‘
;

199 cÚ¡ *
	mrg‘Lim™
;

200 
št32_t
 *
	moff£ts
;

201 } 
	tUCÚv”‹rFromUnicodeArgs
;

209 
ušt16_t
 
	msize
;

210 
UBoŞ
 
	mæush
;

211 
UCÚv”‹r
 *
	mcÚv”‹r
;

212 cÚ¡ *
	msourû
;

213 cÚ¡ *
	msourûLim™
;

214 
UCh¬
 *
	mrg‘
;

215 cÚ¡ 
UCh¬
 *
	mrg‘Lim™
;

216 
št32_t
 *
	moff£ts
;

217 } 
	tUCÚv”‹rToUnicodeArgs
;

234 
U_STABLE
 
U_EXPORT2
 
UCNV_FROM_U_CALLBACK_STOP
 (

235 cÚ¡ *
cÚ‹xt
,

236 
UCÚv”‹rFromUnicodeArgs
 *
äomUArgs
,

237 cÚ¡ 
UCh¬
* 
codeUn™s
,

238 
št32_t
 
Ëngth
,

239 
UCh¬32
 
codePošt
,

240 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

241 
UE¼ÜCode
 * 
”r
);

258 
U_STABLE
 
U_EXPORT2
 
UCNV_TO_U_CALLBACK_STOP
 (

259 cÚ¡ *
cÚ‹xt
,

260 
UCÚv”‹rToUnicodeArgs
 *
toUArgs
,

261 cÚ¡ * 
codeUn™s
,

262 
št32_t
 
Ëngth
,

263 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

264 
UE¼ÜCode
 * 
”r
);

285 
U_STABLE
 
U_EXPORT2
 
UCNV_FROM_U_CALLBACK_SKIP
 (

286 cÚ¡ *
cÚ‹xt
,

287 
UCÚv”‹rFromUnicodeArgs
 *
äomUArgs
,

288 cÚ¡ 
UCh¬
* 
codeUn™s
,

289 
št32_t
 
Ëngth
,

290 
UCh¬32
 
codePošt
,

291 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

292 
UE¼ÜCode
 * 
”r
);

315 
U_STABLE
 
U_EXPORT2
 
UCNV_FROM_U_CALLBACK_SUBSTITUTE
 (

316 cÚ¡ *
cÚ‹xt
,

317 
UCÚv”‹rFromUnicodeArgs
 *
äomUArgs
,

318 cÚ¡ 
UCh¬
* 
codeUn™s
,

319 
št32_t
 
Ëngth
,

320 
UCh¬32
 
codePošt
,

321 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

322 
UE¼ÜCode
 * 
”r
);

371 
U_STABLE
 
U_EXPORT2
 
UCNV_FROM_U_CALLBACK_ESCAPE
 (

372 cÚ¡ *
cÚ‹xt
,

373 
UCÚv”‹rFromUnicodeArgs
 *
äomUArgs
,

374 cÚ¡ 
UCh¬
* 
codeUn™s
,

375 
št32_t
 
Ëngth
,

376 
UCh¬32
 
codePošt
,

377 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

378 
UE¼ÜCode
 * 
”r
);

399 
U_STABLE
 
U_EXPORT2
 
UCNV_TO_U_CALLBACK_SKIP
 (

400 cÚ¡ *
cÚ‹xt
,

401 
UCÚv”‹rToUnicodeArgs
 *
toUArgs
,

402 cÚ¡ * 
codeUn™s
,

403 
št32_t
 
Ëngth
,

404 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

405 
UE¼ÜCode
 * 
”r
);

425 
U_STABLE
 
U_EXPORT2
 
UCNV_TO_U_CALLBACK_SUBSTITUTE
 (

426 cÚ¡ *
cÚ‹xt
,

427 
UCÚv”‹rToUnicodeArgs
 *
toUArgs
,

428 cÚ¡ * 
codeUn™s
,

429 
št32_t
 
Ëngth
,

430 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

431 
UE¼ÜCode
 * 
”r
);

451 
U_STABLE
 
U_EXPORT2
 
UCNV_TO_U_CALLBACK_ESCAPE
 (

452 cÚ¡ *
cÚ‹xt
,

453 
UCÚv”‹rToUnicodeArgs
 *
toUArgs
,

454 cÚ¡ * 
codeUn™s
,

455 
št32_t
 
Ëngth
,

456 
UCÚv”‹rC®lbackR—sÚ
 
»asÚ
,

457 
UE¼ÜCode
 * 
”r
);

	@unicode/ucnvsel.h

19 #iâdeà
__ICU_UCNV_SEL_H__


20 
	#__ICU_UCNV_SEL_H__


	)

22 
	~"unicode/u£t.h
"

23 
	~"unicode/uty³s.h
"

24 
	~"unicode/utf16.h
"

25 
	~"unicode/u’um.h
"

26 
	~"unicode/uúv.h
"

27 
	~"unicode/loÿÍoš‹r.h
"

44 
	gUCÚv”‹rS–eùÜ
;

45 
UCÚv”‹rS–eùÜ
 
	tUCÚv”‹rS–eùÜ
;

70 
U_STABLE
 
UCÚv”‹rS–eùÜ
* 
U_EXPORT2


71 
uúv£l_İ’
(cÚ¡ * cÚ¡* 
cÚv”‹rLi¡
, 
št32_t
 
cÚv”‹rLi¡Size
,

72 cÚ¡ 
US‘
* 
exşudedCodePošts
,

73 cÚ¡ 
UCÚv”‹rUnicodeS‘
 
whichS‘
, 
UE¼ÜCode
* 
¡©us
);

88 
U_STABLE
 
U_EXPORT2


89 
uúv£l_şo£
(
UCÚv”‹rS–eùÜ
 *
£l
);

91 #ià
U_SHOW_CPLUSPLUS_API


93 
U_NAMESPACE_BEGIN


104 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUCÚv”‹rS–eùÜPoš‹r
, 
UCÚv”‹rS–eùÜ
, 
uúv£l_şo£
);

106 
	gU_NAMESPACE_END


125 
U_STABLE
 
UCÚv”‹rS–eùÜ
* 
U_EXPORT2


126 
uúv£l_İ’FromS”Ÿlized
(cÚ¡ * 
bufãr
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
* 
¡©us
);

142 
U_STABLE
 
št32_t
 
U_EXPORT2


143 
uúv£l_£rŸlize
(cÚ¡ 
UCÚv”‹rS–eùÜ
* 
£l
,

144 * 
bufãr
, 
št32_t
 
bufãrC­ac™y
, 
UE¼ÜCode
* 
¡©us
);

160 
U_STABLE
 
UEnum”©iÚ
 * 
U_EXPORT2


161 
uúv£l_£ËùFÜSŒšg
(cÚ¡ 
UCÚv”‹rS–eùÜ
* 
£l
,

162 cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 *
¡©us
);

178 
U_STABLE
 
UEnum”©iÚ
 * 
U_EXPORT2


179 
uúv£l_£ËùFÜUTF8
(cÚ¡ 
UCÚv”‹rS–eùÜ
* 
£l
,

180 cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 *
¡©us
);

	@unicode/uconfig.h

15 #iâdeà
__UCONFIG_H__


16 
	#__UCONFIG_H__


	)

45 #ià
defšed
(
UCONFIG_USE_LOCAL
)

46 
	~"ucÚfig_loÿl.h
"

60 #iâdeà
UCONFIG_ONLY_COLLATION


61 
	#UCONFIG_ONLY_COLLATION
 0

	)

64 #ià
UCONFIG_ONLY_COLLATION


66 
	#UCONFIG_NO_BREAK_ITERATION
 1

	)

67 
	#UCONFIG_NO_IDNA
 1

	)

70 #ià
UCONFIG_NO_COLLATION


71 #”rÜ 
CÚŒadiùÜy
 
cŞÏtiÚ
 
sw™ches
 
š
 
ucÚfig
.
h
.

73 
	#UCONFIG_NO_FORMATTING
 1

	)

74 
	#UCONFIG_NO_TRANSLITERATION
 1

	)

75 
	#UCONFIG_NO_REGULAR_EXPRESSIONS
 1

	)

98 #iâdeà
UCONFIG_NO_FILE_IO


99 
	#UCONFIG_NO_FILE_IO
 0

	)

113 #iâdeà
UCONFIG_NO_CONVERSION


114 
	#UCONFIG_NO_CONVERSION
 0

	)

117 #ià
UCONFIG_NO_CONVERSION


118 
	#UCONFIG_NO_LEGACY_CONVERSION
 1

	)

133 #iâdeà
UCONFIG_NO_LEGACY_CONVERSION


134 
	#UCONFIG_NO_LEGACY_CONVERSION
 0

	)

145 #iâdeà
UCONFIG_NO_NORMALIZATION


146 
	#UCONFIG_NO_NORMALIZATION
 0

	)

147 #–ià
UCONFIG_NO_NORMALIZATION


149 
	#UCONFIG_NO_IDNA
 1

	)

152 #ià
UCONFIG_ONLY_COLLATION


153 #”rÜ 
CÚŒadiùÜy
 
cŞÏtiÚ
 
sw™ches
 
š
 
ucÚfig
.
h
.

155 
	#UCONFIG_NO_COLLATION
 1

	)

156 
	#UCONFIG_NO_TRANSLITERATION
 1

	)

165 #iâdeà
UCONFIG_NO_BREAK_ITERATION


166 
	#UCONFIG_NO_BREAK_ITERATION
 0

	)

175 #iâdeà
UCONFIG_NO_IDNA


176 
	#UCONFIG_NO_IDNA
 0

	)

187 #iâdeà
UCONFIG_NO_COLLATION


188 
	#UCONFIG_NO_COLLATION
 0

	)

197 #iâdeà
UCONFIG_NO_FORMATTING


198 
	#UCONFIG_NO_FORMATTING
 0

	)

207 #iâdeà
UCONFIG_NO_TRANSLITERATION


208 
	#UCONFIG_NO_TRANSLITERATION
 0

	)

217 #iâdeà
UCONFIG_NO_REGULAR_EXPRESSIONS


218 
	#UCONFIG_NO_REGULAR_EXPRESSIONS
 0

	)

227 #iâdeà
UCONFIG_NO_SERVICE


228 
	#UCONFIG_NO_SERVICE
 0

	)

	@unicode/udata.h

17 #iâdeà
__UDATA_H__


18 
	#__UDATA_H__


	)

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/loÿÍoš‹r.h
"

23 
	gU_CDECL_BEGIN


40 #iâdeà
U_HIDE_INTERNAL_API


45 
	#U_TREE_SEPARATOR
 '-'

	)

51 
	#U_TREE_SEPARATOR_STRING
 "-"

	)

57 
	#U_TREE_ENTRY_SEP_CHAR
 '/'

	)

63 
	#U_TREE_ENTRY_SEP_STRING
 "/"

	)

69 
	#U_ICUDATA_ALIAS
 "ICUDATA"

	)

109 
ušt16_t
 
	msize
;

113 
ušt16_t
 
	m»£rvedWÜd
;

118 
ušt8_t
 
	misBigEndŸn
;

122 
ušt8_t
 
	mch¬£tFamy
;

126 
ušt8_t
 
	msizeofUCh¬
;

130 
ušt8_t
 
	m»£rvedBy‹
;

134 
ušt8_t
 
	md©aFÜm©
[4];

138 
ušt8_t
 
	mfÜm©V”siÚ
[4];

142 
ušt8_t
 
	md©aV”siÚ
[4];

143 } 
	tUD©aInfo
;

151 
UD©aMemÜy
 
	tUD©aMemÜy
;

166 
UBoŞ
 
	tU_CALLCONV


167 
	tUD©aMemÜyIsAcû±abË
(*
	tcÚ‹xt
,

168 cÚ¡ *
	tty³
, cÚ¡ *
	tÇme
,

169 cÚ¡ 
	tUD©aInfo
 *
	tpInfo
);

193 
U_STABLE
 
UD©aMemÜy
 * 
U_EXPORT2


194 
ud©a_İ’
(cÚ¡ *
·th
, cÚ¡ *
ty³
, cÚ¡ *
Çme
,

195 
UE¼ÜCode
 *
pE¼ÜCode
);

245 
U_STABLE
 
UD©aMemÜy
 * 
U_EXPORT2


246 
ud©a_İ’Choiû
(cÚ¡ *
·th
, cÚ¡ *
ty³
, cÚ¡ *
Çme
,

247 
UD©aMemÜyIsAcû±abË
 *
isAcû±abË
, *
cÚ‹xt
,

248 
UE¼ÜCode
 *
pE¼ÜCode
);

257 
U_STABLE
 
U_EXPORT2


258 
ud©a_şo£
(
UD©aMemÜy
 *
pD©a
);

260 #ià
U_SHOW_CPLUSPLUS_API


262 
U_NAMESPACE_BEGIN


273 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUD©aMemÜyPoš‹r
, 
UD©aMemÜy
, 
ud©a_şo£
);

275 
	gU_NAMESPACE_END


285 
U_STABLE
 cÚ¡ * 
U_EXPORT2


286 
ud©a_g‘MemÜy
(
UD©aMemÜy
 *
pD©a
);

306 
U_STABLE
 
U_EXPORT2


307 
ud©a_g‘Info
(
UD©aMemÜy
 *
pD©a
, 
UD©aInfo
 *
pInfo
);

349 
U_STABLE
 
U_EXPORT2


350 
ud©a_£tCommÚD©a
(cÚ¡ *
d©a
, 
UE¼ÜCode
 *
”r
);

377 
U_STABLE
 
U_EXPORT2


378 
ud©a_£tAµD©a
(cÚ¡ *
·ckageName
, cÚ¡ *
d©a
, 
UE¼ÜCode
 *
”r
);

385 
	eUD©aFeAcûss
 {

387 
	mUDATA_FILES_FIRST
,

389 
	mUDATA_ONLY_PACKAGES
,

392 
	mUDATA_PACKAGES_FIRST
,

394 
	mUDATA_NO_FILES
,

396 
	mUDATA_DEFAULT_ACCESS
 = 
UDATA_FILES_FIRST
,

397 
	mUDATA_FILE_ACCESS_COUNT


398 } 
	tUD©aFeAcûss
;

410 
U_STABLE
 
U_EXPORT2


411 
ud©a_£tFeAcûss
(
UD©aFeAcûss
 
acûss
, 
UE¼ÜCode
 *
¡©us
);

413 
	gU_CDECL_END


	@unicode/udeprctd.h

21 #iâdeà
UDEPRCTD_H


22 
	#UDEPRCTD_H


	)

24 #ifdeà
U_HIDE_DEPRECATED_API


26 #ià
U_DISABLE_RENAMING


27 
	#ucŞ_g‘CÚŒaùiÚs
 
ucŞ_g‘CÚŒaùiÚs_DEPRECATED_API_DO_NOT_USE


	)

28 
	#ucŞ_g‘LoÿË
 
ucŞ_g‘LoÿË_DEPRECATED_API_DO_NOT_USE


	)

29 
	#u»s_couÁA¼ayI‹ms
 
u»s_couÁA¼ayI‹ms_DEPRECATED_API_DO_NOT_USE


	)

30 
	#u»s_g‘LoÿË
 
u»s_g‘LoÿË_DEPRECATED_API_DO_NOT_USE


	)

31 
	#u»s_g‘V”siÚNumb”
 
u»s_g‘V”siÚNumb”_DEPRECATED_API_DO_NOT_USE


	)

32 
	#uŒªs_g‘AvaabËID
 
uŒªs_g‘AvaabËID_DEPRECATED_API_DO_NOT_USE


	)

33 
	#uŒªs_g‘ID
 
uŒªs_g‘ID_DEPRECATED_API_DO_NOT_USE


	)

34 
	#uŒªs_İ’
 
uŒªs_İ’_DEPRECATED_API_DO_NOT_USE


	)

35 
	#uŒªs_uÄegi¡”
 
uŒªs_uÄegi¡”_DEPRECATED_API_DO_NOT_USE


	)

37 
	#ucŞ_g‘CÚŒaùiÚs_4_6
 
ucŞ_g‘CÚŒaùiÚs_DEPRECATED_API_DO_NOT_USE


	)

38 
	#ucŞ_g‘LoÿË_4_6
 
ucŞ_g‘LoÿË_DEPRECATED_API_DO_NOT_USE


	)

39 
	#u»s_couÁA¼ayI‹ms_4_6
 
u»s_couÁA¼ayI‹ms_DEPRECATED_API_DO_NOT_USE


	)

40 
	#u»s_g‘LoÿË_4_6
 
u»s_g‘LoÿË_DEPRECATED_API_DO_NOT_USE


	)

41 
	#u»s_g‘V”siÚNumb”_4_6
 
u»s_g‘V”siÚNumb”_DEPRECATED_API_DO_NOT_USE


	)

42 
	#uŒªs_g‘AvaabËID_4_6
 
uŒªs_g‘AvaabËID_DEPRECATED_API_DO_NOT_USE


	)

43 
	#uŒªs_g‘ID_4_6
 
uŒªs_g‘ID_DEPRECATED_API_DO_NOT_USE


	)

44 
	#uŒªs_İ’_4_6
 
uŒªs_İ’_DEPRECATED_API_DO_NOT_USE


	)

45 
	#uŒªs_uÄegi¡”_4_6
 
uŒªs_uÄegi¡”_DEPRECATED_API_DO_NOT_USE


	)

	@unicode/udraft.h

21 #iâdeà
UDRAFT_H


22 
	#UDRAFT_H


	)

24 #ifdeà
U_HIDE_DRAFT_API


26 #ià
U_DISABLE_RENAMING


27 
	#ubidi_g‘Ba£DœeùiÚ
 
ubidi_g‘Ba£DœeùiÚ_DRAFT_API_DO_NOT_USE


	)

28 
	#uidÇ_şo£
 
uidÇ_şo£_DRAFT_API_DO_NOT_USE


	)

29 
	#uidÇ_Ïb–ToASCII
 
uidÇ_Ïb–ToASCII_DRAFT_API_DO_NOT_USE


	)

30 
	#uidÇ_Ïb–ToASCII_UTF8
 
uidÇ_Ïb–ToASCII_UTF8_DRAFT_API_DO_NOT_USE


	)

31 
	#uidÇ_Ïb–ToUnicode
 
uidÇ_Ïb–ToUnicode_DRAFT_API_DO_NOT_USE


	)

32 
	#uidÇ_Ïb–ToUnicodeUTF8
 
uidÇ_Ïb–ToUnicodeUTF8_DRAFT_API_DO_NOT_USE


	)

33 
	#uidÇ_ÇmeToASCII
 
uidÇ_ÇmeToASCII_DRAFT_API_DO_NOT_USE


	)

34 
	#uidÇ_ÇmeToASCII_UTF8
 
uidÇ_ÇmeToASCII_UTF8_DRAFT_API_DO_NOT_USE


	)

35 
	#uidÇ_ÇmeToUnicode
 
uidÇ_ÇmeToUnicode_DRAFT_API_DO_NOT_USE


	)

36 
	#uidÇ_ÇmeToUnicodeUTF8
 
uidÇ_ÇmeToUnicodeUTF8_DRAFT_API_DO_NOT_USE


	)

37 
	#uidÇ_İ’UTS46
 
uidÇ_İ’UTS46_DRAFT_API_DO_NOT_USE


	)

38 
	#uloc_fÜLªguageTag
 
uloc_fÜLªguageTag_DRAFT_API_DO_NOT_USE


	)

39 
	#uloc_toLªguageTag
 
uloc_toLªguageTag_DRAFT_API_DO_NOT_USE


	)

40 
	#unÜm2_g‘Decompos™iÚ
 
unÜm2_g‘Decompos™iÚ_DRAFT_API_DO_NOT_USE


	)

41 
	#u»gex_’d64
 
u»gex_’d64_DRAFT_API_DO_NOT_USE


	)

42 
	#u»gex_fšd64
 
u»gex_fšd64_DRAFT_API_DO_NOT_USE


	)

43 
	#u»gex_g‘FšdProg»ssC®lback
 
u»gex_g‘FšdProg»ssC®lback_DRAFT_API_DO_NOT_USE


	)

44 
	#u»gex_lookšgAt64
 
u»gex_lookšgAt64_DRAFT_API_DO_NOT_USE


	)

45 
	#u»gex_m©ches64
 
u»gex_m©ches64_DRAFT_API_DO_NOT_USE


	)

46 
	#u»gex_·‰”nUText
 
u»gex_·‰”nUText_DRAFT_API_DO_NOT_USE


	)

47 
	#u»gex_»giÚEnd64
 
u»gex_»giÚEnd64_DRAFT_API_DO_NOT_USE


	)

48 
	#u»gex_»giÚS¹64
 
u»gex_»giÚS¹64_DRAFT_API_DO_NOT_USE


	)

49 
	#u»gex_»£t64
 
u»gex_»£t64_DRAFT_API_DO_NOT_USE


	)

50 
	#u»gex_£tFšdProg»ssC®lback
 
u»gex_£tFšdProg»ssC®lback_DRAFT_API_DO_NOT_USE


	)

51 
	#u»gex_£tRegiÚ64
 
u»gex_£tRegiÚ64_DRAFT_API_DO_NOT_USE


	)

52 
	#u»gex_£tRegiÚAndS¹
 
u»gex_£tRegiÚAndS¹_DRAFT_API_DO_NOT_USE


	)

53 
	#u»gex_¡¬t64
 
u»gex_¡¬t64_DRAFT_API_DO_NOT_USE


	)

54 
	#usüt_g‘SütEx‹nsiÚs
 
usüt_g‘SütEx‹nsiÚs_DRAFT_API_DO_NOT_USE


	)

55 
	#usüt_hasSüt
 
usüt_hasSüt_DRAFT_API_DO_NOT_USE


	)

57 
	#ubidi_g‘Ba£DœeùiÚ_4_6
 
ubidi_g‘Ba£DœeùiÚ_DRAFT_API_DO_NOT_USE


	)

58 
	#uidÇ_şo£_4_6
 
uidÇ_şo£_DRAFT_API_DO_NOT_USE


	)

59 
	#uidÇ_Ïb–ToASCII_4_6
 
uidÇ_Ïb–ToASCII_DRAFT_API_DO_NOT_USE


	)

60 
	#uidÇ_Ïb–ToASCII_UTF8_4_6
 
uidÇ_Ïb–ToASCII_UTF8_DRAFT_API_DO_NOT_USE


	)

61 
	#uidÇ_Ïb–ToUnicodeUTF8_4_6
 
uidÇ_Ïb–ToUnicodeUTF8_DRAFT_API_DO_NOT_USE


	)

62 
	#uidÇ_Ïb–ToUnicode_4_6
 
uidÇ_Ïb–ToUnicode_DRAFT_API_DO_NOT_USE


	)

63 
	#uidÇ_ÇmeToASCII_4_6
 
uidÇ_ÇmeToASCII_DRAFT_API_DO_NOT_USE


	)

64 
	#uidÇ_ÇmeToASCII_UTF8_4_6
 
uidÇ_ÇmeToASCII_UTF8_DRAFT_API_DO_NOT_USE


	)

65 
	#uidÇ_ÇmeToUnicodeUTF8_4_6
 
uidÇ_ÇmeToUnicodeUTF8_DRAFT_API_DO_NOT_USE


	)

66 
	#uidÇ_ÇmeToUnicode_4_6
 
uidÇ_ÇmeToUnicode_DRAFT_API_DO_NOT_USE


	)

67 
	#uidÇ_İ’UTS46_4_6
 
uidÇ_İ’UTS46_DRAFT_API_DO_NOT_USE


	)

68 
	#uloc_fÜLªguageTag_4_6
 
uloc_fÜLªguageTag_DRAFT_API_DO_NOT_USE


	)

69 
	#uloc_toLªguageTag_4_6
 
uloc_toLªguageTag_DRAFT_API_DO_NOT_USE


	)

70 
	#unÜm2_g‘Decompos™iÚ_4_6
 
unÜm2_g‘Decompos™iÚ_DRAFT_API_DO_NOT_USE


	)

71 
	#u»gex_’d64_4_6
 
u»gex_’d64_DRAFT_API_DO_NOT_USE


	)

72 
	#u»gex_fšd64_4_6
 
u»gex_fšd64_DRAFT_API_DO_NOT_USE


	)

73 
	#u»gex_g‘FšdProg»ssC®lback_4_6
 
u»gex_g‘FšdProg»ssC®lback_DRAFT_API_DO_NOT_USE


	)

74 
	#u»gex_lookšgAt64_4_6
 
u»gex_lookšgAt64_DRAFT_API_DO_NOT_USE


	)

75 
	#u»gex_m©ches64_4_6
 
u»gex_m©ches64_DRAFT_API_DO_NOT_USE


	)

76 
	#u»gex_·‰”nUText_4_6
 
u»gex_·‰”nUText_DRAFT_API_DO_NOT_USE


	)

77 
	#u»gex_»giÚEnd64_4_6
 
u»gex_»giÚEnd64_DRAFT_API_DO_NOT_USE


	)

78 
	#u»gex_»giÚS¹64_4_6
 
u»gex_»giÚS¹64_DRAFT_API_DO_NOT_USE


	)

79 
	#u»gex_»£t64_4_6
 
u»gex_»£t64_DRAFT_API_DO_NOT_USE


	)

80 
	#u»gex_£tFšdProg»ssC®lback_4_6
 
u»gex_£tFšdProg»ssC®lback_DRAFT_API_DO_NOT_USE


	)

81 
	#u»gex_£tRegiÚ64_4_6
 
u»gex_£tRegiÚ64_DRAFT_API_DO_NOT_USE


	)

82 
	#u»gex_£tRegiÚAndS¹_4_6
 
u»gex_£tRegiÚAndS¹_DRAFT_API_DO_NOT_USE


	)

83 
	#u»gex_¡¬t64_4_6
 
u»gex_¡¬t64_DRAFT_API_DO_NOT_USE


	)

84 
	#usüt_g‘SütEx‹nsiÚs_4_6
 
usüt_g‘SütEx‹nsiÚs_DRAFT_API_DO_NOT_USE


	)

85 
	#usüt_hasSüt_4_6
 
usüt_hasSüt_DRAFT_API_DO_NOT_USE


	)

	@unicode/uenum.h

17 #iâdeà
__UENUM_H


18 
	#__UENUM_H


	)

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/loÿÍoš‹r.h
"

23 #ià
U_SHOW_CPLUSPLUS_API


24 
	~"unicode/¡»num.h
"

37 
	gUEnum”©iÚ
;

39 
UEnum”©iÚ
 
	tUEnum”©iÚ
;

48 
U_STABLE
 
U_EXPORT2


49 
u’um_şo£
(
UEnum”©iÚ
* 
’
);

51 #ià
U_SHOW_CPLUSPLUS_API


53 
U_NAMESPACE_BEGIN


64 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUEnum”©iÚPoš‹r
, 
UEnum”©iÚ
, 
u’um_şo£
);

66 
	gU_NAMESPACE_END


84 
U_STABLE
 
št32_t
 
U_EXPORT2


85 
u’um_couÁ
(
UEnum”©iÚ
* 
’
, 
UE¼ÜCode
* 
¡©us
);

108 
U_STABLE
 cÚ¡ 
UCh¬
* 
U_EXPORT2


109 
u’um_uÃxt
(
UEnum”©iÚ
* 
’
,

110 
št32_t
* 
»suÉL’gth
,

111 
UE¼ÜCode
* 
¡©us
);

141 
U_STABLE
 cÚ¡ * 
U_EXPORT2


142 
u’um_Ãxt
(
UEnum”©iÚ
* 
’
,

143 
št32_t
* 
»suÉL’gth
,

144 
UE¼ÜCode
* 
¡©us
);

155 
U_STABLE
 
U_EXPORT2


156 
u’um_»£t
(
UEnum”©iÚ
* 
’
, 
UE¼ÜCode
* 
¡©us
);

158 #ià
U_SHOW_CPLUSPLUS_API


169 
U_CAPI
 
UEnum”©iÚ
* 
U_EXPORT2


170 
u’um_İ’FromSŒšgEnum”©iÚ
(
U_NAMESPACE_QUALIFIER
 
SŒšgEnum”©iÚ
* 
adİ‹d
, 
UE¼ÜCode
* 
ec
);

	@unicode/uidna.h

17 #iâdeà
__UIDNA_H__


18 
	#__UIDNA_H__


	)

20 
	~"unicode/uty³s.h
"

22 #ià!
UCONFIG_NO_IDNA


24 
	~"unicode/loÿÍoš‹r.h
"

25 
	~"unicode/·r£”r.h
"

47 
	mUIDNA_DEFAULT
=0,

54 
	mUIDNA_ALLOW_UNASSIGNED
=1,

61 
	mUIDNA_USE_STD3_RULES
=2,

68 
	mUIDNA_CHECK_BIDI
=4,

75 
	mUIDNA_CHECK_CONTEXTJ
=8,

83 
	mUIDNA_NONTRANSITIONAL_TO_ASCII
=0x10,

91 
	mUIDNA_NONTRANSITIONAL_TO_UNICODE
=0x20

98 
	gUIDNA
;

99 
UIDNA
 
	tUIDNA
;

118 
U_DRAFT
 
UIDNA
 * 
U_EXPORT2


119 
uidÇ_İ’UTS46
(
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 *
pE¼ÜCode
);

126 
U_DRAFT
 
U_EXPORT2


127 
uidÇ_şo£
(
UIDNA
 *
idÇ
);

129 #ià
U_SHOW_CPLUSPLUS_API


131 
U_NAMESPACE_BEGIN


142 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUIDNAPoš‹r
, 
UIDNA
, 
uidÇ_şo£
);

144 
	gU_NAMESPACE_END


158 
	sUIDNAInfo
 {

160 
št16_t
 
	msize
;

166 
UBoŞ
 
	misT¿ns™iÚ®Difã»Á
;

167 
UBoŞ
 
	m»£rvedB3
;

173 
ušt32_t
 
	m”rÜs
;

174 
št32_t
 
	m»£rvedI2
;

175 
št32_t
 
	m»£rvedI3
;

177 
UIDNAInfo
 
	tUIDNAInfo
;

183 
	#UIDNA_INFO_INITIALIZER
 { \

184 (
št16_t
)(
UIDNAInfo
), \

185 
FALSE
, FALSE, \

186 0, 0, 0 }

	)

211 
U_DRAFT
 
št32_t
 
U_EXPORT2


212 
uidÇ_Ïb–ToASCII
(cÚ¡ 
UIDNA
 *
idÇ
,

213 cÚ¡ 
UCh¬
 *
Ïb–
, 
št32_t
 
Ëngth
,

214 
UCh¬
 *
de¡
, 
št32_t
 
ÿ·c™y
,

215 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
);

238 
U_DRAFT
 
št32_t
 
U_EXPORT2


239 
uidÇ_Ïb–ToUnicode
(cÚ¡ 
UIDNA
 *
idÇ
,

240 cÚ¡ 
UCh¬
 *
Ïb–
, 
št32_t
 
Ëngth
,

241 
UCh¬
 *
de¡
, 
št32_t
 
ÿ·c™y
,

242 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
);

267 
U_DRAFT
 
št32_t
 
U_EXPORT2


268 
uidÇ_ÇmeToASCII
(cÚ¡ 
UIDNA
 *
idÇ
,

269 cÚ¡ 
UCh¬
 *
Çme
, 
št32_t
 
Ëngth
,

270 
UCh¬
 *
de¡
, 
št32_t
 
ÿ·c™y
,

271 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
);

294 
U_DRAFT
 
št32_t
 
U_EXPORT2


295 
uidÇ_ÇmeToUnicode
(cÚ¡ 
UIDNA
 *
idÇ
,

296 cÚ¡ 
UCh¬
 *
Çme
, 
št32_t
 
Ëngth
,

297 
UCh¬
 *
de¡
, 
št32_t
 
ÿ·c™y
,

298 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
);

319 
U_DRAFT
 
št32_t
 
U_EXPORT2


320 
uidÇ_Ïb–ToASCII_UTF8
(cÚ¡ 
UIDNA
 *
idÇ
,

321 cÚ¡ *
Ïb–
, 
št32_t
 
Ëngth
,

322 *
de¡
, 
št32_t
 
ÿ·c™y
,

323 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
);

342 
U_DRAFT
 
št32_t
 
U_EXPORT2


343 
uidÇ_Ïb–ToUnicodeUTF8
(cÚ¡ 
UIDNA
 *
idÇ
,

344 cÚ¡ *
Ïb–
, 
št32_t
 
Ëngth
,

345 *
de¡
, 
št32_t
 
ÿ·c™y
,

346 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
);

365 
U_DRAFT
 
št32_t
 
U_EXPORT2


366 
uidÇ_ÇmeToASCII_UTF8
(cÚ¡ 
UIDNA
 *
idÇ
,

367 cÚ¡ *
Çme
, 
št32_t
 
Ëngth
,

368 *
de¡
, 
št32_t
 
ÿ·c™y
,

369 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
);

388 
U_DRAFT
 
št32_t
 
U_EXPORT2


389 
uidÇ_ÇmeToUnicodeUTF8
(cÚ¡ 
UIDNA
 *
idÇ
,

390 cÚ¡ *
Çme
, 
št32_t
 
Ëngth
,

391 *
de¡
, 
št32_t
 
ÿ·c™y
,

392 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
);

404 
	mUIDNA_ERROR_EMPTY_LABEL
=1,

411 
	mUIDNA_ERROR_LABEL_TOO_LONG
=2,

418 
	mUIDNA_ERROR_DOMAIN_NAME_TOO_LONG
=4,

423 
	mUIDNA_ERROR_LEADING_HYPHEN
=8,

428 
	mUIDNA_ERROR_TRAILING_HYPHEN
=0x10,

433 
	mUIDNA_ERROR_HYPHEN_3_4
=0x20,

438 
	mUIDNA_ERROR_LEADING_COMBINING_MARK
=0x40,

443 
	mUIDNA_ERROR_DISALLOWED
=0x80,

449 
	mUIDNA_ERROR_PUNYCODE
=0x100,

455 
	mUIDNA_ERROR_LABEL_HAS_DOT
=0x200,

464 
	mUIDNA_ERROR_INVALID_ACE_LABEL
=0x400,

469 
	mUIDNA_ERROR_BIDI
=0x800,

474 
	mUIDNA_ERROR_CONTEXTJ
=0x1000

538 
U_STABLE
 
št32_t
 
U_EXPORT2


539 
uidÇ_toASCII
(cÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

540 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

541 
št32_t
 
İtiÚs
,

542 
UP¬£E¼Ü
* 
·r£E¼Ü
,

543 
UE¼ÜCode
* 
¡©us
);

586 
U_STABLE
 
št32_t
 
U_EXPORT2


587 
uidÇ_toUnicode
(cÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

588 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

589 
št32_t
 
İtiÚs
,

590 
UP¬£E¼Ü
* 
·r£E¼Ü
,

591 
UE¼ÜCode
* 
¡©us
);

637 
U_STABLE
 
št32_t
 
U_EXPORT2


638 
uidÇ_IDNToASCII
ĞcÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

639 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

640 
št32_t
 
İtiÚs
,

641 
UP¬£E¼Ü
* 
·r£E¼Ü
,

642 
UE¼ÜCode
* 
¡©us
);

684 
U_STABLE
 
št32_t
 
U_EXPORT2


685 
uidÇ_IDNToUnicode
ĞcÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

686 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

687 
št32_t
 
İtiÚs
,

688 
UP¬£E¼Ü
* 
·r£E¼Ü
,

689 
UE¼ÜCode
* 
¡©us
);

725 
U_STABLE
 
št32_t
 
U_EXPORT2


726 
uidÇ_com·»
ĞcÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

727 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

728 
št32_t
 
İtiÚs
,

729 
UE¼ÜCode
* 
¡©us
);

	@unicode/uintrnal.h

21 #iâdeà
UINTRNAL_H


22 
	#UINTRNAL_H


	)

24 #ifdeà
U_HIDE_INTERNAL_API


26 #ià
U_DISABLE_RENAMING


27 
	#RegexP©‹ºDump
 
RegexP©‹ºDump_INTERNAL_API_DO_NOT_USE


	)

28 
	#bms_şo£
 
bms_şo£_INTERNAL_API_DO_NOT_USE


	)

29 
	#bms_em±y
 
bms_em±y_INTERNAL_API_DO_NOT_USE


	)

30 
	#bms_g‘D©a
 
bms_g‘D©a_INTERNAL_API_DO_NOT_USE


	)

31 
	#bms_İ’
 
bms_İ’_INTERNAL_API_DO_NOT_USE


	)

32 
	#bms_£¬ch
 
bms_£¬ch_INTERNAL_API_DO_NOT_USE


	)

33 
	#bms_£tT¬g‘SŒšg
 
bms_£tT¬g‘SŒšg_INTERNAL_API_DO_NOT_USE


	)

34 
	#¶_addFÚtRun
 
¶_addFÚtRun_INTERNAL_API_DO_NOT_USE


	)

35 
	#¶_addLoÿËRun
 
¶_addLoÿËRun_INTERNAL_API_DO_NOT_USE


	)

36 
	#¶_addV®ueRun
 
¶_addV®ueRun_INTERNAL_API_DO_NOT_USE


	)

37 
	#¶_şo£
 
¶_şo£_INTERNAL_API_DO_NOT_USE


	)

38 
	#¶_şo£FÚtRuns
 
¶_şo£FÚtRuns_INTERNAL_API_DO_NOT_USE


	)

39 
	#¶_şo£Lše
 
¶_şo£Lše_INTERNAL_API_DO_NOT_USE


	)

40 
	#¶_şo£LoÿËRuns
 
¶_şo£LoÿËRuns_INTERNAL_API_DO_NOT_USE


	)

41 
	#¶_şo£V®ueRuns
 
¶_şo£V®ueRuns_INTERNAL_API_DO_NOT_USE


	)

42 
	#¶_couÁLšeRuns
 
¶_couÁLšeRuns_INTERNAL_API_DO_NOT_USE


	)

43 
	#¶_g‘AsûÁ
 
¶_g‘AsûÁ_INTERNAL_API_DO_NOT_USE


	)

44 
	#¶_g‘DesûÁ
 
¶_g‘DesûÁ_INTERNAL_API_DO_NOT_USE


	)

45 
	#¶_g‘FÚtRunCouÁ
 
¶_g‘FÚtRunCouÁ_INTERNAL_API_DO_NOT_USE


	)

46 
	#¶_g‘FÚtRunFÚt
 
¶_g‘FÚtRunFÚt_INTERNAL_API_DO_NOT_USE


	)

47 
	#¶_g‘FÚtRunLa¡Lim™
 
¶_g‘FÚtRunLa¡Lim™_INTERNAL_API_DO_NOT_USE


	)

48 
	#¶_g‘FÚtRunLim™
 
¶_g‘FÚtRunLim™_INTERNAL_API_DO_NOT_USE


	)

49 
	#¶_g‘L—dšg
 
¶_g‘L—dšg_INTERNAL_API_DO_NOT_USE


	)

50 
	#¶_g‘LšeAsûÁ
 
¶_g‘LšeAsûÁ_INTERNAL_API_DO_NOT_USE


	)

51 
	#¶_g‘LšeDesûÁ
 
¶_g‘LšeDesûÁ_INTERNAL_API_DO_NOT_USE


	)

52 
	#¶_g‘LšeL—dšg
 
¶_g‘LšeL—dšg_INTERNAL_API_DO_NOT_USE


	)

53 
	#¶_g‘LšeVisu®Run
 
¶_g‘LšeVisu®Run_INTERNAL_API_DO_NOT_USE


	)

54 
	#¶_g‘LšeWidth
 
¶_g‘LšeWidth_INTERNAL_API_DO_NOT_USE


	)

55 
	#¶_g‘LoÿËRunCouÁ
 
¶_g‘LoÿËRunCouÁ_INTERNAL_API_DO_NOT_USE


	)

56 
	#¶_g‘LoÿËRunLa¡Lim™
 
¶_g‘LoÿËRunLa¡Lim™_INTERNAL_API_DO_NOT_USE


	)

57 
	#¶_g‘LoÿËRunLim™
 
¶_g‘LoÿËRunLim™_INTERNAL_API_DO_NOT_USE


	)

58 
	#¶_g‘LoÿËRunLoÿË
 
¶_g‘LoÿËRunLoÿË_INTERNAL_API_DO_NOT_USE


	)

59 
	#¶_g‘P¬ag¿phLev–
 
¶_g‘P¬ag¿phLev–_INTERNAL_API_DO_NOT_USE


	)

60 
	#¶_g‘TextDœeùiÚ
 
¶_g‘TextDœeùiÚ_INTERNAL_API_DO_NOT_USE


	)

61 
	#¶_g‘V®ueRunCouÁ
 
¶_g‘V®ueRunCouÁ_INTERNAL_API_DO_NOT_USE


	)

62 
	#¶_g‘V®ueRunLa¡Lim™
 
¶_g‘V®ueRunLa¡Lim™_INTERNAL_API_DO_NOT_USE


	)

63 
	#¶_g‘V®ueRunLim™
 
¶_g‘V®ueRunLim™_INTERNAL_API_DO_NOT_USE


	)

64 
	#¶_g‘V®ueRunV®ue
 
¶_g‘V®ueRunV®ue_INTERNAL_API_DO_NOT_USE


	)

65 
	#¶_g‘Visu®RunAsûÁ
 
¶_g‘Visu®RunAsûÁ_INTERNAL_API_DO_NOT_USE


	)

66 
	#¶_g‘Visu®RunDesûÁ
 
¶_g‘Visu®RunDesûÁ_INTERNAL_API_DO_NOT_USE


	)

67 
	#¶_g‘Visu®RunDœeùiÚ
 
¶_g‘Visu®RunDœeùiÚ_INTERNAL_API_DO_NOT_USE


	)

68 
	#¶_g‘Visu®RunFÚt
 
¶_g‘Visu®RunFÚt_INTERNAL_API_DO_NOT_USE


	)

69 
	#¶_g‘Visu®RunGlyphCouÁ
 
¶_g‘Visu®RunGlyphCouÁ_INTERNAL_API_DO_NOT_USE


	)

70 
	#¶_g‘Visu®RunGlyphToCh¬M­
 
¶_g‘Visu®RunGlyphToCh¬M­_INTERNAL_API_DO_NOT_USE


	)

71 
	#¶_g‘Visu®RunGlyphs
 
¶_g‘Visu®RunGlyphs_INTERNAL_API_DO_NOT_USE


	)

72 
	#¶_g‘Visu®RunL—dšg
 
¶_g‘Visu®RunL—dšg_INTERNAL_API_DO_NOT_USE


	)

73 
	#¶_g‘Visu®RunPos™iÚs
 
¶_g‘Visu®RunPos™iÚs_INTERNAL_API_DO_NOT_USE


	)

74 
	#¶_lše
 
¶_lše_INTERNAL_API_DO_NOT_USE


	)

75 
	#¶_ÃxtLše
 
¶_ÃxtLše_INTERNAL_API_DO_NOT_USE


	)

76 
	#¶_İ’Em±yFÚtRuns
 
¶_İ’Em±yFÚtRuns_INTERNAL_API_DO_NOT_USE


	)

77 
	#¶_İ’Em±yLoÿËRuns
 
¶_İ’Em±yLoÿËRuns_INTERNAL_API_DO_NOT_USE


	)

78 
	#¶_İ’Em±yV®ueRuns
 
¶_İ’Em±yV®ueRuns_INTERNAL_API_DO_NOT_USE


	)

79 
	#¶_İ’FÚtRuns
 
¶_İ’FÚtRuns_INTERNAL_API_DO_NOT_USE


	)

80 
	#¶_İ’LoÿËRuns
 
¶_İ’LoÿËRuns_INTERNAL_API_DO_NOT_USE


	)

81 
	#¶_İ’V®ueRuns
 
¶_İ’V®ueRuns_INTERNAL_API_DO_NOT_USE


	)

82 
	#¶_·¿g¿ph
 
¶_·¿g¿ph_INTERNAL_API_DO_NOT_USE


	)

83 
	#¶_»æow
 
¶_»æow_INTERNAL_API_DO_NOT_USE


	)

84 
	#¶_»£tFÚtRuns
 
¶_»£tFÚtRuns_INTERNAL_API_DO_NOT_USE


	)

85 
	#¶_»£tLoÿËRuns
 
¶_»£tLoÿËRuns_INTERNAL_API_DO_NOT_USE


	)

86 
	#¶_»£tV®ueRuns
 
¶_»£tV®ueRuns_INTERNAL_API_DO_NOT_USE


	)

87 
	#¶_visu®Run
 
¶_visu®Run_INTERNAL_API_DO_NOT_USE


	)

88 
	#ucd_şo£
 
ucd_şo£_INTERNAL_API_DO_NOT_USE


	)

89 
	#ucd_æushCache
 
ucd_æushCache_INTERNAL_API_DO_NOT_USE


	)

90 
	#ucd_ä“Cache
 
ucd_ä“Cache_INTERNAL_API_DO_NOT_USE


	)

91 
	#ucd_g‘CŞÏtÜ
 
ucd_g‘CŞÏtÜ_INTERNAL_API_DO_NOT_USE


	)

92 
	#ucd_İ’
 
ucd_İ’_INTERNAL_API_DO_NOT_USE


	)

93 
	#ucŞ_equ®s
 
ucŞ_equ®s_INTERNAL_API_DO_NOT_USE


	)

94 
	#ucŞ_fÜûHªIm¶ic™
 
ucŞ_fÜûHªIm¶ic™_INTERNAL_API_DO_NOT_USE


	)

95 
	#ucŞ_fÜg‘UCA
 
ucŞ_fÜg‘UCA_INTERNAL_API_DO_NOT_USE


	)

96 
	#ucŞ_g‘A‰ribu‹OrDeçuÉ
 
ucŞ_g‘A‰ribu‹OrDeçuÉ_INTERNAL_API_DO_NOT_USE


	)

97 
	#ucŞ_g‘ReÜd”Codes
 
ucŞ_g‘ReÜd”Codes_INTERNAL_API_DO_NOT_USE


	)

98 
	#ucŞ_g‘Un§ãS‘
 
ucŞ_g‘Un§ãS‘_INTERNAL_API_DO_NOT_USE


	)

99 
	#ucŞ_ÃxtProûs£d
 
ucŞ_ÃxtProûs£d_INTERNAL_API_DO_NOT_USE


	)

100 
	#ucŞ_´•¬eShÜtSŒšgO³n
 
ucŞ_´•¬eShÜtSŒšgO³n_INTERNAL_API_DO_NOT_USE


	)

101 
	#ucŞ_´eviousProûs£d
 
ucŞ_´eviousProûs£d_INTERNAL_API_DO_NOT_USE


	)

102 
	#ucŞ_£tReÜd”Codes
 
ucŞ_£tReÜd”Codes_INTERNAL_API_DO_NOT_USE


	)

103 
	#ud©_­¶yP©‹ºR–©ive
 
ud©_­¶yP©‹ºR–©ive_INTERNAL_API_DO_NOT_USE


	)

104 
	#ud©_toP©‹ºR–©iveD©e
 
ud©_toP©‹ºR–©iveD©e_INTERNAL_API_DO_NOT_USE


	)

105 
	#ud©_toP©‹ºR–©iveTime
 
ud©_toP©‹ºR–©iveTime_INTERNAL_API_DO_NOT_USE


	)

106 
	#u¶ug_g‘CÚfigu¿tiÚ
 
u¶ug_g‘CÚfigu¿tiÚ_INTERNAL_API_DO_NOT_USE


	)

107 
	#u¶ug_g‘CÚ‹xt
 
u¶ug_g‘CÚ‹xt_INTERNAL_API_DO_NOT_USE


	)

108 
	#u¶ug_g‘Cu¼’tLev–
 
u¶ug_g‘Cu¼’tLev–_INTERNAL_API_DO_NOT_USE


	)

109 
	#u¶ug_g‘Lib¿ry
 
u¶ug_g‘Lib¿ry_INTERNAL_API_DO_NOT_USE


	)

110 
	#u¶ug_g‘Lib¿ryName
 
u¶ug_g‘Lib¿ryName_INTERNAL_API_DO_NOT_USE


	)

111 
	#u¶ug_g‘PlugLev–
 
u¶ug_g‘PlugLev–_INTERNAL_API_DO_NOT_USE


	)

112 
	#u¶ug_g‘PlugLßdStus
 
u¶ug_g‘PlugLßdStus_INTERNAL_API_DO_NOT_USE


	)

113 
	#u¶ug_g‘PlugName
 
u¶ug_g‘PlugName_INTERNAL_API_DO_NOT_USE


	)

114 
	#u¶ug_g‘SymbŞName
 
u¶ug_g‘SymbŞName_INTERNAL_API_DO_NOT_USE


	)

115 
	#u¶ug_lßdPlugFromEÁrypošt
 
u¶ug_lßdPlugFromEÁrypošt_INTERNAL_API_DO_NOT_USE


	)

116 
	#u¶ug_lßdPlugFromLib¿ry
 
u¶ug_lßdPlugFromLib¿ry_INTERNAL_API_DO_NOT_USE


	)

117 
	#u¶ug_ÃxtPlug
 
u¶ug_ÃxtPlug_INTERNAL_API_DO_NOT_USE


	)

118 
	#u¶ug_»movePlug
 
u¶ug_»movePlug_INTERNAL_API_DO_NOT_USE


	)

119 
	#u¶ug_£tCÚ‹xt
 
u¶ug_£tCÚ‹xt_INTERNAL_API_DO_NOT_USE


	)

120 
	#u¶ug_£tPlugLev–
 
u¶ug_£tPlugLev–_INTERNAL_API_DO_NOT_USE


	)

121 
	#u¶ug_£tPlugName
 
u¶ug_£tPlugName_INTERNAL_API_DO_NOT_USE


	)

122 
	#u¶ug_£tPlugNoUÆßd
 
u¶ug_£tPlugNoUÆßd_INTERNAL_API_DO_NOT_USE


	)

123 
	#u´v_g‘DeçuÉCod•age
 
u´v_g‘DeçuÉCod•age_INTERNAL_API_DO_NOT_USE


	)

124 
	#u´v_g‘DeçuÉLoÿËID
 
u´v_g‘DeçuÉLoÿËID_INTERNAL_API_DO_NOT_USE


	)

125 
	#u»s_İ’FlIn
 
u»s_İ’FlIn_INTERNAL_API_DO_NOT_USE


	)

126 
	#u£¬ch_£¬ch
 
u£¬ch_£¬ch_INTERNAL_API_DO_NOT_USE


	)

127 
	#u£¬ch_£¬chBackw¬ds
 
u£¬ch_£¬chBackw¬ds_INTERNAL_API_DO_NOT_USE


	)

128 
	#u‹xt_ÿ£Com·»
 
u‹xt_ÿ£Com·»_INTERNAL_API_DO_NOT_USE


	)

129 
	#u‹xt_ÿ£Com·»N©iveLim™
 
u‹xt_ÿ£Com·»N©iveLim™_INTERNAL_API_DO_NOT_USE


	)

130 
	#u‹xt_com·»
 
u‹xt_com·»_INTERNAL_API_DO_NOT_USE


	)

131 
	#u‹xt_com·»N©iveLim™
 
u‹xt_com·»N©iveLim™_INTERNAL_API_DO_NOT_USE


	)

132 
	#utf8_­³ndCh¬SaãBody
 
utf8_­³ndCh¬SaãBody_INTERNAL_API_DO_NOT_USE


	)

133 
	#utf8_back1SaãBody
 
utf8_back1SaãBody_INTERNAL_API_DO_NOT_USE


	)

134 
	#utf8_couÁT¿By‹s
 
utf8_couÁT¿By‹s_INTERNAL_API_DO_NOT_USE


	)

135 
	#utf8_ÃxtCh¬SaãBody
 
utf8_ÃxtCh¬SaãBody_INTERNAL_API_DO_NOT_USE


	)

136 
	#utf8_´evCh¬SaãBody
 
utf8_´evCh¬SaãBody_INTERNAL_API_DO_NOT_USE


	)

138 
	#RegexP©‹ºDump_4_6
 
RegexP©‹ºDump_INTERNAL_API_DO_NOT_USE


	)

139 
	#bms_şo£_4_6
 
bms_şo£_INTERNAL_API_DO_NOT_USE


	)

140 
	#bms_em±y_4_6
 
bms_em±y_INTERNAL_API_DO_NOT_USE


	)

141 
	#bms_g‘D©a_4_6
 
bms_g‘D©a_INTERNAL_API_DO_NOT_USE


	)

142 
	#bms_İ’_4_6
 
bms_İ’_INTERNAL_API_DO_NOT_USE


	)

143 
	#bms_£¬ch_4_6
 
bms_£¬ch_INTERNAL_API_DO_NOT_USE


	)

144 
	#bms_£tT¬g‘SŒšg_4_6
 
bms_£tT¬g‘SŒšg_INTERNAL_API_DO_NOT_USE


	)

145 
	#¶_addFÚtRun_4_6
 
¶_addFÚtRun_INTERNAL_API_DO_NOT_USE


	)

146 
	#¶_addLoÿËRun_4_6
 
¶_addLoÿËRun_INTERNAL_API_DO_NOT_USE


	)

147 
	#¶_addV®ueRun_4_6
 
¶_addV®ueRun_INTERNAL_API_DO_NOT_USE


	)

148 
	#¶_şo£_4_6
 
¶_şo£_INTERNAL_API_DO_NOT_USE


	)

149 
	#¶_şo£FÚtRuns_4_6
 
¶_şo£FÚtRuns_INTERNAL_API_DO_NOT_USE


	)

150 
	#¶_şo£Lše_4_6
 
¶_şo£Lše_INTERNAL_API_DO_NOT_USE


	)

151 
	#¶_şo£LoÿËRuns_4_6
 
¶_şo£LoÿËRuns_INTERNAL_API_DO_NOT_USE


	)

152 
	#¶_şo£V®ueRuns_4_6
 
¶_şo£V®ueRuns_INTERNAL_API_DO_NOT_USE


	)

153 
	#¶_couÁLšeRuns_4_6
 
¶_couÁLšeRuns_INTERNAL_API_DO_NOT_USE


	)

154 
	#¶_g‘AsûÁ_4_6
 
¶_g‘AsûÁ_INTERNAL_API_DO_NOT_USE


	)

155 
	#¶_g‘DesûÁ_4_6
 
¶_g‘DesûÁ_INTERNAL_API_DO_NOT_USE


	)

156 
	#¶_g‘FÚtRunCouÁ_4_6
 
¶_g‘FÚtRunCouÁ_INTERNAL_API_DO_NOT_USE


	)

157 
	#¶_g‘FÚtRunFÚt_4_6
 
¶_g‘FÚtRunFÚt_INTERNAL_API_DO_NOT_USE


	)

158 
	#¶_g‘FÚtRunLa¡Lim™_4_6
 
¶_g‘FÚtRunLa¡Lim™_INTERNAL_API_DO_NOT_USE


	)

159 
	#¶_g‘FÚtRunLim™_4_6
 
¶_g‘FÚtRunLim™_INTERNAL_API_DO_NOT_USE


	)

160 
	#¶_g‘L—dšg_4_6
 
¶_g‘L—dšg_INTERNAL_API_DO_NOT_USE


	)

161 
	#¶_g‘LšeAsûÁ_4_6
 
¶_g‘LšeAsûÁ_INTERNAL_API_DO_NOT_USE


	)

162 
	#¶_g‘LšeDesûÁ_4_6
 
¶_g‘LšeDesûÁ_INTERNAL_API_DO_NOT_USE


	)

163 
	#¶_g‘LšeL—dšg_4_6
 
¶_g‘LšeL—dšg_INTERNAL_API_DO_NOT_USE


	)

164 
	#¶_g‘LšeVisu®Run_4_6
 
¶_g‘LšeVisu®Run_INTERNAL_API_DO_NOT_USE


	)

165 
	#¶_g‘LšeWidth_4_6
 
¶_g‘LšeWidth_INTERNAL_API_DO_NOT_USE


	)

166 
	#¶_g‘LoÿËRunCouÁ_4_6
 
¶_g‘LoÿËRunCouÁ_INTERNAL_API_DO_NOT_USE


	)

167 
	#¶_g‘LoÿËRunLa¡Lim™_4_6
 
¶_g‘LoÿËRunLa¡Lim™_INTERNAL_API_DO_NOT_USE


	)

168 
	#¶_g‘LoÿËRunLim™_4_6
 
¶_g‘LoÿËRunLim™_INTERNAL_API_DO_NOT_USE


	)

169 
	#¶_g‘LoÿËRunLoÿË_4_6
 
¶_g‘LoÿËRunLoÿË_INTERNAL_API_DO_NOT_USE


	)

170 
	#¶_g‘P¬ag¿phLev–_4_6
 
¶_g‘P¬ag¿phLev–_INTERNAL_API_DO_NOT_USE


	)

171 
	#¶_g‘TextDœeùiÚ_4_6
 
¶_g‘TextDœeùiÚ_INTERNAL_API_DO_NOT_USE


	)

172 
	#¶_g‘V®ueRunCouÁ_4_6
 
¶_g‘V®ueRunCouÁ_INTERNAL_API_DO_NOT_USE


	)

173 
	#¶_g‘V®ueRunLa¡Lim™_4_6
 
¶_g‘V®ueRunLa¡Lim™_INTERNAL_API_DO_NOT_USE


	)

174 
	#¶_g‘V®ueRunLim™_4_6
 
¶_g‘V®ueRunLim™_INTERNAL_API_DO_NOT_USE


	)

175 
	#¶_g‘V®ueRunV®ue_4_6
 
¶_g‘V®ueRunV®ue_INTERNAL_API_DO_NOT_USE


	)

176 
	#¶_g‘Visu®RunAsûÁ_4_6
 
¶_g‘Visu®RunAsûÁ_INTERNAL_API_DO_NOT_USE


	)

177 
	#¶_g‘Visu®RunDesûÁ_4_6
 
¶_g‘Visu®RunDesûÁ_INTERNAL_API_DO_NOT_USE


	)

178 
	#¶_g‘Visu®RunDœeùiÚ_4_6
 
¶_g‘Visu®RunDœeùiÚ_INTERNAL_API_DO_NOT_USE


	)

179 
	#¶_g‘Visu®RunFÚt_4_6
 
¶_g‘Visu®RunFÚt_INTERNAL_API_DO_NOT_USE


	)

180 
	#¶_g‘Visu®RunGlyphCouÁ_4_6
 
¶_g‘Visu®RunGlyphCouÁ_INTERNAL_API_DO_NOT_USE


	)

181 
	#¶_g‘Visu®RunGlyphToCh¬M­_4_6
 
¶_g‘Visu®RunGlyphToCh¬M­_INTERNAL_API_DO_NOT_USE


	)

182 
	#¶_g‘Visu®RunGlyphs_4_6
 
¶_g‘Visu®RunGlyphs_INTERNAL_API_DO_NOT_USE


	)

183 
	#¶_g‘Visu®RunL—dšg_4_6
 
¶_g‘Visu®RunL—dšg_INTERNAL_API_DO_NOT_USE


	)

184 
	#¶_g‘Visu®RunPos™iÚs_4_6
 
¶_g‘Visu®RunPos™iÚs_INTERNAL_API_DO_NOT_USE


	)

185 
	#¶_lše_4_6
 
¶_lše_INTERNAL_API_DO_NOT_USE


	)

186 
	#¶_ÃxtLše_4_6
 
¶_ÃxtLše_INTERNAL_API_DO_NOT_USE


	)

187 
	#¶_İ’Em±yFÚtRuns_4_6
 
¶_İ’Em±yFÚtRuns_INTERNAL_API_DO_NOT_USE


	)

188 
	#¶_İ’Em±yLoÿËRuns_4_6
 
¶_İ’Em±yLoÿËRuns_INTERNAL_API_DO_NOT_USE


	)

189 
	#¶_İ’Em±yV®ueRuns_4_6
 
¶_İ’Em±yV®ueRuns_INTERNAL_API_DO_NOT_USE


	)

190 
	#¶_İ’FÚtRuns_4_6
 
¶_İ’FÚtRuns_INTERNAL_API_DO_NOT_USE


	)

191 
	#¶_İ’LoÿËRuns_4_6
 
¶_İ’LoÿËRuns_INTERNAL_API_DO_NOT_USE


	)

192 
	#¶_İ’V®ueRuns_4_6
 
¶_İ’V®ueRuns_INTERNAL_API_DO_NOT_USE


	)

193 
	#¶_·¿g¿ph_4_6
 
¶_·¿g¿ph_INTERNAL_API_DO_NOT_USE


	)

194 
	#¶_»æow_4_6
 
¶_»æow_INTERNAL_API_DO_NOT_USE


	)

195 
	#¶_»£tFÚtRuns_4_6
 
¶_»£tFÚtRuns_INTERNAL_API_DO_NOT_USE


	)

196 
	#¶_»£tLoÿËRuns_4_6
 
¶_»£tLoÿËRuns_INTERNAL_API_DO_NOT_USE


	)

197 
	#¶_»£tV®ueRuns_4_6
 
¶_»£tV®ueRuns_INTERNAL_API_DO_NOT_USE


	)

198 
	#¶_visu®Run_4_6
 
¶_visu®Run_INTERNAL_API_DO_NOT_USE


	)

199 
	#ucd_şo£_4_6
 
ucd_şo£_INTERNAL_API_DO_NOT_USE


	)

200 
	#ucd_æushCache_4_6
 
ucd_æushCache_INTERNAL_API_DO_NOT_USE


	)

201 
	#ucd_ä“Cache_4_6
 
ucd_ä“Cache_INTERNAL_API_DO_NOT_USE


	)

202 
	#ucd_g‘CŞÏtÜ_4_6
 
ucd_g‘CŞÏtÜ_INTERNAL_API_DO_NOT_USE


	)

203 
	#ucd_İ’_4_6
 
ucd_İ’_INTERNAL_API_DO_NOT_USE


	)

204 
	#ucŞ_equ®s_4_6
 
ucŞ_equ®s_INTERNAL_API_DO_NOT_USE


	)

205 
	#ucŞ_fÜûHªIm¶ic™_4_6
 
ucŞ_fÜûHªIm¶ic™_INTERNAL_API_DO_NOT_USE


	)

206 
	#ucŞ_fÜg‘UCA_4_6
 
ucŞ_fÜg‘UCA_INTERNAL_API_DO_NOT_USE


	)

207 
	#ucŞ_g‘A‰ribu‹OrDeçuÉ_4_6
 
ucŞ_g‘A‰ribu‹OrDeçuÉ_INTERNAL_API_DO_NOT_USE


	)

208 
	#ucŞ_g‘ReÜd”Codes_4_6
 
ucŞ_g‘ReÜd”Codes_INTERNAL_API_DO_NOT_USE


	)

209 
	#ucŞ_g‘Un§ãS‘_4_6
 
ucŞ_g‘Un§ãS‘_INTERNAL_API_DO_NOT_USE


	)

210 
	#ucŞ_ÃxtProûs£d_4_6
 
ucŞ_ÃxtProûs£d_INTERNAL_API_DO_NOT_USE


	)

211 
	#ucŞ_´•¬eShÜtSŒšgO³n_4_6
 
ucŞ_´•¬eShÜtSŒšgO³n_INTERNAL_API_DO_NOT_USE


	)

212 
	#ucŞ_´eviousProûs£d_4_6
 
ucŞ_´eviousProûs£d_INTERNAL_API_DO_NOT_USE


	)

213 
	#ucŞ_£tReÜd”Codes_4_6
 
ucŞ_£tReÜd”Codes_INTERNAL_API_DO_NOT_USE


	)

214 
	#ud©_­¶yP©‹ºR–©ive_4_6
 
ud©_­¶yP©‹ºR–©ive_INTERNAL_API_DO_NOT_USE


	)

215 
	#ud©_toP©‹ºR–©iveD©e_4_6
 
ud©_toP©‹ºR–©iveD©e_INTERNAL_API_DO_NOT_USE


	)

216 
	#ud©_toP©‹ºR–©iveTime_4_6
 
ud©_toP©‹ºR–©iveTime_INTERNAL_API_DO_NOT_USE


	)

217 
	#u¶ug_g‘CÚfigu¿tiÚ_4_6
 
u¶ug_g‘CÚfigu¿tiÚ_INTERNAL_API_DO_NOT_USE


	)

218 
	#u¶ug_g‘CÚ‹xt_4_6
 
u¶ug_g‘CÚ‹xt_INTERNAL_API_DO_NOT_USE


	)

219 
	#u¶ug_g‘Cu¼’tLev–_4_6
 
u¶ug_g‘Cu¼’tLev–_INTERNAL_API_DO_NOT_USE


	)

220 
	#u¶ug_g‘Lib¿ry_4_6
 
u¶ug_g‘Lib¿ry_INTERNAL_API_DO_NOT_USE


	)

221 
	#u¶ug_g‘Lib¿ryName_4_6
 
u¶ug_g‘Lib¿ryName_INTERNAL_API_DO_NOT_USE


	)

222 
	#u¶ug_g‘PlugLev–_4_6
 
u¶ug_g‘PlugLev–_INTERNAL_API_DO_NOT_USE


	)

223 
	#u¶ug_g‘PlugLßdStus_4_6
 
u¶ug_g‘PlugLßdStus_INTERNAL_API_DO_NOT_USE


	)

224 
	#u¶ug_g‘PlugName_4_6
 
u¶ug_g‘PlugName_INTERNAL_API_DO_NOT_USE


	)

225 
	#u¶ug_g‘SymbŞName_4_6
 
u¶ug_g‘SymbŞName_INTERNAL_API_DO_NOT_USE


	)

226 
	#u¶ug_lßdPlugFromEÁrypošt_4_6
 
u¶ug_lßdPlugFromEÁrypošt_INTERNAL_API_DO_NOT_USE


	)

227 
	#u¶ug_lßdPlugFromLib¿ry_4_6
 
u¶ug_lßdPlugFromLib¿ry_INTERNAL_API_DO_NOT_USE


	)

228 
	#u¶ug_ÃxtPlug_4_6
 
u¶ug_ÃxtPlug_INTERNAL_API_DO_NOT_USE


	)

229 
	#u¶ug_»movePlug_4_6
 
u¶ug_»movePlug_INTERNAL_API_DO_NOT_USE


	)

230 
	#u¶ug_£tCÚ‹xt_4_6
 
u¶ug_£tCÚ‹xt_INTERNAL_API_DO_NOT_USE


	)

231 
	#u¶ug_£tPlugLev–_4_6
 
u¶ug_£tPlugLev–_INTERNAL_API_DO_NOT_USE


	)

232 
	#u¶ug_£tPlugName_4_6
 
u¶ug_£tPlugName_INTERNAL_API_DO_NOT_USE


	)

233 
	#u¶ug_£tPlugNoUÆßd_4_6
 
u¶ug_£tPlugNoUÆßd_INTERNAL_API_DO_NOT_USE


	)

234 
	#u´v_g‘DeçuÉCod•age_4_6
 
u´v_g‘DeçuÉCod•age_INTERNAL_API_DO_NOT_USE


	)

235 
	#u´v_g‘DeçuÉLoÿËID_4_6
 
u´v_g‘DeçuÉLoÿËID_INTERNAL_API_DO_NOT_USE


	)

236 
	#u»s_İ’FlIn_4_6
 
u»s_İ’FlIn_INTERNAL_API_DO_NOT_USE


	)

237 
	#u£¬ch_£¬ch_4_6
 
u£¬ch_£¬ch_INTERNAL_API_DO_NOT_USE


	)

238 
	#u£¬ch_£¬chBackw¬ds_4_6
 
u£¬ch_£¬chBackw¬ds_INTERNAL_API_DO_NOT_USE


	)

239 
	#u‹xt_ÿ£Com·»N©iveLim™_4_6
 
u‹xt_ÿ£Com·»N©iveLim™_INTERNAL_API_DO_NOT_USE


	)

240 
	#u‹xt_ÿ£Com·»_4_6
 
u‹xt_ÿ£Com·»_INTERNAL_API_DO_NOT_USE


	)

241 
	#u‹xt_com·»N©iveLim™_4_6
 
u‹xt_com·»N©iveLim™_INTERNAL_API_DO_NOT_USE


	)

242 
	#u‹xt_com·»_4_6
 
u‹xt_com·»_INTERNAL_API_DO_NOT_USE


	)

243 
	#utf8_­³ndCh¬SaãBody_4_6
 
utf8_­³ndCh¬SaãBody_INTERNAL_API_DO_NOT_USE


	)

244 
	#utf8_back1SaãBody_4_6
 
utf8_back1SaãBody_INTERNAL_API_DO_NOT_USE


	)

245 
	#utf8_couÁT¿By‹s_4_6
 
utf8_couÁT¿By‹s_INTERNAL_API_DO_NOT_USE


	)

246 
	#utf8_ÃxtCh¬SaãBody_4_6
 
utf8_ÃxtCh¬SaãBody_INTERNAL_API_DO_NOT_USE


	)

247 
	#utf8_´evCh¬SaãBody_4_6
 
utf8_´evCh¬SaãBody_INTERNAL_API_DO_NOT_USE


	)

	@unicode/uiter.h

17 #iâdeà
__UITER_H__


18 
	#__UITER_H__


	)

27 
	~"unicode/uty³s.h
"

29 #ià
U_SHOW_CPLUSPLUS_API


30 
U_NAMESPACE_BEGIN


32 
şass
 
	gCh¬aù”I‹¿tÜ
;

33 
şass
 
	gR•ÏûabË
;

35 
	gU_NAMESPACE_END


38 
U_CDECL_BEGIN


40 
	gUCh¬I‹¿tÜ
;

41 
UCh¬I‹¿tÜ
 
	tUCh¬I‹¿tÜ
;

49 
	eUCh¬I‹¿tÜOrigš
 {

50 
	mUITER_START
, 
	mUITER_CURRENT
, 
	mUITER_LIMIT
, 
	mUITER_ZERO
, 
	mUITER_LENGTH


51 } 
	tUCh¬I‹¿tÜOrigš
;

69 
	mUITER_UNKNOWN_INDEX
=-2

84 
	#UITER_NO_STATE
 ((
ušt32_t
)0xffffffff)

	)

104 
št32_t
 
	tU_CALLCONV


105 
	tUCh¬I‹¿tÜG‘Index
(
	tUCh¬I‹¿tÜ
 *
	t™”
, 
	tUCh¬I‹¿tÜOrigš
 
	tÜigš
);

141 
št32_t
 
	tU_CALLCONV


142 
	tUCh¬I‹¿tÜMove
(
	tUCh¬I‹¿tÜ
 *
	t™”
, 
	tšt32_t
 
	td–
, 
	tUCh¬I‹¿tÜOrigš
 
	tÜigš
);

156 
UBoŞ
 
	tU_CALLCONV


157 
	tUCh¬I‹¿tÜHasNext
(
	tUCh¬I‹¿tÜ
 *
	t™”
);

170 
UBoŞ
 
	tU_CALLCONV


171 
	tUCh¬I‹¿tÜHasP»vious
(
	tUCh¬I‹¿tÜ
 *
	t™”
);

185 
UCh¬32
 
	tU_CALLCONV


186 
	tUCh¬I‹¿tÜCu¼’t
(
	tUCh¬I‹¿tÜ
 *
	t™”
);

201 
UCh¬32
 
	tU_CALLCONV


202 
	tUCh¬I‹¿tÜNext
(
	tUCh¬I‹¿tÜ
 *
	t™”
);

217 
UCh¬32
 
	tU_CALLCONV


218 
	tUCh¬I‹¿tÜP»vious
(
	tUCh¬I‹¿tÜ
 *
	t™”
);

231 
št32_t
 
	tU_CALLCONV


232 
	tUCh¬I‹¿tÜRe£rved
(
	tUCh¬I‹¿tÜ
 *
	t™”
, 
	tšt32_t
 
	tsom‘hšg
);

278 
ušt32_t
 
	tU_CALLCONV


279 
	tUCh¬I‹¿tÜG‘S‹
(cÚ¡ 
	tUCh¬I‹¿tÜ
 *
	t™”
);

306 
	tU_CALLCONV


307 
	tUCh¬I‹¿tÜS‘S‹
(
	tUCh¬I‹¿tÜ
 *
	t™”
, 
	tušt32_t
 
	t¡©e
, 
	tUE¼ÜCode
 *
	tpE¼ÜCode
);

339 
	sUCh¬I‹¿tÜ
 {

345 cÚ¡ *
	mcÚ‹xt
;

352 
št32_t
 
	mËngth
;

359 
št32_t
 
	m¡¬t
;

366 
št32_t
 
	mšdex
;

373 
št32_t
 
	mlim™
;

379 
št32_t
 
	m»£rvedF›ld
;

388 
UCh¬I‹¿tÜG‘Index
 *
	mg‘Index
;

399 
UCh¬I‹¿tÜMove
 *
	mmove
;

408 
UCh¬I‹¿tÜHasNext
 *
	mhasNext
;

416 
UCh¬I‹¿tÜHasP»vious
 *
	mhasP»vious
;

425 
UCh¬I‹¿tÜCu¼’t
 *
	mcu¼’t
;

435 
UCh¬I‹¿tÜNext
 *
	mÃxt
;

445 
UCh¬I‹¿tÜP»vious
 *
	m´evious
;

453 
UCh¬I‹¿tÜRe£rved
 *
	m»£rvedFn
;

462 
UCh¬I‹¿tÜG‘S‹
 *
	mg‘S‹
;

472 
UCh¬I‹¿tÜS‘S‹
 *
	m£tS‹
;

493 
U_STABLE
 
UCh¬32
 
U_EXPORT2


494 
u™”_cu¼’t32
(
UCh¬I‹¿tÜ
 *
™”
);

510 
U_STABLE
 
UCh¬32
 
U_EXPORT2


511 
u™”_Ãxt32
(
UCh¬I‹¿tÜ
 *
™”
);

527 
U_STABLE
 
UCh¬32
 
U_EXPORT2


528 
u™”_´evious32
(
UCh¬I‹¿tÜ
 *
™”
);

548 
U_STABLE
 
ušt32_t
 
U_EXPORT2


549 
u™”_g‘S‹
(cÚ¡ 
UCh¬I‹¿tÜ
 *
™”
);

566 
U_STABLE
 
U_EXPORT2


567 
u™”_£tS‹
(
UCh¬I‹¿tÜ
 *
™”
, 
ušt32_t
 
¡©e
, 
UE¼ÜCode
 *
pE¼ÜCode
);

591 
U_STABLE
 
U_EXPORT2


592 
u™”_£tSŒšg
(
UCh¬I‹¿tÜ
 *
™”
, cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
);

614 
U_STABLE
 
U_EXPORT2


615 
u™”_£tUTF16BE
(
UCh¬I‹¿tÜ
 *
™”
, cÚ¡ *
s
, 
št32_t
 
Ëngth
);

650 
U_STABLE
 
U_EXPORT2


651 
u™”_£tUTF8
(
UCh¬I‹¿tÜ
 *
™”
, cÚ¡ *
s
, 
št32_t
 
Ëngth
);

653 #ià
U_SHOW_CPLUSPLUS_API


675 
U_STABLE
 
U_EXPORT2


676 
u™”_£tCh¬aù”I‹¿tÜ
(
UCh¬I‹¿tÜ
 *
™”
, 
U_NAMESPACE_QUALIFIER
 
Ch¬aù”I‹¿tÜ
 *
ch¬I‹r
);

700 
U_STABLE
 
U_EXPORT2


701 
u™”_£tR•ÏûabË
(
UCh¬I‹¿tÜ
 *
™”
, cÚ¡ 
U_NAMESPACE_QUALIFIER
 
R•ÏûabË
 *
»p
);

705 
	gU_CDECL_END


	@unicode/uloc.h

21 #iâdeà
ULOC_H


22 
	#ULOC_H


	)

24 
	~"unicode/uty³s.h
"

25 
	~"unicode/u’um.h
"

201 
	#ULOC_CHINESE
 "zh"

	)

203 
	#ULOC_ENGLISH
 "’"

	)

205 
	#ULOC_FRENCH
 "ä"

	)

207 
	#ULOC_GERMAN
 "de"

	)

209 
	#ULOC_ITALIAN
 "™"

	)

211 
	#ULOC_JAPANESE
 "ja"

	)

213 
	#ULOC_KOREAN
 "ko"

	)

215 
	#ULOC_SIMPLIFIED_CHINESE
 "zh_CN"

	)

217 
	#ULOC_TRADITIONAL_CHINESE
 "zh_TW"

	)

220 
	#ULOC_CANADA
 "’_CA"

	)

222 
	#ULOC_CANADA_FRENCH
 "ä_CA"

	)

224 
	#ULOC_CHINA
 "zh_CN"

	)

226 
	#ULOC_PRC
 "zh_CN"

	)

228 
	#ULOC_FRANCE
 "ä_FR"

	)

230 
	#ULOC_GERMANY
 "de_DE"

	)

232 
	#ULOC_ITALY
 "™_IT"

	)

234 
	#ULOC_JAPAN
 "ja_JP"

	)

236 
	#ULOC_KOREA
 "ko_KR"

	)

238 
	#ULOC_TAIWAN
 "zh_TW"

	)

240 
	#ULOC_UK
 "’_GB"

	)

242 
	#ULOC_US
 "’_US"

	)

249 
	#ULOC_LANG_CAPACITY
 12

	)

256 
	#ULOC_COUNTRY_CAPACITY
 4

	)

262 
	#ULOC_FULLNAME_CAPACITY
 157

	)

269 
	#ULOC_SCRIPT_CAPACITY
 6

	)

275 
	#ULOC_KEYWORDS_CAPACITY
 50

	)

281 
	#ULOC_KEYWORD_AND_VALUES_CAPACITY
 100

	)

287 
	#ULOC_KEYWORD_SEPARATOR
 '@'

	)

294 
	#ULOC_KEYWORD_SEPARATOR_UNICODE
 0x40

	)

300 
	#ULOC_KEYWORD_ASSIGN
 '='

	)

307 
	#ULOC_KEYWORD_ASSIGN_UNICODE
 0x3D

	)

313 
	#ULOC_KEYWORD_ITEM_SEPARATOR
 ';'

	)

320 
	#ULOC_KEYWORD_ITEM_SEPARATOR_UNICODE
 0x3B

	)

340 
	mULOC_ACTUAL_LOCALE
 = 0,

344 
	mULOC_VALID_LOCALE
 = 1,

346 #iâdeà
U_HIDE_DEPRECATED_API


350 
	mULOC_REQUESTED_LOCALE
 = 2,

353 
	mULOC_DATA_LOCALE_TYPE_LIMIT
 = 3

354 } 
	tULocD©aLoÿËTy³
 ;

368 
U_STABLE
 cÚ¡ * 
U_EXPORT2


369 
uloc_g‘DeçuÉ
();

388 
U_STABLE
 
U_EXPORT2


389 
uloc_£tDeçuÉ
(cÚ¡ * 
loÿËID
,

390 
UE¼ÜCode
* 
¡©us
);

404 
U_STABLE
 
št32_t
 
U_EXPORT2


405 
uloc_g‘Lªguage
(cÚ¡ * 
loÿËID
,

406 * 
Ïnguage
,

407 
št32_t
 
ÏnguageC­ac™y
,

408 
UE¼ÜCode
* 
”r
);

422 
U_STABLE
 
št32_t
 
U_EXPORT2


423 
uloc_g‘Süt
(cÚ¡ * 
loÿËID
,

424 * 
süt
,

425 
št32_t
 
sütC­ac™y
,

426 
UE¼ÜCode
* 
”r
);

440 
U_STABLE
 
št32_t
 
U_EXPORT2


441 
uloc_g‘CouÁry
(cÚ¡ * 
loÿËID
,

442 * 
couÁry
,

443 
št32_t
 
couÁryC­ac™y
,

444 
UE¼ÜCode
* 
”r
);

458 
U_STABLE
 
št32_t
 
U_EXPORT2


459 
uloc_g‘V¬ŸÁ
(cÚ¡ * 
loÿËID
,

460 * 
v¬ŸÁ
,

461 
št32_t
 
v¬ŸÁC­ac™y
,

462 
UE¼ÜCode
* 
”r
);

481 
U_STABLE
 
št32_t
 
U_EXPORT2


482 
uloc_g‘Name
(cÚ¡ * 
loÿËID
,

483 * 
Çme
,

484 
št32_t
 
ÇmeC­ac™y
,

485 
UE¼ÜCode
* 
”r
);

504 
U_STABLE
 
št32_t
 
U_EXPORT2


505 
uloc_ÿnÚiÿlize
(cÚ¡ * 
loÿËID
,

506 * 
Çme
,

507 
št32_t
 
ÇmeC­ac™y
,

508 
UE¼ÜCode
* 
”r
);

517 
U_STABLE
 cÚ¡ * 
U_EXPORT2


518 
uloc_g‘ISO3Lªguage
(cÚ¡ * 
loÿËID
);

528 
U_STABLE
 cÚ¡ * 
U_EXPORT2


529 
uloc_g‘ISO3CouÁry
(cÚ¡ * 
loÿËID
);

539 
U_STABLE
 
ušt32_t
 
U_EXPORT2


540 
uloc_g‘LCID
(cÚ¡ * 
loÿËID
);

558 
U_STABLE
 
št32_t
 
U_EXPORT2


559 
uloc_g‘Di¥ÏyLªguage
(cÚ¡ * 
loÿË
,

560 cÚ¡ * 
di¥ÏyLoÿË
,

561 
UCh¬
* 
Ïnguage
,

562 
št32_t
 
ÏnguageC­ac™y
,

563 
UE¼ÜCode
* 
¡©us
);

581 
U_STABLE
 
št32_t
 
U_EXPORT2


582 
uloc_g‘Di¥ÏySüt
(cÚ¡ * 
loÿË
,

583 cÚ¡ * 
di¥ÏyLoÿË
,

584 
UCh¬
* 
süt
,

585 
št32_t
 
sütC­ac™y
,

586 
UE¼ÜCode
* 
¡©us
);

604 
U_STABLE
 
št32_t
 
U_EXPORT2


605 
uloc_g‘Di¥ÏyCouÁry
(cÚ¡ * 
loÿË
,

606 cÚ¡ * 
di¥ÏyLoÿË
,

607 
UCh¬
* 
couÁry
,

608 
št32_t
 
couÁryC­ac™y
,

609 
UE¼ÜCode
* 
¡©us
);

628 
U_STABLE
 
št32_t
 
U_EXPORT2


629 
uloc_g‘Di¥ÏyV¬ŸÁ
(cÚ¡ * 
loÿË
,

630 cÚ¡ * 
di¥ÏyLoÿË
,

631 
UCh¬
* 
v¬ŸÁ
,

632 
št32_t
 
v¬ŸÁC­ac™y
,

633 
UE¼ÜCode
* 
¡©us
);

675 
U_STABLE
 
št32_t
 
U_EXPORT2


676 
uloc_g‘Di¥ÏyKeywÜd
(cÚ¡ * 
keywÜd
,

677 cÚ¡ * 
di¥ÏyLoÿË
,

678 
UCh¬
* 
de¡
,

679 
št32_t
 
de¡C­ac™y
,

680 
UE¼ÜCode
* 
¡©us
);

701 
U_STABLE
 
št32_t
 
U_EXPORT2


702 
uloc_g‘Di¥ÏyKeywÜdV®ue
ĞcÚ¡ * 
loÿË
,

703 cÚ¡ * 
keywÜd
,

704 cÚ¡ * 
di¥ÏyLoÿË
,

705 
UCh¬
* 
de¡
,

706 
št32_t
 
de¡C­ac™y
,

707 
UE¼ÜCode
* 
¡©us
);

724 
U_STABLE
 
št32_t
 
U_EXPORT2


725 
uloc_g‘Di¥ÏyName
(cÚ¡ * 
loÿËID
,

726 cÚ¡ * 
šLoÿËID
,

727 
UCh¬
* 
»suÉ
,

728 
št32_t
 
maxResuÉSize
,

729 
UE¼ÜCode
* 
”r
);

742 
U_STABLE
 cÚ¡ * 
U_EXPORT2


743 
uloc_g‘AvaabË
(
št32_t
 
n
);

751 
U_STABLE
 
št32_t
 
U_EXPORT2
 
uloc_couÁAvaabË
();

762 
U_STABLE
 cÚ¡ * cÚ¡* 
U_EXPORT2


763 
uloc_g‘ISOLªguages
();

774 
U_STABLE
 cÚ¡ * cÚ¡* 
U_EXPORT2


775 
uloc_g‘ISOCouÁr›s
();

790 
U_STABLE
 
št32_t
 
U_EXPORT2


791 
uloc_g‘P¬’t
(cÚ¡ * 
loÿËID
,

792 * 
·»Á
,

793 
št32_t
 
·»ÁC­ac™y
,

794 
UE¼ÜCode
* 
”r
);

818 
U_STABLE
 
št32_t
 
U_EXPORT2


819 
uloc_g‘Ba£Name
(cÚ¡ * 
loÿËID
,

820 * 
Çme
,

821 
št32_t
 
ÇmeC­ac™y
,

822 
UE¼ÜCode
* 
”r
);

833 
U_STABLE
 
UEnum”©iÚ
* 
U_EXPORT2


834 
uloc_İ’KeywÜds
(cÚ¡ * 
loÿËID
,

835 
UE¼ÜCode
* 
¡©us
);

848 
U_STABLE
 
št32_t
 
U_EXPORT2


849 
uloc_g‘KeywÜdV®ue
(cÚ¡ * 
loÿËID
,

850 cÚ¡ * 
keywÜdName
,

851 * 
bufãr
, 
št32_t
 
bufãrC­ac™y
,

852 
UE¼ÜCode
* 
¡©us
);

874 
U_STABLE
 
št32_t
 
U_EXPORT2


875 
uloc_£tKeywÜdV®ue
(cÚ¡ * 
keywÜdName
,

876 cÚ¡ * 
keywÜdV®ue
,

877 * 
bufãr
, 
št32_t
 
bufãrC­ac™y
,

878 
UE¼ÜCode
* 
¡©us
);

886 
	mULOC_LAYOUT_LTR
 = 0,

887 
	mULOC_LAYOUT_RTL
 = 1,

888 
	mULOC_LAYOUT_TTB
 = 2,

889 
	mULOC_LAYOUT_BTT
 = 3,

890 
	mULOC_LAYOUT_UNKNOWN


891 } 
	tULayoutTy³
;

901 
U_STABLE
 
ULayoutTy³
 
U_EXPORT2


902 
uloc_g‘Ch¬aù”Or›Á©iÚ
(cÚ¡ * 
loÿËId
,

903 
UE¼ÜCode
 *
¡©us
);

913 
U_STABLE
 
ULayoutTy³
 
U_EXPORT2


914 
uloc_g‘LšeOr›Á©iÚ
(cÚ¡ * 
loÿËId
,

915 
UE¼ÜCode
 *
¡©us
);

924 
	mULOC_ACCEPT_FAILED
 = 0,

925 
	mULOC_ACCEPT_VALID
 = 1,

926 
	mULOC_ACCEPT_FALLBACK
 = 2

929 } 
	tUAcû±ResuÉ
;

944 
U_STABLE
 
št32_t
 
U_EXPORT2


945 
uloc_acû±LªguageFromHTTP
(*
»suÉ
, 
št32_t
 
»suÉAvaabË
,

946 
UAcû±ResuÉ
 *
outResuÉ
,

947 cÚ¡ *
h‰pAcû±Lªguage
,

948 
UEnum”©iÚ
* 
avaabËLoÿËs
,

949 
UE¼ÜCode
 *
¡©us
);

964 
U_STABLE
 
št32_t
 
U_EXPORT2


965 
uloc_acû±Lªguage
(*
»suÉ
, 
št32_t
 
»suÉAvaabË
,

966 
UAcû±ResuÉ
 *
outResuÉ
, cÚ¡ **
acû±Li¡
,

967 
št32_t
 
acû±Li¡CouÁ
,

968 
UEnum”©iÚ
* 
avaabËLoÿËs
,

969 
UE¼ÜCode
 *
¡©us
);

984 
U_STABLE
 
št32_t
 
U_EXPORT2


985 
uloc_g‘LoÿËFÜLCID
(
ušt32_t
 
ho¡ID
, *
loÿË
, 
št32_t
 
loÿËC­ac™y
,

986 
UE¼ÜCode
 *
¡©us
);

1022 
U_STABLE
 
št32_t
 
U_EXPORT2


1023 
uloc_addLik–ySubgs
(cÚ¡ * 
loÿËID
,

1024 * 
maximizedLoÿËID
,

1025 
št32_t
 
maximizedLoÿËIDC­ac™y
,

1026 
UE¼ÜCode
* 
”r
);

1062 
U_STABLE
 
št32_t
 
U_EXPORT2


1063 
uloc_mšimizeSubgs
(cÚ¡ * 
loÿËID
,

1064 * 
mšimizedLoÿËID
,

1065 
št32_t
 
mšimizedLoÿËIDC­ac™y
,

1066 
UE¼ÜCode
* 
”r
);

1091 
U_DRAFT
 
št32_t
 
U_EXPORT2


1092 
uloc_fÜLªguageTag
(cÚ¡ * 
Ïngg
,

1093 * 
loÿËID
,

1094 
št32_t
 
loÿËIDC­ac™y
,

1095 
št32_t
* 
·r£dL’gth
,

1096 
UE¼ÜCode
* 
”r
);

1119 
U_DRAFT
 
št32_t
 
U_EXPORT2


1120 
uloc_toLªguageTag
(cÚ¡ * 
loÿËID
,

1121 * 
Ïngg
,

1122 
št32_t
 
ÏnggC­ac™y
,

1123 
UBoŞ
 
¡riù
,

1124 
UE¼ÜCode
* 
”r
);

	@unicode/umachine.h

23 #iâdeà
__UMACHINE_H__


24 
	#__UMACHINE_H__


	)

44 #ià
defšed
(
U_PALMOS
)

45 
	~"unicode/µ®mos.h
"

46 #–ià!
defšed
(
__MINGW32__
è&& (defšed(
WIN32
è|| defšed(
_WIN32
è|| defšed(
WIN64
è|| defšed(
_WIN64
))

47 #ifdeà
CYGWINMSVC


48 
	~"unicode/¶©fÜm.h
"

50 
	~"unicode/pwš32.h
"

52 
	~"unicode/±y³s.h
"

59 
	~<¡ddef.h
>

66 #ifdeà
__ılu¥lus


67 #iâdeà
XP_CPLUSPLUS


68 
	#XP_CPLUSPLUS


	)

71 #undeà
XP_CPLUSPLUS


98 #ifdeà
XP_CPLUSPLUS


99 
	#U_CFUNC
 "C"

	)

100 
	#U_CDECL_BEGIN
 "C" {

	)

101 
	#U_CDECL_END
 }

	)

103 
	#U_CFUNC
 

	)

104 
	#U_CDECL_BEGIN


	)

105 
	#U_CDECL_END


	)

113 #ià
defšed
(
__GNUC__
è&& (__GNUC__ > 3 || (__GNUC__ =ğ3 && 
__GNUC_MINOR__
 >= 2))

114 
	#U_ATTRIBUTE_DEPRECATED
 
	`__©Œibu‹__
 ((
d•»ÿ‹d
))

	)

120 #–ià
defšed
(
U_WINDOWS
è&& defšed(
_MSC_VER
) && (_MSC_VER >= 1400)

121 
	#U_ATTRIBUTE_DEPRECATED
 
	`__deş¥ec
(
d•»ÿ‹d
)

	)

123 
	#U_ATTRIBUTE_DEPRECATED


	)

126 
	#U_CAPI
 
U_CFUNC
 
U_EXPORT


	)

128 
	#U_STABLE
 
U_CAPI


	)

130 
	#U_DRAFT
 
U_CAPI


	)

132 
	#U_DEPRECATED
 
U_CAPI
 
U_ATTRIBUTE_DEPRECATED


	)

134 
	#U_OBSOLETE
 
U_CAPI


	)

136 
	#U_INTERNAL
 
U_CAPI


	)

142 #iâdeà
INT8_MIN


144 
	#INT8_MIN
 ((
št8_t
)(-128))

	)

146 #iâdeà
INT16_MIN


148 
	#INT16_MIN
 ((
št16_t
)(-32767-1))

	)

150 #iâdeà
INT32_MIN


152 
	#INT32_MIN
 ((
št32_t
)(-2147483647-1))

	)

155 #iâdeà
INT8_MAX


157 
	#INT8_MAX
 ((
št8_t
)(127))

	)

159 #iâdeà
INT16_MAX


161 
	#INT16_MAX
 ((
št16_t
)(32767))

	)

163 #iâdeà
INT32_MAX


165 
	#INT32_MAX
 ((
št32_t
)(2147483647))

	)

168 #iâdeà
UINT8_MAX


170 
	#UINT8_MAX
 ((
ušt8_t
)(255U))

	)

172 #iâdeà
UINT16_MAX


174 
	#UINT16_MAX
 ((
ušt16_t
)(65535U))

	)

176 #iâdeà
UINT32_MAX


178 
	#UINT32_MAX
 ((
ušt32_t
)(4294967295U))

	)

181 #ià
defšed
(
U_INT64_T_UNAVAILABLE
)

182 #”rÜ 
št64_t
 
is
 
»quœed
 
decim®
 
fÜm©
 
ªd
 
ruË
-
ba£d
 
numb”
 format.

184 #iâdeà
INT64_C


190 
	#INT64_C
(
c
èø## 
LL


	)

192 #iâdeà
UINT64_C


198 
	#UINT64_C
(
c
èø## 
ULL


	)

200 #iâdeà
U_INT64_MIN


202 
	#U_INT64_MIN
 ((
št64_t
)(
	`INT64_C
(-9223372036854775807)-1))

	)

204 #iâdeà
U_INT64_MAX


206 
	#U_INT64_MAX
 ((
št64_t
)(
	`INT64_C
(9223372036854775807)))

	)

208 #iâdeà
U_UINT64_MAX


210 
	#U_UINT64_MAX
 ((
ušt64_t
)(
	`UINT64_C
(18446744073709551615)))

	)

219 
št8_t
 
	tUBoŞ
;

221 #iâdeà
TRUE


223 
	#TRUE
 1

	)

225 #iâdeà
FALSE


227 
	#FALSE
 0

	)

243 #iâdeà
U_HAVE_WCHAR_H


244 
	#U_HAVE_WCHAR_H
 1

	)

253 #ià
U_SIZEOF_WCHAR_T
==0

254 #undeà
U_SIZEOF_WCHAR_T


255 
	#U_SIZEOF_WCHAR_T
 4

	)

270 #ià!
defšed
(
U_WCHAR_IS_UTF16
è&& !defšed(
U_WCHAR_IS_UTF32
)

271 #ifdeà
__STDC_ISO_10646__


272 #ià(
U_SIZEOF_WCHAR_T
==2)

273 
	#U_WCHAR_IS_UTF16


	)

274 #–ià(
U_SIZEOF_WCHAR_T
==4)

275 
	#U_WCHAR_IS_UTF32


	)

277 #–ià
defšed
 
__UCS2__


278 #ià(
__OS390__
 || 
__OS400__
è&& (
U_SIZEOF_WCHAR_T
==2)

279 
	#U_WCHAR_IS_UTF16


	)

281 #–ià
defšed
 
__UCS4__


282 #ià(
U_SIZEOF_WCHAR_T
==4)

283 
	#U_WCHAR_IS_UTF32


	)

285 #–ià
defšed
(
U_WINDOWS
)

286 
	#U_WCHAR_IS_UTF16


	)

293 
	#U_SIZEOF_UCHAR
 2

	)

308 #ià
U_SIZEOF_WCHAR_T
==2

309 
wch¬_t
 
	tUCh¬
;

310 #–ià
U_GNUC_UTF16_STRING


311 #ià
defšed
 
_GCC_


312 
__CHAR16_TYPE__
 
	tch¬16_t
;

314 
ch¬16_t
 
	tUCh¬
;

316 
ušt16_t
 
	tUCh¬
;

336 
št32_t
 
	tUCh¬32
;

345 #iâdeà
U_HIDE_INTERNAL_API


353 #iâdeà
U_ALIGN_CODE


354 
	#U_ALIGN_CODE
(
n
)

	)

364 #iâdeà
U_INLINE


365 #ifdeà
XP_CPLUSPLUS


366 
	#U_INLINE
 
šlše


	)

368 
	#U_INLINE


	)

372 
	~"unicode/u»Çme.h
"

	@unicode/umisc.h

15 #iâdeà
UMISC_H


16 
	#UMISC_H


	)

18 
	~"unicode/uty³s.h
"

27 
U_CDECL_BEGIN


32 
	sUF›ldPos™iÚ
 {

37 
št32_t
 
	mf›ld
;

42 
št32_t
 
	mbegšIndex
;

47 
št32_t
 
	m’dIndex
;

48 } 
	tUF›ldPos™iÚ
;

50 #ià!
UCONFIG_NO_SERVICE


55 cÚ¡ * 
	tURegi¡ryKey
;

58 
	gU_CDECL_END


	@unicode/unifilt.h

10 #iâdeà
UNIFILT_H


11 
	#UNIFILT_H


	)

13 
	~"unicode/unifunù.h
"

14 
	~"unicode/unim©ch.h
"

21 
	gU_NAMESPACE_BEGIN


31 
	#U_ETHER
 ((
UCh¬
)0xFFFF)

	)

59 
şass
 
U_COMMON_API
 
	gUnicodeF‹r
 : 
public
 
UnicodeFunùÜ
,…ubliø
	gUnicodeM©ch”
 {

61 
	gpublic
:

66 
vœtu®
 ~
UnicodeF‹r
();

75 
vœtu®
 
UBoŞ
 
cÚšs
(
UCh¬32
 
c
) const = 0;

82 
vœtu®
 
UnicodeM©ch”
* 
toM©ch”
() const;

88 
vœtu®
 
UM©chDeg»e
 
m©ches
(cÚ¡ 
R•ÏûabË
& 
‹xt
,

89 
št32_t
& 
off£t
,

90 
št32_t
 
lim™
,

91 
UBoŞ
 
šüem’l
);

97 
vœtu®
 
£tD©a
(cÚ¡ 
T¿n¦™”©iÚRuËD©a
*);

104 
UCÏssID
 
U_EXPORT2
 
g‘SticCÏssID
();

106 
	g´Ùeùed
:

118 
	gU_NAMESPACE_END


	@unicode/unifunct.h

10 #iâdeà
UNIFUNCT_H


11 
	#UNIFUNCT_H


	)

13 
	~"unicode/uty³s.h
"

14 
	~"unicode/uobjeù.h
"

21 
U_NAMESPACE_BEGIN


23 
şass
 
	gUnicodeM©ch”
;

24 
şass
 
	gUnicodeR•Ïûr
;

25 
şass
 
	gT¿n¦™”©iÚRuËD©a
;

33 şas 
	cU_COMMON_API
 
	mUnicodeFunùÜ
 : 
public
 
UObjeù
 {

35 
public
:

41 
vœtu®
 ~
UnicodeFunùÜ
();

49 
vœtu®
 
UnicodeFunùÜ
* 
	$şÚe
() const = 0;

61 
vœtu®
 
UnicodeM©ch”
* 
	$toM©ch”
() const;

73 
vœtu®
 
UnicodeR•Ïûr
* 
	$toR•Ïûr
() const;

81 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

98 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const = 0;

108 
vœtu®
 
	`£tD©a
(cÚ¡ 
T¿n¦™”©iÚRuËD©a
*) = 0;

110 
´Ùeùed
:

123 
U_NAMESPACE_END


	@unicode/unimatch.h

8 #iâdeà
UNIMATCH_H


9 
	#UNIMATCH_H


	)

11 
	~"unicode/uty³s.h
"

19 
U_NAMESPACE_BEGIN


21 
şass
 
	gR•ÏûabË
;

22 
şass
 
	gUnicodeSŒšg
;

23 
şass
 
	gUnicodeS‘
;

30 
	eUM©chDeg»e
 {

38 
	mU_MISMATCH
,

50 
	mU_PARTIAL_MATCH
,

60 
	mU_MATCH


68 şas 
	cU_COMMON_API
 
	mUnicodeM©ch”
 {

70 
	mpublic
:

75 
vœtu®
 ~
UnicodeM©ch”
();

123 
vœtu®
 
UM©chDeg»e
 
m©ches
(cÚ¡ 
R•ÏûabË
& 
‹xt
,

124 
št32_t
& 
off£t
,

125 
št32_t
 
lim™
,

126 
UBoŞ
 
šüem’l
) = 0;

140 
vœtu®
 
	mUnicodeSŒšg
& 
	$toP©‹º
(
UnicodeSŒšg
& 
»suÉ
,

141 
UBoŞ
 
esÿ³UÅršbË
 = 
FALSE
) const = 0;

150 
vœtu®
 
UBoŞ
 
	$m©chesIndexV®ue
(
ušt8_t
 
v
) const = 0;

158 
vœtu®
 
	$addM©chS‘To
(
UnicodeS‘
& 
toUniÚTo
) const = 0;

161 
U_NAMESPACE_END


	@unicode/uniset.h

11 #iâdeà
UNICODESET_H


12 
	#UNICODESET_H


	)

14 
	~"unicode/unift.h
"

15 
	~"unicode/uni¡r.h
"

16 
	~"unicode/u£t.h
"

23 
U_NAMESPACE_BEGIN


25 
şass
 
	gBMPS‘
;

26 
şass
 
	gP¬£Pos™iÚ
;

27 
şass
 
	gSymbŞTabË
;

28 
şass
 
	gUnicodeS‘SŒšgS·n
;

29 
şass
 
	gUVeùÜ
;

30 
şass
 
	gRuËCh¬aù”I‹¿tÜ
;

272 şas 
	cU_COMMON_API
 
	mUnicodeS‘
 : 
public
 
UnicodeF‹r
 {

274 
št32_t
 
Ën
;

275 
št32_t
 
	mÿ·c™y
;

276 
UCh¬32
* 
	mli¡
;

277 
BMPS‘
 *
	mbmpS‘
;

278 
UCh¬32
* 
	mbufãr
;

279 
št32_t
 
	mbufãrC­ac™y
;

280 
št32_t
 
	m·tL’
;

291 
UCh¬
 *
	m·t
;

292 
UVeùÜ
* 
	m¡ršgs
;

293 
UnicodeS‘SŒšgS·n
 *
	m¡ršgS·n
;

295 
	m´iv©e
:

297 
kIsBogus
 = 1

299 
ušt8_t
 
	gfFÏgs
;

300 
	gpublic
:

310 
šlše
 
UBoŞ
 
	$isBogus
() const;

328 
	`£tToBogus
();

330 
public
:

337 
MIN_VALUE
 = 0,

343 
MAX_VALUE
 = 0x10ffff

344 
	}
};

350 
	gpublic
:

356 
UnicodeS‘
();

366 
UnicodeS‘
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

376 
UnicodeS‘
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

377 
UE¼ÜCode
& 
¡©us
);

391 
UnicodeS‘
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

392 
ušt32_t
 
İtiÚs
,

393 cÚ¡ 
SymbŞTabË
* 
symbŞs
,

394 
UE¼ÜCode
& 
¡©us
);

409 
UnicodeS‘
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
, 
P¬£Pos™iÚ
& 
pos
,

410 
ušt32_t
 
İtiÚs
,

411 cÚ¡ 
SymbŞTabË
* 
symbŞs
,

412 
UE¼ÜCode
& 
¡©us
);

418 
UnicodeS‘
(cÚ¡ UnicodeS‘& 
o
);

424 
	gvœtu®
 ~
UnicodeS‘
();

431 
	gUnicodeS‘
& 
	gİ”©Ü
=(cÚ¡ 
UnicodeS‘
& 
o
);

444 
vœtu®
 
UBoŞ
 
	gİ”©Ü
==(cÚ¡ 
UnicodeS‘
& 
o
) const;

451 
UBoŞ
 
	gİ”©Ü
!=(cÚ¡ 
UnicodeS‘
& 
o
) const;

462 
vœtu®
 
UnicodeFunùÜ
* 
	$şÚe
() const;

471 
vœtu®
 
št32_t
 
	$hashCode
() const;

481 
šlše
 
UnicodeS‘
 *
	`äomUS‘
(
US‘
 *
u£t
);

491 
šlše
 cÚ¡ 
UnicodeS‘
 *
	`äomUS‘
(cÚ¡ 
US‘
 *
u£t
);

500 
šlše
 
US‘
 *
	`toUS‘
();

510 
šlše
 cÚ¡ 
US‘
 * 
	$toUS‘
() const;

525 
šlše
 
UBoŞ
 
	$isFroz’
() const;

540 
UnicodeFunùÜ
 *
	`ä“ze
();

550 
UnicodeFunùÜ
 *
	$şÚeAsThawed
() const;

566 
UnicodeS‘
& 
	`£t
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

573 
UBoŞ
 
	`»£mbËsP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

574 
št32_t
 
pos
);

588 
UnicodeS‘
& 
	`­¶yP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

589 
UE¼ÜCode
& 
¡©us
);

607 
UnicodeS‘
& 
	`­¶yP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

608 
ušt32_t
 
İtiÚs
,

609 cÚ¡ 
SymbŞTabË
* 
symbŞs
,

610 
UE¼ÜCode
& 
¡©us
);

643 
UnicodeS‘
& 
	`­¶yP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

644 
P¬£Pos™iÚ
& 
pos
,

645 
ušt32_t
 
İtiÚs
,

646 cÚ¡ 
SymbŞTabË
* 
symbŞs
,

647 
UE¼ÜCode
& 
¡©us
);

662 
vœtu®
 
UnicodeSŒšg
& 
	$toP©‹º
(
UnicodeSŒšg
& 
»suÉ
,

663 
UBoŞ
 
esÿ³UÅršbË
 = 
FALSE
) const;

687 
UnicodeS‘
& 
	`­¶yIÁPrİ”tyV®ue
(
UPrİ”ty
 
´İ
,

688 
št32_t
 
v®ue
,

689 
UE¼ÜCode
& 
ec
);

720 
UnicodeS‘
& 
	`­¶yPrİ”tyAlŸs
(cÚ¡ 
UnicodeSŒšg
& 
´İ
,

721 cÚ¡ 
UnicodeSŒšg
& 
v®ue
,

722 
UE¼ÜCode
& 
ec
);

732 
vœtu®
 
št32_t
 
	$size
() const;

740 
vœtu®
 
UBoŞ
 
	$isEm±y
() const;

749 
vœtu®
 
UBoŞ
 
	$cÚšs
(
UCh¬32
 
c
) const;

759 
vœtu®
 
UBoŞ
 
	$cÚšs
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) const;

768 
UBoŞ
 
	$cÚšs
(cÚ¡ 
UnicodeSŒšg
& 
s
) const;

777 
vœtu®
 
UBoŞ
 
	$cÚšsAÎ
(cÚ¡ 
UnicodeS‘
& 
c
) const;

786 
UBoŞ
 
	$cÚšsAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
) const;

796 
UBoŞ
 
	$cÚšsNÚe
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) const;

805 
UBoŞ
 
	$cÚšsNÚe
(cÚ¡ 
UnicodeS‘
& 
c
) const;

814 
UBoŞ
 
	$cÚšsNÚe
(cÚ¡ 
UnicodeSŒšg
& 
s
) const;

824 
šlše
 
UBoŞ
 
	$cÚšsSome
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) const;

833 
šlše
 
UBoŞ
 
	$cÚšsSome
(cÚ¡ 
UnicodeS‘
& 
s
) const;

842 
šlše
 
UBoŞ
 
	$cÚšsSome
(cÚ¡ 
UnicodeSŒšg
& 
s
) const;

862 
št32_t
 
	$¥ª
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

876 
šlše
 
št32_t
 
	$¥ª
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
št32_t
 
¡¬t
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

895 
št32_t
 
	$¥ªBack
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

910 
šlše
 
št32_t
 
	$¥ªBack
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
št32_t
 
lim™
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

930 
št32_t
 
	$¥ªUTF8
(cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

949 
št32_t
 
	$¥ªBackUTF8
(cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

955 
vœtu®
 
UM©chDeg»e
 
	`m©ches
(cÚ¡ 
R•ÏûabË
& 
‹xt
,

956 
št32_t
& 
off£t
,

957 
št32_t
 
lim™
,

958 
UBoŞ
 
šüem’l
);

960 
´iv©e
:

982 
št32_t
 
	`m©chRe¡
(cÚ¡ 
R•ÏûabË
& 
‹xt
,

983 
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
,

984 cÚ¡ 
UnicodeSŒšg
& 
s
);

995 
št32_t
 
	$fšdCodePošt
(
UCh¬32
 
c
) const;

997 
public
:

1006 
vœtu®
 
	$addM©chS‘To
(
UnicodeS‘
& 
toUniÚTo
) const;

1016 
št32_t
 
	$šdexOf
(
UCh¬32
 
c
) const;

1027 
UCh¬32
 
	$ch¬At
(
št32_t
 
šdex
) const;

1043 
vœtu®
 
UnicodeS‘
& 
	`add
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

1052 
UnicodeS‘
& 
	`add
(
UCh¬32
 
c
);

1065 
UnicodeS‘
& 
	`add
(cÚ¡ 
UnicodeSŒšg
& 
s
);

1067 
´iv©e
:

1073 
št32_t
 
	`g‘SšgËCP
(cÚ¡ 
UnicodeSŒšg
& 
s
);

1075 
	`_add
(cÚ¡ 
UnicodeSŒšg
& 
s
);

1077 
public
:

1086 
UnicodeS‘
& 
	`addAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
);

1096 
UnicodeS‘
& 
	`»šAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
);

1106 
UnicodeS‘
& 
	`com¶em’tAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
);

1116 
UnicodeS‘
& 
	`»moveAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
);

1126 
UnicodeS‘
* 
U_EXPORT2
 
	`ü—‹From
(cÚ¡ 
UnicodeSŒšg
& 
s
);

1136 
UnicodeS‘
* 
U_EXPORT2
 
	`ü—‹FromAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
);

1151 
vœtu®
 
UnicodeS‘
& 
	`»š
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

1159 
UnicodeS‘
& 
	`»š
(
UCh¬32
 
c
);

1174 
vœtu®
 
UnicodeS‘
& 
	`»move
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

1183 
UnicodeS‘
& 
	`»move
(
UCh¬32
 
c
);

1194 
UnicodeS‘
& 
	`»move
(cÚ¡ 
UnicodeSŒšg
& 
s
);

1203 
vœtu®
 
UnicodeS‘
& 
	`com¶em’t
();

1219 
vœtu®
 
UnicodeS‘
& 
	`com¶em’t
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

1228 
UnicodeS‘
& 
	`com¶em’t
(
UCh¬32
 
c
);

1240 
UnicodeS‘
& 
	`com¶em’t
(cÚ¡ 
UnicodeSŒšg
& 
s
);

1254 
vœtu®
 
UnicodeS‘
& 
	`addAÎ
(cÚ¡ UnicodeS‘& 
c
);

1267 
vœtu®
 
UnicodeS‘
& 
	`»šAÎ
(cÚ¡ UnicodeS‘& 
c
);

1280 
vœtu®
 
UnicodeS‘
& 
	`»moveAÎ
(cÚ¡ UnicodeS‘& 
c
);

1292 
vœtu®
 
UnicodeS‘
& 
	`com¶em’tAÎ
(cÚ¡ UnicodeS‘& 
c
);

1300 
vœtu®
 
UnicodeS‘
& 
	`ş—r
();

1327 
UnicodeS‘
& 
	`şo£Ov”
(
št32_t
 
©Œibu‹
);

1335 
vœtu®
 
UnicodeS‘
 &
	`»moveAÎSŒšgs
();

1344 
vœtu®
 
št32_t
 
	$g‘RªgeCouÁ
() const;

1353 
vœtu®
 
UCh¬32
 
	$g‘RªgeS¹
(
št32_t
 
šdex
) const;

1362 
vœtu®
 
UCh¬32
 
	$g‘RªgeEnd
(
št32_t
 
šdex
) const;

1412 
št32_t
 
	$£rŸlize
(
ušt16_t
 *
de¡
, 
št32_t
 
de¡C­ac™y
, 
UE¼ÜCode
& 
ec
) const;

1420 
vœtu®
 
UnicodeS‘
& 
	`com·ù
();

1433 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

1443 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

1445 
´iv©e
:

1449 
ä›nd
 
şass
 
US‘Acûss
;

1451 
št32_t
 
	$g‘SŒšgCouÁ
() const;

1453 cÚ¡ 
UnicodeSŒšg
* 
	$g‘SŒšg
(
št32_t
 
šdex
) const;

1459 
´iv©e
:

1466 
vœtu®
 
UBoŞ
 
	$m©chesIndexV®ue
(
ušt8_t
 
v
) const;

1468 
´iv©e
:

1474 
	`UnicodeS‘
(cÚ¡ 
UnicodeS‘
& 
o
, 
UBoŞ
 );

1480 
	`­¶yP©‹º
(
RuËCh¬aù”I‹¿tÜ
& 
ch¬s
,

1481 cÚ¡ 
SymbŞTabË
* 
symbŞs
,

1482 
UnicodeSŒšg
& 
»butP©
,

1483 
ušt32_t
 
İtiÚs
,

1484 
UE¼ÜCode
& 
ec
);

1490 
	`’su»C­ac™y
(
št32_t
 
ÃwL’
, 
UE¼ÜCode
& 
ec
);

1492 
	`’su»BufãrC­ac™y
(
št32_t
 
ÃwL’
, 
UE¼ÜCode
& 
ec
);

1494 
	`sw­Bufãrs
();

1496 
UBoŞ
 
	`®loÿ‹SŒšgs
(
UE¼ÜCode
 &
¡©us
);

1498 
UnicodeSŒšg
& 
	$_toP©‹º
(
UnicodeSŒšg
& 
»suÉ
,

1499 
UBoŞ
 
esÿ³UÅršbË
) const;

1501 
UnicodeSŒšg
& 
	$_g’”©eP©‹º
(
UnicodeSŒšg
& 
»suÉ
,

1502 
UBoŞ
 
esÿ³UÅršbË
) const;

1504 
	`_­³ndToP©
(
UnicodeSŒšg
& 
buf
, cÚ¡ UnicodeSŒšg& 
s
, 
UBoŞ
 
esÿ³UÅršbË
);

1506 
	`_­³ndToP©
(
UnicodeSŒšg
& 
buf
, 
UCh¬32
 
c
, 
UBoŞ
 
esÿ³UÅršbË
);

1512 
	`exşusiveOr
(cÚ¡ 
UCh¬32
* 
Ùh”
, 
št32_t
 
Ùh”L’
, 
št8_t
 
pŞ¬™y
);

1514 
	`add
(cÚ¡ 
UCh¬32
* 
Ùh”
, 
št32_t
 
Ùh”L’
, 
št8_t
 
pŞ¬™y
);

1516 
	`»š
(cÚ¡ 
UCh¬32
* 
Ùh”
, 
št32_t
 
Ùh”L’
, 
št8_t
 
pŞ¬™y
);

1523 
UBoŞ
 
	`»£mbËsPrİ”tyP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

1524 
št32_t
 
pos
);

1526 
UBoŞ
 
	`»£mbËsPrİ”tyP©‹º
(
RuËCh¬aù”I‹¿tÜ
& 
ch¬s
,

1527 
št32_t
 
™”O±s
);

1567 
UnicodeS‘
& 
	`­¶yPrİ”tyP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

1568 
P¬£Pos™iÚ
& 
µos
,

1569 
UE¼ÜCode
 &
ec
);

1571 
	`­¶yPrİ”tyP©‹º
(
RuËCh¬aù”I‹¿tÜ
& 
ch¬s
,

1572 
UnicodeSŒšg
& 
»butP©
,

1573 
UE¼ÜCode
& 
ec
);

1575 cÚ¡ 
UnicodeS‘
* 
	`g‘InşusiÚs
(
št32_t
 
¤c
, 
UE¼ÜCode
 &
¡©us
);

1581 
	$UBoŞ
 (*
	tF‹r
)(
	tUCh¬32
 
	tcodePošt
, * 
	tcÚ‹xt
);

1592 
	`­¶yF‹r
(
F‹r
 
f‹r
,

1593 * 
cÚ‹xt
,

1594 
št32_t
 
¤c
,

1595 
UE¼ÜCode
 &
¡©us
);

1600 
	`£tP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
ÃwP©
);

1604 
	`»Ëa£P©‹º
();

1606 
ä›nd
 
şass
 
UnicodeS‘I‹¿tÜ
;

1607 
	}
};

1611 
šlše
 
UBoŞ
 
	gUnicodeS‘
::
İ”©Ü
!=(cÚ¡ 
UnicodeS‘
& 
o
) const {

1612  !
İ”©Ü
==(
o
);

1615 
šlše
 
UBoŞ
 
	gUnicodeS‘
::
	$isFroz’
() const {

1616  (
UBoŞ
)(
bmpS‘
!=
NULL
 || 
¡ršgS·n
!=NULL);

1617 
	}
}

1619 
šlše
 
UBoŞ
 
	gUnicodeS‘
::
	$cÚšsSome
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) const {

1620  !
	`cÚšsNÚe
(
¡¬t
, 
’d
);

1621 
	}
}

1623 
šlše
 
UBoŞ
 
	gUnicodeS‘
::
	$cÚšsSome
(cÚ¡ 
UnicodeS‘
& 
s
) const {

1624  !
	`cÚšsNÚe
(
s
);

1625 
	}
}

1627 
šlše
 
UBoŞ
 
	gUnicodeS‘
::
	$cÚšsSome
(cÚ¡ 
UnicodeSŒšg
& 
s
) const {

1628  !
	`cÚšsNÚe
(
s
);

1629 
	}
}

1631 
šlše
 
UBoŞ
 
	gUnicodeS‘
::
	$isBogus
() const {

1632  (
UBoŞ
)(
fFÏgs
 & 
kIsBogus
);

1633 
	}
}

1635 
šlše
 
UnicodeS‘
 *
	gUnicodeS‘
::
	$äomUS‘
(
US‘
 *
u£t
) {

1636  
»š‹½»t_ÿ¡
<
UnicodeS‘
 *>(
u£t
);

1637 
	}
}

1639 
šlše
 cÚ¡ 
UnicodeS‘
 *
	gUnicodeS‘
::
	$äomUS‘
(cÚ¡ 
US‘
 *
u£t
) {

1640  
»š‹½»t_ÿ¡
<cÚ¡ 
UnicodeS‘
 *>(
u£t
);

1641 
	}
}

1643 
šlše
 
US‘
 *
	gUnicodeS‘
::
	$toUS‘
() {

1644  
»š‹½»t_ÿ¡
<
US‘
 *>(
this
);

1645 
	}
}

1647 
šlše
 cÚ¡ 
US‘
 *
	gUnicodeS‘
::
	$toUS‘
() const {

1648  
»š‹½»t_ÿ¡
<cÚ¡ 
US‘
 *>(
this
);

1649 
	}
}

1651 
šlše
 
št32_t
 
	gUnicodeS‘
::
	$¥ª
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
št32_t
 
¡¬t
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

1652 
št32_t
 
sL’gth
=
s
.
	`Ëngth
();

1653 if(
¡¬t
<0) {

1654 
¡¬t
=0;

1655 } if(
¡¬t
>
sL’gth
) {

1656 
¡¬t
=
sL’gth
;

1658  
¡¬t
+
	`¥ª
(
s
.
	`g‘Bufãr
()+¡¬t, 
sL’gth
-¡¬t, 
¥ªCÚd™iÚ
);

1659 
	}
}

1661 
šlše
 
št32_t
 
	gUnicodeS‘
::
	$¥ªBack
(cÚ¡ 
UnicodeSŒšg
 &
s
, 
št32_t
 
lim™
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

1662 
št32_t
 
sL’gth
=
s
.
	`Ëngth
();

1663 if(
lim™
<0) {

1664 
lim™
=0;

1665 } if(
lim™
>
sL’gth
) {

1666 
lim™
=
sL’gth
;

1668  
	`¥ªBack
(
s
.
	`g‘Bufãr
(), 
lim™
, 
¥ªCÚd™iÚ
);

1669 
	}
}

1671 
	gU_NAMESPACE_END


	@unicode/unistr.h

21 #iâdeà
UNISTR_H


22 
	#UNISTR_H


	)

29 
	~"unicode/uty³s.h
"

30 
	~"unicode/»p.h
"

31 
	~"unicode/¡d_¡ršg.h
"

32 
	~"unicode/¡ršgp›û.h
"

33 
	~"unicode/by‹¡»am.h
"

35 
	gUCÚv”‹r
;

36 
şass
 
	gSŒšgTh»adTe¡
;

38 #iâdeà
U_COMPARE_CODE_POINT_ORDER


45 
	#U_COMPARE_CODE_POINT_ORDER
 0x8000

	)

48 #iâdeà
USTRING_H


52 
U_STABLE
 
št32_t
 
U_EXPORT2


53 
u_¡¾’
(cÚ¡ 
UCh¬
 *
s
);

56 
U_NAMESPACE_BEGIN


58 
şass
 
	gLoÿË
;

59 
şass
 
	gSŒšgCh¬aù”I‹¿tÜ
;

60 
şass
 
	gB»akI‹¿tÜ
;

74 
	#US_INV
 
U_NAMESPACE_QUALIFIER
 
UnicodeSŒšg
::
kInv¬ŸÁ


	)

93 #ià
defšed
(
U_DECLARE_UTF16
)

94 
	#UNICODE_STRING
(
cs
, 
_Ëngth
è
U_NAMESPACE_QUALIFIER
 
	`UnicodeSŒšg
(
TRUE
, (cÚ¡ 
UCh¬
 *)
	`U_DECLARE_UTF16
(cs), _Ëngth)

	)

95 #–ià
U_SIZEOF_WCHAR_T
==
U_SIZEOF_UCHAR
 && (
U_CHARSET_FAMILY
==
U_ASCII_FAMILY
 || (U_SIZEOF_UCHAR =ğ2 && 
defšed
(
U_WCHAR_IS_UTF16
)))

96 
	#UNICODE_STRING
(
cs
, 
_Ëngth
è
U_NAMESPACE_QUALIFIER
 
	`UnicodeSŒšg
(
TRUE
, (cÚ¡ 
UCh¬
 *)
L
 ## cs, _Ëngth)

	)

97 #–ià
U_SIZEOF_UCHAR
==1 && 
U_CHARSET_FAMILY
==
U_ASCII_FAMILY


98 
	#UNICODE_STRING
(
cs
, 
_Ëngth
è
U_NAMESPACE_QUALIFIER
 
	`UnicodeSŒšg
(
TRUE
, (cÚ¡ 
UCh¬
 *)cs, _Ëngth)

	)

100 
	#UNICODE_STRING
(
cs
, 
_Ëngth
è
U_NAMESPACE_QUALIFIER
 
	`UnicodeSŒšg
(cs, _Ëngth, 
US_INV
)

	)

116 
	#UNICODE_STRING_SIMPLE
(
cs
è
	`UNICODE_STRING
(cs, -1)

	)

187 şas 
	cU_COMMON_API
 
	mUnicodeSŒšg
 : 
public
 
R•ÏûabË


189 
public
:

199 
	eEInv¬ŸÁ
 {

204 
kInv¬ŸÁ


220 
šlše
 
UBoŞ
 
	gİ”©Ü
=ğ(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const;

229 
šlše
 
UBoŞ
 
	gİ”©Ü
!ğ(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const;

238 
šlše
 
UBoŞ
 
	gİ”©Ü
> (cÚ¡ 
	gUnicodeSŒšg
& 
	g‹xt
) const;

247 
šlše
 
UBoŞ
 
	gİ”©Ü
< (cÚ¡ 
	gUnicodeSŒšg
& 
	g‹xt
) const;

256 
šlše
 
UBoŞ
 
	gİ”©Ü
>ğ(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const;

265 
šlše
 
UBoŞ
 
	gİ”©Ü
<ğ(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const;

278 
šlše
 
št8_t
 
	$com·»
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const;

294 
šlše
 
št8_t
 
	$com·»
(
št32_t
 
¡¬t
,

295 
št32_t
 
Ëngth
,

296 cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const;

315 
šlše
 
št8_t
 
	$com·»
(
št32_t
 
¡¬t
,

316 
št32_t
 
Ëngth
,

317 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

318 
št32_t
 
¤cS¹
,

319 
št32_t
 
¤cL’gth
) const;

333 
šlše
 
št8_t
 
	$com·»
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

334 
št32_t
 
¤cL’gth
) const;

350 
šlše
 
št8_t
 
	$com·»
(
št32_t
 
¡¬t
,

351 
št32_t
 
Ëngth
,

352 cÚ¡ 
UCh¬
 *
¤cCh¬s
) const;

371 
šlše
 
št8_t
 
	$com·»
(
št32_t
 
¡¬t
,

372 
št32_t
 
Ëngth
,

373 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

374 
št32_t
 
¤cS¹
,

375 
št32_t
 
¤cL’gth
) const;

394 
šlše
 
št8_t
 
	$com·»B‘w“n
(
št32_t
 
¡¬t
,

395 
št32_t
 
lim™
,

396 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

397 
št32_t
 
¤cS¹
,

398 
št32_t
 
¤cLim™
) const;

417 
šlše
 
št8_t
 
	$com·»CodePoštOrd”
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const;

438 
šlše
 
št8_t
 
	$com·»CodePoštOrd”
(
št32_t
 
¡¬t
,

439 
št32_t
 
Ëngth
,

440 cÚ¡ 
UnicodeSŒšg
& 
¤cText
) const;

463 
šlše
 
št8_t
 
	$com·»CodePoštOrd”
(
št32_t
 
¡¬t
,

464 
št32_t
 
Ëngth
,

465 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

466 
št32_t
 
¤cS¹
,

467 
št32_t
 
¤cL’gth
) const;

487 
šlše
 
št8_t
 
	$com·»CodePoštOrd”
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

488 
št32_t
 
¤cL’gth
) const;

509 
šlše
 
št8_t
 
	$com·»CodePoštOrd”
(
št32_t
 
¡¬t
,

510 
št32_t
 
Ëngth
,

511 cÚ¡ 
UCh¬
 *
¤cCh¬s
) const;

534 
šlše
 
št8_t
 
	$com·»CodePoštOrd”
(
št32_t
 
¡¬t
,

535 
št32_t
 
Ëngth
,

536 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

537 
št32_t
 
¤cS¹
,

538 
št32_t
 
¤cL’gth
) const;

561 
šlše
 
št8_t
 
	$com·»CodePoštOrd”B‘w“n
(
št32_t
 
¡¬t
,

562 
št32_t
 
lim™
,

563 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

564 
št32_t
 
¤cS¹
,

565 
št32_t
 
¤cLim™
) const;

585 
šlše
 
št8_t
 
	$ÿ£Com·»
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
, 
ušt32_t
 
İtiÚs
) const;

607 
šlše
 
št8_t
 
	$ÿ£Com·»
(
št32_t
 
¡¬t
,

608 
št32_t
 
Ëngth
,

609 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

610 
ušt32_t
 
İtiÚs
) const;

634 
šlše
 
št8_t
 
	$ÿ£Com·»
(
št32_t
 
¡¬t
,

635 
št32_t
 
Ëngth
,

636 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

637 
št32_t
 
¤cS¹
,

638 
št32_t
 
¤cL’gth
,

639 
ušt32_t
 
İtiÚs
) const;

660 
šlše
 
št8_t
 
	$ÿ£Com·»
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

661 
št32_t
 
¤cL’gth
,

662 
ušt32_t
 
İtiÚs
) const;

684 
šlše
 
št8_t
 
	$ÿ£Com·»
(
št32_t
 
¡¬t
,

685 
št32_t
 
Ëngth
,

686 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

687 
ušt32_t
 
İtiÚs
) const;

711 
šlše
 
št8_t
 
	$ÿ£Com·»
(
št32_t
 
¡¬t
,

712 
št32_t
 
Ëngth
,

713 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

714 
št32_t
 
¤cS¹
,

715 
št32_t
 
¤cL’gth
,

716 
ušt32_t
 
İtiÚs
) const;

740 
šlše
 
št8_t
 
	$ÿ£Com·»B‘w“n
(
št32_t
 
¡¬t
,

741 
št32_t
 
lim™
,

742 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

743 
št32_t
 
¤cS¹
,

744 
št32_t
 
¤cLim™
,

745 
ušt32_t
 
İtiÚs
) const;

754 
šlše
 
UBoŞ
 
	$¡¬tsW™h
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const;

766 
šlše
 
UBoŞ
 
	$¡¬tsW™h
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

767 
št32_t
 
¤cS¹
,

768 
št32_t
 
¤cL’gth
) const;

778 
šlše
 
UBoŞ
 
	$¡¬tsW™h
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

779 
št32_t
 
¤cL’gth
) const;

790 
šlše
 
UBoŞ
 
	$¡¬tsW™h
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

791 
št32_t
 
¤cS¹
,

792 
št32_t
 
¤cL’gth
) const;

801 
šlše
 
UBoŞ
 
	$’dsW™h
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const;

813 
šlše
 
UBoŞ
 
	$’dsW™h
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

814 
št32_t
 
¤cS¹
,

815 
št32_t
 
¤cL’gth
) const;

825 
šlše
 
UBoŞ
 
	$’dsW™h
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

826 
št32_t
 
¤cL’gth
) const;

838 
šlše
 
UBoŞ
 
	$’dsW™h
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

839 
št32_t
 
¤cS¹
,

840 
št32_t
 
¤cL’gth
) const;

853 
šlše
 
št32_t
 
	$šdexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const;

864 
šlše
 
št32_t
 
	$šdexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

865 
št32_t
 
¡¬t
) const;

878 
šlše
 
št32_t
 
	$šdexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

879 
št32_t
 
¡¬t
,

880 
št32_t
 
Ëngth
) const;

898 
šlše
 
št32_t
 
	$šdexOf
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

899 
št32_t
 
¤cS¹
,

900 
št32_t
 
¤cL’gth
,

901 
št32_t
 
¡¬t
,

902 
št32_t
 
Ëngth
) const;

915 
šlše
 
št32_t
 
	$šdexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

916 
št32_t
 
¤cL’gth
,

917 
št32_t
 
¡¬t
) const;

931 
šlše
 
št32_t
 
	$šdexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

932 
št32_t
 
¤cL’gth
,

933 
št32_t
 
¡¬t
,

934 
št32_t
 
Ëngth
) const;

952 
št32_t
 
	$šdexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

953 
št32_t
 
¤cS¹
,

954 
št32_t
 
¤cL’gth
,

955 
št32_t
 
¡¬t
,

956 
št32_t
 
Ëngth
) const;

965 
šlše
 
št32_t
 
	$šdexOf
(
UCh¬
 
c
) const;

975 
šlše
 
št32_t
 
	$šdexOf
(
UCh¬32
 
c
) const;

985 
šlše
 
št32_t
 
	$šdexOf
(
UCh¬
 
c
,

986 
št32_t
 
¡¬t
) const;

997 
šlše
 
št32_t
 
	$šdexOf
(
UCh¬32
 
c
,

998 
št32_t
 
¡¬t
) const;

1010 
šlše
 
št32_t
 
	$šdexOf
(
UCh¬
 
c
,

1011 
št32_t
 
¡¬t
,

1012 
št32_t
 
Ëngth
) const;

1025 
šlše
 
št32_t
 
	$šdexOf
(
UCh¬32
 
c
,

1026 
št32_t
 
¡¬t
,

1027 
št32_t
 
Ëngth
) const;

1037 
šlše
 
št32_t
 
	$Ï¡IndexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const;

1048 
šlše
 
št32_t
 
	$Ï¡IndexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

1049 
št32_t
 
¡¬t
) const;

1062 
šlše
 
št32_t
 
	$Ï¡IndexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

1063 
št32_t
 
¡¬t
,

1064 
št32_t
 
Ëngth
) const;

1082 
šlše
 
št32_t
 
	$Ï¡IndexOf
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

1083 
št32_t
 
¤cS¹
,

1084 
št32_t
 
¤cL’gth
,

1085 
št32_t
 
¡¬t
,

1086 
št32_t
 
Ëngth
) const;

1098 
šlše
 
št32_t
 
	$Ï¡IndexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

1099 
št32_t
 
¤cL’gth
,

1100 
št32_t
 
¡¬t
) const;

1114 
šlše
 
št32_t
 
	$Ï¡IndexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

1115 
št32_t
 
¤cL’gth
,

1116 
št32_t
 
¡¬t
,

1117 
št32_t
 
Ëngth
) const;

1135 
št32_t
 
	$Ï¡IndexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

1136 
št32_t
 
¤cS¹
,

1137 
št32_t
 
¤cL’gth
,

1138 
št32_t
 
¡¬t
,

1139 
št32_t
 
Ëngth
) const;

1148 
šlše
 
št32_t
 
	$Ï¡IndexOf
(
UCh¬
 
c
) const;

1158 
šlše
 
št32_t
 
	$Ï¡IndexOf
(
UCh¬32
 
c
) const;

1168 
šlše
 
št32_t
 
	$Ï¡IndexOf
(
UCh¬
 
c
,

1169 
št32_t
 
¡¬t
) const;

1180 
šlše
 
št32_t
 
	$Ï¡IndexOf
(
UCh¬32
 
c
,

1181 
št32_t
 
¡¬t
) const;

1193 
šlše
 
št32_t
 
	$Ï¡IndexOf
(
UCh¬
 
c
,

1194 
št32_t
 
¡¬t
,

1195 
št32_t
 
Ëngth
) const;

1208 
šlše
 
št32_t
 
	$Ï¡IndexOf
(
UCh¬32
 
c
,

1209 
št32_t
 
¡¬t
,

1210 
št32_t
 
Ëngth
) const;

1223 
šlše
 
UCh¬
 
	$ch¬At
(
št32_t
 
off£t
) const;

1232 
šlše
 
UCh¬
 
İ”©Ü
[] (
št32_t
 
off£t
) const;

1245 
šlše
 
UCh¬32
 
	$ch¬32At
(
št32_t
 
off£t
) const;

1262 
šlše
 
št32_t
 
	$g‘Ch¬32S¹
(
št32_t
 
off£t
) const;

1280 
šlše
 
št32_t
 
	$g‘Ch¬32Lim™
(
št32_t
 
off£t
) const;

1332 
št32_t
 
	$moveIndex32
(
št32_t
 
šdex
, iÁ32_ˆ
d–
) const;

1351 
šlše
 
	$exŒaù
(
št32_t
 
¡¬t
,

1352 
št32_t
 
Ëngth
,

1353 
UCh¬
 *
d¡
,

1354 
št32_t
 
d¡S¹
 = 0) const;

1377 
št32_t


1378 
	$exŒaù
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1379 
UE¼ÜCode
 &
”rÜCode
) const;

1391 
šlše
 
	$exŒaù
(
št32_t
 
¡¬t
,

1392 
št32_t
 
Ëngth
,

1393 
UnicodeSŒšg
& 
rg‘
) const;

1406 
šlše
 
	$exŒaùB‘w“n
(
št32_t
 
¡¬t
,

1407 
št32_t
 
lim™
,

1408 
UCh¬
 *
d¡
,

1409 
št32_t
 
d¡S¹
 = 0) const;

1420 
vœtu®
 
	$exŒaùB‘w“n
(
št32_t
 
¡¬t
,

1421 
št32_t
 
lim™
,

1422 
UnicodeSŒšg
& 
rg‘
) const;

1445 
št32_t
 
	$exŒaù
(
št32_t
 
¡¬t
,

1446 
št32_t
 
¡¬tL’gth
,

1447 *
rg‘
,

1448 
št32_t
 
rg‘C­ac™y
,

1449 
EInv¬ŸÁ
 
šv
) const;

1451 #ià
U_CHARSET_IS_UTF8
 || !
UCONFIG_NO_CONVERSION


1472 
št32_t
 
	$exŒaù
(
št32_t
 
¡¬t
,

1473 
št32_t
 
¡¬tL’gth
,

1474 *
rg‘
,

1475 
ušt32_t
 
rg‘L’gth
) const;

1479 #ià!
UCONFIG_NO_CONVERSION


1506 
šlše
 
št32_t
 
	$exŒaù
(
št32_t
 
¡¬t
,

1507 
št32_t
 
¡¬tL’gth
,

1508 *
rg‘
,

1509 cÚ¡ *
cod•age
 = 0) const;

1540 
št32_t
 
	$exŒaù
(
št32_t
 
¡¬t
,

1541 
št32_t
 
¡¬tL’gth
,

1542 *
rg‘
,

1543 
ušt32_t
 
rg‘L’gth
,

1544 cÚ¡ *
cod•age
) const;

1563 
št32_t
 
	$exŒaù
(*
de¡
, 
št32_t
 
de¡C­ac™y
,

1564 
UCÚv”‹r
 *
úv
,

1565 
UE¼ÜCode
 &
”rÜCode
) const;

1582 
UnicodeSŒšg
 
	$‹mpSubSŒšg
(
št32_t
 
¡¬t
=0, iÁ32_ˆ
Ëngth
=
INT32_MAX
) const;

1594 
šlše
 
UnicodeSŒšg
 
	$‹mpSubSŒšgB‘w“n
(
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
=
INT32_MAX
) const;

1607 
	$toUTF8
(
By‹Sšk
 &
sšk
) const;

1609 #ià
U_HAVE_STD_STRING


1623 
‹m¶©e
<
ty³Çme
 
SŒšgCÏss
>

1624 
SŒšgCÏss
 &
	$toUTF8SŒšg
(
SŒšgCÏss
 &
»suÉ
) const {

1625 
SŒšgBy‹Sšk
<
SŒšgCÏss
> 
	`sbs
(&
»suÉ
);

1626 
	`toUTF8
(
sbs
);

1627  
»suÉ
;

1628 
	}
}

1647 
št32_t
 
	$toUTF32
(
UCh¬32
 *
utf32
, 
št32_t
 
ÿ·c™y
, 
UE¼ÜCode
 &
”rÜCode
) const;

1659 
šlše
 
št32_t
 
	$Ëngth
() const;

1674 
št32_t


1675 
	$couÁCh¬32
(
št32_t
 
¡¬t
=0, iÁ32_ˆ
Ëngth
=
INT32_MAX
) const;

1700 
UBoŞ


1701 
	$hasMÜeCh¬32Thª
(
št32_t
 
¡¬t
, iÁ32_ˆ
Ëngth
, iÁ32_ˆ
numb”
) const;

1708 
šlše
 
UBoŞ
 
	$isEm±y
() const;

1719 
šlše
 
št32_t
 
	$g‘C­ac™y
() const;

1728 
šlše
 
št32_t
 
	$hashCode
() const;

1742 
šlše
 
UBoŞ
 
	$isBogus
() const;

1758 
UnicodeSŒšg
 &
İ”©Ü
=(cÚ¡ UnicodeSŒšg &
¤cText
);

1780 
UnicodeSŒšg
 &
	`ç¡CİyFrom
(cÚ¡ UnicodeSŒšg &
¤c
);

1789 
šlše
 
UnicodeSŒšg
& 
İ”©Ü
ğ(
UCh¬
 
ch
);

1798 
šlše
 
UnicodeSŒšg
& 
İ”©Ü
ğ(
UCh¬32
 
ch
);

1811 
šlše
 
UnicodeSŒšg
& 
	`£tTo
(cÚ¡ UnicodeSŒšg& 
¤cText
,

1812 
št32_t
 
¤cS¹
);

1827 
šlše
 
UnicodeSŒšg
& 
	`£tTo
(cÚ¡ UnicodeSŒšg& 
¤cText
,

1828 
št32_t
 
¤cS¹
,

1829 
št32_t
 
¤cL’gth
);

1839 
šlše
 
UnicodeSŒšg
& 
	`£tTo
(cÚ¡ UnicodeSŒšg& 
¤cText
);

1849 
šlše
 
UnicodeSŒšg
& 
	`£tTo
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

1850 
št32_t
 
¤cL’gth
);

1860 
UnicodeSŒšg
& 
	`£tTo
(
UCh¬
 
¤cCh¬
);

1870 
UnicodeSŒšg
& 
	`£tTo
(
UCh¬32
 
¤cCh¬
);

1892 
UnicodeSŒšg
 &
	`£tTo
(
UBoŞ
 
isT”mš©ed
,

1893 cÚ¡ 
UCh¬
 *
‹xt
,

1894 
št32_t
 
‹xtL’gth
);

1915 
UnicodeSŒšg
 &
	`£tTo
(
UCh¬
 *
bufãr
,

1916 
št32_t
 
buffL’gth
,

1917 
št32_t
 
buffC­ac™y
);

1959 
	`£tToBogus
();

1968 
UnicodeSŒšg
& 
	`£tCh¬At
(
št32_t
 
off£t
,

1969 
UCh¬
 
ch
);

1981 
šlše
 
UnicodeSŒšg
& 
İ”©Ü
+ğ(
UCh¬
 
ch
);

1990 
šlše
 
UnicodeSŒšg
& 
İ”©Ü
+ğ(
UCh¬32
 
ch
);

2000 
šlše
 
UnicodeSŒšg
& 
İ”©Ü
+ğ(cÚ¡ UnicodeSŒšg& 
¤cText
);

2016 
šlše
 
UnicodeSŒšg
& 
	`­³nd
(cÚ¡ UnicodeSŒšg& 
¤cText
,

2017 
št32_t
 
¤cS¹
,

2018 
št32_t
 
¤cL’gth
);

2027 
šlše
 
UnicodeSŒšg
& 
	`­³nd
(cÚ¡ UnicodeSŒšg& 
¤cText
);

2042 
šlše
 
UnicodeSŒšg
& 
	`­³nd
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

2043 
št32_t
 
¤cS¹
,

2044 
št32_t
 
¤cL’gth
);

2054 
šlše
 
UnicodeSŒšg
& 
	`­³nd
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

2055 
št32_t
 
¤cL’gth
);

2063 
šlše
 
UnicodeSŒšg
& 
	`­³nd
(
UCh¬
 
¤cCh¬
);

2071 
šlše
 
UnicodeSŒšg
& 
	`­³nd
(
UCh¬32
 
¤cCh¬
);

2089 
šlše
 
UnicodeSŒšg
& 
	`š£¹
(
št32_t
 
¡¬t
,

2090 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

2091 
št32_t
 
¤cS¹
,

2092 
št32_t
 
¤cL’gth
);

2102 
šlše
 
UnicodeSŒšg
& 
	`š£¹
(
št32_t
 
¡¬t
,

2103 cÚ¡ 
UnicodeSŒšg
& 
¤cText
);

2118 
šlše
 
UnicodeSŒšg
& 
	`š£¹
(
št32_t
 
¡¬t
,

2119 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

2120 
št32_t
 
¤cS¹
,

2121 
št32_t
 
¤cL’gth
);

2132 
šlše
 
UnicodeSŒšg
& 
	`š£¹
(
št32_t
 
¡¬t
,

2133 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

2134 
št32_t
 
¤cL’gth
);

2144 
šlše
 
UnicodeSŒšg
& 
	`š£¹
(
št32_t
 
¡¬t
,

2145 
UCh¬
 
¤cCh¬
);

2155 
šlše
 
UnicodeSŒšg
& 
	`š£¹
(
št32_t
 
¡¬t
,

2156 
UCh¬32
 
¤cCh¬
);

2178 
UnicodeSŒšg
& 
	`»¶aû
(
št32_t
 
¡¬t
,

2179 
št32_t
 
Ëngth
,

2180 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

2181 
št32_t
 
¤cS¹
,

2182 
št32_t
 
¤cL’gth
);

2196 
UnicodeSŒšg
& 
	`»¶aû
(
št32_t
 
¡¬t
,

2197 
št32_t
 
Ëngth
,

2198 cÚ¡ 
UnicodeSŒšg
& 
¤cText
);

2217 
UnicodeSŒšg
& 
	`»¶aû
(
št32_t
 
¡¬t
,

2218 
št32_t
 
Ëngth
,

2219 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

2220 
št32_t
 
¤cS¹
,

2221 
št32_t
 
¤cL’gth
);

2235 
šlše
 
UnicodeSŒšg
& 
	`»¶aû
(
št32_t
 
¡¬t
,

2236 
št32_t
 
Ëngth
,

2237 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

2238 
št32_t
 
¤cL’gth
);

2251 
šlše
 
UnicodeSŒšg
& 
	`»¶aû
(
št32_t
 
¡¬t
,

2252 
št32_t
 
Ëngth
,

2253 
UCh¬
 
¤cCh¬
);

2266 
šlše
 
UnicodeSŒšg
& 
	`»¶aû
(
št32_t
 
¡¬t
,

2267 
št32_t
 
Ëngth
,

2268 
UCh¬32
 
¤cCh¬
);

2279 
šlše
 
UnicodeSŒšg
& 
	`»¶aûB‘w“n
(
št32_t
 
¡¬t
,

2280 
št32_t
 
lim™
,

2281 cÚ¡ 
UnicodeSŒšg
& 
¤cText
);

2297 
šlše
 
UnicodeSŒšg
& 
	`»¶aûB‘w“n
(
št32_t
 
¡¬t
,

2298 
št32_t
 
lim™
,

2299 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

2300 
št32_t
 
¤cS¹
,

2301 
št32_t
 
¤cLim™
);

2313 
vœtu®
 
	`hªdËR•ÏûB‘w“n
(
št32_t
 
¡¬t
,

2314 
št32_t
 
lim™
,

2315 cÚ¡ 
UnicodeSŒšg
& 
‹xt
);

2322 
vœtu®
 
UBoŞ
 
	$hasM‘aD©a
() const;

2339 
vœtu®
 
	`cİy
(
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
, iÁ32_ˆ
de¡
);

2351 
šlše
 
UnicodeSŒšg
& 
	`fšdAndR•Ïû
(cÚ¡ UnicodeSŒšg& 
ŞdText
,

2352 cÚ¡ 
UnicodeSŒšg
& 
ÃwText
);

2365 
šlše
 
UnicodeSŒšg
& 
	`fšdAndR•Ïû
(
št32_t
 
¡¬t
,

2366 
št32_t
 
Ëngth
,

2367 cÚ¡ 
UnicodeSŒšg
& 
ŞdText
,

2368 cÚ¡ 
UnicodeSŒšg
& 
ÃwText
);

2387 
UnicodeSŒšg
& 
	`fšdAndR•Ïû
(
št32_t
 
¡¬t
,

2388 
št32_t
 
Ëngth
,

2389 cÚ¡ 
UnicodeSŒšg
& 
ŞdText
,

2390 
št32_t
 
ŞdS¹
,

2391 
št32_t
 
ŞdL’gth
,

2392 cÚ¡ 
UnicodeSŒšg
& 
ÃwText
,

2393 
št32_t
 
ÃwS¹
,

2394 
št32_t
 
ÃwL’gth
);

2404 
šlše
 
UnicodeSŒšg
& 
	`»move
();

2414 
šlše
 
UnicodeSŒšg
& 
	`»move
(
št32_t
 
¡¬t
,

2415 
št32_t
 
Ëngth
 = (št32_t)
INT32_MAX
);

2425 
šlše
 
UnicodeSŒšg
& 
	`»moveB‘w“n
(
št32_t
 
¡¬t
,

2426 
št32_t
 
lim™
 = (št32_t)
INT32_MAX
);

2437 
šlše
 
UnicodeSŒšg
 &
	`»šB‘w“n
(
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
 = 
INT32_MAX
);

2452 
UBoŞ
 
	`·dL—dšg
(
št32_t
 
rg‘L’gth
,

2453 
UCh¬
 
·dCh¬
 = 0x0020);

2466 
UBoŞ
 
	`·dT¿šg
(
št32_t
 
rg‘L’gth
,

2467 
UCh¬
 
·dCh¬
 = 0x0020);

2475 
šlše
 
UBoŞ
 
	`Œunÿ‹
(
št32_t
 
rg‘L’gth
);

2482 
UnicodeSŒšg
& 
	`Œim
();

2492 
šlše
 
UnicodeSŒšg
& 
	`»v”£
();

2502 
šlše
 
UnicodeSŒšg
& 
	`»v”£
(
št32_t
 
¡¬t
,

2503 
št32_t
 
Ëngth
);

2511 
UnicodeSŒšg
& 
	`toUµ”
();

2520 
UnicodeSŒšg
& 
	`toUµ”
(cÚ¡ 
LoÿË
& 
loÿË
);

2528 
UnicodeSŒšg
& 
	`toLow”
();

2537 
UnicodeSŒšg
& 
	`toLow”
(cÚ¡ 
LoÿË
& 
loÿË
);

2539 #ià!
UCONFIG_NO_BREAK_ITERATION


2567 
UnicodeSŒšg
 &
	`toT™Ë
(
B»akI‹¿tÜ
 *
t™ËI‹r
);

2596 
UnicodeSŒšg
 &
	`toT™Ë
(
B»akI‹¿tÜ
 *
t™ËI‹r
, cÚ¡ 
LoÿË
 &
loÿË
);

2629 
UnicodeSŒšg
 &
	`toT™Ë
(
B»akI‹¿tÜ
 *
t™ËI‹r
, cÚ¡ 
LoÿË
 &
loÿË
, 
ušt32_t
 
İtiÚs
);

2644 
UnicodeSŒšg
 &
	`fŞdCa£
(
ušt32_t
 
İtiÚs
=0 );

2693 
UCh¬
 *
	`g‘Bufãr
(
št32_t
 
mšC­ac™y
);

2715 
	`»Ëa£Bufãr
(
št32_t
 
ÃwL’gth
=-1);

2747 
šlše
 cÚ¡ 
UCh¬
 *
	$g‘Bufãr
() const;

2782 
šlše
 cÚ¡ 
UCh¬
 *
	`g‘T”mš©edBufãr
();

2791 
	`UnicodeSŒšg
();

2804 
	`UnicodeSŒšg
(
št32_t
 
ÿ·c™y
, 
UCh¬32
 
c
, iÁ32_ˆ
couÁ
);

2811 
	`UnicodeSŒšg
(
UCh¬
 
ch
);

2818 
	`UnicodeSŒšg
(
UCh¬32
 
ch
);

2826 
	`UnicodeSŒšg
(cÚ¡ 
UCh¬
 *
‹xt
);

2835 
	`UnicodeSŒšg
(cÚ¡ 
UCh¬
 *
‹xt
,

2836 
št32_t
 
‹xtL’gth
);

2857 
	`UnicodeSŒšg
(
UBoŞ
 
isT”mš©ed
,

2858 cÚ¡ 
UCh¬
 *
‹xt
,

2859 
št32_t
 
‹xtL’gth
);

2879 
	`UnicodeSŒšg
(
UCh¬
 *
bufãr
, 
št32_t
 
buffL’gth
, iÁ32_ˆ
buffC­ac™y
);

2881 #ià
U_CHARSET_IS_UTF8
 || !
UCONFIG_NO_CONVERSION


2889 
	`UnicodeSŒšg
(cÚ¡ *
cod•ageD©a
);

2897 
	`UnicodeSŒšg
(cÚ¡ *
cod•ageD©a
, 
št32_t
 
d©aL’gth
);

2901 #ià!
UCONFIG_NO_CONVERSION


2920 
	`UnicodeSŒšg
(cÚ¡ *
cod•ageD©a
, cÚ¡ *
cod•age
);

2939 
	`UnicodeSŒšg
(cÚ¡ *
cod•ageD©a
, 
št32_t
 
d©aL’gth
, cÚ¡ *
cod•age
);

2962 
	`UnicodeSŒšg
(

2963 cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

2964 
UCÚv”‹r
 *
úv
,

2965 
UE¼ÜCode
 &
”rÜCode
);

2993 
	`UnicodeSŒšg
(cÚ¡ *
¤c
, 
št32_t
 
Ëngth
, 
EInv¬ŸÁ
 
šv
);

3001 
	`UnicodeSŒšg
(cÚ¡ 
UnicodeSŒšg
& 
th©
);

3009 
	`UnicodeSŒšg
(cÚ¡ 
UnicodeSŒšg
& 
¤c
, 
št32_t
 
¤cS¹
);

3018 
	`UnicodeSŒšg
(cÚ¡ 
UnicodeSŒšg
& 
¤c
, 
št32_t
 
¤cS¹
, iÁ32_ˆ
¤cL’gth
);

3036 
vœtu®
 
R•ÏûabË
 *
	$şÚe
() const;

3041 
vœtu®
 ~
	`UnicodeSŒšg
();

3056 
UnicodeSŒšg
 
	`äomUTF8
(cÚ¡ 
SŒšgP›û
 &
utf8
);

3069 
UnicodeSŒšg
 
	`äomUTF32
(cÚ¡ 
UCh¬32
 *
utf32
, 
št32_t
 
Ëngth
);

3107 
UnicodeSŒšg
 
	$uÃsÿ³
() const;

3128 
UCh¬32
 
	$uÃsÿ³At
(
št32_t
 &
off£t
) const;

3135 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

3142 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

3148 
´Ùeùed
:

3153 
vœtu®
 
št32_t
 
	$g‘L’gth
() const;

3160 
vœtu®
 
UCh¬
 
	$g‘Ch¬At
(
št32_t
 
off£t
) const;

3167 
vœtu®
 
UCh¬32
 
	$g‘Ch¬32At
(
št32_t
 
off£t
) const;

3169 
´iv©e
:

3171 
UnicodeSŒšg
 &
	`£tToUTF8
(cÚ¡ 
SŒšgP›û
 &
utf8
);

3177 
št32_t


3178 
	$toUTF8
(
št32_t
 
¡¬t
, iÁ32_ˆ
Ën
,

3179 *
rg‘
, 
št32_t
 
ÿ·c™y
) const;

3182 
šlše
 
št8_t


3183 
	$doCom·»
(
št32_t
 
¡¬t
,

3184 
št32_t
 
Ëngth
,

3185 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3186 
št32_t
 
¤cS¹
,

3187 
št32_t
 
¤cL’gth
) const;

3189 
št8_t
 
	$doCom·»
(
št32_t
 
¡¬t
,

3190 
št32_t
 
Ëngth
,

3191 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3192 
št32_t
 
¤cS¹
,

3193 
št32_t
 
¤cL’gth
) const;

3195 
šlše
 
št8_t


3196 
	$doCom·»CodePoštOrd”
(
št32_t
 
¡¬t
,

3197 
št32_t
 
Ëngth
,

3198 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3199 
št32_t
 
¤cS¹
,

3200 
št32_t
 
¤cL’gth
) const;

3202 
št8_t
 
	$doCom·»CodePoštOrd”
(
št32_t
 
¡¬t
,

3203 
št32_t
 
Ëngth
,

3204 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3205 
št32_t
 
¤cS¹
,

3206 
št32_t
 
¤cL’gth
) const;

3208 
šlše
 
št8_t


3209 
	$doCa£Com·»
(
št32_t
 
¡¬t
,

3210 
št32_t
 
Ëngth
,

3211 cÚ¡ 
UnicodeSŒšg
 &
¤cText
,

3212 
št32_t
 
¤cS¹
,

3213 
št32_t
 
¤cL’gth
,

3214 
ušt32_t
 
İtiÚs
) const;

3216 
št8_t


3217 
	$doCa£Com·»
(
št32_t
 
¡¬t
,

3218 
št32_t
 
Ëngth
,

3219 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3220 
št32_t
 
¤cS¹
,

3221 
št32_t
 
¤cL’gth
,

3222 
ušt32_t
 
İtiÚs
) const;

3224 
št32_t
 
	$doIndexOf
(
UCh¬
 
c
,

3225 
št32_t
 
¡¬t
,

3226 
št32_t
 
Ëngth
) const;

3228 
št32_t
 
	$doIndexOf
(
UCh¬32
 
c
,

3229 
št32_t
 
¡¬t
,

3230 
št32_t
 
Ëngth
) const;

3232 
št32_t
 
	$doLa¡IndexOf
(
UCh¬
 
c
,

3233 
št32_t
 
¡¬t
,

3234 
št32_t
 
Ëngth
) const;

3236 
št32_t
 
	$doLa¡IndexOf
(
UCh¬32
 
c
,

3237 
št32_t
 
¡¬t
,

3238 
št32_t
 
Ëngth
) const;

3240 
	$doExŒaù
(
št32_t
 
¡¬t
,

3241 
št32_t
 
Ëngth
,

3242 
UCh¬
 *
d¡
,

3243 
št32_t
 
d¡S¹
) const;

3245 
šlše
 
	$doExŒaù
(
št32_t
 
¡¬t
,

3246 
št32_t
 
Ëngth
,

3247 
UnicodeSŒšg
& 
rg‘
) const;

3249 
šlše
 
UCh¬
 
	$doCh¬At
(
št32_t
 
off£t
) const;

3251 
UnicodeSŒšg
& 
	`doR•Ïû
(
št32_t
 
¡¬t
,

3252 
št32_t
 
Ëngth
,

3253 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3254 
št32_t
 
¤cS¹
,

3255 
št32_t
 
¤cL’gth
);

3257 
UnicodeSŒšg
& 
	`doR•Ïû
(
št32_t
 
¡¬t
,

3258 
št32_t
 
Ëngth
,

3259 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3260 
št32_t
 
¤cS¹
,

3261 
št32_t
 
¤cL’gth
);

3263 
UnicodeSŒšg
& 
	`doRev”£
(
št32_t
 
¡¬t
,

3264 
št32_t
 
Ëngth
);

3267 
št32_t
 
	$doHashCode
() const;

3271 
šlše
 
UCh¬
* 
	`g‘A¼ayS¹
();

3272 
šlše
 cÚ¡ 
UCh¬
* 
	$g‘A¼ayS¹
() const;

3276 
šlše
 
UBoŞ
 
	$isWr™abË
() const;

3279 
šlše
 
UBoŞ
 
	$isBufãrWr™abË
() const;

3282 
šlše
 
	`£tL’gth
(
št32_t
 
Ën
);

3283 
šlše
 
	`£tToEm±y
();

3284 
šlše
 
	`£tA¼ay
(
UCh¬
 *
¬¿y
, 
št32_t
 
Ën
, iÁ32_ˆ
ÿ·c™y
);

3290 
UBoŞ
 
	`®loÿ‹
(
št32_t
 
ÿ·c™y
);

3293 
	`»Ëa£A¼ay
();

3296 
	`unBogus
();

3299 
UnicodeSŒšg
 &
	`cİyFrom
(cÚ¡ UnicodeSŒšg &
¤c
, 
UBoŞ
 
ç¡Cİy
=
FALSE
);

3302 
šlše
 
	$pšIndex
(
št32_t
& 
¡¬t
) const;

3303 
šlše
 
	$pšIndiûs
(
št32_t
& 
¡¬t
,

3304 
št32_t
& 
Ëngth
) const;

3306 #ià!
UCONFIG_NO_CONVERSION


3309 
št32_t
 
	$doExŒaù
(
št32_t
 
¡¬t
, iÁ32_ˆ
Ëngth
,

3310 *
de¡
, 
št32_t
 
de¡C­ac™y
,

3311 
UCÚv”‹r
 *
úv
,

3312 
UE¼ÜCode
 &
”rÜCode
) const;

3324 
	`doCod•ageC»©e
(cÚ¡ *
cod•ageD©a
,

3325 
št32_t
 
d©aL’gth
,

3326 cÚ¡ *
cod•age
);

3333 
	`doCod•ageC»©e
(cÚ¡ *
cod•ageD©a
,

3334 
št32_t
 
d©aL’gth
,

3335 
UCÚv”‹r
 *
cÚv”‹r
,

3336 
UE¼ÜCode
 &
¡©us
);

3351 
UBoŞ
 
	`şÚeA¼ayIfN“ded
(
št32_t
 
ÃwC­ac™y
 = -1,

3352 
št32_t
 
growC­ac™y
 = -1,

3353 
UBoŞ
 
doCİyA¼ay
 = 
TRUE
,

3354 
št32_t
 **
pBufãrToD–‘e
 = 0,

3355 
UBoŞ
 
fÜûClÚe
 = 
FALSE
);

3358 
UnicodeSŒšg
 &

3359 
	`ÿ£M­
(
B»akI‹¿tÜ
 *
t™ËI‹r
,

3360 cÚ¡ *
loÿË
,

3361 
ušt32_t
 
İtiÚs
,

3362 
št32_t
 
toWhichCa£
);

3365 
	`addRef
();

3366 
št32_t
 
	`»moveRef
();

3367 
št32_t
 
	$»fCouÁ
() const;

3374 
US_STACKBUF_SIZE
= (*)==4 ? 13 : 15,

3375 
kInv®idUCh¬
=0xffff,

3376 
kGrowSize
=128,

3377 
kInv®idHashCode
=0,

3378 
kEm±yHashCode
=1,

3381 
kIsBogus
=1,

3382 
kUsšgSckBufãr
=2,

3383 
kRefCouÁed
=4,

3384 
kBufãrIsR—dÚly
=8,

3385 
kO³nG‘Bufãr
=16,

3389 
kShÜtSŒšg
=
kUsšgSckBufãr
,

3390 
kLÚgSŒšg
=
kRefCouÁed
,

3391 
kR—dÚlyAlŸs
=
kBufãrIsR—dÚly
,

3392 
kWr™abËAlŸs
=0

3393 
	}
};

3395 
ä›nd
 
şass
 
	gSŒšgTh»adTe¡
;

3397 
	gSckBufãrOrF›lds
;

3398 
ä›nd
 
	gSckBufãrOrF›lds
;

3412 
št8_t
 
	gfShÜtL’gth
;

3413 
ušt8_t
 
	gfFÏgs
;

3414 
	uSckBufãrOrF›lds
 {

3417 
UCh¬
 
	gfSckBufãr
 [
US_STACKBUF_SIZE
];

3419 
ušt16_t
 
	gfPaddšg
;

3420 
št32_t
 
	gfL’gth
;

3421 
UCh¬
 *
	gfA¼ay
;

3422 
št32_t
 
	gfC­ac™y
;

3423 } 
	gfF›lds
;

3424 } 
	gfUniÚ
;

3435 
U_COMMON_API
 
UnicodeSŒšg
 
U_EXPORT2


3436 
	gİ”©Ü
+ (cÚ¡ 
	gUnicodeSŒšg
 &
	gs1
, cÚ¡ UnicodeSŒšg &
	gs2
);

3446 
šlše
 

3447 
	gUnicodeSŒšg
::
	$pšIndex
(
št32_t
& 
¡¬t
) const

3450 if(
¡¬t
 < 0) {

3451 
¡¬t
 = 0;

3452 } if(
¡¬t
 > 
	`Ëngth
()) {

3453 
¡¬t
 = 
	`Ëngth
();

3455 
	}
}

3457 
šlše
 

3458 
	gUnicodeSŒšg
::
	$pšIndiûs
(
št32_t
& 
¡¬t
,

3459 
št32_t
& 
_Ëngth
) const

3462 
št32_t
 
Ën
 = 
	`Ëngth
();

3463 if(
¡¬t
 < 0) {

3464 
¡¬t
 = 0;

3465 } if(
¡¬t
 > 
Ën
) {

3466 
¡¬t
 = 
Ën
;

3468 if(
_Ëngth
 < 0) {

3469 
_Ëngth
 = 0;

3470 } if(
_Ëngth
 > (
Ën
 - 
¡¬t
)) {

3471 
_Ëngth
 = (
Ën
 - 
¡¬t
);

3473 
	}
}

3475 
šlše
 
UCh¬
*

3476 
	gUnicodeSŒšg
::
	$g‘A¼ayS¹
()

3477 {  (
fFÏgs
&
kUsšgSckBufãr
è? 
fUniÚ
.
fSckBufãr
 : fUniÚ.
fF›lds
.
fA¼ay
; 
	}
}

3479 
šlše
 cÚ¡ 
UCh¬
*

3480 
	gUnicodeSŒšg
::
	$g‘A¼ayS¹
() const

3481 {  (
fFÏgs
&
kUsšgSckBufãr
è? 
fUniÚ
.
fSckBufãr
 : fUniÚ.
fF›lds
.
fA¼ay
; 
	}
}

3486 
šlše
 
št32_t


3487 
	gUnicodeSŒšg
::
	$Ëngth
() const

3488 {  
fShÜtL’gth
>=0 ? fShÜtL’gth : 
fUniÚ
.
fF›lds
.
fL’gth
; 
	}
}

3490 
šlše
 
št32_t


3491 
	gUnicodeSŒšg
::
	$g‘C­ac™y
() const

3492 {  (
fFÏgs
&
kUsšgSckBufãr
è? 
US_STACKBUF_SIZE
 : 
fUniÚ
.
fF›lds
.
fC­ac™y
; 
	}
}

3494 
šlše
 
št32_t


3495 
	gUnicodeSŒšg
::
	$hashCode
() const

3496 {  
	`doHashCode
(); 
	}
}

3498 
šlše
 
UBoŞ


3499 
	gUnicodeSŒšg
::
	$isBogus
() const

3500 {  (
UBoŞ
)(
fFÏgs
 & 
kIsBogus
); 
	}
}

3502 
šlše
 
UBoŞ


3503 
	gUnicodeSŒšg
::
	$isWr™abË
() const

3504 {  (
UBoŞ
)!(
fFÏgs
&(
kO³nG‘Bufãr
|
kIsBogus
)); 
	}
}

3506 
šlše
 
UBoŞ


3507 
	gUnicodeSŒšg
::
	$isBufãrWr™abË
() const

3509  (
UBoŞ
)(

3510 !(
fFÏgs
&(
kO³nG‘Bufãr
|
kIsBogus
|
kBufãrIsR—dÚly
)) &&

3511 (!(
fFÏgs
&
kRefCouÁed
è|| 
	`»fCouÁ
()==1));

3512 
	}
}

3514 
šlše
 cÚ¡ 
UCh¬
 *

3515 
	gUnicodeSŒšg
::
	$g‘Bufãr
() const {

3516 if(
fFÏgs
&(
kIsBogus
|
kO³nG‘Bufãr
)) {

3518 } if(
fFÏgs
&
kUsšgSckBufãr
) {

3519  
fUniÚ
.
fSckBufãr
;

3521  
fUniÚ
.
fF›lds
.
fA¼ay
;

3523 
	}
}

3528 
šlše
 
št8_t


3529 
	gUnicodeSŒšg
::
	$doCom·»
(
št32_t
 
¡¬t
,

3530 
št32_t
 
thisL’gth
,

3531 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3532 
št32_t
 
¤cS¹
,

3533 
št32_t
 
¤cL’gth
) const

3535 if(
¤cText
.
	`isBogus
()) {

3536  (
št8_t
)!
	`isBogus
();

3538 
¤cText
.
	`pšIndiûs
(
¤cS¹
, 
¤cL’gth
);

3539  
	`doCom·»
(
¡¬t
, 
thisL’gth
, 
¤cText
.
	`g‘A¼ayS¹
(), 
¤cS¹
, 
¤cL’gth
);

3541 
	}
}

3543 
šlše
 
UBoŞ


3544 
	gUnicodeSŒšg
::
İ”©Ü
=ğ(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3546 if(
isBogus
()) {

3547  
‹xt
.
isBogus
();

3549 
št32_t
 
	gËn
 = 
Ëngth
(), 
	g‹xtL’gth
 = 
‹xt
.length();

3551 !
	g‹xt
.
isBogus
() &&

3552 
	gËn
 =ğ
‹xtL’gth
 &&

3553 
doCom·»
(0, 
Ën
, 
‹xt
, 0, 
‹xtL’gth
) == 0;

3557 
šlše
 
UBoŞ


3558 
	gUnicodeSŒšg
::
İ”©Ü
!ğ(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3559 {  (! 
İ”©Ü
==(
‹xt
)); }

3561 
šlše
 
UBoŞ


3562 
	gUnicodeSŒšg
::
İ”©Ü
> (cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3563 {  
doCom·»
(0, 
Ëngth
(), 
‹xt
, 0,ext.length()) == 1; }

3565 
šlše
 
UBoŞ


3566 
	gUnicodeSŒšg
::
İ”©Ü
< (cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3567 {  
doCom·»
(0, 
Ëngth
(), 
‹xt
, 0,ext.length()) == -1; }

3569 
šlše
 
UBoŞ


3570 
	gUnicodeSŒšg
::
İ”©Ü
>ğ(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3571 {  
doCom·»
(0, 
Ëngth
(), 
‹xt
, 0,ext.length()) != -1; }

3573 
šlše
 
UBoŞ


3574 
	gUnicodeSŒšg
::
İ”©Ü
<ğ(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3575 {  
doCom·»
(0, 
Ëngth
(), 
‹xt
, 0,ext.length()) != 1; }

3577 
šlše
 
št8_t


3578 
	gUnicodeSŒšg
::
	$com·»
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3579 {  
	`doCom·»
(0, 
	`Ëngth
(), 
‹xt
, 0,ext.Ëngth()); 
	}
}

3581 
šlše
 
št8_t


3582 
	gUnicodeSŒšg
::
	$com·»
(
št32_t
 
¡¬t
,

3583 
št32_t
 
_Ëngth
,

3584 cÚ¡ 
UnicodeSŒšg
& 
¤cText
) const

3585 {  
	`doCom·»
(
¡¬t
, 
_Ëngth
, 
¤cText
, 0, srcText.
	`Ëngth
()); 
	}
}

3587 
šlše
 
št8_t


3588 
	gUnicodeSŒšg
::
	$com·»
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3589 
št32_t
 
¤cL’gth
) const

3590 {  
	`doCom·»
(0, 
	`Ëngth
(), 
¤cCh¬s
, 0, 
¤cL’gth
); 
	}
}

3592 
šlše
 
št8_t


3593 
	gUnicodeSŒšg
::
	$com·»
(
št32_t
 
¡¬t
,

3594 
št32_t
 
_Ëngth
,

3595 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3596 
št32_t
 
¤cS¹
,

3597 
št32_t
 
¤cL’gth
) const

3598 {  
	`doCom·»
(
¡¬t
, 
_Ëngth
, 
¤cText
, 
¤cS¹
, 
¤cL’gth
); 
	}
}

3600 
šlše
 
št8_t


3601 
	gUnicodeSŒšg
::
	$com·»
(
št32_t
 
¡¬t
,

3602 
št32_t
 
_Ëngth
,

3603 cÚ¡ 
UCh¬
 *
¤cCh¬s
) const

3604 {  
	`doCom·»
(
¡¬t
, 
_Ëngth
, 
¤cCh¬s
, 0, _Ëngth); 
	}
}

3606 
šlše
 
št8_t


3607 
	gUnicodeSŒšg
::
	$com·»
(
št32_t
 
¡¬t
,

3608 
št32_t
 
_Ëngth
,

3609 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3610 
št32_t
 
¤cS¹
,

3611 
št32_t
 
¤cL’gth
) const

3612 {  
	`doCom·»
(
¡¬t
, 
_Ëngth
, 
¤cCh¬s
, 
¤cS¹
, 
¤cL’gth
); 
	}
}

3614 
šlše
 
št8_t


3615 
	gUnicodeSŒšg
::
	$com·»B‘w“n
(
št32_t
 
¡¬t
,

3616 
št32_t
 
lim™
,

3617 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3618 
št32_t
 
¤cS¹
,

3619 
št32_t
 
¤cLim™
) const

3620 {  
	`doCom·»
(
¡¬t
, 
lim™
 - start,

3621 
¤cText
, 
¤cS¹
, 
¤cLim™
 - srcS¹); 
	}
}

3623 
šlše
 
št8_t


3624 
	gUnicodeSŒšg
::
	$doCom·»CodePoštOrd”
(
št32_t
 
¡¬t
,

3625 
št32_t
 
thisL’gth
,

3626 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3627 
št32_t
 
¤cS¹
,

3628 
št32_t
 
¤cL’gth
) const

3630 if(
¤cText
.
	`isBogus
()) {

3631  (
št8_t
)!
	`isBogus
();

3633 
¤cText
.
	`pšIndiûs
(
¤cS¹
, 
¤cL’gth
);

3634  
	`doCom·»CodePoštOrd”
(
¡¬t
, 
thisL’gth
, 
¤cText
.
	`g‘A¼ayS¹
(), 
¤cS¹
, 
¤cL’gth
);

3636 
	}
}

3638 
šlše
 
št8_t


3639 
	gUnicodeSŒšg
::
	$com·»CodePoštOrd”
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3640 {  
	`doCom·»CodePoštOrd”
(0, 
	`Ëngth
(), 
‹xt
, 0,ext.Ëngth()); 
	}
}

3642 
šlše
 
št8_t


3643 
	gUnicodeSŒšg
::
	$com·»CodePoštOrd”
(
št32_t
 
¡¬t
,

3644 
št32_t
 
_Ëngth
,

3645 cÚ¡ 
UnicodeSŒšg
& 
¤cText
) const

3646 {  
	`doCom·»CodePoštOrd”
(
¡¬t
, 
_Ëngth
, 
¤cText
, 0, srcText.
	`Ëngth
()); 
	}
}

3648 
šlše
 
št8_t


3649 
	gUnicodeSŒšg
::
	$com·»CodePoštOrd”
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3650 
št32_t
 
¤cL’gth
) const

3651 {  
	`doCom·»CodePoštOrd”
(0, 
	`Ëngth
(), 
¤cCh¬s
, 0, 
¤cL’gth
); 
	}
}

3653 
šlše
 
št8_t


3654 
	gUnicodeSŒšg
::
	$com·»CodePoštOrd”
(
št32_t
 
¡¬t
,

3655 
št32_t
 
_Ëngth
,

3656 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3657 
št32_t
 
¤cS¹
,

3658 
št32_t
 
¤cL’gth
) const

3659 {  
	`doCom·»CodePoštOrd”
(
¡¬t
, 
_Ëngth
, 
¤cText
, 
¤cS¹
, 
¤cL’gth
); 
	}
}

3661 
šlše
 
št8_t


3662 
	gUnicodeSŒšg
::
	$com·»CodePoštOrd”
(
št32_t
 
¡¬t
,

3663 
št32_t
 
_Ëngth
,

3664 cÚ¡ 
UCh¬
 *
¤cCh¬s
) const

3665 {  
	`doCom·»CodePoštOrd”
(
¡¬t
, 
_Ëngth
, 
¤cCh¬s
, 0, _Ëngth); 
	}
}

3667 
šlše
 
št8_t


3668 
	gUnicodeSŒšg
::
	$com·»CodePoštOrd”
(
št32_t
 
¡¬t
,

3669 
št32_t
 
_Ëngth
,

3670 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3671 
št32_t
 
¤cS¹
,

3672 
št32_t
 
¤cL’gth
) const

3673 {  
	`doCom·»CodePoštOrd”
(
¡¬t
, 
_Ëngth
, 
¤cCh¬s
, 
¤cS¹
, 
¤cL’gth
); 
	}
}

3675 
šlše
 
št8_t


3676 
	gUnicodeSŒšg
::
	$com·»CodePoštOrd”B‘w“n
(
št32_t
 
¡¬t
,

3677 
št32_t
 
lim™
,

3678 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3679 
št32_t
 
¤cS¹
,

3680 
št32_t
 
¤cLim™
) const

3681 {  
	`doCom·»CodePoštOrd”
(
¡¬t
, 
lim™
 - start,

3682 
¤cText
, 
¤cS¹
, 
¤cLim™
 - srcS¹); 
	}
}

3684 
šlše
 
št8_t


3685 
	gUnicodeSŒšg
::
	$doCa£Com·»
(
št32_t
 
¡¬t
,

3686 
št32_t
 
thisL’gth
,

3687 cÚ¡ 
UnicodeSŒšg
 &
¤cText
,

3688 
št32_t
 
¤cS¹
,

3689 
št32_t
 
¤cL’gth
,

3690 
ušt32_t
 
İtiÚs
) const

3692 if(
¤cText
.
	`isBogus
()) {

3693  (
št8_t
)!
	`isBogus
();

3695 
¤cText
.
	`pšIndiûs
(
¤cS¹
, 
¤cL’gth
);

3696  
	`doCa£Com·»
(
¡¬t
, 
thisL’gth
, 
¤cText
.
	`g‘A¼ayS¹
(), 
¤cS¹
, 
¤cL’gth
, 
İtiÚs
);

3698 
	}
}

3700 
šlše
 
št8_t


3701 
	gUnicodeSŒšg
::
	$ÿ£Com·»
(cÚ¡ 
UnicodeSŒšg
 &
‹xt
, 
ušt32_t
 
İtiÚs
) const {

3702  
	`doCa£Com·»
(0, 
	`Ëngth
(), 
‹xt
, 0,ext.Ëngth(), 
İtiÚs
);

3703 
	}
}

3705 
šlše
 
št8_t


3706 
	gUnicodeSŒšg
::
	$ÿ£Com·»
(
št32_t
 
¡¬t
,

3707 
št32_t
 
_Ëngth
,

3708 cÚ¡ 
UnicodeSŒšg
 &
¤cText
,

3709 
ušt32_t
 
İtiÚs
) const {

3710  
	`doCa£Com·»
(
¡¬t
, 
_Ëngth
, 
¤cText
, 0, srcText.
	`Ëngth
(), 
İtiÚs
);

3711 
	}
}

3713 
šlše
 
št8_t


3714 
	gUnicodeSŒšg
::
	$ÿ£Com·»
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3715 
št32_t
 
¤cL’gth
,

3716 
ušt32_t
 
İtiÚs
) const {

3717  
	`doCa£Com·»
(0, 
	`Ëngth
(), 
¤cCh¬s
, 0, 
¤cL’gth
, 
İtiÚs
);

3718 
	}
}

3720 
šlše
 
št8_t


3721 
	gUnicodeSŒšg
::
	$ÿ£Com·»
(
št32_t
 
¡¬t
,

3722 
št32_t
 
_Ëngth
,

3723 cÚ¡ 
UnicodeSŒšg
 &
¤cText
,

3724 
št32_t
 
¤cS¹
,

3725 
št32_t
 
¤cL’gth
,

3726 
ušt32_t
 
İtiÚs
) const {

3727  
	`doCa£Com·»
(
¡¬t
, 
_Ëngth
, 
¤cText
, 
¤cS¹
, 
¤cL’gth
, 
İtiÚs
);

3728 
	}
}

3730 
šlše
 
št8_t


3731 
	gUnicodeSŒšg
::
	$ÿ£Com·»
(
št32_t
 
¡¬t
,

3732 
št32_t
 
_Ëngth
,

3733 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3734 
ušt32_t
 
İtiÚs
) const {

3735  
	`doCa£Com·»
(
¡¬t
, 
_Ëngth
, 
¤cCh¬s
, 0, _Ëngth, 
İtiÚs
);

3736 
	}
}

3738 
šlše
 
št8_t


3739 
	gUnicodeSŒšg
::
	$ÿ£Com·»
(
št32_t
 
¡¬t
,

3740 
št32_t
 
_Ëngth
,

3741 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3742 
št32_t
 
¤cS¹
,

3743 
št32_t
 
¤cL’gth
,

3744 
ušt32_t
 
İtiÚs
) const {

3745  
	`doCa£Com·»
(
¡¬t
, 
_Ëngth
, 
¤cCh¬s
, 
¤cS¹
, 
¤cL’gth
, 
İtiÚs
);

3746 
	}
}

3748 
šlše
 
št8_t


3749 
	gUnicodeSŒšg
::
	$ÿ£Com·»B‘w“n
(
št32_t
 
¡¬t
,

3750 
št32_t
 
lim™
,

3751 cÚ¡ 
UnicodeSŒšg
 &
¤cText
,

3752 
št32_t
 
¤cS¹
,

3753 
št32_t
 
¤cLim™
,

3754 
ušt32_t
 
İtiÚs
) const {

3755  
	`doCa£Com·»
(
¡¬t
, 
lim™
 - s¹, 
¤cText
, 
¤cS¹
, 
¤cLim™
 - srcS¹, 
İtiÚs
);

3756 
	}
}

3758 
šlše
 
št32_t


3759 
	gUnicodeSŒšg
::
	$šdexOf
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3760 
št32_t
 
¤cS¹
,

3761 
št32_t
 
¤cL’gth
,

3762 
št32_t
 
¡¬t
,

3763 
št32_t
 
_Ëngth
) const

3765 if(!
¤cText
.
	`isBogus
()) {

3766 
¤cText
.
	`pšIndiûs
(
¤cS¹
, 
¤cL’gth
);

3767 if(
¤cL’gth
 > 0) {

3768  
	`šdexOf
(
¤cText
.
	`g‘A¼ayS¹
(), 
¤cS¹
, 
¤cL’gth
, 
¡¬t
, 
_Ëngth
);

3772 
	}
}

3774 
šlše
 
št32_t


3775 
	gUnicodeSŒšg
::
	$šdexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3776 {  
	`šdexOf
(
‹xt
, 0,ext.
	`Ëngth
(), 0,†’gth()); 
	}
}

3778 
šlše
 
št32_t


3779 
	gUnicodeSŒšg
::
	$šdexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

3780 
št32_t
 
¡¬t
) const {

3781 
	`pšIndex
(
¡¬t
);

3782  
	`šdexOf
(
‹xt
, 0,ext.
	`Ëngth
(), 
¡¬t
,†ength() - start);

3783 
	}
}

3785 
šlše
 
št32_t


3786 
	gUnicodeSŒšg
::
	$šdexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

3787 
št32_t
 
¡¬t
,

3788 
št32_t
 
_Ëngth
) const

3789 {  
	`šdexOf
(
‹xt
, 0,ext.
	`Ëngth
(), 
¡¬t
, 
_Ëngth
); 
	}
}

3791 
šlše
 
št32_t


3792 
	gUnicodeSŒšg
::
	$šdexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3793 
št32_t
 
¤cL’gth
,

3794 
št32_t
 
¡¬t
) const {

3795 
	`pšIndex
(
¡¬t
);

3796  
	`šdexOf
(
¤cCh¬s
, 0, 
¤cL’gth
, 
¡¬t
, 
	`Ëngth
() - start);

3797 
	}
}

3799 
šlše
 
št32_t


3800 
	gUnicodeSŒšg
::
	$šdexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3801 
št32_t
 
¤cL’gth
,

3802 
št32_t
 
¡¬t
,

3803 
št32_t
 
_Ëngth
) const

3804 {  
	`šdexOf
(
¤cCh¬s
, 0, 
¤cL’gth
, 
¡¬t
, 
_Ëngth
); 
	}
}

3806 
šlše
 
št32_t


3807 
	gUnicodeSŒšg
::
	$šdexOf
(
UCh¬
 
c
,

3808 
št32_t
 
¡¬t
,

3809 
št32_t
 
_Ëngth
) const

3810 {  
	`doIndexOf
(
c
, 
¡¬t
, 
_Ëngth
); 
	}
}

3812 
šlše
 
št32_t


3813 
	gUnicodeSŒšg
::
	$šdexOf
(
UCh¬32
 
c
,

3814 
št32_t
 
¡¬t
,

3815 
št32_t
 
_Ëngth
) const

3816 {  
	`doIndexOf
(
c
, 
¡¬t
, 
_Ëngth
); 
	}
}

3818 
šlše
 
št32_t


3819 
	gUnicodeSŒšg
::
	$šdexOf
(
UCh¬
 
c
) const

3820 {  
	`doIndexOf
(
c
, 0, 
	`Ëngth
()); 
	}
}

3822 
šlše
 
št32_t


3823 
	gUnicodeSŒšg
::
	$šdexOf
(
UCh¬32
 
c
) const

3824 {  
	`šdexOf
(
c
, 0, 
	`Ëngth
()); 
	}
}

3826 
šlše
 
št32_t


3827 
	gUnicodeSŒšg
::
	$šdexOf
(
UCh¬
 
c
,

3828 
št32_t
 
¡¬t
) const {

3829 
	`pšIndex
(
¡¬t
);

3830  
	`doIndexOf
(
c
, 
¡¬t
, 
	`Ëngth
() - start);

3831 
	}
}

3833 
šlše
 
št32_t


3834 
	gUnicodeSŒšg
::
	$šdexOf
(
UCh¬32
 
c
,

3835 
št32_t
 
¡¬t
) const {

3836 
	`pšIndex
(
¡¬t
);

3837  
	`šdexOf
(
c
, 
¡¬t
, 
	`Ëngth
() - start);

3838 
	}
}

3840 
šlše
 
št32_t


3841 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3842 
št32_t
 
¤cL’gth
,

3843 
št32_t
 
¡¬t
,

3844 
št32_t
 
_Ëngth
) const

3845 {  
	`Ï¡IndexOf
(
¤cCh¬s
, 0, 
¤cL’gth
, 
¡¬t
, 
_Ëngth
); 
	}
}

3847 
šlše
 
št32_t


3848 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3849 
št32_t
 
¤cL’gth
,

3850 
št32_t
 
¡¬t
) const {

3851 
	`pšIndex
(
¡¬t
);

3852  
	`Ï¡IndexOf
(
¤cCh¬s
, 0, 
¤cL’gth
, 
¡¬t
, 
	`Ëngth
() - start);

3853 
	}
}

3855 
šlše
 
št32_t


3856 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3857 
št32_t
 
¤cS¹
,

3858 
št32_t
 
¤cL’gth
,

3859 
št32_t
 
¡¬t
,

3860 
št32_t
 
_Ëngth
) const

3862 if(!
¤cText
.
	`isBogus
()) {

3863 
¤cText
.
	`pšIndiûs
(
¤cS¹
, 
¤cL’gth
);

3864 if(
¤cL’gth
 > 0) {

3865  
	`Ï¡IndexOf
(
¤cText
.
	`g‘A¼ayS¹
(), 
¤cS¹
, 
¤cL’gth
, 
¡¬t
, 
_Ëngth
);

3869 
	}
}

3871 
šlše
 
št32_t


3872 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

3873 
št32_t
 
¡¬t
,

3874 
št32_t
 
_Ëngth
) const

3875 {  
	`Ï¡IndexOf
(
‹xt
, 0,ext.
	`Ëngth
(), 
¡¬t
, 
_Ëngth
); 
	}
}

3877 
šlše
 
št32_t


3878 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

3879 
št32_t
 
¡¬t
) const {

3880 
	`pšIndex
(
¡¬t
);

3881  
	`Ï¡IndexOf
(
‹xt
, 0,ext.
	`Ëngth
(), 
¡¬t
,†ength() - start);

3882 
	}
}

3884 
šlše
 
št32_t


3885 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3886 {  
	`Ï¡IndexOf
(
‹xt
, 0,ext.
	`Ëngth
(), 0,†’gth()); 
	}
}

3888 
šlše
 
št32_t


3889 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(
UCh¬
 
c
,

3890 
št32_t
 
¡¬t
,

3891 
št32_t
 
_Ëngth
) const

3892 {  
	`doLa¡IndexOf
(
c
, 
¡¬t
, 
_Ëngth
); 
	}
}

3894 
šlše
 
št32_t


3895 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(
UCh¬32
 
c
,

3896 
št32_t
 
¡¬t
,

3897 
št32_t
 
_Ëngth
) const {

3898  
	`doLa¡IndexOf
(
c
, 
¡¬t
, 
_Ëngth
);

3899 
	}
}

3901 
šlše
 
št32_t


3902 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(
UCh¬
 
c
) const

3903 {  
	`doLa¡IndexOf
(
c
, 0, 
	`Ëngth
()); 
	}
}

3905 
šlše
 
št32_t


3906 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(
UCh¬32
 
c
) const {

3907  
	`Ï¡IndexOf
(
c
, 0, 
	`Ëngth
());

3908 
	}
}

3910 
šlše
 
št32_t


3911 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(
UCh¬
 
c
,

3912 
št32_t
 
¡¬t
) const {

3913 
	`pšIndex
(
¡¬t
);

3914  
	`doLa¡IndexOf
(
c
, 
¡¬t
, 
	`Ëngth
() - start);

3915 
	}
}

3917 
šlše
 
št32_t


3918 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(
UCh¬32
 
c
,

3919 
št32_t
 
¡¬t
) const {

3920 
	`pšIndex
(
¡¬t
);

3921  
	`Ï¡IndexOf
(
c
, 
¡¬t
, 
	`Ëngth
() - start);

3922 
	}
}

3924 
šlše
 
UBoŞ


3925 
	gUnicodeSŒšg
::
	$¡¬tsW™h
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3926 {  
	`com·»
(0, 
‹xt
.
	`Ëngth
(),ext, 0,ext.Ëngth()è=ğ0; 
	}
}

3928 
šlše
 
UBoŞ


3929 
	gUnicodeSŒšg
::
	$¡¬tsW™h
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3930 
št32_t
 
¤cS¹
,

3931 
št32_t
 
¤cL’gth
) const

3932 {  
	`doCom·»
(0, 
¤cL’gth
, 
¤cText
, 
¤cS¹
, srcL’gthè=ğ0; 
	}
}

3934 
šlše
 
UBoŞ


3935 
	gUnicodeSŒšg
::
	$¡¬tsW™h
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3936 
št32_t
 
¤cL’gth
) const

3937 {  
	`doCom·»
(0, 
¤cL’gth
, 
¤cCh¬s
, 0, srcL’gthè=ğ0; 
	}
}

3939 
šlše
 
UBoŞ


3940 
	gUnicodeSŒšg
::
	$¡¬tsW™h
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3941 
št32_t
 
¤cS¹
,

3942 
št32_t
 
¤cL’gth
) const

3943 {  
	`doCom·»
(0, 
¤cL’gth
, 
¤cCh¬s
, 
¤cS¹
, srcL’gthè=ğ0;
	}
}

3945 
šlše
 
UBoŞ


3946 
	gUnicodeSŒšg
::
	$’dsW™h
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
) const

3947 {  
	`doCom·»
(
	`Ëngth
(è- 
‹xt
.length(),ext.length(),

3948 
‹xt
, 0,ext.
	`Ëngth
()è=ğ0; 
	}
}

3950 
šlše
 
UBoŞ


3951 
	gUnicodeSŒšg
::
	$’dsW™h
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3952 
št32_t
 
¤cS¹
,

3953 
št32_t
 
¤cL’gth
) const {

3954 
¤cText
.
	`pšIndiûs
(
¤cS¹
, 
¤cL’gth
);

3955  
	`doCom·»
(
	`Ëngth
(è- 
¤cL’gth
, srcLength,

3956 
¤cText
, 
¤cS¹
, 
¤cL’gth
) == 0;

3957 
	}
}

3959 
šlše
 
UBoŞ


3960 
	gUnicodeSŒšg
::
	$’dsW™h
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3961 
št32_t
 
¤cL’gth
) const {

3962 if(
¤cL’gth
 < 0) {

3963 
¤cL’gth
 = 
	`u_¡¾’
(
¤cCh¬s
);

3965  
	`doCom·»
(
	`Ëngth
(è- 
¤cL’gth
, srcLength,

3966 
¤cCh¬s
, 0, 
¤cL’gth
) == 0;

3967 
	}
}

3969 
šlše
 
UBoŞ


3970 
	gUnicodeSŒšg
::
	$’dsW™h
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

3971 
št32_t
 
¤cS¹
,

3972 
št32_t
 
¤cL’gth
) const {

3973 if(
¤cL’gth
 < 0) {

3974 
¤cL’gth
 = 
	`u_¡¾’
(
¤cCh¬s
 + 
¤cS¹
);

3976  
	`doCom·»
(
	`Ëngth
(è- 
¤cL’gth
, srcLength,

3977 
¤cCh¬s
, 
¤cS¹
, 
¤cL’gth
) == 0;

3978 
	}
}

3983 
šlše
 
	gUnicodeSŒšg
&

3984 
	gUnicodeSŒšg
::
	$»¶aû
(
št32_t
 
¡¬t
,

3985 
št32_t
 
_Ëngth
,

3986 cÚ¡ 
UnicodeSŒšg
& 
¤cText
)

3987 {  
	`doR•Ïû
(
¡¬t
, 
_Ëngth
, 
¤cText
, 0, srcText.
	`Ëngth
()); 
	}
}

3989 
šlše
 
	gUnicodeSŒšg
&

3990 
	gUnicodeSŒšg
::
	$»¶aû
(
št32_t
 
¡¬t
,

3991 
št32_t
 
_Ëngth
,

3992 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

3993 
št32_t
 
¤cS¹
,

3994 
št32_t
 
¤cL’gth
)

3995 {  
	`doR•Ïû
(
¡¬t
, 
_Ëngth
, 
¤cText
, 
¤cS¹
, 
¤cL’gth
); 
	}
}

3997 
šlše
 
	gUnicodeSŒšg
&

3998 
	gUnicodeSŒšg
::
	$»¶aû
(
št32_t
 
¡¬t
,

3999 
št32_t
 
_Ëngth
,

4000 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

4001 
št32_t
 
¤cL’gth
)

4002 {  
	`doR•Ïû
(
¡¬t
, 
_Ëngth
, 
¤cCh¬s
, 0, 
¤cL’gth
); 
	}
}

4004 
šlše
 
	gUnicodeSŒšg
&

4005 
	gUnicodeSŒšg
::
	$»¶aû
(
št32_t
 
¡¬t
,

4006 
št32_t
 
_Ëngth
,

4007 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

4008 
št32_t
 
¤cS¹
,

4009 
št32_t
 
¤cL’gth
)

4010 {  
	`doR•Ïû
(
¡¬t
, 
_Ëngth
, 
¤cCh¬s
, 
¤cS¹
, 
¤cL’gth
); 
	}
}

4012 
šlše
 
	gUnicodeSŒšg
&

4013 
	gUnicodeSŒšg
::
	$»¶aû
(
št32_t
 
¡¬t
,

4014 
št32_t
 
_Ëngth
,

4015 
UCh¬
 
¤cCh¬
)

4016 {  
	`doR•Ïû
(
¡¬t
, 
_Ëngth
, &
¤cCh¬
, 0, 1); 
	}
}

4018 
šlše
 
	gUnicodeSŒšg
&

4019 
	gUnicodeSŒšg
::
	$»¶aû
(
št32_t
 
¡¬t
,

4020 
št32_t
 
_Ëngth
,

4021 
UCh¬32
 
¤cCh¬
) {

4022 
UCh¬
 
bufãr
[
U16_MAX_LENGTH
];

4023 
št32_t
 
couÁ
 = 0;

4024 
UBoŞ
 
isE¼Ü
 = 
FALSE
;

4025 
	`U16_APPEND
(
bufãr
, 
couÁ
, 
U16_MAX_LENGTH
, 
¤cCh¬
, 
isE¼Ü
);

4026  
	`doR•Ïû
(
¡¬t
, 
_Ëngth
, 
bufãr
, 0, 
couÁ
);

4027 
	}
}

4029 
šlše
 
	gUnicodeSŒšg
&

4030 
	gUnicodeSŒšg
::
	$»¶aûB‘w“n
(
št32_t
 
¡¬t
,

4031 
št32_t
 
lim™
,

4032 cÚ¡ 
UnicodeSŒšg
& 
¤cText
)

4033 {  
	`doR•Ïû
(
¡¬t
, 
lim™
 - s¹, 
¤cText
, 0, srcText.
	`Ëngth
()); 
	}
}

4035 
šlše
 
	gUnicodeSŒšg
&

4036 
	gUnicodeSŒšg
::
	$»¶aûB‘w“n
(
št32_t
 
¡¬t
,

4037 
št32_t
 
lim™
,

4038 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

4039 
št32_t
 
¤cS¹
,

4040 
št32_t
 
¤cLim™
)

4041 {  
	`doR•Ïû
(
¡¬t
, 
lim™
 - s¹, 
¤cText
, 
¤cS¹
, 
¤cLim™
 - srcS¹); 
	}
}

4043 
šlše
 
	gUnicodeSŒšg
&

4044 
	gUnicodeSŒšg
::
	$fšdAndR•Ïû
(cÚ¡ 
UnicodeSŒšg
& 
ŞdText
,

4045 cÚ¡ 
UnicodeSŒšg
& 
ÃwText
)

4046 {  
	`fšdAndR•Ïû
(0, 
	`Ëngth
(), 
ŞdText
, 0, oldText.length(),

4047 
ÃwText
, 0,‚ewText.
	`Ëngth
()); 
	}
}

4049 
šlše
 
	gUnicodeSŒšg
&

4050 
	gUnicodeSŒšg
::
	$fšdAndR•Ïû
(
št32_t
 
¡¬t
,

4051 
št32_t
 
_Ëngth
,

4052 cÚ¡ 
UnicodeSŒšg
& 
ŞdText
,

4053 cÚ¡ 
UnicodeSŒšg
& 
ÃwText
)

4054 {  
	`fšdAndR•Ïû
(
¡¬t
, 
_Ëngth
, 
ŞdText
, 0, oldText.
	`Ëngth
(),

4055 
ÃwText
, 0,‚ewText.
	`Ëngth
()); 
	}
}

4060 
šlše
 

4061 
	gUnicodeSŒšg
::
	$doExŒaù
(
št32_t
 
¡¬t
,

4062 
št32_t
 
_Ëngth
,

4063 
UnicodeSŒšg
& 
rg‘
) const

4064 { 
rg‘
.
	`»¶aû
(0,¬g‘.
	`Ëngth
(), *
this
, 
¡¬t
, 
_Ëngth
); 
	}
}

4066 
šlše
 

4067 
	gUnicodeSŒšg
::
	$exŒaù
(
št32_t
 
¡¬t
,

4068 
št32_t
 
_Ëngth
,

4069 
UCh¬
 *
rg‘
,

4070 
št32_t
 
rg‘S¹
) const

4071 { 
	`doExŒaù
(
¡¬t
, 
_Ëngth
, 
rg‘
, 
rg‘S¹
); 
	}
}

4073 
šlše
 

4074 
	gUnicodeSŒšg
::
	$exŒaù
(
št32_t
 
¡¬t
,

4075 
št32_t
 
_Ëngth
,

4076 
UnicodeSŒšg
& 
rg‘
) const

4077 { 
	`doExŒaù
(
¡¬t
, 
_Ëngth
, 
rg‘
); 
	}
}

4079 #ià!
UCONFIG_NO_CONVERSION


4081 
šlše
 
št32_t


4082 
	gUnicodeSŒšg
::
	$exŒaù
(
št32_t
 
¡¬t
,

4083 
št32_t
 
_Ëngth
,

4084 *
d¡
,

4085 cÚ¡ *
cod•age
) const

4089 #ià
	`defšed
(
__GNUC__
)

4092  
	`exŒaù
(
¡¬t
, 
_Ëngth
, 
d¡
, d¡!=0 ? ((d¡ >ğ(*)((
size_t
)-1è- 
UINT32_MAX
è? (((*)UINT32_MAXè- d¡è: UINT32_MAXè: 0, 
cod•age
);

4094  
	`exŒaù
(
¡¬t
, 
_Ëngth
, 
d¡
, d¡!=0 ? 0xfffffffà: 0, 
cod•age
);

4096 
	}
}

4100 
šlše
 

4101 
	gUnicodeSŒšg
::
	$exŒaùB‘w“n
(
št32_t
 
¡¬t
,

4102 
št32_t
 
lim™
,

4103 
UCh¬
 *
d¡
,

4104 
št32_t
 
d¡S¹
) const {

4105 
	`pšIndex
(
¡¬t
);

4106 
	`pšIndex
(
lim™
);

4107 
	`doExŒaù
(
¡¬t
, 
lim™
 - s¹, 
d¡
, 
d¡S¹
);

4108 
	}
}

4110 
šlše
 
UnicodeSŒšg


4111 
	gUnicodeSŒšg
::
	$‹mpSubSŒšgB‘w“n
(
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
) const {

4112  
	`‹mpSubSŒšg
(
¡¬t
, 
lim™
 - start);

4113 
	}
}

4115 
šlše
 
UCh¬


4116 
	gUnicodeSŒšg
::
	$doCh¬At
(
št32_t
 
off£t
) const

4118 if((
ušt32_t
)
off£t
 < (ušt32_t)
	`Ëngth
()) {

4119  
	`g‘A¼ayS¹
()[
off£t
];

4121  
kInv®idUCh¬
;

4123 
	}
}

4125 
šlše
 
UCh¬


4126 
	gUnicodeSŒšg
::
	$ch¬At
(
št32_t
 
off£t
) const

4127 {  
	`doCh¬At
(
off£t
); 
	}
}

4129 
šlše
 
UCh¬


4130 
	gUnicodeSŒšg
::
İ”©Ü
[] (
št32_t
 
off£t
) const

4131 {  
doCh¬At
(
off£t
); }

4133 
šlše
 
UCh¬32


4134 
	gUnicodeSŒšg
::
	$ch¬32At
(
št32_t
 
off£t
) const

4136 
št32_t
 
Ën
 = 
	`Ëngth
();

4137 if((
ušt32_t
)
off£t
 < (ušt32_t)
Ën
) {

4138 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

4139 
UCh¬32
 
c
;

4140 
	`U16_GET
(
¬¿y
, 0, 
off£t
, 
Ën
, 
c
);

4141  
c
;

4143  
kInv®idUCh¬
;

4145 
	}
}

4147 
šlše
 
št32_t


4148 
	gUnicodeSŒšg
::
	$g‘Ch¬32S¹
(
št32_t
 
off£t
) const {

4149 if((
ušt32_t
)
off£t
 < (ušt32_t)
	`Ëngth
()) {

4150 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

4151 
	`U16_SET_CP_START
(
¬¿y
, 0, 
off£t
);

4152  
off£t
;

4156 
	}
}

4158 
šlše
 
št32_t


4159 
	gUnicodeSŒšg
::
	$g‘Ch¬32Lim™
(
št32_t
 
off£t
) const {

4160 
št32_t
 
Ën
 = 
	`Ëngth
();

4161 if((
ušt32_t
)
off£t
 < (ušt32_t)
Ën
) {

4162 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

4163 
	`U16_SET_CP_LIMIT
(
¬¿y
, 0, 
off£t
, 
Ën
);

4164  
off£t
;

4166  
Ën
;

4168 
	}
}

4170 
šlše
 
UBoŞ


4171 
	gUnicodeSŒšg
::
	$isEm±y
() const {

4172  
fShÜtL’gth
 == 0;

4173 
	}
}

4178 
šlše
 

4179 
	gUnicodeSŒšg
::
	$£tL’gth
(
št32_t
 
Ën
) {

4180 if(
Ën
 <= 127) {

4181 
fShÜtL’gth
 = (
št8_t
)
Ën
;

4183 
fShÜtL’gth
 = (
št8_t
)-1;

4184 
fUniÚ
.
fF›lds
.
fL’gth
 = 
Ën
;

4186 
	}
}

4188 
šlše
 

4189 
	gUnicodeSŒšg
::
	$£tToEm±y
() {

4190 
fShÜtL’gth
 = 0;

4191 
fFÏgs
 = 
kShÜtSŒšg
;

4192 
	}
}

4194 
šlše
 

4195 
	gUnicodeSŒšg
::
	$£tA¼ay
(
UCh¬
 *
¬¿y
, 
št32_t
 
Ën
, iÁ32_ˆ
ÿ·c™y
) {

4196 
	`£tL’gth
(
Ën
);

4197 
fUniÚ
.
fF›lds
.
fA¼ay
 = 
¬¿y
;

4198 
fUniÚ
.
fF›lds
.
fC­ac™y
 = 
ÿ·c™y
;

4199 
	}
}

4201 
šlše
 cÚ¡ 
UCh¬
 *

4202 
	gUnicodeSŒšg
::
	$g‘T”mš©edBufãr
() {

4203 if(!
	`isWr™abË
()) {

4206 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

4207 
št32_t
 
Ën
 = 
	`Ëngth
();

4208 if(
Ën
 < 
	`g‘C­ac™y
(è&& ((
fFÏgs
&
kRefCouÁed
è=ğ0 || 
	`»fCouÁ
() == 1)) {

4215 if(!(
fFÏgs
&
kBufãrIsR—dÚly
)) {

4230 
¬¿y
[
Ën
] = 0;

4232  
¬¿y
;

4233 } if(
	`şÚeA¼ayIfN“ded
(
Ën
+1)) {

4234 
¬¿y
 = 
	`g‘A¼ayS¹
();

4235 
¬¿y
[
Ën
] = 0;

4236  
¬¿y
;

4241 
	}
}

4243 
šlše
 
	gUnicodeSŒšg
&

4244 
	gUnicodeSŒšg
::
İ”©Ü
ğ(
UCh¬
 
ch
)

4245 {  
doR•Ïû
(0, 
Ëngth
(), &
ch
, 0, 1); }

4247 
šlše
 
	gUnicodeSŒšg
&

4248 
	gUnicodeSŒšg
::
İ”©Ü
ğ(
UCh¬32
 
ch
)

4249 {  
»¶aû
(0, 
Ëngth
(), 
ch
); }

4251 
šlše
 
	gUnicodeSŒšg
&

4252 
	gUnicodeSŒšg
::
	$£tTo
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

4253 
št32_t
 
¤cS¹
,

4254 
št32_t
 
¤cL’gth
)

4256 
	`unBogus
();

4257  
	`doR•Ïû
(0, 
	`Ëngth
(), 
¤cText
, 
¤cS¹
, 
¤cL’gth
);

4258 
	}
}

4260 
šlše
 
	gUnicodeSŒšg
&

4261 
	gUnicodeSŒšg
::
	$£tTo
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

4262 
št32_t
 
¤cS¹
)

4264 
	`unBogus
();

4265 
¤cText
.
	`pšIndex
(
¤cS¹
);

4266  
	`doR•Ïû
(0, 
	`Ëngth
(), 
¤cText
, 
¤cS¹
, srcText.length() - srcStart);

4267 
	}
}

4269 
šlše
 
	gUnicodeSŒšg
&

4270 
	gUnicodeSŒšg
::
	$£tTo
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
)

4272 
	`unBogus
();

4273  
	`doR•Ïû
(0, 
	`Ëngth
(), 
¤cText
, 0, srcText.length());

4274 
	}
}

4276 
šlše
 
	gUnicodeSŒšg
&

4277 
	gUnicodeSŒšg
::
	$£tTo
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

4278 
št32_t
 
¤cL’gth
)

4280 
	`unBogus
();

4281  
	`doR•Ïû
(0, 
	`Ëngth
(), 
¤cCh¬s
, 0, 
¤cL’gth
);

4282 
	}
}

4284 
šlše
 
	gUnicodeSŒšg
&

4285 
	gUnicodeSŒšg
::
	$£tTo
(
UCh¬
 
¤cCh¬
)

4287 
	`unBogus
();

4288  
	`doR•Ïû
(0, 
	`Ëngth
(), &
¤cCh¬
, 0, 1);

4289 
	}
}

4291 
šlše
 
	gUnicodeSŒšg
&

4292 
	gUnicodeSŒšg
::
	$£tTo
(
UCh¬32
 
¤cCh¬
)

4294 
	`unBogus
();

4295  
	`»¶aû
(0, 
	`Ëngth
(), 
¤cCh¬
);

4296 
	}
}

4298 
šlše
 
	gUnicodeSŒšg
&

4299 
	gUnicodeSŒšg
::
	$­³nd
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

4300 
št32_t
 
¤cS¹
,

4301 
št32_t
 
¤cL’gth
)

4302 {  
	`doR•Ïû
(
	`Ëngth
(), 0, 
¤cText
, 
¤cS¹
, 
¤cL’gth
); 
	}
}

4304 
šlše
 
	gUnicodeSŒšg
&

4305 
	gUnicodeSŒšg
::
	$­³nd
(cÚ¡ 
UnicodeSŒšg
& 
¤cText
)

4306 {  
	`doR•Ïû
(
	`Ëngth
(), 0, 
¤cText
, 0, srcText.Ëngth()); 
	}
}

4308 
šlše
 
	gUnicodeSŒšg
&

4309 
	gUnicodeSŒšg
::
	$­³nd
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

4310 
št32_t
 
¤cS¹
,

4311 
št32_t
 
¤cL’gth
)

4312 {  
	`doR•Ïû
(
	`Ëngth
(), 0, 
¤cCh¬s
, 
¤cS¹
, 
¤cL’gth
); 
	}
}

4314 
šlše
 
	gUnicodeSŒšg
&

4315 
	gUnicodeSŒšg
::
	$­³nd
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

4316 
št32_t
 
¤cL’gth
)

4317 {  
	`doR•Ïû
(
	`Ëngth
(), 0, 
¤cCh¬s
, 0, 
¤cL’gth
); 
	}
}

4319 
šlše
 
	gUnicodeSŒšg
&

4320 
	gUnicodeSŒšg
::
	$­³nd
(
UCh¬
 
¤cCh¬
)

4321 {  
	`doR•Ïû
(
	`Ëngth
(), 0, &
¤cCh¬
, 0, 1); 
	}
}

4323 
šlše
 
	gUnicodeSŒšg
&

4324 
	gUnicodeSŒšg
::
	$­³nd
(
UCh¬32
 
¤cCh¬
) {

4325 
UCh¬
 
bufãr
[
U16_MAX_LENGTH
];

4326 
št32_t
 
_Ëngth
 = 0;

4327 
UBoŞ
 
isE¼Ü
 = 
FALSE
;

4328 
	`U16_APPEND
(
bufãr
, 
_Ëngth
, 
U16_MAX_LENGTH
, 
¤cCh¬
, 
isE¼Ü
);

4329  
	`doR•Ïû
(
	`Ëngth
(), 0, 
bufãr
, 0, 
_Ëngth
);

4330 
	}
}

4332 
šlše
 
	gUnicodeSŒšg
&

4333 
	gUnicodeSŒšg
::
İ”©Ü
+ğ(
UCh¬
 
ch
)

4334 {  
doR•Ïû
(
Ëngth
(), 0, &
ch
, 0, 1); }

4336 
šlše
 
	gUnicodeSŒšg
&

4337 
	gUnicodeSŒšg
::
İ”©Ü
+ğ(
UCh¬32
 
ch
) {

4338  
­³nd
(
ch
);

4341 
šlše
 
	gUnicodeSŒšg
&

4342 
	gUnicodeSŒšg
::
İ”©Ü
+ğ(cÚ¡ 
UnicodeSŒšg
& 
¤cText
)

4343 {  
doR•Ïû
(
Ëngth
(), 0, 
¤cText
, 0, srcText.length()); }

4345 
šlše
 
	gUnicodeSŒšg
&

4346 
	gUnicodeSŒšg
::
	$š£¹
(
št32_t
 
¡¬t
,

4347 cÚ¡ 
UnicodeSŒšg
& 
¤cText
,

4348 
št32_t
 
¤cS¹
,

4349 
št32_t
 
¤cL’gth
)

4350 {  
	`doR•Ïû
(
¡¬t
, 0, 
¤cText
, 
¤cS¹
, 
¤cL’gth
); 
	}
}

4352 
šlše
 
	gUnicodeSŒšg
&

4353 
	gUnicodeSŒšg
::
	$š£¹
(
št32_t
 
¡¬t
,

4354 cÚ¡ 
UnicodeSŒšg
& 
¤cText
)

4355 {  
	`doR•Ïû
(
¡¬t
, 0, 
¤cText
, 0, srcText.
	`Ëngth
()); 
	}
}

4357 
šlše
 
	gUnicodeSŒšg
&

4358 
	gUnicodeSŒšg
::
	$š£¹
(
št32_t
 
¡¬t
,

4359 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

4360 
št32_t
 
¤cS¹
,

4361 
št32_t
 
¤cL’gth
)

4362 {  
	`doR•Ïû
(
¡¬t
, 0, 
¤cCh¬s
, 
¤cS¹
, 
¤cL’gth
); 
	}
}

4364 
šlše
 
	gUnicodeSŒšg
&

4365 
	gUnicodeSŒšg
::
	$š£¹
(
št32_t
 
¡¬t
,

4366 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

4367 
št32_t
 
¤cL’gth
)

4368 {  
	`doR•Ïû
(
¡¬t
, 0, 
¤cCh¬s
, 0, 
¤cL’gth
); 
	}
}

4370 
šlše
 
	gUnicodeSŒšg
&

4371 
	gUnicodeSŒšg
::
	$š£¹
(
št32_t
 
¡¬t
,

4372 
UCh¬
 
¤cCh¬
)

4373 {  
	`doR•Ïû
(
¡¬t
, 0, &
¤cCh¬
, 0, 1); 
	}
}

4375 
šlše
 
	gUnicodeSŒšg
&

4376 
	gUnicodeSŒšg
::
	$š£¹
(
št32_t
 
¡¬t
,

4377 
UCh¬32
 
¤cCh¬
)

4378 {  
	`»¶aû
(
¡¬t
, 0, 
¤cCh¬
); 
	}
}

4381 
šlše
 
	gUnicodeSŒšg
&

4382 
	gUnicodeSŒšg
::
	$»move
()

4387 if(
fFÏgs
 & (
kIsBogus
|
kBufãrIsR—dÚly
)) {

4388 
	`£tToEm±y
();

4390 
fShÜtL’gth
 = 0;

4392  *
this
;

4393 
	}
}

4395 
šlše
 
	gUnicodeSŒšg
&

4396 
	gUnicodeSŒšg
::
	$»move
(
št32_t
 
¡¬t
,

4397 
št32_t
 
_Ëngth
)

4399 if(
¡¬t
 <ğ0 && 
_Ëngth
 =ğ
INT32_MAX
) {

4401  
	`»move
();

4403  
	`doR•Ïû
(
¡¬t
, 
_Ëngth
, 
NULL
, 0, 0);

4404 
	}
}

4406 
šlše
 
	gUnicodeSŒšg
&

4407 
	gUnicodeSŒšg
::
	$»moveB‘w“n
(
št32_t
 
¡¬t
,

4408 
št32_t
 
lim™
)

4409 {  
	`doR•Ïû
(
¡¬t
, 
lim™
 - s¹, 
NULL
, 0, 0); 
	}
}

4411 
šlše
 
	gUnicodeSŒšg
 &

4412 
	gUnicodeSŒšg
::
	$»šB‘w“n
(
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
) {

4413 
	`Œunÿ‹
(
lim™
);

4414  
	`doR•Ïû
(0, 
¡¬t
, 
NULL
, 0, 0);

4415 
	}
}

4417 
šlše
 
UBoŞ


4418 
	gUnicodeSŒšg
::
	$Œunÿ‹
(
št32_t
 
rg‘L’gth
)

4420 if(
	`isBogus
(è&& 
rg‘L’gth
 == 0) {

4422 
	`unBogus
();

4423  
FALSE
;

4424 } if((
ušt32_t
)
rg‘L’gth
 < (ušt32_t)
	`Ëngth
()) {

4425 
	`£tL’gth
(
rg‘L’gth
);

4426 if(
fFÏgs
&
kBufãrIsR—dÚly
) {

4427 
fUniÚ
.
fF›lds
.
fC­ac™y
 = 
rg‘L’gth
;

4429  
TRUE
;

4431  
FALSE
;

4433 
	}
}

4435 
šlše
 
	gUnicodeSŒšg
&

4436 
	gUnicodeSŒšg
::
	$»v”£
()

4437 {  
	`doRev”£
(0, 
	`Ëngth
()); 
	}
}

4439 
šlše
 
	gUnicodeSŒšg
&

4440 
	gUnicodeSŒšg
::
	$»v”£
(
št32_t
 
¡¬t
,

4441 
št32_t
 
_Ëngth
)

4442 {  
	`doRev”£
(
¡¬t
, 
_Ëngth
); 
	}
}

4444 
	gU_NAMESPACE_END


	@unicode/unorm.h

15 #iâdeà
UNORM_H


16 
	#UNORM_H


	)

18 
	~"unicode/uty³s.h
"

20 #ià!
UCONFIG_NO_NORMALIZATION


22 
	~"unicode/u™”.h
"

23 
	~"unicode/unÜm2.h
"

135 
	mUNORM_NONE
 = 1,

137 
	mUNORM_NFD
 = 2,

139 
	mUNORM_NFKD
 = 3,

141 
	mUNORM_NFC
 = 4,

143 
	mUNORM_DEFAULT
 = 
UNORM_NFC
,

145 
	mUNORM_NFKC
 =5,

147 
	mUNORM_FCD
 = 6,

150 
	mUNORM_MODE_COUNT


151 } 
	tUNÜm®iz©iÚMode
;

167 
	mUNORM_UNICODE_3_2
=0x20

185 
	#UNORM_COMPARE_NORM_OPTIONS_SHIFT
 20

	)

206 
U_STABLE
 
št32_t
 
U_EXPORT2


207 
unÜm_nÜm®ize
(cÚ¡ 
UCh¬
 *
sourû
, 
št32_t
 
sourûL’gth
,

208 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

209 
UCh¬
 *
»suÉ
, 
št32_t
 
»suÉL’gth
,

210 
UE¼ÜCode
 *
¡©us
);

232 
U_STABLE
 
UNÜm®iz©iÚCheckResuÉ
 
U_EXPORT2


233 
unÜm_quickCheck
(cÚ¡ 
UCh¬
 *
sourû
, 
št32_t
 
sourûËngth
,

234 
UNÜm®iz©iÚMode
 
mode
,

235 
UE¼ÜCode
 *
¡©us
);

253 
U_STABLE
 
UNÜm®iz©iÚCheckResuÉ
 
U_EXPORT2


254 
unÜm_quickCheckW™hO±iÚs
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

255 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

256 
UE¼ÜCode
 *
pE¼ÜCode
);

279 
U_STABLE
 
UBoŞ
 
U_EXPORT2


280 
unÜm_isNÜm®ized
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

281 
UNÜm®iz©iÚMode
 
mode
,

282 
UE¼ÜCode
 *
pE¼ÜCode
);

301 
U_STABLE
 
UBoŞ
 
U_EXPORT2


302 
unÜm_isNÜm®izedW™hO±iÚs
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

303 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

304 
UE¼ÜCode
 *
pE¼ÜCode
);

379 
U_STABLE
 
št32_t
 
U_EXPORT2


380 
unÜm_Ãxt
(
UCh¬I‹¿tÜ
 *
¤c
,

381 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

382 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

383 
UBoŞ
 
doNÜm®ize
, UBoŞ *
pN“dedToNÜm®ize
,

384 
UE¼ÜCode
 *
pE¼ÜCode
);

412 
U_STABLE
 
št32_t
 
U_EXPORT2


413 
unÜm_´evious
(
UCh¬I‹¿tÜ
 *
¤c
,

414 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

415 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

416 
UBoŞ
 
doNÜm®ize
, UBoŞ *
pN“dedToNÜm®ize
,

417 
UE¼ÜCode
 *
pE¼ÜCode
);

456 
U_STABLE
 
št32_t
 
U_EXPORT2


457 
unÜm_cÚÿ‹Ç‹
(cÚ¡ 
UCh¬
 *
Ëá
, 
št32_t
 
ËáL’gth
,

458 cÚ¡ 
UCh¬
 *
right
, 
št32_t
 
rightL’gth
,

459 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

460 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

461 
UE¼ÜCode
 *
pE¼ÜCode
);

468 
	#UNORM_INPUT_IS_FCD
 0x20000

	)

475 
	#U_COMPARE_IGNORE_CASE
 0x10000

	)

477 #iâdeà
U_COMPARE_CODE_POINT_ORDER


484 
	#U_COMPARE_CODE_POINT_ORDER
 0x8000

	)

553 
U_STABLE
 
št32_t
 
U_EXPORT2


554 
unÜm_com·»
(cÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

555 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

556 
ušt32_t
 
İtiÚs
,

557 
UE¼ÜCode
 *
pE¼ÜCode
);

	@unicode/unorm2.h

17 #iâdeà
__UNORM2_H__


18 
	#__UNORM2_H__


	)

31 
	~"unicode/uty³s.h
"

32 
	~"unicode/loÿÍoš‹r.h
"

33 
	~"unicode/u£t.h
"

51 
	mUNORM2_COMPOSE
,

60 
	mUNORM2_DECOMPOSE
,

73 
	mUNORM2_FCD
,

83 
	mUNORM2_COMPOSE_CONTIGUOUS


84 } 
	tUNÜm®iz©iÚ2Mode
;

91 
	eUNÜm®iz©iÚCheckResuÉ
 {

96 
	mUNORM_NO
,

101 
	mUNORM_YES
,

109 
	mUNORM_MAYBE


110 } 
	tUNÜm®iz©iÚCheckResuÉ
;

116 
	gUNÜm®iz”2
;

117 
UNÜm®iz”2
 
	tUNÜm®iz”2
;

119 #ià!
UCONFIG_NO_NORMALIZATION


142 
U_STABLE
 cÚ¡ 
UNÜm®iz”2
 * 
U_EXPORT2


143 
unÜm2_g‘In¡ªû
(cÚ¡ *
·ckageName
,

144 cÚ¡ *
Çme
,

145 
UNÜm®iz©iÚ2Mode
 
mode
,

146 
UE¼ÜCode
 *
pE¼ÜCode
);

163 
U_STABLE
 
UNÜm®iz”2
 * 
U_EXPORT2


164 
unÜm2_İ’F‹»d
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
, cÚ¡ 
US‘
 *
f‹rS‘
, 
UE¼ÜCode
 *
pE¼ÜCode
);

172 
U_STABLE
 
U_EXPORT2


173 
unÜm2_şo£
(
UNÜm®iz”2
 *
nÜm2
);

175 #ià
U_SHOW_CPLUSPLUS_API


177 
U_NAMESPACE_BEGIN


188 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUNÜm®iz”2Poš‹r
, 
UNÜm®iz”2
, 
unÜm2_şo£
);

190 
	gU_NAMESPACE_END


210 
U_STABLE
 
št32_t
 
U_EXPORT2


211 
unÜm2_nÜm®ize
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

212 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
Ëngth
,

213 
UCh¬
 *
de¡
, 
št32_t
 
ÿ·c™y
,

214 
UE¼ÜCode
 *
pE¼ÜCode
);

233 
U_STABLE
 
št32_t
 
U_EXPORT2


234 
unÜm2_nÜm®izeSecÚdAndAµ’d
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

235 
UCh¬
 *
fœ¡
, 
št32_t
 
fœ¡L’gth
, iÁ32_ˆ
fœ¡C­ac™y
,

236 cÚ¡ 
UCh¬
 *
£cÚd
, 
št32_t
 
£cÚdL’gth
,

237 
UE¼ÜCode
 *
pE¼ÜCode
);

256 
U_STABLE
 
št32_t
 
U_EXPORT2


257 
unÜm2_­³nd
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

258 
UCh¬
 *
fœ¡
, 
št32_t
 
fœ¡L’gth
, iÁ32_ˆ
fœ¡C­ac™y
,

259 cÚ¡ 
UCh¬
 *
£cÚd
, 
št32_t
 
£cÚdL’gth
,

260 
UE¼ÜCode
 *
pE¼ÜCode
);

278 
U_DRAFT
 
št32_t
 
U_EXPORT2


279 
unÜm2_g‘Decompos™iÚ
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

280 
UCh¬32
 
c
, 
UCh¬
 *
decompos™iÚ
, 
št32_t
 
ÿ·c™y
,

281 
UE¼ÜCode
 *
pE¼ÜCode
);

299 
U_STABLE
 
UBoŞ
 
U_EXPORT2


300 
unÜm2_isNÜm®ized
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

301 cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
,

302 
UE¼ÜCode
 *
pE¼ÜCode
);

321 
U_STABLE
 
UNÜm®iz©iÚCheckResuÉ
 
U_EXPORT2


322 
unÜm2_quickCheck
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

323 cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
,

324 
UE¼ÜCode
 *
pE¼ÜCode
);

350 
U_STABLE
 
št32_t
 
U_EXPORT2


351 
unÜm2_¥ªQuickCheckYes
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
,

352 cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
,

353 
UE¼ÜCode
 *
pE¼ÜCode
);

364 
U_STABLE
 
UBoŞ
 
U_EXPORT2


365 
unÜm2_hasBound¬yBefÜe
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
, 
UCh¬32
 
c
);

376 
U_STABLE
 
UBoŞ
 
U_EXPORT2


377 
unÜm2_hasBound¬yAá”
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
, 
UCh¬32
 
c
);

387 
U_STABLE
 
UBoŞ
 
U_EXPORT2


388 
unÜm2_isIÃ¹
(cÚ¡ 
UNÜm®iz”2
 *
nÜm2
, 
UCh¬32
 
c
);

	@unicode/uobject.h

17 #iâdeà
__UOBJECT_H__


18 
	#__UOBJECT_H__


	)

20 
	~"unicode/uty³s.h
"

22 
	gU_NAMESPACE_BEGIN


39 #iâdeà
U_OVERRIDE_CXX_ALLOCATION


40 
	#U_OVERRIDE_CXX_ALLOCATION
 1

	)

50 #iâdeà
U_HAVE_PLACEMENT_NEW


51 
	#U_HAVE_PLACEMENT_NEW
 1

	)

62 #iâdeà
U_HAVE_DEBUG_LOCATION_NEW


63 
	#U_HAVE_DEBUG_LOCATION_NEW
 0

	)

80 #iâdeà
U_NO_THROW


81 
	#U_NO_THROW
 
	`throw
()

	)

101 şas 
	cU_COMMON_API
 
	mUMemÜy
 {

102 
	mpublic
:

105 #ifdeà
SHAPER_MEMORY_DEBUG


106 * 
NewA¼ay
(
size
, 
couÁ
);

107 * 
GrowA¼ay
(* 
¬¿y
, 
ÃwSize
 );

108 
F»eA¼ay
(* 
¬¿y
 );

111 #ià
U_OVERRIDE_CXX_ALLOCATION


120 * 
U_EXPORT2
 
İ”©Ü
 
	$Ãw
(
size_t
 
size
è
U_NO_THROW
;

127 * 
U_EXPORT2
 
İ”©Ü
 
Ãw
[](
size_t
 
size
è
U_NO_THROW
;

137 
U_EXPORT2
 
İ”©Ü
 
	$d–‘e
(*
p
è
U_NO_THROW
;

144 
U_EXPORT2
 
İ”©Ü
 
d–‘e
[](*
p
è
U_NO_THROW
;

146 #ià
U_HAVE_PLACEMENT_NEW


152 
šlše
 * 
U_EXPORT2
 
İ”©Ü
 
	$Ãw
(
size_t
, *
±r
è
U_NO_THROW
 { …tr; }

159 
šlše
 
U_EXPORT2
 
İ”©Ü
 
	$d–‘e
(*, *è
U_NO_THROW
 {
	}
}

161 #ià
U_HAVE_DEBUG_LOCATION_NEW


169 * 
U_EXPORT2
 
İ”©Ü
 
	$Ãw
(
size_t
 
size
, cÚ¡ * 
fe
, 
lše
è
U_NO_THROW
;

177 
U_EXPORT2
 
İ”©Ü
 
	$d–‘e
(* 
p
, cÚ¡ * 
fe
, 
lše
è
U_NO_THROW
;

191 
	}
};

215 şas 
	cU_COMMON_API
 
	mUObjeù
 : 
public
 
UMemÜy
 {

216 
public
:

222 
vœtu®
 ~
UObjeù
();

229 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const = 0;

231 
´Ùeùed
:

255 
vœtu®
 
šlše
 
UBoŞ
 
İ”©Ü
==(cÚ¡ 
UObjeù
 &
Ùh”
ècÚ¡ {  
this
==&other; }

256 
šlše
 
UBoŞ
 
İ”©Ü
!=(cÚ¡ 
UObjeù
 &
Ùh”
ècÚ¡ {  !İ”©Ü==(Ùh”); 
	}
}

297 
	#UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
myCÏss
) \

298 
UCÏssID
 
U_EXPORT2
 
myCÏss
::
	`g‘SticCÏssID
() { \

299 
şassID
 = 0; \

300  (
UCÏssID
)&
şassID
; \

302 
UCÏssID
 
myCÏss
::
	`g‘DyÇmicCÏssID
() const \

303 {  
myCÏss
::
	`g‘SticCÏssID
(); }

	)

314 
	#UOBJECT_DEFINE_ABSTRACT_RTTI_IMPLEMENTATION
(
myCÏss
) \

315 
UCÏssID
 
U_EXPORT2
 
myCÏss
::
	`g‘SticCÏssID
() { \

316 
şassID
 = 0; \

317  (
UCÏssID
)&
şassID
; \

318 }

	)

330 
	#UOBJECT_DEFINE_NO_RTTI_IMPLEMENTATION
(
myCÏss
) \

331 
UCÏssID
 
myCÏss
::
	`g‘DyÇmicCÏssID
(ècÚ¡ {  
NULL
; }

	)

350 
	gU_NAMESPACE_END


	@unicode/uobslete.h

21 #iâdeà
UOBSLETE_H


22 
	#UOBSLETE_H


	)

24 #ifdeà
U_HIDE_OBSOLETE_API


26 #ià
U_DISABLE_RENAMING


	@unicode/urename.h

21 #iâdeà
URENAME_H


22 
	#URENAME_H


	)

28 #ià!
U_DISABLE_RENAMING


34 #iâdeà
U_ICU_ENTRY_POINT_RENAME


35 
	~"unicode/umachše.h
"

39 #iâdeà
U_ICU_ENTRY_POINT_RENAME


40 
	~"unicode/uv”num.h
"

44 #iâdeà
U_ICU_ENTRY_POINT_RENAME


45 #”rÜ 
U_ICU_ENTRY_POINT_RENAME
 
is
 
nÙ
 
defšed
 - 
ÿÂÙ
 . 
CÚsid”
 
defššg
 
U_DISABLE_RENAMING
 
»Çmšg
 
should
‚Ù 
be
 
u£d
.

51 
	#DECPOWERS
 
	`U_ICU_ENTRY_POINT_RENAME
(
DECPOWERS
)

	)

52 
	#DECSTICKYTAB
 
	`U_ICU_ENTRY_POINT_RENAME
(
DECSTICKYTAB
)

	)

53 
	#LNÂ
 
	`U_ICU_ENTRY_POINT_RENAME
(
LNÂ
)

	)

54 
	#T_CSŒšg_št64ToSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
T_CSŒšg_št64ToSŒšg
)

	)

55 
	#T_CSŒšg_š‹g”ToSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
T_CSŒšg_š‹g”ToSŒšg
)

	)

56 
	#T_CSŒšg_¡ricmp
 
	`U_ICU_ENTRY_POINT_RENAME
(
T_CSŒšg_¡ricmp
)

	)

57 
	#T_CSŒšg_¡ršgToIÁeg”
 
	`U_ICU_ENTRY_POINT_RENAME
(
T_CSŒšg_¡ršgToIÁeg”
)

	)

58 
	#T_CSŒšg_¡ºicmp
 
	`U_ICU_ENTRY_POINT_RENAME
(
T_CSŒšg_¡ºicmp
)

	)

59 
	#T_CSŒšg_toLow”Ca£
 
	`U_ICU_ENTRY_POINT_RENAME
(
T_CSŒšg_toLow”Ca£
)

	)

60 
	#T_CSŒšg_toUµ”Ca£
 
	`U_ICU_ENTRY_POINT_RENAME
(
T_CSŒšg_toUµ”Ca£
)

	)

61 
	#UCNV_FROM_U_CALLBACK_ESCAPE
 
	`U_ICU_ENTRY_POINT_RENAME
(
UCNV_FROM_U_CALLBACK_ESCAPE
)

	)

62 
	#UCNV_FROM_U_CALLBACK_SKIP
 
	`U_ICU_ENTRY_POINT_RENAME
(
UCNV_FROM_U_CALLBACK_SKIP
)

	)

63 
	#UCNV_FROM_U_CALLBACK_STOP
 
	`U_ICU_ENTRY_POINT_RENAME
(
UCNV_FROM_U_CALLBACK_STOP
)

	)

64 
	#UCNV_FROM_U_CALLBACK_SUBSTITUTE
 
	`U_ICU_ENTRY_POINT_RENAME
(
UCNV_FROM_U_CALLBACK_SUBSTITUTE
)

	)

65 
	#UCNV_TO_U_CALLBACK_ESCAPE
 
	`U_ICU_ENTRY_POINT_RENAME
(
UCNV_TO_U_CALLBACK_ESCAPE
)

	)

66 
	#UCNV_TO_U_CALLBACK_SKIP
 
	`U_ICU_ENTRY_POINT_RENAME
(
UCNV_TO_U_CALLBACK_SKIP
)

	)

67 
	#UCNV_TO_U_CALLBACK_STOP
 
	`U_ICU_ENTRY_POINT_RENAME
(
UCNV_TO_U_CALLBACK_STOP
)

	)

68 
	#UCNV_TO_U_CALLBACK_SUBSTITUTE
 
	`U_ICU_ENTRY_POINT_RENAME
(
UCNV_TO_U_CALLBACK_SUBSTITUTE
)

	)

69 
	#UD©aMemÜy_ü—‹NewIn¡ªû
 
	`U_ICU_ENTRY_POINT_RENAME
(
UD©aMemÜy_ü—‹NewIn¡ªû
)

	)

70 
	#UD©aMemÜy_š™
 
	`U_ICU_ENTRY_POINT_RENAME
(
UD©aMemÜy_š™
)

	)

71 
	#UD©aMemÜy_isLßded
 
	`U_ICU_ENTRY_POINT_RENAME
(
UD©aMemÜy_isLßded
)

	)

72 
	#UD©aMemÜy_nÜm®izeD©aPoš‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
UD©aMemÜy_nÜm®izeD©aPoš‹r
)

	)

73 
	#UD©aMemÜy_£tD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
UD©aMemÜy_£tD©a
)

	)

74 
	#UD©amemÜy_assign
 
	`U_ICU_ENTRY_POINT_RENAME
(
UD©amemÜy_assign
)

	)

75 
	#_ASCIID©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_ASCIID©a
)

	)

76 
	#_Bocu1D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_Bocu1D©a
)

	)

77 
	#_CESU8D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_CESU8D©a
)

	)

78 
	#_HZD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_HZD©a
)

	)

79 
	#_IMAPD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_IMAPD©a
)

	)

80 
	#_ISCIID©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_ISCIID©a
)

	)

81 
	#_ISO2022D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_ISO2022D©a
)

	)

82 
	#_LMBCSD©a1
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a1
)

	)

83 
	#_LMBCSD©a11
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a11
)

	)

84 
	#_LMBCSD©a16
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a16
)

	)

85 
	#_LMBCSD©a17
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a17
)

	)

86 
	#_LMBCSD©a18
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a18
)

	)

87 
	#_LMBCSD©a19
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a19
)

	)

88 
	#_LMBCSD©a2
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a2
)

	)

89 
	#_LMBCSD©a3
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a3
)

	)

90 
	#_LMBCSD©a4
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a4
)

	)

91 
	#_LMBCSD©a5
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a5
)

	)

92 
	#_LMBCSD©a6
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a6
)

	)

93 
	#_LMBCSD©a8
 
	`U_ICU_ENTRY_POINT_RENAME
(
_LMBCSD©a8
)

	)

94 
	#_L©š1D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_L©š1D©a
)

	)

95 
	#_MBCSD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_MBCSD©a
)

	)

96 
	#_SCSUD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_SCSUD©a
)

	)

97 
	#_UTF16BED©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_UTF16BED©a
)

	)

98 
	#_UTF16D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_UTF16D©a
)

	)

99 
	#_UTF16LED©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_UTF16LED©a
)

	)

100 
	#_UTF32BED©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_UTF32BED©a
)

	)

101 
	#_UTF32D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_UTF32D©a
)

	)

102 
	#_UTF32LED©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_UTF32LED©a
)

	)

103 
	#_UTF7D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_UTF7D©a
)

	)

104 
	#_UTF8D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
_UTF8D©a
)

	)

105 
	#bms_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
bms_şo£
)

	)

106 
	#bms_em±y
 
	`U_ICU_ENTRY_POINT_RENAME
(
bms_em±y
)

	)

107 
	#bms_g‘D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
bms_g‘D©a
)

	)

108 
	#bms_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
bms_İ’
)

	)

109 
	#bms_£¬ch
 
	`U_ICU_ENTRY_POINT_RENAME
(
bms_£¬ch
)

	)

110 
	#bms_£tT¬g‘SŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
bms_£tT¬g‘SŒšg
)

	)

111 
	#budWSCÚfu§bËD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
budWSCÚfu§bËD©a
)

	)

112 
	#cmemÜy_ş—nup
 
	`U_ICU_ENTRY_POINT_RENAME
(
cmemÜy_ş—nup
)

	)

113 
	#cmemÜy_šU£
 
	`U_ICU_ENTRY_POINT_RENAME
(
cmemÜy_šU£
)

	)

114 
	#d2ubË
 
	`U_ICU_ENTRY_POINT_RENAME
(
d2ubË
)

	)

115 
	#d–‘eCELi¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
d–‘eCELi¡
)

	)

116 
	#d–‘eCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
d–‘eCh¬s
)

	)

117 
	#d–‘eCŞlD©aCacheEÁry
 
	`U_ICU_ENTRY_POINT_RENAME
(
d–‘eCŞlD©aCacheEÁry
)

	)

118 
	#d–‘eSŒšgLi¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
d–‘eSŒšgLi¡
)

	)

119 
	#d–‘eUnicodeSŒšgKey
 
	`U_ICU_ENTRY_POINT_RENAME
(
d–‘eUnicodeSŒšgKey
)

	)

120 
	#izruË_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_şÚe
)

	)

121 
	#izruË_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_şo£
)

	)

122 
	#izruË_equ®s
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_equ®s
)

	)

123 
	#izruË_g‘DSTSavšgs
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_g‘DSTSavšgs
)

	)

124 
	#izruË_g‘DyÇmicCÏssID
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_g‘DyÇmicCÏssID
)

	)

125 
	#izruË_g‘Fš®S¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_g‘Fš®S¹
)

	)

126 
	#izruË_g‘Fœ¡S¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_g‘Fœ¡S¹
)

	)

127 
	#izruË_g‘Name
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_g‘Name
)

	)

128 
	#izruË_g‘NextS¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_g‘NextS¹
)

	)

129 
	#izruË_g‘P»viousS¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_g‘P»viousS¹
)

	)

130 
	#izruË_g‘RawOff£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_g‘RawOff£t
)

	)

131 
	#izruË_g‘SticCÏssID
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_g‘SticCÏssID
)

	)

132 
	#izruË_isEquiv®’tTo
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_isEquiv®’tTo
)

	)

133 
	#izruË_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
izruË_İ’
)

	)

134 
	#Ë_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ë_şo£
)

	)

135 
	#Ë_ü—‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ë_ü—‹
)

	)

136 
	#Ë_g‘Ch¬Indiûs
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ë_g‘Ch¬Indiûs
)

	)

137 
	#Ë_g‘Ch¬IndiûsW™hBa£
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ë_g‘Ch¬IndiûsW™hBa£
)

	)

138 
	#Ë_g‘GlyphCouÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ë_g‘GlyphCouÁ
)

	)

139 
	#Ë_g‘GlyphPos™iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ë_g‘GlyphPos™iÚ
)

	)

140 
	#Ë_g‘GlyphPos™iÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ë_g‘GlyphPos™iÚs
)

	)

141 
	#Ë_g‘Glyphs
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ë_g‘Glyphs
)

	)

142 
	#Ë_ÏyoutCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ë_ÏyoutCh¬s
)

	)

143 
	#Ë_»£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ë_»£t
)

	)

144 
	#loÿË_g‘KeywÜds
 
	`U_ICU_ENTRY_POINT_RENAME
(
loÿË_g‘KeywÜds
)

	)

145 
	#loÿË_g‘KeywÜdsS¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
loÿË_g‘KeywÜdsS¹
)

	)

146 
	#loÿË_g‘_deçuÉ
 
	`U_ICU_ENTRY_POINT_RENAME
(
loÿË_g‘_deçuÉ
)

	)

147 
	#loÿË_£t_deçuÉ
 
	`U_ICU_ENTRY_POINT_RENAME
(
loÿË_£t_deçuÉ
)

	)

148 
	#¶_addFÚtRun
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_addFÚtRun
)

	)

149 
	#¶_addLoÿËRun
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_addLoÿËRun
)

	)

150 
	#¶_addV®ueRun
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_addV®ueRun
)

	)

151 
	#¶_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_şo£
)

	)

152 
	#¶_şo£FÚtRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_şo£FÚtRuns
)

	)

153 
	#¶_şo£Lše
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_şo£Lše
)

	)

154 
	#¶_şo£LoÿËRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_şo£LoÿËRuns
)

	)

155 
	#¶_şo£V®ueRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_şo£V®ueRuns
)

	)

156 
	#¶_couÁLšeRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_couÁLšeRuns
)

	)

157 
	#¶_ü—‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_ü—‹
)

	)

158 
	#¶_g‘AsûÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘AsûÁ
)

	)

159 
	#¶_g‘DesûÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘DesûÁ
)

	)

160 
	#¶_g‘FÚtRunCouÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘FÚtRunCouÁ
)

	)

161 
	#¶_g‘FÚtRunFÚt
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘FÚtRunFÚt
)

	)

162 
	#¶_g‘FÚtRunLa¡Lim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘FÚtRunLa¡Lim™
)

	)

163 
	#¶_g‘FÚtRunLim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘FÚtRunLim™
)

	)

164 
	#¶_g‘L—dšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘L—dšg
)

	)

165 
	#¶_g‘LšeAsûÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘LšeAsûÁ
)

	)

166 
	#¶_g‘LšeDesûÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘LšeDesûÁ
)

	)

167 
	#¶_g‘LšeL—dšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘LšeL—dšg
)

	)

168 
	#¶_g‘LšeVisu®Run
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘LšeVisu®Run
)

	)

169 
	#¶_g‘LšeWidth
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘LšeWidth
)

	)

170 
	#¶_g‘LoÿËRunCouÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘LoÿËRunCouÁ
)

	)

171 
	#¶_g‘LoÿËRunLa¡Lim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘LoÿËRunLa¡Lim™
)

	)

172 
	#¶_g‘LoÿËRunLim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘LoÿËRunLim™
)

	)

173 
	#¶_g‘LoÿËRunLoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘LoÿËRunLoÿË
)

	)

174 
	#¶_g‘P¬ag¿phLev–
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘P¬ag¿phLev–
)

	)

175 
	#¶_g‘TextDœeùiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘TextDœeùiÚ
)

	)

176 
	#¶_g‘V®ueRunCouÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘V®ueRunCouÁ
)

	)

177 
	#¶_g‘V®ueRunLa¡Lim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘V®ueRunLa¡Lim™
)

	)

178 
	#¶_g‘V®ueRunLim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘V®ueRunLim™
)

	)

179 
	#¶_g‘V®ueRunV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘V®ueRunV®ue
)

	)

180 
	#¶_g‘Visu®RunAsûÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘Visu®RunAsûÁ
)

	)

181 
	#¶_g‘Visu®RunDesûÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘Visu®RunDesûÁ
)

	)

182 
	#¶_g‘Visu®RunDœeùiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘Visu®RunDœeùiÚ
)

	)

183 
	#¶_g‘Visu®RunFÚt
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘Visu®RunFÚt
)

	)

184 
	#¶_g‘Visu®RunGlyphCouÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘Visu®RunGlyphCouÁ
)

	)

185 
	#¶_g‘Visu®RunGlyphToCh¬M­
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘Visu®RunGlyphToCh¬M­
)

	)

186 
	#¶_g‘Visu®RunGlyphs
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘Visu®RunGlyphs
)

	)

187 
	#¶_g‘Visu®RunL—dšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘Visu®RunL—dšg
)

	)

188 
	#¶_g‘Visu®RunPos™iÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_g‘Visu®RunPos™iÚs
)

	)

189 
	#¶_isCom¶ex
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_isCom¶ex
)

	)

190 
	#¶_ÃxtLše
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_ÃxtLše
)

	)

191 
	#¶_İ’Em±yFÚtRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_İ’Em±yFÚtRuns
)

	)

192 
	#¶_İ’Em±yLoÿËRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_İ’Em±yLoÿËRuns
)

	)

193 
	#¶_İ’Em±yV®ueRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_İ’Em±yV®ueRuns
)

	)

194 
	#¶_İ’FÚtRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_İ’FÚtRuns
)

	)

195 
	#¶_İ’LoÿËRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_İ’LoÿËRuns
)

	)

196 
	#¶_İ’V®ueRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_İ’V®ueRuns
)

	)

197 
	#¶_»æow
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_»æow
)

	)

198 
	#¶_»£tFÚtRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_»£tFÚtRuns
)

	)

199 
	#¶_»£tLoÿËRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_»£tLoÿËRuns
)

	)

200 
	#¶_»£tV®ueRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
¶_»£tV®ueRuns
)

	)

201 
	#»s_couÁA¼ayI‹ms
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_couÁA¼ayI‹ms
)

	)

202 
	#»s_fšdResourû
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_fšdResourû
)

	)

203 
	#»s_g‘AlŸs
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_g‘AlŸs
)

	)

204 
	#»s_g‘A¼ayI‹m
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_g‘A¼ayI‹m
)

	)

205 
	#»s_g‘Bš¬y
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_g‘Bš¬y
)

	)

206 
	#»s_g‘IÁVeùÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_g‘IÁVeùÜ
)

	)

207 
	#»s_g‘PublicTy³
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_g‘PublicTy³
)

	)

208 
	#»s_g‘Resourû
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_g‘Resourû
)

	)

209 
	#»s_g‘SŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_g‘SŒšg
)

	)

210 
	#»s_g‘TabËI‹mByIndex
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_g‘TabËI‹mByIndex
)

	)

211 
	#»s_g‘TabËI‹mByKey
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_g‘TabËI‹mByKey
)

	)

212 
	#»s_lßd
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_lßd
)

	)

213 
	#»s_»ad
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_»ad
)

	)

214 
	#»s_uÆßd
 
	`U_ICU_ENTRY_POINT_RENAME
(
»s_uÆßd
)

	)

215 
	#tmutfmtHashTabËV®ueCom·¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
tmutfmtHashTabËV®ueCom·¿tÜ
)

	)

216 
	#Œ›diù_sw­
 
	`U_ICU_ENTRY_POINT_RENAME
(
Œ›diù_sw­
)

	)

217 
	#u_UCh¬sToCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_UCh¬sToCh¬s
)

	)

218 
	#u_au¡rıy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_au¡rıy
)

	)

219 
	#u_au¡ºıy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_au¡ºıy
)

	)

220 
	#u_ÿtşo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ÿtşo£
)

	)

221 
	#u_ÿtg‘s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ÿtg‘s
)

	)

222 
	#u_ÿtİ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ÿtİ’
)

	)

223 
	#u_ch¬Age
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ch¬Age
)

	)

224 
	#u_ch¬Dig™V®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ch¬Dig™V®ue
)

	)

225 
	#u_ch¬DœeùiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ch¬DœeùiÚ
)

	)

226 
	#u_ch¬FromName
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ch¬FromName
)

	)

227 
	#u_ch¬MœrÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ch¬MœrÜ
)

	)

228 
	#u_ch¬Name
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ch¬Name
)

	)

229 
	#u_ch¬Ty³
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ch¬Ty³
)

	)

230 
	#u_ch¬sToUCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ch¬sToUCh¬s
)

	)

231 
	#u_ş—nup
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ş—nup
)

	)

232 
	#u_couÁCh¬32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_couÁCh¬32
)

	)

233 
	#u_dig™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_dig™
)

	)

234 
	#u_’umCh¬Names
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_’umCh¬Names
)

	)

235 
	#u_’umCh¬Ty³s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_’umCh¬Ty³s
)

	)

236 
	#u_”rÜName
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_”rÜName
)

	)

237 
	#u_çdİt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_çdİt
)

	)

238 
	#u_fşo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fşo£
)

	)

239 
	#u_ãof
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ãof
)

	)

240 
	#u_fæush
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fæush
)

	)

241 
	#u_fg‘CÚv”‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fg‘CÚv”‹r
)

	)

242 
	#u_fg‘c
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fg‘c
)

	)

243 
	#u_fg‘cod•age
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fg‘cod•age
)

	)

244 
	#u_fg‘cx
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fg‘cx
)

	)

245 
	#u_fg‘fe
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fg‘fe
)

	)

246 
	#u_fg‘loÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fg‘loÿË
)

	)

247 
	#u_fg‘s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fg‘s
)

	)

248 
	#u_fe_»ad
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fe_»ad
)

	)

249 
	#u_fe_wr™e
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fe_wr™e
)

	)

250 
	#u_fe_wr™e_æush
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fe_wr™e_æush
)

	)

251 
	#u_fš™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fš™
)

	)

252 
	#u_æushDeçuÉCÚv”‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_æushDeçuÉCÚv”‹r
)

	)

253 
	#u_fŞdCa£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fŞdCa£
)

	)

254 
	#u_fİ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fİ’
)

	)

255 
	#u_fÜDig™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fÜDig™
)

	)

256 
	#u_fÜm©Mes§ge
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fÜm©Mes§ge
)

	)

257 
	#u_fÜm©Mes§geW™hE¼Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fÜm©Mes§geW™hE¼Ü
)

	)

258 
	#u_årštf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_årštf
)

	)

259 
	#u_årštf_u
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_årštf_u
)

	)

260 
	#u_åutc
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_åutc
)

	)

261 
	#u_åuts
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_åuts
)

	)

262 
	#u_äewšd
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_äewšd
)

	)

263 
	#u_fsÿnf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fsÿnf
)

	)

264 
	#u_fsÿnf_u
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fsÿnf_u
)

	)

265 
	#u_f£tcod•age
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_f£tcod•age
)

	)

266 
	#u_f£oÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_f£oÿË
)

	)

267 
	#u_f£‰¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_f£‰¿n¦™”©Ü
)

	)

268 
	#u_f¡rİ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_f¡rİ’
)

	)

269 
	#u_fung‘c
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_fung‘c
)

	)

270 
	#u_g‘CombššgCÏss
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘CombššgCÏss
)

	)

271 
	#u_g‘D©aDœeùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘D©aDœeùÜy
)

	)

272 
	#u_g‘D©aV”siÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘D©aV”siÚ
)

	)

273 
	#u_g‘DeçuÉCÚv”‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘DeçuÉCÚv”‹r
)

	)

274 
	#u_g‘FC_NFKC_Closu»
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘FC_NFKC_Closu»
)

	)

275 
	#u_g‘ISOComm’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘ISOComm’t
)

	)

276 
	#u_g‘IÁPrİ”tyMaxV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘IÁPrİ”tyMaxV®ue
)

	)

277 
	#u_g‘IÁPrİ”tyMšV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘IÁPrİ”tyMšV®ue
)

	)

278 
	#u_g‘IÁPrİ”tyV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘IÁPrİ”tyV®ue
)

	)

279 
	#u_g‘Num”icV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘Num”icV®ue
)

	)

280 
	#u_g‘Prİ”tyEnum
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘Prİ”tyEnum
)

	)

281 
	#u_g‘Prİ”tyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘Prİ”tyName
)

	)

282 
	#u_g‘Prİ”tyV®ueEnum
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘Prİ”tyV®ueEnum
)

	)

283 
	#u_g‘Prİ”tyV®ueName
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘Prİ”tyV®ueName
)

	)

284 
	#u_g‘UnicodePrİ”t›s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘UnicodePrİ”t›s
)

	)

285 
	#u_g‘UnicodeV”siÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘UnicodeV”siÚ
)

	)

286 
	#u_g‘V”siÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_g‘V”siÚ
)

	)

287 
	#u_hasBš¬yPrİ”ty
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_hasBš¬yPrİ”ty
)

	)

288 
	#u_š™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_š™
)

	)

289 
	#u_isD©aOld”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isD©aOld”
)

	)

290 
	#u_isIDIgnÜabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isIDIgnÜabË
)

	)

291 
	#u_isIDP¬t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isIDP¬t
)

	)

292 
	#u_isIDS¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isIDS¹
)

	)

293 
	#u_isISOCÚŒŞ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isISOCÚŒŞ
)

	)

294 
	#u_isJavaIDP¬t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isJavaIDP¬t
)

	)

295 
	#u_isJavaIDS¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isJavaIDS¹
)

	)

296 
	#u_isJavaS·ûCh¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isJavaS·ûCh¬
)

	)

297 
	#u_isMœrÜed
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isMœrÜed
)

	)

298 
	#u_isUAÍhab‘ic
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isUAÍhab‘ic
)

	)

299 
	#u_isULow”ÿ£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isULow”ÿ£
)

	)

300 
	#u_isUUµ”ÿ£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isUUµ”ÿ£
)

	)

301 
	#u_isUWh™eS·û
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isUWh™eS·û
)

	)

302 
	#u_isWh™e¥aû
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isWh™e¥aû
)

	)

303 
	#u_i§Êum
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_i§Êum
)

	)

304 
	#u_i§ÊumPOSIX
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_i§ÊumPOSIX
)

	)

305 
	#u_i§Íha
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_i§Íha
)

	)

306 
	#u_isba£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isba£
)

	)

307 
	#u_isbÏnk
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isbÏnk
)

	)

308 
	#u_isúŒl
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isúŒl
)

	)

309 
	#u_isdefšed
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isdefšed
)

	)

310 
	#u_isdig™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isdig™
)

	)

311 
	#u_isg¿ph
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isg¿ph
)

	)

312 
	#u_isg¿phPOSIX
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isg¿phPOSIX
)

	)

313 
	#u_i¦ow”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_i¦ow”
)

	)

314 
	#u_i¥ršt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_i¥ršt
)

	)

315 
	#u_i¥rštPOSIX
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_i¥rštPOSIX
)

	)

316 
	#u_i¥unù
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_i¥unù
)

	)

317 
	#u_is¥aû
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_is¥aû
)

	)

318 
	#u_i¡™Ë
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_i¡™Ë
)

	)

319 
	#u_isuµ”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isuµ”
)

	)

320 
	#u_isxdig™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_isxdig™
)

	)

321 
	#u_ËngthOfId’tiÿlLev–Run
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ËngthOfId’tiÿlLev–Run
)

	)

322 
	#u_locbund_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_locbund_şo£
)

	)

323 
	#u_locbund_g‘Numb”FÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_locbund_g‘Numb”FÜm©
)

	)

324 
	#u_locbund_š™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_locbund_š™
)

	)

325 
	#u_memÿ£cmp
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_memÿ£cmp
)

	)

326 
	#u_memchr
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_memchr
)

	)

327 
	#u_memchr32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_memchr32
)

	)

328 
	#u_memcmp
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_memcmp
)

	)

329 
	#u_memcmpCodePoštOrd”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_memcmpCodePoštOrd”
)

	)

330 
	#u_memıy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_memıy
)

	)

331 
	#u_memmove
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_memmove
)

	)

332 
	#u_memrchr
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_memrchr
)

	)

333 
	#u_memrchr32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_memrchr32
)

	)

334 
	#u_mem£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_mem£t
)

	)

335 
	#u_·r£Mes§ge
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_·r£Mes§ge
)

	)

336 
	#u_·r£Mes§geW™hE¼Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_·r£Mes§geW™hE¼Ü
)

	)

337 
	#u_´štf_·r£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_´štf_·r£
)

	)

338 
	#u_»Ëa£DeçuÉCÚv”‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_»Ëa£DeçuÉCÚv”‹r
)

	)

339 
	#u_sÿnf_·r£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_sÿnf_·r£
)

	)

340 
	#u_£tAtomicIncDecFunùiÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_£tAtomicIncDecFunùiÚs
)

	)

341 
	#u_£tD©aDœeùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_£tD©aDœeùÜy
)

	)

342 
	#u_£tMemÜyFunùiÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_£tMemÜyFunùiÚs
)

	)

343 
	#u_£tMu‹xFunùiÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_£tMu‹xFunùiÚs
)

	)

344 
	#u_sh­eA¿bic
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_sh­eA¿bic
)

	)

345 
	#u_¢´štf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¢´štf
)

	)

346 
	#u_¢´štf_u
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¢´štf_u
)

	)

347 
	#u_¥rštf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¥rštf
)

	)

348 
	#u_¥rštf_u
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¥rštf_u
)

	)

349 
	#u_ssÿnf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ssÿnf
)

	)

350 
	#u_ssÿnf_u
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ssÿnf_u
)

	)

351 
	#u_¡rCa£Com·»
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rCa£Com·»
)

	)

352 
	#u_¡rCom·»
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rCom·»
)

	)

353 
	#u_¡rCom·»I‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rCom·»I‹r
)

	)

354 
	#u_¡rFšdFœ¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rFšdFœ¡
)

	)

355 
	#u_¡rFšdLa¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rFšdLa¡
)

	)

356 
	#u_¡rFŞdCa£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rFŞdCa£
)

	)

357 
	#u_¡rFromJavaModif›dUTF8W™hSub
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rFromJavaModif›dUTF8W™hSub
)

	)

358 
	#u_¡rFromPunycode
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rFromPunycode
)

	)

359 
	#u_¡rFromUTF32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rFromUTF32
)

	)

360 
	#u_¡rFromUTF32W™hSub
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rFromUTF32W™hSub
)

	)

361 
	#u_¡rFromUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rFromUTF8
)

	)

362 
	#u_¡rFromUTF8L’›Á
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rFromUTF8L’›Á
)

	)

363 
	#u_¡rFromUTF8W™hSub
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rFromUTF8W™hSub
)

	)

364 
	#u_¡rFromWCS
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rFromWCS
)

	)

365 
	#u_¡rHasMÜeCh¬32Thª
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rHasMÜeCh¬32Thª
)

	)

366 
	#u_¡rToJavaModif›dUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rToJavaModif›dUTF8
)

	)

367 
	#u_¡rToLow”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rToLow”
)

	)

368 
	#u_¡rToPunycode
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rToPunycode
)

	)

369 
	#u_¡rToT™Ë
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rToT™Ë
)

	)

370 
	#u_¡rToUTF32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rToUTF32
)

	)

371 
	#u_¡rToUTF32W™hSub
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rToUTF32W™hSub
)

	)

372 
	#u_¡rToUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rToUTF8
)

	)

373 
	#u_¡rToUTF8W™hSub
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rToUTF8W™hSub
)

	)

374 
	#u_¡rToUµ”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rToUµ”
)

	)

375 
	#u_¡rToWCS
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rToWCS
)

	)

376 
	#u_¡rÿ£cmp
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rÿ£cmp
)

	)

377 
	#u_¡rÿt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rÿt
)

	)

378 
	#u_¡rchr
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rchr
)

	)

379 
	#u_¡rchr32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rchr32
)

	)

380 
	#u_¡rcmp
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rcmp
)

	)

381 
	#u_¡rcmpCodePoštOrd”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rcmpCodePoštOrd”
)

	)

382 
	#u_¡rcmpFŞd
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rcmpFŞd
)

	)

383 
	#u_¡rıy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rıy
)

	)

384 
	#u_¡rc¥n
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡rc¥n
)

	)

385 
	#u_¡¾’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡¾’
)

	)

386 
	#u_¡ºÿ£cmp
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡ºÿ£cmp
)

	)

387 
	#u_¡ºÿt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡ºÿt
)

	)

388 
	#u_¡ºcmp
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡ºcmp
)

	)

389 
	#u_¡ºcmpCodePoštOrd”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡ºcmpCodePoštOrd”
)

	)

390 
	#u_¡ºıy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡ºıy
)

	)

391 
	#u_¡½brk
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡½brk
)

	)

392 
	#u_¡¼chr
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡¼chr
)

	)

393 
	#u_¡¼chr32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡¼chr32
)

	)

394 
	#u_¡¼¡r
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡¼¡r
)

	)

395 
	#u_¡r¥n
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡r¥n
)

	)

396 
	#u_¡r¡r
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡r¡r
)

	)

397 
	#u_¡¹ok_r
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_¡¹ok_r
)

	)

398 
	#u_‹rmš©eCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_‹rmš©eCh¬s
)

	)

399 
	#u_‹rmš©eUCh¬32s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_‹rmš©eUCh¬32s
)

	)

400 
	#u_‹rmš©eUCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_‹rmš©eUCh¬s
)

	)

401 
	#u_‹rmš©eWCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_‹rmš©eWCh¬s
)

	)

402 
	#u_tŞow”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_tŞow”
)

	)

403 
	#u_tÙ™Ë
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_tÙ™Ë
)

	)

404 
	#u_touµ”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_touµ”
)

	)

405 
	#u_ua¡rıy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ua¡rıy
)

	)

406 
	#u_ua¡ºıy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_ua¡ºıy
)

	)

407 
	#u_uÃsÿ³
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_uÃsÿ³
)

	)

408 
	#u_uÃsÿ³At
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_uÃsÿ³At
)

	)

409 
	#u_v”siÚFromSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_v”siÚFromSŒšg
)

	)

410 
	#u_v”siÚFromUSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_v”siÚFromUSŒšg
)

	)

411 
	#u_v”siÚToSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_v”siÚToSŒšg
)

	)

412 
	#u_vfÜm©Mes§ge
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_vfÜm©Mes§ge
)

	)

413 
	#u_vfÜm©Mes§geW™hE¼Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_vfÜm©Mes§geW™hE¼Ü
)

	)

414 
	#u_vårštf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_vårštf
)

	)

415 
	#u_vårštf_u
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_vårštf_u
)

	)

416 
	#u_vfsÿnf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_vfsÿnf
)

	)

417 
	#u_vfsÿnf_u
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_vfsÿnf_u
)

	)

418 
	#u_v·r£Mes§ge
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_v·r£Mes§ge
)

	)

419 
	#u_v·r£Mes§geW™hE¼Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_v·r£Mes§geW™hE¼Ü
)

	)

420 
	#u_v¢´štf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_v¢´štf
)

	)

421 
	#u_v¢´štf_u
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_v¢´štf_u
)

	)

422 
	#u_v¥rštf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_v¥rštf
)

	)

423 
	#u_v¥rštf_u
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_v¥rštf_u
)

	)

424 
	#u_vssÿnf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_vssÿnf
)

	)

425 
	#u_vssÿnf_u
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_vssÿnf_u
)

	)

426 
	#u_wr™eDiff
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_wr™eDiff
)

	)

427 
	#u_wr™eId’tiÿlLev–Run
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_wr™eId’tiÿlLev–Run
)

	)

428 
	#u_wr™eId’tiÿlLev–RunTwoCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u_wr™eId’tiÿlLev–RunTwoCh¬s
)

	)

429 
	#ubidi_addPrİ”tyS¹s
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_addPrİ”tyS¹s
)

	)

430 
	#ubidi_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_şo£
)

	)

431 
	#ubidi_couÁP¬ag¿phs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_couÁP¬ag¿phs
)

	)

432 
	#ubidi_couÁRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_couÁRuns
)

	)

433 
	#ubidi_g‘Ba£DœeùiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘Ba£DœeùiÚ
)

	)

434 
	#ubidi_g‘CÏss
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘CÏss
)

	)

435 
	#ubidi_g‘CÏssC®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘CÏssC®lback
)

	)

436 
	#ubidi_g‘Cu¡omizedCÏss
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘Cu¡omizedCÏss
)

	)

437 
	#ubidi_g‘DœeùiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘DœeùiÚ
)

	)

438 
	#ubidi_g‘JoššgGroup
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘JoššgGroup
)

	)

439 
	#ubidi_g‘JoššgTy³
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘JoššgTy³
)

	)

440 
	#ubidi_g‘L’gth
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘L’gth
)

	)

441 
	#ubidi_g‘Lev–At
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘Lev–At
)

	)

442 
	#ubidi_g‘Lev–s
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘Lev–s
)

	)

443 
	#ubidi_g‘LogiÿlIndex
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘LogiÿlIndex
)

	)

444 
	#ubidi_g‘LogiÿlM­
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘LogiÿlM­
)

	)

445 
	#ubidi_g‘LogiÿlRun
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘LogiÿlRun
)

	)

446 
	#ubidi_g‘MaxV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘MaxV®ue
)

	)

447 
	#ubidi_g‘MemÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘MemÜy
)

	)

448 
	#ubidi_g‘MœrÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘MœrÜ
)

	)

449 
	#ubidi_g‘P¬aLev–
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘P¬aLev–
)

	)

450 
	#ubidi_g‘P¬ag¿ph
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘P¬ag¿ph
)

	)

451 
	#ubidi_g‘P¬ag¿phByIndex
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘P¬ag¿phByIndex
)

	)

452 
	#ubidi_g‘Proûs£dL’gth
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘Proûs£dL’gth
)

	)

453 
	#ubidi_g‘ReÜd”šgMode
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘ReÜd”šgMode
)

	)

454 
	#ubidi_g‘ReÜd”šgO±iÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘ReÜd”šgO±iÚs
)

	)

455 
	#ubidi_g‘ResuÉL’gth
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘ResuÉL’gth
)

	)

456 
	#ubidi_g‘Runs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘Runs
)

	)

457 
	#ubidi_g‘SšgËtÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘SšgËtÚ
)

	)

458 
	#ubidi_g‘Text
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘Text
)

	)

459 
	#ubidi_g‘Visu®Index
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘Visu®Index
)

	)

460 
	#ubidi_g‘Visu®M­
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘Visu®M­
)

	)

461 
	#ubidi_g‘Visu®Run
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_g‘Visu®Run
)

	)

462 
	#ubidi_šv”tM­
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_šv”tM­
)

	)

463 
	#ubidi_isBidiCÚŒŞ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_isBidiCÚŒŞ
)

	)

464 
	#ubidi_isInv”£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_isInv”£
)

	)

465 
	#ubidi_isJošCÚŒŞ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_isJošCÚŒŞ
)

	)

466 
	#ubidi_isMœrÜed
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_isMœrÜed
)

	)

467 
	#ubidi_isOrd”P¬ag¿phsLTR
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_isOrd”P¬ag¿phsLTR
)

	)

468 
	#ubidi_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_İ’
)

	)

469 
	#ubidi_İ’Sized
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_İ’Sized
)

	)

470 
	#ubidi_Üd”P¬ag¿phsLTR
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_Üd”P¬ag¿phsLTR
)

	)

471 
	#ubidi_»Üd”Logiÿl
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_»Üd”Logiÿl
)

	)

472 
	#ubidi_»Üd”Visu®
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_»Üd”Visu®
)

	)

473 
	#ubidi_£tCÏssC®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_£tCÏssC®lback
)

	)

474 
	#ubidi_£tInv”£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_£tInv”£
)

	)

475 
	#ubidi_£tLše
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_£tLše
)

	)

476 
	#ubidi_£tP¬a
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_£tP¬a
)

	)

477 
	#ubidi_£tReÜd”šgMode
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_£tReÜd”šgMode
)

	)

478 
	#ubidi_£tReÜd”šgO±iÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_£tReÜd”šgO±iÚs
)

	)

479 
	#ubidi_wr™eReÜd”ed
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_wr™eReÜd”ed
)

	)

480 
	#ubidi_wr™eRev”£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubidi_wr™eRev”£
)

	)

481 
	#ublock_g‘Code
 
	`U_ICU_ENTRY_POINT_RENAME
(
ublock_g‘Code
)

	)

482 
	#ubrk_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_şo£
)

	)

483 
	#ubrk_couÁAvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_couÁAvaabË
)

	)

484 
	#ubrk_cu¼’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_cu¼’t
)

	)

485 
	#ubrk_fœ¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_fœ¡
)

	)

486 
	#ubrk_fŞlowšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_fŞlowšg
)

	)

487 
	#ubrk_g‘AvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_g‘AvaabË
)

	)

488 
	#ubrk_g‘LoÿËByTy³
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_g‘LoÿËByTy³
)

	)

489 
	#ubrk_g‘RuËStus
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_g‘RuËStus
)

	)

490 
	#ubrk_g‘RuËStusVec
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_g‘RuËStusVec
)

	)

491 
	#ubrk_isBound¬y
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_isBound¬y
)

	)

492 
	#ubrk_Ï¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_Ï¡
)

	)

493 
	#ubrk_Ãxt
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_Ãxt
)

	)

494 
	#ubrk_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_İ’
)

	)

495 
	#ubrk_İ’RuËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_İ’RuËs
)

	)

496 
	#ubrk_´eûdšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_´eûdšg
)

	)

497 
	#ubrk_´evious
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_´evious
)

	)

498 
	#ubrk_§ãClÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_§ãClÚe
)

	)

499 
	#ubrk_£tText
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_£tText
)

	)

500 
	#ubrk_£tUText
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_£tUText
)

	)

501 
	#ubrk_sw­
 
	`U_ICU_ENTRY_POINT_RENAME
(
ubrk_sw­
)

	)

502 
	#uÿl_add
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_add
)

	)

503 
	#uÿl_ş—r
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_ş—r
)

	)

504 
	#uÿl_ş—rF›ld
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_ş—rF›ld
)

	)

505 
	#uÿl_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_şÚe
)

	)

506 
	#uÿl_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_şo£
)

	)

507 
	#uÿl_couÁAvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_couÁAvaabË
)

	)

508 
	#uÿl_equiv®’tTo
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_equiv®’tTo
)

	)

509 
	#uÿl_g‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘
)

	)

510 
	#uÿl_g‘A‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘A‰ribu‹
)

	)

511 
	#uÿl_g‘AvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘AvaabË
)

	)

512 
	#uÿl_g‘CªÚiÿlTimeZÚeID
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘CªÚiÿlTimeZÚeID
)

	)

513 
	#uÿl_g‘DSTSavšgs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘DSTSavšgs
)

	)

514 
	#uÿl_g‘DayOfW“kTy³
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘DayOfW“kTy³
)

	)

515 
	#uÿl_g‘DeçuÉTimeZÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘DeçuÉTimeZÚe
)

	)

516 
	#uÿl_g‘G»gÜŸnChªge
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘G»gÜŸnChªge
)

	)

517 
	#uÿl_g‘KeywÜdV®uesFÜLoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘KeywÜdV®uesFÜLoÿË
)

	)

518 
	#uÿl_g‘Lim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘Lim™
)

	)

519 
	#uÿl_g‘LoÿËByTy³
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘LoÿËByTy³
)

	)

520 
	#uÿl_g‘Mlis
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘Mlis
)

	)

521 
	#uÿl_g‘Now
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘Now
)

	)

522 
	#uÿl_g‘TZD©aV”siÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘TZD©aV”siÚ
)

	)

523 
	#uÿl_g‘TimeZÚeDi¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘TimeZÚeDi¥ÏyName
)

	)

524 
	#uÿl_g‘Ty³
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘Ty³
)

	)

525 
	#uÿl_g‘W“k’dT¿ns™iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_g‘W“k’dT¿ns™iÚ
)

	)

526 
	#uÿl_šDaylightTime
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_šDaylightTime
)

	)

527 
	#uÿl_isS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_isS‘
)

	)

528 
	#uÿl_isW“k’d
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_isW“k’d
)

	)

529 
	#uÿl_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_İ’
)

	)

530 
	#uÿl_İ’CouÁryTimeZÚes
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_İ’CouÁryTimeZÚes
)

	)

531 
	#uÿl_İ’TimeZÚes
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_İ’TimeZÚes
)

	)

532 
	#uÿl_rŞl
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_rŞl
)

	)

533 
	#uÿl_£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_£t
)

	)

534 
	#uÿl_£tA‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_£tA‰ribu‹
)

	)

535 
	#uÿl_£tD©e
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_£tD©e
)

	)

536 
	#uÿl_£tD©eTime
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_£tD©eTime
)

	)

537 
	#uÿl_£tDeçuÉTimeZÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_£tDeçuÉTimeZÚe
)

	)

538 
	#uÿl_£tG»gÜŸnChªge
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_£tG»gÜŸnChªge
)

	)

539 
	#uÿl_£tMlis
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_£tMlis
)

	)

540 
	#uÿl_£tTimeZÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿl_£tTimeZÚe
)

	)

541 
	#uÿ£_addCa£Closu»
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_addCa£Closu»
)

	)

542 
	#uÿ£_addPrİ”tyS¹s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_addPrİ”tyS¹s
)

	)

543 
	#uÿ£_addSŒšgCa£Closu»
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_addSŒšgCa£Closu»
)

	)

544 
	#uÿ£_fŞd
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_fŞd
)

	)

545 
	#uÿ£_g‘Ca£LoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_g‘Ca£LoÿË
)

	)

546 
	#uÿ£_g‘SšgËtÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_g‘SšgËtÚ
)

	)

547 
	#uÿ£_g‘Ty³
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_g‘Ty³
)

	)

548 
	#uÿ£_g‘Ty³OrIgnÜabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_g‘Ty³OrIgnÜabË
)

	)

549 
	#uÿ£_hasBš¬yPrİ”ty
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_hasBš¬yPrİ”ty
)

	)

550 
	#uÿ£_isCa£S’s™ive
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_isCa£S’s™ive
)

	)

551 
	#uÿ£_isSoáDÙ‹d
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_isSoáDÙ‹d
)

	)

552 
	#uÿ£_toFuÎFŞdšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_toFuÎFŞdšg
)

	)

553 
	#uÿ£_toFuÎLow”
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_toFuÎLow”
)

	)

554 
	#uÿ£_toFuÎT™Ë
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_toFuÎT™Ë
)

	)

555 
	#uÿ£_toFuÎUµ”
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_toFuÎUµ”
)

	)

556 
	#uÿ£_tŞow”
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_tŞow”
)

	)

557 
	#uÿ£_tÙ™Ë
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_tÙ™Ë
)

	)

558 
	#uÿ£_touµ”
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£_touµ”
)

	)

559 
	#uÿ£m­_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_şo£
)

	)

560 
	#uÿ£m­_g‘B»akI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_g‘B»akI‹¿tÜ
)

	)

561 
	#uÿ£m­_g‘LoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_g‘LoÿË
)

	)

562 
	#uÿ£m­_g‘O±iÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_g‘O±iÚs
)

	)

563 
	#uÿ£m­_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_İ’
)

	)

564 
	#uÿ£m­_£tB»akI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_£tB»akI‹¿tÜ
)

	)

565 
	#uÿ£m­_£tLoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_£tLoÿË
)

	)

566 
	#uÿ£m­_£tO±iÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_£tO±iÚs
)

	)

567 
	#uÿ£m­_toT™Ë
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_toT™Ë
)

	)

568 
	#uÿ£m­_utf8FŞdCa£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_utf8FŞdCa£
)

	)

569 
	#uÿ£m­_utf8ToLow”
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_utf8ToLow”
)

	)

570 
	#uÿ£m­_utf8ToT™Ë
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_utf8ToT™Ë
)

	)

571 
	#uÿ£m­_utf8ToUµ”
 
	`U_ICU_ENTRY_POINT_RENAME
(
uÿ£m­_utf8ToUµ”
)

	)

572 
	#ucd_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucd_şo£
)

	)

573 
	#ucd_æushCache
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucd_æushCache
)

	)

574 
	#ucd_ä“Cache
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucd_ä“Cache
)

	)

575 
	#ucd_g‘CŞÏtÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucd_g‘CŞÏtÜ
)

	)

576 
	#ucd_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucd_İ’
)

	)

577 
	#uch¬_addPrİ”tyS¹s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uch¬_addPrİ”tyS¹s
)

	)

578 
	#uch¬_sw­Names
 
	`U_ICU_ENTRY_POINT_RENAME
(
uch¬_sw­Names
)

	)

579 
	#uşn_ş—nupOÃ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uşn_ş—nupOÃ
)

	)

580 
	#uşn_commÚ_»gi¡”CËªup
 
	`U_ICU_ENTRY_POINT_RENAME
(
uşn_commÚ_»gi¡”CËªup
)

	)

581 
	#uşn_i18n_»gi¡”CËªup
 
	`U_ICU_ENTRY_POINT_RENAME
(
uşn_i18n_»gi¡”CËªup
)

	)

582 
	#uşn_io_»gi¡”CËªup
 
	`U_ICU_ENTRY_POINT_RENAME
(
uşn_io_»gi¡”CËªup
)

	)

583 
	#uşn_lib_ş—nup
 
	`U_ICU_ENTRY_POINT_RENAME
(
uşn_lib_ş—nup
)

	)

584 
	#uşn_»gi¡”CËªup
 
	`U_ICU_ENTRY_POINT_RENAME
(
uşn_»gi¡”CËªup
)

	)

585 
	#uúv_MBCSFromUCh¬32
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_MBCSFromUCh¬32
)

	)

586 
	#uúv_MBCSFromUnicodeW™hOff£ts
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_MBCSFromUnicodeW™hOff£ts
)

	)

587 
	#uúv_MBCSG‘F‹»dUnicodeS‘FÜUnicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_MBCSG‘F‹»dUnicodeS‘FÜUnicode
)

	)

588 
	#uúv_MBCSG‘Ty³
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_MBCSG‘Ty³
)

	)

589 
	#uúv_MBCSG‘UnicodeS‘FÜUnicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_MBCSG‘UnicodeS‘FÜUnicode
)

	)

590 
	#uúv_MBCSIsL—dBy‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_MBCSIsL—dBy‹
)

	)

591 
	#uúv_MBCSSim¶eG‘NextUCh¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_MBCSSim¶eG‘NextUCh¬
)

	)

592 
	#uúv_MBCSToUnicodeW™hOff£ts
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_MBCSToUnicodeW™hOff£ts
)

	)

593 
	#uúv_bld_couÁAvaabËCÚv”‹rs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_bld_couÁAvaabËCÚv”‹rs
)

	)

594 
	#uúv_bld_g‘AvaabËCÚv”‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_bld_g‘AvaabËCÚv”‹r
)

	)

595 
	#uúv_ÿnC»©eCÚv”‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_ÿnC»©eCÚv”‹r
)

	)

596 
	#uúv_cbFromUWr™eBy‹s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_cbFromUWr™eBy‹s
)

	)

597 
	#uúv_cbFromUWr™eSub
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_cbFromUWr™eSub
)

	)

598 
	#uúv_cbFromUWr™eUCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_cbFromUWr™eUCh¬s
)

	)

599 
	#uúv_cbToUWr™eSub
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_cbToUWr™eSub
)

	)

600 
	#uúv_cbToUWr™eUCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_cbToUWr™eUCh¬s
)

	)

601 
	#uúv_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_şo£
)

	)

602 
	#uúv_com·»Names
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_com·»Names
)

	)

603 
	#uúv_cÚv”t
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_cÚv”t
)

	)

604 
	#uúv_cÚv”tEx
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_cÚv”tEx
)

	)

605 
	#uúv_couÁAlŸ£s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_couÁAlŸ£s
)

	)

606 
	#uúv_couÁAvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_couÁAvaabË
)

	)

607 
	#uúv_couÁSnd¬ds
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_couÁSnd¬ds
)

	)

608 
	#uúv_ü—‹AlgÜ™hmicCÚv”‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_ü—‹AlgÜ™hmicCÚv”‹r
)

	)

609 
	#uúv_ü—‹CÚv”‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_ü—‹CÚv”‹r
)

	)

610 
	#uúv_ü—‹CÚv”‹rFromPackage
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_ü—‹CÚv”‹rFromPackage
)

	)

611 
	#uúv_ü—‹CÚv”‹rFromSh¬edD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_ü—‹CÚv”‹rFromSh¬edD©a
)

	)

612 
	#uúv_d‘eùUnicodeSigÇtu»
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_d‘eùUnicodeSigÇtu»
)

	)

613 
	#uúv_extCÚtšueM©chFromU
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_extCÚtšueM©chFromU
)

	)

614 
	#uúv_extCÚtšueM©chToU
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_extCÚtšueM©chToU
)

	)

615 
	#uúv_extG‘UnicodeS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_extG‘UnicodeS‘
)

	)

616 
	#uúv_extIn™ŸlM©chFromU
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_extIn™ŸlM©chFromU
)

	)

617 
	#uúv_extIn™ŸlM©chToU
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_extIn™ŸlM©chToU
)

	)

618 
	#uúv_extSim¶eM©chFromU
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_extSim¶eM©chFromU
)

	)

619 
	#uúv_extSim¶eM©chToU
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_extSim¶eM©chToU
)

	)

620 
	#uúv_fixFeS•¬©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_fixFeS•¬©Ü
)

	)

621 
	#uúv_æushCache
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_æushCache
)

	)

622 
	#uúv_äomAlgÜ™hmic
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_äomAlgÜ™hmic
)

	)

623 
	#uúv_äomUCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_äomUCh¬s
)

	)

624 
	#uúv_äomUCouÁP’dšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_äomUCouÁP’dšg
)

	)

625 
	#uúv_äomUWr™eBy‹s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_äomUWr™eBy‹s
)

	)

626 
	#uúv_äomUnicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_äomUnicode
)

	)

627 
	#uúv_äomUnicode_UTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_äomUnicode_UTF8
)

	)

628 
	#uúv_äomUnicode_UTF8_OFFSETS_LOGIC
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_äomUnicode_UTF8_OFFSETS_LOGIC
)

	)

629 
	#uúv_g‘AlŸs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘AlŸs
)

	)

630 
	#uúv_g‘AlŸ£s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘AlŸ£s
)

	)

631 
	#uúv_g‘AvaabËName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘AvaabËName
)

	)

632 
	#uúv_g‘CCSID
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘CCSID
)

	)

633 
	#uúv_g‘CªÚiÿlName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘CªÚiÿlName
)

	)

634 
	#uúv_g‘Com¶‘eUnicodeS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘Com¶‘eUnicodeS‘
)

	)

635 
	#uúv_g‘DeçuÉName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘DeçuÉName
)

	)

636 
	#uúv_g‘Di¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘Di¥ÏyName
)

	)

637 
	#uúv_g‘FromUC®lBack
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘FromUC®lBack
)

	)

638 
	#uúv_g‘Inv®idCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘Inv®idCh¬s
)

	)

639 
	#uúv_g‘Inv®idUCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘Inv®idUCh¬s
)

	)

640 
	#uúv_g‘MaxCh¬Size
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘MaxCh¬Size
)

	)

641 
	#uúv_g‘MšCh¬Size
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘MšCh¬Size
)

	)

642 
	#uúv_g‘Name
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘Name
)

	)

643 
	#uúv_g‘NextUCh¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘NextUCh¬
)

	)

644 
	#uúv_g‘NÚSu¼og©eUnicodeS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘NÚSu¼og©eUnicodeS‘
)

	)

645 
	#uúv_g‘PÏtfÜm
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘PÏtfÜm
)

	)

646 
	#uúv_g‘Snd¬d
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘Snd¬d
)

	)

647 
	#uúv_g‘Snd¬dName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘Snd¬dName
)

	)

648 
	#uúv_g‘S¹”s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘S¹”s
)

	)

649 
	#uúv_g‘Sub¡Ch¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘Sub¡Ch¬s
)

	)

650 
	#uúv_g‘ToUC®lBack
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘ToUC®lBack
)

	)

651 
	#uúv_g‘Ty³
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘Ty³
)

	)

652 
	#uúv_g‘UnicodeS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_g‘UnicodeS‘
)

	)

653 
	#uúv_šüem’tRefCouÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_šüem’tRefCouÁ
)

	)

654 
	#uúv_io_couÁKnownCÚv”‹rs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_io_couÁKnownCÚv”‹rs
)

	)

655 
	#uúv_io_g‘CÚv”‹rName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_io_g‘CÚv”‹rName
)

	)

656 
	#uúv_io_¡rASCIIFÜCom·»
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_io_¡rASCIIFÜCom·»
)

	)

657 
	#uúv_io_¡rEBCDICFÜCom·»
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_io_¡rEBCDICFÜCom·»
)

	)

658 
	#uúv_isAmbiguous
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_isAmbiguous
)

	)

659 
	#uúv_lßd
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_lßd
)

	)

660 
	#uúv_lßdSh¬edD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_lßdSh¬edD©a
)

	)

661 
	#uúv_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_İ’
)

	)

662 
	#uúv_İ’AÎNames
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_İ’AÎNames
)

	)

663 
	#uúv_İ’CCSID
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_İ’CCSID
)

	)

664 
	#uúv_İ’Package
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_İ’Package
)

	)

665 
	#uúv_İ’Snd¬dNames
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_İ’Snd¬dNames
)

	)

666 
	#uúv_İ’U
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_İ’U
)

	)

667 
	#uúv_»£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_»£t
)

	)

668 
	#uúv_»£tFromUnicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_»£tFromUnicode
)

	)

669 
	#uúv_»£tToUnicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_»£tToUnicode
)

	)

670 
	#uúv_§ãClÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_§ãClÚe
)

	)

671 
	#uúv_£tDeçuÉName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_£tDeçuÉName
)

	)

672 
	#uúv_£tF®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_£tF®lback
)

	)

673 
	#uúv_£tFromUC®lBack
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_£tFromUC®lBack
)

	)

674 
	#uúv_£tSub¡Ch¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_£tSub¡Ch¬s
)

	)

675 
	#uúv_£tSub¡SŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_£tSub¡SŒšg
)

	)

676 
	#uúv_£tToUC®lBack
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_£tToUC®lBack
)

	)

677 
	#uúv_sw­
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_sw­
)

	)

678 
	#uúv_sw­AlŸ£s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_sw­AlŸ£s
)

	)

679 
	#uúv_toAlgÜ™hmic
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_toAlgÜ™hmic
)

	)

680 
	#uúv_toUCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_toUCh¬s
)

	)

681 
	#uúv_toUCouÁP’dšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_toUCouÁP’dšg
)

	)

682 
	#uúv_toUWr™eCodePošt
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_toUWr™eCodePošt
)

	)

683 
	#uúv_toUWr™eUCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_toUWr™eUCh¬s
)

	)

684 
	#uúv_toUnicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_toUnicode
)

	)

685 
	#uúv_uÆßd
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_uÆßd
)

	)

686 
	#uúv_uÆßdSh¬edD©aIfR—dy
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_uÆßdSh¬edD©aIfR—dy
)

	)

687 
	#uúv_u£sF®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv_u£sF®lback
)

	)

688 
	#uúv£l_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv£l_şo£
)

	)

689 
	#uúv£l_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv£l_İ’
)

	)

690 
	#uúv£l_İ’FromS”Ÿlized
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv£l_İ’FromS”Ÿlized
)

	)

691 
	#uúv£l_£ËùFÜSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv£l_£ËùFÜSŒšg
)

	)

692 
	#uúv£l_£ËùFÜUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv£l_£ËùFÜUTF8
)

	)

693 
	#uúv£l_£rŸlize
 
	`U_ICU_ENTRY_POINT_RENAME
(
uúv£l_£rŸlize
)

	)

694 
	#ucŞ_®locWeights
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_®locWeights
)

	)

695 
	#ucŞ_as£mbËTaÜšgTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_as£mbËTaÜšgTabË
)

	)

696 
	#ucŞ_budP”mutiÚTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_budP”mutiÚTabË
)

	)

697 
	#ucŞ_ÿlcSÜtKey
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_ÿlcSÜtKey
)

	)

698 
	#ucŞ_ÿlcSÜtKeySim¶eT”tŸry
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_ÿlcSÜtKeySim¶eT”tŸry
)

	)

699 
	#ucŞ_şÚeBš¬y
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_şÚeBš¬y
)

	)

700 
	#ucŞ_şÚeRuËD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_şÚeRuËD©a
)

	)

701 
	#ucŞ_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_şo£
)

	)

702 
	#ucŞ_şo£EËm’ts
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_şo£EËm’ts
)

	)

703 
	#ucŞ_couÁAvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_couÁAvaabË
)

	)

704 
	#ucŞ_ü—‹EËm’ts
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_ü—‹EËm’ts
)

	)

705 
	#ucŞ_doCE
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_doCE
)

	)

706 
	#ucŞ_equ®
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_equ®
)

	)

707 
	#ucŞ_equ®s
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_equ®s
)

	)

708 
	#ucŞ_fšdReÜd”šgEÁry
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_fšdReÜd”šgEÁry
)

	)

709 
	#ucŞ_fÜûHªIm¶ic™
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_fÜûHªIm¶ic™
)

	)

710 
	#ucŞ_fÜg‘UCA
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_fÜg‘UCA
)

	)

711 
	#ucŞ_ä“Off£tBufãr
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_ä“Off£tBufãr
)

	)

712 
	#ucŞ_g‘A‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘A‰ribu‹
)

	)

713 
	#ucŞ_g‘A‰ribu‹OrDeçuÉ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘A‰ribu‹OrDeçuÉ
)

	)

714 
	#ucŞ_g‘AvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘AvaabË
)

	)

715 
	#ucŞ_g‘Bound
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘Bound
)

	)

716 
	#ucŞ_g‘CESŒ’gthDifã»nû
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘CESŒ’gthDifã»nû
)

	)

717 
	#ucŞ_g‘CÚŒaùiÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘CÚŒaùiÚs
)

	)

718 
	#ucŞ_g‘CÚŒaùiÚsAndEx·nsiÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘CÚŒaùiÚsAndEx·nsiÚs
)

	)

719 
	#ucŞ_g‘Di¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘Di¥ÏyName
)

	)

720 
	#ucŞ_g‘Fœ¡CE
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘Fœ¡CE
)

	)

721 
	#ucŞ_g‘FunùiÚ®Equiv®’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘FunùiÚ®Equiv®’t
)

	)

722 
	#ucŞ_g‘KeywÜdV®ues
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘KeywÜdV®ues
)

	)

723 
	#ucŞ_g‘KeywÜdV®uesFÜLoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘KeywÜdV®uesFÜLoÿË
)

	)

724 
	#ucŞ_g‘KeywÜds
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘KeywÜds
)

	)

725 
	#ucŞ_g‘L—dBy‹sFÜReÜd”Code
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘L—dBy‹sFÜReÜd”Code
)

	)

726 
	#ucŞ_g‘LoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘LoÿË
)

	)

727 
	#ucŞ_g‘LoÿËByTy³
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘LoÿËByTy³
)

	)

728 
	#ucŞ_g‘MaxEx·nsiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘MaxEx·nsiÚ
)

	)

729 
	#ucŞ_g‘NextCE
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘NextCE
)

	)

730 
	#ucŞ_g‘Off£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘Off£t
)

	)

731 
	#ucŞ_g‘P»vCE
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘P»vCE
)

	)

732 
	#ucŞ_g‘ReÜd”Codes
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘ReÜd”Codes
)

	)

733 
	#ucŞ_g‘ReÜd”CodesFÜL—dBy‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘ReÜd”CodesFÜL—dBy‹
)

	)

734 
	#ucŞ_g‘RuËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘RuËs
)

	)

735 
	#ucŞ_g‘RuËsEx
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘RuËsEx
)

	)

736 
	#ucŞ_g‘ShÜtDefš™iÚSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘ShÜtDefš™iÚSŒšg
)

	)

737 
	#ucŞ_g‘SÜtKey
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘SÜtKey
)

	)

738 
	#ucŞ_g‘SÜtKeySize
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘SÜtKeySize
)

	)

739 
	#ucŞ_g‘SÜtKeyW™hAÎoÿtiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘SÜtKeyW™hAÎoÿtiÚ
)

	)

740 
	#ucŞ_g‘SŒ’gth
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘SŒ’gth
)

	)

741 
	#ucŞ_g‘TaÜedS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘TaÜedS‘
)

	)

742 
	#ucŞ_g‘UCAV”siÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘UCAV”siÚ
)

	)

743 
	#ucŞ_g‘Un§ãS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘Un§ãS‘
)

	)

744 
	#ucŞ_g‘V¬ŸbËTİ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘V¬ŸbËTİ
)

	)

745 
	#ucŞ_g‘V”siÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g‘V”siÚ
)

	)

746 
	#ucŞ_g»©”
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g»©”
)

	)

747 
	#ucŞ_g»©”OrEqu®
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_g»©”OrEqu®
)

	)

748 
	#ucŞ_š™Bufãrs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_š™Bufãrs
)

	)

749 
	#ucŞ_š™CŞÏtÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_š™CŞÏtÜ
)

	)

750 
	#ucŞ_š™Inv”£UCA
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_š™Inv”£UCA
)

	)

751 
	#ucŞ_š™UCA
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_š™UCA
)

	)

752 
	#ucŞ_šv_g‘NextCE
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_šv_g‘NextCE
)

	)

753 
	#ucŞ_šv_g‘P»vCE
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_šv_g‘P»vCE
)

	)

754 
	#ucŞ_isTaÜed
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_isTaÜed
)

	)

755 
	#ucŞ_keyHashCode
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_keyHashCode
)

	)

756 
	#ucŞ_looksLikeCŞÏtiÚBš¬y
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_looksLikeCŞÏtiÚBš¬y
)

	)

757 
	#ucŞ_m”geSÜtkeys
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_m”geSÜtkeys
)

	)

758 
	#ucŞ_Ãxt
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_Ãxt
)

	)

759 
	#ucŞ_ÃxtProûs£d
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_ÃxtProûs£d
)

	)

760 
	#ucŞ_ÃxtSÜtKeyP¬t
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_ÃxtSÜtKeyP¬t
)

	)

761 
	#ucŞ_ÃxtWeight
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_ÃxtWeight
)

	)

762 
	#ucŞ_nÜm®izeShÜtDefš™iÚSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_nÜm®izeShÜtDefš™iÚSŒšg
)

	)

763 
	#ucŞ_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_İ’
)

	)

764 
	#ucŞ_İ’AvaabËLoÿËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_İ’AvaabËLoÿËs
)

	)

765 
	#ucŞ_İ’Bš¬y
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_İ’Bš¬y
)

	)

766 
	#ucŞ_İ’EËm’ts
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_İ’EËm’ts
)

	)

767 
	#ucŞ_İ’FromShÜtSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_İ’FromShÜtSŒšg
)

	)

768 
	#ucŞ_İ’RuËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_İ’RuËs
)

	)

769 
	#ucŞ_İ’RuËsFÜImpÜt
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_İ’RuËsFÜImpÜt
)

	)

770 
	#ucŞ_İ’_š‹º®
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_İ’_š‹º®
)

	)

771 
	#ucŞ_´•¬eShÜtSŒšgO³n
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_´•¬eShÜtSŒšgO³n
)

	)

772 
	#ucŞ_´evious
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_´evious
)

	)

773 
	#ucŞ_´eviousProûs£d
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_´eviousProûs£d
)

	)

774 
	#ucŞ_´im¬yOrd”
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_´im¬yOrd”
)

	)

775 
	#ucŞ_´v_g‘S³cŸlCE
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_´v_g‘S³cŸlCE
)

	)

776 
	#ucŞ_´v_g‘S³cŸlP»vCE
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_´v_g‘S³cŸlP»vCE
)

	)

777 
	#ucŞ_»£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_»£t
)

	)

778 
	#ucŞ_»¡ÜeV¬ŸbËTİ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_»¡ÜeV¬ŸbËTİ
)

	)

779 
	#ucŞ_§ãClÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_§ãClÚe
)

	)

780 
	#ucŞ_£cÚd¬yOrd”
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_£cÚd¬yOrd”
)

	)

781 
	#ucŞ_£tA‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_£tA‰ribu‹
)

	)

782 
	#ucŞ_£tOff£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_£tOff£t
)

	)

783 
	#ucŞ_£tO±iÚsFromH—d”
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_£tO±iÚsFromH—d”
)

	)

784 
	#ucŞ_£tReÜd”Codes
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_£tReÜd”Codes
)

	)

785 
	#ucŞ_£tReqV®idLoÿËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_£tReqV®idLoÿËs
)

	)

786 
	#ucŞ_£tSŒ’gth
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_£tSŒ’gth
)

	)

787 
	#ucŞ_£tText
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_£tText
)

	)

788 
	#ucŞ_£tV¬ŸbËTİ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_£tV¬ŸbËTİ
)

	)

789 
	#ucŞ_¡rcŞl
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_¡rcŞl
)

	)

790 
	#ucŞ_¡rcŞlI‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_¡rcŞlI‹r
)

	)

791 
	#ucŞ_sw­
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_sw­
)

	)

792 
	#ucŞ_sw­Bš¬y
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_sw­Bš¬y
)

	)

793 
	#ucŞ_sw­Inv”£UCA
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_sw­Inv”£UCA
)

	)

794 
	#ucŞ_‹¹ŸryOrd”
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_‹¹ŸryOrd”
)

	)

795 
	#ucŞ_tok_as£mbËTok’Li¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_tok_as£mbËTok’Li¡
)

	)

796 
	#ucŞ_tok_şo£Tok’Li¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_tok_şo£Tok’Li¡
)

	)

797 
	#ucŞ_tok_g‘NextArgum’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_tok_g‘NextArgum’t
)

	)

798 
	#ucŞ_tok_g‘RuËsFromBundË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_tok_g‘RuËsFromBundË
)

	)

799 
	#ucŞ_tok_š™Tok’Li¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_tok_š™Tok’Li¡
)

	)

800 
	#ucŞ_tok_·r£NextTok’
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_tok_·r£NextTok’
)

	)

801 
	#ucŞ_upd©eIÁ”ÇlS‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucŞ_upd©eIÁ”ÇlS‹
)

	)

802 
	#ucsd‘_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_şo£
)

	)

803 
	#ucsd‘_d‘eù
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_d‘eù
)

	)

804 
	#ucsd‘_d‘eùAÎ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_d‘eùAÎ
)

	)

805 
	#ucsd‘_’abËIÅutF‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_’abËIÅutF‹r
)

	)

806 
	#ucsd‘_g‘AÎD‘eùabËCh¬£ts
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_g‘AÎD‘eùabËCh¬£ts
)

	)

807 
	#ucsd‘_g‘CÚfid’û
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_g‘CÚfid’û
)

	)

808 
	#ucsd‘_g‘Lªguage
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_g‘Lªguage
)

	)

809 
	#ucsd‘_g‘Name
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_g‘Name
)

	)

810 
	#ucsd‘_g‘UCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_g‘UCh¬s
)

	)

811 
	#ucsd‘_isIÅutF‹rEÇbËd
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_isIÅutF‹rEÇbËd
)

	)

812 
	#ucsd‘_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_İ’
)

	)

813 
	#ucsd‘_£tDeş¬edEncodšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_£tDeş¬edEncodšg
)

	)

814 
	#ucsd‘_£tText
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucsd‘_£tText
)

	)

815 
	#ucu¼_couÁCu¼’c›s
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucu¼_couÁCu¼’c›s
)

	)

816 
	#ucu¼_fÜLoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucu¼_fÜLoÿË
)

	)

817 
	#ucu¼_fÜLoÿËAndD©e
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucu¼_fÜLoÿËAndD©e
)

	)

818 
	#ucu¼_g‘DeçuÉF¿ùiÚDig™s
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucu¼_g‘DeçuÉF¿ùiÚDig™s
)

	)

819 
	#ucu¼_g‘KeywÜdV®uesFÜLoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucu¼_g‘KeywÜdV®uesFÜLoÿË
)

	)

820 
	#ucu¼_g‘Name
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucu¼_g‘Name
)

	)

821 
	#ucu¼_g‘Plu¿lName
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucu¼_g‘Plu¿lName
)

	)

822 
	#ucu¼_g‘RoundšgInüem’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucu¼_g‘RoundšgInüem’t
)

	)

823 
	#ucu¼_İ’ISOCu¼’c›s
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucu¼_İ’ISOCu¼’c›s
)

	)

824 
	#ucu¼_»gi¡”
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucu¼_»gi¡”
)

	)

825 
	#ucu¼_uÄegi¡”
 
	`U_ICU_ENTRY_POINT_RENAME
(
ucu¼_uÄegi¡”
)

	)

826 
	#ud©_­¶yP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_­¶yP©‹º
)

	)

827 
	#ud©_­¶yP©‹ºR–©ive
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_­¶yP©‹ºR–©ive
)

	)

828 
	#ud©_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_şÚe
)

	)

829 
	#ud©_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_şo£
)

	)

830 
	#ud©_couÁAvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_couÁAvaabË
)

	)

831 
	#ud©_couÁSymbŞs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_couÁSymbŞs
)

	)

832 
	#ud©_fÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_fÜm©
)

	)

833 
	#ud©_g‘2Dig™Y—rS¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_g‘2Dig™Y—rS¹
)

	)

834 
	#ud©_g‘AvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_g‘AvaabË
)

	)

835 
	#ud©_g‘C®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_g‘C®’d¬
)

	)

836 
	#ud©_g‘LoÿËByTy³
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_g‘LoÿËByTy³
)

	)

837 
	#ud©_g‘Numb”FÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_g‘Numb”FÜm©
)

	)

838 
	#ud©_g‘SymbŞs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_g‘SymbŞs
)

	)

839 
	#ud©_isL’›Á
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_isL’›Á
)

	)

840 
	#ud©_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_İ’
)

	)

841 
	#ud©_·r£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_·r£
)

	)

842 
	#ud©_·r£C®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_·r£C®’d¬
)

	)

843 
	#ud©_£t2Dig™Y—rS¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_£t2Dig™Y—rS¹
)

	)

844 
	#ud©_£tC®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_£tC®’d¬
)

	)

845 
	#ud©_£tL’›Á
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_£tL’›Á
)

	)

846 
	#ud©_£tNumb”FÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_£tNumb”FÜm©
)

	)

847 
	#ud©_£tSymbŞs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_£tSymbŞs
)

	)

848 
	#ud©_toC®’d¬D©eF›ld
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_toC®’d¬D©eF›ld
)

	)

849 
	#ud©_toP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_toP©‹º
)

	)

850 
	#ud©_toP©‹ºR–©iveD©e
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_toP©‹ºR–©iveD©e
)

	)

851 
	#ud©_toP©‹ºR–©iveTime
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©_toP©‹ºR–©iveTime
)

	)

852 
	#ud©a_checkCommÚD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_checkCommÚD©a
)

	)

853 
	#ud©a_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_şo£
)

	)

854 
	#ud©a_şo£Sw­³r
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_şo£Sw­³r
)

	)

855 
	#ud©a_g‘H—d”Size
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_g‘H—d”Size
)

	)

856 
	#ud©a_g‘Info
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_g‘Info
)

	)

857 
	#ud©a_g‘InfoSize
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_g‘InfoSize
)

	)

858 
	#ud©a_g‘L’gth
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_g‘L’gth
)

	)

859 
	#ud©a_g‘MemÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_g‘MemÜy
)

	)

860 
	#ud©a_g‘RawMemÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_g‘RawMemÜy
)

	)

861 
	#ud©a_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_İ’
)

	)

862 
	#ud©a_İ’Choiû
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_İ’Choiû
)

	)

863 
	#ud©a_İ’Sw­³r
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_İ’Sw­³r
)

	)

864 
	#ud©a_İ’Sw­³rFÜIÅutD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_İ’Sw­³rFÜIÅutD©a
)

	)

865 
	#ud©a_´štE¼Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_´štE¼Ü
)

	)

866 
	#ud©a_»adIÁ16
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_»adIÁ16
)

	)

867 
	#ud©a_»adIÁ32
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_»adIÁ32
)

	)

868 
	#ud©a_£tAµD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_£tAµD©a
)

	)

869 
	#ud©a_£tCommÚD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_£tCommÚD©a
)

	)

870 
	#ud©a_£tFeAcûss
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_£tFeAcûss
)

	)

871 
	#ud©a_sw­D©aH—d”
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_sw­D©aH—d”
)

	)

872 
	#ud©a_sw­InvSŒšgBlock
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©a_sw­InvSŒšgBlock
)

	)

873 
	#ud©pg_addP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_addP©‹º
)

	)

874 
	#ud©pg_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_şÚe
)

	)

875 
	#ud©pg_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_şo£
)

	)

876 
	#ud©pg_g‘Aµ’dI‹mFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_g‘Aµ’dI‹mFÜm©
)

	)

877 
	#ud©pg_g‘Aµ’dI‹mName
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_g‘Aµ’dI‹mName
)

	)

878 
	#ud©pg_g‘Ba£Sk–‘Ú
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_g‘Ba£Sk–‘Ú
)

	)

879 
	#ud©pg_g‘Be¡P©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_g‘Be¡P©‹º
)

	)

880 
	#ud©pg_g‘Be¡P©‹ºW™hO±iÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_g‘Be¡P©‹ºW™hO±iÚs
)

	)

881 
	#ud©pg_g‘D©eTimeFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_g‘D©eTimeFÜm©
)

	)

882 
	#ud©pg_g‘Decim®
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_g‘Decim®
)

	)

883 
	#ud©pg_g‘P©‹ºFÜSk–‘Ú
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_g‘P©‹ºFÜSk–‘Ú
)

	)

884 
	#ud©pg_g‘Sk–‘Ú
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_g‘Sk–‘Ú
)

	)

885 
	#ud©pg_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_İ’
)

	)

886 
	#ud©pg_İ’Ba£Sk–‘Ús
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_İ’Ba£Sk–‘Ús
)

	)

887 
	#ud©pg_İ’Em±y
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_İ’Em±y
)

	)

888 
	#ud©pg_İ’Sk–‘Ús
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_İ’Sk–‘Ús
)

	)

889 
	#ud©pg_»¶aûF›ldTy³s
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_»¶aûF›ldTy³s
)

	)

890 
	#ud©pg_»¶aûF›ldTy³sW™hO±iÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_»¶aûF›ldTy³sW™hO±iÚs
)

	)

891 
	#ud©pg_£tAµ’dI‹mFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_£tAµ’dI‹mFÜm©
)

	)

892 
	#ud©pg_£tAµ’dI‹mName
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_£tAµ’dI‹mName
)

	)

893 
	#ud©pg_£tD©eTimeFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_£tD©eTimeFÜm©
)

	)

894 
	#ud©pg_£tDecim®
 
	`U_ICU_ENTRY_POINT_RENAME
(
ud©pg_£tDecim®
)

	)

895 
	#u’um_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u’um_şo£
)

	)

896 
	#u’um_couÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u’um_couÁ
)

	)

897 
	#u’um_Ãxt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u’um_Ãxt
)

	)

898 
	#u’um_ÃxtDeçuÉ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u’um_ÃxtDeçuÉ
)

	)

899 
	#u’um_İ’Ch¬SŒšgsEnum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u’um_İ’Ch¬SŒšgsEnum”©iÚ
)

	)

900 
	#u’um_İ’FromSŒšgEnum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u’um_İ’FromSŒšgEnum”©iÚ
)

	)

901 
	#u’um_»£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u’um_»£t
)

	)

902 
	#u’um_uÃxt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u’um_uÃxt
)

	)

903 
	#u’um_uÃxtDeçuÉ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u’um_uÃxtDeçuÉ
)

	)

904 
	#ufe_şo£_Œª¦™
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufe_şo£_Œª¦™
)

	)

905 
	#ufe_fl_uch¬_bufãr
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufe_fl_uch¬_bufãr
)

	)

906 
	#ufe_æush_io
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufe_æush_io
)

	)

907 
	#ufe_æush_Œª¦™
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufe_æush_Œª¦™
)

	)

908 
	#ufe_g‘ch
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufe_g‘ch
)

	)

909 
	#ufe_g‘ch32
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufe_g‘ch32
)

	)

910 
	#ufmt_64tou
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufmt_64tou
)

	)

911 
	#ufmt_deçuÉCPToUnicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufmt_deçuÉCPToUnicode
)

	)

912 
	#ufmt_dig™v®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufmt_dig™v®ue
)

	)

913 
	#ufmt_isdig™
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufmt_isdig™
)

	)

914 
	#ufmt_±ou
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufmt_±ou
)

	)

915 
	#ufmt_uto64
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufmt_uto64
)

	)

916 
	#ufmt_utİ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ufmt_utİ
)

	)

917 
	#uhash_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_şo£
)

	)

918 
	#uhash_com·»Ca£ËssUnicodeSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_com·»Ca£ËssUnicodeSŒšg
)

	)

919 
	#uhash_com·»Ch¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_com·»Ch¬s
)

	)

920 
	#uhash_com·»ICh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_com·»ICh¬s
)

	)

921 
	#uhash_com·»LÚg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_com·»LÚg
)

	)

922 
	#uhash_com·»UCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_com·»UCh¬s
)

	)

923 
	#uhash_com·»UnicodeSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_com·»UnicodeSŒšg
)

	)

924 
	#uhash_couÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_couÁ
)

	)

925 
	#uhash_d–‘eHashbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_d–‘eHashbË
)

	)

926 
	#uhash_d–‘eUObjeù
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_d–‘eUObjeù
)

	)

927 
	#uhash_d–‘eUnicodeSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_d–‘eUnicodeSŒšg
)

	)

928 
	#uhash_equ®s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_equ®s
)

	)

929 
	#uhash_fšd
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_fšd
)

	)

930 
	#uhash_ä“Block
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_ä“Block
)

	)

931 
	#uhash_g‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_g‘
)

	)

932 
	#uhash_g‘i
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_g‘i
)

	)

933 
	#uhash_hashCa£ËssUnicodeSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_hashCa£ËssUnicodeSŒšg
)

	)

934 
	#uhash_hashCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_hashCh¬s
)

	)

935 
	#uhash_hashICh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_hashICh¬s
)

	)

936 
	#uhash_hashLÚg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_hashLÚg
)

	)

937 
	#uhash_hashUCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_hashUCh¬s
)

	)

938 
	#uhash_hashUCh¬sN
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_hashUCh¬sN
)

	)

939 
	#uhash_hashUnicodeSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_hashUnicodeSŒšg
)

	)

940 
	#uhash_ig‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_ig‘
)

	)

941 
	#uhash_ig‘i
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_ig‘i
)

	)

942 
	#uhash_š™
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_š™
)

	)

943 
	#uhash_ut
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_ut
)

	)

944 
	#uhash_uti
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_uti
)

	)

945 
	#uhash_œemove
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_œemove
)

	)

946 
	#uhash_œemovei
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_œemovei
)

	)

947 
	#uhash_ÃxtEËm’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_ÃxtEËm’t
)

	)

948 
	#uhash_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_İ’
)

	)

949 
	#uhash_İ’Size
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_İ’Size
)

	)

950 
	#uhash_put
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_put
)

	)

951 
	#uhash_puti
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_puti
)

	)

952 
	#uhash_»move
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_»move
)

	)

953 
	#uhash_»moveAÎ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_»moveAÎ
)

	)

954 
	#uhash_»moveEËm’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_»moveEËm’t
)

	)

955 
	#uhash_»movei
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_»movei
)

	)

956 
	#uhash_£tKeyCom·¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_£tKeyCom·¿tÜ
)

	)

957 
	#uhash_£tKeyD–‘”
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_£tKeyD–‘”
)

	)

958 
	#uhash_£tKeyHash”
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_£tKeyHash”
)

	)

959 
	#uhash_£tResizePŞicy
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_£tResizePŞicy
)

	)

960 
	#uhash_£tV®ueCom·¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_£tV®ueCom·¿tÜ
)

	)

961 
	#uhash_£tV®ueD–‘”
 
	`U_ICU_ENTRY_POINT_RENAME
(
uhash_£tV®ueD–‘”
)

	)

962 
	#uidÇ_IDNToASCII
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_IDNToASCII
)

	)

963 
	#uidÇ_IDNToUnicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_IDNToUnicode
)

	)

964 
	#uidÇ_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_şo£
)

	)

965 
	#uidÇ_com·»
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_com·»
)

	)

966 
	#uidÇ_Ïb–ToASCII
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_Ïb–ToASCII
)

	)

967 
	#uidÇ_Ïb–ToASCII_UTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_Ïb–ToASCII_UTF8
)

	)

968 
	#uidÇ_Ïb–ToUnicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_Ïb–ToUnicode
)

	)

969 
	#uidÇ_Ïb–ToUnicodeUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_Ïb–ToUnicodeUTF8
)

	)

970 
	#uidÇ_ÇmeToASCII
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_ÇmeToASCII
)

	)

971 
	#uidÇ_ÇmeToASCII_UTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_ÇmeToASCII_UTF8
)

	)

972 
	#uidÇ_ÇmeToUnicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_ÇmeToUnicode
)

	)

973 
	#uidÇ_ÇmeToUnicodeUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_ÇmeToUnicodeUTF8
)

	)

974 
	#uidÇ_İ’UTS46
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_İ’UTS46
)

	)

975 
	#uidÇ_toASCII
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_toASCII
)

	)

976 
	#uidÇ_toUnicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
uidÇ_toUnicode
)

	)

977 
	#u™”_cu¼’t32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u™”_cu¼’t32
)

	)

978 
	#u™”_g‘S‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u™”_g‘S‹
)

	)

979 
	#u™”_Ãxt32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u™”_Ãxt32
)

	)

980 
	#u™”_´evious32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u™”_´evious32
)

	)

981 
	#u™”_£tCh¬aù”I‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u™”_£tCh¬aù”I‹¿tÜ
)

	)

982 
	#u™”_£tR•ÏûabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u™”_£tR•ÏûabË
)

	)

983 
	#u™”_£tS‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u™”_£tS‹
)

	)

984 
	#u™”_£tSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u™”_£tSŒšg
)

	)

985 
	#u™”_£tUTF16BE
 
	`U_ICU_ENTRY_POINT_RENAME
(
u™”_£tUTF16BE
)

	)

986 
	#u™”_£tUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
u™”_£tUTF8
)

	)

987 
	#uldn_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_şo£
)

	)

988 
	#uldn_g‘DŸËùHªdlšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_g‘DŸËùHªdlšg
)

	)

989 
	#uldn_g‘LoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_g‘LoÿË
)

	)

990 
	#uldn_keyDi¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_keyDi¥ÏyName
)

	)

991 
	#uldn_keyV®ueDi¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_keyV®ueDi¥ÏyName
)

	)

992 
	#uldn_ÏnguageDi¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_ÏnguageDi¥ÏyName
)

	)

993 
	#uldn_loÿËDi¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_loÿËDi¥ÏyName
)

	)

994 
	#uldn_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_İ’
)

	)

995 
	#uldn_»giÚDi¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_»giÚDi¥ÏyName
)

	)

996 
	#uldn_sütCodeDi¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_sütCodeDi¥ÏyName
)

	)

997 
	#uldn_sütDi¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_sütDi¥ÏyName
)

	)

998 
	#uldn_v¬ŸÁDi¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uldn_v¬ŸÁDi¥ÏyName
)

	)

999 
	#uli¡_addI‹mBegšLi¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_addI‹mBegšLi¡
)

	)

1000 
	#uli¡_addI‹mEndLi¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_addI‹mEndLi¡
)

	)

1001 
	#uli¡_şo£_keywÜd_v®ues_™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_şo£_keywÜd_v®ues_™”©Ü
)

	)

1002 
	#uli¡_cÚšsSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_cÚšsSŒšg
)

	)

1003 
	#uli¡_couÁ_keywÜd_v®ues
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_couÁ_keywÜd_v®ues
)

	)

1004 
	#uli¡_ü—‹Em±yLi¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_ü—‹Em±yLi¡
)

	)

1005 
	#uli¡_d–‘eLi¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_d–‘eLi¡
)

	)

1006 
	#uli¡_g‘Li¡FromEnum
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_g‘Li¡FromEnum
)

	)

1007 
	#uli¡_g‘Li¡Size
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_g‘Li¡Size
)

	)

1008 
	#uli¡_g‘Next
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_g‘Next
)

	)

1009 
	#uli¡_Ãxt_keywÜd_v®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_Ãxt_keywÜd_v®ue
)

	)

1010 
	#uli¡_»£tLi¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_»£tLi¡
)

	)

1011 
	#uli¡_»£t_keywÜd_v®ues_™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
uli¡_»£t_keywÜd_v®ues_™”©Ü
)

	)

1012 
	#uloc_acû±Lªguage
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_acû±Lªguage
)

	)

1013 
	#uloc_acû±LªguageFromHTTP
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_acû±LªguageFromHTTP
)

	)

1014 
	#uloc_addLik–ySubgs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_addLik–ySubgs
)

	)

1015 
	#uloc_ÿnÚiÿlize
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_ÿnÚiÿlize
)

	)

1016 
	#uloc_couÁAvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_couÁAvaabË
)

	)

1017 
	#uloc_fÜLªguageTag
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_fÜLªguageTag
)

	)

1018 
	#uloc_g‘AvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘AvaabË
)

	)

1019 
	#uloc_g‘Ba£Name
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Ba£Name
)

	)

1020 
	#uloc_g‘Ch¬aù”Or›Á©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Ch¬aù”Or›Á©iÚ
)

	)

1021 
	#uloc_g‘CouÁry
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘CouÁry
)

	)

1022 
	#uloc_g‘Cu¼’tCouÁryID
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Cu¼’tCouÁryID
)

	)

1023 
	#uloc_g‘Cu¼’tLªguageID
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Cu¼’tLªguageID
)

	)

1024 
	#uloc_g‘DeçuÉ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘DeçuÉ
)

	)

1025 
	#uloc_g‘Di¥ÏyCouÁry
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Di¥ÏyCouÁry
)

	)

1026 
	#uloc_g‘Di¥ÏyKeywÜd
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Di¥ÏyKeywÜd
)

	)

1027 
	#uloc_g‘Di¥ÏyKeywÜdV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Di¥ÏyKeywÜdV®ue
)

	)

1028 
	#uloc_g‘Di¥ÏyLªguage
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Di¥ÏyLªguage
)

	)

1029 
	#uloc_g‘Di¥ÏyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Di¥ÏyName
)

	)

1030 
	#uloc_g‘Di¥ÏySüt
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Di¥ÏySüt
)

	)

1031 
	#uloc_g‘Di¥ÏyV¬ŸÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Di¥ÏyV¬ŸÁ
)

	)

1032 
	#uloc_g‘ISO3CouÁry
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘ISO3CouÁry
)

	)

1033 
	#uloc_g‘ISO3Lªguage
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘ISO3Lªguage
)

	)

1034 
	#uloc_g‘ISOCouÁr›s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘ISOCouÁr›s
)

	)

1035 
	#uloc_g‘ISOLªguages
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘ISOLªguages
)

	)

1036 
	#uloc_g‘KeywÜdV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘KeywÜdV®ue
)

	)

1037 
	#uloc_g‘LCID
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘LCID
)

	)

1038 
	#uloc_g‘Lªguage
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Lªguage
)

	)

1039 
	#uloc_g‘LšeOr›Á©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘LšeOr›Á©iÚ
)

	)

1040 
	#uloc_g‘LoÿËFÜLCID
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘LoÿËFÜLCID
)

	)

1041 
	#uloc_g‘Name
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Name
)

	)

1042 
	#uloc_g‘P¬’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘P¬’t
)

	)

1043 
	#uloc_g‘Süt
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘Süt
)

	)

1044 
	#uloc_g‘TabËSŒšgW™hF®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘TabËSŒšgW™hF®lback
)

	)

1045 
	#uloc_g‘V¬ŸÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_g‘V¬ŸÁ
)

	)

1046 
	#uloc_mšimizeSubgs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_mšimizeSubgs
)

	)

1047 
	#uloc_İ’KeywÜdLi¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_İ’KeywÜdLi¡
)

	)

1048 
	#uloc_İ’KeywÜds
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_İ’KeywÜds
)

	)

1049 
	#uloc_£tDeçuÉ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_£tDeçuÉ
)

	)

1050 
	#uloc_£tKeywÜdV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_£tKeywÜdV®ue
)

	)

1051 
	#uloc_toLªguageTag
 
	`U_ICU_ENTRY_POINT_RENAME
(
uloc_toLªguageTag
)

	)

1052 
	#ulocd©a_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocd©a_şo£
)

	)

1053 
	#ulocd©a_g‘CLDRV”siÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocd©a_g‘CLDRV”siÚ
)

	)

1054 
	#ulocd©a_g‘D–im™”
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocd©a_g‘D–im™”
)

	)

1055 
	#ulocd©a_g‘Exem¶¬S‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocd©a_g‘Exem¶¬S‘
)

	)

1056 
	#ulocd©a_g‘LoÿËDi¥ÏyP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocd©a_g‘LoÿËDi¥ÏyP©‹º
)

	)

1057 
	#ulocd©a_g‘LoÿËS•¬©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocd©a_g‘LoÿËS•¬©Ü
)

	)

1058 
	#ulocd©a_g‘M—su»m’tSy¡em
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocd©a_g‘M—su»m’tSy¡em
)

	)

1059 
	#ulocd©a_g‘NoSub¡™u‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocd©a_g‘NoSub¡™u‹
)

	)

1060 
	#ulocd©a_g‘P­”Size
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocd©a_g‘P­”Size
)

	)

1061 
	#ulocd©a_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocd©a_İ’
)

	)

1062 
	#ulocd©a_£tNoSub¡™u‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocd©a_£tNoSub¡™u‹
)

	)

1063 
	#ulocimp_g‘CouÁry
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocimp_g‘CouÁry
)

	)

1064 
	#ulocimp_g‘Lªguage
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocimp_g‘Lªguage
)

	)

1065 
	#ulocimp_g‘Süt
 
	`U_ICU_ENTRY_POINT_RENAME
(
ulocimp_g‘Süt
)

	)

1066 
	#umsg_­¶yP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_­¶yP©‹º
)

	)

1067 
	#umsg_autoQuÙeApo¡rİhe
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_autoQuÙeApo¡rİhe
)

	)

1068 
	#umsg_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_şÚe
)

	)

1069 
	#umsg_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_şo£
)

	)

1070 
	#umsg_fÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_fÜm©
)

	)

1071 
	#umsg_g‘LoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_g‘LoÿË
)

	)

1072 
	#umsg_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_İ’
)

	)

1073 
	#umsg_·r£
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_·r£
)

	)

1074 
	#umsg_£tLoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_£tLoÿË
)

	)

1075 
	#umsg_toP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_toP©‹º
)

	)

1076 
	#umsg_vfÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_vfÜm©
)

	)

1077 
	#umsg_v·r£
 
	`U_ICU_ENTRY_POINT_RENAME
(
umsg_v·r£
)

	)

1078 
	#umtx_©omic_dec
 
	`U_ICU_ENTRY_POINT_RENAME
(
umtx_©omic_dec
)

	)

1079 
	#umtx_©omic_šc
 
	`U_ICU_ENTRY_POINT_RENAME
(
umtx_©omic_šc
)

	)

1080 
	#umtx_ş—nup
 
	`U_ICU_ENTRY_POINT_RENAME
(
umtx_ş—nup
)

	)

1081 
	#umtx_de¡roy
 
	`U_ICU_ENTRY_POINT_RENAME
(
umtx_de¡roy
)

	)

1082 
	#umtx_š™
 
	`U_ICU_ENTRY_POINT_RENAME
(
umtx_š™
)

	)

1083 
	#umtx_lock
 
	`U_ICU_ENTRY_POINT_RENAME
(
umtx_lock
)

	)

1084 
	#umtx_uÆock
 
	`U_ICU_ENTRY_POINT_RENAME
(
umtx_uÆock
)

	)

1085 
	#uni£t_g‘Unicode32In¡ªû
 
	`U_ICU_ENTRY_POINT_RENAME
(
uni£t_g‘Unicode32In¡ªû
)

	)

1086 
	#unÜm2_­³nd
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_­³nd
)

	)

1087 
	#unÜm2_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_şo£
)

	)

1088 
	#unÜm2_g‘Decompos™iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_g‘Decompos™iÚ
)

	)

1089 
	#unÜm2_g‘In¡ªû
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_g‘In¡ªû
)

	)

1090 
	#unÜm2_hasBound¬yAá”
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_hasBound¬yAá”
)

	)

1091 
	#unÜm2_hasBound¬yBefÜe
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_hasBound¬yBefÜe
)

	)

1092 
	#unÜm2_isIÃ¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_isIÃ¹
)

	)

1093 
	#unÜm2_isNÜm®ized
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_isNÜm®ized
)

	)

1094 
	#unÜm2_nÜm®ize
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_nÜm®ize
)

	)

1095 
	#unÜm2_nÜm®izeSecÚdAndAµ’d
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_nÜm®izeSecÚdAndAµ’d
)

	)

1096 
	#unÜm2_İ’F‹»d
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_İ’F‹»d
)

	)

1097 
	#unÜm2_quickCheck
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_quickCheck
)

	)

1098 
	#unÜm2_¥ªQuickCheckYes
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_¥ªQuickCheckYes
)

	)

1099 
	#unÜm2_sw­
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm2_sw­
)

	)

1100 
	#unÜm_şo£I‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_şo£I‹r
)

	)

1101 
	#unÜm_com·»
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_com·»
)

	)

1102 
	#unÜm_cÚÿ‹Ç‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_cÚÿ‹Ç‹
)

	)

1103 
	#unÜm_g‘FCDTr›Index
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_g‘FCDTr›Index
)

	)

1104 
	#unÜm_g‘QuickCheck
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_g‘QuickCheck
)

	)

1105 
	#unÜm_isNÜm®ized
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_isNÜm®ized
)

	)

1106 
	#unÜm_isNÜm®izedW™hO±iÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_isNÜm®izedW™hO±iÚs
)

	)

1107 
	#unÜm_Ãxt
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_Ãxt
)

	)

1108 
	#unÜm_nÜm®ize
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_nÜm®ize
)

	)

1109 
	#unÜm_İ’I‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_İ’I‹r
)

	)

1110 
	#unÜm_´evious
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_´evious
)

	)

1111 
	#unÜm_quickCheck
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_quickCheck
)

	)

1112 
	#unÜm_quickCheckW™hO±iÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_quickCheckW™hO±iÚs
)

	)

1113 
	#unÜm_£tI‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
unÜm_£tI‹r
)

	)

1114 
	#unum_­¶yP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_­¶yP©‹º
)

	)

1115 
	#unum_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_şÚe
)

	)

1116 
	#unum_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_şo£
)

	)

1117 
	#unum_couÁAvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_couÁAvaabË
)

	)

1118 
	#unum_fÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_fÜm©
)

	)

1119 
	#unum_fÜm©Decim®
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_fÜm©Decim®
)

	)

1120 
	#unum_fÜm©DoubË
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_fÜm©DoubË
)

	)

1121 
	#unum_fÜm©DoubËCu¼’cy
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_fÜm©DoubËCu¼’cy
)

	)

1122 
	#unum_fÜm©IÁ64
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_fÜm©IÁ64
)

	)

1123 
	#unum_g‘A‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_g‘A‰ribu‹
)

	)

1124 
	#unum_g‘AvaabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_g‘AvaabË
)

	)

1125 
	#unum_g‘DoubËA‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_g‘DoubËA‰ribu‹
)

	)

1126 
	#unum_g‘LoÿËByTy³
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_g‘LoÿËByTy³
)

	)

1127 
	#unum_g‘SymbŞ
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_g‘SymbŞ
)

	)

1128 
	#unum_g‘TextA‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_g‘TextA‰ribu‹
)

	)

1129 
	#unum_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_İ’
)

	)

1130 
	#unum_·r£
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_·r£
)

	)

1131 
	#unum_·r£Decim®
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_·r£Decim®
)

	)

1132 
	#unum_·r£DoubË
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_·r£DoubË
)

	)

1133 
	#unum_·r£DoubËCu¼’cy
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_·r£DoubËCu¼’cy
)

	)

1134 
	#unum_·r£IÁ64
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_·r£IÁ64
)

	)

1135 
	#unum_£tA‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_£tA‰ribu‹
)

	)

1136 
	#unum_£tDoubËA‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_£tDoubËA‰ribu‹
)

	)

1137 
	#unum_£tSymbŞ
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_£tSymbŞ
)

	)

1138 
	#unum_£tTextA‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_£tTextA‰ribu‹
)

	)

1139 
	#unum_toP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
unum_toP©‹º
)

	)

1140 
	#u¶ug_şo£Lib¿ry
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_şo£Lib¿ry
)

	)

1141 
	#u¶ug_fšdLib¿ry
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_fšdLib¿ry
)

	)

1142 
	#u¶ug_g‘CÚfigu¿tiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_g‘CÚfigu¿tiÚ
)

	)

1143 
	#u¶ug_g‘CÚ‹xt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_g‘CÚ‹xt
)

	)

1144 
	#u¶ug_g‘Cu¼’tLev–
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_g‘Cu¼’tLev–
)

	)

1145 
	#u¶ug_g‘Lib¿ry
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_g‘Lib¿ry
)

	)

1146 
	#u¶ug_g‘Lib¿ryName
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_g‘Lib¿ryName
)

	)

1147 
	#u¶ug_g‘PlugIÁ”Çl
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_g‘PlugIÁ”Çl
)

	)

1148 
	#u¶ug_g‘PlugLev–
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_g‘PlugLev–
)

	)

1149 
	#u¶ug_g‘PlugLßdStus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_g‘PlugLßdStus
)

	)

1150 
	#u¶ug_g‘PlugName
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_g‘PlugName
)

	)

1151 
	#u¶ug_g‘PlugšFe
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_g‘PlugšFe
)

	)

1152 
	#u¶ug_g‘SymbŞName
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_g‘SymbŞName
)

	)

1153 
	#u¶ug_š™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_š™
)

	)

1154 
	#u¶ug_lßdPlugFromEÁrypošt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_lßdPlugFromEÁrypošt
)

	)

1155 
	#u¶ug_lßdPlugFromLib¿ry
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_lßdPlugFromLib¿ry
)

	)

1156 
	#u¶ug_ÃxtPlug
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_ÃxtPlug
)

	)

1157 
	#u¶ug_İ’Lib¿ry
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_İ’Lib¿ry
)

	)

1158 
	#u¶ug_»movePlug
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_»movePlug
)

	)

1159 
	#u¶ug_£tCÚ‹xt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_£tCÚ‹xt
)

	)

1160 
	#u¶ug_£tPlugLev–
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_£tPlugLev–
)

	)

1161 
	#u¶ug_£tPlugName
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_£tPlugName
)

	)

1162 
	#u¶ug_£tPlugNoUÆßd
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¶ug_£tPlugNoUÆßd
)

	)

1163 
	#u²ame_sw­
 
	`U_ICU_ENTRY_POINT_RENAME
(
u²ame_sw­
)

	)

1164 
	#u´İs_g‘Sourû
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´İs_g‘Sourû
)

	)

1165 
	#u´İsvec_addPrİ”tyS¹s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´İsvec_addPrİ”tyS¹s
)

	)

1166 
	#u´v_«¡ºıy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_«¡ºıy
)

	)

1167 
	#u´v_asciiFromEbcdic
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_asciiFromEbcdic
)

	)

1168 
	#u´v_asci™Şow”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_asci™Şow”
)

	)

1169 
	#u´v_û
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_û
)

	)

1170 
	#u´v_ú‰ab_addCÚŒaùiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_addCÚŒaùiÚ
)

	)

1171 
	#u´v_ú‰ab_chªgeCÚŒaùiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_chªgeCÚŒaùiÚ
)

	)

1172 
	#u´v_ú‰ab_chªgeLa¡CE
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_chªgeLa¡CE
)

	)

1173 
	#u´v_ú‰ab_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_şÚe
)

	)

1174 
	#u´v_ú‰ab_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_şo£
)

	)

1175 
	#u´v_ú‰ab_cÚ¡ruùTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_cÚ¡ruùTabË
)

	)

1176 
	#u´v_ú‰ab_fšdCE
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_fšdCE
)

	)

1177 
	#u´v_ú‰ab_fšdCP
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_fšdCP
)

	)

1178 
	#u´v_ú‰ab_g‘CE
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_g‘CE
)

	)

1179 
	#u´v_ú‰ab_š£¹CÚŒaùiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_š£¹CÚŒaùiÚ
)

	)

1180 
	#u´v_ú‰ab_isTaÜed
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_isTaÜed
)

	)

1181 
	#u´v_ú‰ab_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_İ’
)

	)

1182 
	#u´v_ú‰ab_£tCÚŒaùiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ú‰ab_£tCÚŒaùiÚ
)

	)

1183 
	#u´v_cŞlI‹¿‹AtEnd
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_cŞlI‹¿‹AtEnd
)

	)

1184 
	#u´v_com·»ASCIIPrİ”tyNames
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_com·»ASCIIPrİ”tyNames
)

	)

1185 
	#u´v_com·»EBCDICPrİ”tyNames
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_com·»EBCDICPrİ”tyNames
)

	)

1186 
	#u´v_com·»InvAscii
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_com·»InvAscii
)

	)

1187 
	#u´v_com·»InvEbcdic
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_com·»InvEbcdic
)

	)

1188 
	#u´v_com·»InvEbcdicAsAscii
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_com·»InvEbcdicAsAscii
)

	)

1189 
	#u´v_cÚv”tToLCID
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_cÚv”tToLCID
)

	)

1190 
	#u´v_cÚv”tToPosix
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_cÚv”tToPosix
)

	)

1191 
	#u´v_cİyAscii
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_cİyAscii
)

	)

1192 
	#u´v_cİyEbcdic
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_cİyEbcdic
)

	)

1193 
	#u´v_decCÚ‹xtCË¬Stus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtCË¬Stus
)

	)

1194 
	#u´v_decCÚ‹xtDeçuÉ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtDeçuÉ
)

	)

1195 
	#u´v_decCÚ‹xtG‘Roundšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtG‘Roundšg
)

	)

1196 
	#u´v_decCÚ‹xtG‘Stus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtG‘Stus
)

	)

1197 
	#u´v_decCÚ‹xtRe¡ÜeStus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtRe¡ÜeStus
)

	)

1198 
	#u´v_decCÚ‹xtSaveStus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtSaveStus
)

	)

1199 
	#u´v_decCÚ‹xtS‘Roundšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtS‘Roundšg
)

	)

1200 
	#u´v_decCÚ‹xtS‘Stus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtS‘Stus
)

	)

1201 
	#u´v_decCÚ‹xtS‘StusFromSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtS‘StusFromSŒšg
)

	)

1202 
	#u´v_decCÚ‹xtS‘StusFromSŒšgQu›t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtS‘StusFromSŒšgQu›t
)

	)

1203 
	#u´v_decCÚ‹xtS‘StusQu›t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtS‘StusQu›t
)

	)

1204 
	#u´v_decCÚ‹xtStusToSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtStusToSŒšg
)

	)

1205 
	#u´v_decCÚ‹xtTe¡EndŸn
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtTe¡EndŸn
)

	)

1206 
	#u´v_decCÚ‹xtTe¡SavedStus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtTe¡SavedStus
)

	)

1207 
	#u´v_decCÚ‹xtTe¡Stus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtTe¡Stus
)

	)

1208 
	#u´v_decCÚ‹xtZ”oStus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decCÚ‹xtZ”oStus
)

	)

1209 
	#u´v_decNumb”Abs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Abs
)

	)

1210 
	#u´v_decNumb”Add
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Add
)

	)

1211 
	#u´v_decNumb”And
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”And
)

	)

1212 
	#u´v_decNumb”CÏss
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”CÏss
)

	)

1213 
	#u´v_decNumb”CÏssToSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”CÏssToSŒšg
)

	)

1214 
	#u´v_decNumb”Com·»
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Com·»
)

	)

1215 
	#u´v_decNumb”Com·»SigÇl
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Com·»SigÇl
)

	)

1216 
	#u´v_decNumb”Com·»TÙ®
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Com·»TÙ®
)

	)

1217 
	#u´v_decNumb”Com·»TÙ®Mag
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Com·»TÙ®Mag
)

	)

1218 
	#u´v_decNumb”Cİy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Cİy
)

	)

1219 
	#u´v_decNumb”CİyAbs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”CİyAbs
)

	)

1220 
	#u´v_decNumb”CİyNeg©e
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”CİyNeg©e
)

	)

1221 
	#u´v_decNumb”CİySign
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”CİySign
)

	)

1222 
	#u´v_decNumb”Divide
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Divide
)

	)

1223 
	#u´v_decNumb”DivideIÁeg”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”DivideIÁeg”
)

	)

1224 
	#u´v_decNumb”Exp
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Exp
)

	)

1225 
	#u´v_decNumb”FMA
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”FMA
)

	)

1226 
	#u´v_decNumb”FromIÁ32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”FromIÁ32
)

	)

1227 
	#u´v_decNumb”FromSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”FromSŒšg
)

	)

1228 
	#u´v_decNumb”FromUIÁ32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”FromUIÁ32
)

	)

1229 
	#u´v_decNumb”G‘BCD
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”G‘BCD
)

	)

1230 
	#u´v_decNumb”Inv”t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Inv”t
)

	)

1231 
	#u´v_decNumb”IsNÜm®
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”IsNÜm®
)

	)

1232 
	#u´v_decNumb”IsSubnÜm®
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”IsSubnÜm®
)

	)

1233 
	#u´v_decNumb”Ln
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Ln
)

	)

1234 
	#u´v_decNumb”Log10
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Log10
)

	)

1235 
	#u´v_decNumb”LogB
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”LogB
)

	)

1236 
	#u´v_decNumb”Max
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Max
)

	)

1237 
	#u´v_decNumb”MaxMag
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”MaxMag
)

	)

1238 
	#u´v_decNumb”Mš
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Mš
)

	)

1239 
	#u´v_decNumb”MšMag
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”MšMag
)

	)

1240 
	#u´v_decNumb”Mšus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Mšus
)

	)

1241 
	#u´v_decNumb”MuÉly
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”MuÉly
)

	)

1242 
	#u´v_decNumb”NextMšus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”NextMšus
)

	)

1243 
	#u´v_decNumb”NextPlus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”NextPlus
)

	)

1244 
	#u´v_decNumb”NextTow¬d
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”NextTow¬d
)

	)

1245 
	#u´v_decNumb”NÜm®ize
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”NÜm®ize
)

	)

1246 
	#u´v_decNumb”Or
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Or
)

	)

1247 
	#u´v_decNumb”Plus
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Plus
)

	)

1248 
	#u´v_decNumb”Pow”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Pow”
)

	)

1249 
	#u´v_decNumb”Quªtize
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Quªtize
)

	)

1250 
	#u´v_decNumb”Reduû
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Reduû
)

	)

1251 
	#u´v_decNumb”Remašd”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Remašd”
)

	)

1252 
	#u´v_decNumb”Remašd”N—r
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Remašd”N—r
)

	)

1253 
	#u´v_decNumb”ResÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”ResÿË
)

	)

1254 
	#u´v_decNumb”RÙ©e
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”RÙ©e
)

	)

1255 
	#u´v_decNumb”SameQuªtum
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”SameQuªtum
)

	)

1256 
	#u´v_decNumb”SÿËB
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”SÿËB
)

	)

1257 
	#u´v_decNumb”S‘BCD
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”S‘BCD
)

	)

1258 
	#u´v_decNumb”Shiá
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Shiá
)

	)

1259 
	#u´v_decNumb”Squ¬eRoÙ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Squ¬eRoÙ
)

	)

1260 
	#u´v_decNumb”SubŒaù
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”SubŒaù
)

	)

1261 
	#u´v_decNumb”ToEngSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”ToEngSŒšg
)

	)

1262 
	#u´v_decNumb”ToIÁ32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”ToIÁ32
)

	)

1263 
	#u´v_decNumb”ToIÁeg¿lExaù
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”ToIÁeg¿lExaù
)

	)

1264 
	#u´v_decNumb”ToIÁeg¿lV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”ToIÁeg¿lV®ue
)

	)

1265 
	#u´v_decNumb”ToSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”ToSŒšg
)

	)

1266 
	#u´v_decNumb”ToUIÁ32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”ToUIÁ32
)

	)

1267 
	#u´v_decNumb”Trim
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Trim
)

	)

1268 
	#u´v_decNumb”V”siÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”V”siÚ
)

	)

1269 
	#u´v_decNumb”XÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”XÜ
)

	)

1270 
	#u´v_decNumb”Z”o
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_decNumb”Z”o
)

	)

1271 
	#u´v_d–‘e_cŞlI‹¿‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_d–‘e_cŞlI‹¿‹
)

	)

1272 
	#u´v_dl_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_dl_şo£
)

	)

1273 
	#u´v_dl_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_dl_İ’
)

	)

1274 
	#u´v_dl_sym
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_dl_sym
)

	)

1275 
	#u´v_—¡ºıy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_—¡ºıy
)

	)

1276 
	#u´v_ebcdicFromAscii
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ebcdicFromAscii
)

	)

1277 
	#u´v_ebcdiùŞow”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ebcdiùŞow”
)

	)

1278 
	#u´v_çbs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_çbs
)

	)

1279 
	#u´v_æoÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_æoÜ
)

	)

1280 
	#u´v_fmax
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_fmax
)

	)

1281 
	#u´v_fmš
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_fmš
)

	)

1282 
	#u´v_fmod
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_fmod
)

	)

1283 
	#u´v_ä“
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ä“
)

	)

1284 
	#u´v_g‘Ch¬NameCh¬aù”s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_g‘Ch¬NameCh¬aù”s
)

	)

1285 
	#u´v_g‘DeçuÉCod•age
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_g‘DeçuÉCod•age
)

	)

1286 
	#u´v_g‘DeçuÉLoÿËID
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_g‘DeçuÉLoÿËID
)

	)

1287 
	#u´v_g‘Infš™y
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_g‘Infš™y
)

	)

1288 
	#u´v_g‘MaxCh¬NameL’gth
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_g‘MaxCh¬NameL’gth
)

	)

1289 
	#u´v_g‘MaxV®ues
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_g‘MaxV®ues
)

	)

1290 
	#u´v_g‘NaN
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_g‘NaN
)

	)

1291 
	#u´v_g‘RawUTCtime
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_g‘RawUTCtime
)

	)

1292 
	#u´v_g‘SticCu¼’cyName
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_g‘SticCu¼’cyName
)

	)

1293 
	#u´v_g‘UTCtime
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_g‘UTCtime
)

	)

1294 
	#u´v_havePrİ”t›s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_havePrİ”t›s
)

	)

1295 
	#u´v_š™_cŞlI‹¿‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_š™_cŞlI‹¿‹
)

	)

1296 
	#u´v_š™_pû
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_š™_pû
)

	)

1297 
	#u´v_št32Com·¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_št32Com·¿tÜ
)

	)

1298 
	#u´v_isInfš™e
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_isInfš™e
)

	)

1299 
	#u´v_isInv¬ŸÁSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_isInv¬ŸÁSŒšg
)

	)

1300 
	#u´v_isInv¬ŸÁUSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_isInv¬ŸÁUSŒšg
)

	)

1301 
	#u´v_isNaN
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_isNaN
)

	)

1302 
	#u´v_isNeg©iveInfš™y
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_isNeg©iveInfš™y
)

	)

1303 
	#u´v_isPos™iveInfš™y
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_isPos™iveInfš™y
)

	)

1304 
	#u´v_isRuËWh™eS·û
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_isRuËWh™eS·û
)

	)

1305 
	#u´v_™ou
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_™ou
)

	)

1306 
	#u´v_log
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_log
)

	)

1307 
	#u´v_m®loc
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_m®loc
)

	)

1308 
	#u´v_m­Fe
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_m­Fe
)

	)

1309 
	#u´v_max
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_max
)

	)

1310 
	#u´v_maxMªtis§
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_maxMªtis§
)

	)

1311 
	#u´v_maximumPŒ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_maximumPŒ
)

	)

1312 
	#u´v_mš
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_mš
)

	)

1313 
	#u´v_modf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_modf
)

	)

1314 
	#u´v_Ãw_cŞlI‹¿‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_Ãw_cŞlI‹¿‹
)

	)

1315 
	#u´v_İ’RuËWh™eS·ûS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_İ’RuËWh™eS·ûS‘
)

	)

1316 
	#u´v_·r£Cu¼’cy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_·r£Cu¼’cy
)

	)

1317 
	#u´v_·thIsAbsŞu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_·thIsAbsŞu‹
)

	)

1318 
	#u´v_pow
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_pow
)

	)

1319 
	#u´v_pow10
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_pow10
)

	)

1320 
	#u´v_»®loc
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_»®loc
)

	)

1321 
	#u´v_round
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_round
)

	)

1322 
	#u´v_sÜtA¼ay
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_sÜtA¼ay
)

	)

1323 
	#u´v_¡rCom·»
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_¡rCom·»
)

	)

1324 
	#u´v_¡rdup
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_¡rdup
)

	)

1325 
	#u´v_¡ºdup
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_¡ºdup
)

	)

1326 
	#u´v_syÁaxE¼Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_syÁaxE¼Ü
)

	)

1327 
	#u´v_timezÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_timezÚe
)

	)

1328 
	#u´v_touµ”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_touµ”
)

	)

1329 
	#u´v_Œunc
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_Œunc
)

	)

1330 
	#u´v_tzÇme
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_tzÇme
)

	)

1331 
	#u´v_tz£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_tz£t
)

	)

1332 
	#u´v_uÿ_addAnEËm’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_uÿ_addAnEËm’t
)

	)

1333 
	#u´v_uÿ_as£mbËTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_uÿ_as£mbËTabË
)

	)

1334 
	#u´v_uÿ_ÿnÚiÿlClosu»
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_uÿ_ÿnÚiÿlClosu»
)

	)

1335 
	#u´v_uÿ_şo£TempTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_uÿ_şo£TempTabË
)

	)

1336 
	#u´v_uÿ_g‘CodePoštFromRaw
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_uÿ_g‘CodePoštFromRaw
)

	)

1337 
	#u´v_uÿ_g‘Im¶ic™FromRaw
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_uÿ_g‘Im¶ic™FromRaw
)

	)

1338 
	#u´v_uÿ_g‘RawFromCodePošt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_uÿ_g‘RawFromCodePošt
)

	)

1339 
	#u´v_uÿ_g‘RawFromIm¶ic™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_uÿ_g‘RawFromIm¶ic™
)

	)

1340 
	#u´v_uÿ_š™Im¶ic™CÚ¡ªts
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_uÿ_š™Im¶ic™CÚ¡ªts
)

	)

1341 
	#u´v_uÿ_š™TempTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_uÿ_š™TempTabË
)

	)

1342 
	#u´v_ušt16Com·¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ušt16Com·¿tÜ
)

	)

1343 
	#u´v_ušt32Com·¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_ušt32Com·¿tÜ
)

	)

1344 
	#u´v_unm­Fe
 
	`U_ICU_ENTRY_POINT_RENAME
(
u´v_unm­Fe
)

	)

1345 
	#upvec_şÚeA¼ay
 
	`U_ICU_ENTRY_POINT_RENAME
(
upvec_şÚeA¼ay
)

	)

1346 
	#upvec_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
upvec_şo£
)

	)

1347 
	#upvec_com·ù
 
	`U_ICU_ENTRY_POINT_RENAME
(
upvec_com·ù
)

	)

1348 
	#upvec_com·ùToUTr›2HªdËr
 
	`U_ICU_ENTRY_POINT_RENAME
(
upvec_com·ùToUTr›2HªdËr
)

	)

1349 
	#upvec_com·ùToUTr›2W™hRowIndexes
 
	`U_ICU_ENTRY_POINT_RENAME
(
upvec_com·ùToUTr›2W™hRowIndexes
)

	)

1350 
	#upvec_g‘A¼ay
 
	`U_ICU_ENTRY_POINT_RENAME
(
upvec_g‘A¼ay
)

	)

1351 
	#upvec_g‘Row
 
	`U_ICU_ENTRY_POINT_RENAME
(
upvec_g‘Row
)

	)

1352 
	#upvec_g‘V®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
upvec_g‘V®ue
)

	)

1353 
	#upvec_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
upvec_İ’
)

	)

1354 
	#upvec_£tV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
upvec_£tV®ue
)

	)

1355 
	#u»gex_­³ndR•Ïûm’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_­³ndR•Ïûm’t
)

	)

1356 
	#u»gex_­³ndR•Ïûm’tUText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_­³ndR•Ïûm’tUText
)

	)

1357 
	#u»gex_­³ndTa
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_­³ndTa
)

	)

1358 
	#u»gex_­³ndTaUText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_­³ndTaUText
)

	)

1359 
	#u»gex_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_şÚe
)

	)

1360 
	#u»gex_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_şo£
)

	)

1361 
	#u»gex_’d
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_’d
)

	)

1362 
	#u»gex_’d64
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_’d64
)

	)

1363 
	#u»gex_fšd
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_fšd
)

	)

1364 
	#u»gex_fšd64
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_fšd64
)

	)

1365 
	#u»gex_fšdNext
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_fšdNext
)

	)

1366 
	#u»gex_æags
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_æags
)

	)

1367 
	#u»gex_g‘FšdProg»ssC®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_g‘FšdProg»ssC®lback
)

	)

1368 
	#u»gex_g‘M©chC®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_g‘M©chC®lback
)

	)

1369 
	#u»gex_g‘SckLim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_g‘SckLim™
)

	)

1370 
	#u»gex_g‘Text
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_g‘Text
)

	)

1371 
	#u»gex_g‘TimeLim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_g‘TimeLim™
)

	)

1372 
	#u»gex_g‘UText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_g‘UText
)

	)

1373 
	#u»gex_group
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_group
)

	)

1374 
	#u»gex_groupCouÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_groupCouÁ
)

	)

1375 
	#u»gex_groupUText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_groupUText
)

	)

1376 
	#u»gex_groupUTextD“p
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_groupUTextD“p
)

	)

1377 
	#u»gex_hasAnchÜšgBounds
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_hasAnchÜšgBounds
)

	)

1378 
	#u»gex_hasT¿n¥¬’tBounds
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_hasT¿n¥¬’tBounds
)

	)

1379 
	#u»gex_h™End
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_h™End
)

	)

1380 
	#u»gex_lookšgAt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_lookšgAt
)

	)

1381 
	#u»gex_lookšgAt64
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_lookšgAt64
)

	)

1382 
	#u»gex_m©ches
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_m©ches
)

	)

1383 
	#u»gex_m©ches64
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_m©ches64
)

	)

1384 
	#u»gex_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_İ’
)

	)

1385 
	#u»gex_İ’C
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_İ’C
)

	)

1386 
	#u»gex_İ’UText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_İ’UText
)

	)

1387 
	#u»gex_·‰”n
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_·‰”n
)

	)

1388 
	#u»gex_·‰”nUText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_·‰”nUText
)

	)

1389 
	#u»gex_»giÚEnd
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_»giÚEnd
)

	)

1390 
	#u»gex_»giÚEnd64
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_»giÚEnd64
)

	)

1391 
	#u»gex_»giÚS¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_»giÚS¹
)

	)

1392 
	#u»gex_»giÚS¹64
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_»giÚS¹64
)

	)

1393 
	#u»gex_»¶aûAÎ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_»¶aûAÎ
)

	)

1394 
	#u»gex_»¶aûAÎUText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_»¶aûAÎUText
)

	)

1395 
	#u»gex_»¶aûFœ¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_»¶aûFœ¡
)

	)

1396 
	#u»gex_»¶aûFœ¡UText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_»¶aûFœ¡UText
)

	)

1397 
	#u»gex_»quœeEnd
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_»quœeEnd
)

	)

1398 
	#u»gex_»£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_»£t
)

	)

1399 
	#u»gex_»£t64
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_»£t64
)

	)

1400 
	#u»gex_£tFšdProg»ssC®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_£tFšdProg»ssC®lback
)

	)

1401 
	#u»gex_£tM©chC®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_£tM©chC®lback
)

	)

1402 
	#u»gex_£tRegiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_£tRegiÚ
)

	)

1403 
	#u»gex_£tRegiÚ64
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_£tRegiÚ64
)

	)

1404 
	#u»gex_£tRegiÚAndS¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_£tRegiÚAndS¹
)

	)

1405 
	#u»gex_£tSckLim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_£tSckLim™
)

	)

1406 
	#u»gex_£tText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_£tText
)

	)

1407 
	#u»gex_£tTimeLim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_£tTimeLim™
)

	)

1408 
	#u»gex_£tUText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_£tUText
)

	)

1409 
	#u»gex_¥l™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_¥l™
)

	)

1410 
	#u»gex_¥l™UText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_¥l™UText
)

	)

1411 
	#u»gex_¡¬t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_¡¬t
)

	)

1412 
	#u»gex_¡¬t64
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_¡¬t64
)

	)

1413 
	#u»gex_uc¡r_uÃsÿ³_ch¬At
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_uc¡r_uÃsÿ³_ch¬At
)

	)

1414 
	#u»gex_u£AnchÜšgBounds
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_u£AnchÜšgBounds
)

	)

1415 
	#u»gex_u£T¿n¥¬’tBounds
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_u£T¿n¥¬’tBounds
)

	)

1416 
	#u»gex_u‹xt_uÃsÿ³_ch¬At
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»gex_u‹xt_uÃsÿ³_ch¬At
)

	)

1417 
	#u»s_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_şo£
)

	)

1418 
	#u»s_cİyResb
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_cİyResb
)

	)

1419 
	#u»s_couÁA¼ayI‹ms
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_couÁA¼ayI‹ms
)

	)

1420 
	#u»s_fšdResourû
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_fšdResourû
)

	)

1421 
	#u»s_fšdSubResourû
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_fšdSubResourû
)

	)

1422 
	#u»s_g‘Bš¬y
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘Bš¬y
)

	)

1423 
	#u»s_g‘ByIndex
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘ByIndex
)

	)

1424 
	#u»s_g‘ByKey
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘ByKey
)

	)

1425 
	#u»s_g‘ByKeyW™hF®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘ByKeyW™hF®lback
)

	)

1426 
	#u»s_g‘FunùiÚ®Equiv®’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘FunùiÚ®Equiv®’t
)

	)

1427 
	#u»s_g‘IÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘IÁ
)

	)

1428 
	#u»s_g‘IÁVeùÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘IÁVeùÜ
)

	)

1429 
	#u»s_g‘Key
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘Key
)

	)

1430 
	#u»s_g‘KeywÜdV®ues
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘KeywÜdV®ues
)

	)

1431 
	#u»s_g‘LoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘LoÿË
)

	)

1432 
	#u»s_g‘LoÿËByTy³
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘LoÿËByTy³
)

	)

1433 
	#u»s_g‘LoÿËIÁ”Çl
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘LoÿËIÁ”Çl
)

	)

1434 
	#u»s_g‘Name
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘Name
)

	)

1435 
	#u»s_g‘NextResourû
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘NextResourû
)

	)

1436 
	#u»s_g‘NextSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘NextSŒšg
)

	)

1437 
	#u»s_g‘Size
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘Size
)

	)

1438 
	#u»s_g‘SŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘SŒšg
)

	)

1439 
	#u»s_g‘SŒšgByIndex
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘SŒšgByIndex
)

	)

1440 
	#u»s_g‘SŒšgByKey
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘SŒšgByKey
)

	)

1441 
	#u»s_g‘SŒšgByKeyW™hF®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘SŒšgByKeyW™hF®lback
)

	)

1442 
	#u»s_g‘Ty³
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘Ty³
)

	)

1443 
	#u»s_g‘UIÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘UIÁ
)

	)

1444 
	#u»s_g‘UTF8SŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘UTF8SŒšg
)

	)

1445 
	#u»s_g‘UTF8SŒšgByIndex
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘UTF8SŒšgByIndex
)

	)

1446 
	#u»s_g‘UTF8SŒšgByKey
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘UTF8SŒšgByKey
)

	)

1447 
	#u»s_g‘V”siÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘V”siÚ
)

	)

1448 
	#u»s_g‘V”siÚByKey
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘V”siÚByKey
)

	)

1449 
	#u»s_g‘V”siÚNumb”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘V”siÚNumb”
)

	)

1450 
	#u»s_g‘V”siÚNumb”IÁ”Çl
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_g‘V”siÚNumb”IÁ”Çl
)

	)

1451 
	#u»s_hasNext
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_hasNext
)

	)

1452 
	#u»s_š™SckObjeù
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_š™SckObjeù
)

	)

1453 
	#u»s_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_İ’
)

	)

1454 
	#u»s_İ’AvaabËLoÿËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_İ’AvaabËLoÿËs
)

	)

1455 
	#u»s_İ’Dœeù
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_İ’Dœeù
)

	)

1456 
	#u»s_İ’FlIn
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_İ’FlIn
)

	)

1457 
	#u»s_İ’U
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_İ’U
)

	)

1458 
	#u»s_»£tI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_»£tI‹¿tÜ
)

	)

1459 
	#u»s_sw­
 
	`U_ICU_ENTRY_POINT_RENAME
(
u»s_sw­
)

	)

1460 
	#usüt_şo£Run
 
	`U_ICU_ENTRY_POINT_RENAME
(
usüt_şo£Run
)

	)

1461 
	#usüt_g‘Code
 
	`U_ICU_ENTRY_POINT_RENAME
(
usüt_g‘Code
)

	)

1462 
	#usüt_g‘Name
 
	`U_ICU_ENTRY_POINT_RENAME
(
usüt_g‘Name
)

	)

1463 
	#usüt_g‘Süt
 
	`U_ICU_ENTRY_POINT_RENAME
(
usüt_g‘Süt
)

	)

1464 
	#usüt_g‘SütEx‹nsiÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
usüt_g‘SütEx‹nsiÚs
)

	)

1465 
	#usüt_g‘ShÜtName
 
	`U_ICU_ENTRY_POINT_RENAME
(
usüt_g‘ShÜtName
)

	)

1466 
	#usüt_hasSüt
 
	`U_ICU_ENTRY_POINT_RENAME
(
usüt_hasSüt
)

	)

1467 
	#usüt_ÃxtRun
 
	`U_ICU_ENTRY_POINT_RENAME
(
usüt_ÃxtRun
)

	)

1468 
	#usüt_İ’Run
 
	`U_ICU_ENTRY_POINT_RENAME
(
usüt_İ’Run
)

	)

1469 
	#usüt_»£tRun
 
	`U_ICU_ENTRY_POINT_RENAME
(
usüt_»£tRun
)

	)

1470 
	#usüt_£tRunText
 
	`U_ICU_ENTRY_POINT_RENAME
(
usüt_£tRunText
)

	)

1471 
	#u£¬ch_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_şo£
)

	)

1472 
	#u£¬ch_fœ¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_fœ¡
)

	)

1473 
	#u£¬ch_fŞlowšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_fŞlowšg
)

	)

1474 
	#u£¬ch_g‘A‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_g‘A‰ribu‹
)

	)

1475 
	#u£¬ch_g‘B»akI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_g‘B»akI‹¿tÜ
)

	)

1476 
	#u£¬ch_g‘CŞÏtÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_g‘CŞÏtÜ
)

	)

1477 
	#u£¬ch_g‘M©chedL’gth
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_g‘M©chedL’gth
)

	)

1478 
	#u£¬ch_g‘M©chedS¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_g‘M©chedS¹
)

	)

1479 
	#u£¬ch_g‘M©chedText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_g‘M©chedText
)

	)

1480 
	#u£¬ch_g‘Off£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_g‘Off£t
)

	)

1481 
	#u£¬ch_g‘P©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_g‘P©‹º
)

	)

1482 
	#u£¬ch_g‘Text
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_g‘Text
)

	)

1483 
	#u£¬ch_hªdËNextCªÚiÿl
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_hªdËNextCªÚiÿl
)

	)

1484 
	#u£¬ch_hªdËNextExaù
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_hªdËNextExaù
)

	)

1485 
	#u£¬ch_hªdËP»viousCªÚiÿl
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_hªdËP»viousCªÚiÿl
)

	)

1486 
	#u£¬ch_hªdËP»viousExaù
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_hªdËP»viousExaù
)

	)

1487 
	#u£¬ch_Ï¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_Ï¡
)

	)

1488 
	#u£¬ch_Ãxt
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_Ãxt
)

	)

1489 
	#u£¬ch_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_İ’
)

	)

1490 
	#u£¬ch_İ’FromCŞÏtÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_İ’FromCŞÏtÜ
)

	)

1491 
	#u£¬ch_´eûdšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_´eûdšg
)

	)

1492 
	#u£¬ch_´evious
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_´evious
)

	)

1493 
	#u£¬ch_»£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_»£t
)

	)

1494 
	#u£¬ch_£¬ch
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_£¬ch
)

	)

1495 
	#u£¬ch_£¬chBackw¬ds
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_£¬chBackw¬ds
)

	)

1496 
	#u£¬ch_£tA‰ribu‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_£tA‰ribu‹
)

	)

1497 
	#u£¬ch_£tB»akI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_£tB»akI‹¿tÜ
)

	)

1498 
	#u£¬ch_£tCŞÏtÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_£tCŞÏtÜ
)

	)

1499 
	#u£¬ch_£tOff£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_£tOff£t
)

	)

1500 
	#u£¬ch_£tP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_£tP©‹º
)

	)

1501 
	#u£¬ch_£tText
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£¬ch_£tText
)

	)

1502 
	#u£t_add
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_add
)

	)

1503 
	#u£t_addAÎ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_addAÎ
)

	)

1504 
	#u£t_addAÎCodePošts
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_addAÎCodePošts
)

	)

1505 
	#u£t_addRªge
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_addRªge
)

	)

1506 
	#u£t_addSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_addSŒšg
)

	)

1507 
	#u£t_­¶yIÁPrİ”tyV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_­¶yIÁPrİ”tyV®ue
)

	)

1508 
	#u£t_­¶yP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_­¶yP©‹º
)

	)

1509 
	#u£t_­¶yPrİ”tyAlŸs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_­¶yPrİ”tyAlŸs
)

	)

1510 
	#u£t_ch¬At
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_ch¬At
)

	)

1511 
	#u£t_ş—r
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_ş—r
)

	)

1512 
	#u£t_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_şÚe
)

	)

1513 
	#u£t_şÚeAsThawed
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_şÚeAsThawed
)

	)

1514 
	#u£t_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_şo£
)

	)

1515 
	#u£t_şo£Ov”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_şo£Ov”
)

	)

1516 
	#u£t_com·ù
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_com·ù
)

	)

1517 
	#u£t_com¶em’t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_com¶em’t
)

	)

1518 
	#u£t_com¶em’tAÎ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_com¶em’tAÎ
)

	)

1519 
	#u£t_cÚšs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_cÚšs
)

	)

1520 
	#u£t_cÚšsAÎ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_cÚšsAÎ
)

	)

1521 
	#u£t_cÚšsAÎCodePošts
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_cÚšsAÎCodePošts
)

	)

1522 
	#u£t_cÚšsNÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_cÚšsNÚe
)

	)

1523 
	#u£t_cÚšsRªge
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_cÚšsRªge
)

	)

1524 
	#u£t_cÚšsSome
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_cÚšsSome
)

	)

1525 
	#u£t_cÚšsSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_cÚšsSŒšg
)

	)

1526 
	#u£t_equ®s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_equ®s
)

	)

1527 
	#u£t_ä“ze
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_ä“ze
)

	)

1528 
	#u£t_g‘I‹m
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_g‘I‹m
)

	)

1529 
	#u£t_g‘I‹mCouÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_g‘I‹mCouÁ
)

	)

1530 
	#u£t_g‘S”ŸlizedRªge
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_g‘S”ŸlizedRªge
)

	)

1531 
	#u£t_g‘S”ŸlizedRªgeCouÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_g‘S”ŸlizedRªgeCouÁ
)

	)

1532 
	#u£t_g‘S”ŸlizedS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_g‘S”ŸlizedS‘
)

	)

1533 
	#u£t_šdexOf
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_šdexOf
)

	)

1534 
	#u£t_isEm±y
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_isEm±y
)

	)

1535 
	#u£t_isFroz’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_isFroz’
)

	)

1536 
	#u£t_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_İ’
)

	)

1537 
	#u£t_İ’Em±y
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_İ’Em±y
)

	)

1538 
	#u£t_İ’P©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_İ’P©‹º
)

	)

1539 
	#u£t_İ’P©‹ºO±iÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_İ’P©‹ºO±iÚs
)

	)

1540 
	#u£t_»move
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_»move
)

	)

1541 
	#u£t_»moveAÎ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_»moveAÎ
)

	)

1542 
	#u£t_»moveAÎSŒšgs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_»moveAÎSŒšgs
)

	)

1543 
	#u£t_»moveRªge
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_»moveRªge
)

	)

1544 
	#u£t_»moveSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_»moveSŒšg
)

	)

1545 
	#u£t_»£mbËsP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_»£mbËsP©‹º
)

	)

1546 
	#u£t_»š
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_»š
)

	)

1547 
	#u£t_»šAÎ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_»šAÎ
)

	)

1548 
	#u£t_£rŸlize
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_£rŸlize
)

	)

1549 
	#u£t_£rŸlizedCÚšs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_£rŸlizedCÚšs
)

	)

1550 
	#u£t_£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_£t
)

	)

1551 
	#u£t_£tS”ŸlizedToOÃ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_£tS”ŸlizedToOÃ
)

	)

1552 
	#u£t_size
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_size
)

	)

1553 
	#u£t_¥ª
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_¥ª
)

	)

1554 
	#u£t_¥ªBack
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_¥ªBack
)

	)

1555 
	#u£t_¥ªBackUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_¥ªBackUTF8
)

	)

1556 
	#u£t_¥ªUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_¥ªUTF8
)

	)

1557 
	#u£t_toP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
u£t_toP©‹º
)

	)

1558 
	#u¥oof_¬eCÚfu§bË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_¬eCÚfu§bË
)

	)

1559 
	#u¥oof_¬eCÚfu§bËUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_¬eCÚfu§bËUTF8
)

	)

1560 
	#u¥oof_¬eCÚfu§bËUnicodeSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_¬eCÚfu§bËUnicodeSŒšg
)

	)

1561 
	#u¥oof_check
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_check
)

	)

1562 
	#u¥oof_checkUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_checkUTF8
)

	)

1563 
	#u¥oof_checkUnicodeSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_checkUnicodeSŒšg
)

	)

1564 
	#u¥oof_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_şÚe
)

	)

1565 
	#u¥oof_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_şo£
)

	)

1566 
	#u¥oof_g‘AÎowedCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_g‘AÎowedCh¬s
)

	)

1567 
	#u¥oof_g‘AÎowedLoÿËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_g‘AÎowedLoÿËs
)

	)

1568 
	#u¥oof_g‘AÎowedUnicodeS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_g‘AÎowedUnicodeS‘
)

	)

1569 
	#u¥oof_g‘Checks
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_g‘Checks
)

	)

1570 
	#u¥oof_g‘Sk–‘Ú
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_g‘Sk–‘Ú
)

	)

1571 
	#u¥oof_g‘Sk–‘ÚUTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_g‘Sk–‘ÚUTF8
)

	)

1572 
	#u¥oof_g‘Sk–‘ÚUnicodeSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_g‘Sk–‘ÚUnicodeSŒšg
)

	)

1573 
	#u¥oof_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_İ’
)

	)

1574 
	#u¥oof_İ’FromS”Ÿlized
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_İ’FromS”Ÿlized
)

	)

1575 
	#u¥oof_İ’FromSourû
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_İ’FromSourû
)

	)

1576 
	#u¥oof_£rŸlize
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_£rŸlize
)

	)

1577 
	#u¥oof_£tAÎowedCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_£tAÎowedCh¬s
)

	)

1578 
	#u¥oof_£tAÎowedLoÿËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_£tAÎowedLoÿËs
)

	)

1579 
	#u¥oof_£tAÎowedUnicodeS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_£tAÎowedUnicodeS‘
)

	)

1580 
	#u¥oof_£tChecks
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_£tChecks
)

	)

1581 
	#u¥oof_sw­
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥oof_sw­
)

	)

1582 
	#u¥»p_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥»p_şo£
)

	)

1583 
	#u¥»p_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥»p_İ’
)

	)

1584 
	#u¥»p_İ’ByTy³
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥»p_İ’ByTy³
)

	)

1585 
	#u¥»p_´•¬e
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥»p_´•¬e
)

	)

1586 
	#u¥»p_sw­
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¥»p_sw­
)

	)

1587 
	#u¡r_fŞdCa£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¡r_fŞdCa£
)

	)

1588 
	#u¡r_toLow”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¡r_toLow”
)

	)

1589 
	#u¡r_toT™Ë
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¡r_toT™Ë
)

	)

1590 
	#u¡r_toUµ”
 
	`U_ICU_ENTRY_POINT_RENAME
(
u¡r_toUµ”
)

	)

1591 
	#u‹xt_ÿ£Com·»
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_ÿ£Com·»
)

	)

1592 
	#u‹xt_ÿ£Com·»N©iveLim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_ÿ£Com·»N©iveLim™
)

	)

1593 
	#u‹xt_ch¬32At
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_ch¬32At
)

	)

1594 
	#u‹xt_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_şÚe
)

	)

1595 
	#u‹xt_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_şo£
)

	)

1596 
	#u‹xt_com·»
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_com·»
)

	)

1597 
	#u‹xt_com·»N©iveLim™
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_com·»N©iveLim™
)

	)

1598 
	#u‹xt_cİy
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_cİy
)

	)

1599 
	#u‹xt_cu¼’t32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_cu¼’t32
)

	)

1600 
	#u‹xt_equ®s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_equ®s
)

	)

1601 
	#u‹xt_exŒaù
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_exŒaù
)

	)

1602 
	#u‹xt_ä“ze
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_ä“ze
)

	)

1603 
	#u‹xt_g‘N©iveIndex
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_g‘N©iveIndex
)

	)

1604 
	#u‹xt_g‘P»viousN©iveIndex
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_g‘P»viousN©iveIndex
)

	)

1605 
	#u‹xt_hasM‘aD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_hasM‘aD©a
)

	)

1606 
	#u‹xt_isL’gthEx³nsive
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_isL’gthEx³nsive
)

	)

1607 
	#u‹xt_isWr™abË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_isWr™abË
)

	)

1608 
	#u‹xt_moveIndex32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_moveIndex32
)

	)

1609 
	#u‹xt_ÇtiveL’gth
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_ÇtiveL’gth
)

	)

1610 
	#u‹xt_Ãxt32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_Ãxt32
)

	)

1611 
	#u‹xt_Ãxt32From
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_Ãxt32From
)

	)

1612 
	#u‹xt_İ’Ch¬aù”I‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_İ’Ch¬aù”I‹¿tÜ
)

	)

1613 
	#u‹xt_İ’CÚ¡UnicodeSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_İ’CÚ¡UnicodeSŒšg
)

	)

1614 
	#u‹xt_İ’R•ÏûabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_İ’R•ÏûabË
)

	)

1615 
	#u‹xt_İ’UCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_İ’UCh¬s
)

	)

1616 
	#u‹xt_İ’UTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_İ’UTF8
)

	)

1617 
	#u‹xt_İ’UnicodeSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_İ’UnicodeSŒšg
)

	)

1618 
	#u‹xt_´evious32
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_´evious32
)

	)

1619 
	#u‹xt_´evious32From
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_´evious32From
)

	)

1620 
	#u‹xt_»¶aû
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_»¶aû
)

	)

1621 
	#u‹xt_£tN©iveIndex
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_£tN©iveIndex
)

	)

1622 
	#u‹xt_£tup
 
	`U_ICU_ENTRY_POINT_RENAME
(
u‹xt_£tup
)

	)

1623 
	#utf8_­³ndCh¬SaãBody
 
	`U_ICU_ENTRY_POINT_RENAME
(
utf8_­³ndCh¬SaãBody
)

	)

1624 
	#utf8_back1SaãBody
 
	`U_ICU_ENTRY_POINT_RENAME
(
utf8_back1SaãBody
)

	)

1625 
	#utf8_couÁT¿By‹s
 
	`U_ICU_ENTRY_POINT_RENAME
(
utf8_couÁT¿By‹s
)

	)

1626 
	#utf8_ÃxtCh¬SaãBody
 
	`U_ICU_ENTRY_POINT_RENAME
(
utf8_ÃxtCh¬SaãBody
)

	)

1627 
	#utf8_´evCh¬SaãBody
 
	`U_ICU_ENTRY_POINT_RENAME
(
utf8_´evCh¬SaãBody
)

	)

1628 
	#utmsÿË_äomIÁ64
 
	`U_ICU_ENTRY_POINT_RENAME
(
utmsÿË_äomIÁ64
)

	)

1629 
	#utmsÿË_g‘TimeSÿËV®ue
 
	`U_ICU_ENTRY_POINT_RENAME
(
utmsÿË_g‘TimeSÿËV®ue
)

	)

1630 
	#utmsÿË_toIÁ64
 
	`U_ICU_ENTRY_POINT_RENAME
(
utmsÿË_toIÁ64
)

	)

1631 
	#uŒaû_ş—nup
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_ş—nup
)

	)

1632 
	#uŒaû_d©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_d©a
)

	)

1633 
	#uŒaû_’Œy
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_’Œy
)

	)

1634 
	#uŒaû_ex™
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_ex™
)

	)

1635 
	#uŒaû_fÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_fÜm©
)

	)

1636 
	#uŒaû_funùiÚName
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_funùiÚName
)

	)

1637 
	#uŒaû_g‘FunùiÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_g‘FunùiÚs
)

	)

1638 
	#uŒaû_g‘Lev–
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_g‘Lev–
)

	)

1639 
	#uŒaû_Ëv–
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_Ëv–
)

	)

1640 
	#uŒaû_£tFunùiÚs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_£tFunùiÚs
)

	)

1641 
	#uŒaû_£tLev–
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_£tLev–
)

	)

1642 
	#uŒaû_vfÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒaû_vfÜm©
)

	)

1643 
	#uŒªs_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_şÚe
)

	)

1644 
	#uŒªs_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_şo£
)

	)

1645 
	#uŒªs_couÁAvaabËIDs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_couÁAvaabËIDs
)

	)

1646 
	#uŒªs_g‘AvaabËID
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_g‘AvaabËID
)

	)

1647 
	#uŒªs_g‘ID
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_g‘ID
)

	)

1648 
	#uŒªs_g‘UnicodeID
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_g‘UnicodeID
)

	)

1649 
	#uŒªs_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_İ’
)

	)

1650 
	#uŒªs_İ’IDs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_İ’IDs
)

	)

1651 
	#uŒªs_İ’Inv”£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_İ’Inv”£
)

	)

1652 
	#uŒªs_İ’U
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_İ’U
)

	)

1653 
	#uŒªs_»gi¡”
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_»gi¡”
)

	)

1654 
	#uŒªs_»p_ÿ£CÚ‹xtI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_»p_ÿ£CÚ‹xtI‹¿tÜ
)

	)

1655 
	#uŒªs_£tF‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_£tF‹r
)

	)

1656 
	#uŒªs_¡rRuËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_¡rRuËs
)

	)

1657 
	#uŒªs_Œªs
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_Œªs
)

	)

1658 
	#uŒªs_ŒªsInüem’l
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_ŒªsInüem’l
)

	)

1659 
	#uŒªs_ŒªsInüem’lUCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_ŒªsInüem’lUCh¬s
)

	)

1660 
	#uŒªs_ŒªsUCh¬s
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_ŒªsUCh¬s
)

	)

1661 
	#uŒªs_Œª¦™”©Ü_ş—nup
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_Œª¦™”©Ü_ş—nup
)

	)

1662 
	#uŒªs_uÄegi¡”
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_uÄegi¡”
)

	)

1663 
	#uŒªs_uÄegi¡”ID
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒªs_uÄegi¡”ID
)

	)

1664 
	#uŒ›2_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_şÚe
)

	)

1665 
	#uŒ›2_şÚeAsThawed
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_şÚeAsThawed
)

	)

1666 
	#uŒ›2_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_şo£
)

	)

1667 
	#uŒ›2_’um
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_’um
)

	)

1668 
	#uŒ›2_’umFÜL—dSu¼og©e
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_’umFÜL—dSu¼og©e
)

	)

1669 
	#uŒ›2_ä“ze
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_ä“ze
)

	)

1670 
	#uŒ›2_äomUTr›
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_äomUTr›
)

	)

1671 
	#uŒ›2_g‘32
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_g‘32
)

	)

1672 
	#uŒ›2_g‘32FromL—dSu¼og©eCodeUn™
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_g‘32FromL—dSu¼og©eCodeUn™
)

	)

1673 
	#uŒ›2_g‘V”siÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_g‘V”siÚ
)

	)

1674 
	#uŒ›2_š‹º®U8NextIndex
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_š‹º®U8NextIndex
)

	)

1675 
	#uŒ›2_š‹º®U8P»vIndex
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_š‹º®U8P»vIndex
)

	)

1676 
	#uŒ›2_isFroz’
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_isFroz’
)

	)

1677 
	#uŒ›2_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_İ’
)

	)

1678 
	#uŒ›2_İ’Dummy
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_İ’Dummy
)

	)

1679 
	#uŒ›2_İ’FromS”Ÿlized
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_İ’FromS”Ÿlized
)

	)

1680 
	#uŒ›2_£rŸlize
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_£rŸlize
)

	)

1681 
	#uŒ›2_£t32
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_£t32
)

	)

1682 
	#uŒ›2_£t32FÜL—dSu¼og©eCodeUn™
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_£t32FÜL—dSu¼og©eCodeUn™
)

	)

1683 
	#uŒ›2_£tRªge32
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_£tRªge32
)

	)

1684 
	#uŒ›2_sw­
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_sw­
)

	)

1685 
	#uŒ›2_sw­AnyV”siÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›2_sw­AnyV”siÚ
)

	)

1686 
	#uŒ›_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_şÚe
)

	)

1687 
	#uŒ›_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_şo£
)

	)

1688 
	#uŒ›_deçuÉG‘FŞdšgOff£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_deçuÉG‘FŞdšgOff£t
)

	)

1689 
	#uŒ›_’um
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_’um
)

	)

1690 
	#uŒ›_g‘32
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_g‘32
)

	)

1691 
	#uŒ›_g‘D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_g‘D©a
)

	)

1692 
	#uŒ›_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_İ’
)

	)

1693 
	#uŒ›_£rŸlize
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_£rŸlize
)

	)

1694 
	#uŒ›_£t32
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_£t32
)

	)

1695 
	#uŒ›_£tRªge32
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_£tRªge32
)

	)

1696 
	#uŒ›_sw­
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_sw­
)

	)

1697 
	#uŒ›_un£rŸlize
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_un£rŸlize
)

	)

1698 
	#uŒ›_un£rŸlizeDummy
 
	`U_ICU_ENTRY_POINT_RENAME
(
uŒ›_un£rŸlizeDummy
)

	)

1699 
	#vzÚe_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_şÚe
)

	)

1700 
	#vzÚe_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_şo£
)

	)

1701 
	#vzÚe_couÁT¿ns™iÚRuËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_couÁT¿ns™iÚRuËs
)

	)

1702 
	#vzÚe_equ®s
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_equ®s
)

	)

1703 
	#vzÚe_g‘DyÇmicCÏssID
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_g‘DyÇmicCÏssID
)

	)

1704 
	#vzÚe_g‘La¡Modif›d
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_g‘La¡Modif›d
)

	)

1705 
	#vzÚe_g‘NextT¿ns™iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_g‘NextT¿ns™iÚ
)

	)

1706 
	#vzÚe_g‘Off£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_g‘Off£t
)

	)

1707 
	#vzÚe_g‘Off£t2
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_g‘Off£t2
)

	)

1708 
	#vzÚe_g‘Off£t3
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_g‘Off£t3
)

	)

1709 
	#vzÚe_g‘P»viousT¿ns™iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_g‘P»viousT¿ns™iÚ
)

	)

1710 
	#vzÚe_g‘RawOff£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_g‘RawOff£t
)

	)

1711 
	#vzÚe_g‘SticCÏssID
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_g‘SticCÏssID
)

	)

1712 
	#vzÚe_g‘TZURL
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_g‘TZURL
)

	)

1713 
	#vzÚe_hasSameRuËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_hasSameRuËs
)

	)

1714 
	#vzÚe_šDaylightTime
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_šDaylightTime
)

	)

1715 
	#vzÚe_İ’D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_İ’D©a
)

	)

1716 
	#vzÚe_İ’ID
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_İ’ID
)

	)

1717 
	#vzÚe_£tLa¡Modif›d
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_£tLa¡Modif›d
)

	)

1718 
	#vzÚe_£tRawOff£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_£tRawOff£t
)

	)

1719 
	#vzÚe_£tTZURL
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_£tTZURL
)

	)

1720 
	#vzÚe_u£DaylightTime
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_u£DaylightTime
)

	)

1721 
	#vzÚe_wr™e
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_wr™e
)

	)

1722 
	#vzÚe_wr™eFromS¹
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_wr™eFromS¹
)

	)

1723 
	#vzÚe_wr™eSim¶e
 
	`U_ICU_ENTRY_POINT_RENAME
(
vzÚe_wr™eSim¶e
)

	)

1724 
	#zruË_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
zruË_şo£
)

	)

1725 
	#zruË_equ®s
 
	`U_ICU_ENTRY_POINT_RENAME
(
zruË_equ®s
)

	)

1726 
	#zruË_g‘DSTSavšgs
 
	`U_ICU_ENTRY_POINT_RENAME
(
zruË_g‘DSTSavšgs
)

	)

1727 
	#zruË_g‘Name
 
	`U_ICU_ENTRY_POINT_RENAME
(
zruË_g‘Name
)

	)

1728 
	#zruË_g‘RawOff£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
zruË_g‘RawOff£t
)

	)

1729 
	#zruË_isEquiv®’tTo
 
	`U_ICU_ENTRY_POINT_RENAME
(
zruË_isEquiv®’tTo
)

	)

1730 
	#zŒªs_adİtFrom
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_adİtFrom
)

	)

1731 
	#zŒªs_adİtTo
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_adİtTo
)

	)

1732 
	#zŒªs_şÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_şÚe
)

	)

1733 
	#zŒªs_şo£
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_şo£
)

	)

1734 
	#zŒªs_equ®s
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_equ®s
)

	)

1735 
	#zŒªs_g‘DyÇmicCÏssID
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_g‘DyÇmicCÏssID
)

	)

1736 
	#zŒªs_g‘From
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_g‘From
)

	)

1737 
	#zŒªs_g‘SticCÏssID
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_g‘SticCÏssID
)

	)

1738 
	#zŒªs_g‘Time
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_g‘Time
)

	)

1739 
	#zŒªs_g‘To
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_g‘To
)

	)

1740 
	#zŒªs_İ’
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_İ’
)

	)

1741 
	#zŒªs_İ’Em±y
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_İ’Em±y
)

	)

1742 
	#zŒªs_£tFrom
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_£tFrom
)

	)

1743 
	#zŒªs_£tTime
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_£tTime
)

	)

1744 
	#zŒªs_£tTo
 
	`U_ICU_ENTRY_POINT_RENAME
(
zŒªs_£tTo
)

	)

1749 #ifdeà
XP_CPLUSPLUS


1750 #ià!
U_HAVE_NAMESPACE


1752 
	#AbsŞu‹V®ueSub¡™utiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
AbsŞu‹V®ueSub¡™utiÚ
)

	)

1753 
	#AÉ”Ç‹Sub¡™utiÚSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
AÉ”Ç‹Sub¡™utiÚSubbË
)

	)

1754 
	#AnchÜTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
AnchÜTabË
)

	)

1755 
	#AndCÚ¡¿št
 
	`U_ICU_ENTRY_POINT_RENAME
(
AndCÚ¡¿št
)

	)

1756 
	#AÂu®TimeZÚeRuË
 
	`U_ICU_ENTRY_POINT_RENAME
(
AÂu®TimeZÚeRuË
)

	)

1757 
	#AnyT¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
AnyT¿n¦™”©Ü
)

	)

1758 
	#A¿bicO³nTy³LayoutEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
A¿bicO³nTy³LayoutEngše
)

	)

1759 
	#A¿bicSh­šg
 
	`U_ICU_ENTRY_POINT_RENAME
(
A¿bicSh­šg
)

	)

1760 
	#ArgExŒaùÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ArgExŒaùÜ
)

	)

1761 
	#BMPS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
BMPS‘
)

	)

1762 
	#Backw¬dUTr›2SŒšgI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Backw¬dUTr›2SŒšgI‹¿tÜ
)

	)

1763 
	#BadCh¬aù”TabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
BadCh¬aù”TabË
)

	)

1764 
	#BasicC®’d¬FaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
BasicC®’d¬FaùÜy
)

	)

1765 
	#BasicTimeZÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
BasicTimeZÚe
)

	)

1766 
	#Bš¬yS—rchLookupTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
Bš¬yS—rchLookupTabË
)

	)

1767 
	#Boy”MoÜeS—rch
 
	`U_ICU_ENTRY_POINT_RENAME
(
Boy”MoÜeS—rch
)

	)

1768 
	#B»akI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
B»akI‹¿tÜ
)

	)

1769 
	#B»akT¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
B»akT¿n¦™”©Ü
)

	)

1770 
	#Buddhi¡C®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
Buddhi¡C®’d¬
)

	)

1771 
	#BudCom·ùTr›HÜizÚlNode
 
	`U_ICU_ENTRY_POINT_RENAME
(
BudCom·ùTr›HÜizÚlNode
)

	)

1772 
	#BudCom·ùTr›Node
 
	`U_ICU_ENTRY_POINT_RENAME
(
BudCom·ùTr›Node
)

	)

1773 
	#BudCom·ùTr›V”tiÿlNode
 
	`U_ICU_ENTRY_POINT_RENAME
(
BudCom·ùTr›V”tiÿlNode
)

	)

1774 
	#Bud”SütS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
Bud”SütS‘
)

	)

1775 
	#By‹Sšk
 
	`U_ICU_ENTRY_POINT_RENAME
(
By‹Sšk
)

	)

1776 
	#CEBufãr
 
	`U_ICU_ENTRY_POINT_RENAME
(
CEBufãr
)

	)

1777 
	#CEC®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
CEC®’d¬
)

	)

1778 
	#CELi¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
CELi¡
)

	)

1779 
	#CEToSŒšgsM­
 
	`U_ICU_ENTRY_POINT_RENAME
(
CEToSŒšgsM­
)

	)

1780 
	#CFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
CFaùÜy
)

	)

1781 
	#C®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
C®’d¬
)

	)

1782 
	#C®’d¬A¡rÚom”
 
	`U_ICU_ENTRY_POINT_RENAME
(
C®’d¬A¡rÚom”
)

	)

1783 
	#C®’d¬Cache
 
	`U_ICU_ENTRY_POINT_RENAME
(
C®’d¬Cache
)

	)

1784 
	#C®’d¬D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
C®’d¬D©a
)

	)

1785 
	#C®’d¬S”viû
 
	`U_ICU_ENTRY_POINT_RENAME
(
C®’d¬S”viû
)

	)

1786 
	#CªÚI‹rD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
CªÚI‹rD©a
)

	)

1787 
	#CªÚI‹rD©aSšgËtÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
CªÚI‹rD©aSšgËtÚ
)

	)

1788 
	#CªÚM¬kF‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
CªÚM¬kF‹r
)

	)

1789 
	#CªÚSh­šg
 
	`U_ICU_ENTRY_POINT_RENAME
(
CªÚSh­šg
)

	)

1790 
	#CªÚiÿlI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
CªÚiÿlI‹¿tÜ
)

	)

1791 
	#Ca£M­T¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ca£M­T¿n¦™”©Ü
)

	)

1792 
	#ChaššgCÚ‹xtu®Sub¡™utiÚFÜm©1SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ChaššgCÚ‹xtu®Sub¡™utiÚFÜm©1SubbË
)

	)

1793 
	#ChaššgCÚ‹xtu®Sub¡™utiÚFÜm©2SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ChaššgCÚ‹xtu®Sub¡™utiÚFÜm©2SubbË
)

	)

1794 
	#ChaššgCÚ‹xtu®Sub¡™utiÚFÜm©3SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ChaššgCÚ‹xtu®Sub¡™utiÚFÜm©3SubbË
)

	)

1795 
	#ChaššgCÚ‹xtu®Sub¡™utiÚSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ChaššgCÚ‹xtu®Sub¡™utiÚSubbË
)

	)

1796 
	#Ch¬SŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬SŒšg
)

	)

1797 
	#Ch¬Sub¡™utiÚF‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬Sub¡™utiÚF‹r
)

	)

1798 
	#Ch¬aù”I‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬aù”I‹¿tÜ
)

	)

1799 
	#Ch¬aù”Node
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬aù”Node
)

	)

1800 
	#Ch¬£tD‘eùÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tD‘eùÜ
)

	)

1801 
	#Ch¬£tM©ch
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tM©ch
)

	)

1802 
	#Ch¬£tRecog_2022
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_2022
)

	)

1803 
	#Ch¬£tRecog_2022CN
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_2022CN
)

	)

1804 
	#Ch¬£tRecog_2022JP
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_2022JP
)

	)

1805 
	#Ch¬£tRecog_2022KR
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_2022KR
)

	)

1806 
	#Ch¬£tRecog_8859_1
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_1
)

	)

1807 
	#Ch¬£tRecog_8859_1_da
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_1_da
)

	)

1808 
	#Ch¬£tRecog_8859_1_de
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_1_de
)

	)

1809 
	#Ch¬£tRecog_8859_1_’
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_1_’
)

	)

1810 
	#Ch¬£tRecog_8859_1_es
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_1_es
)

	)

1811 
	#Ch¬£tRecog_8859_1_ä
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_1_ä
)

	)

1812 
	#Ch¬£tRecog_8859_1_™
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_1_™
)

	)

1813 
	#Ch¬£tRecog_8859_1_Æ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_1_Æ
)

	)

1814 
	#Ch¬£tRecog_8859_1_no
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_1_no
)

	)

1815 
	#Ch¬£tRecog_8859_1_±
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_1_±
)

	)

1816 
	#Ch¬£tRecog_8859_1_sv
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_1_sv
)

	)

1817 
	#Ch¬£tRecog_8859_2
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_2
)

	)

1818 
	#Ch¬£tRecog_8859_2_cs
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_2_cs
)

	)

1819 
	#Ch¬£tRecog_8859_2_hu
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_2_hu
)

	)

1820 
	#Ch¬£tRecog_8859_2_¶
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_2_¶
)

	)

1821 
	#Ch¬£tRecog_8859_2_ro
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_2_ro
)

	)

1822 
	#Ch¬£tRecog_8859_5
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_5
)

	)

1823 
	#Ch¬£tRecog_8859_5_ru
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_5_ru
)

	)

1824 
	#Ch¬£tRecog_8859_6
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_6
)

	)

1825 
	#Ch¬£tRecog_8859_6_¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_6_¬
)

	)

1826 
	#Ch¬£tRecog_8859_7
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_7
)

	)

1827 
	#Ch¬£tRecog_8859_7_–
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_7_–
)

	)

1828 
	#Ch¬£tRecog_8859_8
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_8
)

	)

1829 
	#Ch¬£tRecog_8859_8_I_he
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_8_I_he
)

	)

1830 
	#Ch¬£tRecog_8859_8_he
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_8_he
)

	)

1831 
	#Ch¬£tRecog_8859_9
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_9
)

	)

1832 
	#Ch¬£tRecog_8859_9_Œ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_8859_9_Œ
)

	)

1833 
	#Ch¬£tRecog_IBM420_¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_IBM420_¬
)

	)

1834 
	#Ch¬£tRecog_IBM420_¬_Ér
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_IBM420_¬_Ér
)

	)

1835 
	#Ch¬£tRecog_IBM420_¬_¹l
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_IBM420_¬_¹l
)

	)

1836 
	#Ch¬£tRecog_IBM424_he
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_IBM424_he
)

	)

1837 
	#Ch¬£tRecog_IBM424_he_Ér
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_IBM424_he_Ér
)

	)

1838 
	#Ch¬£tRecog_IBM424_he_¹l
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_IBM424_he_¹l
)

	)

1839 
	#Ch¬£tRecog_KOI8_R
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_KOI8_R
)

	)

1840 
	#Ch¬£tRecog_UTF8
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_UTF8
)

	)

1841 
	#Ch¬£tRecog_UTF_16_BE
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_UTF_16_BE
)

	)

1842 
	#Ch¬£tRecog_UTF_16_LE
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_UTF_16_LE
)

	)

1843 
	#Ch¬£tRecog_UTF_32
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_UTF_32
)

	)

1844 
	#Ch¬£tRecog_UTF_32_BE
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_UTF_32_BE
)

	)

1845 
	#Ch¬£tRecog_UTF_32_LE
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_UTF_32_LE
)

	)

1846 
	#Ch¬£tRecog_Unicode
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_Unicode
)

	)

1847 
	#Ch¬£tRecog_big5
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_big5
)

	)

1848 
	#Ch¬£tRecog_euc
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_euc
)

	)

1849 
	#Ch¬£tRecog_euc_jp
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_euc_jp
)

	)

1850 
	#Ch¬£tRecog_euc_kr
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_euc_kr
)

	)

1851 
	#Ch¬£tRecog_gb_18030
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_gb_18030
)

	)

1852 
	#Ch¬£tRecog_mbcs
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_mbcs
)

	)

1853 
	#Ch¬£tRecog_sbcs
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_sbcs
)

	)

1854 
	#Ch¬£tRecog_sjis
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_sjis
)

	)

1855 
	#Ch¬£tRecog_wšdows_1251
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_wšdows_1251
)

	)

1856 
	#Ch¬£tRecog_wšdows_1256
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecog_wšdows_1256
)

	)

1857 
	#Ch¬£tRecogniz”
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ch¬£tRecogniz”
)

	)

1858 
	#CheckedA¼ayBy‹Sšk
 
	`U_ICU_ENTRY_POINT_RENAME
(
CheckedA¼ayBy‹Sšk
)

	)

1859 
	#Chše£C®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
Chše£C®’d¬
)

	)

1860 
	#ChoiûFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
ChoiûFÜm©
)

	)

1861 
	#CÏssDefFÜm©1TabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
CÏssDefFÜm©1TabË
)

	)

1862 
	#CÏssDefFÜm©2TabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
CÏssDefFÜm©2TabË
)

	)

1863 
	#CÏssDefš™iÚTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
CÏssDefš™iÚTabË
)

	)

1864 
	#ClockM©h
 
	`U_ICU_ENTRY_POINT_RENAME
(
ClockM©h
)

	)

1865 
	#CŞlD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
CŞlD©a
)

	)

1866 
	#CŞlD©aCache
 
	`U_ICU_ENTRY_POINT_RENAME
(
CŞlD©aCache
)

	)

1867 
	#CŞlD©aCacheEÁry
 
	`U_ICU_ENTRY_POINT_RENAME
(
CŞlD©aCacheEÁry
)

	)

1868 
	#CŞÏtiÚEËm’tI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
CŞÏtiÚEËm’tI‹¿tÜ
)

	)

1869 
	#CŞÏtiÚKey
 
	`U_ICU_ENTRY_POINT_RENAME
(
CŞÏtiÚKey
)

	)

1870 
	#CŞÏtiÚLoÿËLi¡Enum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
CŞÏtiÚLoÿËLi¡Enum”©iÚ
)

	)

1871 
	#CŞÏtÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
CŞÏtÜ
)

	)

1872 
	#CŞÏtÜFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
CŞÏtÜFaùÜy
)

	)

1873 
	#Com·ùTr›DiùiÚ¬y
 
	`U_ICU_ENTRY_POINT_RENAME
(
Com·ùTr›DiùiÚ¬y
)

	)

1874 
	#Com·ùTr›Enum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Com·ùTr›Enum”©iÚ
)

	)

1875 
	#Compo£NÜm®iz”2
 
	`U_ICU_ENTRY_POINT_RENAME
(
Compo£NÜm®iz”2
)

	)

1876 
	#CompoundT¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
CompoundT¿n¦™”©Ü
)

	)

1877 
	#CÚfu§bËd©aBud”
 
	`U_ICU_ENTRY_POINT_RENAME
(
CÚfu§bËd©aBud”
)

	)

1878 
	#CÚ‹xtu®GlyphSub¡™utiÚProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
CÚ‹xtu®GlyphSub¡™utiÚProûssÜ
)

	)

1879 
	#CÚ‹xtu®Sub¡™utiÚBa£
 
	`U_ICU_ENTRY_POINT_RENAME
(
CÚ‹xtu®Sub¡™utiÚBa£
)

	)

1880 
	#CÚ‹xtu®Sub¡™utiÚFÜm©1SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
CÚ‹xtu®Sub¡™utiÚFÜm©1SubbË
)

	)

1881 
	#CÚ‹xtu®Sub¡™utiÚFÜm©2SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
CÚ‹xtu®Sub¡™utiÚFÜm©2SubbË
)

	)

1882 
	#CÚ‹xtu®Sub¡™utiÚFÜm©3SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
CÚ‹xtu®Sub¡™utiÚFÜm©3SubbË
)

	)

1883 
	#CÚ‹xtu®Sub¡™utiÚSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
CÚ‹xtu®Sub¡™utiÚSubbË
)

	)

1884 
	#CİticC®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
CİticC®’d¬
)

	)

1885 
	#Cov”ageFÜm©1TabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
Cov”ageFÜm©1TabË
)

	)

1886 
	#Cov”ageFÜm©2TabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
Cov”ageFÜm©2TabË
)

	)

1887 
	#Cov”ageTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
Cov”ageTabË
)

	)

1888 
	#Cu¼’cyAmouÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Cu¼’cyAmouÁ
)

	)

1889 
	#Cu¼’cyFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
Cu¼’cyFÜm©
)

	)

1890 
	#Cu¼’cyPlu¿lInfo
 
	`U_ICU_ENTRY_POINT_RENAME
(
Cu¼’cyPlu¿lInfo
)

	)

1891 
	#Cu¼’cyUn™
 
	`U_ICU_ENTRY_POINT_RENAME
(
Cu¼’cyUn™
)

	)

1892 
	#CursiveA‰achm’tSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
CursiveA‰achm’tSubbË
)

	)

1893 
	#DTRedundªtEnum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
DTRedundªtEnum”©iÚ
)

	)

1894 
	#DTSk–‘ÚEnum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
DTSk–‘ÚEnum”©iÚ
)

	)

1895 
	#D©eFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
D©eFÜm©
)

	)

1896 
	#D©eFÜm©SymbŞs
 
	`U_ICU_ENTRY_POINT_RENAME
(
D©eFÜm©SymbŞs
)

	)

1897 
	#D©eIÁ”v®
 
	`U_ICU_ENTRY_POINT_RENAME
(
D©eIÁ”v®
)

	)

1898 
	#D©eIÁ”v®FÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
D©eIÁ”v®FÜm©
)

	)

1899 
	#D©eIÁ”v®Info
 
	`U_ICU_ENTRY_POINT_RENAME
(
D©eIÁ”v®Info
)

	)

1900 
	#D©eTimeM©ch”
 
	`U_ICU_ENTRY_POINT_RENAME
(
D©eTimeM©ch”
)

	)

1901 
	#D©eTimeP©‹ºG’”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
D©eTimeP©‹ºG’”©Ü
)

	)

1902 
	#D©eTimeRuË
 
	`U_ICU_ENTRY_POINT_RENAME
(
D©eTimeRuË
)

	)

1903 
	#Decim®FÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
Decim®FÜm©
)

	)

1904 
	#Decim®FÜm©SymbŞs
 
	`U_ICU_ENTRY_POINT_RENAME
(
Decim®FÜm©SymbŞs
)

	)

1905 
	#Decompo£NÜm®iz”2
 
	`U_ICU_ENTRY_POINT_RENAME
(
Decompo£NÜm®iz”2
)

	)

1906 
	#DeçuÉC®’d¬FaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
DeçuÉC®’d¬FaùÜy
)

	)

1907 
	#DeçuÉCh¬M­³r
 
	`U_ICU_ENTRY_POINT_RENAME
(
DeçuÉCh¬M­³r
)

	)

1908 
	#DeviûTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
DeviûTabË
)

	)

1909 
	#DiùiÚ¬yB»akEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
DiùiÚ¬yB»akEngše
)

	)

1910 
	#Dig™Li¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
Dig™Li¡
)

	)

1911 
	#Di¡ªûInfo
 
	`U_ICU_ENTRY_POINT_RENAME
(
Di¡ªûInfo
)

	)

1912 
	#EnumToOff£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
EnumToOff£t
)

	)

1913 
	#E¼ÜCode
 
	`U_ICU_ENTRY_POINT_RENAME
(
E¼ÜCode
)

	)

1914 
	#Esÿ³T¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
Esÿ³T¿n¦™”©Ü
)

	)

1915 
	#EthiİicC®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
EthiİicC®’d¬
)

	)

1916 
	#Ev’tLi¡’”
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ev’tLi¡’”
)

	)

1917 
	#Ex‹nsiÚSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ex‹nsiÚSubbË
)

	)

1918 
	#FCDNÜm®iz”2
 
	`U_ICU_ENTRY_POINT_RENAME
(
FCDNÜm®iz”2
)

	)

1919 
	#FCDTr›SšgËtÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
FCDTr›SšgËtÚ
)

	)

1920 
	#F—tu»Li¡TabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
F—tu»Li¡TabË
)

	)

1921 
	#F›ldPos™iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
F›ldPos™iÚ
)

	)

1922 
	#F›ldPos™iÚHªdËr
 
	`U_ICU_ENTRY_POINT_RENAME
(
F›ldPos™iÚHªdËr
)

	)

1923 
	#F›ldPos™iÚI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
F›ldPos™iÚI‹¿tÜ
)

	)

1924 
	#F›ldPos™iÚI‹¿tÜHªdËr
 
	`U_ICU_ENTRY_POINT_RENAME
(
F›ldPos™iÚI‹¿tÜHªdËr
)

	)

1925 
	#F›ldPos™iÚOÆyHªdËr
 
	`U_ICU_ENTRY_POINT_RENAME
(
F›ldPos™iÚOÆyHªdËr
)

	)

1926 
	#F‹»dNÜm®iz”2
 
	`U_ICU_ENTRY_POINT_RENAME
(
F‹»dNÜm®iz”2
)

	)

1927 
	#FÚtRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
FÚtRuns
)

	)

1928 
	#FÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
FÜm©
)

	)

1929 
	#FÜm©1AnchÜTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
FÜm©1AnchÜTabË
)

	)

1930 
	#FÜm©2AnchÜTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
FÜm©2AnchÜTabË
)

	)

1931 
	#FÜm©3AnchÜTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
FÜm©3AnchÜTabË
)

	)

1932 
	#FÜm©NameEnum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
FÜm©NameEnum”©iÚ
)

	)

1933 
	#FÜm©P¬£r
 
	`U_ICU_ENTRY_POINT_RENAME
(
FÜm©P¬£r
)

	)

1934 
	#FÜm©bË
 
	`U_ICU_ENTRY_POINT_RENAME
(
FÜm©bË
)

	)

1935 
	#FÜw¬dCh¬aù”I‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
FÜw¬dCh¬aù”I‹¿tÜ
)

	)

1936 
	#FÜw¬dUTr›2SŒšgI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
FÜw¬dUTr›2SŒšgI‹¿tÜ
)

	)

1937 
	#F¿ùiÚ®P¬tSub¡™utiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
F¿ùiÚ®P¬tSub¡™utiÚ
)

	)

1938 
	#FunùiÚR•Ïûr
 
	`U_ICU_ENTRY_POINT_RENAME
(
FunùiÚR•Ïûr
)

	)

1939 
	#GDEFM¬kF‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
GDEFM¬kF‹r
)

	)

1940 
	#GXLayoutEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
GXLayoutEngše
)

	)

1941 
	#GlyphDefš™iÚTabËH—d”
 
	`U_ICU_ENTRY_POINT_RENAME
(
GlyphDefš™iÚTabËH—d”
)

	)

1942 
	#GlyphI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
GlyphI‹¿tÜ
)

	)

1943 
	#GlyphLookupTabËH—d”
 
	`U_ICU_ENTRY_POINT_RENAME
(
GlyphLookupTabËH—d”
)

	)

1944 
	#GlyphPos™iÚAdju¡m’ts
 
	`U_ICU_ENTRY_POINT_RENAME
(
GlyphPos™iÚAdju¡m’ts
)

	)

1945 
	#GlyphPos™iÚšgLookupProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
GlyphPos™iÚšgLookupProûssÜ
)

	)

1946 
	#GlyphPos™iÚšgTabËH—d”
 
	`U_ICU_ENTRY_POINT_RENAME
(
GlyphPos™iÚšgTabËH—d”
)

	)

1947 
	#GlyphSub¡™utiÚLookupProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
GlyphSub¡™utiÚLookupProûssÜ
)

	)

1948 
	#GlyphSub¡™utiÚTabËH—d”
 
	`U_ICU_ENTRY_POINT_RENAME
(
GlyphSub¡™utiÚTabËH—d”
)

	)

1949 
	#GoodSuffixTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
GoodSuffixTabË
)

	)

1950 
	#G»go
 
	`U_ICU_ENTRY_POINT_RENAME
(
G»go
)

	)

1951 
	#G»gÜŸnC®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
G»gÜŸnC®’d¬
)

	)

1952 
	#HªO³nTy³LayoutEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
HªO³nTy³LayoutEngše
)

	)

1953 
	#HªgulO³nTy³LayoutEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
HªgulO³nTy³LayoutEngše
)

	)

1954 
	#Heb»wC®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
Heb»wC®’d¬
)

	)

1955 
	#ICUB»akI‹¿tÜFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUB»akI‹¿tÜFaùÜy
)

	)

1956 
	#ICUB»akI‹¿tÜS”viû
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUB»akI‹¿tÜS”viû
)

	)

1957 
	#ICUCŞÏtÜFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUCŞÏtÜFaùÜy
)

	)

1958 
	#ICUCŞÏtÜS”viû
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUCŞÏtÜS”viû
)

	)

1959 
	#ICUD©aTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUD©aTabË
)

	)

1960 
	#ICULªguageB»akFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICULªguageB»akFaùÜy
)

	)

1961 
	#ICULoÿËS”viû
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICULoÿËS”viû
)

	)

1962 
	#ICUNÙif›r
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUNÙif›r
)

	)

1963 
	#ICUNumb”FÜm©FaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUNumb”FÜm©FaùÜy
)

	)

1964 
	#ICUNumb”FÜm©S”viû
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUNumb”FÜm©S”viû
)

	)

1965 
	#ICUResourûBundËFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUResourûBundËFaùÜy
)

	)

1966 
	#ICUS”viû
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUS”viû
)

	)

1967 
	#ICUS”viûFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUS”viûFaùÜy
)

	)

1968 
	#ICUS”viûKey
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICUS”viûKey
)

	)

1969 
	#ICU_Ut™y
 
	`U_ICU_ENTRY_POINT_RENAME
(
ICU_Ut™y
)

	)

1970 
	#IDNA
 
	`U_ICU_ENTRY_POINT_RENAME
(
IDNA
)

	)

1971 
	#IndŸnC®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
IndŸnC®’d¬
)

	)

1972 
	#IndicCÏssTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
IndicCÏssTabË
)

	)

1973 
	#IndicO³nTy³LayoutEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
IndicO³nTy³LayoutEngše
)

	)

1974 
	#IndicR—¼ªgem’tProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
IndicR—¼ªgem’tProûssÜ
)

	)

1975 
	#IndicReÜd”šg
 
	`U_ICU_ENTRY_POINT_RENAME
(
IndicReÜd”šg
)

	)

1976 
	#In™ŸlTimeZÚeRuË
 
	`U_ICU_ENTRY_POINT_RENAME
(
In™ŸlTimeZÚeRuË
)

	)

1977 
	#IÅutText
 
	`U_ICU_ENTRY_POINT_RENAME
(
IÅutText
)

	)

1978 
	#IÁeg¿lP¬tSub¡™utiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
IÁeg¿lP¬tSub¡™utiÚ
)

	)

1979 
	#I¦amicC®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
I¦amicC®’d¬
)

	)

1980 
	#I‹¿‹dCh¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
I‹¿‹dCh¬
)

	)

1981 
	#J­ªe£C®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
J­ªe£C®’d¬
)

	)

1982 
	#K”nTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
K”nTabË
)

	)

1983 
	#KeywÜdEnum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
KeywÜdEnum”©iÚ
)

	)

1984 
	#Khm”CÏssTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
Khm”CÏssTabË
)

	)

1985 
	#Khm”O³nTy³LayoutEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
Khm”O³nTy³LayoutEngše
)

	)

1986 
	#Khm”ReÜd”šg
 
	`U_ICU_ENTRY_POINT_RENAME
(
Khm”ReÜd”šg
)

	)

1987 
	#LECh¬M­³r
 
	`U_ICU_ENTRY_POINT_RENAME
(
LECh¬M­³r
)

	)

1988 
	#LEFÚtIn¡ªû
 
	`U_ICU_ENTRY_POINT_RENAME
(
LEFÚtIn¡ªû
)

	)

1989 
	#LEGlyphF‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
LEGlyphF‹r
)

	)

1990 
	#LEGlyphStÜage
 
	`U_ICU_ENTRY_POINT_RENAME
(
LEGlyphStÜage
)

	)

1991 
	#LEIn£¹iÚC®lback
 
	`U_ICU_ENTRY_POINT_RENAME
(
LEIn£¹iÚC®lback
)

	)

1992 
	#LEIn£¹iÚLi¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
LEIn£¹iÚLi¡
)

	)

1993 
	#LXUt™›s
 
	`U_ICU_ENTRY_POINT_RENAME
(
LXUt™›s
)

	)

1994 
	#LªguageB»akEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
LªguageB»akEngše
)

	)

1995 
	#LªguageB»akFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
LªguageB»akFaùÜy
)

	)

1996 
	#LayoutEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
LayoutEngše
)

	)

1997 
	#Lig©u»Sub¡™utiÚProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Lig©u»Sub¡™utiÚProûssÜ
)

	)

1998 
	#Lig©u»Sub¡™utiÚSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
Lig©u»Sub¡™utiÚSubbË
)

	)

1999 
	#LocD©aP¬£r
 
	`U_ICU_ENTRY_POINT_RENAME
(
LocD©aP¬£r
)

	)

2000 
	#LoÿË
 
	`U_ICU_ENTRY_POINT_RENAME
(
LoÿË
)

	)

2001 
	#LoÿËBa£d
 
	`U_ICU_ENTRY_POINT_RENAME
(
LoÿËBa£d
)

	)

2002 
	#LoÿËDi¥ÏyNames
 
	`U_ICU_ENTRY_POINT_RENAME
(
LoÿËDi¥ÏyNames
)

	)

2003 
	#LoÿËDi¥ÏyNamesIm¶
 
	`U_ICU_ENTRY_POINT_RENAME
(
LoÿËDi¥ÏyNamesIm¶
)

	)

2004 
	#LoÿËKey
 
	`U_ICU_ENTRY_POINT_RENAME
(
LoÿËKey
)

	)

2005 
	#LoÿËKeyFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
LoÿËKeyFaùÜy
)

	)

2006 
	#LoÿËRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
LoÿËRuns
)

	)

2007 
	#LoÿËUt™y
 
	`U_ICU_ENTRY_POINT_RENAME
(
LoÿËUt™y
)

	)

2008 
	#Loÿliz©iÚInfo
 
	`U_ICU_ENTRY_POINT_RENAME
(
Loÿliz©iÚInfo
)

	)

2009 
	#LookupLi¡TabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
LookupLi¡TabË
)

	)

2010 
	#LookupProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
LookupProûssÜ
)

	)

2011 
	#LookupSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
LookupSubbË
)

	)

2012 
	#LookupTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
LookupTabË
)

	)

2013 
	#Low”ÿ£T¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
Low”ÿ£T¿n¦™”©Ü
)

	)

2014 
	#MP»Fixups
 
	`U_ICU_ENTRY_POINT_RENAME
(
MP»Fixups
)

	)

2015 
	#M¬kA¼ay
 
	`U_ICU_ENTRY_POINT_RENAME
(
M¬kA¼ay
)

	)

2016 
	#M¬kToBa£Pos™iÚšgSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
M¬kToBa£Pos™iÚšgSubbË
)

	)

2017 
	#M¬kToLig©u»Pos™iÚšgSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
M¬kToLig©u»Pos™iÚšgSubbË
)

	)

2018 
	#M¬kToM¬kPos™iÚšgSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
M¬kToM¬kPos™iÚšgSubbË
)

	)

2019 
	#M—su»
 
	`U_ICU_ENTRY_POINT_RENAME
(
M—su»
)

	)

2020 
	#M—su»FÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
M—su»FÜm©
)

	)

2021 
	#M—su»Un™
 
	`U_ICU_ENTRY_POINT_RENAME
(
M—su»Un™
)

	)

2022 
	#Mes§geFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
Mes§geFÜm©
)

	)

2023 
	#Mes§geFÜm©Ad­‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
Mes§geFÜm©Ad­‹r
)

	)

2024 
	#ModulusSub¡™utiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ModulusSub¡™utiÚ
)

	)

2025 
	#MoÚRi£S‘CoÜdFunc
 
	`U_ICU_ENTRY_POINT_RENAME
(
MoÚRi£S‘CoÜdFunc
)

	)

2026 
	#MoÚTimeAngËFunc
 
	`U_ICU_ENTRY_POINT_RENAME
(
MoÚTimeAngËFunc
)

	)

2027 
	#MÜphSubbËH—d”
 
	`U_ICU_ENTRY_POINT_RENAME
(
MÜphSubbËH—d”
)

	)

2028 
	#MÜphTabËH—d”
 
	`U_ICU_ENTRY_POINT_RENAME
(
MÜphTabËH—d”
)

	)

2029 
	#MuÉËSub¡™utiÚSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
MuÉËSub¡™utiÚSubbË
)

	)

2030 
	#MuÉl›rSub¡™utiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
MuÉl›rSub¡™utiÚ
)

	)

2031 
	#MubËTr›DiùiÚ¬y
 
	`U_ICU_ENTRY_POINT_RENAME
(
MubËTr›DiùiÚ¬y
)

	)

2032 
	#MubËTr›Enum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
MubËTr›Enum”©iÚ
)

	)

2033 
	#NFFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
NFFaùÜy
)

	)

2034 
	#NFKDBufãr
 
	`U_ICU_ENTRY_POINT_RENAME
(
NFKDBufãr
)

	)

2035 
	#NFRuË
 
	`U_ICU_ENTRY_POINT_RENAME
(
NFRuË
)

	)

2036 
	#NFRuËS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
NFRuËS‘
)

	)

2037 
	#NFSub¡™utiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
NFSub¡™utiÚ
)

	)

2038 
	#NG¿mP¬£r
 
	`U_ICU_ENTRY_POINT_RENAME
(
NG¿mP¬£r
)

	)

2039 
	#NameToEnum
 
	`U_ICU_ENTRY_POINT_RENAME
(
NameToEnum
)

	)

2040 
	#NameUnicodeT¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
NameUnicodeT¿n¦™”©Ü
)

	)

2041 
	#NÚCÚ‹xtu®GlyphSub¡™utiÚProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
NÚCÚ‹xtu®GlyphSub¡™utiÚProûssÜ
)

	)

2042 
	#NÚCÚtiguousEnumToOff£t
 
	`U_ICU_ENTRY_POINT_RENAME
(
NÚCÚtiguousEnumToOff£t
)

	)

2043 
	#NoİNÜm®iz”2
 
	`U_ICU_ENTRY_POINT_RENAME
(
NoİNÜm®iz”2
)

	)

2044 
	#NÜm2AÎModes
 
	`U_ICU_ENTRY_POINT_RENAME
(
NÜm2AÎModes
)

	)

2045 
	#NÜm®iz©iÚT¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
NÜm®iz©iÚT¿n¦™”©Ü
)

	)

2046 
	#NÜm®iz”
 
	`U_ICU_ENTRY_POINT_RENAME
(
NÜm®iz”
)

	)

2047 
	#NÜm®iz”2
 
	`U_ICU_ENTRY_POINT_RENAME
(
NÜm®iz”2
)

	)

2048 
	#NÜm®iz”2FaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
NÜm®iz”2FaùÜy
)

	)

2049 
	#NÜm®iz”2Im¶
 
	`U_ICU_ENTRY_POINT_RENAME
(
NÜm®iz”2Im¶
)

	)

2050 
	#NÜm®iz”2W™hIm¶
 
	`U_ICU_ENTRY_POINT_RENAME
(
NÜm®iz”2W™hIm¶
)

	)

2051 
	#NuÎSub¡™utiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
NuÎSub¡™utiÚ
)

	)

2052 
	#NuÎT¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
NuÎT¿n¦™”©Ü
)

	)

2053 
	#Numb”FÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
Numb”FÜm©
)

	)

2054 
	#Numb”FÜm©FaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
Numb”FÜm©FaùÜy
)

	)

2055 
	#Numb”šgSy¡em
 
	`U_ICU_ENTRY_POINT_RENAME
(
Numb”šgSy¡em
)

	)

2056 
	#Num”©ÜSub¡™utiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Num”©ÜSub¡™utiÚ
)

	)

2057 
	#OlsÚTimeZÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
OlsÚTimeZÚe
)

	)

2058 
	#O³nTy³LayoutEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
O³nTy³LayoutEngše
)

	)

2059 
	#O³nTy³Ut™›s
 
	`U_ICU_ENTRY_POINT_RENAME
(
O³nTy³Ut™›s
)

	)

2060 
	#OrCÚ¡¿št
 
	`U_ICU_ENTRY_POINT_RENAME
(
OrCÚ¡¿št
)

	)

2061 
	#PCEBufãr
 
	`U_ICU_ENTRY_POINT_RENAME
(
PCEBufãr
)

	)

2062 
	#PaœPos™iÚšgFÜm©1SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
PaœPos™iÚšgFÜm©1SubbË
)

	)

2063 
	#PaœPos™iÚšgFÜm©2SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
PaœPos™iÚšgFÜm©2SubbË
)

	)

2064 
	#PaœPos™iÚšgSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
PaœPos™iÚšgSubbË
)

	)

2065 
	#P¬ag¿phLayout
 
	`U_ICU_ENTRY_POINT_RENAME
(
P¬ag¿phLayout
)

	)

2066 
	#P¬£D©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
P¬£D©a
)

	)

2067 
	#P¬£Pos™iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
P¬£Pos™iÚ
)

	)

2068 
	#P©‹ºM­
 
	`U_ICU_ENTRY_POINT_RENAME
(
P©‹ºM­
)

	)

2069 
	#P©‹ºM­I‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
P©‹ºM­I‹¿tÜ
)

	)

2070 
	#P”sŸnC®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
P”sŸnC®’d¬
)

	)

2071 
	#Plu¿lFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
Plu¿lFÜm©
)

	)

2072 
	#Plu¿lKeywÜdEnum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Plu¿lKeywÜdEnum”©iÚ
)

	)

2073 
	#Plu¿lRuËs
 
	`U_ICU_ENTRY_POINT_RENAME
(
Plu¿lRuËs
)

	)

2074 
	#Prİ”tyAlŸ£s
 
	`U_ICU_ENTRY_POINT_RENAME
(
Prİ”tyAlŸ£s
)

	)

2075 
	#PŠEËm
 
	`U_ICU_ENTRY_POINT_RENAME
(
PŠEËm
)

	)

2076 
	#PŠSk–‘Ú
 
	`U_ICU_ENTRY_POINT_RENAME
(
PŠSk–‘Ú
)

	)

2077 
	#Quªtif›r
 
	`U_ICU_ENTRY_POINT_RENAME
(
Quªtif›r
)

	)

2078 
	#RBBID©aW¿µ”
 
	`U_ICU_ENTRY_POINT_RENAME
(
RBBID©aW¿µ”
)

	)

2079 
	#RBBINode
 
	`U_ICU_ENTRY_POINT_RENAME
(
RBBINode
)

	)

2080 
	#RBBIRuËBud”
 
	`U_ICU_ENTRY_POINT_RENAME
(
RBBIRuËBud”
)

	)

2081 
	#RBBIRuËSÿÂ”
 
	`U_ICU_ENTRY_POINT_RENAME
(
RBBIRuËSÿÂ”
)

	)

2082 
	#RBBIS‘Bud”
 
	`U_ICU_ENTRY_POINT_RENAME
(
RBBIS‘Bud”
)

	)

2083 
	#RBBIS‹DesütÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
RBBIS‹DesütÜ
)

	)

2084 
	#RBBISymbŞTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
RBBISymbŞTabË
)

	)

2085 
	#RBBISymbŞTabËEÁry
 
	`U_ICU_ENTRY_POINT_RENAME
(
RBBISymbŞTabËEÁry
)

	)

2086 
	#RBBITabËBud”
 
	`U_ICU_ENTRY_POINT_RENAME
(
RBBITabËBud”
)

	)

2087 
	#RCEBufãr
 
	`U_ICU_ENTRY_POINT_RENAME
(
RCEBufãr
)

	)

2088 
	#RªgeDesütÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
RªgeDesütÜ
)

	)

2089 
	#RegexCompe
 
	`U_ICU_ENTRY_POINT_RENAME
(
RegexCompe
)

	)

2090 
	#RegexM©ch”
 
	`U_ICU_ENTRY_POINT_RENAME
(
RegexM©ch”
)

	)

2091 
	#RegexP©‹º
 
	`U_ICU_ENTRY_POINT_RENAME
(
RegexP©‹º
)

	)

2092 
	#RegexSticS‘s
 
	`U_ICU_ENTRY_POINT_RENAME
(
RegexSticS‘s
)

	)

2093 
	#ReguÏrEx´essiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ReguÏrEx´essiÚ
)

	)

2094 
	#R–©iveD©eFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
R–©iveD©eFÜm©
)

	)

2095 
	#RemoveT¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
RemoveT¿n¦™”©Ü
)

	)

2096 
	#ReÜd”šgBufãr
 
	`U_ICU_ENTRY_POINT_RENAME
(
ReÜd”šgBufãr
)

	)

2097 
	#R•ÏûabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
R•ÏûabË
)

	)

2098 
	#R•ÏûabËGlue
 
	`U_ICU_ENTRY_POINT_RENAME
(
R•ÏûabËGlue
)

	)

2099 
	#ResourûBundË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ResourûBundË
)

	)

2100 
	#Ri£S‘CoÜdFunc
 
	`U_ICU_ENTRY_POINT_RENAME
(
Ri£S‘CoÜdFunc
)

	)

2101 
	#RuËBa£dB»akI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
RuËBa£dB»akI‹¿tÜ
)

	)

2102 
	#RuËBa£dCŞÏtÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
RuËBa£dCŞÏtÜ
)

	)

2103 
	#RuËBa£dNumb”FÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
RuËBa£dNumb”FÜm©
)

	)

2104 
	#RuËBa£dTimeZÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
RuËBa£dTimeZÚe
)

	)

2105 
	#RuËBa£dT¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
RuËBa£dT¿n¦™”©Ü
)

	)

2106 
	#RuËChaš
 
	`U_ICU_ENTRY_POINT_RENAME
(
RuËChaš
)

	)

2107 
	#RuËCh¬aù”I‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
RuËCh¬aù”I‹¿tÜ
)

	)

2108 
	#RuËH®f
 
	`U_ICU_ENTRY_POINT_RENAME
(
RuËH®f
)

	)

2109 
	#RuËP¬£r
 
	`U_ICU_ENTRY_POINT_RENAME
(
RuËP¬£r
)

	)

2110 
	#RunA¼ay
 
	`U_ICU_ENTRY_POINT_RENAME
(
RunA¼ay
)

	)

2111 
	#SPUSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
SPUSŒšg
)

	)

2112 
	#SPUSŒšgPoŞ
 
	`U_ICU_ENTRY_POINT_RENAME
(
SPUSŒšgPoŞ
)

	)

2113 
	#SaãZÚeSŒšgFÜm©PŒ
 
	`U_ICU_ENTRY_POINT_RENAME
(
SaãZÚeSŒšgFÜm©PŒ
)

	)

2114 
	#SameV®ueSub¡™utiÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
SameV®ueSub¡™utiÚ
)

	)

2115 
	#SütLi¡TabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
SütLi¡TabË
)

	)

2116 
	#SütRunI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
SütRunI‹¿tÜ
)

	)

2117 
	#SütS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
SütS‘
)

	)

2118 
	#SütTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
SütTabË
)

	)

2119 
	#S—rchI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
S—rchI‹¿tÜ
)

	)

2120 
	#Segm’tA¼ayProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Segm’tA¼ayProûssÜ
)

	)

2121 
	#Segm’tSšgËProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Segm’tSšgËProûssÜ
)

	)

2122 
	#S–eùFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
S–eùFÜm©
)

	)

2123 
	#S”viûEnum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
S”viûEnum”©iÚ
)

	)

2124 
	#S”viûLi¡’”
 
	`U_ICU_ENTRY_POINT_RENAME
(
S”viûLi¡’”
)

	)

2125 
	#Sim¶eA¼ayProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Sim¶eA¼ayProûssÜ
)

	)

2126 
	#Sim¶eD©eFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
Sim¶eD©eFÜm©
)

	)

2127 
	#Sim¶eFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
Sim¶eFaùÜy
)

	)

2128 
	#Sim¶eLoÿËKeyFaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
Sim¶eLoÿËKeyFaùÜy
)

	)

2129 
	#Sim¶eNumb”FÜm©FaùÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
Sim¶eNumb”FÜm©FaùÜy
)

	)

2130 
	#Sim¶eSšgËtÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
Sim¶eSšgËtÚ
)

	)

2131 
	#Sim¶eTimeZÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
Sim¶eTimeZÚe
)

	)

2132 
	#SšgËPos™iÚšgFÜm©1SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
SšgËPos™iÚšgFÜm©1SubbË
)

	)

2133 
	#SšgËPos™iÚšgFÜm©2SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
SšgËPos™iÚšgFÜm©2SubbË
)

	)

2134 
	#SšgËPos™iÚšgSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
SšgËPos™iÚšgSubbË
)

	)

2135 
	#SšgËSub¡™utiÚFÜm©1SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
SšgËSub¡™utiÚFÜm©1SubbË
)

	)

2136 
	#SšgËSub¡™utiÚFÜm©2SubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
SšgËSub¡™utiÚFÜm©2SubbË
)

	)

2137 
	#SšgËSub¡™utiÚSubbË
 
	`U_ICU_ENTRY_POINT_RENAME
(
SšgËSub¡™utiÚSubbË
)

	)

2138 
	#SšgËTabËProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
SšgËTabËProûssÜ
)

	)

2139 
	#SpoofD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
SpoofD©a
)

	)

2140 
	#SpoofIm¶
 
	`U_ICU_ENTRY_POINT_RENAME
(
SpoofIm¶
)

	)

2141 
	#S‹TabËProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
S‹TabËProûssÜ
)

	)

2142 
	#SŒšgCh¬aù”I‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
SŒšgCh¬aù”I‹¿tÜ
)

	)

2143 
	#SŒšgEnum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
SŒšgEnum”©iÚ
)

	)

2144 
	#SŒšgLi¡
 
	`U_ICU_ENTRY_POINT_RENAME
(
SŒšgLi¡
)

	)

2145 
	#SŒšgLoÿliz©iÚInfo
 
	`U_ICU_ENTRY_POINT_RENAME
(
SŒšgLoÿliz©iÚInfo
)

	)

2146 
	#SŒšgM©ch”
 
	`U_ICU_ENTRY_POINT_RENAME
(
SŒšgM©ch”
)

	)

2147 
	#SŒšgPaœ
 
	`U_ICU_ENTRY_POINT_RENAME
(
SŒšgPaœ
)

	)

2148 
	#SŒšgP›û
 
	`U_ICU_ENTRY_POINT_RENAME
(
SŒšgP›û
)

	)

2149 
	#SŒšgR•Ïûr
 
	`U_ICU_ENTRY_POINT_RENAME
(
SŒšgR•Ïûr
)

	)

2150 
	#SŒšgS—rch
 
	`U_ICU_ENTRY_POINT_RENAME
(
SŒšgS—rch
)

	)

2151 
	#SŒšgToCEsM­
 
	`U_ICU_ENTRY_POINT_RENAME
(
SŒšgToCEsM­
)

	)

2152 
	#StyËRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
StyËRuns
)

	)

2153 
	#Sub¡™utiÚLookup
 
	`U_ICU_ENTRY_POINT_RENAME
(
Sub¡™utiÚLookup
)

	)

2154 
	#SubbËProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
SubbËProûssÜ
)

	)

2155 
	#SunTimeAngËFunc
 
	`U_ICU_ENTRY_POINT_RENAME
(
SunTimeAngËFunc
)

	)

2156 
	#SymbŞTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
SymbŞTabË
)

	)

2157 
	#TZEnum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
TZEnum”©iÚ
)

	)

2158 
	#TaiwªC®’d¬
 
	`U_ICU_ENTRY_POINT_RENAME
(
TaiwªC®’d¬
)

	)

2159 
	#T¬g‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
T¬g‘
)

	)

2160 
	#T”ÇryNode
 
	`U_ICU_ENTRY_POINT_RENAME
(
T”ÇryNode
)

	)

2161 
	#TextTr›M­
 
	`U_ICU_ENTRY_POINT_RENAME
(
TextTr›M­
)

	)

2162 
	#TextTr›M­S—rchResuÉHªdËr
 
	`U_ICU_ENTRY_POINT_RENAME
(
TextTr›M­S—rchResuÉHªdËr
)

	)

2163 
	#ThaiB»akEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
ThaiB»akEngše
)

	)

2164 
	#ThaiLayoutEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
ThaiLayoutEngše
)

	)

2165 
	#ThaiSh­šg
 
	`U_ICU_ENTRY_POINT_RENAME
(
ThaiSh­šg
)

	)

2166 
	#Tib‘ªCÏssTabË
 
	`U_ICU_ENTRY_POINT_RENAME
(
Tib‘ªCÏssTabË
)

	)

2167 
	#Tib‘ªO³nTy³LayoutEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
Tib‘ªO³nTy³LayoutEngše
)

	)

2168 
	#Tib‘ªReÜd”šg
 
	`U_ICU_ENTRY_POINT_RENAME
(
Tib‘ªReÜd”šg
)

	)

2169 
	#TimeA¼ayTimeZÚeRuË
 
	`U_ICU_ENTRY_POINT_RENAME
(
TimeA¼ayTimeZÚeRuË
)

	)

2170 
	#TimeUn™
 
	`U_ICU_ENTRY_POINT_RENAME
(
TimeUn™
)

	)

2171 
	#TimeUn™AmouÁ
 
	`U_ICU_ENTRY_POINT_RENAME
(
TimeUn™AmouÁ
)

	)

2172 
	#TimeUn™FÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
TimeUn™FÜm©
)

	)

2173 
	#TimeZÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
TimeZÚe
)

	)

2174 
	#TimeZÚeRuË
 
	`U_ICU_ENTRY_POINT_RENAME
(
TimeZÚeRuË
)

	)

2175 
	#TimeZÚeT¿ns™iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
TimeZÚeT¿ns™iÚ
)

	)

2176 
	#T™Ëÿ£T¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
T™Ëÿ£T¿n¦™”©Ü
)

	)

2177 
	#T¿n¦™”©iÚRuË
 
	`U_ICU_ENTRY_POINT_RENAME
(
T¿n¦™”©iÚRuË
)

	)

2178 
	#T¿n¦™”©iÚRuËD©a
 
	`U_ICU_ENTRY_POINT_RENAME
(
T¿n¦™”©iÚRuËD©a
)

	)

2179 
	#T¿n¦™”©iÚRuËS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
T¿n¦™”©iÚRuËS‘
)

	)

2180 
	#T¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
T¿n¦™”©Ü
)

	)

2181 
	#T¿n¦™”©ÜAlŸs
 
	`U_ICU_ENTRY_POINT_RENAME
(
T¿n¦™”©ÜAlŸs
)

	)

2182 
	#T¿n¦™”©ÜEÁry
 
	`U_ICU_ENTRY_POINT_RENAME
(
T¿n¦™”©ÜEÁry
)

	)

2183 
	#T¿n¦™”©ÜIDP¬£r
 
	`U_ICU_ENTRY_POINT_RENAME
(
T¿n¦™”©ÜIDP¬£r
)

	)

2184 
	#T¿n¦™”©ÜP¬£r
 
	`U_ICU_ENTRY_POINT_RENAME
(
T¿n¦™”©ÜP¬£r
)

	)

2185 
	#T¿n¦™”©ÜRegi¡ry
 
	`U_ICU_ENTRY_POINT_RENAME
(
T¿n¦™”©ÜRegi¡ry
)

	)

2186 
	#T¿n¦™”©ÜS³c
 
	`U_ICU_ENTRY_POINT_RENAME
(
T¿n¦™”©ÜS³c
)

	)

2187 
	#TriS‹SšgËtÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
TriS‹SšgËtÚ
)

	)

2188 
	#Tr›WÜdDiùiÚ¬y
 
	`U_ICU_ENTRY_POINT_RENAME
(
Tr›WÜdDiùiÚ¬y
)

	)

2189 
	#TrimmedA¼ayProûssÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
TrimmedA¼ayProûssÜ
)

	)

2190 
	#UCh¬Ch¬aù”I‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
UCh¬Ch¬aù”I‹¿tÜ
)

	)

2191 
	#UCŞÏtiÚPCE
 
	`U_ICU_ENTRY_POINT_RENAME
(
UCŞÏtiÚPCE
)

	)

2192 
	#UD©aP©hI‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
UD©aP©hI‹¿tÜ
)

	)

2193 
	#ULocRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
ULocRuns
)

	)

2194 
	#UMemÜy
 
	`U_ICU_ENTRY_POINT_RENAME
(
UMemÜy
)

	)

2195 
	#UObjeù
 
	`U_ICU_ENTRY_POINT_RENAME
(
UObjeù
)

	)

2196 
	#USck
 
	`U_ICU_ENTRY_POINT_RENAME
(
USck
)

	)

2197 
	#USŒšgEnum”©iÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
USŒšgEnum”©iÚ
)

	)

2198 
	#UTS46
 
	`U_ICU_ENTRY_POINT_RENAME
(
UTS46
)

	)

2199 
	#UTr›2SšgËtÚ
 
	`U_ICU_ENTRY_POINT_RENAME
(
UTr›2SšgËtÚ
)

	)

2200 
	#UVeùÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
UVeùÜ
)

	)

2201 
	#UVeùÜ32
 
	`U_ICU_ENTRY_POINT_RENAME
(
UVeùÜ32
)

	)

2202 
	#UVeùÜ64
 
	`U_ICU_ENTRY_POINT_RENAME
(
UVeùÜ64
)

	)

2203 
	#UÃsÿ³T¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
UÃsÿ³T¿n¦™”©Ü
)

	)

2204 
	#UnhªdËdEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
UnhªdËdEngše
)

	)

2205 
	#UnicodeA¿bicO³nTy³LayoutEngše
 
	`U_ICU_ENTRY_POINT_RENAME
(
UnicodeA¿bicO³nTy³LayoutEngše
)

	)

2206 
	#UnicodeF‹r
 
	`U_ICU_ENTRY_POINT_RENAME
(
UnicodeF‹r
)

	)

2207 
	#UnicodeFunùÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
UnicodeFunùÜ
)

	)

2208 
	#UnicodeM©ch”
 
	`U_ICU_ENTRY_POINT_RENAME
(
UnicodeM©ch”
)

	)

2209 
	#UnicodeNameT¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
UnicodeNameT¿n¦™”©Ü
)

	)

2210 
	#UnicodeR•Ïûr
 
	`U_ICU_ENTRY_POINT_RENAME
(
UnicodeR•Ïûr
)

	)

2211 
	#UnicodeS‘
 
	`U_ICU_ENTRY_POINT_RENAME
(
UnicodeS‘
)

	)

2212 
	#UnicodeS‘I‹¿tÜ
 
	`U_ICU_ENTRY_POINT_RENAME
(
UnicodeS‘I‹¿tÜ
)

	)

2213 
	#UnicodeS‘SŒšgS·n
 
	`U_ICU_ENTRY_POINT_RENAME
(
UnicodeS‘SŒšgS·n
)

	)

2214 
	#UnicodeSŒšg
 
	`U_ICU_ENTRY_POINT_RENAME
(
UnicodeSŒšg
)

	)

2215 
	#Uµ”ÿ£T¿n¦™”©Ü
 
	`U_ICU_ENTRY_POINT_RENAME
(
Uµ”ÿ£T¿n¦™”©Ü
)

	)

2216 
	#VTZR—d”
 
	`U_ICU_ENTRY_POINT_RENAME
(
VTZR—d”
)

	)

2217 
	#VTZWr™”
 
	`U_ICU_ENTRY_POINT_RENAME
(
VTZWr™”
)

	)

2218 
	#VTimeZÚe
 
	`U_ICU_ENTRY_POINT_RENAME
(
VTimeZÚe
)

	)

2219 
	#V®ueRecÜd
 
	`U_ICU_ENTRY_POINT_RENAME
(
V®ueRecÜd
)

	)

2220 
	#V®ueRuns
 
	`U_ICU_ENTRY_POINT_RENAME
(
V®ueRuns
)

	)

2221 
	#ZSFCache
 
	`U_ICU_ENTRY_POINT_RENAME
(
ZSFCache
)

	)

2222 
	#ZSFCacheEÁry
 
	`U_ICU_ENTRY_POINT_RENAME
(
ZSFCacheEÁry
)

	)

2223 
	#ZSFSŒšgPoŞ
 
	`U_ICU_ENTRY_POINT_RENAME
(
ZSFSŒšgPoŞ
)

	)

2224 
	#ZSFSŒšgPoŞChunk
 
	`U_ICU_ENTRY_POINT_RENAME
(
ZSFSŒšgPoŞChunk
)

	)

2225 
	#ZÚeM‘a
 
	`U_ICU_ENTRY_POINT_RENAME
(
ZÚeM‘a
)

	)

2226 
	#ZÚeSŒšgFÜm©
 
	`U_ICU_ENTRY_POINT_RENAME
(
ZÚeSŒšgFÜm©
)

	)

2227 
	#ZÚeSŒšgInfo
 
	`U_ICU_ENTRY_POINT_RENAME
(
ZÚeSŒšgInfo
)

	)

2228 
	#ZÚeSŒšgS—rchResuÉHªdËr
 
	`U_ICU_ENTRY_POINT_RENAME
(
ZÚeSŒšgS—rchResuÉHªdËr
)

	)

2229 
	#ZÚeSŒšgs
 
	`U_ICU_ENTRY_POINT_RENAME
(
ZÚeSŒšgs
)

	)

2230 
	#cŞlI‹¿‹
 
	`U_ICU_ENTRY_POINT_RENAME
(
cŞlI‹¿‹
)

	)

2231 
	#loÿË_£t_deçuÉ_š‹º®
 
	`U_ICU_ENTRY_POINT_RENAME
(
loÿË_£t_deçuÉ_š‹º®
)

	)

2232 
	#ut64_äomDoubË
 
	`U_ICU_ENTRY_POINT_RENAME
(
ut64_äomDoubË
)

	)

2233 
	#ut64_pow
 
	`U_ICU_ENTRY_POINT_RENAME
(
ut64_pow
)

	)

2234 
	#ut64_tou
 
	`U_ICU_ENTRY_POINT_RENAME
(
ut64_tou
)

	)

	@unicode/urep.h

11 #iâdeà
__UREP_H


12 
	#__UREP_H


	)

14 
	~"unicode/uty³s.h
"

16 
U_CDECL_BEGIN


42 * 
	tUR•ÏûabË
;

51 
	sUR•ÏûabËC®lbacks
 {

61 
št32_t
 (*
Ëngth
)(cÚ¡ 
UR•ÏûabË
* 
	m»p
);

74 
UCh¬
 (*
ch¬At
)(cÚ¡ 
UR•ÏûabË
* 
	m»p
,

75 
št32_t
 
	moff£t
);

87 
UCh¬32
 (*
ch¬32At
)(cÚ¡ 
UR•ÏûabË
* 
	m»p
,

88 
št32_t
 
	moff£t
);

106 (*
	m»¶aû
)(
UR•ÏûabË
* 
	m»p
,

107 
št32_t
 
	m¡¬t
,

108 
št32_t
 
	mlim™
,

109 cÚ¡ 
UCh¬
* 
	m‹xt
,

110 
št32_t
 
	m‹xtL’gth
);

125 (*
	mexŒaù
)(
UR•ÏûabË
* 
	m»p
,

126 
št32_t
 
	m¡¬t
,

127 
št32_t
 
	mlim™
,

128 
UCh¬
* 
	md¡
);

146 (*
	mcİy
)(
UR•ÏûabË
* 
	m»p
,

147 
št32_t
 
	m¡¬t
,

148 
št32_t
 
	mlim™
,

149 
št32_t
 
	mde¡
);

151 } 
	tUR•ÏûabËC®lbacks
;

153 
	gU_CDECL_END


	@unicode/ures.h

23 #iâdeà
URES_H


24 
	#URES_H


	)

26 
	~"unicode/uty³s.h
"

27 
	~"unicode/uloc.h
"

28 
	~"unicode/loÿÍoš‹r.h
"

52 
	gUResourûBundË
;

57 
UResourûBundË
 
	tUResourûBundË
;

66 
	mURES_NONE
=-1,

69 
	mURES_STRING
=0,

72 
	mURES_BINARY
=1,

75 
	mURES_TABLE
=2,

84 
	mURES_ALIAS
=3,

93 
	mURES_INT
=7,

96 
	mURES_ARRAY
=8,

103 
	mURES_INT_VECTOR
 = 14,

104 #iâdeà
U_HIDE_DEPRECATED_API


106 
	mRES_NONE
=
URES_NONE
,

108 
	mRES_STRING
=
URES_STRING
,

110 
	mRES_BINARY
=
URES_BINARY
,

112 
	mRES_TABLE
=
URES_TABLE
,

114 
	mRES_ALIAS
=
URES_ALIAS
,

116 
	mRES_INT
=
URES_INT
,

118 
	mRES_ARRAY
=
URES_ARRAY
,

120 
	mRES_INT_VECTOR
=
URES_INT_VECTOR
,

122 
	mRES_RESERVED
=15,

125 
	mURES_LIMIT
 = 16

126 } 
	tUResTy³
;

160 
U_STABLE
 
UResourûBundË
* 
U_EXPORT2


161 
u»s_İ’
(cÚ¡ * 
·ckageName
,

162 cÚ¡ * 
loÿË
,

163 
UE¼ÜCode
* 
¡©us
);

183 
U_STABLE
 
UResourûBundË
* 
U_EXPORT2


184 
u»s_İ’Dœeù
(cÚ¡ * 
·ckageName
,

185 cÚ¡ * 
loÿË
,

186 
UE¼ÜCode
* 
¡©us
);

206 
U_STABLE
 
UResourûBundË
* 
U_EXPORT2


207 
u»s_İ’U
(cÚ¡ 
UCh¬
* 
·ckageName
,

208 cÚ¡ * 
loÿË
,

209 
UE¼ÜCode
* 
¡©us
);

227 
U_DEPRECATED
 
št32_t
 
U_EXPORT2


228 
u»s_couÁA¼ayI‹ms
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

229 cÚ¡ * 
»sourûKey
,

230 
UE¼ÜCode
* 
”r
);

239 
U_STABLE
 
U_EXPORT2


240 
u»s_şo£
(
UResourûBundË
* 
»sourûBundË
);

242 #ià
U_SHOW_CPLUSPLUS_API


244 
U_NAMESPACE_BEGIN


255 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUResourûBundËPoš‹r
, 
UResourûBundË
, 
u»s_şo£
);

257 
	gU_NAMESPACE_END


271 
U_DEPRECATED
 cÚ¡ * 
U_EXPORT2


272 
u»s_g‘V”siÚNumb”
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
);

283 
U_STABLE
 
U_EXPORT2


284 
u»s_g‘V”siÚ
(cÚ¡ 
UResourûBundË
* 
»sB
,

285 
UV”siÚInfo
 
v”siÚInfo
);

299 
U_DEPRECATED
 cÚ¡ * 
U_EXPORT2


300 
u»s_g‘LoÿË
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

301 
UE¼ÜCode
* 
¡©us
);

316 
U_STABLE
 cÚ¡ * 
U_EXPORT2


317 
u»s_g‘LoÿËByTy³
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

318 
ULocD©aLoÿËTy³
 
ty³
,

319 
UE¼ÜCode
* 
¡©us
);

338 
U_INTERNAL
 
U_EXPORT2


339 
u»s_İ’FlIn
(
UResourûBundË
 *
r
,

340 cÚ¡ * 
·ckageName
,

341 cÚ¡ * 
loÿËID
,

342 
UE¼ÜCode
* 
¡©us
);

361 
U_STABLE
 cÚ¡ 
UCh¬
* 
U_EXPORT2


362 
u»s_g‘SŒšg
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

363 
št32_t
* 
Ën
,

364 
UE¼ÜCode
* 
¡©us
);

413 
U_STABLE
 cÚ¡ * 
U_EXPORT2


414 
u»s_g‘UTF8SŒšg
(cÚ¡ 
UResourûBundË
 *
»sB
,

415 *
de¡
, 
št32_t
 *
Ëngth
,

416 
UBoŞ
 
fÜûCİy
,

417 
UE¼ÜCode
 *
¡©us
);

436 
U_STABLE
 cÚ¡ 
ušt8_t
* 
U_EXPORT2


437 
u»s_g‘Bš¬y
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

438 
št32_t
* 
Ën
,

439 
UE¼ÜCode
* 
¡©us
);

458 
U_STABLE
 cÚ¡ 
št32_t
* 
U_EXPORT2


459 
u»s_g‘IÁVeùÜ
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

460 
št32_t
* 
Ën
,

461 
UE¼ÜCode
* 
¡©us
);

479 
U_STABLE
 
ušt32_t
 
U_EXPORT2


480 
u»s_g‘UIÁ
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

481 
UE¼ÜCode
 *
¡©us
);

499 
U_STABLE
 
št32_t
 
U_EXPORT2


500 
u»s_g‘IÁ
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

501 
UE¼ÜCode
 *
¡©us
);

513 
U_STABLE
 
št32_t
 
U_EXPORT2


514 
u»s_g‘Size
(cÚ¡ 
UResourûBundË
 *
»sourûBundË
);

524 
U_STABLE
 
UResTy³
 
U_EXPORT2


525 
u»s_g‘Ty³
(cÚ¡ 
UResourûBundË
 *
»sourûBundË
);

535 
U_STABLE
 cÚ¡ * 
U_EXPORT2


536 
u»s_g‘Key
(cÚ¡ 
UResourûBundË
 *
»sourûBundË
);

548 
U_STABLE
 
U_EXPORT2


549 
u»s_»£tI‹¿tÜ
(
UResourûBundË
 *
»sourûBundË
);

558 
U_STABLE
 
UBoŞ
 
U_EXPORT2


559 
u»s_hasNext
(cÚ¡ 
UResourûBundË
 *
»sourûBundË
);

573 
U_STABLE
 
UResourûBundË
* 
U_EXPORT2


574 
u»s_g‘NextResourû
(
UResourûBundË
 *
»sourûBundË
,

575 
UResourûBundË
 *
flIn
,

576 
UE¼ÜCode
 *
¡©us
);

590 
U_STABLE
 cÚ¡ 
UCh¬
* 
U_EXPORT2


591 
u»s_g‘NextSŒšg
(
UResourûBundË
 *
»sourûBundË
,

592 
št32_t
* 
Ën
,

593 cÚ¡ ** 
key
,

594 
UE¼ÜCode
 *
¡©us
);

608 
U_STABLE
 
UResourûBundË
* 
U_EXPORT2


609 
u»s_g‘ByIndex
(cÚ¡ 
UResourûBundË
 *
»sourûBundË
,

610 
št32_t
 
šdexR
,

611 
UResourûBundË
 *
flIn
,

612 
UE¼ÜCode
 *
¡©us
);

625 
U_STABLE
 cÚ¡ 
UCh¬
* 
U_EXPORT2


626 
u»s_g‘SŒšgByIndex
(cÚ¡ 
UResourûBundË
 *
»sourûBundË
,

627 
št32_t
 
šdexS
,

628 
št32_t
* 
Ën
,

629 
UE¼ÜCode
 *
¡©us
);

679 
U_STABLE
 cÚ¡ * 
U_EXPORT2


680 
u»s_g‘UTF8SŒšgByIndex
(cÚ¡ 
UResourûBundË
 *
»sB
,

681 
št32_t
 
¡ršgIndex
,

682 *
de¡
, 
št32_t
 *
pL’gth
,

683 
UBoŞ
 
fÜûCİy
,

684 
UE¼ÜCode
 *
¡©us
);

698 
U_STABLE
 
UResourûBundË
* 
U_EXPORT2


699 
u»s_g‘ByKey
(cÚ¡ 
UResourûBundË
 *
»sourûBundË
,

700 cÚ¡ * 
key
,

701 
UResourûBundË
 *
flIn
,

702 
UE¼ÜCode
 *
¡©us
);

716 
U_STABLE
 cÚ¡ 
UCh¬
* 
U_EXPORT2


717 
u»s_g‘SŒšgByKey
(cÚ¡ 
UResourûBundË
 *
»sB
,

718 cÚ¡ * 
key
,

719 
št32_t
* 
Ën
,

720 
UE¼ÜCode
 *
¡©us
);

772 
U_STABLE
 cÚ¡ * 
U_EXPORT2


773 
u»s_g‘UTF8SŒšgByKey
(cÚ¡ 
UResourûBundË
 *
»sB
,

774 cÚ¡ *
key
,

775 *
de¡
, 
št32_t
 *
pL’gth
,

776 
UBoŞ
 
fÜûCİy
,

777 
UE¼ÜCode
 *
¡©us
);

779 #ià
U_SHOW_CPLUSPLUS_API


780 
	~"unicode/uni¡r.h
"

782 
U_NAMESPACE_BEGIN


794 
šlše
 
UnicodeSŒšg


795 
	$u»s_g‘UnicodeSŒšg
(cÚ¡ 
UResourûBundË
 *
»sB
,

796 
UE¼ÜCode
* 
¡©us
)

798 
št32_t
 
Ën
 = 0;

799 cÚ¡ 
UCh¬
 *
r
 = 
	`u»s_g‘SŒšg
(
»sB
, &
Ën
, 
¡©us
);

800  
	`UnicodeSŒšg
(
TRUE
, 
r
, 
Ën
);

801 
	}
}

813 
šlše
 
UnicodeSŒšg


814 
	$u»s_g‘NextUnicodeSŒšg
(
UResourûBundË
 *
»sB
,

815 cÚ¡ ** 
key
,

816 
UE¼ÜCode
* 
¡©us
)

818 
št32_t
 
Ën
 = 0;

819 cÚ¡ 
UCh¬
* 
r
 = 
	`u»s_g‘NextSŒšg
(
»sB
, &
Ën
, 
key
, 
¡©us
);

820  
	`UnicodeSŒšg
(
TRUE
, 
r
, 
Ën
);

821 
	}
}

832 
šlše
 
UnicodeSŒšg


833 
	$u»s_g‘UnicodeSŒšgByIndex
(cÚ¡ 
UResourûBundË
 *
»sB
,

834 
št32_t
 
šdexS
,

835 
UE¼ÜCode
* 
¡©us
)

837 
št32_t
 
Ën
 = 0;

838 cÚ¡ 
UCh¬
* 
r
 = 
	`u»s_g‘SŒšgByIndex
(
»sB
, 
šdexS
, &
Ën
, 
¡©us
);

839  
	`UnicodeSŒšg
(
TRUE
, 
r
, 
Ën
);

840 
	}
}

852 
šlše
 
UnicodeSŒšg


853 
	$u»s_g‘UnicodeSŒšgByKey
(cÚ¡ 
UResourûBundË
 *
»sB
,

854 cÚ¡ * 
key
,

855 
UE¼ÜCode
* 
¡©us
)

857 
št32_t
 
Ën
 = 0;

858 cÚ¡ 
UCh¬
* 
r
 = 
	`u»s_g‘SŒšgByKey
(
»sB
, 
key
, &
Ën
, 
¡©us
);

859  
	`UnicodeSŒšg
(
TRUE
, 
r
, 
Ën
);

860 
	}
}

862 
	gU_NAMESPACE_END


874 
U_STABLE
 
UEnum”©iÚ
* 
U_EXPORT2


875 
u»s_İ’AvaabËLoÿËs
(cÚ¡ *
·ckageName
, 
UE¼ÜCode
 *
¡©us
);

	@unicode/uscript.h

16 #iâdeà
USCRIPT_H


17 
	#USCRIPT_H


	)

18 
	~"unicode/uty³s.h
"

46 
	eUSütCode
 {

47 
	mUSCRIPT_INVALID_CODE
 = -1,

48 
	mUSCRIPT_COMMON
 = 0,

49 
	mUSCRIPT_INHERITED
 = 1,

50 
	mUSCRIPT_ARABIC
 = 2,

51 
	mUSCRIPT_ARMENIAN
 = 3,

52 
	mUSCRIPT_BENGALI
 = 4,

53 
	mUSCRIPT_BOPOMOFO
 = 5,

54 
	mUSCRIPT_CHEROKEE
 = 6,

55 
	mUSCRIPT_COPTIC
 = 7,

56 
	mUSCRIPT_CYRILLIC
 = 8,

57 
	mUSCRIPT_DESERET
 = 9,

58 
	mUSCRIPT_DEVANAGARI
 = 10,

59 
	mUSCRIPT_ETHIOPIC
 = 11,

60 
	mUSCRIPT_GEORGIAN
 = 12,

61 
	mUSCRIPT_GOTHIC
 = 13,

62 
	mUSCRIPT_GREEK
 = 14,

63 
	mUSCRIPT_GUJARATI
 = 15,

64 
	mUSCRIPT_GURMUKHI
 = 16,

65 
	mUSCRIPT_HAN
 = 17,

66 
	mUSCRIPT_HANGUL
 = 18,

67 
	mUSCRIPT_HEBREW
 = 19,

68 
	mUSCRIPT_HIRAGANA
 = 20,

69 
	mUSCRIPT_KANNADA
 = 21,

70 
	mUSCRIPT_KATAKANA
 = 22,

71 
	mUSCRIPT_KHMER
 = 23,

72 
	mUSCRIPT_LAO
 = 24,

73 
	mUSCRIPT_LATIN
 = 25,

74 
	mUSCRIPT_MALAYALAM
 = 26,

75 
	mUSCRIPT_MONGOLIAN
 = 27,

76 
	mUSCRIPT_MYANMAR
 = 28,

77 
	mUSCRIPT_OGHAM
 = 29,

78 
	mUSCRIPT_OLD_ITALIC
 = 30,

79 
	mUSCRIPT_ORIYA
 = 31,

80 
	mUSCRIPT_RUNIC
 = 32,

81 
	mUSCRIPT_SINHALA
 = 33,

82 
	mUSCRIPT_SYRIAC
 = 34,

83 
	mUSCRIPT_TAMIL
 = 35,

84 
	mUSCRIPT_TELUGU
 = 36,

85 
	mUSCRIPT_THAANA
 = 37,

86 
	mUSCRIPT_THAI
 = 38,

87 
	mUSCRIPT_TIBETAN
 = 39,

89 
	mUSCRIPT_CANADIAN_ABORIGINAL
 = 40,

91 
	mUSCRIPT_UCAS
 = 
USCRIPT_CANADIAN_ABORIGINAL
,

92 
	mUSCRIPT_YI
 = 41,

93 
	mUSCRIPT_TAGALOG
 = 42,

94 
	mUSCRIPT_HANUNOO
 = 43,

95 
	mUSCRIPT_BUHID
 = 44,

96 
	mUSCRIPT_TAGBANWA
 = 45,

99 
	mUSCRIPT_BRAILLE
 = 46,

100 
	mUSCRIPT_CYPRIOT
 = 47,

101 
	mUSCRIPT_LIMBU
 = 48,

102 
	mUSCRIPT_LINEAR_B
 = 49,

103 
	mUSCRIPT_OSMANYA
 = 50,

104 
	mUSCRIPT_SHAVIAN
 = 51,

105 
	mUSCRIPT_TAI_LE
 = 52,

106 
	mUSCRIPT_UGARITIC
 = 53,

109 
	mUSCRIPT_KATAKANA_OR_HIRAGANA
 = 54,

112 
	mUSCRIPT_BUGINESE
 = 55,

113 
	mUSCRIPT_GLAGOLITIC
 = 56,

114 
	mUSCRIPT_KHAROSHTHI
 = 57,

115 
	mUSCRIPT_SYLOTI_NAGRI
 = 58,

116 
	mUSCRIPT_NEW_TAI_LUE
 = 59,

117 
	mUSCRIPT_TIFINAGH
 = 60,

118 
	mUSCRIPT_OLD_PERSIAN
 = 61,

121 
	mUSCRIPT_BALINESE
 = 62,

122 
	mUSCRIPT_BATAK
 = 63,

123 
	mUSCRIPT_BLISSYMBOLS
 = 64,

124 
	mUSCRIPT_BRAHMI
 = 65,

125 
	mUSCRIPT_CHAM
 = 66,

126 
	mUSCRIPT_CIRTH
 = 67,

127 
	mUSCRIPT_OLD_CHURCH_SLAVONIC_CYRILLIC
 = 68,

128 
	mUSCRIPT_DEMOTIC_EGYPTIAN
 = 69,

129 
	mUSCRIPT_HIERATIC_EGYPTIAN
 = 70,

130 
	mUSCRIPT_EGYPTIAN_HIEROGLYPHS
 = 71,

131 
	mUSCRIPT_KHUTSURI
 = 72,

132 
	mUSCRIPT_SIMPLIFIED_HAN
 = 73,

133 
	mUSCRIPT_TRADITIONAL_HAN
 = 74,

134 
	mUSCRIPT_PAHAWH_HMONG
 = 75,

135 
	mUSCRIPT_OLD_HUNGARIAN
 = 76,

136 
	mUSCRIPT_HARAPPAN_INDUS
 = 77,

137 
	mUSCRIPT_JAVANESE
 = 78,

138 
	mUSCRIPT_KAYAH_LI
 = 79,

139 
	mUSCRIPT_LATIN_FRAKTUR
 = 80,

140 
	mUSCRIPT_LATIN_GAELIC
 = 81,

141 
	mUSCRIPT_LEPCHA
 = 82,

142 
	mUSCRIPT_LINEAR_A
 = 83,

144 
	mUSCRIPT_MANDAIC
 = 84,

146 
	mUSCRIPT_MANDAEAN
 = 
USCRIPT_MANDAIC
,

147 
	mUSCRIPT_MAYAN_HIEROGLYPHS
 = 85,

149 
	mUSCRIPT_MEROITIC_HIEROGLYPHS
 = 86,

151 
	mUSCRIPT_MEROITIC
 = 
USCRIPT_MEROITIC_HIEROGLYPHS
,

152 
	mUSCRIPT_NKO
 = 87,

153 
	mUSCRIPT_ORKHON
 = 88,

154 
	mUSCRIPT_OLD_PERMIC
 = 89,

155 
	mUSCRIPT_PHAGS_PA
 = 90,

156 
	mUSCRIPT_PHOENICIAN
 = 91,

157 
	mUSCRIPT_PHONETIC_POLLARD
 = 92,

158 
	mUSCRIPT_RONGORONGO
 = 93,

159 
	mUSCRIPT_SARATI
 = 94,

160 
	mUSCRIPT_ESTRANGELO_SYRIAC
 = 95,

161 
	mUSCRIPT_WESTERN_SYRIAC
 = 96,

162 
	mUSCRIPT_EASTERN_SYRIAC
 = 97,

163 
	mUSCRIPT_TENGWAR
 = 98,

164 
	mUSCRIPT_VAI
 = 99,

165 
	mUSCRIPT_VISIBLE_SPEECH
 = 100,

166 
	mUSCRIPT_CUNEIFORM
 = 101,

167 
	mUSCRIPT_UNWRITTEN_LANGUAGES
 = 102,

168 
	mUSCRIPT_UNKNOWN
 = 103,

171 
	mUSCRIPT_CARIAN
 = 104,

172 
	mUSCRIPT_JAPANESE
 = 105,

173 
	mUSCRIPT_LANNA
 = 106,

174 
	mUSCRIPT_LYCIAN
 = 107,

175 
	mUSCRIPT_LYDIAN
 = 108,

176 
	mUSCRIPT_OL_CHIKI
 = 109,

177 
	mUSCRIPT_REJANG
 = 110,

178 
	mUSCRIPT_SAURASHTRA
 = 111,

179 
	mUSCRIPT_SIGN_WRITING
 = 112,

180 
	mUSCRIPT_SUNDANESE
 = 113,

181 
	mUSCRIPT_MOON
 = 114,

182 
	mUSCRIPT_MEITEI_MAYEK
 = 115,

185 
	mUSCRIPT_IMPERIAL_ARAMAIC
 = 116,

186 
	mUSCRIPT_AVESTAN
 = 117,

187 
	mUSCRIPT_CHAKMA
 = 118,

188 
	mUSCRIPT_KOREAN
 = 119,

189 
	mUSCRIPT_KAITHI
 = 120,

190 
	mUSCRIPT_MANICHAEAN
 = 121,

191 
	mUSCRIPT_INSCRIPTIONAL_PAHLAVI
 = 122,

192 
	mUSCRIPT_PSALTER_PAHLAVI
 = 123,

193 
	mUSCRIPT_BOOK_PAHLAVI
 = 124,

194 
	mUSCRIPT_INSCRIPTIONAL_PARTHIAN
 = 125,

195 
	mUSCRIPT_SAMARITAN
 = 126,

196 
	mUSCRIPT_TAI_VIET
 = 127,

197 
	mUSCRIPT_MATHEMATICAL_NOTATION
 = 128,

198 
	mUSCRIPT_SYMBOLS
 = 129,

201 
	mUSCRIPT_BAMUM
 = 130,

202 
	mUSCRIPT_LISU
 = 131,

203 
	mUSCRIPT_NAKHI_GEBA
 = 132,

204 
	mUSCRIPT_OLD_SOUTH_ARABIAN
 = 133,

207 
	mUSCRIPT_BASSA_VAH
 = 134,

208 
	mUSCRIPT_DUPLOYAN_SHORTAND
 = 135,

209 
	mUSCRIPT_ELBASAN
 = 136,

210 
	mUSCRIPT_GRANTHA
 = 137,

211 
	mUSCRIPT_KPELLE
 = 138,

212 
	mUSCRIPT_LOMA
 = 139,

213 
	mUSCRIPT_MENDE
 = 140,

214 
	mUSCRIPT_MEROITIC_CURSIVE
 = 141,

215 
	mUSCRIPT_OLD_NORTH_ARABIAN
 = 142,

216 
	mUSCRIPT_NABATAEAN
 = 143,

217 
	mUSCRIPT_PALMYRENE
 = 144,

218 
	mUSCRIPT_SINDHI
 = 145,

219 
	mUSCRIPT_WARANG_CITI
 = 146,

222 
	mUSCRIPT_CODE_LIMIT
 = 147

223 } 
	tUSütCode
;

243 
U_STABLE
 
št32_t
 
U_EXPORT2


244 
usüt_g‘Code
(cÚ¡ * 
ÇmeOrAbbrOrLoÿË
,
USütCode
* 
flIn
,
št32_t
 
ÿ·c™y
,
UE¼ÜCode
 *
”r
);

254 
U_STABLE
 cÚ¡ * 
U_EXPORT2


255 
usüt_g‘Name
(
USütCode
 
sütCode
);

265 
U_STABLE
 cÚ¡ * 
U_EXPORT2


266 
usüt_g‘ShÜtName
(
USütCode
 
sütCode
);

276 
U_STABLE
 
USütCode
 
U_EXPORT2


277 
usüt_g‘Süt
(
UCh¬32
 
cod•ošt
, 
UE¼ÜCode
 *
”r
);

294 
U_DRAFT
 
UBoŞ
 
U_EXPORT2


295 
usüt_hasSüt
(
UCh¬32
 
c
, 
USütCode
 
sc
);

321 
U_DRAFT
 
št32_t
 
U_EXPORT2


322 
usüt_g‘SütEx‹nsiÚs
(
UCh¬32
 
c
,

323 
USütCode
 *
süts
, 
št32_t
 
ÿ·c™y
,

324 
UE¼ÜCode
 *
pE¼ÜCode
);

	@unicode/uset.h

27 #iâdeà
__USET_H__


28 
	#__USET_H__


	)

30 
	~"unicode/uty³s.h
"

31 
	~"unicode/uch¬.h
"

32 
	~"unicode/loÿÍoš‹r.h
"

34 #iâdeà
UCNV_H


35 
	gUS‘
;

41 
US‘
 
	tUS‘
;

54 
	mUSET_IGNORE_SPACE
 = 1,

82 
	mUSET_CASE_INSENSITIVE
 = 2,

92 
	mUSET_ADD_CASE_MAPPINGS
 = 4,

98 
	mUSET_SERIALIZED_STATIC_ARRAY_CAPACITY
=8

156 
	eUS‘S·nCÚd™iÚ
 {

168 
	mUSET_SPAN_NOT_CONTAINED
 = 0,

183 
	mUSET_SPAN_CONTAINED
 = 1,

202 
	mUSET_SPAN_SIMPLE
 = 2,

207 
	mUSET_SPAN_CONDITION_COUNT


208 } 
	tUS‘S·nCÚd™iÚ
;

215 
	sUS”ŸlizedS‘
 {

220 cÚ¡ 
ušt16_t
 *
	m¬¿y
;

225 
št32_t
 
	mbmpL’gth
;

230 
št32_t
 
	mËngth
;

235 
ušt16_t
 
	m¡©icA¼ay
[
USET_SERIALIZED_STATIC_ARRAY_CAPACITY
];

236 } 
	tUS”ŸlizedS‘
;

249 
U_STABLE
 
US‘
* 
U_EXPORT2


250 
u£t_İ’Em±y
();

262 
U_STABLE
 
US‘
* 
U_EXPORT2


263 
u£t_İ’
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

274 
U_STABLE
 
US‘
* 
U_EXPORT2


275 
u£t_İ’P©‹º
(cÚ¡ 
UCh¬
* 
·‰”n
, 
št32_t
 
·‰”nL’gth
,

276 
UE¼ÜCode
* 
ec
);

289 
U_STABLE
 
US‘
* 
U_EXPORT2


290 
u£t_İ’P©‹ºO±iÚs
(cÚ¡ 
UCh¬
* 
·‰”n
, 
št32_t
 
·‰”nL’gth
,

291 
ušt32_t
 
İtiÚs
,

292 
UE¼ÜCode
* 
ec
);

300 
U_STABLE
 
U_EXPORT2


301 
u£t_şo£
(
US‘
* 
£t
);

303 #ià
U_SHOW_CPLUSPLUS_API


305 
U_NAMESPACE_BEGIN


316 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUS‘Poš‹r
, 
US‘
, 
u£t_şo£
);

318 
	gU_NAMESPACE_END


331 
U_STABLE
 
US‘
 * 
U_EXPORT2


332 
u£t_şÚe
(cÚ¡ 
US‘
 *
£t
);

343 
U_STABLE
 
UBoŞ
 
U_EXPORT2


344 
u£t_isFroz’
(cÚ¡ 
US‘
 *
£t
);

360 
U_STABLE
 
U_EXPORT2


361 
u£t_ä“ze
(
US‘
 *
£t
);

373 
U_STABLE
 
US‘
 * 
U_EXPORT2


374 
u£t_şÚeAsThawed
(cÚ¡ 
US‘
 *
£t
);

385 
U_STABLE
 
U_EXPORT2


386 
u£t_£t
(
US‘
* 
£t
,

387 
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

410 
U_STABLE
 
št32_t
 
U_EXPORT2


411 
u£t_­¶yP©‹º
(
US‘
 *
£t
,

412 cÚ¡ 
UCh¬
 *
·‰”n
, 
št32_t
 
·‰”nL’gth
,

413 
ušt32_t
 
İtiÚs
,

414 
UE¼ÜCode
 *
¡©us
);

438 
U_STABLE
 
U_EXPORT2


439 
u£t_­¶yIÁPrİ”tyV®ue
(
US‘
* 
£t
,

440 
UPrİ”ty
 
´İ
, 
št32_t
 
v®ue
, 
UE¼ÜCode
* 
ec
);

477 
U_STABLE
 
U_EXPORT2


478 
u£t_­¶yPrİ”tyAlŸs
(
US‘
* 
£t
,

479 cÚ¡ 
UCh¬
 *
´İ
, 
št32_t
 
´İL’gth
,

480 cÚ¡ 
UCh¬
 *
v®ue
, 
št32_t
 
v®ueL’gth
,

481 
UE¼ÜCode
* 
ec
);

492 
U_STABLE
 
UBoŞ
 
U_EXPORT2


493 
u£t_»£mbËsP©‹º
(cÚ¡ 
UCh¬
 *
·‰”n
, 
št32_t
 
·‰”nL’gth
,

494 
št32_t
 
pos
);

511 
U_STABLE
 
št32_t
 
U_EXPORT2


512 
u£t_toP©‹º
(cÚ¡ 
US‘
* 
£t
,

513 
UCh¬
* 
»suÉ
, 
št32_t
 
»suÉC­ac™y
,

514 
UBoŞ
 
esÿ³UÅršbË
,

515 
UE¼ÜCode
* 
ec
);

525 
U_STABLE
 
U_EXPORT2


526 
u£t_add
(
US‘
* 
£t
, 
UCh¬32
 
c
);

540 
U_STABLE
 
U_EXPORT2


541 
u£t_addAÎ
(
US‘
* 
£t
, cÚ¡ US‘ *
add™iÚ®S‘
);

552 
U_STABLE
 
U_EXPORT2


553 
u£t_addRªge
(
US‘
* 
£t
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

564 
U_STABLE
 
U_EXPORT2


565 
u£t_addSŒšg
(
US‘
* 
£t
, cÚ¡ 
UCh¬
* 
¡r
, 
št32_t
 
¡rL’
);

576 
U_STABLE
 
U_EXPORT2


577 
u£t_addAÎCodePošts
(
US‘
* 
£t
, cÚ¡ 
UCh¬
 *
¡r
, 
št32_t
 
¡rL’
);

587 
U_STABLE
 
U_EXPORT2


588 
u£t_»move
(
US‘
* 
£t
, 
UCh¬32
 
c
);

599 
U_STABLE
 
U_EXPORT2


600 
u£t_»moveRªge
(
US‘
* 
£t
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

611 
U_STABLE
 
U_EXPORT2


612 
u£t_»moveSŒšg
(
US‘
* 
£t
, cÚ¡ 
UCh¬
* 
¡r
, 
št32_t
 
¡rL’
);

625 
U_STABLE
 
U_EXPORT2


626 
u£t_»moveAÎ
(
US‘
* 
£t
, cÚ¡ US‘* 
»moveS‘
);

642 
U_STABLE
 
U_EXPORT2


643 
u£t_»š
(
US‘
* 
£t
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

657 
U_STABLE
 
U_EXPORT2


658 
u£t_»šAÎ
(
US‘
* 
£t
, cÚ¡ US‘* 
»š
);

668 
U_STABLE
 
U_EXPORT2


669 
u£t_com·ù
(
US‘
* 
£t
);

679 
U_STABLE
 
U_EXPORT2


680 
u£t_com¶em’t
(
US‘
* 
£t
);

693 
U_STABLE
 
U_EXPORT2


694 
u£t_com¶em’tAÎ
(
US‘
* 
£t
, cÚ¡ US‘* 
com¶em’t
);

703 
U_STABLE
 
U_EXPORT2


704 
u£t_ş—r
(
US‘
* 
£t
);

732 
U_STABLE
 
U_EXPORT2


733 
u£t_şo£Ov”
(
US‘
* 
£t
, 
št32_t
 
©Œibu‹s
);

741 
U_STABLE
 
U_EXPORT2


742 
u£t_»moveAÎSŒšgs
(
US‘
* 
£t
);

751 
U_STABLE
 
UBoŞ
 
U_EXPORT2


752 
u£t_isEm±y
(cÚ¡ 
US‘
* 
£t
);

762 
U_STABLE
 
UBoŞ
 
U_EXPORT2


763 
u£t_cÚšs
(cÚ¡ 
US‘
* 
£t
, 
UCh¬32
 
c
);

774 
U_STABLE
 
UBoŞ
 
U_EXPORT2


775 
u£t_cÚšsRªge
(cÚ¡ 
US‘
* 
£t
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
);

785 
U_STABLE
 
UBoŞ
 
U_EXPORT2


786 
u£t_cÚšsSŒšg
(cÚ¡ 
US‘
* 
£t
, cÚ¡ 
UCh¬
* 
¡r
, 
št32_t
 
¡rL’
);

798 
U_STABLE
 
št32_t
 
U_EXPORT2


799 
u£t_šdexOf
(cÚ¡ 
US‘
* 
£t
, 
UCh¬32
 
c
);

811 
U_STABLE
 
UCh¬32
 
U_EXPORT2


812 
u£t_ch¬At
(cÚ¡ 
US‘
* 
£t
, 
št32_t
 
ch¬Index
);

822 
U_STABLE
 
št32_t
 
U_EXPORT2


823 
u£t_size
(cÚ¡ 
US‘
* 
£t
);

833 
U_STABLE
 
št32_t
 
U_EXPORT2


834 
u£t_g‘I‹mCouÁ
(cÚ¡ 
US‘
* 
£t
);

854 
U_STABLE
 
št32_t
 
U_EXPORT2


855 
u£t_g‘I‹m
(cÚ¡ 
US‘
* 
£t
, 
št32_t
 
™emIndex
,

856 
UCh¬32
* 
¡¬t
, UCh¬32* 
’d
,

857 
UCh¬
* 
¡r
, 
št32_t
 
¡rC­ac™y
,

858 
UE¼ÜCode
* 
ec
);

868 
U_STABLE
 
UBoŞ
 
U_EXPORT2


869 
u£t_cÚšsAÎ
(cÚ¡ 
US‘
* 
£t1
, cÚ¡ US‘* 
£t2
);

881 
U_STABLE
 
UBoŞ
 
U_EXPORT2


882 
u£t_cÚšsAÎCodePošts
(cÚ¡ 
US‘
* 
£t
, cÚ¡ 
UCh¬
 *
¡r
, 
št32_t
 
¡rL’
);

892 
U_STABLE
 
UBoŞ
 
U_EXPORT2


893 
u£t_cÚšsNÚe
(cÚ¡ 
US‘
* 
£t1
, cÚ¡ US‘* 
£t2
);

903 
U_STABLE
 
UBoŞ
 
U_EXPORT2


904 
u£t_cÚšsSome
(cÚ¡ 
US‘
* 
£t1
, cÚ¡ US‘* 
£t2
);

925 
U_STABLE
 
št32_t
 
U_EXPORT2


926 
u£t_¥ª
(cÚ¡ 
US‘
 *
£t
, cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
);

946 
U_STABLE
 
št32_t
 
U_EXPORT2


947 
u£t_¥ªBack
(cÚ¡ 
US‘
 *
£t
, cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
);

968 
U_STABLE
 
št32_t
 
U_EXPORT2


969 
u£t_¥ªUTF8
(cÚ¡ 
US‘
 *
£t
, cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
);

989 
U_STABLE
 
št32_t
 
U_EXPORT2


990 
u£t_¥ªBackUTF8
(cÚ¡ 
US‘
 *
£t
, cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
);

1000 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1001 
u£t_equ®s
(cÚ¡ 
US‘
* 
£t1
, cÚ¡ US‘* 
£t2
);

1056 
U_STABLE
 
št32_t
 
U_EXPORT2


1057 
u£t_£rŸlize
(cÚ¡ 
US‘
* 
£t
, 
ušt16_t
* 
de¡
, 
št32_t
 
de¡C­ac™y
, 
UE¼ÜCode
* 
pE¼ÜCode
);

1067 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1068 
u£t_g‘S”ŸlizedS‘
(
US”ŸlizedS‘
* 
flS‘
, cÚ¡ 
ušt16_t
* 
¤c
, 
št32_t
 
¤cL’gth
);

1077 
U_STABLE
 
U_EXPORT2


1078 
u£t_£tS”ŸlizedToOÃ
(
US”ŸlizedS‘
* 
flS‘
, 
UCh¬32
 
c
);

1088 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1089 
u£t_£rŸlizedCÚšs
(cÚ¡ 
US”ŸlizedS‘
* 
£t
, 
UCh¬32
 
c
);

1100 
U_STABLE
 
št32_t
 
U_EXPORT2


1101 
u£t_g‘S”ŸlizedRªgeCouÁ
(cÚ¡ 
US”ŸlizedS‘
* 
£t
);

1116 
U_STABLE
 
UBoŞ
 
U_EXPORT2


1117 
u£t_g‘S”ŸlizedRªge
(cÚ¡ 
US”ŸlizedS‘
* 
£t
, 
št32_t
 
¿ngeIndex
,

1118 
UCh¬32
* 
pS¹
, UCh¬32* 
pEnd
);

	@unicode/usetiter.h

7 #iâdeà
USETITER_H


8 
	#USETITER_H


	)

10 
	~"unicode/uty³s.h
"

11 
	~"unicode/uobjeù.h
"

12 
	~"unicode/uni¡r.h
"

19 
U_NAMESPACE_BEGIN


21 
şass
 
	gUnicodeS‘
;

22 
şass
 
	gUnicodeSŒšg
;

61 şas 
	cU_COMMON_API
 
	mUnicodeS‘I‹¿tÜ
 : 
public
 
UObjeù
 {

63 
´Ùeùed
:

71 ’um { 
IS_STRING
 = -1 };

78 
UCh¬32
 
	gcod•ošt
;

89 
UCh¬32
 
	gcod•oštEnd
;

97 cÚ¡ 
UnicodeSŒšg
* 
	g¡ršg
;

99 
	gpublic
:

107 
UnicodeS‘I‹¿tÜ
(cÚ¡ 
UnicodeS‘
& 
£t
);

115 
UnicodeS‘I‹¿tÜ
();

121 
	gvœtu®
 ~
UnicodeS‘I‹¿tÜ
();

138 
šlše
 
UBoŞ
 
	$isSŒšg
() const;

145 
šlše
 
UCh¬32
 
	$g‘Cod•ošt
() const;

153 
šlše
 
UCh¬32
 
	$g‘Cod•oštEnd
() const;

166 cÚ¡ 
UnicodeSŒšg
& 
	`g‘SŒšg
();

190 
UBoŞ
 
	`Ãxt
();

211 
UBoŞ
 
	`ÃxtRªge
();

220 
	`»£t
(cÚ¡ 
UnicodeS‘
& 
£t
);

226 
	`»£t
();

233 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

240 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

244 
´Ùeùed
:

252 cÚ¡ 
UnicodeS‘
* 
£t
;

256 
št32_t
 
’dRªge
;

260 
št32_t
 
¿nge
;

264 
št32_t
 
’dEËm’t
;

268 
št32_t
 
ÃxtEËm’t
;

273 
št32_t
 
ÃxtSŒšg
;

277 
št32_t
 
¡ršgCouÁ
;

284 
UnicodeSŒšg
 *
ıSŒšg
;

289 
	`UnicodeS‘I‹¿tÜ
(cÚ¡ 
UnicodeS‘I‹¿tÜ
&);

294 
UnicodeS‘I‹¿tÜ
& 
İ”©Ü
=(const UnicodeSetIterator&);

299 
vœtu®
 
	`lßdRªge
(
št32_t
 
¿nge
);

301 
	}
};

303 
šlše
 
UBoŞ
 
	gUnicodeS‘I‹¿tÜ
::
	$isSŒšg
() const {

304  
cod•ošt
 =ğ(
UCh¬32
)
IS_STRING
;

305 
	}
}

307 
šlše
 
UCh¬32
 
	gUnicodeS‘I‹¿tÜ
::
	$g‘Cod•ošt
() const {

308  
cod•ošt
;

309 
	}
}

311 
šlše
 
UCh¬32
 
	gUnicodeS‘I‹¿tÜ
::
	$g‘Cod•oštEnd
() const {

312  
cod•oštEnd
;

313 
	}
}

316 
	gU_NAMESPACE_END


	@unicode/ushape.h

17 #iâdeà
__USHAPE_H__


18 
	#__USHAPE_H__


	)

20 
	~"unicode/uty³s.h
"

100 
U_STABLE
 
št32_t
 
U_EXPORT2


101 
u_sh­eA¿bic
(cÚ¡ 
UCh¬
 *
sourû
, 
št32_t
 
sourûL’gth
,

102 
UCh¬
 *
de¡
, 
št32_t
 
de¡Size
,

103 
ušt64_t
 
İtiÚs
,

104 
UE¼ÜCode
 *
pE¼ÜCode
);

112 
	#U_SHAPE_LENGTH_GROW_SHRINK
 0

	)

120 
	#U_SHAPE_LAMALEF_RESIZE
 0

	)

127 
	#U_SHAPE_LENGTH_FIXED_SPACES_NEAR
 1

	)

136 
	#U_SHAPE_LAMALEF_NEAR
 1

	)

143 
	#U_SHAPE_LENGTH_FIXED_SPACES_AT_END
 2

	)

152 
	#U_SHAPE_LAMALEF_END
 2

	)

159 
	#U_SHAPE_LENGTH_FIXED_SPACES_AT_BEGINNING
 3

	)

168 
	#U_SHAPE_LAMALEF_BEGIN
 3

	)

184 
	#U_SHAPE_LAMALEF_AUTO
 0x10000

	)

187 
	#U_SHAPE_LENGTH_MASK
 0x10003

	)

194 
	#U_SHAPE_LAMALEF_MASK
 0x10003

	)

197 
	#U_SHAPE_TEXT_DIRECTION_LOGICAL
 0

	)

206 
	#U_SHAPE_TEXT_DIRECTION_VISUAL_RTL
 0

	)

214 
	#U_SHAPE_TEXT_DIRECTION_VISUAL_LTR
 4

	)

217 
	#U_SHAPE_TEXT_DIRECTION_MASK
 4

	)

221 
	#U_SHAPE_LETTERS_NOOP
 0

	)

224 
	#U_SHAPE_LETTERS_SHAPE
 8

	)

227 
	#U_SHAPE_LETTERS_UNSHAPE
 0x10

	)

236 
	#U_SHAPE_LETTERS_SHAPE_TASHKEEL_ISOLATED
 0x18

	)

240 
	#U_SHAPE_LETTERS_MASK
 0x18

	)

244 
	#U_SHAPE_DIGITS_NOOP
 0

	)

251 
	#U_SHAPE_DIGITS_EN2AN
 0x20

	)

258 
	#U_SHAPE_DIGITS_AN2EN
 0x40

	)

271 
	#U_SHAPE_DIGITS_ALEN2AN_INIT_LR
 0x60

	)

283 
	#U_SHAPE_DIGITS_ALEN2AN_INIT_AL
 0x80

	)

286 
	#U_SHAPE_DIGITS_RESERVED
 0xa0

	)

289 
	#U_SHAPE_DIGITS_MASK
 0xe0

	)

293 
	#U_SHAPE_DIGIT_TYPE_AN
 0

	)

296 
	#U_SHAPE_DIGIT_TYPE_AN_EXTENDED
 0x100

	)

299 
	#U_SHAPE_DIGIT_TYPE_RESERVED
 0x200

	)

302 
	#U_SHAPE_DIGIT_TYPE_MASK
 0x300

	)

311 
	#U_SHAPE_AGGREGATE_TASHKEEL
 0x4000

	)

313 
	#U_SHAPE_AGGREGATE_TASHKEEL_NOOP
 0

	)

315 
	#U_SHAPE_AGGREGATE_TASHKEEL_MASK
 0x4000

	)

323 
	#U_SHAPE_PRESERVE_PRESENTATION
 0x8000

	)

329 
	#U_SHAPE_PRESERVE_PRESENTATION_NOOP
 0

	)

331 
	#U_SHAPE_PRESERVE_PRESENTATION_MASK
 0x8000

	)

346 
	#U_SHAPE_SEEN_TWOCELL_NEAR
 0x200000

	)

352 
	#U_SHAPE_SEEN_MASK
 0x700000

	)

367 
	#U_SHAPE_YEHHAMZA_TWOCELL_NEAR
 0x1000000

	)

374 
	#U_SHAPE_YEHHAMZA_MASK
 0x3800000

	)

386 
	#U_SHAPE_TASHKEEL_BEGIN
 0x40000

	)

397 
	#U_SHAPE_TASHKEEL_END
 0x60000

	)

407 
	#U_SHAPE_TASHKEEL_RESIZE
 0x80000

	)

418 
	#U_SHAPE_TASHKEEL_REPLACE_BY_TATWEEL
 0xC0000

	)

424 
	#U_SHAPE_TASHKEEL_MASK
 0xE0000

	)

448 
	#U_SHAPE_SPACES_RELATIVE_TO_TEXT_BEGIN_END
 0x4000000

	)

454 
	#U_SHAPE_SPACES_RELATIVE_TO_TEXT_MASK
 0x4000000

	)

468 
	#SHAPE_TAIL_NEW_UNICODE
 0x8000000

	)

474 
	#SHAPE_TAIL_TYPE_MASK
 0x8000000

	)

484 
	#U_SHAPE_X_LAMALEF_SUB_ALTERNATE
 (0x1ULL << 32)

	)

	@unicode/usprep.h

17 #iâdeà
__USPREP_H__


18 
	#__USPREP_H__


	)

25 
	~"unicode/uty³s.h
"

26 
	~"unicode/loÿÍoš‹r.h
"

60 #ià!
UCONFIG_NO_IDNA


62 
	~"unicode/·r£”r.h
"

68 
USŒšgP»pProfe
 
	tUSŒšgP»pProfe
;

77 
	#USPREP_DEFAULT
 0x0000

	)

85 
	#USPREP_ALLOW_UNASSIGNED
 0x0001

	)

93 
	eUSŒšgP»pProfeTy³
 {

98 
	mUSPREP_RFC3491_NAMEPREP
,

103 
	mUSPREP_RFC3530_NFS4_CS_PREP
,

108 
	mUSPREP_RFC3530_NFS4_CS_PREP_CI
,

113 
	mUSPREP_RFC3530_NFS4_CIS_PREP
,

118 
	mUSPREP_RFC3530_NFS4_MIXED_PREP_PREFIX
,

123 
	mUSPREP_RFC3530_NFS4_MIXED_PREP_SUFFIX
,

128 
	mUSPREP_RFC3722_ISCSI
,

133 
	mUSPREP_RFC3920_NODEPREP
,

138 
	mUSPREP_RFC3920_RESOURCEPREP
,

143 
	mUSPREP_RFC4011_MIB
,

148 
	mUSPREP_RFC4013_SASLPREP
,

153 
	mUSPREP_RFC4505_TRACE
,

158 
	mUSPREP_RFC4518_LDAP
,

164 
	mUSPREP_RFC4518_LDAP_CI


165 } 
	tUSŒšgP»pProfeTy³
;

182 
U_STABLE
 
USŒšgP»pProfe
* 
U_EXPORT2


183 
u¥»p_İ’
(cÚ¡ * 
·th
,

184 cÚ¡ * 
feName
,

185 
UE¼ÜCode
* 
¡©us
);

198 
U_STABLE
 
USŒšgP»pProfe
* 
U_EXPORT2


199 
u¥»p_İ’ByTy³
(
USŒšgP»pProfeTy³
 
ty³
,

200 
UE¼ÜCode
* 
¡©us
);

207 
U_STABLE
 
U_EXPORT2


208 
u¥»p_şo£
(
USŒšgP»pProfe
* 
´ofe
);

210 #ià
U_SHOW_CPLUSPLUS_API


212 
U_NAMESPACE_BEGIN


223 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUSŒšgP»pProfePoš‹r
, 
USŒšgP»pProfe
, 
u¥»p_şo£
);

225 
	gU_NAMESPACE_END


258 
U_STABLE
 
št32_t
 
U_EXPORT2


259 
u¥»p_´•¬e
ĞcÚ¡ 
USŒšgP»pProfe
* 
´•
,

260 cÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

261 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

262 
št32_t
 
İtiÚs
,

263 
UP¬£E¼Ü
* 
·r£E¼Ü
,

264 
UE¼ÜCode
* 
¡©us
 );

	@unicode/ustring.h

16 #iâdeà
USTRING_H


17 
	#USTRING_H


	)

19 
	~"unicode/uty³s.h
"

20 
	~"unicode/put.h
"

21 
	~"unicode/u™”.h
"

24 #iâdeà
UBRK_TYPEDEF_UBREAK_ITERATOR


25 
	#UBRK_TYPEDEF_UBREAK_ITERATOR


	)

26 
UB»akI‹¿tÜ
 
	tUB»akI‹¿tÜ
;

85 
U_STABLE
 
št32_t
 
U_EXPORT2


86 
u_¡¾’
(cÚ¡ 
UCh¬
 *
s
);

102 
U_STABLE
 
št32_t
 
U_EXPORT2


103 
u_couÁCh¬32
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
);

123 
U_STABLE
 
UBoŞ
 
U_EXPORT2


124 
u_¡rHasMÜeCh¬32Thª
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, iÁ32_ˆ
numb”
);

136 
U_STABLE
 
UCh¬
* 
U_EXPORT2


137 
u_¡rÿt
(
UCh¬
 *
d¡
,

138 cÚ¡ 
UCh¬
 *
¤c
);

154 
U_STABLE
 
UCh¬
* 
U_EXPORT2


155 
u_¡ºÿt
(
UCh¬
 *
d¡
,

156 cÚ¡ 
UCh¬
 *
¤c
,

157 
št32_t
 
n
);

179 
U_STABLE
 
UCh¬
 * 
U_EXPORT2


180 
u_¡r¡r
(cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
sub¡ršg
);

203 
U_STABLE
 
UCh¬
 * 
U_EXPORT2


204 
u_¡rFšdFœ¡
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, cÚ¡ UCh¬ *
sub¡ršg
, iÁ32_ˆ
subL’gth
);

223 
U_STABLE
 
UCh¬
 * 
U_EXPORT2


224 
u_¡rchr
(cÚ¡ 
UCh¬
 *
s
, UCh¬ 
c
);

243 
U_STABLE
 
UCh¬
 * 
U_EXPORT2


244 
u_¡rchr32
(cÚ¡ 
UCh¬
 *
s
, 
UCh¬32
 
c
);

266 
U_STABLE
 
UCh¬
 * 
U_EXPORT2


267 
u_¡¼¡r
(cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
sub¡ršg
);

290 
U_STABLE
 
UCh¬
 * 
U_EXPORT2


291 
u_¡rFšdLa¡
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, cÚ¡ UCh¬ *
sub¡ršg
, iÁ32_ˆ
subL’gth
);

310 
U_STABLE
 
UCh¬
 * 
U_EXPORT2


311 
u_¡¼chr
(cÚ¡ 
UCh¬
 *
s
, UCh¬ 
c
);

330 
U_STABLE
 
UCh¬
 * 
U_EXPORT2


331 
u_¡¼chr32
(cÚ¡ 
UCh¬
 *
s
, 
UCh¬32
 
c
);

345 
U_STABLE
 
UCh¬
 * 
U_EXPORT2


346 
u_¡½brk
(cÚ¡ 
UCh¬
 *
¡ršg
, cÚ¡ UCh¬ *
m©chS‘
);

361 
U_STABLE
 
št32_t
 
U_EXPORT2


362 
u_¡rc¥n
(cÚ¡ 
UCh¬
 *
¡ršg
, cÚ¡ UCh¬ *
m©chS‘
);

377 
U_STABLE
 
št32_t
 
U_EXPORT2


378 
u_¡r¥n
(cÚ¡ 
UCh¬
 *
¡ršg
, cÚ¡ UCh¬ *
m©chS‘
);

405 
U_STABLE
 
UCh¬
 * 
U_EXPORT2


406 
u_¡¹ok_r
(
UCh¬
 *
¤c
,

407 cÚ¡ 
UCh¬
 *
d–im
,

408 
UCh¬
 **
§veS‹
);

420 
U_STABLE
 
št32_t
 
U_EXPORT2


421 
u_¡rcmp
(cÚ¡ 
UCh¬
 *
s1
,

422 cÚ¡ 
UCh¬
 *
s2
);

435 
U_STABLE
 
št32_t
 
U_EXPORT2


436 
u_¡rcmpCodePoštOrd”
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
);

465 
U_STABLE
 
št32_t
 
U_EXPORT2


466 
u_¡rCom·»
(cÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

467 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

468 
UBoŞ
 
codePoštOrd”
);

490 
U_STABLE
 
št32_t
 
U_EXPORT2


491 
u_¡rCom·»I‹r
(
UCh¬I‹¿tÜ
 *
™”1
, UCh¬I‹¿tÜ *
™”2
, 
UBoŞ
 
codePoštOrd”
);

493 #iâdeà
U_COMPARE_CODE_POINT_ORDER


500 
	#U_COMPARE_CODE_POINT_ORDER
 0x8000

	)

543 
U_STABLE
 
št32_t
 
U_EXPORT2


544 
u_¡rCa£Com·»
(cÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

545 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

546 
ušt32_t
 
İtiÚs
,

547 
UE¼ÜCode
 *
pE¼ÜCode
);

561 
U_STABLE
 
št32_t
 
U_EXPORT2


562 
u_¡ºcmp
(cÚ¡ 
UCh¬
 *
ucs1
,

563 cÚ¡ 
UCh¬
 *
ucs2
,

564 
št32_t
 
n
);

579 
U_STABLE
 
št32_t
 
U_EXPORT2


580 
u_¡ºcmpCodePoštOrd”
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
, 
št32_t
 
n
);

601 
U_STABLE
 
št32_t
 
U_EXPORT2


602 
u_¡rÿ£cmp
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
, 
ušt32_t
 
İtiÚs
);

625 
U_STABLE
 
št32_t
 
U_EXPORT2


626 
u_¡ºÿ£cmp
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
, 
št32_t
 
n
, 
ušt32_t
 
İtiÚs
);

649 
U_STABLE
 
št32_t
 
U_EXPORT2


650 
u_memÿ£cmp
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
, 
št32_t
 
Ëngth
, 
ušt32_t
 
İtiÚs
);

660 
U_STABLE
 
UCh¬
* 
U_EXPORT2


661 
u_¡rıy
(
UCh¬
 *
d¡
,

662 cÚ¡ 
UCh¬
 *
¤c
);

675 
U_STABLE
 
UCh¬
* 
U_EXPORT2


676 
u_¡ºıy
(
UCh¬
 *
d¡
,

677 cÚ¡ 
UCh¬
 *
¤c
,

678 
št32_t
 
n
);

680 #ià!
UCONFIG_NO_CONVERSION


692 
U_STABLE
 
UCh¬
* 
U_EXPORT2
 
u_ua¡rıy
(UCh¬ *
d¡
,

693 cÚ¡ *
¤c
 );

707 
U_STABLE
 
UCh¬
* 
U_EXPORT2
 
u_ua¡ºıy
(UCh¬ *
d¡
,

708 cÚ¡ *
¤c
,

709 
št32_t
 
n
);

721 
U_STABLE
 * 
U_EXPORT2
 
u_au¡rıy
(*
d¡
,

722 cÚ¡ 
UCh¬
 *
¤c
 );

736 
U_STABLE
 * 
U_EXPORT2
 
u_au¡ºıy
(*
d¡
,

737 cÚ¡ 
UCh¬
 *
¤c
,

738 
št32_t
 
n
 );

750 
U_STABLE
 
UCh¬
* 
U_EXPORT2


751 
u_memıy
(
UCh¬
 *
de¡
, cÚ¡ UCh¬ *
¤c
, 
št32_t
 
couÁ
);

761 
U_STABLE
 
UCh¬
* 
U_EXPORT2


762 
u_memmove
(
UCh¬
 *
de¡
, cÚ¡ UCh¬ *
¤c
, 
št32_t
 
couÁ
);

773 
U_STABLE
 
UCh¬
* 
U_EXPORT2


774 
u_mem£t
(
UCh¬
 *
de¡
, UCh¬ 
c
, 
št32_t
 
couÁ
);

787 
U_STABLE
 
št32_t
 
U_EXPORT2


788 
u_memcmp
(cÚ¡ 
UCh¬
 *
buf1
, cÚ¡ UCh¬ *
buf2
, 
št32_t
 
couÁ
);

803 
U_STABLE
 
št32_t
 
U_EXPORT2


804 
u_memcmpCodePoštOrd”
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
, 
št32_t
 
couÁ
);

823 
U_STABLE
 
UCh¬
* 
U_EXPORT2


824 
u_memchr
(cÚ¡ 
UCh¬
 *
s
, UCh¬ 
c
, 
št32_t
 
couÁ
);

843 
U_STABLE
 
UCh¬
* 
U_EXPORT2


844 
u_memchr32
(cÚ¡ 
UCh¬
 *
s
, 
UCh¬32
 
c
, 
št32_t
 
couÁ
);

863 
U_STABLE
 
UCh¬
* 
U_EXPORT2


864 
u_memrchr
(cÚ¡ 
UCh¬
 *
s
, UCh¬ 
c
, 
št32_t
 
couÁ
);

883 
U_STABLE
 
UCh¬
* 
U_EXPORT2


884 
u_memrchr32
(cÚ¡ 
UCh¬
 *
s
, 
UCh¬32
 
c
, 
št32_t
 
couÁ
);

936 #ià
defšed
(
U_DECLARE_UTF16
)

937 
	#U_STRING_DECL
(
v¬
, 
cs
, 
Ëngth
ècÚ¡ 
UCh¬
 v¬[Ö’gth)+1]=
	`U_DECLARE_UTF16
(cs)

	)

939 
	#U_STRING_INIT
(
v¬
, 
cs
, 
Ëngth
)

	)

940 #–ià
U_SIZEOF_WCHAR_T
==
U_SIZEOF_UCHAR
 && (
U_CHARSET_FAMILY
==
U_ASCII_FAMILY
 || (U_SIZEOF_UCHAR =ğ2 && 
defšed
(
U_WCHAR_IS_UTF16
)))

941 
	#U_STRING_DECL
(
v¬
, 
cs
, 
Ëngth
ècÚ¡ 
UCh¬
 v¬[Ö’gth)+1]=
L
 ## 
	)
cs

943 
	#U_STRING_INIT
(
v¬
, 
cs
, 
Ëngth
)

	)

944 #–ià
U_SIZEOF_UCHAR
==1 && 
U_CHARSET_FAMILY
==
U_ASCII_FAMILY


945 
	#U_STRING_DECL
(
v¬
, 
cs
, 
Ëngth
ècÚ¡ 
UCh¬
 v¬[Ö’gth)+1]=
	)
cs

947 
	#U_STRING_INIT
(
v¬
, 
cs
, 
Ëngth
)

	)

949 
	#U_STRING_DECL
(
v¬
, 
cs
, 
Ëngth
è
UCh¬
 v¬[Ö’gth)+1]

	)

951 
	#U_STRING_INIT
(
v¬
, 
cs
, 
Ëngth
è
	`u_ch¬sToUCh¬s
(cs, v¬,†’gth+1)

	)

1001 
U_STABLE
 
št32_t
 
U_EXPORT2


1002 
u_uÃsÿ³
(cÚ¡ *
¤c
,

1003 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
);

1005 
U_CDECL_BEGIN


1018 
	$UCh¬
 (
	tU_CALLCONV
 *
	tUNESCAPE_CHAR_AT
)(
	tšt32_t
 
	toff£t
, *
	tcÚ‹xt
);

1019 
U_CDECL_END


1049 
U_STABLE
 
UCh¬32
 
U_EXPORT2


1050 
	`u_uÃsÿ³At
(
UNESCAPE_CHAR_AT
 
ch¬At
,

1051 
št32_t
 *
off£t
,

1052 
št32_t
 
Ëngth
,

1053 *
cÚ‹xt
);

1075 
U_STABLE
 
št32_t
 
U_EXPORT2


1076 
	`u_¡rToUµ”
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1077 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

1078 cÚ¡ *
loÿË
,

1079 
UE¼ÜCode
 *
pE¼ÜCode
);

1101 
U_STABLE
 
št32_t
 
U_EXPORT2


1102 
	`u_¡rToLow”
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1103 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

1104 cÚ¡ *
loÿË
,

1105 
UE¼ÜCode
 *
pE¼ÜCode
);

1107 #ià!
UCONFIG_NO_BREAK_ITERATION


1147 
U_STABLE
 
št32_t
 
U_EXPORT2


1148 
	`u_¡rToT™Ë
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1149 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

1150 
UB»akI‹¿tÜ
 *
t™ËI‹r
,

1151 cÚ¡ *
loÿË
,

1152 
UE¼ÜCode
 *
pE¼ÜCode
);

1178 
U_STABLE
 
št32_t
 
U_EXPORT2


1179 
	`u_¡rFŞdCa£
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1180 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

1181 
ušt32_t
 
İtiÚs
,

1182 
UE¼ÜCode
 *
pE¼ÜCode
);

1184 #ià
	`defšed
(
U_WCHAR_IS_UTF16
è|| defšed(
U_WCHAR_IS_UTF32
è|| !
UCONFIG_NO_CONVERSION


1207 
U_STABLE
 
wch¬_t
* 
U_EXPORT2


1208 
	`u_¡rToWCS
(
wch¬_t
 *
de¡
,

1209 
št32_t
 
de¡C­ac™y
,

1210 
št32_t
 *
pDe¡L’gth
,

1211 cÚ¡ 
UCh¬
 *
¤c
,

1212 
št32_t
 
¤cL’gth
,

1213 
UE¼ÜCode
 *
pE¼ÜCode
);

1236 
U_STABLE
 
UCh¬
* 
U_EXPORT2


1237 
	`u_¡rFromWCS
(
UCh¬
 *
de¡
,

1238 
št32_t
 
de¡C­ac™y
,

1239 
št32_t
 *
pDe¡L’gth
,

1240 cÚ¡ 
wch¬_t
 *
¤c
,

1241 
št32_t
 
¤cL’gth
,

1242 
UE¼ÜCode
 *
pE¼ÜCode
);

1267 
U_STABLE
 * 
U_EXPORT2


1268 
	`u_¡rToUTF8
(*
de¡
,

1269 
št32_t
 
de¡C­ac™y
,

1270 
št32_t
 *
pDe¡L’gth
,

1271 cÚ¡ 
UCh¬
 *
¤c
,

1272 
št32_t
 
¤cL’gth
,

1273 
UE¼ÜCode
 *
pE¼ÜCode
);

1297 
U_STABLE
 
UCh¬
* 
U_EXPORT2


1298 
	`u_¡rFromUTF8
(
UCh¬
 *
de¡
,

1299 
št32_t
 
de¡C­ac™y
,

1300 
št32_t
 *
pDe¡L’gth
,

1301 cÚ¡ *
¤c
,

1302 
št32_t
 
¤cL’gth
,

1303 
UE¼ÜCode
 *
pE¼ÜCode
);

1341 
U_STABLE
 * 
U_EXPORT2


1342 
	`u_¡rToUTF8W™hSub
(*
de¡
,

1343 
št32_t
 
de¡C­ac™y
,

1344 
št32_t
 *
pDe¡L’gth
,

1345 cÚ¡ 
UCh¬
 *
¤c
,

1346 
št32_t
 
¤cL’gth
,

1347 
UCh¬32
 
subch¬
, 
št32_t
 *
pNumSub¡™utiÚs
,

1348 
UE¼ÜCode
 *
pE¼ÜCode
);

1387 
U_STABLE
 
UCh¬
* 
U_EXPORT2


1388 
	`u_¡rFromUTF8W™hSub
(
UCh¬
 *
de¡
,

1389 
št32_t
 
de¡C­ac™y
,

1390 
št32_t
 *
pDe¡L’gth
,

1391 cÚ¡ *
¤c
,

1392 
št32_t
 
¤cL’gth
,

1393 
UCh¬32
 
subch¬
, 
št32_t
 *
pNumSub¡™utiÚs
,

1394 
UE¼ÜCode
 *
pE¼ÜCode
);

1447 
U_STABLE
 
UCh¬
 * 
U_EXPORT2


1448 
	`u_¡rFromUTF8L’›Á
(
UCh¬
 *
de¡
,

1449 
št32_t
 
de¡C­ac™y
,

1450 
št32_t
 *
pDe¡L’gth
,

1451 cÚ¡ *
¤c
,

1452 
št32_t
 
¤cL’gth
,

1453 
UE¼ÜCode
 *
pE¼ÜCode
);

1477 
U_STABLE
 
UCh¬32
* 
U_EXPORT2


1478 
	`u_¡rToUTF32
(
UCh¬32
 *
de¡
,

1479 
št32_t
 
de¡C­ac™y
,

1480 
št32_t
 *
pDe¡L’gth
,

1481 cÚ¡ 
UCh¬
 *
¤c
,

1482 
št32_t
 
¤cL’gth
,

1483 
UE¼ÜCode
 *
pE¼ÜCode
);

1507 
U_STABLE
 
UCh¬
* 
U_EXPORT2


1508 
	`u_¡rFromUTF32
(
UCh¬
 *
de¡
,

1509 
št32_t
 
de¡C­ac™y
,

1510 
št32_t
 *
pDe¡L’gth
,

1511 cÚ¡ 
UCh¬32
 *
¤c
,

1512 
št32_t
 
¤cL’gth
,

1513 
UE¼ÜCode
 *
pE¼ÜCode
);

1551 
U_STABLE
 
UCh¬32
* 
U_EXPORT2


1552 
	`u_¡rToUTF32W™hSub
(
UCh¬32
 *
de¡
,

1553 
št32_t
 
de¡C­ac™y
,

1554 
št32_t
 *
pDe¡L’gth
,

1555 cÚ¡ 
UCh¬
 *
¤c
,

1556 
št32_t
 
¤cL’gth
,

1557 
UCh¬32
 
subch¬
, 
št32_t
 *
pNumSub¡™utiÚs
,

1558 
UE¼ÜCode
 *
pE¼ÜCode
);

1596 
U_STABLE
 
UCh¬
* 
U_EXPORT2


1597 
	`u_¡rFromUTF32W™hSub
(
UCh¬
 *
de¡
,

1598 
št32_t
 
de¡C­ac™y
,

1599 
št32_t
 *
pDe¡L’gth
,

1600 cÚ¡ 
UCh¬32
 *
¤c
,

1601 
št32_t
 
¤cL’gth
,

1602 
UCh¬32
 
subch¬
, 
št32_t
 *
pNumSub¡™utiÚs
,

1603 
UE¼ÜCode
 *
pE¼ÜCode
);

1637 
U_STABLE
 * 
U_EXPORT2


1638 
	`u_¡rToJavaModif›dUTF8
(

1639 *
de¡
,

1640 
št32_t
 
de¡C­ac™y
,

1641 
št32_t
 *
pDe¡L’gth
,

1642 cÚ¡ 
UCh¬
 *
¤c
,

1643 
št32_t
 
¤cL’gth
,

1644 
UE¼ÜCode
 *
pE¼ÜCode
);

1686 
U_STABLE
 
UCh¬
* 
U_EXPORT2


1687 
	`u_¡rFromJavaModif›dUTF8W™hSub
(

1688 
UCh¬
 *
de¡
,

1689 
št32_t
 
de¡C­ac™y
,

1690 
št32_t
 *
pDe¡L’gth
,

1691 cÚ¡ *
¤c
,

1692 
št32_t
 
¤cL’gth
,

1693 
UCh¬32
 
subch¬
, 
št32_t
 *
pNumSub¡™utiÚs
,

1694 
UE¼ÜCode
 *
pE¼ÜCode
);

	@unicode/usystem.h

21 #iâdeà
USYSTEM_H


22 
	#USYSTEM_H


	)

24 #ifdeà
U_HIDE_SYSTEM_API


26 #ià
U_DISABLE_RENAMING


27 
	#u_ş—nup
 
u_ş—nup_SYSTEM_API_DO_NOT_USE


	)

28 
	#u_£tAtomicIncDecFunùiÚs
 
u_£tAtomicIncDecFunùiÚs_SYSTEM_API_DO_NOT_USE


	)

29 
	#u_£tMemÜyFunùiÚs
 
u_£tMemÜyFunùiÚs_SYSTEM_API_DO_NOT_USE


	)

30 
	#u_£tMu‹xFunùiÚs
 
u_£tMu‹xFunùiÚs_SYSTEM_API_DO_NOT_USE


	)

31 
	#uúv_£tDeçuÉName
 
uúv_£tDeçuÉName_SYSTEM_API_DO_NOT_USE


	)

32 
	#uloc_g‘DeçuÉ
 
uloc_g‘DeçuÉ_SYSTEM_API_DO_NOT_USE


	)

33 
	#uloc_£tDeçuÉ
 
uloc_£tDeçuÉ_SYSTEM_API_DO_NOT_USE


	)

35 
	#u_ş—nup_4_6
 
u_ş—nup_SYSTEM_API_DO_NOT_USE


	)

36 
	#u_£tAtomicIncDecFunùiÚs_4_6
 
u_£tAtomicIncDecFunùiÚs_SYSTEM_API_DO_NOT_USE


	)

37 
	#u_£tMemÜyFunùiÚs_4_6
 
u_£tMemÜyFunùiÚs_SYSTEM_API_DO_NOT_USE


	)

38 
	#u_£tMu‹xFunùiÚs_4_6
 
u_£tMu‹xFunùiÚs_SYSTEM_API_DO_NOT_USE


	)

39 
	#uúv_£tDeçuÉName_4_6
 
uúv_£tDeçuÉName_SYSTEM_API_DO_NOT_USE


	)

40 
	#uloc_g‘DeçuÉ_4_6
 
uloc_g‘DeçuÉ_SYSTEM_API_DO_NOT_USE


	)

41 
	#uloc_£tDeçuÉ_4_6
 
uloc_£tDeçuÉ_SYSTEM_API_DO_NOT_USE


	)

	@unicode/utext.h

17 #iâdeà
__UTEXT_H__


18 
	#__UTEXT_H__


	)

138 
	~"unicode/uty³s.h
"

139 
	~"unicode/uch¬.h
"

140 #ià
U_SHOW_CPLUSPLUS_API


141 
	~"unicode/loÿÍoš‹r.h
"

142 
	~"unicode/»p.h
"

143 
	~"unicode/uni¡r.h
"

144 
	~"unicode/ch¬™”.h
"

148 
U_CDECL_BEGIN


150 
	gUText
;

151 
UText
 
	tUText
;

181 
U_STABLE
 
UText
 * 
U_EXPORT2


182 
u‹xt_şo£
(
UText
 *
ut
);

184 #ià
U_SHOW_CPLUSPLUS_API


186 
U_NAMESPACE_BEGIN


197 
U_DEFINE_LOCAL_OPEN_POINTER
(
LoÿlUTextPoš‹r
, 
UText
, 
u‹xt_şo£
);

199 
	gU_NAMESPACE_END


224 
U_STABLE
 
UText
 * 
U_EXPORT2


225 
u‹xt_İ’UTF8
(
UText
 *
ut
, cÚ¡ *
s
, 
št64_t
 
Ëngth
, 
UE¼ÜCode
 *
¡©us
);

242 
U_STABLE
 
UText
 * 
U_EXPORT2


243 
u‹xt_İ’UCh¬s
(
UText
 *
ut
, cÚ¡ 
UCh¬
 *
s
, 
št64_t
 
Ëngth
, 
UE¼ÜCode
 *
¡©us
);

246 #ià
U_SHOW_CPLUSPLUS_API


259 
U_STABLE
 
UText
 * 
U_EXPORT2


260 
u‹xt_İ’UnicodeSŒšg
(
UText
 *
ut
, 
U_NAMESPACE_QUALIFIER
 
UnicodeSŒšg
 *
s
, 
UE¼ÜCode
 *
¡©us
);

275 
U_STABLE
 
UText
 * 
U_EXPORT2


276 
u‹xt_İ’CÚ¡UnicodeSŒšg
(
UText
 *
ut
, cÚ¡ 
U_NAMESPACE_QUALIFIER
 
UnicodeSŒšg
 *
s
, 
UE¼ÜCode
 *
¡©us
);

291 
U_STABLE
 
UText
 * 
U_EXPORT2


292 
u‹xt_İ’R•ÏûabË
(
UText
 *
ut
, 
U_NAMESPACE_QUALIFIER
 
R•ÏûabË
 *
»p
, 
UE¼ÜCode
 *
¡©us
);

306 
U_STABLE
 
UText
 * 
U_EXPORT2


307 
u‹xt_İ’Ch¬aù”I‹¿tÜ
(
UText
 *
ut
, 
U_NAMESPACE_QUALIFIER
 
Ch¬aù”I‹¿tÜ
 *
ic
, 
UE¼ÜCode
 *
¡©us
);

369 
U_STABLE
 
UText
 * 
U_EXPORT2


370 
u‹xt_şÚe
(
UText
 *
de¡
, cÚ¡ UTexˆ*
¤c
, 
UBoŞ
 
d“p
, UBoŞ 
»adOÆy
, 
UE¼ÜCode
 *
¡©us
);

384 
U_STABLE
 
UBoŞ
 
U_EXPORT2


385 
u‹xt_equ®s
(cÚ¡ 
UText
 *
a
, cÚ¡ UTexˆ*
b
);

405 
U_STABLE
 
št64_t
 
U_EXPORT2


406 
u‹xt_ÇtiveL’gth
(
UText
 *
ut
);

421 
U_STABLE
 
UBoŞ
 
U_EXPORT2


422 
u‹xt_isL’gthEx³nsive
(cÚ¡ 
UText
 *
ut
);

449 
U_STABLE
 
UCh¬32
 
U_EXPORT2


450 
u‹xt_ch¬32At
(
UText
 *
ut
, 
št64_t
 
ÇtiveIndex
);

463 
U_STABLE
 
UCh¬32
 
U_EXPORT2


464 
u‹xt_cu¼’t32
(
UText
 *
ut
);

485 
U_STABLE
 
UCh¬32
 
U_EXPORT2


486 
u‹xt_Ãxt32
(
UText
 *
ut
);

506 
U_STABLE
 
UCh¬32
 
U_EXPORT2


507 
u‹xt_´evious32
(
UText
 *
ut
);

528 
U_STABLE
 
UCh¬32
 
U_EXPORT2


529 
u‹xt_Ãxt32From
(
UText
 *
ut
, 
št64_t
 
ÇtiveIndex
);

548 
U_STABLE
 
UCh¬32
 
U_EXPORT2


549 
u‹xt_´evious32From
(
UText
 *
ut
, 
št64_t
 
ÇtiveIndex
);

563 
U_STABLE
 
št64_t
 
U_EXPORT2


564 
u‹xt_g‘N©iveIndex
(cÚ¡ 
UText
 *
ut
);

589 
U_STABLE
 
U_EXPORT2


590 
u‹xt_£tN©iveIndex
(
UText
 *
ut
, 
št64_t
 
ÇtiveIndex
);

608 
U_STABLE
 
UBoŞ
 
U_EXPORT2


609 
u‹xt_moveIndex32
(
UText
 *
ut
, 
št32_t
 
d–
);

633 
U_STABLE
 
št64_t
 
U_EXPORT2


634 
u‹xt_g‘P»viousN©iveIndex
(
UText
 *
ut
);

671 
U_STABLE
 
št32_t
 
U_EXPORT2


672 
u‹xt_exŒaù
(
UText
 *
ut
,

673 
št64_t
 
ÇtiveS¹
, iÁ64_ˆ
ÇtiveLim™
,

674 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

675 
UE¼ÜCode
 *
¡©us
);

704 
U_INTERNAL
 
št32_t
 
U_EXPORT2


705 
u‹xt_com·»
(
UText
 *
s1
, 
št32_t
 
Ëngth1
,

706 
UText
 *
s2
, 
št32_t
 
Ëngth2
);

735 
U_INTERNAL
 
št32_t
 
U_EXPORT2


736 
u‹xt_com·»N©iveLim™
(
UText
 *
s1
, 
št64_t
 
lim™1
,

737 
UText
 *
s2
, 
št64_t
 
lim™2
);

773 
U_INTERNAL
 
št32_t
 
U_EXPORT2


774 
u‹xt_ÿ£Com·»
(
UText
 *
s1
, 
št32_t
 
Ëngth1
,

775 
UText
 *
s2
, 
št32_t
 
Ëngth2
,

776 
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 *
pE¼ÜCode
);

814 
U_INTERNAL
 
št32_t
 
U_EXPORT2


815 
u‹xt_ÿ£Com·»N©iveLim™
(
UText
 *
s1
, 
št64_t
 
lim™1
,

816 
UText
 *
s2
, 
št64_t
 
lim™2
,

817 
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 *
pE¼ÜCode
);

844 
	#UTEXT_CURRENT32
(
ut
) \

845 ((
ut
)->
chunkOff£t
 < (ut)->
chunkL’gth
 && ((ut)->
chunkCÚ‹Ás
)[(ut)->chunkOffset]<0xd800 ? \

846 ((
ut
)->
chunkCÚ‹Ás
)[((ut)->
chunkOff£t
)] : 
	`u‹xt_cu¼’t32
(ut))

	)

859 
	#UTEXT_NEXT32
(
ut
) \

860 ((
ut
)->
chunkOff£t
 < (ut)->
chunkL’gth
 && ((ut)->
chunkCÚ‹Ás
)[(ut)->chunkOffset]<0xd800 ? \

861 ((
ut
)->
chunkCÚ‹Ás
)[((ut)->
chunkOff£t
)++] : 
	`u‹xt_Ãxt32
(ut))

	)

873 
	#UTEXT_PREVIOUS32
(
ut
) \

874 ((
ut
)->
chunkOff£t
 > 0 && \

875 (
ut
)->
chunkCÚ‹Ás
[(ut)->
chunkOff£t
-1] < 0xd800 ? \

876 (
ut
)->
chunkCÚ‹Ás
[--((ut)->
chunkOff£t
)] : 
	`u‹xt_´evious32
(ut))

	)

890 
	#UTEXT_GETNATIVEINDEX
(
ut
) \

891 ((
ut
)->
chunkOff£t
 <ğ(ut)->
ÇtiveIndexšgLim™
? \

892 (
ut
)->
chunkN©iveS¹
+(ut)->
chunkOff£t
 : \

893 (
ut
)->
pFuncs
->
	`m­Off£tToN©ive
(ut))

	)

906 
	#UTEXT_SETNATIVEINDEX
(
ut
, 
ix
) \

907 { 
št64_t
 
__off£t
 = (
ix
è- (
ut
)->
chunkN©iveS¹
; \

908 ià(
__off£t
>=0 && __off£t<=(
št64_t
)(
ut
)->
ÇtiveIndexšgLim™
) { \

909 (
ut
)->
chunkOff£t
=(
št32_t
)
__off£t
; \

911 
	`u‹xt_£tN©iveIndex
((
ut
), (
ix
)); } }

	)

942 
U_STABLE
 
UBoŞ
 
U_EXPORT2


943 
u‹xt_isWr™abË
(cÚ¡ 
UText
 *
ut
);

954 
U_STABLE
 
UBoŞ
 
U_EXPORT2


955 
u‹xt_hasM‘aD©a
(cÚ¡ 
UText
 *
ut
);

985 
U_STABLE
 
št32_t
 
U_EXPORT2


986 
u‹xt_»¶aû
(
UText
 *
ut
,

987 
št64_t
 
ÇtiveS¹
, iÁ64_ˆ
ÇtiveLim™
,

988 cÚ¡ 
UCh¬
 *
»¶aûm’tText
, 
št32_t
 
»¶aûm’tL’gth
,

989 
UE¼ÜCode
 *
¡©us
);

1025 
U_STABLE
 
U_EXPORT2


1026 
u‹xt_cİy
(
UText
 *
ut
,

1027 
št64_t
 
ÇtiveS¹
, iÁ64_ˆ
ÇtiveLim™
,

1028 
št64_t
 
de¡Index
,

1029 
UBoŞ
 
move
,

1030 
UE¼ÜCode
 *
¡©us
);

1054 
U_STABLE
 
U_EXPORT2


1055 
u‹xt_ä“ze
(
UText
 *
ut
);

1069 
	mUTEXT_PROVIDER_LENGTH_IS_EXPENSIVE
 = 1,

1076 
	mUTEXT_PROVIDER_STABLE_CHUNKS
 = 2,

1083 
	mUTEXT_PROVIDER_WRITABLE
 = 3,

1089 
	mUTEXT_PROVIDER_HAS_META_DATA
 = 4,

1097 
	mUTEXT_PROVIDER_OWNS_TEXT
 = 5

1137 
UText
 * 
	tU_CALLCONV


1138 
	tUTextClÚe
(
	tUText
 *
	tde¡
, cÚ¡ UTexˆ*
	t¤c
, 
	tUBoŞ
 
	td“p
, 
	tUE¼ÜCode
 *
	t¡©us
);

1149 
št64_t
 
	tU_CALLCONV


1150 
	tUTextN©iveL’gth
(
	tUText
 *
	tut
);

1177 
UBoŞ
 
	tU_CALLCONV


1178 
	tUTextAcûss
(
	tUText
 *
	tut
, 
	tšt64_t
 
	tÇtiveIndex
, 
	tUBoŞ
 
	tfÜw¬d
);

1207 
št32_t
 
	tU_CALLCONV


1208 
	tUTextExŒaù
(
	tUText
 *
	tut
,

1209 
	tšt64_t
 
	tÇtiveS¹
, iÁ64_ˆ
	tÇtiveLim™
,

1210 
	tUCh¬
 *
	tde¡
, 
	tšt32_t
 
	tde¡C­ac™y
,

1211 
	tUE¼ÜCode
 *
	t¡©us
);

1242 
št32_t
 
	tU_CALLCONV


1243 
	tUTextR•Ïû
(
	tUText
 *
	tut
,

1244 
	tšt64_t
 
	tÇtiveS¹
, iÁ64_ˆ
	tÇtiveLim™
,

1245 cÚ¡ 
	tUCh¬
 *
	t»¶aûm’tText
, 
	tšt32_t
 
	t»¶acm’tL’gth
,

1246 
	tUE¼ÜCode
 *
	t¡©us
);

1276 
	tU_CALLCONV


1277 
	tUTextCİy
(
	tUText
 *
	tut
,

1278 
	tšt64_t
 
	tÇtiveS¹
, iÁ64_ˆ
	tÇtiveLim™
,

1279 
	tšt64_t
 
	tÇtiveDe¡
,

1280 
	tUBoŞ
 
	tmove
,

1281 
	tUE¼ÜCode
 *
	t¡©us
);

1296 
št64_t
 
	tU_CALLCONV


1297 
	tUTextM­Off£tToN©ive
(cÚ¡ 
	tUText
 *
	tut
);

1314 
št32_t
 
	tU_CALLCONV


1315 
	tUTextM­N©iveIndexToUTF16
(cÚ¡ 
	tUText
 *
	tut
, 
	tšt64_t
 
	tÇtiveIndex
);

1335 
	tU_CALLCONV


1336 
	tUTextClo£
(
	tUText
 *
	tut
);

1348 
	sUTextFuncs
 {

1363 
št32_t
 
	mbËSize
;

1370 
št32_t
 
	m»£rved1
, 
	m»£rved2
, 
	m»£rved3
;

1379 
UTextClÚe
 *
	mşÚe
;

1388 
UTextN©iveL’gth
 *
	mÇtiveL’gth
;

1396 
UTextAcûss
 *
	macûss
;

1404 
UTextExŒaù
 *
	mexŒaù
;

1412 
UTextR•Ïû
 *
	m»¶aû
;

1420 
UTextCİy
 *
	mcİy
;

1428 
UTextM­Off£tToN©ive
 *
	mm­Off£tToN©ive
;

1436 
UTextM­N©iveIndexToUTF16
 *
	mm­N©iveIndexToUTF16
;

1444 
UTextClo£
 *
	mşo£
;

1450 
UTextClo£
 *
	m¥¬e1
;

1456 
UTextClo£
 *
	m¥¬e2
;

1462 
UTextClo£
 *
	m¥¬e3
;

1469 
UTextFuncs
 
	tUTextFuncs
;

1482 
	sUText
 {

1495 
ušt32_t
 
	mmagic
;

1503 
št32_t
 
	mæags
;

1511 
št32_t
 
	m´ovid”Prİ”t›s
;

1519 
št32_t
 
	msizeOfSŒuù
;

1529 
št64_t
 
	mchunkN©iveLim™
;

1535 
št32_t
 
	mexŒaSize
;

1544 
št32_t
 
	mÇtiveIndexšgLim™
;

1552 
št64_t
 
	mchunkN©iveS¹
;

1559 
št32_t
 
	mchunkOff£t
;

1565 
št32_t
 
	mchunkL’gth
;

1576 cÚ¡ 
UCh¬
 *
	mchunkCÚ‹Ás
;

1582 cÚ¡ 
UTextFuncs
 *
	mpFuncs
;

1589 *
	mpExŒa
;

1597 cÚ¡ *
	mcÚ‹xt
;

1606 cÚ¡ *
	mp
;

1612 cÚ¡ *
	mq
;

1618 cÚ¡ *
	mr
;

1625 *
	m´ivP
;

1636 
št64_t
 
	ma
;

1643 
št32_t
 
	mb
;

1650 
št32_t
 
	mc
;

1660 
št64_t
 
	m´ivA
;

1666 
št32_t
 
	m´ivB
;

1672 
št32_t
 
	m´ivC
;

1692 
U_STABLE
 
UText
 * 
U_EXPORT2


1693 
u‹xt_£tup
(
UText
 *
ut
, 
št32_t
 
exŒaS·û
, 
UE¼ÜCode
 *
¡©us
);

1701 
	mUTEXT_MAGIC
 = 0x345ad82c

1711 
	#UTEXT_INITIALIZER
 { \

1712 
UTEXT_MAGIC
, \

1715 (
UText
), \

1722 
NULL
, \

1723 
NULL
, \

1724 
NULL
, \

1725 
NULL
, \

1726 
NULL
, NULL, NULL, \

1727 
NULL
, \

1730 }

	)

1733 
	gU_CDECL_END


	@unicode/utf.h

108 #iâdeà
__UTF_H__


109 
	#__UTF_H__


	)

111 
	~"unicode/uty³s.h
"

134 
	#U_SENTINEL
 (-1)

	)

142 
	#U_IS_UNICODE_NONCHAR
(
c
) \

143 ((
c
)>=0xfdd0 && \

144 ((
ušt32_t
)(
c
)<=0xfdef || ((c)&0xfffe)==0xfffe) && \

145 (
ušt32_t
)(
c
)<=0x10ffff)

	)

164 
	#U_IS_UNICODE_CHAR
(
c
) \

165 ((
ušt32_t
)(
c
)<0xd800 || \

166 ((
ušt32_t
)(
c
)>0xdfff && \

167 (
ušt32_t
)(
c
)<=0x10ffff && \

168 !
	`U_IS_UNICODE_NONCHAR
(
c
)))

	)

176 
	#U_IS_BMP
(
c
è((
ušt32_t
)(c)<=0xffff)

	)

184 
	#U_IS_SUPPLEMENTARY
(
c
è((
ušt32_t
)((c)-0x10000)<=0xfffff)

	)

192 
	#U_IS_LEAD
(
c
è(((c)&0xfffffc00)==0xd800)

	)

200 
	#U_IS_TRAIL
(
c
è(((c)&0xfffffc00)==0xdc00)

	)

208 
	#U_IS_SURROGATE
(
c
è(((c)&0xfffff800)==0xd800)

	)

217 
	#U_IS_SURROGATE_LEAD
(
c
è(((c)&0x400)==0)

	)

226 
	#U_IS_SURROGATE_TRAIL
(
c
è(((c)&0x400)!=0)

	)

230 
	~"unicode/utf8.h
"

231 
	~"unicode/utf16.h
"

234 
	~"unicode/utf_Şd.h
"

	@unicode/utf16.h

34 #iâdeà
__UTF16_H__


35 
	#__UTF16_H__


	)

38 #iâdeà
__UTF_H__


39 
	~"unicode/utf.h
"

50 
	#U16_IS_SINGLE
(
c
è!
	`U_IS_SURROGATE
(c)

	)

58 
	#U16_IS_LEAD
(
c
è(((c)&0xfffffc00)==0xd800)

	)

66 
	#U16_IS_TRAIL
(
c
è(((c)&0xfffffc00)==0xdc00)

	)

74 
	#U16_IS_SURROGATE
(
c
è
	`U_IS_SURROGATE
(c)

	)

83 
	#U16_IS_SURROGATE_LEAD
(
c
è(((c)&0x400)==0)

	)

92 
	#U16_IS_SURROGATE_TRAIL
(
c
è(((c)&0x400)!=0)

	)

98 
	#U16_SURROGATE_OFFSET
 ((0xd800<<10UL)+0xdc00-0x10000)

	)

111 
	#U16_GET_SUPPLEMENTARY
(
Ëad
, 
Œa
) \

112 (((
UCh¬32
)(
Ëad
)<<10UL)+(UCh¬32)(
Œa
)-
U16_SURROGATE_OFFSET
)

	)

122 
	#U16_LEAD
(
suµËm’ry
è(
UCh¬
)(((suµËm’ry)>>10)+0xd7c0)

	)

131 
	#U16_TRAIL
(
suµËm’ry
è(
UCh¬
)(((suµËm’ry)&0x3ff)|0xdc00)

	)

140 
	#U16_LENGTH
(
c
è((
ušt32_t
)(c)<=0xfffà? 1 : 2)

	)

147 
	#U16_MAX_LENGTH
 2

	)

166 
	#U16_GET_UNSAFE
(
s
, 
i
, 
c
) { \

167 (
c
)=(
s
)[
i
]; \

168 if(
	`U16_IS_SURROGATE
(
c
)) { \

169 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) { \

170 (
c
)=
	`U16_GET_SUPPLEMENTARY
((c), (
s
)[(
i
)+1]); \

172 (
c
)=
	`U16_GET_SUPPLEMENTARY
((
s
)[(
i
)-1], (c)); \

175 }

	)

197 
	#U16_GET
(
s
, 
¡¬t
, 
i
, 
Ëngth
, 
c
) { \

198 (
c
)=(
s
)[
i
]; \

199 if(
	`U16_IS_SURROGATE
(
c
)) { \

200 
ušt16_t
 
__c2
; \

201 if(
	`U16_IS_SURROGATE_LEAD
(
c
)) { \

202 if((
i
)+1<(
Ëngth
è&& 
	`U16_IS_TRAIL
(
__c2
=(
s
)[(i)+1])) { \

203 (
c
)=
	`U16_GET_SUPPLEMENTARY
((c), 
__c2
); \

206 if((
i
)>(
¡¬t
è&& 
	`U16_IS_LEAD
(
__c2
=(
s
)[(i)-1])) { \

207 (
c
)=
	`U16_GET_SUPPLEMENTARY
(
__c2
, (c)); \

211 }

	)

234 
	#U16_NEXT_UNSAFE
(
s
, 
i
, 
c
) { \

235 (
c
)=(
s
)[(
i
)++]; \

236 if(
	`U16_IS_LEAD
(
c
)) { \

237 (
c
)=
	`U16_GET_SUPPLEMENTARY
((c), (
s
)[(
i
)++]); \

239 }

	)

261 
	#U16_NEXT
(
s
, 
i
, 
Ëngth
, 
c
) { \

262 (
c
)=(
s
)[(
i
)++]; \

263 if(
	`U16_IS_LEAD
(
c
)) { \

264 
ušt16_t
 
__c2
; \

265 if((
i
)<(
Ëngth
è&& 
	`U16_IS_TRAIL
(
__c2
=(
s
)[(i)])) { \

266 ++(
i
); \

267 (
c
)=
	`U16_GET_SUPPLEMENTARY
((c), 
__c2
); \

270 }

	)

285 
	#U16_APPEND_UNSAFE
(
s
, 
i
, 
c
) { \

286 if((
ušt32_t
)(
c
)<=0xffff) { \

287 (
s
)[(
i
)++]=(
ušt16_t
)(
c
); \

289 (
s
)[(
i
)++]=(
ušt16_t
)(((
c
)>>10)+0xd7c0); \

290 (
s
)[(
i
)++]=(
ušt16_t
)(((
c
)&0x3ff)|0xdc00); \

292 }

	)

311 
	#U16_APPEND
(
s
, 
i
, 
ÿ·c™y
, 
c
, 
isE¼Ü
) { \

312 if((
ušt32_t
)(
c
)<=0xffff) { \

313 (
s
)[(
i
)++]=(
ušt16_t
)(
c
); \

314 } if((
ušt32_t
)(
c
)<=0x10fffà&& (
i
)+1<(
ÿ·c™y
)) { \

315 (
s
)[(
i
)++]=(
ušt16_t
)(((
c
)>>10)+0xd7c0); \

316 (
s
)[(
i
)++]=(
ušt16_t
)(((
c
)&0x3ff)|0xdc00); \

318 (
isE¼Ü
)=
TRUE
; \

320 }

	)

332 
	#U16_FWD_1_UNSAFE
(
s
, 
i
) { \

333 if(
	`U16_IS_LEAD
((
s
)[(
i
)++])) { \

334 ++(
i
); \

336 }

	)

349 
	#U16_FWD_1
(
s
, 
i
, 
Ëngth
) { \

350 if(
	`U16_IS_LEAD
((
s
)[(
i
)++]è&& (i)<(
Ëngth
è&& 
	`U16_IS_TRAIL
((s)[i])) { \

351 ++(
i
); \

353 }

	)

367 
	#U16_FWD_N_UNSAFE
(
s
, 
i
, 
n
) { \

368 
št32_t
 
__N
=(
n
); \

369 
__N
>0) { \

370 
	`U16_FWD_1_UNSAFE
(
s
, 
i
); \

371 --
__N
; \

373 }

	)

388 
	#U16_FWD_N
(
s
, 
i
, 
Ëngth
, 
n
) { \

389 
št32_t
 
__N
=(
n
); \

390 
__N
>0 && (
i
)<(
Ëngth
)) { \

391 
	`U16_FWD_1
(
s
, 
i
, 
Ëngth
); \

392 --
__N
; \

394 }

	)

409 
	#U16_SET_CP_START_UNSAFE
(
s
, 
i
) { \

410 if(
	`U16_IS_TRAIL
((
s
)[
i
])) { \

411 --(
i
); \

413 }

	)

429 
	#U16_SET_CP_START
(
s
, 
¡¬t
, 
i
) { \

430 if(
	`U16_IS_TRAIL
((
s
)[
i
]è&& (i)>(
¡¬t
è&& 
	`U16_IS_LEAD
((s)[(i)-1])) { \

431 --(
i
); \

433 }

	)

457 
	#U16_PREV_UNSAFE
(
s
, 
i
, 
c
) { \

458 (
c
)=(
s
)[--(
i
)]; \

459 if(
	`U16_IS_TRAIL
(
c
)) { \

460 (
c
)=
	`U16_GET_SUPPLEMENTARY
((
s
)[--(
i
)], (c)); \

462 }

	)

485 
	#U16_PREV
(
s
, 
¡¬t
, 
i
, 
c
) { \

486 (
c
)=(
s
)[--(
i
)]; \

487 if(
	`U16_IS_TRAIL
(
c
)) { \

488 
ušt16_t
 
__c2
; \

489 if((
i
)>(
¡¬t
è&& 
	`U16_IS_LEAD
(
__c2
=(
s
)[(i)-1])) { \

490 --(
i
); \

491 (
c
)=
	`U16_GET_SUPPLEMENTARY
(
__c2
, (c)); \

494 }

	)

507 
	#U16_BACK_1_UNSAFE
(
s
, 
i
) { \

508 if(
	`U16_IS_TRAIL
((
s
)[--(
i
)])) { \

509 --(
i
); \

511 }

	)

525 
	#U16_BACK_1
(
s
, 
¡¬t
, 
i
) { \

526 if(
	`U16_IS_TRAIL
((
s
)[--(
i
)]è&& (i)>(
¡¬t
è&& 
	`U16_IS_LEAD
((s)[(i)-1])) { \

527 --(
i
); \

529 }

	)

544 
	#U16_BACK_N_UNSAFE
(
s
, 
i
, 
n
) { \

545 
št32_t
 
__N
=(
n
); \

546 
__N
>0) { \

547 
	`U16_BACK_1_UNSAFE
(
s
, 
i
); \

548 --
__N
; \

550 }

	)

566 
	#U16_BACK_N
(
s
, 
¡¬t
, 
i
, 
n
) { \

567 
št32_t
 
__N
=(
n
); \

568 
__N
>0 && (
i
)>(
¡¬t
)) { \

569 
	`U16_BACK_1
(
s
, 
¡¬t
, 
i
); \

570 --
__N
; \

572 }

	)

587 
	#U16_SET_CP_LIMIT_UNSAFE
(
s
, 
i
) { \

588 if(
	`U16_IS_LEAD
((
s
)[(
i
)-1])) { \

589 ++(
i
); \

591 }

	)

608 
	#U16_SET_CP_LIMIT
(
s
, 
¡¬t
, 
i
, 
Ëngth
) { \

609 if((
¡¬t
)<(
i
è&& (i)<(
Ëngth
è&& 
	`U16_IS_LEAD
((
s
)[(i)-1]è&& 
	`U16_IS_TRAIL
((s)[i])) { \

610 ++(
i
); \

612 }

	)

	@unicode/utf32.h

	@unicode/utf8.h

34 #iâdeà
__UTF8_H__


35 
	#__UTF8_H__


	)

38 #iâdeà
__UTF_H__


39 
	~"unicode/utf.h
"

55 #ifdeà
U_UTF8_IMPL


56 
U_EXPORT
 cÚ¡ 
	gušt8_t


57 #–ià
defšed
(
U_STATIC_IMPLEMENTATION
è|| defšed(
U_COMMON_IMPLEMENTATION
)

58 
U_CFUNC
 cÚ¡ 
	gušt8_t


60 
U_CFUNC
 
U_IMPORT
 cÚ¡ 
	gušt8_t


62 
	gutf8_couÁT¿By‹s
[256];

71 
	#U8_COUNT_TRAIL_BYTES
(
ËadBy‹
è(
utf8_couÁT¿By‹s
[(
ušt8_t
î—dBy‹])

	)

80 
	#U8_MASK_LEAD_BYTE
(
ËadBy‹
, 
couÁT¿By‹s
è(Ö—dBy‹)&=(1<<(6-(couÁT¿By‹s)))-1)

	)

91 
U_STABLE
 
UCh¬32
 
U_EXPORT2


92 
utf8_ÃxtCh¬SaãBody
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 *
pi
, iÁ32_ˆ
Ëngth
, 
UCh¬32
 
c
, 
UBoŞ
 
¡riù
);

103 
U_STABLE
 
št32_t
 
U_EXPORT2


104 
utf8_­³ndCh¬SaãBody
(
ušt8_t
 *
s
, 
št32_t
 
i
, iÁ32_ˆ
Ëngth
, 
UCh¬32
 
c
, 
UBoŞ
 *
pIsE¼Ü
);

115 
U_STABLE
 
UCh¬32
 
U_EXPORT2


116 
utf8_´evCh¬SaãBody
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
¡¬t
, iÁ32_ˆ*
pi
, 
UCh¬32
 
c
, 
UBoŞ
 
¡riù
);

127 
U_STABLE
 
št32_t
 
U_EXPORT2


128 
utf8_back1SaãBody
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
¡¬t
, iÁ32_ˆ
i
);

138 
	#U8_IS_SINGLE
(
c
è(((c)&0x80)==0)

	)

146 
	#U8_IS_LEAD
(
c
è((
ušt8_t
)((c)-0xc0)<0x3e)

	)

154 
	#U8_IS_TRAIL
(
c
è(((c)&0xc0)==0x80)

	)

163 
	#U8_LENGTH
(
c
) \

164 ((
ušt32_t
)(
c
)<=0x7f ? 1 : \

165 ((
ušt32_t
)(
c
)<=0x7ff ? 2 : \

166 ((
ušt32_t
)(
c
)<=0xd7ff ? 3 : \

167 ((
ušt32_t
)(
c
)<=0xdfff || (uint32_t)(c)>0x10ffff ? 0 : \

168 ((
ušt32_t
)(
c
)<=0xffff ? 3 : 4)\

172 )

	)

179 
	#U8_MAX_LENGTH
 4

	)

197 
	#U8_GET_UNSAFE
(
s
, 
i
, 
c
) { \

198 
št32_t
 
_u8_g‘_un§ã_šdex
=(št32_t)(
i
); \

199 
	`U8_SET_CP_START_UNSAFE
(
s
, 
_u8_g‘_un§ã_šdex
); \

200 
	`U8_NEXT_UNSAFE
(
s
, 
_u8_g‘_un§ã_šdex
, 
c
); \

201 }

	)

221 
	#U8_GET
(
s
, 
¡¬t
, 
i
, 
Ëngth
, 
c
) { \

222 
št32_t
 
_u8_g‘_šdex
=(št32_t)(
i
); \

223 
	`U8_SET_CP_START
(
s
, 
¡¬t
, 
_u8_g‘_šdex
); \

224 
	`U8_NEXT
(
s
, 
_u8_g‘_šdex
, 
Ëngth
, 
c
); \

225 }

	)

246 
	#U8_NEXT_UNSAFE
(
s
, 
i
, 
c
) { \

247 (
c
)=(
ušt8_t
)(
s
)[(
i
)++]; \

248 if((
ušt8_t
)((
c
)-0xc0)<0x35) { \

249 
ušt8_t
 
__couÁ
=
	`U8_COUNT_TRAIL_BYTES
(
c
); \

250 
	`U8_MASK_LEAD_BYTE
(
c
, 
__couÁ
); \

251 
__couÁ
) { \

254 (
c
)=((c)<<6)|((
s
)[(
i
)++]&0x3f); \

256 (
c
)=((c)<<6)|((
s
)[(
i
)++]&0x3f); \

258 (
c
)=((c)<<6)|((
s
)[(
i
)++]&0x3f); \

263 }

	)

283 
	#U8_NEXT
(
s
, 
i
, 
Ëngth
, 
c
) { \

284 (
c
)=(
ušt8_t
)(
s
)[(
i
)++]; \

285 if((
c
)>=0x80) { \

286 
ušt8_t
 
__t1
, 
__t2
; \

288 (0xe0<(
c
) && (c)<=0xec) && \

289 (((
i
)+1)<(
Ëngth
)) && \

290 (
__t1
=(
ušt8_t
)((
s
)[
i
]-0x80))<=0x3f && \

291 (
__t2
=(
ušt8_t
)((
s
)[(
i
)+1]-0x80))<= 0x3f \

294 (
c
)=(
UCh¬
)(((c)<<12)|(
__t1
<<6)|
__t2
); \

295 (
i
)+=2; \

297 ((
c
)<0xe0 && (c)>=0xc2) && \

298 ((
i
)<(
Ëngth
)) && \

299 (
__t1
=(
ušt8_t
)((
s
)[
i
]-0x80))<=0x3f \

301 (
c
)=(
UCh¬
)((((c)&0x1f)<<6)|
__t1
); \

302 ++(
i
); \

303 } if(
	`U8_IS_LEAD
(
c
)) { \

305 (
c
)=
	`utf8_ÃxtCh¬SaãBody
((cÚ¡ 
ušt8_t
 *)
s
, &(
i
), (
št32_t
)(
Ëngth
), c, -1); \

307 (
c
)=
U_SENTINEL
; \

310 }

	)

325 
	#U8_APPEND_UNSAFE
(
s
, 
i
, 
c
) { \

326 if((
ušt32_t
)(
c
)<=0x7f) { \

327 (
s
)[(
i
)++]=(
ušt8_t
)(
c
); \

329 if((
ušt32_t
)(
c
)<=0x7ff) { \

330 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)>>6)|0xc0); \

332 if((
ušt32_t
)(
c
)<=0xffff) { \

333 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)>>12)|0xe0); \

335 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)>>18)|0xf0); \

336 (
s
)[(
i
)++]=(
ušt8_t
)((((
c
)>>12)&0x3f)|0x80); \

338 (
s
)[(
i
)++]=(
ušt8_t
)((((
c
)>>6)&0x3f)|0x80); \

340 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)&0x3f)|0x80); \

342 }

	)

361 
	#U8_APPEND
(
s
, 
i
, 
ÿ·c™y
, 
c
, 
isE¼Ü
) { \

362 if((
ušt32_t
)(
c
)<=0x7f) { \

363 (
s
)[(
i
)++]=(
ušt8_t
)(
c
); \

364 } if((
ušt32_t
)(
c
)<=0x7fà&& (
i
)+1<(
ÿ·c™y
)) { \

365 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)>>6)|0xc0); \

366 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)&0x3f)|0x80); \

367 } if((
ušt32_t
)(
c
)<=0xd7fà&& (
i
)+2<(
ÿ·c™y
)) { \

368 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)>>12)|0xe0); \

369 (
s
)[(
i
)++]=(
ušt8_t
)((((
c
)>>6)&0x3f)|0x80); \

370 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)&0x3f)|0x80); \

372 (
i
)=
	`utf8_­³ndCh¬SaãBody
(
s
, (
št32_t
)(i), (št32_t)(
ÿ·c™y
), 
c
, &(
isE¼Ü
)); \

374 }

	)

386 
	#U8_FWD_1_UNSAFE
(
s
, 
i
) { \

387 (
i
)+=1+
	`U8_COUNT_TRAIL_BYTES
((
s
)[i]); \

388 }

	)

401 
	#U8_FWD_1
(
s
, 
i
, 
Ëngth
) { \

402 
ušt8_t
 
__b
=(ušt8_t)(
s
)[(
i
)++]; \

403 if(
	`U8_IS_LEAD
(
__b
)) { \

404 
ušt8_t
 
__couÁ
=
	`U8_COUNT_TRAIL_BYTES
(
__b
); \

405 if((
i
)+
__couÁ
>(
Ëngth
)) { \

406 
__couÁ
=(
ušt8_t
)((
Ëngth
)-(
i
)); \

408 
__couÁ
>0 && 
	`U8_IS_TRAIL
((
s
)[
i
])) { \

409 ++(
i
); \

410 --
__couÁ
; \

413 }

	)

427 
	#U8_FWD_N_UNSAFE
(
s
, 
i
, 
n
) { \

428 
št32_t
 
__N
=(
n
); \

429 
__N
>0) { \

430 
	`U8_FWD_1_UNSAFE
(
s
, 
i
); \

431 --
__N
; \

433 }

	)

448 
	#U8_FWD_N
(
s
, 
i
, 
Ëngth
, 
n
) { \

449 
št32_t
 
__N
=(
n
); \

450 
__N
>0 && (
i
)<(
Ëngth
)) { \

451 
	`U8_FWD_1
(
s
, 
i
, 
Ëngth
); \

452 --
__N
; \

454 }

	)

469 
	#U8_SET_CP_START_UNSAFE
(
s
, 
i
) { \

470 
	`U8_IS_TRAIL
((
s
)[
i
])) { --(i); } \

471 }

	)

487 
	#U8_SET_CP_START
(
s
, 
¡¬t
, 
i
) { \

488 if(
	`U8_IS_TRAIL
((
s
)[(
i
)])) { \

489 (
i
)=
	`utf8_back1SaãBody
(
s
, 
¡¬t
, (
št32_t
)(i)); \

491 }

	)

514 
	#U8_PREV_UNSAFE
(
s
, 
i
, 
c
) { \

515 (
c
)=(
ušt8_t
)(
s
)[--(
i
)]; \

516 if(
	`U8_IS_TRAIL
(
c
)) { \

517 
ušt8_t
 
__b
, 
__couÁ
=1, 
__shiá
=6; \

520 (
c
)&=0x3f; \

522 
__b
=(
ušt8_t
)(
s
)[--(
i
)]; \

523 if(
__b
>=0xc0) { \

524 
	`U8_MASK_LEAD_BYTE
(
__b
, 
__couÁ
); \

525 (
c
)|=(
UCh¬32
)
__b
<<
__shiá
; \

528 (
c
)|=(
UCh¬32
)(
__b
&0x3f)<<
__shiá
; \

529 ++
__couÁ
; \

530 
__shiá
+=6; \

534 }

	)

556 
	#U8_PREV
(
s
, 
¡¬t
, 
i
, 
c
) { \

557 (
c
)=(
ušt8_t
)(
s
)[--(
i
)]; \

558 if((
c
)>=0x80) { \

559 if((
c
)<=0xbf) { \

560 (
c
)=
	`utf8_´evCh¬SaãBody
((cÚ¡ 
ušt8_t
 *)
s
, 
¡¬t
, &(
i
), c, -1); \

562 (
c
)=
U_SENTINEL
; \

565 }

	)

578 
	#U8_BACK_1_UNSAFE
(
s
, 
i
) { \

579 
	`U8_IS_TRAIL
((
s
)[--(
i
)])) {} \

580 }

	)

594 
	#U8_BACK_1
(
s
, 
¡¬t
, 
i
) { \

595 if(
	`U8_IS_TRAIL
((
s
)[--(
i
)])) { \

596 (
i
)=
	`utf8_back1SaãBody
(
s
, 
¡¬t
, (
št32_t
)(i)); \

598 }

	)

613 
	#U8_BACK_N_UNSAFE
(
s
, 
i
, 
n
) { \

614 
št32_t
 
__N
=(
n
); \

615 
__N
>0) { \

616 
	`U8_BACK_1_UNSAFE
(
s
, 
i
); \

617 --
__N
; \

619 }

	)

635 
	#U8_BACK_N
(
s
, 
¡¬t
, 
i
, 
n
) { \

636 
št32_t
 
__N
=(
n
); \

637 
__N
>0 && (
i
)>(
¡¬t
)) { \

638 
	`U8_BACK_1
(
s
, 
¡¬t
, 
i
); \

639 --
__N
; \

641 }

	)

656 
	#U8_SET_CP_LIMIT_UNSAFE
(
s
, 
i
) { \

657 
	`U8_BACK_1_UNSAFE
(
s
, 
i
); \

658 
	`U8_FWD_1_UNSAFE
(
s
, 
i
); \

659 }

	)

676 
	#U8_SET_CP_LIMIT
(
s
, 
¡¬t
, 
i
, 
Ëngth
) { \

677 if((
¡¬t
)<(
i
è&& (i)<(
Ëngth
)) { \

678 
	`U8_BACK_1
(
s
, 
¡¬t
, 
i
); \

679 
	`U8_FWD_1
(
s
, 
i
, 
Ëngth
); \

681 }

	)

	@unicode/utf_old.h

146 #iâdeà
__UTF_OLD_H__


147 
	#__UTF_OLD_H__


	)

149 #iâdeà
U_HIDE_DEPRECATED_API


152 #iâdeà
__UTF_H__


153 
	~"unicode/utf.h
"

158 #ifdeà
U_USE_UTF_DEPRECATES


166 
št32_t
 
	tUTextOff£t
;

170 
	#UTF_SIZE
 16

	)

178 
	#UTF_SAFE


	)

180 #undeà
UTF_UNSAFE


182 #undeà
UTF_STRICT


198 
	#UTF8_ERROR_VALUE_1
 0x15

	)

205 
	#UTF8_ERROR_VALUE_2
 0x9f

	)

213 
	#UTF_ERROR_VALUE
 0xffff

	)

221 
	#UTF_IS_ERROR
(
c
) \

222 (((
c
)&0xffã)==0xffã || (c)==
UTF8_ERROR_VALUE_1
 || (c)==
UTF8_ERROR_VALUE_2
)

	)

229 
	#UTF_IS_VALID
(
c
) \

230 (
	`UTF_IS_UNICODE_CHAR
(
c
) && \

231 (
c
)!=
UTF8_ERROR_VALUE_1
 && (c)!=
UTF8_ERROR_VALUE_2
)

	)

237 
	#UTF_IS_SURROGATE
(
uch¬
è(((uch¬)&0xfffff800)==0xd800)

	)

244 
	#UTF_IS_UNICODE_NONCHAR
(
c
) \

245 ((
c
)>=0xfdd0 && \

246 ((
ušt32_t
)(
c
)<=0xfdef || ((c)&0xfffe)==0xfffe) && \

247 (
ušt32_t
)(
c
)<=0x10ffff)

	)

264 
	#UTF_IS_UNICODE_CHAR
(
c
) \

265 ((
ušt32_t
)(
c
)<0xd800 || \

266 ((
ušt32_t
)(
c
)>0xdfff && \

267 (
ušt32_t
)(
c
)<=0x10ffff && \

268 !
	`UTF_IS_UNICODE_NONCHAR
(
c
)))

	)

276 
	#UTF8_COUNT_TRAIL_BYTES
(
ËadBy‹
è(
utf8_couÁT¿By‹s
[(
ušt8_t
î—dBy‹])

	)

282 
	#UTF8_MASK_LEAD_BYTE
(
ËadBy‹
, 
couÁT¿By‹s
è(Ö—dBy‹)&=(1<<(6-(couÁT¿By‹s)))-1)

	)

285 
	#UTF8_IS_SINGLE
(
uch¬
è(((uch¬)&0x80)==0)

	)

287 
	#UTF8_IS_LEAD
(
uch¬
è((
ušt8_t
)((uch¬)-0xc0)<0x3e)

	)

289 
	#UTF8_IS_TRAIL
(
uch¬
è(((uch¬)&0xc0)==0x80)

	)

292 
	#UTF8_NEED_MULTIPLE_UCHAR
(
c
è((
ušt32_t
)(c)>0x7f)

	)

308 
	#UTF8_CHAR_LENGTH
(
c
) \

309 ((
ušt32_t
)(
c
)<=0x7f ? 1 : \

310 ((
ušt32_t
)(
c
)<=0x7ff ? 2 : \

311 ((
ušt32_t
)((
c
)-0x10000)>0xfffff ? 3 : 4) \

313 )

	)

315 
	#UTF8_CHAR_LENGTH
(
c
) \

316 ((
ušt32_t
)(
c
)<=0x7f ? 1 : \

317 ((
ušt32_t
)(
c
)<=0x7ff ? 2 : \

318 ((
ušt32_t
)(
c
)<=0xffff ? 3 : \

319 ((
ušt32_t
)(
c
)<=0x10ffff ? 4 : \

320 ((
ušt32_t
)(
c
)<=0x3ffffff ? 5 : \

321 ((
ušt32_t
)(
c
)<=0x7fffffff ? 6 : 3) \

326 )

	)

330 
	#UTF8_MAX_CHAR_LENGTH
 4

	)

333 
	#UTF8_ARRAY_SIZE
(
size
è((5*(size))/2)

	)

336 
	#UTF8_GET_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

337 
št32_t
 
_utf8_g‘_ch¬_un§ã_šdex
=(št32_t)(
i
); \

338 
	`UTF8_SET_CHAR_START_UNSAFE
(
s
, 
_utf8_g‘_ch¬_un§ã_šdex
); \

339 
	`UTF8_NEXT_CHAR_UNSAFE
(
s
, 
_utf8_g‘_ch¬_un§ã_šdex
, 
c
); \

340 }

	)

343 
	#UTF8_GET_CHAR_SAFE
(
s
, 
¡¬t
, 
i
, 
Ëngth
, 
c
, 
¡riù
) { \

344 
št32_t
 
_utf8_g‘_ch¬_§ã_šdex
=(št32_t)(
i
); \

345 
	`UTF8_SET_CHAR_START_SAFE
(
s
, 
¡¬t
, 
_utf8_g‘_ch¬_§ã_šdex
); \

346 
	`UTF8_NEXT_CHAR_SAFE
(
s
, 
_utf8_g‘_ch¬_§ã_šdex
, 
Ëngth
, 
c
, 
¡riù
); \

347 }

	)

350 
	#UTF8_NEXT_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

351 (
c
)=(
s
)[(
i
)++]; \

352 if((
ušt8_t
)((
c
)-0xc0)<0x35) { \

353 
ušt8_t
 
__couÁ
=
	`UTF8_COUNT_TRAIL_BYTES
(
c
); \

354 
	`UTF8_MASK_LEAD_BYTE
(
c
, 
__couÁ
); \

355 
__couÁ
) { \

358 (
c
)=((c)<<6)|((
s
)[(
i
)++]&0x3f); \

360 (
c
)=((c)<<6)|((
s
)[(
i
)++]&0x3f); \

362 (
c
)=((c)<<6)|((
s
)[(
i
)++]&0x3f); \

367 }

	)

370 
	#UTF8_APPEND_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

371 if((
ušt32_t
)(
c
)<=0x7f) { \

372 (
s
)[(
i
)++]=(
ušt8_t
)(
c
); \

374 if((
ušt32_t
)(
c
)<=0x7ff) { \

375 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)>>6)|0xc0); \

377 if((
ušt32_t
)(
c
)<=0xffff) { \

378 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)>>12)|0xe0); \

380 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)>>18)|0xf0); \

381 (
s
)[(
i
)++]=(
ušt8_t
)((((
c
)>>12)&0x3f)|0x80); \

383 (
s
)[(
i
)++]=(
ušt8_t
)((((
c
)>>6)&0x3f)|0x80); \

385 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)&0x3f)|0x80); \

387 }

	)

390 
	#UTF8_FWD_1_UNSAFE
(
s
, 
i
) { \

391 (
i
)+=1+
	`UTF8_COUNT_TRAIL_BYTES
((
s
)[i]); \

392 }

	)

395 
	#UTF8_FWD_N_UNSAFE
(
s
, 
i
, 
n
) { \

396 
št32_t
 
__N
=(
n
); \

397 
__N
>0) { \

398 
	`UTF8_FWD_1_UNSAFE
(
s
, 
i
); \

399 --
__N
; \

401 }

	)

404 
	#UTF8_SET_CHAR_START_UNSAFE
(
s
, 
i
) { \

405 
	`UTF8_IS_TRAIL
((
s
)[
i
])) { --(i); } \

406 }

	)

409 
	#UTF8_NEXT_CHAR_SAFE
(
s
, 
i
, 
Ëngth
, 
c
, 
¡riù
) { \

410 (
c
)=(
s
)[(
i
)++]; \

411 if((
c
)>=0x80) { \

412 if(
	`UTF8_IS_LEAD
(
c
)) { \

413 (
c
)=
	`utf8_ÃxtCh¬SaãBody
(
s
, &(
i
), (
št32_t
)(
Ëngth
), c, 
¡riù
); \

415 (
c
)=
UTF8_ERROR_VALUE_1
; \

418 }

	)

421 
	#UTF8_APPEND_CHAR_SAFE
(
s
, 
i
, 
Ëngth
, 
c
) { \

422 if((
ušt32_t
)(
c
)<=0x7f) { \

423 (
s
)[(
i
)++]=(
ušt8_t
)(
c
); \

425 (
i
)=
	`utf8_­³ndCh¬SaãBody
(
s
, (
št32_t
)(i), (št32_t)(
Ëngth
), 
c
, 
NULL
); \

427 }

	)

430 
	#UTF8_FWD_1_SAFE
(
s
, 
i
, 
Ëngth
è
	`U8_FWD_1
(s, i,†’gth)

	)

433 
	#UTF8_FWD_N_SAFE
(
s
, 
i
, 
Ëngth
, 
n
è
	`U8_FWD_N
(s, i,†’gth,‚)

	)

436 
	#UTF8_SET_CHAR_START_SAFE
(
s
, 
¡¬t
, 
i
è
	`U8_SET_CP_START
(s, s¹, i)

	)

439 
	#UTF8_PREV_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

440 (
c
)=(
s
)[--(
i
)]; \

441 if(
	`UTF8_IS_TRAIL
(
c
)) { \

442 
ušt8_t
 
__b
, 
__couÁ
=1, 
__shiá
=6; \

445 (
c
)&=0x3f; \

447 
__b
=(
s
)[--(
i
)]; \

448 if(
__b
>=0xc0) { \

449 
	`UTF8_MASK_LEAD_BYTE
(
__b
, 
__couÁ
); \

450 (
c
)|=(
UCh¬32
)
__b
<<
__shiá
; \

453 (
c
)|=(
UCh¬32
)(
__b
&0x3f)<<
__shiá
; \

454 ++
__couÁ
; \

455 
__shiá
+=6; \

459 }

	)

462 
	#UTF8_BACK_1_UNSAFE
(
s
, 
i
) { \

463 
	`UTF8_IS_TRAIL
((
s
)[--(
i
)])) {} \

464 }

	)

467 
	#UTF8_BACK_N_UNSAFE
(
s
, 
i
, 
n
) { \

468 
št32_t
 
__N
=(
n
); \

469 
__N
>0) { \

470 
	`UTF8_BACK_1_UNSAFE
(
s
, 
i
); \

471 --
__N
; \

473 }

	)

476 
	#UTF8_SET_CHAR_LIMIT_UNSAFE
(
s
, 
i
) { \

477 
	`UTF8_BACK_1_UNSAFE
(
s
, 
i
); \

478 
	`UTF8_FWD_1_UNSAFE
(
s
, 
i
); \

479 }

	)

482 
	#UTF8_PREV_CHAR_SAFE
(
s
, 
¡¬t
, 
i
, 
c
, 
¡riù
) { \

483 (
c
)=(
s
)[--(
i
)]; \

484 if((
c
)>=0x80) { \

485 if((
c
)<=0xbf) { \

486 (
c
)=
	`utf8_´evCh¬SaãBody
(
s
, 
¡¬t
, &(
i
), c, 
¡riù
); \

488 (
c
)=
UTF8_ERROR_VALUE_1
; \

491 }

	)

494 
	#UTF8_BACK_1_SAFE
(
s
, 
¡¬t
, 
i
è
	`U8_BACK_1
(s, s¹, i)

	)

497 
	#UTF8_BACK_N_SAFE
(
s
, 
¡¬t
, 
i
, 
n
è
	`U8_BACK_N
(s, s¹, i,‚)

	)

500 
	#UTF8_SET_CHAR_LIMIT_SAFE
(
s
, 
¡¬t
, 
i
, 
Ëngth
è
	`U8_SET_CP_LIMIT
(s, s¹, i,†’gth)

	)

505 
	#UTF_IS_FIRST_SURROGATE
(
uch¬
è(((uch¬)&0xfffffc00)==0xd800)

	)

508 
	#UTF_IS_SECOND_SURROGATE
(
uch¬
è(((uch¬)&0xfffffc00)==0xdc00)

	)

511 
	#UTF_IS_SURROGATE_FIRST
(
c
è(((c)&0x400)==0)

	)

514 
	#UTF_SURROGATE_OFFSET
 ((0xd800<<10UL)+0xdc00-0x10000)

	)

517 
	#UTF16_GET_PAIR_VALUE
(
fœ¡
, 
£cÚd
) \

518 (((
fœ¡
)<<10UL)+(
£cÚd
)-
UTF_SURROGATE_OFFSET
)

	)

521 
	#UTF_FIRST_SURROGATE
(
suµËm’ry
è(
UCh¬
)(((suµËm’ry)>>10)+0xd7c0)

	)

524 
	#UTF_SECOND_SURROGATE
(
suµËm’ry
è(
UCh¬
)(((suµËm’ry)&0x3ff)|0xdc00)

	)

527 
	#UTF16_LEAD
(
suµËm’ry
è
	`UTF_FIRST_SURROGATE
(suµËm’ry)

	)

530 
	#UTF16_TRAIL
(
suµËm’ry
è
	`UTF_SECOND_SURROGATE
(suµËm’ry)

	)

533 
	#UTF16_IS_SINGLE
(
uch¬
è!
	`UTF_IS_SURROGATE
(uch¬)

	)

536 
	#UTF16_IS_LEAD
(
uch¬
è
	`UTF_IS_FIRST_SURROGATE
(uch¬)

	)

539 
	#UTF16_IS_TRAIL
(
uch¬
è
	`UTF_IS_SECOND_SURROGATE
(uch¬)

	)

542 
	#UTF16_NEED_MULTIPLE_UCHAR
(
c
è((
ušt32_t
)(c)>0xffff)

	)

545 
	#UTF16_CHAR_LENGTH
(
c
è((
ušt32_t
)(c)<=0xfffà? 1 : 2)

	)

548 
	#UTF16_MAX_CHAR_LENGTH
 2

	)

551 
	#UTF16_ARRAY_SIZE
(
size
è(size)

	)

564 
	#UTF16_GET_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

565 (
c
)=(
s
)[
i
]; \

566 if(
	`UTF_IS_SURROGATE
(
c
)) { \

567 if(
	`UTF_IS_SURROGATE_FIRST
(
c
)) { \

568 (
c
)=
	`UTF16_GET_PAIR_VALUE
((c), (
s
)[(
i
)+1]); \

570 (
c
)=
	`UTF16_GET_PAIR_VALUE
((
s
)[(
i
)-1], (c)); \

573 }

	)

576 
	#UTF16_GET_CHAR_SAFE
(
s
, 
¡¬t
, 
i
, 
Ëngth
, 
c
, 
¡riù
) { \

577 (
c
)=(
s
)[
i
]; \

578 if(
	`UTF_IS_SURROGATE
(
c
)) { \

579 
ušt16_t
 
__c2
; \

580 if(
	`UTF_IS_SURROGATE_FIRST
(
c
)) { \

581 if((
i
)+1<(
Ëngth
è&& 
	`UTF_IS_SECOND_SURROGATE
(
__c2
=(
s
)[(i)+1])) { \

582 (
c
)=
	`UTF16_GET_PAIR_VALUE
((c), 
__c2
); \

584 } if(
¡riù
) {\

586 (
c
)=
UTF_ERROR_VALUE
; \

589 if((
i
)-1>=(
¡¬t
è&& 
	`UTF_IS_FIRST_SURROGATE
(
__c2
=(
s
)[(i)-1])) { \

590 (
c
)=
	`UTF16_GET_PAIR_VALUE
(
__c2
, (c)); \

592 } if(
¡riù
) {\

594 (
c
)=
UTF_ERROR_VALUE
; \

597 } if((
¡riù
è&& !
	`UTF_IS_UNICODE_CHAR
(
c
)) { \

598 (
c
)=
UTF_ERROR_VALUE
; \

600 }

	)

603 
	#UTF16_NEXT_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

604 (
c
)=(
s
)[(
i
)++]; \

605 if(
	`UTF_IS_FIRST_SURROGATE
(
c
)) { \

606 (
c
)=
	`UTF16_GET_PAIR_VALUE
((c), (
s
)[(
i
)++]); \

608 }

	)

611 
	#UTF16_APPEND_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

612 if((
ušt32_t
)(
c
)<=0xffff) { \

613 (
s
)[(
i
)++]=(
ušt16_t
)(
c
); \

615 (
s
)[(
i
)++]=(
ušt16_t
)(((
c
)>>10)+0xd7c0); \

616 (
s
)[(
i
)++]=(
ušt16_t
)(((
c
)&0x3ff)|0xdc00); \

618 }

	)

621 
	#UTF16_FWD_1_UNSAFE
(
s
, 
i
) { \

622 if(
	`UTF_IS_FIRST_SURROGATE
((
s
)[(
i
)++])) { \

623 ++(
i
); \

625 }

	)

628 
	#UTF16_FWD_N_UNSAFE
(
s
, 
i
, 
n
) { \

629 
št32_t
 
__N
=(
n
); \

630 
__N
>0) { \

631 
	`UTF16_FWD_1_UNSAFE
(
s
, 
i
); \

632 --
__N
; \

634 }

	)

637 
	#UTF16_SET_CHAR_START_UNSAFE
(
s
, 
i
) { \

638 if(
	`UTF_IS_SECOND_SURROGATE
((
s
)[
i
])) { \

639 --(
i
); \

641 }

	)

644 
	#UTF16_NEXT_CHAR_SAFE
(
s
, 
i
, 
Ëngth
, 
c
, 
¡riù
) { \

645 (
c
)=(
s
)[(
i
)++]; \

646 if(
	`UTF_IS_FIRST_SURROGATE
(
c
)) { \

647 
ušt16_t
 
__c2
; \

648 if((
i
)<(
Ëngth
è&& 
	`UTF_IS_SECOND_SURROGATE
(
__c2
=(
s
)[(i)])) { \

649 ++(
i
); \

650 (
c
)=
	`UTF16_GET_PAIR_VALUE
((c), 
__c2
); \

652 } if(
¡riù
) {\

654 (
c
)=
UTF_ERROR_VALUE
; \

656 } if((
¡riù
è&& !
	`UTF_IS_UNICODE_CHAR
(
c
)) { \

658 (
c
)=
UTF_ERROR_VALUE
; \

660 }

	)

663 
	#UTF16_APPEND_CHAR_SAFE
(
s
, 
i
, 
Ëngth
, 
c
) { \

664 if((
ušt32_t
)(
c
)<=0xffff) { \

665 (
s
)[(
i
)++]=(
ušt16_t
)(
c
); \

666 } if((
ušt32_t
)(
c
)<=0x10ffff) { \

667 if((
i
)+1<(
Ëngth
)) { \

668 (
s
)[(
i
)++]=(
ušt16_t
)(((
c
)>>10)+0xd7c0); \

669 (
s
)[(
i
)++]=(
ušt16_t
)(((
c
)&0x3ff)|0xdc00); \

671 (
s
)[(
i
)++]=
UTF_ERROR_VALUE
; \

674 (
s
)[(
i
)++]=
UTF_ERROR_VALUE
; \

676 }

	)

679 
	#UTF16_FWD_1_SAFE
(
s
, 
i
, 
Ëngth
è
	`U16_FWD_1
(s, i,†’gth)

	)

682 
	#UTF16_FWD_N_SAFE
(
s
, 
i
, 
Ëngth
, 
n
è
	`U16_FWD_N
(s, i,†’gth,‚)

	)

685 
	#UTF16_SET_CHAR_START_SAFE
(
s
, 
¡¬t
, 
i
è
	`U16_SET_CP_START
(s, s¹, i)

	)

688 
	#UTF16_PREV_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

689 (
c
)=(
s
)[--(
i
)]; \

690 if(
	`UTF_IS_SECOND_SURROGATE
(
c
)) { \

691 (
c
)=
	`UTF16_GET_PAIR_VALUE
((
s
)[--(
i
)], (c)); \

693 }

	)

696 
	#UTF16_BACK_1_UNSAFE
(
s
, 
i
) { \

697 if(
	`UTF_IS_SECOND_SURROGATE
((
s
)[--(
i
)])) { \

698 --(
i
); \

700 }

	)

703 
	#UTF16_BACK_N_UNSAFE
(
s
, 
i
, 
n
) { \

704 
št32_t
 
__N
=(
n
); \

705 
__N
>0) { \

706 
	`UTF16_BACK_1_UNSAFE
(
s
, 
i
); \

707 --
__N
; \

709 }

	)

712 
	#UTF16_SET_CHAR_LIMIT_UNSAFE
(
s
, 
i
) { \

713 if(
	`UTF_IS_FIRST_SURROGATE
((
s
)[(
i
)-1])) { \

714 ++(
i
); \

716 }

	)

719 
	#UTF16_PREV_CHAR_SAFE
(
s
, 
¡¬t
, 
i
, 
c
, 
¡riù
) { \

720 (
c
)=(
s
)[--(
i
)]; \

721 if(
	`UTF_IS_SECOND_SURROGATE
(
c
)) { \

722 
ušt16_t
 
__c2
; \

723 if((
i
)>(
¡¬t
è&& 
	`UTF_IS_FIRST_SURROGATE
(
__c2
=(
s
)[(i)-1])) { \

724 --(
i
); \

725 (
c
)=
	`UTF16_GET_PAIR_VALUE
(
__c2
, (c)); \

727 } if(
¡riù
) {\

729 (
c
)=
UTF_ERROR_VALUE
; \

731 } if((
¡riù
è&& !
	`UTF_IS_UNICODE_CHAR
(
c
)) { \

733 (
c
)=
UTF_ERROR_VALUE
; \

735 }

	)

738 
	#UTF16_BACK_1_SAFE
(
s
, 
¡¬t
, 
i
è
	`U16_BACK_1
(s, s¹, i)

	)

741 
	#UTF16_BACK_N_SAFE
(
s
, 
¡¬t
, 
i
, 
n
è
	`U16_BACK_N
(s, s¹, i,‚)

	)

744 
	#UTF16_SET_CHAR_LIMIT_SAFE
(
s
, 
¡¬t
, 
i
, 
Ëngth
è
	`U16_SET_CP_LIMIT
(s, s¹, i,†’gth)

	)

764 
	#UTF32_IS_SAFE
(
c
, 
¡riù
) \

765 (!(
¡riù
) ? \

766 (
ušt32_t
)(
c
)<=0x10ffff : \

767 
	`UTF_IS_UNICODE_CHAR
(
c
))

	)

780 
	#UTF32_IS_SINGLE
(
uch¬
è1

	)

782 
	#UTF32_IS_LEAD
(
uch¬
è0

	)

784 
	#UTF32_IS_TRAIL
(
uch¬
è0

	)

789 
	#UTF32_NEED_MULTIPLE_UCHAR
(
c
è0

	)

791 
	#UTF32_CHAR_LENGTH
(
c
è1

	)

793 
	#UTF32_MAX_CHAR_LENGTH
 1

	)

798 
	#UTF32_ARRAY_SIZE
(
size
è(size)

	)

801 
	#UTF32_GET_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

802 (
c
)=(
s
)[
i
]; \

803 }

	)

806 
	#UTF32_GET_CHAR_SAFE
(
s
, 
¡¬t
, 
i
, 
Ëngth
, 
c
, 
¡riù
) { \

807 (
c
)=(
s
)[
i
]; \

808 if(!
	`UTF32_IS_SAFE
(
c
, 
¡riù
)) { \

809 (
c
)=
UTF_ERROR_VALUE
; \

811 }

	)

816 
	#UTF32_NEXT_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

817 (
c
)=(
s
)[(
i
)++]; \

818 }

	)

821 
	#UTF32_APPEND_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

822 (
s
)[(
i
)++]=(
c
); \

823 }

	)

826 
	#UTF32_FWD_1_UNSAFE
(
s
, 
i
) { \

827 ++(
i
); \

828 }

	)

831 
	#UTF32_FWD_N_UNSAFE
(
s
, 
i
, 
n
) { \

832 (
i
)+=(
n
); \

833 }

	)

836 
	#UTF32_SET_CHAR_START_UNSAFE
(
s
, 
i
) { \

837 }

	)

840 
	#UTF32_NEXT_CHAR_SAFE
(
s
, 
i
, 
Ëngth
, 
c
, 
¡riù
) { \

841 (
c
)=(
s
)[(
i
)++]; \

842 if(!
	`UTF32_IS_SAFE
(
c
, 
¡riù
)) { \

843 (
c
)=
UTF_ERROR_VALUE
; \

845 }

	)

848 
	#UTF32_APPEND_CHAR_SAFE
(
s
, 
i
, 
Ëngth
, 
c
) { \

849 if((
ušt32_t
)(
c
)<=0x10ffff) { \

850 (
s
)[(
i
)++]=(
c
); \

852 (
s
)[(
i
)++]=0xfffd; \

854 }

	)

857 
	#UTF32_FWD_1_SAFE
(
s
, 
i
, 
Ëngth
) { \

858 ++(
i
); \

859 }

	)

862 
	#UTF32_FWD_N_SAFE
(
s
, 
i
, 
Ëngth
, 
n
) { \

863 if(((
i
)+=(
n
))>(
Ëngth
)) { \

864 (
i
)=(
Ëngth
); \

866 }

	)

869 
	#UTF32_SET_CHAR_START_SAFE
(
s
, 
¡¬t
, 
i
) { \

870 }

	)

875 
	#UTF32_PREV_CHAR_UNSAFE
(
s
, 
i
, 
c
) { \

876 (
c
)=(
s
)[--(
i
)]; \

877 }

	)

880 
	#UTF32_BACK_1_UNSAFE
(
s
, 
i
) { \

881 --(
i
); \

882 }

	)

885 
	#UTF32_BACK_N_UNSAFE
(
s
, 
i
, 
n
) { \

886 (
i
)-=(
n
); \

887 }

	)

890 
	#UTF32_SET_CHAR_LIMIT_UNSAFE
(
s
, 
i
) { \

891 }

	)

894 
	#UTF32_PREV_CHAR_SAFE
(
s
, 
¡¬t
, 
i
, 
c
, 
¡riù
) { \

895 (
c
)=(
s
)[--(
i
)]; \

896 if(!
	`UTF32_IS_SAFE
(
c
, 
¡riù
)) { \

897 (
c
)=
UTF_ERROR_VALUE
; \

899 }

	)

902 
	#UTF32_BACK_1_SAFE
(
s
, 
¡¬t
, 
i
) { \

903 --(
i
); \

904 }

	)

907 
	#UTF32_BACK_N_SAFE
(
s
, 
¡¬t
, 
i
, 
n
) { \

908 (
i
)-=(
n
); \

909 if((
i
)<(
¡¬t
)) { \

910 (
i
)=(
¡¬t
); \

912 }

	)

915 
	#UTF32_SET_CHAR_LIMIT_SAFE
(
s
, 
i
, 
Ëngth
) { \

916 }

	)

925 
	#UTF_ARRAY_SIZE
(
size
è
	`UTF16_ARRAY_SIZE
(size)

	)

928 
	#UTF_GET_CHAR_UNSAFE
(
s
, 
i
, 
c
è
	`UTF16_GET_CHAR_UNSAFE
(s, i, c)

	)

931 
	#UTF_GET_CHAR_SAFE
(
s
, 
¡¬t
, 
i
, 
Ëngth
, 
c
, 
¡riù
è
	`UTF16_GET_CHAR_SAFE
(s, s¹, i,†’gth, c, sŒiù)

	)

935 
	#UTF_NEXT_CHAR_UNSAFE
(
s
, 
i
, 
c
è
	`UTF16_NEXT_CHAR_UNSAFE
(s, i, c)

	)

938 
	#UTF_NEXT_CHAR_SAFE
(
s
, 
i
, 
Ëngth
, 
c
, 
¡riù
è
	`UTF16_NEXT_CHAR_SAFE
(s, i,†’gth, c, sŒiù)

	)

942 
	#UTF_APPEND_CHAR_UNSAFE
(
s
, 
i
, 
c
è
	`UTF16_APPEND_CHAR_UNSAFE
(s, i, c)

	)

945 
	#UTF_APPEND_CHAR_SAFE
(
s
, 
i
, 
Ëngth
, 
c
è
	`UTF16_APPEND_CHAR_SAFE
(s, i,†’gth, c)

	)

949 
	#UTF_FWD_1_UNSAFE
(
s
, 
i
è
	`UTF16_FWD_1_UNSAFE
(s, i)

	)

952 
	#UTF_FWD_1_SAFE
(
s
, 
i
, 
Ëngth
è
	`UTF16_FWD_1_SAFE
(s, i,†’gth)

	)

956 
	#UTF_FWD_N_UNSAFE
(
s
, 
i
, 
n
è
	`UTF16_FWD_N_UNSAFE
(s, i,‚)

	)

959 
	#UTF_FWD_N_SAFE
(
s
, 
i
, 
Ëngth
, 
n
è
	`UTF16_FWD_N_SAFE
(s, i,†’gth,‚)

	)

963 
	#UTF_SET_CHAR_START_UNSAFE
(
s
, 
i
è
	`UTF16_SET_CHAR_START_UNSAFE
(s, i)

	)

966 
	#UTF_SET_CHAR_START_SAFE
(
s
, 
¡¬t
, 
i
è
	`UTF16_SET_CHAR_START_SAFE
(s, s¹, i)

	)

970 
	#UTF_PREV_CHAR_UNSAFE
(
s
, 
i
, 
c
è
	`UTF16_PREV_CHAR_UNSAFE
(s, i, c)

	)

973 
	#UTF_PREV_CHAR_SAFE
(
s
, 
¡¬t
, 
i
, 
c
, 
¡riù
è
	`UTF16_PREV_CHAR_SAFE
(s, s¹, i, c, sŒiù)

	)

977 
	#UTF_BACK_1_UNSAFE
(
s
, 
i
è
	`UTF16_BACK_1_UNSAFE
(s, i)

	)

980 
	#UTF_BACK_1_SAFE
(
s
, 
¡¬t
, 
i
è
	`UTF16_BACK_1_SAFE
(s, s¹, i)

	)

984 
	#UTF_BACK_N_UNSAFE
(
s
, 
i
, 
n
è
	`UTF16_BACK_N_UNSAFE
(s, i,‚)

	)

987 
	#UTF_BACK_N_SAFE
(
s
, 
¡¬t
, 
i
, 
n
è
	`UTF16_BACK_N_SAFE
(s, s¹, i,‚)

	)

991 
	#UTF_SET_CHAR_LIMIT_UNSAFE
(
s
, 
i
è
	`UTF16_SET_CHAR_LIMIT_UNSAFE
(s, i)

	)

994 
	#UTF_SET_CHAR_LIMIT_SAFE
(
s
, 
¡¬t
, 
i
, 
Ëngth
è
	`UTF16_SET_CHAR_LIMIT_SAFE
(s, s¹, i,†’gth)

	)

1003 
	#UTF_IS_SINGLE
(
uch¬
è
	`U16_IS_SINGLE
(uch¬)

	)

1010 
	#UTF_IS_LEAD
(
uch¬
è
	`U16_IS_LEAD
(uch¬)

	)

1017 
	#UTF_IS_TRAIL
(
uch¬
è
	`U16_IS_TRAIL
(uch¬)

	)

1024 
	#UTF_NEED_MULTIPLE_UCHAR
(
c
è
	`UTF16_NEED_MULTIPLE_UCHAR
(c)

	)

1031 
	#UTF_CHAR_LENGTH
(
c
è
	`U16_LENGTH
(c)

	)

1038 
	#UTF_MAX_CHAR_LENGTH
 
U16_MAX_LENGTH


	)

1049 
	#UTF_GET_CHAR
(
s
, 
¡¬t
, 
i
, 
Ëngth
, 
c
è
	`U16_GET
(s, s¹, i,†’gth, c)

	)

1062 
	#UTF_NEXT_CHAR
(
s
, 
i
, 
Ëngth
, 
c
è
	`U16_NEXT
(s, i,†’gth, c)

	)

1075 
	#UTF_APPEND_CHAR
(
s
, 
i
, 
Ëngth
, 
c
è
	`UTF16_APPEND_CHAR_SAFE
(s, i,†’gth, c)

	)

1086 
	#UTF_FWD_1
(
s
, 
i
, 
Ëngth
è
	`U16_FWD_1
(s, i,†’gth)

	)

1097 
	#UTF_FWD_N
(
s
, 
i
, 
Ëngth
, 
n
è
	`U16_FWD_N
(s, i,†’gth,‚)

	)

1113 
	#UTF_SET_CHAR_START
(
s
, 
¡¬t
, 
i
è
	`U16_SET_CP_START
(s, s¹, i)

	)

1126 
	#UTF_PREV_CHAR
(
s
, 
¡¬t
, 
i
, 
c
è
	`U16_PREV
(s, s¹, i, c)

	)

1139 
	#UTF_BACK_1
(
s
, 
¡¬t
, 
i
è
	`U16_BACK_1
(s, s¹, i)

	)

1152 
	#UTF_BACK_N
(
s
, 
¡¬t
, 
i
, 
n
è
	`U16_BACK_N
(s, s¹, i,‚)

	)

1168 
	#UTF_SET_CHAR_LIMIT
(
s
, 
¡¬t
, 
i
, 
Ëngth
è
	`U16_SET_CP_LIMIT
(s, s¹, i,†’gth)

	)

	@unicode/utrace.h

20 #iâdeà
__UTRACE_H__


21 
	#__UTRACE_H__


	)

23 
	~<¡d¬g.h
>

24 
	~"unicode/uty³s.h
"

37 
U_CDECL_BEGIN


44 
	eUT¿ûLev–
 {

46 
	mUTRACE_OFF
=-1,

48 
	mUTRACE_ERROR
=0,

50 
	mUTRACE_WARNING
=3,

52 
	mUTRACE_OPEN_CLOSE
=5,

54 
	mUTRACE_INFO
=7,

56 
	mUTRACE_VERBOSE
=9

57 } 
	tUT¿ûLev–
;

63 
	eUT¿ûFunùiÚNumb”
 {

64 
	mUTRACE_FUNCTION_START
=0,

65 
	mUTRACE_U_INIT
=
UTRACE_FUNCTION_START
,

66 
	mUTRACE_U_CLEANUP
,

67 
	mUTRACE_FUNCTION_LIMIT
,

69 
	mUTRACE_CONVERSION_START
=0x1000,

70 
	mUTRACE_UCNV_OPEN
=
UTRACE_CONVERSION_START
,

71 
	mUTRACE_UCNV_OPEN_PACKAGE
,

72 
	mUTRACE_UCNV_OPEN_ALGORITHMIC
,

73 
	mUTRACE_UCNV_CLONE
,

74 
	mUTRACE_UCNV_CLOSE
,

75 
	mUTRACE_UCNV_FLUSH_CACHE
,

76 
	mUTRACE_UCNV_LOAD
,

77 
	mUTRACE_UCNV_UNLOAD
,

78 
	mUTRACE_CONVERSION_LIMIT
,

80 
	mUTRACE_COLLATION_START
=0x2000,

81 
	mUTRACE_UCOL_OPEN
=
UTRACE_COLLATION_START
,

82 
	mUTRACE_UCOL_CLOSE
,

83 
	mUTRACE_UCOL_STRCOLL
,

84 
	mUTRACE_UCOL_GET_SORTKEY
,

85 
	mUTRACE_UCOL_GETLOCALE
,

86 
	mUTRACE_UCOL_NEXTSORTKEYPART
,

87 
	mUTRACE_UCOL_STRCOLLITER
,

88 
	mUTRACE_UCOL_OPEN_FROM_SHORT_STRING
,

89 
	mUTRACE_COLLATION_LIMIT


90 } 
	tUT¿ûFunùiÚNumb”
;

97 
U_STABLE
 
U_EXPORT2


98 
uŒaû_£tLev–
(
št32_t
 
ŒaûLev–
);

105 
U_STABLE
 
št32_t
 
U_EXPORT2


106 
uŒaû_g‘Lev–
();

116 
	tU_CALLCONV


117 
	tUT¿ûEÁry
(cÚ¡ *
	tcÚ‹xt
, 
	tšt32_t
 
	tâNumb”
);

132 
	tU_CALLCONV


133 
	tUT¿ûEx™
(cÚ¡ *
	tcÚ‹xt
, 
	tšt32_t
 
	tâNumb”
,

134 cÚ¡ *
	tfmt
, 
	tva_li¡
 
	t¬gs
);

147 
	tU_CALLCONV


148 
	tUT¿ûD©a
(cÚ¡ *
	tcÚ‹xt
, 
	tšt32_t
 
	tâNumb”
, iÁ32_ˆ
	tËv–
,

149 cÚ¡ *
	tfmt
, 
	tva_li¡
 
	t¬gs
);

179 
U_STABLE
 
U_EXPORT2


180 
uŒaû_£tFunùiÚs
(cÚ¡ *
cÚ‹xt
,

181 
UT¿ûEÁry
 *
e
, 
UT¿ûEx™
 *
x
, 
UT¿ûD©a
 *
d
);

193 
U_STABLE
 
U_EXPORT2


194 
uŒaû_g‘FunùiÚs
(cÚ¡ **
cÚ‹xt
,

195 
UT¿ûEÁry
 **
e
, 
UT¿ûEx™
 **
x
, 
UT¿ûD©a
 **
d
);

315 
U_STABLE
 
št32_t
 
U_EXPORT2


316 
uŒaû_vfÜm©
(*
outBuf
, 
št32_t
 
ÿ·c™y
,

317 
št32_t
 
šd’t
, cÚ¡ *
fmt
, 
va_li¡
 
¬gs
);

336 
U_STABLE
 
št32_t
 
U_EXPORT2


337 
uŒaû_fÜm©
(*
outBuf
, 
št32_t
 
ÿ·c™y
,

338 
št32_t
 
šd’t
, cÚ¡ *
fmt
, ...);

353 
U_STABLE
 cÚ¡ * 
U_EXPORT2


354 
uŒaû_funùiÚName
(
št32_t
 
âNumb”
);

356 
	gU_CDECL_END


	@unicode/utypes.h

32 #iâdeà
UTYPES_H


33 
	#UTYPES_H


	)

36 
	~"unicode/umachše.h
"

37 
	~"unicode/utf.h
"

38 
	~"unicode/uv”siÚ.h
"

39 
	~"unicode/ucÚfig.h
"

56 #ifdeà
XP_CPLUSPLUS


57 #iâdeà
U_SHOW_CPLUSPLUS_API


58 
	#U_SHOW_CPLUSPLUS_API
 1

	)

61 #undeà
U_SHOW_CPLUSPLUS_API


62 
	#U_SHOW_CPLUSPLUS_API
 0

	)

71 #ià!
U_DEFAULT_SHOW_DRAFT
 && !
defšed
(
U_SHOW_DRAFT_API
)

72 
	#U_HIDE_DRAFT_API
 1

	)

74 #ià!
U_DEFAULT_SHOW_DRAFT
 && !
defšed
(
U_SHOW_INTERNAL_API
)

75 
	#U_HIDE_INTERNAL_API
 1

	)

78 #ifdeà
U_HIDE_DRAFT_API


79 
	~"unicode/ud¿á.h
"

82 #ifdeà
U_HIDE_DEPRECATED_API


83 
	~"unicode/ud•rùd.h
"

86 #ifdeà
U_HIDE_DEPRECATED_API


87 
	~"unicode/uob¦‘e.h
"

90 #ifdeà
U_HIDE_INTERNAL_API


91 
	~"unicode/ušŒÇl.h
"

94 #ifdeà
U_HIDE_SYSTEM_API


95 
	~"unicode/usy¡em.h
"

109 
	#U_ASCII_FAMILY
 0

	)

115 
	#U_EBCDIC_FAMILY
 1

	)

160 #iâdeà
U_CHARSET_FAMILY


161 
	#U_CHARSET_FAMILY
 0

	)

184 #iâdeà
U_CHARSET_IS_UTF8


185 
	#U_CHARSET_IS_UTF8
 0

	)

208 #ià
U_CHARSET_FAMILY


209 #ià
U_IS_BIG_ENDIAN


211 
	#U_ICUDATA_TYPE_LETTER
 "e"

	)

212 
	#U_ICUDATA_TYPE_LITLETTER
 
e


	)

215 
	#U_ICUDATA_TYPE_LETTER
 "x"

	)

216 
	#U_ICUDATA_TYPE_LITLETTER
 
x


	)

219 #ià
U_IS_BIG_ENDIAN


221 
	#U_ICUDATA_TYPE_LETTER
 "b"

	)

222 
	#U_ICUDATA_TYPE_LITLETTER
 
b


	)

225 
	#U_ICUDATA_TYPE_LETTER
 "l"

	)

226 
	#U_ICUDATA_TYPE_LITLETTER
 
l


	)

235 
	#U_ICUDATA_NAME
 "icudt" 
U_ICU_VERSION_SHORT
 
U_ICUDATA_TYPE_LETTER


	)

236 
	#U_USRDATA_NAME
 "u¤dt" 
U_ICU_VERSION_SHORT
 
U_ICUDATA_TYPE_LETTER


	)

237 
	#U_USE_USRDATA
 1

	)

250 
	#U_ICUDATA_ENTRY_POINT
 
	`U_DEF2_ICUDATA_ENTRY_POINT
(
U_ICU_VERSION_MAJOR_NUM
, 
U_ICU_VERSION_MINOR_NUM
)

	)

256 
	#U_DEF2_ICUDATA_ENTRY_POINT
(
majÜ
, 
mšÜ
è
	`U_DEF_ICUDATA_ENTRY_POINT
(majÜ, mšÜ)

	)

261 #iâdeà
U_DEF_ICUDATA_ENTRY_POINT


263 
	#U_DEF_ICUDATA_ENTRY_POINT
(
majÜ
, 
mšÜ
è
icudt
##majÜ##mšÜ##
_d©


	)

277 #ià
defšed
(
OS390
è&& defšed(
XP_CPLUSPLUS
)

278 
	#U_CALLCONV
 
__cdeş


	)

280 
	#U_CALLCONV
 
U_EXPORT2


	)

288 #iâdeà
NULL


289 #ifdeà
XP_CPLUSPLUS


290 
	#NULL
 0

	)

292 
	#NULL
 ((*)0)

	)

307 
	tUD©e
;

310 
	#U_MILLIS_PER_SECOND
 (1000)

	)

312 
	#U_MILLIS_PER_MINUTE
 (60000)

	)

314 
	#U_MILLIS_PER_HOUR
 (3600000)

	)

316 
	#U_MILLIS_PER_DAY
 (86400000)

	)

365 * 
	tUCÏssID
;

434 #ià
defšed
(
U_COMBINED_IMPLEMENTATION
)

435 
	#U_DATA_API
 
U_EXPORT


	)

436 
	#U_COMMON_API
 
U_EXPORT


	)

437 
	#U_I18N_API
 
U_EXPORT


	)

438 
	#U_LAYOUT_API
 
U_EXPORT


	)

439 
	#U_LAYOUTEX_API
 
U_EXPORT


	)

440 
	#U_IO_API
 
U_EXPORT


	)

441 
	#U_TOOLUTIL_API
 
U_EXPORT


	)

442 #–ià
defšed
(
U_STATIC_IMPLEMENTATION
)

443 
	#U_DATA_API


	)

444 
	#U_COMMON_API


	)

445 
	#U_I18N_API


	)

446 
	#U_LAYOUT_API


	)

447 
	#U_LAYOUTEX_API


	)

448 
	#U_IO_API


	)

449 
	#U_TOOLUTIL_API


	)

450 #–ià
defšed
(
U_COMMON_IMPLEMENTATION
)

451 
	#U_DATA_API
 
U_IMPORT


	)

452 
	#U_COMMON_API
 
U_EXPORT


	)

453 
	#U_I18N_API
 
U_IMPORT


	)

454 
	#U_LAYOUT_API
 
U_IMPORT


	)

455 
	#U_LAYOUTEX_API
 
U_IMPORT


	)

456 
	#U_IO_API
 
U_IMPORT


	)

457 
	#U_TOOLUTIL_API
 
U_IMPORT


	)

458 #–ià
defšed
(
U_I18N_IMPLEMENTATION
)

459 
	#U_DATA_API
 
U_IMPORT


	)

460 
	#U_COMMON_API
 
U_IMPORT


	)

461 
	#U_I18N_API
 
U_EXPORT


	)

462 
	#U_LAYOUT_API
 
U_IMPORT


	)

463 
	#U_LAYOUTEX_API
 
U_IMPORT


	)

464 
	#U_IO_API
 
U_IMPORT


	)

465 
	#U_TOOLUTIL_API
 
U_IMPORT


	)

466 #–ià
defšed
(
U_LAYOUT_IMPLEMENTATION
)

467 
	#U_DATA_API
 
U_IMPORT


	)

468 
	#U_COMMON_API
 
U_IMPORT


	)

469 
	#U_I18N_API
 
U_IMPORT


	)

470 
	#U_LAYOUT_API
 
U_EXPORT


	)

471 
	#U_LAYOUTEX_API
 
U_IMPORT


	)

472 
	#U_IO_API
 
U_IMPORT


	)

473 
	#U_TOOLUTIL_API
 
U_IMPORT


	)

474 #–ià
defšed
(
U_LAYOUTEX_IMPLEMENTATION
)

475 
	#U_DATA_API
 
U_IMPORT


	)

476 
	#U_COMMON_API
 
U_IMPORT


	)

477 
	#U_I18N_API
 
U_IMPORT


	)

478 
	#U_LAYOUT_API
 
U_IMPORT


	)

479 
	#U_LAYOUTEX_API
 
U_EXPORT


	)

480 
	#U_IO_API
 
U_IMPORT


	)

481 
	#U_TOOLUTIL_API
 
U_IMPORT


	)

482 #–ià
defšed
(
U_IO_IMPLEMENTATION
)

483 
	#U_DATA_API
 
U_IMPORT


	)

484 
	#U_COMMON_API
 
U_IMPORT


	)

485 
	#U_I18N_API
 
U_IMPORT


	)

486 
	#U_LAYOUT_API
 
U_IMPORT


	)

487 
	#U_LAYOUTEX_API
 
U_IMPORT


	)

488 
	#U_IO_API
 
U_EXPORT


	)

489 
	#U_TOOLUTIL_API
 
U_IMPORT


	)

490 #–ià
defšed
(
U_TOOLUTIL_IMPLEMENTATION
)

491 
	#U_DATA_API
 
U_IMPORT


	)

492 
	#U_COMMON_API
 
U_IMPORT


	)

493 
	#U_I18N_API
 
U_IMPORT


	)

494 
	#U_LAYOUT_API
 
U_IMPORT


	)

495 
	#U_LAYOUTEX_API
 
U_IMPORT


	)

496 
	#U_IO_API
 
U_IMPORT


	)

497 
	#U_TOOLUTIL_API
 
U_EXPORT


	)

499 
	#U_DATA_API
 
U_IMPORT


	)

500 
	#U_COMMON_API
 
U_IMPORT


	)

501 
	#U_I18N_API
 
U_IMPORT


	)

502 
	#U_LAYOUT_API
 
U_IMPORT


	)

503 
	#U_LAYOUTEX_API
 
U_IMPORT


	)

504 
	#U_IO_API
 
U_IMPORT


	)

505 
	#U_TOOLUTIL_API
 
U_IMPORT


	)

513 #ifdeà
__ılu¥lus


514 
	#U_STANDARD_CPP_NAMESPACE
 ::

	)

516 
	#U_STANDARD_CPP_NAMESPACE


	)

545 #ià
defšed
(
XP_CPLUSPLUS
è&& defšed(
U_WINDOWS
è&& 
U_DEBUG
 && 
U_OVERRIDE_CXX_ALLOCATION
 && (
_MSC_VER
>=1200è&& !defšed(
U_STATIC_IMPLEMENTATION
è&& (defšed(
U_COMMON_IMPLEMENTATION
è|| defšed(
U_I18N_IMPLEMENTATION
è|| defšed(
U_IO_IMPLEMENTATION
è|| defšed(
U_LAYOUT_IMPLEMENTATION
è|| defšed(
U_LAYOUTEX_IMPLEMENTATION
))

547 #iâdeà
U_HIDE_INTERNAL_API


553 
šlše
 *

554 
İ”©Ü
 
	$Ãw
(
size_t
 ) {

555 *
q
=
NULL
;

556 *
q
=5;

557  
q
;

558 
	}
}

560 #ifdeà
_R‘_by‹ÿp_


562 
	$_R‘_by‹ÿp_
(
_Size
)

569 
šlše
 *

570 
İ”©Ü
 
Ãw
[](
size_t
 ) {

571 *
q
=
NULL
;

572 *
q
=5;

573  
q
;

574 
	}
}

581 
šlše
 

582 
İ”©Ü
 
	$d–‘e
(* ) {

583 *
q
=
NULL
;

584 *
q
=5;

585 
	}
}

592 
šlše
 

593 
İ”©Ü
 
	gd–‘e
[](* ) {

594 *
	gq
=
NULL
;

595 *
	gq
=5;

619 
	eUE¼ÜCode
 {

625 
	mU_USING_FALLBACK_WARNING
 = -128,

627 
	mU_ERROR_WARNING_START
 = -128,

629 
	mU_USING_DEFAULT_WARNING
 = -127,

631 
	mU_SAFECLONE_ALLOCATED_WARNING
 = -126,

633 
	mU_STATE_OLD_WARNING
 = -125,

635 
	mU_STRING_NOT_TERMINATED_WARNING
 = -124,

637 
	mU_SORT_KEY_TOO_SHORT_WARNING
 = -123,

639 
	mU_AMBIGUOUS_ALIAS_WARNING
 = -122,

641 
	mU_DIFFERENT_UCA_VERSION
 = -121,

643 
	mU_PLUGIN_CHANGED_LEVEL_WARNING
 = -120,

645 
	mU_ERROR_WARNING_LIMIT
,

648 
	mU_ZERO_ERROR
 = 0,

650 
	mU_ILLEGAL_ARGUMENT_ERROR
 = 1,

651 
	mU_MISSING_RESOURCE_ERROR
 = 2,

652 
	mU_INVALID_FORMAT_ERROR
 = 3,

653 
	mU_FILE_ACCESS_ERROR
 = 4,

654 
	mU_INTERNAL_PROGRAM_ERROR
 = 5,

655 
	mU_MESSAGE_PARSE_ERROR
 = 6,

656 
	mU_MEMORY_ALLOCATION_ERROR
 = 7,

657 
	mU_INDEX_OUTOFBOUNDS_ERROR
 = 8,

658 
	mU_PARSE_ERROR
 = 9,

659 
	mU_INVALID_CHAR_FOUND
 = 10,

660 
	mU_TRUNCATED_CHAR_FOUND
 = 11,

661 
	mU_ILLEGAL_CHAR_FOUND
 = 12,

662 
	mU_INVALID_TABLE_FORMAT
 = 13,

663 
	mU_INVALID_TABLE_FILE
 = 14,

664 
	mU_BUFFER_OVERFLOW_ERROR
 = 15,

665 
	mU_UNSUPPORTED_ERROR
 = 16,

666 
	mU_RESOURCE_TYPE_MISMATCH
 = 17,

667 
	mU_ILLEGAL_ESCAPE_SEQUENCE
 = 18,

668 
	mU_UNSUPPORTED_ESCAPE_SEQUENCE
 = 19,

669 
	mU_NO_SPACE_AVAILABLE
 = 20,

670 
	mU_CE_NOT_FOUND_ERROR
 = 21,

671 
	mU_PRIMARY_TOO_LONG_ERROR
 = 22,

672 
	mU_STATE_TOO_OLD_ERROR
 = 23,

673 
	mU_TOO_MANY_ALIASES_ERROR
 = 24,

675 
	mU_ENUM_OUT_OF_SYNC_ERROR
 = 25,

676 
	mU_INVARIANT_CONVERSION_ERROR
 = 26,

677 
	mU_INVALID_STATE_ERROR
 = 27,

678 
	mU_COLLATOR_VERSION_MISMATCH
 = 28,

679 
	mU_USELESS_COLLATOR_ERROR
 = 29,

680 
	mU_NO_WRITE_PERMISSION
 = 30,

682 
	mU_STANDARD_ERROR_LIMIT
,

686 
	mU_BAD_VARIABLE_DEFINITION
=0x10000,

687 
	mU_PARSE_ERROR_START
 = 0x10000,

688 
	mU_MALFORMED_RULE
,

689 
	mU_MALFORMED_SET
,

690 
	mU_MALFORMED_SYMBOL_REFERENCE
,

691 
	mU_MALFORMED_UNICODE_ESCAPE
,

692 
	mU_MALFORMED_VARIABLE_DEFINITION
,

693 
	mU_MALFORMED_VARIABLE_REFERENCE
,

694 
	mU_MISMATCHED_SEGMENT_DELIMITERS
,

695 
	mU_MISPLACED_ANCHOR_START
,

696 
	mU_MISPLACED_CURSOR_OFFSET
,

697 
	mU_MISPLACED_QUANTIFIER
,

698 
	mU_MISSING_OPERATOR
,

699 
	mU_MISSING_SEGMENT_CLOSE
,

700 
	mU_MULTIPLE_ANTE_CONTEXTS
,

701 
	mU_MULTIPLE_CURSORS
,

702 
	mU_MULTIPLE_POST_CONTEXTS
,

703 
	mU_TRAILING_BACKSLASH
,

704 
	mU_UNDEFINED_SEGMENT_REFERENCE
,

705 
	mU_UNDEFINED_VARIABLE
,

706 
	mU_UNQUOTED_SPECIAL
,

707 
	mU_UNTERMINATED_QUOTE
,

708 
	mU_RULE_MASK_ERROR
,

709 
	mU_MISPLACED_COMPOUND_FILTER
,

710 
	mU_MULTIPLE_COMPOUND_FILTERS
,

711 
	mU_INVALID_RBT_SYNTAX
,

712 
	mU_INVALID_PROPERTY_PATTERN
,

713 
	mU_MALFORMED_PRAGMA
,

714 
	mU_UNCLOSED_SEGMENT
,

715 
	mU_ILLEGAL_CHAR_IN_SEGMENT
,

716 
	mU_VARIABLE_RANGE_EXHAUSTED
,

717 
	mU_VARIABLE_RANGE_OVERLAP
,

718 
	mU_ILLEGAL_CHARACTER
,

719 
	mU_INTERNAL_TRANSLITERATOR_ERROR
,

720 
	mU_INVALID_ID
,

721 
	mU_INVALID_FUNCTION
,

722 
	mU_PARSE_ERROR_LIMIT
,

727 
	mU_UNEXPECTED_TOKEN
=0x10100,

728 
	mU_FMT_PARSE_ERROR_START
=0x10100,

729 
	mU_MULTIPLE_DECIMAL_SEPARATORS
,

730 
	mU_MULTIPLE_DECIMAL_SEPERATORS
 = 
U_MULTIPLE_DECIMAL_SEPARATORS
,

731 
	mU_MULTIPLE_EXPONENTIAL_SYMBOLS
,

732 
	mU_MALFORMED_EXPONENTIAL_PATTERN
,

733 
	mU_MULTIPLE_PERCENT_SYMBOLS
,

734 
	mU_MULTIPLE_PERMILL_SYMBOLS
,

735 
	mU_MULTIPLE_PAD_SPECIFIERS
,

736 
	mU_PATTERN_SYNTAX_ERROR
,

737 
	mU_ILLEGAL_PAD_POSITION
,

738 
	mU_UNMATCHED_BRACES
,

739 
	mU_UNSUPPORTED_PROPERTY
,

740 
	mU_UNSUPPORTED_ATTRIBUTE
,

741 
	mU_ARGUMENT_TYPE_MISMATCH
,

742 
	mU_DUPLICATE_KEYWORD
,

743 
	mU_UNDEFINED_KEYWORD
,

744 
	mU_DEFAULT_KEYWORD_MISSING
,

745 
	mU_DECIMAL_NUMBER_SYNTAX_ERROR
,

746 
	mU_FMT_PARSE_ERROR_LIMIT
,

751 
	mU_BRK_INTERNAL_ERROR
=0x10200,

752 
	mU_BRK_ERROR_START
=0x10200,

753 
	mU_BRK_HEX_DIGITS_EXPECTED
,

754 
	mU_BRK_SEMICOLON_EXPECTED
,

755 
	mU_BRK_RULE_SYNTAX
,

756 
	mU_BRK_UNCLOSED_SET
,

757 
	mU_BRK_ASSIGN_ERROR
,

758 
	mU_BRK_VARIABLE_REDFINITION
,

759 
	mU_BRK_MISMATCHED_PAREN
,

760 
	mU_BRK_NEW_LINE_IN_QUOTED_STRING
,

761 
	mU_BRK_UNDEFINED_VARIABLE
,

762 
	mU_BRK_INIT_ERROR
,

763 
	mU_BRK_RULE_EMPTY_SET
,

764 
	mU_BRK_UNRECOGNIZED_OPTION
,

765 
	mU_BRK_MALFORMED_RULE_TAG
,

766 
	mU_BRK_ERROR_LIMIT
,

771 
	mU_REGEX_INTERNAL_ERROR
=0x10300,

772 
	mU_REGEX_ERROR_START
=0x10300,

773 
	mU_REGEX_RULE_SYNTAX
,

774 
	mU_REGEX_INVALID_STATE
,

775 
	mU_REGEX_BAD_ESCAPE_SEQUENCE
,

776 
	mU_REGEX_PROPERTY_SYNTAX
,

777 
	mU_REGEX_UNIMPLEMENTED
,

778 
	mU_REGEX_MISMATCHED_PAREN
,

779 
	mU_REGEX_NUMBER_TOO_BIG
,

780 
	mU_REGEX_BAD_INTERVAL
,

781 
	mU_REGEX_MAX_LT_MIN
,

782 
	mU_REGEX_INVALID_BACK_REF
,

783 
	mU_REGEX_INVALID_FLAG
,

784 
	mU_REGEX_LOOK_BEHIND_LIMIT
,

785 
	mU_REGEX_SET_CONTAINS_STRING
,

786 
	mU_REGEX_OCTAL_TOO_BIG
,

787 
	mU_REGEX_MISSING_CLOSE_BRACKET
,

788 
	mU_REGEX_INVALID_RANGE
,

789 
	mU_REGEX_STACK_OVERFLOW
,

790 
	mU_REGEX_TIME_OUT
,

791 
	mU_REGEX_STOPPED_BY_CALLER
,

792 
	mU_REGEX_ERROR_LIMIT
,

797 
	mU_IDNA_PROHIBITED_ERROR
=0x10400,

798 
	mU_IDNA_ERROR_START
=0x10400,

799 
	mU_IDNA_UNASSIGNED_ERROR
,

800 
	mU_IDNA_CHECK_BIDI_ERROR
,

801 
	mU_IDNA_STD3_ASCII_RULES_ERROR
,

802 
	mU_IDNA_ACE_PREFIX_ERROR
,

803 
	mU_IDNA_VERIFICATION_ERROR
,

804 
	mU_IDNA_LABEL_TOO_LONG_ERROR
,

805 
	mU_IDNA_ZERO_LENGTH_LABEL_ERROR
,

806 
	mU_IDNA_DOMAIN_NAME_TOO_LONG_ERROR
,

807 
	mU_IDNA_ERROR_LIMIT
,

811 
	mU_STRINGPREP_PROHIBITED_ERROR
 = 
U_IDNA_PROHIBITED_ERROR
,

812 
	mU_STRINGPREP_UNASSIGNED_ERROR
 = 
U_IDNA_UNASSIGNED_ERROR
,

813 
	mU_STRINGPREP_CHECK_BIDI_ERROR
 = 
U_IDNA_CHECK_BIDI_ERROR
,

818 
	mU_PLUGIN_ERROR_START
=0x10500,

819 
	mU_PLUGIN_TOO_HIGH
=0x10500,

820 
	mU_PLUGIN_DIDNT_SET_LEVEL
,

821 
	mU_PLUGIN_ERROR_LIMIT
,

823 
	mU_ERROR_LIMIT
=
U_PLUGIN_ERROR_LIMIT


824 } 
	tUE¼ÜCode
;

829 #ifdeà
XP_CPLUSPLUS


835 
šlše
 
UBoŞ
 
	$U_SUCCESS
(
UE¼ÜCode
 
code
è{  (
UBoŞ
)(code<=
U_ZERO_ERROR
); 
	}
}

841 
šlše
 
UBoŞ
 
	$U_FAILURE
(
UE¼ÜCode
 
code
è{  (
UBoŞ
)(code>
U_ZERO_ERROR
); 
	}
}

847 
	#U_SUCCESS
(
x
è((x)<=
U_ZERO_ERROR
)

	)

852 
	#U_FAILURE
(
x
è((x)>
U_ZERO_ERROR
)

	)

861 
U_STABLE
 cÚ¡ * 
U_EXPORT2


862 
u_”rÜName
(
UE¼ÜCode
 
code
);

	@unicode/uvernum.h

37 #iâdeà
UVERNUM_H


38 
	#UVERNUM_H


	)

44 
	#U_COPYRIGHT_STRING
 \

45 " Cİyrighˆ(Cè2010, IÁ”ÇtiÚ® Busšes Machše CÜpÜ©iÚ‡nd oth”s. AÎ Right Re£rved. "

	)

51 
	#U_ICU_VERSION_MAJOR_NUM
 4

	)

57 
	#U_ICU_VERSION_MINOR_NUM
 6

	)

63 
	#U_ICU_VERSION_PATCHLEVEL_NUM
 0

	)

69 #iâdeà
U_ICU_VERSION_BUILDLEVEL_NUM


70 
	#U_ICU_VERSION_BUILDLEVEL_NUM
 0

	)

77 
	#U_ICU_VERSION_SUFFIX
 
_46


	)

85 #iâdeà
U_ICU_ENTRY_POINT_RENAME


86 
	#U_ICU_ENTRY_POINT_RENAME
(
x
èx ## 
_46


	)

94 
	#U_ICU_VERSION
 "4.6"

	)

100 
	#U_ICU_VERSION_SHORT
 "46"

	)

105 
	#U_ICU_DATA_VERSION
 "4.6"

	)

125 
	#UCOL_RUNTIME_VERSION
 6

	)

142 
	#UCOL_BUILDER_VERSION
 8

	)

148 
	#UCOL_TAILORINGS_VERSION
 1

	)

	@unicode/uversion.h

25 #iâdeà
UVERSION_H


26 
	#UVERSION_H


	)

28 
	~"unicode/umachše.h
"

31 
	~"unicode/uv”num.h
"

36 
	#U_COPYRIGHT_STRING_LENGTH
 128

	)

41 
	#U_MAX_VERSION_LENGTH
 4

	)

46 
	#U_VERSION_DELIMITER
 '.'

	)

51 
	#U_MAX_VERSION_STRING_LENGTH
 20

	)

57 
ušt8_t
 
	tUV”siÚInfo
[
U_MAX_VERSION_LENGTH
];

102 #ifdeà
XP_CPLUSPLUS


103 #ià
U_HAVE_NAMESPACE


104 #ià
U_DISABLE_RENAMING


105 
	#U_ICU_NAMESPACE
 
icu


	)

106 
Çme¥aû
 
	gU_ICU_NAMESPACE
 { }

108 
	#U_ICU_NAMESPACE
 
	`U_ICU_ENTRY_POINT_RENAME
(
icu
)

	)

109 
Çme¥aû
 
	gU_ICU_NAMESPACE
 { }

110 
Çme¥aû
 
	gicu
 = 
U_ICU_NAMESPACE
;

113 
	#U_NAMESPACE_BEGIN
 "C++" { 
Çme¥aû
 
U_ICU_NAMESPACE
 {

	)

114 
	#U_NAMESPACE_END
 } }

	)

115 
	#U_NAMESPACE_USE
 
usšg
 
Çme¥aû
 
U_ICU_NAMESPACE
;

	)

116 
	#U_NAMESPACE_QUALIFIER
 
U_ICU_NAMESPACE
::

	)

118 #iâdeà
U_USING_ICU_NAMESPACE


119 
	#U_USING_ICU_NAMESPACE
 1

	)

121 #ià
U_USING_ICU_NAMESPACE


122 
	gU_NAMESPACE_USE


125 
	#U_NAMESPACE_BEGIN
 "C++" {

	)

126 
	#U_NAMESPACE_END
 }

	)

127 
	#U_NAMESPACE_USE


	)

128 
	#U_NAMESPACE_QUALIFIER


	)

131 
	#U_NAMESPACE_BEGIN


	)

132 
	#U_NAMESPACE_END


	)

133 
	#U_NAMESPACE_USE


	)

134 
	#U_NAMESPACE_QUALIFIER


	)

152 
U_STABLE
 
U_EXPORT2


153 
u_v”siÚFromSŒšg
(
UV”siÚInfo
 
v”siÚA¼ay
, cÚ¡ *
v”siÚSŒšg
);

166 
U_STABLE
 
U_EXPORT2


167 
u_v”siÚFromUSŒšg
(
UV”siÚInfo
 
v”siÚA¼ay
, cÚ¡ 
UCh¬
 *
v”siÚSŒšg
);

182 
U_STABLE
 
U_EXPORT2


183 
u_v”siÚToSŒšg
(
UV”siÚInfo
 
v”siÚA¼ay
, *
v”siÚSŒšg
);

193 
U_STABLE
 
U_EXPORT2


194 
u_g‘V”siÚ
(
UV”siÚInfo
 
v”siÚA¼ay
);

	@unifilt.cpp

11 
	~"unicode/unift.h
"

12 
	~"unicode/»p.h
"

14 
U_NAMESPACE_BEGIN


15 
	$UOBJECT_DEFINE_ABSTRACT_RTTI_IMPLEMENTATION
(
UnicodeF‹r
)

20 
UnicodeM©ch”
::~
	$UnicodeM©ch”
(è{
	}
}

22 
UnicodeF‹r
::~
	$UnicodeF‹r
(è{
	}
}

28 
UnicodeM©ch”
* 
UnicodeF‹r
::
	$toM©ch”
() const {

29  (
UnicodeM©ch”
*è
this
;

30 
	}
}

32 
	gUnicodeF‹r
::
	$£tD©a
(cÚ¡ 
T¿n¦™”©iÚRuËD©a
*è{
	}
}

39 
UM©chDeg»e
 
UnicodeF‹r
::
	$m©ches
(cÚ¡ 
R•ÏûabË
& 
‹xt
,

40 
št32_t
& 
off£t
,

41 
št32_t
 
lim™
,

42 
UBoŞ
 
šüem’l
) {

43 
UCh¬32
 
c
;

44 ià(
off£t
 < 
lim™
 &&

45 
	`cÚšs
(
c
 = 
‹xt
.
	`ch¬32At
(
off£t
))) {

46 
off£t
 +ğ
	`UTF_CHAR_LENGTH
(
c
);

47  
U_MATCH
;

49 ià(
off£t
 > 
lim™
 &&

50 
	`cÚšs
(
c
 = 
‹xt
.
	`ch¬32At
(
off£t
))) {

54 --
off£t
;

55 ià(
off£t
 >= 0) {

56 
off£t
 -ğ
	`UTF_CHAR_LENGTH
(
‹xt
.
	`ch¬32At
(offset)) - 1;

58  
U_MATCH
;

60 ià(
šüem’l
 && 
off£t
 =ğ
lim™
) {

61  
U_PARTIAL_MATCH
;

63  
U_MISMATCH
;

64 
	}
}

66 
	gU_NAMESPACE_END


	@unifunct.cpp

8 
	~"unicode/unifunù.h
"

10 
U_NAMESPACE_BEGIN


12 
	$UOBJECT_DEFINE_ABSTRACT_RTTI_IMPLEMENTATION
(
UnicodeFunùÜ
)

14 
UnicodeFunùÜ
::~
	$UnicodeFunùÜ
(è{
	}
}

16 
UnicodeM©ch”
* 
UnicodeFunùÜ
::
	$toM©ch”
() const {

18 
	}
}

20 
UnicodeR•Ïûr
* 
	gUnicodeFunùÜ
::
	$toR•Ïûr
() const {

22 
	}
}

24 
	gU_NAMESPACE_END


	@uniset.cpp

11 
	~"unicode/uty³s.h
"

12 
	~"unicode/uni£t.h
"

13 
	~"unicode/·r£pos.h
"

14 
	~"unicode/symbË.h
"

15 
	~"ruË™”.h
"

16 
	~"cmemÜy.h
"

17 
	~"c¡ršg.h
"

18 
	~"uhash.h
"

19 
	~"ut.h
"

20 
	~"uveùÜ.h
"

21 
	~"ch¬¡r.h
"

22 
	~"u¡rfmt.h
"

23 
	~"uas£¹.h
"

24 
	~"hash.h
"

25 
	~"bmp£t.h
"

26 
	~"uni£t¥ª.h
"

30 
	#SET_OPEN
 ((
UCh¬
)0x005Bè

	)

31 
	#SET_CLOSE
 ((
UCh¬
)0x005Dè

	)

32 
	#HYPHEN
 ((
UCh¬
)0x002Dè

	)

33 
	#COMPLEMENT
 ((
UCh¬
)0x005Eè

	)

34 
	#COLON
 ((
UCh¬
)0x003Aè

	)

35 
	#BACKSLASH
 ((
UCh¬
)0x005Cè

	)

36 
	#INTERSECTION
 ((
UCh¬
)0x0026è

	)

37 
	#UPPER_U
 ((
UCh¬
)0x0055è

	)

38 
	#LOWER_U
 ((
UCh¬
)0x0075è

	)

39 
	#OPEN_BRACE
 ((
UCh¬
)123è

	)

40 
	#CLOSE_BRACE
 ((
UCh¬
)125è

	)

41 
	#UPPER_P
 ((
UCh¬
)0x0050è

	)

42 
	#LOWER_P
 ((
UCh¬
)0x0070è

	)

43 
	#UPPER_N
 ((
UCh¬
)78è

	)

44 
	#EQUALS
 ((
UCh¬
)0x003Dè

	)

47 
	#UNICODESET_HIGH
 0x0110000

	)

50 
	#UNICODESET_LOW
 0x000000

	)

53 
	#START_EXTRA
 16

	)

56 
	#GROW_EXTRA
 
START_EXTRA


	)

58 
U_NAMESPACE_BEGIN


60 
	gSymbŞTabË
::~
	$SymbŞTabË
(è{
	}
}

62 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
UnicodeS‘
)

70 
šlše
 
UCh¬32
 
	$pšCodePošt
(
UCh¬32
& 
c
) {

71 ià(
c
 < 
UNICODESET_LOW
) {

72 
c
 = 
UNICODESET_LOW
;

73 } ià(
c
 > (
UNICODESET_HIGH
-1)) {

74 
c
 = (
UNICODESET_HIGH
-1);

76  
c
;

77 
	}
}

95 #ifdeà
DEBUG_MEM


96 
	~<¡dio.h
>

97 
št32_t
 
	g_dbgCouÁ
 = 0;

99 
šlše
 
	$_dbgù
(
UnicodeS‘
* 
£t
) {

100 
UnicodeSŒšg
 
¡r
;

101 
£t
->
	`toP©‹º
(
¡r
, 
TRUE
);

102 
buf
[40];

103 
¡r
.
	`exŒaù
(0, 39, 
buf
, "");

104 
	`´štf
("DEBUG UnicodeS‘: cˆ0x%08X; %d %s\n", 
£t
, ++
_dbgCouÁ
, 
buf
);

105 
	}
}

107 
šlše
 
	$_dbgdt
(
UnicodeS‘
* 
£t
) {

108 
UnicodeSŒšg
 
¡r
;

109 
£t
->
	`toP©‹º
(
¡r
, 
TRUE
);

110 
buf
[40];

111 
¡r
.
	`exŒaù
(0, 39, 
buf
, "");

112 
	`´štf
("DEBUG UnicodeS‘: dˆ0x%08X; %d %s\n", 
£t
, --
_dbgCouÁ
, 
buf
);

113 
	}
}

117 
	#_dbgù
(
£t
)

	)

118 
	#_dbgdt
(
£t
)

	)

126 
U_CALLCONV
 
	$şÚeUnicodeSŒšg
(
UHashTok
 *
d¡
, UHashTok *
¤c
) {

127 
d¡
->
poš‹r
 = 
Ãw
 
	`UnicodeSŒšg
(*(
UnicodeSŒšg
*)
¤c
->pointer);

128 
	}
}

130 
št8_t
 
U_CALLCONV
 
	$com·»UnicodeSŒšg
(
UHashTok
 
t1
, UHashTok 
t2
) {

131 cÚ¡ 
UnicodeSŒšg
 &
a
 = *(cÚ¡ UnicodeSŒšg*)
t1
.
poš‹r
;

132 cÚ¡ 
UnicodeSŒšg
 &
b
 = *(cÚ¡ UnicodeSŒšg*)
t2
.
poš‹r
;

133  
a
.
	`com·»
(
b
);

134 
	}
}

143 
	gUnicodeS‘
::
	$UnicodeS‘
() :

144 
	`Ën
(1), 
	`ÿ·c™y
(1 + 
START_EXTRA
), 
	`li¡
(0), 
	`bmpS‘
(0), 
	`bufãr
(0),

145 
	`bufãrC­ac™y
(0), 
	`·tL’
(0), 
	`·t
(
NULL
), 
	`¡ršgs
(NULL), 
	`¡ršgS·n
(NULL),

146 
	$fFÏgs
(0)

148 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

149 
	`®loÿ‹SŒšgs
(
¡©us
);

150 ià(
	`U_FAILURE
(
¡©us
)) {

153 
li¡
 = (
UCh¬32
*è
	`u´v_m®loc
((UCh¬32è* 
ÿ·c™y
);

154 if(
li¡
!=
NULL
){

155 
li¡
[0] = 
UNICODESET_HIGH
;

157 
	`£tToBogus
();

160 
	`_dbgù
(
this
);

161 
	}
}

170 
	gUnicodeS‘
::
	$UnicodeS‘
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) :

171 
	`Ën
(1), 
	`ÿ·c™y
(1 + 
START_EXTRA
), 
	`li¡
(0), 
	`bmpS‘
(0), 
	`bufãr
(0),

172 
	`bufãrC­ac™y
(0), 
	`·tL’
(0), 
	`·t
(
NULL
), 
	`¡ršgs
(NULL), 
	`¡ršgS·n
(NULL),

173 
	$fFÏgs
(0)

175 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

176 
	`®loÿ‹SŒšgs
(
¡©us
);

177 ià(
	`U_FAILURE
(
¡©us
)) {

180 
li¡
 = (
UCh¬32
*è
	`u´v_m®loc
((UCh¬32è* 
ÿ·c™y
);

181 if(
li¡
!=
NULL
){

182 
li¡
[0] = 
UNICODESET_HIGH
;

183 
	`com¶em’t
(
¡¬t
, 
’d
);

185 
	`£tToBogus
();

188 
	`_dbgù
(
this
);

189 
	}
}

194 
	gUnicodeS‘
::
	$UnicodeS‘
(cÚ¡ 
UnicodeS‘
& 
o
) :

195 
	`UnicodeF‹r
(
o
),

196 
	`Ën
(0), 
	`ÿ·c™y
(
o
.
	`isFroz’
(è? o.
Ën
 : o.ËÀ+ 
GROW_EXTRA
), 
	`li¡
(0),

197 
	`bmpS‘
(0),

198 
	`bufãr
(0), 
	`bufãrC­ac™y
(0),

199 
	`·tL’
(0), 
	`·t
(
NULL
), 
	`¡ršgs
(NULL), 
	`¡ršgS·n
(NULL),

200 
	$fFÏgs
(0)

202 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

203 
	`®loÿ‹SŒšgs
(
¡©us
);

204 ià(
	`U_FAILURE
(
¡©us
)) {

207 
li¡
 = (
UCh¬32
*è
	`u´v_m®loc
((UCh¬32è* 
ÿ·c™y
);

208 if(
li¡
!=
NULL
){

209 *
this
 = 
o
;

211 
	`£tToBogus
();

214 
	`_dbgù
(
this
);

215 
	}
}

218 
	gUnicodeS‘
::
	$UnicodeS‘
(cÚ¡ 
UnicodeS‘
& 
o
, 
UBoŞ
 ) :

219 
	`UnicodeF‹r
(
o
),

220 
	`Ën
(0), 
	`ÿ·c™y
(
o
.
Ën
 + 
GROW_EXTRA
), 
	`li¡
(0),

221 
	`bmpS‘
(0),

222 
	`bufãr
(0), 
	`bufãrC­ac™y
(0),

223 
	`·tL’
(0), 
	`·t
(
NULL
), 
	`¡ršgs
(NULL), 
	`¡ršgS·n
(NULL),

224 
	$fFÏgs
(0)

226 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

227 
	`®loÿ‹SŒšgs
(
¡©us
);

228 ià(
	`U_FAILURE
(
¡©us
)) {

231 
li¡
 = (
UCh¬32
*è
	`u´v_m®loc
((UCh¬32è* 
ÿ·c™y
);

232 if(
li¡
!=
NULL
){

234 
Ën
 = 
o
.len;

235 
	`u´v_memıy
(
li¡
, 
o
.li¡, 
Ën
*(
UCh¬32
));

236 ià(
¡ršgs
 !ğ
NULL
 && 
o
.strings != NULL) {

237 
¡ršgs
->
	`assign
(*
o
.¡ršgs, 
şÚeUnicodeSŒšg
, 
¡©us
);

239 
	`£tToBogus
();

242 ià(
o
.
·t
) {

243 
	`£tP©‹º
(
	`UnicodeSŒšg
(
o
.
·t
, o.
·tL’
));

246 
	`£tToBogus
();

249 
	`_dbgù
(
this
);

250 
	}
}

255 
	gUnicodeS‘
::~
	$UnicodeS‘
() {

256 
	`_dbgdt
(
this
);

257 
	`u´v_ä“
(
li¡
);

258 
d–‘e
 
bmpS‘
;

259 ià(
bufãr
) {

260 
	`u´v_ä“
(
bufãr
);

262 
d–‘e
 
¡ršgs
;

263 
d–‘e
 
¡ršgS·n
;

264 
	`»Ëa£P©‹º
();

265 
	}
}

270 
	gUnicodeS‘
& UnicodeS‘::
İ”©Ü
=(cÚ¡ 
UnicodeS‘
& 
o
) {

271 ià(
this
 =ğ&
o
) {

272  *
this
;

274 ià(
isFroz’
()) {

275  *
	gthis
;

277 ià(
	go
.
isBogus
()) {

278 
£tToBogus
();

279  *
	gthis
;

281 
UE¼ÜCode
 
	gec
 = 
U_ZERO_ERROR
;

282 
’su»C­ac™y
(
o
.
Ën
, 
ec
);

283 ià(
U_FAILURE
(
ec
)) {

284  *
	gthis
;

286 
	gËn
 = 
o
.
Ën
;

287 
u´v_memıy
(
li¡
, 
o
.li¡, 
Ën
*(
UCh¬32
));

288 ià(
	go
.
	gbmpS‘
 =ğ
NULL
) {

289 
bmpS‘
 = 
NULL
;

291 
	gbmpS‘
 = 
Ãw
 
BMPS‘
(*
o
.
bmpS‘
, 
li¡
, 
Ën
);

292 ià(
	gbmpS‘
 =ğ
NULL
) {

293 
£tToBogus
();

294  *
	gthis
;

297 ià(
	g¡ršgs
 !ğ
NULL
 && 
o
.
¡ršgs
 != NULL) {

298 
¡ršgs
->
assign
(*
o
.¡ršgs, 
şÚeUnicodeSŒšg
, 
ec
);

300 
£tToBogus
();

301  *
	gthis
;

303 ià(
	go
.
	g¡ršgS·n
 =ğ
NULL
) {

304 
¡ršgS·n
 = 
NULL
;

306 
	g¡ršgS·n
 = 
Ãw
 
UnicodeS‘SŒšgS·n
(*
o
.
¡ršgS·n
, *
¡ršgs
);

307 ià(
	g¡ršgS·n
 =ğ
NULL
) {

308 
£tToBogus
();

309  *
	gthis
;

312 
»Ëa£P©‹º
();

313 ià(
	go
.
	g·t
) {

314 
£tP©‹º
(
UnicodeSŒšg
(
o
.
·t
, o.
·tL’
));

316  *
	gthis
;

324 
UnicodeFunùÜ
* 
	gUnicodeS‘
::
	$şÚe
() const {

325  
Ãw
 
	`UnicodeS‘
(*
this
);

326 
	}
}

328 
UnicodeFunùÜ
 *
	gUnicodeS‘
::
	$şÚeAsThawed
() const {

329  
Ãw
 
	`UnicodeS‘
(*
this
, 
TRUE
);

330 
	}
}

342 
UBoŞ
 
	gUnicodeS‘
::
İ”©Ü
==(cÚ¡ 
UnicodeS‘
& 
o
) const {

343 ià(
Ën
 !ğ
o
.Ënè 
FALSE
;

344 
št32_t
 
	gi
 = 0; i < 
	gËn
; ++i) {

345 ià(
	gli¡
[
i
] !ğ
o
.
li¡
[i]è 
FALSE
;

347 ià(*
	g¡ršgs
 !ğ*
o
.
¡ršgs
è 
FALSE
;

348  
	gTRUE
;

357 
št32_t
 
	gUnicodeS‘
::
	$hashCode
() const {

358 
št32_t
 
»suÉ
 = 
Ën
;

359 
št32_t
 
i
 = 0; i < 
Ën
; ++i) {

360 
»suÉ
 *= 1000003;

361 
»suÉ
 +ğ
li¡
[
i
];

363  
»suÉ
;

364 
	}
}

377 
št32_t
 
	gUnicodeS‘
::
	$size
() const {

378 
št32_t
 
n
 = 0;

379 
št32_t
 
couÁ
 = 
	`g‘RªgeCouÁ
();

380 
št32_t
 
i
 = 0; i < 
couÁ
; ++i) {

381 
n
 +ğ
	`g‘RªgeEnd
(
i
è- 
	`g‘RªgeS¹
(i) + 1;

383  
n
 + 
¡ršgs
->
	`size
();

384 
	}
}

391 
UBoŞ
 
	gUnicodeS‘
::
	$isEm±y
() const {

392  
Ën
 =ğ1 && 
¡ršgs
->
	`size
() == 0;

393 
	}
}

400 
UBoŞ
 
	gUnicodeS‘
::
	$cÚšs
(
UCh¬32
 
c
) const {

408 ià(
bmpS‘
 !ğ
NULL
) {

409  
bmpS‘
->
	`cÚšs
(
c
);

411 ià(
¡ršgS·n
 !ğ
NULL
) {

412  
¡ršgS·n
->
	`cÚšs
(
c
);

414 ià(
c
 >ğ
UNICODESET_HIGH
) {

415  
FALSE
;

417 
št32_t
 
i
 = 
	`fšdCodePošt
(
c
);

418  (
UBoŞ
)(
i
 & 1);

419 
	}
}

430 
št32_t
 
	gUnicodeS‘
::
	$fšdCodePošt
(
UCh¬32
 
c
) const {

443 ià(
c
 < 
li¡
[0])

447 
št32_t
 
lo
 = 0;

448 
št32_t
 
hi
 = 
Ën
 - 1;

449 ià(
lo
 >ğ
hi
 || 
c
 >ğ
li¡
[hi-1])

450  
hi
;

454 
št32_t
 
i
 = (
lo
 + 
hi
) >> 1;

455 ià(
i
 =ğ
lo
) {

457 } ià(
c
 < 
li¡
[
i
]) {

458 
hi
 = 
i
;

460 
lo
 = 
i
;

463  
hi
;

464 
	}
}

473 
UBoŞ
 
	gUnicodeS‘
::
	$cÚšs
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) const {

478 
št32_t
 
i
 = 
	`fšdCodePošt
(
¡¬t
);

479  ((
i
 & 1è!ğ0 && 
’d
 < 
li¡
[i]);

480 
	}
}

488 
UBoŞ
 
	gUnicodeS‘
::
	$cÚšs
(cÚ¡ 
UnicodeSŒšg
& 
s
) const {

489 ià(
s
.
	`Ëngth
(è=ğ0è 
FALSE
;

490 
št32_t
 
ı
 = 
	`g‘SšgËCP
(
s
);

491 ià(
ı
 < 0) {

492  
¡ršgs
->
	`cÚšs
((*è&
s
);

494  
	`cÚšs
((
UCh¬32
è
ı
);

496 
	}
}

504 
UBoŞ
 
	gUnicodeS‘
::
	$cÚšsAÎ
(cÚ¡ 
UnicodeS‘
& 
c
) const {

508 
št32_t
 
n
 = 
c
.
	`g‘RªgeCouÁ
();

509 
i
=0; i<
n
; ++i) {

510 ià(!
	`cÚšs
(
c
.
	`g‘RªgeS¹
(
i
), c.
	`g‘RªgeEnd
(i))) {

511  
FALSE
;

514 ià(!
¡ršgs
->
	`cÚšsAÎ
(*
c
.¡ršgs)è 
FALSE
;

515  
TRUE
;

516 
	}
}

524 
UBoŞ
 
	gUnicodeS‘
::
	$cÚšsAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
) const {

525  (
UBoŞ
)(
	`¥ª
(
s
.
	`g‘Bufãr
(), s.
	`Ëngth
(), 
USET_SPAN_CONTAINED
) ==

526 
s
.
	`Ëngth
());

527 
	}
}

536 
UBoŞ
 
	gUnicodeS‘
::
	$cÚšsNÚe
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) const {

541 
št32_t
 
i
 = 
	`fšdCodePošt
(
¡¬t
);

542  ((
i
 & 1è=ğ0 && 
’d
 < 
li¡
[i]);

543 
	}
}

551 
UBoŞ
 
	gUnicodeS‘
::
	$cÚšsNÚe
(cÚ¡ 
UnicodeS‘
& 
c
) const {

555 
št32_t
 
n
 = 
c
.
	`g‘RªgeCouÁ
();

556 
št32_t
 
i
=0; i<
n
; ++i) {

557 ià(!
	`cÚšsNÚe
(
c
.
	`g‘RªgeS¹
(
i
), c.
	`g‘RªgeEnd
(i))) {

558  
FALSE
;

561 ià(!
¡ršgs
->
	`cÚšsNÚe
(*
c
.¡ršgs)è 
FALSE
;

562  
TRUE
;

563 
	}
}

571 
UBoŞ
 
	gUnicodeS‘
::
	$cÚšsNÚe
(cÚ¡ 
UnicodeSŒšg
& 
s
) const {

572  (
UBoŞ
)(
	`¥ª
(
s
.
	`g‘Bufãr
(), s.
	`Ëngth
(), 
USET_SPAN_NOT_CONTAINED
) ==

573 
s
.
	`Ëngth
());

574 
	}
}

581 
UBoŞ
 
	gUnicodeS‘
::
	$m©chesIndexV®ue
(
ušt8_t
 
v
) const {

590 
št32_t
 
i
;

591 
št32_t
 
¿ngeCouÁ
=
	`g‘RªgeCouÁ
();

592 
i
=0; i<
¿ngeCouÁ
; ++i) {

593 
UCh¬32
 
low
 = 
	`g‘RªgeS¹
(
i
);

594 
UCh¬32
 
high
 = 
	`g‘RªgeEnd
(
i
);

595 ià((
low
 & ~0xFFè=ğ(
high
 & ~0xFF)) {

596 ià((
low
 & 0xFFè<ğ
v
 && v <ğ(
high
 & 0xFF)) {

597  
TRUE
;

599 } ià((
low
 & 0xFFè<ğ
v
 || v <ğ(
high
 & 0xFF)) {

600  
TRUE
;

603 ià(
¡ršgs
->
	`size
() != 0) {

604 
i
=0; i<
¡ršgs
->
	`size
(); ++i) {

605 cÚ¡ 
UnicodeSŒšg
& 
s
 = *(cÚ¡ UnicodeSŒšg*)
¡ršgs
->
	`–em’tAt
(
i
);

611 
UCh¬32
 
c
 = 
s
.
	`ch¬32At
(0);

612 ià((
c
 & 0xFFè=ğ
v
) {

613  
TRUE
;

617  
FALSE
;

618 
	}
}

624 
UM©chDeg»e
 
	gUnicodeS‘
::
	$m©ches
(cÚ¡ 
R•ÏûabË
& 
‹xt
,

625 
št32_t
& 
off£t
,

626 
št32_t
 
lim™
,

627 
UBoŞ
 
šüem’l
) {

628 ià(
off£t
 =ğ
lim™
) {

632 ià(
	`cÚšs
(
U_ETHER
)) {

633  
šüem’l
 ? 
U_PARTIAL_MATCH
 : 
U_MATCH
;

635  
U_MISMATCH
;

638 ià(
¡ršgs
->
	`size
() != 0) {

647 
št32_t
 
i
;

648 
UBoŞ
 
fÜw¬d
 = 
off£t
 < 
lim™
;

653 
UCh¬
 
fœ¡Ch¬
 = 
‹xt
.
	`ch¬At
(
off£t
);

657 
št32_t
 
highW©”L’gth
 = 0;

659 
i
=0; i<
¡ršgs
->
	`size
(); ++i) {

660 cÚ¡ 
UnicodeSŒšg
& 
ŒŸl
 = *(cÚ¡ UnicodeSŒšg*)
¡ršgs
->
	`–em’tAt
(
i
);

667 
UCh¬
 
c
 = 
ŒŸl
.
	`ch¬At
(
fÜw¬d
 ? 0 :rŸl.
	`Ëngth
() - 1);

671 ià(
fÜw¬d
 && 
c
 > 
fœ¡Ch¬
) ;

672 ià(
c
 !ğ
fœ¡Ch¬
) ;

674 
št32_t
 
m©chL’
 = 
	`m©chRe¡
(
‹xt
, 
off£t
, 
lim™
, 
ŒŸl
);

676 ià(
šüem’l
) {

677 
št32_t
 
maxL’
 = 
fÜw¬d
 ? 
lim™
-
off£t
 : offset-limit;

678 ià(
m©chL’
 =ğ
maxL’
) {

680  
U_PARTIAL_MATCH
;

684 ià(
m©chL’
 =ğ
ŒŸl
.
	`Ëngth
()) {

686 ià(
m©chL’
 > 
highW©”L’gth
) {

687 
highW©”L’gth
 = 
m©chL’
;

691 ià(
fÜw¬d
 && 
m©chL’
 < 
highW©”L’gth
) {

700 ià(
highW©”L’gth
 != 0) {

701 
off£t
 +ğ
fÜw¬d
 ? 
highW©”L’gth
 : -highWaterLength;

702  
U_MATCH
;

705  
UnicodeF‹r
::
	`m©ches
(
‹xt
, 
off£t
, 
lim™
, 
šüem’l
);

707 
	}
}

730 
št32_t
 
	gUnicodeS‘
::
	$m©chRe¡
(cÚ¡ 
R•ÏûabË
& 
‹xt
,

731 
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
,

732 cÚ¡ 
UnicodeSŒšg
& 
s
) {

733 
št32_t
 
i
;

734 
št32_t
 
maxL’
;

735 
št32_t
 
¦’
 = 
s
.
	`Ëngth
();

736 ià(
¡¬t
 < 
lim™
) {

737 
maxL’
 = 
lim™
 - 
¡¬t
;

738 ià(
maxL’
 > 
¦’
) maxLen = slen;

739 
i
 = 1; i < 
maxL’
; ++i) {

740 ià(
‹xt
.
	`ch¬At
(
¡¬t
 + 
i
è!ğ
s
.charAt(i))  0;

743 
maxL’
 = 
¡¬t
 - 
lim™
;

744 ià(
maxL’
 > 
¦’
) maxLen = slen;

745 --
¦’
;

746 
i
 = 1; i < 
maxL’
; ++i) {

747 ià(
‹xt
.
	`ch¬At
(
¡¬t
 - 
i
è!ğ
s
.ch¬At(
¦’
 - i))  0;

750  
maxL’
;

751 
	}
}

756 
	gUnicodeS‘
::
	$addM©chS‘To
(
UnicodeS‘
& 
toUniÚTo
) const {

757 
toUniÚTo
.
	`addAÎ
(*
this
);

758 
	}
}

767 
št32_t
 
	gUnicodeS‘
::
	$šdexOf
(
UCh¬32
 
c
) const {

768 ià(
c
 < 
MIN_VALUE
 || c > 
MAX_VALUE
) {

771 
št32_t
 
i
 = 0;

772 
št32_t
 
n
 = 0;

774 
UCh¬32
 
¡¬t
 = 
li¡
[
i
++];

775 ià(
c
 < 
¡¬t
) {

778 
UCh¬32
 
lim™
 = 
li¡
[
i
++];

779 ià(
c
 < 
lim™
) {

780  
n
 + 
c
 - 
¡¬t
;

782 
n
 +ğ
lim™
 - 
¡¬t
;

784 
	}
}

794 
UCh¬32
 
	gUnicodeS‘
::
	$ch¬At
(
št32_t
 
šdex
) const {

795 ià(
šdex
 >= 0) {

799 
št32_t
 
Ën2
 = 
Ën
 & ~1;

800 
št32_t
 
i
=0; i < 
Ën2
;) {

801 
UCh¬32
 
¡¬t
 = 
li¡
[
i
++];

802 
št32_t
 
couÁ
 = 
li¡
[
i
++] - 
¡¬t
;

803 ià(
šdex
 < 
couÁ
) {

804  (
UCh¬32
)(
¡¬t
 + 
šdex
);

806 
šdex
 -ğ
couÁ
;

809  (
UCh¬32
)-1;

810 
	}
}

820 
	gUnicodeS‘
& UnicodeS‘::
	$£t
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

821 
	`ş—r
();

822 
	`com¶em’t
(
¡¬t
, 
’d
);

823  *
this
;

824 
	}
}

837 
	gUnicodeS‘
& UnicodeS‘::
	$add
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

838 ià(
	`pšCodePošt
(
¡¬t
è<…šCodePošt(
’d
)) {

839 
UCh¬32
 
¿nge
[3] = { 
¡¬t
, 
’d
+1, 
UNICODESET_HIGH
 };

840 
	`add
(
¿nge
, 2, 0);

841 } ià(
¡¬t
 =ğ
’d
) {

842 
	`add
(
¡¬t
);

844  *
this
;

845 
	}
}

849 #ifdeà
DEBUG_US_ADD


850 
	~<¡dio.h
>

851 
	$dump
(
UCh¬32
 
c
) {

852 ià(
c
 <= 0xFF) {

853 
	`´štf
("%c", ()
c
);

855 
	`´štf
("U+%04X", 
c
);

857 
	}
}

858 
	$dump
(cÚ¡ 
UCh¬32
* 
li¡
, 
št32_t
 
Ën
) {

859 
	`´štf
("[");

860 
št32_t
 
i
=0; i<
Ën
; ++i) {

861 ià(
i
 !ğ0è
	`´štf
(", ");

862 
	`dump
(
li¡
[
i
]);

864 
	`´štf
("]");

865 
	}
}

873 
	gUnicodeS‘
& UnicodeS‘::
	$add
(
UCh¬32
 
c
) {

877 
št32_t
 
i
 = 
	`fšdCodePošt
(
	`pšCodePošt
(
c
));

880 ià((
i
 & 1è!ğ0 || 
	`isFroz’
(è|| 
	`isBogus
()è *
this
;

894 #ifdeà
DEBUG_US_ADD


895 
	`´štf
("Add of ");

896 
	`dump
(
c
);

897 
	`´štf
(" found‡ˆ%d", 
i
);

898 
	`´štf
(": ");

899 
	`dump
(
li¡
, 
Ën
);

900 
	`´štf
(" => ");

903 ià(
c
 =ğ
li¡
[
i
]-1) {

905 
li¡
[
i
] = 
c
;

907 ià(
c
 =ğ(
UNICODESET_HIGH
 - 1)) {

908 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

909 
	`’su»C­ac™y
(
Ën
+1, 
¡©us
);

910 ià(
	`U_FAILURE
(
¡©us
)) {

911  *
this
;

913 
li¡
[
Ën
++] = 
UNICODESET_HIGH
;

915 ià(
i
 > 0 && 
c
 =ğ
li¡
[i-1]) {

925 
UCh¬32
* 
d¡
 = 
li¡
 + 
i
 - 1;

926 
UCh¬32
* 
¤c
 = 
d¡
 + 2;

927 
UCh¬32
* 
¤şim™
 = 
li¡
 + 
Ën
;

928 
¤c
 < 
¤şim™
è*(
d¡
++) = *(src++);

930 
Ën
 -= 2;

934 ià(
i
 > 0 && 
c
 =ğ
li¡
[i-1]) {

936 
li¡
[
i
-1]++;

953 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

954 
	`’su»C­ac™y
(
Ën
+2, 
¡©us
);

955 ià(
	`U_FAILURE
(
¡©us
)) {

956  *
this
;

962 
UCh¬32
* 
¤c
 = 
li¡
 + 
Ën
;

963 
UCh¬32
* 
d¡
 = 
¤c
 + 2;

964 
UCh¬32
* 
¤şim™
 = 
li¡
 + 
i
;

965 
¤c
 > 
¤şim™
è*(--
d¡
) = *(--src);

967 
li¡
[
i
] = 
c
;

968 
li¡
[
i
+1] = 
c
+1;

969 
Ën
 += 2;

972 #ifdeà
DEBUG_US_ADD


973 
	`dump
(
li¡
, 
Ën
);

974 
	`´štf
("\n");

976 
i
=1; i<
Ën
; ++i) {

977 ià(
li¡
[
i
] <=†ist[i-1]) {

979 
	`´štf
("ERROR:†ist has been corrupted\n");

980 
	`ex™
(1);

985 
	`»Ëa£P©‹º
();

986  *
this
;

987 
	}
}

998 
	gUnicodeS‘
& UnicodeS‘::
	$add
(cÚ¡ 
UnicodeSŒšg
& 
s
) {

999 ià(
s
.
	`Ëngth
(è=ğ0 || 
	`isFroz’
(è|| 
	`isBogus
()è *
this
;

1000 
št32_t
 
ı
 = 
	`g‘SšgËCP
(
s
);

1001 ià(
ı
 < 0) {

1002 ià(!
¡ršgs
->
	`cÚšs
((*è&
s
)) {

1003 
	`_add
(
s
);

1004 
	`»Ëa£P©‹º
();

1007 
	`add
((
UCh¬32
)
ı
);

1009  *
this
;

1010 
	}
}

1017 
	gUnicodeS‘
::
	$_add
(cÚ¡ 
UnicodeSŒšg
& 
s
) {

1018 ià(
	`isFroz’
(è|| 
	`isBogus
()) {

1021 
UnicodeSŒšg
* 
t
 = 
Ãw
 
	`UnicodeSŒšg
(
s
);

1022 ià(
t
 =ğ
NULL
) {

1023 
	`£tToBogus
();

1026 
UE¼ÜCode
 
ec
 = 
U_ZERO_ERROR
;

1027 
¡ršgs
->
	`sÜ‹dIn£¹
(
t
, 
com·»UnicodeSŒšg
, 
ec
);

1028 ià(
	`U_FAILURE
(
ec
)) {

1029 
	`£tToBogus
();

1030 
d–‘e
 
t
;

1032 
	}
}

1039 
št32_t
 
	gUnicodeS‘
::
	$g‘SšgËCP
(cÚ¡ 
UnicodeSŒšg
& 
s
) {

1043 ià(
s
.
	`Ëngth
() > 2)  -1;

1044 ià(
s
.
	`Ëngth
(è=ğ1è s.
	`ch¬At
(0);

1047 
UCh¬32
 
ı
 = 
s
.
	`ch¬32At
(0);

1048 ià(
ı
 > 0xFFFF) {

1049  
ı
;

1052 
	}
}

1060 
	gUnicodeS‘
& UnicodeS‘::
	$addAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
) {

1061 
UCh¬32
 
ı
;

1062 
št32_t
 
i
 = 0; i < 
s
.
	`Ëngth
(); i +ğ
	`UTF_CHAR_LENGTH
(
ı
)) {

1063 
ı
 = 
s
.
	`ch¬32At
(
i
);

1064 
	`add
(
ı
);

1066  *
this
;

1067 
	}
}

1075 
	gUnicodeS‘
& UnicodeS‘::
	$»šAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
) {

1076 
UnicodeS‘
 
£t
;

1077 
£t
.
	`addAÎ
(
s
);

1078 
	`»šAÎ
(
£t
);

1079  *
this
;

1080 
	}
}

1088 
	gUnicodeS‘
& UnicodeS‘::
	$com¶em’tAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
) {

1089 
UnicodeS‘
 
£t
;

1090 
£t
.
	`addAÎ
(
s
);

1091 
	`com¶em’tAÎ
(
£t
);

1092  *
this
;

1093 
	}
}

1101 
	gUnicodeS‘
& UnicodeS‘::
	$»moveAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
) {

1102 
UnicodeS‘
 
£t
;

1103 
£t
.
	`addAÎ
(
s
);

1104 
	`»moveAÎ
(
£t
);

1105  *
this
;

1106 
	}
}

1108 
	gUnicodeS‘
& UnicodeS‘::
	$»moveAÎSŒšgs
() {

1109 
¡ršgs
->
	`»moveAÎEËm’ts
();

1110  *
this
;

1111 
	}
}

1120 
UnicodeS‘
* 
U_EXPORT2
 
	gUnicodeS‘
::
	$ü—‹From
(cÚ¡ 
UnicodeSŒšg
& 
s
) {

1121 
UnicodeS‘
 *
£t
 = 
Ãw
 
	`UnicodeS‘
();

1122 ià(
£t
 !ğ
NULL
) {

1123 
£t
->
	`add
(
s
);

1125  
£t
;

1126 
	}
}

1134 
UnicodeS‘
* 
U_EXPORT2
 
	gUnicodeS‘
::
	$ü—‹FromAÎ
(cÚ¡ 
UnicodeSŒšg
& 
s
) {

1135 
UnicodeS‘
 *
£t
 = 
Ãw
 
	`UnicodeS‘
();

1136 ià(
£t
 !ğ
NULL
) {

1137 
£t
->
	`addAÎ
(
s
);

1139  
£t
;

1140 
	}
}

1152 
	gUnicodeS‘
& UnicodeS‘::
	$»š
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

1153 ià(
	`pšCodePošt
(
¡¬t
è<ğpšCodePošt(
’d
)) {

1154 
UCh¬32
 
¿nge
[3] = { 
¡¬t
, 
’d
+1, 
UNICODESET_HIGH
 };

1155 
	`»š
(
¿nge
, 2, 0);

1157 
	`ş—r
();

1159  *
this
;

1160 
	}
}

1162 
	gUnicodeS‘
& UnicodeS‘::
	$»š
(
UCh¬32
 
c
) {

1163  
	`»š
(
c
, c);

1164 
	}
}

1177 
	gUnicodeS‘
& UnicodeS‘::
	$»move
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

1178 ià(
	`pšCodePošt
(
¡¬t
è<ğpšCodePošt(
’d
)) {

1179 
UCh¬32
 
¿nge
[3] = { 
¡¬t
, 
’d
+1, 
UNICODESET_HIGH
 };

1180 
	`»š
(
¿nge
, 2, 2);

1182  *
this
;

1183 
	}
}

1190 
	gUnicodeS‘
& UnicodeS‘::
	$»move
(
UCh¬32
 
c
) {

1191  
	`»move
(
c
, c);

1192 
	}
}

1201 
	gUnicodeS‘
& UnicodeS‘::
	$»move
(cÚ¡ 
UnicodeSŒšg
& 
s
) {

1202 ià(
s
.
	`Ëngth
(è=ğ0 || 
	`isFroz’
(è|| 
	`isBogus
()è *
this
;

1203 
št32_t
 
ı
 = 
	`g‘SšgËCP
(
s
);

1204 ià(
ı
 < 0) {

1205 
¡ršgs
->
	`»moveEËm’t
((*è&
s
);

1206 
	`»Ëa£P©‹º
();

1208 
	`»move
((
UCh¬32
)
ı
, (UChar32)cp);

1210  *
this
;

1211 
	}
}

1224 
	gUnicodeS‘
& UnicodeS‘::
	$com¶em’t
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

1225 ià(
	`isFroz’
(è|| 
	`isBogus
()) {

1226  *
this
;

1228 ià(
	`pšCodePošt
(
¡¬t
è<ğpšCodePošt(
’d
)) {

1229 
UCh¬32
 
¿nge
[3] = { 
¡¬t
, 
’d
+1, 
UNICODESET_HIGH
 };

1230 
	`exşusiveOr
(
¿nge
, 2, 0);

1232 
	`»Ëa£P©‹º
();

1233  *
this
;

1234 
	}
}

1236 
	gUnicodeS‘
& UnicodeS‘::
	$com¶em’t
(
UCh¬32
 
c
) {

1237  
	`com¶em’t
(
c
, c);

1238 
	}
}

1244 
	gUnicodeS‘
& UnicodeS‘::
	$com¶em’t
() {

1245 ià(
	`isFroz’
(è|| 
	`isBogus
()) {

1246  *
this
;

1248 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

1249 ià(
li¡
[0] =ğ
UNICODESET_LOW
) {

1250 
	`’su»BufãrC­ac™y
(
Ën
-1, 
¡©us
);

1251 ià(
	`U_FAILURE
(
¡©us
)) {

1252  *
this
;

1254 
	`u´v_memıy
(
bufãr
, 
li¡
 + 1, (
Ën
-1)*(
UCh¬32
));

1255 --
Ën
;

1257 
	`’su»BufãrC­ac™y
(
Ën
+1, 
¡©us
);

1258 ià(
	`U_FAILURE
(
¡©us
)) {

1259  *
this
;

1261 
	`u´v_memıy
(
bufãr
 + 1, 
li¡
, 
Ën
*(
UCh¬32
));

1262 
bufãr
[0] = 
UNICODESET_LOW
;

1263 ++
Ën
;

1265 
	`sw­Bufãrs
();

1266 
	`»Ëa£P©‹º
();

1267  *
this
;

1268 
	}
}

1278 
	gUnicodeS‘
& UnicodeS‘::
	$com¶em’t
(cÚ¡ 
UnicodeSŒšg
& 
s
) {

1279 ià(
s
.
	`Ëngth
(è=ğ0 || 
	`isFroz’
(è|| 
	`isBogus
()è *
this
;

1280 
št32_t
 
ı
 = 
	`g‘SšgËCP
(
s
);

1281 ià(
ı
 < 0) {

1282 ià(
¡ršgs
->
	`cÚšs
((*è&
s
)) {

1283 
¡ršgs
->
	`»moveEËm’t
((*è&
s
);

1285 
	`_add
(
s
);

1287 
	`»Ëa£P©‹º
();

1289 
	`com¶em’t
((
UCh¬32
)
ı
, (UChar32)cp);

1291  *
this
;

1292 
	}
}

1304 
	gUnicodeS‘
& UnicodeS‘::
	$addAÎ
(cÚ¡ 
UnicodeS‘
& 
c
) {

1305 iàĞ
c
.
Ën
>0 && c.
li¡
!=
NULL
 ) {

1306 
	`add
(
c
.
li¡
, c.
Ën
, 0);

1310 iàĞ
c
.
¡ršgs
!=
NULL
 ) {

1311 
št32_t
 
i
=0; i<
c
.
¡ršgs
->
	`size
(); ++i) {

1312 cÚ¡ 
UnicodeSŒšg
* 
s
 = (cÚ¡ UnicodeSŒšg*)
c
.
¡ršgs
->
	`–em’tAt
(
i
);

1313 ià(!
¡ršgs
->
	`cÚšs
((*è
s
)) {

1314 
	`_add
(*
s
);

1318  *
this
;

1319 
	}
}

1330 
	gUnicodeS‘
& UnicodeS‘::
	$»šAÎ
(cÚ¡ 
UnicodeS‘
& 
c
) {

1331 ià(
	`isFroz’
(è|| 
	`isBogus
()) {

1332  *
this
;

1334 
	`»š
(
c
.
li¡
, c.
Ën
, 0);

1335 
¡ršgs
->
	`»šAÎ
(*
c
.strings);

1336  *
this
;

1337 
	}
}

1348 
	gUnicodeS‘
& UnicodeS‘::
	$»moveAÎ
(cÚ¡ 
UnicodeS‘
& 
c
) {

1349 ià(
	`isFroz’
(è|| 
	`isBogus
()) {

1350  *
this
;

1352 
	`»š
(
c
.
li¡
, c.
Ën
, 2);

1353 
¡ršgs
->
	`»moveAÎ
(*
c
.strings);

1354  *
this
;

1355 
	}
}

1365 
	gUnicodeS‘
& UnicodeS‘::
	$com¶em’tAÎ
(cÚ¡ 
UnicodeS‘
& 
c
) {

1366 ià(
	`isFroz’
(è|| 
	`isBogus
()) {

1367  *
this
;

1369 
	`exşusiveOr
(
c
.
li¡
, c.
Ën
, 0);

1371 
št32_t
 
i
=0; i<
c
.
¡ršgs
->
	`size
(); ++i) {

1372 * 
e
 = 
c
.
¡ršgs
->
	`–em’tAt
(
i
);

1373 ià(!
¡ršgs
->
	`»moveEËm’t
(
e
)) {

1374 
	`_add
(*(cÚ¡ 
UnicodeSŒšg
*)
e
);

1377  *
this
;

1378 
	}
}

1384 
	gUnicodeS‘
& UnicodeS‘::
	$ş—r
() {

1385 ià(
	`isFroz’
()) {

1386  *
this
;

1388 ià(
li¡
 !ğ
NULL
) {

1389 
li¡
[0] = 
UNICODESET_HIGH
;

1391 
Ën
 = 1;

1392 
	`»Ëa£P©‹º
();

1393 ià(
¡ršgs
 !ğ
NULL
) {

1394 
¡ršgs
->
	`»moveAÎEËm’ts
();

1396 ià(
li¡
 !ğ
NULL
 && 
¡ršgs
 != NULL) {

1398 
fFÏgs
 = 0;

1400  *
this
;

1401 
	}
}

1409 
št32_t
 
	gUnicodeS‘
::
	$g‘RªgeCouÁ
() const {

1410  
Ën
/2;

1411 
	}
}

1419 
UCh¬32
 
	gUnicodeS‘
::
	$g‘RªgeS¹
(
št32_t
 
šdex
) const {

1420  
li¡
[
šdex
*2];

1421 
	}
}

1429 
UCh¬32
 
	gUnicodeS‘
::
	$g‘RªgeEnd
(
št32_t
 
šdex
) const {

1430  
li¡
[
šdex
*2 + 1] - 1;

1431 
	}
}

1433 
št32_t
 
	gUnicodeS‘
::
	$g‘SŒšgCouÁ
() const {

1434  
¡ršgs
->
	`size
();

1435 
	}
}

1437 cÚ¡ 
UnicodeSŒšg
* 
	gUnicodeS‘
::
	$g‘SŒšg
(
št32_t
 
šdex
) const {

1438  (cÚ¡ 
UnicodeSŒšg
*è
¡ršgs
->
	`–em’tAt
(
šdex
);

1439 
	}
}

1445 
	gUnicodeS‘
& UnicodeS‘::
	$com·ù
() {

1446 ià(
	`isFroz’
(è|| 
	`isBogus
()) {

1447  *
this
;

1450 ià(
bufãr
 !ğ
NULL
) {

1451 
	`u´v_ä“
(
bufãr
);

1452 
bufãr
 = 
NULL
;

1454 ià(
Ën
 < 
ÿ·c™y
) {

1457 
št32_t
 
ÃwC­ac™y
 = 
Ën
 + (len == 0);

1458 
UCh¬32
* 
‹mp
 = (UCh¬32*è
	`u´v_»®loc
(
li¡
, (UCh¬32è* 
ÃwC­ac™y
);

1459 ià(
‹mp
) {

1460 
li¡
 = 
‹mp
;

1461 
ÿ·c™y
 = 
ÃwC­ac™y
;

1466  *
this
;

1467 
	}
}

1469 
št32_t
 
	gUnicodeS‘
::
	$£rŸlize
(
ušt16_t
 *
de¡
, 
št32_t
 
de¡C­ac™y
, 
UE¼ÜCode
& 
ec
) const {

1470 
št32_t
 
bmpL’gth
, 
Ëngth
, 
de¡L’gth
;

1472 ià(
	`U_FAILURE
(
ec
)) {

1476 ià(
de¡C­ac™y
<0 || (de¡C­ac™y>0 && 
de¡
==
NULL
)) {

1477 
ec
=
U_ILLEGAL_ARGUMENT_ERROR
;

1482 
Ëngth
=
this
->
Ën
-1;

1484 ià(
Ëngth
==0) {

1486 ià(
de¡C­ac™y
>0) {

1487 *
de¡
=0;

1489 
ec
=
U_BUFFER_OVERFLOW_ERROR
;

1495 ià(
this
->
li¡
[
Ëngth
-1]<=0xffff) {

1497 
bmpL’gth
=
Ëngth
;

1498 } ià(
this
->
li¡
[0]>=0x10000) {

1500 
bmpL’gth
=0;

1501 
Ëngth
*=2;

1504 
bmpL’gth
=0; bmpL’gth<
Ëngth
 && 
this
->
li¡
[bmpLength]<=0xffff; ++bmpLength) {}

1505 
Ëngth
=
bmpL’gth
+2*(length-bmpLength);

1509 ià(
Ëngth
>0x7fff) {

1511 
ec
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1521 
de¡L’gth
=
Ëngth
+(Ö’gth>
bmpL’gth
)?2:1);

1522 ià(
de¡L’gth
<=
de¡C­ac™y
) {

1523 cÚ¡ 
UCh¬32
 *
p
;

1524 
št32_t
 
i
;

1526 *
de¡
=(
ušt16_t
)
Ëngth
;

1527 ià(
Ëngth
>
bmpL’gth
) {

1528 *
de¡
|=0x8000;

1529 *++
de¡
=(
ušt16_t
)
bmpL’gth
;

1531 ++
de¡
;

1534 
p
=
this
->
li¡
;

1535 
i
=0; i<
bmpL’gth
; ++i) {

1536 *
de¡
++=(
ušt16_t
)*
p
++;

1540 ; 
i
<
Ëngth
; i+=2) {

1541 *
de¡
++=(
ušt16_t
)(*
p
>>16);

1542 *
de¡
++=(
ušt16_t
)*
p
++;

1545 
ec
=
U_BUFFER_OVERFLOW_ERROR
;

1547  
de¡L’gth
;

1548 
	}
}

1557 
UBoŞ
 
	gUnicodeS‘
::
	$®loÿ‹SŒšgs
(
UE¼ÜCode
 &
¡©us
) {

1558 ià(
	`U_FAILURE
(
¡©us
)) {

1559  
FALSE
;

1561 
¡ršgs
 = 
Ãw
 
	`UVeùÜ
(
uhash_d–‘eUnicodeSŒšg
,

1562 
uhash_com·»UnicodeSŒšg
, 1, 
¡©us
);

1563 ià(
¡ršgs
 =ğ
NULL
) {

1564 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1565  
FALSE
;

1567 ià(
	`U_FAILURE
(
¡©us
)) {

1568 
d–‘e
 
¡ršgs
;

1569 
¡ršgs
 = 
NULL
;

1570  
FALSE
;

1572  
TRUE
;

1573 
	}
}

1575 
	gUnicodeS‘
::
	$’su»C­ac™y
(
št32_t
 
ÃwL’
, 
UE¼ÜCode
& 
ec
) {

1576 ià(
ÃwL’
 <ğ
ÿ·c™y
)

1578 
UCh¬32
* 
‹mp
 = (UCh¬32*è
	`u´v_»®loc
(
li¡
, (UCh¬32è* (
ÃwL’
 + 
GROW_EXTRA
));

1579 ià(
‹mp
 =ğ
NULL
) {

1580 
ec
 = 
U_MEMORY_ALLOCATION_ERROR
;

1581 
	`£tToBogus
();

1584 
li¡
 = 
‹mp
;

1585 
ÿ·c™y
 = 
ÃwL’
 + 
GROW_EXTRA
;

1587 
	}
}

1589 
	gUnicodeS‘
::
	$’su»BufãrC­ac™y
(
št32_t
 
ÃwL’
, 
UE¼ÜCode
& 
ec
) {

1590 ià(
bufãr
 !ğ
NULL
 && 
ÃwL’
 <ğ
bufãrC­ac™y
)

1592 
UCh¬32
* 
‹mp
 = (UCh¬32*è
	`u´v_»®loc
(
bufãr
, (UCh¬32è* (
ÃwL’
 + 
GROW_EXTRA
));

1593 ià(
‹mp
 =ğ
NULL
) {

1594 
ec
 = 
U_MEMORY_ALLOCATION_ERROR
;

1595 
	`£tToBogus
();

1598 
bufãr
 = 
‹mp
;

1599 
bufãrC­ac™y
 = 
ÃwL’
 + 
GROW_EXTRA
;

1601 
	}
}

1606 
	gUnicodeS‘
::
	$sw­Bufãrs
() {

1608 
UCh¬32
* 
‹mp
 = 
li¡
;

1609 
li¡
 = 
bufãr
;

1610 
bufãr
 = 
‹mp
;

1612 
št32_t
 
c
 = 
ÿ·c™y
;

1613 
ÿ·c™y
 = 
bufãrC­ac™y
;

1614 
bufãrC­ac™y
 = 
c
;

1615 
	}
}

1617 
	gUnicodeS‘
::
	$£tToBogus
() {

1618 
	`ş—r
();

1619 
fFÏgs
 = 
kIsBogus
;

1620 
	}
}

1626 
šlše
 
UCh¬32
 
	$max
(
UCh¬32
 
a
, UCh¬32 
b
) {

1627  (
a
 > 
b
) ?‡ : b;

1628 
	}
}

1633 
	gUnicodeS‘
::
	$exşusiveOr
(cÚ¡ 
UCh¬32
* 
Ùh”
, 
št32_t
 
Ùh”L’
, 
št8_t
 
pŞ¬™y
) {

1634 ià(
	`isFroz’
(è|| 
	`isBogus
()) {

1637 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

1638 
	`’su»BufãrC­ac™y
(
Ën
 + 
Ùh”L’
, 
¡©us
);

1639 ià(
	`U_FAILURE
(
¡©us
)) {

1643 
št32_t
 
i
 = 0, 
j
 = 0, 
k
 = 0;

1644 
UCh¬32
 
a
 = 
li¡
[
i
++];

1645 
UCh¬32
 
b
;

1646 ià(
pŞ¬™y
 == 1 ||…olarity == 2) {

1647 
b
 = 
UNICODESET_LOW
;

1648 ià(
Ùh”
[
j
] =ğ
UNICODESET_LOW
) {

1649 ++
j
;

1650 
b
 = 
Ùh”
[
j
];

1653 
b
 = 
Ùh”
[
j
++];

1658 ià(
a
 < 
b
) {

1659 
bufãr
[
k
++] = 
a
;

1660 
a
 = 
li¡
[
i
++];

1661 } ià(
b
 < 
a
) {

1662 
bufãr
[
k
++] = 
b
;

1663 
b
 = 
Ùh”
[
j
++];

1664 } ià(
a
 !ğ
UNICODESET_HIGH
) {

1666 
a
 = 
li¡
[
i
++];

1667 
b
 = 
Ùh”
[
j
++];

1669 
bufãr
[
k
++] = 
UNICODESET_HIGH
;

1670 
Ën
 = 
k
;

1674 
	`sw­Bufãrs
();

1675 
	`»Ëa£P©‹º
();

1676 
	}
}

1683 
	gUnicodeS‘
::
	$add
(cÚ¡ 
UCh¬32
* 
Ùh”
, 
št32_t
 
Ùh”L’
, 
št8_t
 
pŞ¬™y
) {

1684 ià(
	`isFroz’
(è|| 
	`isBogus
(è|| 
Ùh”
==
NULL
) {

1687 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

1688 
	`’su»BufãrC­ac™y
(
Ën
 + 
Ùh”L’
, 
¡©us
);

1689 ià(
	`U_FAILURE
(
¡©us
)) {

1693 
št32_t
 
i
 = 0, 
j
 = 0, 
k
 = 0;

1694 
UCh¬32
 
a
 = 
li¡
[
i
++];

1695 
UCh¬32
 
b
 = 
Ùh”
[
j
++];

1699 
pŞ¬™y
) {

1701 ià(
a
 < 
b
) {

1703 ià(
k
 > 0 && 
a
 <ğ
bufãr
[k-1]) {

1705 
a
 = 
	`max
(
li¡
[
i
], 
bufãr
[--
k
]);

1708 
bufãr
[
k
++] = 
a
;

1709 
a
 = 
li¡
[
i
];

1711 
i
++;

1712 
pŞ¬™y
 ^= 1;

1713 } ià(
b
 < 
a
) {

1714 ià(
k
 > 0 && 
b
 <ğ
bufãr
[k-1]) {

1715 
b
 = 
	`max
(
Ùh”
[
j
], 
bufãr
[--
k
]);

1717 
bufãr
[
k
++] = 
b
;

1718 
b
 = 
Ùh”
[
j
];

1720 
j
++;

1721 
pŞ¬™y
 ^= 2;

1723 ià(
a
 =ğ
UNICODESET_HIGH
è
loİ_’d
;

1726 ià(
k
 > 0 && 
a
 <ğ
bufãr
[k-1]) {

1727 
a
 = 
	`max
(
li¡
[
i
], 
bufãr
[--
k
]);

1730 
bufãr
[
k
++] = 
a
;

1731 
a
 = 
li¡
[
i
];

1733 
i
++;

1734 
pŞ¬™y
 ^= 1;

1735 
b
 = 
Ùh”
[
j
++];

1736 
pŞ¬™y
 ^= 2;

1740 ià(
b
 <ğ
a
) {

1741 ià(
a
 =ğ
UNICODESET_HIGH
è
loİ_’d
;

1742 
bufãr
[
k
++] = 
a
;

1744 ià(
b
 =ğ
UNICODESET_HIGH
è
loİ_’d
;

1745 
bufãr
[
k
++] = 
b
;

1747 
a
 = 
li¡
[
i
++];

1748 
pŞ¬™y
 ^= 1;

1749 
b
 = 
Ùh”
[
j
++];

1750 
pŞ¬™y
 ^= 2;

1753 ià(
a
 < 
b
) {

1754 
bufãr
[
k
++] = 
a
;‡ = 
li¡
[
i
++]; 
pŞ¬™y
 ^= 1;

1755 } ià(
b
 < 
a
) {

1756 
b
 = 
Ùh”
[
j
++];

1757 
pŞ¬™y
 ^= 2;

1759 ià(
a
 =ğ
UNICODESET_HIGH
è
loİ_’d
;

1760 
a
 = 
li¡
[
i
++];

1761 
pŞ¬™y
 ^= 1;

1762 
b
 = 
Ùh”
[
j
++];

1763 
pŞ¬™y
 ^= 2;

1767 ià(
b
 < 
a
) {

1768 
bufãr
[
k
++] = 
b
;

1769 
b
 = 
Ùh”
[
j
++];

1770 
pŞ¬™y
 ^= 2;

1771 } ià(
a
 < 
b
) {

1772 
a
 = 
li¡
[
i
++];

1773 
pŞ¬™y
 ^= 1;

1775 ià(
a
 =ğ
UNICODESET_HIGH
è
loİ_’d
;

1776 
a
 = 
li¡
[
i
++];

1777 
pŞ¬™y
 ^= 1;

1778 
b
 = 
Ùh”
[
j
++];

1779 
pŞ¬™y
 ^= 2;

1784 
loİ_’d
:

1785 
bufãr
[
k
++] = 
UNICODESET_HIGH
;

1786 
Ën
 = 
k
;

1787 
	`sw­Bufãrs
();

1788 
	`»Ëa£P©‹º
();

1789 
	}
}

1796 
	gUnicodeS‘
::
	$»š
(cÚ¡ 
UCh¬32
* 
Ùh”
, 
št32_t
 
Ùh”L’
, 
št8_t
 
pŞ¬™y
) {

1797 ià(
	`isFroz’
(è|| 
	`isBogus
()) {

1800 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

1801 
	`’su»BufãrC­ac™y
(
Ën
 + 
Ùh”L’
, 
¡©us
);

1802 ià(
	`U_FAILURE
(
¡©us
)) {

1806 
št32_t
 
i
 = 0, 
j
 = 0, 
k
 = 0;

1807 
UCh¬32
 
a
 = 
li¡
[
i
++];

1808 
UCh¬32
 
b
 = 
Ùh”
[
j
++];

1812 
pŞ¬™y
) {

1814 ià(
a
 < 
b
) {

1815 
a
 = 
li¡
[
i
++];

1816 
pŞ¬™y
 ^= 1;

1817 } ià(
b
 < 
a
) {

1818 
b
 = 
Ùh”
[
j
++];

1819 
pŞ¬™y
 ^= 2;

1821 ià(
a
 =ğ
UNICODESET_HIGH
è
loİ_’d
;

1822 
bufãr
[
k
++] = 
a
;

1823 
a
 = 
li¡
[
i
++];

1824 
pŞ¬™y
 ^= 1;

1825 
b
 = 
Ùh”
[
j
++];

1826 
pŞ¬™y
 ^= 2;

1830 ià(
a
 < 
b
) {

1831 
bufãr
[
k
++] = 
a
;

1832 
a
 = 
li¡
[
i
++];

1833 
pŞ¬™y
 ^= 1;

1834 } ià(
b
 < 
a
) {

1835 
bufãr
[
k
++] = 
b
;

1836 
b
 = 
Ùh”
[
j
++];

1837 
pŞ¬™y
 ^= 2;

1839 ià(
a
 =ğ
UNICODESET_HIGH
è
loİ_’d
;

1840 
bufãr
[
k
++] = 
a
;

1841 
a
 = 
li¡
[
i
++];

1842 
pŞ¬™y
 ^= 1;

1843 
b
 = 
Ùh”
[
j
++];

1844 
pŞ¬™y
 ^= 2;

1848 ià(
a
 < 
b
) {

1849 
a
 = 
li¡
[
i
++];

1850 
pŞ¬™y
 ^= 1;

1851 } ià(
b
 < 
a
) {

1852 
bufãr
[
k
++] = 
b
;

1853 
b
 = 
Ùh”
[
j
++];

1854 
pŞ¬™y
 ^= 2;

1856 ià(
a
 =ğ
UNICODESET_HIGH
è
loİ_’d
;

1857 
a
 = 
li¡
[
i
++];

1858 
pŞ¬™y
 ^= 1;

1859 
b
 = 
Ùh”
[
j
++];

1860 
pŞ¬™y
 ^= 2;

1864 ià(
b
 < 
a
) {

1865 
b
 = 
Ùh”
[
j
++];

1866 
pŞ¬™y
 ^= 2;

1867 } ià(
a
 < 
b
) {

1868 
bufãr
[
k
++] = 
a
;

1869 
a
 = 
li¡
[
i
++];

1870 
pŞ¬™y
 ^= 1;

1872 ià(
a
 =ğ
UNICODESET_HIGH
è
loİ_’d
;

1873 
a
 = 
li¡
[
i
++];

1874 
pŞ¬™y
 ^= 1;

1875 
b
 = 
Ùh”
[
j
++];

1876 
pŞ¬™y
 ^= 2;

1881 
loİ_’d
:

1882 
bufãr
[
k
++] = 
UNICODESET_HIGH
;

1883 
Ën
 = 
k
;

1884 
	`sw­Bufãrs
();

1885 
	`»Ëa£P©‹º
();

1886 
	}
}

1892 
	gUnicodeS‘
::
	$_­³ndToP©
(
UnicodeSŒšg
& 
buf
, cÚ¡ UnicodeSŒšg& 
s
, 
UBoŞ


1893 
esÿ³UÅršbË
) {

1894 
UCh¬32
 
ı
;

1895 
št32_t
 
i
 = 0; i < 
s
.
	`Ëngth
(); i +ğ
	`UTF_CHAR_LENGTH
(
ı
)) {

1896 
	`_­³ndToP©
(
buf
, 
ı
 = 
s
.
	`ch¬32At
(
i
), 
esÿ³UÅršbË
);

1898 
	}
}

1904 
	gUnicodeS‘
::
	$_­³ndToP©
(
UnicodeSŒšg
& 
buf
, 
UCh¬32
 
c
, 
UBoŞ


1905 
esÿ³UÅršbË
) {

1906 ià(
esÿ³UÅršbË
 && 
ICU_Ut™y
::
	`isUÅršbË
(
c
)) {

1909 ià(
ICU_Ut™y
::
	`esÿ³UÅršbË
(
buf
, 
c
)) {

1914 
c
) {

1915 
SET_OPEN
:

1916 
SET_CLOSE
:

1917 
HYPHEN
:

1918 
COMPLEMENT
:

1919 
INTERSECTION
:

1920 
BACKSLASH
:

1921 
OPEN_BRACE
:

1922 
CLOSE_BRACE
:

1923 
COLON
:

1924 
SymbŞTabË
::
SYMBOL_REF
:

1925 
buf
.
	`­³nd
(
BACKSLASH
);

1929 ià(
	`u´v_isRuËWh™eS·û
(
c
)) {

1930 
buf
.
	`­³nd
(
BACKSLASH
);

1934 
buf
.
	`­³nd
(
c
);

1935 
	}
}

1942 
	gUnicodeSŒšg
& 
	gUnicodeS‘
::
	$_toP©‹º
(
UnicodeSŒšg
& 
»suÉ
,

1943 
UBoŞ
 
esÿ³UÅršbË
) const

1945 ià(
·t
 !ğ
NULL
) {

1946 
št32_t
 
i
;

1947 
št32_t
 
back¦ashCouÁ
 = 0;

1948 
i
=0; i<
·tL’
; ) {

1949 
UCh¬32
 
c
;

1950 
	`U16_NEXT
(
·t
, 
i
, 
·tL’
, 
c
);

1951 ià(
esÿ³UÅršbË
 && 
ICU_Ut™y
::
	`isUÅršbË
(
c
)) {

1956 ià((
back¦ashCouÁ
 % 2) == 1) {

1957 
»suÉ
.
	`Œunÿ‹
ÔesuÉ.
	`Ëngth
() - 1);

1959 
ICU_Ut™y
::
	`esÿ³UÅršbË
(
»suÉ
, 
c
);

1960 
back¦ashCouÁ
 = 0;

1962 
»suÉ
.
	`­³nd
(
c
);

1963 ià(
c
 =ğ
BACKSLASH
) {

1964 ++
back¦ashCouÁ
;

1966 
back¦ashCouÁ
 = 0;

1970  
»suÉ
;

1973  
	`_g’”©eP©‹º
(
»suÉ
, 
esÿ³UÅršbË
);

1974 
	}
}

1981 
	gUnicodeSŒšg
& 
	gUnicodeS‘
::
	$toP©‹º
(
UnicodeSŒšg
& 
»suÉ
,

1982 
UBoŞ
 
esÿ³UÅršbË
) const

1984 
»suÉ
.
	`Œunÿ‹
(0);

1985  
	`_toP©‹º
(
»suÉ
, 
esÿ³UÅršbË
);

1986 
	}
}

1993 
	gUnicodeSŒšg
& 
	gUnicodeS‘
::
	$_g’”©eP©‹º
(
UnicodeSŒšg
& 
»suÉ
,

1994 
UBoŞ
 
esÿ³UÅršbË
) const

1996 
»suÉ
.
	`­³nd
(
SET_OPEN
);

2008 
št32_t
 
couÁ
 = 
	`g‘RªgeCouÁ
();

2013 ià(
couÁ
 > 1 &&

2014 
	`g‘RªgeS¹
(0è=ğ
MIN_VALUE
 &&

2015 
	`g‘RªgeEnd
(
couÁ
-1è=ğ
MAX_VALUE
) {

2018 
»suÉ
.
	`­³nd
(
COMPLEMENT
);

2020 
št32_t
 
i
 = 1; i < 
couÁ
; ++i) {

2021 
UCh¬32
 
¡¬t
 = 
	`g‘RªgeEnd
(
i
-1)+1;

2022 
UCh¬32
 
’d
 = 
	`g‘RªgeS¹
(
i
)-1;

2023 
	`_­³ndToP©
(
»suÉ
, 
¡¬t
, 
esÿ³UÅršbË
);

2024 ià(
¡¬t
 !ğ
’d
) {

2025 ià((
¡¬t
+1è!ğ
’d
) {

2026 
»suÉ
.
	`­³nd
(
HYPHEN
);

2028 
	`_­³ndToP©
(
»suÉ
, 
’d
, 
esÿ³UÅršbË
);

2035 
št32_t
 
i
 = 0; i < 
couÁ
; ++i) {

2036 
UCh¬32
 
¡¬t
 = 
	`g‘RªgeS¹
(
i
);

2037 
UCh¬32
 
’d
 = 
	`g‘RªgeEnd
(
i
);

2038 
	`_­³ndToP©
(
»suÉ
, 
¡¬t
, 
esÿ³UÅršbË
);

2039 ià(
¡¬t
 !ğ
’d
) {

2040 ià((
¡¬t
+1è!ğ
’d
) {

2041 
»suÉ
.
	`­³nd
(
HYPHEN
);

2043 
	`_­³ndToP©
(
»suÉ
, 
’d
, 
esÿ³UÅršbË
);

2048 
št32_t
 
i
 = 0; i<
¡ršgs
->
	`size
(); ++i) {

2049 
»suÉ
.
	`­³nd
(
OPEN_BRACE
);

2050 
	`_­³ndToP©
(
»suÉ
,

2051 *(cÚ¡ 
UnicodeSŒšg
*è
¡ršgs
->
	`–em’tAt
(
i
),

2052 
esÿ³UÅršbË
);

2053 
»suÉ
.
	`­³nd
(
CLOSE_BRACE
);

2055  
»suÉ
.
	`­³nd
(
SET_CLOSE
);

2056 
	}
}

2061 
	gUnicodeS‘
::
	$»Ëa£P©‹º
() {

2062 ià(
·t
) {

2063 
	`u´v_ä“
(
·t
);

2064 
·t
 = 
NULL
;

2065 
·tL’
 = 0;

2067 
	}
}

2072 
	gUnicodeS‘
::
	$£tP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
ÃwP©
) {

2073 
	`»Ëa£P©‹º
();

2074 
št32_t
 
ÃwP©L’
 = 
ÃwP©
.
	`Ëngth
();

2075 
·t
 = (
UCh¬
 *)
	`u´v_m®loc
((
ÃwP©L’
 + 1) * (UChar));

2076 ià(
·t
) {

2077 
·tL’
 = 
ÃwP©L’
;

2078 
ÃwP©
.
	`exŒaùB‘w“n
(0, 
·tL’
, 
·t
);

2079 
·t
[
·tL’
] = 0;

2083 
	}
}

2085 
UnicodeFunùÜ
 *
	gUnicodeS‘
::
	$ä“ze
() {

2086 if(!
	`isFroz’
(è&& !
	`isBogus
()) {

2092 ià(
bufãr
 !ğ
NULL
) {

2093 
	`u´v_ä“
(
bufãr
);

2094 
bufãr
 = 
NULL
;

2096 ià(
ÿ·c™y
 > (
Ën
 + 
GROW_EXTRA
)) {

2099 
ÿ·c™y
 = 
Ën
 + (len == 0);

2100 
li¡
 = (
UCh¬32
*è
	`u´v_»®loc
Öi¡, (UCh¬32è* 
ÿ·c™y
);

2101 ià(
li¡
 =ğ
NULL
) {

2102 
	`£tToBogus
();

2103  
this
;

2108 ià(!
¡ršgs
->
	`isEm±y
()) {

2109 
¡ršgS·n
 = 
Ãw
 
	`UnicodeS‘SŒšgS·n
(*
this
, *
¡ršgs
, 
UnicodeS‘SŒšgS·n
::
ALL
);

2110 ià(
¡ršgS·n
 !ğ
NULL
 && !¡ršgS·n->
	`ÃedsSŒšgS·nUTF16
()) {

2116 
d–‘e
 
¡ršgS·n
;

2117 
¡ršgS·n
 = 
NULL
;

2120 ià(
¡ršgS·n
 =ğ
NULL
) {

2122 
bmpS‘
=
Ãw
 
	`BMPS‘
(
li¡
, 
Ën
);

2123 ià(
bmpS‘
 =ğ
NULL
) {

2124 
	`£tToBogus
();

2128  
this
;

2129 
	}
}

2131 
št32_t
 
	gUnicodeS‘
::
	$¥ª
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

2132 if(
Ëngth
>0 && 
bmpS‘
!=
NULL
) {

2133  (
št32_t
)(
bmpS‘
->
	`¥ª
(
s
, s+
Ëngth
, 
¥ªCÚd™iÚ
)-s);

2135 if(
Ëngth
<0) {

2136 
Ëngth
=
	`u_¡¾’
(
s
);

2138 if(
Ëngth
==0) {

2141 if(
¡ršgS·n
!=
NULL
) {

2142  
¡ršgS·n
->
	`¥ª
(
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

2143 } if(!
¡ršgs
->
	`isEm±y
()) {

2144 
ušt32_t
 
which
ğ
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
 ?

2145 
UnicodeS‘SŒšgS·n
::
FWD_UTF16_NOT_CONTAINED
 :

2146 
UnicodeS‘SŒšgS·n
::
FWD_UTF16_CONTAINED
;

2147 
UnicodeS‘SŒšgS·n
 
	`¡rS·n
(*
this
, *
¡ršgs
, 
which
);

2148 if(
¡rS·n
.
	`ÃedsSŒšgS·nUTF16
()) {

2149  
¡rS·n
.
	`¥ª
(
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

2153 if(
¥ªCÚd™iÚ
!=
USET_SPAN_NOT_CONTAINED
) {

2154 
¥ªCÚd™iÚ
=
USET_SPAN_CONTAINED
;

2157 
UCh¬32
 
c
;

2158 
št32_t
 
¡¬t
=0, 
´ev
=0;

2160 
	`U16_NEXT
(
s
, 
¡¬t
, 
Ëngth
, 
c
);

2161 if(
¥ªCÚd™iÚ
!=
	`cÚšs
(
c
)) {

2164 } (
´ev
=
¡¬t
)<
Ëngth
);

2165  
´ev
;

2166 
	}
}

2168 
št32_t
 
	gUnicodeS‘
::
	$¥ªBack
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

2169 if(
Ëngth
>0 && 
bmpS‘
!=
NULL
) {

2170  (
št32_t
)(
bmpS‘
->
	`¥ªBack
(
s
, s+
Ëngth
, 
¥ªCÚd™iÚ
)-s);

2172 if(
Ëngth
<0) {

2173 
Ëngth
=
	`u_¡¾’
(
s
);

2175 if(
Ëngth
==0) {

2178 if(
¡ršgS·n
!=
NULL
) {

2179  
¡ršgS·n
->
	`¥ªBack
(
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

2180 } if(!
¡ršgs
->
	`isEm±y
()) {

2181 
ušt32_t
 
which
ğ
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
 ?

2182 
UnicodeS‘SŒšgS·n
::
BACK_UTF16_NOT_CONTAINED
 :

2183 
UnicodeS‘SŒšgS·n
::
BACK_UTF16_CONTAINED
;

2184 
UnicodeS‘SŒšgS·n
 
	`¡rS·n
(*
this
, *
¡ršgs
, 
which
);

2185 if(
¡rS·n
.
	`ÃedsSŒšgS·nUTF16
()) {

2186  
¡rS·n
.
	`¥ªBack
(
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

2190 if(
¥ªCÚd™iÚ
!=
USET_SPAN_NOT_CONTAINED
) {

2191 
¥ªCÚd™iÚ
=
USET_SPAN_CONTAINED
;

2194 
UCh¬32
 
c
;

2195 
št32_t
 
´ev
=
Ëngth
;

2197 
	`U16_PREV
(
s
, 0, 
Ëngth
, 
c
);

2198 if(
¥ªCÚd™iÚ
!=
	`cÚšs
(
c
)) {

2201 } (
´ev
=
Ëngth
)>0);

2202  
´ev
;

2203 
	}
}

2205 
št32_t
 
	gUnicodeS‘
::
	$¥ªUTF8
(cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

2206 if(
Ëngth
>0 && 
bmpS‘
!=
NULL
) {

2207 cÚ¡ 
ušt8_t
 *
s0
=(cÚ¡ ušt8_ˆ*)
s
;

2208  (
št32_t
)(
bmpS‘
->
	`¥ªUTF8
(
s0
, 
Ëngth
, 
¥ªCÚd™iÚ
)-s0);

2210 if(
Ëngth
<0) {

2211 
Ëngth
=(
št32_t
)
	`u´v_¡¾’
(
s
);

2213 if(
Ëngth
==0) {

2216 if(
¡ršgS·n
!=
NULL
) {

2217  
¡ršgS·n
->
	`¥ªUTF8
((cÚ¡ 
ušt8_t
 *)
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

2218 } if(!
¡ršgs
->
	`isEm±y
()) {

2219 
ušt32_t
 
which
ğ
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
 ?

2220 
UnicodeS‘SŒšgS·n
::
FWD_UTF8_NOT_CONTAINED
 :

2221 
UnicodeS‘SŒšgS·n
::
FWD_UTF8_CONTAINED
;

2222 
UnicodeS‘SŒšgS·n
 
	`¡rS·n
(*
this
, *
¡ršgs
, 
which
);

2223 if(
¡rS·n
.
	`ÃedsSŒšgS·nUTF8
()) {

2224  
¡rS·n
.
	`¥ªUTF8
((cÚ¡ 
ušt8_t
 *)
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

2228 if(
¥ªCÚd™iÚ
!=
USET_SPAN_NOT_CONTAINED
) {

2229 
¥ªCÚd™iÚ
=
USET_SPAN_CONTAINED
;

2232 
UCh¬32
 
c
;

2233 
št32_t
 
¡¬t
=0, 
´ev
=0;

2235 
	`U8_NEXT
(
s
, 
¡¬t
, 
Ëngth
, 
c
);

2236 if(
c
<0) {

2237 
c
=0xfffd;

2239 if(
¥ªCÚd™iÚ
!=
	`cÚšs
(
c
)) {

2242 } (
´ev
=
¡¬t
)<
Ëngth
);

2243  
´ev
;

2244 
	}
}

2246 
št32_t
 
	gUnicodeS‘
::
	$¥ªBackUTF8
(cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

2247 if(
Ëngth
>0 && 
bmpS‘
!=
NULL
) {

2248 cÚ¡ 
ušt8_t
 *
s0
=(cÚ¡ ušt8_ˆ*)
s
;

2249  
bmpS‘
->
	`¥ªBackUTF8
(
s0
, 
Ëngth
, 
¥ªCÚd™iÚ
);

2251 if(
Ëngth
<0) {

2252 
Ëngth
=(
št32_t
)
	`u´v_¡¾’
(
s
);

2254 if(
Ëngth
==0) {

2257 if(
¡ršgS·n
!=
NULL
) {

2258  
¡ršgS·n
->
	`¥ªBackUTF8
((cÚ¡ 
ušt8_t
 *)
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

2259 } if(!
¡ršgs
->
	`isEm±y
()) {

2260 
ušt32_t
 
which
ğ
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
 ?

2261 
UnicodeS‘SŒšgS·n
::
BACK_UTF8_NOT_CONTAINED
 :

2262 
UnicodeS‘SŒšgS·n
::
BACK_UTF8_CONTAINED
;

2263 
UnicodeS‘SŒšgS·n
 
	`¡rS·n
(*
this
, *
¡ršgs
, 
which
);

2264 if(
¡rS·n
.
	`ÃedsSŒšgS·nUTF8
()) {

2265  
¡rS·n
.
	`¥ªBackUTF8
((cÚ¡ 
ušt8_t
 *)
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

2269 if(
¥ªCÚd™iÚ
!=
USET_SPAN_NOT_CONTAINED
) {

2270 
¥ªCÚd™iÚ
=
USET_SPAN_CONTAINED
;

2273 
UCh¬32
 
c
;

2274 
št32_t
 
´ev
=
Ëngth
;

2276 
	`U8_PREV
(
s
, 0, 
Ëngth
, 
c
);

2277 if(
c
<0) {

2278 
c
=0xfffd;

2280 if(
¥ªCÚd™iÚ
!=
	`cÚšs
(
c
)) {

2283 } (
´ev
=
Ëngth
)>0);

2284  
´ev
;

2285 
	}
}

2287 
	gU_NAMESPACE_END


	@uniset_props.cpp

19 
	~"unicode/uty³s.h
"

20 
	~"unicode/uni£t.h
"

21 
	~"unicode/·r£pos.h
"

22 
	~"unicode/uch¬.h
"

23 
	~"unicode/usüt.h
"

24 
	~"unicode/symbË.h
"

25 
	~"unicode/u£t.h
"

26 
	~"unicode/locid.h
"

27 
	~"unicode/brk™”.h
"

28 
	~"u£t_imp.h
"

29 
	~"ruË™”.h
"

30 
	~"cmemÜy.h
"

31 
	~"uşn_cmn.h
"

32 
	~"ut.h
"

33 
	~"uveùÜ.h
"

34 
	~"u´İs.h
"

35 
	~"´İÇme.h
"

36 
	~"nÜm®iz”2im¶.h
"

37 
	~"uÿ£.h
"

38 
	~"ubidi_´İs.h
"

39 
	~"ušvch¬.h
"

40 
	~"u´İs.h
"

41 
	~"ch¬¡r.h
"

42 
	~"c¡ršg.h
"

43 
	~"mu‹x.h
"

44 
	~"umu‹x.h
"

45 
	~"uas£¹.h
"

46 
	~"hash.h
"

48 
	gU_NAMESPACE_USE


50 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

54 
	#START_EXTRA
 16

	)

58 
	#SET_OPEN
 ((
UCh¬
)0x005Bè

	)

59 
	#SET_CLOSE
 ((
UCh¬
)0x005Dè

	)

60 
	#HYPHEN
 ((
UCh¬
)0x002Dè

	)

61 
	#COMPLEMENT
 ((
UCh¬
)0x005Eè

	)

62 
	#COLON
 ((
UCh¬
)0x003Aè

	)

63 
	#BACKSLASH
 ((
UCh¬
)0x005Cè

	)

64 
	#INTERSECTION
 ((
UCh¬
)0x0026è

	)

65 
	#UPPER_U
 ((
UCh¬
)0x0055è

	)

66 
	#LOWER_U
 ((
UCh¬
)0x0075è

	)

67 
	#OPEN_BRACE
 ((
UCh¬
)123è

	)

68 
	#CLOSE_BRACE
 ((
UCh¬
)125è

	)

69 
	#UPPER_P
 ((
UCh¬
)0x0050è

	)

70 
	#LOWER_P
 ((
UCh¬
)0x0070è

	)

71 
	#UPPER_N
 ((
UCh¬
)78è

	)

72 
	#EQUALS
 ((
UCh¬
)0x003Dè

	)

75 cÚ¡ 
UCh¬
 
	gPOSIX_CLOSE
[] = { 
COLON
,
SET_CLOSE
,0 };

77 cÚ¡ 
UCh¬
 
	gPERL_CLOSE
[] = { 
CLOSE_BRACE
,0 };

79 cÚ¡ 
UCh¬
 
	gHYPHEN_RIGHT_BRACE
[] = {
HYPHEN
,
SET_CLOSE
,0};

82 cÚ¡ 
	gANY
[] = "ANY";

83 cÚ¡ 
	gASCII
[] = "ASCII";

84 cÚ¡ 
	gASSIGNED
[] = "Assigned";

87 
	#NAME_PROP
 "Ç"

	)

88 
	#NAME_PROP_LENGTH
 2

	)

98 
U_CDECL_BEGIN


99 
UBoŞ
 
U_CALLCONV
 
u£t_ş—nup
();

100 
U_CDECL_END


105 
şass
 
	gUnicodeS‘SšgËtÚ
 : 
public
 
Sim¶eSšgËtÚW¿µ”
<
UnicodeS‘
> {

106 
public
:

107 
UnicodeS‘SšgËtÚ
(
Sim¶eSšgËtÚ
 &
s
, cÚ¡ *
·‰”n
) :

108 
Sim¶eSšgËtÚW¿µ”
<
UnicodeS‘
>(
s
), 
fP©‹º
(
·‰”n
) {}

109 
UnicodeS‘
 *
g‘In¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

110  
	gSim¶eSšgËtÚW¿µ”
<
	gUnicodeS‘
>::
g‘In¡ªû
(
ü—‹In¡ªû
, 
fP©‹º
, 
”rÜCode
);

112 
	g´iv©e
:

113 *
ü—‹In¡ªû
(cÚ¡ *
cÚ‹xt
, 
UE¼ÜCode
 &
”rÜCode
) {

114 
UnicodeSŒšg
 
·‰”n
((cÚ¡ *)
cÚ‹xt
, -1, 
US_INV
);

115 
UnicodeS‘
 *
	g£t
=
Ãw
 UnicodeS‘(
·‰”n
, 
”rÜCode
);

116 if(
	g£t
==
NULL
) {

117 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

119 
	g£t
->
ä“ze
();

120 
uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_USET
, 
u£t_ş—nup
);

121  
	g£t
;

124 cÚ¡ *
	gfP©‹º
;

127 
U_CDECL_BEGIN


129 
UnicodeS‘
 *
	gINCLUSIONS
[
UPROPS_SRC_COUNT
] = { 
NULL
 };

131 
STATIC_SIMPLE_SINGLETON
(
uni32SšgËtÚ
);

139 
U_CALLCONV


140 
	$_£t_add
(
US‘
 *
£t
, 
UCh¬32
 
c
) {

141 ((
UnicodeS‘
 *)
£t
)->
	`add
(
c
);

142 
	}
}

144 
U_CALLCONV


145 
	$_£t_addRªge
(
US‘
 *
£t
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

146 ((
UnicodeS‘
 *)
£t
)->
	`add
(
¡¬t
, 
’d
);

147 
	}
}

149 
U_CALLCONV


150 
	$_£t_addSŒšg
(
US‘
 *
£t
, cÚ¡ 
UCh¬
 *
¡r
, 
št32_t
 
Ëngth
) {

151 ((
UnicodeS‘
 *)
£t
)->
	`add
(
	`UnicodeSŒšg
((
UBoŞ
)(
Ëngth
<0), 
¡r
,†ength));

152 
	}
}

157 
UBoŞ
 
U_CALLCONV
 
	$u£t_ş—nup
() {

158 
št32_t
 
i
;

160 
i
 = 
UPROPS_SRC_NONE
; i < 
UPROPS_SRC_COUNT
; ++i) {

161 ià(
INCLUSIONS
[
i
] !ğ
NULL
) {

162 
d–‘e
 
INCLUSIONS
[
i
];

163 
INCLUSIONS
[
i
] = 
NULL
;

166 
	`UnicodeS‘SšgËtÚ
(
uni32SšgËtÚ
, 
NULL
).
	`d–‘eIn¡ªû
();

167  
TRUE
;

168 
	}
}

170 
U_CDECL_END


172 
	gU_NAMESPACE_BEGIN


179 
	#DEFAULT_INCLUSION_CAPACITY
 3072

	)

181 cÚ¡ 
UnicodeS‘
* 
	gUnicodeS‘
::
	$g‘InşusiÚs
(
št32_t
 
¤c
, 
UE¼ÜCode
 &
¡©us
) {

182 
UBoŞ
 
ÃedIn™
;

183 
	`UMTX_CHECK
(
NULL
, (
INCLUSIONS
[
¤c
] =ğNULL), 
ÃedIn™
);

184 ià(
ÃedIn™
) {

185 
UnicodeS‘
* 
šş
 = 
Ãw
 
	`UnicodeS‘
();

186 
US‘Add”
 
§
 = {

187 (
US‘
 *)
šş
,

188 
_£t_add
,

189 
_£t_addRªge
,

190 
_£t_addSŒšg
,

191 
NULL
,

192 
NULL


194 
šş
->
	`’su»C­ac™y
(
DEFAULT_INCLUSION_CAPACITY
, 
¡©us
);

195 ià(
šş
 !ğ
NULL
) {

196 
¤c
) {

197 
UPROPS_SRC_CHAR
:

198 
	`uch¬_addPrİ”tyS¹s
(&
§
, &
¡©us
);

200 
UPROPS_SRC_PROPSVEC
:

201 
	`u´İsvec_addPrİ”tyS¹s
(&
§
, &
¡©us
);

203 
UPROPS_SRC_CHAR_AND_PROPSVEC
:

204 
	`uch¬_addPrİ”tyS¹s
(&
§
, &
¡©us
);

205 
	`u´İsvec_addPrİ”tyS¹s
(&
§
, &
¡©us
);

207 #ià!
UCONFIG_NO_NORMALIZATION


208 
UPROPS_SRC_CASE_AND_NORM
: {

209 cÚ¡ 
NÜm®iz”2Im¶
 *
im¶
=
NÜm®iz”2FaùÜy
::
	`g‘NFCIm¶
(
¡©us
);

210 if(
	`U_SUCCESS
(
¡©us
)) {

211 
im¶
->
	`addPrİ”tyS¹s
(&
§
, 
¡©us
);

213 
	`uÿ£_addPrİ”tyS¹s
(
	`uÿ£_g‘SšgËtÚ
(), &
§
, &
¡©us
);

216 
UPROPS_SRC_NFC
: {

217 cÚ¡ 
NÜm®iz”2Im¶
 *
im¶
=
NÜm®iz”2FaùÜy
::
	`g‘NFCIm¶
(
¡©us
);

218 if(
	`U_SUCCESS
(
¡©us
)) {

219 
im¶
->
	`addPrİ”tyS¹s
(&
§
, 
¡©us
);

223 
UPROPS_SRC_NFKC
: {

224 cÚ¡ 
NÜm®iz”2Im¶
 *
im¶
=
NÜm®iz”2FaùÜy
::
	`g‘NFKCIm¶
(
¡©us
);

225 if(
	`U_SUCCESS
(
¡©us
)) {

226 
im¶
->
	`addPrİ”tyS¹s
(&
§
, 
¡©us
);

230 
UPROPS_SRC_NFKC_CF
: {

231 cÚ¡ 
NÜm®iz”2Im¶
 *
im¶
=
NÜm®iz”2FaùÜy
::
	`g‘NFKC_CFIm¶
(
¡©us
);

232 if(
	`U_SUCCESS
(
¡©us
)) {

233 
im¶
->
	`addPrİ”tyS¹s
(&
§
, 
¡©us
);

237 
UPROPS_SRC_NFC_CANON_ITER
: {

238 cÚ¡ 
NÜm®iz”2Im¶
 *
im¶
=
NÜm®iz”2FaùÜy
::
	`g‘NFCIm¶
(
¡©us
);

239 if(
	`U_SUCCESS
(
¡©us
)) {

240 
im¶
->
	`addCªÚI‹rPrİ”tyS¹s
(&
§
, 
¡©us
);

245 
UPROPS_SRC_CASE
:

246 
	`uÿ£_addPrİ”tyS¹s
(
	`uÿ£_g‘SšgËtÚ
(), &
§
, &
¡©us
);

248 
UPROPS_SRC_BIDI
:

249 
	`ubidi_addPrİ”tyS¹s
(
	`ubidi_g‘SšgËtÚ
(), &
§
, &
¡©us
);

252 
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

255 ià(
	`U_SUCCESS
(
¡©us
)) {

257 
šş
->
	`com·ù
();

258 
	`umtx_lock
(
NULL
);

259 ià(
INCLUSIONS
[
¤c
] =ğ
NULL
) {

260 
INCLUSIONS
[
¤c
] = 
šş
;

261 
šş
 = 
NULL
;

262 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_USET
, 
u£t_ş—nup
);

264 
	`umtx_uÆock
(
NULL
);

266 
d–‘e
 
šş
;

268 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

271  
INCLUSIONS
[
¤c
];

272 
	}
}

276 
U_CFUNC
 
UnicodeS‘
 *

277 
	$uni£t_g‘Unicode32In¡ªû
(
UE¼ÜCode
 &
”rÜCode
) {

278  
	`UnicodeS‘SšgËtÚ
(
uni32SšgËtÚ
, "[:age=3.2:]").
	`g‘In¡ªû
(
”rÜCode
);

279 
	}
}

288 
šlše
 
UBoŞ


289 
	$isP”lO³n
(cÚ¡ 
UnicodeSŒšg
 &
·‰”n
, 
št32_t
 
pos
) {

290 
UCh¬
 
c
;

291  
·‰”n
.
	`ch¬At
(
pos
)==
BACKSLASH
 && ((
c
õ©‹º.ch¬AtÕos+1))==
LOWER_P
 || c==
UPPER_P
);

292 
	}
}

299 
šlše
 
UBoŞ


300 
	$isNameO³n
(cÚ¡ 
UnicodeSŒšg
 &
·‰”n
, 
št32_t
 
pos
) {

301  
·‰”n
.
	`ch¬At
(
pos
)==
BACKSLASH
 &&…©‹º.ch¬AtÕos+1)==
UPPER_N
;

302 
	}
}

304 
šlše
 
UBoŞ


305 
	$isPOSIXO³n
(cÚ¡ 
UnicodeSŒšg
 &
·‰”n
, 
št32_t
 
pos
) {

306  
·‰”n
.
	`ch¬At
(
pos
)==
SET_OPEN
 &&…©‹º.ch¬AtÕos+1)==
COLON
;

307 
	}
}

317 
	#_dbgù
(
me
)

	)

329 
	gUnicodeS‘
::
	$UnicodeS‘
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

330 
UE¼ÜCode
& 
¡©us
) :

331 
	`Ën
(0), 
	`ÿ·c™y
(
START_EXTRA
), 
	`li¡
(0), 
	`bmpS‘
(0), 
	`bufãr
(0),

332 
	`bufãrC­ac™y
(0), 
	`·tL’
(0), 
	`·t
(
NULL
), 
	`¡ršgs
(NULL), 
	`¡ršgS·n
(NULL),

333 
	$fFÏgs
(0)

335 if(
	`U_SUCCESS
(
¡©us
)){

336 
li¡
 = (
UCh¬32
*è
	`u´v_m®loc
((UCh¬32è* 
ÿ·c™y
);

338 if(
li¡
 =ğ
NULL
) {

339 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

341 
	`®loÿ‹SŒšgs
(
¡©us
);

342 
	`­¶yP©‹º
(
·‰”n
, 
USET_IGNORE_SPACE
, 
NULL
, 
¡©us
);

345 
	`_dbgù
(
this
);

346 
	}
}

356 
	gUnicodeS‘
::
	$UnicodeS‘
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

357 
ušt32_t
 
İtiÚs
,

358 cÚ¡ 
SymbŞTabË
* 
symbŞs
,

359 
UE¼ÜCode
& 
¡©us
) :

360 
	`Ën
(0), 
	`ÿ·c™y
(
START_EXTRA
), 
	`li¡
(0), 
	`bmpS‘
(0), 
	`bufãr
(0),

361 
	`bufãrC­ac™y
(0), 
	`·tL’
(0), 
	`·t
(
NULL
), 
	`¡ršgs
(NULL), 
	`¡ršgS·n
(NULL),

362 
	$fFÏgs
(0)

364 if(
	`U_SUCCESS
(
¡©us
)){

365 
li¡
 = (
UCh¬32
*è
	`u´v_m®loc
((UCh¬32è* 
ÿ·c™y
);

367 if(
li¡
 =ğ
NULL
) {

368 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

370 
	`®loÿ‹SŒšgs
(
¡©us
);

371 
	`­¶yP©‹º
(
·‰”n
, 
İtiÚs
, 
symbŞs
, 
¡©us
);

374 
	`_dbgù
(
this
);

375 
	}
}

377 
	gUnicodeS‘
::
	$UnicodeS‘
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
, 
P¬£Pos™iÚ
& 
pos
,

378 
ušt32_t
 
İtiÚs
,

379 cÚ¡ 
SymbŞTabË
* 
symbŞs
,

380 
UE¼ÜCode
& 
¡©us
) :

381 
	`Ën
(0), 
	`ÿ·c™y
(
START_EXTRA
), 
	`li¡
(0), 
	`bmpS‘
(0), 
	`bufãr
(0),

382 
	`bufãrC­ac™y
(0), 
	`·tL’
(0), 
	`·t
(
NULL
), 
	`¡ršgs
(NULL), 
	`¡ršgS·n
(NULL),

383 
	$fFÏgs
(0)

385 if(
	`U_SUCCESS
(
¡©us
)){

386 
li¡
 = (
UCh¬32
*è
	`u´v_m®loc
((UCh¬32è* 
ÿ·c™y
);

388 if(
li¡
 =ğ
NULL
) {

389 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

391 
	`®loÿ‹SŒšgs
(
¡©us
);

392 
	`­¶yP©‹º
(
·‰”n
, 
pos
, 
İtiÚs
, 
symbŞs
, 
¡©us
);

395 
	`_dbgù
(
this
);

396 
	}
}

416 
	gUnicodeS‘
& UnicodeS‘::
	$­¶yP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

417 
UE¼ÜCode
& 
¡©us
) {

418  
	`­¶yP©‹º
(
·‰”n
, 
USET_IGNORE_SPACE
, 
NULL
, 
¡©us
);

419 
	}
}

430 
	gUnicodeS‘
& UnicodeS‘::
	$­¶yP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

431 
ušt32_t
 
İtiÚs
,

432 cÚ¡ 
SymbŞTabË
* 
symbŞs
,

433 
UE¼ÜCode
& 
¡©us
) {

434 ià(
	`U_FAILURE
(
¡©us
è|| 
	`isFroz’
()) {

435  *
this
;

438 
P¬£Pos™iÚ
 
	`pos
(0);

439 
	`­¶yP©‹º
(
·‰”n
, 
pos
, 
İtiÚs
, 
symbŞs
, 
¡©us
);

440 ià(
	`U_FAILURE
(
¡©us
)è *
this
;

442 
št32_t
 
i
 = 
pos
.
	`g‘Index
();

444 ià(
İtiÚs
 & 
USET_IGNORE_SPACE
) {

446 
ICU_Ut™y
::
	`skWh™e¥aû
(
·‰”n
, 
i
, 
TRUE
);

449 ià(
i
 !ğ
·‰”n
.
	`Ëngth
()) {

450 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

452  *
this
;

453 
	}
}

455 
	gUnicodeS‘
& UnicodeS‘::
	$­¶yP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

456 
P¬£Pos™iÚ
& 
pos
,

457 
ušt32_t
 
İtiÚs
,

458 cÚ¡ 
SymbŞTabË
* 
symbŞs
,

459 
UE¼ÜCode
& 
¡©us
) {

460 ià(
	`U_FAILURE
(
¡©us
è|| 
	`isFroz’
()) {

461  *
this
;

465 
UnicodeSŒšg
 
»butP©
;

466 
RuËCh¬aù”I‹¿tÜ
 
	`ch¬s
(
·‰”n
, 
symbŞs
, 
pos
);

467 
	`­¶yP©‹º
(
ch¬s
, 
symbŞs
, 
»butP©
, 
İtiÚs
, 
¡©us
);

468 ià(
	`U_FAILURE
(
¡©us
)è *
this
;

469 ià(
ch¬s
.
	`šV¬ŸbË
()) {

471 
¡©us
 = 
U_MALFORMED_SET
;

472  *
this
;

474 
	`£tP©‹º
(
»butP©
);

475  *
this
;

476 
	}
}

482 
UBoŞ
 
	gUnicodeS‘
::
	$»£mbËsP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
, 
št32_t
 
pos
) {

483  ((
pos
+1è< 
·‰”n
.
	`Ëngth
() &&

484 
·‰”n
.
	`ch¬At
(
pos
è=ğ(
UCh¬
)91 ) ||

485 
	`»£mbËsPrİ”tyP©‹º
(
·‰”n
, 
pos
);

486 
	}
}

496 şas 
	cUnicodeS‘Poš‹r
 {

497 
UnicodeS‘
* 
	mp
;

498 
	mpublic
:

499 
šlše
 
	$UnicodeS‘Poš‹r
(è: 
	$p
(0) {}

500 
šlše
 ~
	$UnicodeS‘Poš‹r
(è{ 
d–‘e
 
p
; 
	}
}

501 
šlše
 
UnicodeS‘
* 
	$poš‹r
(è{  
p
; 
	}
}

502 
šlše
 
UBoŞ
 
	$®loÿ‹
() {

503 ià(
p
 == 0) {

504 
p
 = 
Ãw
 
	`UnicodeS‘
();

506  
p
 != 0;

507 
	}
}

524 
	gUnicodeS‘
::
	$­¶yP©‹º
(
RuËCh¬aù”I‹¿tÜ
& 
ch¬s
,

525 cÚ¡ 
SymbŞTabË
* 
symbŞs
,

526 
UnicodeSŒšg
& 
»butP©
,

527 
ušt32_t
 
İtiÚs
,

528 
UE¼ÜCode
& 
ec
) {

529 ià(
	`U_FAILURE
(
ec
)) ;

535 
št32_t
 
İts
 = 
RuËCh¬aù”I‹¿tÜ
::
PARSE_VARIABLES
 |

536 
RuËCh¬aù”I‹¿tÜ
::
PARSE_ESCAPES
;

537 ià((
İtiÚs
 & 
USET_IGNORE_SPACE
) != 0) {

538 
İts
 |ğ
RuËCh¬aù”I‹¿tÜ
::
SKIP_WHITESPACE
;

541 
UnicodeSŒšg
 
·tLoÿl
, 
buf
;

542 
UBoŞ
 
u£P©
 = 
FALSE
;

543 
UnicodeS‘Poš‹r
 
sü©ch
;

544 
RuËCh¬aù”I‹¿tÜ
::
Pos
 
backup
;

548 
št8_t
 
Ï¡I‹m
 = 0, 
mode
 = 0;

549 
UCh¬32
 
Ï¡Ch¬
 = 0;

550 
UCh¬
 
İ
 = 0;

552 
UBoŞ
 
šv”t
 = 
FALSE
;

554 
	`ş—r
();

556 
mode
 !ğ2 && !
ch¬s
.
	`©End
()) {

557 
	`U_ASSERT
((
Ï¡I‹m
 =ğ0 && 
İ
 == 0) ||

558 (
Ï¡I‹m
 =ğ1 && (
İ
 =ğ0 || o°=ğ
HYPHEN
 )) ||

559 (
Ï¡I‹m
 =ğ2 && (
İ
 =ğ0 || o°=ğ
HYPHEN
 ||

560 
İ
 =ğ
INTERSECTION
 )));

562 
UCh¬32
 
c
 = 0;

563 
UBoŞ
 
l™”®
 = 
FALSE
;

564 
UnicodeS‘
* 
Ã¡ed
 = 0;

569 
št8_t
 
£tMode
 = 0;

570 ià(
	`»£mbËsPrİ”tyP©‹º
(
ch¬s
, 
İts
)) {

571 
£tMode
 = 2;

584 
ch¬s
.
	`g‘Pos
(
backup
);

585 
c
 = 
ch¬s
.
	`Ãxt
(
İts
, 
l™”®
, 
ec
);

586 ià(
	`U_FAILURE
(
ec
)) ;

588 ià(
c
 =ğ0x5B && !
l™”®
) {

589 ià(
mode
 == 1) {

590 
ch¬s
.
	`£tPos
(
backup
);

591 
£tMode
 = 1;

594 
mode
 = 1;

595 
·tLoÿl
.
	`­³nd
((
UCh¬
) 0x5B );

596 
ch¬s
.
	`g‘Pos
(
backup
);

597 
c
 = 
ch¬s
.
	`Ãxt
(
İts
, 
l™”®
, 
ec
);

598 ià(
	`U_FAILURE
(
ec
)) ;

599 ià(
c
 =ğ0x5E && !
l™”®
) {

600 
šv”t
 = 
TRUE
;

601 
·tLoÿl
.
	`­³nd
((
UCh¬
) 0x5E );

602 
ch¬s
.
	`g‘Pos
(
backup
);

603 
c
 = 
ch¬s
.
	`Ãxt
(
İts
, 
l™”®
, 
ec
);

604 ià(
	`U_FAILURE
(
ec
)) ;

608 ià(
c
 =ğ
HYPHEN
 ) {

609 
l™”®
 = 
TRUE
;

612 
ch¬s
.
	`£tPos
(
backup
);

616 } ià(
symbŞs
 != 0) {

617 cÚ¡ 
UnicodeFunùÜ
 *
m
 = 
symbŞs
->
	`lookupM©ch”
(
c
);

618 ià(
m
 != 0) {

619 cÚ¡ 
UnicodeS‘
 *
ms
 = 
dyÇmic_ÿ¡
<cÚ¡ UnicodeS‘ *>(
m
);

620 ià(
ms
 =ğ
NULL
) {

621 
ec
 = 
U_MALFORMED_SET
;

626 
Ã¡ed
 = 
cÚ¡_ÿ¡
<
UnicodeS‘
*>(
ms
);

627 
£tMode
 = 3;

637 ià(
£tMode
 != 0) {

638 ià(
Ï¡I‹m
 == 1) {

639 ià(
İ
 != 0) {

641 
ec
 = 
U_MALFORMED_SET
;

644 
	`add
(
Ï¡Ch¬
,†astChar);

645 
	`_­³ndToP©
(
·tLoÿl
, 
Ï¡Ch¬
, 
FALSE
);

646 
Ï¡I‹m
 = 0;

647 
İ
 = 0;

650 ià(
İ
 =ğ
HYPHEN
 || o°=ğ
INTERSECTION
 ) {

651 
·tLoÿl
.
	`­³nd
(
İ
);

654 ià(
Ã¡ed
 == 0) {

656 ià(!
sü©ch
.
	`®loÿ‹
()) {

657 
ec
 = 
U_MEMORY_ALLOCATION_ERROR
;

660 
Ã¡ed
 = 
sü©ch
.
	`poš‹r
();

662 
£tMode
) {

664 
Ã¡ed
->
	`­¶yP©‹º
(
ch¬s
, 
symbŞs
, 
·tLoÿl
, 
İtiÚs
, 
ec
);

667 
ch¬s
.
	`skIgnÜed
(
İts
);

668 
Ã¡ed
->
	`­¶yPrİ”tyP©‹º
(
ch¬s
, 
·tLoÿl
, 
ec
);

669 ià(
	`U_FAILURE
(
ec
)) ;

672 
Ã¡ed
->
	`_toP©‹º
(
·tLoÿl
, 
FALSE
);

676 
u£P©
 = 
TRUE
;

678 ià(
mode
 == 0) {

680 *
this
 = *
Ã¡ed
;

681 
mode
 = 2;

685 
İ
) {

686 
HYPHEN
:

687 
	`»moveAÎ
(*
Ã¡ed
);

689 
INTERSECTION
:

690 
	`»šAÎ
(*
Ã¡ed
);

693 
	`addAÎ
(*
Ã¡ed
);

697 
İ
 = 0;

698 
Ï¡I‹m
 = 2;

703 ià(
mode
 == 0) {

705 
ec
 = 
U_MALFORMED_SET
;

713 ià(!
l™”®
) {

714 
c
) {

716 ià(
Ï¡I‹m
 == 1) {

717 
	`add
(
Ï¡Ch¬
,†astChar);

718 
	`_­³ndToP©
(
·tLoÿl
, 
Ï¡Ch¬
, 
FALSE
);

721 ià(
İ
 =ğ
HYPHEN
 ) {

722 
	`add
(
İ
, op);

723 
·tLoÿl
.
	`­³nd
(
İ
);

724 } ià(
İ
 =ğ
INTERSECTION
 ) {

726 
ec
 = 
U_MALFORMED_SET
;

729 
·tLoÿl
.
	`­³nd
((
UCh¬
) 0x5D );

730 
mode
 = 2;

732 
HYPHEN
 :

733 ià(
İ
 == 0) {

734 ià(
Ï¡I‹m
 != 0) {

735 
İ
 = (
UCh¬
è
c
;

739 
	`add
(
c
, c);

740 
c
 = 
ch¬s
.
	`Ãxt
(
İts
, 
l™”®
, 
ec
);

741 ià(
	`U_FAILURE
(
ec
)) ;

742 ià(
c
 =ğ0x5D && !
l™”®
) {

743 
·tLoÿl
.
	`­³nd
(
HYPHEN_RIGHT_BRACE
);

744 
mode
 = 2;

750 
ec
 = 
U_MALFORMED_SET
;

752 
INTERSECTION
 :

753 ià(
Ï¡I‹m
 =ğ2 && 
İ
 == 0) {

754 
İ
 = (
UCh¬
è
c
;

758 
ec
 = 
U_MALFORMED_SET
;

762 
ec
 = 
U_MALFORMED_SET
;

765 ià(
İ
 != 0) {

767 
ec
 = 
U_MALFORMED_SET
;

770 ià(
Ï¡I‹m
 == 1) {

771 
	`add
(
Ï¡Ch¬
,†astChar);

772 
	`_­³ndToP©
(
·tLoÿl
, 
Ï¡Ch¬
, 
FALSE
);

774 
Ï¡I‹m
 = 0;

775 
buf
.
	`Œunÿ‹
(0);

777 
UBoŞ
 
ok
 = 
FALSE
;

778 !
ch¬s
.
	`©End
()) {

779 
c
 = 
ch¬s
.
	`Ãxt
(
İts
, 
l™”®
, 
ec
);

780 ià(
	`U_FAILURE
(
ec
)) ;

781 ià(
c
 =ğ0x7D && !
l™”®
) {

782 
ok
 = 
TRUE
;

785 
buf
.
	`­³nd
(
c
);

787 ià(
buf
.
	`Ëngth
(è< 1 || !
ok
) {

789 
ec
 = 
U_MALFORMED_SET
;

796 
	`add
(
buf
);

797 
·tLoÿl
.
	`­³nd
((
UCh¬
) 0x7B );

798 
	`_­³ndToP©
(
·tLoÿl
, 
buf
, 
FALSE
);

799 
·tLoÿl
.
	`­³nd
((
UCh¬
) 0x7D );

801 
SymbŞTabË
::
SYMBOL_REF
:

809 
ch¬s
.
	`g‘Pos
(
backup
);

810 
c
 = 
ch¬s
.
	`Ãxt
(
İts
, 
l™”®
, 
ec
);

811 ià(
	`U_FAILURE
(
ec
)) ;

812 
UBoŞ
 
ªchÜ
 = (
c
 =ğ0x5D && !
l™”®
);

813 ià(
symbŞs
 =ğ0 && !
ªchÜ
) {

814 
c
 = 
SymbŞTabË
::
SYMBOL_REF
;

815 
ch¬s
.
	`£tPos
(
backup
);

818 ià(
ªchÜ
 && 
İ
 == 0) {

819 ià(
Ï¡I‹m
 == 1) {

820 
	`add
(
Ï¡Ch¬
,†astChar);

821 
	`_­³ndToP©
(
·tLoÿl
, 
Ï¡Ch¬
, 
FALSE
);

823 
	`add
(
U_ETHER
);

824 
u£P©
 = 
TRUE
;

825 
·tLoÿl
.
	`­³nd
((
UCh¬
è
SymbŞTabË
::
SYMBOL_REF
);

826 
·tLoÿl
.
	`­³nd
((
UCh¬
) 0x5D );

827 
mode
 = 2;

831 
ec
 = 
U_MALFORMED_SET
;

843 
Ï¡I‹m
) {

845 
Ï¡I‹m
 = 1;

846 
Ï¡Ch¬
 = 
c
;

849 ià(
İ
 =ğ
HYPHEN
 ) {

850 ià(
Ï¡Ch¬
 >ğ
c
) {

854 
ec
 = 
U_MALFORMED_SET
;

857 
	`add
(
Ï¡Ch¬
, 
c
);

858 
	`_­³ndToP©
(
·tLoÿl
, 
Ï¡Ch¬
, 
FALSE
);

859 
·tLoÿl
.
	`­³nd
(
İ
);

860 
	`_­³ndToP©
(
·tLoÿl
, 
c
, 
FALSE
);

861 
Ï¡I‹m
 = 0;

862 
İ
 = 0;

864 
	`add
(
Ï¡Ch¬
,†astChar);

865 
	`_­³ndToP©
(
·tLoÿl
, 
Ï¡Ch¬
, 
FALSE
);

866 
Ï¡Ch¬
 = 
c
;

870 ià(
İ
 != 0) {

872 
ec
 = 
U_MALFORMED_SET
;

875 
Ï¡Ch¬
 = 
c
;

876 
Ï¡I‹m
 = 1;

881 ià(
mode
 != 2) {

883 
ec
 = 
U_MALFORMED_SET
;

887 
ch¬s
.
	`skIgnÜed
(
İts
);

895 ià((
İtiÚs
 & 
USET_CASE_INSENSITIVE
) != 0) {

896 
	`şo£Ov”
(
USET_CASE_INSENSITIVE
);

898 ià((
İtiÚs
 & 
USET_ADD_CASE_MAPPINGS
) != 0) {

899 
	`şo£Ov”
(
USET_ADD_CASE_MAPPINGS
);

901 ià(
šv”t
) {

902 
	`com¶em’t
();

907 ià(
u£P©
) {

908 
»butP©
.
	`­³nd
(
·tLoÿl
);

910 
	`_g’”©eP©‹º
(
»butP©
, 
FALSE
);

912 ià(
	`isBogus
(è&& 
	`U_SUCCESS
(
ec
)) {

914 
ec
 = 
U_MEMORY_ALLOCATION_ERROR
;

916 
	}
}

922 
UBoŞ
 
	$num”icV®ueF‹r
(
UCh¬32
 
ch
, * 
cÚ‹xt
) {

923  
	`u_g‘Num”icV®ue
(
ch
è=ğ*(*)
cÚ‹xt
;

924 
	}
}

926 
UBoŞ
 
	$g’”®C©egÜyMaskF‹r
(
UCh¬32
 
ch
, * 
cÚ‹xt
) {

927 
št32_t
 
v®ue
 = *(št32_t*)
cÚ‹xt
;

928  (
	`U_GET_GC_MASK
((
UCh¬32
è
ch
è& 
v®ue
) != 0;

929 
	}
}

931 
UBoŞ
 
	$v”siÚF‹r
(
UCh¬32
 
ch
, * 
cÚ‹xt
) {

932 cÚ¡ 
UV”siÚInfo
 
nÚe
 = { 0, 0, 0, 0 };

933 
UV”siÚInfo
 
v
;

934 
	`u_ch¬Age
(
ch
, 
v
);

935 
UV”siÚInfo
* 
v”siÚ
 = (UV”siÚInfo*)
cÚ‹xt
;

936  
	`u´v_memcmp
(&
v
, &
nÚe
, (v)è> 0 && u´v_memcmp(&v, 
v”siÚ
, (v)) <= 0;

937 
	}
}

940 
UPrİ”ty
 
	m´İ
;

941 
št32_t
 
	mv®ue
;

942 } 
	tIÁPrİ”tyCÚ‹xt
;

944 
UBoŞ
 
	$štPrİ”tyF‹r
(
UCh¬32
 
ch
, * 
cÚ‹xt
) {

945 
IÁPrİ”tyCÚ‹xt
* 
c
 = (IÁPrİ”tyCÚ‹xt*)
cÚ‹xt
;

946  
	`u_g‘IÁPrİ”tyV®ue
((
UCh¬32
è
ch
, 
c
->
´İ
è=ğc->
v®ue
;

947 
	}
}

949 
UBoŞ
 
	$sütEx‹nsiÚsF‹r
(
UCh¬32
 
ch
, * 
cÚ‹xt
) {

950  
	`usüt_hasSüt
(
ch
, *(
USütCode
*)
cÚ‹xt
);

951 
	}
}

956 
	gUnicodeS‘
::
­¶yF‹r
(
UnicodeS‘
::
F‹r
 
f‹r
,

957 * 
cÚ‹xt
,

958 
št32_t
 
¤c
,

959 
UE¼ÜCode
 &
¡©us
) {

960 ià(
U_FAILURE
(
¡©us
)) ;

971 cÚ¡ 
UnicodeS‘
* 
	gšşusiÚs
 = 
g‘InşusiÚs
(
¤c
, 
¡©us
);

972 ià(
U_FAILURE
(
¡©us
)) {

976 
ş—r
();

978 
UCh¬32
 
	g¡¬tHasPrİ”ty
 = -1;

979 
št32_t
 
	glim™Rªge
 = 
šşusiÚs
->
g‘RªgeCouÁ
();

981 
	gj
=0; j<
	glim™Rªge
; ++j) {

983 
UCh¬32
 
	g¡¬t
 = 
šşusiÚs
->
g‘RªgeS¹
(
j
);

984 
UCh¬32
 
	g’d
 = 
šşusiÚs
->
g‘RªgeEnd
(
j
);

987 
UCh¬32
 
	gch
 = 
¡¬t
; ch <ğ
’d
; ++ch) {

990 ià((*
	gf‹r
)(
	gch
, 
	gcÚ‹xt
)) {

991 ià(
	g¡¬tHasPrİ”ty
 < 0) {

992 
	g¡¬tHasPrİ”ty
 = 
ch
;

994 } ià(
	g¡¬tHasPrİ”ty
 >= 0) {

995 
add
(
¡¬tHasPrİ”ty
, 
ch
-1);

996 
	g¡¬tHasPrİ”ty
 = -1;

1000 ià(
	g¡¬tHasPrİ”ty
 >= 0) {

1001 
add
((
UCh¬32
)
¡¬tHasPrİ”ty
, (UChar32)0x10FFFF);

1003 ià(
isBogus
(è&& 
U_SUCCESS
(
¡©us
)) {

1005 
	g¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1009 
UBoŞ
 
	$mungeCh¬Name
(* 
d¡
, cÚ¡ * 
¤c
, 
št32_t
 
d¡C­ac™y
) {

1011 
št32_t
 
j
 = 0;

1012 
ch
;

1013 --
d¡C­ac™y
;

1014 (
ch
 = *
¤c
++) != 0) {

1015 ià(
ch
 =ğ' ' && (
j
==0 || (j>0 && 
d¡
[j-1]==' '))) {

1018 ià(
j
 >ğ
d¡C­ac™y
è 
FALSE
;

1019 
d¡
[
j
++] = 
ch
;

1021 ià(
j
 > 0 && 
d¡
[j-1] == ' ') --j;

1022 
d¡
[
j
] = 0;

1023  
TRUE
;

1024 
	}
}

1030 
	#FAIL
(
ec
è{ec=
U_ILLEGAL_ARGUMENT_ERROR
;  *
this
;}

	)

1032 
	gUnicodeS‘
&

1033 
	gUnicodeS‘
::
	$­¶yIÁPrİ”tyV®ue
(
UPrİ”ty
 
´İ
, 
št32_t
 
v®ue
, 
UE¼ÜCode
& 
ec
) {

1034 ià(
	`U_FAILURE
(
ec
è|| 
	`isFroz’
()è *
this
;

1036 ià(
´İ
 =ğ
UCHAR_GENERAL_CATEGORY_MASK
) {

1037 
	`­¶yF‹r
(
g’”®C©egÜyMaskF‹r
, &
v®ue
, 
UPROPS_SRC_CHAR
, 
ec
);

1038 } ià(
´İ
 =ğ
UCHAR_SCRIPT_EXTENSIONS
) {

1039 
USütCode
 
süt
 = (USütCode)
v®ue
;

1040 
	`­¶yF‹r
(
sütEx‹nsiÚsF‹r
, &
süt
, 
UPROPS_SRC_PROPSVEC
, 
ec
);

1042 
IÁPrİ”tyCÚ‹xt
 
c
 = {
´İ
, 
v®ue
};

1043 
	`­¶yF‹r
(
štPrİ”tyF‹r
, &
c
, 
	`u´İs_g‘Sourû
(
´İ
), 
ec
);

1045  *
this
;

1046 
	}
}

1048 
	gUnicodeS‘
&

1049 
	gUnicodeS‘
::
	$­¶yPrİ”tyAlŸs
(cÚ¡ 
UnicodeSŒšg
& 
´İ
,

1050 cÚ¡ 
UnicodeSŒšg
& 
v®ue
,

1051 
UE¼ÜCode
& 
ec
) {

1052 ià(
	`U_FAILURE
(
ec
è|| 
	`isFroz’
()è *
this
;

1060 ifĞ!
	`u´v_isInv¬ŸÁUSŒšg
(
´İ
.
	`g‘Bufãr
(),…rİ.
	`Ëngth
()) ||

1061 !
	`u´v_isInv¬ŸÁUSŒšg
(
v®ue
.
	`g‘Bufãr
(), v®ue.
	`Ëngth
())

1063 
	`FAIL
(
ec
);

1065 
Ch¬SŒšg
 
²ame
, 
vÇme
;

1066 
²ame
.
	`­³ndInv¬ŸÁCh¬s
(
´İ
, 
ec
);

1067 
vÇme
.
	`­³ndInv¬ŸÁCh¬s
(
v®ue
, 
ec
);

1068 ià(
	`U_FAILURE
(
ec
)è *
this
;

1070 
UPrİ”ty
 
p
;

1071 
št32_t
 
v
;

1072 
UBoŞ
 
mu¡NÙBeEm±y
 = 
FALSE
, 
šv”t
 = FALSE;

1074 ià(
v®ue
.
	`Ëngth
() > 0) {

1075 
p
 = 
	`u_g‘Prİ”tyEnum
(
²ame
.
	`d©a
());

1076 ià(
p
 =ğ
UCHAR_INVALID_CODE
è
	`FAIL
(
ec
);

1079 ià(
p
 =ğ
UCHAR_GENERAL_CATEGORY
) {

1080 
p
 = 
UCHAR_GENERAL_CATEGORY_MASK
;

1083 ià((
p
 >ğ
UCHAR_BINARY_START
 &&… < 
UCHAR_BINARY_LIMIT
) ||

1084 (
p
 >ğ
UCHAR_INT_START
 &&… < 
UCHAR_INT_LIMIT
) ||

1085 (
p
 >ğ
UCHAR_MASK_START
 &&… < 
UCHAR_MASK_LIMIT
)) {

1086 
v
 = 
	`u_g‘Prİ”tyV®ueEnum
(
p
, 
vÇme
.
	`d©a
());

1087 ià(
v
 =ğ
UCHAR_INVALID_CODE
) {

1089 ià(
p
 =ğ
UCHAR_CANONICAL_COMBINING_CLASS
 ||

1090 
p
 =ğ
UCHAR_TRAIL_CANONICAL_COMBINING_CLASS
 ||

1091 
p
 =ğ
UCHAR_LEAD_CANONICAL_COMBINING_CLASS
) {

1092 * 
’d
;

1093 
v®ue
 = 
	`u´v_¡¹od
(
vÇme
.
	`d©a
(), &
’d
);

1094 
v
 = (
št32_t
è
v®ue
;

1095 ià(
v
 !ğ
v®ue
 || v < 0 || *
’d
 != 0) {

1097 
	`FAIL
(
ec
);

1101 
mu¡NÙBeEm±y
 = 
TRUE
;

1103 
	`FAIL
(
ec
);

1110 
p
) {

1111 
UCHAR_NUMERIC_VALUE
:

1113 * 
’d
;

1114 
v®ue
 = 
	`u´v_¡¹od
(
vÇme
.
	`d©a
(), &
’d
);

1115 ià(*
’d
 != 0) {

1116 
	`FAIL
(
ec
);

1118 
	`­¶yF‹r
(
num”icV®ueF‹r
, &
v®ue
, 
UPROPS_SRC_CHAR
, 
ec
);

1119  *
this
;

1122 
UCHAR_NAME
:

1123 
UCHAR_UNICODE_1_NAME
:

1127 
buf
[128];

1128 ià(!
	`mungeCh¬Name
(
buf
, 
vÇme
.
	`d©a
(), (buf))è
	`FAIL
(
ec
);

1129 
UCh¬NameChoiû
 
choiû
 = (
p
 =ğ
UCHAR_NAME
) ?

1130 
U_EXTENDED_CHAR_NAME
 : 
U_UNICODE_10_CHAR_NAME
;

1131 
UCh¬32
 
ch
 = 
	`u_ch¬FromName
(
choiû
, 
buf
, &
ec
);

1132 ià(
	`U_SUCCESS
(
ec
)) {

1133 
	`ş—r
();

1134 
	`add
(
ch
);

1135  *
this
;

1137 
	`FAIL
(
ec
);

1141 
UCHAR_AGE
:

1145 
buf
[128];

1146 ià(!
	`mungeCh¬Name
(
buf
, 
vÇme
.
	`d©a
(), (buf))è
	`FAIL
(
ec
);

1147 
UV”siÚInfo
 
v”siÚ
;

1148 
	`u_v”siÚFromSŒšg
(
v”siÚ
, 
buf
);

1149 
	`­¶yF‹r
(
v”siÚF‹r
, &
v”siÚ
, 
UPROPS_SRC_PROPSVEC
, 
ec
);

1150  *
this
;

1153 
UCHAR_SCRIPT_EXTENSIONS
:

1154 
v
 = 
	`u_g‘Prİ”tyV®ueEnum
(
UCHAR_SCRIPT
, 
vÇme
.
	`d©a
());

1155 ià(
v
 =ğ
UCHAR_INVALID_CODE
) {

1156 
	`FAIL
(
ec
);

1163 
	`FAIL
(
ec
);

1171 
p
 = 
UCHAR_GENERAL_CATEGORY_MASK
;

1172 
v
 = 
	`u_g‘Prİ”tyV®ueEnum
(
p
, 
²ame
.
	`d©a
());

1173 ià(
v
 =ğ
UCHAR_INVALID_CODE
) {

1174 
p
 = 
UCHAR_SCRIPT
;

1175 
v
 = 
	`u_g‘Prİ”tyV®ueEnum
(
p
, 
²ame
.
	`d©a
());

1176 ià(
v
 =ğ
UCHAR_INVALID_CODE
) {

1177 
p
 = 
	`u_g‘Prİ”tyEnum
(
²ame
.
	`d©a
());

1178 ià(
p
 >ğ
UCHAR_BINARY_START
 &&… < 
UCHAR_BINARY_LIMIT
) {

1179 
v
 = 1;

1180 } ià(0 =ğ
	`u´v_com·»Prİ”tyNames
(
ANY
, 
²ame
.
	`d©a
())) {

1181 
	`£t
(
MIN_VALUE
, 
MAX_VALUE
);

1182  *
this
;

1183 } ià(0 =ğ
	`u´v_com·»Prİ”tyNames
(
ASCII
, 
²ame
.
	`d©a
())) {

1184 
	`£t
(0, 0x7F);

1185  *
this
;

1186 } ià(0 =ğ
	`u´v_com·»Prİ”tyNames
(
ASSIGNED
, 
²ame
.
	`d©a
())) {

1188 
p
 = 
UCHAR_GENERAL_CATEGORY_MASK
;

1189 
v
 = 
U_GC_CN_MASK
;

1190 
šv”t
 = 
TRUE
;

1192 
	`FAIL
(
ec
);

1198 
	`­¶yIÁPrİ”tyV®ue
(
p
, 
v
, 
ec
);

1199 if(
šv”t
) {

1200 
	`com¶em’t
();

1203 ià(
	`U_SUCCESS
(
ec
è&& (
mu¡NÙBeEm±y
 && 
	`isEm±y
())) {

1206 
ec
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1209 ià(
	`isBogus
(è&& 
	`U_SUCCESS
(
ec
)) {

1211 
ec
 = 
U_MEMORY_ALLOCATION_ERROR
;

1213  *
this
;

1214 
	}
}

1224 
UBoŞ
 
	gUnicodeS‘
::
	$»£mbËsPrİ”tyP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

1225 
št32_t
 
pos
) {

1227 ià((
pos
+5è> 
·‰”n
.
	`Ëngth
()) {

1228  
FALSE
;

1232  
	`isPOSIXO³n
(
·‰”n
, 
pos
è|| 
	`isP”lO³n
Õ©‹º,…osè|| 
	`isNameO³n
(pattern,…os);

1233 
	}
}

1243 
UBoŞ
 
	gUnicodeS‘
::
	$»£mbËsPrİ”tyP©‹º
(
RuËCh¬aù”I‹¿tÜ
& 
ch¬s
,

1244 
št32_t
 
™”O±s
) {

1246 
UBoŞ
 
»suÉ
 = 
FALSE
, 
l™”®
;

1247 
UE¼ÜCode
 
ec
 = 
U_ZERO_ERROR
;

1248 
™”O±s
 &ğ~
RuËCh¬aù”I‹¿tÜ
::
PARSE_ESCAPES
;

1249 
RuËCh¬aù”I‹¿tÜ
::
Pos
 
pos
;

1250 
ch¬s
.
	`g‘Pos
(
pos
);

1251 
UCh¬32
 
c
 = 
ch¬s
.
	`Ãxt
(
™”O±s
, 
l™”®
, 
ec
);

1252 ià(
c
 == 0x5B || c == 0x5C ) {

1253 
UCh¬32
 
d
 = 
ch¬s
.
	`Ãxt
(
™”O±s
 & ~
RuËCh¬aù”I‹¿tÜ
::
SKIP_WHITESPACE
,

1254 
l™”®
, 
ec
);

1255 
»suÉ
 = (
c
 =ğ0x5B ) ? (
d
 == 0x3A ) :

1256 (
d
 == 0x4E || d == 0x70 || d == 0x50 );

1258 
ch¬s
.
	`£tPos
(
pos
);

1259  
»suÉ
 && 
	`U_SUCCESS
(
ec
);

1260 
	}
}

1265 
	gUnicodeS‘
& UnicodeS‘::
	$­¶yPrİ”tyP©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·‰”n
,

1266 
P¬£Pos™iÚ
& 
µos
,

1267 
UE¼ÜCode
 &
ec
) {

1268 
št32_t
 
pos
 = 
µos
.
	`g‘Index
();

1270 
UBoŞ
 
posix
 = 
FALSE
;

1271 
UBoŞ
 
isName
 = 
FALSE
;

1272 
UBoŞ
 
šv”t
 = 
FALSE
;

1274 ià(
	`U_FAILURE
(
ec
)è *
this
;

1277 ià((
pos
+5è> 
·‰”n
.
	`Ëngth
()) {

1278 
	`FAIL
(
ec
);

1283 ià(
	`isPOSIXO³n
(
·‰”n
, 
pos
)) {

1284 
posix
 = 
TRUE
;

1285 
pos
 += 2;

1286 
pos
 = 
ICU_Ut™y
::
	`skWh™e¥aû
(
·‰”n
,…os);

1287 ià(
pos
 < 
·‰”n
.
	`Ëngth
(è&&…©‹º.
	`ch¬At
Õosè=ğ
COMPLEMENT
) {

1288 ++
pos
;

1289 
šv”t
 = 
TRUE
;

1291 } ià(
	`isP”lO³n
(
·‰”n
, 
pos
è|| 
	`isNameO³n
(pattern,…os)) {

1292 
UCh¬
 
c
 = 
·‰”n
.
	`ch¬At
(
pos
+1);

1293 
šv”t
 = (
c
 =ğ
UPPER_P
);

1294 
isName
 = (
c
 =ğ
UPPER_N
);

1295 
pos
 += 2;

1296 
pos
 = 
ICU_Ut™y
::
	`skWh™e¥aû
(
·‰”n
,…os);

1297 ià(
pos
 =ğ
·‰”n
.
	`Ëngth
(è||…©‹º.
	`ch¬At
Õos++è!ğ
OPEN_BRACE
) {

1299 
	`FAIL
(
ec
);

1303 
	`FAIL
(
ec
);

1307 
št32_t
 
şo£
 = 
·‰”n
.
	`šdexOf
(
posix
 ? 
POSIX_CLOSE
 : 
PERL_CLOSE
, 
pos
);

1308 ià(
şo£
 < 0) {

1310 
	`FAIL
(
ec
);

1316 
št32_t
 
equ®s
 = 
·‰”n
.
	`šdexOf
(
EQUALS
, 
pos
);

1317 
UnicodeSŒšg
 
´İName
, 
v®ueName
;

1318 ià(
equ®s
 >ğ0 &&ƒqu® < 
şo£
 && !
isName
) {

1320 
·‰”n
.
	`exŒaùB‘w“n
(
pos
, 
equ®s
, 
´İName
);

1321 
·‰”n
.
	`exŒaùB‘w“n
(
equ®s
+1, 
şo£
, 
v®ueName
);

1326 
·‰”n
.
	`exŒaùB‘w“n
(
pos
, 
şo£
, 
´İName
);

1329 ià(
isName
) {

1335 
v®ueName
 = 
´İName
;

1336 
´İName
 = 
	`UnicodeSŒšg
(
NAME_PROP
, 
NAME_PROP_LENGTH
, 
US_INV
);

1340 
	`­¶yPrİ”tyAlŸs
(
´İName
, 
v®ueName
, 
ec
);

1342 ià(
	`U_SUCCESS
(
ec
)) {

1343 ià(
šv”t
) {

1344 
	`com¶em’t
();

1349 
µos
.
	`£tIndex
(
şo£
 + (
posix
 ? 2 : 1));

1352  *
this
;

1353 
	}
}

1364 
	gUnicodeS‘
::
	$­¶yPrİ”tyP©‹º
(
RuËCh¬aù”I‹¿tÜ
& 
ch¬s
,

1365 
UnicodeSŒšg
& 
»butP©
,

1366 
UE¼ÜCode
& 
ec
) {

1367 ià(
	`U_FAILURE
(
ec
)) ;

1368 
UnicodeSŒšg
 
·‰”n
;

1369 
ch¬s
.
	`lookah—d
(
·‰”n
);

1370 
P¬£Pos™iÚ
 
	`pos
(0);

1371 
	`­¶yPrİ”tyP©‹º
(
·‰”n
, 
pos
, 
ec
);

1372 ià(
	`U_FAILURE
(
ec
)) ;

1373 ià(
pos
.
	`g‘Index
() == 0) {

1375 
ec
 = 
U_MALFORMED_SET
;

1378 
ch¬s
.
	`jum·h—d
(
pos
.
	`g‘Index
());

1379 
»butP©
.
	`­³nd
(
·‰”n
, 0, 
pos
.
	`g‘Index
());

1380 
	}
}

1388 
šlše
 

1389 
	$addCa£M­pšg
(
UnicodeS‘
 &
£t
, 
št32_t
 
»suÉ
, cÚ¡ 
UCh¬
 *
fuÎ
, 
UnicodeSŒšg
 &
¡r
) {

1390 if(
»suÉ
 >= 0) {

1391 if(
»suÉ
 > 
UCASE_MAX_STRING_LENGTH
) {

1393 
£t
.
	`add
(
»suÉ
);

1396 
¡r
.
	`£tTo
((
UBoŞ
)
FALSE
, 
fuÎ
, 
»suÉ
);

1397 
£t
.
	`add
(
¡r
);

1402 
	}
}

1404 
	gUnicodeS‘
& UnicodeS‘::
	$şo£Ov”
(
št32_t
 
©Œibu‹
) {

1405 ià(
	`isFroz’
(è|| 
	`isBogus
()) {

1406  *
this
;

1408 ià(
©Œibu‹
 & (
USET_CASE_INSENSITIVE
 | 
USET_ADD_CASE_MAPPINGS
)) {

1409 cÚ¡ 
UCa£Prİs
 *
c¥
 = 
	`uÿ£_g‘SšgËtÚ
();

1411 
UnicodeS‘
 
	`fŞdS‘
(*
this
);

1412 
UnicodeSŒšg
 
¡r
;

1413 
US‘Add”
 
§
 = {

1414 
fŞdS‘
.
	`toUS‘
(),

1415 
_£t_add
,

1416 
_£t_addRªge
,

1417 
_£t_addSŒšg
,

1418 
NULL
,

1419 
NULL


1425 ià(
©Œibu‹
 & 
USET_CASE_INSENSITIVE
) {

1426 
fŞdS‘
.
¡ršgs
->
	`»moveAÎEËm’ts
();

1429 
št32_t
 
n
 = 
	`g‘RªgeCouÁ
();

1430 
UCh¬32
 
»suÉ
;

1431 cÚ¡ 
UCh¬
 *
fuÎ
;

1432 
št32_t
 
locCache
 = 0;

1434 
št32_t
 
i
=0; i<
n
; ++i) {

1435 
UCh¬32
 
¡¬t
 = 
	`g‘RªgeS¹
(
i
);

1436 
UCh¬32
 
’d
 = 
	`g‘RªgeEnd
(
i
);

1438 ià(
©Œibu‹
 & 
USET_CASE_INSENSITIVE
) {

1440 
UCh¬32
 
ı
=
¡¬t
; cp<=
’d
; ++cp) {

1441 
	`uÿ£_addCa£Closu»
(
c¥
, 
ı
, &
§
);

1446 
UCh¬32
 
ı
=
¡¬t
; cp<=
’d
; ++cp) {

1447 
»suÉ
 = 
	`uÿ£_toFuÎLow”
(
c¥
, 
ı
, 
NULL
, NULL, &
fuÎ
, "", &
locCache
);

1448 
	`addCa£M­pšg
(
fŞdS‘
, 
»suÉ
, 
fuÎ
, 
¡r
);

1450 
»suÉ
 = 
	`uÿ£_toFuÎT™Ë
(
c¥
, 
ı
, 
NULL
, NULL, &
fuÎ
, "", &
locCache
);

1451 
	`addCa£M­pšg
(
fŞdS‘
, 
»suÉ
, 
fuÎ
, 
¡r
);

1453 
»suÉ
 = 
	`uÿ£_toFuÎUµ”
(
c¥
, 
ı
, 
NULL
, NULL, &
fuÎ
, "", &
locCache
);

1454 
	`addCa£M­pšg
(
fŞdS‘
, 
»suÉ
, 
fuÎ
, 
¡r
);

1456 
»suÉ
 = 
	`uÿ£_toFuÎFŞdšg
(
c¥
, 
ı
, &
fuÎ
, 0);

1457 
	`addCa£M­pšg
(
fŞdS‘
, 
»suÉ
, 
fuÎ
, 
¡r
);

1461 ià(
¡ršgs
 !ğ
NULL
 && sŒšgs->
	`size
() > 0) {

1462 ià(
©Œibu‹
 & 
USET_CASE_INSENSITIVE
) {

1463 
št32_t
 
j
=0; j<
¡ršgs
->
	`size
(); ++j) {

1464 
¡r
 = *(cÚ¡ 
UnicodeSŒšg
 *è
¡ršgs
->
	`–em’tAt
(
j
);

1465 
¡r
.
	`fŞdCa£
();

1466 if(!
	`uÿ£_addSŒšgCa£Closu»
(
c¥
, 
¡r
.
	`g‘Bufãr
(), sŒ.
	`Ëngth
(), &
§
)) {

1467 
fŞdS‘
.
	`add
(
¡r
);

1471 
LoÿË
 
	`roÙ
("");

1472 #ià!
UCONFIG_NO_BREAK_ITERATION


1473 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

1474 
B»akI‹¿tÜ
 *
bi
 = B»akI‹¿tÜ::
	`ü—‹WÜdIn¡ªû
(
roÙ
, 
¡©us
);

1475 ià(
	`U_SUCCESS
(
¡©us
)) {

1477 cÚ¡ 
UnicodeSŒšg
 *
pSŒ
;

1479 
št32_t
 
j
=0; j<
¡ršgs
->
	`size
(); ++j) {

1480 
pSŒ
 = (cÚ¡ 
UnicodeSŒšg
 *è
¡ršgs
->
	`–em’tAt
(
j
);

1481 (
¡r
 = *
pSŒ
).
	`toLow”
(
roÙ
);

1482 
fŞdS‘
.
	`add
(
¡r
);

1483 #ià!
UCONFIG_NO_BREAK_ITERATION


1484 (
¡r
 = *
pSŒ
).
	`toT™Ë
(
bi
, 
roÙ
);

1485 
fŞdS‘
.
	`add
(
¡r
);

1487 (
¡r
 = *
pSŒ
).
	`toUµ”
(
roÙ
);

1488 
fŞdS‘
.
	`add
(
¡r
);

1489 (
¡r
 = *
pSŒ
).
	`fŞdCa£
();

1490 
fŞdS‘
.
	`add
(
¡r
);

1492 #ià!
UCONFIG_NO_BREAK_ITERATION


1494 
d–‘e
 
bi
;

1498 *
this
 = 
fŞdS‘
;

1501  *
this
;

1502 
	}
}

1504 
	gU_NAMESPACE_END


	@unisetspan.cpp

17 
	~"unicode/uty³s.h
"

18 
	~"unicode/uni£t.h
"

19 
	~"unicode/u¡ršg.h
"

20 
	~"cmemÜy.h
"

21 
	~"uveùÜ.h
"

22 
	~"uni£t¥ª.h
"

24 
U_NAMESPACE_BEGIN


53 şas 
	cOff£tLi¡
 {

54 
	mpublic
:

55 
	$Off£tLi¡
(è: 
	`li¡
(
¡©icLi¡
), 
	`ÿ·c™y
(0), 
	`Ëngth
(0), 
	$¡¬t
(0) {}

57 ~
	$Off£tLi¡
() {

58 if(
li¡
!=
¡©icLi¡
) {

59 
	`u´v_ä“
(
li¡
);

61 
	}
}

64 
	$£tMaxL’gth
(
št32_t
 
maxL’gth
) {

65 if(
maxL’gth
<=(
št32_t
)(
¡©icLi¡
)) {

66 
ÿ·c™y
=(
št32_t
)(
¡©icLi¡
);

68 
UBoŞ
 *
l
=(UBoŞ *)
	`u´v_m®loc
(
maxL’gth
);

69 if(
l
!=
NULL
) {

70 
li¡
=
l
;

71 
ÿ·c™y
=
maxL’gth
;

74 
	`u´v_mem£t
(
li¡
, 0, 
ÿ·c™y
);

75 
	}
}

77 
	$ş—r
() {

78 
	`u´v_mem£t
(
li¡
, 0, 
ÿ·c™y
);

79 
¡¬t
=
Ëngth
=0;

80 
	}
}

82 
UBoŞ
 
	$isEm±y
() const {

83  (
UBoŞ
)(
Ëngth
==0);

84 
	}
}

91 
	$shiá
(
št32_t
 
d–
) {

92 
št32_t
 
i
=
¡¬t
+
d–
;

93 if(
i
>=
ÿ·c™y
) {

94 
i
-=
ÿ·c™y
;

96 if(
li¡
[
i
]) {

97 
li¡
[
i
]=
FALSE
;

98 --
Ëngth
;

100 
¡¬t
=
i
;

101 
	}
}

105 
	$addOff£t
(
št32_t
 
off£t
) {

106 
št32_t
 
i
=
¡¬t
+
off£t
;

107 if(
i
>=
ÿ·c™y
) {

108 
i
-=
ÿ·c™y
;

110 
li¡
[
i
]=
TRUE
;

111 ++
Ëngth
;

112 
	}
}

115 
UBoŞ
 
	$cÚšsOff£t
(
št32_t
 
off£t
) const {

116 
št32_t
 
i
=
¡¬t
+
off£t
;

117 if(
i
>=
ÿ·c™y
) {

118 
i
-=
ÿ·c™y
;

120  
li¡
[
i
];

121 
	}
}

126 
št32_t
 
	$pİMšimum
() {

128 
št32_t
 
i
=
¡¬t
, 
»suÉ
;

129 ++
i
<
ÿ·c™y
) {

130 if(
li¡
[
i
]) {

131 
li¡
[
i
]=
FALSE
;

132 --
Ëngth
;

133 
»suÉ
=
i
-
¡¬t
;

134 
¡¬t
=
i
;

135  
»suÉ
;

142 
»suÉ
=
ÿ·c™y
-
¡¬t
;

143 
i
=0;

144 !
li¡
[
i
]) {

145 ++
i
;

147 
li¡
[
i
]=
FALSE
;

148 --
Ëngth
;

149 
¡¬t
=
i
;

150  
»suÉ
+=
i
;

151 
	}
}

153 
	g´iv©e
:

154 
UBoŞ
 *
li¡
;

155 
št32_t
 
	gÿ·c™y
;

156 
št32_t
 
	gËngth
;

157 
št32_t
 
	g¡¬t
;

159 
UBoŞ
 
	g¡©icLi¡
[16];

163 
št32_t


164 
	$g‘UTF8L’gth
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
) {

165 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

166 
št32_t
 
Ëngth8
=0;

167 
	`u_¡rToUTF8
(
NULL
, 0, &
Ëngth8
, 
s
, 
Ëngth
, &
”rÜCode
);

168 if(
	`U_SUCCESS
(
”rÜCode
è||ƒ¼ÜCode==
U_BUFFER_OVERFLOW_ERROR
) {

169  
Ëngth8
;

175 
	}
}

178 
št32_t


179 
	$­³ndUTF8
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
ušt8_t
 *
t
, iÁ32_ˆ
ÿ·c™y
) {

180 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

181 
št32_t
 
Ëngth8
=0;

182 
	`u_¡rToUTF8
((*)
t
, 
ÿ·c™y
, &
Ëngth8
, 
s
, 
Ëngth
, &
”rÜCode
);

183 if(
	`U_SUCCESS
(
”rÜCode
)) {

184  
Ëngth8
;

190 
	}
}

192 
šlše
 
ušt8_t


193 
	$makeS·nL’gthBy‹
(
št32_t
 
¥ªL’gth
) {

195  
¥ªL’gth
<0xã ? (
ušt8_t
)spanLength : (uint8_t)0xfe;

196 
	}
}

200 
	gUnicodeS‘SŒšgS·n
::
	$UnicodeS‘SŒšgS·n
(cÚ¡ 
UnicodeS‘
 &
£t
,

201 cÚ¡ 
UVeùÜ
 &
£tSŒšgs
,

202 
ušt32_t
 
which
)

203 : 
	`¥ªS‘
(0, 0x10ffff), 
	`pS·nNÙS‘
(
NULL
), 
	`¡ršgs
(
£tSŒšgs
),

204 
	`utf8L’gths
(
NULL
), 
	`¥ªL’gths
(NULL), 
	`utf8
(NULL),

205 
	`utf8L’gth
(0),

206 
	`maxL’gth16
(0), 
	`maxL’gth8
(0),

207 
	`®l
((
UBoŞ
)(
which
==
ALL
)) {

208 
¥ªS‘
.
	`»šAÎ
(
£t
);

209 if(
which
&
NOT_CONTAINED
) {

212 
pS·nNÙS‘
=&
¥ªS‘
;

222 
št32_t
 
¡ršgsL’gth
=
¡ršgs
.
	`size
();

224 
št32_t
 
i
, 
¥ªL’gth
;

225 
UBoŞ
 
someR–evªt
=
FALSE
;

226 
i
=0; i<
¡ršgsL’gth
; ++i) {

227 cÚ¡ 
UnicodeSŒšg
 &
¡ršg
=*(cÚ¡ UnicodeSŒšg *)
¡ršgs
.
	`–em’tAt
(
i
);

228 cÚ¡ 
UCh¬
 *
s16
=
¡ršg
.
	`g‘Bufãr
();

229 
št32_t
 
Ëngth16
=
¡ršg
.
	`Ëngth
();

230 
UBoŞ
 
thisR–evªt
;

231 
¥ªL’gth
=
¥ªS‘
.
	`¥ª
(
s16
, 
Ëngth16
, 
USET_SPAN_CONTAINED
);

232 if(
¥ªL’gth
<
Ëngth16
) {

233 
someR–evªt
=
thisR–evªt
=
TRUE
;

235 
thisR–evªt
=
FALSE
;

237 if((
which
&
UTF16
è&& 
Ëngth16
>
maxL’gth16
) {

238 
maxL’gth16
=
Ëngth16
;

240 if((
which
&
UTF8
è&& (
thisR–evªt
 || (which&
CONTAINED
))) {

241 
št32_t
 
Ëngth8
=
	`g‘UTF8L’gth
(
s16
, 
Ëngth16
);

242 
utf8L’gth
+=
Ëngth8
;

243 if(
Ëngth8
>
maxL’gth8
) {

244 
maxL’gth8
=
Ëngth8
;

248 if(!
someR–evªt
) {

249 
maxL’gth16
=
maxL’gth8
=0;

255 if(
®l
) {

256 
¥ªS‘
.
	`ä“ze
();

259 
ušt8_t
 *
¥ªBackL’gths
;

260 
ušt8_t
 *
¥ªUTF8L’gths
;

261 
ušt8_t
 *
¥ªBackUTF8L’gths
;

264 
št32_t
 
®locSize
;

265 if(
®l
) {

267 
®locSize
=
¡ršgsL’gth
*(4+1+1+1+1)+
utf8L’gth
;

269 
®locSize
=
¡ršgsL’gth
;

270 if(
which
&
UTF8
) {

272 
®locSize
+=
¡ršgsL’gth
*4+
utf8L’gth
;

275 if(
®locSize
<=(
št32_t
)(
¡©icL’gths
)) {

276 
utf8L’gths
=
¡©icL’gths
;

278 
utf8L’gths
=(
št32_t
 *)
	`u´v_m®loc
(
®locSize
);

279 if(
utf8L’gths
==
NULL
) {

280 
maxL’gth16
=
maxL’gth8
=0;

285 if(
®l
) {

287 
¥ªL’gths
=(
ušt8_t
 *)(
utf8L’gths
+
¡ršgsL’gth
);

288 
¥ªBackL’gths
=
¥ªL’gths
+
¡ršgsL’gth
;

289 
¥ªUTF8L’gths
=
¥ªBackL’gths
+
¡ršgsL’gth
;

290 
¥ªBackUTF8L’gths
=
¥ªUTF8L’gths
+
¡ršgsL’gth
;

291 
utf8
=
¥ªBackUTF8L’gths
+
¡ršgsL’gth
;

294 if(
which
&
UTF8
) {

295 
¥ªL’gths
=(
ušt8_t
 *)(
utf8L’gths
+
¡ršgsL’gth
);

296 
utf8
=
¥ªL’gths
+
¡ršgsL’gth
;

298 
¥ªL’gths
=(
ušt8_t
 *)
utf8L’gths
;

300 
¥ªBackL’gths
=
¥ªUTF8L’gths
=
¥ªBackUTF8L’gths
=
¥ªL’gths
;

304 
št32_t
 
utf8CouÁ
=0;

306 
i
=0; i<
¡ršgsL’gth
; ++i) {

307 cÚ¡ 
UnicodeSŒšg
 &
¡ršg
=*(cÚ¡ UnicodeSŒšg *)
¡ršgs
.
	`–em’tAt
(
i
);

308 cÚ¡ 
UCh¬
 *
s16
=
¡ršg
.
	`g‘Bufãr
();

309 
št32_t
 
Ëngth16
=
¡ršg
.
	`Ëngth
();

310 
¥ªL’gth
=
¥ªS‘
.
	`¥ª
(
s16
, 
Ëngth16
, 
USET_SPAN_CONTAINED
);

311 if(
¥ªL’gth
<
Ëngth16
) {

312 if(
which
&
UTF16
) {

313 if(
which
&
CONTAINED
) {

314 if(
which
&
FWD
) {

315 
¥ªL’gths
[
i
]=
	`makeS·nL’gthBy‹
(
¥ªL’gth
);

317 if(
which
&
BACK
) {

318 
¥ªL’gth
=
Ëngth16
-
¥ªS‘
.
	`¥ªBack
(
s16
,†’gth16, 
USET_SPAN_CONTAINED
);

319 
¥ªBackL’gths
[
i
]=
	`makeS·nL’gthBy‹
(
¥ªL’gth
);

322 
¥ªL’gths
[
i
]=
¥ªBackL’gths
[i]=0;

325 if(
which
&
UTF8
) {

326 
ušt8_t
 *
s8
=
utf8
+
utf8CouÁ
;

327 
št32_t
 
Ëngth8
=
	`­³ndUTF8
(
s16
, 
Ëngth16
, 
s8
, 
utf8L’gth
-
utf8CouÁ
);

328 
utf8CouÁ
+=
utf8L’gths
[
i
]=
Ëngth8
;

329 if(
Ëngth8
==0) {

330 
¥ªUTF8L’gths
[
i
]=
¥ªBackUTF8L’gths
[i]=(
ušt8_t
)
ALL_CP_CONTAINED
;

332 if(
which
&
CONTAINED
) {

333 if(
which
&
FWD
) {

334 
¥ªL’gth
=
¥ªS‘
.
	`¥ªUTF8
((cÚ¡ *)
s8
, 
Ëngth8
, 
USET_SPAN_CONTAINED
);

335 
¥ªUTF8L’gths
[
i
]=
	`makeS·nL’gthBy‹
(
¥ªL’gth
);

337 if(
which
&
BACK
) {

338 
¥ªL’gth
=
Ëngth8
-
¥ªS‘
.
	`¥ªBackUTF8
((cÚ¡ *)
s8
,†’gth8, 
USET_SPAN_CONTAINED
);

339 
¥ªBackUTF8L’gths
[
i
]=
	`makeS·nL’gthBy‹
(
¥ªL’gth
);

342 
¥ªUTF8L’gths
[
i
]=
¥ªBackUTF8L’gths
[i]=0;

346 if(
which
&
NOT_CONTAINED
) {

349 
UCh¬32
 
c
;

350 if(
which
&
FWD
) {

351 
št32_t
 
Ën
=0;

352 
	`U16_NEXT
(
s16
, 
Ën
, 
Ëngth16
, 
c
);

353 
	`addToS·nNÙS‘
(
c
);

355 if(
which
&
BACK
) {

356 
št32_t
 
Ën
=
Ëngth16
;

357 
	`U16_PREV
(
s16
, 0, 
Ën
, 
c
);

358 
	`addToS·nNÙS‘
(
c
);

362 if(
which
&
UTF8
) {

363 if(
which
&
CONTAINED
) {

364 
ušt8_t
 *
s8
=
utf8
+
utf8CouÁ
;

365 
št32_t
 
Ëngth8
=
	`­³ndUTF8
(
s16
, 
Ëngth16
, 
s8
, 
utf8L’gth
-
utf8CouÁ
);

366 
utf8CouÁ
+=
utf8L’gths
[
i
]=
Ëngth8
;

368 
utf8L’gths
[
i
]=0;

371 if(
®l
) {

372 
¥ªL’gths
[
i
]=
¥ªBackL’gths
[i]=

373 
¥ªUTF8L’gths
[
i
]=
¥ªBackUTF8L’gths
[i]=

374 (
ušt8_t
)
ALL_CP_CONTAINED
;

377 
¥ªL’gths
[
i
]=(
ušt8_t
)
ALL_CP_CONTAINED
;

383 if(
®l
) {

384 
pS·nNÙS‘
->
	`ä“ze
();

386 
	}
}

389 
	gUnicodeS‘SŒšgS·n
::
	$UnicodeS‘SŒšgS·n
(cÚ¡ 
UnicodeS‘SŒšgS·n
 &
Ùh”SŒšgS·n
,

390 cÚ¡ 
UVeùÜ
 &
ÃwP¬’tS‘SŒšgs
)

391 : 
	`¥ªS‘
(
Ùh”SŒšgS·n
.
¥ªS‘
), 
	`pS·nNÙS‘
(
NULL
), 
	`¡ršgs
(
ÃwP¬’tS‘SŒšgs
),

392 
	`utf8L’gths
(
NULL
), 
	`¥ªL’gths
(NULL), 
	`utf8
(NULL),

393 
	`utf8L’gth
(
Ùh”SŒšgS·n
.
utf8L’gth
),

394 
	`maxL’gth16
(
Ùh”SŒšgS·n
.
maxL’gth16
), 
	`maxL’gth8
(Ùh”SŒšgS·n.
maxL’gth8
),

395 
	$®l
(
TRUE
) {

396 if(
Ùh”SŒšgS·n
.
pS·nNÙS‘
==&Ùh”SŒšgS·n.
¥ªS‘
) {

397 
pS·nNÙS‘
=&
¥ªS‘
;

399 
pS·nNÙS‘
=(
UnicodeS‘
 *)
Ùh”SŒšgS·n
.pS·nNÙS‘->
	`şÚe
();

404 
št32_t
 
¡ršgsL’gth
=
¡ršgs
.
	`size
();

405 
št32_t
 
®locSize
=
¡ršgsL’gth
*(4+1+1+1+1)+
utf8L’gth
;

406 if(
®locSize
<=(
št32_t
)(
¡©icL’gths
)) {

407 
utf8L’gths
=
¡©icL’gths
;

409 
utf8L’gths
=(
št32_t
 *)
	`u´v_m®loc
(
®locSize
);

410 if(
utf8L’gths
==
NULL
) {

411 
maxL’gth16
=
maxL’gth8
=0;

416 
¥ªL’gths
=(
ušt8_t
 *)(
utf8L’gths
+
¡ršgsL’gth
);

417 
utf8
=
¥ªL’gths
+
¡ršgsL’gth
*4;

418 
	`u´v_memıy
(
utf8L’gths
, 
Ùh”SŒšgS·n
.utf8L’gths, 
®locSize
);

419 
	}
}

421 
	gUnicodeS‘SŒšgS·n
::~
	$UnicodeS‘SŒšgS·n
() {

422 if(
pS·nNÙS‘
!=
NULL
 &&…S·nNÙS‘!=&
¥ªS‘
) {

423 
d–‘e
 
pS·nNÙS‘
;

425 if(
utf8L’gths
!=
NULL
 && utf8L’gths!=
¡©icL’gths
) {

426 
	`u´v_ä“
(
utf8L’gths
);

428 
	}
}

430 
	gUnicodeS‘SŒšgS·n
::
	$addToS·nNÙS‘
(
UCh¬32
 
c
) {

431 if(
pS·nNÙS‘
==
NULL
 ||…S·nNÙS‘==&
¥ªS‘
) {

432 if(
¥ªS‘
.
	`cÚšs
(
c
)) {

435 
UnicodeS‘
 *
ÃwS‘
=(UnicodeS‘ *)
¥ªS‘
.
	`şÚeAsThawed
();

436 if(
ÃwS‘
==
NULL
) {

439 
pS·nNÙS‘
=
ÃwS‘
;

442 
pS·nNÙS‘
->
	`add
(
c
);

443 
	}
}

446 
šlše
 
UBoŞ


447 
	$m©ches16
(cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
t
, 
št32_t
 
Ëngth
) {

449 if(*
s
++!=*
t
++) {

450  
FALSE
;

452 } --
Ëngth
>0);

453  
TRUE
;

454 
	}
}

456 
šlše
 
UBoŞ


457 
	$m©ches8
(cÚ¡ 
ušt8_t
 *
s
, cÚ¡ ušt8_ˆ*
t
, 
št32_t
 
Ëngth
) {

459 if(*
s
++!=*
t
++) {

460  
FALSE
;

462 } --
Ëngth
>0);

463  
TRUE
;

464 
	}
}

469 
šlše
 
UBoŞ


470 
	$m©ches16CPB
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
, cÚ¡ UCh¬ *
t
, iÁ32_ˆ
Ëngth
) {

471 
s
+=
¡¬t
;

472 
lim™
-=
¡¬t
;

473  
	`m©ches16
(
s
, 
t
, 
Ëngth
) &&

474 !(0<
¡¬t
 && 
	`U16_IS_LEAD
(
s
[-1]è&& 
	`U16_IS_TRAIL
(s[0])) &&

475 !(
Ëngth
<
lim™
 && 
	`U16_IS_LEAD
(
s
[Ëngth-1]è&& 
	`U16_IS_TRAIL
(s[length]));

476 
	}
}

480 
šlše
 
št32_t


481 
	$¥ªOÃ
(cÚ¡ 
UnicodeS‘
 &
£t
, cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
) {

482 
UCh¬
 
c
=*
s
, 
c2
;

483 if(
c
>=0xd800 && c<=0xdbfà&& 
Ëngth
>=2 && 
	`U16_IS_TRAIL
(
c2
=
s
[1])) {

484  
£t
.
	`cÚšs
(
	`U16_GET_SUPPLEMENTARY
(
c
, 
c2
)) ? 2 : -2;

486  
£t
.
	`cÚšs
(
c
) ? 1 : -1;

487 
	}
}

489 
šlše
 
št32_t


490 
	$¥ªOÃBack
(cÚ¡ 
UnicodeS‘
 &
£t
, cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
) {

491 
UCh¬
 
c
=
s
[
Ëngth
-1], 
c2
;

492 if(
c
>=0xdc00 && c<=0xdffà&& 
Ëngth
>=2 && 
	`U16_IS_LEAD
(
c2
=
s
[length-2])) {

493  
£t
.
	`cÚšs
(
	`U16_GET_SUPPLEMENTARY
(
c2
, 
c
)) ? 2 : -2;

495  
£t
.
	`cÚšs
(
c
) ? 1 : -1;

496 
	}
}

498 
šlše
 
št32_t


499 
	$¥ªOÃUTF8
(cÚ¡ 
UnicodeS‘
 &
£t
, cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
) {

500 
UCh¬32
 
c
=*
s
;

501 if((
št8_t
)
c
>=0) {

502  
£t
.
	`cÚšs
(
c
) ? 1 : -1;

505 
št32_t
 
i
=0;

506 
	`U8_NEXT
(
s
, 
i
, 
Ëngth
, 
c
);

507  
£t
.
	`cÚšs
(
c
è? 
i
 : -i;

508 
	}
}

510 
šlše
 
št32_t


511 
	$¥ªOÃBackUTF8
(cÚ¡ 
UnicodeS‘
 &
£t
, cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
) {

512 
UCh¬32
 
c
=
s
[
Ëngth
-1];

513 if((
št8_t
)
c
>=0) {

514  
£t
.
	`cÚšs
(
c
) ? 1 : -1;

516 
št32_t
 
i
=
Ëngth
-1;

517 
c
=
	`utf8_´evCh¬SaãBody
(
s
, 0, &
i
, c, -1);

518 
Ëngth
-=
i
;

519  
£t
.
	`cÚšs
(
c
è? 
Ëngth
 : -length;

520 
	}
}

630 
št32_t
 
	gUnicodeS‘SŒšgS·n
::
	$¥ª
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

631 if(
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
) {

632  
	`¥ªNÙ
(
s
, 
Ëngth
);

634 
št32_t
 
¥ªL’gth
=
¥ªS‘
.
	`¥ª
(
s
, 
Ëngth
, 
USET_SPAN_CONTAINED
);

635 if(
¥ªL’gth
==
Ëngth
) {

636  
Ëngth
;

640 
Off£tLi¡
 
off£ts
;

641 if(
¥ªCÚd™iÚ
==
USET_SPAN_CONTAINED
) {

643 
off£ts
.
	`£tMaxL’gth
(
maxL’gth16
);

645 
št32_t
 
pos
=
¥ªL’gth
, 
»¡
=
Ëngth
-pos;

646 
št32_t
 
i
, 
¡ršgsL’gth
=
¡ršgs
.
	`size
();

648 if(
¥ªCÚd™iÚ
==
USET_SPAN_CONTAINED
) {

649 
i
=0; i<
¡ršgsL’gth
; ++i) {

650 
št32_t
 
ov”Ïp
=
¥ªL’gths
[
i
];

651 if(
ov”Ïp
==
ALL_CP_CONTAINED
) {

654 cÚ¡ 
UnicodeSŒšg
 &
¡ršg
=*(cÚ¡ UnicodeSŒšg *)
¡ršgs
.
	`–em’tAt
(
i
);

655 cÚ¡ 
UCh¬
 *
s16
=
¡ršg
.
	`g‘Bufãr
();

656 
št32_t
 
Ëngth16
=
¡ršg
.
	`Ëngth
();

659 if(
ov”Ïp
>=
LONG_SPAN
) {

660 
ov”Ïp
=
Ëngth16
;

662 
	`U16_BACK_1
(
s16
, 0, 
ov”Ïp
);

664 if(
ov”Ïp
>
¥ªL’gth
) {

665 
ov”Ïp
=
¥ªL’gth
;

667 
št32_t
 
šc
=
Ëngth16
-
ov”Ïp
;

669 if(
šc
>
»¡
) {

673 if(!
off£ts
.
	`cÚšsOff£t
(
šc
è&& 
	`m©ches16CPB
(
s
, 
pos
-
ov”Ïp
, 
Ëngth
, 
s16
, 
Ëngth16
)) {

674 if(
šc
==
»¡
) {

675  
Ëngth
;

677 
off£ts
.
	`addOff£t
(
šc
);

679 if(
ov”Ïp
==0) {

682 --
ov”Ïp
;

683 ++
šc
;

687 
št32_t
 
maxInc
=0, 
maxOv”Ïp
=0;

688 
i
=0; i<
¡ršgsL’gth
; ++i) {

689 
št32_t
 
ov”Ïp
=
¥ªL’gths
[
i
];

693 cÚ¡ 
UnicodeSŒšg
 &
¡ršg
=*(cÚ¡ UnicodeSŒšg *)
¡ršgs
.
	`–em’tAt
(
i
);

694 cÚ¡ 
UCh¬
 *
s16
=
¡ršg
.
	`g‘Bufãr
();

695 
št32_t
 
Ëngth16
=
¡ršg
.
	`Ëngth
();

698 if(
ov”Ïp
>=
LONG_SPAN
) {

699 
ov”Ïp
=
Ëngth16
;

703 if(
ov”Ïp
>
¥ªL’gth
) {

704 
ov”Ïp
=
¥ªL’gth
;

706 
št32_t
 
šc
=
Ëngth16
-
ov”Ïp
;

708 if(
šc
>
»¡
 || 
ov”Ïp
<
maxOv”Ïp
) {

712 ifĞ(
ov”Ïp
>
maxOv”Ïp
 || 
šc
>
maxInc
) &&

713 
	`m©ches16CPB
(
s
, 
pos
-
ov”Ïp
, 
Ëngth
, 
s16
, 
Ëngth16
)

715 
maxInc
=
šc
;

716 
maxOv”Ïp
=
ov”Ïp
;

719 --
ov”Ïp
;

720 ++
šc
;

724 if(
maxInc
!=0 || 
maxOv”Ïp
!=0) {

727 
pos
+=
maxInc
;

728 
»¡
-=
maxInc
;

729 if(
»¡
==0) {

730  
Ëngth
;

732 
¥ªL’gth
=0;

738 if(
¥ªL’gth
!=0 || 
pos
==0) {

744 if(
off£ts
.
	`isEm±y
()) {

745  
pos
;

750 if(
off£ts
.
	`isEm±y
()) {

753 
¥ªL’gth
=
¥ªS‘
.
	`¥ª
(
s
+
pos
, 
»¡
, 
USET_SPAN_CONTAINED
);

754 ifĞ
¥ªL’gth
==
»¡
 ||

755 
¥ªL’gth
==0

757  
pos
+
¥ªL’gth
;

759 
pos
+=
¥ªL’gth
;

760 
»¡
-=
¥ªL’gth
;

766 
¥ªL’gth
=
	`¥ªOÃ
(
¥ªS‘
, 
s
+
pos
, 
»¡
);

767 if(
¥ªL’gth
>0) {

768 if(
¥ªL’gth
==
»¡
) {

769  
Ëngth
;

774 
pos
+=
¥ªL’gth
;

775 
»¡
-=
¥ªL’gth
;

776 
off£ts
.
	`shiá
(
¥ªL’gth
);

777 
¥ªL’gth
=0;

783 
št32_t
 
mšOff£t
=
off£ts
.
	`pİMšimum
();

784 
pos
+=
mšOff£t
;

785 
»¡
-=
mšOff£t
;

786 
¥ªL’gth
=0;

788 
	}
}

790 
št32_t
 
	gUnicodeS‘SŒšgS·n
::
	$¥ªBack
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

791 if(
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
) {

792  
	`¥ªNÙBack
(
s
, 
Ëngth
);

794 
št32_t
 
pos
=
¥ªS‘
.
	`¥ªBack
(
s
, 
Ëngth
, 
USET_SPAN_CONTAINED
);

795 if(
pos
==0) {

798 
št32_t
 
¥ªL’gth
=
Ëngth
-
pos
;

801 
Off£tLi¡
 
off£ts
;

802 if(
¥ªCÚd™iÚ
==
USET_SPAN_CONTAINED
) {

804 
off£ts
.
	`£tMaxL’gth
(
maxL’gth16
);

806 
št32_t
 
i
, 
¡ršgsL’gth
=
¡ršgs
.
	`size
();

807 
ušt8_t
 *
¥ªBackL’gths
=
¥ªL’gths
;

808 if(
®l
) {

809 
¥ªBackL’gths
+=
¡ršgsL’gth
;

812 if(
¥ªCÚd™iÚ
==
USET_SPAN_CONTAINED
) {

813 
i
=0; i<
¡ršgsL’gth
; ++i) {

814 
št32_t
 
ov”Ïp
=
¥ªBackL’gths
[
i
];

815 if(
ov”Ïp
==
ALL_CP_CONTAINED
) {

818 cÚ¡ 
UnicodeSŒšg
 &
¡ršg
=*(cÚ¡ UnicodeSŒšg *)
¡ršgs
.
	`–em’tAt
(
i
);

819 cÚ¡ 
UCh¬
 *
s16
=
¡ršg
.
	`g‘Bufãr
();

820 
št32_t
 
Ëngth16
=
¡ršg
.
	`Ëngth
();

823 if(
ov”Ïp
>=
LONG_SPAN
) {

824 
ov”Ïp
=
Ëngth16
;

826 
št32_t
 
Ën1
=0;

827 
	`U16_FWD_1
(
s16
, 
Ën1
, 
ov”Ïp
);

828 
ov”Ïp
-=
Ën1
;

830 if(
ov”Ïp
>
¥ªL’gth
) {

831 
ov”Ïp
=
¥ªL’gth
;

833 
št32_t
 
dec
=
Ëngth16
-
ov”Ïp
;

835 if(
dec
>
pos
) {

839 if(!
off£ts
.
	`cÚšsOff£t
(
dec
è&& 
	`m©ches16CPB
(
s
, 
pos
-dec, 
Ëngth
, 
s16
, 
Ëngth16
)) {

840 if(
dec
==
pos
) {

843 
off£ts
.
	`addOff£t
(
dec
);

845 if(
ov”Ïp
==0) {

848 --
ov”Ïp
;

849 ++
dec
;

853 
št32_t
 
maxDec
=0, 
maxOv”Ïp
=0;

854 
i
=0; i<
¡ršgsL’gth
; ++i) {

855 
št32_t
 
ov”Ïp
=
¥ªBackL’gths
[
i
];

859 cÚ¡ 
UnicodeSŒšg
 &
¡ršg
=*(cÚ¡ UnicodeSŒšg *)
¡ršgs
.
	`–em’tAt
(
i
);

860 cÚ¡ 
UCh¬
 *
s16
=
¡ršg
.
	`g‘Bufãr
();

861 
št32_t
 
Ëngth16
=
¡ršg
.
	`Ëngth
();

864 if(
ov”Ïp
>=
LONG_SPAN
) {

865 
ov”Ïp
=
Ëngth16
;

869 if(
ov”Ïp
>
¥ªL’gth
) {

870 
ov”Ïp
=
¥ªL’gth
;

872 
št32_t
 
dec
=
Ëngth16
-
ov”Ïp
;

874 if(
dec
>
pos
 || 
ov”Ïp
<
maxOv”Ïp
) {

878 ifĞ(
ov”Ïp
>
maxOv”Ïp
 || 
dec
>
maxDec
) &&

879 
	`m©ches16CPB
(
s
, 
pos
-
dec
, 
Ëngth
, 
s16
, 
Ëngth16
)

881 
maxDec
=
dec
;

882 
maxOv”Ïp
=
ov”Ïp
;

885 --
ov”Ïp
;

886 ++
dec
;

890 if(
maxDec
!=0 || 
maxOv”Ïp
!=0) {

893 
pos
-=
maxDec
;

894 if(
pos
==0) {

897 
¥ªL’gth
=0;

903 if(
¥ªL’gth
!=0 || 
pos
==
Ëngth
) {

909 if(
off£ts
.
	`isEm±y
()) {

910  
pos
;

915 if(
off£ts
.
	`isEm±y
()) {

918 
št32_t
 
ŞdPos
=
pos
;

919 
pos
=
¥ªS‘
.
	`¥ªBack
(
s
, 
ŞdPos
, 
USET_SPAN_CONTAINED
);

920 
¥ªL’gth
=
ŞdPos
-
pos
;

921 ifĞ
pos
==0 ||

922 
¥ªL’gth
==0

924  
pos
;

931 
¥ªL’gth
=
	`¥ªOÃBack
(
¥ªS‘
, 
s
, 
pos
);

932 if(
¥ªL’gth
>0) {

933 if(
¥ªL’gth
==
pos
) {

939 
pos
-=
¥ªL’gth
;

940 
off£ts
.
	`shiá
(
¥ªL’gth
);

941 
¥ªL’gth
=0;

947 
pos
-=
off£ts
.
	`pİMšimum
();

948 
¥ªL’gth
=0;

950 
	}
}

952 
št32_t
 
	gUnicodeS‘SŒšgS·n
::
	$¥ªUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

953 if(
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
) {

954  
	`¥ªNÙUTF8
(
s
, 
Ëngth
);

956 
št32_t
 
¥ªL’gth
=
¥ªS‘
.
	`¥ªUTF8
((cÚ¡ *)
s
, 
Ëngth
, 
USET_SPAN_CONTAINED
);

957 if(
¥ªL’gth
==
Ëngth
) {

958  
Ëngth
;

962 
Off£tLi¡
 
off£ts
;

963 if(
¥ªCÚd™iÚ
==
USET_SPAN_CONTAINED
) {

965 
off£ts
.
	`£tMaxL’gth
(
maxL’gth8
);

967 
št32_t
 
pos
=
¥ªL’gth
, 
»¡
=
Ëngth
-pos;

968 
št32_t
 
i
, 
¡ršgsL’gth
=
¡ršgs
.
	`size
();

969 
ušt8_t
 *
¥ªUTF8L’gths
=
¥ªL’gths
;

970 if(
®l
) {

971 
¥ªUTF8L’gths
+=2*
¡ršgsL’gth
;

974 cÚ¡ 
ušt8_t
 *
s8
=
utf8
;

975 
št32_t
 
Ëngth8
;

976 if(
¥ªCÚd™iÚ
==
USET_SPAN_CONTAINED
) {

977 
i
=0; i<
¡ršgsL’gth
; ++i) {

978 
Ëngth8
=
utf8L’gths
[
i
];

979 if(
Ëngth8
==0) {

982 
št32_t
 
ov”Ïp
=
¥ªUTF8L’gths
[
i
];

983 if(
ov”Ïp
==
ALL_CP_CONTAINED
) {

984 
s8
+=
Ëngth8
;

989 if(
ov”Ïp
>=
LONG_SPAN
) {

990 
ov”Ïp
=
Ëngth8
;

992 
	`U8_BACK_1
(
s8
, 0, 
ov”Ïp
);

994 if(
ov”Ïp
>
¥ªL’gth
) {

995 
ov”Ïp
=
¥ªL’gth
;

997 
št32_t
 
šc
=
Ëngth8
-
ov”Ïp
;

999 if(
šc
>
»¡
) {

1005 ifĞ!
	`U8_IS_TRAIL
(
s
[
pos
-
ov”Ïp
]) &&

1006 !
off£ts
.
	`cÚšsOff£t
(
šc
) &&

1007 
	`m©ches8
(
s
+
pos
-
ov”Ïp
, 
s8
, 
Ëngth8
)

1010 if(
šc
==
»¡
) {

1011  
Ëngth
;

1013 
off£ts
.
	`addOff£t
(
šc
);

1015 if(
ov”Ïp
==0) {

1018 --
ov”Ïp
;

1019 ++
šc
;

1021 
s8
+=
Ëngth8
;

1024 
št32_t
 
maxInc
=0, 
maxOv”Ïp
=0;

1025 
i
=0; i<
¡ršgsL’gth
; ++i) {

1026 
Ëngth8
=
utf8L’gths
[
i
];

1027 if(
Ëngth8
==0) {

1030 
št32_t
 
ov”Ïp
=
¥ªUTF8L’gths
[
i
];

1035 if(
ov”Ïp
>=
LONG_SPAN
) {

1036 
ov”Ïp
=
Ëngth8
;

1040 if(
ov”Ïp
>
¥ªL’gth
) {

1041 
ov”Ïp
=
¥ªL’gth
;

1043 
št32_t
 
šc
=
Ëngth8
-
ov”Ïp
;

1045 if(
šc
>
»¡
 || 
ov”Ïp
<
maxOv”Ïp
) {

1051 ifĞ!
	`U8_IS_TRAIL
(
s
[
pos
-
ov”Ïp
]) &&

1052 (
ov”Ïp
>
maxOv”Ïp
 || 
šc
>
maxInc
) &&

1053 
	`m©ches8
(
s
+
pos
-
ov”Ïp
, 
s8
, 
Ëngth8
)

1056 
maxInc
=
šc
;

1057 
maxOv”Ïp
=
ov”Ïp
;

1060 --
ov”Ïp
;

1061 ++
šc
;

1063 
s8
+=
Ëngth8
;

1066 if(
maxInc
!=0 || 
maxOv”Ïp
!=0) {

1069 
pos
+=
maxInc
;

1070 
»¡
-=
maxInc
;

1071 if(
»¡
==0) {

1072  
Ëngth
;

1074 
¥ªL’gth
=0;

1080 if(
¥ªL’gth
!=0 || 
pos
==0) {

1086 if(
off£ts
.
	`isEm±y
()) {

1087  
pos
;

1092 if(
off£ts
.
	`isEm±y
()) {

1095 
¥ªL’gth
=
¥ªS‘
.
	`¥ªUTF8
((cÚ¡ *)
s
+
pos
, 
»¡
, 
USET_SPAN_CONTAINED
);

1096 ifĞ
¥ªL’gth
==
»¡
 ||

1097 
¥ªL’gth
==0

1099  
pos
+
¥ªL’gth
;

1101 
pos
+=
¥ªL’gth
;

1102 
»¡
-=
¥ªL’gth
;

1108 
¥ªL’gth
=
	`¥ªOÃUTF8
(
¥ªS‘
, 
s
+
pos
, 
»¡
);

1109 if(
¥ªL’gth
>0) {

1110 if(
¥ªL’gth
==
»¡
) {

1111  
Ëngth
;

1116 
pos
+=
¥ªL’gth
;

1117 
»¡
-=
¥ªL’gth
;

1118 
off£ts
.
	`shiá
(
¥ªL’gth
);

1119 
¥ªL’gth
=0;

1125 
št32_t
 
mšOff£t
=
off£ts
.
	`pİMšimum
();

1126 
pos
+=
mšOff£t
;

1127 
»¡
-=
mšOff£t
;

1128 
¥ªL’gth
=0;

1130 
	}
}

1132 
št32_t
 
	gUnicodeS‘SŒšgS·n
::
	$¥ªBackUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const {

1133 if(
¥ªCÚd™iÚ
==
USET_SPAN_NOT_CONTAINED
) {

1134  
	`¥ªNÙBackUTF8
(
s
, 
Ëngth
);

1136 
št32_t
 
pos
=
¥ªS‘
.
	`¥ªBackUTF8
((cÚ¡ *)
s
, 
Ëngth
, 
USET_SPAN_CONTAINED
);

1137 if(
pos
==0) {

1140 
št32_t
 
¥ªL’gth
=
Ëngth
-
pos
;

1143 
Off£tLi¡
 
off£ts
;

1144 if(
¥ªCÚd™iÚ
==
USET_SPAN_CONTAINED
) {

1146 
off£ts
.
	`£tMaxL’gth
(
maxL’gth8
);

1148 
št32_t
 
i
, 
¡ršgsL’gth
=
¡ršgs
.
	`size
();

1149 
ušt8_t
 *
¥ªBackUTF8L’gths
=
¥ªL’gths
;

1150 if(
®l
) {

1151 
¥ªBackUTF8L’gths
+=3*
¡ršgsL’gth
;

1154 cÚ¡ 
ušt8_t
 *
s8
=
utf8
;

1155 
št32_t
 
Ëngth8
;

1156 if(
¥ªCÚd™iÚ
==
USET_SPAN_CONTAINED
) {

1157 
i
=0; i<
¡ršgsL’gth
; ++i) {

1158 
Ëngth8
=
utf8L’gths
[
i
];

1159 if(
Ëngth8
==0) {

1162 
št32_t
 
ov”Ïp
=
¥ªBackUTF8L’gths
[
i
];

1163 if(
ov”Ïp
==
ALL_CP_CONTAINED
) {

1164 
s8
+=
Ëngth8
;

1169 if(
ov”Ïp
>=
LONG_SPAN
) {

1170 
ov”Ïp
=
Ëngth8
;

1172 
št32_t
 
Ën1
=0;

1173 
	`U8_FWD_1
(
s8
, 
Ën1
, 
ov”Ïp
);

1174 
ov”Ïp
-=
Ën1
;

1176 if(
ov”Ïp
>
¥ªL’gth
) {

1177 
ov”Ïp
=
¥ªL’gth
;

1179 
št32_t
 
dec
=
Ëngth8
-
ov”Ïp
;

1181 if(
dec
>
pos
) {

1187 ifĞ!
	`U8_IS_TRAIL
(
s
[
pos
-
dec
]) &&

1188 !
off£ts
.
	`cÚšsOff£t
(
dec
) &&

1189 
	`m©ches8
(
s
+
pos
-
dec
, 
s8
, 
Ëngth8
)

1191 if(
dec
==
pos
) {

1194 
off£ts
.
	`addOff£t
(
dec
);

1196 if(
ov”Ïp
==0) {

1199 --
ov”Ïp
;

1200 ++
dec
;

1202 
s8
+=
Ëngth8
;

1205 
št32_t
 
maxDec
=0, 
maxOv”Ïp
=0;

1206 
i
=0; i<
¡ršgsL’gth
; ++i) {

1207 
Ëngth8
=
utf8L’gths
[
i
];

1208 if(
Ëngth8
==0) {

1211 
št32_t
 
ov”Ïp
=
¥ªBackUTF8L’gths
[
i
];

1216 if(
ov”Ïp
>=
LONG_SPAN
) {

1217 
ov”Ïp
=
Ëngth8
;

1221 if(
ov”Ïp
>
¥ªL’gth
) {

1222 
ov”Ïp
=
¥ªL’gth
;

1224 
št32_t
 
dec
=
Ëngth8
-
ov”Ïp
;

1226 if(
dec
>
pos
 || 
ov”Ïp
<
maxOv”Ïp
) {

1232 ifĞ!
	`U8_IS_TRAIL
(
s
[
pos
-
dec
]) &&

1233 (
ov”Ïp
>
maxOv”Ïp
 || 
dec
>
maxDec
) &&

1234 
	`m©ches8
(
s
+
pos
-
dec
, 
s8
, 
Ëngth8
)

1236 
maxDec
=
dec
;

1237 
maxOv”Ïp
=
ov”Ïp
;

1240 --
ov”Ïp
;

1241 ++
dec
;

1243 
s8
+=
Ëngth8
;

1246 if(
maxDec
!=0 || 
maxOv”Ïp
!=0) {

1249 
pos
-=
maxDec
;

1250 if(
pos
==0) {

1253 
¥ªL’gth
=0;

1259 if(
¥ªL’gth
!=0 || 
pos
==
Ëngth
) {

1265 if(
off£ts
.
	`isEm±y
()) {

1266  
pos
;

1271 if(
off£ts
.
	`isEm±y
()) {

1274 
št32_t
 
ŞdPos
=
pos
;

1275 
pos
=
¥ªS‘
.
	`¥ªBackUTF8
((cÚ¡ *)
s
, 
ŞdPos
, 
USET_SPAN_CONTAINED
);

1276 
¥ªL’gth
=
ŞdPos
-
pos
;

1277 ifĞ
pos
==0 ||

1278 
¥ªL’gth
==0

1280  
pos
;

1287 
¥ªL’gth
=
	`¥ªOÃBackUTF8
(
¥ªS‘
, 
s
, 
pos
);

1288 if(
¥ªL’gth
>0) {

1289 if(
¥ªL’gth
==
pos
) {

1295 
pos
-=
¥ªL’gth
;

1296 
off£ts
.
	`shiá
(
¥ªL’gth
);

1297 
¥ªL’gth
=0;

1303 
pos
-=
off£ts
.
	`pİMšimum
();

1304 
¥ªL’gth
=0;

1306 
	}
}

1337 
št32_t
 
	gUnicodeS‘SŒšgS·n
::
	$¥ªNÙ
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
) const {

1338 
št32_t
 
pos
=0, 
»¡
=
Ëngth
;

1339 
št32_t
 
i
, 
¡ršgsL’gth
=
¡ršgs
.
	`size
();

1343 
i
=
pS·nNÙS‘
->
	`¥ª
(
s
+
pos
, 
»¡
, 
USET_SPAN_NOT_CONTAINED
);

1344 if(
i
==
»¡
) {

1345  
Ëngth
;

1347 
pos
+=
i
;

1348 
»¡
-=
i
;

1352 
št32_t
 
ıL’gth
=
	`¥ªOÃ
(
¥ªS‘
, 
s
+
pos
, 
»¡
);

1353 if(
ıL’gth
>0) {

1354  
pos
;

1358 
i
=0; i<
¡ršgsL’gth
; ++i) {

1359 if(
¥ªL’gths
[
i
]==
ALL_CP_CONTAINED
) {

1362 cÚ¡ 
UnicodeSŒšg
 &
¡ršg
=*(cÚ¡ UnicodeSŒšg *)
¡ršgs
.
	`–em’tAt
(
i
);

1363 cÚ¡ 
UCh¬
 *
s16
=
¡ršg
.
	`g‘Bufãr
();

1364 
št32_t
 
Ëngth16
=
¡ršg
.
	`Ëngth
();

1365 if(
Ëngth16
<=
»¡
 && 
	`m©ches16CPB
(
s
, 
pos
, 
Ëngth
, 
s16
,†ength16)) {

1366  
pos
;

1373 
pos
-=
ıL’gth
;

1374 
»¡
+=
ıL’gth
;

1375 } 
»¡
!=0);

1376  
Ëngth
;

1377 
	}
}

1379 
št32_t
 
	gUnicodeS‘SŒšgS·n
::
	$¥ªNÙBack
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
) const {

1380 
št32_t
 
pos
=
Ëngth
;

1381 
št32_t
 
i
, 
¡ršgsL’gth
=
¡ršgs
.
	`size
();

1385 
pos
=
pS·nNÙS‘
->
	`¥ªBack
(
s
,…os, 
USET_SPAN_NOT_CONTAINED
);

1386 if(
pos
==0) {

1392 
št32_t
 
ıL’gth
=
	`¥ªOÃBack
(
¥ªS‘
, 
s
, 
pos
);

1393 if(
ıL’gth
>0) {

1394  
pos
;

1398 
i
=0; i<
¡ršgsL’gth
; ++i) {

1402 if(
¥ªL’gths
[
i
]==
ALL_CP_CONTAINED
) {

1405 cÚ¡ 
UnicodeSŒšg
 &
¡ršg
=*(cÚ¡ UnicodeSŒšg *)
¡ršgs
.
	`–em’tAt
(
i
);

1406 cÚ¡ 
UCh¬
 *
s16
=
¡ršg
.
	`g‘Bufãr
();

1407 
št32_t
 
Ëngth16
=
¡ršg
.
	`Ëngth
();

1408 if(
Ëngth16
<=
pos
 && 
	`m©ches16CPB
(
s
,…os-Ëngth16, 
Ëngth
, 
s16
,†ength16)) {

1409  
pos
;

1416 
pos
+=
ıL’gth
;

1417 } 
pos
!=0);

1419 
	}
}

1421 
št32_t
 
	gUnicodeS‘SŒšgS·n
::
	$¥ªNÙUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
) const {

1422 
št32_t
 
pos
=0, 
»¡
=
Ëngth
;

1423 
št32_t
 
i
, 
¡ršgsL’gth
=
¡ršgs
.
	`size
();

1424 
ušt8_t
 *
¥ªUTF8L’gths
=
¥ªL’gths
;

1425 if(
®l
) {

1426 
¥ªUTF8L’gths
+=2*
¡ršgsL’gth
;

1431 
i
=
pS·nNÙS‘
->
	`¥ªUTF8
((cÚ¡ *)
s
+
pos
, 
»¡
, 
USET_SPAN_NOT_CONTAINED
);

1432 if(
i
==
»¡
) {

1433  
Ëngth
;

1435 
pos
+=
i
;

1436 
»¡
-=
i
;

1440 
št32_t
 
ıL’gth
=
	`¥ªOÃUTF8
(
¥ªS‘
, 
s
+
pos
, 
»¡
);

1441 if(
ıL’gth
>0) {

1442  
pos
;

1446 cÚ¡ 
ušt8_t
 *
s8
=
utf8
;

1447 
št32_t
 
Ëngth8
;

1448 
i
=0; i<
¡ršgsL’gth
; ++i) {

1449 
Ëngth8
=
utf8L’gths
[
i
];

1451 if(
Ëngth8
!=0 && 
¥ªUTF8L’gths
[
i
]!=
ALL_CP_CONTAINED
 &&†’gth8<=
»¡
 && 
	`m©ches8
(
s
+
pos
, 
s8
,†ength8)) {

1452  
pos
;

1454 
s8
+=
Ëngth8
;

1460 
pos
-=
ıL’gth
;

1461 
»¡
+=
ıL’gth
;

1462 } 
»¡
!=0);

1463  
Ëngth
;

1464 
	}
}

1466 
št32_t
 
	gUnicodeS‘SŒšgS·n
::
	$¥ªNÙBackUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
) const {

1467 
št32_t
 
pos
=
Ëngth
;

1468 
št32_t
 
i
, 
¡ršgsL’gth
=
¡ršgs
.
	`size
();

1469 
ušt8_t
 *
¥ªBackUTF8L’gths
=
¥ªL’gths
;

1470 if(
®l
) {

1471 
¥ªBackUTF8L’gths
+=3*
¡ršgsL’gth
;

1476 
pos
=
pS·nNÙS‘
->
	`¥ªBackUTF8
((cÚ¡ *)
s
,…os, 
USET_SPAN_NOT_CONTAINED
);

1477 if(
pos
==0) {

1483 
št32_t
 
ıL’gth
=
	`¥ªOÃBackUTF8
(
¥ªS‘
, 
s
, 
pos
);

1484 if(
ıL’gth
>0) {

1485  
pos
;

1489 cÚ¡ 
ušt8_t
 *
s8
=
utf8
;

1490 
št32_t
 
Ëngth8
;

1491 
i
=0; i<
¡ršgsL’gth
; ++i) {

1492 
Ëngth8
=
utf8L’gths
[
i
];

1494 if(
Ëngth8
!=0 && 
¥ªBackUTF8L’gths
[
i
]!=
ALL_CP_CONTAINED
 &&†’gth8<=
pos
 && 
	`m©ches8
(
s
+pos-Ëngth8, 
s8
,†ength8)) {

1495  
pos
;

1497 
s8
+=
Ëngth8
;

1503 
pos
+=
ıL’gth
;

1504 } 
pos
!=0);

1506 
	}
}

1508 
	gU_NAMESPACE_END


	@unisetspan.h

17 #iâdeà
__UNISETSPAN_H__


18 
	#__UNISETSPAN_H__


	)

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/uni£t.h
"

23 
U_NAMESPACE_BEGIN


30 şas 
	cUnicodeS‘SŒšgS·n
 : 
public
 
UMemÜy
 {

31 
public
:

38 
FWD
 = 0x20,

39 
	mBACK
 = 0x10,

40 
	mUTF16
 = 8,

41 
	mUTF8
 = 4,

42 
	mCONTAINED
 = 2,

43 
	mNOT_CONTAINED
 = 1,

45 
	mALL
 = 0x3f,

47 
	mFWD_UTF16_CONTAINED
 = 
FWD
 | 
UTF16
 | 
CONTAINED
,

48 
	mFWD_UTF16_NOT_CONTAINED
 = 
FWD
 | 
UTF16
 | 
NOT_CONTAINED
,

49 
	mFWD_UTF8_CONTAINED
 = 
FWD
 | 
UTF8
 | 
CONTAINED
,

50 
	mFWD_UTF8_NOT_CONTAINED
 = 
FWD
 | 
UTF8
 | 
NOT_CONTAINED
,

51 
	mBACK_UTF16_CONTAINED
 = 
BACK
 | 
UTF16
 | 
CONTAINED
,

52 
	mBACK_UTF16_NOT_CONTAINED
ğ
BACK
 | 
UTF16
 | 
NOT_CONTAINED
,

53 
	mBACK_UTF8_CONTAINED
 = 
BACK
 | 
UTF8
 | 
CONTAINED
,

54 
	mBACK_UTF8_NOT_CONTAINED
 = 
BACK
 | 
UTF8
 | 
NOT_CONTAINED


57 
UnicodeS‘SŒšgS·n
(cÚ¡ 
UnicodeS‘
 &
£t
, cÚ¡ 
UVeùÜ
 &
£tSŒšgs
, 
ušt32_t
 
which
);

60 
UnicodeS‘SŒšgS·n
(cÚ¡ UnicodeS‘SŒšgS·À&
Ùh”SŒšgS·n
, cÚ¡ 
UVeùÜ
 &
ÃwP¬’tS‘SŒšgs
);

62 ~
UnicodeS‘SŒšgS·n
();

69 
šlše
 
UBoŞ
 
ÃedsSŒšgS·nUTF16
();

70 
šlše
 
UBoŞ
 
ÃedsSŒšgS·nUTF8
();

73 
šlše
 
UBoŞ
 
	$cÚšs
(
UCh¬32
 
c
) const;

75 
št32_t
 
	$¥ª
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

77 
št32_t
 
	$¥ªBack
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

79 
št32_t
 
	$¥ªUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

81 
št32_t
 
	$¥ªBackUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) const;

83 
´iv©e
:

87 
LONG_SPAN
=0xfe,

89 
ALL_CP_CONTAINED
=0xff

90 
	}
};

94 
addToS·nNÙS‘
(
UCh¬32
 
c
);

96 
št32_t
 
	$¥ªNÙ
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
) const;

97 
št32_t
 
	$¥ªNÙBack
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
) const;

98 
št32_t
 
	$¥ªNÙUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
) const;

99 
št32_t
 
	$¥ªNÙBackUTF8
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
Ëngth
) const;

102 
UnicodeS‘
 
¥ªS‘
;

106 
UnicodeS‘
 *
pS·nNÙS‘
;

109 cÚ¡ 
UVeùÜ
 &
¡ršgs
;

114 
št32_t
 *
utf8L’gths
;

118 
ušt8_t
 *
¥ªL’gths
;

122 
ušt8_t
 *
utf8
;

125 
št32_t
 
utf8L’gth
;

128 
št32_t
 
maxL’gth16
;

129 
št32_t
 
maxL’gth8
;

132 
UBoŞ
 
®l
;

138 
št32_t
 
¡©icL’gths
[32];

139 
	}
};

141 
UBoŞ
 
	gUnicodeS‘SŒšgS·n
::
	$ÃedsSŒšgS·nUTF16
() {

142  (
UBoŞ
)(
maxL’gth16
!=0);

143 
	}
}

145 
UBoŞ
 
	gUnicodeS‘SŒšgS·n
::
	$ÃedsSŒšgS·nUTF8
() {

146  (
UBoŞ
)(
maxL’gth8
!=0);

147 
	}
}

149 
UBoŞ
 
	gUnicodeS‘SŒšgS·n
::
	$cÚšs
(
UCh¬32
 
c
) const {

150  
¥ªS‘
.
	`cÚšs
(
c
);

151 
	}
}

153 
	gU_NAMESPACE_END


	@unistr.cpp

21 
	~"unicode/uty³s.h
"

22 
	~"unicode/put.h
"

23 
	~"c¡ršg.h
"

24 
	~"cmemÜy.h
"

25 
	~"unicode/u¡ršg.h
"

26 
	~"unicode/uni¡r.h
"

27 
	~"uhash.h
"

28 
	~"u¡r_imp.h
"

29 
	~"umu‹x.h
"

33 #ià
U_IOSTREAM_SOURCE
 >= 199711

34 
	~<io¡»am
>

35 
usšg
 
Çme¥aû
 
	g¡d
;

36 #–ià
U_IOSTREAM_SOURCE
 >= 198506

37 
	~<io¡»am.h
>

42 
	$´št
(cÚ¡ 
UnicodeSŒšg
& 
s
,

43 cÚ¡ *
Çme
)

45 
UCh¬
 
c
;

46 
cout
 << 
Çme
 << ":|";

47 
i
 = 0; i < 
s
.
	`Ëngth
(); ++i) {

48 
c
 = 
s
[
i
];

49 if(
c
>= 0x007E || c < 0x0020)

50 
cout
 << "[0x" << 
hex
 << 
s
[
i
] << "]";

52 
cout
 << (è
s
[
i
];

54 
cout
 << '|' << 
’dl
;

55 
	}
}

58 
	$´št
(cÚ¡ 
UCh¬
 *
s
,

59 
št32_t
 
Ën
,

60 cÚ¡ *
Çme
)

62 
UCh¬
 
c
;

63 
cout
 << 
Çme
 << ":|";

64 
i
 = 0; i < 
Ën
; ++i) {

65 
c
 = 
s
[
i
];

66 if(
c
>= 0x007E || c < 0x0020)

67 
cout
 << "[0x" << 
hex
 << 
s
[
i
] << "]";

69 
cout
 << (è
s
[
i
];

71 
cout
 << '|' << 
’dl
;

72 
	}
}

80 
šlše
 

81 
	$us_¬¿yCİy
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cS¹
,

82 
UCh¬
 *
d¡
, 
št32_t
 
d¡S¹
, iÁ32_ˆ
couÁ
)

84 if(
couÁ
>0) {

85 
	`u´v_memmove
(
d¡
+
d¡S¹
, 
¤c
+
¤cS¹
, (
size_t
)(
couÁ
*(*src)));

87 
	}
}

90 
U_CDECL_BEGIN


91 
UCh¬
 
U_CALLCONV


92 
	$UnicodeSŒšg_ch¬At
(
št32_t
 
off£t
, *
cÚ‹xt
) {

93  ((
U_NAMESPACE_QUALIFIER
 
UnicodeSŒšg
*è
cÚ‹xt
)->
	`ch¬At
(
off£t
);

94 
	}
}

95 
U_CDECL_END


97 
U_NAMESPACE_BEGIN


102 
	gR•ÏûabË
::~
	$R•ÏûabË
(è{
	}
}

103 
R•ÏûabË
::
	$R•ÏûabË
(è{
	}
}

104 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
UnicodeSŒšg
)

106 
UnicodeSŒšg
 
U_EXPORT2


107 
İ”©Ü
+ (cÚ¡ 
UnicodeSŒšg
 &
s1
, cÚ¡ UnicodeSŒšg &
s2
) {

109 
	`UnicodeSŒšg
(
s1
.
	`Ëngth
()+
s2
.Ëngth()+1, (
UCh¬32
)0, 0).

110 
	`­³nd
(
s1
).

111 
	`­³nd
(
s2
);

112 
	}
}

120 
	gUnicodeSŒšg
::
	$addRef
()

121 { 
	`umtx_©omic_šc
((
št32_t
 *)
fUniÚ
.
fF›lds
.
fA¼ay
 - 1);
	}
}

123 
št32_t


124 
	gUnicodeSŒšg
::
	$»moveRef
()

125 {  
	`umtx_©omic_dec
((
št32_t
 *)
fUniÚ
.
fF›lds
.
fA¼ay
 - 1);
	}
}

127 
št32_t


128 
	gUnicodeSŒšg
::
	$»fCouÁ
() const

130 
	`umtx_lock
(
NULL
);

133 
št32_t
 
couÁ
 = *((št32_ˆ*)
fUniÚ
.
fF›lds
.
fA¼ay
 - 1);

134 
	`umtx_uÆock
(
NULL
);

135  
couÁ
;

136 
	}
}

139 
	gUnicodeSŒšg
::
	$»Ëa£A¼ay
() {

140 if((
fFÏgs
 & 
kRefCouÁed
è&& 
	`»moveRef
() == 0) {

141 
	`u´v_ä“
((
št32_t
 *)
fUniÚ
.
fF›lds
.
fA¼ay
 - 1);

143 
	}
}

150 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
()

151 : 
	`fShÜtL’gth
(0),

152 
	$fFÏgs
(
kShÜtSŒšg
)

153 {
	}
}

155 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(
št32_t
 
ÿ·c™y
, 
UCh¬32
 
c
, iÁ32_ˆ
couÁ
)

156 : 
	`fShÜtL’gth
(0),

157 
	$fFÏgs
(0)

159 if(
couÁ
 <ğ0 || (
ušt32_t
)
c
 > 0x10ffff) {

161 
	`®loÿ‹
(
ÿ·c™y
);

164 
št32_t
 
un™CouÁ
 = 
	`UTF_CHAR_LENGTH
(
c
), 
Ëngth
 = 
couÁ
 * unitCount;

165 if(
ÿ·c™y
 < 
Ëngth
) {

166 
ÿ·c™y
 = 
Ëngth
;

168 if(
	`®loÿ‹
(
ÿ·c™y
)) {

169 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

170 
št32_t
 
i
 = 0;

173 if(
un™CouÁ
 == 1) {

175 
i
 < 
Ëngth
) {

176 
¬¿y
[
i
++] = (
UCh¬
)
c
;

180 
UCh¬
 
un™s
[
UTF_MAX_CHAR_LENGTH
];

181 
	`UTF_APPEND_CHAR_UNSAFE
(
un™s
, 
i
, 
c
);

184 
i
 = 0;

188 
i
 < 
Ëngth
) {

189 
št32_t
 
un™Idx
 = 0;

190 
un™Idx
 < 
un™CouÁ
) {

191 
¬¿y
[
i
++]=
un™s
[
un™Idx
++];

196 
	`£tL’gth
(
Ëngth
);

198 
	}
}

200 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(
UCh¬
 
ch
)

201 : 
	`fShÜtL’gth
(1),

202 
	$fFÏgs
(
kShÜtSŒšg
)

204 
fUniÚ
.
fSckBufãr
[0] = 
ch
;

205 
	}
}

207 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(
UCh¬32
 
ch
)

208 : 
	`fShÜtL’gth
(0),

209 
	$fFÏgs
(
kShÜtSŒšg
)

211 
št32_t
 
i
 = 0;

212 
UBoŞ
 
isE¼Ü
 = 
FALSE
;

213 
	`U16_APPEND
(
fUniÚ
.
fSckBufãr
, 
i
, 
US_STACKBUF_SIZE
, 
ch
, 
isE¼Ü
);

214 
fShÜtL’gth
 = (
št8_t
)
i
;

215 
	}
}

217 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ 
UCh¬
 *
‹xt
)

218 : 
	`fShÜtL’gth
(0),

219 
	$fFÏgs
(
kShÜtSŒšg
)

221 
	`doR•Ïû
(0, 0, 
‹xt
, 0, -1);

222 
	}
}

224 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ 
UCh¬
 *
‹xt
,

225 
št32_t
 
‹xtL’gth
)

226 : 
	`fShÜtL’gth
(0),

227 
	$fFÏgs
(
kShÜtSŒšg
)

229 
	`doR•Ïû
(0, 0, 
‹xt
, 0, 
‹xtL’gth
);

230 
	}
}

232 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(
UBoŞ
 
isT”mš©ed
,

233 cÚ¡ 
UCh¬
 *
‹xt
,

234 
št32_t
 
‹xtL’gth
)

235 : 
	`fShÜtL’gth
(0),

236 
	$fFÏgs
(
kR—dÚlyAlŸs
)

238 if(
‹xt
 =ğ
NULL
) {

240 
	`£tToEm±y
();

241 } if(
‹xtL’gth
 < -1 ||

242 (
‹xtL’gth
 =ğ-1 && !
isT”mš©ed
) ||

243 (
‹xtL’gth
 >ğ0 && 
isT”mš©ed
 && 
‹xt
[textLength] != 0)

245 
	`£tToBogus
();

247 if(
‹xtL’gth
 == -1) {

249 
‹xtL’gth
 = 
	`u_¡¾’
(
‹xt
);

251 
	`£tA¼ay
((
UCh¬
 *)
‹xt
, 
‹xtL’gth
, 
isT”mš©ed
 ?extLength + 1 :extLength);

253 
	}
}

255 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(
UCh¬
 *
buff
,

256 
št32_t
 
buffL’gth
,

257 
št32_t
 
buffC­ac™y
)

258 : 
	`fShÜtL’gth
(0),

259 
	$fFÏgs
(
kWr™abËAlŸs
)

261 if(
buff
 =ğ
NULL
) {

263 
	`£tToEm±y
();

264 } if(
buffL’gth
 < -1 || 
buffC­ac™y
 < 0 || buffLength > buffCapacity) {

265 
	`£tToBogus
();

267 if(
buffL’gth
 == -1) {

269 cÚ¡ 
UCh¬
 *
p
 = 
buff
, *
lim™
 = bufà+ 
buffC­ac™y
;

270 
p
 !ğ
lim™
 && *p != 0) {

271 ++
p
;

273 
buffL’gth
 = (
št32_t
)(
p
 - 
buff
);

275 
	`£tA¼ay
(
buff
, 
buffL’gth
, 
buffC­ac™y
);

277 
	}
}

279 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ *
¤c
, 
št32_t
 
Ëngth
, 
EInv¬ŸÁ
)

280 : 
	`fShÜtL’gth
(0),

281 
	$fFÏgs
(
kShÜtSŒšg
)

283 if(
¤c
==
NULL
) {

286 if(
Ëngth
<0) {

287 
Ëngth
=(
št32_t
)
	`u´v_¡¾’
(
¤c
);

289 if(
	`şÚeA¼ayIfN“ded
(
Ëngth
,†’gth, 
FALSE
)) {

290 
	`u_ch¬sToUCh¬s
(
¤c
, 
	`g‘A¼ayS¹
(), 
Ëngth
);

291 
	`£tL’gth
(
Ëngth
);

293 
	`£tToBogus
();

296 
	}
}

298 #ià
U_CHARSET_IS_UTF8


300 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ *
cod•ageD©a
)

301 : 
	`fShÜtL’gth
(0),

302 
	$fFÏgs
(
kShÜtSŒšg
) {

303 if(
cod•ageD©a
 != 0) {

304 
	`£tToUTF8
(
cod•ageD©a
);

306 
	}
}

308 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ *
cod•ageD©a
, 
št32_t
 
d©aL’gth
)

309 : 
	`fShÜtL’gth
(0),

310 
	$fFÏgs
(
kShÜtSŒšg
) {

312 if(
cod•ageD©a
 =ğ0 || 
d©aL’gth
 == 0 || dataLength < -1) {

315 if(
d©aL’gth
 == -1) {

316 
d©aL’gth
 = (
št32_t
)
	`u´v_¡¾’
(
cod•ageD©a
);

318 
	`£tToUTF8
(
	`SŒšgP›û
(
cod•ageD©a
, 
d©aL’gth
));

319 
	}
}

324 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ 
UnicodeSŒšg
& 
th©
)

325 : 
	`R•ÏûabË
(),

326 
	`fShÜtL’gth
(0),

327 
	$fFÏgs
(
kShÜtSŒšg
)

329 
	`cİyFrom
(
th©
);

330 
	}
}

332 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ 
UnicodeSŒšg
& 
th©
,

333 
št32_t
 
¤cS¹
)

334 : 
	`R•ÏûabË
(),

335 
	`fShÜtL’gth
(0),

336 
	$fFÏgs
(
kShÜtSŒšg
)

338 
	`£tTo
(
th©
, 
¤cS¹
);

339 
	}
}

341 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ 
UnicodeSŒšg
& 
th©
,

342 
št32_t
 
¤cS¹
,

343 
št32_t
 
¤cL’gth
)

344 : 
	`R•ÏûabË
(),

345 
	`fShÜtL’gth
(0),

346 
	$fFÏgs
(
kShÜtSŒšg
)

348 
	`£tTo
(
th©
, 
¤cS¹
, 
¤cL’gth
);

349 
	}
}

352 
R•ÏûabË
 *

353 
	gR•ÏûabË
::
	$şÚe
() const {

354  
NULL
;

355 
	}
}

358 
R•ÏûabË
 *

359 
	gUnicodeSŒšg
::
	$şÚe
() const {

360  
Ãw
 
	`UnicodeSŒšg
(*
this
);

361 
	}
}

367 
UBoŞ


368 
	gUnicodeSŒšg
::
	$®loÿ‹
(
št32_t
 
ÿ·c™y
) {

369 if(
ÿ·c™y
 <ğ
US_STACKBUF_SIZE
) {

370 
fFÏgs
 = 
kShÜtSŒšg
;

376 
št32_t
 
wÜds
 = (št32_t)((((št32_tè+ (
ÿ·c™y
 + 1è* 
U_SIZEOF_UCHAR
 + 15) & ~15) >> 2);

377 
št32_t
 *
¬¿y
 = (št32_t*è
	`u´v_m®loc
Ğ(št32_tè* 
wÜds
 );

378 if(
¬¿y
 != 0) {

380 *
¬¿y
++ = 1;

383 
fUniÚ
.
fF›lds
.
fA¼ay
 = (
UCh¬
 *)
¬¿y
;

384 
fUniÚ
.
fF›lds
.
fC­ac™y
 = (
št32_t
)((
wÜds
 - 1è* ((št32_tè/ 
U_SIZEOF_UCHAR
));

385 
fFÏgs
 = 
kLÚgSŒšg
;

387 
fShÜtL’gth
 = 0;

388 
fUniÚ
.
fF›lds
.
fA¼ay
 = 0;

389 
fUniÚ
.
fF›lds
.
fC­ac™y
 = 0;

390 
fFÏgs
 = 
kIsBogus
;

391  
FALSE
;

394  
TRUE
;

395 
	}
}

400 
	gUnicodeSŒšg
::~
	$UnicodeSŒšg
()

402 
	`»Ëa£A¼ay
();

403 
	}
}

409 
UnicodeSŒšg
 
	gUnicodeSŒšg
::
	$äomUTF8
(cÚ¡ 
SŒšgP›û
 &
utf8
) {

410 
UnicodeSŒšg
 
»suÉ
;

411 
»suÉ
.
	`£tToUTF8
(
utf8
);

412  
»suÉ
;

413 
	}
}

415 
UnicodeSŒšg
 
	gUnicodeSŒšg
::
	$äomUTF32
(cÚ¡ 
UCh¬32
 *
utf32
, 
št32_t
 
Ëngth
) {

416 
UnicodeSŒšg
 
»suÉ
;

417 
št32_t
 
ÿ·c™y
;

421 if(
Ëngth
 <ğ
US_STACKBUF_SIZE
) {

422 
ÿ·c™y
 = 
US_STACKBUF_SIZE
;

424 
ÿ·c™y
 = 
Ëngth
 + (length >> 4) + 4;

427 
UCh¬
 *
utf16
 = 
»suÉ
.
	`g‘Bufãr
(
ÿ·c™y
);

428 
št32_t
 
Ëngth16
;

429 
UE¼ÜCode
 
”rÜCode
 = 
U_ZERO_ERROR
;

430 
	`u_¡rFromUTF32W™hSub
(
utf16
, 
»suÉ
.
	`g‘C­ac™y
(), &
Ëngth16
,

431 
utf32
, 
Ëngth
,

433 
NULL
,

434 &
”rÜCode
);

435 
»suÉ
.
	`»Ëa£Bufãr
(
Ëngth16
);

436 if(
”rÜCode
 =ğ
U_BUFFER_OVERFLOW_ERROR
) {

437 
ÿ·c™y
 = 
Ëngth16
 + 1;

439 } if(
	`U_FAILURE
(
”rÜCode
)) {

440 
»suÉ
.
	`£tToBogus
();

443 } 
TRUE
);

444  
»suÉ
;

445 
	}
}

451 
	gUnicodeSŒšg
 &

452 
	gUnicodeSŒšg
::
İ”©Ü
=(cÚ¡ 
UnicodeSŒšg
 &
¤c
) {

453  
cİyFrom
(
¤c
);

456 
	gUnicodeSŒšg
 &

457 
	gUnicodeSŒšg
::
	$ç¡CİyFrom
(cÚ¡ 
UnicodeSŒšg
 &
¤c
) {

458  
	`cİyFrom
(
¤c
, 
TRUE
);

459 
	}
}

461 
	gUnicodeSŒšg
 &

462 
	gUnicodeSŒšg
::
	$cİyFrom
(cÚ¡ 
UnicodeSŒšg
 &
¤c
, 
UBoŞ
 
ç¡Cİy
) {

464 if(
this
 =ğ0 ||hi =ğ&
¤c
) {

465  *
this
;

469 if(&
¤c
 =ğ0 || src.
	`isBogus
()) {

470 
	`£tToBogus
();

471  *
this
;

475 
	`»Ëa£A¼ay
();

477 if(
¤c
.
	`isEm±y
()) {

479 
	`£tToEm±y
();

480  *
this
;

484 
št32_t
 
¤cL’gth
 = 
¤c
.
	`Ëngth
();

485 
	`£tL’gth
(
¤cL’gth
);

488 
¤c
.
fFÏgs
) {

489 
kShÜtSŒšg
:

491 
fFÏgs
 = 
kShÜtSŒšg
;

492 
	`u´v_memıy
(
fUniÚ
.
fSckBufãr
, 
¤c
.fUniÚ.fSckBufãr, 
¤cL’gth
 * 
U_SIZEOF_UCHAR
);

494 
kLÚgSŒšg
:

497 ((
UnicodeSŒšg
 &)
¤c
).
	`addRef
();

499 
fUniÚ
.
fF›lds
.
fA¼ay
 = 
¤c
.fUnion.fFields.fArray;

500 
fUniÚ
.
fF›lds
.
fC­ac™y
 = 
¤c
.fUnion.fFields.fCapacity;

501 
fFÏgs
 = 
¤c
.fFlags;

503 
kR—dÚlyAlŸs
:

504 if(
ç¡Cİy
) {

507 
fUniÚ
.
fF›lds
.
fA¼ay
 = 
¤c
.fUnion.fFields.fArray;

508 
fUniÚ
.
fF›lds
.
fC­ac™y
 = 
¤c
.fUnion.fFields.fCapacity;

509 
fFÏgs
 = 
¤c
.fFlags;

514 
kWr™abËAlŸs
:

516 if(
	`®loÿ‹
(
¤cL’gth
)) {

517 
	`u´v_memıy
(
	`g‘A¼ayS¹
(), 
¤c
.g‘A¼ayS¹(), 
¤cL’gth
 * 
U_SIZEOF_UCHAR
);

524 
fShÜtL’gth
 = 0;

525 
fUniÚ
.
fF›lds
.
fA¼ay
 = 0;

526 
fUniÚ
.
fF›lds
.
fC­ac™y
 = 0;

527 
fFÏgs
 = 
kIsBogus
;

531  *
this
;

532 
	}
}

538 
UnicodeSŒšg
 
	gUnicodeSŒšg
::
	$uÃsÿ³
() const {

539 
UnicodeSŒšg
 
	`»suÉ
(
	`Ëngth
(), (
UCh¬32
)0, (
št32_t
)0);

540 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘Bufãr
();

541 
št32_t
 
Ën
 = 
	`Ëngth
();

542 
št32_t
 
´ev
 = 0;

543 
št32_t
 
i
=0;;) {

544 ià(
i
 =ğ
Ën
) {

545 
»suÉ
.
	`­³nd
(
¬¿y
, 
´ev
, 
Ën
 -…rev);

548 ià(
¬¿y
[
i
++] == 0x5C ) {

549 
»suÉ
.
	`­³nd
(
¬¿y
, 
´ev
, (
i
 - 1) -…rev);

550 
UCh¬32
 
c
 = 
	`uÃsÿ³At
(
i
);

551 ià(
c
 < 0) {

552 
»suÉ
.
	`»move
();

555 
»suÉ
.
	`­³nd
(
c
);

556 
´ev
 = 
i
;

559  
»suÉ
;

560 
	}
}

562 
UCh¬32
 
	gUnicodeSŒšg
::
	$uÃsÿ³At
(
št32_t
 &
off£t
) const {

563  
	`u_uÃsÿ³At
(
UnicodeSŒšg_ch¬At
, &
off£t
, 
	`Ëngth
(), (*)
this
);

564 
	}
}

569 
št8_t


570 
	gUnicodeSŒšg
::
	$doCom·»
Ğ
št32_t
 
¡¬t
,

571 
št32_t
 
Ëngth
,

572 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

573 
št32_t
 
¤cS¹
,

574 
št32_t
 
¤cL’gth
) const

578 if(
	`isBogus
()) {

583 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

585 if(
¤cCh¬s
 =ğ
NULL
) {

586 
¤cS¹
 = 
¤cL’gth
 = 0;

590 cÚ¡ 
UCh¬
 *
ch¬s
 = 
	`g‘A¼ayS¹
();

592 
ch¬s
 +ğ
¡¬t
;

593 
¤cCh¬s
 +ğ
¤cS¹
;

595 
št32_t
 
mšL’gth
;

596 
št8_t
 
ËngthResuÉ
;

599 if(
¤cL’gth
 < 0) {

600 
¤cL’gth
 = 
	`u_¡¾’
(
¤cCh¬s
 + 
¤cS¹
);

604 if(
Ëngth
 !ğ
¤cL’gth
) {

605 if(
Ëngth
 < 
¤cL’gth
) {

606 
mšL’gth
 = 
Ëngth
;

607 
ËngthResuÉ
 = -1;

609 
mšL’gth
 = 
¤cL’gth
;

610 
ËngthResuÉ
 = 1;

613 
mšL’gth
 = 
Ëngth
;

614 
ËngthResuÉ
 = 0;

625 if(
mšL’gth
 > 0 && 
ch¬s
 !ğ
¤cCh¬s
) {

626 
št32_t
 
»suÉ
;

628 #ià
U_IS_BIG_ENDIAN


630 
»suÉ
 = 
	`u´v_memcmp
(
ch¬s
, 
¤cCh¬s
, 
mšL’gth
 * (
UCh¬
));

631 if(
»suÉ
 != 0) {

632  (
št8_t
)(
»suÉ
 >> 15 | 1);

637 
»suÉ
 = ((
št32_t
)*(
ch¬s
++è- (št32_t)*(
¤cCh¬s
++));

638 if(
»suÉ
 != 0) {

639  (
št8_t
)(
»suÉ
 >> 15 | 1);

641 } --
mšL’gth
 > 0);

644  
ËngthResuÉ
;

645 
	}
}

648 
št8_t


649 
	gUnicodeSŒšg
::
	$doCom·»CodePoštOrd”
(
št32_t
 
¡¬t
,

650 
št32_t
 
Ëngth
,

651 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

652 
št32_t
 
¤cS¹
,

653 
št32_t
 
¤cL’gth
) const

657 if(
	`isBogus
()) {

662 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

664 if(
¤cCh¬s
 =ğ
NULL
) {

665 
¤cS¹
 = 
¤cL’gth
 = 0;

668 
št32_t
 
diff
 = 
	`u´v_¡rCom·»
(
	`g‘A¼ayS¹
(è+ 
¡¬t
, 
Ëngth
, 
¤cCh¬s
 + 
¤cS¹
, 
¤cL’gth
, 
FALSE
, 
TRUE
);

670 if(
diff
!=0) {

671  (
št8_t
)(
diff
 >> 15 | 1);

675 
	}
}

677 
št32_t


678 
	gUnicodeSŒšg
::
	$g‘L’gth
() const {

679  
	`Ëngth
();

680 
	}
}

682 
UCh¬


683 
	gUnicodeSŒšg
::
	$g‘Ch¬At
(
št32_t
 
off£t
) const {

684  
	`ch¬At
(
off£t
);

685 
	}
}

687 
UCh¬32


688 
	gUnicodeSŒšg
::
	$g‘Ch¬32At
(
št32_t
 
off£t
) const {

689  
	`ch¬32At
(
off£t
);

690 
	}
}

692 
št32_t


693 
	gUnicodeSŒšg
::
	$couÁCh¬32
(
št32_t
 
¡¬t
, iÁ32_ˆ
Ëngth
) const {

694 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

696  
	`u_couÁCh¬32
(
	`g‘A¼ayS¹
()+
¡¬t
, 
Ëngth
);

697 
	}
}

699 
UBoŞ


700 
	gUnicodeSŒšg
::
	$hasMÜeCh¬32Thª
(
št32_t
 
¡¬t
, iÁ32_ˆ
Ëngth
, iÁ32_ˆ
numb”
) const {

701 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

703  
	`u_¡rHasMÜeCh¬32Thª
(
	`g‘A¼ayS¹
()+
¡¬t
, 
Ëngth
, 
numb”
);

704 
	}
}

706 
št32_t


707 
	gUnicodeSŒšg
::
	$moveIndex32
(
št32_t
 
šdex
, iÁ32_ˆ
d–
) const {

709 
št32_t
 
Ën
 = 
	`Ëngth
();

710 if(
šdex
<0) {

711 
šdex
=0;

712 } if(
šdex
>
Ën
) {

713 
šdex
=
Ën
;

716 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

717 if(
d–
>0) {

718 
	`UTF_FWD_N
(
¬¿y
, 
šdex
, 
Ën
, 
d–
);

720 
	`UTF_BACK_N
(
¬¿y
, 0, 
šdex
, -
d–
);

723  
šdex
;

724 
	}
}

727 
	gUnicodeSŒšg
::
	$doExŒaù
(
št32_t
 
¡¬t
,

728 
št32_t
 
Ëngth
,

729 
UCh¬
 *
d¡
,

730 
št32_t
 
d¡S¹
) const

733 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

736 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

737 if(
¬¿y
 + 
¡¬t
 !ğ
d¡
 + 
d¡S¹
) {

738 
	`us_¬¿yCİy
(
¬¿y
, 
¡¬t
, 
d¡
, 
d¡S¹
, 
Ëngth
);

740 
	}
}

742 
št32_t


743 
	gUnicodeSŒšg
::
	$exŒaù
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

744 
UE¼ÜCode
 &
”rÜCode
) const {

745 
št32_t
 
Ën
 = 
	`Ëngth
();

746 if(
	`U_SUCCESS
(
”rÜCode
)) {

747 if(
	`isBogus
(è|| 
de¡C­ac™y
<0 || (de¡C­ac™y>0 && 
de¡
==0)) {

748 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

750 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

751 if(
Ën
>0 &&†’<=
de¡C­ac™y
 && 
¬¿y
!=
de¡
) {

752 
	`u´v_memıy
(
de¡
, 
¬¿y
, 
Ën
*
U_SIZEOF_UCHAR
);

754  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
Ën
, &
”rÜCode
);

758  
Ën
;

759 
	}
}

761 
št32_t


762 
	gUnicodeSŒšg
::
	$exŒaù
(
št32_t
 
¡¬t
,

763 
št32_t
 
Ëngth
,

764 *
rg‘
,

765 
št32_t
 
rg‘C­ac™y
,

766 
EInv¬ŸÁ
) const

769 if(
rg‘C­ac™y
 < 0 || (rg‘C­ac™y > 0 && 
rg‘
 =ğ
NULL
)) {

774 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

776 if(
Ëngth
 <ğ
rg‘C­ac™y
) {

777 
	`u_UCh¬sToCh¬s
(
	`g‘A¼ayS¹
(è+ 
¡¬t
, 
rg‘
, 
Ëngth
);

779 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

780  
	`u_‹rmš©eCh¬s
(
rg‘
, 
rg‘C­ac™y
, 
Ëngth
, &
¡©us
);

781 
	}
}

783 
UnicodeSŒšg


784 
	gUnicodeSŒšg
::
	$‹mpSubSŒšg
(
št32_t
 
¡¬t
, iÁ32_ˆ
Ën
) const {

785 
	`pšIndiûs
(
¡¬t
, 
Ën
);

786 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘Bufãr
();

787 if(
¬¿y
==
NULL
) {

788 
¬¿y
=
fUniÚ
.
fSckBufãr
;

789 
Ën
=-2;

791  
	`UnicodeSŒšg
(
FALSE
, 
¬¿y
 + 
¡¬t
, 
Ën
);

792 
	}
}

794 
št32_t


795 
	gUnicodeSŒšg
::
	$toUTF8
(
št32_t
 
¡¬t
, iÁ32_ˆ
Ën
,

796 *
rg‘
, 
št32_t
 
ÿ·c™y
) const {

797 
	`pšIndiûs
(
¡¬t
, 
Ën
);

798 
št32_t
 
Ëngth8
;

799 
UE¼ÜCode
 
”rÜCode
 = 
U_ZERO_ERROR
;

800 
	`u_¡rToUTF8W™hSub
(
rg‘
, 
ÿ·c™y
, &
Ëngth8
,

801 
	`g‘Bufãr
(è+ 
¡¬t
, 
Ën
,

803 
NULL
,

804 &
”rÜCode
);

805  
Ëngth8
;

806 
	}
}

808 #ià
U_CHARSET_IS_UTF8


810 
št32_t


811 
	gUnicodeSŒšg
::
	$exŒaù
(
št32_t
 
¡¬t
, iÁ32_ˆ
Ën
,

812 *
rg‘
, 
ušt32_t
 
d¡Size
) const {

814 ifĞ(
d¡Size
 > 0 && 
rg‘
 == 0)) {

817  
	`toUTF8
(
¡¬t
, 
Ën
, 
rg‘
, 
d¡Size
 <ğ0x7ffffffà? (
št32_t
)dstSize : 0x7fffffff);

818 
	}
}

824 
	gUnicodeSŒšg
::
	$exŒaùB‘w“n
(
št32_t
 
¡¬t
,

825 
št32_t
 
lim™
,

826 
UnicodeSŒšg
& 
rg‘
) const {

827 
	`pšIndex
(
¡¬t
);

828 
	`pšIndex
(
lim™
);

829 
	`doExŒaù
(
¡¬t
, 
lim™
 - s¹, 
rg‘
);

830 
	}
}

837 
	gUnicodeSŒšg
::
	$toUTF8
(
By‹Sšk
 &
sšk
) const {

838 
št32_t
 
Ëngth16
 = 
	`Ëngth
();

839 if(
Ëngth16
 != 0) {

840 
¡ackBufãr
[1024];

841 
št32_t
 
ÿ·c™y
 = (št32_t)(
¡ackBufãr
);

842 
UBoŞ
 
utf8IsOwÃd
 = 
FALSE
;

843 *
utf8
 = 
sšk
.
	`G‘Aµ’dBufãr
(
Ëngth16
 < 
ÿ·c™y
 ?†ength16 : capacity,

844 3*
Ëngth16
,

845 
¡ackBufãr
, 
ÿ·c™y
,

846 &
ÿ·c™y
);

847 
št32_t
 
Ëngth8
 = 0;

848 
UE¼ÜCode
 
”rÜCode
 = 
U_ZERO_ERROR
;

849 
	`u_¡rToUTF8W™hSub
(
utf8
, 
ÿ·c™y
, &
Ëngth8
,

850 
	`g‘Bufãr
(), 
Ëngth16
,

852 
NULL
,

853 &
”rÜCode
);

854 if(
”rÜCode
 =ğ
U_BUFFER_OVERFLOW_ERROR
) {

855 
utf8
 = (*)
	`u´v_m®loc
(
Ëngth8
);

856 if(
utf8
 !ğ
NULL
) {

857 
utf8IsOwÃd
 = 
TRUE
;

858 
”rÜCode
 = 
U_ZERO_ERROR
;

859 
	`u_¡rToUTF8W™hSub
(
utf8
, 
Ëngth8
, &length8,

860 
	`g‘Bufãr
(), 
Ëngth16
,

862 
NULL
,

863 &
”rÜCode
);

865 
”rÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

868 if(
	`U_SUCCESS
(
”rÜCode
)) {

869 
sšk
.
	`Aµ’d
(
utf8
, 
Ëngth8
);

870 
sšk
.
	`Flush
();

872 if(
utf8IsOwÃd
) {

873 
	`u´v_ä“
(
utf8
);

876 
	}
}

878 
št32_t


879 
	gUnicodeSŒšg
::
	$toUTF32
(
UCh¬32
 *
utf32
, 
št32_t
 
ÿ·c™y
, 
UE¼ÜCode
 &
”rÜCode
) const {

880 
št32_t
 
Ëngth32
=0;

881 if(
	`U_SUCCESS
(
”rÜCode
)) {

883 
	`u_¡rToUTF32W™hSub
(
utf32
, 
ÿ·c™y
, &
Ëngth32
,

884 
	`g‘Bufãr
(), 
	`Ëngth
(),

886 
NULL
,

887 &
”rÜCode
);

889  
Ëngth32
;

890 
	}
}

892 
št32_t


893 
	gUnicodeSŒšg
::
	$šdexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

894 
št32_t
 
¤cS¹
,

895 
št32_t
 
¤cL’gth
,

896 
št32_t
 
¡¬t
,

897 
št32_t
 
Ëngth
) const

899 if(
	`isBogus
(è|| 
¤cCh¬s
 =ğ0 || 
¤cS¹
 < 0 || 
¤cL’gth
 == 0) {

904 if(
¤cL’gth
 < 0 && 
¤cCh¬s
[
¤cS¹
] == 0) {

909 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

912 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

913 cÚ¡ 
UCh¬
 *
m©ch
 = 
	`u_¡rFšdFœ¡
(
¬¿y
 + 
¡¬t
, 
Ëngth
, 
¤cCh¬s
 + 
¤cS¹
, 
¤cL’gth
);

914 if(
m©ch
 =ğ
NULL
) {

917  (
št32_t
)(
m©ch
 - 
¬¿y
);

919 
	}
}

921 
št32_t


922 
	gUnicodeSŒšg
::
	$doIndexOf
(
UCh¬
 
c
,

923 
št32_t
 
¡¬t
,

924 
št32_t
 
Ëngth
) const

927 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

930 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

931 cÚ¡ 
UCh¬
 *
m©ch
 = 
	`u_memchr
(
¬¿y
 + 
¡¬t
, 
c
, 
Ëngth
);

932 if(
m©ch
 =ğ
NULL
) {

935  (
št32_t
)(
m©ch
 - 
¬¿y
);

937 
	}
}

939 
št32_t


940 
	gUnicodeSŒšg
::
	$doIndexOf
(
UCh¬32
 
c
,

941 
št32_t
 
¡¬t
,

942 
št32_t
 
Ëngth
) const {

944 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

947 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

948 cÚ¡ 
UCh¬
 *
m©ch
 = 
	`u_memchr32
(
¬¿y
 + 
¡¬t
, 
c
, 
Ëngth
);

949 if(
m©ch
 =ğ
NULL
) {

952  (
št32_t
)(
m©ch
 - 
¬¿y
);

954 
	}
}

956 
št32_t


957 
	gUnicodeSŒšg
::
	$Ï¡IndexOf
(cÚ¡ 
UCh¬
 *
¤cCh¬s
,

958 
št32_t
 
¤cS¹
,

959 
št32_t
 
¤cL’gth
,

960 
št32_t
 
¡¬t
,

961 
št32_t
 
Ëngth
) const

963 if(
	`isBogus
(è|| 
¤cCh¬s
 =ğ0 || 
¤cS¹
 < 0 || 
¤cL’gth
 == 0) {

968 if(
¤cL’gth
 < 0 && 
¤cCh¬s
[
¤cS¹
] == 0) {

973 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

976 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

977 cÚ¡ 
UCh¬
 *
m©ch
 = 
	`u_¡rFšdLa¡
(
¬¿y
 + 
¡¬t
, 
Ëngth
, 
¤cCh¬s
 + 
¤cS¹
, 
¤cL’gth
);

978 if(
m©ch
 =ğ
NULL
) {

981  (
št32_t
)(
m©ch
 - 
¬¿y
);

983 
	}
}

985 
št32_t


986 
	gUnicodeSŒšg
::
	$doLa¡IndexOf
(
UCh¬
 
c
,

987 
št32_t
 
¡¬t
,

988 
št32_t
 
Ëngth
) const

990 if(
	`isBogus
()) {

995 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

998 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

999 cÚ¡ 
UCh¬
 *
m©ch
 = 
	`u_memrchr
(
¬¿y
 + 
¡¬t
, 
c
, 
Ëngth
);

1000 if(
m©ch
 =ğ
NULL
) {

1003  (
št32_t
)(
m©ch
 - 
¬¿y
);

1005 
	}
}

1007 
št32_t


1008 
	gUnicodeSŒšg
::
	$doLa¡IndexOf
(
UCh¬32
 
c
,

1009 
št32_t
 
¡¬t
,

1010 
št32_t
 
Ëngth
) const {

1012 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

1015 cÚ¡ 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

1016 cÚ¡ 
UCh¬
 *
m©ch
 = 
	`u_memrchr32
(
¬¿y
 + 
¡¬t
, 
c
, 
Ëngth
);

1017 if(
m©ch
 =ğ
NULL
) {

1020  (
št32_t
)(
m©ch
 - 
¬¿y
);

1022 
	}
}

1028 
	gUnicodeSŒšg
&

1029 
	gUnicodeSŒšg
::
	$fšdAndR•Ïû
(
št32_t
 
¡¬t
,

1030 
št32_t
 
Ëngth
,

1031 cÚ¡ 
UnicodeSŒšg
& 
ŞdText
,

1032 
št32_t
 
ŞdS¹
,

1033 
št32_t
 
ŞdL’gth
,

1034 cÚ¡ 
UnicodeSŒšg
& 
ÃwText
,

1035 
št32_t
 
ÃwS¹
,

1036 
št32_t
 
ÃwL’gth
)

1038 if(
	`isBogus
(è|| 
ŞdText
.isBogus(è|| 
ÃwText
.isBogus()) {

1039  *
this
;

1042 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

1043 
ŞdText
.
	`pšIndiûs
(
ŞdS¹
, 
ŞdL’gth
);

1044 
ÃwText
.
	`pšIndiûs
(
ÃwS¹
, 
ÃwL’gth
);

1046 if(
ŞdL’gth
 == 0) {

1047  *
this
;

1050 
Ëngth
 > 0 &&†’gth >ğ
ŞdL’gth
) {

1051 
št32_t
 
pos
 = 
	`šdexOf
(
ŞdText
, 
ŞdS¹
, 
ŞdL’gth
, 
¡¬t
, 
Ëngth
);

1052 if(
pos
 < 0) {

1057 
	`»¶aû
(
pos
, 
ŞdL’gth
, 
ÃwText
, 
ÃwS¹
, 
ÃwL’gth
);

1058 
Ëngth
 -ğ
pos
 + 
ŞdL’gth
 - 
¡¬t
;

1059 
¡¬t
 = 
pos
 + 
ÃwL’gth
;

1063  *
this
;

1064 
	}
}

1068 
	gUnicodeSŒšg
::
	$£tToBogus
()

1070 
	`»Ëa£A¼ay
();

1072 
fShÜtL’gth
 = 0;

1073 
fUniÚ
.
fF›lds
.
fA¼ay
 = 0;

1074 
fUniÚ
.
fF›lds
.
fC­ac™y
 = 0;

1075 
fFÏgs
 = 
kIsBogus
;

1076 
	}
}

1080 
	gUnicodeSŒšg
::
	$unBogus
() {

1081 if(
fFÏgs
 & 
kIsBogus
) {

1082 
	`£tToEm±y
();

1084 
	}
}

1087 
	gUnicodeSŒšg
 &

1088 
	gUnicodeSŒšg
::
	$£tTo
(
UBoŞ
 
isT”mš©ed
,

1089 cÚ¡ 
UCh¬
 *
‹xt
,

1090 
št32_t
 
‹xtL’gth
)

1092 if(
fFÏgs
 & 
kO³nG‘Bufãr
) {

1094  *
this
;

1097 if(
‹xt
 =ğ
NULL
) {

1099 
	`»Ëa£A¼ay
();

1100 
	`£tToEm±y
();

1101  *
this
;

1104 ifĞ
‹xtL’gth
 < -1 ||

1105 (
‹xtL’gth
 =ğ-1 && !
isT”mš©ed
) ||

1106 (
‹xtL’gth
 >ğ0 && 
isT”mš©ed
 && 
‹xt
[textLength] != 0)

1108 
	`£tToBogus
();

1109  *
this
;

1112 
	`»Ëa£A¼ay
();

1114 if(
‹xtL’gth
 == -1) {

1116 
‹xtL’gth
 = 
	`u_¡¾’
(
‹xt
);

1118 
	`£tA¼ay
((
UCh¬
 *)
‹xt
, 
‹xtL’gth
, 
isT”mš©ed
 ?extLength + 1 :extLength);

1120 
fFÏgs
 = 
kR—dÚlyAlŸs
;

1121  *
this
;

1122 
	}
}

1125 
	gUnicodeSŒšg
 &

1126 
	gUnicodeSŒšg
::
	$£tTo
(
UCh¬
 *
bufãr
,

1127 
št32_t
 
buffL’gth
,

1128 
št32_t
 
buffC­ac™y
) {

1129 if(
fFÏgs
 & 
kO³nG‘Bufãr
) {

1131  *
this
;

1134 if(
bufãr
 =ğ
NULL
) {

1136 
	`»Ëa£A¼ay
();

1137 
	`£tToEm±y
();

1138  *
this
;

1141 if(
buffL’gth
 < -1 || 
buffC­ac™y
 < 0 || buffLength > buffCapacity) {

1142 
	`£tToBogus
();

1143  *
this
;

1144 } if(
buffL’gth
 == -1) {

1146 cÚ¡ 
UCh¬
 *
p
 = 
bufãr
, *
lim™
 = bufã¸+ 
buffC­ac™y
;

1147 
p
 !ğ
lim™
 && *p != 0) {

1148 ++
p
;

1150 
buffL’gth
 = (
št32_t
)(
p
 - 
bufãr
);

1153 
	`»Ëa£A¼ay
();

1155 
	`£tA¼ay
(
bufãr
, 
buffL’gth
, 
buffC­ac™y
);

1156 
fFÏgs
 = 
kWr™abËAlŸs
;

1157  *
this
;

1158 
	}
}

1160 
	gUnicodeSŒšg
 &UnicodeSŒšg::
	$£tToUTF8
(cÚ¡ 
SŒšgP›û
 &
utf8
) {

1161 
	`unBogus
();

1162 
št32_t
 
Ëngth
 = 
utf8
.
	`Ëngth
();

1163 
št32_t
 
ÿ·c™y
;

1165 if(
Ëngth
 <ğ
US_STACKBUF_SIZE
) {

1166 
ÿ·c™y
 = 
US_STACKBUF_SIZE
;

1168 
ÿ·c™y
 = 
Ëngth
 + 1;

1170 
UCh¬
 *
utf16
 = 
	`g‘Bufãr
(
ÿ·c™y
);

1171 
št32_t
 
Ëngth16
;

1172 
UE¼ÜCode
 
”rÜCode
 = 
U_ZERO_ERROR
;

1173 
	`u_¡rFromUTF8W™hSub
(
utf16
, 
	`g‘C­ac™y
(), &
Ëngth16
,

1174 
utf8
.
	`d©a
(), 
Ëngth
,

1176 
NULL
,

1177 &
”rÜCode
);

1178 
	`»Ëa£Bufãr
(
Ëngth16
);

1179 if(
	`U_FAILURE
(
”rÜCode
)) {

1180 
	`£tToBogus
();

1182  *
this
;

1183 
	}
}

1185 
	gUnicodeSŒšg
&

1186 
	gUnicodeSŒšg
::
	$£tCh¬At
(
št32_t
 
off£t
,

1187 
UCh¬
 
c
)

1189 
št32_t
 
Ën
 = 
	`Ëngth
();

1190 if(
	`şÚeA¼ayIfN“ded
(è&& 
Ën
 > 0) {

1191 if(
off£t
 < 0) {

1192 
off£t
 = 0;

1193 } if(
off£t
 >ğ
Ën
) {

1194 
off£t
 = 
Ën
 - 1;

1197 
	`g‘A¼ayS¹
()[
off£t
] = 
c
;

1199  *
this
;

1200 
	}
}

1202 
	gUnicodeSŒšg
&

1203 
	gUnicodeSŒšg
::
	$doR•Ïû
Ğ
št32_t
 
¡¬t
,

1204 
št32_t
 
Ëngth
,

1205 cÚ¡ 
UnicodeSŒšg
& 
¤c
,

1206 
št32_t
 
¤cS¹
,

1207 
št32_t
 
¤cL’gth
)

1209 if(!
¤c
.
	`isBogus
()) {

1211 
¤c
.
	`pšIndiûs
(
¤cS¹
, 
¤cL’gth
);

1215  
	`doR•Ïû
(
¡¬t
, 
Ëngth
, 
¤c
.
	`g‘A¼ayS¹
(), 
¤cS¹
, 
¤cL’gth
);

1218  
	`doR•Ïû
(
¡¬t
, 
Ëngth
, 0, 0, 0);

1220 
	}
}

1222 
	gUnicodeSŒšg
&

1223 
	gUnicodeSŒšg
::
	$doR•Ïû
(
št32_t
 
¡¬t
,

1224 
št32_t
 
Ëngth
,

1225 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

1226 
št32_t
 
¤cS¹
,

1227 
št32_t
 
¤cL’gth
)

1229 if(!
	`isWr™abË
()) {

1230  *
this
;

1233 
št32_t
 
ŞdL’gth
 = 
this
->
	`Ëngth
();

1236 if((
fFÏgs
&
kBufãrIsR—dÚly
è&& 
¤cL’gth
 == 0) {

1237 if(
¡¬t
 == 0) {

1239 
	`pšIndex
(
Ëngth
);

1240 
fUniÚ
.
fF›lds
.
fA¼ay
 +ğ
Ëngth
;

1241 
fUniÚ
.
fF›lds
.
fC­ac™y
 -ğ
Ëngth
;

1242 
	`£tL’gth
(
ŞdL’gth
 - 
Ëngth
);

1243  *
this
;

1245 
	`pšIndex
(
¡¬t
);

1246 if(
Ëngth
 >ğ(
ŞdL’gth
 - 
¡¬t
)) {

1248 
	`£tL’gth
(
¡¬t
);

1249 
fUniÚ
.
fF›lds
.
fC­ac™y
 = 
¡¬t
;

1250  *
this
;

1255 if(
¤cCh¬s
 == 0) {

1256 
¤cS¹
 = 
¤cL’gth
 = 0;

1257 } if(
¤cL’gth
 < 0) {

1259 
¤cL’gth
 = 
	`u_¡¾’
(
¤cCh¬s
 + 
¤cS¹
);

1263 
št32_t
 
ÃwSize
;

1266 if(
¡¬t
 >ğ
ŞdL’gth
) {

1267 
ÃwSize
 = 
ŞdL’gth
 + 
¤cL’gth
;

1268 if(
ÃwSize
 <ğ
	`g‘C­ac™y
(è&& 
	`isBufãrWr™abË
()) {

1269 
	`us_¬¿yCİy
(
¤cCh¬s
, 
¤cS¹
, 
	`g‘A¼ayS¹
(), 
ŞdL’gth
, 
¤cL’gth
);

1270 
	`£tL’gth
(
ÃwSize
);

1271  *
this
;

1274 
¡¬t
 = 
ŞdL’gth
;

1275 
Ëngth
 = 0;

1279 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

1281 
ÃwSize
 = 
ŞdL’gth
 - 
Ëngth
 + 
¤cL’gth
;

1286 
UCh¬
 
ŞdSckBufãr
[
US_STACKBUF_SIZE
];

1287 
UCh¬
 *
ŞdA¼ay
;

1288 if((
fFÏgs
&
kUsšgSckBufãr
è&& (
ÃwSize
 > 
US_STACKBUF_SIZE
)) {

1291 
	`u_memıy
(
ŞdSckBufãr
, 
fUniÚ
.
fSckBufãr
, 
ŞdL’gth
);

1292 
ŞdA¼ay
 = 
ŞdSckBufãr
;

1294 
ŞdA¼ay
 = 
	`g‘A¼ayS¹
();

1298 
št32_t
 *
bufãrToD–‘e
 = 0;

1299 if(!
	`şÚeA¼ayIfN“ded
(
ÃwSize
,‚ewSiz+ (ÃwSiz>> 2è+ 
kGrowSize
,

1300 
FALSE
, &
bufãrToD–‘e
)

1302  *
this
;

1307 
UCh¬
 *
ÃwA¼ay
 = 
	`g‘A¼ayS¹
();

1308 if(
ÃwA¼ay
 !ğ
ŞdA¼ay
) {

1310 
	`us_¬¿yCİy
(
ŞdA¼ay
, 0, 
ÃwA¼ay
, 0, 
¡¬t
);

1311 
	`us_¬¿yCİy
(
ŞdA¼ay
, 
¡¬t
 + 
Ëngth
,

1312 
ÃwA¼ay
, 
¡¬t
 + 
¤cL’gth
,

1313 
ŞdL’gth
 - (
¡¬t
 + 
Ëngth
));

1314 } if(
Ëngth
 !ğ
¤cL’gth
) {

1316 
	`us_¬¿yCİy
(
ŞdA¼ay
, 
¡¬t
 + 
Ëngth
,

1317 
ÃwA¼ay
, 
¡¬t
 + 
¤cL’gth
,

1318 
ŞdL’gth
 - (
¡¬t
 + 
Ëngth
));

1322 
	`us_¬¿yCİy
(
¤cCh¬s
, 
¤cS¹
, 
ÃwA¼ay
, 
¡¬t
, 
¤cL’gth
);

1324 
	`£tL’gth
(
ÃwSize
);

1328 ià(
bufãrToD–‘e
) {

1329 
	`u´v_ä“
(
bufãrToD–‘e
);

1332  *
this
;

1333 
	}
}

1339 
	gUnicodeSŒšg
::
	$hªdËR•ÏûB‘w“n
(
št32_t
 
¡¬t
,

1340 
št32_t
 
lim™
,

1341 cÚ¡ 
UnicodeSŒšg
& 
‹xt
) {

1342 
	`»¶aûB‘w“n
(
¡¬t
, 
lim™
, 
‹xt
);

1343 
	}
}

1349 
	gUnicodeSŒšg
::
	$cİy
(
št32_t
 
¡¬t
, iÁ32_ˆ
lim™
, iÁ32_ˆ
de¡
) {

1350 ià(
lim™
 <ğ
¡¬t
) {

1353 
UCh¬
* 
‹xt
 = (UCh¬*è
	`u´v_m®loc
Ğ(UCh¬è* (
lim™
 - 
¡¬t
) );

1355 ià(
‹xt
 !ğ
NULL
) {

1356 
	`exŒaùB‘w“n
(
¡¬t
, 
lim™
, 
‹xt
, 0);

1357 
	`š£¹
(
de¡
, 
‹xt
, 0, 
lim™
 - 
¡¬t
);

1358 
	`u´v_ä“
(
‹xt
);

1360 
	}
}

1368 
UBoŞ
 
	gR•ÏûabË
::
	$hasM‘aD©a
() const {

1369  
TRUE
;

1370 
	}
}

1375 
UBoŞ
 
	gUnicodeSŒšg
::
	$hasM‘aD©a
() const {

1376  
FALSE
;

1377 
	}
}

1379 
	gUnicodeSŒšg
&

1380 
	gUnicodeSŒšg
::
	$doRev”£
(
št32_t
 
¡¬t
, iÁ32_ˆ
Ëngth
) {

1381 if(
Ëngth
 <ğ1 || !
	`şÚeA¼ayIfN“ded
()) {

1382  *
this
;

1386 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

1387 if(
Ëngth
 <= 1) {

1388  *
this
;

1391 
UCh¬
 *
Ëá
 = 
	`g‘A¼ayS¹
(è+ 
¡¬t
;

1392 
UCh¬
 *
right
 = 
Ëá
 + 
Ëngth
 - 1;

1393 
UCh¬
 
sw­
;

1394 
UBoŞ
 
hasSuµËm’ry
 = 
FALSE
;

1398 
hasSuµËm’ry
 |ğ(
UBoŞ
)
	`U16_IS_LEAD
(
sw­
 = *
Ëá
);

1399 
hasSuµËm’ry
 |ğ(
UBoŞ
)
	`U16_IS_LEAD
(*
Ëá
++ = *
right
);

1400 *
right
-- = 
sw­
;

1401 } 
Ëá
 < 
right
);

1404 
hasSuµËm’ry
 |ğ(
UBoŞ
)
	`U16_IS_LEAD
(*
Ëá
);

1407 if(
hasSuµËm’ry
) {

1408 
UCh¬
 
sw­2
;

1410 
Ëá
 = 
	`g‘A¼ayS¹
(è+ 
¡¬t
;

1411 
right
 = 
Ëá
 + 
Ëngth
 - 1;

1412 
Ëá
 < 
right
) {

1413 if(
	`U16_IS_TRAIL
(
sw­
 = *
Ëá
è&& 
	`U16_IS_LEAD
(
sw­2
 = *(left + 1))) {

1414 *
Ëá
++ = 
sw­2
;

1415 *
Ëá
++ = 
sw­
;

1417 ++
Ëá
;

1422  *
this
;

1423 
	}
}

1425 
UBoŞ


1426 
	gUnicodeSŒšg
::
	$·dL—dšg
(
št32_t
 
rg‘L’gth
,

1427 
UCh¬
 
·dCh¬
)

1429 
št32_t
 
ŞdL’gth
 = 
	`Ëngth
();

1430 if(
ŞdL’gth
 >ğ
rg‘L’gth
 || !
	`şÚeA¼ayIfN“ded
(targetLength)) {

1431  
FALSE
;

1434 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

1435 
št32_t
 
¡¬t
 = 
rg‘L’gth
 - 
ŞdL’gth
;

1436 
	`us_¬¿yCİy
(
¬¿y
, 0,‡¼ay, 
¡¬t
, 
ŞdL’gth
);

1439 --
¡¬t
 >= 0) {

1440 
¬¿y
[
¡¬t
] = 
·dCh¬
;

1442 
	`£tL’gth
(
rg‘L’gth
);

1443  
TRUE
;

1445 
	}
}

1447 
UBoŞ


1448 
	gUnicodeSŒšg
::
	$·dT¿šg
(
št32_t
 
rg‘L’gth
,

1449 
UCh¬
 
·dCh¬
)

1451 
št32_t
 
ŞdL’gth
 = 
	`Ëngth
();

1452 if(
ŞdL’gth
 >ğ
rg‘L’gth
 || !
	`şÚeA¼ayIfN“ded
(targetLength)) {

1453  
FALSE
;

1456 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

1457 
št32_t
 
Ëngth
 = 
rg‘L’gth
;

1458 --
Ëngth
 >ğ
ŞdL’gth
) {

1459 
¬¿y
[
Ëngth
] = 
·dCh¬
;

1461 
	`£tL’gth
(
rg‘L’gth
);

1462  
TRUE
;

1464 
	}
}

1469 
št32_t


1470 
	gUnicodeSŒšg
::
	$doHashCode
() const

1474 
št32_t
 
hashCode
 = 
	`uhash_hashUCh¬sN
(
	`g‘A¼ayS¹
(), 
	`Ëngth
());

1475 ià(
hashCode
 =ğ
kInv®idHashCode
) {

1476 
hashCode
 = 
kEm±yHashCode
;

1478  
hashCode
;

1479 
	}
}

1485 
UCh¬
 *

1486 
	gUnicodeSŒšg
::
	$g‘Bufãr
(
št32_t
 
mšC­ac™y
) {

1487 if(
mšC­ac™y
>=-1 && 
	`şÚeA¼ayIfN“ded
(minCapacity)) {

1488 
fFÏgs
|=
kO³nG‘Bufãr
;

1489 
fShÜtL’gth
=0;

1490  
	`g‘A¼ayS¹
();

1494 
	}
}

1497 
	gUnicodeSŒšg
::
	$»Ëa£Bufãr
(
št32_t
 
ÃwL’gth
) {

1498 if(
fFÏgs
&
kO³nG‘Bufãr
 && 
ÃwL’gth
>=-1) {

1500 
št32_t
 
ÿ·c™y
=
	`g‘C­ac™y
();

1501 if(
ÃwL’gth
==-1) {

1503 cÚ¡ 
UCh¬
 *
¬¿y
=
	`g‘A¼ayS¹
(), *
p
÷¼ay, *
lim™
÷¼ay+
ÿ·c™y
;

1504 
p
<
lim™
 && *p!=0) {

1505 ++
p
;

1507 
ÃwL’gth
=(
št32_t
)(
p
-
¬¿y
);

1508 } if(
ÃwL’gth
>
ÿ·c™y
) {

1509 
ÃwL’gth
=
ÿ·c™y
;

1511 
	`£tL’gth
(
ÃwL’gth
);

1512 
fFÏgs
&=~
kO³nG‘Bufãr
;

1514 
	}
}

1519 
UBoŞ


1520 
	gUnicodeSŒšg
::
	$şÚeA¼ayIfN“ded
(
št32_t
 
ÃwC­ac™y
,

1521 
št32_t
 
growC­ac™y
,

1522 
UBoŞ
 
doCİyA¼ay
,

1523 
št32_t
 **
pBufãrToD–‘e
,

1524 
UBoŞ
 
fÜûClÚe
) {

1527 if(
ÃwC­ac™y
 == -1) {

1528 
ÃwC­ac™y
 = 
	`g‘C­ac™y
();

1534 if(!
	`isWr™abË
()) {

1535  
FALSE
;

1545 if(
fÜûClÚe
 ||

1546 
fFÏgs
 & 
kBufãrIsR—dÚly
 ||

1547 (
fFÏgs
 & 
kRefCouÁed
 && 
	`»fCouÁ
() > 1) ||

1548 
ÃwC­ac™y
 > 
	`g‘C­ac™y
()

1551 if(
growC­ac™y
 == -1) {

1552 
growC­ac™y
 = 
ÃwC­ac™y
;

1553 } if(
ÃwC­ac™y
 <ğ
US_STACKBUF_SIZE
 && 
growC­ac™y
 > US_STACKBUF_SIZE) {

1554 
growC­ac™y
 = 
US_STACKBUF_SIZE
;

1558 
UCh¬
 
ŞdSckBufãr
[
US_STACKBUF_SIZE
];

1559 
UCh¬
 *
ŞdA¼ay
;

1560 
ušt8_t
 
æags
 = 
fFÏgs
;

1562 if(
æags
&
kUsšgSckBufãr
) {

1563 if(
doCİyA¼ay
 && 
growC­ac™y
 > 
US_STACKBUF_SIZE
) {

1566 
	`us_¬¿yCİy
(
fUniÚ
.
fSckBufãr
, 0, 
ŞdSckBufãr
, 0, 
fShÜtL’gth
);

1567 
ŞdA¼ay
 = 
ŞdSckBufãr
;

1569 
ŞdA¼ay
 = 0;

1572 
ŞdA¼ay
 = 
fUniÚ
.
fF›lds
.
fA¼ay
;

1576 if(
	`®loÿ‹
(
growC­ac™y
) ||

1577 (
ÃwC­ac™y
 < 
growC­ac™y
 && 
	`®loÿ‹
(newCapacity))

1579 if(
doCİyA¼ay
 && 
ŞdA¼ay
 != 0) {

1582 
št32_t
 
mšL’gth
 = 
	`Ëngth
();

1583 
ÃwC­ac™y
 = 
	`g‘C­ac™y
();

1584 if(
ÃwC­ac™y
 < 
mšL’gth
) {

1585 
mšL’gth
 = 
ÃwC­ac™y
;

1586 
	`£tL’gth
(
mšL’gth
);

1588 
	`us_¬¿yCİy
(
ŞdA¼ay
, 0, 
	`g‘A¼ayS¹
(), 0, 
mšL’gth
);

1590 
fShÜtL’gth
 = 0;

1594 if(
æags
 & 
kRefCouÁed
) {

1596 
št32_t
 *
pRefCouÁ
 = ((št32_ˆ*)
ŞdA¼ay
 - 1);

1597 if(
	`umtx_©omic_dec
(
pRefCouÁ
) == 0) {

1598 if(
pBufãrToD–‘e
 == 0) {

1599 
	`u´v_ä“
(
pRefCouÁ
);

1602 *
pBufãrToD–‘e
 = 
pRefCouÁ
;

1609 if(!(
æags
&
kUsšgSckBufãr
)) {

1610 
fUniÚ
.
fF›lds
.
fA¼ay
 = 
ŞdA¼ay
;

1612 
fFÏgs
 = 
æags
;

1613 
	`£tToBogus
();

1614  
FALSE
;

1617  
TRUE
;

1618 
	}
}

1619 
	gU_NAMESPACE_END


1621 #ifdeà
U_STATIC_IMPLEMENTATION


1629 
	$u´v_UnicodeSŒšgDummy
() {

1630 
U_NAMESPACE_USE


1631 
d–‘e
 [] (
Ãw
 
UnicodeSŒšg
[2]);

1632 
	}
}

	@unistr_case.cpp

19 
	~"unicode/uty³s.h
"

20 
	~"unicode/put.h
"

21 
	~"unicode/locid.h
"

22 
	~"c¡ršg.h
"

23 
	~"cmemÜy.h
"

24 
	~"unicode/u¡ršg.h
"

25 
	~"unicode/uni¡r.h
"

26 
	~"unicode/uch¬.h
"

27 
	~"unicode/ubrk.h
"

28 
	~"u¡r_imp.h
"

29 
	~"uhash.h
"

31 
U_NAMESPACE_BEGIN


37 
št8_t


38 
	gUnicodeSŒšg
::
	$doCa£Com·»
(
št32_t
 
¡¬t
,

39 
št32_t
 
Ëngth
,

40 cÚ¡ 
UCh¬
 *
¤cCh¬s
,

41 
št32_t
 
¤cS¹
,

42 
št32_t
 
¤cL’gth
,

43 
ušt32_t
 
İtiÚs
) const

47 if(
	`isBogus
()) {

52 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

54 if(
¤cCh¬s
 =ğ
NULL
) {

55 
¤cS¹
 = 
¤cL’gth
 = 0;

59 cÚ¡ 
UCh¬
 *
ch¬s
 = 
	`g‘A¼ayS¹
();

61 
ch¬s
 +ğ
¡¬t
;

62 
¤cCh¬s
 +ğ
¤cS¹
;

64 if(
ch¬s
 !ğ
¤cCh¬s
) {

65 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

66 
št32_t
 
»suÉ
=
	`u_¡rcmpFŞd
(
ch¬s
, 
Ëngth
, 
¤cCh¬s
, 
¤cL’gth
,

67 
İtiÚs
|
U_COMPARE_IGNORE_CASE
, &
”rÜCode
);

68 if(
»suÉ
!=0) {

69  (
št8_t
)(
»suÉ
 >> 24 | 1);

73 if(
¤cL’gth
 < 0) {

74 
¤cL’gth
 = 
	`u_¡¾’
(
¤cCh¬s
 + 
¤cS¹
);

76 if(
Ëngth
 !ğ
¤cL’gth
) {

77  (
št8_t
)((
Ëngth
 - 
¤cL’gth
) >> 24 | 1);

81 
	}
}

92 
	gUnicodeSŒšg
 &

93 
	gUnicodeSŒšg
::
	$ÿ£M­
(
B»akI‹¿tÜ
 *
t™ËI‹r
,

94 cÚ¡ *
loÿË
,

95 
ušt32_t
 
İtiÚs
,

96 
št32_t
 
toWhichCa£
) {

97 if(
	`isEm±y
(è|| !
	`isWr™abË
()) {

99  *
this
;

102 cÚ¡ 
UCa£Prİs
 *
c¥
=
	`uÿ£_g‘SšgËtÚ
();

108 
UCh¬
 
ŞdSckBufãr
[
US_STACKBUF_SIZE
];

109 
UCh¬
 *
ŞdA¼ay
;

110 
št32_t
 
ŞdL’gth
;

112 if(
fFÏgs
&
kUsšgSckBufãr
) {

114 
	`u_memıy
(
ŞdSckBufãr
, 
fUniÚ
.
fSckBufãr
, 
fShÜtL’gth
);

115 
ŞdA¼ay
 = 
ŞdSckBufãr
;

116 
ŞdL’gth
 = 
fShÜtL’gth
;

118 
ŞdA¼ay
 = 
	`g‘A¼ayS¹
();

119 
ŞdL’gth
 = 
	`Ëngth
();

122 
št32_t
 
ÿ·c™y
;

123 if(
ŞdL’gth
 <ğ
US_STACKBUF_SIZE
) {

124 
ÿ·c™y
 = 
US_STACKBUF_SIZE
;

126 
ÿ·c™y
 = 
ŞdL’gth
 + 20;

128 
št32_t
 *
bufãrToD–‘e
 = 0;

129 if(!
	`şÚeA¼ayIfN“ded
(
ÿ·c™y
, c­ac™y, 
FALSE
, &
bufãrToD–‘e
, 
TRUE
)) {

130  *
this
;

134 
UE¼ÜCode
 
”rÜCode
;

135 
št32_t
 
ÃwL’gth
;

137 
”rÜCode
 = 
U_ZERO_ERROR
;

138 if(
toWhichCa£
==
TO_LOWER
) {

139 
ÃwL’gth
 = 
	`u¡r_toLow”
(
c¥
, 
	`g‘A¼ayS¹
(), 
	`g‘C­ac™y
(),

140 
ŞdA¼ay
, 
ŞdL’gth
,

141 
loÿË
, &
”rÜCode
);

142 } if(
toWhichCa£
==
TO_UPPER
) {

143 
ÃwL’gth
 = 
	`u¡r_toUµ”
(
c¥
, 
	`g‘A¼ayS¹
(), 
	`g‘C­ac™y
(),

144 
ŞdA¼ay
, 
ŞdL’gth
,

145 
loÿË
, &
”rÜCode
);

146 } if(
toWhichCa£
==
TO_TITLE
) {

147 #ià
UCONFIG_NO_BREAK_ITERATION


148 
”rÜCode
=
U_UNSUPPORTED_ERROR
;

150 
ÃwL’gth
 = 
	`u¡r_toT™Ë
(
c¥
, 
	`g‘A¼ayS¹
(), 
	`g‘C­ac™y
(),

151 
ŞdA¼ay
, 
ŞdL’gth
,

152 (
UB»akI‹¿tÜ
 *)
t™ËI‹r
, 
loÿË
, 
İtiÚs
, &
”rÜCode
);

155 
ÃwL’gth
 = 
	`u¡r_fŞdCa£
(
c¥
, 
	`g‘A¼ayS¹
(), 
	`g‘C­ac™y
(),

156 
ŞdA¼ay
, 
ŞdL’gth
,

157 
İtiÚs
,

158 &
”rÜCode
);

160 
	`£tL’gth
(
ÃwL’gth
);

161 } 
”rÜCode
==
U_BUFFER_OVERFLOW_ERROR
 && 
	`şÚeA¼ayIfN“ded
(
ÃwL’gth
,‚ewL’gth, 
FALSE
));

163 ià(
bufãrToD–‘e
) {

164 
	`u´v_ä“
(
bufãrToD–‘e
);

166 if(
	`U_FAILURE
(
”rÜCode
)) {

167 
	`£tToBogus
();

169  *
this
;

170 
	}
}

172 
	gUnicodeSŒšg
 &

173 
	gUnicodeSŒšg
::
	$toLow”
() {

174  
	`ÿ£M­
(0, 
LoÿË
::
	`g‘DeçuÉ
().
	`g‘Name
(), 0, 
TO_LOWER
);

175 
	}
}

177 
	gUnicodeSŒšg
 &

178 
	gUnicodeSŒšg
::
	$toLow”
(cÚ¡ 
LoÿË
 &
loÿË
) {

179  
	`ÿ£M­
(0, 
loÿË
.
	`g‘Name
(), 0, 
TO_LOWER
);

180 
	}
}

182 
	gUnicodeSŒšg
 &

183 
	gUnicodeSŒšg
::
	$toUµ”
() {

184  
	`ÿ£M­
(0, 
LoÿË
::
	`g‘DeçuÉ
().
	`g‘Name
(), 0, 
TO_UPPER
);

185 
	}
}

187 
	gUnicodeSŒšg
 &

188 
	gUnicodeSŒšg
::
	$toUµ”
(cÚ¡ 
LoÿË
 &
loÿË
) {

189  
	`ÿ£M­
(0, 
loÿË
.
	`g‘Name
(), 0, 
TO_UPPER
);

190 
	}
}

192 #ià!
UCONFIG_NO_BREAK_ITERATION


194 
	gUnicodeSŒšg
 &

195 
	gUnicodeSŒšg
::
	$toT™Ë
(
B»akI‹¿tÜ
 *
t™ËI‹r
) {

196  
	`ÿ£M­
(
t™ËI‹r
, 
LoÿË
::
	`g‘DeçuÉ
().
	`g‘Name
(), 0, 
TO_TITLE
);

197 
	}
}

199 
	gUnicodeSŒšg
 &

200 
	gUnicodeSŒšg
::
	$toT™Ë
(
B»akI‹¿tÜ
 *
t™ËI‹r
, cÚ¡ 
LoÿË
 &
loÿË
) {

201  
	`ÿ£M­
(
t™ËI‹r
, 
loÿË
.
	`g‘Name
(), 0, 
TO_TITLE
);

202 
	}
}

204 
	gUnicodeSŒšg
 &

205 
	gUnicodeSŒšg
::
	$toT™Ë
(
B»akI‹¿tÜ
 *
t™ËI‹r
, cÚ¡ 
LoÿË
 &
loÿË
, 
ušt32_t
 
İtiÚs
) {

206  
	`ÿ£M­
(
t™ËI‹r
, 
loÿË
.
	`g‘Name
(), 
İtiÚs
, 
TO_TITLE
);

207 
	}
}

211 
	gUnicodeSŒšg
 &

212 
	gUnicodeSŒšg
::
	$fŞdCa£
(
ušt32_t
 
İtiÚs
) {

214  
	`ÿ£M­
(0, "", 
İtiÚs
, 
FOLD_CASE
);

215 
	}
}

217 
U_NAMESPACE_END


220 
U_CAPI
 
št32_t
 
U_EXPORT2


221 
	$uhash_hashCa£ËssUnicodeSŒšg
(cÚ¡ 
UHashTok
 
key
) {

222 
U_NAMESPACE_USE


223 cÚ¡ 
UnicodeSŒšg
 *
¡r
 = (cÚ¡ UnicodeSŒšg*è
key
.
poš‹r
;

224 ià(
¡r
 =ğ
NULL
) {

229 
UnicodeSŒšg
 
	`cİy
(*
¡r
);

230  
cİy
.
	`fŞdCa£
().
	`hashCode
();

231 
	}
}

234 
U_CAPI
 
UBoŞ
 
U_EXPORT2


235 
	$uhash_com·»Ca£ËssUnicodeSŒšg
(cÚ¡ 
UHashTok
 
key1
, cÚ¡ UHashTok 
key2
) {

236 
U_NAMESPACE_USE


237 cÚ¡ 
UnicodeSŒšg
 *
¡r1
 = (cÚ¡ UnicodeSŒšg*è
key1
.
poš‹r
;

238 cÚ¡ 
UnicodeSŒšg
 *
¡r2
 = (cÚ¡ UnicodeSŒšg*è
key2
.
poš‹r
;

239 ià(
¡r1
 =ğ
¡r2
) {

240  
TRUE
;

242 ià(
¡r1
 =ğ
NULL
 || 
¡r2
 == NULL) {

243  
FALSE
;

245  
¡r1
->
	`ÿ£Com·»
(*
¡r2
, 
U_FOLD_CASE_DEFAULT
) == 0;

246 
	}
}

	@unistr_cnv.cpp

19 
	~"unicode/uty³s.h
"

21 #ià!
UCONFIG_NO_CONVERSION


23 
	~"unicode/put.h
"

24 
	~"c¡ršg.h
"

25 
	~"cmemÜy.h
"

26 
	~"unicode/u¡ršg.h
"

27 
	~"unicode/uni¡r.h
"

28 
	~"unicode/uúv.h
"

29 
	~"uúv_imp.h
"

30 
	~"putimp.h
"

31 
	~"u¡r_úv.h
"

32 
	~"u¡r_imp.h
"

34 
	gU_NAMESPACE_BEGIN


40 #ià!
U_CHARSET_IS_UTF8


42 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ *
cod•ageD©a
)

43 : 
	`fShÜtL’gth
(0),

44 
	$fFÏgs
(
kShÜtSŒšg
)

46 if(
cod•ageD©a
 != 0) {

47 
	`doCod•ageC»©e
(
cod•ageD©a
, (
št32_t
)
	`u´v_¡¾’
(codepageData), 0);

49 
	}
}

51 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ *
cod•ageD©a
,

52 
št32_t
 
d©aL’gth
)

53 : 
	`fShÜtL’gth
(0),

54 
	$fFÏgs
(
kShÜtSŒšg
)

56 if(
cod•ageD©a
 != 0) {

57 
	`doCod•ageC»©e
(
cod•ageD©a
, 
d©aL’gth
, 0);

59 
	}
}

64 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ *
cod•ageD©a
,

65 cÚ¡ *
cod•age
)

66 : 
	`fShÜtL’gth
(0),

67 
	$fFÏgs
(
kShÜtSŒšg
)

69 if(
cod•ageD©a
 != 0) {

70 
	`doCod•ageC»©e
(
cod•ageD©a
, (
št32_t
)
	`u´v_¡¾’
(cod•ageD©a), 
cod•age
);

72 
	}
}

74 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ *
cod•ageD©a
,

75 
št32_t
 
d©aL’gth
,

76 cÚ¡ *
cod•age
)

77 : 
	`fShÜtL’gth
(0),

78 
	$fFÏgs
(
kShÜtSŒšg
)

80 if(
cod•ageD©a
 != 0) {

81 
	`doCod•ageC»©e
(
cod•ageD©a
, 
d©aL’gth
, 
cod•age
);

83 
	}
}

85 
	gUnicodeSŒšg
::
	$UnicodeSŒšg
(cÚ¡ *
¤c
, 
št32_t
 
¤cL’gth
,

86 
UCÚv”‹r
 *
úv
,

87 
UE¼ÜCode
 &
”rÜCode
)

88 : 
	`fShÜtL’gth
(0),

89 
	$fFÏgs
(
kShÜtSŒšg
)

91 if(
	`U_SUCCESS
(
”rÜCode
)) {

93 if(
¤c
==
NULL
) {

95 } if(
¤cL’gth
<-1) {

96 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

99 if(
¤cL’gth
==-1) {

100 
¤cL’gth
=(
št32_t
)
	`u´v_¡¾’
(
¤c
);

102 if(
¤cL’gth
>0) {

103 if(
úv
!=0) {

105 
	`uúv_»£tToUnicode
(
úv
);

106 
	`doCod•ageC»©e
(
¤c
, 
¤cL’gth
, 
úv
, 
”rÜCode
);

109 
úv
=
	`u_g‘DeçuÉCÚv”‹r
(&
”rÜCode
);

110 
	`doCod•ageC»©e
(
¤c
, 
¤cL’gth
, 
úv
, 
”rÜCode
);

111 
	`u_»Ëa£DeçuÉCÚv”‹r
(
úv
);

116 if(
	`U_FAILURE
(
”rÜCode
)) {

117 
	`£tToBogus
();

120 
	}
}

126 #ià!
U_CHARSET_IS_UTF8


128 
št32_t


129 
	gUnicodeSŒšg
::
	$exŒaù
(
št32_t
 
¡¬t
,

130 
št32_t
 
Ëngth
,

131 *
rg‘
,

132 
ušt32_t
 
d¡Size
) const {

133  
	`exŒaù
(
¡¬t
, 
Ëngth
, 
rg‘
, 
d¡Size
, 0);

134 
	}
}

139 
št32_t


140 
	gUnicodeSŒšg
::
	$exŒaù
(
št32_t
 
¡¬t
,

141 
št32_t
 
Ëngth
,

142 *
rg‘
,

143 
ušt32_t
 
d¡Size
,

144 cÚ¡ *
cod•age
) const

147 ifĞ(
d¡Size
 > 0 && 
rg‘
 == 0)) {

152 
	`pšIndiûs
(
¡¬t
, 
Ëngth
);

159 
št32_t
 
ÿ·c™y
;

160 if(
d¡Size
 < 0x7fffffff) {

162 
ÿ·c™y
 = (
št32_t
)
d¡Size
;

165 *
rg‘Lim™
 = (*)
	`U_MAX_PTR
(
rg‘
);

168 
ÿ·c™y
 = (
št32_t
)(
rg‘Lim™
 - 
rg‘
);

172 
UCÚv”‹r
 *
cÚv”‹r
;

173 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

176 if(
Ëngth
 == 0) {

177  
	`u_‹rmš©eCh¬s
(
rg‘
, 
ÿ·c™y
, 0, &
¡©us
);

182 ià(
cod•age
 == 0) {

183 cÚ¡ *
deçuÉName
 = 
	`uúv_g‘DeçuÉName
();

184 if(
	`UCNV_FAST_IS_UTF8
(
deçuÉName
)) {

185  
	`toUTF8
(
¡¬t
, 
Ëngth
, 
rg‘
, 
ÿ·c™y
);

187 
cÚv”‹r
 = 
	`u_g‘DeçuÉCÚv”‹r
(&
¡©us
);

188 } ià(*
cod•age
 == 0) {

190 
št32_t
 
de¡L’gth
;

191 if(
Ëngth
 <ğ
ÿ·c™y
) {

192 
de¡L’gth
 = 
Ëngth
;

194 
de¡L’gth
 = 
ÿ·c™y
;

196 
	`u_UCh¬sToCh¬s
(
	`g‘A¼ayS¹
(è+ 
¡¬t
, 
rg‘
, 
de¡L’gth
);

197  
	`u_‹rmš©eCh¬s
(
rg‘
, 
ÿ·c™y
, 
Ëngth
, &
¡©us
);

199 
cÚv”‹r
 = 
	`uúv_İ’
(
cod•age
, &
¡©us
);

202 
Ëngth
 = 
	`doExŒaù
(
¡¬t
,†’gth, 
rg‘
, 
ÿ·c™y
, 
cÚv”‹r
, 
¡©us
);

205 ià(
cod•age
 == 0) {

206 
	`u_»Ëa£DeçuÉCÚv”‹r
(
cÚv”‹r
);

208 
	`uúv_şo£
(
cÚv”‹r
);

211  
Ëngth
;

212 
	}
}

214 
št32_t


215 
	gUnicodeSŒšg
::
	$exŒaù
(*
de¡
, 
št32_t
 
de¡C­ac™y
,

216 
UCÚv”‹r
 *
úv
,

217 
UE¼ÜCode
 &
”rÜCode
) const

219 if(
	`U_FAILURE
(
”rÜCode
)) {

223 if(
	`isBogus
(è|| 
de¡C­ac™y
<0 || (de¡C­ac™y>0 && 
de¡
==0)) {

224 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

229 if(
	`isEm±y
()) {

230  
	`u_‹rmš©eCh¬s
(
de¡
, 
de¡C­ac™y
, 0, &
”rÜCode
);

234 
UBoŞ
 
isDeçuÉCÚv”‹r
;

235 if(
úv
==0) {

236 
isDeçuÉCÚv”‹r
=
TRUE
;

237 
úv
=
	`u_g‘DeçuÉCÚv”‹r
(&
”rÜCode
);

238 if(
	`U_FAILURE
(
”rÜCode
)) {

242 
isDeçuÉCÚv”‹r
=
FALSE
;

243 
	`uúv_»£tFromUnicode
(
úv
);

247 
št32_t
 
Ën
=
	`doExŒaù
(0, 
	`Ëngth
(), 
de¡
, 
de¡C­ac™y
, 
úv
, 
”rÜCode
);

250 if(
isDeçuÉCÚv”‹r
) {

251 
	`u_»Ëa£DeçuÉCÚv”‹r
(
úv
);

254  
Ën
;

255 
	}
}

257 
št32_t


258 
	gUnicodeSŒšg
::
	$doExŒaù
(
št32_t
 
¡¬t
, iÁ32_ˆ
Ëngth
,

259 *
de¡
, 
št32_t
 
de¡C­ac™y
,

260 
UCÚv”‹r
 *
úv
,

261 
UE¼ÜCode
 &
”rÜCode
) const

263 if(
	`U_FAILURE
(
”rÜCode
)) {

264 if(
de¡C­ac™y
!=0) {

265 *
de¡
=0;

270 cÚ¡ 
UCh¬
 *
¤c
=
	`g‘A¼ayS¹
()+
¡¬t
, *
¤cLim™
=¤c+
Ëngth
;

271 *
Üigš®De¡
=
de¡
;

272 cÚ¡ *
de¡Lim™
;

274 if(
de¡C­ac™y
==0) {

275 
de¡Lim™
=
de¡
=0;

276 } if(
de¡C­ac™y
==-1) {

278 
de¡Lim™
=(*)
	`U_MAX_PTR
(
de¡
);

280 
de¡C­ac™y
=0x7fffffff;

282 
de¡Lim™
=
de¡
+
de¡C­ac™y
;

286 
	`uúv_äomUnicode
(
úv
, &
de¡
, 
de¡Lim™
, &
¤c
, 
¤cLim™
, 0, 
TRUE
, &
”rÜCode
);

287 
Ëngth
=(
št32_t
)(
de¡
-
Üigš®De¡
);

290 if(
”rÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

291 
bufãr
[1024];

293 
de¡Lim™
=
bufãr
+(buffer);

295 
de¡
=
bufãr
;

296 
”rÜCode
=
U_ZERO_ERROR
;

297 
	`uúv_äomUnicode
(
úv
, &
de¡
, 
de¡Lim™
, &
¤c
, 
¤cLim™
, 0, 
TRUE
, &
”rÜCode
);

298 
Ëngth
+=(
št32_t
)(
de¡
-
bufãr
);

299 } 
”rÜCode
==
U_BUFFER_OVERFLOW_ERROR
);

302  
	`u_‹rmš©eCh¬s
(
Üigš®De¡
, 
de¡C­ac™y
, 
Ëngth
, &
”rÜCode
);

303 
	}
}

306 
	gUnicodeSŒšg
::
	$doCod•ageC»©e
(cÚ¡ *
cod•ageD©a
,

307 
št32_t
 
d©aL’gth
,

308 cÚ¡ *
cod•age
)

311 if(
cod•ageD©a
 =ğ0 || 
d©aL’gth
 == 0 || dataLength < -1) {

314 if(
d©aL’gth
 == -1) {

315 
d©aL’gth
 = (
št32_t
)
	`u´v_¡¾’
(
cod•ageD©a
);

318 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

323 
UCÚv”‹r
 *
cÚv”‹r
;

324 ià(
cod•age
 == 0) {

325 cÚ¡ *
deçuÉName
 = 
	`uúv_g‘DeçuÉName
();

326 if(
	`UCNV_FAST_IS_UTF8
(
deçuÉName
)) {

327 
	`£tToUTF8
(
	`SŒšgP›û
(
cod•ageD©a
, 
d©aL’gth
));

330 
cÚv”‹r
 = 
	`u_g‘DeçuÉCÚv”‹r
(&
¡©us
);

331 } if(*
cod•age
 == 0) {

333 if(
	`şÚeA¼ayIfN“ded
(
d©aL’gth
, d©aL’gth, 
FALSE
)) {

334 
	`u_ch¬sToUCh¬s
(
cod•ageD©a
, 
	`g‘A¼ayS¹
(), 
d©aL’gth
);

335 
	`£tL’gth
(
d©aL’gth
);

337 
	`£tToBogus
();

341 
cÚv”‹r
 = 
	`uúv_İ’
(
cod•age
, &
¡©us
);

345 if(
	`U_FAILURE
(
¡©us
)) {

346 
	`£tToBogus
();

351 
	`doCod•ageC»©e
(
cod•ageD©a
, 
d©aL’gth
, 
cÚv”‹r
, 
¡©us
);

352 if(
	`U_FAILURE
(
¡©us
)) {

353 
	`£tToBogus
();

357 if(
cod•age
 == 0) {

358 
	`u_»Ëa£DeçuÉCÚv”‹r
(
cÚv”‹r
);

360 
	`uúv_şo£
(
cÚv”‹r
);

362 
	}
}

365 
	gUnicodeSŒšg
::
	$doCod•ageC»©e
(cÚ¡ *
cod•ageD©a
,

366 
št32_t
 
d©aL’gth
,

367 
UCÚv”‹r
 *
cÚv”‹r
,

368 
UE¼ÜCode
 &
¡©us
)

370 if(
	`U_FAILURE
(
¡©us
)) {

375 cÚ¡ *
mySourû
 = 
cod•ageD©a
;

376 cÚ¡ *
mySourûEnd
 = 
mySourû
 + 
d©aL’gth
;

377 
UCh¬
 *
¬¿y
, *
myT¬g‘
;

380 
št32_t
 
¬¿ySize
;

381 if(
d©aL’gth
 <ğ
US_STACKBUF_SIZE
) {

383 
¬¿ySize
 = 
US_STACKBUF_SIZE
;

386 
¬¿ySize
 = 
d©aL’gth
 + (dataLength >> 2);

390 
UBoŞ
 
doCİyA¼ay
 = 
FALSE
;

392 if(!
	`şÚeA¼ayIfN“ded
(
¬¿ySize
,‡¼aySize, 
doCİyA¼ay
)) {

393 
	`£tToBogus
();

398 
¬¿y
 = 
	`g‘A¼ayS¹
();

399 
myT¬g‘
 = 
¬¿y
 + 
	`Ëngth
();

400 
	`uúv_toUnicode
(
cÚv”‹r
, &
myT¬g‘
, 
¬¿y
 + 
	`g‘C­ac™y
(),

401 &
mySourû
, 
mySourûEnd
, 0, 
TRUE
, &
¡©us
);

404 
	`£tL’gth
((
št32_t
)(
myT¬g‘
 - 
¬¿y
));

407 if(
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
) {

409 
¡©us
 = 
U_ZERO_ERROR
;

412 
doCİyA¼ay
 = 
TRUE
;

416 
¬¿ySize
 = (
št32_t
)(
	`Ëngth
(è+ 2 * (
mySourûEnd
 - 
mySourû
));

421 
	}
}

423 
	gU_NAMESPACE_END


	@unistr_props.cpp

19 
	~"unicode/uty³s.h
"

20 
	~"unicode/uch¬.h
"

21 
	~"unicode/uni¡r.h
"

23 
U_NAMESPACE_BEGIN


25 
	gUnicodeSŒšg
&

26 
	gUnicodeSŒšg
::
	$Œim
()

28 if(
	`isBogus
()) {

29  *
this
;

32 
UCh¬
 *
¬¿y
 = 
	`g‘A¼ayS¹
();

33 
UCh¬32
 
c
;

34 
št32_t
 
ŞdL’gth
 = 
this
->
	`Ëngth
();

35 
št32_t
 
i
 = 
ŞdL’gth
, 
Ëngth
;

39 
Ëngth
 = 
i
;

40 if(
i
 <= 0) {

43 
	`U16_PREV
(
¬¿y
, 0, 
i
, 
c
);

44 if(!(
c
 =ğ0x20 || 
	`u_isWh™e¥aû
(c))) {

48 if(
Ëngth
 < 
ŞdL’gth
) {

49 
	`£tL’gth
(
Ëngth
);

53 
št32_t
 
¡¬t
;

54 
i
 = 0;

56 
¡¬t
 = 
i
;

57 if(
i
 >ğ
Ëngth
) {

60 
	`U16_NEXT
(
¬¿y
, 
i
, 
Ëngth
, 
c
);

61 if(!(
c
 =ğ0x20 || 
	`u_isWh™e¥aû
(c))) {

67 if(
¡¬t
 > 0) {

68 
	`doR•Ïû
(0, 
¡¬t
, 0, 0, 0);

71  *
this
;

72 
	}
}

74 
	gU_NAMESPACE_END


	@unorm.cpp

26 
	~"unicode/uty³s.h
"

28 #ià!
UCONFIG_NO_NORMALIZATION


30 
	~"unicode/ud©a.h
"

31 
	~"unicode/u¡ršg.h
"

32 
	~"unicode/u™”.h
"

33 
	~"unicode/unÜm.h
"

34 
	~"unicode/unÜm2.h
"

35 
	~"nÜm®iz”2im¶.h
"

36 
	~"unÜmimp.h
"

37 
	~"u´İs.h
"

38 
	~"u¡r_imp.h
"

40 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

42 
U_NAMESPACE_USE


46 
U_CAPI
 
UNÜm®iz©iÚCheckResuÉ
 
U_EXPORT2


47 
	$unÜm_quickCheck
(cÚ¡ 
UCh¬
 *
¤c
,

48 
št32_t
 
¤cL’gth
,

49 
UNÜm®iz©iÚMode
 
mode
,

50 
UE¼ÜCode
 *
pE¼ÜCode
) {

51 cÚ¡ 
NÜm®iz”2
 *
n2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, *
pE¼ÜCode
);

52  
	`unÜm2_quickCheck
((cÚ¡ 
UNÜm®iz”2
 *)
n2
, 
¤c
, 
¤cL’gth
, 
pE¼ÜCode
);

53 
	}
}

55 
U_CAPI
 
UNÜm®iz©iÚCheckResuÉ
 
U_EXPORT2


56 
	$unÜm_quickCheckW™hO±iÚs
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

57 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

58 
UE¼ÜCode
 *
pE¼ÜCode
) {

59 cÚ¡ 
NÜm®iz”2
 *
n2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, *
pE¼ÜCode
);

60 if(
İtiÚs
&
UNORM_UNICODE_3_2
) {

61 
F‹»dNÜm®iz”2
 
	`â2
(*
n2
, *
	`uni£t_g‘Unicode32In¡ªû
(*
pE¼ÜCode
));

62  
	`unÜm2_quickCheck
(

63 
»š‹½»t_ÿ¡
<cÚ¡ 
UNÜm®iz”2
 *>(
¡©ic_ÿ¡
<
NÜm®iz”2
 *>(&
â2
)),

64 
¤c
, 
¤cL’gth
, 
pE¼ÜCode
);

66  
	`unÜm2_quickCheck
((cÚ¡ 
UNÜm®iz”2
 *)
n2
, 
¤c
, 
¤cL’gth
, 
pE¼ÜCode
);

68 
	}
}

70 
U_CAPI
 
UBoŞ
 
U_EXPORT2


71 
	$unÜm_isNÜm®ized
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

72 
UNÜm®iz©iÚMode
 
mode
,

73 
UE¼ÜCode
 *
pE¼ÜCode
) {

74 cÚ¡ 
NÜm®iz”2
 *
n2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, *
pE¼ÜCode
);

75  
	`unÜm2_isNÜm®ized
((cÚ¡ 
UNÜm®iz”2
 *)
n2
, 
¤c
, 
¤cL’gth
, 
pE¼ÜCode
);

76 
	}
}

78 
U_CAPI
 
UBoŞ
 
U_EXPORT2


79 
	$unÜm_isNÜm®izedW™hO±iÚs
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

80 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

81 
UE¼ÜCode
 *
pE¼ÜCode
) {

82 cÚ¡ 
NÜm®iz”2
 *
n2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, *
pE¼ÜCode
);

83 if(
İtiÚs
&
UNORM_UNICODE_3_2
) {

84 
F‹»dNÜm®iz”2
 
	`â2
(*
n2
, *
	`uni£t_g‘Unicode32In¡ªû
(*
pE¼ÜCode
));

85  
	`unÜm2_isNÜm®ized
(

86 
»š‹½»t_ÿ¡
<cÚ¡ 
UNÜm®iz”2
 *>(
¡©ic_ÿ¡
<
NÜm®iz”2
 *>(&
â2
)),

87 
¤c
, 
¤cL’gth
, 
pE¼ÜCode
);

89  
	`unÜm2_isNÜm®ized
((cÚ¡ 
UNÜm®iz”2
 *)
n2
, 
¤c
, 
¤cL’gth
, 
pE¼ÜCode
);

91 
	}
}

96 
U_CAPI
 
št32_t
 
U_EXPORT2


97 
	$unÜm_nÜm®ize
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

98 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

99 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

100 
UE¼ÜCode
 *
pE¼ÜCode
) {

101 cÚ¡ 
NÜm®iz”2
 *
n2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, *
pE¼ÜCode
);

102 if(
İtiÚs
&
UNORM_UNICODE_3_2
) {

103 
F‹»dNÜm®iz”2
 
	`â2
(*
n2
, *
	`uni£t_g‘Unicode32In¡ªû
(*
pE¼ÜCode
));

104  
	`unÜm2_nÜm®ize
(

105 
»š‹½»t_ÿ¡
<cÚ¡ 
UNÜm®iz”2
 *>(
¡©ic_ÿ¡
<
NÜm®iz”2
 *>(&
â2
)),

106 
¤c
, 
¤cL’gth
, 
de¡
, 
de¡C­ac™y
, 
pE¼ÜCode
);

108  
	`unÜm2_nÜm®ize
((cÚ¡ 
UNÜm®iz”2
 *)
n2
,

109 
¤c
, 
¤cL’gth
, 
de¡
, 
de¡C­ac™y
, 
pE¼ÜCode
);

111 
	}
}

116 
št32_t


117 
	$unÜm_™”©e
(
UCh¬I‹¿tÜ
 *
¤c
, 
UBoŞ
 
fÜw¬d
,

118 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

119 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

120 
UBoŞ
 
doNÜm®ize
, UBoŞ *
pN“dedToNÜm®ize
,

121 
UE¼ÜCode
 *
pE¼ÜCode
) {

122 cÚ¡ 
NÜm®iz”2
 *
n2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, *
pE¼ÜCode
);

123 cÚ¡ 
UnicodeS‘
 *
uni32
;

124 if(
İtiÚs
&
UNORM_UNICODE_3_2
) {

125 
uni32
=
	`uni£t_g‘Unicode32In¡ªû
(*
pE¼ÜCode
);

127 
uni32
=
NULL
;

129 
F‹»dNÜm®iz”2
 
	`â2
(*
n2
, *
uni32
);

130 if(
İtiÚs
&
UNORM_UNICODE_3_2
) {

131 
n2
=&
â2
;

133 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

136 ifĞ
de¡C­ac™y
<0 || (
de¡
==
NULL
 && destCapacity>0) ||

137 
¤c
==
NULL


139 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

143 if(
pN“dedToNÜm®ize
!=
NULL
) {

144 *
pN“dedToNÜm®ize
=
FALSE
;

146 if(!(
fÜw¬d
 ? 
¤c
->
	`hasNext
(¤cè: src->
	`hasP»vious
(src))) {

147  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 0, 
pE¼ÜCode
);

150 
UnicodeSŒšg
 
bufãr
;

151 
UCh¬32
 
c
;

152 if(
fÜw¬d
) {

154 
bufãr
.
	`­³nd
(
	`u™”_Ãxt32
(
¤c
));

156 (
c
=
	`u™”_Ãxt32
(
¤c
))>=0) {

157 if(
n2
->
	`hasBound¬yBefÜe
(
c
)) {

159 
¤c
->
	`move
(¤c, -
	`U16_LENGTH
(
c
), 
UITER_CURRENT
);

162 
bufãr
.
	`­³nd
(
c
);

166 (
c
=
	`u™”_´evious32
(
¤c
))>=0) {

168 
bufãr
.
	`š£¹
(0, 
c
);

170 if(
n2
->
	`hasBound¬yBefÜe
(
c
)) {

176 
UnicodeSŒšg
 
	`de¡SŒšg
(
de¡
, 0, 
de¡C­ac™y
);

177 if(
bufãr
.
	`Ëngth
()>0 && 
doNÜm®ize
) {

178 
n2
->
	`nÜm®ize
(
bufãr
, 
de¡SŒšg
, *
pE¼ÜCode
).
	`exŒaù
(
de¡
, 
de¡C­ac™y
, *pErrorCode);

179 if(
pN“dedToNÜm®ize
!=
NULL
 && 
	`U_SUCCESS
(*
pE¼ÜCode
)) {

180 *
pN“dedToNÜm®ize
ğ
de¡SŒšg
!=
bufãr
;

182  
de¡SŒšg
.
	`Ëngth
();

185  
bufãr
.
	`exŒaù
(
de¡
, 
de¡C­ac™y
, *
pE¼ÜCode
);

187 
	}
}

189 
U_CAPI
 
št32_t
 
U_EXPORT2


190 
	$unÜm_´evious
(
UCh¬I‹¿tÜ
 *
¤c
,

191 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

192 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

193 
UBoŞ
 
doNÜm®ize
, UBoŞ *
pN“dedToNÜm®ize
,

194 
UE¼ÜCode
 *
pE¼ÜCode
) {

195  
	`unÜm_™”©e
(
¤c
, 
FALSE
,

196 
de¡
, 
de¡C­ac™y
,

197 
mode
, 
İtiÚs
,

198 
doNÜm®ize
, 
pN“dedToNÜm®ize
,

199 
pE¼ÜCode
);

200 
	}
}

202 
U_CAPI
 
št32_t
 
U_EXPORT2


203 
	$unÜm_Ãxt
(
UCh¬I‹¿tÜ
 *
¤c
,

204 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

205 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

206 
UBoŞ
 
doNÜm®ize
, UBoŞ *
pN“dedToNÜm®ize
,

207 
UE¼ÜCode
 *
pE¼ÜCode
) {

208  
	`unÜm_™”©e
(
¤c
, 
TRUE
,

209 
de¡
, 
de¡C­ac™y
,

210 
mode
, 
İtiÚs
,

211 
doNÜm®ize
, 
pN“dedToNÜm®ize
,

212 
pE¼ÜCode
);

213 
	}
}

217 
U_CAPI
 
št32_t
 
U_EXPORT2


218 
	$unÜm_cÚÿ‹Ç‹
(cÚ¡ 
UCh¬
 *
Ëá
, 
št32_t
 
ËáL’gth
,

219 cÚ¡ 
UCh¬
 *
right
, 
št32_t
 
rightL’gth
,

220 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

221 
UNÜm®iz©iÚMode
 
mode
, 
št32_t
 
İtiÚs
,

222 
UE¼ÜCode
 *
pE¼ÜCode
) {

223 cÚ¡ 
NÜm®iz”2
 *
n2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(
mode
, *
pE¼ÜCode
);

224 cÚ¡ 
UnicodeS‘
 *
uni32
;

225 if(
İtiÚs
&
UNORM_UNICODE_3_2
) {

226 
uni32
=
	`uni£t_g‘Unicode32In¡ªû
(*
pE¼ÜCode
);

228 
uni32
=
NULL
;

230 
F‹»dNÜm®iz”2
 
	`â2
(*
n2
, *
uni32
);

231 if(
İtiÚs
&
UNORM_UNICODE_3_2
) {

232 
n2
=&
â2
;

234 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

237 ifĞ
de¡C­ac™y
<0 || (
de¡
==
NULL
 && destCapacity>0) ||

238 
Ëá
==
NULL
 || 
ËáL’gth
<-1 ||

239 
right
==
NULL
 || 
rightL’gth
<-1

241 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

246 ifĞ
de¡
!=
NULL
 &&

247 ((
right
>=
de¡
 &&„ight<(de¡+
de¡C­ac™y
)) ||

248 (
rightL’gth
>0 && 
de¡
>=
right
 && dest<(right+rightLength)))

250 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

255 
UnicodeSŒšg
 
de¡SŒšg
;

256 if(
Ëá
==
de¡
) {

257 
de¡SŒšg
.
	`£tTo
(
de¡
, 
ËáL’gth
, 
de¡C­ac™y
);

259 
de¡SŒšg
.
	`£tTo
(
de¡
, 0, 
de¡C­ac™y
);

260 
de¡SŒšg
.
	`­³nd
(
Ëá
, 
ËáL’gth
);

262  
n2
->
	`­³nd
(
de¡SŒšg
, 
	`UnicodeSŒšg
(
rightL’gth
<0, 
right
,„ightL’gth), *
pE¼ÜCode
).

263 
	`exŒaù
(
de¡
, 
de¡C­ac™y
, *
pE¼ÜCode
);

264 
	}
}

	@unorm_it.c

17 
	~"unicode/uty³s.h
"

19 #ià!
UCONFIG_NO_COLLATION
 && !
UCONFIG_NO_NORMALIZATION


21 
	~"unicode/u™”.h
"

22 
	~"unicode/unÜm.h
"

23 
	~"unÜm_™.h
"

24 
	~"cmemÜy.h
"

29 
	mINITIAL_CAPACITY
=100

32 
	sUNÜmI‹¿tÜ
 {

33 
UCh¬I‹¿tÜ
 
	m­i
;

34 
UCh¬I‹¿tÜ
 *
	m™”
;

43 
UCh¬
 *
	mch¬s
;

44 
ušt32_t
 *
	m¡©es
;

52 
št32_t
 
	mÿ·c™y
;

55 
ušt32_t
 
	m¡©e
;

58 
UBoŞ
 
	mhasP»vious
, 
	mhasNext
, 
	misSckAÎoÿ‹d
;

60 
UNÜm®iz©iÚMode
 
	mmode
;

62 
UCh¬
 
	mch¬sBufãr
[
INITIAL_CAPACITY
];

63 
ušt32_t
 
	m¡©esBufãr
[
INITIAL_CAPACITY
+1];

67 
	$š™Indexes
(
UNÜmI‹¿tÜ
 *
uni
, 
UCh¬I‹¿tÜ
 *
™”
) {

69 
UCh¬I‹¿tÜ
 *
­i
=&
uni
->api;

71 if(!
™”
->
	`hasP»vious
(iter)) {

73 
­i
->
¡¬t
÷pi->
šdex
÷pi->
lim™
=0;

74 
uni
->
hasP»vious
=
FALSE
;

75 
uni
->
hasNext
=
™”
->
	`hasNext
(iter);

76 } if(!
™”
->
	`hasNext
(iter)) {

78 
­i
->
¡¬t
÷pi->
šdex
÷pi->
lim™
=
uni
->
ÿ·c™y
;

79 
uni
->
hasNext
=
FALSE
;

80 
uni
->
hasP»vious
=
™”
->
	`hasP»vious
(iter);

83 
­i
->
¡¬t
÷pi->
šdex
÷pi->
lim™
=
uni
->
ÿ·c™y
/2;

84 
uni
->
hasP»vious
=uni->
hasNext
=
TRUE
;

86 
	}
}

88 
UBoŞ


89 
	$»®locA¼ays
(
UNÜmI‹¿tÜ
 *
uni
, 
št32_t
 
ÿ·c™y
, 
UBoŞ
 
addAtS¹
) {

91 
UCh¬I‹¿tÜ
 *
­i
=&
uni
->api;

93 
ušt32_t
 *
¡©es
;

94 
UCh¬
 *
ch¬s
;

95 
št32_t
 
¡¬t
, 
lim™
;

97 
¡©es
=(
ušt32_t
 *)
	`u´v_m®loc
((
ÿ·c™y
+1)*4+capacity*2);

98 if(
¡©es
==
NULL
) {

99  
FALSE
;

102 
ch¬s
=(
UCh¬
 *)(
¡©es
+(
ÿ·c™y
+1));

103 
uni
->
ÿ·c™y
=capacity;

105 
¡¬t
=
­i
->start;

106 
lim™
=
­i
->limit;

108 if(
addAtS¹
) {

110 
št32_t
 
d–
;

112 
d–
=
ÿ·c™y
-
uni
->capacity;

113 
	`u´v_memıy
(
¡©es
+
d–
+
¡¬t
, 
uni
->¡©es+¡¬t, (
lim™
-start+1)*4);

114 
	`u´v_memıy
(
ch¬s
+
d–
+
¡¬t
, 
uni
->ch¬s+¡¬t, (
lim™
-start)*4);

116 
­i
->
¡¬t
=¡¬t+
d–
;

117 
­i
->
šdex
+=
d–
;

118 
­i
->
lim™
öim™+
d–
;

121 
	`u´v_memıy
(
¡©es
+
¡¬t
, 
uni
->¡©es+¡¬t, (
lim™
-start+1)*4);

122 
	`u´v_memıy
(
ch¬s
+
¡¬t
, 
uni
->ch¬s+¡¬t, (
lim™
-start)*4);

125 
uni
->
ch¬s
=chars;

126 
uni
->
¡©es
=states;

128  
TRUE
;

129 
	}
}

132 
	$moveCÚ‹ÁsTow¬dS¹
(
UCh¬I‹¿tÜ
 *
­i
, 
UCh¬
 
ch¬s
[], 
ušt32_t
 
¡©es
[], 
št32_t
 
d–
) {

134 
št32_t
 
¤cIndex
, 
de¡Index
, 
lim™
;

136 
lim™
=
­i
->limit;

137 
¤cIndex
=
d–
;

138 if(
¤cIndex
>
­i
->
¡¬t
) {

140 
¤cIndex
<
lim™
 && 
¡©es
[¤cIndex]==
UITER_NO_STATE
) {

141 ++
¤cIndex
;

146 
­i
->
¡¬t
=
de¡Index
=0;

147 
¤cIndex
<
lim™
) {

148 
ch¬s
[
de¡Index
]=ch¬s[
¤cIndex
];

149 
¡©es
[
de¡Index
++]=¡©es[
¤cIndex
++];

153 
¡©es
[
de¡Index
]=¡©es[
¤cIndex
];

155 
­i
->
lim™
=
de¡Index
;

156 
	}
}

159 
	$moveCÚ‹ÁsTow¬dEnd
(
UCh¬I‹¿tÜ
 *
­i
, 
UCh¬
 
ch¬s
[], 
ušt32_t
 
¡©es
[], 
št32_t
 
d–
) {

161 
št32_t
 
¤cIndex
, 
de¡Index
, 
¡¬t
;

163 
¡¬t
=
­i
->start;

164 
de¡Index
=((
UNÜmI‹¿tÜ
 *)
­i
)->
ÿ·c™y
;

165 
¤cIndex
=
de¡Index
-
d–
;

166 if(
¤cIndex
<
­i
->
lim™
) {

168 
¤cIndex
>
¡¬t
 && 
¡©es
[¤cIndex]==
UITER_NO_STATE
) {

169 --
¤cIndex
;

174 
­i
->
lim™
=
de¡Index
;

177 
¡©es
[
de¡Index
]=¡©es[
¤cIndex
];

179 
¤cIndex
>
¡¬t
) {

180 
ch¬s
[--
de¡Index
]=ch¬s[--
¤cIndex
];

181 
¡©es
[
de¡Index
]=¡©es[
¤cIndex
];

184 
­i
->
¡¬t
=
de¡Index
;

185 
	}
}

188 
UBoŞ


189 
	$»adNext
(
UNÜmI‹¿tÜ
 *
uni
, 
UCh¬I‹¿tÜ
 *
™”
) {

191 
UCh¬I‹¿tÜ
 *
­i
=&
uni
->api;

194 
št32_t
 
lim™
, 
ÿ·c™y
, 
room
;

195 
UE¼ÜCode
 
”rÜCode
;

197 
lim™
=
­i
->limit;

198 
ÿ·c™y
=
uni
->capacity;

199 
room
=
ÿ·c™y
/4;

200 if(
room
>(
ÿ·c™y
-
lim™
)) {

202 
	`moveCÚ‹ÁsTow¬dS¹
(
­i
, 
uni
->
ch¬s
, uni->
¡©es
, 
room
);

203 
­i
->
šdex
=
lim™
=api->limit;

204 
uni
->
hasP»vious
=
TRUE
;

208 
”rÜCode
=
U_ZERO_ERROR
;

209 if(
uni
->
¡©e
!=uni->
¡©es
[
lim™
]) {

210 
	`u™”_£tS‹
(
™”
, 
uni
->
¡©es
[
lim™
], &
”rÜCode
);

211 if(
	`U_FAILURE
(
”rÜCode
)) {

212 
uni
->
¡©e
=
UITER_NO_STATE
;

213 
uni
->
hasNext
=
FALSE
;

214  
FALSE
;

218 
room
=
	`unÜm_Ãxt
(
™”
, 
uni
->
ch¬s
+
lim™
, 
ÿ·c™y
-lim™, uni->
mode
, 0, 
TRUE
, 
NULL
, &
”rÜCode
);

219 if(
”rÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

220 if(
room
<=
ÿ·c™y
) {

222 
uni
->
¡©es
[0]=uni->¡©es[
lim™
];

223 
­i
->
¡¬t
÷pi->
šdex
÷pi->
lim™
=limit=0;

224 
uni
->
hasP»vious
=
TRUE
;

226 
ÿ·c™y
+=
room
+100;

227 if(!
	`»®locA¼ays
(
uni
, 
ÿ·c™y
, 
FALSE
)) {

228 
uni
->
¡©e
=
UITER_NO_STATE
;

229 
uni
->
hasNext
=
FALSE
;

230  
FALSE
;

232 
lim™
=
­i
->limit;

235 
”rÜCode
=
U_ZERO_ERROR
;

236 
	`u™”_£tS‹
(
™”
, 
uni
->
¡©es
[
lim™
], &
”rÜCode
);

237 
room
=
	`unÜm_Ãxt
(
™”
, 
uni
->
ch¬s
+
lim™
, 
ÿ·c™y
-lim™, uni->
mode
, 0, 
TRUE
, 
NULL
, &
”rÜCode
);

239 if(
	`U_FAILURE
(
”rÜCode
è|| 
room
==0) {

240 
uni
->
¡©e
=
UITER_NO_STATE
;

241 
uni
->
hasNext
=
FALSE
;

242  
FALSE
;

246 ++
lim™
;

247 --
room
;„oom>0; --room) {

249 
uni
->
¡©es
[
lim™
++]=
UITER_NO_STATE
;

251 
uni
->
¡©es
[
lim™
]=uni->
¡©e
=
	`u™”_g‘S‹
(
™”
);

252 
uni
->
hasNext
=
™”
->
	`hasNext
(iter);

253 
­i
->
lim™
=limit;

254  
TRUE
;

255 
	}
}

258 
UBoŞ


259 
	$»adP»vious
(
UNÜmI‹¿tÜ
 *
uni
, 
UCh¬I‹¿tÜ
 *
™”
) {

261 
UCh¬I‹¿tÜ
 *
­i
=&
uni
->api;

264 
št32_t
 
¡¬t
, 
ÿ·c™y
, 
room
;

265 
UE¼ÜCode
 
”rÜCode
;

267 
¡¬t
=
­i
->start;

268 
ÿ·c™y
=
uni
->capacity;

269 
room
=
ÿ·c™y
/4;

270 if(
room
>
¡¬t
) {

272 
	`moveCÚ‹ÁsTow¬dEnd
(
­i
, 
uni
->
ch¬s
, uni->
¡©es
, 
room
);

273 
­i
->
šdex
=
¡¬t
=api->start;

274 
uni
->
hasNext
=
TRUE
;

278 
”rÜCode
=
U_ZERO_ERROR
;

279 if(
uni
->
¡©e
!=uni->
¡©es
[
¡¬t
]) {

280 
	`u™”_£tS‹
(
™”
, 
uni
->
¡©es
[
¡¬t
], &
”rÜCode
);

281 if(
	`U_FAILURE
(
”rÜCode
)) {

282 
uni
->
¡©e
=
UITER_NO_STATE
;

283 
uni
->
hasP»vious
=
FALSE
;

284  
FALSE
;

288 
room
=
	`unÜm_´evious
(
™”
, 
uni
->
ch¬s
, 
¡¬t
, uni->
mode
, 0, 
TRUE
, 
NULL
, &
”rÜCode
);

289 if(
”rÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

290 if(
room
<=
ÿ·c™y
) {

292 
uni
->
¡©es
[
ÿ·c™y
]=uni->¡©es[
¡¬t
];

293 
­i
->
¡¬t
÷pi->
šdex
÷pi->
lim™
=¡¬t=
ÿ·c™y
;

294 
uni
->
hasNext
=
TRUE
;

296 
ÿ·c™y
+=
room
+100;

297 if(!
	`»®locA¼ays
(
uni
, 
ÿ·c™y
, 
TRUE
)) {

298 
uni
->
¡©e
=
UITER_NO_STATE
;

299 
uni
->
hasP»vious
=
FALSE
;

300  
FALSE
;

302 
¡¬t
=
­i
->start;

305 
”rÜCode
=
U_ZERO_ERROR
;

306 
	`u™”_£tS‹
(
™”
, 
uni
->
¡©es
[
¡¬t
], &
”rÜCode
);

307 
room
=
	`unÜm_´evious
(
™”
, 
uni
->
ch¬s
, 
¡¬t
, uni->
mode
, 0, 
TRUE
, 
NULL
, &
”rÜCode
);

309 if(
	`U_FAILURE
(
”rÜCode
è|| 
room
==0) {

310 
uni
->
¡©e
=
UITER_NO_STATE
;

311 
uni
->
hasP»vious
=
FALSE
;

312  
FALSE
;

318 
uni
->
ch¬s
[--
¡¬t
]=uni->ch¬s[--
room
];

320 
uni
->
¡©es
[
¡¬t
]=
UITER_NO_STATE
;

321 } 
room
>0);

322 
uni
->
¡©es
[
¡¬t
]=uni->
¡©e
=
	`u™”_g‘S‹
(
™”
);

323 
uni
->
hasP»vious
=
™”
->
	`hasP»vious
(iter);

324 
­i
->
¡¬t
=start;

325  
TRUE
;

326 
	}
}

330 
št32_t
 
U_CALLCONV


331 
	$unÜmI‹¿tÜG‘Index
(
UCh¬I‹¿tÜ
 *
­i
, 
UCh¬I‹¿tÜOrigš
 
Üigš
) {

332 
Üigš
) {

333 
UITER_ZERO
:

334 
UITER_START
:

336 
UITER_CURRENT
:

337 
UITER_LIMIT
:

338 
UITER_LENGTH
:

339  
UITER_UNKNOWN_INDEX
;

345 
	}
}

347 
št32_t
 
U_CALLCONV


348 
	$unÜmI‹¿tÜMove
(
UCh¬I‹¿tÜ
 *
­i
, 
št32_t
 
d–
, 
UCh¬I‹¿tÜOrigš
 
Üigš
) {

349 
UNÜmI‹¿tÜ
 *
uni
=(UNÜmI‹¿tÜ *)
­i
;

350 
UCh¬I‹¿tÜ
 *
™”
=
uni
->iter;

351 
št32_t
 
pos
;

353 
Üigš
) {

354 
UITER_ZERO
:

355 
UITER_START
:

357 if(
uni
->
hasP»vious
) {

358 
™”
->
	`move
(™”, 0, 
UITER_START
);

359 
­i
->
¡¬t
÷pi->
šdex
÷pi->
lim™
=0;

360 
uni
->
¡©es
[
­i
->
lim™
]=uni->
¡©e
=
	`u™”_g‘S‹
(
™”
);

361 
uni
->
hasP»vious
=
FALSE
;

362 
uni
->
hasNext
=
™”
->
	`hasNext
(iter);

365 
­i
->
šdex
÷pi->
¡¬t
;

368 
UITER_CURRENT
:

370 
UITER_LIMIT
:

371 
UITER_LENGTH
:

373 if(
uni
->
hasNext
) {

374 
™”
->
	`move
(™”, 0, 
UITER_LIMIT
);

375 
­i
->
¡¬t
÷pi->
šdex
÷pi->
lim™
=
uni
->
ÿ·c™y
;

376 
uni
->
¡©es
[
­i
->
lim™
]=uni->
¡©e
=
	`u™”_g‘S‹
(
™”
);

377 
uni
->
hasP»vious
=
™”
->
	`hasP»vious
(iter);

378 
uni
->
hasNext
=
FALSE
;

381 
­i
->
šdex
÷pi->
lim™
;

389 if(
d–
==0) {

391 } if(
d–
>0) {

394 
pos
=
­i
->
šdex
+
d–
;

395 
d–
=
pos
-
­i
->
lim™
;

396 if(
d–
<=0) {

397 
­i
->
šdex
=
pos
;

402 
­i
->
šdex
÷pi->
lim™
;

403 if(!
uni
->
hasNext
 || !
	`»adNext
(uni, 
™”
)) {

410 
pos
=
­i
->
šdex
+
d–
;

411 
d–
=
pos
-
­i
->
¡¬t
;

412 if(
d–
>=0) {

413 
­i
->
šdex
=
pos
;

418 
­i
->
šdex
÷pi->
¡¬t
;

419 if(!
uni
->
hasP»vious
 || !
	`»adP»vious
(uni, 
™”
)) {

425 if(
­i
->
šdex
=÷pi->
¡¬t
 && !
uni
->
hasP»vious
) {

428  
UITER_UNKNOWN_INDEX
;

430 
	}
}

432 
UBoŞ
 
U_CALLCONV


433 
	$unÜmI‹¿tÜHasNext
(
UCh¬I‹¿tÜ
 *
­i
) {

434  
­i
->
šdex
<­i->
lim™
 || ((
UNÜmI‹¿tÜ
 *ïpi)->
hasNext
;

435 
	}
}

437 
UBoŞ
 
U_CALLCONV


438 
	$unÜmI‹¿tÜHasP»vious
(
UCh¬I‹¿tÜ
 *
­i
) {

439  
­i
->
šdex
>­i->
¡¬t
 || ((
UNÜmI‹¿tÜ
 *ïpi)->
hasP»vious
;

440 
	}
}

442 
UCh¬32
 
U_CALLCONV


443 
	$unÜmI‹¿tÜCu¼’t
(
UCh¬I‹¿tÜ
 *
­i
) {

444 
UNÜmI‹¿tÜ
 *
uni
=(UNÜmI‹¿tÜ *)
­i
;

446 ifĞ
­i
->
šdex
<­i->
lim™
 ||

447 (
uni
->
hasNext
 && 
	`»adNext
(uni, uni->
™”
))

449  
uni
->
ch¬s
[
­i
->
šdex
];

451  
U_SENTINEL
;

453 
	}
}

455 
UCh¬32
 
U_CALLCONV


456 
	$unÜmI‹¿tÜNext
(
UCh¬I‹¿tÜ
 *
­i
) {

457 
UNÜmI‹¿tÜ
 *
uni
=(UNÜmI‹¿tÜ *)
­i
;

459 ifĞ
­i
->
šdex
<­i->
lim™
 ||

460 (
uni
->
hasNext
 && 
	`»adNext
(uni, uni->
™”
))

462  
uni
->
ch¬s
[
­i
->
šdex
++];

464  
U_SENTINEL
;

466 
	}
}

468 
UCh¬32
 
U_CALLCONV


469 
	$unÜmI‹¿tÜP»vious
(
UCh¬I‹¿tÜ
 *
­i
) {

470 
UNÜmI‹¿tÜ
 *
uni
=(UNÜmI‹¿tÜ *)
­i
;

472 ifĞ
­i
->
šdex
>­i->
¡¬t
 ||

473 (
uni
->
hasP»vious
 && 
	`»adP»vious
(uni, uni->
™”
))

475  
uni
->
ch¬s
[--
­i
->
šdex
];

477  
U_SENTINEL
;

479 
	}
}

481 
ušt32_t
 
U_CALLCONV


482 
	$unÜmI‹¿tÜG‘S‹
(cÚ¡ 
UCh¬I‹¿tÜ
 *
­i
) {

484  ((
UNÜmI‹¿tÜ
 *)
­i
)->
¡©es
[­i->
šdex
];

485 
	}
}

487 
U_CALLCONV


488 
	$unÜmI‹¿tÜS‘S‹
(
UCh¬I‹¿tÜ
 *
­i
, 
ušt32_t
 
¡©e
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

489 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

491 } if(
­i
==
NULL
) {

492 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

493 } if(
¡©e
==
UITER_NO_STATE
) {

494 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

496 
UNÜmI‹¿tÜ
 *
uni
=(UNÜmI‹¿tÜ *)
­i
;

497 
UCh¬I‹¿tÜ
 *
™”
=((
UNÜmI‹¿tÜ
 *)
­i
)->iter;

498 if(
¡©e
!=
uni
->state) {

499 
uni
->
¡©e
=state;

500 
	`u™”_£tS‹
(
™”
, 
¡©e
, 
pE¼ÜCode
);

509 if(
¡©e
==
uni
->
¡©es
[
­i
->
šdex
]) {

511 } if(
¡©e
==
uni
->
¡©es
[
­i
->
lim™
]) {

512 
­i
->
šdex
÷pi->
lim™
;

516 
št32_t
 
i
;

518 
i
=
­i
->
¡¬t
; i<­i->
lim™
; ++i) {

519 if(
¡©e
==
uni
->
¡©es
[
i
]) {

520 
­i
->
šdex
=
i
;

527 
	`š™Indexes
((
UNÜmI‹¿tÜ
 *)
­i
, 
™”
);

528 
uni
->
¡©es
[
­i
->
lim™
]=
¡©e
;

530 
	}
}

532 cÚ¡ 
UCh¬I‹¿tÜ
 
	gunÜmI‹¿tÜ
={

533 
NULL
, 0, 0, 0, 0, 0,

534 
unÜmI‹¿tÜG‘Index
,

535 
unÜmI‹¿tÜMove
,

536 
unÜmI‹¿tÜHasNext
,

537 
unÜmI‹¿tÜHasP»vious
,

538 
unÜmI‹¿tÜCu¼’t
,

539 
unÜmI‹¿tÜNext
,

540 
unÜmI‹¿tÜP»vious
,

541 
NULL
,

542 
unÜmI‹¿tÜG‘S‹
,

543 
unÜmI‹¿tÜS‘S‹


548 
U_CAPI
 
UNÜmI‹¿tÜ
 * 
U_EXPORT2


549 
	$unÜm_İ’I‹r
(*
¡ackMem
, 
št32_t
 
¡ackMemSize
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

550 
UNÜmI‹¿tÜ
 *
uni
;

553 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

554  
NULL
;

558 
uni
=
NULL
;

559 if(
¡ackMem
!=
NULL
 && 
¡ackMemSize
>=(
UNÜmI‹¿tÜ
)) {

560 if(
	`U_ALIGNMENT_OFFSET
(
¡ackMem
)==0) {

562 
uni
=(
UNÜmI‹¿tÜ
 *)
¡ackMem
;

564 
št32_t
 
®ign
=(št32_t)
	`U_ALIGNMENT_OFFSET_UP
(
¡ackMem
);

565 if((
¡ackMemSize
-=
®ign
)>=(
št32_t
)(
UNÜmI‹¿tÜ
)) {

567 
uni
=(
UNÜmI‹¿tÜ
 *)((*)
¡ackMem
+
®ign
);

573 if(
uni
!=
NULL
) {

574 
uni
->
isSckAÎoÿ‹d
=
TRUE
;

576 
uni
=(
UNÜmI‹¿tÜ
 *)
	`u´v_m®loc
((UNormIterator));

577 if(
uni
==
NULL
) {

578 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

579  
NULL
;

581 
uni
->
isSckAÎoÿ‹d
=
FALSE
;

588 
uni
->
™”
=
NULL
;

589 
uni
->
ch¬s
=uni->
ch¬sBufãr
;

590 
uni
->
¡©es
=uni->
¡©esBufãr
;

591 
uni
->
ÿ·c™y
=
INITIAL_CAPACITY
;

592 
uni
->
¡©e
=
UITER_NO_STATE
;

593 
uni
->
hasP»vious
=uni->
hasNext
=
FALSE
;

594 
uni
->
mode
=
UNORM_NONE
;

597 
	`u™”_£tSŒšg
(&
uni
->
­i
, 
NULL
, 0);

598  
uni
;

599 
	}
}

601 
U_CAPI
 
U_EXPORT2


602 
	$unÜm_şo£I‹r
(
UNÜmI‹¿tÜ
 *
uni
) {

603 if(
uni
!=
NULL
) {

604 if(
uni
->
¡©es
!=uni->
¡©esBufãr
) {

606 
	`u´v_ä“
(
uni
->
¡©es
);

608 if(!
uni
->
isSckAÎoÿ‹d
) {

609 
	`u´v_ä“
(
uni
);

612 
	}
}

614 
U_CAPI
 
UCh¬I‹¿tÜ
 * 
U_EXPORT2


615 
	$unÜm_£tI‹r
(
UNÜmI‹¿tÜ
 *
uni
, 
UCh¬I‹¿tÜ
 *
™”
, 
UNÜm®iz©iÚMode
 
mode
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

617 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

618  
NULL
;

620 if(
uni
==
NULL
) {

621 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

622  
NULL
;

624 ifĞ
™”
==
NULL
 || i‹r->
g‘S‹
==NULL || i‹r->
£tS‹
==NULL ||

625 
mode
<
UNORM_NONE
 || 
UNORM_MODE_COUNT
<=mode

628 
	`u™”_£tSŒšg
(&
uni
->
­i
, 
NULL
, 0);

629 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

630  
NULL
;

634 
	`u´v_memıy
(&
uni
->
­i
, &
unÜmI‹¿tÜ
, (unormIterator));

636 
uni
->
™”
=iter;

637 
uni
->
mode
=mode;

639 
	`š™Indexes
(
uni
, 
™”
);

640 
uni
->
¡©es
[uni->
­i
.
lim™
]=uni->
¡©e
=
	`u™”_g‘S‹
(
™”
);

642  &
uni
->
­i
;

643 
	}
}

	@unorm_it.h

17 #iâdeà
__UNORM_IT_H__


18 
	#__UNORM_IT_H__


	)

20 
	~"unicode/uty³s.h
"

22 #ià!
UCONFIG_NO_COLLATION
 && !
UCONFIG_NO_NORMALIZATION


24 
	~"unicode/u™”.h
"

25 
	~"unicode/unÜm.h
"

82 
	gUNÜmI‹¿tÜ
;

83 
UNÜmI‹¿tÜ
 
	tUNÜmI‹¿tÜ
;

91 
	#UNORM_ITER_SIZE
 1024

	)

105 
U_CAPI
 
UNÜmI‹¿tÜ
 * 
U_EXPORT2


106 
unÜm_İ’I‹r
(*
¡ackMem
, 
št32_t
 
¡ackMemSize
, 
UE¼ÜCode
 *
pE¼ÜCode
);

114 
U_CAPI
 
U_EXPORT2


115 
unÜm_şo£I‹r
(
UNÜmI‹¿tÜ
 *
uni
);

143 
U_CAPI
 
UCh¬I‹¿tÜ
 * 
U_EXPORT2


144 
unÜm_£tI‹r
(
UNÜmI‹¿tÜ
 *
uni
, 
UCh¬I‹¿tÜ
 *
™”
, 
UNÜm®iz©iÚMode
 
mode
, 
UE¼ÜCode
 *
pE¼ÜCode
);

	@unorm_props_data.c

10 cÚ¡ 
UV”siÚInfo
 
	gd©aV”siÚ
={ 5,2,0,0 };

12 cÚ¡ 
št32_t
 
	gšdexes
[
_NORM_INDEX_TOP
]={

18 cÚ¡ 
ušt16_t
 
	gnÜmTr›_šdex
[2532]={

180 cÚ¡ 
ušt32_t
 
	gnÜmTr›_d©a32
[10260]={

825 cÚ¡ 
UTr›2
 
	gnÜmTr›
={

826 
nÜmTr›_šdex
,

827 
NULL
,

828 
nÜmTr›_d©a32
,

837 
NULL
, 0, 
FALSE
, FALSE, 0, NULL

841 cÚ¡ 
ušt16_t
 
	gexŒaD©a
[16431]={

1872 cÚ¡ 
ušt16_t
 
	gcombššgTabË
[1967]={

1998 cÚ¡ 
ušt16_t
 
	gfcdTr›_šdex
[6508]={

2408 cÚ¡ 
UTr›2
 
	gfcdTr›
={

2409 
fcdTr›_šdex
,

2410 
fcdTr›_šdex
+2368,

2411 
NULL
,

2420 
NULL
, 0, 
FALSE
, FALSE, 0, NULL

2424 cÚ¡ 
ušt16_t
 
	gauxTr›_šdex
[6664]={

2844 cÚ¡ 
UTr›2
 
	gauxTr›
={

2845 
auxTr›_šdex
,

2846 
auxTr›_šdex
+2528,

2847 
NULL
,

2856 
NULL
, 0, 
FALSE
, FALSE, 0, NULL

2859 cÚ¡ 
ušt16_t
 
	gÿnÚS¹S‘s
[7742]={

	@unormcmp.cpp

21 
	~"unicode/uty³s.h
"

23 #ià!
UCONFIG_NO_NORMALIZATION


25 
	~"unicode/unÜm.h
"

26 
	~"unicode/u¡ršg.h
"

27 
	~"cmemÜy.h
"

28 
	~"nÜm®iz”2im¶.h
"

29 
	~"uÿ£.h
"

30 
	~"u´İs.h
"

31 
	~"u¡r_imp.h
"

33 
	gU_NAMESPACE_USE


35 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

130 
	sCmpEquivLev–
 {

131 cÚ¡ 
UCh¬
 *
	m¡¬t
, *
	ms
, *
	mlim™
;

133 
CmpEquivLev–
 
	tCmpEquivLev–
;

139 
	#_COMPARE_EQUIV
 0x80000

	)

142 
št32_t


143 
	$unÜm_cmpEquivFŞd
(cÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

144 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

145 
ušt32_t
 
İtiÚs
,

146 
UE¼ÜCode
 *
pE¼ÜCode
) {

147 cÚ¡ 
NÜm®iz”2Im¶
 *
nfcIm¶
;

148 cÚ¡ 
UCa£Prİs
 *
c¥
;

151 cÚ¡ 
UCh¬
 *
¡¬t1
, *
¡¬t2
, *
lim™1
, *
lim™2
;

154 cÚ¡ 
UCh¬
 *
p
;

155 
št32_t
 
Ëngth
;

158 
CmpEquivLev–
 
¡ack1
[2], 
¡ack2
[2];

161 
UCh¬
 
decomp1
[4], 
decomp2
[4];

164 
UCh¬
 
fŞd1
[
UCASE_MAX_STRING_LENGTH
+1], 
fŞd2
[UCASE_MAX_STRING_LENGTH+1];

167 
št32_t
 
Ëv–1
, 
Ëv–2
;

170 
UCh¬32
 
c1
, 
c2
, 
ı1
, 
ı2
;

181 if((
İtiÚs
&
_COMPARE_EQUIV
)!=0) {

182 
nfcIm¶
=
NÜm®iz”2FaùÜy
::
	`g‘NFCIm¶
(*
pE¼ÜCode
);

184 
nfcIm¶
=
NULL
;

186 if((
İtiÚs
&
U_COMPARE_IGNORE_CASE
)!=0) {

187 
c¥
=
	`uÿ£_g‘SšgËtÚ
();

189 
c¥
=
NULL
;

191 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

196 
¡¬t1
=
s1
;

197 if(
Ëngth1
==-1) {

198 
lim™1
=
NULL
;

200 
lim™1
=
s1
+
Ëngth1
;

203 
¡¬t2
=
s2
;

204 if(
Ëngth2
==-1) {

205 
lim™2
=
NULL
;

207 
lim™2
=
s2
+
Ëngth2
;

210 
Ëv–1
=
Ëv–2
=0;

211 
c1
=
c2
=-1;

220 if(
c1
<0) {

223 if(
s1
==
lim™1
 || ((
c1
=*s1)==0 && (lim™1==
NULL
 || (
İtiÚs
&
_STRNCMP_STYLE
)))) {

224 if(
Ëv–1
==0) {

225 
c1
=-1;

229 ++
s1
;

235 --
Ëv–1
;

236 
¡¬t1
=
¡ack1
[
Ëv–1
].
¡¬t
;

237 } 
¡¬t1
==
NULL
);

238 
s1
=
¡ack1
[
Ëv–1
].
s
;

239 
lim™1
=
¡ack1
[
Ëv–1
].
lim™
;

243 if(
c2
<0) {

246 if(
s2
==
lim™2
 || ((
c2
=*s2)==0 && (lim™2==
NULL
 || (
İtiÚs
&
_STRNCMP_STYLE
)))) {

247 if(
Ëv–2
==0) {

248 
c2
=-1;

252 ++
s2
;

258 --
Ëv–2
;

259 
¡¬t2
=
¡ack2
[
Ëv–2
].
¡¬t
;

260 } 
¡¬t2
==
NULL
);

261 
s2
=
¡ack2
[
Ëv–2
].
s
;

262 
lim™2
=
¡ack2
[
Ëv–2
].
lim™
;

270 if(
c1
==
c2
) {

271 if(
c1
<0) {

274 
c1
=
c2
=-1;

276 } if(
c1
<0) {

278 } if(
c2
<0) {

284 
ı1
=
c1
;

285 if(
	`U_IS_SURROGATE
(
c1
)) {

286 
UCh¬
 
c
;

288 if(
	`U_IS_SURROGATE_LEAD
(
c1
)) {

289 if(
s1
!=
lim™1
 && 
	`U16_IS_TRAIL
(
c
=*s1)) {

291 
ı1
=
	`U16_GET_SUPPLEMENTARY
(
c1
, 
c
);

294 if(
¡¬t1
<=(
s1
-2è&& 
	`U16_IS_LEAD
(
c
=*(s1-2))) {

295 
ı1
=
	`U16_GET_SUPPLEMENTARY
(
c
, 
c1
);

300 
ı2
=
c2
;

301 if(
	`U_IS_SURROGATE
(
c2
)) {

302 
UCh¬
 
c
;

304 if(
	`U_IS_SURROGATE_LEAD
(
c2
)) {

305 if(
s2
!=
lim™2
 && 
	`U16_IS_TRAIL
(
c
=*s2)) {

307 
ı2
=
	`U16_GET_SUPPLEMENTARY
(
c2
, 
c
);

310 if(
¡¬t2
<=(
s2
-2è&& 
	`U16_IS_LEAD
(
c
=*(s2-2))) {

311 
ı2
=
	`U16_GET_SUPPLEMENTARY
(
c
, 
c2
);

321 ifĞ
Ëv–1
==0 && (
İtiÚs
&
U_COMPARE_IGNORE_CASE
) &&

322 (
Ëngth
=
	`uÿ£_toFuÎFŞdšg
(
c¥
, (
UCh¬32
)
ı1
, &
p
, 
İtiÚs
))>=0

325 if(
	`U_IS_SURROGATE
(
c1
)) {

326 if(
	`U_IS_SURROGATE_LEAD
(
c1
)) {

328 ++
s1
;

337 --
s2
;

338 
c2
=*(
s2
-1);

343 
¡ack1
[0].
¡¬t
=
¡¬t1
;

344 
¡ack1
[0].
s
=
s1
;

345 
¡ack1
[0].
lim™
=
lim™1
;

346 ++
Ëv–1
;

349 if(
Ëngth
<=
UCASE_MAX_STRING_LENGTH
) {

350 
	`u_memıy
(
fŞd1
, 
p
, 
Ëngth
);

352 
št32_t
 
i
=0;

353 
	`U16_APPEND_UNSAFE
(
fŞd1
, 
i
, 
Ëngth
);

354 
Ëngth
=
i
;

358 
¡¬t1
=
s1
=
fŞd1
;

359 
lim™1
=
fŞd1
+
Ëngth
;

362 
c1
=-1;

366 ifĞ
Ëv–2
==0 && (
İtiÚs
&
U_COMPARE_IGNORE_CASE
) &&

367 (
Ëngth
=
	`uÿ£_toFuÎFŞdšg
(
c¥
, (
UCh¬32
)
ı2
, &
p
, 
İtiÚs
))>=0

370 if(
	`U_IS_SURROGATE
(
c2
)) {

371 if(
	`U_IS_SURROGATE_LEAD
(
c2
)) {

373 ++
s2
;

382 --
s1
;

383 
c1
=*(
s1
-1);

388 
¡ack2
[0].
¡¬t
=
¡¬t2
;

389 
¡ack2
[0].
s
=
s2
;

390 
¡ack2
[0].
lim™
=
lim™2
;

391 ++
Ëv–2
;

394 if(
Ëngth
<=
UCASE_MAX_STRING_LENGTH
) {

395 
	`u_memıy
(
fŞd2
, 
p
, 
Ëngth
);

397 
št32_t
 
i
=0;

398 
	`U16_APPEND_UNSAFE
(
fŞd2
, 
i
, 
Ëngth
);

399 
Ëngth
=
i
;

403 
¡¬t2
=
s2
=
fŞd2
;

404 
lim™2
=
fŞd2
+
Ëngth
;

407 
c2
=-1;

411 ifĞ
Ëv–1
<2 && (
İtiÚs
&
_COMPARE_EQUIV
) &&

412 0!=(
p
=
nfcIm¶
->
	`g‘Decompos™iÚ
((
UCh¬32
)
ı1
, 
decomp1
, 
Ëngth
))

415 if(
	`U_IS_SURROGATE
(
c1
)) {

416 if(
	`U_IS_SURROGATE_LEAD
(
c1
)) {

418 ++
s1
;

427 --
s2
;

428 
c2
=*(
s2
-1);

433 
¡ack1
[
Ëv–1
].
¡¬t
=
¡¬t1
;

434 
¡ack1
[
Ëv–1
].
s
=
s1
;

435 
¡ack1
[
Ëv–1
].
lim™
=
lim™1
;

436 ++
Ëv–1
;

439 if(
Ëv–1
<2) {

440 
¡ack1
[
Ëv–1
++].
¡¬t
=
NULL
;

444 
¡¬t1
=
s1
=
p
;

445 
lim™1
=
p
+
Ëngth
;

448 
c1
=-1;

452 ifĞ
Ëv–2
<2 && (
İtiÚs
&
_COMPARE_EQUIV
) &&

453 0!=(
p
=
nfcIm¶
->
	`g‘Decompos™iÚ
((
UCh¬32
)
ı2
, 
decomp2
, 
Ëngth
))

456 if(
	`U_IS_SURROGATE
(
c2
)) {

457 if(
	`U_IS_SURROGATE_LEAD
(
c2
)) {

459 ++
s2
;

468 --
s1
;

469 
c1
=*(
s1
-1);

474 
¡ack2
[
Ëv–2
].
¡¬t
=
¡¬t2
;

475 
¡ack2
[
Ëv–2
].
s
=
s2
;

476 
¡ack2
[
Ëv–2
].
lim™
=
lim™2
;

477 ++
Ëv–2
;

480 if(
Ëv–2
<2) {

481 
¡ack2
[
Ëv–2
++].
¡¬t
=
NULL
;

485 
¡¬t2
=
s2
=
p
;

486 
lim™2
=
p
+
Ëngth
;

489 
c2
=-1;

510 if(
c1
>=0xd800 && 
c2
>=0xd800 && (
İtiÚs
&
U_COMPARE_CODE_POINT_ORDER
)) {

513 (
c1
<=0xdbfà&& 
s1
!=
lim™1
 && 
	`U16_IS_TRAIL
(*s1)) ||

514 (
	`U16_IS_TRAIL
(
c1
è&& 
¡¬t1
!=(
s1
-1è&& 
	`U16_IS_LEAD
(*(s1-2)))

519 
c1
-=0x2800;

523 (
c2
<=0xdbfà&& 
s2
!=
lim™2
 && 
	`U16_IS_TRAIL
(*s2)) ||

524 (
	`U16_IS_TRAIL
(
c2
è&& 
¡¬t2
!=(
s2
-1è&& 
	`U16_IS_LEAD
(*(s2-2)))

529 
c2
-=0x2800;

533  
c1
-
c2
;

535 
	}
}

537 
U_CAPI
 
št32_t
 
U_EXPORT2


538 
	$unÜm_com·»
(cÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

539 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

540 
ušt32_t
 
İtiÚs
,

541 
UE¼ÜCode
 *
pE¼ÜCode
) {

543 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

546 if(
s1
==0 || 
Ëngth1
<-1 || 
s2
==0 || 
Ëngth2
<-1) {

547 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

551 
UnicodeSŒšg
 
fcd1
, 
fcd2
;

552 
št32_t
 
nÜmO±iÚs
=(št32_t)(
İtiÚs
>>
UNORM_COMPARE_NORM_OPTIONS_SHIFT
);

553 
İtiÚs
|=
_COMPARE_EQUIV
;

576 if(!(
İtiÚs
&
UNORM_INPUT_IS_FCD
è|| (İtiÚs&
U_FOLD_CASE_EXCLUDE_SPECIAL_I
)) {

577 cÚ¡ 
NÜm®iz”2
 *
n2
;

578 if(
İtiÚs
&
U_FOLD_CASE_EXCLUDE_SPECIAL_I
) {

579 
n2
=
NÜm®iz”2FaùÜy
::
	`g‘NFDIn¡ªû
(*
pE¼ÜCode
);

581 
n2
=
NÜm®iz”2FaùÜy
::
	`g‘FCDIn¡ªû
(*
pE¼ÜCode
);

583 ià(
	`U_FAILURE
(*
pE¼ÜCode
)) {

588 cÚ¡ 
UnicodeS‘
 *
uni32
;

589 if(
nÜmO±iÚs
&
UNORM_UNICODE_3_2
) {

590 
uni32
=
	`uni£t_g‘Unicode32In¡ªû
(*
pE¼ÜCode
);

592 
uni32
=
NULL
;

594 
F‹»dNÜm®iz”2
 
	`â2
(*
n2
, *
uni32
);

595 if(
nÜmO±iÚs
&
UNORM_UNICODE_3_2
) {

596 
n2
=&
â2
;

599 
UnicodeSŒšg
 
	`¡r1
(
Ëngth1
<0, 
s1
,†ength1);

600 
UnicodeSŒšg
 
	`¡r2
(
Ëngth2
<0, 
s2
,†ength2);

601 
št32_t
 
¥ªQCYes1
=
n2
->
	`¥ªQuickCheckYes
(
¡r1
, *
pE¼ÜCode
);

602 
št32_t
 
¥ªQCYes2
=
n2
->
	`¥ªQuickCheckYes
(
¡r2
, *
pE¼ÜCode
);

603 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

616 if(
¥ªQCYes1
<
¡r1
.
	`Ëngth
()) {

617 
UnicodeSŒšg
 
uÂÜm®ized
=
¡r1
.
	`‹mpSubSŒšg
(
¥ªQCYes1
);

618 
fcd1
.
	`£tTo
(
FALSE
, 
¡r1
.
	`g‘Bufãr
(), 
¥ªQCYes1
);

619 
n2
->
	`nÜm®izeSecÚdAndAµ’d
(
fcd1
, 
uÂÜm®ized
, *
pE¼ÜCode
);

620 
s1
=
fcd1
.
	`g‘Bufãr
();

621 
Ëngth1
=
fcd1
.
	`Ëngth
();

623 if(
¥ªQCYes2
<
¡r2
.
	`Ëngth
()) {

624 
UnicodeSŒšg
 
uÂÜm®ized
=
¡r2
.
	`‹mpSubSŒšg
(
¥ªQCYes2
);

625 
fcd2
.
	`£tTo
(
FALSE
, 
¡r2
.
	`g‘Bufãr
(), 
¥ªQCYes2
);

626 
n2
->
	`nÜm®izeSecÚdAndAµ’d
(
fcd2
, 
uÂÜm®ized
, *
pE¼ÜCode
);

627 
s2
=
fcd2
.
	`g‘Bufãr
();

628 
Ëngth2
=
fcd2
.
	`Ëngth
();

632 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

633  
	`unÜm_cmpEquivFŞd
(
s1
, 
Ëngth1
, 
s2
, 
Ëngth2
, 
İtiÚs
, 
pE¼ÜCode
);

637 
	}
}

	@unormimp.h

17 #iâdeà
__UNORMIMP_H__


18 
	#__UNORMIMP_H__


	)

20 
	~"unicode/uty³s.h
"

22 #ià!
UCONFIG_NO_NORMALIZATION


24 
	~"ud©aswp.h
"

35 
	m_NORM_QC_NFC
=0x11,

36 
	m_NORM_QC_NFKC
=0x22,

37 
	m_NORM_QC_NFD
=4,

38 
	m_NORM_QC_NFKD
=8,

40 
	m_NORM_QC_ANY_NO
=0xf,

43 
	m_NORM_QC_MAYBE
=0x10,

44 
	m_NORM_QC_ANY_MAYBE
=0x30,

46 
	m_NORM_QC_MASK
=0x3f,

48 
	m_NORM_COMBINES_FWD
=0x40,

49 
	m_NORM_COMBINES_BACK
=0x80,

50 
	m_NORM_COMBINES_ANY
=0xc0,

52 
	m_NORM_CC_SHIFT
=8,

53 
	m_NORM_CC_MASK
=0xff00,

55 
	m_NORM_EXTRA_SHIFT
=16,

56 
	m_NORM_EXTRA_INDEX_TOP
=0xfc00,

58 
	m_NORM_EXTRA_SURROGATE_MASK
=0x3ff,

59 
	m_NORM_EXTRA_SURROGATE_TOP
=0x3f0,

61 
	m_NORM_EXTRA_HANGUL
=
_NORM_EXTRA_SURROGATE_TOP
,

62 
	m_NORM_EXTRA_JAMO_L
,

63 
	m_NORM_EXTRA_JAMO_V
,

64 
	m_NORM_EXTRA_JAMO_T


68 
	#_NORM_MIN_SPECIAL
 0xfc000000

	)

69 
	#_NORM_SURROGATES_TOP
 0xfff00000

	)

70 
	#_NORM_MIN_HANGUL
 0xfff00000

	)

71 
	#_NORM_MIN_JAMO_V
 0xfff20000

	)

72 
	#_NORM_JAMO_V_TOP
 0xfff30000

	)

76 
	m_NORM_AUX_COMP_EX_SHIFT
=10,

77 
	m_NORM_AUX_UNSAFE_SHIFT
=11,

78 
	m_NORM_AUX_NFC_SKIPPABLE_F_SHIFT
=12

81 
	#_NORM_AUX_MAX_FNC
 ((
št32_t
)1<<
_NORM_AUX_COMP_EX_SHIFT
)

	)

83 
	#_NORM_AUX_FNC_MASK
 (
ušt32_t
)(
_NORM_AUX_MAX_FNC
-1)

	)

84 
	#_NORM_AUX_COMP_EX_MASK
 ((
ušt32_t
)1<<
_NORM_AUX_COMP_EX_SHIFT
)

	)

85 
	#_NORM_AUX_UNSAFE_MASK
 ((
ušt32_t
)1<<
_NORM_AUX_UNSAFE_SHIFT
)

	)

86 
	#_NORM_AUX_NFC_SKIP_F_MASK
 ((
ušt32_t
)1<<
_NORM_AUX_NFC_SKIPPABLE_F_SHIFT
)

	)

90 
	m_NORM_SET_INDEX_CANON_SETS_LENGTH
,

91 
	m_NORM_SET_INDEX_CANON_BMP_TABLE_LENGTH
,

92 
	m_NORM_SET_INDEX_CANON_SUPP_TABLE_LENGTH
,

95 
	m_NORM_SET_INDEX_NX_CJK_COMPAT_OFFSET
,

97 
	m_NORM_SET_INDEX_NX_UNICODE32_OFFSET
,

99 
	m_NORM_SET_INDEX_NX_RESERVED_OFFSET
,

102 
	m_NORM_SET_INDEX_TOP
=32

108 
	#_NORM_MAX_CANON_SETS
 0x4000

	)

111 
	#_NORM_CANON_SET_BMP_MASK
 0xc000

	)

112 
	#_NORM_CANON_SET_BMP_IS_INDEX
 0x4000

	)

116 
	m_NORM_INDEX_TRIE_SIZE
,

117 
	m_NORM_INDEX_UCHAR_COUNT
,

119 
	m_NORM_INDEX_COMBINE_DATA_COUNT
,

120 
	m_NORM_INDEX_COMBINE_FWD_COUNT
,

121 
	m_NORM_INDEX_COMBINE_BOTH_COUNT
,

122 
	m_NORM_INDEX_COMBINE_BACK_COUNT
,

124 
	m_NORM_INDEX_MIN_NFC_NO_MAYBE
,

125 
	m_NORM_INDEX_MIN_NFKC_NO_MAYBE
,

126 
	m_NORM_INDEX_MIN_NFD_NO_MAYBE
,

127 
	m_NORM_INDEX_MIN_NFKD_NO_MAYBE
,

129 
	m_NORM_INDEX_FCD_TRIE_SIZE
,

131 
	m_NORM_INDEX_AUX_TRIE_SIZE
,

132 
	m_NORM_INDEX_CANON_SET_COUNT
,

134 
	m_NORM_INDEX_TOP
=32

139 
	m_NORM_MIN_WITH_LEAD_CC
=0x300

150 
	m_NORM_DECOMP_FLAG_LENGTH_HAS_CC
=0x80,

154 
	m_NORM_DECOMP_LENGTH_MASK
=0x7f

160 
	mUNORM_NX_HANGUL
=1,

162 
	mUNORM_NX_CJK_COMPAT
=2

169 
U_CAPI
 
št32_t
 
U_EXPORT2


170 
unÜm_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

171 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

172 
UE¼ÜCode
 *
pE¼ÜCode
);

	@uobject.cpp

17 
	~"unicode/uobjeù.h
"

18 
	~"cmemÜy.h
"

20 
	gU_NAMESPACE_BEGIN


22 #ià
U_OVERRIDE_CXX_ALLOCATION


59 * 
U_EXPORT2
 
	gUMemÜy
::
İ”©Ü
 
	$Ãw
(
size_t
 
size
è
U_NO_THROW
 {

60  
	`u´v_m®loc
(
size
);

61 
	}
}

63 
U_EXPORT2
 
	gUMemÜy
::
İ”©Ü
 
	$d–‘e
(*
p
è
U_NO_THROW
 {

64 if(
p
!=
NULL
) {

65 
	`u´v_ä“
(
p
);

67 
	}
}

69 * 
U_EXPORT2
 
	gUMemÜy
::
İ”©Ü
 
Ãw
[](
size_t
 
size
è
U_NO_THROW
 {

70  
u´v_m®loc
(
size
);

73 
U_EXPORT2
 
	gUMemÜy
::
İ”©Ü
 
d–‘e
[](*
p
è
U_NO_THROW
 {

74 if(
p
!=
NULL
) {

75 
u´v_ä“
(
p
);

79 #ià
U_HAVE_DEBUG_LOCATION_NEW


80 * 
U_EXPORT2
 
	gUMemÜy
::
İ”©Ü
 
	$Ãw
(
size_t
 
size
, cÚ¡ * , è
U_NO_THROW
 {

81  
UMemÜy
::
İ”©Ü
 
	`Ãw
(
size
);

82 
	}
}

84 
U_EXPORT2
 
	gUMemÜy
::
İ”©Ü
 
	$d–‘e
(* 
p
, cÚ¡ * , è
U_NO_THROW
 {

85 
UMemÜy
::
İ”©Ü
 
	`d–‘e
(
p
);

86 
	}
}

92 
	gUObjeù
::~
	$UObjeù
(è{
	}
}

112 
U_NAMESPACE_END


	@uprops.cpp

24 
	~"unicode/uty³s.h
"

25 
	~"unicode/uch¬.h
"

26 
	~"unicode/unÜm2.h
"

27 
	~"unicode/usüt.h
"

28 
	~"unicode/u¡ršg.h
"

29 
	~"c¡ršg.h
"

30 
	~"nÜm®iz”2im¶.h
"

31 
	~"uşn_cmn.h
"

32 
	~"umu‹x.h
"

33 
	~"ubidi_´İs.h
"

34 
	~"u´İs.h
"

35 
	~"uÿ£.h
"

36 
	~"u¡r_imp.h
"

38 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

40 
	gU_NAMESPACE_USE


42 
	#GET_BIDI_PROPS
(è
	`ubidi_g‘SšgËtÚ
()

	)

46 
	gBš¬yPrİ”ty
;

48 
UBoŞ
 
	tBš¬yPrİ”tyCÚšs
(cÚ¡ 
	tBš¬yPrİ”ty
 &
	t´İ
, 
	tUCh¬32
 
	tc
, 
	tUPrİ”ty
 
	twhich
);

50 
	sBš¬yPrİ”ty
 {

51 
št32_t
 
	mcŞumn
;

52 
ušt32_t
 
	mmask
;

53 
Bš¬yPrİ”tyCÚšs
 *
	mcÚšs
;

56 
UBoŞ
 
	$deçuÉCÚšs
(cÚ¡ 
Bš¬yPrİ”ty
 &
´İ
, 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

58  (
	`u_g‘UnicodePrİ”t›s
(
c
, 
´İ
.
cŞumn
)&´İ.
mask
)!=0;

59 
	}
}

61 
UBoŞ
 
	$ÿ£Bš¬yPrİ”tyCÚšs
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 
which
) {

62  
	`uÿ£_hasBš¬yPrİ”ty
(
c
, 
which
);

63 
	}
}

65 
UBoŞ
 
	$isBidiCÚŒŞ
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

66  
	`ubidi_isBidiCÚŒŞ
(
	`GET_BIDI_PROPS
(), 
c
);

67 
	}
}

69 
UBoŞ
 
	$isMœrÜed
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

70  
	`ubidi_isMœrÜed
(
	`GET_BIDI_PROPS
(), 
c
);

71 
	}
}

73 
UBoŞ
 
	$isJošCÚŒŞ
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

74  
	`ubidi_isJošCÚŒŞ
(
	`GET_BIDI_PROPS
(), 
c
);

75 
	}
}

77 #ià
UCONFIG_NO_NORMALIZATION


78 
UBoŞ
 
	$hasFuÎCompos™iÚExşusiÚ
(cÚ¡ 
Bš¬yPrİ”ty
 &, 
UCh¬32
, 
UPrİ”ty
) {

79  
FALSE
;

80 
	}
}

82 
UBoŞ
 
	$hasFuÎCompos™iÚExşusiÚ
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

84 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

85 cÚ¡ 
NÜm®iz”2Im¶
 *
im¶
=
NÜm®iz”2FaùÜy
::
	`g‘NFCIm¶
(
”rÜCode
);

86  
	`U_SUCCESS
(
”rÜCode
è&& 
im¶
->
	`isCompNo
(im¶->
	`g‘NÜm16
(
c
));

87 
	}
}

91 #ià
UCONFIG_NO_NORMALIZATION


92 
UBoŞ
 
	$isNÜmIÃ¹
(cÚ¡ 
Bš¬yPrİ”ty
 &, 
UCh¬32
, 
UPrİ”ty
) {

93  
FALSE
;

94 
	}
}

96 
UBoŞ
 
	$isNÜmIÃ¹
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 
which
) {

97 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

98 cÚ¡ 
NÜm®iz”2
 *
nÜm2
=
NÜm®iz”2FaùÜy
::
	`g‘In¡ªû
(

99 (
UNÜm®iz©iÚMode
)(
which
-
UCHAR_NFD_INERT
+
UNORM_NFD
), 
”rÜCode
);

100  
	`U_SUCCESS
(
”rÜCode
è&& 
nÜm2
->
	`isIÃ¹
(
c
);

101 
	}
}

104 #ià
UCONFIG_NO_NORMALIZATION


105 
UBoŞ
 
	$chªgesWh’Ca£fŞded
(cÚ¡ 
Bš¬yPrİ”ty
 &, 
UCh¬32
, 
UPrİ”ty
) {

106  
FALSE
;

107 
	}
}

109 
UBoŞ
 
	$chªgesWh’Ca£fŞded
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

110 
UnicodeSŒšg
 
nfd
;

111 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

112 cÚ¡ 
NÜm®iz”2
 *
nfcNÜm2
=
NÜm®iz”2FaùÜy
::
	`g‘NFCIn¡ªû
(
”rÜCode
);

113 if(
	`U_FAILURE
(
”rÜCode
)) {

114  
FALSE
;

116 if(
nfcNÜm2
->
	`g‘Decompos™iÚ
(
c
, 
nfd
)) {

118 if(
nfd
.
	`Ëngth
()==1) {

119 
c
=
nfd
[0];

120 } if(
nfd
.
	`Ëngth
()<=
U16_MAX_LENGTH
 &&

121 
nfd
.
	`Ëngth
()==
	`U16_LENGTH
(
c
òfd.
	`ch¬32At
(0))

125 
c
=
U_SENTINEL
;

127 } if(
c
<0) {

128  
FALSE
;

130 if(
c
>=0) {

132 cÚ¡ 
UCa£Prİs
 *
c¥
=
	`uÿ£_g‘SšgËtÚ
();

133 cÚ¡ 
UCh¬
 *
»suÉSŒšg
;

134  (
UBoŞ
)(
	`uÿ£_toFuÎFŞdšg
(
c¥
, 
c
, &
»suÉSŒšg
, 
U_FOLD_CASE_DEFAULT
)>=0);

137 
UCh¬
 
de¡
[2*
UCASE_MAX_STRING_LENGTH
];

138 
št32_t
 
de¡L’gth
;

139 
de¡L’gth
=
	`u_¡rFŞdCa£
(
de¡
, 
	`LENGTHOF
(dest),

140 
nfd
.
	`g‘Bufãr
(),‚fd.
	`Ëngth
(),

141 
U_FOLD_CASE_DEFAULT
, &
”rÜCode
);

142  (
UBoŞ
)(
	`U_SUCCESS
(
”rÜCode
) &&

143 0!=
	`u_¡rCom·»
(
nfd
.
	`g‘Bufãr
(),‚fd.
	`Ëngth
(),

144 
de¡
, 
de¡L’gth
, 
FALSE
));

146 
	}
}

149 #ià
UCONFIG_NO_NORMALIZATION


150 
UBoŞ
 
	$chªgesWh’NFKC_Ca£fŞded
(cÚ¡ 
Bš¬yPrİ”ty
 &, 
UCh¬32
, 
UPrİ”ty
) {

151  
FALSE
;

152 
	}
}

154 
UBoŞ
 
	$chªgesWh’NFKC_Ca£fŞded
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

155 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

156 cÚ¡ 
NÜm®iz”2Im¶
 *
kcf
=
NÜm®iz”2FaùÜy
::
	`g‘NFKC_CFIm¶
(
”rÜCode
);

157 if(
	`U_FAILURE
(
”rÜCode
)) {

158  
FALSE
;

160 
UnicodeSŒšg
 
	`¤c
(
c
);

161 
UnicodeSŒšg
 
de¡
;

165 
ReÜd”šgBufãr
 
	`bufãr
(*
kcf
, 
de¡
);

167 if(
bufãr
.
	`š™
(5, 
”rÜCode
)) {

168 cÚ¡ 
UCh¬
 *
¤cA¼ay
=
¤c
.
	`g‘Bufãr
();

169 
kcf
->
	`compo£
(
¤cA¼ay
, srcA¼ay+
¤c
.
	`Ëngth
(), 
FALSE
,

170 
TRUE
, 
bufãr
, 
”rÜCode
);

173  
	`U_SUCCESS
(
”rÜCode
è&& 
de¡
!=
¤c
;

174 
	}
}

177 #ià
UCONFIG_NO_NORMALIZATION


178 
UBoŞ
 
	$isCªÚSegm’tS¹”
(cÚ¡ 
Bš¬yPrİ”ty
 &, 
UCh¬32
, 
UPrİ”ty
) {

179  
FALSE
;

180 
	}
}

182 
UBoŞ
 
	$isCªÚSegm’tS¹”
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

183 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

184 cÚ¡ 
NÜm®iz”2Im¶
 *
im¶
=
NÜm®iz”2FaùÜy
::
	`g‘NFCIm¶
(
”rÜCode
);

186 
	`U_SUCCESS
(
”rÜCode
è&& 
im¶
->
	`’su»CªÚI‹rD©a
(errorCode) &&

187 
im¶
->
	`isCªÚSegm’tS¹”
(
c
);

188 
	}
}

191 
UBoŞ
 
	$isPOSIX_®num
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

192  
	`u_i§ÊumPOSIX
(
c
);

193 
	}
}

195 
UBoŞ
 
	$isPOSIX_bÏnk
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

196  
	`u_isbÏnk
(
c
);

197 
	}
}

199 
UBoŞ
 
	$isPOSIX_g¿ph
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

200  
	`u_isg¿phPOSIX
(
c
);

201 
	}
}

203 
UBoŞ
 
	$isPOSIX_´št
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

204  
	`u_i¥rštPOSIX
(
c
);

205 
	}
}

207 
UBoŞ
 
	$isPOSIX_xdig™
(cÚ¡ 
Bš¬yPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

208  
	`u_isxdig™
(
c
);

209 
	}
}

211 cÚ¡ 
Bš¬yPrİ”ty
 
	gbšPrİs
[
UCHAR_BINARY_LIMIT
]={

220 { 1, 
U_MASK
(
UPROPS_ALPHABETIC
), 
deçuÉCÚšs
 },

221 { 1, 
U_MASK
(
UPROPS_ASCII_HEX_DIGIT
), 
deçuÉCÚšs
 },

222 { 
UPROPS_SRC_BIDI
, 0, 
isBidiCÚŒŞ
 },

223 { 
UPROPS_SRC_BIDI
, 0, 
isMœrÜed
 },

224 { 1, 
U_MASK
(
UPROPS_DASH
), 
deçuÉCÚšs
 },

225 { 1, 
U_MASK
(
UPROPS_DEFAULT_IGNORABLE_CODE_POINT
), 
deçuÉCÚšs
 },

226 { 1, 
U_MASK
(
UPROPS_DEPRECATED
), 
deçuÉCÚšs
 },

227 { 1, 
U_MASK
(
UPROPS_DIACRITIC
), 
deçuÉCÚšs
 },

228 { 1, 
U_MASK
(
UPROPS_EXTENDER
), 
deçuÉCÚšs
 },

229 { 
UPROPS_SRC_NFC
, 0, 
hasFuÎCompos™iÚExşusiÚ
 },

230 { 1, 
U_MASK
(
UPROPS_GRAPHEME_BASE
), 
deçuÉCÚšs
 },

231 { 1, 
U_MASK
(
UPROPS_GRAPHEME_EXTEND
), 
deçuÉCÚšs
 },

232 { 1, 
U_MASK
(
UPROPS_GRAPHEME_LINK
), 
deçuÉCÚšs
 },

233 { 1, 
U_MASK
(
UPROPS_HEX_DIGIT
), 
deçuÉCÚšs
 },

234 { 1, 
U_MASK
(
UPROPS_HYPHEN
), 
deçuÉCÚšs
 },

235 { 1, 
U_MASK
(
UPROPS_ID_CONTINUE
), 
deçuÉCÚšs
 },

236 { 1, 
U_MASK
(
UPROPS_ID_START
), 
deçuÉCÚšs
 },

237 { 1, 
U_MASK
(
UPROPS_IDEOGRAPHIC
), 
deçuÉCÚšs
 },

238 { 1, 
U_MASK
(
UPROPS_IDS_BINARY_OPERATOR
), 
deçuÉCÚšs
 },

239 { 1, 
U_MASK
(
UPROPS_IDS_TRINARY_OPERATOR
), 
deçuÉCÚšs
 },

240 { 
UPROPS_SRC_BIDI
, 0, 
isJošCÚŒŞ
 },

241 { 1, 
U_MASK
(
UPROPS_LOGICAL_ORDER_EXCEPTION
), 
deçuÉCÚšs
 },

242 { 
UPROPS_SRC_CASE
, 0, 
ÿ£Bš¬yPrİ”tyCÚšs
 },

243 { 1, 
U_MASK
(
UPROPS_MATH
), 
deçuÉCÚšs
 },

244 { 1, 
U_MASK
(
UPROPS_NONCHARACTER_CODE_POINT
), 
deçuÉCÚšs
 },

245 { 1, 
U_MASK
(
UPROPS_QUOTATION_MARK
), 
deçuÉCÚšs
 },

246 { 1, 
U_MASK
(
UPROPS_RADICAL
), 
deçuÉCÚšs
 },

247 { 
UPROPS_SRC_CASE
, 0, 
ÿ£Bš¬yPrİ”tyCÚšs
 },

248 { 1, 
U_MASK
(
UPROPS_TERMINAL_PUNCTUATION
), 
deçuÉCÚšs
 },

249 { 1, 
U_MASK
(
UPROPS_UNIFIED_IDEOGRAPH
), 
deçuÉCÚšs
 },

250 { 
UPROPS_SRC_CASE
, 0, 
ÿ£Bš¬yPrİ”tyCÚšs
 },

251 { 1, 
U_MASK
(
UPROPS_WHITE_SPACE
), 
deçuÉCÚšs
 },

252 { 1, 
U_MASK
(
UPROPS_XID_CONTINUE
), 
deçuÉCÚšs
 },

253 { 1, 
U_MASK
(
UPROPS_XID_START
), 
deçuÉCÚšs
 },

254 { 
UPROPS_SRC_CASE
, 0, 
ÿ£Bš¬yPrİ”tyCÚšs
 },

255 { 1, 
U_MASK
(
UPROPS_S_TERM
), 
deçuÉCÚšs
 },

256 { 1, 
U_MASK
(
UPROPS_VARIATION_SELECTOR
), 
deçuÉCÚšs
 },

257 { 
UPROPS_SRC_NFC
, 0, 
isNÜmIÃ¹
 },

258 { 
UPROPS_SRC_NFKC
, 0, 
isNÜmIÃ¹
 },

259 { 
UPROPS_SRC_NFC
, 0, 
isNÜmIÃ¹
 },

260 { 
UPROPS_SRC_NFKC
, 0, 
isNÜmIÃ¹
 },

261 { 
UPROPS_SRC_NFC_CANON_ITER
, 0, 
isCªÚSegm’tS¹”
 },

262 { 1, 
U_MASK
(
UPROPS_PATTERN_SYNTAX
), 
deçuÉCÚšs
 },

263 { 1, 
U_MASK
(
UPROPS_PATTERN_WHITE_SPACE
), 
deçuÉCÚšs
 },

264 { 
UPROPS_SRC_CHAR_AND_PROPSVEC
, 0, 
isPOSIX_®num
 },

265 { 
UPROPS_SRC_CHAR
, 0, 
isPOSIX_bÏnk
 },

266 { 
UPROPS_SRC_CHAR
, 0, 
isPOSIX_g¿ph
 },

267 { 
UPROPS_SRC_CHAR
, 0, 
isPOSIX_´št
 },

268 { 
UPROPS_SRC_CHAR
, 0, 
isPOSIX_xdig™
 },

269 { 
UPROPS_SRC_CASE
, 0, 
ÿ£Bš¬yPrİ”tyCÚšs
 },

270 { 
UPROPS_SRC_CASE
, 0, 
ÿ£Bš¬yPrİ”tyCÚšs
 },

271 { 
UPROPS_SRC_CASE
, 0, 
ÿ£Bš¬yPrİ”tyCÚšs
 },

272 { 
UPROPS_SRC_CASE
, 0, 
ÿ£Bš¬yPrİ”tyCÚšs
 },

273 { 
UPROPS_SRC_CASE
, 0, 
ÿ£Bš¬yPrİ”tyCÚšs
 },

274 { 
UPROPS_SRC_CASE_AND_NORM
, 0, 
chªgesWh’Ca£fŞded
 },

275 { 
UPROPS_SRC_CASE
, 0, 
ÿ£Bš¬yPrİ”tyCÚšs
 },

276 { 
UPROPS_SRC_NFKC_CF
, 0, 
chªgesWh’NFKC_Ca£fŞded
 }

279 
U_CAPI
 
UBoŞ
 
U_EXPORT2


280 
	$u_hasBš¬yPrİ”ty
(
UCh¬32
 
c
, 
UPrİ”ty
 
which
) {

282 if(
which
<
UCHAR_BINARY_START
 || 
UCHAR_BINARY_LIMIT
<=which) {

284  
FALSE
;

286 cÚ¡ 
Bš¬yPrİ”ty
 &
´İ
=
bšPrİs
[
which
];

287  
´İ
.
	`cÚšs
Õrİ, 
c
, 
which
);

289 
	}
}

291 #ià!
UCONFIG_NO_NORMALIZATION


293 
U_CAPI
 
ušt8_t
 
U_EXPORT2


294 
	$u_g‘CombššgCÏss
(
UCh¬32
 
c
) {

295 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

296 cÚ¡ 
NÜm®iz”2Im¶
 *
im¶
=
NÜm®iz”2FaùÜy
::
	`g‘NFCIm¶
(
”rÜCode
);

297 if(
	`U_SUCCESS
(
”rÜCode
)) {

298  
im¶
->
	`g‘CC
(im¶->
	`g‘NÜm16
(
c
));

302 
	}
}

304 
ušt16_t


305 
	$g‘FCD16
(
UCh¬32
 
c
) {

306 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

307 cÚ¡ 
UTr›2
 *
Œ›
=
NÜm®iz”2FaùÜy
::
	`g‘FCDTr›
(
”rÜCode
);

308 if(
	`U_SUCCESS
(
”rÜCode
)) {

309  
	`UTRIE2_GET16
(
Œ›
, 
c
);

313 
	}
}

317 
	gIÁPrİ”ty
;

319 
št32_t
 
	tIÁPrİ”tyG‘V®ue
(cÚ¡ 
	tIÁPrİ”ty
 &
	t´İ
, 
	tUCh¬32
 
	tc
, 
	tUPrİ”ty
 
	twhich
);

320 
št32_t
 
	tIÁPrİ”tyG‘MaxV®ue
(cÚ¡ 
	tIÁPrİ”ty
 &
	t´İ
, 
	tUPrİ”ty
 
	twhich
);

322 
	sIÁPrİ”ty
 {

323 
št32_t
 
	mcŞumn
;

324 
ušt32_t
 
	mmask
;

325 
št32_t
 
	mshiá
;

326 
IÁPrİ”tyG‘V®ue
 *
	mg‘V®ue
;

327 
IÁPrİ”tyG‘MaxV®ue
 *
	mg‘MaxV®ue
;

330 
št32_t
 
	$deçuÉG‘V®ue
(cÚ¡ 
IÁPrİ”ty
 &
´İ
, 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

332  (
št32_t
)(
	`u_g‘UnicodePrİ”t›s
(
c
, 
´İ
.
cŞumn
)&´İ.
mask
)>>´İ.
shiá
;

333 
	}
}

335 
št32_t
 
	$deçuÉG‘MaxV®ue
(cÚ¡ 
IÁPrİ”ty
 &
´İ
, 
UPrİ”ty
 ) {

336  (
	`u´v_g‘MaxV®ues
(
´İ
.
cŞumn
)&´İ.
mask
)>>´İ.
shiá
;

337 
	}
}

339 
št32_t
 
	$g‘MaxV®ueFromShiá
(cÚ¡ 
IÁPrİ”ty
 &
´İ
, 
UPrİ”ty
 ) {

340  
´İ
.
shiá
;

341 
	}
}

343 
št32_t
 
	$g‘BiDiCÏss
(cÚ¡ 
IÁPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

344  (
št32_t
)
	`u_ch¬DœeùiÚ
(
c
);

345 
	}
}

347 
št32_t
 
	$biDiG‘MaxV®ue
(cÚ¡ 
IÁPrİ”ty
 & , 
UPrİ”ty
 
which
) {

348  
	`ubidi_g‘MaxV®ue
(
	`GET_BIDI_PROPS
(), 
which
);

349 
	}
}

351 #ià
UCONFIG_NO_NORMALIZATION


352 
št32_t
 
	$g‘CombššgCÏss
(cÚ¡ 
IÁPrİ”ty
 &, 
UCh¬32
, 
UPrİ”ty
) {

354 
	}
}

356 
št32_t
 
	$g‘CombššgCÏss
(cÚ¡ 
IÁPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

357  
	`u_g‘CombššgCÏss
(
c
);

358 
	}
}

361 
št32_t
 
	$g‘G’”®C©egÜy
(cÚ¡ 
IÁPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

362  (
št32_t
)
	`u_ch¬Ty³
(
c
);

363 
	}
}

365 
št32_t
 
	$g‘JoššgGroup
(cÚ¡ 
IÁPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

366  
	`ubidi_g‘JoššgGroup
(
	`GET_BIDI_PROPS
(), 
c
);

367 
	}
}

369 
št32_t
 
	$g‘JoššgTy³
(cÚ¡ 
IÁPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

370  
	`ubidi_g‘JoššgTy³
(
	`GET_BIDI_PROPS
(), 
c
);

371 
	}
}

373 
št32_t
 
	$g‘Num”icTy³
(cÚ¡ 
IÁPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

374 
št32_t
 
Áv
=(št32_t)
	`GET_NUMERIC_TYPE_VALUE
(
	`u_g‘UnicodePrİ”t›s
(
c
, -1));

375  
	`UPROPS_NTV_GET_TYPE
(
Áv
);

376 
	}
}

378 
št32_t
 
	$g‘Süt
(cÚ¡ 
IÁPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

379 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

380  (
št32_t
)
	`usüt_g‘Süt
(
c
, &
”rÜCode
);

381 
	}
}

387 cÚ¡ 
UHªgulSyÎabËTy³
 
	ggcbToH¡
[]={

388 
U_HST_NOT_APPLICABLE
,

389 
U_HST_NOT_APPLICABLE
,

390 
U_HST_NOT_APPLICABLE
,

391 
U_HST_NOT_APPLICABLE
,

392 
U_HST_LEADING_JAMO
,

393 
U_HST_NOT_APPLICABLE
,

394 
U_HST_LV_SYLLABLE
,

395 
U_HST_LVT_SYLLABLE
,

396 
U_HST_TRAILING_JAMO
,

397 
U_HST_VOWEL_JAMO


404 
št32_t
 
	$g‘HªgulSyÎabËTy³
(cÚ¡ 
IÁPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

406 
št32_t
 
gcb
=(št32_t)(
	`u_g‘UnicodePrİ”t›s
(
c
, 2)&
UPROPS_GCB_MASK
)>>
UPROPS_GCB_SHIFT
;

407 if(
gcb
<
	`LENGTHOF
(
gcbToH¡
)) {

408  
gcbToH¡
[
gcb
];

410  
U_HST_NOT_APPLICABLE
;

412 
	}
}

414 #ià
UCONFIG_NO_NORMALIZATION


415 
št32_t
 
	$g‘NÜmQuickCheck
(cÚ¡ 
IÁPrİ”ty
 &, 
UCh¬32
, 
UPrİ”ty
) {

417 
	}
}

419 
št32_t
 
	$g‘NÜmQuickCheck
(cÚ¡ 
IÁPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 
which
) {

420  (
št32_t
)
	`unÜm_g‘QuickCheck
(
c
, (
UNÜm®iz©iÚMode
)(
which
-
UCHAR_NFD_QUICK_CHECK
+
UNORM_NFD
));

421 
	}
}

424 #ià
UCONFIG_NO_NORMALIZATION


425 
št32_t
 
	$g‘L—dCombššgCÏss
(cÚ¡ 
IÁPrİ”ty
 &, 
UCh¬32
, 
UPrİ”ty
) {

427 
	}
}

429 
št32_t
 
	$g‘L—dCombššgCÏss
(cÚ¡ 
IÁPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

430  
	`g‘FCD16
(
c
)>>8;

431 
	}
}

434 #ià
UCONFIG_NO_NORMALIZATION


435 
št32_t
 
	$g‘T¿CombššgCÏss
(cÚ¡ 
IÁPrİ”ty
 &, 
UCh¬32
, 
UPrİ”ty
) {

437 
	}
}

439 
št32_t
 
	$g‘T¿CombššgCÏss
(cÚ¡ 
IÁPrİ”ty
 & , 
UCh¬32
 
c
, 
UPrİ”ty
 ) {

440  
	`g‘FCD16
(
c
)&0xff;

441 
	}
}

444 cÚ¡ 
IÁPrİ”ty
 
	gštPrİs
[
UCHAR_INT_LIMIT
-
UCHAR_INT_START
]={

453 { 
UPROPS_SRC_BIDI
, 0, 0, 
g‘BiDiCÏss
, 
biDiG‘MaxV®ue
 },

454 { 0, 
UPROPS_BLOCK_MASK
, 
UPROPS_BLOCK_SHIFT
, 
deçuÉG‘V®ue
, 
deçuÉG‘MaxV®ue
 },

455 { 
UPROPS_SRC_NFC
, 0, 0xff, 
g‘CombššgCÏss
, 
g‘MaxV®ueFromShiá
 },

456 { 2, 
UPROPS_DT_MASK
, 0, 
deçuÉG‘V®ue
, 
deçuÉG‘MaxV®ue
 },

457 { 0, 
UPROPS_EA_MASK
, 
UPROPS_EA_SHIFT
, 
deçuÉG‘V®ue
, 
deçuÉG‘MaxV®ue
 },

458 { 
UPROPS_SRC_CHAR
, 0, (
št32_t
)
U_CHAR_CATEGORY_COUNT
-1,
g‘G’”®C©egÜy
, 
g‘MaxV®ueFromShiá
 },

459 { 
UPROPS_SRC_BIDI
, 0, 0, 
g‘JoššgGroup
, 
biDiG‘MaxV®ue
 },

460 { 
UPROPS_SRC_BIDI
, 0, 0, 
g‘JoššgTy³
, 
biDiG‘MaxV®ue
 },

461 { 2, 
UPROPS_LB_MASK
, 
UPROPS_LB_SHIFT
, 
deçuÉG‘V®ue
, 
deçuÉG‘MaxV®ue
 },

462 { 
UPROPS_SRC_CHAR
, 0, (
št32_t
)
U_NT_COUNT
-1, 
g‘Num”icTy³
, 
g‘MaxV®ueFromShiá
 },

463 { 0, 
UPROPS_SCRIPT_MASK
, 0, 
g‘Süt
, 
deçuÉG‘MaxV®ue
 },

464 { 
UPROPS_SRC_PROPSVEC
, 0, (
št32_t
)
U_HST_COUNT
-1, 
g‘HªgulSyÎabËTy³
, 
g‘MaxV®ueFromShiá
 },

466 { 
UPROPS_SRC_NFC
, 0, (
št32_t
)
UNORM_YES
, 
g‘NÜmQuickCheck
, 
g‘MaxV®ueFromShiá
 },

468 { 
UPROPS_SRC_NFKC
, 0, (
št32_t
)
UNORM_YES
, 
g‘NÜmQuickCheck
, 
g‘MaxV®ueFromShiá
 },

470 { 
UPROPS_SRC_NFC
, 0, (
št32_t
)
UNORM_MAYBE
, 
g‘NÜmQuickCheck
, 
g‘MaxV®ueFromShiá
 },

472 { 
UPROPS_SRC_NFKC
, 0, (
št32_t
)
UNORM_MAYBE
, 
g‘NÜmQuickCheck
, 
g‘MaxV®ueFromShiá
 },

473 { 
UPROPS_SRC_NFC
, 0, 0xff, 
g‘L—dCombššgCÏss
, 
g‘MaxV®ueFromShiá
 },

474 { 
UPROPS_SRC_NFC
, 0, 0xff, 
g‘T¿CombššgCÏss
, 
g‘MaxV®ueFromShiá
 },

475 { 2, 
UPROPS_GCB_MASK
, 
UPROPS_GCB_SHIFT
, 
deçuÉG‘V®ue
, 
deçuÉG‘MaxV®ue
 },

476 { 2, 
UPROPS_SB_MASK
, 
UPROPS_SB_SHIFT
, 
deçuÉG‘V®ue
, 
deçuÉG‘MaxV®ue
 },

477 { 2, 
UPROPS_WB_MASK
, 
UPROPS_WB_SHIFT
, 
deçuÉG‘V®ue
, 
deçuÉG‘MaxV®ue
 }

480 
U_CAPI
 
št32_t
 
U_EXPORT2


481 
	$u_g‘IÁPrİ”tyV®ue
(
UCh¬32
 
c
, 
UPrİ”ty
 
which
) {

482 if(
which
<
UCHAR_INT_START
) {

483 if(
UCHAR_BINARY_START
<=
which
 && which<
UCHAR_BINARY_LIMIT
) {

484 cÚ¡ 
Bš¬yPrİ”ty
 &
´İ
=
bšPrİs
[
which
];

485  
´İ
.
	`cÚšs
Õrİ, 
c
, 
which
);

487 } if(
which
<
UCHAR_INT_LIMIT
) {

488 cÚ¡ 
IÁPrİ”ty
 &
´İ
=
štPrİs
[
which
-
UCHAR_INT_START
];

489  
´İ
.
	`g‘V®ue
Õrİ, 
c
, 
which
);

490 } if(
which
==
UCHAR_GENERAL_CATEGORY_MASK
) {

491  
	`U_MASK
(
	`u_ch¬Ty³
(
c
));

494 
	}
}

496 
U_CAPI
 
št32_t
 
U_EXPORT2


497 
	$u_g‘IÁPrİ”tyMšV®ue
(
UPrİ”ty
 ) {

499 
	}
}

501 
U_CAPI
 
št32_t
 
U_EXPORT2


502 
	$u_g‘IÁPrİ”tyMaxV®ue
(
UPrİ”ty
 
which
) {

503 if(
which
<
UCHAR_INT_START
) {

504 if(
UCHAR_BINARY_START
<=
which
 && which<
UCHAR_BINARY_LIMIT
) {

507 } if(
which
<
UCHAR_INT_LIMIT
) {

508 cÚ¡ 
IÁPrİ”ty
 &
´İ
=
štPrİs
[
which
-
UCHAR_INT_START
];

509  
´İ
.
	`g‘MaxV®ue
Õrİ, 
which
);

512 
	}
}

514 
U_CFUNC
 
UPrİ”tySourû
 
U_EXPORT2


515 
	$u´İs_g‘Sourû
(
UPrİ”ty
 
which
) {

516 if(
which
<
UCHAR_BINARY_START
) {

517  
UPROPS_SRC_NONE
;

518 } if(
which
<
UCHAR_BINARY_LIMIT
) {

519 cÚ¡ 
Bš¬yPrİ”ty
 &
´İ
=
bšPrİs
[
which
];

520 if(
´İ
.
mask
!=0) {

521  
UPROPS_SRC_PROPSVEC
;

523  (
UPrİ”tySourû
)
´İ
.
cŞumn
;

525 } if(
which
<
UCHAR_INT_START
) {

526  
UPROPS_SRC_NONE
;

527 } if(
which
<
UCHAR_INT_LIMIT
) {

528 cÚ¡ 
IÁPrİ”ty
 &
´İ
=
štPrİs
[
which
-
UCHAR_INT_START
];

529 if(
´İ
.
mask
!=0) {

530  
UPROPS_SRC_PROPSVEC
;

532  (
UPrİ”tySourû
)
´İ
.
cŞumn
;

534 } if(
which
<
UCHAR_STRING_START
) {

535 
which
) {

536 
UCHAR_GENERAL_CATEGORY_MASK
:

537 
UCHAR_NUMERIC_VALUE
:

538  
UPROPS_SRC_CHAR
;

541  
UPROPS_SRC_NONE
;

543 } if(
which
<
UCHAR_STRING_LIMIT
) {

544 
which
) {

545 
UCHAR_AGE
:

546  
UPROPS_SRC_PROPSVEC
;

548 
UCHAR_BIDI_MIRRORING_GLYPH
:

549  
UPROPS_SRC_BIDI
;

551 
UCHAR_CASE_FOLDING
:

552 
UCHAR_LOWERCASE_MAPPING
:

553 
UCHAR_SIMPLE_CASE_FOLDING
:

554 
UCHAR_SIMPLE_LOWERCASE_MAPPING
:

555 
UCHAR_SIMPLE_TITLECASE_MAPPING
:

556 
UCHAR_SIMPLE_UPPERCASE_MAPPING
:

557 
UCHAR_TITLECASE_MAPPING
:

558 
UCHAR_UPPERCASE_MAPPING
:

559  
UPROPS_SRC_CASE
;

561 
UCHAR_ISO_COMMENT
:

562 
UCHAR_NAME
:

563 
UCHAR_UNICODE_1_NAME
:

564  
UPROPS_SRC_NAMES
;

567  
UPROPS_SRC_NONE
;

570 
which
) {

571 
UCHAR_SCRIPT_EXTENSIONS
:

572  
UPROPS_SRC_PROPSVEC
;

574  
UPROPS_SRC_NONE
;

577 
	}
}

579 #ià!
UCONFIG_NO_NORMALIZATION


581 
U_CAPI
 
št32_t
 
U_EXPORT2


582 
	$u_g‘FC_NFKC_Closu»
(
UCh¬32
 
c
, 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

583 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

586 if(
de¡C­ac™y
<0 || (
de¡
==
NULL
 && destCapacity>0)) {

587 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

596 cÚ¡ 
NÜm®iz”2
 *
nfkc
=
NÜm®iz”2FaùÜy
::
	`g‘NFKCIn¡ªû
(*
pE¼ÜCode
);

597 cÚ¡ 
UCa£Prİs
 *
c¥
=
	`uÿ£_g‘SšgËtÚ
();

598 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

602 
UnicodeSŒšg
 
fŞded1SŒšg
;

603 cÚ¡ 
UCh¬
 *
fŞded1
;

604 
št32_t
 
fŞded1L’gth
=
	`uÿ£_toFuÎFŞdšg
(
c¥
, 
c
, &
fŞded1
, 
U_FOLD_CASE_DEFAULT
);

605 if(
fŞded1L’gth
<0) {

606 cÚ¡ 
NÜm®iz”2Im¶
 *
nfkcIm¶
=
NÜm®iz”2FaùÜy
::
	`g‘Im¶
(
nfkc
);

607 if(
nfkcIm¶
->
	`g‘CompQuickCheck
ÒfkcIm¶->
	`g‘NÜm16
(
c
))!=
UNORM_NO
) {

608  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 0, 
pE¼ÜCode
);

610 
fŞded1SŒšg
.
	`£tTo
(
c
);

612 if(
fŞded1L’gth
>
UCASE_MAX_STRING_LENGTH
) {

613 
fŞded1SŒšg
.
	`£tTo
(
fŞded1L’gth
);

615 
fŞded1SŒšg
.
	`£tTo
(
FALSE
, 
fŞded1
, 
fŞded1L’gth
);

618 
UnicodeSŒšg
 
kc1
=
nfkc
->
	`nÜm®ize
(
fŞded1SŒšg
, *
pE¼ÜCode
);

620 
UnicodeSŒšg
 
	`fŞded2SŒšg
(
kc1
);

621 
UnicodeSŒšg
 
kc2
=
nfkc
->
	`nÜm®ize
(
fŞded2SŒšg
.
	`fŞdCa£
(), *
pE¼ÜCode
);

623 if(
	`U_FAILURE
(*
pE¼ÜCode
è|| 
kc1
==
kc2
) {

624  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 0, 
pE¼ÜCode
);

626  
kc2
.
	`exŒaù
(
de¡
, 
de¡C­ac™y
, *
pE¼ÜCode
);

628 
	}
}

	@uprops.h

20 #iâdeà
__UPROPS_H__


21 
	#__UPROPS_H__


	)

23 
	~"unicode/uty³s.h
"

24 
	~"unicode/u£t.h
"

25 
	~"u£t_imp.h
"

26 
	~"ud©aswp.h
"

30 
	mUPROPS_PROPS32_INDEX
,

31 
	mUPROPS_EXCEPTIONS_INDEX
,

32 
	mUPROPS_EXCEPTIONS_TOP_INDEX
,

34 
	mUPROPS_ADDITIONAL_TRIE_INDEX
,

35 
	mUPROPS_ADDITIONAL_VECTORS_INDEX
,

36 
	mUPROPS_ADDITIONAL_VECTORS_COLUMNS_INDEX
,

38 
	mUPROPS_SCRIPT_EXTENSIONS_INDEX
,

40 
	mUPROPS_RESERVED_INDEX_7
,

41 
	mUPROPS_RESERVED_INDEX_8
,

44 
	mUPROPS_DATA_TOP_INDEX
,

47 
	mUPROPS_MAX_VALUES_INDEX
=10,

49 
	mUPROPS_MAX_VALUES_2_INDEX
,

51 
	mUPROPS_INDEX_COUNT
=16

58 
	mUPROPS_NUMERIC_TYPE_VALUE_SHIFT
=6

61 
	#GET_CATEGORY
(
´İs
è(Õrİs)&0x1f)

	)

62 
	#CAT_MASK
(
´İs
è
	`U_MASK
(
	`GET_CATEGORY
Õrİs))

	)

64 
	#GET_NUMERIC_TYPE_VALUE
(
´İs
è(Õrİs)>>
UPROPS_NUMERIC_TYPE_VALUE_SHIFT
)

	)

68 
	mUPROPS_NTV_NONE
=0,

69 
	mUPROPS_NTV_DECIMAL_START
=1,

70 
	mUPROPS_NTV_DIGIT_START
=11,

71 
	mUPROPS_NTV_NUMERIC_START
=21,

72 
	mUPROPS_NTV_FRACTION_START
=0xb0,

73 
	mUPROPS_NTV_LARGE_START
=0x1e0,

74 
	mUPROPS_NTV_RESERVED_START
=0x300,

76 
	mUPROPS_NTV_MAX_SMALL_INT
=
UPROPS_NTV_FRACTION_START
-
UPROPS_NTV_NUMERIC_START
-1

79 
	#UPROPS_NTV_GET_TYPE
(
Áv
) \

80 ((
Áv
==
UPROPS_NTV_NONE
è? 
U_NT_NONE
 : \

81 (
Áv
<
UPROPS_NTV_DIGIT_START
è? 
U_NT_DECIMAL
 : \

82 (
Áv
<
UPROPS_NTV_NUMERIC_START
è? 
U_NT_DIGIT
 : \

83 
U_NT_NUMERIC
)

	)

86 
	#UPROPS_VECTOR_WORDS
 3

	)

104 
	#UPROPS_AGE_MASK
 0xff000000

	)

105 
	#UPROPS_AGE_SHIFT
 24

	)

108 
	#UPROPS_SCRIPT_X_MASK
 0x00c000ff

	)

109 
	#UPROPS_SCRIPT_X_SHIFT
 22

	)

111 
	#UPROPS_EA_MASK
 0x000e0000

	)

112 
	#UPROPS_EA_SHIFT
 17

	)

114 
	#UPROPS_BLOCK_MASK
 0x0001ff00

	)

115 
	#UPROPS_BLOCK_SHIFT
 8

	)

117 
	#UPROPS_SCRIPT_MASK
 0x000000ff

	)

120 
	#UPROPS_SCRIPT_X_WITH_COMMON
 0x400000

	)

121 
	#UPROPS_SCRIPT_X_WITH_INHERITED
 0x800000

	)

122 
	#UPROPS_SCRIPT_X_WITH_OTHER
 0xc00000

	)

136 
	mUPROPS_WHITE_SPACE
,

137 
	mUPROPS_DASH
,

138 
	mUPROPS_HYPHEN
,

139 
	mUPROPS_QUOTATION_MARK
,

140 
	mUPROPS_TERMINAL_PUNCTUATION
,

141 
	mUPROPS_MATH
,

142 
	mUPROPS_HEX_DIGIT
,

143 
	mUPROPS_ASCII_HEX_DIGIT
,

144 
	mUPROPS_ALPHABETIC
,

145 
	mUPROPS_IDEOGRAPHIC
,

146 
	mUPROPS_DIACRITIC
,

147 
	mUPROPS_EXTENDER
,

148 
	mUPROPS_NONCHARACTER_CODE_POINT
,

149 
	mUPROPS_GRAPHEME_EXTEND
,

150 
	mUPROPS_GRAPHEME_LINK
,

151 
	mUPROPS_IDS_BINARY_OPERATOR
,

152 
	mUPROPS_IDS_TRINARY_OPERATOR
,

153 
	mUPROPS_RADICAL
,

154 
	mUPROPS_UNIFIED_IDEOGRAPH
,

155 
	mUPROPS_DEFAULT_IGNORABLE_CODE_POINT
,

156 
	mUPROPS_DEPRECATED
,

157 
	mUPROPS_LOGICAL_ORDER_EXCEPTION
,

158 
	mUPROPS_XID_START
,

159 
	mUPROPS_XID_CONTINUE
,

160 
	mUPROPS_ID_START
,

161 
	mUPROPS_ID_CONTINUE
,

162 
	mUPROPS_GRAPHEME_BASE
,

163 
	mUPROPS_S_TERM
,

164 
	mUPROPS_VARIATION_SELECTOR
,

165 
	mUPROPS_PATTERN_SYNTAX
,

166 
	mUPROPS_PATTERN_WHITE_SPACE
,

167 
	mUPROPS_RESERVED
,

168 
	mUPROPS_BINARY_1_TOP


181 
	#UPROPS_LB_MASK
 0x03f00000

	)

182 
	#UPROPS_LB_SHIFT
 20

	)

184 
	#UPROPS_SB_MASK
 0x000f8000

	)

185 
	#UPROPS_SB_SHIFT
 15

	)

187 
	#UPROPS_WB_MASK
 0x00007c00

	)

188 
	#UPROPS_WB_SHIFT
 10

	)

190 
	#UPROPS_GCB_MASK
 0x000003e0

	)

191 
	#UPROPS_GCB_SHIFT
 5

	)

193 
	#UPROPS_DT_MASK
 0x0000001f

	)

201 
U_CFUNC
 
ušt32_t


202 
u_g‘UnicodePrİ”t›s
(
UCh¬32
 
c
, 
št32_t
 
cŞumn
);

217 
U_CFUNC
 
št32_t


218 
u´v_g‘MaxV®ues
(
št32_t
 
cŞumn
);

224 
U_CFUNC
 
UBoŞ


225 
u_i§ÊumPOSIX
(
UCh¬32
 
c
);

234 
U_CFUNC
 
UBoŞ


235 
u_isg¿phPOSIX
(
UCh¬32
 
c
);

242 
U_CFUNC
 
UBoŞ


243 
u_i¥rštPOSIX
(
UCh¬32
 
c
);

246 
	#FLAG
(
n
è((
ušt32_t
)1<<Ò))

	)

249 
	#_Cn
 
	`FLAG
(
U_GENERAL_OTHER_TYPES
)

	)

250 
	#_Lu
 
	`FLAG
(
U_UPPERCASE_LETTER
)

	)

251 
	#_Ll
 
	`FLAG
(
U_LOWERCASE_LETTER
)

	)

252 
	#_Lt
 
	`FLAG
(
U_TITLECASE_LETTER
)

	)

253 
	#_Lm
 
	`FLAG
(
U_MODIFIER_LETTER
)

	)

255 
	#_Mn
 
	`FLAG
(
U_NON_SPACING_MARK
)

	)

256 
	#_Me
 
	`FLAG
(
U_ENCLOSING_MARK
)

	)

257 
	#_Mc
 
	`FLAG
(
U_COMBINING_SPACING_MARK
)

	)

258 
	#_Nd
 
	`FLAG
(
U_DECIMAL_DIGIT_NUMBER
)

	)

259 
	#_Nl
 
	`FLAG
(
U_LETTER_NUMBER
)

	)

260 
	#_No
 
	`FLAG
(
U_OTHER_NUMBER
)

	)

261 
	#_Zs
 
	`FLAG
(
U_SPACE_SEPARATOR
)

	)

262 
	#_Zl
 
	`FLAG
(
U_LINE_SEPARATOR
)

	)

263 
	#_Zp
 
	`FLAG
(
U_PARAGRAPH_SEPARATOR
)

	)

264 
	#_Cc
 
	`FLAG
(
U_CONTROL_CHAR
)

	)

265 
	#_Cf
 
	`FLAG
(
U_FORMAT_CHAR
)

	)

266 
	#_Co
 
	`FLAG
(
U_PRIVATE_USE_CHAR
)

	)

267 
	#_Cs
 
	`FLAG
(
U_SURROGATE
)

	)

268 
	#_Pd
 
	`FLAG
(
U_DASH_PUNCTUATION
)

	)

269 
	#_Ps
 
	`FLAG
(
U_START_PUNCTUATION
)

	)

272 
	#_Po
 
	`FLAG
(
U_OTHER_PUNCTUATION
)

	)

273 
	#_Sm
 
	`FLAG
(
U_MATH_SYMBOL
)

	)

274 
	#_Sc
 
	`FLAG
(
U_CURRENCY_SYMBOL
)

	)

275 
	#_Sk
 
	`FLAG
(
U_MODIFIER_SYMBOL
)

	)

276 
	#_So
 
	`FLAG
(
U_OTHER_SYMBOL
)

	)

277 
	#_Pi
 
	`FLAG
(
U_INITIAL_PUNCTUATION
)

	)

282 
	mTAB
 =0x0009,

283 
	mLF
 =0x000a,

284 
	mFF
 =0x000c,

285 
	mCR
 =0x000d,

286 
	mU_A
 =0x0041,

287 
	mU_F
 =0x0046,

288 
	mU_Z
 =0x005a,

289 
	mU_a
 =0x0061,

290 
	mU_f
 =0x0066,

291 
	mU_z
 =0x007a,

292 
	mDEL
 =0x007f,

293 
	mNL
 =0x0085,

294 
	mNBSP
 =0x00a0,

295 
	mCGJ
 =0x034f,

296 
	mFIGURESP
=0x2007,

297 
	mHAIRSP
 =0x200a,

298 
	mZWNJ
 =0x200c,

299 
	mZWJ
 =0x200d,

300 
	mRLM
 =0x200f,

301 
	mNNBSP
 =0x202f,

302 
	mWJ
 =0x2060,

303 
	mINHSWAP
 =0x206a,

304 
	mNOMDIG
 =0x206f,

305 
	mU_FW_A
 =0xff21,

306 
	mU_FW_F
 =0xff26,

307 
	mU_FW_Z
 =0xff3a,

308 
	mU_FW_a
 =0xff41,

309 
	mU_FW_f
 =0xff46,

310 
	mU_FW_z
 =0xff5a,

311 
	mZWNBSP
 =0xfeff

318 
U_CAPI
 
št32_t
 
U_EXPORT2


319 
u´v_g‘MaxCh¬NameL’gth
();

327 
U_CAPI
 
U_EXPORT2


328 
u´v_g‘Ch¬NameCh¬aù”s
(cÚ¡ 
US‘Add”
 *
§
);

335 
	eUPrİ”tySourû
 {

337 
	mUPROPS_SRC_NONE
,

339 
	mUPROPS_SRC_CHAR
,

341 
	mUPROPS_SRC_PROPSVEC
,

343 
	mUPROPS_SRC_NAMES
,

345 
	mUPROPS_SRC_CASE
,

347 
	mUPROPS_SRC_BIDI
,

349 
	mUPROPS_SRC_CHAR_AND_PROPSVEC
,

351 
	mUPROPS_SRC_CASE_AND_NORM
,

353 
	mUPROPS_SRC_NFC
,

355 
	mUPROPS_SRC_NFKC
,

357 
	mUPROPS_SRC_NFKC_CF
,

359 
	mUPROPS_SRC_NFC_CANON_ITER
,

361 
	mUPROPS_SRC_COUNT


363 
UPrİ”tySourû
 
	tUPrİ”tySourû
;

369 
U_CFUNC
 
UPrİ”tySourû
 
U_EXPORT2


370 
u´İs_g‘Sourû
(
UPrİ”ty
 
which
);

377 
U_CFUNC
 
U_EXPORT2


378 
uch¬_addPrİ”tyS¹s
(cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 *
pE¼ÜCode
);

385 
U_CFUNC
 
U_EXPORT2


386 
u´İsvec_addPrİ”tyS¹s
(cÚ¡ 
US‘Add”
 *
§
, 
UE¼ÜCode
 *
pE¼ÜCode
);

404 
U_CAPI
 
št32_t
 
U_EXPORT2


405 
u´İs_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

406 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

407 
UE¼ÜCode
 *
pE¼ÜCode
);

413 
U_CAPI
 
št32_t
 
U_EXPORT2


414 
uch¬_sw­Names
(cÚ¡ 
UD©aSw­³r
 *
ds
,

415 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

416 
UE¼ÜCode
 *
pE¼ÜCode
);

418 #ifdeà
XP_CPLUSPLUS


420 
U_NAMESPACE_BEGIN


422 
şass
 
	gUnicodeS‘
;

425 
U_CFUNC
 
UnicodeS‘
 *

426 
uni£t_g‘Unicode32In¡ªû
(
UE¼ÜCode
 &
”rÜCode
);

428 
	gU_NAMESPACE_END


	@ures_cnv.c

19 
	~"unicode/uty³s.h
"

20 
	~"unicode/put.h
"

21 
	~"unicode/u¡ršg.h
"

22 
	~"unicode/uúv.h
"

23 
	~"unicode/u»s.h
"

24 
	~"ušvch¬.h
"

25 
	~"u¡r_úv.h
"

27 
U_CAPI
 
UResourûBundË
 * 
U_EXPORT2


28 
	$u»s_İ’U
(cÚ¡ 
UCh¬
 *
myP©h
,

29 cÚ¡ *
loÿËID
,

30 
UE¼ÜCode
 *
¡©us
)

32 
·thBufãr
[1024];

33 
št32_t
 
Ëngth
;

34 *
·th
 = 
·thBufãr
;

36 if(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

37  
NULL
;

39 if(
myP©h
==
NULL
) {

40 
·th
 = 
NULL
;

43 
Ëngth
=
	`u_¡¾’
(
myP©h
);

44 if(
Ëngth
>=(
·thBufãr
)) {

45 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

46  
NULL
;

47 } if(
	`u´v_isInv¬ŸÁUSŒšg
(
myP©h
, 
Ëngth
)) {

52 
	`u_UCh¬sToCh¬s
(
myP©h
, 
·th
, 
Ëngth
+1);

54 #ià!
UCONFIG_NO_CONVERSION


56 
UCÚv”‹r
 *
úv
=
	`u_g‘DeçuÉCÚv”‹r
(
¡©us
);

57 
Ëngth
=
	`uúv_äomUCh¬s
(
úv
, 
·th
, (
št32_t
)(
·thBufãr
), 
myP©h
,†’gth, 
¡©us
);

58 
	`u_»Ëa£DeçuÉCÚv”‹r
(
úv
);

59 if(
	`U_FAILURE
(*
¡©us
)) {

60  
NULL
;

62 if(
Ëngth
>=(
·thBufãr
)) {

64 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

65  
NULL
;

69 *
¡©us
=
U_UNSUPPORTED_ERROR
;

70  
NULL
;

75  
	`u»s_İ’
(
·th
, 
loÿËID
, 
¡©us
);

76 
	}
}

	@uresbund.c

22 
	~"unicode/u¡ršg.h
"

23 
	~"unicode/uúv.h
"

24 
	~"u»simp.h
"

25 
	~"u¡r_imp.h
"

26 
	~"cwch¬.h
"

27 
	~"uşn_cmn.h
"

28 
	~"cmemÜy.h
"

29 
	~"c¡ršg.h
"

30 
	~"uhash.h
"

31 
	~"unicode/u’um.h
"

32 
	~"u’umimp.h
"

33 
	~"ulocimp.h
"

34 
	~"umu‹x.h
"

35 
	~"putimp.h
"

43 
UHashbË
 *
	gÿche
 = 
NULL
;

45 
UMTX
 
	g»sbMu‹x
 = 
NULL
;

48 
št32_t
 
U_CALLCONV
 
	$hashEÁry
(cÚ¡ 
UHashTok
 
·rm
) {

49 
UResourûD©aEÁry
 *
b
 = (UResourûD©aEÁry *)
·rm
.
poš‹r
;

50 
UHashTok
 
Çmekey
, 
·thkey
;

51 
Çmekey
.
poš‹r
 = 
b
->
fName
;

52 
·thkey
.
poš‹r
 = 
b
->
fP©h
;

53  
	`uhash_hashCh¬s
(
Çmekey
)+37*uhash_hashCh¬s(
·thkey
);

54 
	}
}

57 
UBoŞ
 
U_CALLCONV
 
	$com·»EÁr›s
(cÚ¡ 
UHashTok
 
p1
, cÚ¡ UHashTok 
p2
) {

58 
UResourûD©aEÁry
 *
b1
 = (UResourûD©aEÁry *)
p1
.
poš‹r
;

59 
UResourûD©aEÁry
 *
b2
 = (UResourûD©aEÁry *)
p2
.
poš‹r
;

60 
UHashTok
 
Çme1
, 
Çme2
, 
·th1
, 
·th2
;

61 
Çme1
.
poš‹r
 = 
b1
->
fName
;

62 
Çme2
.
poš‹r
 = 
b2
->
fName
;

63 
·th1
.
poš‹r
 = 
b1
->
fP©h
;

64 
·th2
.
poš‹r
 = 
b2
->
fP©h
;

65  (
UBoŞ
)(
	`uhash_com·»Ch¬s
(
Çme1
, 
Çme2
) &&

66 
	`uhash_com·»Ch¬s
(
·th1
, 
·th2
));

67 
	}
}

74 
UBoŞ
 
	$chİLoÿË
(*
Çme
) {

75 *
i
 = 
	`u´v_¡¼chr
(
Çme
, '_');

77 if(
i
 !ğ
NULL
) {

78 *
i
 = '\0';

79  
TRUE
;

82  
FALSE
;

83 
	}
}

88 
	$’ŒyInü—£
(
UResourûD©aEÁry
 *
’Œy
) {

89 
	`umtx_lock
(&
»sbMu‹x
);

90 
’Œy
->
fCouÁExi¡šg
++;

91 
’Œy
->
fP¬’t
 !ğ
NULL
) {

92 
’Œy
 =ƒÁry->
fP¬’t
;

93 
’Œy
->
fCouÁExi¡šg
++;

95 
	`umtx_uÆock
(&
»sbMu‹x
);

96 
	}
}

102 cÚ¡ 
ResourûD©a
 *
	$g‘F®lbackD©a
(cÚ¡ 
UResourûBundË
* 
»sBundË
, cÚ¡ * * 
»sTag
, 
UResourûD©aEÁry
* *
»®D©a
, 
Resourû
 *
»s
, 
UE¼ÜCode
 *
¡©us
) {

103 
UResourûD©aEÁry
 *
»sB
 = 
»sBundË
->
fD©a
;

104 
št32_t
 
šdexR
 = -1;

105 
št32_t
 
i
 = 0;

106 *
»s
 = 
RES_BOGUS
;

107 if(
»sB
 !ğ
NULL
) {

108 if(
»sB
->
fBogus
 =ğ
U_ZERO_ERROR
) {

109 *
»s
 = 
	`»s_g‘TabËI‹mByKey
(&(
»sB
->
fD©a
),„esB->fD©a.
roÙRes
, &
šdexR
, 
»sTag
);

110 
i
++;

112 if(
»sBundË
->
fHasF®lback
 =ğ
TRUE
) {

113 *
»s
 =ğ
RES_BOGUS
 && 
»sB
->
fP¬’t
 !ğ
NULL
) {

114 
»sB
 =„esB->
fP¬’t
;

115 if(
»sB
->
fBogus
 =ğ
U_ZERO_ERROR
) {

116 
i
++;

117 *
»s
 = 
	`»s_g‘TabËI‹mByKey
(&(
»sB
->
fD©a
),„esB->fD©a.
roÙRes
, &
šdexR
, 
»sTag
);

122 if(*
»s
 !ğ
RES_BOGUS
) {

123 if(
i
>1) {

124 if(
	`u´v_¡rcmp
(
»sB
->
fName
, 
	`uloc_g‘DeçuÉ
())==0 || u´v_¡rcmpÔesB->fName, 
kRoÙLoÿËName
)==0) {

125 *
¡©us
 = 
U_USING_DEFAULT_WARNING
;

127 *
¡©us
 = 
U_USING_FALLBACK_WARNING
;

130 *
»®D©a
 = 
»sB
;

131  (&(
»sB
->
fD©a
));

133 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

134  
NULL
;

137 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

138  
NULL
;

140 
	}
}

143 
	$ä“_’Œy
(
UResourûD©aEÁry
 *
’Œy
) {

144 
UResourûD©aEÁry
 *
®Ÿs
;

145 
	`»s_uÆßd
(&(
’Œy
->
fD©a
));

146 if(
’Œy
->
fName
 !ğ
NULL
 &&ƒÁry->fNam!ğ’Œy->
fNameBufãr
) {

147 
	`u´v_ä“
(
’Œy
->
fName
);

149 if(
’Œy
->
fP©h
 !ğ
NULL
) {

150 
	`u´v_ä“
(
’Œy
->
fP©h
);

152 if(
’Œy
->
fPoŞ
 !ğ
NULL
) {

153 --
’Œy
->
fPoŞ
->
fCouÁExi¡šg
;

155 
®Ÿs
 = 
’Œy
->
fAlŸs
;

156 if(
®Ÿs
 !ğ
NULL
) {

157 
®Ÿs
->
fAlŸs
 !ğ
NULL
) {

158 
®Ÿs
 =‡lŸs->
fAlŸs
;

160 --
®Ÿs
->
fCouÁExi¡šg
;

162 
	`u´v_ä“
(
’Œy
);

163 
	}
}

166 
št32_t
 
	$u»s_æushCache
()

168 
UResourûD©aEÁry
 *
»sB
;

169 
št32_t
 
pos
;

170 
št32_t
 
rbD–‘edNum
 = 0;

171 cÚ¡ 
UHashEËm’t
 *
e
;

172 
UBoŞ
 
d–‘edMÜe
;

177 
	`umtx_lock
(&
»sbMu‹x
);

178 ià(
ÿche
 =ğ
NULL
) {

179 
	`umtx_uÆock
(&
»sbMu‹x
);

184 
d–‘edMÜe
 = 
FALSE
;

186 
pos
 = -1;

187 (
e
 = 
	`uhash_ÃxtEËm’t
(
ÿche
, &
pos
)è!ğ
NULL
)

189 
»sB
 = (
UResourûD©aEÁry
 *è
e
->
v®ue
.
poš‹r
;

199 ià(
»sB
->
fCouÁExi¡šg
 == 0) {

200 
rbD–‘edNum
++;

201 
d–‘edMÜe
 = 
TRUE
;

202 
	`uhash_»moveEËm’t
(
ÿche
, 
e
);

203 
	`ä“_’Œy
(
»sB
);

210 } 
d–‘edMÜe
);

211 
	`umtx_uÆock
(&
»sbMu‹x
);

213  
rbD–‘edNum
;

214 
	}
}

216 #ifdeà
URES_DEBUG


217 
	~<¡dio.h
>

219 
U_CAPI
 
UBoŞ
 
U_EXPORT2
 
	$u»s_dumpCacheCÚ‹Ás
() {

220 
UBoŞ
 
ÿcheNÙEm±y
 = 
FALSE
;

221 
št32_t
 
pos
 = -1;

222 cÚ¡ 
UHashEËm’t
 *
e
;

223 
UResourûD©aEÁry
 *
»sB
;

225 
	`umtx_lock
(&
»sbMu‹x
);

226 ià(
ÿche
 =ğ
NULL
) {

227 
	`umtx_uÆock
(&
»sbMu‹x
);

228 
	`årštf
(
¡d”r
,"%s:%d: RB Cachi NULL.\n", 
__FILE__
, 
__LINE__
);

229  
FALSE
;

232 (
e
 = 
	`uhash_ÃxtEËm’t
(
ÿche
, &
pos
)è!ğ
NULL
) {

233 
ÿcheNÙEm±y
=
TRUE
;

234 
»sB
 = (
UResourûD©aEÁry
 *è
e
->
v®ue
.
poš‹r
;

235 
	`årštf
(
¡d”r
,"%s:%d: RB Cache: Entry @0x%p,„efcount %d,‚ame %s:%s. Pool 0x%p,‡lias 0x%p,…arent 0x%p\n",

236 
__FILE__
, 
__LINE__
,

237 (*)
»sB
,„esB->
fCouÁExi¡šg
,

238 
»sB
->
fName
?resB->fName:"NULL",

239 
»sB
->
fP©h
?resB->fPath:"NULL",

240 (*)
»sB
->
fPoŞ
,

241 (*)
»sB
->
fAlŸs
,

242 (*)
»sB
->
fP¬’t
);

245 
	`årštf
(
¡d”r
,"%s:%d: RB Cach¡ÈcÚš %d i‹ms.\n", 
__FILE__
, 
__LINE__
, 
	`uhash_couÁ
(
ÿche
));

247 
	`umtx_uÆock
(&
»sbMu‹x
);

249  
ÿcheNÙEm±y
;

250 
	}
}

254 
UBoŞ
 
U_CALLCONV
 
	$u»s_ş—nup
()

256 ià(
ÿche
 !ğ
NULL
) {

257 
	`u»s_æushCache
();

258 ià(
ÿche
 !ğ
NULL
 && 
	`uhash_couÁ
(cache) == 0) {

259 
	`uhash_şo£
(
ÿche
);

260 
ÿche
 = 
NULL
;

263 ià(
ÿche
 =ğ
NULL
 && 
»sbMu‹x
 != NULL) {

264 
	`umtx_de¡roy
(&
»sbMu‹x
);

266  (
ÿche
 =ğ
NULL
);

267 
	}
}

270 
	$š™Cache
(
UE¼ÜCode
 *
¡©us
) {

271 
UBoŞ
 
makeCache
 = 
FALSE
;

272 
	`UMTX_CHECK
(&
»sbMu‹x
, (
ÿche
 =ğ
NULL
), 
makeCache
);

273 if(
makeCache
) {

274 
UHashbË
 *
ÃwCache
 = 
	`uhash_İ’
(
hashEÁry
, 
com·»EÁr›s
, 
NULL
, 
¡©us
);

275 ià(
	`U_FAILURE
(*
¡©us
)) {

278 
	`umtx_lock
(&
»sbMu‹x
);

279 if(
ÿche
 =ğ
NULL
) {

280 
ÿche
 = 
ÃwCache
;

281 
ÃwCache
 = 
NULL
;

282 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_URES
, 
u»s_ş—nup
);

284 
	`umtx_uÆock
(&
»sbMu‹x
);

285 if(
ÃwCache
 !ğ
NULL
) {

286 
	`uhash_şo£
(
ÃwCache
);

289 
	}
}

293 
	$£tEÁryName
(
UResourûD©aEÁry
 *
»s
, *
Çme
, 
UE¼ÜCode
 *
¡©us
) {

294 
št32_t
 
Ën
 = (št32_t)
	`u´v_¡¾’
(
Çme
);

295 if(
»s
->
fName
 !ğ
NULL
 &&„es->fNam!ğ»s->
fNameBufãr
) {

296 
	`u´v_ä“
(
»s
->
fName
);

298 ià(
Ën
 < (
št32_t
)(
»s
->
fNameBufãr
)) {

299 
»s
->
fName
 =„es->
fNameBufãr
;

302 
»s
->
fName
 = (*)
	`u´v_m®loc
(
Ën
+1);

304 if(
»s
->
fName
 =ğ
NULL
) {

305 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

307 
	`u´v_¡rıy
(
»s
->
fName
, 
Çme
);

309 
	}
}

311 
UResourûD©aEÁry
 *

312 
g‘PoŞEÁry
(cÚ¡ *
·th
, 
UE¼ÜCode
 *
¡©us
);

318 
UResourûD©aEÁry
 *
	$š™_’Œy
(cÚ¡ *
loÿËID
, cÚ¡ *
·th
, 
UE¼ÜCode
 *
¡©us
) {

319 
UResourûD©aEÁry
 *
r
 = 
NULL
;

320 
UResourûD©aEÁry
 
fšd
;

322 
Çme
[96];

323 
®ŸsName
[100] = { 0 };

324 
št32_t
 
®ŸsL’
 = 0;

326 
UHashTok
 
hashkey
;

328 if(
	`U_FAILURE
(*
¡©us
)) {

329  
NULL
;

333 if(
loÿËID
 =ğ
NULL
) {

334 
	`u´v_¡rıy
(
Çme
, 
	`uloc_g‘DeçuÉ
());

335 } if(*
loÿËID
 == 0) {

336 
	`u´v_¡rıy
(
Çme
, 
kRoÙLoÿËName
);

338 
	`u´v_¡rıy
(
Çme
, 
loÿËID
);

341 
fšd
.
fName
 = 
Çme
;

342 
fšd
.
fP©h
 = (*)
·th
;

345 
hashkey
.
poš‹r
 = (*)&
fšd
;

349 
r
 = (
UResourûD©aEÁry
 *)
	`uhash_g‘
(
ÿche
, &
fšd
);

350 if(
r
 =ğ
NULL
) {

352 
r
 = (
UResourûD©aEÁry
 *è
	`u´v_m®loc
((UResourceDataEntry));

353 if(
r
 =ğ
NULL
) {

354 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

355  
NULL
;

358 
	`u´v_mem£t
(
r
, 0, (
UResourûD©aEÁry
));

361 
	`£tEÁryName
(
r
, 
Çme
, 
¡©us
);

362 ià(
	`U_FAILURE
(*
¡©us
)) {

363 
	`u´v_ä“
(
r
);

364  
NULL
;

367 if(
·th
 !ğ
NULL
) {

368 
r
->
fP©h
 = (*)
	`u´v_¡rdup
(
·th
);

369 if(
r
->
fP©h
 =ğ
NULL
) {

370 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

371 
	`u´v_ä“
(
r
);

372  
NULL
;

377 
	`»s_lßd
(&(
r
->
fD©a
),„->
fP©h
,„->
fName
, 
¡©us
);

379 ià(
	`U_FAILURE
(*
¡©us
)) {

381 *
¡©us
 = 
U_USING_FALLBACK_WARNING
;

382 
r
->
fBogus
 = 
U_USING_FALLBACK_WARNING
;

384 
Resourû
 
®Ÿ¤es
;

385 ià(
r
->
fD©a
.
u£sPoŞBundË
) {

386 
r
->
fPoŞ
 = 
	`g‘PoŞEÁry
Ô->
fP©h
, 
¡©us
);

387 ià(
	`U_SUCCESS
(*
¡©us
)) {

388 cÚ¡ 
št32_t
 *
poŞIndexes
 = 
r
->
fPoŞ
->
fD©a
.
pRoÙ
 + 1;

389 if(
r
->
fD©a
.
pRoÙ
[1 + 
URES_INDEX_POOL_CHECKSUM
] =ğ
poŞIndexes
[URES_INDEX_POOL_CHECKSUM]) {

390 
r
->
fD©a
.
poŞBundËKeys
 = (cÚ¡ *)(
poŞIndexes
 + (poŞIndexes[
URES_INDEX_LENGTH
] & 0xff));

392 
r
->
fBogus
 = *
¡©us
 = 
U_INVALID_FORMAT_ERROR
;

395 
r
->
fBogus
 = *
¡©us
;

398 ià(
	`U_SUCCESS
(*
¡©us
)) {

401 
®Ÿ¤es
 = 
	`»s_g‘Resourû
(&(
r
->
fD©a
), "%%ALIAS");

402 ià(
®Ÿ¤es
 !ğ
RES_BOGUS
) {

403 cÚ¡ 
UCh¬
 *
®Ÿs
 = 
	`»s_g‘SŒšg
(&(
r
->
fD©a
), 
®Ÿ¤es
, &
®ŸsL’
);

404 if(
®Ÿs
 !ğ
NULL
 && 
®ŸsL’
 > 0) {

405 
	`u_UCh¬sToCh¬s
(
®Ÿs
, 
®ŸsName
, 
®ŸsL’
+1);

406 
r
->
fAlŸs
 = 
	`š™_’Œy
(
®ŸsName
, 
·th
, 
¡©us
);

413 
UResourûD©aEÁry
 *
ŞdR
 = 
NULL
;

414 if((
ŞdR
 = (
UResourûD©aEÁry
 *)
	`uhash_g‘
(
ÿche
, 
r
)è=ğ
NULL
) {

416 
UE¼ÜCode
 
ÿcheStus
 = 
U_ZERO_ERROR
;

417 
	`uhash_put
(
ÿche
, (*)
r
,„, &
ÿcheStus
);

418 ià(
	`U_FAILURE
(
ÿcheStus
)) {

419 *
¡©us
 = 
ÿcheStus
;

420 
	`ä“_’Œy
(
r
);

421 
r
 = 
NULL
;

426 
	`ä“_’Œy
(
r
);

427 
r
 = 
ŞdR
;

432 if(
r
 !ğ
NULL
) {

434 
r
->
fAlŸs
 !ğ
NULL
) {

435 
r
 =„->
fAlŸs
;

437 
r
->
fCouÁExi¡šg
++;

440 if(
r
->
fBogus
 !ğ
U_ZERO_ERROR
 && 
	`U_SUCCESS
(*
¡©us
)) {

441 *
¡©us
 = 
r
->
fBogus
;

444  
r
;

445 
	}
}

447 
UResourûD©aEÁry
 *

448 
	$g‘PoŞEÁry
(cÚ¡ *
·th
, 
UE¼ÜCode
 *
¡©us
) {

449 
UResourûD©aEÁry
 *
poŞBundË
 = 
	`š™_’Œy
(
kPoŞBundËName
, 
·th
, 
¡©us
);

450 ifĞ
	`U_SUCCESS
(*
¡©us
) &&

451 (
poŞBundË
 =ğ
NULL
 ||…oŞBundË->
fBogus
 !ğ
U_ZERO_ERROR
 || !poŞBundË->
fD©a
.
isPoŞBundË
)

453 *
¡©us
 = 
U_INVALID_FORMAT_ERROR
;

455  
poŞBundË
;

456 
	}
}

460 
UResourûD©aEÁry
 *
	$fšdFœ¡Exi¡šg
(cÚ¡ * 
·th
, * 
Çme
, 
UBoŞ
 *
isRoÙ
, UBoŞ *
hasChİ³d
, UBoŞ *
isDeçuÉ
, 
UE¼ÜCode
* 
¡©us
) {

461 
UResourûD©aEÁry
 *
r
 = 
NULL
;

462 
UBoŞ
 
hasR—lD©a
 = 
FALSE
;

463 cÚ¡ *
deçuÉLoc
 = 
	`uloc_g‘DeçuÉ
();

464 *
hasChİ³d
 = 
TRUE
;

466 *
hasChİ³d
 && !
hasR—lD©a
) {

467 
r
 = 
	`š™_’Œy
(
Çme
, 
·th
, 
¡©us
);

469 ià(
	`U_FAILURE
(*
¡©us
)) {

470  
NULL
;

472 *
isDeçuÉ
 = (
UBoŞ
)(
	`u´v_¡ºcmp
(
Çme
, 
deçuÉLoc
, 
	`u´v_¡¾’
(name)) == 0);

473 
hasR—lD©a
 = (
UBoŞ
)(
r
->
fBogus
 =ğ
U_ZERO_ERROR
);

474 if(!
hasR—lD©a
) {

480 
r
->
fCouÁExi¡šg
--;

482 
r
 = 
NULL
;

483 *
¡©us
 = 
U_USING_FALLBACK_WARNING
;

485 
	`u´v_¡rıy
(
Çme
, 
r
->
fName
);

488 *
isRoÙ
 = (
UBoŞ
)(
	`u´v_¡rcmp
(
Çme
, 
kRoÙLoÿËName
) == 0);

491 *
hasChİ³d
 = 
	`chİLoÿË
(
Çme
);

493  
r
;

494 
	}
}

496 
	$u»s_£tIsSckObjeù
Ğ
UResourûBundË
* 
»sB
, 
UBoŞ
 
¡©e
) {

497 if(
¡©e
) {

498 
»sB
->
fMagic1
 = 0;

499 
»sB
->
fMagic2
 = 0;

501 
»sB
->
fMagic1
 = 
MAGIC1
;

502 
»sB
->
fMagic2
 = 
MAGIC2
;

504 
	}
}

506 
UBoŞ
 
	$u»s_isSckObjeù
(cÚ¡ 
UResourûBundË
* 
»sB
) {

507 ((
»sB
->
fMagic1
 =ğ
MAGIC1
 &&„esB->
fMagic2
 =ğ
MAGIC2
)?
FALSE
:
TRUE
);

508 
	}
}

511 
U_CFUNC
 
	$u»s_š™SckObjeù
(
UResourûBundË
* 
»sB
) {

512 
	`u´v_mem£t
(
»sB
, 0, (
UResourûBundË
));

513 
	`u»s_£tIsSckObjeù
(
»sB
, 
TRUE
);

514 
	}
}

516 
UResourûD©aEÁry
 *
	$’ŒyO³n
(cÚ¡ * 
·th
, cÚ¡ * 
loÿËID
, 
UE¼ÜCode
* 
¡©us
) {

517 
UE¼ÜCode
 
štStus
 = 
U_ZERO_ERROR
;

518 
UE¼ÜCode
 
·»ÁStus
 = 
U_ZERO_ERROR
;

519 
UE¼ÜCode
 
u¤Stus
 = 
U_ZERO_ERROR
;

520 
UResourûD©aEÁry
 *
r
 = 
NULL
;

521 
UResourûD©aEÁry
 *
t1
 = 
NULL
;

522 
UResourûD©aEÁry
 *
t2
 = 
NULL
;

523 
UResourûD©aEÁry
 *
u1
 = 
NULL
;

524 
UResourûD©aEÁry
 *
u2
 = 
NULL
;

525 
UBoŞ
 
isDeçuÉ
 = 
FALSE
;

526 
UBoŞ
 
isRoÙ
 = 
FALSE
;

527 
UBoŞ
 
hasR—lD©a
 = 
FALSE
;

528 
UBoŞ
 
hasChİ³d
 = 
TRUE
;

529 
UBoŞ
 
usšgUSRD©a
 = 
U_USE_USRDATA
 && ( 
·th
 =ğ
NULL
 || 
	`u´v_¡ºcmp
Õ©h,
U_ICUDATA_NAME
,8) == 0);

531 
Çme
[96];

532 
u¤D©aP©h
[96];

534 
	`š™Cache
(
¡©us
);

536 if(
	`U_FAILURE
(*
¡©us
)) {

537  
NULL
;

540 
	`u´v_¡rıy
(
Çme
, 
loÿËID
);

542 iàĞ
usšgUSRD©a
 ) {

543 iàĞ
·th
 =ğ
NULL
 ) {

544 
	`u´v_¡rıy
(
u¤D©aP©h
,
U_USRDATA_NAME
);

546 
	`u´v_¡rıy
(
u¤D©aP©h
,
·th
);

547 
u¤D©aP©h
[0] = 'u';

548 
u¤D©aP©h
[1] = 's';

549 
u¤D©aP©h
[2] = 'r';

553 
	`umtx_lock
(&
»sbMu‹x
);

556 
r
 = 
	`fšdFœ¡Exi¡šg
(
·th
, 
Çme
, &
isRoÙ
, &
hasChİ³d
, &
isDeçuÉ
, &
štStus
);

558 if(
r
 !ğ
NULL
) {

559 
t1
 = 
r
;

560 
hasR—lD©a
 = 
TRUE
;

561 iàĞ
usšgUSRD©a
 ) {

562 
u1
 = 
	`š™_’Œy
(
t1
->
fName
, 
u¤D©aP©h
, &
u¤Stus
);

563 iàĞ
u1
 !ğ
NULL
 ) {

564 if(
u1
->
fBogus
 =ğ
U_ZERO_ERROR
) {

565 
u1
->
fP¬’t
 = 
t1
;

566 
r
 = 
u1
;

569 
u1
->
fCouÁExi¡šg
 = 0;

573 
hasChİ³d
 && !
isRoÙ
 && 
t1
->
fP¬’t
 =ğ
NULL
 && !t1->
fD©a
.
noF®lback
) {

575 
t2
 = 
	`š™_’Œy
(
Çme
, 
t1
->
fP©h
, &
·»ÁStus
);

576 iàĞ
usšgUSRD©a
 ) {

577 
u¤Stus
 = 
U_ZERO_ERROR
;

578 
u2
 = 
	`š™_’Œy
(
Çme
, 
u¤D©aP©h
, &
u¤Stus
);

581 ià(
t2
 =ğ
NULL
 || ( 
usšgUSRD©a
 && 
u2
 == NULL)) {

582 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

583 
fšishUÆock
;

586 iàĞ
	`»s_g‘Resourû
(&
t1
->
fD©a
,"%%P¬’tIsRoÙ"è=ğ
RES_BOGUS
) {

587 iàĞ
usšgUSRD©a
 && 
u2
->
fBogus
 =ğ
U_ZERO_ERROR
 ) {

588 
t1
->
fP¬’t
 = 
u2
;

589 
u2
->
fP¬’t
 = 
t2
;

591 
t1
->
fP¬’t
 = 
t2
;

592 if(
usšgUSRD©a
) {

594 
u2
->
fCouÁExi¡šg
 = 0;

597 
t1
 = 
t2
;

599 ià(
usšgUSRD©a
) {

601 
u2
->
fCouÁExi¡šg
 = 0;

606 
t2
->
fCouÁExi¡šg
--;

608 
hasChİ³d
 = 
	`chİLoÿË
(
Çme
);

614 if(
r
==
NULL
 && !
isDeçuÉ
 && !
isRoÙ
 ) {

616 
	`u´v_¡rıy
(
Çme
, 
	`uloc_g‘DeçuÉ
());

617 
r
 = 
	`fšdFœ¡Exi¡šg
(
·th
, 
Çme
, &
isRoÙ
, &
hasChİ³d
, &
isDeçuÉ
, &
štStus
);

618 
štStus
 = 
U_USING_DEFAULT_WARNING
;

619 if(
r
 !ğ
NULL
) {

620 
t1
 = 
r
;

621 
hasR—lD©a
 = 
TRUE
;

622 
isDeçuÉ
 = 
TRUE
;

623 
hasChİ³d
 && 
t1
->
fP¬’t
 =ğ
NULL
) {

625 
t2
 = 
	`š™_’Œy
(
Çme
, 
t1
->
fP©h
, &
·»ÁStus
);

627 ià(
t2
 =ğ
NULL
) {

628 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

629 
fšishUÆock
;

632 iàĞ
	`»s_g‘Resourû
(&
t1
->
fD©a
,"%%P¬’tIsRoÙ"è=ğ
RES_BOGUS
) {

633 
t1
->
fP¬’t
 = 
t2
;

634 
t1
 = 
t2
;

636 
hasChİ³d
 = 
	`chİLoÿË
(
Çme
);

643 if(
r
 =ğ
NULL
) {

644 
	`u´v_¡rıy
(
Çme
, 
kRoÙLoÿËName
);

645 
r
 = 
	`fšdFœ¡Exi¡šg
(
·th
, 
Çme
, &
isRoÙ
, &
hasChİ³d
, &
isDeçuÉ
, &
štStus
);

646 if(
r
 !ğ
NULL
) {

647 
t1
 = 
r
;

648 
štStus
 = 
U_USING_DEFAULT_WARNING
;

649 
hasR—lD©a
 = 
TRUE
;

651 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

652 
fšishUÆock
;

654 } if(!
isRoÙ
 && 
	`u´v_¡rcmp
(
t1
->
fName
, 
kRoÙLoÿËName
è!ğ0 &&1->
fP¬’t
 =ğ
NULL
 && !
r
->
fD©a
.
noF®lback
) {

656 
t2
 = 
	`š™_’Œy
(
kRoÙLoÿËName
, 
t1
->
fP©h
, &
·»ÁStus
);

658 ià(
t2
 =ğ
NULL
) {

659 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

660 
fšishUÆock
;

662 if(!
hasR—lD©a
) {

663 
r
->
fBogus
 = 
U_USING_DEFAULT_WARNING
;

665 
hasR—lD©a
 = (
UBoŞ
)((
t2
->
fBogus
 =ğ
U_ZERO_ERROR
) || hasRealData);

666 
t1
->
fP¬’t
 = 
t2
;

667 
t1
 = 
t2
;

670 
r
 !ğ
NULL
 && !
isRoÙ
 && 
t1
->
fP¬’t
 != NULL) {

671 
t1
->
fP¬’t
->
fCouÁExi¡šg
++;

672 
t1
 =1->
fP¬’t
;

673 
hasR—lD©a
 = (
UBoŞ
)((
t1
->
fBogus
 =ğ
U_ZERO_ERROR
) || hasRealData);

676 
fšishUÆock
:

677 
	`umtx_uÆock
(&
»sbMu‹x
);

679 if(
	`U_SUCCESS
(*
¡©us
)) {

680 if(
	`U_SUCCESS
(
·»ÁStus
)) {

681 if(
štStus
 !ğ
U_ZERO_ERROR
) {

682 *
¡©us
 = 
štStus
;

684  
r
;

686 *
¡©us
 = 
·»ÁStus
;

687  
NULL
;

690  
NULL
;

692 
	}
}

700 
	$’ŒyClo£IÁ
(
UResourûD©aEÁry
 *
»sB
) {

701 
UResourûD©aEÁry
 *
p
 = 
»sB
;

703 
»sB
 !ğ
NULL
) {

704 
p
 = 
»sB
->
fP¬’t
;

705 
»sB
->
fCouÁExi¡šg
--;

725 
»sB
 = 
p
;

727 
	}
}

733 
	$’ŒyClo£
(
UResourûD©aEÁry
 *
»sB
) {

734 
	`umtx_lock
(&
»sbMu‹x
);

735 
	`’ŒyClo£IÁ
(
»sB
);

736 
	`umtx_uÆock
(&
»sbMu‹x
);

737 
	}
}

756 
	$u»s_­³ndResP©h
(
UResourûBundË
 *
»sB
, cÚ¡ * 
toAdd
, 
št32_t
 
ËnToAdd
, 
UE¼ÜCode
 *
¡©us
) {

757 
št32_t
 
»sP©hL’Orig
 = 
»sB
->
fResP©hL’
;

758 if(
»sB
->
fResP©h
 =ğ
NULL
) {

759 
»sB
->
fResP©h
 =„esB->
fResBuf
;

760 *(
»sB
->
fResP©h
) = 0;

761 
»sB
->
fResP©hL’
 = 0;

763 
»sB
->
fResP©hL’
 +ğ
ËnToAdd
;

764 if(
RES_BUFSIZE
 <ğ
»sB
->
fResP©hL’
+1) {

765 if(
»sB
->
fResP©h
 =ğ»sB->
fResBuf
) {

766 
»sB
->
fResP©h
 = (*)
	`u´v_m®loc
(ÔesB->
fResP©hL’
+1)*());

768 ià(
»sB
->
fResP©h
 =ğ
NULL
) {

769 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

772 
	`u´v_¡rıy
(
»sB
->
fResP©h
,„esB->
fResBuf
);

774 *
‹mp
 = (*)
	`u´v_»®loc
(
»sB
->
fResP©h
, (»sB->
fResP©hL’
+1)*());

776 ià(
‹mp
 =ğ
NULL
) {

777 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

780 
»sB
->
fResP©h
 = 
‹mp
;

783 
	`u´v_¡rıy
(
»sB
->
fResP©h
 + 
»sP©hL’Orig
, 
toAdd
);

784 
	}
}

786 
	$u»s_ä“ResP©h
(
UResourûBundË
 *
»sB
) {

787 ià(
»sB
->
fResP©h
 &&„esB->fResP©h !ğ»sB->
fResBuf
) {

788 
	`u´v_ä“
(
»sB
->
fResP©h
);

790 
»sB
->
fResP©h
 = 
NULL
;

791 
»sB
->
fResP©hL’
 = 0;

792 
	}
}

795 
	$u»s_şo£BundË
(
UResourûBundË
* 
»sB
, 
UBoŞ
 
ä“BundËObj
)

797 if(
»sB
 !ğ
NULL
) {

798 if(
»sB
->
fD©a
 !ğ
NULL
) {

799 
	`’ŒyClo£
(
»sB
->
fD©a
);

801 if(
»sB
->
fV”siÚ
 !ğ
NULL
) {

802 
	`u´v_ä“
(
»sB
->
fV”siÚ
);

804 
	`u»s_ä“ResP©h
(
»sB
);

806 if(
	`u»s_isSckObjeù
(
»sB
è=ğ
FALSE
 && 
ä“BundËObj
) {

807 
	`u´v_ä“
(
»sB
);

812 
	`u´v_mem£t
(
»sB
, -1, (
UResourûBundË
));

816 
	}
}

818 
U_CAPI
 
U_EXPORT2


819 
	$u»s_şo£
(
UResourûBundË
* 
»sB
)

821 
	`u»s_şo£BundË
(
»sB
, 
TRUE
);

822 
	}
}

824 
UResourûBundË
 *
	$š™_»sb_»suÉ
(cÚ¡ 
ResourûD©a
 *
rd©a
, 
Resourû
 
r
,

825 cÚ¡ *
key
, 
št32_t
 
idx
, 
UResourûD©aEÁry
 *
»®D©a
,

826 cÚ¡ 
UResourûBundË
 *
·»Á
, 
št32_t
 
noAlŸs
,

827 
UResourûBundË
 *
»sB
, 
UE¼ÜCode
 *
¡©us
)

829 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)) {

830  
»sB
;

832 ià(
·»Á
 =ğ
NULL
) {

833 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

834  
NULL
;

836 if(
	`RES_GET_TYPE
(
r
è=ğ
URES_ALIAS
) {

837 if(
noAlŸs
 < 
URES_MAX_ALIAS_LEVEL
) {

838 
št32_t
 
Ën
 = 0;

839 cÚ¡ 
UCh¬
 *
®Ÿs
 = 
	`»s_g‘AlŸs
(
rd©a
, 
r
, &
Ën
);

840 if(
Ën
 > 0) {

842 
¡ackAlŸs
[200];

843 *
chAlŸs
 = 
NULL
, *
·th
 = NULL, *
loÿË
 = NULL, *
keyP©h
 = NULL;

844 
št32_t
 
ÿ·c™y
;

859 ++
Ën
;

860 if(
·»Á
->
fResP©h
 !ğ
NULL
) {

861 
ÿ·c™y
 = (
št32_t
)
	`u´v_¡¾’
(
·»Á
->
fResP©h
) + 1;

863 
ÿ·c™y
 = 0;

865 if(
ÿ·c™y
 < 
Ën
) {

866 
ÿ·c™y
 = 
Ën
;

868 if(
ÿ·c™y
 <ğ(
¡ackAlŸs
)) {

869 
ÿ·c™y
 = (
¡ackAlŸs
);

870 
chAlŸs
 = 
¡ackAlŸs
;

872 
chAlŸs
 = (*)
	`u´v_m®loc
(
ÿ·c™y
);

874 if(
chAlŸs
 =ğ
NULL
) {

875 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

876  
NULL
;

879 
	`u_UCh¬sToCh¬s
(
®Ÿs
, 
chAlŸs
, 
Ën
);

881 if(*
chAlŸs
 =ğ
RES_PATH_SEPARATOR
) {

883 
loÿË
 = 
	`u´v_¡rchr
(
chAlŸs
+1, 
RES_PATH_SEPARATOR
);

884 if(
loÿË
 =ğ
NULL
) {

885 
loÿË
 = 
	`u´v_¡rchr
(
chAlŸs
, 0);

887 *
loÿË
 = 0;

888 
loÿË
++;

890 
·th
 = 
chAlŸs
+1;

891 if(
	`u´v_¡rcmp
(
·th
, "LOCALE") == 0) {

895 
keyP©h
 = 
loÿË
;

896 
loÿË
 = 
·»Á
->
fTİLev–D©a
->
fName
;

897 
·th
 = 
»®D©a
->
fP©h
;

899 if(
	`u´v_¡rcmp
(
·th
, "ICUDATA") == 0) {

900 
·th
 = 
NULL
;

902 
keyP©h
 = 
	`u´v_¡rchr
(
loÿË
, 
RES_PATH_SEPARATOR
);

903 if(
keyP©h
) {

904 *
keyP©h
 = 0;

905 
keyP©h
++;

910 
loÿË
 = 
chAlŸs
;

911 
keyP©h
 = 
	`u´v_¡rchr
(
loÿË
, 
RES_PATH_SEPARATOR
);

912 if(
keyP©h
) {

913 *
keyP©h
 = 0;

914 
keyP©h
++;

916 
·th
 = 
»®D©a
->
fP©h
;

923 
UResourûBundË
 *
»suÉ
 = 
»sB
;

924 cÚ¡ * 
‹mp
 = 
NULL
;

925 
UE¼ÜCode
 
štStus
 = 
U_ZERO_ERROR
;

926 
UResourûBundË
 *
mašRes
 = 
	`u»s_İ’Dœeù
(
·th
, 
loÿË
, &
štStus
);

927 if(
	`U_SUCCESS
(
štStus
)) {

928 if(
keyP©h
 =ğ
NULL
) {

936 *
aKey
 = 
·»Á
->
fResP©h
;

937 if(
aKey
) {

938 
	`u´v_¡rıy
(
chAlŸs
, 
aKey
);

939 
aKey
 = 
chAlŸs
;

940 
r
 = 
	`»s_fšdResourû
(&(
mašRes
->
fResD©a
), mašRes->
fRes
, &
aKey
, &
‹mp
);

942 
r
 = 
mašRes
->
fRes
;

944 if(
key
) {

948 
Ën
 = (
št32_t
)(
	`u´v_¡¾’
(
key
) + 1);

949 if(
Ën
 > 
ÿ·c™y
) {

950 
ÿ·c™y
 = 
Ën
;

951 if(
chAlŸs
 =ğ
¡ackAlŸs
) {

952 
chAlŸs
 = (*)
	`u´v_m®loc
(
ÿ·c™y
);

954 
chAlŸs
 = (*)
	`u´v_»®loc
(chAlŸs, 
ÿ·c™y
);

956 if(
chAlŸs
 =ğ
NULL
) {

957 
	`u»s_şo£
(
mašRes
);

958 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

959  
NULL
;

962 
	`u´v_memıy
(
chAlŸs
, 
key
, 
Ën
);

963 
aKey
 = 
chAlŸs
;

964 
r
 = 
	`»s_fšdResourû
(&(
mašRes
->
fResD©a
),„, &
aKey
, &
‹mp
);

965 } if(
idx
 != -1) {

968 
UResTy³
 
ty³
 = 
	`RES_GET_TYPE
(
r
);

969 if(
	`URES_IS_TABLE
(
ty³
)) {

970 
r
 = 
	`»s_g‘TabËI‹mByIndex
(&(
mašRes
->
fResD©a
),„, 
idx
, (cÚ¡ **)&
aKey
);

972 
r
 = 
	`»s_g‘A¼ayI‹m
(&(
mašRes
->
fResD©a
),„, 
idx
);

975 if(
r
 !ğ
RES_BOGUS
) {

976 
»suÉ
 = 
	`š™_»sb_»suÉ
(&(
mašRes
->
fResD©a
), 
r
, 
‹mp
, -1, mašRes->
fD©a
, mašRes, 
noAlŸs
+1, 
»sB
, 
¡©us
);

978 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

979 
»suÉ
 = 
»sB
;

989 
UResourûD©aEÁry
 *
d©aEÁry
 = 
mašRes
->
fD©a
;

990 
¡ackP©h
[
URES_MAX_BUFFER_SIZE
];

991 *
·thBuf
 = 
¡ackP©h
, *
myP©h
 =…athBuf;

992 if(
	`u´v_¡¾’
(
keyP©h
è> 
URES_MAX_BUFFER_SIZE
) {

993 
·thBuf
 = (*)
	`u´v_m®loc
((
	`u´v_¡¾’
(
keyP©h
)+1)*());

994 if(
·thBuf
 =ğ
NULL
) {

995 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

996  
NULL
;

999 
	`u´v_¡rıy
(
·thBuf
, 
keyP©h
);

1000 
»suÉ
 = 
mašRes
;

1003 
r
 = 
d©aEÁry
->
fD©a
.
roÙRes
;

1005 *
myP©h
 && 
	`U_SUCCESS
(*
¡©us
)) {

1006 
r
 = 
	`»s_fšdResourû
(&(
d©aEÁry
->
fD©a
),„, &
myP©h
, &
‹mp
);

1007 if(
r
 !ğ
RES_BOGUS
) {

1008 
»sB
 = 
	`š™_»sb_»suÉ
(&(
d©aEÁry
->
fD©a
), 
r
, 
‹mp
, -1, d©aEÁry, 
»suÉ
, 
noAlŸs
+1,„esB, 
¡©us
);

1009 
»suÉ
 = 
»sB
;

1010 if(
»suÉ
) {

1011 
r
 = 
»suÉ
->
fRes
;

1012 
d©aEÁry
 = 
»suÉ
->
fD©a
;

1018 
d©aEÁry
 = d©aEÁry->
fP¬’t
;

1019 
	`u´v_¡rıy
(
·thBuf
, 
keyP©h
);

1020 
myP©h
 = 
·thBuf
;

1021 } 
r
 =ğ
RES_BOGUS
 && 
d©aEÁry
 !ğ
NULL
);

1022 if(
r
 =ğ
RES_BOGUS
) {

1023 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

1024 
»suÉ
 = 
»sB
;

1026 if(
·thBuf
 !ğ
¡ackP©h
) {

1027 
	`u´v_ä“
(
·thBuf
);

1031 *
¡©us
 = 
štStus
;

1033 if(
chAlŸs
 !ğ
¡ackAlŸs
) {

1034 
	`u´v_ä“
(
chAlŸs
);

1036 if(
mašRes
 !ğ
»suÉ
) {

1037 
	`u»s_şo£
(
mašRes
);

1039  
»suÉ
;

1043 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1044  
»sB
;

1047 *
¡©us
 = 
U_TOO_MANY_ALIASES_ERROR
;

1048  
»sB
;

1051 if(
»sB
 =ğ
NULL
) {

1052 
»sB
 = (
UResourûBundË
 *)
	`u´v_m®loc
((UResourceBundle));

1054 ià(
»sB
 =ğ
NULL
) {

1055 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1056  
NULL
;

1058 
	`u»s_£tIsSckObjeù
(
»sB
, 
FALSE
);

1059 
»sB
->
fResP©h
 = 
NULL
;

1060 
»sB
->
fResP©hL’
 = 0;

1062 if(
»sB
->
fD©a
 !ğ
NULL
) {

1063 
	`’ŒyClo£
(
»sB
->
fD©a
);

1065 if(
»sB
->
fV”siÚ
 !ğ
NULL
) {

1066 
	`u´v_ä“
(
»sB
->
fV”siÚ
);

1079 if(
·»Á
 !ğ
»sB
) {

1080 
	`u»s_ä“ResP©h
(
»sB
);

1083 
»sB
->
fD©a
 = 
»®D©a
;

1084 
	`’ŒyInü—£
(
»sB
->
fD©a
);

1085 
»sB
->
fHasF®lback
 = 
FALSE
;

1086 
»sB
->
fIsTİLev–
 = 
FALSE
;

1087 
»sB
->
fIndex
 = -1;

1088 
»sB
->
fKey
 = 
key
;

1090 
»sB
->
fTİLev–D©a
 = 
·»Á
->fTopLevelData;

1091 if(
·»Á
->
fResP©h
 &&…¬’ˆ!ğ
»sB
) {

1092 
	`u»s_­³ndResP©h
(
»sB
, 
·»Á
->
fResP©h
,…¬’t->
fResP©hL’
, 
¡©us
);

1094 if(
key
 !ğ
NULL
) {

1095 
	`u»s_­³ndResP©h
(
»sB
, 
key
, (
št32_t
)
	`u´v_¡¾’
(key), 
¡©us
);

1096 if(
»sB
->
fResP©h
[»sB->
fResP©hL’
-1] !ğ
RES_PATH_SEPARATOR
) {

1097 
	`u»s_­³ndResP©h
(
»sB
, 
RES_PATH_SEPARATOR_S
, 1, 
¡©us
);

1099 } if(
idx
 >= 0) {

1100 
buf
[256];

1101 
št32_t
 
Ën
 = 
	`T_CSŒšg_š‹g”ToSŒšg
(
buf
, 
idx
, 10);

1102 
	`u»s_­³ndResP©h
(
»sB
, 
buf
, 
Ën
, 
¡©us
);

1103 if(
»sB
->
fResP©h
[»sB->
fResP©hL’
-1] !ğ
RES_PATH_SEPARATOR
) {

1104 
	`u»s_­³ndResP©h
(
»sB
, 
RES_PATH_SEPARATOR_S
, 1, 
¡©us
);

1109 
št32_t
 
u£dL’
 = ((
»sB
->
fResBuf
 =ğ»sB->
fResP©h
è?„esB->
fResP©hL’
 : 0);

1110 
	`u´v_mem£t
(
»sB
->
fResBuf
 + 
u£dL’
, 0, (resB->fResBuf) - usedLen);

1113 
»sB
->
fV”siÚ
 = 
NULL
;

1114 
»sB
->
fRes
 = 
r
;

1116 
	`u´v_memmove
(&
»sB
->
fResD©a
, 
rd©a
, (
ResourûD©a
));

1117 
»sB
->
fSize
 = 
	`»s_couÁA¼ayI‹ms
(&ÔesB->
fResD©a
),„esB->
fRes
);

1118  
»sB
;

1119 
	}
}

1121 
UResourûBundË
 *
	$u»s_cİyResb
(
UResourûBundË
 *
r
, cÚ¡ UResourûBundË *
Üigš®
, 
UE¼ÜCode
 *
¡©us
) {

1122 
UBoŞ
 
isSckObjeù
;

1123 if(
	`U_FAILURE
(*
¡©us
è|| 
r
 =ğ
Üigš®
) {

1124  
r
;

1126 if(
Üigš®
 !ğ
NULL
) {

1127 if(
r
 =ğ
NULL
) {

1128 
isSckObjeù
 = 
FALSE
;

1129 
r
 = (
UResourûBundË
 *)
	`u´v_m®loc
((UResourceBundle));

1131 ià(
r
 =ğ
NULL
) {

1132 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1133  
NULL
;

1136 
isSckObjeù
 = 
	`u»s_isSckObjeù
(
r
);

1137 
	`u»s_şo£BundË
(
r
, 
FALSE
);

1139 
	`u´v_memıy
(
r
, 
Üigš®
, (
UResourûBundË
));

1140 
r
->
fResP©h
 = 
NULL
;

1141 
r
->
fResP©hL’
 = 0;

1142 if(
Üigš®
->
fResP©h
) {

1143 
	`u»s_­³ndResP©h
(
r
, 
Üigš®
->
fResP©h
, origš®->
fResP©hL’
, 
¡©us
);

1145 
	`u»s_£tIsSckObjeù
(
r
, 
isSckObjeù
);

1146 if(
r
->
fD©a
 !ğ
NULL
) {

1147 
	`’ŒyInü—£
(
r
->
fD©a
);

1150  
r
;

1151 
	}
}

1157 
U_CAPI
 cÚ¡ 
UCh¬
* 
U_EXPORT2
 
	$u»s_g‘SŒšg
(cÚ¡ 
UResourûBundË
* 
»sB
, 
št32_t
* 
Ën
, 
UE¼ÜCode
* 
¡©us
) {

1158 cÚ¡ 
UCh¬
 *
s
;

1159 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1160  
NULL
;

1162 if(
»sB
 =ğ
NULL
) {

1163 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1164  
NULL
;

1166 
s
 = 
	`»s_g‘SŒšg
(&(
»sB
->
fResD©a
),„esB->
fRes
, 
Ën
);

1167 ià(
s
 =ğ
NULL
) {

1168 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1170  
s
;

1171 
	}
}

1174 
	$u»s_toUTF8SŒšg
(cÚ¡ 
UCh¬
 *
s16
, 
št32_t
 
Ëngth16
,

1175 *
de¡
, 
št32_t
 *
pL’gth
,

1176 
UBoŞ
 
fÜûCİy
,

1177 
UE¼ÜCode
 *
¡©us
) {

1178 
št32_t
 
ÿ·c™y
;

1180 ià(
	`U_FAILURE
(*
¡©us
)) {

1181  
NULL
;

1183 ià(
pL’gth
 !ğ
NULL
) {

1184 
ÿ·c™y
 = *
pL’gth
;

1186 
ÿ·c™y
 = 0;

1188 ià(
ÿ·c™y
 < 0 || (ÿ·c™y > 0 && 
de¡
 =ğ
NULL
)) {

1189 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1190  
NULL
;

1193 ià(
Ëngth16
 == 0) {

1195 ià(
pL’gth
 !ğ
NULL
) {

1196 *
pL’gth
 = 0;

1198 ià(
fÜûCİy
) {

1199 
	`u_‹rmš©eCh¬s
(
de¡
, 
ÿ·c™y
, 0, 
¡©us
);

1200  
de¡
;

1206 ià(
ÿ·c™y
 < 
Ëngth16
) {

1208  
	`u_¡rToUTF8
(
NULL
, 0, 
pL’gth
, 
s16
, 
Ëngth16
, 
¡©us
);

1210 ià(!
fÜûCİy
 && (
Ëngth16
 <= 0x2aaaaaaa)) {

1225 
št32_t
 
maxL’gth
 = 3 * 
Ëngth16
 + 1;

1226 ià(
ÿ·c™y
 > 
maxL’gth
) {

1227 
de¡
 +ğ
ÿ·c™y
 - 
maxL’gth
;

1228 
ÿ·c™y
 = 
maxL’gth
;

1231  
	`u_¡rToUTF8
(
de¡
, 
ÿ·c™y
, 
pL’gth
, 
s16
, 
Ëngth16
, 
¡©us
);

1233 
	}
}

1235 
U_CAPI
 cÚ¡ * 
U_EXPORT2


1236 
	$u»s_g‘UTF8SŒšg
(cÚ¡ 
UResourûBundË
 *
»sB
,

1237 *
de¡
, 
št32_t
 *
pL’gth
,

1238 
UBoŞ
 
fÜûCİy
,

1239 
UE¼ÜCode
 *
¡©us
) {

1240 
št32_t
 
Ëngth16
;

1241 cÚ¡ 
UCh¬
 *
s16
 = 
	`u»s_g‘SŒšg
(
»sB
, &
Ëngth16
, 
¡©us
);

1242  
	`u»s_toUTF8SŒšg
(
s16
, 
Ëngth16
, 
de¡
, 
pL’gth
, 
fÜûCİy
, 
¡©us
);

1243 
	}
}

1245 
U_CAPI
 cÚ¡ 
ušt8_t
* 
U_EXPORT2
 
	$u»s_g‘Bš¬y
(cÚ¡ 
UResourûBundË
* 
»sB
, 
št32_t
* 
Ën
,

1246 
UE¼ÜCode
* 
¡©us
) {

1247 cÚ¡ 
ušt8_t
 *
p
;

1248 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1249  
NULL
;

1251 if(
»sB
 =ğ
NULL
) {

1252 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1253  
NULL
;

1255 
p
 = 
	`»s_g‘Bš¬y
(&(
»sB
->
fResD©a
),„esB->
fRes
, 
Ën
);

1256 ià(
p
 =ğ
NULL
) {

1257 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1259  
p
;

1260 
	}
}

1262 
U_CAPI
 cÚ¡ 
št32_t
* 
U_EXPORT2
 
	$u»s_g‘IÁVeùÜ
(cÚ¡ 
UResourûBundË
* 
»sB
, 
št32_t
* 
Ën
,

1263 
UE¼ÜCode
* 
¡©us
) {

1264 cÚ¡ 
št32_t
 *
p
;

1265 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1266  
NULL
;

1268 if(
»sB
 =ğ
NULL
) {

1269 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1270  
NULL
;

1272 
p
 = 
	`»s_g‘IÁVeùÜ
(&(
»sB
->
fResD©a
),„esB->
fRes
, 
Ën
);

1273 ià(
p
 =ğ
NULL
) {

1274 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1276  
p
;

1277 
	}
}

1281 
U_CAPI
 
št32_t
 
U_EXPORT2
 
	$u»s_g‘IÁ
(cÚ¡ 
UResourûBundË
* 
»sB
, 
UE¼ÜCode
 *
¡©us
) {

1282 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1285 if(
»sB
 =ğ
NULL
) {

1286 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1289 if(
	`RES_GET_TYPE
(
»sB
->
fRes
è!ğ
URES_INT
) {

1290 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1293  
	`RES_GET_INT
(
»sB
->
fRes
);

1294 
	}
}

1296 
U_CAPI
 
ušt32_t
 
U_EXPORT2
 
	$u»s_g‘UIÁ
(cÚ¡ 
UResourûBundË
* 
»sB
, 
UE¼ÜCode
 *
¡©us
) {

1297 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1300 if(
»sB
 =ğ
NULL
) {

1301 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1304 if(
	`RES_GET_TYPE
(
»sB
->
fRes
è!ğ
URES_INT
) {

1305 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1308  
	`RES_GET_UINT
(
»sB
->
fRes
);

1309 
	}
}

1311 
U_CAPI
 
UResTy³
 
U_EXPORT2
 
	$u»s_g‘Ty³
(cÚ¡ 
UResourûBundË
 *
»sB
) {

1312 if(
»sB
 =ğ
NULL
) {

1313  
URES_NONE
;

1315  
	`»s_g‘PublicTy³
(
»sB
->
fRes
);

1316 
	}
}

1318 
U_CAPI
 cÚ¡ * 
U_EXPORT2
 
	$u»s_g‘Key
(cÚ¡ 
UResourûBundË
 *
»sB
) {

1319 if(
»sB
 =ğ
NULL
) {

1320  
NULL
;

1323 (
»sB
->
fKey
);

1324 
	}
}

1326 
U_CAPI
 
št32_t
 
U_EXPORT2
 
	$u»s_g‘Size
(cÚ¡ 
UResourûBundË
 *
»sB
) {

1327 if(
»sB
 =ğ
NULL
) {

1331  
»sB
->
fSize
;

1332 
	}
}

1334 cÚ¡ 
UCh¬
* 
	$u»s_g‘SŒšgW™hAlŸs
(cÚ¡ 
UResourûBundË
 *
»sB
, 
Resourû
 
r
, 
št32_t
 
sIndex
, iÁ32_ˆ*
Ën
, 
UE¼ÜCode
 *
¡©us
) {

1335 if(
	`RES_GET_TYPE
(
r
è=ğ
URES_ALIAS
) {

1336 cÚ¡ 
UCh¬
* 
»suÉ
 = 0;

1337 
UResourûBundË
 *
‹mpRes
 = 
	`u»s_g‘ByIndex
(
»sB
, 
sIndex
, 
NULL
, 
¡©us
);

1338 
»suÉ
 = 
	`u»s_g‘SŒšg
(
‹mpRes
, 
Ën
, 
¡©us
);

1339 
	`u»s_şo£
(
‹mpRes
);

1340  
»suÉ
;

1342  
	`»s_g‘SŒšg
(&(
»sB
->
fResD©a
), 
r
, 
Ën
);

1344 
	}
}

1346 
U_CAPI
 
U_EXPORT2
 
	$u»s_»£tI‹¿tÜ
(
UResourûBundË
 *
»sB
){

1347 if(
»sB
 =ğ
NULL
) {

1350 
»sB
->
fIndex
 = -1;

1351 
	}
}

1353 
U_CAPI
 
UBoŞ
 
U_EXPORT2
 
	$u»s_hasNext
(cÚ¡ 
UResourûBundË
 *
»sB
) {

1354 if(
»sB
 =ğ
NULL
) {

1355  
FALSE
;

1357  (
UBoŞ
)(
»sB
->
fIndex
 <„esB->
fSize
-1);

1358 
	}
}

1360 
U_CAPI
 cÚ¡ 
UCh¬
* 
U_EXPORT2
 
	$u»s_g‘NextSŒšg
(
UResourûBundË
 *
»sB
, 
št32_t
* 
Ën
, cÚ¡ ** 
key
, 
UE¼ÜCode
 *
¡©us
) {

1361 
Resourû
 
r
 = 
RES_BOGUS
;

1363 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1364  
NULL
;

1366 if(
»sB
 =ğ
NULL
) {

1367 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1368  
NULL
;

1371 if(
»sB
->
fIndex
 =ğ»sB->
fSize
-1) {

1372 *
¡©us
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

1374 
»sB
->
fIndex
++;

1375 
	`RES_GET_TYPE
(
»sB
->
fRes
)) {

1376 
URES_STRING
:

1377 
URES_STRING_V2
:

1378  
	`»s_g‘SŒšg
(&(
»sB
->
fResD©a
),„esB->
fRes
, 
Ën
);

1379 
URES_TABLE
:

1380 
URES_TABLE16
:

1381 
URES_TABLE32
:

1382 
r
 = 
	`»s_g‘TabËI‹mByIndex
(&(
»sB
->
fResD©a
),„esB->
fRes
,„esB->
fIndex
, 
key
);

1383 if(
r
 =ğ
RES_BOGUS
 && 
»sB
->
fHasF®lback
) {

1386  
	`u»s_g‘SŒšgW™hAlŸs
(
»sB
, 
r
,„esB->
fIndex
, 
Ën
, 
¡©us
);

1387 
URES_ARRAY
:

1388 
URES_ARRAY16
:

1389 
r
 = 
	`»s_g‘A¼ayI‹m
(&(
»sB
->
fResD©a
),„esB->
fRes
,„esB->
fIndex
);

1390 if(
r
 =ğ
RES_BOGUS
 && 
»sB
->
fHasF®lback
) {

1393  
	`u»s_g‘SŒšgW™hAlŸs
(
»sB
, 
r
,„esB->
fIndex
, 
Ën
, 
¡©us
);

1394 
URES_ALIAS
:

1395  
	`u»s_g‘SŒšgW™hAlŸs
(
»sB
,„esB->
fRes
,„esB->
fIndex
, 
Ën
, 
¡©us
);

1396 
URES_INT
:

1397 
URES_BINARY
:

1398 
URES_INT_VECTOR
:

1399 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1401  
NULL
;

1405  
NULL
;

1406 
	}
}

1408 
U_CAPI
 
UResourûBundË
* 
U_EXPORT2
 
	$u»s_g‘NextResourû
(
UResourûBundË
 *
»sB
, UResourûBundË *
flIn
, 
UE¼ÜCode
 *
¡©us
) {

1409 cÚ¡ *
key
 = 
NULL
;

1410 
Resourû
 
r
 = 
RES_BOGUS
;

1412 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1414  
flIn
;

1416 if(
»sB
 =ğ
NULL
) {

1417 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1419  
flIn
;

1422 if(
»sB
->
fIndex
 =ğ»sB->
fSize
-1) {

1423 *
¡©us
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

1426 
»sB
->
fIndex
++;

1427 
	`RES_GET_TYPE
(
»sB
->
fRes
)) {

1428 
URES_INT
:

1429 
URES_BINARY
:

1430 
URES_STRING
:

1431 
URES_STRING_V2
:

1432 
URES_INT_VECTOR
:

1433  
	`u»s_cİyResb
(
flIn
, 
»sB
, 
¡©us
);

1434 
URES_TABLE
:

1435 
URES_TABLE16
:

1436 
URES_TABLE32
:

1437 
r
 = 
	`»s_g‘TabËI‹mByIndex
(&(
»sB
->
fResD©a
),„esB->
fRes
,„esB->
fIndex
, &
key
);

1438 if(
r
 =ğ
RES_BOGUS
 && 
»sB
->
fHasF®lback
) {

1441  
	`š™_»sb_»suÉ
(&(
»sB
->
fResD©a
), 
r
, 
key
,„esB->
fIndex
,„esB->
fD©a
,„esB, 0, 
flIn
, 
¡©us
);

1442 
URES_ARRAY
:

1443 
URES_ARRAY16
:

1444 
r
 = 
	`»s_g‘A¼ayI‹m
(&(
»sB
->
fResD©a
),„esB->
fRes
,„esB->
fIndex
);

1445 if(
r
 =ğ
RES_BOGUS
 && 
»sB
->
fHasF®lback
) {

1448  
	`š™_»sb_»suÉ
(&(
»sB
->
fResD©a
), 
r
, 
key
,„esB->
fIndex
,„esB->
fD©a
,„esB, 0, 
flIn
, 
¡©us
);

1451  
flIn
;

1455  
flIn
;

1456 
	}
}

1458 
U_CAPI
 
UResourûBundË
* 
U_EXPORT2
 
	$u»s_g‘ByIndex
(cÚ¡ 
UResourûBundË
 *
»sB
, 
št32_t
 
šdexR
, UResourûBundË *
flIn
, 
UE¼ÜCode
 *
¡©us
) {

1459 cÚ¡ * 
key
 = 
NULL
;

1460 
Resourû
 
r
 = 
RES_BOGUS
;

1462 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1464  
flIn
;

1466 if(
»sB
 =ğ
NULL
) {

1467 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1469  
flIn
;

1472 if(
šdexR
 >ğ0 && 
»sB
->
fSize
 > indexR) {

1473 
	`RES_GET_TYPE
(
»sB
->
fRes
)) {

1474 
URES_INT
:

1475 
URES_BINARY
:

1476 
URES_STRING
:

1477 
URES_STRING_V2
:

1478 
URES_INT_VECTOR
:

1479  
	`u»s_cİyResb
(
flIn
, 
»sB
, 
¡©us
);

1480 
URES_TABLE
:

1481 
URES_TABLE16
:

1482 
URES_TABLE32
:

1483 
r
 = 
	`»s_g‘TabËI‹mByIndex
(&(
»sB
->
fResD©a
),„esB->
fRes
, 
šdexR
, &
key
);

1484 if(
r
 =ğ
RES_BOGUS
 && 
»sB
->
fHasF®lback
) {

1487  
	`š™_»sb_»suÉ
(&(
»sB
->
fResD©a
), 
r
, 
key
, 
šdexR
,„esB->
fD©a
,„esB, 0, 
flIn
, 
¡©us
);

1488 
URES_ARRAY
:

1489 
URES_ARRAY16
:

1490 
r
 = 
	`»s_g‘A¼ayI‹m
(&(
»sB
->
fResD©a
),„esB->
fRes
, 
šdexR
);

1491 if(
r
 =ğ
RES_BOGUS
 && 
»sB
->
fHasF®lback
) {

1494  
	`š™_»sb_»suÉ
(&(
»sB
->
fResD©a
), 
r
, 
key
, 
šdexR
,„esB->
fD©a
,„esB, 0, 
flIn
, 
¡©us
);

1497  
flIn
;

1500 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

1503  
flIn
;

1504 
	}
}

1506 
U_CAPI
 cÚ¡ 
UCh¬
* 
U_EXPORT2
 
	$u»s_g‘SŒšgByIndex
(cÚ¡ 
UResourûBundË
 *
»sB
, 
št32_t
 
šdexS
, iÁ32_t* 
Ën
, 
UE¼ÜCode
 *
¡©us
) {

1507 cÚ¡ * 
key
 = 
NULL
;

1508 
Resourû
 
r
 = 
RES_BOGUS
;

1510 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1511  
NULL
;

1513 if(
»sB
 =ğ
NULL
) {

1514 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1515  
NULL
;

1518 if(
šdexS
 >ğ0 && 
»sB
->
fSize
 > indexS) {

1519 
	`RES_GET_TYPE
(
»sB
->
fRes
)) {

1520 
URES_STRING
:

1521 
URES_STRING_V2
:

1522  
	`»s_g‘SŒšg
(&(
»sB
->
fResD©a
),„esB->
fRes
, 
Ën
);

1523 
URES_TABLE
:

1524 
URES_TABLE16
:

1525 
URES_TABLE32
:

1526 
r
 = 
	`»s_g‘TabËI‹mByIndex
(&(
»sB
->
fResD©a
),„esB->
fRes
, 
šdexS
, &
key
);

1527 if(
r
 =ğ
RES_BOGUS
 && 
»sB
->
fHasF®lback
) {

1530  
	`u»s_g‘SŒšgW™hAlŸs
(
»sB
, 
r
, 
šdexS
, 
Ën
, 
¡©us
);

1531 
URES_ARRAY
:

1532 
URES_ARRAY16
:

1533 
r
 = 
	`»s_g‘A¼ayI‹m
(&(
»sB
->
fResD©a
),„esB->
fRes
, 
šdexS
);

1534 if(
r
 =ğ
RES_BOGUS
 && 
»sB
->
fHasF®lback
) {

1537  
	`u»s_g‘SŒšgW™hAlŸs
(
»sB
, 
r
, 
šdexS
, 
Ën
, 
¡©us
);

1538 
URES_ALIAS
:

1539  
	`u»s_g‘SŒšgW™hAlŸs
(
»sB
,„esB->
fRes
, 
šdexS
, 
Ën
, 
¡©us
);

1540 
URES_INT
:

1541 
URES_BINARY
:

1542 
URES_INT_VECTOR
:

1543 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1547 *
¡©us
 = 
U_INTERNAL_PROGRAM_ERROR
;

1551 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

1553  
NULL
;

1554 
	}
}

1556 
U_CAPI
 cÚ¡ * 
U_EXPORT2


1557 
	$u»s_g‘UTF8SŒšgByIndex
(cÚ¡ 
UResourûBundË
 *
»sB
,

1558 
št32_t
 
idx
,

1559 *
de¡
, 
št32_t
 *
pL’gth
,

1560 
UBoŞ
 
fÜûCİy
,

1561 
UE¼ÜCode
 *
¡©us
) {

1562 
št32_t
 
Ëngth16
;

1563 cÚ¡ 
UCh¬
 *
s16
 = 
	`u»s_g‘SŒšgByIndex
(
»sB
, 
idx
, &
Ëngth16
, 
¡©us
);

1564  
	`u»s_toUTF8SŒšg
(
s16
, 
Ëngth16
, 
de¡
, 
pL’gth
, 
fÜûCİy
, 
¡©us
);

1565 
	}
}

1571 
U_CAPI
 
UResourûBundË
* 
U_EXPORT2


1572 
	$u»s_fšdResourû
(cÚ¡ * 
·th
, 
UResourûBundË
 *
flIn
, 
UE¼ÜCode
 *
¡©us
)

1574 
UResourûBundË
 *
fœ¡
 = 
NULL
;

1575 
UResourûBundË
 *
»suÉ
 = 
flIn
;

1576 *
·ckageName
 = 
NULL
;

1577 *
·thToResourû
 = 
NULL
, *
§ve
 = NULL;

1578 *
loÿË
 = 
NULL
, *
loÿËEnd
 = NULL;

1579 
št32_t
 
Ëngth
;

1581 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)) {

1582  
»suÉ
;

1585 
Ëngth
 = (
št32_t
)(
	`u´v_¡¾’
(
·th
)+1);

1586 
§ve
 = 
·thToResourû
 = (*)
	`u´v_m®loc
(
Ëngth
*());

1588 if(
·thToResourû
 =ğ
NULL
) {

1589 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1590  
»suÉ
;

1592 
	`u´v_memıy
(
·thToResourû
, 
·th
, 
Ëngth
);

1594 
loÿË
 = 
·thToResourû
;

1595 if(*
·thToResourû
 =ğ
RES_PATH_SEPARATOR
) {

1596 
·thToResourû
++;

1597 
·ckageName
 = 
·thToResourû
;

1598 
·thToResourû
 = 
	`u´v_¡rchr
Õ©hToResourû, 
RES_PATH_SEPARATOR
);

1599 if(
·thToResourû
 =ğ
NULL
) {

1600 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1602 *
·thToResourû
 = 0;

1603 
loÿË
 = 
·thToResourû
+1;

1607 
loÿËEnd
 = 
	`u´v_¡rchr
(
loÿË
, 
RES_PATH_SEPARATOR
);

1608 if(
loÿËEnd
 !ğ
NULL
) {

1609 *
loÿËEnd
 = 0;

1612 
fœ¡
 = 
	`u»s_İ’
(
·ckageName
, 
loÿË
, 
¡©us
);

1614 if(
	`U_SUCCESS
(*
¡©us
)) {

1615 if(
loÿËEnd
) {

1616 
»suÉ
 = 
	`u»s_fšdSubResourû
(
fœ¡
, 
loÿËEnd
+1, 
flIn
, 
¡©us
);

1618 
»suÉ
 = 
	`u»s_cİyResb
(
flIn
, 
fœ¡
, 
¡©us
);

1620 
	`u»s_şo£
(
fœ¡
);

1622 
	`u´v_ä“
(
§ve
);

1623  
»suÉ
;

1624 
	}
}

1626 
U_CAPI
 
UResourûBundË
* 
U_EXPORT2


1627 
	$u»s_fšdSubResourû
(cÚ¡ 
UResourûBundË
 *
»sB
, * 
·th
, UResourûBundË *
flIn
, 
UE¼ÜCode
 *
¡©us
)

1629 
Resourû
 
»s
 = 
RES_BOGUS
;

1630 
UResourûBundË
 *
»suÉ
 = 
flIn
;

1631 cÚ¡ *
key
;

1633 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)) {

1634  
»suÉ
;

1641 
»s
 = 
	`»s_fšdResourû
(&(
»sB
->
fResD©a
),„esB->
fRes
, &
·th
, &
key
);

1642 if(
»s
 !ğ
RES_BOGUS
) {

1643 
»suÉ
 = 
	`š™_»sb_»suÉ
(&(
»sB
->
fResD©a
), 
»s
, 
key
, -1,„esB->
fD©a
,„esB, 0, 
flIn
, 
¡©us
);

1644 
»sB
 = 
»suÉ
;

1646 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

1649 } *
·th
);

1651  
»suÉ
;

1652 
	}
}

1653 
U_INTERNAL
 cÚ¡ 
UCh¬
* 
U_EXPORT2


1654 
	$u»s_g‘SŒšgByKeyW™hF®lback
(cÚ¡ 
UResourûBundË
 *
»sB
,

1655 cÚ¡ * 
šKey
,

1656 
št32_t
* 
Ën
,

1657 
UE¼ÜCode
 *
¡©us
) {

1659 
UResourûBundË
 
¡ack
;

1660 cÚ¡ 
UCh¬
* 
»tV®
 = 
NULL
;

1661 
	`u»s_š™SckObjeù
(&
¡ack
);

1662 
	`u»s_g‘ByKeyW™hF®lback
(
»sB
, 
šKey
, &
¡ack
, 
¡©us
);

1663 
»tV®
 = 
	`u»s_g‘SŒšg
(&
¡ack
, 
Ën
, 
¡©us
);

1664 
	`u»s_şo£
(&
¡ack
);

1665  
»tV®
;

1666 
	}
}

1668 
U_CAPI
 
UResourûBundË
* 
U_EXPORT2


1669 
	$u»s_g‘ByKeyW™hF®lback
(cÚ¡ 
UResourûBundË
 *
»sB
,

1670 cÚ¡ * 
šKey
,

1671 
UResourûBundË
 *
flIn
,

1672 
UE¼ÜCode
 *
¡©us
) {

1673 
Resourû
 
»s
 = 
RES_BOGUS
, 
roÙRes
 = RES_BOGUS;

1675 cÚ¡ *
key
 = 
šKey
;

1676 
UResourûBundË
 *
h–³r
 = 
NULL
;

1677 
UResTy³
 
ty³
;

1679 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1680  
flIn
;

1682 if(
»sB
 =ğ
NULL
) {

1683 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1684  
flIn
;

1687 
ty³
 = 
	`RES_GET_TYPE
(
»sB
->
fRes
);

1688 if(
	`URES_IS_TABLE
(
ty³
)) {

1689 
št32_t
 
t
;

1690 
»s
 = 
	`»s_g‘TabËI‹mByKey
(&(
»sB
->
fResD©a
),„esB->
fRes
, &
t
, &
key
);

1691 if(
»s
 =ğ
RES_BOGUS
) {

1692 
UResourûD©aEÁry
 *
d©aEÁry
 = 
»sB
->
fD©a
;

1693 
·th
[256];

1694 * 
myP©h
 = 
·th
;

1695 cÚ¡ * 
»sP©h
 = 
»sB
->
fResP©h
;

1696 
št32_t
 
Ën
 = 
»sB
->
fResP©hL’
;

1698 
»s
 =ğ
RES_BOGUS
 && 
d©aEÁry
->
fP¬’t
 !ğ
NULL
) {

1699 
d©aEÁry
 = d©aEÁry->
fP¬’t
;

1700 
roÙRes
 = 
d©aEÁry
->
fD©a
.rootRes;

1702 if(
d©aEÁry
->
fBogus
 =ğ
U_ZERO_ERROR
) {

1703 
	`u´v_¡ºıy
(
·th
, 
»sP©h
, 
Ën
);

1704 
	`u´v_¡rıy
(
·th
+
Ën
, 
šKey
);

1705 
myP©h
 = 
·th
;

1706 
key
 = 
šKey
;

1708 
»s
 = 
	`»s_fšdResourû
(&(
d©aEÁry
->
fD©a
), 
roÙRes
, &
myP©h
, &
key
);

1709 ià(
	`RES_GET_TYPE
(
»s
è=ğ
URES_ALIAS
 && *
myP©h
) {

1711 
h–³r
 = 
	`š™_»sb_»suÉ
(&(
d©aEÁry
->
fD©a
), 
»s
, 
NULL
, -1, d©aEÁry, 
»sB
, 0, h–³r, 
¡©us
);

1713 if(
h–³r
) {

1714 
d©aEÁry
 = 
h–³r
->
fD©a
;

1715 
roÙRes
 = 
h–³r
->
fRes
;

1716 
»sP©h
 = 
h–³r
->
fResP©h
;

1717 
Ën
 = 
h–³r
->
fResP©hL’
;

1723 } *
myP©h
);

1727 if(
»s
 !ğ
RES_BOGUS
) {

1729 if(
	`u´v_¡rcmp
(
d©aEÁry
->
fName
, 
	`uloc_g‘DeçuÉ
())==0 || u´v_¡rcmp(d©aEÁry->fName, 
kRoÙLoÿËName
)==0) {

1730 *
¡©us
 = 
U_USING_DEFAULT_WARNING
;

1732 *
¡©us
 = 
U_USING_FALLBACK_WARNING
;

1735 
flIn
 = 
	`š™_»sb_»suÉ
(&(
d©aEÁry
->
fD©a
), 
»s
, 
šKey
, -1, d©aEÁry, 
»sB
, 0, flIn, 
¡©us
);

1737 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

1740 
flIn
 = 
	`š™_»sb_»suÉ
(&(
»sB
->
fResD©a
), 
»s
, 
key
, -1,„esB->
fD©a
,„esB, 0, flIn, 
¡©us
);

1744 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1746 
	`u»s_şo£
(
h–³r
);

1747  
flIn
;

1748 
	}
}

1751 
U_CAPI
 
UResourûBundË
* 
U_EXPORT2
 
	$u»s_g‘ByKey
(cÚ¡ 
UResourûBundË
 *
»sB
, cÚ¡ * 
šKey
, UResourûBundË *
flIn
, 
UE¼ÜCode
 *
¡©us
) {

1752 
Resourû
 
»s
 = 
RES_BOGUS
;

1753 
UResourûD©aEÁry
 *
»®D©a
 = 
NULL
;

1754 cÚ¡ *
key
 = 
šKey
;

1755 
UResTy³
 
ty³
;

1757 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1758  
flIn
;

1760 if(
»sB
 =ğ
NULL
) {

1761 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1762  
flIn
;

1765 
ty³
 = 
	`RES_GET_TYPE
(
»sB
->
fRes
);

1766 if(
	`URES_IS_TABLE
(
ty³
)) {

1767 
št32_t
 
t
;

1768 
»s
 = 
	`»s_g‘TabËI‹mByKey
(&(
»sB
->
fResD©a
),„esB->
fRes
, &
t
, &
key
);

1769 if(
»s
 =ğ
RES_BOGUS
) {

1770 
key
 = 
šKey
;

1771 if(
»sB
->
fHasF®lback
 =ğ
TRUE
) {

1772 cÚ¡ 
ResourûD©a
 *
rd
 = 
	`g‘F®lbackD©a
(
»sB
, &
key
, &
»®D©a
, &
»s
, 
¡©us
);

1773 if(
	`U_SUCCESS
(*
¡©us
)) {

1775  
	`š™_»sb_»suÉ
(
rd
, 
»s
, 
key
, -1, 
»®D©a
, 
»sB
, 0, 
flIn
, 
¡©us
);

1777 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

1780 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

1783  
	`š™_»sb_»suÉ
(&(
»sB
->
fResD©a
), 
»s
, 
key
, -1,„esB->
fD©a
,„esB, 0, 
flIn
, 
¡©us
);

1789 if(
	`RES_GET_TYPE
(
»sB
->
fRes
è=ğ
URES_ARRAY
 &&„esB->
fHasF®lback
 =ğ
TRUE
) {

1791 cÚ¡ 
ResourûD©a
 *
rd
 = 
	`g‘F®lbackD©a
(
»sB
, &
key
, &
»®D©a
, &
»s
, 
¡©us
);

1792 if(
	`U_SUCCESS
(*
¡©us
)) {

1793  
	`š™_»sb_»suÉ
(
rd
, 
»s
, 
key
, 
»®D©a
, 
»sB
, 
flIn
, 
¡©us
);

1795 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

1800 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1802  
flIn
;

1803 
	}
}

1805 
U_CAPI
 cÚ¡ 
UCh¬
* 
U_EXPORT2
 
	$u»s_g‘SŒšgByKey
(cÚ¡ 
UResourûBundË
 *
»sB
, cÚ¡ * 
šKey
, 
št32_t
* 
Ën
, 
UE¼ÜCode
 *
¡©us
) {

1806 
Resourû
 
»s
 = 
RES_BOGUS
;

1807 
UResourûD©aEÁry
 *
»®D©a
 = 
NULL
;

1808 cÚ¡ * 
key
 = 
šKey
;

1809 
UResTy³
 
ty³
;

1811 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1812  
NULL
;

1814 if(
»sB
 =ğ
NULL
) {

1815 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1816  
NULL
;

1819 
ty³
 = 
	`RES_GET_TYPE
(
»sB
->
fRes
);

1820 if(
	`URES_IS_TABLE
(
ty³
)) {

1821 
št32_t
 
t
=0;

1823 
»s
 = 
	`»s_g‘TabËI‹mByKey
(&(
»sB
->
fResD©a
),„esB->
fRes
, &
t
, &
key
);

1825 if(
»s
 =ğ
RES_BOGUS
) {

1826 
key
 = 
šKey
;

1827 if(
»sB
->
fHasF®lback
 =ğ
TRUE
) {

1828 cÚ¡ 
ResourûD©a
 *
rd
 = 
	`g‘F®lbackD©a
(
»sB
, &
key
, &
»®D©a
, &
»s
, 
¡©us
);

1829 if(
	`U_SUCCESS
(*
¡©us
)) {

1830 
	`RES_GET_TYPE
(
»s
)) {

1831 
URES_STRING
:

1832 
URES_STRING_V2
:

1833  
	`»s_g‘SŒšg
(
rd
, 
»s
, 
Ën
);

1834 
URES_ALIAS
:

1836 cÚ¡ 
UCh¬
* 
»suÉ
 = 0;

1837 
UResourûBundË
 *
‹mpRes
 = 
	`u»s_g‘ByKey
(
»sB
, 
šKey
, 
NULL
, 
¡©us
);

1838 
»suÉ
 = 
	`u»s_g‘SŒšg
(
‹mpRes
, 
Ën
, 
¡©us
);

1839 
	`u»s_şo£
(
‹mpRes
);

1840  
»suÉ
;

1843 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1846 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

1849 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

1852 
	`RES_GET_TYPE
(
»s
)) {

1853 
URES_STRING
:

1854 
URES_STRING_V2
:

1855  
	`»s_g‘SŒšg
(&(
»sB
->
fResD©a
), 
»s
, 
Ën
);

1856 
URES_ALIAS
:

1858 cÚ¡ 
UCh¬
* 
»suÉ
 = 0;

1859 
UResourûBundË
 *
‹mpRes
 = 
	`u»s_g‘ByKey
(
»sB
, 
šKey
, 
NULL
, 
¡©us
);

1860 
»suÉ
 = 
	`u»s_g‘SŒšg
(
‹mpRes
, 
Ën
, 
¡©us
);

1861 
	`u»s_şo£
(
‹mpRes
);

1862  
»suÉ
;

1865 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1872 if(
	`RES_GET_TYPE
(
»sB
->
fRes
è=ğ
URES_ARRAY
 &&„esB->
fHasF®lback
 =ğ
TRUE
) {

1874 cÚ¡ 
ResourûD©a
 *
rd
 = 
	`g‘F®lbackD©a
(
»sB
, &
key
, &
»®D©a
, &
»s
, 
¡©us
);

1875 if(
	`U_SUCCESS
(*
¡©us
)) {

1876  
	`»s_g‘SŒšg
(
rd
, 
»s
, 
Ën
);

1878 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

1883 *
¡©us
 = 
U_RESOURCE_TYPE_MISMATCH
;

1885  
NULL
;

1886 
	}
}

1888 
U_CAPI
 cÚ¡ * 
U_EXPORT2


1889 
	$u»s_g‘UTF8SŒšgByKey
(cÚ¡ 
UResourûBundË
 *
»sB
,

1890 cÚ¡ *
key
,

1891 *
de¡
, 
št32_t
 *
pL’gth
,

1892 
UBoŞ
 
fÜûCİy
,

1893 
UE¼ÜCode
 *
¡©us
) {

1894 
št32_t
 
Ëngth16
;

1895 cÚ¡ 
UCh¬
 *
s16
 = 
	`u»s_g‘SŒšgByKey
(
»sB
, 
key
, &
Ëngth16
, 
¡©us
);

1896  
	`u»s_toUTF8SŒšg
(
s16
, 
Ëngth16
, 
de¡
, 
pL’gth
, 
fÜûCİy
, 
¡©us
);

1897 
	}
}

1905 
U_INTERNAL
 cÚ¡ * 
U_EXPORT2


1906 
	$u»s_g‘LoÿËIÁ”Çl
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
, 
UE¼ÜCode
* 
¡©us
)

1908 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1909  
NULL
;

1911 ià(!
»sourûBundË
) {

1912 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1913  
NULL
;

1915  
»sourûBundË
->
fD©a
->
fName
;

1917 
	}
}

1919 
U_CAPI
 cÚ¡ * 
U_EXPORT2


1920 
	$u»s_g‘LoÿË
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

1921 
UE¼ÜCode
* 
¡©us
)

1923  
	`u»s_g‘LoÿËIÁ”Çl
(
»sourûBundË
, 
¡©us
);

1924 
	}
}

1927 
U_CAPI
 cÚ¡ * 
U_EXPORT2


1928 
	$u»s_g‘LoÿËByTy³
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

1929 
ULocD©aLoÿËTy³
 
ty³
,

1930 
UE¼ÜCode
* 
¡©us
) {

1931 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

1932  
NULL
;

1934 ià(!
»sourûBundË
) {

1935 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1936  
NULL
;

1938 
ty³
) {

1939 
ULOC_ACTUAL_LOCALE
:

1940  
»sourûBundË
->
fD©a
->
fName
;

1941 
ULOC_VALID_LOCALE
:

1942  
»sourûBundË
->
fTİLev–D©a
->
fName
;

1943 
ULOC_REQUESTED_LOCALE
:

1944  
NULL
;

1946 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1947  
NULL
;

1950 
	}
}

1952 
U_CFUNC
 cÚ¡ * 
	$u»s_g‘Name
(cÚ¡ 
UResourûBundË
* 
»sB
) {

1953 if(
»sB
 =ğ
NULL
) {

1954  
NULL
;

1957  
»sB
->
fD©a
->
fName
;

1958 
	}
}

1960 #ifdeà
URES_DEBUG


1961 
U_CFUNC
 cÚ¡ * 
	$u»s_g‘P©h
(cÚ¡ 
UResourûBundË
* 
»sB
) {

1962 if(
»sB
 =ğ
NULL
) {

1963  
NULL
;

1966  
»sB
->
fD©a
->
fP©h
;

1967 
	}
}

1977 
U_CAPI
 
U_EXPORT2


1978 
	$u»s_İ’FlIn
(
UResourûBundË
 *
r
, cÚ¡ * 
·th
,

1979 cÚ¡ * 
loÿËID
, 
UE¼ÜCode
* 
¡©us
) {

1980 if(
r
 =ğ
NULL
) {

1981 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1983 
UResourûD©aEÁry
 *
fœ¡D©a
;

1984 
UBoŞ
 
isSckObjeù
 = 
	`u»s_isSckObjeù
(
r
);

1986 
	`u»s_şo£BundË
(
r
, 
FALSE
);

1987 
	`u´v_mem£t
(
r
, 0, (
UResourûBundË
));

1988 
	`u»s_£tIsSckObjeù
(
r
, 
isSckObjeù
);

1989 
r
->
fHasF®lback
 = 
TRUE
;

1990 
r
->
fIsTİLev–
 = 
TRUE
;

1991 
r
->
fIndex
 = -1;

1992 
r
->
fD©a
 = 
	`’ŒyO³n
(
·th
, 
loÿËID
, 
¡©us
);

1993 if(
	`U_FAILURE
(*
¡©us
)) {

1997 
fœ¡D©a
 = 
r
->
fD©a
;

1998 
fœ¡D©a
->
fBogus
 !ğ
U_ZERO_ERROR
 && fœ¡D©a->
fP¬’t
 !ğ
NULL
) {

1999 
fœ¡D©a
 = fœ¡D©a->
fP¬’t
;

2001 
	`u´v_memıy
(&
r
->
fResD©a
, &
fœ¡D©a
->
fD©a
, (
ResourûD©a
));

2002 
r
->
fHasF®lback
=(
UBoŞ
)!r->
fResD©a
.
noF®lback
;

2003 
r
->
fRes
 =„->
fResD©a
.
roÙRes
;

2004 
r
->
fSize
 = 
	`»s_couÁA¼ayI‹ms
(&Ô->
fResD©a
),„->
fRes
);

2005 
r
->
fTİLev–D©a
 =„->
fD©a
;

2007 
	}
}

2009 
U_CAPI
 
UResourûBundË
* 
U_EXPORT2


2010 
	$u»s_İ’
(cÚ¡ * 
·th
,

2011 cÚ¡ * 
loÿËID
,

2012 
UE¼ÜCode
* 
¡©us
)

2014 
ÿnÚLoÿËID
[100];

2015 
UResourûD©aEÁry
 *
hasD©a
 = 
NULL
;

2016 
UResourûBundË
 *
r
;

2018 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)) {

2019  
NULL
;

2023 
	`uloc_g‘Ba£Name
(
loÿËID
, 
ÿnÚLoÿËID
, (ÿnÚLoÿËID), 
¡©us
);

2024 if(
	`U_FAILURE
(*
¡©us
è|| *¡©u =ğ
U_STRING_NOT_TERMINATED_WARNING
) {

2025 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

2026  
NULL
;

2029 
r
 = (
UResourûBundË
 *)
	`u´v_m®loc
((UResourceBundle));

2030 if(
r
 =ğ
NULL
) {

2031 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

2032  
NULL
;

2035 
	`u´v_mem£t
(
r
, 0, (
UResourûBundË
));

2036 
r
->
fHasF®lback
 = 
TRUE
;

2037 
r
->
fIsTİLev–
 = 
TRUE
;

2038 
	`u»s_£tIsSckObjeù
(
r
, 
FALSE
);

2039 
r
->
fIndex
 = -1;

2040 
r
->
fD©a
 = 
	`’ŒyO³n
(
·th
, 
ÿnÚLoÿËID
, 
¡©us
);

2041 if(
	`U_FAILURE
(*
¡©us
)) {

2042 
	`u´v_ä“
(
r
);

2043  
NULL
;

2045 
r
->
fTİLev–D©a
 =„->
fD©a
;

2047 
hasD©a
 = 
r
->
fD©a
;

2048 
hasD©a
->
fBogus
 !ğ
U_ZERO_ERROR
) {

2049 
hasD©a
 = hasD©a->
fP¬’t
;

2050 if(
hasD©a
 =ğ
NULL
) {

2053 
	`’ŒyClo£
(
r
->
fD©a
);

2054 
	`u´v_ä“
(
r
);

2055 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

2056  
NULL
;

2060 
	`u´v_memıy
(&
r
->
fResD©a
, &
hasD©a
->
fD©a
, (
ResourûD©a
));

2061 
r
->
fHasF®lback
=(
UBoŞ
)!r->
fResD©a
.
noF®lback
;

2062 
r
->
fRes
 =„->
fResD©a
.
roÙRes
;

2063 
r
->
fSize
 = 
	`»s_couÁA¼ayI‹ms
(&Ô->
fResD©a
),„->
fRes
);

2075  
r
;

2076 
	}
}

2082 
U_CAPI
 
UResourûBundË
* 
U_EXPORT2


2083 
	$u»s_İ’Dœeù
(cÚ¡ * 
·th
, cÚ¡ * 
loÿËID
, 
UE¼ÜCode
* 
¡©us
) {

2084 
UResourûBundË
 *
r
;

2085 
UE¼ÜCode
 
subStus
 = 
U_ZERO_ERROR
;

2087 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)) {

2088  
NULL
;

2091 
r
 = (
UResourûBundË
 *)
	`u´v_m®loc
((UResourceBundle));

2092 if(
r
 =ğ
NULL
) {

2093 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

2094  
NULL
;

2097 
r
->
fHasF®lback
 = 
FALSE
;

2098 
r
->
fIsTİLev–
 = 
TRUE
;

2099 
	`u»s_£tIsSckObjeù
(
r
, 
FALSE
);

2100 
r
->
fIndex
 = -1;

2101 
r
->
fD©a
 = 
	`’ŒyO³n
(
·th
, 
loÿËID
, &
subStus
);

2102 if(
	`U_FAILURE
(
subStus
)) {

2103 *
¡©us
 = 
subStus
;

2104 
	`u´v_ä“
(
r
);

2105  
NULL
;

2107 if(
subStus
 !ğ
U_ZERO_ERROR
 ) {

2110 
	`’ŒyClo£
(
r
->
fD©a
);

2111 
	`u´v_ä“
(
r
);

2112 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

2113  
NULL
;

2116 
r
->
fKey
 = 
NULL
;

2117 
r
->
fV”siÚ
 = 
NULL
;

2118 
	`u´v_memıy
(&
r
->
fResD©a
, &r->
fD©a
->fD©a, (
ResourûD©a
));

2120 
r
->
fRes
 =„->
fResD©a
.
roÙRes
;

2122 
r
->
fSize
 = 
	`»s_couÁA¼ayI‹ms
(&Ô->
fResD©a
),„->
fRes
);

2123 
r
->
fResP©h
 = 
NULL
;

2124 
r
->
fResP©hL’
 = 0;

2126 
r
->
fTİLev–D©a
 =„->
fD©a
;

2128  
r
;

2129 
	}
}

2135 
U_CAPI
 
št32_t
 
U_EXPORT2


2136 
	$u»s_couÁA¼ayI‹ms
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

2137 cÚ¡ * 
»sourûKey
,

2138 
UE¼ÜCode
* 
¡©us
)

2140 
UResourûBundË
 
»sD©a
;

2141 
	`u»s_š™SckObjeù
(&
»sD©a
);

2142 ià(
¡©us
==
NULL
 || 
	`U_FAILURE
(*status)) {

2145 if(
»sourûBundË
 =ğ
NULL
) {

2146 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

2149 
	`u»s_g‘ByKey
(
»sourûBundË
, 
»sourûKey
, &
»sD©a
, 
¡©us
);

2151 if(
»sD©a
.
fResD©a
.
d©a
 !ğ
NULL
) {

2152 
št32_t
 
»suÉ
 = 
	`»s_couÁA¼ayI‹ms
(&
»sD©a
.
fResD©a
,„esD©a.
fRes
);

2153 
	`u»s_şo£
(&
»sD©a
);

2154  
»suÉ
;

2156 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

2157 
	`u»s_şo£
(&
»sD©a
);

2160 
	}
}

2172 
U_INTERNAL
 cÚ¡ * 
U_EXPORT2


2173 
	$u»s_g‘V”siÚNumb”IÁ”Çl
(cÚ¡ 
UResourûBundË
 *
»sourûBundË
)

2175 ià(!
»sourûBundË
è 
NULL
;

2177 if(
»sourûBundË
->
fV”siÚ
 =ğ
NULL
) {

2181 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

2182 
št32_t
 
mšÜ_Ën
 = 0;

2183 
št32_t
 
Ën
;

2185 cÚ¡ 
UCh¬
* 
mšÜ_v”siÚ
 = 
	`u»s_g‘SŒšgByKey
(
»sourûBundË
, 
kV”siÚTag
, &
mšÜ_Ën
, &
¡©us
);

2192 
Ën
 = (
mšÜ_Ën
 > 0) ? minor_len : 1;

2198 ((
UResourûBundË
 *)
»sourûBundË
)->
fV”siÚ
 = (*)
	`u´v_m®loc
(1 + 
Ën
);

2200 ià(((
UResourûBundË
 *)
»sourûBundË
)->
fV”siÚ
 =ğ
NULL
) {

2201  
NULL
;

2204 if(
mšÜ_Ën
 > 0) {

2205 
	`u_UCh¬sToCh¬s
(
mšÜ_v”siÚ
, 
»sourûBundË
->
fV”siÚ
 , 
mšÜ_Ën
);

2206 
»sourûBundË
->
fV”siÚ
[
Ën
] = '\0';

2209 
	`u´v_¡rıy
(
»sourûBundË
->
fV”siÚ
, 
kDeçuÉMšÜV”siÚ
);

2213  
»sourûBundË
->
fV”siÚ
;

2214 
	}
}

2216 
U_CAPI
 cÚ¡ * 
U_EXPORT2


2217 
	$u»s_g‘V”siÚNumb”
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
)

2219  
	`u»s_g‘V”siÚNumb”IÁ”Çl
(
»sourûBundË
);

2220 
	}
}

2222 
U_CAPI
 
U_EXPORT2
 
	$u»s_g‘V”siÚ
(cÚ¡ 
UResourûBundË
* 
»sB
, 
UV”siÚInfo
 
v”siÚInfo
) {

2223 ià(!
»sB
) ;

2225 
	`u_v”siÚFromSŒšg
(
v”siÚInfo
, 
	`u»s_g‘V”siÚNumb”IÁ”Çl
(
»sB
));

2226 
	}
}

2229 
	#INDEX_LOCALE_NAME
 "»s_šdex"

	)

2230 
	#INDEX_TAG
 "In¡®ËdLoÿËs"

	)

2231 
	#DEFAULT_TAG
 "deçuÉ"

	)

2233 #ià
defšed
(
URES_TREE_DEBUG
)

2234 
	~<¡dio.h
>

2237 
	sULoÿËsCÚ‹xt
 {

2238 
UResourûBundË
 
	mš¡®Ëd
;

2239 
UResourûBundË
 
	mcu¼
;

2240 } 
	tULoÿËsCÚ‹xt
;

2242 
U_CALLCONV


2243 
	$u»s_loc_şo£LoÿËs
(
UEnum”©iÚ
 *
’um”©Ü
) {

2244 
ULoÿËsCÚ‹xt
 *
ùx
 = (ULoÿËsCÚ‹xˆ*)
’um”©Ü
->
cÚ‹xt
;

2245 
	`u»s_şo£
(&
ùx
->
cu¼
);

2246 
	`u»s_şo£
(&
ùx
->
š¡®Ëd
);

2247 
	`u´v_ä“
(
ùx
);

2248 
	`u´v_ä“
(
’um”©Ü
);

2249 
	}
}

2251 
št32_t
 
U_CALLCONV


2252 
	$u»s_loc_couÁLoÿËs
(
UEnum”©iÚ
 *
’
, 
UE¼ÜCode
 *
¡©us
) {

2253 
ULoÿËsCÚ‹xt
 *
ùx
 = (ULoÿËsCÚ‹xˆ*)
’
->
cÚ‹xt
;

2254  
	`u»s_g‘Size
(&
ùx
->
š¡®Ëd
);

2255 
	}
}

2257 cÚ¡ * 
U_CALLCONV


2258 
	$u»s_loc_ÃxtLoÿË
(
UEnum”©iÚ
* 
’
,

2259 
št32_t
* 
»suÉL’gth
,

2260 
UE¼ÜCode
* 
¡©us
) {

2261 
ULoÿËsCÚ‹xt
 *
ùx
 = (ULoÿËsCÚ‹xˆ*)
’
->
cÚ‹xt
;

2262 
UResourûBundË
 *
»s
 = &(
ùx
->
š¡®Ëd
);

2263 
UResourûBundË
 *
k
 = 
NULL
;

2264 cÚ¡ *
»suÉ
 = 
NULL
;

2265 
št32_t
 
Ën
 = 0;

2266 if(
	`u»s_hasNext
(
»s
è&& (
k
 = 
	`u»s_g‘NextResourû
Ôes, &
ùx
->
cu¼
, 
¡©us
))) {

2267 
»suÉ
 = 
	`u»s_g‘Key
(
k
);

2268 
Ën
 = (
št32_t
)
	`u´v_¡¾’
(
»suÉ
);

2270 ià(
»suÉL’gth
) {

2271 *
»suÉL’gth
 = 
Ën
;

2273  
»suÉ
;

2274 
	}
}

2276 
U_CALLCONV


2277 
	$u»s_loc_»£tLoÿËs
(
UEnum”©iÚ
* 
’
,

2278 
UE¼ÜCode
* 
¡©us
) {

2279 
UResourûBundË
 *
»s
 = &((
ULoÿËsCÚ‹xt
 *)
’
->
cÚ‹xt
)->
š¡®Ëd
;

2280 
	`u»s_»£tI‹¿tÜ
(
»s
);

2281 
	}
}

2284 cÚ¡ 
UEnum”©iÚ
 
	ggLoÿËsEnum
 = {

2285 
NULL
,

2286 
NULL
,

2287 
u»s_loc_şo£LoÿËs
,

2288 
u»s_loc_couÁLoÿËs
,

2289 
u’um_uÃxtDeçuÉ
,

2290 
u»s_loc_ÃxtLoÿË
,

2291 
u»s_loc_»£tLoÿËs


2295 
U_CAPI
 
UEnum”©iÚ
* 
U_EXPORT2


2296 
	$u»s_İ’AvaabËLoÿËs
(cÚ¡ *
·th
, 
UE¼ÜCode
 *
¡©us
)

2298 
UResourûBundË
 *
idx
 = 
NULL
;

2299 
UEnum”©iÚ
 *
’
 = 
NULL
;

2300 
ULoÿËsCÚ‹xt
 *
myCÚ‹xt
 = 
NULL
;

2302 if(
	`U_FAILURE
(*
¡©us
)) {

2303  
NULL
;

2305 
myCÚ‹xt
 = 
	`u´v_m®loc
((
ULoÿËsCÚ‹xt
));

2306 
’
 = (
UEnum”©iÚ
 *)
	`u´v_m®loc
((UEnumeration));

2307 if(!
’
 || !
myCÚ‹xt
) {

2308 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

2309 
	`u´v_ä“
(
’
);

2310 
	`u´v_ä“
(
myCÚ‹xt
);

2311  
NULL
;

2313 
	`u´v_memıy
(
’
, &
gLoÿËsEnum
, (
UEnum”©iÚ
));

2315 
	`u»s_š™SckObjeù
(&
myCÚ‹xt
->
š¡®Ëd
);

2316 
	`u»s_š™SckObjeù
(&
myCÚ‹xt
->
cu¼
);

2317 
idx
 = 
	`u»s_İ’Dœeù
(
·th
, 
INDEX_LOCALE_NAME
, 
¡©us
);

2318 
	`u»s_g‘ByKey
(
idx
, 
INDEX_TAG
, &
myCÚ‹xt
->
š¡®Ëd
, 
¡©us
);

2319 if(
	`U_SUCCESS
(*
¡©us
)) {

2320 #ià
	`defšed
(
URES_TREE_DEBUG
)

2321 
	`årštf
(
¡d”r
, "Got %s::%s::[%s] : %s\n",

2322 
·th
, 
INDEX_LOCALE_NAME
, 
INDEX_TAG
, 
	`u»s_g‘Key
(&
myCÚ‹xt
->
š¡®Ëd
));

2324 
’
->
cÚ‹xt
 = 
myCÚ‹xt
;

2326 #ià
	`defšed
(
URES_TREE_DEBUG
)

2327 
	`årštf
(
¡d”r
, "% İ’ faed - %s\n", 
·th
, 
	`u_”rÜName
(*
¡©us
));

2329 
	`u»s_şo£
(&
myCÚ‹xt
->
š¡®Ëd
);

2330 
	`u´v_ä“
(
myCÚ‹xt
);

2331 
	`u´v_ä“
(
’
);

2332 
’
 = 
NULL
;

2335 
	`u»s_şo£
(
idx
);

2337  
’
;

2338 
	}
}

2340 
UBoŞ
 
	$isLoÿËInLi¡
(
UEnum”©iÚ
 *
locEnum
, cÚ¡ *
locToS—rch
, 
UE¼ÜCode
 *
¡©us
) {

2341 cÚ¡ *
loc
;

2342 (
loc
 = 
	`u’um_Ãxt
(
locEnum
, 
NULL
, 
¡©us
)) != NULL) {

2343 ià(
	`u´v_¡rcmp
(
loc
, 
locToS—rch
) == 0) {

2344  
TRUE
;

2347  
FALSE
;

2348 
	}
}

2350 
U_CAPI
 
št32_t
 
U_EXPORT2


2351 
	$u»s_g‘FunùiÚ®Equiv®’t
(*
»suÉ
, 
št32_t
 
»suÉC­ac™y
,

2352 cÚ¡ *
·th
, cÚ¡ *
»sName
, cÚ¡ *
keywÜd
, cÚ¡ *
locid
,

2353 
UBoŞ
 *
isAvaabË
, UBoŞ 
om™DeçuÉ
, 
UE¼ÜCode
 *
¡©us
)

2355 
kwV®
[1024] = "";

2356 
defV®
[1024] = "";

2357 
defLoc
[1024] = "";

2358 
ba£
[1024] = "";

2359 
found
[1024];

2360 
·»Á
[1024];

2361 
fuÎ
[1024] = "";

2362 
UResourûBundË
 
bund1
, 
bund2
;

2363 
UResourûBundË
 *
»s
 = 
NULL
;

2364 
UE¼ÜCode
 
subStus
 = 
U_ZERO_ERROR
;

2365 
št32_t
 
Ëngth
 = 0;

2366 if(
	`U_FAILURE
(*
¡©us
))  0;

2367 
	`uloc_g‘KeywÜdV®ue
(
locid
, 
keywÜd
, 
kwV®
, 1024-1,&
subStus
);

2368 if(!
	`u´v_¡rcmp
(
kwV®
, 
DEFAULT_TAG
)) {

2369 
kwV®
[0]=0;

2371 
	`uloc_g‘Ba£Name
(
locid
, 
ba£
, 1024-1,&
subStus
);

2372 #ià
	`defšed
(
URES_TREE_DEBUG
)

2373 
	`årštf
(
¡d”r
, "getFunctionalEquivalent: \"%s\" [%s=%s] in %s - %s\n",

2374 
locid
, 
keywÜd
, 
kwV®
, 
ba£
, 
	`u_”rÜName
(
subStus
));

2376 
	`u»s_š™SckObjeù
(&
bund1
);

2377 
	`u»s_š™SckObjeù
(&
bund2
);

2380 
	`u´v_¡rıy
(
·»Á
, 
ba£
);

2381 
	`u´v_¡rıy
(
found
, 
ba£
);

2383 if(
isAvaabË
) {

2384 
UEnum”©iÚ
 *
locEnum
 = 
	`u»s_İ’AvaabËLoÿËs
(
·th
, &
subStus
);

2385 *
isAvaabË
 = 
TRUE
;

2386 ià(
	`U_SUCCESS
(
subStus
)) {

2387 *
isAvaabË
 = 
	`isLoÿËInLi¡
(
locEnum
, 
·»Á
, &
subStus
);

2389 
	`u’um_şo£
(
locEnum
);

2392 if(
	`U_FAILURE
(
subStus
)) {

2393 *
¡©us
 = 
subStus
;

2398 
subStus
 = 
U_ZERO_ERROR
;

2399 
»s
 = 
	`u»s_İ’
(
·th
, 
·»Á
, &
subStus
);

2400 if(((
subStus
 =ğ
U_USING_FALLBACK_WARNING
) ||

2401 (
subStus
 =ğ
U_USING_DEFAULT_WARNING
)è&& 
isAvaabË
)

2403 *
isAvaabË
 = 
FALSE
;

2405 
isAvaabË
 = 
NULL
;

2407 #ià
	`defšed
(
URES_TREE_DEBUG
)

2408 
	`årštf
(
¡d”r
, "%s;% -> % [%s]\n", 
·th
?·th:"ICUDATA", 
·»Á
, 
	`u_”rÜName
(
subStus
), 
	`u»s_g‘LoÿË
(
»s
, &subStatus));

2410 if(
	`U_FAILURE
(
subStus
)) {

2411 *
¡©us
 = 
subStus
;

2412 } if(
subStus
 =ğ
U_ZERO_ERROR
) {

2413 
	`u»s_g‘ByKey
(
»s
,
»sName
,&
bund1
, &
subStus
);

2414 if(
subStus
 =ğ
U_ZERO_ERROR
) {

2415 cÚ¡ 
UCh¬
 *
defU¡r
;

2416 
št32_t
 
defL’
;

2418 #ià
	`defšed
(
URES_TREE_DEBUG
)

2419 
	`årštf
(
¡d”r
, "%s;%s :†oaded default -> %s\n",

2420 
·th
?·th:"ICUDATA", 
·»Á
, 
	`u_”rÜName
(
subStus
));

2422 
defU¡r
 = 
	`u»s_g‘SŒšgByKey
(&
bund1
, 
DEFAULT_TAG
, &
defL’
, &
subStus
);

2423 if(
	`U_SUCCESS
(
subStus
è&& 
defL’
) {

2424 
	`u_UCh¬sToCh¬s
(
defU¡r
, 
defV®
, 
	`u_¡¾’
(defUstr));

2425 #ià
	`defšed
(
URES_TREE_DEBUG
)

2426 
	`årštf
(
¡d”r
, "%s;%s -> default %s=%s, %s\n",

2427 
·th
?·th:"ICUDATA", 
·»Á
, 
keywÜd
, 
defV®
, 
	`u_”rÜName
(
subStus
));

2429 
	`u´v_¡rıy
(
defLoc
, 
·»Á
);

2430 if(
kwV®
[0]==0) {

2431 
	`u´v_¡rıy
(
kwV®
, 
defV®
);

2432 #ià
	`defšed
(
URES_TREE_DEBUG
)

2433 
	`årštf
(
¡d”r
, "%s;%s -> kwVal = %s\n",

2434 
·th
?·th:"ICUDATA", 
·»Á
, 
keywÜd
, 
kwV®
);

2441 
subStus
 = 
U_ZERO_ERROR
;

2443 ià(
»s
 !ğ
NULL
) {

2444 
	`u´v_¡rıy
(
found
, 
	`u»s_g‘LoÿËByTy³
(
»s
, 
ULOC_VALID_LOCALE
, &
subStus
));

2447 
	`uloc_g‘P¬’t
(
found
,
·»Á
,Õ¬’t),&
subStus
);

2448 
	`u»s_şo£
(
»s
);

2449 } !
defV®
[0] && *
found
 && 
	`u´v_¡rcmp
(found, "roÙ"è!ğ0 && 
	`U_SUCCESS
(*
¡©us
));

2452 
	`u´v_¡rıy
(
·»Á
, 
ba£
);

2453 
	`u´v_¡rıy
(
found
, 
ba£
);

2456 
subStus
 = 
U_ZERO_ERROR
;

2457 
»s
 = 
	`u»s_İ’
(
·th
, 
·»Á
, &
subStus
);

2458 if((
subStus
 =ğ
U_USING_FALLBACK_WARNING
è&& 
isAvaabË
) {

2459 *
isAvaabË
 = 
FALSE
;

2461 
isAvaabË
 = 
NULL
;

2463 #ià
	`defšed
(
URES_TREE_DEBUG
)

2464 
	`årštf
(
¡d”r
, "%s;%s -> %s (looking for %s)\n",

2465 
·th
?·th:"ICUDATA", 
·»Á
, 
	`u_”rÜName
(
subStus
), 
kwV®
);

2467 if(
	`U_FAILURE
(
subStus
)) {

2468 *
¡©us
 = 
subStus
;

2469 } if(
subStus
 =ğ
U_ZERO_ERROR
) {

2470 
	`u»s_g‘ByKey
(
»s
,
»sName
,&
bund1
, &
subStus
);

2471 #ià
	`defšed
(
URES_TREE_DEBUG
)

2472  
	`årštf
(
¡d”r
,"@%d [%s] %s\n", 
__LINE__
, 
»sName
, 
	`u_”rÜName
(
subStus
));

2474 if(
subStus
 =ğ
U_ZERO_ERROR
) {

2475 
	`u»s_g‘ByKey
(&
bund1
, 
kwV®
, &
bund2
, &
subStus
);

2476 #ià
	`defšed
(
URES_TREE_DEBUG
)

2477  
	`årštf
(
¡d”r
,"@%d [%s] %s\n", 
__LINE__
, 
kwV®
, 
	`u_”rÜName
(
subStus
));

2479 if(
subStus
 =ğ
U_ZERO_ERROR
) {

2480 #ià
	`defšed
(
URES_TREE_DEBUG
)

2481 
	`årštf
(
¡d”r
, "%s;%s -> full0 %s=%s, %s\n",

2482 
·th
?·th:"ICUDATA", 
·»Á
, 
keywÜd
, 
kwV®
, 
	`u_”rÜName
(
subStus
));

2484 
	`u´v_¡rıy
(
fuÎ
, 
·»Á
);

2485 if(*
fuÎ
 == 0) {

2486 
	`u´v_¡rıy
(
fuÎ
, "root");

2489 if(
	`u´v_¡¾’
(
defLoc
è> u´v_¡¾’(
fuÎ
)) {

2490 cÚ¡ 
UCh¬
 *
defU¡r
;

2491 
št32_t
 
defL’
;

2493 #ià
	`defšed
(
URES_TREE_DEBUG
)

2494 
	`årštf
(
¡d”r
, "%s;%s ->„ecalculating Default0\n",

2495 
·th
?·th:"ICUDATA", 
fuÎ
);

2497 
defU¡r
 = 
	`u»s_g‘SŒšgByKey
(&
bund1
, 
DEFAULT_TAG
, &
defL’
, &
subStus
);

2498 if(
	`U_SUCCESS
(
subStus
è&& 
defL’
) {

2499 
	`u_UCh¬sToCh¬s
(
defU¡r
, 
defV®
, 
	`u_¡¾’
(defUstr));

2500 #ià
	`defšed
(
URES_TREE_DEBUG
)

2501 
	`årštf
(
¡d”r
, "%s;%s -> default0 %s=%s, %s\n",

2502 
·th
?·th:"ICUDATA", 
fuÎ
, 
keywÜd
, 
defV®
, 
	`u_”rÜName
(
subStus
));

2504 
	`u´v_¡rıy
(
defLoc
, 
fuÎ
);

2507 #ià
	`defšed
(
URES_TREE_DEBUG
)

2509 
	`årštf
(
¡d”r
, "NØŒim0, % <ğ%s\n", 
defLoc
, 
fuÎ
);

2513 #ià
	`defšed
(
URES_TREE_DEBUG
)

2514 
	`årštf
(
¡d”r
, "err=%s in %s†ooking for %s\n",

2515 
	`u_”rÜName
(
subStus
), 
·»Á
, 
kwV®
);

2521 
subStus
 = 
U_ZERO_ERROR
;

2523 
	`u´v_¡rıy
(
found
, 
·»Á
);

2524 
	`uloc_g‘P¬’t
(
found
,
·»Á
,1023,&
subStus
);

2525 
	`u»s_şo£
(
»s
);

2526 } !
fuÎ
[0] && *
found
 && 
	`U_SUCCESS
(*
¡©us
));

2528 if((
fuÎ
[0]==0è&& 
	`u´v_¡rcmp
(
kwV®
, 
defV®
)) {

2529 #ià
	`defšed
(
URES_TREE_DEBUG
)

2530 
	`årštf
(
¡d”r
, "FaedØloÿ‹ kw % -ry deçuÉ %s\n", 
kwV®
, 
defV®
);

2532 
	`u´v_¡rıy
(
kwV®
, 
defV®
);

2533 
	`u´v_¡rıy
(
·»Á
, 
ba£
);

2534 
	`u´v_¡rıy
(
found
, 
ba£
);

2537 
subStus
 = 
U_ZERO_ERROR
;

2538 
»s
 = 
	`u»s_İ’
(
·th
, 
·»Á
, &
subStus
);

2539 if((
subStus
 =ğ
U_USING_FALLBACK_WARNING
è&& 
isAvaabË
) {

2540 *
isAvaabË
 = 
FALSE
;

2542 
isAvaabË
 = 
NULL
;

2544 #ià
	`defšed
(
URES_TREE_DEBUG
)

2545 
	`årštf
(
¡d”r
, "%s;%s -> %s (looking for default %s)\n",

2546 
·th
?·th:"ICUDATA", 
·»Á
, 
	`u_”rÜName
(
subStus
), 
kwV®
);

2548 if(
	`U_FAILURE
(
subStus
)) {

2549 *
¡©us
 = 
subStus
;

2550 } if(
subStus
 =ğ
U_ZERO_ERROR
) {

2551 
	`u»s_g‘ByKey
(
»s
,
»sName
,&
bund1
, &
subStus
);

2552 if(
subStus
 =ğ
U_ZERO_ERROR
) {

2553 
	`u»s_g‘ByKey
(&
bund1
, 
kwV®
, &
bund2
, &
subStus
);

2554 if(
subStus
 =ğ
U_ZERO_ERROR
) {

2555 #ià
	`defšed
(
URES_TREE_DEBUG
)

2556 
	`årštf
(
¡d”r
, "%s;% -> fuÎ1 %s=%s, %s\n", 
·th
?path:"ICUDATA",

2557 
·»Á
, 
keywÜd
, 
kwV®
, 
	`u_”rÜName
(
subStus
));

2559 
	`u´v_¡rıy
(
fuÎ
, 
·»Á
);

2560 if(*
fuÎ
 == 0) {

2561 
	`u´v_¡rıy
(
fuÎ
, "root");

2565 if(
	`u´v_¡¾’
(
defLoc
è> u´v_¡¾’(
fuÎ
)) {

2566 cÚ¡ 
UCh¬
 *
defU¡r
;

2567 
št32_t
 
defL’
;

2569 #ià
	`defšed
(
URES_TREE_DEBUG
)

2570 
	`årštf
(
¡d”r
, "%s;%s ->„ecalculating Default1\n",

2571 
·th
?·th:"ICUDATA", 
fuÎ
);

2573 
defU¡r
 = 
	`u»s_g‘SŒšgByKey
(&
bund1
, 
DEFAULT_TAG
, &
defL’
, &
subStus
);

2574 if(
	`U_SUCCESS
(
subStus
è&& 
defL’
) {

2575 
	`u_UCh¬sToCh¬s
(
defU¡r
, 
defV®
, 
	`u_¡¾’
(defUstr));

2576 #ià
	`defšed
(
URES_TREE_DEBUG
)

2577 
	`årštf
(
¡d”r
, "%s;%s -> default %s=%s, %s\n",

2578 
·th
?·th:"ICUDATA", 
fuÎ
, 
keywÜd
, 
defV®
, 
	`u_”rÜName
(
subStus
));

2580 
	`u´v_¡rıy
(
defLoc
, 
fuÎ
);

2583 #ià
	`defšed
(
URES_TREE_DEBUG
)

2585 
	`årštf
(
¡d”r
, "NØŒim1, % <ğ%s\n", 
defLoc
, 
fuÎ
);

2591 
subStus
 = 
U_ZERO_ERROR
;

2593 
	`u´v_¡rıy
(
found
, 
·»Á
);

2594 
	`uloc_g‘P¬’t
(
found
,
·»Á
,1023,&
subStus
);

2595 
	`u»s_şo£
(
»s
);

2596 } !
fuÎ
[0] && *
found
 && 
	`U_SUCCESS
(*
¡©us
));

2599 if(
	`U_SUCCESS
(*
¡©us
)) {

2600 if(!
fuÎ
[0]) {

2601 #ià
	`defšed
(
URES_TREE_DEBUG
)

2602 
	`årštf
(
¡d”r
, "StÈcould‚Ù†ßd keywÜd %s=%s\n", 
keywÜd
, 
kwV®
);

2604 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

2605 } if(
om™DeçuÉ
) {

2606 #ià
	`defšed
(
URES_TREE_DEBUG
)

2607 
	`årštf
(
¡d”r
,"Trim? fuÎ=%s, defLoc=%s, found=%s\n", 
fuÎ
, 
defLoc
, 
found
);

2609 if(
	`u´v_¡¾’
(
defLoc
è<ğu´v_¡¾’(
fuÎ
)) {

2611 if(!
	`u´v_¡rcmp
(
kwV®
, 
defV®
)) {

2613 #ià
	`defšed
(
URES_TREE_DEBUG
)

2614 
	`årštf
(
¡d”r
, "Removšg uÂ“ded v¬ %s=%s\n", 
keywÜd
, 
kwV®
);

2616 
kwV®
[0]=0;

2620 
	`u´v_¡rıy
(
found
, 
fuÎ
);

2621 if(
kwV®
[0]) {

2622 
	`u´v_¡rÿt
(
found
, "@");

2623 
	`u´v_¡rÿt
(
found
, 
keywÜd
);

2624 
	`u´v_¡rÿt
(
found
, "=");

2625 
	`u´v_¡rÿt
(
found
, 
kwV®
);

2626 } if(!
om™DeçuÉ
) {

2627 
	`u´v_¡rÿt
(
found
, "@");

2628 
	`u´v_¡rÿt
(
found
, 
keywÜd
);

2629 
	`u´v_¡rÿt
(
found
, "=");

2630 
	`u´v_¡rÿt
(
found
, 
defV®
);

2635 
	`u»s_şo£
(&
bund1
);

2636 
	`u»s_şo£
(&
bund2
);

2638 
Ëngth
 = (
št32_t
)
	`u´v_¡¾’
(
found
);

2640 if(
	`U_SUCCESS
(*
¡©us
)) {

2641 
št32_t
 
cİyL’gth
 = 
	`u´v_mš
(
Ëngth
, 
»suÉC­ac™y
);

2642 if(
cİyL’gth
>0) {

2643 
	`u´v_¡ºıy
(
»suÉ
, 
found
, 
cİyL’gth
);

2645 if(
Ëngth
 == 0) {

2646 *
¡©us
 = 
U_MISSING_RESOURCE_ERROR
;

2649 
Ëngth
 = 0;

2650 
»suÉ
[0]=0;

2652  
	`u_‹rmš©eCh¬s
(
»suÉ
, 
»suÉC­ac™y
, 
Ëngth
, 
¡©us
);

2653 
	}
}

2655 
U_CAPI
 
UEnum”©iÚ
* 
U_EXPORT2


2656 
	$u»s_g‘KeywÜdV®ues
(cÚ¡ *
·th
, cÚ¡ *
keywÜd
, 
UE¼ÜCode
 *
¡©us
)

2658 
	#VALUES_BUF_SIZE
 2048

	)

2659 
	#VALUES_LIST_SIZE
 512

	)

2661 
v®uesBuf
[
VALUES_BUF_SIZE
];

2662 
št32_t
 
v®uesIndex
 = 0;

2663 cÚ¡ *
v®uesLi¡
[
VALUES_LIST_SIZE
];

2664 
št32_t
 
v®uesCouÁ
 = 0;

2666 cÚ¡ *
loÿË
;

2667 
št32_t
 
locL’
;

2669 
UEnum”©iÚ
 *
locs
 = 
NULL
;

2671 
UResourûBundË
 
™em
;

2672 
UResourûBundË
 
subI‹m
;

2674 
	`u»s_š™SckObjeù
(&
™em
);

2675 
	`u»s_š™SckObjeù
(&
subI‹m
);

2676 
locs
 = 
	`u»s_İ’AvaabËLoÿËs
(
·th
, 
¡©us
);

2678 if(
	`U_FAILURE
(*
¡©us
)) {

2679 
	`u»s_şo£
(&
™em
);

2680 
	`u»s_şo£
(&
subI‹m
);

2681  
NULL
;

2684 
v®uesBuf
[0]=0;

2685 
v®uesBuf
[1]=0;

2687 (
loÿË
 = 
	`u’um_Ãxt
(
locs
, &
locL’
, 
¡©us
))) {

2688 
UResourûBundË
 *
bund
 = 
NULL
;

2689 
UResourûBundË
 *
subPŒ
 = 
NULL
;

2690 
UE¼ÜCode
 
subStus
 = 
U_ZERO_ERROR
;

2691 
bund
 = 
	`u»s_İ’Dœeù
(
·th
, 
loÿË
, &
subStus
);

2693 #ià
	`defšed
(
URES_TREE_DEBUG
)

2694 if(!
bund
 || 
	`U_FAILURE
(
subStus
)) {

2695 
	`årštf
(
¡d”r
, "%s-%s values: Can't open %s†ocale - skipping. (%s)\n",

2696 
·th
?·th:"<ICUDATA>", 
keywÜd
, 
loÿË
, 
	`u_”rÜName
(
subStus
));

2700 
	`u»s_g‘ByKey
(
bund
, 
keywÜd
, &
™em
, &
subStus
);

2702 if(!
bund
 || 
	`U_FAILURE
(
subStus
)) {

2703 #ià
	`defšed
(
URES_TREE_DEBUG
)

2704 
	`årštf
(
¡d”r
, "%s-%s values: Can't find in %s - skipping. (%s)\n",

2705 
·th
?·th:"<ICUDATA>", 
keywÜd
, 
loÿË
, 
	`u_”rÜName
(
subStus
));

2707 
	`u»s_şo£
(
bund
);

2708 
bund
 = 
NULL
;

2712 (
subPŒ
 = 
	`u»s_g‘NextResourû
(&
™em
,&
subI‹m
,&
subStus
))

2713 && 
	`U_SUCCESS
(
subStus
)) {

2714 cÚ¡ *
k
;

2715 
št32_t
 
i
;

2716 
k
 = 
	`u»s_g‘Key
(
subPŒ
);

2718 #ià
	`defšed
(
URES_TREE_DEBUG
)

2721 
i
=0;
k
&&i<
v®uesCouÁ
;i++) {

2722 if(!
	`u´v_¡rcmp
(
v®uesLi¡
[
i
],
k
)) {

2723 
k
 = 
NULL
;

2726 if(
k
 && *k) {

2727 
št32_t
 
kL’
 = (št32_t)
	`u´v_¡¾’
(
k
);

2728 if(!
	`u´v_¡rcmp
(
k
,
DEFAULT_TAG
)) {

2731 if((
v®uesCouÁ
 >ğ(
VALUES_LIST_SIZE
-1)) ||

2732 ((
v®uesIndex
+
kL’
+1+1è>ğ
VALUES_BUF_SIZE
)) {

2733 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

2735 
	`u´v_¡rıy
(
v®uesBuf
+
v®uesIndex
, 
k
);

2736 
v®uesLi¡
[
v®uesCouÁ
++] = 
v®uesBuf
+
v®uesIndex
;

2737 
v®uesIndex
 +ğ
kL’
;

2738 #ià
	`defšed
(
URES_TREE_DEBUG
)

2739 
	`årštf
(
¡d”r
, "%s | %s | %s | [%s] (UNIQUE)\n",

2740 
·th
?·th:"<ICUDATA>", 
keywÜd
, 
loÿË
, 
k
);

2742 
v®uesBuf
[
v®uesIndex
++] = 0;

2746 
	`u»s_şo£
(
bund
);

2748 
v®uesBuf
[
v®uesIndex
++] = 0;

2750 
	`u»s_şo£
(&
™em
);

2751 
	`u»s_şo£
(&
subI‹m
);

2752 
	`u’um_şo£
(
locs
);

2753 #ià
	`defšed
(
URES_TREE_DEBUG
)

2754 
	`årštf
(
¡d”r
, "%s: siz%d, #%d\n", 
	`u_”rÜName
(*
¡©us
),

2755 
v®uesIndex
, 
v®uesCouÁ
);

2757  
	`uloc_İ’KeywÜdLi¡
(
v®uesBuf
, 
v®uesIndex
, 
¡©us
);

2758 
	}
}

2761 
U_INTERNAL
 
UBoŞ
 
U_EXPORT2


2762 
	$u»s_equ®
(cÚ¡ 
UResourûBundË
* 
»s1
, cÚ¡ UResourûBundË* 
»s2
){

2763 if(
»s1
==
NULL
 || 
»s2
==NULL){

2764  
»s1
==
»s2
;

2766 if(
»s1
->
fKey
==
NULL
|| 
»s2
->fKey==NULL){

2767  (
»s1
->
fKey
==
»s2
->fKey);

2769 if(
	`u´v_¡rcmp
(
»s1
->
fKey
, 
»s2
->fKey)!=0){

2770  
FALSE
;

2773 if(
	`u´v_¡rcmp
(
»s1
->
fD©a
->
fName
, 
»s2
->fData->fName)!=0){

2774  
FALSE
;

2776 if(
»s1
->
fD©a
->
fP©h
 =ğ
NULL
|| 
»s2
->fData->fPath==NULL){

2777  (
»s1
->
fD©a
->
fP©h
 =ğ
»s2
->fData->fPath);

2779 if(
	`u´v_¡rcmp
(
»s1
->
fD©a
->
fP©h
, 
»s2
->fData->fPath)!=0){

2780  
FALSE
;

2783 if(
	`u´v_¡rcmp
(
»s1
->
fD©a
->
fP¬’t
->
fName
, 
»s2
->fData->fParent->fName)!=0){

2784  
FALSE
;

2786 if(
	`u´v_¡rcmp
(
»s1
->
fD©a
->
fP¬’t
->
fP©h
, 
»s2
->fData->fParent->fPath)!=0){

2787  
FALSE
;

2789 if(
	`u´v_¡ºcmp
(
»s1
->
fResP©h
, 
»s2
->fResP©h,„es1->
fResP©hL’
)!=0){

2790  
FALSE
;

2792 if(
»s1
->
fRes
 !ğ
»s2
->fRes){

2793  
FALSE
;

2795  
TRUE
;

2796 
	}
}

2797 
U_INTERNAL
 
UResourûBundË
* 
U_EXPORT2


2798 
	$u»s_şÚe
(cÚ¡ 
UResourûBundË
* 
»s
, 
UE¼ÜCode
* 
¡©us
){

2799 
UResourûBundË
* 
bundË
 = 
NULL
;

2800 
UResourûBundË
* 
»t
 = 
NULL
;

2801 if(
	`U_FAILURE
(*
¡©us
è|| 
»s
 =ğ
NULL
){

2802  
NULL
;

2804 
bundË
 = 
	`u»s_İ’
(
»s
->
fD©a
->
fP©h
,„es->fD©a->
fName
, 
¡©us
);

2805 if(
»s
->
fResP©h
!=
NULL
){

2806 
»t
 = 
	`u»s_fšdSubResourû
(
bundË
, 
»s
->
fResP©h
, 
NULL
, 
¡©us
);

2807 
	`u»s_şo£
(
bundË
);

2809 
»t
 = 
bundË
;

2811  
»t
;

2812 
	}
}

2813 
U_INTERNAL
 cÚ¡ 
UResourûBundË
* 
U_EXPORT2


2814 
	$u»s_g‘P¬’tBundË
(cÚ¡ 
UResourûBundË
* 
»s
){

2815 if(
»s
==
NULL
){

2816  
NULL
;

2818  
»s
->
fP¬’tRes
;

2819 
	}
}

2822 
U_INTERNAL
 
U_EXPORT2


2823 
	$u»s_g‘V”siÚByKey
(cÚ¡ 
UResourûBundË
* 
»s
, cÚ¡ *
key
, 
UV”siÚInfo
 
v”
, 
UE¼ÜCode
 *
¡©us
) {

2824 cÚ¡ 
UCh¬
 *
¡r
;

2825 
št32_t
 
Ën
;

2826 
¡r
 = 
	`u»s_g‘SŒšgByKey
(
»s
, 
key
, &
Ën
, 
¡©us
);

2827 if(
	`U_SUCCESS
(*
¡©us
)) {

2828 
	`u_v”siÚFromUSŒšg
(
v”
, 
¡r
);

2830 
	}
}

	@uresdata.c

22 
	~"unicode/uty³s.h
"

23 
	~"unicode/ud©a.h
"

24 
	~"unicode/u¡ršg.h
"

25 
	~"cmemÜy.h
"

26 
	~"c¡ršg.h
"

27 
	~"u¬rsÜt.h
"

28 
	~"ud©aswp.h
"

29 
	~"ucŞ_swp.h
"

30 
	~"ušvch¬.h
"

31 
	~"u»sd©a.h
"

32 
	~"u»simp.h
"

34 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

41 
	#RES_GET_KEY16
(
pResD©a
, 
keyOff£t
) \

42 ((
keyOff£t
)<(
pResD©a
)->
loÿlKeyLim™
 ? \

43 (cÚ¡ *)(
pResD©a
)->
pRoÙ
+(
keyOff£t
) : \

44 (
pResD©a
)->
poŞBundËKeys
+(
keyOff£t
)-ÕResD©a)->
loÿlKeyLim™
)

	)

46 
	#RES_GET_KEY32
(
pResD©a
, 
keyOff£t
) \

47 ((
keyOff£t
)>=0 ? \

48 (cÚ¡ *)(
pResD©a
)->
pRoÙ
+(
keyOff£t
) : \

49 (
pResD©a
)->
poŞBundËKeys
+((
keyOff£t
)&0x7fffffff))

	)

51 
	#URESDATA_ITEM_NOT_FOUND
 -1

	)

54 cÚ¡ 
ušt16_t
 
	ggEm±y16
=0;

55 cÚ¡ 
št32_t
 
	ggEm±y32
=0;

57 
št32_t
 
	mËngth
;

58 
UCh¬
 
	mnul
;

59 
UCh¬
 
	m·d
;

60 } 
	ggEm±ySŒšg
={ 0, 0, 0 };

67 
št32_t


68 
	$_»s_fšdTabËI‹m
(cÚ¡ 
ResourûD©a
 *
pResD©a
, cÚ¡ 
ušt16_t
 *
keyOff£ts
, 
št32_t
 
Ëngth
,

69 cÚ¡ *
key
, cÚ¡ **
»®Key
) {

70 cÚ¡ *
bËKey
;

71 
št32_t
 
mid
, 
¡¬t
, 
lim™
;

72 
»suÉ
;

75 
¡¬t
=0;

76 
lim™
=
Ëngth
;

77 
¡¬t
<
lim™
) {

78 
mid
 = (
¡¬t
 + 
lim™
) / 2;

79 
bËKey
 = 
	`RES_GET_KEY16
(
pResD©a
, 
keyOff£ts
[
mid
]);

80 ià(
pResD©a
->
u£N©iveSŒcmp
) {

81 
»suÉ
 = 
	`u´v_¡rcmp
(
key
, 
bËKey
);

83 
»suÉ
 = 
	`u´v_com·»InvCh¬sAsAscii
(
key
, 
bËKey
);

85 ià(
»suÉ
 < 0) {

86 
lim™
 = 
mid
;

87 } ià(
»suÉ
 > 0) {

88 
¡¬t
 = 
mid
 + 1;

91 *
»®Key
=
bËKey
;

92  
mid
;

95  
URESDATA_ITEM_NOT_FOUND
;

96 
	}
}

98 
št32_t


99 
	$_»s_fšdTabË32I‹m
(cÚ¡ 
ResourûD©a
 *
pResD©a
, cÚ¡ 
št32_t
 *
keyOff£ts
, iÁ32_ˆ
Ëngth
,

100 cÚ¡ *
key
, cÚ¡ **
»®Key
) {

101 cÚ¡ *
bËKey
;

102 
št32_t
 
mid
, 
¡¬t
, 
lim™
;

103 
»suÉ
;

106 
¡¬t
=0;

107 
lim™
=
Ëngth
;

108 
¡¬t
<
lim™
) {

109 
mid
 = (
¡¬t
 + 
lim™
) / 2;

110 
bËKey
 = 
	`RES_GET_KEY32
(
pResD©a
, 
keyOff£ts
[
mid
]);

111 ià(
pResD©a
->
u£N©iveSŒcmp
) {

112 
»suÉ
 = 
	`u´v_¡rcmp
(
key
, 
bËKey
);

114 
»suÉ
 = 
	`u´v_com·»InvCh¬sAsAscii
(
key
, 
bËKey
);

116 ià(
»suÉ
 < 0) {

117 
lim™
 = 
mid
;

118 } ià(
»suÉ
 > 0) {

119 
¡¬t
 = 
mid
 + 1;

122 *
»®Key
=
bËKey
;

123  
mid
;

126  
URESDATA_ITEM_NOT_FOUND
;

127 
	}
}

131 
UBoŞ
 
U_CALLCONV


132 
	$isAcû±abË
(*
cÚ‹xt
,

133 cÚ¡ *
ty³
, cÚ¡ *
Çme
,

134 cÚ¡ 
UD©aInfo
 *
pInfo
) {

135 
	`u´v_memıy
(
cÚ‹xt
, 
pInfo
->
fÜm©V”siÚ
, 4);

136  (
UBoŞ
)(

137 
pInfo
->
size
>=20 &&

138 
pInfo
->
isBigEndŸn
==
U_IS_BIG_ENDIAN
 &&

139 
pInfo
->
ch¬£tFamy
==
U_CHARSET_FAMILY
 &&

140 
pInfo
->
sizeofUCh¬
==
U_SIZEOF_UCHAR
 &&

141 
pInfo
->
d©aFÜm©
[0]==0x52 &&

142 
pInfo
->
d©aFÜm©
[1]==0x65 &&

143 
pInfo
->
d©aFÜm©
[2]==0x73 &&

144 
pInfo
->
d©aFÜm©
[3]==0x42 &&

145 (
pInfo
->
fÜm©V”siÚ
[0]==1 ||…Info->formatVersion[0]==2));

146 
	}
}

151 
	$»s_š™
(
ResourûD©a
 *
pResD©a
,

152 
UV”siÚInfo
 
fÜm©V”siÚ
, cÚ¡ *
šBy‹s
, 
št32_t
 
Ëngth
,

153 
UE¼ÜCode
 *
”rÜCode
) {

154 
UResTy³
 
roÙTy³
;

157 
pResD©a
->
pRoÙ
=(cÚ¡ 
št32_t
 *)
šBy‹s
;

158 
pResD©a
->
roÙRes
=(
Resourû
)*pResD©a->
pRoÙ
;

159 
pResD©a
->
p16B™Un™s
=&
gEm±y16
;

162 if(
Ëngth
>=0 && (Ëngth/4)<((
fÜm©V”siÚ
[0]==1 && formatVersion[1]==0) ? 1 : 1+5)) {

163 *
”rÜCode
=
U_INVALID_FORMAT_ERROR
;

164 
	`»s_uÆßd
(
pResD©a
);

169 
roÙTy³
=
	`RES_GET_TYPE
(
pResD©a
->
roÙRes
);

170 if(!
	`URES_IS_TABLE
(
roÙTy³
)) {

171 *
”rÜCode
=
U_INVALID_FORMAT_ERROR
;

172 
	`»s_uÆßd
(
pResD©a
);

176 if(
fÜm©V”siÚ
[0]==1 && formatVersion[1]==0) {

177 
pResD©a
->
loÿlKeyLim™
=0x10000;

180 cÚ¡ 
št32_t
 *
šdexes
=
pResD©a
->
pRoÙ
+1;

181 
št32_t
 
šdexL’gth
=
šdexes
[
URES_INDEX_LENGTH
]&0xff;

182 if(
šdexL’gth
<=
URES_INDEX_MAX_TABLE_LENGTH
) {

183 *
”rÜCode
=
U_INVALID_FORMAT_ERROR
;

184 
	`»s_uÆßd
(
pResD©a
);

187 ifĞ
Ëngth
>=0 &&

188 (
Ëngth
<((1+
šdexL’gth
)<<2) ||

189 
Ëngth
<(
šdexes
[
URES_INDEX_BUNDLE_TOP
]<<2))

191 *
”rÜCode
=
U_INVALID_FORMAT_ERROR
;

192 
	`»s_uÆßd
(
pResD©a
);

195 if(
šdexes
[
URES_INDEX_KEYS_TOP
]>(1+
šdexL’gth
)) {

196 
pResD©a
->
loÿlKeyLim™
=
šdexes
[
URES_INDEX_KEYS_TOP
]<<2;

198 if(
šdexL’gth
>
URES_INDEX_ATTRIBUTES
) {

199 
št32_t
 
©t
=
šdexes
[
URES_INDEX_ATTRIBUTES
];

200 
pResD©a
->
noF®lback
=(
UBoŞ
)(
©t
&
URES_ATT_NO_FALLBACK
);

201 
pResD©a
->
isPoŞBundË
=(
UBoŞ
)((
©t
&
URES_ATT_IS_POOL_BUNDLE
)!=0);

202 
pResD©a
->
u£sPoŞBundË
=(
UBoŞ
)((
©t
&
URES_ATT_USES_POOL_BUNDLE
)!=0);

204 if((
pResD©a
->
isPoŞBundË
 ||…ResD©a->
u£sPoŞBundË
è&& 
šdexL’gth
<=
URES_INDEX_POOL_CHECKSUM
) {

205 *
”rÜCode
=
U_INVALID_FORMAT_ERROR
;

206 
	`»s_uÆßd
(
pResD©a
);

209 ifĞ
šdexL’gth
>
URES_INDEX_16BIT_TOP
 &&

210 
šdexes
[
URES_INDEX_16BIT_TOP
]>šdexes[
URES_INDEX_KEYS_TOP
]

212 
pResD©a
->
p16B™Un™s
=(cÚ¡ 
ušt16_t
 *)ÕResD©a->
pRoÙ
+
šdexes
[
URES_INDEX_KEYS_TOP
]);

216 if(
fÜm©V”siÚ
[0]==1 || 
U_CHARSET_FAMILY
==
U_ASCII_FAMILY
) {

221 
pResD©a
->
u£N©iveSŒcmp
=
TRUE
;

223 
	}
}

225 
U_CAPI
 
U_EXPORT2


226 
	$»s_»ad
(
ResourûD©a
 *
pResD©a
,

227 cÚ¡ 
UD©aInfo
 *
pInfo
, cÚ¡ *
šBy‹s
, 
št32_t
 
Ëngth
,

228 
UE¼ÜCode
 *
”rÜCode
) {

229 
UV”siÚInfo
 
fÜm©V”siÚ
;

231 
	`u´v_mem£t
(
pResD©a
, 0, (
ResourûD©a
));

232 if(
	`U_FAILURE
(*
”rÜCode
)) {

235 if(!
	`isAcû±abË
(
fÜm©V”siÚ
, 
NULL
, NULL, 
pInfo
)) {

236 *
”rÜCode
=
U_INVALID_FORMAT_ERROR
;

239 
	`»s_š™
(
pResD©a
, 
fÜm©V”siÚ
, 
šBy‹s
, 
Ëngth
, 
”rÜCode
);

240 
	}
}

242 
U_CFUNC
 

243 
	$»s_lßd
(
ResourûD©a
 *
pResD©a
,

244 cÚ¡ *
·th
, cÚ¡ *
Çme
, 
UE¼ÜCode
 *
”rÜCode
) {

245 
UV”siÚInfo
 
fÜm©V”siÚ
;

247 
	`u´v_mem£t
(
pResD©a
, 0, (
ResourûD©a
));

250 
pResD©a
->
d©a
=
	`ud©a_İ’Choiû
(
·th
, "»s", 
Çme
, 
isAcû±abË
, 
fÜm©V”siÚ
, 
”rÜCode
);

251 if(
	`U_FAILURE
(*
”rÜCode
)) {

256 
	`»s_š™
(
pResD©a
, 
fÜm©V”siÚ
, 
	`ud©a_g‘MemÜy
ÕResD©a->
d©a
), -1, 
”rÜCode
);

257 
	}
}

259 
U_CFUNC
 

260 
	$»s_uÆßd
(
ResourûD©a
 *
pResD©a
) {

261 if(
pResD©a
->
d©a
!=
NULL
) {

262 
	`ud©a_şo£
(
pResD©a
->
d©a
);

263 
pResD©a
->
d©a
=
NULL
;

265 
	}
}

267 cÚ¡ 
št8_t
 
	ggPublicTy³s
[
URES_LIMIT
] = {

268 
URES_STRING
,

269 
URES_BINARY
,

270 
URES_TABLE
,

271 
URES_ALIAS
,

273 
URES_TABLE
,

274 
URES_TABLE
,

275 
URES_STRING
,

276 
URES_INT
,

278 
URES_ARRAY
,

279 
URES_ARRAY
,

280 
URES_NONE
,

281 
URES_NONE
,

283 
URES_NONE
,

284 
URES_NONE
,

285 
URES_INT_VECTOR
,

286 
URES_NONE


289 
U_CAPI
 
UResTy³
 
U_EXPORT2


290 
	$»s_g‘PublicTy³
(
Resourû
 
»s
) {

291  (
UResTy³
)
gPublicTy³s
[
	`RES_GET_TYPE
(
»s
)];

292 
	}
}

294 
U_CAPI
 cÚ¡ 
UCh¬
 * 
U_EXPORT2


295 
	$»s_g‘SŒšg
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
»s
, 
št32_t
 *
pL’gth
) {

296 cÚ¡ 
UCh¬
 *
p
;

297 
ušt32_t
 
off£t
=
	`RES_GET_OFFSET
(
»s
);

298 
št32_t
 
Ëngth
;

299 if(
	`RES_GET_TYPE
(
»s
)==
URES_STRING_V2
) {

300 
št32_t
 
fœ¡
;

301 
p
=(cÚ¡ 
UCh¬
 *)(
pResD©a
->
p16B™Un™s
+
off£t
);

302 
fœ¡
=*
p
;

303 if(!
	`U16_IS_TRAIL
(
fœ¡
)) {

304 
Ëngth
=
	`u_¡¾’
(
p
);

305 } if(
fœ¡
<0xdfef) {

306 
Ëngth
=
fœ¡
&0x3ff;

307 ++
p
;

308 } if(
fœ¡
<0xdfff) {

309 
Ëngth
=((
fœ¡
-0xdãf)<<16)|
p
[1];

310 
p
+=2;

312 
Ëngth
=((
št32_t
)
p
[1]<<16)|p[2];

313 
p
+=3;

315 } if(
»s
==
off£t
) {

316 cÚ¡ 
št32_t
 *
p32
ğ
»s
==0 ? &
gEm±ySŒšg
.
Ëngth
 : 
pResD©a
->
pRoÙ
+res;

317 
Ëngth
=*
p32
++;

318 
p
=(cÚ¡ 
UCh¬
 *)
p32
;

320 
p
=
NULL
;

321 
Ëngth
=0;

323 if(
pL’gth
) {

324 *
pL’gth
=
Ëngth
;

326  
p
;

327 
	}
}

329 
U_CAPI
 cÚ¡ 
UCh¬
 * 
U_EXPORT2


330 
	$»s_g‘AlŸs
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
»s
, 
št32_t
 *
pL’gth
) {

331 cÚ¡ 
UCh¬
 *
p
;

332 
ušt32_t
 
off£t
=
	`RES_GET_OFFSET
(
»s
);

333 
št32_t
 
Ëngth
;

334 if(
	`RES_GET_TYPE
(
»s
)==
URES_ALIAS
) {

335 cÚ¡ 
št32_t
 *
p32
ğ
off£t
==0 ? &
gEm±ySŒšg
.
Ëngth
 : 
pResD©a
->
pRoÙ
+offset;

336 
Ëngth
=*
p32
++;

337 
p
=(cÚ¡ 
UCh¬
 *)
p32
;

339 
p
=
NULL
;

340 
Ëngth
=0;

342 if(
pL’gth
) {

343 *
pL’gth
=
Ëngth
;

345  
p
;

346 
	}
}

348 
U_CAPI
 cÚ¡ 
ušt8_t
 * 
U_EXPORT2


349 
	$»s_g‘Bš¬y
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
»s
, 
št32_t
 *
pL’gth
) {

350 cÚ¡ 
ušt8_t
 *
p
;

351 
ušt32_t
 
off£t
=
	`RES_GET_OFFSET
(
»s
);

352 
št32_t
 
Ëngth
;

353 if(
	`RES_GET_TYPE
(
»s
)==
URES_BINARY
) {

354 cÚ¡ 
št32_t
 *
p32
ğ
off£t
==0 ? &
gEm±y32
 : 
pResD©a
->
pRoÙ
+offset;

355 
Ëngth
=*
p32
++;

356 
p
=(cÚ¡ 
ušt8_t
 *)
p32
;

358 
p
=
NULL
;

359 
Ëngth
=0;

361 if(
pL’gth
) {

362 *
pL’gth
=
Ëngth
;

364  
p
;

365 
	}
}

368 
U_CAPI
 cÚ¡ 
št32_t
 * 
U_EXPORT2


369 
	$»s_g‘IÁVeùÜ
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
»s
, 
št32_t
 *
pL’gth
) {

370 cÚ¡ 
št32_t
 *
p
;

371 
ušt32_t
 
off£t
=
	`RES_GET_OFFSET
(
»s
);

372 
št32_t
 
Ëngth
;

373 if(
	`RES_GET_TYPE
(
»s
)==
URES_INT_VECTOR
) {

374 
p
ğ
off£t
==0 ? &
gEm±y32
 : 
pResD©a
->
pRoÙ
+offset;

375 
Ëngth
=*
p
++;

377 
p
=
NULL
;

378 
Ëngth
=0;

380 if(
pL’gth
) {

381 *
pL’gth
=
Ëngth
;

383  
p
;

384 
	}
}

386 
U_CAPI
 
št32_t
 
U_EXPORT2


387 
	$»s_couÁA¼ayI‹ms
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
»s
) {

388 
ušt32_t
 
off£t
=
	`RES_GET_OFFSET
(
»s
);

389 
	`RES_GET_TYPE
(
»s
)) {

390 
URES_STRING
:

391 
URES_STRING_V2
:

392 
URES_BINARY
:

393 
URES_ALIAS
:

394 
URES_INT
:

395 
URES_INT_VECTOR
:

397 
URES_ARRAY
:

398 
URES_TABLE32
:

399  
off£t
==0 ? 0 : *(
pResD©a
->
pRoÙ
+offset);

400 
URES_TABLE
:

401  
off£t
==0 ? 0 : *((cÚ¡ 
ušt16_t
 *)(
pResD©a
->
pRoÙ
+offset));

402 
URES_ARRAY16
:

403 
URES_TABLE16
:

404  
pResD©a
->
p16B™Un™s
[
off£t
];

408 
	}
}

410 
U_CAPI
 
Resourû
 
U_EXPORT2


411 
	$»s_g‘TabËI‹mByKey
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
bË
,

412 
št32_t
 *
šdexR
, cÚ¡ **
key
) {

413 
ušt32_t
 
off£t
=
	`RES_GET_OFFSET
(
bË
);

414 
št32_t
 
Ëngth
;

415 
št32_t
 
idx
;

416 if(
key
 =ğ
NULL
 || *key == NULL) {

417  
RES_BOGUS
;

419 
	`RES_GET_TYPE
(
bË
)) {

420 
URES_TABLE
: {

421 cÚ¡ 
ušt16_t
 *
p
ğ
off£t
==0 ? &
gEm±y16
 : (cÚ¡ ušt16_ˆ*)(
pResD©a
->
pRoÙ
+offset);

422 
Ëngth
=*
p
++;

423 *
šdexR
=
idx
=
	`_»s_fšdTabËI‹m
(
pResD©a
, 
p
, 
Ëngth
, *
key
, key);

424 if(
idx
>=0) {

425 cÚ¡ 
Resourû
 *
p32
=(cÚ¡ Resourû *)(
p
+
Ëngth
+(~length&1));

426  
p32
[
idx
];

430 
URES_TABLE16
: {

431 cÚ¡ 
ušt16_t
 *
p
=
pResD©a
->
p16B™Un™s
+
off£t
;

432 
Ëngth
=*
p
++;

433 *
šdexR
=
idx
=
	`_»s_fšdTabËI‹m
(
pResD©a
, 
p
, 
Ëngth
, *
key
, key);

434 if(
idx
>=0) {

435  
	`URES_MAKE_RESOURCE
(
URES_STRING_V2
, 
p
[
Ëngth
+
idx
]);

439 
URES_TABLE32
: {

440 cÚ¡ 
št32_t
 *
p
ğ
off£t
==0 ? &
gEm±y32
 : 
pResD©a
->
pRoÙ
+offset;

441 
Ëngth
=*
p
++;

442 *
šdexR
=
idx
=
	`_»s_fšdTabË32I‹m
(
pResD©a
, 
p
, 
Ëngth
, *
key
, key);

443 if(
idx
>=0) {

444  (
Resourû
)
p
[
Ëngth
+
idx
];

451  
RES_BOGUS
;

452 
	}
}

454 
U_CAPI
 
Resourû
 
U_EXPORT2


455 
	$»s_g‘TabËI‹mByIndex
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
bË
,

456 
št32_t
 
šdexR
, cÚ¡ **
key
) {

457 
ušt32_t
 
off£t
=
	`RES_GET_OFFSET
(
bË
);

458 
št32_t
 
Ëngth
;

459 
	`RES_GET_TYPE
(
bË
)) {

460 
URES_TABLE
: {

461 cÚ¡ 
ušt16_t
 *
p
ğ
off£t
==0 ? &
gEm±y16
 : (cÚ¡ ušt16_ˆ*)(
pResD©a
->
pRoÙ
+offset);

462 
Ëngth
=*
p
++;

463 if(
šdexR
<
Ëngth
) {

464 cÚ¡ 
Resourû
 *
p32
=(cÚ¡ Resourû *)(
p
+
Ëngth
+(~length&1));

465 if(
key
!=
NULL
) {

466 *
key
=
	`RES_GET_KEY16
(
pResD©a
, 
p
[
šdexR
]);

468  
p32
[
šdexR
];

472 
URES_TABLE16
: {

473 cÚ¡ 
ušt16_t
 *
p
=
pResD©a
->
p16B™Un™s
+
off£t
;

474 
Ëngth
=*
p
++;

475 if(
šdexR
<
Ëngth
) {

476 if(
key
!=
NULL
) {

477 *
key
=
	`RES_GET_KEY16
(
pResD©a
, 
p
[
šdexR
]);

479  
	`URES_MAKE_RESOURCE
(
URES_STRING_V2
, 
p
[
Ëngth
+
šdexR
]);

483 
URES_TABLE32
: {

484 cÚ¡ 
št32_t
 *
p
ğ
off£t
==0 ? &
gEm±y32
 : 
pResD©a
->
pRoÙ
+offset;

485 
Ëngth
=*
p
++;

486 if(
šdexR
<
Ëngth
) {

487 if(
key
!=
NULL
) {

488 *
key
=
	`RES_GET_KEY32
(
pResD©a
, 
p
[
šdexR
]);

490  (
Resourû
)
p
[
Ëngth
+
šdexR
];

497  
RES_BOGUS
;

498 
	}
}

500 
U_CAPI
 
Resourû
 
U_EXPORT2


501 
	$»s_g‘Resourû
(cÚ¡ 
ResourûD©a
 *
pResD©a
, cÚ¡ *
key
) {

502 cÚ¡ *
»®Key
=
key
;

503 
št32_t
 
idx
;

504  
	`»s_g‘TabËI‹mByKey
(
pResD©a
,…ResD©a->
roÙRes
, &
idx
, &
»®Key
);

505 
	}
}

507 
U_CAPI
 
Resourû
 
U_EXPORT2


508 
	$»s_g‘A¼ayI‹m
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
¬¿y
, 
št32_t
 
šdexR
) {

509 
ušt32_t
 
off£t
=
	`RES_GET_OFFSET
(
¬¿y
);

510 
	`RES_GET_TYPE
(
¬¿y
)) {

511 
URES_ARRAY
: {

512 cÚ¡ 
št32_t
 *
p
ğ
off£t
==0 ? &
gEm±y32
 : 
pResD©a
->
pRoÙ
+offset;

513 if(
šdexR
<*
p
) {

514  (
Resourû
)
p
[1+
šdexR
];

518 
URES_ARRAY16
: {

519 cÚ¡ 
ušt16_t
 *
p
=
pResD©a
->
p16B™Un™s
+
off£t
;

520 if(
šdexR
<*
p
) {

521  
	`URES_MAKE_RESOURCE
(
URES_STRING_V2
, 
p
[1+
šdexR
]);

528  
RES_BOGUS
;

529 
	}
}

531 
U_CFUNC
 
Resourû


532 
	$»s_fšdResourû
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
r
, ** 
·th
, cÚ¡ ** 
key
) {

538 *
·thP
 = *
·th
, *
ÃxtS•P
 = *path;

539 *
şo£Index
 = 
NULL
;

540 
Resourû
 
t1
 = 
r
;

541 
Resourû
 
t2
;

542 
št32_t
 
šdexR
 = 0;

543 
UResTy³
 
ty³
 = 
	`RES_GET_TYPE
(
t1
);

546 if(!
	`u´v_¡¾’
(
·thP
)) {

547  
r
;

551 if(!
	`URES_IS_CONTAINER
(
ty³
)) {

552  
RES_BOGUS
;

555 
ÃxtS•P
 && *
·thP
 && 
t1
 !ğ
RES_BOGUS
 && 
	`URES_IS_CONTAINER
(
ty³
)) {

559 
ÃxtS•P
 = 
	`u´v_¡rchr
(
·thP
, 
RES_PATH_SEPARATOR
);

563 if(
ÃxtS•P
 !ğ
NULL
) {

564 *
ÃxtS•P
 = 0;

565 *
·th
 = 
ÃxtS•P
+1;

567 *
·th
 = 
	`u´v_¡rchr
(
·thP
, 0);

572 if(
	`URES_IS_TABLE
(
ty³
)) {

573 *
key
 = 
·thP
;

574 
t2
 = 
	`»s_g‘TabËI‹mByKey
(
pResD©a
, 
t1
, &
šdexR
, 
key
);

575 if(
t2
 =ğ
RES_BOGUS
) {

577 
šdexR
 = 
	`u´v_¡¹Ş
(
·thP
, &
şo£Index
, 10);

578 if(
şo£Index
 !ğ
·thP
) {

580 
t2
 = 
	`»s_g‘TabËI‹mByIndex
(
pResD©a
, 
t1
, 
šdexR
, 
key
);

583 } if(
	`URES_IS_ARRAY
(
ty³
)) {

584 
šdexR
 = 
	`u´v_¡¹Ş
(
·thP
, &
şo£Index
, 10);

585 if(
şo£Index
 !ğ
·thP
) {

586 
t2
 = 
	`»s_g‘A¼ayI‹m
(
pResD©a
, 
t1
, 
šdexR
);

588 
t2
 = 
RES_BOGUS
;

590 *
key
 = 
NULL
;

592 
t2
 = 
RES_BOGUS
;

594 
t1
 = 
t2
;

595 
ty³
 = 
	`RES_GET_TYPE
(
t1
);

597 
·thP
 = *
·th
;

600  
t1
;

601 
	}
}

636 
	sRow
 {

637 
št32_t
 
	mkeyIndex
, 
	msÜtIndex
;

638 } 
	tRow
;

640 
št32_t


641 
	$u»s_com·»Rows
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
Ëá
, cÚ¡ *
right
) {

642 cÚ¡ *
keyCh¬s
=(cÚ¡ *)
cÚ‹xt
;

643  (
št32_t
)
	`u´v_¡rcmp
(
keyCh¬s
+((cÚ¡ 
Row
 *)
Ëá
)->
keyIndex
,

644 
keyCh¬s
+((cÚ¡ 
Row
 *)
right
)->
keyIndex
);

645 
	}
}

647 
	sTempTabË
 {

648 cÚ¡ *
	mkeyCh¬s
;

649 
Row
 *
	mrows
;

650 
št32_t
 *
	m»sÜt
;

651 
ušt32_t
 *
	m»sFÏgs
;

652 
št32_t
 
	mloÿlKeyLim™
;

653 
ušt8_t
 
	mmajÜFÜm©V”siÚ
;

654 } 
	tTempTabË
;

657 
	mSTACK_ROW_CAPACITY
=200

661 cÚ¡ *cÚ¡ 
	ggUnknownKey
="";

664 cÚ¡ 
UCh¬
 
	ggCŞÏtiÚBšKey
[]={

675 
	$u»s_sw­Resourû
(cÚ¡ 
UD©aSw­³r
 *
ds
,

676 cÚ¡ 
Resourû
 *
šBundË
, Resourû *
outBundË
,

677 
Resourû
 
»s
,

678 cÚ¡ *
key
,

679 
TempTabË
 *
pTempTabË
,

680 
UE¼ÜCode
 *
pE¼ÜCode
) {

681 cÚ¡ 
Resourû
 *
p
;

682 
Resourû
 *
q
;

683 
št32_t
 
off£t
, 
couÁ
;

685 
	`RES_GET_TYPE
(
»s
)) {

686 
URES_TABLE16
:

687 
URES_STRING_V2
:

688 
URES_INT
:

689 
URES_ARRAY16
:

697 
off£t
=(
št32_t
)
	`RES_GET_OFFSET
(
»s
);

698 if(
off£t
==0) {

702 if(
pTempTabË
->
»sFÏgs
[
off£t
>>5]&((
ušt32_t
)1<<(offset&0x1f))) {

707 
pTempTabË
->
»sFÏgs
[
off£t
>>5]|=((
ušt32_t
)1<<(offset&0x1f));

710 
p
=
šBundË
+
off£t
;

711 
q
=
outBundË
+
off£t
;

713 
	`RES_GET_TYPE
(
»s
)) {

714 
URES_ALIAS
:

716 
URES_STRING
:

717 
couÁ
=
	`ud©a_»adIÁ32
(
ds
, (
št32_t
)*
p
);

719 
ds
->
	`sw­A¼ay32
(ds, 
p
, 4, 
q
, 
pE¼ÜCode
);

721 
ds
->
	`sw­A¼ay16
(ds, 
p
+1, 2*
couÁ
, 
q
+1, 
pE¼ÜCode
);

723 
URES_BINARY
:

724 
couÁ
=
	`ud©a_»adIÁ32
(
ds
, (
št32_t
)*
p
);

726 
ds
->
	`sw­A¼ay32
(ds, 
p
, 4, 
q
, 
pE¼ÜCode
);

730 #ià!
UCONFIG_NO_COLLATION


731 ifĞ
key
!=
NULL
 &&

732 (
key
!=
gUnknownKey
 ?

734 0==
ds
->
	`com·»InvCh¬s
(ds, 
key
, -1,

735 
gCŞÏtiÚBšKey
, 
	`LENGTHOF
(gCollationBinKey)-1) :

737 
	`ucŞ_looksLikeCŞÏtiÚBš¬y
(
ds
, 
p
+1, 
couÁ
))

739 
	`ucŞ_sw­Bš¬y
(
ds
, 
p
+1, 
couÁ
, 
q
+1, 
pE¼ÜCode
);

743 
URES_TABLE
:

744 
URES_TABLE32
:

746 cÚ¡ 
ušt16_t
 *
pKey16
;

747 
ušt16_t
 *
qKey16
;

749 cÚ¡ 
št32_t
 *
pKey32
;

750 
št32_t
 *
qKey32
;

752 
Resourû
 
™em
;

753 
št32_t
 
i
, 
ŞdIndex
;

755 if(
	`RES_GET_TYPE
(
»s
)==
URES_TABLE
) {

757 
pKey16
=(cÚ¡ 
ušt16_t
 *)
p
;

758 
qKey16
=(
ušt16_t
 *)
q
;

759 
couÁ
=
ds
->
	`»adUIÁ16
(*
pKey16
);

761 
pKey32
=
qKey32
=
NULL
;

764 
ds
->
	`sw­A¼ay16
(ds, 
pKey16
++, 2, 
qKey16
++, 
pE¼ÜCode
);

766 
off£t
+=((1+
couÁ
)+1)/2;

769 
pKey32
=(cÚ¡ 
št32_t
 *)
p
;

770 
qKey32
=(
št32_t
 *)
q
;

771 
couÁ
=
	`ud©a_»adIÁ32
(
ds
, *
pKey32
);

773 
pKey16
=
qKey16
=
NULL
;

776 
ds
->
	`sw­A¼ay32
(ds, 
pKey32
++, 4, 
qKey32
++, 
pE¼ÜCode
);

778 
off£t
+=1+
couÁ
;

781 if(
couÁ
==0) {

785 
p
=
šBundË
+
off£t
;

786 
q
=
outBundË
+
off£t
;

789 
i
=0; i<
couÁ
; ++i) {

790 cÚ¡ *
™emKey
=
gUnknownKey
;

791 if(
pKey16
!=
NULL
) {

792 
št32_t
 
keyOff£t
=
ds
->
	`»adUIÁ16
(
pKey16
[
i
]);

793 if(
keyOff£t
<
pTempTabË
->
loÿlKeyLim™
) {

794 
™emKey
=(cÚ¡ *)
outBundË
+
keyOff£t
;

797 
št32_t
 
keyOff£t
=
	`ud©a_»adIÁ32
(
ds
, 
pKey32
[
i
]);

798 if(
keyOff£t
>=0) {

799 
™emKey
=(cÚ¡ *)
outBundË
+
keyOff£t
;

802 
™em
=
ds
->
	`»adUIÁ32
(
p
[
i
]);

803 
	`u»s_sw­Resourû
(
ds
, 
šBundË
, 
outBundË
, 
™em
, 
™emKey
, 
pTempTabË
, 
pE¼ÜCode
);

804 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

805 
	`ud©a_´štE¼Ü
(
ds
, "ures_swapResource(table„es=%08x)[%d].recurse(%08x) failed\n",

806 
»s
, 
i
, 
™em
);

811 if(
pTempTabË
->
majÜFÜm©V”siÚ
>1 || 
ds
->
šCh¬£t
==ds->
outCh¬£t
) {

813 if(
pKey16
!=
NULL
) {

814 
ds
->
	`sw­A¼ay16
(ds, 
pKey16
, 
couÁ
*2, 
qKey16
, 
pE¼ÜCode
);

815 
ds
->
	`sw­A¼ay32
(ds, 
p
, 
couÁ
*4, 
q
, 
pE¼ÜCode
);

818 
ds
->
	`sw­A¼ay32
(ds, 
pKey32
, 
couÁ
*2*4, 
qKey32
, 
pE¼ÜCode
);

831 if(
pKey16
!=
NULL
) {

832 
i
=0; i<
couÁ
; ++i) {

833 
pTempTabË
->
rows
[
i
].
keyIndex
=
ds
->
	`»adUIÁ16
(
pKey16
[i]);

834 
pTempTabË
->
rows
[
i
].
sÜtIndex
=i;

837 
i
=0; i<
couÁ
; ++i) {

838 
pTempTabË
->
rows
[
i
].
keyIndex
=
	`ud©a_»adIÁ32
(
ds
, 
pKey32
[i]);

839 
pTempTabË
->
rows
[
i
].
sÜtIndex
=i;

842 
	`u´v_sÜtA¼ay
(
pTempTabË
->
rows
, 
couÁ
, (
Row
),

843 
u»s_com·»Rows
, 
pTempTabË
->
keyCh¬s
,

844 
FALSE
, 
pE¼ÜCode
);

845 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

846 
	`ud©a_´štE¼Ü
(
ds
, "ures_swapResource(table„es=%08x).uprv_sortArray(%d items) failed\n",

847 
»s
, 
couÁ
);

859 if(
pKey16
!=
NULL
) {

860 
ušt16_t
 *
rKey16
;

862 if(
pKey16
!=
qKey16
) {

863 
rKey16
=
qKey16
;

865 
rKey16
=(
ušt16_t
 *)
pTempTabË
->
»sÜt
;

867 
i
=0; i<
couÁ
; ++i) {

868 
ŞdIndex
=
pTempTabË
->
rows
[
i
].
sÜtIndex
;

869 
ds
->
	`sw­A¼ay16
(ds, 
pKey16
+
ŞdIndex
, 2, 
rKey16
+
i
, 
pE¼ÜCode
);

871 if(
qKey16
!=
rKey16
) {

872 
	`u´v_memıy
(
qKey16
, 
rKey16
, 2*
couÁ
);

875 
št32_t
 *
rKey32
;

877 if(
pKey32
!=
qKey32
) {

878 
rKey32
=
qKey32
;

880 
rKey32
=
pTempTabË
->
»sÜt
;

882 
i
=0; i<
couÁ
; ++i) {

883 
ŞdIndex
=
pTempTabË
->
rows
[
i
].
sÜtIndex
;

884 
ds
->
	`sw­A¼ay32
(ds, 
pKey32
+
ŞdIndex
, 4, 
rKey32
+
i
, 
pE¼ÜCode
);

886 if(
qKey32
!=
rKey32
) {

887 
	`u´v_memıy
(
qKey32
, 
rKey32
, 4*
couÁ
);

893 
Resourû
 *
r
;

896 if(
p
!=
q
) {

897 
r
=
q
;

899 
r
=(
Resourû
 *)
pTempTabË
->
»sÜt
;

901 
i
=0; i<
couÁ
; ++i) {

902 
ŞdIndex
=
pTempTabË
->
rows
[
i
].
sÜtIndex
;

903 
ds
->
	`sw­A¼ay32
(ds, 
p
+
ŞdIndex
, 4, 
r
+
i
, 
pE¼ÜCode
);

905 if(
q
!=
r
) {

906 
	`u´v_memıy
(
q
, 
r
, 4*
couÁ
);

911 
URES_ARRAY
:

913 
Resourû
 
™em
;

914 
št32_t
 
i
;

916 
couÁ
=
	`ud©a_»adIÁ32
(
ds
, (
št32_t
)*
p
);

918 
ds
->
	`sw­A¼ay32
(ds, 
p
++, 4, 
q
++, 
pE¼ÜCode
);

921 
i
=0; i<
couÁ
; ++i) {

922 
™em
=
ds
->
	`»adUIÁ32
(
p
[
i
]);

923 
	`u»s_sw­Resourû
(
ds
, 
šBundË
, 
outBundË
, 
™em
, 
NULL
, 
pTempTabË
, 
pE¼ÜCode
);

924 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

925 
	`ud©a_´štE¼Ü
(
ds
, "ures_swapResource(array„es=%08x)[%d].recurse(%08x) failed\n",

926 
»s
, 
i
, 
™em
);

932 
ds
->
	`sw­A¼ay32
(ds, 
p
, 4*
couÁ
, 
q
, 
pE¼ÜCode
);

935 
URES_INT_VECTOR
:

936 
couÁ
=
	`ud©a_»adIÁ32
(
ds
, (
št32_t
)*
p
);

938 
ds
->
	`sw­A¼ay32
(ds, 
p
, 4*(1+
couÁ
), 
q
, 
pE¼ÜCode
);

942 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

945 
	}
}

947 
U_CAPI
 
št32_t
 
U_EXPORT2


948 
	$u»s_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

949 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

950 
UE¼ÜCode
 *
pE¼ÜCode
) {

951 cÚ¡ 
UD©aInfo
 *
pInfo
;

952 cÚ¡ 
Resourû
 *
šBundË
;

953 
Resourû
 
roÙRes
;

954 
št32_t
 
h—d”Size
, 
maxTabËL’gth
;

956 
Row
 
rows
[
STACK_ROW_CAPACITY
];

957 
št32_t
 
»sÜt
[
STACK_ROW_CAPACITY
];

958 
TempTabË
 
‹mpTabË
;

960 cÚ¡ 
št32_t
 *
šIndexes
;

963 
št32_t
 
bundËL’gth
, 
šdexL’gth
, 
keysBÙtom
, 
keysTİ
, 
»sBÙtom
, 
tİ
;

966 
h—d”Size
=
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
pE¼ÜCode
);

967 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

972 
pInfo
=(cÚ¡ 
UD©aInfo
 *)((cÚ¡ *)
šD©a
+4);

974 
pInfo
->
d©aFÜm©
[0]==0x52 &&

975 
pInfo
->
d©aFÜm©
[1]==0x65 &&

976 
pInfo
->
d©aFÜm©
[2]==0x73 &&

977 
pInfo
->
d©aFÜm©
[3]==0x42 &&

978 ((
pInfo
->
fÜm©V”siÚ
[0]==1 &&…Info->formatVersion[1]>=1) ||

979 
pInfo
->
fÜm©V”siÚ
[0]==2)

981 
	`ud©a_´štE¼Ü
(
ds
, "ures_swap(): data format %02x.%02x.%02x.%02x (format version %02x.%02x) is‚ot‡„esource bundle\n",

982 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

983 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3],

984 
pInfo
->
fÜm©V”siÚ
[0],…Info->formatVersion[1]);

985 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

988 
‹mpTabË
.
majÜFÜm©V”siÚ
=
pInfo
->
fÜm©V”siÚ
[0];

991 if(
Ëngth
<0) {

992 
bundËL’gth
=-1;

994 
bundËL’gth
=(
Ëngth
-
h—d”Size
)/4;

997 if(
bundËL’gth
<(1+5)) {

998 
	`ud©a_´štE¼Ü
(
ds
, "ures_swap():oo few bytes (%d‡fter header) for‡„esource bundle\n",

999 
Ëngth
-
h—d”Size
);

1000 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1005 
šBundË
=(cÚ¡ 
Resourû
 *)((cÚ¡ *)
šD©a
+
h—d”Size
);

1006 
roÙRes
=
ds
->
	`»adUIÁ32
(*
šBundË
);

1009 
šIndexes
=(cÚ¡ 
št32_t
 *)(
šBundË
+1);

1011 
šdexL’gth
=
	`ud©a_»adIÁ32
(
ds
, 
šIndexes
[
URES_INDEX_LENGTH
])&0xff;

1012 if(
šdexL’gth
<=
URES_INDEX_MAX_TABLE_LENGTH
) {

1013 
	`ud©a_´štE¼Ü
(
ds
, "ures_swap():oo few indexes for‡ 1.1+„esource bundle\n");

1014 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1017 
keysBÙtom
=1+
šdexL’gth
;

1018 
keysTİ
=
	`ud©a_»adIÁ32
(
ds
, 
šIndexes
[
URES_INDEX_KEYS_TOP
]);

1019 if(
šdexL’gth
>
URES_INDEX_16BIT_TOP
) {

1020 
»sBÙtom
=
	`ud©a_»adIÁ32
(
ds
, 
šIndexes
[
URES_INDEX_16BIT_TOP
]);

1022 
»sBÙtom
=
keysTİ
;

1024 
tİ
=
	`ud©a_»adIÁ32
(
ds
, 
šIndexes
[
URES_INDEX_BUNDLE_TOP
]);

1025 
maxTabËL’gth
=
	`ud©a_»adIÁ32
(
ds
, 
šIndexes
[
URES_INDEX_MAX_TABLE_LENGTH
]);

1027 if(0<=
bundËL’gth
 && bundËL’gth<
tİ
) {

1028 
	`ud©a_´štE¼Ü
(
ds
, "ures_swap():„esourceop %dƒxceeds bundle†ength %d\n",

1029 
tİ
, 
bundËL’gth
);

1030 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1033 if(
keysTİ
>(1+
šdexL’gth
)) {

1034 
‹mpTabË
.
loÿlKeyLim™
=
keysTİ
<<2;

1036 
‹mpTabË
.
loÿlKeyLim™
=0;

1039 if(
Ëngth
>=0) {

1040 
Resourû
 *
outBundË
=(Resourû *)((*)
outD©a
+
h—d”Size
);

1043 
ušt32_t
 
¡ackResFÏgs
[
STACK_ROW_CAPACITY
];

1044 
št32_t
 
»sFÏgsL’gth
;

1054 
»sFÏgsL’gth
=(
Ëngth
+31)>>5;

1055 
»sFÏgsL’gth
=(resFlagsLength+3)&~3;

1056 if(
»sFÏgsL’gth
<=(
¡ackResFÏgs
)) {

1057 
‹mpTabË
.
»sFÏgs
=
¡ackResFÏgs
;

1059 
‹mpTabË
.
»sFÏgs
=(
ušt32_t
 *)
	`u´v_m®loc
(
»sFÏgsL’gth
);

1060 if(
‹mpTabË
.
»sFÏgs
==
NULL
) {

1061 
	`ud©a_´štE¼Ü
(
ds
, "ures_swap(): unableo‡llocate memory forracking„esources\n");

1062 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1066 
	`u´v_mem£t
(
‹mpTabË
.
»sFÏgs
, 0, 
»sFÏgsL’gth
);

1069 if(
šD©a
!=
outD©a
) {

1070 
	`u´v_memıy
(
outBundË
, 
šBundË
, 4*
tİ
);

1074 
	`ud©a_sw­InvSŒšgBlock
(
ds
, 
šBundË
+
keysBÙtom
, 4*(
keysTİ
-keysBottom),

1075 
outBundË
+
keysBÙtom
, 
pE¼ÜCode
);

1076 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1077 
	`ud©a_´štE¼Ü
(
ds
, "u»s_sw­().ud©a_sw­InvSŒšgBlock(keys[%d]èçed\n", 4*(
keysTİ
-
keysBÙtom
));

1082 if(
keysTİ
<
»sBÙtom
) {

1083 
ds
->
	`sw­A¼ay16
(ds, 
šBundË
+
keysTİ
, (
»sBÙtom
-keysTİ)*4, 
outBundË
+keysTİ, 
pE¼ÜCode
);

1084 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1085 
	`ud©a_´štE¼Ü
(
ds
, "u»s_sw­().sw­A¼ay16(16-b™ un™s[%d]èçed\n", 2*(
»sBÙtom
-
keysTİ
));

1091 
‹mpTabË
.
keyCh¬s
=(cÚ¡ *)
outBundË
;

1092 if(
‹mpTabË
.
majÜFÜm©V”siÚ
>1 || 
maxTabËL’gth
<=
STACK_ROW_CAPACITY
) {

1093 
‹mpTabË
.
rows
=rows;

1094 
‹mpTabË
.
»sÜt
=resort;

1096 
‹mpTabË
.
rows
=(
Row
 *)
	`u´v_m®loc
(
maxTabËL’gth
*(Row)+maxTableLength*4);

1097 if(
‹mpTabË
.
rows
==
NULL
) {

1098 
	`ud©a_´štE¼Ü
(
ds
, "ures_swap(): unableo‡llocate memory for sortingables (max†ength: %d)\n",

1099 
maxTabËL’gth
);

1100 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1101 if(
‹mpTabË
.
»sFÏgs
!=
¡ackResFÏgs
) {

1102 
	`u´v_ä“
(
‹mpTabË
.
»sFÏgs
);

1106 
‹mpTabË
.
»sÜt
=(
št32_t
 *)ÑempTabË.
rows
+
maxTabËL’gth
);

1110 
	`u»s_sw­Resourû
(
ds
, 
šBundË
, 
outBundË
, 
roÙRes
, 
NULL
, &
‹mpTabË
, 
pE¼ÜCode
);

1111 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1112 
	`ud©a_´štE¼Ü
(
ds
, "ures_swapResource(root„es=%08x) failed\n",

1113 
roÙRes
);

1116 if(
‹mpTabË
.
rows
!=rows) {

1117 
	`u´v_ä“
(
‹mpTabË
.
rows
);

1119 if(
‹mpTabË
.
»sFÏgs
!=
¡ackResFÏgs
) {

1120 
	`u´v_ä“
(
‹mpTabË
.
»sFÏgs
);

1124 
ds
->
	`sw­A¼ay32
(ds, 
šBundË
, 
keysBÙtom
*4, 
outBundË
, 
pE¼ÜCode
);

1127  
h—d”Size
+4*
tİ
;

1128 
	}
}

	@uresdata.h

18 #iâdeà
__RESDATA_H__


19 
	#__RESDATA_H__


	)

21 
	~"unicode/uty³s.h
"

22 
	~"unicode/ud©a.h
"

23 
	~"unicode/u»s.h
"

24 
	~"ud©aswp.h
"

34 
	mURES_INTERNAL_NONE
=-1,

37 
	mURES_TABLE32
=4,

43 
	mURES_TABLE16
=5,

46 
	mURES_STRING_V2
=6,

52 
	mURES_ARRAY16
=9

53 } 
	tUResIÁ”ÇlTy³
;

60 
ušt32_t
 
	tResourû
;

62 
	#RES_BOGUS
 0xffffffff

	)

64 
	#RES_GET_TYPE
(
»s
è((
UResTy³
)(Ôes)>>28UL))

	)

65 
	#RES_GET_OFFSET
(
»s
è(Ôes)&0x0fffffff)

	)

66 
	#RES_GET_POINTER
(
pRoÙ
, 
»s
è(ÕRoÙ)+
	`RES_GET_OFFSET
Ôes))

	)

69 
	#RES_GET_INT
(
»s
è(((
št32_t
)(Ôes)<<4L))>>4L)

	)

70 
	#RES_GET_UINT
(
»s
è(Ôes)&0x0fffffff)

	)

72 
	#URES_IS_ARRAY
(
ty³
è(Ñy³)==
URES_ARRAY
 || (ty³)==
URES_ARRAY16
)

	)

73 
	#URES_IS_TABLE
(
ty³
è(Ñy³)==
URES_TABLE
 || (ty³)==
URES_TABLE16
 || (ty³)==
URES_TABLE32
)

	)

74 
	#URES_IS_CONTAINER
(
ty³
è(
	`URES_IS_TABLE
Ñy³è|| 
	`URES_IS_ARRAY
Ñy³))

	)

76 
	#URES_MAKE_RESOURCE
(
ty³
, 
off£t
è(((
Resourû
)Ñy³)<<28)|(Resourû)(off£t))

	)

77 
	#URES_MAKE_EMPTY_RESOURCE
(
ty³
è((
Resourû
)Ñy³)<<28)

	)

81 
	mURES_INDEX_LENGTH
,

87 
	mURES_INDEX_KEYS_TOP
,

89 
	mURES_INDEX_RESOURCES_TOP
,

90 
	mURES_INDEX_BUNDLE_TOP
,

92 
	mURES_INDEX_MAX_TABLE_LENGTH
,

93 
	mURES_INDEX_ATTRIBUTES
,

94 
	mURES_INDEX_16BIT_TOP
,

96 
	mURES_INDEX_POOL_CHECKSUM
,

97 
	mURES_INDEX_TOP


111 
	#URES_ATT_NO_FALLBACK
 1

	)

119 
	#URES_ATT_IS_POOL_BUNDLE
 2

	)

120 
	#URES_ATT_USES_POOL_BUNDLE
 4

	)

308 
UD©aMemÜy
 *
	md©a
;

309 cÚ¡ 
št32_t
 *
	mpRoÙ
;

310 cÚ¡ 
ušt16_t
 *
	mp16B™Un™s
;

311 cÚ¡ *
	mpoŞBundËKeys
;

312 
Resourû
 
	mroÙRes
;

313 
št32_t
 
	mloÿlKeyLim™
;

314 
UBoŞ
 
	mnoF®lback
;

315 
UBoŞ
 
	misPoŞBundË
;

316 
UBoŞ
 
	mu£sPoŞBundË
;

317 
UBoŞ
 
	mu£N©iveSŒcmp
;

318 } 
	tResourûD©a
;

323 
U_INTERNAL
 
U_EXPORT2


324 
»s_»ad
(
ResourûD©a
 *
pResD©a
,

325 cÚ¡ 
UD©aInfo
 *
pInfo
, cÚ¡ *
šBy‹s
, 
št32_t
 
Ëngth
,

326 
UE¼ÜCode
 *
”rÜCode
);

332 
U_CFUNC
 

333 
»s_lßd
(
ResourûD©a
 *
pResD©a
,

334 cÚ¡ *
·th
, cÚ¡ *
Çme
, 
UE¼ÜCode
 *
”rÜCode
);

340 
U_CFUNC
 

341 
»s_uÆßd
(
ResourûD©a
 *
pResD©a
);

343 
U_INTERNAL
 
UResTy³
 
U_EXPORT2


344 
»s_g‘PublicTy³
(
Resourû
 
»s
);

351 
U_INTERNAL
 cÚ¡ 
UCh¬
 * 
U_EXPORT2


352 
»s_g‘SŒšg
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
»s
, 
št32_t
 *
pL’gth
);

354 
U_INTERNAL
 cÚ¡ 
UCh¬
 * 
U_EXPORT2


355 
»s_g‘AlŸs
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
»s
, 
št32_t
 *
pL’gth
);

357 
U_INTERNAL
 cÚ¡ 
ušt8_t
 * 
U_EXPORT2


358 
»s_g‘Bš¬y
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
»s
, 
št32_t
 *
pL’gth
);

360 
U_INTERNAL
 cÚ¡ 
št32_t
 * 
U_EXPORT2


361 
»s_g‘IÁVeùÜ
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
»s
, 
št32_t
 *
pL’gth
);

363 
U_INTERNAL
 
Resourû
 
U_EXPORT2


364 
»s_g‘Resourû
(cÚ¡ 
ResourûD©a
 *
pResD©a
, cÚ¡ *
key
);

366 
U_INTERNAL
 
št32_t
 
U_EXPORT2


367 
»s_couÁA¼ayI‹ms
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
»s
);

369 
U_INTERNAL
 
Resourû
 
U_EXPORT2


370 
»s_g‘A¼ayI‹m
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
¬¿y
, 
št32_t
 
šdexS
);

372 
U_INTERNAL
 
Resourû
 
U_EXPORT2


373 
»s_g‘TabËI‹mByIndex
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
bË
, 
št32_t
 
šdexS
, cÚ¡ ** 
key
);

375 
U_INTERNAL
 
Resourû
 
U_EXPORT2


376 
»s_g‘TabËI‹mByKey
(cÚ¡ 
ResourûD©a
 *
pResD©a
, 
Resourû
 
bË
, 
št32_t
 *
šdexS
, cÚ¡ * * 
key
);

382 
U_CFUNC
 
Resourû
 
»s_fšdResourû
(cÚ¡ 
ResourûD©a
 *
pResD©a
, Resourû 
r
, ** 
·th
, cÚ¡ ** 
key
);

388 
U_CAPI
 
št32_t
 
U_EXPORT2


389 
u»s_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

390 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

391 
UE¼ÜCode
 *
pE¼ÜCode
);

	@uresimp.h

8 #iâdeà
URESIMP_H


9 
	#URESIMP_H


	)

11 
	~"unicode/u»s.h
"

13 
	~"u»sd©a.h
"

15 
	#kRoÙLoÿËName
 "roÙ"

	)

16 
	#kPoŞBundËName
 "poŞ"

	)

23 
	#kDeçuÉMšÜV”siÚ
 "0"

	)

24 
	#kV”siÚS•¬©Ü
 "."

	)

25 
	#kV”siÚTag
 "V”siÚ"

	)

27 
	#MAGIC1
 19700503

	)

28 
	#MAGIC2
 19641227

	)

30 
	#URES_MAX_ALIAS_LEVEL
 256

	)

31 
	#URES_MAX_BUFFER_SIZE
 256

	)

44 
	gUResourûD©aEÁry
;

45 
UResourûD©aEÁry
 
	tUResourûD©aEÁry
;

53 
	sUResourûD©aEÁry
 {

54 *
	mfName
;

55 *
	mfP©h
;

56 
UResourûD©aEÁry
 *
	mfP¬’t
;

57 
UResourûD©aEÁry
 *
	mfAlŸs
;

58 
UResourûD©aEÁry
 *
	mfPoŞ
;

59 
ResourûD©a
 
	mfD©a
;

60 
	mfNameBufãr
[3];

61 
ušt32_t
 
	mfCouÁExi¡šg
;

62 
UE¼ÜCode
 
	mfBogus
;

66 
	#RES_BUFSIZE
 64

	)

67 
	#RES_PATH_SEPARATOR
 '/'

	)

68 
	#RES_PATH_SEPARATOR_S
 "/"

	)

70 
	sUResourûBundË
 {

71 cÚ¡ *
	mfKey
;

72 
UResourûD©aEÁry
 *
	mfD©a
;

73 *
	mfV”siÚ
;

74 
UResourûD©aEÁry
 *
	mfTİLev–D©a
;

75 *
	mfResP©h
;

76 
ResourûD©a
 
	mfResD©a
;

77 
	mfResBuf
[
RES_BUFSIZE
];

78 
št32_t
 
	mfResP©hL’
;

79 
Resourû
 
	mfRes
;

80 
UBoŞ
 
	mfHasF®lback
;

81 
UBoŞ
 
	mfIsTİLev–
;

82 
ušt32_t
 
	mfMagic1
;

83 
ušt32_t
 
	mfMagic2
;

84 
št32_t
 
	mfIndex
;

85 
št32_t
 
	mfSize
;

90 
U_CAPI
 
U_EXPORT2
 
u»s_š™SckObjeù
(
UResourûBundË
* 
»sB
);

93 
U_CFUNC
 cÚ¡ * 
u»s_g‘Name
(cÚ¡ 
UResourûBundË
* 
»sB
);

94 #ifdeà
URES_DEBUG


95 
U_CFUNC
 cÚ¡ * 
u»s_g‘P©h
(cÚ¡ 
UResourûBundË
* 
»sB
);

100 
U_CAPI
 
UBoŞ
 
U_EXPORT2
 
u»s_dumpCacheCÚ‹Ás
();

107 
U_CFUNC
 
UResourûBundË
 *
u»s_cİyResb
(UResourûBundË *
r
, cÚ¡ UResourûBundË *
Üigš®
, 
UE¼ÜCode
 *
¡©us
);

125 
U_CAPI
 
UResourûBundË
* 
U_EXPORT2


126 
u»s_fšdResourû
(cÚ¡ * 
·thToResourû
,

127 
UResourûBundË
 *
flIn
, 
UE¼ÜCode
 *
¡©us
);

145 
U_CAPI
 
UResourûBundË
* 
U_EXPORT2


146 
u»s_fšdSubResourû
(cÚ¡ 
UResourûBundË
 *
»sB
,

147 * 
·thToResourû
,

148 
UResourûBundË
 *
flIn
, 
UE¼ÜCode
 *
¡©us
);

167 
U_INTERNAL
 
št32_t
 
U_EXPORT2


168 
u»s_g‘FunùiÚ®Equiv®’t
(*
»suÉ
, 
št32_t
 
»suÉC­ac™y
,

169 cÚ¡ *
·th
, cÚ¡ *
»sName
, cÚ¡ *
keywÜd
, cÚ¡ *
locid
,

170 
UBoŞ
 *
isAvaabË
, UBoŞ 
om™DeçuÉ
, 
UE¼ÜCode
 *
¡©us
);

180 
U_INTERNAL
 
UEnum”©iÚ
* 
U_EXPORT2


181 
u»s_g‘KeywÜdV®ues
(cÚ¡ *
·th
, cÚ¡ *
keywÜd
, 
UE¼ÜCode
 *
¡©us
);

201 
U_INTERNAL
 
UResourûBundË
* 
U_EXPORT2


202 
u»s_g‘ByKeyW™hF®lback
(cÚ¡ 
UResourûBundË
 *
»sB
,

203 cÚ¡ * 
šKey
,

204 
UResourûBundË
 *
flIn
,

205 
UE¼ÜCode
 *
¡©us
);

224 
U_INTERNAL
 cÚ¡ 
UCh¬
* 
U_EXPORT2


225 
u»s_g‘SŒšgByKeyW™hF®lback
(cÚ¡ 
UResourûBundË
 *
»sB
,

226 cÚ¡ * 
šKey
,

227 
št32_t
* 
Ën
,

228 
UE¼ÜCode
 *
¡©us
);

238 
U_INTERNAL
 
U_EXPORT2


239 
u»s_g‘V”siÚByKey
(cÚ¡ 
UResourûBundË
 *
»sB
,

240 cÚ¡ *
key
,

241 
UV”siÚInfo
 
v”
,

242 
UE¼ÜCode
 *
¡©us
);

255 
U_INTERNAL
 cÚ¡ * 
U_EXPORT2


256 
u»s_g‘V”siÚNumb”IÁ”Çl
(cÚ¡ 
UResourûBundË
 *
»sourûBundË
);

270 
U_INTERNAL
 cÚ¡ * 
U_EXPORT2


271 
u»s_g‘LoÿËIÁ”Çl
(cÚ¡ 
UResourûBundË
* 
»sourûBundË
,

272 
UE¼ÜCode
* 
¡©us
);

	@ureslocs.h

8 #iâdeà
__URESLOCS_H__


9 
	#__URESLOCS_H__


	)

11 
	~"unicode/uty³s.h
"

12 
	~"unicode/ud©a.h
"

14 
	gU_CDECL_BEGIN


17 
	#U_ICUDATA_LANG
 
U_ICUDATA_NAME
 
U_TREE_SEPARATOR_STRING
 "Ïng"

	)

18 
	#U_ICUDATA_REGION
 
U_ICUDATA_NAME
 
U_TREE_SEPARATOR_STRING
 "»giÚ"

	)

19 
	#U_ICUDATA_CURR
 
U_ICUDATA_NAME
 
U_TREE_SEPARATOR_STRING
 "cu¼"

	)

20 
	#U_ICUDATA_ZONE
 
U_ICUDATA_NAME
 
U_TREE_SEPARATOR_STRING
 "zÚe"

	)

22 
	gU_CDECL_END


	@usc_impl.c

16 
	~"unicode/usüt.h
"

17 
	~"usc_im¶.h
"

18 
	~"cmemÜy.h
"

20 
	#ARRAY_SIZE
(
¬¿y
è(‡¼ay / ‡¼ay[0])

	)

22 
	#PAREN_STACK_DEPTH
 32

	)

24 
	#MOD
(
¥
è((¥è% 
PAREN_STACK_DEPTH
)

	)

25 
	#LIMIT_INC
(
¥
è(((¥è< 
PAREN_STACK_DEPTH
)? (¥è+ 1 : PAREN_STACK_DEPTH)

	)

26 
	#INC
(
¥
,
couÁ
è(
	`MOD
((¥è+ (couÁ)))

	)

27 
	#INC1
(
¥
è(
	`INC
(¥, 1))

	)

28 
	#DEC
(
¥
,
couÁ
è(
	`MOD
((¥è+ 
PAREN_STACK_DEPTH
 - (couÁ)))

	)

29 
	#DEC1
(
¥
è(
	`DEC
(¥, 1))

	)

30 
	#STACK_IS_EMPTY
(
sütRun
è((sütRun)->
pushCouÁ
 <ğ0)

	)

31 
	#STACK_IS_NOT_EMPTY
(
sütRun
è(! 
	`STACK_IS_EMPTY
(sütRun))

	)

32 
	#TOP
(
sütRun
è((sütRun)->
·»nSck
[(sütRun)->
·»nSP
])

	)

33 
	#SYNC_FIXUP
(
sütRun
è((sütRun)->
fixupCouÁ
 = 0)

	)

35 
	sP¬’SckEÁry


37 
št32_t
 
	m·œIndex
;

38 
USütCode
 
	msütCode
;

41 
	sUSütRun


43 
št32_t
 
	m‹xtL’gth
;

44 cÚ¡ 
UCh¬
 *
	m‹xtA¼ay
;

46 
št32_t
 
	msütS¹
;

47 
št32_t
 
	msütLim™
;

48 
USütCode
 
	msütCode
;

50 
P¬’SckEÁry
 
	m·»nSck
[
PAREN_STACK_DEPTH
];

51 
št32_t
 
	m·»nSP
;

52 
št32_t
 
	mpushCouÁ
;

53 
št32_t
 
	mfixupCouÁ
;

56 
št8_t
 
highB™
(
št32_t
 
v®ue
);

58 cÚ¡ 
UCh¬32
 
	g·œedCh¬s
[] = {

78 
	$push
(
USütRun
 *
sütRun
, 
št32_t
 
·œIndex
, 
USütCode
 
sütCode
)

80 
sütRun
->
pushCouÁ
 = 
	`LIMIT_INC
(scriptRun->pushCount);

81 
sütRun
->
fixupCouÁ
 = 
	`LIMIT_INC
(scriptRun->fixupCount);

83 
sütRun
->
·»nSP
 = 
	`INC1
(scriptRun->parenSP);

84 
sütRun
->
·»nSck
[sütRun->
·»nSP
].
·œIndex
 =…airIndex;

85 
sütRun
->
·»nSck
[sütRun->
·»nSP
].
sütCode
 = scriptCode;

86 
	}
}

88 
	$pİ
(
USütRun
 *
sütRun
)

90 ià(
	`STACK_IS_EMPTY
(
sütRun
)) {

94 ià(
sütRun
->
fixupCouÁ
 > 0) {

95 
sütRun
->
fixupCouÁ
 -= 1;

98 
sütRun
->
pushCouÁ
 -= 1;

99 
sütRun
->
·»nSP
 = 
	`DEC1
(scriptRun->parenSP);

104 ià(
	`STACK_IS_EMPTY
(
sütRun
)) {

105 
sütRun
->
·»nSP
 = -1;

107 
	}
}

109 
	$fixup
(
USütRun
 *
sütRun
, 
USütCode
 
sütCode
)

111 
št32_t
 
fixupSP
 = 
	`DEC
(
sütRun
->
·»nSP
, sütRun->
fixupCouÁ
);

113 
sütRun
->
fixupCouÁ
-- > 0) {

114 
fixupSP
 = 
	`INC1
(fixupSP);

115 
sütRun
->
·»nSck
[
fixupSP
].
sütCode
 = scriptCode;

117 
	}
}

119 
št8_t


120 
	$highB™
(
št32_t
 
v®ue
)

122 
št8_t
 
b™
 = 0;

124 ià(
v®ue
 <= 0) {

128 ià(
v®ue
 >= 1 << 16) {

129 
v®ue
 >>= 16;

130 
b™
 += 16;

133 ià(
v®ue
 >= 1 << 8) {

134 
v®ue
 >>= 8;

135 
b™
 += 8;

138 ià(
v®ue
 >= 1 << 4) {

139 
v®ue
 >>= 4;

140 
b™
 += 4;

143 ià(
v®ue
 >= 1 << 2) {

144 
v®ue
 >>= 2;

145 
b™
 += 2;

148 ià(
v®ue
 >= 1 << 1) {

149 
v®ue
 >>= 1;

150 
b™
 += 1;

153  
b™
;

154 
	}
}

156 
št32_t


157 
	$g‘PaœIndex
(
UCh¬32
 
ch
)

159 
št32_t
 
·œedCh¬CouÁ
 = 
	`ARRAY_SIZE
(
·œedCh¬s
);

160 
št32_t
 
·œedCh¬Pow”
 = 1 << 
	`highB™
(
·œedCh¬CouÁ
);

161 
št32_t
 
·œedCh¬ExŒa
 = 
·œedCh¬CouÁ
 - 
·œedCh¬Pow”
;

163 
št32_t
 
´obe
 = 
·œedCh¬Pow”
;

164 
št32_t
 
·œIndex
 = 0;

166 ià(
ch
 >ğ
·œedCh¬s
[
·œedCh¬ExŒa
]) {

167 
·œIndex
 = 
·œedCh¬ExŒa
;

170 
´obe
 > (1 << 0)) {

171 
´obe
 >>= 1;

173 ià(
ch
 >ğ
·œedCh¬s
[
·œIndex
 + 
´obe
]) {

174 
·œIndex
 +ğ
´obe
;

178 ià(
·œedCh¬s
[
·œIndex
] !ğ
ch
) {

179 
·œIndex
 = -1;

182  
·œIndex
;

183 
	}
}

185 
UBoŞ


186 
	$§meSüt
(
USütCode
 
sütOÃ
, USütCod
sütTwo
)

188  
sütOÃ
 <ğ
USCRIPT_INHERITED
 || 
sütTwo
 <= USCRIPT_INHERITED || scriptOne == scriptTwo;

189 
	}
}

191 
U_CAPI
 
USütRun
 * 
U_EXPORT2


192 
	$usüt_İ’Run
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
)

194 
USütRun
 *
»suÉ
 = 
NULL
;

196 ià(
pE¼ÜCode
 =ğ
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

197  
NULL
;

200 
»suÉ
 = 
	`u´v_m®loc
( (
USütRun
));

202 ià(
»suÉ
 =ğ
NULL
) {

203 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

204  
NULL
;

207 
	`usüt_£tRunText
(
»suÉ
, 
¤c
, 
Ëngth
, 
pE¼ÜCode
);

210 ià(
	`U_FAILURE
(*
pE¼ÜCode
)) {

211 
	`u´v_ä“
(
»suÉ
);

212 
»suÉ
 = 
NULL
;

215  
»suÉ
;

216 
	}
}

218 
U_CAPI
 
U_EXPORT2


219 
	$usüt_şo£Run
(
USütRun
 *
sütRun
)

221 ià(
sütRun
 !ğ
NULL
) {

222 
	`u´v_ä“
(
sütRun
);

224 
	}
}

226 
U_CAPI
 
U_EXPORT2


227 
	$usüt_»£tRun
(
USütRun
 *
sütRun
)

229 ià(
sütRun
 !ğ
NULL
) {

230 
sütRun
->
sütS¹
 = 0;

231 
sütRun
->
sütLim™
 = 0;

232 
sütRun
->
sütCode
 = 
USCRIPT_INVALID_CODE
;

233 
sütRun
->
·»nSP
 = -1;

234 
sütRun
->
pushCouÁ
 = 0;

235 
sütRun
->
fixupCouÁ
 = 0;

237 
	}
}

239 
U_CAPI
 
U_EXPORT2


240 
	$usüt_£tRunText
(
USütRun
 *
sütRun
, cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
)

242 ià(
pE¼ÜCode
 =ğ
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

246 ià(
sütRun
 =ğ
NULL
 || 
Ëngth
 < 0 || ((
¤c
 == NULL) != (length == 0))) {

247 *
pE¼ÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

251 
sütRun
->
‹xtA¼ay
 = 
¤c
;

252 
sütRun
->
‹xtL’gth
 = 
Ëngth
;

254 
	`usüt_»£tRun
(
sütRun
);

255 
	}
}

257 
U_CAPI
 
UBoŞ
 
U_EXPORT2


258 
	$usüt_ÃxtRun
(
USütRun
 *
sütRun
, 
št32_t
 *
pRunS¹
, iÁ32_ˆ*
pRunLim™
, 
USütCode
 *
pRunSüt
)

260 
UE¼ÜCode
 
”rÜ
 = 
U_ZERO_ERROR
;

263 ià(
sütRun
 =ğ
NULL
 || sütRun->
sütLim™
 >ğsütRun->
‹xtL’gth
) {

264  
FALSE
;

267 
	`SYNC_FIXUP
(
sütRun
);

268 
sütRun
->
sütCode
 = 
USCRIPT_COMMON
;

270 
sütRun
->
sütS¹
 = sütRun->
sütLim™
; sütRun->sütLim™ < sütRun->
‹xtL’gth
; scriptRun->scriptLimit += 1) {

271 
UCh¬
 
high
 = 
sütRun
->
‹xtA¼ay
[sütRun->
sütLim™
];

272 
UCh¬32
 
ch
 = 
high
;

273 
USütCode
 
sc
;

274 
št32_t
 
·œIndex
;

280 ià(
high
 >ğ0xD800 && high <ğ0xDBFF && 
sütRun
->
sütLim™
 < sütRun->
‹xtL’gth
 - 1) {

281 
UCh¬
 
low
 = 
sütRun
->
‹xtA¼ay
[sütRun->
sütLim™
 + 1];

287 ià(
low
 >= 0xDC00 &&†ow <= 0xDFFF) {

288 
ch
 = (
high
 - 0xD800è* 0x0400 + 
low
 - 0xDC00 + 0x10000;

289 
sütRun
->
sütLim™
 += 1;

293 
sc
 = 
	`usüt_g‘Süt
(
ch
, &
”rÜ
);

294 
·œIndex
 = 
	`g‘PaœIndex
(
ch
);

304 ià(
·œIndex
 >= 0) {

305 ià((
·œIndex
 & 1) == 0) {

306 
	`push
(
sütRun
, 
·œIndex
, sütRun->
sütCode
);

308 
št32_t
 
pi
 = 
·œIndex
 & ~1;

310 
	`STACK_IS_NOT_EMPTY
(
sütRun
è&& 
	`TOP
(sütRun).
·œIndex
 !ğ
pi
) {

311 
	`pİ
(
sütRun
);

314 ià(
	`STACK_IS_NOT_EMPTY
(
sütRun
)) {

315 
sc
 = 
	`TOP
(
sütRun
).
sütCode
;

320 ià(
	`§meSüt
(
sütRun
->
sütCode
, 
sc
)) {

321 ià(
sütRun
->
sütCode
 <ğ
USCRIPT_INHERITED
 && 
sc
 > USCRIPT_INHERITED) {

322 
sütRun
->
sütCode
 = 
sc
;

324 
	`fixup
(
sütRun
, sütRun->
sütCode
);

331 ià(
·œIndex
 >= 0 && (pairIndex & 1) != 0) {

332 
	`pİ
(
sütRun
);

339 ià(
ch
 >= 0x10000) {

340 
sütRun
->
sütLim™
 -= 1;

348 ià(
pRunS¹
 !ğ
NULL
) {

349 *
pRunS¹
 = 
sütRun
->
sütS¹
;

352 ià(
pRunLim™
 !ğ
NULL
) {

353 *
pRunLim™
 = 
sütRun
->
sütLim™
;

356 ià(
pRunSüt
 !ğ
NULL
) {

357 *
pRunSüt
 = 
sütRun
->
sütCode
;

360  
TRUE
;

361 
	}
}

	@usc_impl.h

16 #iâdeà
USC_IMPL_H


17 
	#USC_IMPL_H


	)

18 
	~"unicode/uty³s.h
"

19 
	~"unicode/usüt.h
"

57 
	gUSütRun
;

59 
USütRun
 
	tUSütRun
;

82 
U_CAPI
 
USütRun
 * 
U_EXPORT2


83 
usüt_İ’Run
(cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
);

93 
U_CAPI
 
U_EXPORT2


94 
usüt_şo£Run
(
USütRun
 *
sütRun
);

104 
U_CAPI
 
U_EXPORT2


105 
usüt_»£tRun
(
USütRun
 *
sütRun
);

124 
U_CAPI
 
U_EXPORT2


125 
usüt_£tRunText
(
USütRun
 *
sütRun
, cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
);

146 
U_CAPI
 
UBoŞ
 
U_EXPORT2


147 
usüt_ÃxtRun
(
USütRun
 *
sütRun
, 
št32_t
 *
pRunS¹
, iÁ32_ˆ*
pRunLim™
, 
USütCode
 *
pRunSüt
);

	@uscript.c

16 
	~"unicode/usüt.h
"

17 
	~"unicode/u»s.h
"

18 
	~"unicode/uch¬.h
"

19 
	~"unicode/put.h
"

20 
	~"u´İs.h
"

21 
	~"cmemÜy.h
"

22 
	~"c¡ršg.h
"

24 cÚ¡ 
	gkLoÿËSüt
[] = "LocaleScript";

27 
U_CAPI
 
št32_t
 
U_EXPORT2


28 
	$usüt_g‘Code
(cÚ¡ * 
ÇmeOrAbbrOrLoÿË
,

29 
USütCode
* 
flIn
,

30 
št32_t
 
ÿ·c™y
,

31 
UE¼ÜCode
* 
”r
){

33 
USütCode
 
code
 = 
USCRIPT_INVALID_CODE
;

34 
št32_t
 
numFËd
=0;

35 
št32_t
 
Ën
=0;

37 if(
”r
==
NULL
 ||
	`U_FAILURE
(*err)){

38  
numFËd
;

40 if(
ÇmeOrAbbrOrLoÿË
==
NULL
 || 
flIn
 =ğNULL || 
ÿ·c™y
<0){

41 *
”r
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

42  
numFËd
;

45 if(
	`u´v_¡rchr
(
ÇmeOrAbbrOrLoÿË
, '-')==
NULL
 && uprv_strchr(nameOrAbbrOrLocale, '_')==NULL ){

47 
code
 = (
USütCode
è
	`u_g‘Prİ”tyV®ueEnum
(
UCHAR_SCRIPT
, 
ÇmeOrAbbrOrLoÿË
);

50 if(
code
==(
USütCode
)
UCHAR_INVALID_CODE
){

52 
UE¼ÜCode
 
loÿlE¼ÜCode
 = 
U_ZERO_ERROR
;

53 
UResourûBundË
* 
»sB
 = 
	`u»s_İ’
(
NULL
,
ÇmeOrAbbrOrLoÿË
,&
loÿlE¼ÜCode
);

54 if(
	`U_SUCCESS
(
loÿlE¼ÜCode
)&&†oÿlE¼ÜCod!ğ
U_USING_DEFAULT_WARNING
){

55 
UResourûBundË
* 
»sD
 = 
	`u»s_g‘ByKey
(
»sB
,
kLoÿËSüt
,
NULL
,&
loÿlE¼ÜCode
);

56 if(
	`U_SUCCESS
(
loÿlE¼ÜCode
) ){

57 
Ën
 =0;

58 
	`u»s_hasNext
(
»sD
)){

59 cÚ¡ 
UCh¬
* 
Çme
 = 
	`u»s_g‘NextSŒšg
(
»sD
,&
Ën
,
NULL
,&
loÿlE¼ÜCode
);

60 if(
	`U_SUCCESS
(
loÿlE¼ÜCode
)){

61 
cName
[50] = {'\0'};

62 
	`u_UCh¬sToCh¬s
(
Çme
,
cName
,
Ën
);

63 
code
 = (
USütCode
è
	`u_g‘Prİ”tyV®ueEnum
(
UCHAR_SCRIPT
, 
cName
);

65 if(
numFËd
<
ÿ·c™y
){

66 *(
flIn
)++=
code
;

67 
numFËd
++;

69 
	`u»s_şo£
(
»sD
);

70 
	`u»s_şo£
(
»sB
);

71 *
”r
=
U_BUFFER_OVERFLOW_ERROR
;

72  
Ën
;

77 
	`u»s_şo£
(
»sD
);

79 
	`u»s_şo£
(
»sB
);

80 
code
 = 
USCRIPT_INVALID_CODE
;

82 if(
code
==(
USütCode
)
UCHAR_INVALID_CODE
){

84 
code
 = (
USütCode
è
	`u_g‘Prİ”tyV®ueEnum
(
UCHAR_SCRIPT
, 
ÇmeOrAbbrOrLoÿË
);

86 if(
code
!=(
USütCode
)
UCHAR_INVALID_CODE
){

88 if(
numFËd
<
ÿ·c™y
){

89 *(
flIn
)++=
code
;

90 
numFËd
++;

92 *
”r
=
U_BUFFER_OVERFLOW_ERROR
;

93  
Ën
;

96  
numFËd
;

97 
	}
}

99 
U_CAPI
 cÚ¡ * 
U_EXPORT2


100 
	$usüt_g‘Name
(
USütCode
 
sütCode
){

101  
	`u_g‘Prİ”tyV®ueName
(
UCHAR_SCRIPT
, 
sütCode
,

102 
U_LONG_PROPERTY_NAME
);

103 
	}
}

105 
U_CAPI
 cÚ¡ * 
U_EXPORT2


106 
	$usüt_g‘ShÜtName
(
USütCode
 
sütCode
){

107  
	`u_g‘Prİ”tyV®ueName
(
UCHAR_SCRIPT
, 
sütCode
,

108 
U_SHORT_PROPERTY_NAME
);

109 
	}
}

	@uset.cpp

21 
	~"unicode/uty³s.h
"

22 
	~"unicode/uobjeù.h
"

23 
	~"unicode/u£t.h
"

24 
	~"unicode/uni£t.h
"

25 
	~"cmemÜy.h
"

26 
	~"unicode/u¡ršg.h
"

27 
	~"unicode/·r£pos.h
"

29 
U_NAMESPACE_USE


31 
U_CAPI
 
US‘
* 
U_EXPORT2


32 
	$u£t_İ’Em±y
() {

33  (
US‘
*è
Ãw
 
	`UnicodeS‘
();

34 
	}
}

36 
U_CAPI
 
US‘
* 
U_EXPORT2


37 
	$u£t_İ’
(
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

38  (
US‘
*è
Ãw
 
	`UnicodeS‘
(
¡¬t
, 
’d
);

39 
	}
}

41 
U_CAPI
 
U_EXPORT2


42 
	$u£t_şo£
(
US‘
* 
£t
) {

43 
	`d–‘e
 (
UnicodeS‘
*è
£t
;

44 
	}
}

46 
U_CAPI
 
US‘
 * 
U_EXPORT2


47 
	$u£t_şÚe
(cÚ¡ 
US‘
 *
£t
) {

48  (
US‘
*è(((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`şÚe
());

49 
	}
}

51 
U_CAPI
 
UBoŞ
 
U_EXPORT2


52 
	$u£t_isFroz’
(cÚ¡ 
US‘
 *
£t
) {

53  ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`isFroz’
();

54 
	}
}

56 
U_CAPI
 
U_EXPORT2


57 
	$u£t_ä“ze
(
US‘
 *
£t
) {

58 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`ä“ze
();

59 
	}
}

61 
U_CAPI
 
US‘
 * 
U_EXPORT2


62 
	$u£t_şÚeAsThawed
(cÚ¡ 
US‘
 *
£t
) {

63  (
US‘
*è(((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`şÚeAsThawed
());

64 
	}
}

66 
U_CAPI
 
U_EXPORT2


67 
	$u£t_£t
(
US‘
* 
£t
,

68 
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

69 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`£t
(
¡¬t
, 
’d
);

70 
	}
}

72 
U_CAPI
 
U_EXPORT2


73 
	$u£t_addAÎ
(
US‘
* 
£t
, cÚ¡ US‘ *
add™iÚ®S‘
) {

74 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`addAÎ
(*((cÚ¡ UnicodeS‘*)
add™iÚ®S‘
));

75 
	}
}

77 
U_CAPI
 
U_EXPORT2


78 
	$u£t_add
(
US‘
* 
£t
, 
UCh¬32
 
c
) {

79 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`add
(
c
);

80 
	}
}

82 
U_CAPI
 
U_EXPORT2


83 
	$u£t_addRªge
(
US‘
* 
£t
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

84 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`add
(
¡¬t
, 
’d
);

85 
	}
}

87 
U_CAPI
 
U_EXPORT2


88 
	$u£t_addSŒšg
(
US‘
* 
£t
, cÚ¡ 
UCh¬
* 
¡r
, 
št32_t
 
¡rL’
) {

90 
UnicodeSŒšg
 
	`s
(
¡rL’
<0, 
¡r
, strLen);

91 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`add
(
s
);

92 
	}
}

94 
U_CAPI
 
U_EXPORT2


95 
	$u£t_addAÎCodePošts
(
US‘
* 
£t
, cÚ¡ 
UCh¬
 *
¡r
, 
št32_t
 
¡rL’
) {

97 
UnicodeSŒšg
 
	`s
(
¡r
, 
¡rL’
);

98 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`addAÎ
(
s
);

99 
	}
}

101 
U_CAPI
 
U_EXPORT2


102 
	$u£t_»move
(
US‘
* 
£t
, 
UCh¬32
 
c
) {

103 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`»move
(
c
);

104 
	}
}

106 
U_CAPI
 
U_EXPORT2


107 
	$u£t_»moveRªge
(
US‘
* 
£t
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

108 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`»move
(
¡¬t
, 
’d
);

109 
	}
}

111 
U_CAPI
 
U_EXPORT2


112 
	$u£t_»moveSŒšg
(
US‘
* 
£t
, cÚ¡ 
UCh¬
* 
¡r
, 
št32_t
 
¡rL’
) {

113 
UnicodeSŒšg
 
	`s
(
¡rL’
==-1, 
¡r
, strLen);

114 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`»move
(
s
);

115 
	}
}

117 
U_CAPI
 
U_EXPORT2


118 
	$u£t_»moveAÎ
(
US‘
* 
£t
, cÚ¡ US‘* 
»move
) {

119 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`»moveAÎ
(*(cÚ¡ UnicodeS‘*)
»move
);

120 
	}
}

122 
U_CAPI
 
U_EXPORT2


123 
	$u£t_»š
(
US‘
* 
£t
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

124 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`»š
(
¡¬t
, 
’d
);

125 
	}
}

127 
U_CAPI
 
U_EXPORT2


128 
	$u£t_»šAÎ
(
US‘
* 
£t
, cÚ¡ US‘* 
»š
) {

129 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`»šAÎ
(*(cÚ¡ UnicodeS‘*)
»š
);

130 
	}
}

132 
U_CAPI
 
U_EXPORT2


133 
	$u£t_com·ù
(
US‘
* 
£t
) {

134 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`com·ù
();

135 
	}
}

137 
U_CAPI
 
U_EXPORT2


138 
	$u£t_com¶em’t
(
US‘
* 
£t
) {

139 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`com¶em’t
();

140 
	}
}

142 
U_CAPI
 
U_EXPORT2


143 
	$u£t_com¶em’tAÎ
(
US‘
* 
£t
, cÚ¡ US‘* 
com¶em’t
) {

144 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`com¶em’tAÎ
(*(cÚ¡ UnicodeS‘*)
com¶em’t
);

145 
	}
}

147 
U_CAPI
 
U_EXPORT2


148 
	$u£t_ş—r
(
US‘
* 
£t
) {

149 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`ş—r
();

150 
	}
}

152 
U_CAPI
 
U_EXPORT2


153 
	$u£t_şo£Ov”
(
US‘
* 
£t
, 
št32_t
 
©Œibu‹s
) {

154 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`şo£Ov”
(
©Œibu‹s
);

155 
	}
}

157 
U_CAPI
 
U_EXPORT2


158 
	$u£t_»moveAÎSŒšgs
(
US‘
* 
£t
) {

159 ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`»moveAÎSŒšgs
();

160 
	}
}

162 
U_CAPI
 
UBoŞ
 
U_EXPORT2


163 
	$u£t_isEm±y
(cÚ¡ 
US‘
* 
£t
) {

164  ((cÚ¡ 
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`isEm±y
();

165 
	}
}

167 
U_CAPI
 
UBoŞ
 
U_EXPORT2


168 
	$u£t_cÚšs
(cÚ¡ 
US‘
* 
£t
, 
UCh¬32
 
c
) {

169  ((cÚ¡ 
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`cÚšs
(
c
);

170 
	}
}

172 
U_CAPI
 
UBoŞ
 
U_EXPORT2


173 
	$u£t_cÚšsRªge
(cÚ¡ 
US‘
* 
£t
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
) {

174  ((cÚ¡ 
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`cÚšs
(
¡¬t
, 
’d
);

175 
	}
}

177 
U_CAPI
 
UBoŞ
 
U_EXPORT2


178 
	$u£t_cÚšsSŒšg
(cÚ¡ 
US‘
* 
£t
, cÚ¡ 
UCh¬
* 
¡r
, 
št32_t
 
¡rL’
) {

179 
UnicodeSŒšg
 
	`s
(
¡rL’
==-1, 
¡r
, strLen);

180  ((cÚ¡ 
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`cÚšs
(
s
);

181 
	}
}

183 
U_CAPI
 
UBoŞ
 
U_EXPORT2


184 
	$u£t_cÚšsAÎ
(cÚ¡ 
US‘
* 
£t1
, cÚ¡ US‘* 
£t2
) {

185  ((cÚ¡ 
UnicodeS‘
*è
£t1
)->UnicodeS‘::
	`cÚšsAÎ
(* (cÚ¡ UnicodeS‘*è
£t2
);

186 
	}
}

188 
U_CAPI
 
UBoŞ
 
U_EXPORT2


189 
	$u£t_cÚšsAÎCodePošts
(cÚ¡ 
US‘
* 
£t
, cÚ¡ 
UCh¬
 *
¡r
, 
št32_t
 
¡rL’
) {

191 
UnicodeSŒšg
 
	`s
(
¡rL’
==-1, 
¡r
, strLen);

192  ((cÚ¡ 
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`cÚšsAÎ
(
s
);

193 
	}
}

195 
U_CAPI
 
UBoŞ
 
U_EXPORT2


196 
	$u£t_cÚšsNÚe
(cÚ¡ 
US‘
* 
£t1
, cÚ¡ US‘* 
£t2
) {

197  ((cÚ¡ 
UnicodeS‘
*è
£t1
)->UnicodeS‘::
	`cÚšsNÚe
(* (cÚ¡ UnicodeS‘*è
£t2
);

198 
	}
}

200 
U_CAPI
 
UBoŞ
 
U_EXPORT2


201 
	$u£t_cÚšsSome
(cÚ¡ 
US‘
* 
£t1
, cÚ¡ US‘* 
£t2
) {

202  ((cÚ¡ 
UnicodeS‘
*è
£t1
)->UnicodeS‘::
	`cÚšsSome
(* (cÚ¡ UnicodeS‘*è
£t2
);

203 
	}
}

205 
U_CAPI
 
št32_t
 
U_EXPORT2


206 
	$u£t_¥ª
(cÚ¡ 
US‘
 *
£t
, cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) {

207  ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`¥ª
(
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

208 
	}
}

210 
U_CAPI
 
št32_t
 
U_EXPORT2


211 
	$u£t_¥ªBack
(cÚ¡ 
US‘
 *
£t
, cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) {

212  ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`¥ªBack
(
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

213 
	}
}

215 
U_CAPI
 
št32_t
 
U_EXPORT2


216 
	$u£t_¥ªUTF8
(cÚ¡ 
US‘
 *
£t
, cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) {

217  ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`¥ªUTF8
(
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

218 
	}
}

220 
U_CAPI
 
št32_t
 
U_EXPORT2


221 
	$u£t_¥ªBackUTF8
(cÚ¡ 
US‘
 *
£t
, cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
US‘S·nCÚd™iÚ
 
¥ªCÚd™iÚ
) {

222  ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`¥ªBackUTF8
(
s
, 
Ëngth
, 
¥ªCÚd™iÚ
);

223 
	}
}

225 
U_CAPI
 
UBoŞ
 
U_EXPORT2


226 
	$u£t_equ®s
(cÚ¡ 
US‘
* 
£t1
, cÚ¡ US‘* 
£t2
) {

227  *(cÚ¡ 
UnicodeS‘
*)
£t1
 =ğ*(cÚ¡ UnicodeS‘*)
£t2
;

228 
	}
}

230 
U_CAPI
 
št32_t
 
U_EXPORT2


231 
	$u£t_šdexOf
(cÚ¡ 
US‘
* 
£t
, 
UCh¬32
 
c
) {

232  ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`šdexOf
(
c
);

233 
	}
}

235 
U_CAPI
 
UCh¬32
 
U_EXPORT2


236 
	$u£t_ch¬At
(cÚ¡ 
US‘
* 
£t
, 
št32_t
 
šdex
) {

237  ((
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`ch¬At
(
šdex
);

238 
	}
}

240 
U_CAPI
 
št32_t
 
U_EXPORT2


241 
	$u£t_size
(cÚ¡ 
US‘
* 
£t
) {

242  ((cÚ¡ 
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`size
();

243 
	}
}

245 
U_NAMESPACE_BEGIN


251 şas 
	cUS‘Acûss
 {

252 
	mpublic
:

254 
šlše
 
št32_t
 
	$g‘SŒšgCouÁ
(cÚ¡ 
UnicodeS‘
& 
£t
) {

255  
£t
.
	`g‘SŒšgCouÁ
();

257 
šlše
 cÚ¡ 
UnicodeSŒšg
* 
	$g‘SŒšg
(cÚ¡ 
UnicodeS‘
& 
£t
,

258 
št32_t
 
i
) {

259  
£t
.
	`g‘SŒšg
(
i
);

260 
	}
}

261 
	g´iv©e
:

263 
US‘Acûss
();

265 
U_NAMESPACE_END


267 
U_CAPI
 
št32_t
 
U_EXPORT2


268 
	$u£t_g‘I‹mCouÁ
(cÚ¡ 
US‘
* 
u£t
) {

269 cÚ¡ 
UnicodeS‘
& 
£t
 = *(cÚ¡ UnicodeS‘*)
u£t
;

270  
£t
.
	`g‘RªgeCouÁ
(è+ 
US‘Acûss
::
	`g‘SŒšgCouÁ
(set);

271 
	}
}

273 
U_CAPI
 
št32_t
 
U_EXPORT2


274 
	$u£t_g‘I‹m
(cÚ¡ 
US‘
* 
u£t
, 
št32_t
 
™emIndex
,

275 
UCh¬32
* 
¡¬t
, UCh¬32* 
’d
,

276 
UCh¬
* 
¡r
, 
št32_t
 
¡rC­ac™y
,

277 
UE¼ÜCode
* 
ec
) {

278 ià(
	`U_FAILURE
(*
ec
))  0;

279 cÚ¡ 
UnicodeS‘
& 
£t
 = *(cÚ¡ UnicodeS‘*)
u£t
;

280 
št32_t
 
¿ngeCouÁ
;

282 ià(
™emIndex
 < 0) {

283 *
ec
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

285 } ià(
™emIndex
 < (
¿ngeCouÁ
 = 
£t
.
	`g‘RªgeCouÁ
())) {

286 *
¡¬t
 = 
£t
.
	`g‘RªgeS¹
(
™emIndex
);

287 *
’d
 = 
£t
.
	`g‘RªgeEnd
(
™emIndex
);

290 
™emIndex
 -ğ
¿ngeCouÁ
;

291 ià(
™emIndex
 < 
US‘Acûss
::
	`g‘SŒšgCouÁ
(
£t
)) {

292 cÚ¡ 
UnicodeSŒšg
* 
s
 = 
US‘Acûss
::
	`g‘SŒšg
(
£t
, 
™emIndex
);

293  
s
->
	`exŒaù
(
¡r
, 
¡rC­ac™y
, *
ec
);

295 *
ec
 = 
U_INDEX_OUTOFBOUNDS_ERROR
;

299 
	}
}

336 
U_CAPI
 
št32_t
 
U_EXPORT2


337 
	$u£t_£rŸlize
(cÚ¡ 
US‘
* 
£t
, 
ušt16_t
* 
de¡
, 
št32_t
 
de¡C­ac™y
, 
UE¼ÜCode
* 
ec
) {

338 ià(
ec
==
NULL
 || 
	`U_FAILURE
(*ec)) {

342  ((cÚ¡ 
UnicodeS‘
*è
£t
)->UnicodeS‘::
	`£rŸlize
(
de¡
, 
de¡C­ac™y
,* 
ec
);

343 
	}
}

345 
U_CAPI
 
UBoŞ
 
U_EXPORT2


346 
	$u£t_g‘S”ŸlizedS‘
(
US”ŸlizedS‘
* 
flS‘
, cÚ¡ 
ušt16_t
* 
¤c
, 
št32_t
 
¤cL’gth
) {

347 
št32_t
 
Ëngth
;

349 if(
flS‘
==
NULL
) {

350  
FALSE
;

352 if(
¤c
==
NULL
 || 
¤cL’gth
<=0) {

353 
flS‘
->
Ëngth
=flS‘->
bmpL’gth
=0;

354  
FALSE
;

357 
Ëngth
=*
¤c
++;

358 if(
Ëngth
&0x8000) {

360 
Ëngth
&=0x7fff;

361 if(
¤cL’gth
<(2+
Ëngth
)) {

362 
flS‘
->
Ëngth
=flS‘->
bmpL’gth
=0;

363  
FALSE
;

365 
flS‘
->
bmpL’gth
=*
¤c
++;

368 if(
¤cL’gth
<(1+
Ëngth
)) {

369 
flS‘
->
Ëngth
=flS‘->
bmpL’gth
=0;

370  
FALSE
;

372 
flS‘
->
bmpL’gth
=
Ëngth
;

374 
flS‘
->
¬¿y
=
¤c
;

375 
flS‘
->
Ëngth
=length;

376  
TRUE
;

377 
	}
}

379 
U_CAPI
 
U_EXPORT2


380 
	$u£t_£tS”ŸlizedToOÃ
(
US”ŸlizedS‘
* 
flS‘
, 
UCh¬32
 
c
) {

381 if(
flS‘
==
NULL
 || (
ušt32_t
)
c
>0x10ffff) {

385 
flS‘
->
¬¿y
=flS‘->
¡©icA¼ay
;

386 if(
c
<0xffff) {

387 
flS‘
->
bmpL’gth
=flS‘->
Ëngth
=2;

388 
flS‘
->
¡©icA¼ay
[0]=(
ušt16_t
)
c
;

389 
flS‘
->
¡©icA¼ay
[1]=(
ušt16_t
)
c
+1;

390 } if(
c
==0xffff) {

391 
flS‘
->
bmpL’gth
=1;

392 
flS‘
->
Ëngth
=3;

393 
flS‘
->
¡©icA¼ay
[0]=0xffff;

394 
flS‘
->
¡©icA¼ay
[1]=1;

395 
flS‘
->
¡©icA¼ay
[2]=0;

396 } if(
c
<0x10ffff) {

397 
flS‘
->
bmpL’gth
=0;

398 
flS‘
->
Ëngth
=4;

399 
flS‘
->
¡©icA¼ay
[0]=(
ušt16_t
)(
c
>>16);

400 
flS‘
->
¡©icA¼ay
[1]=(
ušt16_t
)
c
;

401 ++
c
;

402 
flS‘
->
¡©icA¼ay
[2]=(
ušt16_t
)(
c
>>16);

403 
flS‘
->
¡©icA¼ay
[3]=(
ušt16_t
)
c
;

405 
flS‘
->
bmpL’gth
=0;

406 
flS‘
->
Ëngth
=2;

407 
flS‘
->
¡©icA¼ay
[0]=0x10;

408 
flS‘
->
¡©icA¼ay
[1]=0xffff;

410 
	}
}

412 
U_CAPI
 
UBoŞ
 
U_EXPORT2


413 
	$u£t_£rŸlizedCÚšs
(cÚ¡ 
US”ŸlizedS‘
* 
£t
, 
UCh¬32
 
c
) {

414 cÚ¡ 
ušt16_t
* 
¬¿y
;

416 if(
£t
==
NULL
 || (
ušt32_t
)
c
>0x10ffff) {

417  
FALSE
;

420 
¬¿y
=
£t
->array;

421 if(
c
<=0xffff) {

423 
št32_t
 
lo
 = 0;

424 
št32_t
 
hi
 = 
£t
->
bmpL’gth
-1;

425 ià(
c
 < 
¬¿y
[0]) {

426 
hi
 = 0;

427 } ià(
c
 < 
¬¿y
[
hi
]) {

429 
št32_t
 
i
 = (
lo
 + 
hi
) >> 1;

430 ià(
i
 =ğ
lo
) {

432 } ià(
c
 < 
¬¿y
[
i
]) {

433 
hi
 = 
i
;

435 
lo
 = 
i
;

439 
hi
 += 1;

441  (
UBoŞ
)(
hi
&1);

444 
ušt16_t
 
high
=(ušt16_t)(
c
>>16), 
low
=(uint16_t)c;

445 
št32_t
 
ba£
 = 
£t
->
bmpL’gth
;

446 
št32_t
 
lo
 = 0;

447 
št32_t
 
hi
 = 
£t
->
Ëngth
 - 2 - 
ba£
;

448 ià(
high
 < 
¬¿y
[
ba£
] || (high=÷¼ay[ba£] && 
low
<array[base+1])) {

449 
hi
 = 0;

450 } ià(
high
 < 
¬¿y
[
ba£
+
hi
] || (high=÷¼ay[ba£+hi] && 
low
<array[base+hi+1])) {

452 
št32_t
 
i
 = ((
lo
 + 
hi
) >> 1) & ~1;

453 
št32_t
 
Ÿbs
 = 
i
 + 
ba£
;

454 ià(
i
 =ğ
lo
) {

456 } ià(
high
 < 
¬¿y
[
Ÿbs
] || (high=÷¼ay[Ÿbs] && 
low
<array[iabs+1])) {

457 
hi
 = 
i
;

459 
lo
 = 
i
;

463 
hi
 += 2;

466  (
UBoŞ
)(((
hi
+(
ba£
<<1))&2)!=0);

468 
	}
}

470 
U_CAPI
 
št32_t
 
U_EXPORT2


471 
	$u£t_g‘S”ŸlizedRªgeCouÁ
(cÚ¡ 
US”ŸlizedS‘
* 
£t
) {

472 if(
£t
==
NULL
) {

476  (
£t
->
bmpL’gth
+(£t->
Ëngth
-set->bmpLength)/2+1)/2;

477 
	}
}

479 
U_CAPI
 
UBoŞ
 
U_EXPORT2


480 
	$u£t_g‘S”ŸlizedRªge
(cÚ¡ 
US”ŸlizedS‘
* 
£t
, 
št32_t
 
¿ngeIndex
,

481 
UCh¬32
* 
pS¹
, UCh¬32* 
pEnd
) {

482 cÚ¡ 
ušt16_t
* 
¬¿y
;

483 
št32_t
 
bmpL’gth
, 
Ëngth
;

485 if(
£t
==
NULL
 || 
¿ngeIndex
<0 || 
pS¹
==NULL || 
pEnd
==NULL) {

486  
FALSE
;

489 
¬¿y
=
£t
->array;

490 
Ëngth
=
£t
->length;

491 
bmpL’gth
=
£t
->bmpLength;

493 
¿ngeIndex
*=2;

494 if(
¿ngeIndex
<
bmpL’gth
) {

495 *
pS¹
=
¬¿y
[
¿ngeIndex
++];

496 if(
¿ngeIndex
<
bmpL’gth
) {

497 *
pEnd
=
¬¿y
[
¿ngeIndex
]-1;

498 } if(
¿ngeIndex
<
Ëngth
) {

499 *
pEnd
=((((
št32_t
)
¬¿y
[
¿ngeIndex
])<<16)|array[rangeIndex+1])-1;

501 *
pEnd
=0x10ffff;

503  
TRUE
;

505 
¿ngeIndex
-=
bmpL’gth
;

506 
¿ngeIndex
*=2;

507 
Ëngth
-=
bmpL’gth
;

508 if(
¿ngeIndex
<
Ëngth
) {

509 
¬¿y
+=
bmpL’gth
;

510 *
pS¹
=(((
št32_t
)
¬¿y
[
¿ngeIndex
])<<16)|array[rangeIndex+1];

511 
¿ngeIndex
+=2;

512 if(
¿ngeIndex
<
Ëngth
) {

513 *
pEnd
=((((
št32_t
)
¬¿y
[
¿ngeIndex
])<<16)|array[rangeIndex+1])-1;

515 *
pEnd
=0x10ffff;

517  
TRUE
;

519  
FALSE
;

522 
	}
}

	@uset_imp.h

19 #iâdeà
__USET_IMP_H__


20 
	#__USET_IMP_H__


	)

22 
	~"unicode/uty³s.h
"

23 
	~"unicode/u£t.h
"

25 
U_CDECL_BEGIN


27 
	tU_CALLCONV


28 
	tUS‘Add
(
	tUS‘
 *
	t£t
, 
	tUCh¬32
 
	tc
);

30 
	tU_CALLCONV


31 
	tUS‘AddRªge
(
	tUS‘
 *
	t£t
, 
	tUCh¬32
 
	t¡¬t
, UCh¬32 
	t’d
);

33 
	tU_CALLCONV


34 
	tUS‘AddSŒšg
(
	tUS‘
 *
	t£t
, cÚ¡ 
	tUCh¬
 *
	t¡r
, 
	tšt32_t
 
	tËngth
);

36 
	tU_CALLCONV


37 
	tUS‘Remove
(
	tUS‘
 *
	t£t
, 
	tUCh¬32
 
	tc
);

39 
	tU_CALLCONV


40 
	tUS‘RemoveRªge
(
	tUS‘
 *
	t£t
, 
	tUCh¬32
 
	t¡¬t
, UCh¬32 
	t’d
);

47 
	sUS‘Add”
 {

48 
US‘
 *
	m£t
;

49 
US‘Add
 *
	madd
;

50 
US‘AddRªge
 *
	maddRªge
;

51 
US‘AddSŒšg
 *
	maddSŒšg
;

52 
US‘Remove
 *
	m»move
;

53 
US‘RemoveRªge
 *
	m»moveRªge
;

55 
US‘Add”
 
	tUS‘Add”
;

57 
	gU_CDECL_END


	@uset_props.cpp

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/uobjeù.h
"

22 
	~"unicode/u£t.h
"

23 
	~"unicode/uni£t.h
"

24 
	~"cmemÜy.h
"

25 
	~"unicode/u¡ršg.h
"

26 
	~"unicode/·r£pos.h
"

28 
U_NAMESPACE_USE


30 
U_CAPI
 
US‘
* 
U_EXPORT2


31 
	$u£t_İ’P©‹º
(cÚ¡ 
UCh¬
* 
·‰”n
, 
št32_t
 
·‰”nL’gth
,

32 
UE¼ÜCode
* 
ec
)

34 
UnicodeSŒšg
 
	`·t
(
·‰”nL’gth
==-1, 
·‰”n
,…atternLength);

35 
UnicodeS‘
* 
£t
 = 
Ãw
 
	`UnicodeS‘
(
·t
, *
ec
);

37 if(
£t
 == 0) {

38 *
ec
 = 
U_MEMORY_ALLOCATION_ERROR
;

42 ià(
	`U_FAILURE
(*
ec
)) {

43 
d–‘e
 
£t
;

44 
£t
 = 
NULL
;

46  (
US‘
*è
£t
;

47 
	}
}

49 
U_CAPI
 
US‘
* 
U_EXPORT2


50 
	$u£t_İ’P©‹ºO±iÚs
(cÚ¡ 
UCh¬
* 
·‰”n
, 
št32_t
 
·‰”nL’gth
,

51 
ušt32_t
 
İtiÚs
,

52 
UE¼ÜCode
* 
ec
)

54 
UnicodeSŒšg
 
	`·t
(
·‰”nL’gth
==-1, 
·‰”n
,…atternLength);

55 
UnicodeS‘
* 
£t
 = 
Ãw
 
	`UnicodeS‘
(
·t
, 
İtiÚs
, 
NULL
, *
ec
);

57 if(
£t
 == 0) {

58 *
ec
 = 
U_MEMORY_ALLOCATION_ERROR
;

62 ià(
	`U_FAILURE
(*
ec
)) {

63 
d–‘e
 
£t
;

64 
£t
 = 
NULL
;

66  (
US‘
*è
£t
;

67 
	}
}

70 
U_CAPI
 
št32_t
 
U_EXPORT2


71 
	$u£t_­¶yP©‹º
(
US‘
 *
£t
,

72 cÚ¡ 
UCh¬
 *
·‰”n
, 
št32_t
 
·‰”nL’gth
,

73 
ušt32_t
 
İtiÚs
,

74 
UE¼ÜCode
 *
¡©us
){

78 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

85 if(
£t
 =ğ
NULL
){

86 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

90 
UnicodeSŒšg
 
	`·t
(
·‰”n
, 
·‰”nL’gth
);

92 
P¬£Pos™iÚ
 
pos
;

94 ((
UnicodeS‘
*è
£t
)->
	`­¶yP©‹º
(
·t
, 
pos
, 
İtiÚs
, 
NULL
, *
¡©us
);

96  
pos
.
	`g‘Index
();

97 
	}
}

99 
U_CAPI
 
U_EXPORT2


100 
	$u£t_­¶yIÁPrİ”tyV®ue
(
US‘
* 
£t
,

101 
UPrİ”ty
 
´İ
, 
št32_t
 
v®ue
, 
UE¼ÜCode
* 
ec
) {

102 ((
UnicodeS‘
*è
£t
)->
	`­¶yIÁPrİ”tyV®ue
(
´İ
, 
v®ue
, *
ec
);

103 
	}
}

105 
U_CAPI
 
U_EXPORT2


106 
	$u£t_­¶yPrİ”tyAlŸs
(
US‘
* 
£t
,

107 cÚ¡ 
UCh¬
 *
´İ
, 
št32_t
 
´İL’gth
,

108 cÚ¡ 
UCh¬
 *
v®ue
, 
št32_t
 
v®ueL’gth
,

109 
UE¼ÜCode
* 
ec
) {

111 
UnicodeSŒšg
 
	`p
(
´İ
, 
´İL’gth
);

112 
UnicodeSŒšg
 
	`v
(
v®ue
, 
v®ueL’gth
);

114 ((
UnicodeS‘
*è
£t
)->
	`­¶yPrİ”tyAlŸs
(
p
, 
v
, *
ec
);

115 
	}
}

117 
U_CAPI
 
UBoŞ
 
U_EXPORT2


118 
	$u£t_»£mbËsP©‹º
(cÚ¡ 
UCh¬
 *
·‰”n
, 
št32_t
 
·‰”nL’gth
,

119 
št32_t
 
pos
) {

121 
UnicodeSŒšg
 
	`·t
(
·‰”n
, 
·‰”nL’gth
);

123  ((
pos
+1è< 
·t
.
	`Ëngth
() &&

124 
·t
.
	`ch¬At
(
pos
è=ğ(
UCh¬
)91 ) ||

125 
UnicodeS‘
::
	`»£mbËsP©‹º
(
·t
, 
pos
);

126 
	}
}

128 
U_CAPI
 
št32_t
 
U_EXPORT2


129 
	$u£t_toP©‹º
(cÚ¡ 
US‘
* 
£t
,

130 
UCh¬
* 
»suÉ
, 
št32_t
 
»suÉC­ac™y
,

131 
UBoŞ
 
esÿ³UÅršbË
,

132 
UE¼ÜCode
* 
ec
) {

133 
UnicodeSŒšg
 
·t
;

134 ((cÚ¡ 
UnicodeS‘
*è
£t
)->
	`toP©‹º
(
·t
, 
esÿ³UÅršbË
);

135  
·t
.
	`exŒaù
(
»suÉ
, 
»suÉC­ac™y
, *
ec
);

136 
	}
}

	@usetiter.cpp

7 
	~"unicode/u£t™”.h
"

8 
	~"unicode/uni£t.h
"

9 
	~"unicode/uni¡r.h
"

10 
	~"uveùÜ.h
"

12 
U_NAMESPACE_BEGIN


14 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
UnicodeS‘I‹¿tÜ
)

20 
UnicodeS‘I‹¿tÜ
::
	$UnicodeS‘I‹¿tÜ
(cÚ¡ 
UnicodeS‘
& 
uS‘
) {

21 
ıSŒšg
 = 
NULL
;

22 
	`»£t
(
uS‘
);

23 
	}
}

28 
	gUnicodeS‘I‹¿tÜ
::
	$UnicodeS‘I‹¿tÜ
() {

29 
this
->
£t
 = 
NULL
;

30 
ıSŒšg
 = 
NULL
;

31 
	`»£t
();

32 
	}
}

34 
	gUnicodeS‘I‹¿tÜ
::~
	$UnicodeS‘I‹¿tÜ
() {

35 
d–‘e
 
ıSŒšg
;

36 
	}
}

47 
UBoŞ
 
	gUnicodeS‘I‹¿tÜ
::
	$Ãxt
() {

48 ià(
ÃxtEËm’t
 <ğ
’dEËm’t
) {

49 
cod•ošt
 = 
cod•oštEnd
 = 
ÃxtEËm’t
++;

50 
¡ršg
 = 
NULL
;

51  
TRUE
;

53 ià(
¿nge
 < 
’dRªge
) {

54 
	`lßdRªge
(++
¿nge
);

55 
cod•ošt
 = 
cod•oštEnd
 = 
ÃxtEËm’t
++;

56 
¡ršg
 = 
NULL
;

57  
TRUE
;

60 ià(
ÃxtSŒšg
 >ğ
¡ršgCouÁ
è 
FALSE
;

61 
cod•ošt
 = (
UCh¬32
)
IS_STRING
;

62 
¡ršg
 = (cÚ¡ 
UnicodeSŒšg
*è
£t
->
¡ršgs
->
	`–em’tAt
(
ÃxtSŒšg
++);

63  
TRUE
;

64 
	}
}

77 
UBoŞ
 
	gUnicodeS‘I‹¿tÜ
::
	$ÃxtRªge
() {

78 
¡ršg
 = 
NULL
;

79 ià(
ÃxtEËm’t
 <ğ
’dEËm’t
) {

80 
cod•oštEnd
 = 
’dEËm’t
;

81 
cod•ošt
 = 
ÃxtEËm’t
;

82 
ÃxtEËm’t
 = 
’dEËm’t
+1;

83  
TRUE
;

85 ià(
¿nge
 < 
’dRªge
) {

86 
	`lßdRªge
(++
¿nge
);

87 
cod•oštEnd
 = 
’dEËm’t
;

88 
cod•ošt
 = 
ÃxtEËm’t
;

89 
ÃxtEËm’t
 = 
’dEËm’t
+1;

90  
TRUE
;

93 ià(
ÃxtSŒšg
 >ğ
¡ršgCouÁ
è 
FALSE
;

94 
cod•ošt
 = (
UCh¬32
)
IS_STRING
;

95 
¡ršg
 = (cÚ¡ 
UnicodeSŒšg
*è
£t
->
¡ršgs
->
	`–em’tAt
(
ÃxtSŒšg
++);

96  
TRUE
;

97 
	}
}

102 
	gUnicodeS‘I‹¿tÜ
::
	$»£t
(cÚ¡ 
UnicodeS‘
& 
uS‘
) {

103 
this
->
£t
 = &
uS‘
;

104 
	`»£t
();

105 
	}
}

110 
	gUnicodeS‘I‹¿tÜ
::
	$»£t
() {

111 ià(
£t
 =ğ
NULL
) {

113 
’dRªge
 = -1;

114 
¡ršgCouÁ
 = 0;

116 
’dRªge
 = 
£t
->
	`g‘RªgeCouÁ
() - 1;

117 
¡ršgCouÁ
 = 
£t
->
¡ršgs
->
	`size
();

119 
¿nge
 = 0;

120 
’dEËm’t
 = -1;

121 
ÃxtEËm’t
 = 0;

122 ià(
’dRªge
 >= 0) {

123 
	`lßdRªge
(
¿nge
);

125 
ÃxtSŒšg
 = 0;

126 
¡ršg
 = 
NULL
;

127 
	}
}

129 
	gUnicodeS‘I‹¿tÜ
::
	$lßdRªge
(
št32_t
 
iRªge
) {

130 
ÃxtEËm’t
 = 
£t
->
	`g‘RªgeS¹
(
iRªge
);

131 
’dEËm’t
 = 
£t
->
	`g‘RªgeEnd
(
iRªge
);

132 
	}
}

135 cÚ¡ 
	gUnicodeSŒšg
& 
	gUnicodeS‘I‹¿tÜ
::
	$g‘SŒšg
() {

136 ià(
¡ršg
==
NULL
 && 
cod•ošt
!=(
UCh¬32
)
IS_STRING
) {

137 ià(
ıSŒšg
 =ğ
NULL
) {

138 
ıSŒšg
 = 
Ãw
 
	`UnicodeSŒšg
();

140 ià(
ıSŒšg
 !ğ
NULL
) {

141 
ıSŒšg
->
	`£tTo
((
UCh¬32
)
cod•ošt
);

143 
¡ršg
 = 
ıSŒšg
;

145  *
¡ršg
;

146 
	}
}

148 
	gU_NAMESPACE_END


	@ushape.c

19 
	~"unicode/uty³s.h
"

20 
	~"unicode/uch¬.h
"

21 
	~"unicode/u¡ršg.h
"

22 
	~"unicode/ush­e.h
"

23 
	~"cmemÜy.h
"

24 
	~"putimp.h
"

25 
	~"u¡r_imp.h
"

26 
	~"ubidi_´İs.h
"

28 #ià
UTF_SIZE
<16

37 #”rÜ 
This
 
im¶em’tiÚ
 
assumes
 
UTF
-16 
Ü
 UTF-32 (
check
 
UTF_SIZE
)

52 
	#IRRELEVANT
 4

	)

53 
	#LAMTYPE
 16

	)

54 
	#ALEFTYPE
 32

	)

55 
	#LINKR
 1

	)

56 
	#LINKL
 2

	)

57 
	#APRESENT
 8

	)

58 
	#SHADDA
 64

	)

59 
	#CSHADDA
 128

	)

60 
	#COMBINE
 (
SHADDA
+
CSHADDA
)

	)

62 
	#HAMZAFE_CHAR
 0xã80

	)

63 
	#HAMZA06_CHAR
 0x0621

	)

64 
	#YEH_HAMZA_CHAR
 0x0626

	)

65 
	#YEH_HAMZAFE_CHAR
 0xFE89

	)

66 
	#LAMALEF_SPACE_SUB
 0xFFFF

	)

67 
	#TASHKEEL_SPACE_SUB
 0xFFFE

	)

68 
	#NEW_TAIL_CHAR
 0xFE73

	)

69 
	#OLD_TAIL_CHAR
 0x200B

	)

70 
	#LAM_CHAR
 0x0644

	)

71 
	#SPACE_CHAR
 0x0020

	)

72 
	#SHADDA_CHAR
 0xFE7C

	)

73 
	#TATWEEL_CHAR
 0x0640

	)

74 
	#SHADDA_TATWEEL_CHAR
 0xFE7D

	)

76 
	#SHAPE_MODE
 0

	)

77 
	#DESHAPE_MODE
 1

	)

79 
UCh¬
 
	gCh¬
 = 
OLD_TAIL_CHAR
;

80 
ušt32_t
 
	guSh­eLam®efBegš
 = 
U_SHAPE_LAMALEF_BEGIN
;

81 
ušt32_t
 
	guSh­eLam®efEnd
 = 
U_SHAPE_LAMALEF_END
;

82 
ušt32_t
 
	guSh­eTashk“lBegš
 = 
U_SHAPE_TASHKEEL_BEGIN
;

83 
ušt32_t
 
	guSh­eTashk“lEnd
 = 
U_SHAPE_TASHKEEL_END
;

84 
	g¥aûsR–©iveToTextBegšEnd
 = 0;

86 cÚ¡ 
ušt8_t
 
	gFamyIsŞ©edFš®
[] = {

103 cÚ¡ 
ušt8_t
 
	gshk“lMedŸl
[] = {

122 cÚ¡ 
UCh¬
 
	gyehHamzaToYeh
[] =

128 cÚ¡ 
ušt8_t
 
	gI¼–evªtPos
[] = {

134 cÚ¡ 
UCh¬
 
	gcÚv”tLamAËf
[] =

146 cÚ¡ 
UCh¬
 
	g¬aLšk
[178]=

234 cÚ¡ 
ušt8_t
 
	g´esALšk
[] = {

256 cÚ¡ 
ušt8_t
 
	g´esBLšk
[]=

270 cÚ¡ 
UCh¬
 
	gcÚv”tFBto06
[] =

286 cÚ¡ 
UCh¬
 
	gcÚv”tFEto06
[] =

300 cÚ¡ 
ušt8_t
 
	gsh­eTabË
[4][4][4]=

315 
	$_sh­eToA¿bicDig™sW™hCÚ‹xt
(
UCh¬
 *
s
, 
št32_t
 
Ëngth
,

316 
UCh¬
 
dig™Ba£
,

317 
UBoŞ
 
isLogiÿl
, UBoŞ 
Ï¡SŒÚgWasAL
) {

318 cÚ¡ 
UBiDiPrİs
 *
bdp
;

319 
št32_t
 
i
;

320 
UCh¬
 
c
;

322 
bdp
=
	`ubidi_g‘SšgËtÚ
();

323 
dig™Ba£
-=0x30;

326 if(
isLogiÿl
) {

327 
i
=0; i<
Ëngth
; ++i) {

328 
c
=
s
[
i
];

329 
	`ubidi_g‘CÏss
(
bdp
, 
c
)) {

330 
U_LEFT_TO_RIGHT
:

331 
U_RIGHT_TO_LEFT
:

332 
Ï¡SŒÚgWasAL
=
FALSE
;

334 
U_RIGHT_TO_LEFT_ARABIC
:

335 
Ï¡SŒÚgWasAL
=
TRUE
;

337 
U_EUROPEAN_NUMBER
:

338 if(
Ï¡SŒÚgWasAL
 && (
ušt32_t
)(
c
-0x30)<10) {

339 
s
[
i
]=(
UCh¬
)(
dig™Ba£
+
c
);

347 
i
=
Ëngth
; i>0; ) {

348 
c
=
s
[--
i
];

349 
	`ubidi_g‘CÏss
(
bdp
, 
c
)) {

350 
U_LEFT_TO_RIGHT
:

351 
U_RIGHT_TO_LEFT
:

352 
Ï¡SŒÚgWasAL
=
FALSE
;

354 
U_RIGHT_TO_LEFT_ARABIC
:

355 
Ï¡SŒÚgWasAL
=
TRUE
;

357 
U_EUROPEAN_NUMBER
:

358 if(
Ï¡SŒÚgWasAL
 && (
ušt32_t
)(
c
-0x30)<10) {

359 
s
[
i
]=(
UCh¬
)(
dig™Ba£
+
c
);

367 
	}
}

377 
	$šv”tBufãr
(
UCh¬
 *
bufãr
,
št32_t
 
size
,
ušt64_t
 
İtiÚs
,št32_ˆ
lowlim™
,št32_ˆ
highlim™
) {

379 
UCh¬
 
‹mp
;

380 
št32_t
 
i
=0,
j
=0;

381 
i
=
lowlim™
,
j
=
size
-
highlim™
-1;i<j;i++,j--) {

382 
‹mp
 = 
bufãr
[
i
];

383 
bufãr
[
i
] = bufãr[
j
];

384 
bufãr
[
j
] = 
‹mp
;

386 
	}
}

396 
U_INLINE
 
UCh¬


397 
	$chªgeLamAËf
(
UCh¬
 
ch
) {

398 
ch
) {

409 
	}
}

417 
UCh¬


418 
	$g‘Lšk
(
UCh¬
 
ch
) {

419 if(
ch
 >= 0x0622 && ch <= 0x06D3) {

420 (
¬aLšk
[
ch
-0x0622]);

421 } if(
ch
 == 0x200D) {

423 } if(
ch
 >= 0x206D && ch <= 0x206F) {

425 }if(
ch
 >= 0xFB50 && ch <= 0xFC62) {

426 (
´esALšk
[
ch
-0xFB50]);

427 } if(
ch
 >= 0xFE70 && ch <= 0xFEFC) {

428 (
´esBLšk
[
ch
-0xFE70]);

432 
	}
}

441 
	$couÁS·ûs
(
UCh¬
 *
de¡
,
št32_t
 
size
,
ušt64_t
 
İtiÚs
,št32_ˆ*
¥aûsCouÁl
,št32_ˆ*
¥aûsCouÁr
) {

443 
št32_t
 
i
 = 0;

444 
št32_t
 
couÁl
 = 0,
couÁr
 = 0;

445 
de¡
[
i
] =ğ
SPACE_CHAR
) {

446 
couÁl
++;

447 
i
++;

449 
de¡
[
size
-1] =ğ
SPACE_CHAR
) {

450 
couÁr
++;

451 
size
--;

453 *
¥aûsCouÁl
 = 
couÁl
;

454 *
¥aûsCouÁr
 = 
couÁr
;

455 
	}
}

461 
U_INLINE
 
št32_t


462 
	$isTashk“lCh¬
(
UCh¬
 
ch
) {

463  (
št32_t
)Ğ
ch
>=0x064B && ch<= 0x0652 );

464 
	}
}

470 
U_INLINE
 
št32_t


471 
	$isTashk“lCh¬FE
(
UCh¬
 
ch
) {

472  (
št32_t
)Ğ
ch
>=0xFE70 && ch<= 0xFE7F );

473 
	}
}

479 
U_INLINE
 
št32_t


480 
	$isAËfCh¬
(
UCh¬
 
ch
) {

481  (
št32_t
)Ğ(
ch
==0x0622)||(ch==0x0623)||(ch==0x0625)||(ch==0x0627) );

482 
	}
}

488 
U_INLINE
 
št32_t


489 
	$isLamAËfCh¬
(
UCh¬
 
ch
) {

490  (
št32_t
)((
ch
>=0xFEF5)&&(ch<=0xFEFC) );

491 
	}
}

498 
U_INLINE
 
št32_t


499 
	$isTaCh¬
(
UCh¬
 
ch
) {

500 if(
ch
 =ğ
OLD_TAIL_CHAR
 || ch =ğ
NEW_TAIL_CHAR
){

505 
	}
}

513 
U_INLINE
 
št32_t


514 
	$isS“nTaFamyCh¬
(
UCh¬
 
ch
) {

515 if(
ch
 >= 0xfeb1 && ch < 0xfebf){

516  
FamyIsŞ©edFš®
 [
ch
 - 0xFEB1];

520 
	}
}

527 
U_INLINE
 
št32_t


528 
	$isS“nFamyCh¬
(
UCh¬
 
ch
){

529 if(
ch
 >= 0x633 && ch <= 0x636){

534 
	}
}

542 
U_INLINE
 
št32_t


543 
	$isAËfMaksou¿Ch¬
(
UCh¬
 
ch
) {

544  (
št32_t
)Ğ(
ch
 == 0xFEEF) || ( ch == 0xFEF0) || (ch == 0x0649));

545 
	}
}

552 
U_INLINE
 
št32_t


553 
	$isYehHamzaCh¬
(
UCh¬
 
ch
) {

554 if((
ch
==0xFE89)||(ch==0xFE8A)){

559 
	}
}

568 
U_INLINE
 
št32_t


569 
	$isTashk“lOnT©w“lCh¬
(
UCh¬
 
ch
){

570 if(
ch
 >ğ0xã70 && ch <ğ0xã7à&& ch !ğ
NEW_TAIL_CHAR
 && ch !ğ0xFE75 && ch !ğ
SHADDA_TATWEEL_CHAR
)

572  
shk“lMedŸl
 [
ch
 - 0xFE70];

573 }ifĞ(
ch
 >ğ0xfcf2 && ch <ğ0xfcf4è|| (ch =ğ
SHADDA_TATWEEL_CHAR
)) {

578 
	}
}

587 
U_INLINE
 
št32_t


588 
	$isIsŞ©edTashk“lCh¬
(
UCh¬
 
ch
){

589 if(
ch
 >ğ0xã70 && ch <ğ0xã7à&& ch !ğ
NEW_TAIL_CHAR
 && ch != 0xFE75){

590  (1 - 
shk“lMedŸl
 [
ch
 - 0xFE70]);

591 }if(
ch
 >= 0xfc5e && ch <= 0xfc63){

596 
	}
}

610 
št32_t


611 
	$ÿlcuÏ‹Size
(cÚ¡ 
UCh¬
 *
sourû
, 
št32_t
 
sourûL’gth
,

612 
št32_t
 
de¡Size
,
ušt64_t
 
İtiÚs
) {

614 
št32_t
 
i
 = 0;

616 
ÏmAËfO±iÚ
 = 0;

617 
shk“lO±iÚ
 = 0;

619 
de¡Size
 = 
sourûL’gth
;

621 ià(((
İtiÚs
&
U_SHAPE_LETTERS_MASK
è=ğ
U_SHAPE_LETTERS_SHAPE
 ||

622 ((
İtiÚs
&
U_SHAPE_LETTERS_MASK
è=ğ
U_SHAPE_LETTERS_SHAPE_TASHKEEL_ISOLATED
 )) &&

623 ((
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
U_SHAPE_LAMALEF_RESIZE
 )){

624 
ÏmAËfO±iÚ
 = 1;

626 if((
İtiÚs
&
U_SHAPE_LETTERS_MASK
è=ğ
U_SHAPE_LETTERS_SHAPE
 &&

627 ((
İtiÚs
&
U_SHAPE_TASHKEEL_MASK
è=ğ
U_SHAPE_TASHKEEL_RESIZE
 ) ){

628 
shk“lO±iÚ
 = 1;

631 if(
ÏmAËfO±iÚ
 || 
shk“lO±iÚ
){

632 if((
İtiÚs
&
U_SHAPE_TEXT_DIRECTION_MASK
)==
U_SHAPE_TEXT_DIRECTION_VISUAL_LTR
) {

633 
i
=0;i<
sourûL’gth
;i++) {

634 ifĞ((
	`isAËfCh¬
(
sourû
[
i
]))&& (i<(
sourûL’gth
-1)è&&(sourû[i+1] =ğ
LAM_CHAR
)è|| (
	`isTashk“lCh¬FE
(source[i])) ) {

635 
de¡Size
--;

638 }if((
İtiÚs
&
U_SHAPE_TEXT_DIRECTION_MASK
)==
U_SHAPE_TEXT_DIRECTION_LOGICAL
) {

639 
i
=0;i<
sourûL’gth
;i++) {

640 ifĞĞ(
sourû
[
i
] =ğ
LAM_CHAR
è&& (i<(
sourûL’gth
-1)è&& (
	`isAËfCh¬
(sourû[i+1]))è|| (
	`isTashk“lCh¬FE
(source[i])) ) {

641 
de¡Size
--;

647 ià((
İtiÚs
&
U_SHAPE_LETTERS_MASK
è=ğ
U_SHAPE_LETTERS_UNSHAPE
){

648 iàĞ(
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
U_SHAPE_LAMALEF_RESIZE
){

649 
i
=0;i<
sourûL’gth
;i++) {

650 if(
	`isLamAËfCh¬
(
sourû
[
i
]))

651 
de¡Size
++;

656  
de¡Size
;

657 
	}
}

669 
št32_t


670 
	$hªdËTashk“lW™hT©w“l
(
UCh¬
 *
de¡
, 
št32_t
 
sourûL’gth
,

671 
št32_t
 
de¡Size
,
ušt64_t
 
İtiÚs
,

672 
UE¼ÜCode
 *
pE¼ÜCode
) {

674 
i
;

675 
i
 = 0; i < 
sourûL’gth
; i++){

676 if((
	`isTashk“lOnT©w“lCh¬
(
de¡
[
i
]) == 1)){

677 
de¡
[
i
] = 
TATWEEL_CHAR
;

678 }if((
	`isTashk“lOnT©w“lCh¬
(
de¡
[
i
]) == 2)){

679 
de¡
[
i
] = 
SHADDA_TATWEEL_CHAR
;

680 }if(
	`isIsŞ©edTashk“lCh¬
(
de¡
[
i
]è&& de¡[i] !ğ
SHADDA_CHAR
){

681 
de¡
[
i
] = 
SPACE_CHAR
;

684  
sourûL’gth
;

685 
	}
}

709 
št32_t


710 
	$hªdËG’”©edS·ûs
(
UCh¬
 *
de¡
, 
št32_t
 
sourûL’gth
,

711 
št32_t
 
de¡Size
,

712 
ušt64_t
 
İtiÚs
,

713 
UE¼ÜCode
 *
pE¼ÜCode
 ) {

716 
št32_t
 
i
 = 0, 
j
 = 0;

717 
št32_t
 
couÁ
 = 0;

718 
UCh¬
 *
‹mpbufãr
=
NULL
;

720 
ÏmAËfO±iÚ
 = 0;

721 
shk“lO±iÚ
 = 0;

722 
sh­šgMode
 = 
SHAPE_MODE
;

724 ià(
sh­šgMode
 == 0){

725 iàĞ(
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
U_SHAPE_LAMALEF_RESIZE
 ){

726 
ÏmAËfO±iÚ
 = 1;

728 iàĞ(
İtiÚs
&
U_SHAPE_TASHKEEL_MASK
è=ğ
U_SHAPE_TASHKEEL_RESIZE
 ){

729 
shk“lO±iÚ
 = 1;

733 ià(
ÏmAËfO±iÚ
 || 
shk“lO±iÚ
){

734 
‹mpbufãr
 = (
UCh¬
 *)
	`u´v_m®loc
((
sourûL’gth
+1)*
U_SIZEOF_UCHAR
);

736 if(
‹mpbufãr
 =ğ
NULL
) {

737 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

741 
	`u´v_mem£t
(
‹mpbufãr
, 0, (
sourûL’gth
+1)*
U_SIZEOF_UCHAR
);

743 
i
 = 
j
 = 0; 
couÁ
 = 0;

744 
i
 < 
sourûL’gth
) {

745 iàĞ(
ÏmAËfO±iÚ
 && 
de¡
[
i
] =ğ
LAMALEF_SPACE_SUB
) ||

746 (
shk“lO±iÚ
 && 
de¡
[
i
] =ğ
TASHKEEL_SPACE_SUB
) ){

747 
j
--;

748 
couÁ
++;

750 
‹mpbufãr
[
j
] = 
de¡
[
i
];

752 
i
++;

753 
j
++;

756 
couÁ
 >= 0) {

757 
‹mpbufãr
[
i
] = 0x0000;

758 
i
--;

759 
couÁ
--;

762 
	`u´v_memıy
(
de¡
, 
‹mpbufãr
, 
sourûL’gth
*
U_SIZEOF_UCHAR
);

763 
de¡Size
 = 
	`u_¡¾’
(
de¡
);

766 
ÏmAËfO±iÚ
 = 0;

768 ià(
sh­šgMode
 == 0){

770 iàĞ(
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
U_SHAPE_LAMALEF_NEAR
 &&

771 (
İtiÚs
&
U_SHAPE_X_LAMALEF_SUB_ALTERNATE
) == 0) {

773 
ÏmAËfO±iÚ
 = 1;

777 ià(
ÏmAËfO±iÚ
){

779 
i
 = 0;

780 
i
 < 
sourûL’gth
) {

781 if(
ÏmAËfO±iÚ
&&
de¡
[
i
] =ğ
LAMALEF_SPACE_SUB
){

782 
de¡
[
i
] = 
SPACE_CHAR
;

784 
i
++;

786 
de¡Size
 = 
sourûL’gth
;

788 
ÏmAËfO±iÚ
 = 0;

789 
shk“lO±iÚ
 = 0;

791 ià(
sh­šgMode
 == 0) {

792 iàĞ((
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
uSh­eLam®efBegš
) ||

793 (((
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
U_SHAPE_LAMALEF_AUTO
 )

794 && (
¥aûsR–©iveToTextBegšEnd
==1)) ) {

795 
ÏmAËfO±iÚ
 = 1;

797 iàĞ(
İtiÚs
&
U_SHAPE_TASHKEEL_MASK
è=ğ
uSh­eTashk“lBegš
 ) {

798 
shk“lO±iÚ
 = 1;

802 if(
ÏmAËfO±iÚ
 || 
shk“lO±iÚ
){

803 
‹mpbufãr
 = (
UCh¬
 *)
	`u´v_m®loc
((
sourûL’gth
+1)*
U_SIZEOF_UCHAR
);

806 if(
‹mpbufãr
 =ğ
NULL
) {

807 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

811 
	`u´v_mem£t
(
‹mpbufãr
, 0, (
sourûL’gth
+1)*
U_SIZEOF_UCHAR
);

812 
i
 = 
j
 = 
sourûL’gth
; 
couÁ
 = 0;

813 
i
 >= 0) {

814 iàĞ(
ÏmAËfO±iÚ
 && 
de¡
[
i
] =ğ
LAMALEF_SPACE_SUB
) ||

815 (
shk“lO±iÚ
 && 
de¡
[
i
] =ğ
TASHKEEL_SPACE_SUB
) ){

816 
j
++;

817 
couÁ
++;

819 
‹mpbufãr
[
j
] = 
de¡
[
i
];

821 
i
--;

822 
j
--;

825 
i
=0 ;˜< 
couÁ
; i++){

826 
‹mpbufãr
[
i
] = 
SPACE_CHAR
;

829 
	`u´v_memıy
(
de¡
, 
‹mpbufãr
, 
sourûL’gth
*
U_SIZEOF_UCHAR
);

830 
de¡Size
 = 
sourûL’gth
;

835 
ÏmAËfO±iÚ
 = 0;

836 
shk“lO±iÚ
 = 0;

838 ià(
sh­šgMode
 == 0) {

839 iàĞ((
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
uSh­eLam®efEnd
) ||

840 (((
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
U_SHAPE_LAMALEF_AUTO
 )

841 && (
¥aûsR–©iveToTextBegšEnd
==0)) ) {

842 
ÏmAËfO±iÚ
 = 1;

844 iàĞ(
İtiÚs
&
U_SHAPE_TASHKEEL_MASK
è=ğ
uSh­eTashk“lEnd
 ){

845 
shk“lO±iÚ
 = 1;

849 if(
ÏmAËfO±iÚ
 || 
shk“lO±iÚ
){

850 
‹mpbufãr
 = (
UCh¬
 *)
	`u´v_m®loc
((
sourûL’gth
+1)*
U_SIZEOF_UCHAR
);

852 if(
‹mpbufãr
 =ğ
NULL
) {

853 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

857 
	`u´v_mem£t
(
‹mpbufãr
, 0, (
sourûL’gth
+1)*
U_SIZEOF_UCHAR
);

859 
i
 = 
j
 = 0; 
couÁ
 = 0;

860 
i
 < 
sourûL’gth
) {

861 iàĞ(
ÏmAËfO±iÚ
 && 
de¡
[
i
] =ğ
LAMALEF_SPACE_SUB
) ||

862 (
shk“lO±iÚ
 && 
de¡
[
i
] =ğ
TASHKEEL_SPACE_SUB
) ){

863 
j
--;

864 
couÁ
++;

866 
‹mpbufãr
[
j
] = 
de¡
[
i
];

868 
i
++;

869 
j
++;

872 
couÁ
 >= 0) {

873 
‹mpbufãr
[
i
] = 
SPACE_CHAR
;

874 
i
--;

875 
couÁ
--;

878 
	`u´v_memıy
(
de¡
,
‹mpbufãr
, 
sourûL’gth
*
U_SIZEOF_UCHAR
);

879 
de¡Size
 = 
sourûL’gth
;

883 if(
‹mpbufãr
){

884 
	`u´v_ä“
(
‹mpbufãr
);

887  
de¡Size
;

888 
	}
}

900 
št32_t


901 
	$ex·ndCompos™Ch¬AtBegš
(
UCh¬
 *
de¡
, 
št32_t
 
sourûL’gth
, iÁ32_ˆ
de¡Size
,
UE¼ÜCode
 *
pE¼ÜCode
) {

902 
št32_t
 
i
 = 0,
j
 = 0;

903 
št32_t
 
couÁl
 = 0;

904 
UCh¬
 *
‹mpbufãr
=
NULL
;

906 
‹mpbufãr
 = (
UCh¬
 *)
	`u´v_m®loc
((
sourûL’gth
+1)*
U_SIZEOF_UCHAR
);

909 if(
‹mpbufãr
 =ğ
NULL
) {

910 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

914 
	`u´v_mem£t
(
‹mpbufãr
, 0, (
sourûL’gth
+1)*
U_SIZEOF_UCHAR
);

916 
i
 = 0;

917 
de¡
[
i
] =ğ
SPACE_CHAR
) {

918 
couÁl
++;

919 
i
++;

922 
i
 = 
j
 = 
sourûL’gth
-1;

924 
i
 >ğ0 && 
j
 >= 0) {

925 ifĞ
couÁl
>0 && 
	`isLamAËfCh¬
(
de¡
[
i
])) {

926 
‹mpbufãr
[
j
] = 
LAM_CHAR
;

927 
‹mpbufãr
[
j
-1] = 
cÚv”tLamAËf
[ 
de¡
[
i
] - 0xFEF5 ];

928 
j
--;

929 
couÁl
--;

931 ifĞ
couÁl
 =ğ0 && 
	`isLamAËfCh¬
(
de¡
[
i
]) ) {

932 *
pE¼ÜCode
=
U_NO_SPACE_AVAILABLE
;

934 
‹mpbufãr
[
j
] = 
de¡
[
i
];

936 
i
--;

937 
j
--;

939 
	`u´v_memıy
(
de¡
, 
‹mpbufãr
, 
sourûL’gth
*
U_SIZEOF_UCHAR
);

941 
	`u´v_ä“
(
‹mpbufãr
);

943 
de¡Size
 = 
sourûL’gth
;

944  
de¡Size
;

945 
	}
}

957 
št32_t


958 
	$ex·ndCompos™Ch¬AtEnd
(
UCh¬
 *
de¡
, 
št32_t
 
sourûL’gth
, iÁ32_ˆ
de¡Size
,
UE¼ÜCode
 *
pE¼ÜCode
) {

959 
št32_t
 
i
 = 0,
j
 = 0;

961 
št32_t
 
couÁr
 = 0;

962 
št32_t
 
špsize
 = 
sourûL’gth
;

964 
UCh¬
 *
‹mpbufãr
=
NULL
;

965 
‹mpbufãr
 = (
UCh¬
 *)
	`u´v_m®loc
((
sourûL’gth
+1)*
U_SIZEOF_UCHAR
);

968 if(
‹mpbufãr
 =ğ
NULL
) {

969 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

973 
	`u´v_mem£t
(
‹mpbufãr
, 0, (
sourûL’gth
+1)*
U_SIZEOF_UCHAR
);

975 
de¡
[
špsize
-1] =ğ
SPACE_CHAR
) {

976 
couÁr
++;

977 
špsize
--;

980 
i
 = 
sourûL’gth
 - 
couÁr
 - 1;

981 
j
 = 
sourûL’gth
 - 1;

983 
i
 >ğ0 && 
j
 >= 0) {

984 ifĞ
couÁr
>0 && 
	`isLamAËfCh¬
(
de¡
[
i
]) ) {

985 
‹mpbufãr
[
j
] = 
LAM_CHAR
;

986 
‹mpbufãr
[
j
-1] = 
cÚv”tLamAËf
[ 
de¡
[
i
] - 0xFEF5 ];

987 
j
--;

988 
couÁr
--;

990 ià((
couÁr
 =ğ0è&& 
	`isLamAËfCh¬
(
de¡
[
i
]) ) {

991 *
pE¼ÜCode
=
U_NO_SPACE_AVAILABLE
;

993 
‹mpbufãr
[
j
] = 
de¡
[
i
];

995 
i
--;

996 
j
--;

999 if(
couÁr
 > 0) {

1000 
	`u´v_memmove
(
‹mpbufãr
,empbufãr+
couÁr
, 
sourûL’gth
*
U_SIZEOF_UCHAR
);

1001 if(
	`u_¡¾’
(
‹mpbufãr
è< 
sourûL’gth
) {

1002 
i
=
sourûL’gth
-1;i>=sourûL’gth-
couÁr
;i--) {

1003 
‹mpbufãr
[
i
] = 
SPACE_CHAR
;

1007 
	`u´v_memıy
(
de¡
, 
‹mpbufãr
, 
sourûL’gth
*
U_SIZEOF_UCHAR
);

1009 
	`u´v_ä“
(
‹mpbufãr
);

1011 
de¡Size
 = 
sourûL’gth
;

1012  
de¡Size
;

1013 
	}
}

1024 
št32_t


1025 
	$ex·ndCompos™Ch¬AtN—r
(
UCh¬
 *
de¡
, 
št32_t
 
sourûL’gth
, iÁ32_ˆ
de¡Size
,
UE¼ÜCode
 *
pE¼ÜCode
,

1026 
yehHamzaO±iÚ
, 
£’TaO±iÚ
, 
ÏmAËfO±iÚ
) {

1027 
št32_t
 
i
 = 0;

1030 
UCh¬
 
Ïm®efCh¬
, 
yehhamzaCh¬
;

1032 
i
 = 0 ;i<=
sourûL’gth
-1;i++) {

1033 ià(
£’TaO±iÚ
 && 
	`isS“nTaFamyCh¬
(
de¡
[
i
])) {

1034 ià((
i
>0è&& (
de¡
[i-1] =ğ
SPACE_CHAR
) ) {

1035 
de¡
[
i
-1] = 
Ch¬
;

1037 *
pE¼ÜCode
=
U_NO_SPACE_AVAILABLE
;

1039 }if(
yehHamzaO±iÚ
 && (
	`isYehHamzaCh¬
(
de¡
[
i
])) ) {

1040 ià((
i
>0è&& (
de¡
[i-1] =ğ
SPACE_CHAR
) ) {

1041 
yehhamzaCh¬
 = 
de¡
[
i
];

1042 
de¡
[
i
] = 
yehHamzaToYeh
[
yehhamzaCh¬
 - 
YEH_HAMZAFE_CHAR
];

1043 
de¡
[
i
-1] = 
HAMZAFE_CHAR
;

1046 *
pE¼ÜCode
=
U_NO_SPACE_AVAILABLE
;

1048 }if(
ÏmAËfO±iÚ
 && 
	`isLamAËfCh¬
(
de¡
[
i
+1])) {

1049 if(
de¡
[
i
] =ğ
SPACE_CHAR
){

1050 
Ïm®efCh¬
 = 
de¡
[
i
+1];

1051 
de¡
[
i
+1] = 
LAM_CHAR
;

1052 
de¡
[
i
] = 
cÚv”tLamAËf
[ 
Ïm®efCh¬
 - 0xFEF5 ];

1054 *
pE¼ÜCode
=
U_NO_SPACE_AVAILABLE
;

1058 
de¡Size
 = 
sourûL’gth
;

1059  
de¡Size
;

1060 
	}
}

1077 
št32_t


1078 
	$ex·ndCompos™Ch¬
(
UCh¬
 *
de¡
, 
št32_t
 
sourûL’gth
,

1079 
št32_t
 
de¡Size
,
ušt64_t
 
İtiÚs
,

1080 
UE¼ÜCode
 *
pE¼ÜCode
, 
sh­šgMode
) {

1083 
št32_t
 
i
 = 0,
j
 = 0;

1085 
UCh¬
 *
‹mpbufãr
=
NULL
;

1086 
yehHamzaO±iÚ
 = 0;

1087 
£’TaO±iÚ
 = 0;

1088 
ÏmAËfO±iÚ
 = 0;

1090 ià(
sh­šgMode
 == 1){

1091 iàĞ(
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
U_SHAPE_LAMALEF_AUTO
){

1093 if(
¥aûsR–©iveToTextBegšEnd
 == 0) {

1094 
de¡Size
 = 
	`ex·ndCompos™Ch¬AtEnd
(
de¡
, 
sourûL’gth
, de¡Size, 
pE¼ÜCode
);

1096 if(*
pE¼ÜCode
 =ğ
U_NO_SPACE_AVAILABLE
) {

1097 *
pE¼ÜCode
 = 
U_ZERO_ERROR
;

1098 
de¡Size
 = 
	`ex·ndCompos™Ch¬AtBegš
(
de¡
, 
sourûL’gth
, de¡Size, 
pE¼ÜCode
);

1101 
de¡Size
 = 
	`ex·ndCompos™Ch¬AtBegš
(
de¡
, 
sourûL’gth
, de¡Size, 
pE¼ÜCode
);

1103 if(*
pE¼ÜCode
 =ğ
U_NO_SPACE_AVAILABLE
) {

1104 *
pE¼ÜCode
 = 
U_ZERO_ERROR
;

1105 
de¡Size
 = 
	`ex·ndCompos™Ch¬AtEnd
(
de¡
, 
sourûL’gth
, de¡Size, 
pE¼ÜCode
);

1109 if(*
pE¼ÜCode
 =ğ
U_NO_SPACE_AVAILABLE
) {

1110 *
pE¼ÜCode
 = 
U_ZERO_ERROR
;

1111 
de¡Size
 = 
	`ex·ndCompos™Ch¬AtN—r
(
de¡
, 
sourûL’gth
, de¡Size, 
pE¼ÜCode
, 
yehHamzaO±iÚ
,

1112 
£’TaO±iÚ
, 1);

1117 ià(
sh­šgMode
 == 1){

1118 iàĞ(
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
uSh­eLam®efEnd
){

1119 
de¡Size
 = 
	`ex·ndCompos™Ch¬AtEnd
(
de¡
, 
sourûL’gth
, de¡Size, 
pE¼ÜCode
);

1123 ià(
sh­šgMode
 == 1){

1124 iàĞ(
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
uSh­eLam®efBegš
){

1125 
de¡Size
 = 
	`ex·ndCompos™Ch¬AtBegš
(
de¡
, 
sourûL’gth
, de¡Size, 
pE¼ÜCode
);

1129 ià(
sh­šgMode
 == 0){

1130 ià((
İtiÚs
&
U_SHAPE_YEHHAMZA_MASK
è=ğ
U_SHAPE_YEHHAMZA_TWOCELL_NEAR
){

1131 
yehHamzaO±iÚ
 = 1;

1133 ià((
İtiÚs
&
U_SHAPE_SEEN_MASK
è=ğ
U_SHAPE_SEEN_TWOCELL_NEAR
){

1134 
£’TaO±iÚ
 = 1;

1137 ià(
sh­šgMode
 == 1) {

1138 iàĞ(
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
U_SHAPE_LAMALEF_NEAR
) {

1139 
ÏmAËfO±iÚ
 = 1;

1144 ià(
yehHamzaO±iÚ
 || 
£’TaO±iÚ
 || 
ÏmAËfO±iÚ
){

1145 
de¡Size
 = 
	`ex·ndCompos™Ch¬AtN—r
(
de¡
, 
sourûL’gth
, de¡Size, 
pE¼ÜCode
, 
yehHamzaO±iÚ
,

1146 
£’TaO±iÚ
,
ÏmAËfO±iÚ
);

1150 ià(
sh­šgMode
 == 1){

1151 iàĞ(
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è=ğ
U_SHAPE_LAMALEF_RESIZE
){

1152 
de¡Size
 = 
	`ÿlcuÏ‹Size
(
de¡
,
sourûL’gth
,de¡Size,
İtiÚs
);

1153 
‹mpbufãr
 = (
UCh¬
 *)
	`u´v_m®loc
((
de¡Size
+1)*
U_SIZEOF_UCHAR
);

1156 if(
‹mpbufãr
 =ğ
NULL
) {

1157 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

1161 
	`u´v_mem£t
(
‹mpbufãr
, 0, (
de¡Size
+1)*
U_SIZEOF_UCHAR
);

1163 
i
 = 
j
 = 0;

1164 
i
 < 
de¡Size
 && 
j
 < destSize) {

1165 if(
	`isLamAËfCh¬
(
de¡
[
i
]) ) {

1166 
‹mpbufãr
[
j
] = 
cÚv”tLamAËf
[ 
de¡
[
i
] - 0xFEF5 ];

1167 
‹mpbufãr
[
j
+1] = 
LAM_CHAR
;

1168 
j
++;

1170 
‹mpbufãr
[
j
] = 
de¡
[
i
];

1172 
i
++;

1173 
j
++;

1176 
	`u´v_memıy
(
de¡
, 
‹mpbufãr
, 
de¡Size
*
U_SIZEOF_UCHAR
);

1180 if(
‹mpbufãr
) {

1181 
	`u´v_ä“
(
‹mpbufãr
);

1183  
de¡Size
;

1184 
	}
}

1192 
št32_t


1193 
	$sh­eUnicode
(
UCh¬
 *
de¡
, 
št32_t
 
sourûL’gth
,

1194 
št32_t
 
de¡Size
,
ušt64_t
 
İtiÚs
,

1195 
UE¼ÜCode
 *
pE¼ÜCode
,

1196 
shk“lFÏg
) {

1199 
št32_t
 
i
, 
›nd
;

1200 
št32_t
 
¡•
;

1201 
št32_t
 
Ï¡Pos
,
Nx
, 
Nw
;

1202 
Sh­e
;

1203 
št32_t
 
Ïm®ef_found
 = 0;

1204 
št32_t
 
£’çmFound
 = 0, 
yehhamzaFound
 =0, 
shk“lFound
 = 0;

1205 
UCh¬
 
´evLšk
 = 0, 
Ï¡Lšk
 = 0, 
cu¼Lšk
, 
ÃxtLšk
 = 0;

1206 
UCh¬
 
wLam®ef
;

1214 ià((
İtiÚs
 & 
U_SHAPE_PRESERVE_PRESENTATION_MASK
è=ğ
U_SHAPE_PRESERVE_PRESENTATION_NOOP
) {

1215 
i
 = 0; i < 
sourûL’gth
; i++) {

1216 
UCh¬
 
šputCh¬
 = 
de¡
[
i
];

1217 iàĞ(
šputCh¬
 >= 0xFB50) && (inputChar <= 0xFBFF)) {

1218 
UCh¬
 
c
 = 
cÚv”tFBto06
 [ (
šputCh¬
 - 0xFB50) ];

1219 ià(
c
 != 0)

1220 
de¡
[
i
] = 
c
;

1221 } iàĞ(
šputCh¬
 >= 0xFE70) && (inputChar <= 0xFEFC)) {

1222 
de¡
[
i
] = 
cÚv”tFEto06
 [ (
šputCh¬
 - 0xFE70) ] ;

1224 
de¡
[
i
] = 
šputCh¬
 ;

1231 
i
 = 
sourûL’gth
 - 1;

1232 
›nd
 = -1;

1233 
¡•
 = -1;

1240 
cu¼Lšk
 = 
	`g‘Lšk
(
de¡
[
i
]);

1242 
Ï¡Pos
 = 
i
;

1243 
Nx
 = -2, 
Nw
 = 0;

1245 
i
 !ğ
›nd
) {

1247 ià((
cu¼Lšk
 & 0xFF00è> 0 || (
	`g‘Lšk
(
de¡
[
i
]è& 
IRRELEVANT
) != 0) {

1248 
Nw
 = 
i
 + 
¡•
;

1249 
Nx
 < 0) {

1250 if(
Nw
 =ğ
›nd
) {

1251 
ÃxtLšk
 = 0;

1252 
Nx
 = 3000;

1254 
ÃxtLšk
 = 
	`g‘Lšk
(
de¡
[
Nw
]);

1255 if((
ÃxtLšk
 & 
IRRELEVANT
) == 0) {

1256 
Nx
 = 
Nw
;

1258 
Nw
 = Nw + 
¡•
;

1263 iàĞ((
cu¼Lšk
 & 
ALEFTYPE
è> 0è&& ((
Ï¡Lšk
 & 
LAMTYPE
) > 0) ) {

1264 
Ïm®ef_found
 = 1;

1265 
wLam®ef
 = 
	`chªgeLamAËf
(
de¡
[
i
]);

1266 iàĞ
wLam®ef
 != 0) {

1267 
de¡
[
i
] = 
LAMALEF_SPACE_SUB
;

1268 
de¡
[
Ï¡Pos
] =
wLam®ef
;

1269 
i
=
Ï¡Pos
;

1271 
Ï¡Lšk
 = 
´evLšk
;

1272 
cu¼Lšk
 = 
	`g‘Lšk
(
wLam®ef
);

1275 ià((
i
 > 0è&& (
de¡
[i-1] =ğ
SPACE_CHAR
)){

1276 iàĞ
	`isS“nFamyCh¬
(
de¡
[
i
])){

1277 
£’çmFound
 = 1;

1278 } ià(
de¡
[
i
] =ğ
YEH_HAMZA_CHAR
) {

1279 
yehhamzaFound
 = 1;

1282 if(
i
==0){

1283 iàĞ
	`isS“nFamyCh¬
(
de¡
[
i
])){

1284 
£’çmFound
 = 1;

1285 } ià(
de¡
[
i
] =ğ
YEH_HAMZA_CHAR
) {

1286 
yehhamzaFound
 = 1;

1295 
Sh­e
 = 
sh­eTabË
[
ÃxtLšk
 & (
LINKR
 + 
LINKL
)]

1296 [
Ï¡Lšk
 & (
LINKR
 + 
LINKL
)]

1297 [
cu¼Lšk
 & (
LINKR
 + 
LINKL
)];

1299 ià((
cu¼Lšk
 & (
LINKR
+
LINKL
)) == 1) {

1300 
Sh­e
 &= 1;

1301 } if(
	`isTashk“lCh¬
(
de¡
[
i
])) {

1302 ifĞ(
Ï¡Lšk
 & 
LINKL
è&& (
ÃxtLšk
 & 
LINKR
è&& (
shk“lFÏg
 == 1) &&

1303 
de¡
[
i
] != 0x064C && dest[i] != 0x064D )

1305 
Sh­e
 = 1;

1306 ifĞ(
ÃxtLšk
&
ALEFTYPE
è=ğALEFTYPE && (
Ï¡Lšk
&
LAMTYPE
) == LAMTYPE ) {

1307 
Sh­e
 = 0;

1311 
Sh­e
 = 0;

1314 ià((
de¡
[
i
] ^ 0x0600) < 0x100) {

1315 iàĞ
	`isTashk“lCh¬
(
de¡
[
i
]) ){

1316 ià(
shk“lFÏg
 == 2){

1317 
de¡
[
i
] = 
TASHKEEL_SPACE_SUB
;

1318 
shk“lFound
 = 1;

1320 
de¡
[
i
] = 0xFE70 + 
I¼–evªtPos
[(de¡[i] - 0x064B)] + 
Sh­e
;

1322 }ià((
cu¼Lšk
 & 
APRESENT
) > 0) {

1323 
de¡
[
i
] = (
UCh¬
)(0xFB50 + (
cu¼Lšk
 >> 8è+ 
Sh­e
);

1324 }ià((
cu¼Lšk
 >> 8è> 0 && (cu¼Lšk & 
IRRELEVANT
) == 0) {

1325 
de¡
[
i
] = (
UCh¬
)(0xFE70 + (
cu¼Lšk
 >> 8è+ 
Sh­e
);

1331 ià((
cu¼Lšk
 & 
IRRELEVANT
) == 0) {

1332 
´evLšk
 = 
Ï¡Lšk
;

1333 
Ï¡Lšk
 = 
cu¼Lšk
;

1334 
Ï¡Pos
 = 
i
;

1337 
i
 = i + 
¡•
;

1338 ià(
i
 =ğ
Nx
) {

1339 
cu¼Lšk
 = 
ÃxtLšk
;

1340 
Nx
 = -2;

1341 } if(
i
 !ğ
›nd
) {

1342 
cu¼Lšk
 = 
	`g‘Lšk
(
de¡
[
i
]);

1345 
de¡Size
 = 
sourûL’gth
;

1346 iàĞ(
Ïm®ef_found
 !ğ0 ) || (
shk“lFound
 != 0) ){

1347 
de¡Size
 = 
	`hªdËG’”©edS·ûs
(
de¡
,
sourûL’gth
,de¡Size,
İtiÚs
,
pE¼ÜCode
);

1350 iàĞ(
£’çmFound
 !ğ0è|| (
yehhamzaFound
 != 0) ) {

1351 
de¡Size
 = 
	`ex·ndCompos™Ch¬
(
de¡
, 
sourûL’gth
,de¡Size,
İtiÚs
,
pE¼ÜCode
, 
SHAPE_MODE
);

1353  
de¡Size
;

1354 
	}
}

1362 
št32_t


1363 
	$deSh­eUnicode
(
UCh¬
 *
de¡
, 
št32_t
 
sourûL’gth
,

1364 
št32_t
 
de¡Size
,
ušt64_t
 
İtiÚs
,

1365 
UE¼ÜCode
 *
pE¼ÜCode
) {

1367 
št32_t
 
i
 = 0;

1368 
št32_t
 
Ïm®ef_found
 = 0;

1369 
št32_t
 
yehHamzaCompo£EÇbËd
 = 0;

1370 
št32_t
 
£’Compo£EÇbËd
 = 0;

1372 
yehHamzaCompo£EÇbËd
 = ((
İtiÚs
&
U_SHAPE_YEHHAMZA_MASK
è=ğ
U_SHAPE_YEHHAMZA_TWOCELL_NEAR
) ? 1 : 0;

1373 
£’Compo£EÇbËd
 = ((
İtiÚs
&
U_SHAPE_SEEN_MASK
è=ğ
U_SHAPE_SEEN_TWOCELL_NEAR
)? 1 : 0;

1380 
i
 = 0; i < 
sourûL’gth
; i++) {

1381 
UCh¬
 
šputCh¬
 = 
de¡
[
i
];

1382 iàĞ(
šputCh¬
 >= 0xFB50) && (inputChar <= 0xFBFF)) {

1383 
UCh¬
 
c
 = 
cÚv”tFBto06
 [ (
šputCh¬
 - 0xFB50) ];

1384 ià(
c
 != 0)

1385 
de¡
[
i
] = 
c
;

1386 } ifĞ(
yehHamzaCompo£EÇbËd
 =ğ1è&& ((
šputCh¬
 =ğ
HAMZA06_CHAR
è|| (šputCh¬ =ğ
HAMZAFE_CHAR
))

1387 && (
i
 < (
sourûL’gth
 - 1)è&& 
	`isAËfMaksou¿Ch¬
(
de¡
[i+1] )) {

1388 
de¡
[
i
] = 
SPACE_CHAR
;

1389 
de¡
[
i
+1] = 
YEH_HAMZA_CHAR
;

1390 } iàĞ(
£’Compo£EÇbËd
 =ğ1è&& (
	`isTaCh¬
(
šputCh¬
)è&& (
i
< (
sourûL’gth
 - 1))

1391 && (
	`isS“nTaFamyCh¬
(
de¡
[
i
+1])) ) {

1392 
de¡
[
i
] = 
SPACE_CHAR
;

1393 } ià(Ğ
šputCh¬
 >= 0xFE70) && (inputChar <= 0xFEF4 )) {

1394 
de¡
[
i
] = 
cÚv”tFEto06
 [ (
šputCh¬
 - 0xFE70) ];

1396 
de¡
[
i
] = 
šputCh¬
 ;

1399 ifĞ
	`isLamAËfCh¬
(
de¡
[
i
]) )

1400 
Ïm®ef_found
 = 1;

1403 
de¡Size
 = 
sourûL’gth
;

1404 ià(
Ïm®ef_found
 != 0){

1405 
de¡Size
 = 
	`ex·ndCompos™Ch¬
(
de¡
,
sourûL’gth
,de¡Size,
İtiÚs
,
pE¼ÜCode
,
DESHAPE_MODE
);

1407  
de¡Size
;

1408 
	}
}

1417 
U_CAPI
 
št32_t
 
U_EXPORT2


1418 
	$u_sh­eA¿bic
(cÚ¡ 
UCh¬
 *
sourû
, 
št32_t
 
sourûL’gth
,

1419 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1420 
ušt64_t
 
İtiÚs
,

1421 
UE¼ÜCode
 *
pE¼ÜCode
) {

1424 
št32_t
 
de¡L’gth
;

1426 
¥aûsR–©iveToTextBegšEnd
 = 0;

1427 
uSh­eLam®efBegš
 = 
U_SHAPE_LAMALEF_BEGIN
;

1428 
uSh­eLam®efEnd
 = 
U_SHAPE_LAMALEF_END
;

1429 
uSh­eTashk“lBegš
 = 
U_SHAPE_TASHKEEL_BEGIN
;

1430 
uSh­eTashk“lEnd
 = 
U_SHAPE_TASHKEEL_END
;

1433 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

1438 ifĞ
sourû
==
NULL
 || 
sourûL’gth
<-1 || (
de¡
==NULL && 
de¡C­ac™y
!=0) || destCapacity<0 ||

1439 (((
İtiÚs
&
U_SHAPE_TASHKEEL_MASK
) > 0) &&

1440 ((
İtiÚs
&
U_SHAPE_LETTERS_SHAPE_TASHKEEL_ISOLATED
) == U_SHAPE_LETTERS_SHAPE_TASHKEEL_ISOLATED) ) ||

1441 (((
İtiÚs
&
U_SHAPE_TASHKEEL_MASK
) > 0) &&

1442 ((
İtiÚs
&
U_SHAPE_LETTERS_MASK
è=ğ
U_SHAPE_LETTERS_UNSHAPE
)) ||

1443 (
İtiÚs
&
U_SHAPE_DIGIT_TYPE_RESERVED
)==U_SHAPE_DIGIT_TYPE_RESERVED ||

1444 (
İtiÚs
&
U_SHAPE_DIGITS_MASK
)==
U_SHAPE_DIGITS_RESERVED
 ||

1445 ((
İtiÚs
&
U_SHAPE_LAMALEF_MASK
è!ğ
U_SHAPE_LAMALEF_RESIZE
 &&

1446 (
İtiÚs
&
U_SHAPE_AGGREGATE_TASHKEEL_MASK
) != 0) ||

1447 ((
İtiÚs
&
U_SHAPE_AGGREGATE_TASHKEEL_MASK
è=ğ
U_SHAPE_AGGREGATE_TASHKEEL
 &&

1448 (
İtiÚs
&
U_SHAPE_LETTERS_SHAPE_TASHKEEL_ISOLATED
) != U_SHAPE_LETTERS_SHAPE_TASHKEEL_ISOLATED)

1451 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1455 if(((
İtiÚs
&
U_SHAPE_LAMALEF_MASK
) > 0)&&

1456 !(((
İtiÚs
 & 
U_SHAPE_LAMALEF_MASK
)==
U_SHAPE_LAMALEF_BEGIN
) ||

1457 ((
İtiÚs
 & 
U_SHAPE_LAMALEF_MASK
)==
U_SHAPE_LAMALEF_END
 ) ||

1458 ((
İtiÚs
 & 
U_SHAPE_LAMALEF_MASK
)==
U_SHAPE_LAMALEF_RESIZE
 )||

1459 ((
İtiÚs
 & 
U_SHAPE_LAMALEF_MASK
)==
U_SHAPE_LAMALEF_AUTO
) ||

1460 ((
İtiÚs
 & 
U_SHAPE_LAMALEF_MASK
)==
U_SHAPE_LAMALEF_NEAR
)))

1462 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1466 if(((
İtiÚs
&
U_SHAPE_TASHKEEL_MASK
) > 0)&&

1467 !(((
İtiÚs
 & 
U_SHAPE_TASHKEEL_MASK
)==
U_SHAPE_TASHKEEL_BEGIN
) ||

1468 ((
İtiÚs
 & 
U_SHAPE_TASHKEEL_MASK
)==
U_SHAPE_TASHKEEL_END
 )

1469 ||((
İtiÚs
 & 
U_SHAPE_TASHKEEL_MASK
)==
U_SHAPE_TASHKEEL_RESIZE
 )||

1470 ((
İtiÚs
 & 
U_SHAPE_TASHKEEL_MASK
)==
U_SHAPE_TASHKEEL_REPLACE_BY_TATWEEL
)))

1472 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1476 if(
sourûL’gth
==-1) {

1477 
sourûL’gth
=
	`u_¡¾’
(
sourû
);

1479 if(
sourûL’gth
<=0) {

1480  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 0, 
pE¼ÜCode
);

1484 ifĞ
de¡
!=
NULL
 &&

1485 ((
sourû
<=
de¡
 && de¡<sourû+
sourûL’gth
) ||

1486 (
de¡
<=
sourû
 && sourû<de¡+
de¡C­ac™y
))) {

1487 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1492 iàĞ(
İtiÚs
&
SHAPE_TAIL_TYPE_MASK
è=ğ
SHAPE_TAIL_NEW_UNICODE
){

1493 
Ch¬
 = 
NEW_TAIL_CHAR
;

1495 
Ch¬
 = 
OLD_TAIL_CHAR
;

1498 if((
İtiÚs
&
U_SHAPE_LETTERS_MASK
)!=
U_SHAPE_LETTERS_NOOP
) {

1499 
UCh¬
 
bufãr
[300];

1500 
UCh¬
 *
‹mpbufãr
, *
‹mpsourû
 = 
NULL
;

1501 
št32_t
 
ouutSize
, 
¥aûsCouÁl
=0, 
¥aûsCouÁr
=0;

1503 if((
İtiÚs
&
U_SHAPE_AGGREGATE_TASHKEEL_MASK
)>0) {

1504 
št32_t
 
logiÿl_Üd”
 = (
İtiÚs
&
U_SHAPE_TEXT_DIRECTION_MASK
è=ğ
U_SHAPE_TEXT_DIRECTION_LOGICAL
;

1505 
št32_t
 
agg»g©e_shk“l
 =

1506 (
İtiÚs
&(
U_SHAPE_AGGREGATE_TASHKEEL_MASK
+
U_SHAPE_LETTERS_SHAPE_TASHKEEL_ISOLATED
)) ==

1507 (
U_SHAPE_AGGREGATE_TASHKEEL
+
U_SHAPE_LETTERS_SHAPE_TASHKEEL_ISOLATED
);

1508 
¡•
=
logiÿl_Üd”
?1:-1;

1509 
j
=
logiÿl_Üd”
?-1:2*
sourûL’gth
;

1510 
i
=
logiÿl_Üd”
?-1:
sourûL’gth
;

1511 
’d
=
logiÿl_Üd”
?
sourûL’gth
:-1;

1512 
agg»g©iÚ_possibË
 = 1;

1513 
UCh¬
 
´ev
 = 0;

1514 
UCh¬
 
´evLšk
, 
cu¼Lšk
 = 0;

1515 
ÃwSourûL’gth
 = 0;

1516 
‹mpsourû
 = (
UCh¬
 *)
	`u´v_m®loc
(2*
sourûL’gth
*
U_SIZEOF_UCHAR
);

1517 if(
‹mpsourû
 =ğ
NULL
) {

1518 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

1522 (
i
+=
¡•
è!ğ
’d
) {

1523 
´evLšk
 = 
cu¼Lšk
;

1524 
cu¼Lšk
 = 
	`g‘Lšk
(
sourû
[
i
]);

1525 ià(
agg»g©e_shk“l
 && ((
´evLšk
|
cu¼Lšk
)&
COMBINE
è=ğCOMBINE && 
agg»g©iÚ_possibË
) {

1526 
agg»g©iÚ_possibË
 = 0;

1527 
‹mpsourû
[
j
] = (
´ev
<
sourû
[
i
]?prev:source[i])-0x064C+0xFC5E;

1528 
cu¼Lšk
 = 
	`g‘Lšk
(
‹mpsourû
[
j
]);

1530 
agg»g©iÚ_possibË
 = 1;

1531 
‹mpsourû
[
j
+=
¡•
] = 
sourû
[
i
];

1532 
´ev
 = 
sourû
[
i
];

1533 
ÃwSourûL’gth
++;

1536 
sourû
 = 
‹mpsourû
+(
logiÿl_Üd”
?0:
j
);

1537 
sourûL’gth
 = 
ÃwSourûL’gth
;

1542 if(((
İtiÚs
&
U_SHAPE_LAMALEF_MASK
)==
U_SHAPE_LAMALEF_RESIZE
) ||

1543 ((
İtiÚs
&
U_SHAPE_TASHKEEL_MASK
)==
U_SHAPE_TASHKEEL_RESIZE
)) {

1544 
ouutSize
=
	`ÿlcuÏ‹Size
(
sourû
,
sourûL’gth
,
de¡C­ac™y
,
İtiÚs
);

1546 
ouutSize
=
sourûL’gth
;

1549 if(
ouutSize
>
de¡C­ac™y
) {

1550 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1551 ià(
‹mpsourû
 !ğ
NULL
è
	`u´v_ä“
(tempsource);

1552  
ouutSize
;

1559 if(
sourûL’gth
>
ouutSize
) {

1560 
ouutSize
=
sourûL’gth
;

1564 if(
ouutSize
<=(
bufãr
)/
U_SIZEOF_UCHAR
) {

1565 
ouutSize
=(
bufãr
)/
U_SIZEOF_UCHAR
;

1566 
‹mpbufãr
=
bufãr
;

1568 
‹mpbufãr
 = (
UCh¬
 *)
	`u´v_m®loc
(
ouutSize
*
U_SIZEOF_UCHAR
);

1571 if(
‹mpbufãr
 =ğ
NULL
) {

1572 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

1573 ià(
‹mpsourû
 !ğ
NULL
è
	`u´v_ä“
(tempsource);

1577 
	`u´v_memıy
(
‹mpbufãr
, 
sourû
, 
sourûL’gth
*
U_SIZEOF_UCHAR
);

1578 ià(
‹mpsourû
 !ğ
NULL
){

1579 
	`u´v_ä“
(
‹mpsourû
);

1582 if(
sourûL’gth
<
ouutSize
) {

1583 
	`u´v_mem£t
(
‹mpbufãr
+
sourûL’gth
, 0, (
ouutSize
-sourûL’gth)*
U_SIZEOF_UCHAR
);

1586 if((
İtiÚs
&
U_SHAPE_TEXT_DIRECTION_MASK
è=ğ
U_SHAPE_TEXT_DIRECTION_LOGICAL
) {

1587 
	`couÁS·ûs
(
‹mpbufãr
,
sourûL’gth
,
İtiÚs
,&
¥aûsCouÁl
,&
¥aûsCouÁr
);

1588 
	`šv”tBufãr
(
‹mpbufãr
,
sourûL’gth
,
İtiÚs
,
¥aûsCouÁl
,
¥aûsCouÁr
);

1591 if((
İtiÚs
&
U_SHAPE_TEXT_DIRECTION_MASK
è=ğ
U_SHAPE_TEXT_DIRECTION_VISUAL_LTR
) {

1592 if((
İtiÚs
&
U_SHAPE_SPACES_RELATIVE_TO_TEXT_MASK
è=ğ
U_SHAPE_SPACES_RELATIVE_TO_TEXT_BEGIN_END
) {

1593 
¥aûsR–©iveToTextBegšEnd
 = 1;

1594 
uSh­eLam®efBegš
 = 
U_SHAPE_LAMALEF_END
;

1595 
uSh­eLam®efEnd
 = 
U_SHAPE_LAMALEF_BEGIN
;

1597 
uSh­eTashk“lBegš
 = 
U_SHAPE_TASHKEEL_END
;

1598 
uSh­eTashk“lEnd
 = 
U_SHAPE_TASHKEEL_BEGIN
;

1602 
İtiÚs
&
U_SHAPE_LETTERS_MASK
) {

1603 
U_SHAPE_LETTERS_SHAPE
 :

1604 ifĞ(
İtiÚs
&
U_SHAPE_TASHKEEL_MASK
)> 0

1605 && ((
İtiÚs
&
U_SHAPE_TASHKEEL_MASK
è!=
U_SHAPE_TASHKEEL_REPLACE_BY_TATWEEL
)) {

1607 
de¡L’gth
 = 
	`sh­eUnicode
(
‹mpbufãr
,
sourûL’gth
,
de¡C­ac™y
,
İtiÚs
,
pE¼ÜCode
,2);

1610 
de¡L’gth
 = 
	`sh­eUnicode
(
‹mpbufãr
,
sourûL’gth
,
de¡C­ac™y
,
İtiÚs
,
pE¼ÜCode
,1);

1613 ifĞ(
İtiÚs
&
U_SHAPE_TASHKEEL_MASK
è=ğ
U_SHAPE_TASHKEEL_REPLACE_BY_TATWEEL
){

1614 
de¡L’gth
 = 
	`hªdËTashk“lW™hT©w“l
(
‹mpbufãr
,de¡L’gth,
de¡C­ac™y
,
İtiÚs
,
pE¼ÜCode
);

1618 
U_SHAPE_LETTERS_SHAPE_TASHKEEL_ISOLATED
 :

1620 
de¡L’gth
 = 
	`sh­eUnicode
(
‹mpbufãr
,
sourûL’gth
,
de¡C­ac™y
,
İtiÚs
,
pE¼ÜCode
,0);

1623 
U_SHAPE_LETTERS_UNSHAPE
 :

1625 
de¡L’gth
 = 
	`deSh­eUnicode
(
‹mpbufãr
,
sourûL’gth
,
de¡C­ac™y
,
İtiÚs
,
pE¼ÜCode
);

1629 
de¡L’gth
 = 0;

1640 if((
İtiÚs
&
U_SHAPE_TEXT_DIRECTION_MASK
è=ğ
U_SHAPE_TEXT_DIRECTION_LOGICAL
) {

1641 
	`couÁS·ûs
(
‹mpbufãr
,
de¡L’gth
,
İtiÚs
,&
¥aûsCouÁl
,&
¥aûsCouÁr
);

1642 
	`šv”tBufãr
(
‹mpbufãr
,
de¡L’gth
,
İtiÚs
,
¥aûsCouÁl
,
¥aûsCouÁr
);

1644 
	`u´v_memıy
(
de¡
, 
‹mpbufãr
, 
	`u´v_mš
(
de¡L’gth
, 
de¡C­ac™y
)*
U_SIZEOF_UCHAR
);

1646 if(
‹mpbufãr
!=
bufãr
) {

1647 
	`u´v_ä“
(
‹mpbufãr
);

1650 if(
de¡L’gth
>
de¡C­ac™y
) {

1651 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1652  
de¡L’gth
;

1661 if(
de¡C­ac™y
<
sourûL’gth
) {

1663 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1664  
sourûL’gth
;

1666 
	`u´v_memıy
(
de¡
, 
sourû
, 
sourûL’gth
*
U_SIZEOF_UCHAR
);

1667 
de¡L’gth
=
sourûL’gth
;

1676 if((
İtiÚs
&
U_SHAPE_DIGITS_MASK
)!=
U_SHAPE_DIGITS_NOOP
) {

1677 
UCh¬
 
dig™Ba£
;

1678 
št32_t
 
i
;

1681 
İtiÚs
&
U_SHAPE_DIGIT_TYPE_MASK
) {

1682 
U_SHAPE_DIGIT_TYPE_AN
:

1683 
dig™Ba£
=0x660;

1685 
U_SHAPE_DIGIT_TYPE_AN_EXTENDED
:

1686 
dig™Ba£
=0x6f0;

1690 
dig™Ba£
=0;

1695 
İtiÚs
&
U_SHAPE_DIGITS_MASK
) {

1696 
U_SHAPE_DIGITS_EN2AN
:

1698 
dig™Ba£
-=0x30;

1699 
i
=0; i<
de¡L’gth
; ++i) {

1700 if(((
ušt32_t
)
de¡
[
i
]-0x30)<10) {

1701 
de¡
[
i
]+=
dig™Ba£
;

1705 
U_SHAPE_DIGITS_AN2EN
:

1707 
i
=0; i<
de¡L’gth
; ++i) {

1708 if(((
ušt32_t
)
de¡
[
i
]-(ušt32_t)
dig™Ba£
)<10) {

1709 
de¡
[
i
]-=
dig™Ba£
-0x30;

1713 
U_SHAPE_DIGITS_ALEN2AN_INIT_LR
:

1714 
	`_sh­eToA¿bicDig™sW™hCÚ‹xt
(
de¡
, 
de¡L’gth
,

1715 
dig™Ba£
,

1716 (
UBoŞ
)((
İtiÚs
&
U_SHAPE_TEXT_DIRECTION_MASK
)==
U_SHAPE_TEXT_DIRECTION_LOGICAL
),

1717 
FALSE
);

1719 
U_SHAPE_DIGITS_ALEN2AN_INIT_AL
:

1720 
	`_sh­eToA¿bicDig™sW™hCÚ‹xt
(
de¡
, 
de¡L’gth
,

1721 
dig™Ba£
,

1722 (
UBoŞ
)((
İtiÚs
&
U_SHAPE_TEXT_DIRECTION_MASK
)==
U_SHAPE_TEXT_DIRECTION_LOGICAL
),

1723 
TRUE
);

1731  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
de¡L’gth
, 
pE¼ÜCode
);

1732 
	}
}

	@usprep.cpp

17 
	~"unicode/uty³s.h
"

19 #ià!
UCONFIG_NO_IDNA


21 
	~"unicode/u¥»p.h
"

23 
	~"unicode/unÜm.h
"

24 
	~"unicode/u¡ršg.h
"

25 
	~"unicode/uch¬.h
"

26 
	~"unicode/uv”siÚ.h
"

27 
	~"umu‹x.h
"

28 
	~"cmemÜy.h
"

29 
	~"¥½im¶.h
"

30 
	~"u¡r_imp.h
"

31 
	~"uhash.h
"

32 
	~"c¡ršg.h
"

33 
	~"ud©aswp.h
"

34 
	~"uşn_cmn.h
"

35 
	~"ubidi_´İs.h
"

37 
U_NAMESPACE_USE


39 
U_CDECL_BEGIN


44 
UHashbË
 *
	gSHARED_DATA_HASHTABLE
 = 
NULL
;

46 
UMTX
 
	gu¥»pMu‹x
 = 
NULL
;

49 
ušt8_t
 
	gfÜm©V”siÚ
[4]={ 0, 0, 0, 0 };

52 
UV”siÚInfo
 
	gd©aV”siÚ
={ 0, 0, 0, 0 };

55 cÚ¡ *
	gPROFILE_NAMES
[] = {

72 
UBoŞ
 
U_CALLCONV


73 
	$isSP»pAcû±abË
(* ,

76 cÚ¡ 
UD©aInfo
 *
pInfo
) {

78 
pInfo
->
size
>=20 &&

79 
pInfo
->
isBigEndŸn
==
U_IS_BIG_ENDIAN
 &&

80 
pInfo
->
ch¬£tFamy
==
U_CHARSET_FAMILY
 &&

81 
pInfo
->
d©aFÜm©
[0]==0x53 &&

82 
pInfo
->
d©aFÜm©
[1]==0x50 &&

83 
pInfo
->
d©aFÜm©
[2]==0x52 &&

84 
pInfo
->
d©aFÜm©
[3]==0x50 &&

85 
pInfo
->
fÜm©V”siÚ
[0]==3 &&

86 
pInfo
->
fÜm©V”siÚ
[2]==
UTRIE_SHIFT
 &&

87 
pInfo
->
fÜm©V”siÚ
[3]==
UTRIE_INDEX_SHIFT


89 
	`u´v_memıy
(
fÜm©V”siÚ
, 
pInfo
->formatVersion, 4);

90 
	`u´v_memıy
(
d©aV”siÚ
, 
pInfo
->dataVersion, 4);

91  
TRUE
;

93  
FALSE
;

95 
	}
}

97 
št32_t
 
U_CALLCONV


98 
	$g‘SP»pFŞdšgOff£t
(
ušt32_t
 
d©a
) {

100  (
št32_t
)
d©a
;

102 
	}
}

105 
št32_t
 
U_CALLCONV


106 
	$hashEÁry
(cÚ¡ 
UHashTok
 
·rm
) {

107 
USŒšgP»pKey
 *
b
 = (USŒšgP»pKey *)
·rm
.
poš‹r
;

108 
UHashTok
 
Çmekey
, 
·thkey
;

109 
Çmekey
.
poš‹r
 = 
b
->
Çme
;

110 
·thkey
.
poš‹r
 = 
b
->
·th
;

111  
	`uhash_hashCh¬s
(
Çmekey
)+37*uhash_hashCh¬s(
·thkey
);

112 
	}
}

115 
UBoŞ
 
U_CALLCONV


116 
	$com·»EÁr›s
(cÚ¡ 
UHashTok
 
p1
, cÚ¡ UHashTok 
p2
) {

117 
USŒšgP»pKey
 *
b1
 = (USŒšgP»pKey *)
p1
.
poš‹r
;

118 
USŒšgP»pKey
 *
b2
 = (USŒšgP»pKey *)
p2
.
poš‹r
;

119 
UHashTok
 
Çme1
, 
Çme2
, 
·th1
, 
·th2
;

120 
Çme1
.
poš‹r
 = 
b1
->
Çme
;

121 
Çme2
.
poš‹r
 = 
b2
->
Çme
;

122 
·th1
.
poš‹r
 = 
b1
->
·th
;

123 
·th2
.
poš‹r
 = 
b2
->
·th
;

124  ((
UBoŞ
)(
	`uhash_com·»Ch¬s
(
Çme1
, 
Çme2
) &

125 
	`uhash_com·»Ch¬s
(
·th1
, 
·th2
)));

126 
	}
}

129 
	$u¥»p_uÆßd
(
USŒšgP»pProfe
* 
d©a
){

130 
	`ud©a_şo£
(
d©a
->
¥»pD©a
);

131 
	}
}

133 
št32_t


134 
	$u¥»p_š‹º®_æushCache
(
UBoŞ
 
noRefCouÁ
){

135 
USŒšgP»pProfe
 *
´ofe
 = 
NULL
;

136 
USŒšgP»pKey
 *
key
 = 
NULL
;

137 
št32_t
 
pos
 = -1;

138 
št32_t
 
d–‘edNum
 = 0;

139 cÚ¡ 
UHashEËm’t
 *
e
;

145 
	`umtx_lock
(&
u¥»pMu‹x
);

146 ià(
SHARED_DATA_HASHTABLE
 =ğ
NULL
) {

147 
	`umtx_uÆock
(&
u¥»pMu‹x
);

152 (
e
 = 
	`uhash_ÃxtEËm’t
(
SHARED_DATA_HASHTABLE
, &
pos
)è!ğ
NULL
)

154 
´ofe
 = (
USŒšgP»pProfe
 *è
e
->
v®ue
.
poš‹r
;

155 
key
 = (
USŒšgP»pKey
 *è
e
->key.
poš‹r
;

157 ià((
noRefCouÁ
=ğ
FALSE
 && 
´ofe
->
»fCouÁ
 == 0) ||

158 
noRefCouÁ
=ğ
TRUE
) {

159 
d–‘edNum
++;

160 
	`uhash_»moveEËm’t
(
SHARED_DATA_HASHTABLE
, 
e
);

163 
	`u¥»p_uÆßd
(
´ofe
);

165 if(
key
->
Çme
 !ğ
NULL
) {

166 
	`u´v_ä“
(
key
->
Çme
);

167 
key
->
Çme
=
NULL
;

169 if(
key
->
·th
 !ğ
NULL
) {

170 
	`u´v_ä“
(
key
->
·th
);

171 
key
->
·th
=
NULL
;

173 
	`u´v_ä“
(
´ofe
);

174 
	`u´v_ä“
(
key
);

178 
	`umtx_uÆock
(&
u¥»pMu‹x
);

180  
d–‘edNum
;

181 
	}
}

190 
UBoŞ
 
U_CALLCONV
 
	$u¥»p_ş—nup
(){

191 ià(
SHARED_DATA_HASHTABLE
 !ğ
NULL
) {

192 
	`u¥»p_š‹º®_æushCache
(
TRUE
);

193 ià(
SHARED_DATA_HASHTABLE
 !ğ
NULL
 && 
	`uhash_couÁ
(SHARED_DATA_HASHTABLE) == 0) {

194 
	`uhash_şo£
(
SHARED_DATA_HASHTABLE
);

195 
SHARED_DATA_HASHTABLE
 = 
NULL
;

199 
	`umtx_de¡roy
(&
u¥»pMu‹x
);

202  (
SHARED_DATA_HASHTABLE
 =ğ
NULL
);

203 
	}
}

204 
U_CDECL_END


209 
	$š™Cache
(
UE¼ÜCode
 *
¡©us
) {

210 
UBoŞ
 
makeCache
;

211 
	`UMTX_CHECK
(&
u¥»pMu‹x
, (
SHARED_DATA_HASHTABLE
 =ğ
NULL
), 
makeCache
);

212 if(
makeCache
) {

213 
UHashbË
 *
ÃwCache
 = 
	`uhash_İ’
(
hashEÁry
, 
com·»EÁr›s
, 
NULL
, 
¡©us
);

214 ià(
	`U_SUCCESS
(*
¡©us
)) {

215 
	`umtx_lock
(&
u¥»pMu‹x
);

216 if(
SHARED_DATA_HASHTABLE
 =ğ
NULL
) {

217 
SHARED_DATA_HASHTABLE
 = 
ÃwCache
;

218 
	`uşn_commÚ_»gi¡”CËªup
(
UCLN_COMMON_USPREP
, 
u¥»p_ş—nup
);

219 
ÃwCache
 = 
NULL
;

221 
	`umtx_uÆock
(&
u¥»pMu‹x
);

223 if(
ÃwCache
 !ğ
NULL
) {

224 
	`uhash_şo£
(
ÃwCache
);

227 
	}
}

229 
UBoŞ
 
U_CALLCONV


230 
	$lßdD©a
(
USŒšgP»pProfe
* 
´ofe
,

231 cÚ¡ * 
·th
,

232 cÚ¡ * 
Çme
,

233 cÚ¡ * 
ty³
,

234 
UE¼ÜCode
* 
”rÜCode
) {

236 
UTr›
 
_¥»pTr›
={ 0,0,0,0,0,0,0 };

237 
UD©aMemÜy
 *
d©aMemÜy
;

238 cÚ¡ 
št32_t
 *
p
=
NULL
;

239 cÚ¡ 
ušt8_t
 *
pb
;

240 
UV”siÚInfo
 
nÜmUnicodeV”siÚ
;

241 
št32_t
 
nÜmUniV”
, 
¥»pUniV”
, 
nÜmCÜrV”
;

243 if(
”rÜCode
==
NULL
 || 
	`U_FAILURE
(*errorCode)) {

249 
d©aMemÜy
=
	`ud©a_İ’Choiû
(
·th
, 
ty³
, 
Çme
, 
isSP»pAcû±abË
, 
NULL
, 
”rÜCode
);

250 if(
	`U_FAILURE
(*
”rÜCode
)) {

251  
FALSE
;

254 
p
=(cÚ¡ 
št32_t
 *)
	`ud©a_g‘MemÜy
(
d©aMemÜy
);

255 
pb
=(cÚ¡ 
ušt8_t
 *)(
p
+
_SPREP_INDEX_TOP
);

256 
	`uŒ›_un£rŸlize
(&
_¥»pTr›
, 
pb
, 
p
[
_SPREP_INDEX_TRIE_SIZE
], 
”rÜCode
);

257 
_¥»pTr›
.
g‘FŞdšgOff£t
=
g‘SP»pFŞdšgOff£t
;

260 if(
	`U_FAILURE
(*
”rÜCode
)) {

261 
	`ud©a_şo£
(
d©aMemÜy
);

262  
FALSE
;

266 
	`umtx_lock
(&
u¥»pMu‹x
);

267 if(
´ofe
->
¥»pD©a
==
NULL
) {

268 
´ofe
->
¥»pD©a
=
d©aMemÜy
;

269 
d©aMemÜy
=
NULL
;

270 
	`u´v_memıy
(&
´ofe
->
šdexes
, 
p
, (profile->indexes));

271 
	`u´v_memıy
(&
´ofe
->
¥»pTr›
, &
_¥»pTr›
, (
UTr›
));

273 
p
=(cÚ¡ 
št32_t
 *)
	`ud©a_g‘MemÜy
(
´ofe
->
¥»pD©a
);

275 
	`umtx_uÆock
(&
u¥»pMu‹x
);

277 
´ofe
->
m­pšgD©a
=(
ušt16_t
 *)((
ušt8_t
 *)(
p
+
_SPREP_INDEX_TOP
)+´ofe->
šdexes
[
_SPREP_INDEX_TRIE_SIZE
]);

279 
	`u_g‘UnicodeV”siÚ
(
nÜmUnicodeV”siÚ
);

280 
nÜmUniV”
 = (
nÜmUnicodeV”siÚ
[0] << 24) + (normUnicodeVersion[1] << 16) +

281 (
nÜmUnicodeV”siÚ
[2] << 8 ) + (normUnicodeVersion[3]);

282 
¥»pUniV”
 = (
d©aV”siÚ
[0] << 24) + (dataVersion[1] << 16) +

283 (
d©aV”siÚ
[2] << 8 ) + (dataVersion[3]);

284 
nÜmCÜrV”
 = 
´ofe
->
šdexes
[
_SPREP_NORM_CORRECTNS_LAST_UNI_VERSION
];

286 if(
	`U_FAILURE
(*
”rÜCode
)){

287 
	`ud©a_şo£
(
d©aMemÜy
);

288  
FALSE
;

290 ifĞ
nÜmUniV”
 < 
¥»pUniV”
 &&

291 
nÜmUniV”
 < 
nÜmCÜrV”
 &&

292 ((
´ofe
->
šdexes
[
_SPREP_OPTIONS
] & 
_SPREP_NORMALIZATION_ON
) > 0)

294 *
”rÜCode
 = 
U_INVALID_FORMAT_ERROR
;

295 
	`ud©a_şo£
(
d©aMemÜy
);

296  
FALSE
;

298 
´ofe
->
isD©aLßded
 = 
TRUE
;

301 if(
d©aMemÜy
!=
NULL
) {

302 
	`ud©a_şo£
(
d©aMemÜy
);

306  
´ofe
->
isD©aLßded
;

307 
	}
}

309 
USŒšgP»pProfe
*

310 
	$u¥»p_g‘Profe
(cÚ¡ * 
·th
,

311 cÚ¡ * 
Çme
,

312 
UE¼ÜCode
 *
¡©us
){

314 
USŒšgP»pProfe
* 
´ofe
 = 
NULL
;

316 
	`š™Cache
(
¡©us
);

318 if(
	`U_FAILURE
(*
¡©us
)){

319  
NULL
;

322 
USŒšgP»pKey
 
¡ackKey
;

328 
¡ackKey
.
Çme
 = (*)‚ame;

329 
¡ackKey
.
·th
 = (*)…ath;

332 
	`umtx_lock
(&
u¥»pMu‹x
);

333 
´ofe
 = (
USŒšgP»pProfe
*è(
	`uhash_g‘
(
SHARED_DATA_HASHTABLE
,&
¡ackKey
));

334 if(
´ofe
 !ğ
NULL
) {

335 
´ofe
->
»fCouÁ
++;

337 
	`umtx_uÆock
(&
u¥»pMu‹x
);

339 if(
´ofe
 =ğ
NULL
) {

341 
LoÿlMemÜy
<
USŒšgP»pProfe
> 
ÃwProfe
;

342 if(
ÃwProfe
.
	`®loÿ‹In¡—dAndRe£t
(è=ğ
NULL
) {

343 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

344  
NULL
;

348 if(!
	`lßdD©a
(
ÃwProfe
.
	`g‘AlŸs
(), 
·th
, 
Çme
, 
_SPREP_DATA_TYPE
, 
¡©us
è|| 
	`U_FAILURE
(*status) ){

349  
NULL
;

353 
ÃwProfe
->
doNFKC
 = (
UBoŞ
)(ÒewProfe->
šdexes
[
_SPREP_OPTIONS
] & 
_SPREP_NORMALIZATION_ON
) > 0);

354 
ÃwProfe
->
checkBiDi
 = (
UBoŞ
)(ÒewProfe->
šdexes
[
_SPREP_OPTIONS
] & 
_SPREP_CHECK_BIDI_ON
) > 0);

356 if(
ÃwProfe
->
checkBiDi
) {

357 
ÃwProfe
->
bdp
 = 
	`ubidi_g‘SšgËtÚ
();

360 
LoÿlMemÜy
<
USŒšgP»pKey
> 
key
;

361 
LoÿlMemÜy
<> 
keyName
;

362 
LoÿlMemÜy
<> 
keyP©h
;

363 ifĞ
key
.
	`®loÿ‹In¡—dAndRe£t
(è=ğ
NULL
 ||

364 
keyName
.
	`®loÿ‹In¡—dAndCİy
(
	`u´v_¡¾’
(
Çme
)+1è=ğ
NULL
 ||

365 (
·th
 !ğ
NULL
 &&

366 
keyP©h
.
	`®loÿ‹In¡—dAndCİy
(
	`u´v_¡¾’
(
·th
)+1è=ğ
NULL
)

368 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

369 
	`u¥»p_uÆßd
(
ÃwProfe
.
	`g‘AlŸs
());

370  
NULL
;

373 
	`umtx_lock
(&
u¥»pMu‹x
);

375 
´ofe
 = (
USŒšgP»pProfe
*è(
	`uhash_g‘
(
SHARED_DATA_HASHTABLE
,&
¡ackKey
));

376 if(
´ofe
 !ğ
NULL
) {

377 
´ofe
->
»fCouÁ
++;

378 
	`u¥»p_uÆßd
(
ÃwProfe
.
	`g‘AlŸs
());

382 
key
->
Çme
 = 
keyName
.
	`Üphª
();

383 
	`u´v_¡rıy
(
key
->
Çme
,‚ame);

384 if(
·th
 !ğ
NULL
){

385 
key
->
·th
 = 
keyP©h
.
	`Üphª
();

386 
	`u´v_¡rıy
(
key
->
·th
,…ath);

388 
´ofe
 = 
ÃwProfe
.
	`Üphª
();

391 
´ofe
->
»fCouÁ
 = 1;

392 
	`uhash_put
(
SHARED_DATA_HASHTABLE
, 
key
.
	`Üphª
(), 
´ofe
, 
¡©us
);

394 
	`umtx_uÆock
(&
u¥»pMu‹x
);

397  
´ofe
;

398 
	}
}

400 
U_CAPI
 
USŒšgP»pProfe
* 
U_EXPORT2


401 
	$u¥»p_İ’
(cÚ¡ * 
·th
,

402 cÚ¡ * 
Çme
,

403 
UE¼ÜCode
* 
¡©us
){

405 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

406  
NULL
;

410  
	`u¥»p_g‘Profe
(
·th
,
Çme
,
¡©us
);

411 
	}
}

413 
U_CAPI
 
USŒšgP»pProfe
* 
U_EXPORT2


414 
	$u¥»p_İ’ByTy³
(
USŒšgP»pProfeTy³
 
ty³
,

415 
UE¼ÜCode
* 
¡©us
) {

416 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

417  
NULL
;

419 
št32_t
 
šdex
 = (št32_t)
ty³
;

420 ià(
šdex
 < 0 || index >ğ(
št32_t
)((
PROFILE_NAMES
)/(PROFILE_NAMES[0]))) {

421 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

422  
NULL
;

424  
	`u¥»p_İ’
(
NULL
, 
PROFILE_NAMES
[
šdex
], 
¡©us
);

425 
	}
}

427 
U_CAPI
 
U_EXPORT2


428 
	$u¥»p_şo£
(
USŒšgP»pProfe
* 
´ofe
){

429 if(
´ofe
==
NULL
){

433 
	`umtx_lock
(&
u¥»pMu‹x
);

435 if(
´ofe
->
»fCouÁ
 > 0){

436 
´ofe
->
»fCouÁ
--;

438 
	`umtx_uÆock
(&
u¥»pMu‹x
);

440 
	}
}

442 
U_CFUNC
 

443 
	$u´v_syÁaxE¼Ü
(cÚ¡ 
UCh¬
* 
ruËs
,

444 
št32_t
 
pos
,

445 
št32_t
 
ruËsL’
,

446 
UP¬£E¼Ü
* 
·r£E¼Ü
){

447 if(
·r£E¼Ü
 =ğ
NULL
){

450 
·r£E¼Ü
->
off£t
 = 
pos
;

451 
·r£E¼Ü
->
lše
 = 0 ;

454 
št32_t
 
¡¬t
 = (
pos
 < 
U_PARSE_CONTEXT_LEN
)? 0 : (pos - (U_PARSE_CONTEXT_LEN-1));

455 
št32_t
 
lim™
 = 
pos
;

457 
	`u_memıy
(
·r£E¼Ü
->
´eCÚ‹xt
,
ruËs
+
¡¬t
,
lim™
-start);

459 
·r£E¼Ü
->
´eCÚ‹xt
[
lim™
-
¡¬t
] = 0;

462 
¡¬t
 = 
pos
;

463 
lim™
 = 
¡¬t
 + (
U_PARSE_CONTEXT_LEN
-1);

464 ià(
lim™
 > 
ruËsL’
) {

465 
lim™
 = 
ruËsL’
;

467 ià(
¡¬t
 < 
ruËsL’
) {

468 
	`u_memıy
(
·r£E¼Ü
->
po¡CÚ‹xt
,
ruËs
+
¡¬t
,
lim™
-start);

471 
·r£E¼Ü
->
po¡CÚ‹xt
[
lim™
-
¡¬t
]= 0;

472 
	}
}

475 
šlše
 
USŒšgP»pTy³


476 
	$g‘V®ues
(
ušt16_t
 
Œ›WÜd
, 
št16_t
& 
v®ue
, 
UBoŞ
& 
isIndex
){

478 
USŒšgP»pTy³
 
ty³
;

479 if(
Œ›WÜd
 == 0){

485 
ty³
 = 
USPREP_TYPE_LIMIT
;

486 
isIndex
 =
FALSE
;

487 
v®ue
 = 0;

488 }if(
Œ›WÜd
 >ğ
_SPREP_TYPE_THRESHOLD
){

489 
ty³
 = (
USŒšgP»pTy³
è(
Œ›WÜd
 - 
_SPREP_TYPE_THRESHOLD
);

490 
isIndex
 =
FALSE
;

491 
v®ue
 = 0;

494 
ty³
 = 
USPREP_MAP
;

496 if(
Œ›WÜd
 & 0x02){

497 
isIndex
 = 
TRUE
;

498 
v®ue
 = 
Œ›WÜd
 >> 2;

500 
isIndex
 = 
FALSE
;

501 
v®ue
 = (
št16_t
)
Œ›WÜd
;

502 
v®ue
 = (value >> 2);

505 if((
Œ›WÜd
>>2è=ğ
_SPREP_MAX_INDEX_VALUE
){

506 
ty³
 = 
USPREP_DELETE
;

507 
isIndex
 =
FALSE
;

508 
v®ue
 = 0;

511  
ty³
;

512 
	}
}

516 
št32_t


517 
	$u¥»p_m­
ĞcÚ¡ 
USŒšgP»pProfe
* 
´ofe
,

518 cÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

519 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

520 
št32_t
 
İtiÚs
,

521 
UP¬£E¼Ü
* 
·r£E¼Ü
,

522 
UE¼ÜCode
* 
¡©us
 ){

524 
ušt16_t
 
»suÉ
;

525 
št32_t
 
de¡Index
=0;

526 
št32_t
 
¤cIndex
;

527 
UBoŞ
 
®lowUÇssigÃd
 = (UBoŞè((
İtiÚs
 & 
USPREP_ALLOW_UNASSIGNED
)>0);

528 
USŒšgP»pTy³
 
ty³
;

529 
št16_t
 
v®ue
;

530 
UBoŞ
 
isIndex
;

531 cÚ¡ 
št32_t
* 
šdexes
 = 
´ofe
->indexes;

536 
¤cIndex
=0;¤cIndex<
¤cL’gth
;){

537 
UCh¬32
 
ch
;

539 
	`U16_NEXT
(
¤c
,
¤cIndex
,
¤cL’gth
,
ch
);

541 
»suÉ
=0;

543 
	`UTRIE_GET16
(&
´ofe
->
¥»pTr›
,
ch
,
»suÉ
);

545 
ty³
 = 
	`g‘V®ues
(
»suÉ
, 
v®ue
, 
isIndex
);

548 if(
ty³
 =ğ
USPREP_UNASSIGNED
 && 
®lowUÇssigÃd
 =ğ
FALSE
){

550 
	`u´v_syÁaxE¼Ü
(
¤c
,
¤cIndex
-
	`U16_LENGTH
(
ch
), 
¤cL’gth
,
·r£E¼Ü
);

551 *
¡©us
 = 
U_STRINGPREP_UNASSIGNED_ERROR
;

554 }if(
ty³
 =ğ
USPREP_MAP
){

556 
št32_t
 
šdex
, 
Ëngth
;

558 if(
isIndex
){

559 
šdex
 = 
v®ue
;

560 if(
šdex
 >ğ
šdexes
[
_SPREP_ONE_UCHAR_MAPPING_INDEX_START
] &&

561 
šdex
 < 
šdexes
[
_SPREP_TWO_UCHARS_MAPPING_INDEX_START
]){

562 
Ëngth
 = 1;

563 }if(
šdex
 >ğ
šdexes
[
_SPREP_TWO_UCHARS_MAPPING_INDEX_START
] &&

564 
šdex
 < 
šdexes
[
_SPREP_THREE_UCHARS_MAPPING_INDEX_START
]){

565 
Ëngth
 = 2;

566 }if(
šdex
 >ğ
šdexes
[
_SPREP_THREE_UCHARS_MAPPING_INDEX_START
] &&

567 
šdex
 < 
šdexes
[
_SPREP_FOUR_UCHARS_MAPPING_INDEX_START
]){

568 
Ëngth
 = 3;

570 
Ëngth
 = 
´ofe
->
m­pšgD©a
[
šdex
++];

575 
št32_t
 
i
=0; i< 
Ëngth
; i++){

576 if(
de¡Index
 < 
de¡C­ac™y
 ){

577 
de¡
[
de¡Index
] = 
´ofe
->
m­pšgD©a
[
šdex
+
i
];

579 
de¡Index
++;

584 
ch
 -ğ
v®ue
;

587 }if(
ty³
==
USPREP_DELETE
){

592 if(
ch
 <= 0xFFFF){

593 if(
de¡Index
 < 
de¡C­ac™y
 ){

594 
de¡
[
de¡Index
] = (
UCh¬
)
ch
;

596 
de¡Index
++;

598 if(
de¡Index
+1 < 
de¡C­ac™y
 ){

599 
de¡
[
de¡Index
] = 
	`U16_LEAD
(
ch
);

600 
de¡
[
de¡Index
+1] = 
	`U16_TRAIL
(
ch
);

602 
de¡Index
 +=2;

607  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
de¡Index
, 
¡©us
);

608 
	}
}

611 
št32_t


612 
	$u¥»p_nÜm®ize
ĞcÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

613 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

614 
UE¼ÜCode
* 
¡©us
 ){

615  
	`unÜm_nÜm®ize
(

616 
¤c
, 
¤cL’gth
,

617 
UNORM_NFKC
, 
UNORM_UNICODE_3_2
,

618 
de¡
, 
de¡C­ac™y
,

619 
¡©us
);

620 
	}
}

662 
	#MAX_STACK_BUFFER_SIZE
 300

	)

665 
U_CAPI
 
št32_t
 
U_EXPORT2


666 
	$u¥»p_´•¬e
ĞcÚ¡ 
USŒšgP»pProfe
* 
´ofe
,

667 cÚ¡ 
UCh¬
* 
¤c
, 
št32_t
 
¤cL’gth
,

668 
UCh¬
* 
de¡
, 
št32_t
 
de¡C­ac™y
,

669 
št32_t
 
İtiÚs
,

670 
UP¬£E¼Ü
* 
·r£E¼Ü
,

671 
UE¼ÜCode
* 
¡©us
 ){

674 if(
¡©us
 =ğ
NULL
 || 
	`U_FAILURE
(*status)){

679 if(
´ofe
==
NULL
 || 
¤c
==NULL || 
¤cL’gth
<-1 || (
de¡
==NULL && 
de¡C­ac™y
!=0)) {

680 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

684 
UCh¬
 
b1Sck
[
MAX_STACK_BUFFER_SIZE
], 
b2Sck
[MAX_STACK_BUFFER_SIZE];

685 
UCh¬
 *
b1
 = 
b1Sck
, *
b2
 = 
b2Sck
;

686 
št32_t
 
b1L’
, 
b2L’
=0,

687 
b1C­ac™y
 = 
MAX_STACK_BUFFER_SIZE
 ,

688 
b2C­ac™y
 = 
MAX_STACK_BUFFER_SIZE
;

689 
ušt16_t
 
»suÉ
;

690 
št32_t
 
b2Index
 = 0;

691 
UCh¬DœeùiÚ
 
dœeùiÚ
=
U_CHAR_DIRECTION_COUNT
, 
fœ¡Ch¬Dœ
=U_CHAR_DIRECTION_COUNT;

692 
UBoŞ
 
ËáToRight
=
FALSE
, 
rightToLeá
=FALSE;

693 
št32_t
 
¹lPos
 =-1, 
ÉrPos
 =-1;

696 if(
¤cL’gth
 == -1){

697 
¤cL’gth
 = 
	`u_¡¾’
(
¤c
);

700 
b1L’
 = 
	`u¥»p_m­
(
´ofe
, 
¤c
, 
¤cL’gth
, 
b1
, 
b1C­ac™y
, 
İtiÚs
, 
·r£E¼Ü
, 
¡©us
);

702 if(*
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
){

705 
b1
 = (
UCh¬
*è
	`u´v_m®loc
(
b1L’
 * 
U_SIZEOF_UCHAR
);

706 if(
b1
==
NULL
){

707 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

708 
CLEANUP
;

711 *
¡©us
 = 
U_ZERO_ERROR
;

713 
b1L’
 = 
	`u¥»p_m­
(
´ofe
, 
¤c
, 
¤cL’gth
, 
b1
, b1L’, 
İtiÚs
, 
·r£E¼Ü
, 
¡©us
);

718 if(
´ofe
->
doNFKC
 =ğ
TRUE
){

719 
b2L’
 = 
	`u¥»p_nÜm®ize
(
b1
,
b1L’
, 
b2
,
b2C­ac™y
,
¡©us
);

721 if(*
¡©us
 =ğ
U_BUFFER_OVERFLOW_ERROR
){

724 
b2
 = (
UCh¬
*è
	`u´v_m®loc
(
b2L’
 * 
U_SIZEOF_UCHAR
);

725 if(
b2
==
NULL
){

726 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

727 
CLEANUP
;

730 *
¡©us
 = 
U_ZERO_ERROR
;

732 
b2L’
 = 
	`u¥»p_nÜm®ize
(
b1
,
b1L’
, 
b2
,b2L’,
¡©us
);

737 
b2
 = 
b1
;

738 
b2L’
 = 
b1L’
;

742 if(
	`U_FAILURE
(*
¡©us
)){

743 
CLEANUP
;

746 
UCh¬32
 
ch
;

747 
USŒšgP»pTy³
 
ty³
;

748 
št16_t
 
v®ue
;

749 
UBoŞ
 
isIndex
;

752 
b2Index
=0; b2Index<
b2L’
;){

754 
ch
 = 0;

756 
	`U16_NEXT
(
b2
, 
b2Index
, 
b2L’
, 
ch
);

758 
	`UTRIE_GET16
(&
´ofe
->
¥»pTr›
,
ch
,
»suÉ
);

760 
ty³
 = 
	`g‘V®ues
(
»suÉ
, 
v®ue
, 
isIndex
);

762 ifĞ
ty³
 =ğ
USPREP_PROHIBITED
 ||

763 ((
»suÉ
 < 
_SPREP_TYPE_THRESHOLD
) && (result & 0x01) )

765 *
¡©us
 = 
U_STRINGPREP_PROHIBITED_ERROR
;

766 
	`u´v_syÁaxE¼Ü
(
b1
, 
b2Index
-
	`U16_LENGTH
(
ch
), 
b2L’
, 
·r£E¼Ü
);

767 
CLEANUP
;

770 if(
´ofe
->
checkBiDi
) {

771 
dœeùiÚ
 = 
	`ubidi_g‘CÏss
(
´ofe
->
bdp
, 
ch
);

772 if(
fœ¡Ch¬Dœ
 =ğ
U_CHAR_DIRECTION_COUNT
){

773 
fœ¡Ch¬Dœ
 = 
dœeùiÚ
;

775 if(
dœeùiÚ
 =ğ
U_LEFT_TO_RIGHT
){

776 
ËáToRight
 = 
TRUE
;

777 
ÉrPos
 = 
b2Index
-1;

779 if(
dœeùiÚ
 =ğ
U_RIGHT_TO_LEFT
 || dœeùiÚ =ğ
U_RIGHT_TO_LEFT_ARABIC
){

780 
rightToLeá
 = 
TRUE
;

781 
¹lPos
 = 
b2Index
-1;

785 if(
´ofe
->
checkBiDi
 =ğ
TRUE
){

787 ifĞ
ËáToRight
 =ğ
TRUE
 && 
rightToLeá
 == TRUE){

788 *
¡©us
 = 
U_STRINGPREP_CHECK_BIDI_ERROR
;

789 
	`u´v_syÁaxE¼Ü
(
b2
,(
¹lPos
>
ÉrPos
è?„Po :†ŒPos, 
b2L’
, 
·r£E¼Ü
);

790 
CLEANUP
;

794 ifĞ
rightToLeá
 =ğ
TRUE
 &&

795 !((
fœ¡Ch¬Dœ
 =ğ
U_RIGHT_TO_LEFT
 || fœ¡Ch¬Dœ =ğ
U_RIGHT_TO_LEFT_ARABIC
) &&

796 (
dœeùiÚ
 =ğ
U_RIGHT_TO_LEFT
 || dœeùiÚ =ğ
U_RIGHT_TO_LEFT_ARABIC
))

798 *
¡©us
 = 
U_STRINGPREP_CHECK_BIDI_ERROR
;

799 
	`u´v_syÁaxE¼Ü
(
b2
, 
¹lPos
, 
b2L’
, 
·r£E¼Ü
);

800  
FALSE
;

803 if(
b2L’
>0 && b2L’ <ğ
de¡C­ac™y
){

804 
	`u´v_memmove
(
de¡
,
b2
, 
b2L’
*
U_SIZEOF_UCHAR
);

807 
CLEANUP
:

808 if(
b1
!=
b1Sck
){

809 
	`u´v_ä“
(
b1
);

810 
b1
=
NULL
;

813 if(
b2
!=
b1Sck
 && b2!=
b2Sck
 && b2!=
b1
 ){

814 
	`u´v_ä“
(
b2
);

815 
b2
=
NULL
;

817  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
b2L’
, 
¡©us
);

818 
	}
}

823 
U_CAPI
 
št32_t
 
U_EXPORT2


824 
	$u¥»p_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

825 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

826 
UE¼ÜCode
 *
pE¼ÜCode
) {

827 cÚ¡ 
UD©aInfo
 *
pInfo
;

828 
št32_t
 
h—d”Size
;

830 cÚ¡ 
ušt8_t
 *
šBy‹s
;

831 
ušt8_t
 *
outBy‹s
;

833 cÚ¡ 
št32_t
 *
šIndexes
;

834 
št32_t
 
šdexes
[16];

836 
št32_t
 
i
, 
off£t
, 
couÁ
, 
size
;

839 
h—d”Size
=
	`ud©a_sw­D©aH—d”
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
pE¼ÜCode
);

840 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

845 
pInfo
=(cÚ¡ 
UD©aInfo
 *)((cÚ¡ *)
šD©a
+4);

847 
pInfo
->
d©aFÜm©
[0]==0x53 &&

848 
pInfo
->
d©aFÜm©
[1]==0x50 &&

849 
pInfo
->
d©aFÜm©
[2]==0x52 &&

850 
pInfo
->
d©aFÜm©
[3]==0x50 &&

851 
pInfo
->
fÜm©V”siÚ
[0]==3

853 
	`ud©a_´štE¼Ü
(
ds
, "usprep_swap(): data format %02x.%02x.%02x.%02x (format version %02x) is‚ot„ecognized‡s StringPrep .spp data\n",

854 
pInfo
->
d©aFÜm©
[0],…Info->dataFormat[1],

855 
pInfo
->
d©aFÜm©
[2],…Info->dataFormat[3],

856 
pInfo
->
fÜm©V”siÚ
[0]);

857 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

861 
šBy‹s
=(cÚ¡ 
ušt8_t
 *)
šD©a
+
h—d”Size
;

862 
outBy‹s
=(
ušt8_t
 *)
outD©a
+
h—d”Size
;

864 
šIndexes
=(cÚ¡ 
št32_t
 *)
šBy‹s
;

866 if(
Ëngth
>=0) {

867 
Ëngth
-=
h—d”Size
;

868 if(
Ëngth
<16*4) {

869 
	`ud©a_´štE¼Ü
(
ds
, "usprep_swap():oo few bytes (%d‡fter header) for StringPrep .spp data\n",

870 
Ëngth
);

871 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

877 
i
=0; i<16; ++i) {

878 
šdexes
[
i
]=
	`ud©a_»adIÁ32
(
ds
, 
šIndexes
[i]);

882 
size
=

884 
šdexes
[
_SPREP_INDEX_TRIE_SIZE
]+

885 
šdexes
[
_SPREP_INDEX_MAPPING_DATA_SIZE
];

887 if(
Ëngth
>=0) {

888 if(
Ëngth
<
size
) {

889 
	`ud©a_´štE¼Ü
(
ds
, "usprep_swap():oo few bytes (%d‡fter header) for‡ll of StringPrep .spp data\n",

890 
Ëngth
);

891 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

896 if(
šBy‹s
!=
outBy‹s
) {

897 
	`u´v_memıy
(
outBy‹s
, 
šBy‹s
, 
size
);

900 
off£t
=0;

903 
couÁ
=16*4;

904 
ds
->
	`sw­A¼ay32
(ds, 
šBy‹s
, 
couÁ
, 
outBy‹s
, 
pE¼ÜCode
);

905 
off£t
+=
couÁ
;

908 
couÁ
=
šdexes
[
_SPREP_INDEX_TRIE_SIZE
];

909 
	`uŒ›_sw­
(
ds
, 
šBy‹s
+
off£t
, 
couÁ
, 
outBy‹s
+off£t, 
pE¼ÜCode
);

910 
off£t
+=
couÁ
;

913 
couÁ
=
šdexes
[
_SPREP_INDEX_MAPPING_DATA_SIZE
];

914 
ds
->
	`sw­A¼ay16
(ds, 
šBy‹s
+
off£t
, 
couÁ
, 
outBy‹s
+off£t, 
pE¼ÜCode
);

915 
off£t
+=
couÁ
;

918  
h—d”Size
+
size
;

919 
	}
}

	@ustack.cpp

8 
	~"uveùÜ.h
"

10 
U_NAMESPACE_BEGIN


12 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
USck
)

14 
USck
::
	$USck
(
UE¼ÜCode
 &
¡©us
) :

15 
	$UVeùÜ
(
¡©us
)

17 
	}
}

19 
USck
::
	$USck
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
) :

20 
	$UVeùÜ
(
š™ŸlC­ac™y
, 
¡©us
)

22 
	}
}

24 
	gUSck
::
	$USck
(
UObjeùD–‘”
 *
d
, 
UKeyCom·¿tÜ
 *
c
, 
UE¼ÜCode
 &
¡©us
) :

25 
	$UVeùÜ
(
d
, 
c
, 
¡©us
)

27 
	}
}

29 
	gUSck
::
	$USck
(
UObjeùD–‘”
 *
d
, 
UKeyCom·¿tÜ
 *
c
, 
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
) :

30 
	$UVeùÜ
(
d
, 
c
, 
š™ŸlC­ac™y
, 
¡©us
)

32 
	}
}

34 
	gUSck
::~
	$USck
(è{
	}
}

36 * 
USck
::
	$pİ
() {

37 
št32_t
 
n
 = 
	`size
() - 1;

38 * 
»suÉ
 = 0;

39 ià(
n
 >= 0) {

40 
»suÉ
 = 
	`–em’tAt
(
n
);

41 
	`»moveEËm’tAt
(
n
);

43  
»suÉ
;

44 
	}
}

46 
št32_t
 
	gUSck
::
	$pİi
() {

47 
št32_t
 
n
 = 
	`size
() - 1;

48 
št32_t
 
»suÉ
 = 0;

49 ià(
n
 >= 0) {

50 
»suÉ
 = 
	`–em’tAti
(
n
);

51 
	`»moveEËm’tAt
(
n
);

53  
»suÉ
;

54 
	}
}

56 
št32_t
 
	gUSck
::
	$£¬ch
(* 
obj
) const {

57 
št32_t
 
i
 = 
	`šdexOf
(
obj
);

58  (
i
 >ğ0è? 
	`size
() - i : i;

59 
	}
}

61 
	gU_NAMESPACE_END


	@ustr_cnv.c

19 
	~"unicode/uty³s.h
"

21 #ià!
UCONFIG_NO_CONVERSION


23 
	~"unicode/u¡ršg.h
"

24 
	~"unicode/uúv.h
"

25 
	~"c¡ršg.h
"

26 
	~"cmemÜy.h
"

27 
	~"umu‹x.h
"

28 
	~"u¡r_úv.h
"

32 
UCÚv”‹r
 *
	ggDeçuÉCÚv”‹r
 = 
NULL
;

34 
U_CAPI
 
UCÚv”‹r
* 
U_EXPORT2


35 
	$u_g‘DeçuÉCÚv”‹r
(
UE¼ÜCode
 *
¡©us
)

37 
UCÚv”‹r
 *
cÚv”‹r
 = 
NULL
;

39 ià(
gDeçuÉCÚv”‹r
 !ğ
NULL
) {

40 
	`umtx_lock
(
NULL
);

43 ià(
gDeçuÉCÚv”‹r
 !ğ
NULL
) {

44 
cÚv”‹r
 = 
gDeçuÉCÚv”‹r
;

45 
gDeçuÉCÚv”‹r
 = 
NULL
;

47 
	`umtx_uÆock
(
NULL
);

51 if(
cÚv”‹r
 =ğ
NULL
) {

52 
cÚv”‹r
 = 
	`uúv_İ’
(
NULL
, 
¡©us
);

53 if(
	`U_FAILURE
(*
¡©us
)) {

54 
	`uúv_şo£
(
cÚv”‹r
);

55 
cÚv”‹r
 = 
NULL
;

59  
cÚv”‹r
;

60 
	}
}

62 
U_CAPI
 
U_EXPORT2


63 
	$u_»Ëa£DeçuÉCÚv”‹r
(
UCÚv”‹r
 *
cÚv”‹r
)

65 if(
gDeçuÉCÚv”‹r
 =ğ
NULL
) {

66 ià(
cÚv”‹r
 !ğ
NULL
) {

67 
	`uúv_»£t
(
cÚv”‹r
);

69 
	`umtx_lock
(
NULL
);

71 if(
gDeçuÉCÚv”‹r
 =ğ
NULL
) {

72 
gDeçuÉCÚv”‹r
 = 
cÚv”‹r
;

73 
cÚv”‹r
 = 
NULL
;

75 
	`umtx_uÆock
(
NULL
);

78 if(
cÚv”‹r
 !ğ
NULL
) {

79 
	`uúv_şo£
(
cÚv”‹r
);

81 
	}
}

83 
U_CAPI
 
U_EXPORT2


84 
	$u_æushDeçuÉCÚv”‹r
()

86 
UCÚv”‹r
 *
cÚv”‹r
 = 
NULL
;

88 ià(
gDeçuÉCÚv”‹r
 !ğ
NULL
) {

89 
	`umtx_lock
(
NULL
);

92 ià(
gDeçuÉCÚv”‹r
 !ğ
NULL
) {

93 
cÚv”‹r
 = 
gDeçuÉCÚv”‹r
;

94 
gDeçuÉCÚv”‹r
 = 
NULL
;

96 
	`umtx_uÆock
(
NULL
);

100 if(
cÚv”‹r
 !ğ
NULL
) {

101 
	`uúv_şo£
(
cÚv”‹r
);

103 
	}
}

109 
	#MAX_STRLEN
 0x0FFFFFFF

	)

114 
št32_t
 
	$u_a¡ºËn
(cÚ¡ *
s1
, 
št32_t
 
n
)

116 
št32_t
 
Ën
 = 0;

118 ià(
s1
)

120 
n
-- && *(
s1
++))

122 
Ën
++;

125  
Ën
;

126 
	}
}

128 
U_CAPI
 
UCh¬
* 
U_EXPORT2


129 
	$u_ua¡ºıy
(
UCh¬
 *
ucs1
,

130 cÚ¡ *
s2
,

131 
št32_t
 
n
)

133 
UCh¬
 *
rg‘
 = 
ucs1
;

134 
UE¼ÜCode
 
”r
 = 
U_ZERO_ERROR
;

135 
UCÚv”‹r
 *
úv
 = 
	`u_g‘DeçuÉCÚv”‹r
(&
”r
);

136 if(
	`U_SUCCESS
(
”r
è&& 
úv
 !ğ
NULL
) {

137 
	`uúv_»£t
(
úv
);

138 
	`uúv_toUnicode
(
úv
,

139 &
rg‘
,

140 
ucs1
+
n
,

141 &
s2
,

142 
s2
+
	`u_a¡ºËn
(s2, 
n
),

143 
NULL
,

144 
TRUE
,

145 &
”r
);

146 
	`uúv_»£t
(
úv
);

147 
	`u_»Ëa£DeçuÉCÚv”‹r
(
úv
);

148 if(
	`U_FAILURE
(
”r
è&& (”¸!ğ
U_BUFFER_OVERFLOW_ERROR
) ) {

149 *
ucs1
 = 0;

151 if(
rg‘
 < (
ucs1
+
n
)) {

152 *
rg‘
 = 0;

155 *
ucs1
 = 0;

157  
ucs1
;

158 
	}
}

160 
U_CAPI
 
UCh¬
* 
U_EXPORT2


161 
	$u_ua¡rıy
(
UCh¬
 *
ucs1
,

162 cÚ¡ *
s2
 )

164 
UE¼ÜCode
 
”r
 = 
U_ZERO_ERROR
;

165 
UCÚv”‹r
 *
úv
 = 
	`u_g‘DeçuÉCÚv”‹r
(&
”r
);

166 if(
	`U_SUCCESS
(
”r
è&& 
úv
 !ğ
NULL
) {

167 
	`uúv_toUCh¬s
(
úv
,

168 
ucs1
,

169 
MAX_STRLEN
,

170 
s2
,

171 (
št32_t
)
	`u´v_¡¾’
(
s2
),

172 &
”r
);

173 
	`u_»Ëa£DeçuÉCÚv”‹r
(
úv
);

174 if(
	`U_FAILURE
(
”r
)) {

175 *
ucs1
 = 0;

178 *
ucs1
 = 0;

180  
ucs1
;

181 
	}
}

186 
št32_t
 
	$u_u¡ºËn
(cÚ¡ 
UCh¬
 *
ucs1
, 
št32_t
 
n
)

188 
št32_t
 
Ën
 = 0;

190 ià(
ucs1
)

192 
n
-- && *(
ucs1
++))

194 
Ën
++;

197  
Ën
;

198 
	}
}

200 
U_CAPI
 * 
U_EXPORT2


201 
	$u_au¡ºıy
(*
s1
,

202 cÚ¡ 
UCh¬
 *
ucs2
,

203 
št32_t
 
n
)

205 *
rg‘
 = 
s1
;

206 
UE¼ÜCode
 
”r
 = 
U_ZERO_ERROR
;

207 
UCÚv”‹r
 *
úv
 = 
	`u_g‘DeçuÉCÚv”‹r
(&
”r
);

208 if(
	`U_SUCCESS
(
”r
è&& 
úv
 !ğ
NULL
) {

209 
	`uúv_»£t
(
úv
);

210 
	`uúv_äomUnicode
(
úv
,

211 &
rg‘
,

212 
s1
+
n
,

213 &
ucs2
,

214 
ucs2
+
	`u_u¡ºËn
(ucs2, 
n
),

215 
NULL
,

216 
TRUE
,

217 &
”r
);

218 
	`uúv_»£t
(
úv
);

219 
	`u_»Ëa£DeçuÉCÚv”‹r
(
úv
);

220 if(
	`U_FAILURE
(
”r
è&& (”¸!ğ
U_BUFFER_OVERFLOW_ERROR
) ) {

221 *
s1
 = 0;

223 if(
rg‘
 < (
s1
+
n
)) {

224 *
rg‘
 = 0;

227 *
s1
 = 0;

229  
s1
;

230 
	}
}

232 
U_CAPI
 * 
U_EXPORT2


233 
	$u_au¡rıy
(*
s1
,

234 cÚ¡ 
UCh¬
 *
ucs2
 )

236 
UE¼ÜCode
 
”r
 = 
U_ZERO_ERROR
;

237 
UCÚv”‹r
 *
úv
 = 
	`u_g‘DeçuÉCÚv”‹r
(&
”r
);

238 if(
	`U_SUCCESS
(
”r
è&& 
úv
 !ğ
NULL
) {

239 
št32_t
 
Ën
 = 
	`uúv_äomUCh¬s
(
úv
,

240 
s1
,

241 
MAX_STRLEN
,

242 
ucs2
,

244 &
”r
);

245 
	`u_»Ëa£DeçuÉCÚv”‹r
(
úv
);

246 
s1
[
Ën
] = 0;

248 *
s1
 = 0;

250  
s1
;

251 
	}
}

	@ustr_cnv.h

15 #iâdeà
USTR_CNV_IMP_H


16 
	#USTR_CNV_IMP_H


	)

18 
	~"unicode/uty³s.h
"

19 
	~"unicode/uúv.h
"

21 #ià!
UCONFIG_NO_CONVERSION


29 
U_CAPI
 
UCÚv”‹r
* 
U_EXPORT2


30 
u_g‘DeçuÉCÚv”‹r
(
UE¼ÜCode
 *
¡©us
);

37 
U_CAPI
 
U_EXPORT2


38 
u_»Ëa£DeçuÉCÚv”‹r
(
UCÚv”‹r
 *
cÚv”‹r
);

44 
U_CAPI
 
U_EXPORT2


45 
u_æushDeçuÉCÚv”‹r
();

	@ustr_imp.h

15 #iâdeà
__USTR_IMP_H__


16 
	#__USTR_IMP_H__


	)

18 
	~"unicode/uty³s.h
"

19 
	~"unicode/u™”.h
"

20 
	~"uÿ£.h
"

23 #iâdeà
UBRK_TYPEDEF_UBREAK_ITERATOR


24 
	#UBRK_TYPEDEF_UBREAK_ITERATOR


	)

25 
UB»akI‹¿tÜ
 
	tUB»akI‹¿tÜ
;

28 #iâdeà
U_COMPARE_IGNORE_CASE


35 
	#U_COMPARE_IGNORE_CASE
 0x10000

	)

43 
	#_STRNCMP_STYLE
 0x1000

	)

52 
U_CFUNC
 
št32_t
 
U_EXPORT2


53 
u´v_¡rCom·»
(cÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

54 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

55 
UBoŞ
 
¡ºcmpStyË
, UBoŞ 
codePoštOrd”
);

63 
U_CFUNC
 
št32_t


64 
u_¡rcmpFŞd
(cÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

65 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

66 
ušt32_t
 
İtiÚs
,

67 
UE¼ÜCode
 *
pE¼ÜCode
);

76 
U_CFUNC
 
UBoŞ


77 
u´v_havePrİ”t›s
(
UE¼ÜCode
 *
pE¼ÜCode
);

97 
	sUCa£M­
 {

98 cÚ¡ 
UCa£Prİs
 *
	mc¥
;

99 #ià!
UCONFIG_NO_BREAK_ITERATION


100 
UB»akI‹¿tÜ
 *
	m™”
;

102 
	mloÿË
[32];

103 
št32_t
 
	mlocCache
;

104 
ušt32_t
 
	mİtiÚs
;

107 #iâdeà
__UCASEMAP_H__


108 
UCa£M­
 
	tUCa£M­
;

115 
	mTO_LOWER
,

116 
	mTO_UPPER
,

117 
	mTO_TITLE
,

118 
	mFOLD_CASE


124 
U_CFUNC
 
št32_t


125 
u¡r_toLow”
(cÚ¡ 
UCa£Prİs
 *
c¥
,

126 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

127 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

128 cÚ¡ *
loÿË
,

129 
UE¼ÜCode
 *
pE¼ÜCode
);

134 
U_CFUNC
 
št32_t


135 
u¡r_toUµ”
(cÚ¡ 
UCa£Prİs
 *
c¥
,

136 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

137 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

138 cÚ¡ *
loÿË
,

139 
UE¼ÜCode
 *
pE¼ÜCode
);

141 #ià!
UCONFIG_NO_BREAK_ITERATION


146 
U_CFUNC
 
št32_t


147 
u¡r_toT™Ë
(cÚ¡ 
UCa£Prİs
 *
c¥
,

148 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

149 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

150 
UB»akI‹¿tÜ
 *
t™ËI‹r
,

151 cÚ¡ *
loÿË
, 
ušt32_t
 
İtiÚs
,

152 
UE¼ÜCode
 *
pE¼ÜCode
);

160 
U_CFUNC
 
št32_t


161 
u¡r_fŞdCa£
(cÚ¡ 
UCa£Prİs
 *
c¥
,

162 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

163 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

164 
ušt32_t
 
İtiÚs
,

165 
UE¼ÜCode
 *
pE¼ÜCode
);

180 
U_CAPI
 
št32_t
 
U_EXPORT2


181 
u_‹rmš©eUCh¬s
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
, iÁ32_ˆ
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
);

187 
U_CAPI
 
št32_t
 
U_EXPORT2


188 
u_‹rmš©eCh¬s
(*
de¡
, 
št32_t
 
de¡C­ac™y
, iÁ32_ˆ
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
);

194 
U_CAPI
 
št32_t
 
U_EXPORT2


195 
u_‹rmš©eUCh¬32s
(
UCh¬32
 *
de¡
, 
št32_t
 
de¡C­ac™y
, iÁ32_ˆ
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
);

201 
U_CAPI
 
št32_t
 
U_EXPORT2


202 
u_‹rmš©eWCh¬s
(
wch¬_t
 *
de¡
, 
št32_t
 
de¡C­ac™y
, iÁ32_ˆ
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
);

	@ustr_wcs.c

20 
	~"unicode/uty³s.h
"

21 
	~"unicode/u¡ršg.h
"

22 
	~"c¡ršg.h
"

23 
	~"cwch¬.h
"

24 
	~"cmemÜy.h
"

25 
	~"u¡r_imp.h
"

26 
	~"u¡r_úv.h
"

29 #ifdeà
HAVE_ANDROID_OS


31 
	#MB_CUR_MAX
 (1)

	)

35 #ià
defšed
(
U_WCHAR_IS_UTF16
è|| defšed(
U_WCHAR_IS_UTF32
è|| !
UCONFIG_NO_CONVERSION


37 
	#_STACK_BUFFER_CAPACITY
 1000

	)

38 
	#_BUFFER_CAPACITY_MULTIPLIER
 2

	)

40 #ià!
defšed
(
U_WCHAR_IS_UTF16
è&& !defšed(
U_WCHAR_IS_UTF32
)

41 
U_INLINE
 
UBoŞ


42 
	$u_growAnyBufãrFromStic
(*
cÚ‹xt
,

43 **
pBufãr
, 
št32_t
 *
pC­ac™y
, iÁ32_ˆ
»qC­ac™y
,

44 
št32_t
 
Ëngth
, iÁ32_ˆ
size
) {

46 *
ÃwBufãr
=
	`u´v_m®loc
(
»qC­ac™y
*
size
);

47 if(
ÃwBufãr
!=
NULL
) {

48 if(
Ëngth
>0) {

49 
	`u´v_memıy
(
ÃwBufãr
, *
pBufãr
, 
Ëngth
*
size
);

51 *
pC­ac™y
=
»qC­ac™y
;

53 *
pC­ac™y
=0;

57 if(*
pBufãr
!=(*)
cÚ‹xt
) {

58 
	`u´v_ä“
(*
pBufãr
);

61 *
pBufãr
=
ÃwBufãr
;

62  (
UBoŞ
)(
ÃwBufãr
!=
NULL
);

63 
	}
}

66 
wch¬_t
*

67 
	$_¡rToWCS
(
wch¬_t
 *
de¡
,

68 
št32_t
 
de¡C­ac™y
,

69 
št32_t
 *
pDe¡L’gth
,

70 cÚ¡ 
UCh¬
 *
¤c
,

71 
št32_t
 
¤cL’gth
,

72 
UE¼ÜCode
 *
pE¼ÜCode
){

74 
¡ackBufãr
 [
_STACK_BUFFER_CAPACITY
];

75 * 
‹mpBuf
 = 
¡ackBufãr
;

76 
št32_t
 
‹mpBufC­ac™y
 = 
_STACK_BUFFER_CAPACITY
;

77 * 
‹mpBufLim™
 = 
¡ackBufãr
 + 
‹mpBufC­ac™y
;

78 
UCÚv”‹r
* 
cÚv
 = 
NULL
;

79 * 
§veBuf
 = 
‹mpBuf
;

80 
wch¬_t
* 
štT¬g‘
=
NULL
;

81 
št32_t
 
štT¬g‘C­ac™y
=0;

82 
couÁ
=0,
»tV®
=0;

84 cÚ¡ 
UCh¬
 *
pSrcLim™
 =
NULL
;

85 cÚ¡ 
UCh¬
 *
pSrc
 = 
¤c
;

87 
cÚv
 = 
	`u_g‘DeçuÉCÚv”‹r
(
pE¼ÜCode
);

89 if(
	`U_FAILURE
(*
pE¼ÜCode
)){

90  
NULL
;

93 if(
¤cL’gth
 == -1){

94 
¤cL’gth
 = 
	`u_¡¾’
(
pSrc
);

97 
pSrcLim™
 = 
pSrc
 + 
¤cL’gth
;

101 *
pE¼ÜCode
 = 
U_ZERO_ERROR
;

104 
	`uúv_äomUnicode
(
cÚv
,&
‹mpBuf
,
‹mpBufLim™
,&
pSrc
,
pSrcLim™
,
NULL
,(
UBoŞ
)ÕSrc=õSrcLim™),
pE¼ÜCode
);

105 
couÁ
 =(
‹mpBuf
 - 
§veBuf
);

108 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
){

109 
‹mpBuf
 = 
§veBuf
;

112 if(!
	`u_growAnyBufãrFromStic
(
¡ackBufãr
,(**è&
‹mpBuf
, &
‹mpBufC­ac™y
,

113 (
_BUFFER_CAPACITY_MULTIPLIER
 * (
¤cL’gth
)), 
couÁ
,())){

114 
ş—nup
;

117 
§veBuf
 = 
‹mpBuf
;

118 
‹mpBufLim™
 = 
‹mpBuf
 + 
‹mpBufC­ac™y
;

119 
‹mpBuf
 =empBuà+ 
couÁ
;

126 if(
	`U_FAILURE
(*
pE¼ÜCode
)){

127 
ş—nup
;

131 if(
couÁ
>=
‹mpBufC­ac™y
){

132 
‹mpBuf
 = 
§veBuf
;

134 if(!
	`u_growAnyBufãrFromStic
(
¡ackBufãr
,(**è&
‹mpBuf
, &
‹mpBufC­ac™y
,

135 
‹mpBufC­ac™y
-
couÁ
+1, count,())){

136 
ş—nup
;

138 
§veBuf
 = 
‹mpBuf
;

141 
§veBuf
[
couÁ
]=0;

148 
štT¬g‘C­ac™y
 = (
couÁ
 * 
_BUFFER_CAPACITY_MULTIPLIER
 + 1) ;

149 
štT¬g‘
 = (
wch¬_t
*)
	`u´v_m®loc
Ğ
štT¬g‘C­ac™y
 * (wchar_t) );

151 if(
štT¬g‘
){

153 
št32_t
 
nulL’
 = 0;

154 
št32_t
 
»maššg
 = 
štT¬g‘C­ac™y
;

155 
wch¬_t
* 
pIÁT¬g‘
=
štT¬g‘
;

156 
‹mpBuf
 = 
§veBuf
;

164 
»tV®
 = 
	`u´v_mb¡owcs
(
pIÁT¬g‘
,(
‹mpBuf
+
nulL’
),
»maššg
);

166 if(
»tV®
==-1){

167 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

169 }if(
»tV®
=ğ
»maššg
){

170 
numWr™‹n
 = (
pIÁT¬g‘
-
štT¬g‘
);

171 
	`u_growAnyBufãrFromStic
(
NULL
,(**è&
štT¬g‘
,

172 &
štT¬g‘C­ac™y
,

173 
štT¬g‘C­ac™y
 * 
_BUFFER_CAPACITY_MULTIPLIER
,

174 
numWr™‹n
,

175 (
wch¬_t
));

176 
pIÁT¬g‘
 = 
štT¬g‘
;

177 
»maššg
=
štT¬g‘C­ac™y
;

179 if(
nulL’
!=
couÁ
){

180 
pIÁT¬g‘
+=
numWr™‹n
;

181 
»maššg
-=
numWr™‹n
;

185 
št32_t
 
nulV®
;

188 
‹mpBuf
[
nulL’
++] != 0){

190 
nulV®
 = (
nulL’
 < 
¤cL’gth
) ? 1 : 0;

191 
pIÁT¬g‘
 =…IÁT¬g‘ + 
»tV®
+
nulV®
;

192 
»maššg
 -=(
»tV®
+
nulV®
);

195 if(
nulL’
>=(
couÁ
)){

200 
couÁ
 = (
št32_t
)(
pIÁT¬g‘
-
štT¬g‘
);

202 if(0 < 
couÁ
 && couÁ <ğ
de¡C­ac™y
){

203 
	`u´v_memıy
(
de¡
,
štT¬g‘
,
couÁ
*(
wch¬_t
));

206 if(
pDe¡L’gth
){

207 *
pDe¡L’gth
 = 
couÁ
;

211 
	`u´v_ä“
(
štT¬g‘
);

214 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

216 
ş—nup
:

218 if(
¡ackBufãr
 !ğ
§veBuf
){

219 
	`u´v_ä“
(
§veBuf
);

221 
	`u_‹rmš©eWCh¬s
(
de¡
,
de¡C­ac™y
,
couÁ
,
pE¼ÜCode
);

223 
	`u_»Ëa£DeçuÉCÚv”‹r
(
cÚv
);

225  
de¡
;

226 
	}
}

229 
U_CAPI
 
wch¬_t
* 
U_EXPORT2


230 
	$u_¡rToWCS
(
wch¬_t
 *
de¡
,

231 
št32_t
 
de¡C­ac™y
,

232 
št32_t
 *
pDe¡L’gth
,

233 cÚ¡ 
UCh¬
 *
¤c
,

234 
št32_t
 
¤cL’gth
,

235 
UE¼ÜCode
 *
pE¼ÜCode
){

238 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)){

239  
NULL
;

242 ifĞ(
¤c
==
NULL
 && 
¤cL’gth
!=0) || srcLength < -1 ||

243 (
de¡C­ac™y
<0è|| (
de¡
 =ğ
NULL
 && destCapacity > 0)

245 *
pE¼ÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

246  
NULL
;

249 #ifdeà
U_WCHAR_IS_UTF16


251 if(
¤cL’gth
 == -1){

252 
¤cL’gth
 = 
	`u_¡¾’
(
¤c
);

254 if(0 < 
¤cL’gth
 && srcL’gth <ğ
de¡C­ac™y
){

255 
	`u´v_memıy
(
de¡
,
¤c
,
¤cL’gth
*
U_SIZEOF_UCHAR
);

257 if(
pDe¡L’gth
){

258 *
pDe¡L’gth
 = 
¤cL’gth
;

261 
	`u_‹rmš©eUCh¬s
(
de¡
,
de¡C­ac™y
,
¤cL’gth
,
pE¼ÜCode
);

263  
de¡
;

265 #–ià
defšed
 
U_WCHAR_IS_UTF32


267  (
wch¬_t
*)
	`u_¡rToUTF32
((
UCh¬32
*)
de¡
, 
de¡C­ac™y
, 
pDe¡L’gth
,

268 
¤c
, 
¤cL’gth
, 
pE¼ÜCode
);

272  
	`_¡rToWCS
(
de¡
,
de¡C­ac™y
,
pDe¡L’gth
,
¤c
,
¤cL’gth
, 
pE¼ÜCode
);

276 
	}
}

278 #ià!
defšed
(
U_WCHAR_IS_UTF16
è&& !defšed(
U_WCHAR_IS_UTF32
)

280 
UCh¬
*

281 
	$_¡rFromWCS
Ğ
UCh¬
 *
de¡
,

282 
št32_t
 
de¡C­ac™y
,

283 
št32_t
 *
pDe¡L’gth
,

284 cÚ¡ 
wch¬_t
 *
¤c
,

285 
št32_t
 
¤cL’gth
,

286 
UE¼ÜCode
 *
pE¼ÜCode
)

288 
št32_t
 
»tV®
 =0, 
couÁ
 =0 ;

289 
UCÚv”‹r
* 
cÚv
 = 
NULL
;

290 
UCh¬
* 
pT¬g‘
 = 
NULL
;

291 
UCh¬
* 
pT¬g‘Lim™
 = 
NULL
;

292 
UCh¬
* 
rg‘
 = 
NULL
;

294 
UCh¬
 
uSck
 [
_STACK_BUFFER_CAPACITY
];

296 
wch¬_t
 
wSck
[
_STACK_BUFFER_CAPACITY
];

297 
wch¬_t
* 
pWSck
 = 
wSck
;

300 
cSck
[
_STACK_BUFFER_CAPACITY
];

301 
št32_t
 
cSckC­
 = 
_STACK_BUFFER_CAPACITY
;

302 * 
pCSrc
=
cSck
;

303 * 
pCSave
=
pCSrc
;

304 * 
pCSrcLim™
=
NULL
;

306 cÚ¡ 
wch¬_t
* 
pSrc
 = 
¤c
;

307 cÚ¡ 
wch¬_t
* 
pSrcLim™
 = 
NULL
;

309 if(
¤cL’gth
 ==-1){

316 
»tV®
 = 
	`u´v_wc¡ombs
(
pCSrc
,
¤c
, 
cSckC­
);

318 if(
»tV®
 == -1){

319 *
pE¼ÜCode
 = 
U_ILLEGAL_CHAR_FOUND
;

320 
ş—nup
;

321 }if(
»tV®
 >ğ(
cSckC­
-1)){

323 
	`u_growAnyBufãrFromStic
(
cSck
,(**)&
pCSrc
,&
cSckC­
,

324 
cSckC­
 * 
_BUFFER_CAPACITY_MULTIPLIER
, 0, ());

325 
pCSave
 = 
pCSrc
;

328 
pCSrc
 =…CSrc+
»tV®
;

338 
št32_t
 
»maššg
 =
cSckC­
;

340 
pSrcLim™
 = 
¤c
 + 
¤cL’gth
;

343 
št32_t
 
nulL’
 = 0;

346 
nulL’
<
¤cL’gth
 && 
pSrc
[nulLen++]!=0){

349 if((
pSrc
+
nulL’
è< 
pSrcLim™
){

351 if(
»maššg
 < (
nulL’
 * 
MB_CUR_MAX
)){

353 
št32_t
 
Ën
 = (
pCSrc
-
pCSave
);

354 
pCSrc
 = 
pCSave
;

356 
	`u_growAnyBufãrFromStic
(
cSck
,(**)&
pCSrc
,&
cSckC­
,

357 
_BUFFER_CAPACITY_MULTIPLIER
*
cSckC­
+(
nulL’
*
MB_CUR_MAX
),
Ën
,());

359 
pCSave
 = 
pCSrc
;

360 
pCSrc
 = 
pCSave
+
Ën
;

361 
»maššg
 = 
cSckC­
-(
pCSrc
 - 
pCSave
);

367 
»tV®
 = 
	`u´v_wc¡ombs
(
pCSrc
,
pSrc
,
»maššg
);

369 if(
»tV®
==-1){

371 *
pE¼ÜCode
 = 
U_ILLEGAL_CHAR_FOUND
;

372 
ş—nup
;

375 
pCSrc
 +ğ
»tV®
+1 ;

377 
pSrc
 +ğ
nulL’
;

378 
¤cL’gth
-=
nulL’
;

379 
»maššg
 -ğ(
pCSrc
-
pCSave
);

387 if(
nulL’
 >ğ
_STACK_BUFFER_CAPACITY
){

390 
pWSck
 =(
wch¬_t
*è
	`u´v_m®loc
((wch¬_tè* (
nulL’
 + 1));

391 if(
pWSck
==
NULL
){

392 *
pE¼ÜCode
 = 
U_MEMORY_ALLOCATION_ERROR
;

393 
ş—nup
;

396 if(
nulL’
>0){

398 
	`u´v_memıy
(
pWSck
,
pSrc
,
nulL’
*(
wch¬_t
));

402 
pWSck
[
nulL’
] =0 ;

404 if(
»maššg
 < (
nulL’
 * 
MB_CUR_MAX
)){

406 
št32_t
 
Ën
 = (
pCSrc
-
pCSave
);

407 
pCSrc
 = 
pCSave
;

409 
	`u_growAnyBufãrFromStic
(
cSck
,(**)&
pCSrc
,&
cSckC­
,

410 
cSckC­
+(
nulL’
*
MB_CUR_MAX
),
Ën
,());

412 
pCSave
 = 
pCSrc
;

413 
pCSrc
 = 
pCSave
+
Ën
;

414 
»maššg
 = 
cSckC­
-(
pCSrc
 - 
pCSave
);

417 
»tV®
 = 
	`u´v_wc¡ombs
(
pCSrc
,
pWSck
,
»maššg
);

419 
pCSrc
 +ğ
»tV®
;

420 
pSrc
 +ğ
nulL’
;

421 
¤cL’gth
-=
nulL’
;

430 
pCSrcLim™
 = 
pCSrc
;

431 
pCSrc
 = 
pCSave
;

432 
pT¬g‘
 = 
rg‘
ğ
de¡
;

433 
pT¬g‘Lim™
 = 
de¡
 + 
de¡C­ac™y
;

435 
cÚv
ğ
	`u_g‘DeçuÉCÚv”‹r
(
pE¼ÜCode
);

437 if(
	`U_FAILURE
(*
pE¼ÜCode
)|| 
cÚv
==
NULL
){

438 
ş—nup
;

443 *
pE¼ÜCode
 = 
U_ZERO_ERROR
;

446 
	`uúv_toUnicode
(
cÚv
,&
pT¬g‘
,
pT¬g‘Lim™
,(cÚ¡ **)&
pCSrc
,
pCSrcLim™
,
NULL
,(
UBoŞ
)ÕCSrc=õCSrcLim™),
pE¼ÜCode
);

449 
couÁ
+ğ
pT¬g‘
 - 
rg‘
;

451 if(*
pE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
){

452 
rg‘
 = 
uSck
;

453 
pT¬g‘
 = 
uSck
;

454 
pT¬g‘Lim™
 = 
uSck
 + 
_STACK_BUFFER_CAPACITY
;

461 if(
pDe¡L’gth
){

462 *
pDe¡L’gth
 =
couÁ
;

465 
	`u_‹rmš©eUCh¬s
(
de¡
,
de¡C­ac™y
,
couÁ
,
pE¼ÜCode
);

467 
ş—nup
:

469 if(
cSck
 !ğ
pCSave
){

470 
	`u´v_ä“
(
pCSave
);

473 if(
wSck
 !ğ
pWSck
){

474 
	`u´v_ä“
(
pWSck
);

477 
	`u_»Ëa£DeçuÉCÚv”‹r
(
cÚv
);

479  
de¡
;

480 
	}
}

483 
U_CAPI
 
UCh¬
* 
U_EXPORT2


484 
	$u_¡rFromWCS
(
UCh¬
 *
de¡
,

485 
št32_t
 
de¡C­ac™y
,

486 
št32_t
 *
pDe¡L’gth
,

487 cÚ¡ 
wch¬_t
 *
¤c
,

488 
št32_t
 
¤cL’gth
,

489 
UE¼ÜCode
 *
pE¼ÜCode
)

493 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)){

494  
NULL
;

497 ifĞ(
¤c
==
NULL
 && 
¤cL’gth
!=0) || srcLength < -1 ||

498 (
de¡C­ac™y
<0è|| (
de¡
 =ğ
NULL
 && destCapacity > 0)

500 *
pE¼ÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

501  
NULL
;

504 #ifdeà
U_WCHAR_IS_UTF16


506 if(
¤cL’gth
 == -1){

507 
¤cL’gth
 = 
	`u_¡¾’
(
¤c
);

509 if(0 < 
¤cL’gth
 && srcL’gth <ğ
de¡C­ac™y
){

510 
	`u´v_memıy
(
de¡
,
¤c
,
¤cL’gth
*
U_SIZEOF_UCHAR
);

512 if(
pDe¡L’gth
){

513 *
pDe¡L’gth
 = 
¤cL’gth
;

516 
	`u_‹rmš©eUCh¬s
(
de¡
,
de¡C­ac™y
,
¤cL’gth
,
pE¼ÜCode
);

518  
de¡
;

520 #–ià
defšed
 
U_WCHAR_IS_UTF32


522  
	`u_¡rFromUTF32
(
de¡
, 
de¡C­ac™y
, 
pDe¡L’gth
,

523 (
UCh¬32
*)
¤c
, 
¤cL’gth
, 
pE¼ÜCode
);

527  
	`_¡rFromWCS
(
de¡
,
de¡C­ac™y
,
pDe¡L’gth
,
¤c
,
¤cL’gth
,
pE¼ÜCode
);

531 
	}
}

	@ustrcase.c

21 
	~"unicode/uty³s.h
"

22 
	~"unicode/uloc.h
"

23 
	~"unicode/u¡ršg.h
"

24 
	~"unicode/uÿ£m­.h
"

25 
	~"unicode/ubrk.h
"

26 
	~"cmemÜy.h
"

27 
	~"uÿ£.h
"

28 
	~"u¡r_imp.h
"

33 
U_INLINE
 
št32_t


34 
	$­³ndResuÉ
(
UCh¬
 *
de¡
, 
št32_t
 
de¡Index
, iÁ32_ˆ
de¡C­ac™y
,

35 
št32_t
 
»suÉ
, cÚ¡ 
UCh¬
 *
s
) {

36 
UCh¬32
 
c
;

37 
št32_t
 
Ëngth
;

40 if(
»suÉ
<0) {

42 
c
=~
»suÉ
;

43 
Ëngth
=-1;

44 } if(
»suÉ
<=
UCASE_MAX_STRING_LENGTH
) {

45 
c
=
U_SENTINEL
;

46 
Ëngth
=
»suÉ
;

48 
c
=
»suÉ
;

49 
Ëngth
=-1;

52 if(
de¡Index
<
de¡C­ac™y
) {

54 if(
Ëngth
<0) {

56 
UBoŞ
 
isE¼Ü
=
FALSE
;

57 
	`U16_APPEND
(
de¡
, 
de¡Index
, 
de¡C­ac™y
, 
c
, 
isE¼Ü
);

58 if(
isE¼Ü
) {

60 
de¡Index
+=
	`U16_LENGTH
(
c
);

64 if((
de¡Index
+
Ëngth
)<=
de¡C­ac™y
) {

65 
Ëngth
>0) {

66 
de¡
[
de¡Index
++]=*
s
++;

67 --
Ëngth
;

71 
de¡Index
+=
Ëngth
;

76 if(
Ëngth
<0) {

77 
de¡Index
+=
	`U16_LENGTH
(
c
);

79 
de¡Index
+=
Ëngth
;

82  
de¡Index
;

83 
	}
}

85 
UCh¬32
 
U_CALLCONV


86 
	$utf16_ÿ£CÚ‹xtI‹¿tÜ
(*
cÚ‹xt
, 
št8_t
 
dœ
) {

87 
UCa£CÚ‹xt
 *
csc
=(UCa£CÚ‹xˆ*)
cÚ‹xt
;

88 
UCh¬32
 
c
;

90 if(
dœ
<0) {

92 
csc
->
šdex
=csc->
ıS¹
;

93 
csc
->
dœ
=dir;

94 } if(
dœ
>0) {

96 
csc
->
šdex
=csc->
ıLim™
;

97 
csc
->
dœ
=dir;

100 
dœ
=
csc
->dir;

103 if(
dœ
<0) {

104 if(
csc
->
¡¬t
<csc->
šdex
) {

105 
	`U16_PREV
((cÚ¡ 
UCh¬
 *)
csc
->
p
, csc->
¡¬t
, csc->
šdex
, 
c
);

106  
c
;

109 if(
csc
->
šdex
<csc->
lim™
) {

110 
	`U16_NEXT
((cÚ¡ 
UCh¬
 *)
csc
->
p
, csc->
šdex
, csc->
lim™
, 
c
);

111  
c
;

114  
U_SENTINEL
;

115 
	}
}

121 
št32_t


122 
	$_ÿ£M­
(cÚ¡ 
UCa£M­
 *
csm
, 
UCa£M­FuÎ
 *
m­
,

123 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

124 cÚ¡ 
UCh¬
 *
¤c
, 
UCa£CÚ‹xt
 *
csc
,

125 
št32_t
 
¤cS¹
, iÁ32_ˆ
¤cLim™
,

126 
UE¼ÜCode
 *
pE¼ÜCode
) {

127 cÚ¡ 
UCh¬
 *
s
;

128 
UCh¬32
 
c
, 
c2
 = 0;

129 
št32_t
 
¤cIndex
, 
de¡Index
;

130 
št32_t
 
locCache
;

132 
locCache
=
csm
->locCache;

135 
¤cIndex
=
¤cS¹
;

136 
de¡Index
=0;

137 
¤cIndex
<
¤cLim™
) {

138 
csc
->
ıS¹
=
¤cIndex
;

139 
	`U16_NEXT
(
¤c
, 
¤cIndex
, 
¤cLim™
, 
c
);

140 
csc
->
ıLim™
=
¤cIndex
;

141 
c
=
	`m­
(
csm
->
c¥
, c, 
utf16_ÿ£CÚ‹xtI‹¿tÜ
, 
csc
, &
s
, csm->
loÿË
, &
locCache
);

142 if((
de¡Index
<
de¡C­ac™y
è&& (
c
<0 ? (
c2
=~c)<=0xfffà: 
UCASE_MAX_STRING_LENGTH
<c && (c2=c)<=0xffff)) {

144 
de¡
[
de¡Index
++]=(
UCh¬
)
c2
;

146 
de¡Index
=
	`­³ndResuÉ
(
de¡
, de¡Index, 
de¡C­ac™y
, 
c
, 
s
);

150 if(
de¡Index
>
de¡C­ac™y
) {

151 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

153  
de¡Index
;

154 
	}
}

157 
	$£tTempCa£M­LoÿË
(
UCa£M­
 *
csm
, cÚ¡ *
loÿË
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

170 
i
;

171 
c
;

174 if(
loÿË
==
NULL
) {

175 
loÿË
=
	`uloc_g‘DeçuÉ
();

177 
i
=0; i<4 && (
c
=
loÿË
[i])!=0 && c!='-' && c!='_'; ++i) {

178 
csm
->
loÿË
[
i
]=
c
;

180 if(
i
<=3) {

181 
csm
->
loÿË
[
i
]=0;

183 
csm
->
loÿË
[0]=0;

185 
	}
}

191 
U_INLINE
 

192 
	$£tTempCa£M­
(
UCa£M­
 *
csm
, cÚ¡ *
loÿË
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

193 if(
csm
->
c¥
==
NULL
) {

194 
csm
->
c¥
=
	`uÿ£_g‘SšgËtÚ
();

196 if(
loÿË
!=
NULL
 &&†ocale[0]==0) {

197 
csm
->
loÿË
[0]=0;

199 
	`£tTempCa£M­LoÿË
(
csm
, 
loÿË
, 
pE¼ÜCode
);

201 
	}
}

203 #ià!
UCONFIG_NO_BREAK_ITERATION


208 
št32_t


209 
	$_toT™Ë
(
UCa£M­
 *
csm
,

210 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

211 cÚ¡ 
UCh¬
 *
¤c
, 
UCa£CÚ‹xt
 *
csc
,

212 
št32_t
 
¤cL’gth
,

213 
UE¼ÜCode
 *
pE¼ÜCode
) {

214 cÚ¡ 
UCh¬
 *
s
;

215 
UCh¬32
 
c
;

216 
št32_t
 
´ev
, 
t™ËS¹
, 
t™ËLim™
, 
idx
, 
de¡Index
, 
Ëngth
;

217 
UBoŞ
 
isFœ¡Index
;

219 if(
csm
->
™”
!=
NULL
) {

220 
	`ubrk_£tText
(
csm
->
™”
, 
¤c
, 
¤cL’gth
, 
pE¼ÜCode
);

222 
csm
->
™”
=
	`ubrk_İ’
(
UBRK_WORD
, csm->
loÿË
,

223 
¤c
, 
¤cL’gth
,

224 
pE¼ÜCode
);

226 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

231 
de¡Index
=0;

232 
´ev
=0;

233 
isFœ¡Index
=
TRUE
;

236 
´ev
<
¤cL’gth
) {

238 if(
isFœ¡Index
) {

239 
isFœ¡Index
=
FALSE
;

240 
idx
=
	`ubrk_fœ¡
(
csm
->
™”
);

242 
idx
=
	`ubrk_Ãxt
(
csm
->
™”
);

244 if(
idx
==
UBRK_DONE
 || idx>
¤cL’gth
) {

245 
idx
=
¤cL’gth
;

261 if(
´ev
<
idx
) {

263 
t™ËS¹
=
t™ËLim™
=
´ev
;

264 
	`U16_NEXT
(
¤c
, 
t™ËLim™
, 
idx
, 
c
);

265 if((
csm
->
İtiÚs
&
U_TITLECASE_NO_BREAK_ADJUSTMENT
)==0 && 
UCASE_NONE
==
	`uÿ£_g‘Ty³
(csm->
c¥
, 
c
)) {

268 
t™ËS¹
=
t™ËLim™
;

269 if(
t™ËLim™
==
idx
) {

276 
	`U16_NEXT
(
¤c
, 
t™ËLim™
, 
idx
, 
c
);

277 if(
UCASE_NONE
!=
	`uÿ£_g‘Ty³
(
csm
->
c¥
, 
c
)) {

281 
Ëngth
=
t™ËS¹
-
´ev
;

282 if(
Ëngth
>0) {

283 if((
de¡Index
+
Ëngth
)<=
de¡C­ac™y
) {

284 
	`u´v_memıy
(
de¡
+
de¡Index
, 
¤c
+
´ev
, 
Ëngth
*
U_SIZEOF_UCHAR
);

286 
de¡Index
+=
Ëngth
;

290 if(
t™ËS¹
<
t™ËLim™
) {

292 
csc
->
ıS¹
=
t™ËS¹
;

293 
csc
->
ıLim™
=
t™ËLim™
;

294 
c
=
	`uÿ£_toFuÎT™Ë
(
csm
->
c¥
, c, 
utf16_ÿ£CÚ‹xtI‹¿tÜ
, 
csc
, &
s
, csm->
loÿË
, &csm->
locCache
);

295 
de¡Index
=
	`­³ndResuÉ
(
de¡
, de¡Index, 
de¡C­ac™y
, 
c
, 
s
);

298 iàĞ
t™ËS¹
+1 < 
idx
 &&

299 
	`uÿ£_g‘Ca£LoÿË
(
csm
->
loÿË
,&csm->
locCache
è=ğ
UCASE_LOC_DUTCH
 &&

300 Ğ
¤c
[
t™ËS¹
] =ğ(
UCh¬32
) 0x0049 || src[titleStart] == (UChar32) 0x0069 ) &&

301 Ğ
¤c
[
t™ËS¹
+1] =ğ(
UCh¬32
) 0x004A || src[titleStart+1] == (UChar32) 0x006A )) {

302 
c
=(
UCh¬32
) 0x004A;

303 
de¡Index
=
	`­³ndResuÉ
(
de¡
, de¡Index, 
de¡C­ac™y
, 
c
, 
s
);

304 
t™ËLim™
++;

308 if(
t™ËLim™
<
idx
) {

309 if((
csm
->
İtiÚs
&
U_TITLECASE_NO_LOWERCASE
)==0) {

311 
de¡Index
+=

312 
	`_ÿ£M­
(

313 
csm
, 
uÿ£_toFuÎLow”
,

314 
de¡
+
de¡Index
, 
de¡C­ac™y
-destIndex,

315 
¤c
, 
csc
,

316 
t™ËLim™
, 
idx
,

317 
pE¼ÜCode
);

320 
Ëngth
=
idx
-
t™ËLim™
;

321 if((
de¡Index
+
Ëngth
)<=
de¡C­ac™y
) {

322 
	`u´v_memıy
(
de¡
+
de¡Index
, 
¤c
+
t™ËLim™
, 
Ëngth
*
U_SIZEOF_UCHAR
);

324 
de¡Index
+=
Ëngth
;

330 
´ev
=
idx
;

333 if(
de¡Index
>
de¡C­ac™y
) {

334 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

336  
de¡Index
;

337 
	}
}

343 
U_CFUNC
 
št32_t


344 
	$u¡r_toLow”
(cÚ¡ 
UCa£Prİs
 *
c¥
,

345 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

346 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

347 cÚ¡ *
loÿË
,

348 
UE¼ÜCode
 *
pE¼ÜCode
) {

349 
UCa£M­
 
csm
={ 
NULL
 };

350 
UCa£CÚ‹xt
 
csc
={ 
NULL
 };

352 
csm
.
c¥
=csp;

353 
	`£tTempCa£M­
(&
csm
, 
loÿË
, 
pE¼ÜCode
);

354 
csc
.
p
=(*)
¤c
;

355 
csc
.
lim™
=
¤cL’gth
;

357  
	`_ÿ£M­
(&
csm
, 
uÿ£_toFuÎLow”
,

358 
de¡
, 
de¡C­ac™y
,

359 
¤c
, &
csc
, 0, 
¤cL’gth
,

360 
pE¼ÜCode
);

361 
	}
}

363 
U_CFUNC
 
št32_t


364 
	$u¡r_toUµ”
(cÚ¡ 
UCa£Prİs
 *
c¥
,

365 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

366 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

367 cÚ¡ *
loÿË
,

368 
UE¼ÜCode
 *
pE¼ÜCode
) {

369 
UCa£M­
 
csm
={ 
NULL
 };

370 
UCa£CÚ‹xt
 
csc
={ 
NULL
 };

372 
csm
.
c¥
=csp;

373 
	`£tTempCa£M­
(&
csm
, 
loÿË
, 
pE¼ÜCode
);

374 
csc
.
p
=(*)
¤c
;

375 
csc
.
lim™
=
¤cL’gth
;

377  
	`_ÿ£M­
(&
csm
, 
uÿ£_toFuÎUµ”
,

378 
de¡
, 
de¡C­ac™y
,

379 
¤c
, &
csc
, 0, 
¤cL’gth
,

380 
pE¼ÜCode
);

381 
	}
}

383 #ià!
UCONFIG_NO_BREAK_ITERATION


385 
U_CFUNC
 
št32_t


386 
	$u¡r_toT™Ë
(cÚ¡ 
UCa£Prİs
 *
c¥
,

387 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

388 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

389 
UB»akI‹¿tÜ
 *
t™ËI‹r
,

390 cÚ¡ *
loÿË
, 
ušt32_t
 
İtiÚs
,

391 
UE¼ÜCode
 *
pE¼ÜCode
) {

392 
UCa£M­
 
csm
={ 
NULL
 };

393 
UCa£CÚ‹xt
 
csc
={ 
NULL
 };

394 
št32_t
 
Ëngth
;

396 
csm
.
c¥
=csp;

397 
csm
.
™”
=
t™ËI‹r
;

398 
csm
.
İtiÚs
=options;

399 
	`£tTempCa£M­
(&
csm
, 
loÿË
, 
pE¼ÜCode
);

400 
csc
.
p
=(*)
¤c
;

401 
csc
.
lim™
=
¤cL’gth
;

403 
Ëngth
=
	`_toT™Ë
(&
csm
,

404 
de¡
, 
de¡C­ac™y
,

405 
¤c
, &
csc
, 
¤cL’gth
,

406 
pE¼ÜCode
);

407 if(
t™ËI‹r
==
NULL
 && 
csm
.
™”
!=NULL) {

408 
	`ubrk_şo£
(
csm
.
™”
);

410  
Ëngth
;

411 
	}
}

415 
U_CFUNC
 
št32_t


416 
	$u¡r_fŞdCa£
(cÚ¡ 
UCa£Prİs
 *
c¥
,

417 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

418 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

419 
ušt32_t
 
İtiÚs
,

420 
UE¼ÜCode
 *
pE¼ÜCode
) {

421 
št32_t
 
¤cIndex
, 
de¡Index
;

423 cÚ¡ 
UCh¬
 *
s
;

424 
UCh¬32
 
c
, 
c2
 = 0;

427 
¤cIndex
=
de¡Index
=0;

428 
¤cIndex
<
¤cL’gth
) {

429 
	`U16_NEXT
(
¤c
, 
¤cIndex
, 
¤cL’gth
, 
c
);

430 
c
=
	`uÿ£_toFuÎFŞdšg
(
c¥
, c, &
s
, 
İtiÚs
);

431 if((
de¡Index
<
de¡C­ac™y
è&& (
c
<0 ? (
c2
=~c)<=0xfffà: 
UCASE_MAX_STRING_LENGTH
<c && (c2=c)<=0xffff)) {

433 
de¡
[
de¡Index
++]=(
UCh¬
)
c2
;

435 
de¡Index
=
	`­³ndResuÉ
(
de¡
, de¡Index, 
de¡C­ac™y
, 
c
, 
s
);

439 if(
de¡Index
>
de¡C­ac™y
) {

440 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

442  
de¡Index
;

443 
	}
}

452 
št32_t


453 
	$ÿ£M­
(cÚ¡ 
UCa£M­
 *
csm
,

454 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

455 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

456 
št32_t
 
toWhichCa£
,

457 
UE¼ÜCode
 *
pE¼ÜCode
) {

458 
UCh¬
 
bufãr
[300];

459 
UCh¬
 *
‹mp
;

461 
št32_t
 
de¡L’gth
;

464 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

467 ifĞ
de¡C­ac™y
<0 ||

468 (
de¡
==
NULL
 && 
de¡C­ac™y
>0) ||

469 
¤c
==
NULL
 ||

470 
¤cL’gth
<-1

472 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

477 if(
¤cL’gth
==-1) {

478 
¤cL’gth
=
	`u_¡¾’
(
¤c
);

482 ifĞ
de¡
!=
NULL
 &&

483 ((
¤c
>=
de¡
 && src<(de¡+
de¡C­ac™y
)) ||

484 (
de¡
>=
¤c
 && de¡<(¤c+
¤cL’gth
)))

487 if(
de¡C­ac™y
<=((
bufãr
)/
U_SIZEOF_UCHAR
)) {

489 
‹mp
=
bufãr
;

492 
‹mp
=(
UCh¬
 *)
	`u´v_m®loc
(
de¡C­ac™y
*
U_SIZEOF_UCHAR
);

493 if(
‹mp
==
NULL
) {

494 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

499 
‹mp
=
de¡
;

502 
de¡L’gth
=0;

504 if(
toWhichCa£
==
FOLD_CASE
) {

505 
de¡L’gth
=
	`u¡r_fŞdCa£
(
csm
->
c¥
, 
‹mp
, 
de¡C­ac™y
, 
¤c
, 
¤cL’gth
,

506 
csm
->
İtiÚs
, 
pE¼ÜCode
);

508 
UCa£CÚ‹xt
 
csc
={ 
NULL
 };

510 
csc
.
p
=(*)
¤c
;

511 
csc
.
lim™
=
¤cL’gth
;

513 if(
toWhichCa£
==
TO_LOWER
) {

514 
de¡L’gth
=
	`_ÿ£M­
(
csm
, 
uÿ£_toFuÎLow”
,

515 
‹mp
, 
de¡C­ac™y
,

516 
¤c
, &
csc
,

517 0, 
¤cL’gth
,

518 
pE¼ÜCode
);

519 } if(
toWhichCa£
==
TO_UPPER
) {

520 
de¡L’gth
=
	`_ÿ£M­
(
csm
, 
uÿ£_toFuÎUµ”
,

521 
‹mp
, 
de¡C­ac™y
,

522 
¤c
, &
csc
,

523 0, 
¤cL’gth
,

524 
pE¼ÜCode
);

526 #ià
UCONFIG_NO_BREAK_ITERATION


527 *
pE¼ÜCode
=
U_UNSUPPORTED_ERROR
;

530 
de¡L’gth
=
	`_toT™Ë
((
UCa£M­
 *)
csm
, 
‹mp
, 
de¡C­ac™y
,

531 
¤c
, &
csc
, 
¤cL’gth
,

532 
pE¼ÜCode
);

536 if(
‹mp
!=
de¡
) {

538 if(
de¡L’gth
>0) {

539 
št32_t
 
cİyL’gth
ğ
de¡L’gth
<=
de¡C­ac™y
 ? destLength : destCapacity;

540 if(
cİyL’gth
>0) {

541 
	`u´v_memmove
(
de¡
, 
‹mp
, 
cİyL’gth
*
U_SIZEOF_UCHAR
);

544 if(
‹mp
!=
bufãr
) {

545 
	`u´v_ä“
(
‹mp
);

549  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
de¡L’gth
, 
pE¼ÜCode
);

550 
	}
}

554 
U_CAPI
 
št32_t
 
U_EXPORT2


555 
	$u_¡rToLow”
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

556 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

557 cÚ¡ *
loÿË
,

558 
UE¼ÜCode
 *
pE¼ÜCode
) {

559 
UCa£M­
 
csm
={ 
NULL
 };

560 
	`£tTempCa£M­
(&
csm
, 
loÿË
, 
pE¼ÜCode
);

561  
	`ÿ£M­
(&
csm
,

562 
de¡
, 
de¡C­ac™y
,

563 
¤c
, 
¤cL’gth
,

564 
TO_LOWER
, 
pE¼ÜCode
);

565 
	}
}

567 
U_CAPI
 
št32_t
 
U_EXPORT2


568 
	$u_¡rToUµ”
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

569 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

570 cÚ¡ *
loÿË
,

571 
UE¼ÜCode
 *
pE¼ÜCode
) {

572 
UCa£M­
 
csm
={ 
NULL
 };

573 
	`£tTempCa£M­
(&
csm
, 
loÿË
, 
pE¼ÜCode
);

574  
	`ÿ£M­
(&
csm
,

575 
de¡
, 
de¡C­ac™y
,

576 
¤c
, 
¤cL’gth
,

577 
TO_UPPER
, 
pE¼ÜCode
);

578 
	}
}

580 #ià!
UCONFIG_NO_BREAK_ITERATION


582 
U_CAPI
 
št32_t
 
U_EXPORT2


583 
	$u_¡rToT™Ë
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

584 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

585 
UB»akI‹¿tÜ
 *
t™ËI‹r
,

586 cÚ¡ *
loÿË
,

587 
UE¼ÜCode
 *
pE¼ÜCode
) {

588 
UCa£M­
 
csm
={ 
NULL
 };

589 
št32_t
 
Ëngth
;

591 
csm
.
™”
=
t™ËI‹r
;

592 
	`£tTempCa£M­
(&
csm
, 
loÿË
, 
pE¼ÜCode
);

593 
Ëngth
=
	`ÿ£M­
(&
csm
,

594 
de¡
, 
de¡C­ac™y
,

595 
¤c
, 
¤cL’gth
,

596 
TO_TITLE
, 
pE¼ÜCode
);

597 if(
t™ËI‹r
==
NULL
 && 
csm
.
™”
!=NULL) {

598 
	`ubrk_şo£
(
csm
.
™”
);

600  
Ëngth
;

601 
	}
}

603 
U_CAPI
 
št32_t
 
U_EXPORT2


604 
	$uÿ£m­_toT™Ë
(
UCa£M­
 *
csm
,

605 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

606 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

607 
UE¼ÜCode
 *
pE¼ÜCode
) {

608  
	`ÿ£M­
(
csm
,

609 
de¡
, 
de¡C­ac™y
,

610 
¤c
, 
¤cL’gth
,

611 
TO_TITLE
, 
pE¼ÜCode
);

612 
	}
}

616 
U_CAPI
 
št32_t
 
U_EXPORT2


617 
	$u_¡rFŞdCa£
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

618 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
¤cL’gth
,

619 
ušt32_t
 
İtiÚs
,

620 
UE¼ÜCode
 *
pE¼ÜCode
) {

621 
UCa£M­
 
csm
={ 
NULL
 };

622 
csm
.
c¥
=
	`uÿ£_g‘SšgËtÚ
();

623 
csm
.
İtiÚs
=options;

624  
	`ÿ£M­
(&
csm
,

625 
de¡
, 
de¡C­ac™y
,

626 
¤c
, 
¤cL’gth
,

627 
FOLD_CASE
, 
pE¼ÜCode
);

628 
	}
}

642 
	sCmpEquivLev–
 {

643 cÚ¡ 
UCh¬
 *
	m¡¬t
, *
	ms
, *
	mlim™
;

645 
CmpEquivLev–
 
	tCmpEquivLev–
;

648 
U_CFUNC
 
št32_t


649 
	$u_¡rcmpFŞd
(cÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

650 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

651 
ušt32_t
 
İtiÚs
,

652 
UE¼ÜCode
 *
pE¼ÜCode
) {

653 cÚ¡ 
UCa£Prİs
 *
c¥
;

656 cÚ¡ 
UCh¬
 *
¡¬t1
, *
¡¬t2
, *
lim™1
, *
lim™2
;

659 cÚ¡ 
UCh¬
 *
p
;

660 
št32_t
 
Ëngth
;

663 
CmpEquivLev–
 
¡ack1
[2], 
¡ack2
[2];

666 
UCh¬
 
fŞd1
[
UCASE_MAX_STRING_LENGTH
+1], 
fŞd2
[UCASE_MAX_STRING_LENGTH+1];

669 
št32_t
 
Ëv–1
, 
Ëv–2
;

672 
UCh¬32
 
c1
, 
c2
, 
ı1
, 
ı2
;

680 
c¥
=
	`uÿ£_g‘SšgËtÚ
();

681 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

686 
¡¬t1
=
s1
;

687 if(
Ëngth1
==-1) {

688 
lim™1
=
NULL
;

690 
lim™1
=
s1
+
Ëngth1
;

693 
¡¬t2
=
s2
;

694 if(
Ëngth2
==-1) {

695 
lim™2
=
NULL
;

697 
lim™2
=
s2
+
Ëngth2
;

700 
Ëv–1
=
Ëv–2
=0;

701 
c1
=
c2
=-1;

710 if(
c1
<0) {

713 if(
s1
==
lim™1
 || ((
c1
=*s1)==0 && (lim™1==
NULL
 || (
İtiÚs
&
_STRNCMP_STYLE
)))) {

714 if(
Ëv–1
==0) {

715 
c1
=-1;

719 ++
s1
;

725 --
Ëv–1
;

726 
¡¬t1
=
¡ack1
[
Ëv–1
].
¡¬t
;

727 } 
¡¬t1
==
NULL
);

728 
s1
=
¡ack1
[
Ëv–1
].
s
;

729 
lim™1
=
¡ack1
[
Ëv–1
].
lim™
;

733 if(
c2
<0) {

736 if(
s2
==
lim™2
 || ((
c2
=*s2)==0 && (lim™2==
NULL
 || (
İtiÚs
&
_STRNCMP_STYLE
)))) {

737 if(
Ëv–2
==0) {

738 
c2
=-1;

742 ++
s2
;

748 --
Ëv–2
;

749 
¡¬t2
=
¡ack2
[
Ëv–2
].
¡¬t
;

750 } 
¡¬t2
==
NULL
);

751 
s2
=
¡ack2
[
Ëv–2
].
s
;

752 
lim™2
=
¡ack2
[
Ëv–2
].
lim™
;

760 if(
c1
==
c2
) {

761 if(
c1
<0) {

764 
c1
=
c2
=-1;

766 } if(
c1
<0) {

768 } if(
c2
<0) {

774 
ı1
=
c1
;

775 if(
	`U_IS_SURROGATE
(
c1
)) {

776 
UCh¬
 
c
;

778 if(
	`U_IS_SURROGATE_LEAD
(
c1
)) {

779 if(
s1
!=
lim™1
 && 
	`U16_IS_TRAIL
(
c
=*s1)) {

781 
ı1
=
	`U16_GET_SUPPLEMENTARY
(
c1
, 
c
);

784 if(
¡¬t1
<=(
s1
-2è&& 
	`U16_IS_LEAD
(
c
=*(s1-2))) {

785 
ı1
=
	`U16_GET_SUPPLEMENTARY
(
c
, 
c1
);

790 
ı2
=
c2
;

791 if(
	`U_IS_SURROGATE
(
c2
)) {

792 
UCh¬
 
c
;

794 if(
	`U_IS_SURROGATE_LEAD
(
c2
)) {

795 if(
s2
!=
lim™2
 && 
	`U16_IS_TRAIL
(
c
=*s2)) {

797 
ı2
=
	`U16_GET_SUPPLEMENTARY
(
c2
, 
c
);

800 if(
¡¬t2
<=(
s2
-2è&& 
	`U16_IS_LEAD
(
c
=*(s2-2))) {

801 
ı2
=
	`U16_GET_SUPPLEMENTARY
(
c
, 
c2
);

811 ifĞ
Ëv–1
==0 &&

812 (
Ëngth
=
	`uÿ£_toFuÎFŞdšg
(
c¥
, (
UCh¬32
)
ı1
, &
p
, 
İtiÚs
))>=0

815 if(
	`U_IS_SURROGATE
(
c1
)) {

816 if(
	`U_IS_SURROGATE_LEAD
(
c1
)) {

818 ++
s1
;

827 --
s2
;

828 
c2
=*(
s2
-1);

833 
¡ack1
[0].
¡¬t
=
¡¬t1
;

834 
¡ack1
[0].
s
=
s1
;

835 
¡ack1
[0].
lim™
=
lim™1
;

836 ++
Ëv–1
;

839 if(
Ëngth
<=
UCASE_MAX_STRING_LENGTH
) {

840 
	`u_memıy
(
fŞd1
, 
p
, 
Ëngth
);

842 
št32_t
 
i
=0;

843 
	`U16_APPEND_UNSAFE
(
fŞd1
, 
i
, 
Ëngth
);

844 
Ëngth
=
i
;

848 
¡¬t1
=
s1
=
fŞd1
;

849 
lim™1
=
fŞd1
+
Ëngth
;

852 
c1
=-1;

856 ifĞ
Ëv–2
==0 &&

857 (
Ëngth
=
	`uÿ£_toFuÎFŞdšg
(
c¥
, (
UCh¬32
)
ı2
, &
p
, 
İtiÚs
))>=0

860 if(
	`U_IS_SURROGATE
(
c2
)) {

861 if(
	`U_IS_SURROGATE_LEAD
(
c2
)) {

863 ++
s2
;

872 --
s1
;

873 
c1
=*(
s1
-1);

878 
¡ack2
[0].
¡¬t
=
¡¬t2
;

879 
¡ack2
[0].
s
=
s2
;

880 
¡ack2
[0].
lim™
=
lim™2
;

881 ++
Ëv–2
;

884 if(
Ëngth
<=
UCASE_MAX_STRING_LENGTH
) {

885 
	`u_memıy
(
fŞd2
, 
p
, 
Ëngth
);

887 
št32_t
 
i
=0;

888 
	`U16_APPEND_UNSAFE
(
fŞd2
, 
i
, 
Ëngth
);

889 
Ëngth
=
i
;

893 
¡¬t2
=
s2
=
fŞd2
;

894 
lim™2
=
fŞd2
+
Ëngth
;

897 
c2
=-1;

918 if(
c1
>=0xd800 && 
c2
>=0xd800 && (
İtiÚs
&
U_COMPARE_CODE_POINT_ORDER
)) {

921 (
c1
<=0xdbfà&& 
s1
!=
lim™1
 && 
	`U16_IS_TRAIL
(*s1)) ||

922 (
	`U16_IS_TRAIL
(
c1
è&& 
¡¬t1
!=(
s1
-1è&& 
	`U16_IS_LEAD
(*(s1-2)))

927 
c1
-=0x2800;

931 (
c2
<=0xdbfà&& 
s2
!=
lim™2
 && 
	`U16_IS_TRAIL
(*s2)) ||

932 (
	`U16_IS_TRAIL
(
c2
è&& 
¡¬t2
!=(
s2
-1è&& 
	`U16_IS_LEAD
(*(s2-2)))

937 
c2
-=0x2800;

941  
c1
-
c2
;

943 
	}
}

947 
U_CAPI
 
št32_t
 
U_EXPORT2


948 
	$u_¡rCa£Com·»
(cÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

949 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

950 
ušt32_t
 
İtiÚs
,

951 
UE¼ÜCode
 *
pE¼ÜCode
) {

953 if(
pE¼ÜCode
==0 || 
	`U_FAILURE
(*pErrorCode)) {

956 if(
s1
==
NULL
 || 
Ëngth1
<-1 || 
s2
==NULL || 
Ëngth2
<-1) {

957 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

960  
	`u_¡rcmpFŞd
(
s1
, 
Ëngth1
, 
s2
, 
Ëngth2
,

961 
İtiÚs
|
U_COMPARE_IGNORE_CASE
,

962 
pE¼ÜCode
);

963 
	}
}

965 
U_CAPI
 
št32_t
 
U_EXPORT2


966 
	$u_¡rÿ£cmp
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
, 
ušt32_t
 
İtiÚs
) {

967 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

968  
	`u_¡rcmpFŞd
(
s1
, -1, 
s2
, -1,

969 
İtiÚs
|
U_COMPARE_IGNORE_CASE
,

970 &
”rÜCode
);

971 
	}
}

973 
U_CAPI
 
št32_t
 
U_EXPORT2


974 
	$u_memÿ£cmp
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
, 
št32_t
 
Ëngth
, 
ušt32_t
 
İtiÚs
) {

975 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

976  
	`u_¡rcmpFŞd
(
s1
, 
Ëngth
, 
s2
,†ength,

977 
İtiÚs
|
U_COMPARE_IGNORE_CASE
,

978 &
”rÜCode
);

979 
	}
}

981 
U_CAPI
 
št32_t
 
U_EXPORT2


982 
	$u_¡ºÿ£cmp
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
, 
št32_t
 
n
, 
ušt32_t
 
İtiÚs
) {

983 
UE¼ÜCode
 
”rÜCode
=
U_ZERO_ERROR
;

984  
	`u_¡rcmpFŞd
(
s1
, 
n
, 
s2
,‚,

985 
İtiÚs
|(
U_COMPARE_IGNORE_CASE
|
_STRNCMP_STYLE
),

986 &
”rÜCode
);

987 
	}
}

	@ustrenum.cpp

11 
	~<ty³šfo
>

13 
	~"unicode/u¡ršg.h
"

14 
	~"unicode/¡»num.h
"

15 
	~"unicode/put.h
"

16 
	~"u’umimp.h
"

17 
	~"u¡»num.h
"

18 
	~"c¡ršg.h
"

19 
	~"cmemÜy.h
"

20 
	~"uas£¹.h
"

22 
U_NAMESPACE_BEGIN


25 
	gSŒšgEnum”©iÚ
::
	$SŒšgEnum”©iÚ
()

26 : 
	`ch¬s
(
ch¬sBufãr
), 
	`ch¬sC­ac™y
((charsBuffer)) {

27 
	}
}

29 
	gSŒšgEnum”©iÚ
::~
	$SŒšgEnum”©iÚ
() {

30 ià(
ch¬s
 !ğ
NULL
 && ch¬ !ğ
ch¬sBufãr
) {

31 
	`u´v_ä“
(
ch¬s
);

33 
	}
}

36 
SŒšgEnum”©iÚ
 *

37 
	gSŒšgEnum”©iÚ
::
	$şÚe
() const {

38  
NULL
;

39 
	}
}

42 
	gSŒšgEnum”©iÚ
::
	$Ãxt
(
št32_t
 *
»suÉL’gth
, 
UE¼ÜCode
 &
¡©us
) {

43 cÚ¡ 
UnicodeSŒšg
 *
s
=
	`¢ext
(
¡©us
);

44 if(
s
!=
NULL
) {

45 
uni¡r
=*
s
;

46 
	`’su»Ch¬sC­ac™y
(
uni¡r
.
	`Ëngth
()+1, 
¡©us
);

47 if(
	`U_SUCCESS
(
¡©us
)) {

48 if(
»suÉL’gth
!=
NULL
) {

49 *
»suÉL’gth
=
uni¡r
.
	`Ëngth
();

51 
uni¡r
.
	`exŒaù
(0, 
INT32_MAX
, 
ch¬s
, 
ch¬sC­ac™y
, 
US_INV
);

52  
ch¬s
;

56  
NULL
;

57 
	}
}

59 cÚ¡ 
UCh¬
 *

60 
	gSŒšgEnum”©iÚ
::
	$uÃxt
(
št32_t
 *
»suÉL’gth
, 
UE¼ÜCode
 &
¡©us
) {

61 cÚ¡ 
UnicodeSŒšg
 *
s
=
	`¢ext
(
¡©us
);

62 if(
s
!=
NULL
) {

63 
uni¡r
=*
s
;

64 if(
	`U_SUCCESS
(
¡©us
)) {

65 if(
»suÉL’gth
!=
NULL
) {

66 *
»suÉL’gth
=
uni¡r
.
	`Ëngth
();

68  
uni¡r
.
	`g‘T”mš©edBufãr
();

72  
NULL
;

73 
	}
}

76 
	gSŒšgEnum”©iÚ
::
	$’su»Ch¬sC­ac™y
(
št32_t
 
ÿ·c™y
, 
UE¼ÜCode
 &
¡©us
) {

77 if(
	`U_SUCCESS
(
¡©us
è&& 
ÿ·c™y
>
ch¬sC­ac™y
) {

78 if(
ÿ·c™y
<(
ch¬sC­ac™y
+charsCapacity/2)) {

80 
ÿ·c™y
=
ch¬sC­ac™y
+charsCapacity/2;

82 if(
ch¬s
!=
ch¬sBufãr
) {

83 
	`u´v_ä“
(
ch¬s
);

85 
ch¬s
=(*)
	`u´v_m®loc
(
ÿ·c™y
);

86 if(
ch¬s
==
NULL
) {

87 
ch¬s
=
ch¬sBufãr
;

88 
ch¬sC­ac™y
=(
ch¬sBufãr
);

89 
¡©us
=
U_MEMORY_ALLOCATION_ERROR
;

91 
ch¬sC­ac™y
=
ÿ·c™y
;

94 
	}
}

96 
UnicodeSŒšg
 *

97 
	gSŒšgEnum”©iÚ
::
	$£tCh¬s
(cÚ¡ *
s
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 &
¡©us
) {

98 if(
	`U_SUCCESS
(
¡©us
è&& 
s
!=
NULL
) {

99 if(
Ëngth
<0) {

100 
Ëngth
=(
št32_t
)
	`u´v_¡¾’
(
s
);

103 
UCh¬
 *
bufãr
=
uni¡r
.
	`g‘Bufãr
(
Ëngth
+1);

104 if(
bufãr
!=
NULL
) {

105 
	`u_ch¬sToUCh¬s
(
s
, 
bufãr
, 
Ëngth
);

106 
bufãr
[
Ëngth
]=0;

107 
uni¡r
.
	`»Ëa£Bufãr
(
Ëngth
);

108  &
uni¡r
;

110 
¡©us
=
U_MEMORY_ALLOCATION_ERROR
;

114  
NULL
;

115 
	}
}

116 
UBoŞ


117 
	gSŒšgEnum”©iÚ
::
İ”©Ü
==(cÚ¡ 
SŒšgEnum”©iÚ
& 
th©
)const {

118  
ty³id
(*
this
è=ğty³id(
th©
);

122 
UBoŞ


123 
	gSŒšgEnum”©iÚ
::
İ”©Ü
!=(cÚ¡ 
SŒšgEnum”©iÚ
& 
th©
)const {

124  !
İ”©Ü
==(
th©
);

129 
	gUSŒšgEnum”©iÚ
::
	$USŒšgEnum”©iÚ
(
UEnum”©iÚ
* 
_u’um
) :

130 
	$u’um
(
_u’um
) {

131 
	`U_ASSERT
(
_u’um
 != 0);

132 
	}
}

134 
	gUSŒšgEnum”©iÚ
::~
	$USŒšgEnum”©iÚ
() {

135 
	`u’um_şo£
(
u’um
);

136 
	}
}

138 
št32_t
 
	gUSŒšgEnum”©iÚ
::
	$couÁ
(
UE¼ÜCode
& 
¡©us
) const {

139  
	`u’um_couÁ
(
u’um
, &
¡©us
);

140 
	}
}

142 cÚ¡ 
UnicodeSŒšg
* 
	gUSŒšgEnum”©iÚ
::
	$¢ext
(
UE¼ÜCode
& 
¡©us
) {

143 
št32_t
 
Ëngth
;

144 cÚ¡ 
UCh¬
* 
¡r
 = 
	`u’um_uÃxt
(
u’um
, &
Ëngth
, &
¡©us
);

145 ià(
¡r
 =ğ0 || 
	`U_FAILURE
(
¡©us
)) {

148  &
uni¡r
.
	`£tTo
(
¡r
, 
Ëngth
);

149 
	}
}

151 
	gUSŒšgEnum”©iÚ
::
	$»£t
(
UE¼ÜCode
& 
¡©us
) {

152 
	`u’um_»£t
(
u’um
, &
¡©us
);

153 
	}
}

155 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
USŒšgEnum”©iÚ
)

156 
U_NAMESPACE_END


160 
	#THIS
(
’
è((
U_NAMESPACE_QUALIFIER
 
SŒšgEnum”©iÚ
*)Ón->
cÚ‹xt
))

	)

162 
U_CDECL_BEGIN


167 
U_CALLCONV


168 
	$u¡»num_şo£
(
UEnum”©iÚ
* 
’
) {

169 
d–‘e
 
	`THIS
(
’
);

170 
	`u´v_ä“
(
’
);

171 
	}
}

176 
št32_t
 
U_CALLCONV


177 
	$u¡»num_couÁ
(
UEnum”©iÚ
* 
’
,

178 
UE¼ÜCode
* 
ec
)

180  
	`THIS
(
’
)->
	`couÁ
(*
ec
);

181 
	}
}

186 cÚ¡ 
UCh¬
* 
U_CALLCONV


187 
	$u¡»num_uÃxt
(
UEnum”©iÚ
* 
’
,

188 
št32_t
* 
»suÉL’gth
,

189 
UE¼ÜCode
* 
ec
)

191  
	`THIS
(
’
)->
	`uÃxt
(
»suÉL’gth
, *
ec
);

192 
	}
}

197 cÚ¡ * 
U_CALLCONV


198 
	$u¡»num_Ãxt
(
UEnum”©iÚ
* 
’
,

199 
št32_t
* 
»suÉL’gth
,

200 
UE¼ÜCode
* 
ec
)

202  
	`THIS
(
’
)->
	`Ãxt
(
»suÉL’gth
, *
ec
);

203 
	}
}

208 
U_CALLCONV


209 
	$u¡»num_»£t
(
UEnum”©iÚ
* 
’
,

210 
UE¼ÜCode
* 
ec
)

212 
	`THIS
(
’
)->
	`»£t
(*
ec
);

213 
	}
}

219 cÚ¡ 
UEnum”©iÚ
 
	gUSTRENUM_VT
 = {

220 
NULL
,

221 
NULL
,

222 
u¡»num_şo£
,

223 
u¡»num_couÁ
,

224 
u¡»num_uÃxt
,

225 
u¡»num_Ãxt
,

226 
u¡»num_»£t


229 
U_CDECL_END


236 
U_CAPI
 
UEnum”©iÚ
* 
U_EXPORT2


237 
	$u’um_İ’FromSŒšgEnum”©iÚ
(
U_NAMESPACE_QUALIFIER
 
SŒšgEnum”©iÚ
* 
adİ‹d
, 
UE¼ÜCode
* 
ec
) {

238 
UEnum”©iÚ
* 
»suÉ
 = 
NULL
;

239 ià(
	`U_SUCCESS
(*
ec
è&& 
adİ‹d
 !ğ
NULL
) {

240 
»suÉ
 = (
UEnum”©iÚ
*è
	`u´v_m®loc
((UEnumeration));

241 ià(
»suÉ
 =ğ
NULL
) {

242 *
ec
 = 
U_MEMORY_ALLOCATION_ERROR
;

244 
	`u´v_memıy
(
»suÉ
, &
USTRENUM_VT
, (USTRENUM_VT));

245 
»suÉ
->
cÚ‹xt
 = 
adİ‹d
;

248 ià(
»suÉ
 =ğ
NULL
) {

249 
d–‘e
 
adİ‹d
;

251  
»suÉ
;

252 
	}
}

256 
U_CDECL_BEGIN


258 
	sUCh¬SŒšgEnum”©iÚ
 {

259 
UEnum”©iÚ
 
	mu’um
;

260 
št32_t
 
	mšdex
, 
	mcouÁ
;

261 } 
	tUCh¬SŒšgEnum”©iÚ
;

263 
U_CALLCONV


264 
	$uch¬¡»num_şo£
(
UEnum”©iÚ
* 
’
) {

265 
	`u´v_ä“
(
’
);

266 
	}
}

268 
št32_t
 
U_CALLCONV


269 
	$uch¬¡»num_couÁ
(
UEnum”©iÚ
* 
’
,

270 
UE¼ÜCode
* ) {

271  ((
UCh¬SŒšgEnum”©iÚ
*)
’
)->
couÁ
;

272 
	}
}

274 cÚ¡ * 
U_CALLCONV


275 
	$uch¬¡»num_Ãxt
(
UEnum”©iÚ
* 
’
,

276 
št32_t
* 
»suÉL’gth
,

277 
UE¼ÜCode
* ) {

278 
UCh¬SŒšgEnum”©iÚ
 *
e
 = (UCh¬SŒšgEnum”©iÚ*è
’
;

279 ià(
e
->
šdex
 >ğe->
couÁ
) {

280  
NULL
;

282 cÚ¡ * 
»suÉ
 = ((cÚ¡ **)
e
->
u’um
.
cÚ‹xt
)[e->
šdex
++];

283 ià(
»suÉL’gth
) {

284 *
»suÉL’gth
 = (
št32_t
)
	`u´v_¡¾’
(
»suÉ
);

286  
»suÉ
;

287 
	}
}

289 
U_CALLCONV


290 
	$uch¬¡»num_»£t
(
UEnum”©iÚ
* 
’
,

291 
UE¼ÜCode
* ) {

292 ((
UCh¬SŒšgEnum”©iÚ
*)
’
)->
šdex
 = 0;

293 
	}
}

295 cÚ¡ 
UEnum”©iÚ
 
	gUCHARSTRENUM_VT
 = {

296 
NULL
,

297 
NULL
,

298 
uch¬¡»num_şo£
,

299 
uch¬¡»num_couÁ
,

300 
u’um_uÃxtDeçuÉ
,

301 
uch¬¡»num_Ãxt
,

302 
uch¬¡»num_»£t


305 
U_CDECL_END


307 
U_CAPI
 
UEnum”©iÚ
* 
U_EXPORT2


308 
	$u’um_İ’Ch¬SŒšgsEnum”©iÚ
(cÚ¡ * cÚ¡* 
¡ršgs
, 
št32_t
 
couÁ
,

309 
UE¼ÜCode
* 
ec
) {

310 
UCh¬SŒšgEnum”©iÚ
* 
»suÉ
 = 
NULL
;

311 ià(
	`U_SUCCESS
(*
ec
è&& 
couÁ
 >ğ0 && (couÁ =ğ0 || 
¡ršgs
 != 0)) {

312 
»suÉ
 = (
UCh¬SŒšgEnum”©iÚ
*è
	`u´v_m®loc
((UCharStringEnumeration));

313 ià(
»suÉ
 =ğ
NULL
) {

314 *
ec
 = 
U_MEMORY_ALLOCATION_ERROR
;

316 
	`U_ASSERT
((*)
»suÉ
==(*)(&»suÉ->
u’um
));

317 
	`u´v_memıy
(
»suÉ
, &
UCHARSTRENUM_VT
, (UCHARSTRENUM_VT));

318 
»suÉ
->
u’um
.
cÚ‹xt
 = (*)
¡ršgs
;

319 
»suÉ
->
šdex
 = 0;

320 
»suÉ
->
couÁ
 = count;

323  (
UEnum”©iÚ
*è
»suÉ
;

324 
	}
}

	@ustrenum.h

11 #iâdeà
_USTRENUM_H_


12 
	#_USTRENUM_H_


	)

14 
	~"unicode/u’um.h
"

15 
	~"unicode/¡»num.h
"

22 
U_CAPI
 
UEnum”©iÚ
* 
U_EXPORT2


23 
u’um_İ’Ch¬SŒšgsEnum”©iÚ
(cÚ¡ * cÚ¡* 
¡ršgs
, 
št32_t
 
couÁ
,

24 
UE¼ÜCode
* 
ec
);

27 
U_NAMESPACE_BEGIN


33 şas 
	cU_COMMON_API
 
	mUSŒšgEnum”©iÚ
 : 
public
 
SŒšgEnum”©iÚ
 {

35 
public
:

44 
USŒšgEnum”©iÚ
(
UEnum”©iÚ
* 
u’um
);

50 
	mvœtu®
 ~
USŒšgEnum”©iÚ
();

57 
vœtu®
 
št32_t
 
	$couÁ
(
UE¼ÜCode
& 
¡©us
) const;

65 
vœtu®
 cÚ¡ 
UnicodeSŒšg
* 
	`¢ext
(
UE¼ÜCode
& 
¡©us
);

71 
vœtu®
 
	`»£t
(
UE¼ÜCode
& 
¡©us
);

76 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

81 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

83 
´iv©e
:

84 
UEnum”©iÚ
 *
u’um
;

87 
U_NAMESPACE_END


	@ustrfmt.c

8 
	~"c¡ršg.h
"

9 
	~"u¡rfmt.h
"

27 
U_CAPI
 
št32_t
 
U_EXPORT2


28 
	$u´v_™ou
 (
UCh¬
 * 
bufãr
, 
št32_t
 
ÿ·c™y
,

29 
ušt32_t
 
i
, ušt32_ˆ
¿dix
, 
št32_t
 
mšwidth
)

31 
št32_t
 
Ëngth
 = 0;

32 
dig™
;

33 
št32_t
 
j
;

34 
UCh¬
 
‹mp
;

37 
dig™
 = ()(
i
 % 
¿dix
);

38 
bufãr
[
Ëngth
++]=(
UCh¬
)(
dig™
<=9?(0x0030+digit):(0x0030+digit+7));

39 
i
=i/
¿dix
;

40 } 
i
 && 
Ëngth
<
ÿ·c™y
);

42 
Ëngth
 < 
mšwidth
){

43 
bufãr
[
Ëngth
++] = (
UCh¬
) 0x0030;

46 if(
Ëngth
<
ÿ·c™y
){

47 
bufãr
[
Ëngth
] = (
UCh¬
) 0x0000;

51 
j
 = 0; j < (
Ëngth
 / 2); j++){

52 
‹mp
 = 
bufãr
[(
Ëngth
-1è- 
j
];

53 
bufãr
[(
Ëngth
-1è- 
j
] = buffer[j];

54 
bufãr
[
j
] = 
‹mp
;

56  
Ëngth
;

57 
	}
}

	@ustrfmt.h

8 #iâdeà
USTRFMT_H


9 
	#USTRFMT_H


	)

11 
	~"unicode/uty³s.h
"

13 
U_CAPI
 
št32_t
 
U_EXPORT2


14 
u´v_™ou
 (
UCh¬
 * 
bufãr
, 
št32_t
 
ÿ·c™y
, 
ušt32_t
 
i
, ušt32_ˆ
¿dix
, iÁ32_ˆ
mšwidth
);

	@ustring.c

18 
	~"unicode/uty³s.h
"

19 
	~"unicode/put.h
"

20 
	~"unicode/u¡ršg.h
"

21 
	~"c¡ršg.h
"

22 
	~"cwch¬.h
"

23 
	~"cmemÜy.h
"

24 
	~"u¡r_imp.h
"

29 
	#U_BMP_MAX
 0xffff

	)

38 
U_INLINE
 
UBoŞ


39 
	$isM©chAtCPBound¬y
(cÚ¡ 
UCh¬
 *
¡¬t
, cÚ¡ UCh¬ *
m©ch
, cÚ¡ UCh¬ *
m©chLim™
, cÚ¡ UCh¬ *
lim™
) {

40 if(
	`U16_IS_TRAIL
(*
m©ch
è&& 
¡¬t
!=m©ch && 
	`U16_IS_LEAD
(*(match-1))) {

42  
FALSE
;

44 if(
	`U16_IS_LEAD
(*(
m©chLim™
-1)è&& 
m©ch
!=
lim™
 && 
	`U16_IS_TRAIL
(*matchLimit)) {

46  
FALSE
;

48  
TRUE
;

49 
	}
}

51 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


52 
	$u_¡rFšdFœ¡
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
,

53 cÚ¡ 
UCh¬
 *
sub
, 
št32_t
 
subL’gth
) {

54 cÚ¡ 
UCh¬
 *
¡¬t
, *
p
, *
q
, *
subLim™
;

55 
UCh¬
 
c
, 
cs
, 
cq
;

57 if(
sub
==
NULL
 || 
subL’gth
<-1) {

58  (
UCh¬
 *)
s
;

60 if(
s
==
NULL
 || 
Ëngth
<-1) {

61  
NULL
;

64 
¡¬t
=
s
;

66 if(
Ëngth
<0 && 
subL’gth
<0) {

68 if((
cs
=*
sub
++)==0) {

69  (
UCh¬
 *)
s
;

71 if(*
sub
==0 && !
	`U16_IS_SURROGATE
(
cs
)) {

73  
	`u_¡rchr
(
s
, 
cs
);

76 (
c
=*
s
++)!=0) {

77 if(
c
==
cs
) {

79 
p
=
s
;

80 
q
=
sub
;

82 if((
cq
=*
q
)==0) {

83 if(
	`isM©chAtCPBound¬y
(
¡¬t
, 
s
-1, 
p
, 
NULL
)) {

84  (
UCh¬
 *)(
s
-1);

89 if((
c
=*
p
)==0) {

90  
NULL
;

92 if(
c
!=
cq
) {

95 ++
p
;

96 ++
q
;

102  
NULL
;

105 if(
subL’gth
<0) {

106 
subL’gth
=
	`u_¡¾’
(
sub
);

108 if(
subL’gth
==0) {

109  (
UCh¬
 *)
s
;

113 
cs
=*
sub
++;

114 --
subL’gth
;

115 
subLim™
=
sub
+
subL’gth
;

117 if(
subL’gth
==0 && !
	`U16_IS_SURROGATE
(
cs
)) {

119  
Ëngth
<0 ? 
	`u_¡rchr
(
s
, 
cs
è: 
	`u_memchr
(s, cs,†ength);

122 if(
Ëngth
<0) {

124 (
c
=*
s
++)!=0) {

125 if(
c
==
cs
) {

127 
p
=
s
;

128 
q
=
sub
;

130 if(
q
==
subLim™
) {

131 if(
	`isM©chAtCPBound¬y
(
¡¬t
, 
s
-1, 
p
, 
NULL
)) {

132  (
UCh¬
 *)(
s
-1);

137 if((
c
=*
p
)==0) {

138  
NULL
;

140 if(
c
!=*
q
) {

143 ++
p
;

144 ++
q
;

149 cÚ¡ 
UCh¬
 *
lim™
, *
´eLim™
;

152 if(
Ëngth
<=
subL’gth
) {

153  
NULL
;

156 
lim™
=
s
+
Ëngth
;

159 
´eLim™
=
lim™
-
subL’gth
;

161 
s
!=
´eLim™
) {

162 
c
=*
s
++;

163 if(
c
==
cs
) {

165 
p
=
s
;

166 
q
=
sub
;

168 if(
q
==
subLim™
) {

169 if(
	`isM©chAtCPBound¬y
(
¡¬t
, 
s
-1, 
p
, 
lim™
)) {

170  (
UCh¬
 *)(
s
-1);

175 if(*
p
!=*
q
) {

178 ++
p
;

179 ++
q
;

186  
NULL
;

187 
	}
}

189 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


190 
	$u_¡r¡r
(cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
sub¡ršg
) {

191  
	`u_¡rFšdFœ¡
(
s
, -1, 
sub¡ršg
, -1);

192 
	}
}

194 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


195 
	$u_¡rchr
(cÚ¡ 
UCh¬
 *
s
, UCh¬ 
c
) {

196 if(
	`U16_IS_SURROGATE
(
c
)) {

198  
	`u_¡rFšdFœ¡
(
s
, -1, &
c
, 1);

200 
UCh¬
 
cs
;

204 if((
cs
=*
s
)==
c
) {

205  (
UCh¬
 *)
s
;

207 if(
cs
==0) {

208  
NULL
;

210 ++
s
;

213 
	}
}

215 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


216 
	$u_¡rchr32
(cÚ¡ 
UCh¬
 *
s
, 
UCh¬32
 
c
) {

217 if((
ušt32_t
)
c
<=
U_BMP_MAX
) {

219  
	`u_¡rchr
(
s
, (
UCh¬
)
c
);

220 } if((
ušt32_t
)
c
<=
UCHAR_MAX_VALUE
) {

222 
UCh¬
 
cs
, 
Ëad
=
	`U16_LEAD
(
c
), 
Œa
=
	`U16_TRAIL
(c);

224 (
cs
=*
s
++)!=0) {

225 if(
cs
==
Ëad
 && *
s
==
Œa
) {

226  (
UCh¬
 *)(
s
-1);

229  
NULL
;

232  
NULL
;

234 
	}
}

236 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


237 
	$u_memchr
(cÚ¡ 
UCh¬
 *
s
, UCh¬ 
c
, 
št32_t
 
couÁ
) {

238 if(
couÁ
<=0) {

239  
NULL
;

240 } if(
	`U16_IS_SURROGATE
(
c
)) {

242  
	`u_¡rFšdFœ¡
(
s
, 
couÁ
, &
c
, 1);

245 cÚ¡ 
UCh¬
 *
lim™
=
s
+
couÁ
;

247 if(*
s
==
c
) {

248  (
UCh¬
 *)
s
;

250 } ++
s
!=
lim™
);

251  
NULL
;

253 
	}
}

255 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


256 
	$u_memchr32
(cÚ¡ 
UCh¬
 *
s
, 
UCh¬32
 
c
, 
št32_t
 
couÁ
) {

257 if((
ušt32_t
)
c
<=
U_BMP_MAX
) {

259  
	`u_memchr
(
s
, (
UCh¬
)
c
, 
couÁ
);

260 } if(
couÁ
<2) {

262  
NULL
;

263 } if((
ušt32_t
)
c
<=
UCHAR_MAX_VALUE
) {

265 cÚ¡ 
UCh¬
 *
lim™
=
s
+
couÁ
-1;

266 
UCh¬
 
Ëad
=
	`U16_LEAD
(
c
), 
Œa
=
	`U16_TRAIL
(c);

269 if(*
s
==
Ëad
 && *(s+1)==
Œa
) {

270  (
UCh¬
 *)
s
;

272 } ++
s
!=
lim™
);

273  
NULL
;

276  
NULL
;

278 
	}
}

282 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


283 
	$u_¡rFšdLa¡
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
,

284 cÚ¡ 
UCh¬
 *
sub
, 
št32_t
 
subL’gth
) {

285 cÚ¡ 
UCh¬
 *
¡¬t
, *
lim™
, *
p
, *
q
, *
subLim™
;

286 
UCh¬
 
c
, 
cs
;

288 if(
sub
==
NULL
 || 
subL’gth
<-1) {

289  (
UCh¬
 *)
s
;

291 if(
s
==
NULL
 || 
Ëngth
<-1) {

292  
NULL
;

305 if(
subL’gth
<0) {

306 
subL’gth
=
	`u_¡¾’
(
sub
);

308 if(
subL’gth
==0) {

309  (
UCh¬
 *)
s
;

313 
subLim™
=
sub
+
subL’gth
;

314 
cs
=*(--
subLim™
);

315 --
subL’gth
;

317 if(
subL’gth
==0 && !
	`U16_IS_SURROGATE
(
cs
)) {

319  
Ëngth
<0 ? 
	`u_¡¼chr
(
s
, 
cs
è: 
	`u_memrchr
(s, cs,†ength);

322 if(
Ëngth
<0) {

323 
Ëngth
=
	`u_¡¾’
(
s
);

327 if(
Ëngth
<=
subL’gth
) {

328  
NULL
;

331 
¡¬t
=
s
;

332 
lim™
=
s
+
Ëngth
;

335 
s
+=
subL’gth
;

337 
s
!=
lim™
) {

338 
c
=*(--
lim™
);

339 if(
c
==
cs
) {

341 
p
=
lim™
;

342 
q
=
subLim™
;

344 if(
q
==
sub
) {

345 if(
	`isM©chAtCPBound¬y
(
¡¬t
, 
p
, 
lim™
+1, s¹+
Ëngth
)) {

346  (
UCh¬
 *)
p
;

351 if(*(--
p
)!=*(--
q
)) {

359  
NULL
;

360 
	}
}

362 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


363 
	$u_¡¼¡r
(cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
sub¡ršg
) {

364  
	`u_¡rFšdLa¡
(
s
, -1, 
sub¡ršg
, -1);

365 
	}
}

367 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


368 
	$u_¡¼chr
(cÚ¡ 
UCh¬
 *
s
, UCh¬ 
c
) {

369 if(
	`U16_IS_SURROGATE
(
c
)) {

371  
	`u_¡rFšdLa¡
(
s
, -1, &
c
, 1);

373 cÚ¡ 
UCh¬
 *
»suÉ
=
NULL
;

374 
UCh¬
 
cs
;

378 if((
cs
=*
s
)==
c
) {

379 
»suÉ
=
s
;

381 if(
cs
==0) {

382  (
UCh¬
 *)
»suÉ
;

384 ++
s
;

387 
	}
}

389 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


390 
	$u_¡¼chr32
(cÚ¡ 
UCh¬
 *
s
, 
UCh¬32
 
c
) {

391 if((
ušt32_t
)
c
<=
U_BMP_MAX
) {

393  
	`u_¡¼chr
(
s
, (
UCh¬
)
c
);

394 } if((
ušt32_t
)
c
<=
UCHAR_MAX_VALUE
) {

396 cÚ¡ 
UCh¬
 *
»suÉ
=
NULL
;

397 
UCh¬
 
cs
, 
Ëad
=
	`U16_LEAD
(
c
), 
Œa
=
	`U16_TRAIL
(c);

399 (
cs
=*
s
++)!=0) {

400 if(
cs
==
Ëad
 && *
s
==
Œa
) {

401 
»suÉ
=
s
-1;

404  (
UCh¬
 *)
»suÉ
;

407  
NULL
;

409 
	}
}

411 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


412 
	$u_memrchr
(cÚ¡ 
UCh¬
 *
s
, UCh¬ 
c
, 
št32_t
 
couÁ
) {

413 if(
couÁ
<=0) {

414  
NULL
;

415 } if(
	`U16_IS_SURROGATE
(
c
)) {

417  
	`u_¡rFšdLa¡
(
s
, 
couÁ
, &
c
, 1);

420 cÚ¡ 
UCh¬
 *
lim™
=
s
+
couÁ
;

422 if(*(--
lim™
)==
c
) {

423  (
UCh¬
 *)
lim™
;

425 } 
s
!=
lim™
);

426  
NULL
;

428 
	}
}

430 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


431 
	$u_memrchr32
(cÚ¡ 
UCh¬
 *
s
, 
UCh¬32
 
c
, 
št32_t
 
couÁ
) {

432 if((
ušt32_t
)
c
<=
U_BMP_MAX
) {

434  
	`u_memrchr
(
s
, (
UCh¬
)
c
, 
couÁ
);

435 } if(
couÁ
<2) {

437  
NULL
;

438 } if((
ušt32_t
)
c
<=
UCHAR_MAX_VALUE
) {

440 cÚ¡ 
UCh¬
 *
lim™
=
s
+
couÁ
-1;

441 
UCh¬
 
Ëad
=
	`U16_LEAD
(
c
), 
Œa
=
	`U16_TRAIL
(c);

444 if(*
lim™
==
Œa
 && *Öim™-1)==
Ëad
) {

445  (
UCh¬
 *)(
lim™
-1);

447 } 
s
!=--
lim™
);

448  
NULL
;

451  
NULL
;

453 
	}
}

463 
št32_t


464 
	$_m©chFromS‘
(cÚ¡ 
UCh¬
 *
¡ršg
, cÚ¡ UCh¬ *
m©chS‘
, 
UBoŞ
 
pŞ¬™y
) {

465 
št32_t
 
m©chL’
, 
m©chBMPL’
, 
¡rIŒ
, 
m©chIŒ
;

466 
UCh¬32
 
¡ršgCh
, 
m©chCh
;

467 
UCh¬
 
c
, 
c2
;

470 
m©chBMPL’
 = 0;

471 (
c
 = 
m©chS‘
[
m©chBMPL’
]è!ğ0 && 
	`U16_IS_SINGLE
(c)) {

472 ++
m©chBMPL’
;

476 
m©chL’
 = 
m©chBMPL’
;

477 
m©chS‘
[
m©chL’
] != 0) {

478 ++
m©chL’
;

481 
¡rIŒ
 = 0; (
c
 = 
¡ršg
[strItr]) != 0;) {

482 ++
¡rIŒ
;

483 if(
	`U16_IS_SINGLE
(
c
)) {

484 if(
pŞ¬™y
) {

485 
m©chIŒ
 = 0; m©chIŒ < 
m©chL’
; ++matchItr) {

486 if(
c
 =ğ
m©chS‘
[
m©chIŒ
]) {

487  
¡rIŒ
 - 1;

491 
m©chIŒ
 = 0; m©chIŒ < 
m©chL’
; ++matchItr) {

492 if(
c
 =ğ
m©chS‘
[
m©chIŒ
]) {

493 
’dloİ
;

496  
¡rIŒ
 - 1;

503 if(
	`U16_IS_SURROGATE_LEAD
(
c
è&& 
	`U16_IS_TRAIL
(
c2
 = 
¡ršg
[
¡rIŒ
])) {

504 ++
¡rIŒ
;

505 
¡ršgCh
 = 
	`U16_GET_SUPPLEMENTARY
(
c
, 
c2
);

507 
¡ršgCh
 = 
c
;

510 if(
pŞ¬™y
) {

511 
m©chIŒ
 = 
m©chBMPL’
; m©chIŒ < 
m©chL’
;) {

512 
	`U16_NEXT
(
m©chS‘
, 
m©chIŒ
, 
m©chL’
, 
m©chCh
);

513 if(
¡ršgCh
 =ğ
m©chCh
) {

514  
¡rIŒ
 - 
	`U16_LENGTH
(
¡ršgCh
);

518 
m©chIŒ
 = 
m©chBMPL’
; m©chIŒ < 
m©chL’
;) {

519 
	`U16_NEXT
(
m©chS‘
, 
m©chIŒ
, 
m©chL’
, 
m©chCh
);

520 if(
¡ršgCh
 =ğ
m©chCh
) {

521 
’dloİ
;

524  
¡rIŒ
 - 
	`U16_LENGTH
(
¡ršgCh
);

527 
’dloİ
:

532  -
¡rIŒ
-1;

533 
	}
}

536 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


537 
	$u_¡½brk
(cÚ¡ 
UCh¬
 *
¡ršg
, cÚ¡ UCh¬ *
m©chS‘
)

539 
št32_t
 
idx
 = 
	`_m©chFromS‘
(
¡ršg
, 
m©chS‘
, 
TRUE
);

540 if(
idx
 >= 0) {

541  (
UCh¬
 *)
¡ršg
 + 
idx
;

543  
NULL
;

545 
	}
}

548 
U_CAPI
 
št32_t
 
U_EXPORT2


549 
	$u_¡rc¥n
(cÚ¡ 
UCh¬
 *
¡ršg
, cÚ¡ UCh¬ *
m©chS‘
)

551 
št32_t
 
idx
 = 
	`_m©chFromS‘
(
¡ršg
, 
m©chS‘
, 
TRUE
);

552 if(
idx
 >= 0) {

553  
idx
;

555  -
idx
 - 1;

557 
	}
}

560 
U_CAPI
 
št32_t
 
U_EXPORT2


561 
	$u_¡r¥n
(cÚ¡ 
UCh¬
 *
¡ršg
, cÚ¡ UCh¬ *
m©chS‘
)

563 
št32_t
 
idx
 = 
	`_m©chFromS‘
(
¡ršg
, 
m©chS‘
, 
FALSE
);

564 if(
idx
 >= 0) {

565  
idx
;

567  -
idx
 - 1;

569 
	}
}

573 
U_CAPI
 
UCh¬
* 
U_EXPORT2


574 
	$u_¡¹ok_r
(
UCh¬
 *
¤c
,

575 cÚ¡ 
UCh¬
 *
d–im
,

576 
UCh¬
 **
§veS‹
)

578 
UCh¬
 *
tokSourû
;

579 
UCh¬
 *
ÃxtTok’
;

580 
ušt32_t
 
nÚD–imIdx
;

583 ià(
¤c
 !ğ
NULL
) {

584 
tokSourû
 = 
¤c
;

585 *
§veS‹
 = 
¤c
;

587 ià(*
§veS‹
) {

588 
tokSourû
 = *
§veS‹
;

593  
NULL
;

597 
nÚD–imIdx
 = 
	`u_¡r¥n
(
tokSourû
, 
d–im
);

598 
tokSourû
 = &tokSourû[
nÚD–imIdx
];

600 ià(*
tokSourû
) {

601 
ÃxtTok’
 = 
	`u_¡½brk
(
tokSourû
, 
d–im
);

602 ià(
ÃxtTok’
 !ğ
NULL
) {

604 *(
ÃxtTok’
++) = 0;

605 *
§veS‹
 = 
ÃxtTok’
;

606  
tokSourû
;

608 ià(*
§veS‹
) {

610 *
§veS‹
 = 
NULL
;

611  
tokSourû
;

616 *
§veS‹
 = 
NULL
;

618  
NULL
;

619 
	}
}

623 
U_CAPI
 
UCh¬
* 
U_EXPORT2


624 
	$u_¡rÿt
(
UCh¬
 *
d¡
,

625 cÚ¡ 
UCh¬
 *
¤c
)

627 
UCh¬
 *
ªchÜ
 = 
d¡
;

629 *
d¡
 != 0) {

630 ++
d¡
;

632 (*(
d¡
++èğ*(
¤c
++)) != 0) {

635  
ªchÜ
;

636 
	}
}

638 
U_CAPI
 
UCh¬
* 
U_EXPORT2


639 
	$u_¡ºÿt
(
UCh¬
 *
d¡
,

640 cÚ¡ 
UCh¬
 *
¤c
,

641 
št32_t
 
n
 )

643 if(
n
 > 0) {

644 
UCh¬
 *
ªchÜ
 = 
d¡
;

646 *
d¡
 != 0) {

647 ++
d¡
;

649 (*
d¡
 = *
¤c
) != 0) {

650 ++
d¡
;

651 if(--
n
 == 0) {

652 *
d¡
 = 0;

655 ++
¤c
;

658  
ªchÜ
;

660  
d¡
;

662 
	}
}

666 
U_CAPI
 
št32_t
 
U_EXPORT2


667 
	$u_¡rcmp
(cÚ¡ 
UCh¬
 *
s1
,

668 cÚ¡ 
UCh¬
 *
s2
)

670 
UCh¬
 
c1
, 
c2
;

673 
c1
=*
s1
++;

674 
c2
=*
s2
++;

675 ià(
c1
 !ğ
c2
 || c1 == 0) {

679  (
št32_t
)
c1
 - (št32_t)
c2
;

680 
	}
}

682 
U_CFUNC
 
št32_t
 
U_EXPORT2


683 
	$u´v_¡rCom·»
(cÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

684 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

685 
UBoŞ
 
¡ºcmpStyË
, UBoŞ 
codePoštOrd”
) {

686 cÚ¡ 
UCh¬
 *
¡¬t1
, *
¡¬t2
, *
lim™1
, *
lim™2
;

687 
UCh¬
 
c1
, 
c2
;

690 
¡¬t1
=
s1
;

691 
¡¬t2
=
s2
;

694 if(
Ëngth1
<0 && 
Ëngth2
<0) {

696 if(
s1
==
s2
) {

701 
c1
=*
s1
;

702 
c2
=*
s2
;

703 if(
c1
!=
c2
) {

706 if(
c1
==0) {

709 ++
s1
;

710 ++
s2
;

714 
lim™1
=
lim™2
=
NULL
;

715 } if(
¡ºcmpStyË
) {

717 if(
s1
==
s2
) {

721 
lim™1
=
¡¬t1
+
Ëngth1
;

725 if(
s1
==
lim™1
) {

729 
c1
=*
s1
;

730 
c2
=*
s2
;

731 if(
c1
!=
c2
) {

734 if(
c1
==0) {

737 ++
s1
;

738 ++
s2
;

742 
lim™2
=
¡¬t2
+
Ëngth1
;

745 
št32_t
 
ËngthResuÉ
;

747 if(
Ëngth1
<0) {

748 
Ëngth1
=
	`u_¡¾’
(
s1
);

750 if(
Ëngth2
<0) {

751 
Ëngth2
=
	`u_¡¾’
(
s2
);

755 if(
Ëngth1
<
Ëngth2
) {

756 
ËngthResuÉ
=-1;

757 
lim™1
=
¡¬t1
+
Ëngth1
;

758 } if(
Ëngth1
==
Ëngth2
) {

759 
ËngthResuÉ
=0;

760 
lim™1
=
¡¬t1
+
Ëngth1
;

762 
ËngthResuÉ
=1;

763 
lim™1
=
¡¬t1
+
Ëngth2
;

766 if(
s1
==
s2
) {

767  
ËngthResuÉ
;

772 if(
s1
==
lim™1
) {

773  
ËngthResuÉ
;

776 
c1
=*
s1
;

777 
c2
=*
s2
;

778 if(
c1
!=
c2
) {

781 ++
s1
;

782 ++
s2
;

786 
lim™1
=
¡¬t1
+
Ëngth1
;

787 
lim™2
=
¡¬t2
+
Ëngth2
;

791 if(
c1
>=0xd800 && 
c2
>=0xd800 && 
codePoštOrd”
) {

794 (
c1
<=0xdbfà&& (
s1
+1)!=
lim™1
 && 
	`UTF_IS_TRAIL
(*(s1+1))) ||

795 (
	`UTF_IS_TRAIL
(
c1
è&& 
¡¬t1
!=
s1
 && 
	`UTF_IS_LEAD
(*(s1-1)))

800 
c1
-=0x2800;

804 (
c2
<=0xdbfà&& (
s2
+1)!=
lim™2
 && 
	`UTF_IS_TRAIL
(*(s2+1))) ||

805 (
	`UTF_IS_TRAIL
(
c2
è&& 
¡¬t2
!=
s2
 && 
	`UTF_IS_LEAD
(*(s2-1)))

810 
c2
-=0x2800;

815  (
št32_t
)
c1
-(št32_t)
c2
;

816 
	}
}

824 
U_CAPI
 
št32_t
 
U_EXPORT2


825 
	$u_¡rCom·»I‹r
(
UCh¬I‹¿tÜ
 *
™”1
, UCh¬I‹¿tÜ *
™”2
, 
UBoŞ
 
codePoštOrd”
) {

826 
UCh¬32
 
c1
, 
c2
;

829 if(
™”1
==
NULL
 || 
™”2
==NULL) {

832 if(
™”1
==
™”2
) {

837 
™”1
->
	`move
(™”1, 0, 
UITER_START
);

838 
™”2
->
	`move
(™”2, 0, 
UITER_START
);

842 
c1
=
™”1
->
	`Ãxt
(iter1);

843 
c2
=
™”2
->
	`Ãxt
(iter2);

844 if(
c1
!=
c2
) {

847 if(
c1
==-1) {

853 if(
c1
>=0xd800 && 
c2
>=0xd800 && 
codePoštOrd”
) {

856 (
c1
<=0xdbfà&& 
	`UTF_IS_TRAIL
(
™”1
->
	`cu¼’t
(iter1))) ||

857 (
	`UTF_IS_TRAIL
(
c1
è&& (
™”1
->
	`´evious
(™”1), 
	`UTF_IS_LEAD
(iter1->previous(iter1))))

862 
c1
-=0x2800;

866 (
c2
<=0xdbfà&& 
	`UTF_IS_TRAIL
(
™”2
->
	`cu¼’t
(iter2))) ||

867 (
	`UTF_IS_TRAIL
(
c2
è&& (
™”2
->
	`´evious
(™”2), 
	`UTF_IS_LEAD
(iter2->previous(iter2))))

872 
c2
-=0x2800;

877  (
št32_t
)
c1
-(št32_t)
c2
;

878 
	}
}

897 
	gäagm’t
 {

899 if(
	gc1
<=0xdbff) {

900 if(!
UTF_IS_TRAIL
(
™”1
->
cu¼’t
(iter1))) {

902 
c1
-=0x2800;

904 } if(
	gc1
<=0xdfff) {

905 
št32_t
 
idx
=
™”1
->
g‘Index
(™”1, 
UITER_CURRENT
);

906 
	g™”1
->
´evious
(
™”1
);

907 if(!
UTF_IS_LEAD
(
™”1
->
´evious
(iter1))) {

909 
	gc1
-=0x2800;

912 
	g™”1
->
move
(
™”1
, 
idx
, 
UITER_ZERO
);

915 
	gc1
-=0x2800;

920 
U_CAPI
 
št32_t
 
U_EXPORT2


921 
	$u_¡rCom·»
(cÚ¡ 
UCh¬
 *
s1
, 
št32_t
 
Ëngth1
,

922 cÚ¡ 
UCh¬
 *
s2
, 
št32_t
 
Ëngth2
,

923 
UBoŞ
 
codePoštOrd”
) {

925 if(
s1
==
NULL
 || 
Ëngth1
<-1 || 
s2
==NULL || 
Ëngth2
<-1) {

928  
	`u´v_¡rCom·»
(
s1
, 
Ëngth1
, 
s2
, 
Ëngth2
, 
FALSE
, 
codePoštOrd”
);

929 
	}
}

932 
U_CAPI
 
št32_t
 
U_EXPORT2


933 
	$u_¡rcmpCodePoštOrd”
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
) {

934  
	`u´v_¡rCom·»
(
s1
, -1, 
s2
, -1, 
FALSE
, 
TRUE
);

935 
	}
}

937 
U_CAPI
 
št32_t
 
U_EXPORT2


938 
	$u_¡ºcmp
(cÚ¡ 
UCh¬
 *
s1
,

939 cÚ¡ 
UCh¬
 *
s2
,

940 
št32_t
 
n
)

942 if(
n
 > 0) {

943 
št32_t
 
rc
;

945 
rc
 = (
št32_t
)*
s1
 - (št32_t)*
s2
;

946 if(
rc
 !ğ0 || *
s1
 =ğ0 || --
n
 == 0) {

947  
rc
;

949 ++
s1
;

950 ++
s2
;

955 
	}
}

957 
U_CAPI
 
št32_t
 
U_EXPORT2


958 
	$u_¡ºcmpCodePoštOrd”
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
, 
št32_t
 
n
) {

959  
	`u´v_¡rCom·»
(
s1
, 
n
, 
s2
,‚, 
TRUE
, TRUE);

960 
	}
}

962 
U_CAPI
 
UCh¬
* 
U_EXPORT2


963 
	$u_¡rıy
(
UCh¬
 *
d¡
,

964 cÚ¡ 
UCh¬
 *
¤c
)

966 
UCh¬
 *
ªchÜ
 = 
d¡
;

968 (*(
d¡
++èğ*(
¤c
++)) != 0) {

971  
ªchÜ
;

972 
	}
}

974 
U_CAPI
 
UCh¬
* 
U_EXPORT2


975 
	$u_¡ºıy
(
UCh¬
 *
d¡
,

976 cÚ¡ 
UCh¬
 *
¤c
,

977 
št32_t
 
n
)

979 
UCh¬
 *
ªchÜ
 = 
d¡
;

982 
n
 > 0 && (*(
d¡
++èğ*(
¤c
++)) != 0) {

983 --
n
;

986  
ªchÜ
;

987 
	}
}

989 
U_CAPI
 
št32_t
 
U_EXPORT2


990 
	$u_¡¾’
(cÚ¡ 
UCh¬
 *
s
)

992 #ià
U_SIZEOF_WCHAR_T
 =ğ
U_SIZEOF_UCHAR


993  (
št32_t
)
	`u´v_wc¦’
(
s
);

995 cÚ¡ 
UCh¬
 *
t
 = 
s
;

996 *
t
 != 0) {

997 ++
t
;

999  
t
 - 
s
;

1001 
	}
}

1003 
U_CAPI
 
št32_t
 
U_EXPORT2


1004 
	$u_couÁCh¬32
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
) {

1005 
št32_t
 
couÁ
;

1007 if(
s
==
NULL
 || 
Ëngth
<-1) {

1011 
couÁ
=0;

1012 if(
Ëngth
>=0) {

1013 
Ëngth
>0) {

1014 ++
couÁ
;

1015 if(
	`UTF_IS_LEAD
(*
s
è&& 
Ëngth
>=2 && 
	`UTF_IS_TRAIL
(*(s+1))) {

1016 
s
+=2;

1017 
Ëngth
-=2;

1019 ++
s
;

1020 --
Ëngth
;

1024 
UCh¬
 
c
;

1027 if((
c
=*
s
++)==0) {

1030 ++
couÁ
;

1036 if(
	`UTF_IS_LEAD
(
c
è&& 
	`UTF_IS_TRAIL
(*
s
)) {

1037 ++
s
;

1041  
couÁ
;

1042 
	}
}

1044 
U_CAPI
 
UBoŞ
 
U_EXPORT2


1045 
	$u_¡rHasMÜeCh¬32Thª
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
, iÁ32_ˆ
numb”
) {

1047 if(
numb”
<0) {

1048  
TRUE
;

1050 if(
s
==
NULL
 || 
Ëngth
<-1) {

1051  
FALSE
;

1054 if(
Ëngth
==-1) {

1056 
UCh¬
 
c
;

1060 if((
c
=*
s
++)==0) {

1061  
FALSE
;

1063 if(
numb”
==0) {

1064  
TRUE
;

1066 if(
	`U16_IS_LEAD
(
c
è&& 
	`U16_IS_TRAIL
(*
s
)) {

1067 ++
s
;

1069 --
numb”
;

1073 cÚ¡ 
UCh¬
 *
lim™
;

1074 
št32_t
 
maxSuµËm’ry
;

1077 if(((
Ëngth
+1)/2)>
numb”
) {

1078  
TRUE
;

1082 
maxSuµËm’ry
=
Ëngth
-
numb”
;

1083 if(
maxSuµËm’ry
<=0) {

1084  
FALSE
;

1092 
lim™
=
s
+
Ëngth
;

1094 if(
s
==
lim™
) {

1095  
FALSE
;

1097 if(
numb”
==0) {

1098  
TRUE
;

1100 if(
	`U16_IS_LEAD
(*
s
++è&& s!=
lim™
 && 
	`U16_IS_TRAIL
(*s)) {

1101 ++
s
;

1102 if(--
maxSuµËm’ry
<=0) {

1104  
FALSE
;

1107 --
numb”
;

1110 
	}
}

1112 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


1113 
	$u_memıy
(
UCh¬
 *
de¡
, cÚ¡ UCh¬ *
¤c
, 
št32_t
 
couÁ
) {

1114  (
UCh¬
 *)
	`u´v_memıy
(
de¡
, 
¤c
, 
couÁ
*
U_SIZEOF_UCHAR
);

1115 
	}
}

1117 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


1118 
	$u_memmove
(
UCh¬
 *
de¡
, cÚ¡ UCh¬ *
¤c
, 
št32_t
 
couÁ
) {

1119  (
UCh¬
 *)
	`u´v_memmove
(
de¡
, 
¤c
, 
couÁ
*
U_SIZEOF_UCHAR
);

1120 
	}
}

1122 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


1123 
	$u_mem£t
(
UCh¬
 *
de¡
, UCh¬ 
c
, 
št32_t
 
couÁ
) {

1124 if(
couÁ
 > 0) {

1125 
UCh¬
 *
±r
 = 
de¡
;

1126 
UCh¬
 *
lim™
 = 
de¡
 + 
couÁ
;

1128 
±r
 < 
lim™
) {

1129 *(
±r
++èğ
c
;

1132  
de¡
;

1133 
	}
}

1135 
U_CAPI
 
št32_t
 
U_EXPORT2


1136 
	$u_memcmp
(cÚ¡ 
UCh¬
 *
buf1
, cÚ¡ UCh¬ *
buf2
, 
št32_t
 
couÁ
) {

1137 if(
couÁ
 > 0) {

1138 cÚ¡ 
UCh¬
 *
lim™
 = 
buf1
 + 
couÁ
;

1139 
št32_t
 
»suÉ
;

1141 
buf1
 < 
lim™
) {

1142 
»suÉ
 = (
št32_t
)(
ušt16_t
)*
buf1
 - (št32_t)(ušt16_t)*
buf2
;

1143 ià(
»suÉ
 != 0) {

1144  
»suÉ
;

1146 
buf1
++;

1147 
buf2
++;

1151 
	}
}

1153 
U_CAPI
 
št32_t
 
U_EXPORT2


1154 
	$u_memcmpCodePoštOrd”
(cÚ¡ 
UCh¬
 *
s1
, cÚ¡ UCh¬ *
s2
, 
št32_t
 
couÁ
) {

1155  
	`u´v_¡rCom·»
(
s1
, 
couÁ
, 
s2
, couÁ, 
FALSE
, 
TRUE
);

1156 
	}
}

1161 cÚ¡ 
UCh¬
 
	gUNESCAPE_MAP
[] = {

1175 ’um { 
	mUNESCAPE_MAP_LENGTH
 = (
UNESCAPE_MAP
) / (UNESCAPE_MAP[0]) };

1178 
št8_t
 
	$_dig™8
(
UCh¬
 
c
) {

1179 ià(
c
 >= 0x0030 && c <= 0x0037) {

1180  (
št8_t
)(
c
 - 0x0030);

1183 
	}
}

1186 
št8_t
 
	$_dig™16
(
UCh¬
 
c
) {

1187 ià(
c
 >= 0x0030 && c <= 0x0039) {

1188  (
št8_t
)(
c
 - 0x0030);

1190 ià(
c
 >= 0x0041 && c <= 0x0046) {

1191  (
št8_t
)(
c
 - (0x0041 - 10));

1193 ià(
c
 >= 0x0061 && c <= 0x0066) {

1194  (
št8_t
)(
c
 - (0x0061 - 10));

1197 
	}
}

1202 
U_CAPI
 
UCh¬32
 
U_EXPORT2


1203 
	$u_uÃsÿ³At
(
UNESCAPE_CHAR_AT
 
ch¬At
,

1204 
št32_t
 *
off£t
,

1205 
št32_t
 
Ëngth
,

1206 *
cÚ‹xt
) {

1208 
št32_t
 
¡¬t
 = *
off£t
;

1209 
UCh¬
 
c
;

1210 
UCh¬32
 
»suÉ
 = 0;

1211 
št8_t
 
n
 = 0;

1212 
št8_t
 
mšDig
 = 0;

1213 
št8_t
 
maxDig
 = 0;

1214 
št8_t
 
b™sP”Dig™
 = 4;

1215 
št8_t
 
dig
;

1216 
št32_t
 
i
;

1217 
UBoŞ
 
b¿ûs
 = 
FALSE
;

1220 ià(*
off£t
 < 0 || *off£ˆ>ğ
Ëngth
) {

1221 
”r
;

1225 
c
 = 
	`ch¬At
((*
off£t
)++, 
cÚ‹xt
);

1228 
c
) {

1230 
mšDig
 = 
maxDig
 = 4;

1233 
mšDig
 = 
maxDig
 = 8;

1236 
mšDig
 = 1;

1237 ià(*
off£t
 < 
Ëngth
 && 
	`ch¬At
(*off£t, 
cÚ‹xt
) == 0x7B ) {

1238 ++(*
off£t
);

1239 
b¿ûs
 = 
TRUE
;

1240 
maxDig
 = 8;

1242 
maxDig
 = 2;

1246 
dig
 = 
	`_dig™8
(
c
);

1247 ià(
dig
 >= 0) {

1248 
mšDig
 = 1;

1249 
maxDig
 = 3;

1250 
n
 = 1;

1251 
b™sP”Dig™
 = 3;

1252 
»suÉ
 = 
dig
;

1256 ià(
mšDig
 != 0) {

1257 *
off£t
 < 
Ëngth
 && 
n
 < 
maxDig
) {

1258 
c
 = 
	`ch¬At
(*
off£t
, 
cÚ‹xt
);

1259 
dig
 = (
št8_t
)((
b™sP”Dig™
 =ğ3è? 
	`_dig™8
(
c
è: 
	`_dig™16
(c));

1260 ià(
dig
 < 0) {

1263 
»suÉ
 = (»suÉ << 
b™sP”Dig™
è| 
dig
;

1264 ++(*
off£t
);

1265 ++
n
;

1267 ià(
n
 < 
mšDig
) {

1268 
”r
;

1270 ià(
b¿ûs
) {

1271 ià(
c
 != 0x7D ) {

1272 
”r
;

1274 ++(*
off£t
);

1276 ià(
»suÉ
 < 0 ||„esult >= 0x110000) {

1277 
”r
;

1283 ià(*
off£t
 < 
Ëngth
 && 
	`U16_IS_LEAD
(
»suÉ
)) {

1284 
št32_t
 
ah—d
 = *
off£t
 + 1;

1285 
c
 = 
	`ch¬At
(*
off£t
, 
cÚ‹xt
);

1286 ià(
c
 =ğ0x5C && 
ah—d
 < 
Ëngth
) {

1287 
c
 = (
UCh¬
è
	`u_uÃsÿ³At
(
ch¬At
, &
ah—d
, 
Ëngth
, 
cÚ‹xt
);

1289 ià(
	`U16_IS_TRAIL
(
c
)) {

1290 *
off£t
 = 
ah—d
;

1291 
»suÉ
 = 
	`U16_GET_SUPPLEMENTARY
ÔesuÉ, 
c
);

1294  
»suÉ
;

1298 
i
=0; i<
UNESCAPE_MAP_LENGTH
; i+=2) {

1299 ià(
c
 =ğ
UNESCAPE_MAP
[
i
]) {

1300  
UNESCAPE_MAP
[
i
+1];

1301 } ià(
c
 < 
UNESCAPE_MAP
[
i
]) {

1307 ià(
c
 =ğ0x0063 && *
off£t
 < 
Ëngth
) {

1308 
c
 = 
	`ch¬At
((*
off£t
)++, 
cÚ‹xt
);

1309 ià(
	`UTF_IS_FIRST_SURROGATE
(
c
è&& *
off£t
 < 
Ëngth
) {

1310 
UCh¬
 
c2
 = 
	`ch¬At
(*
off£t
, 
cÚ‹xt
);

1311 ià(
	`UTF_IS_SECOND_SURROGATE
(
c2
)) {

1312 ++(*
off£t
);

1313 
c
 = (
UCh¬
è
	`UTF16_GET_PAIR_VALUE
(c, 
c2
);

1316  0x1F & 
c
;

1322 ià(
	`UTF_IS_FIRST_SURROGATE
(
c
è&& *
off£t
 < 
Ëngth
) {

1323 
UCh¬
 
c2
 = 
	`ch¬At
(*
off£t
, 
cÚ‹xt
);

1324 ià(
	`UTF_IS_SECOND_SURROGATE
(
c2
)) {

1325 ++(*
off£t
);

1326  
	`UTF16_GET_PAIR_VALUE
(
c
, 
c2
);

1329  
c
;

1331 
”r
:

1333 *
off£t
 = 
¡¬t
;

1334  (
UCh¬32
)0xFFFFFFFF;

1335 
	}
}

1338 
UCh¬
 
U_CALLCONV


1339 
	$_ch¬PŒ_ch¬At
(
št32_t
 
off£t
, *
cÚ‹xt
) {

1340 
UCh¬
 
c16
;

1343 
	`u_ch¬sToUCh¬s
(((*è
cÚ‹xt
è+ 
off£t
, &
c16
, 1);

1344  
c16
;

1345 
	}
}

1348 
	$_­³ndUCh¬s
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1349 cÚ¡ *
¤c
, 
št32_t
 
¤cL’
) {

1350 ià(
de¡C­ac™y
 < 0) {

1351 
de¡C­ac™y
 = 0;

1353 ià(
¤cL’
 > 
de¡C­ac™y
) {

1354 
¤cL’
 = 
de¡C­ac™y
;

1356 
	`u_ch¬sToUCh¬s
(
¤c
, 
de¡
, 
¤cL’
);

1357 
	}
}

1360 
U_CAPI
 
št32_t
 
U_EXPORT2


1361 
	$u_uÃsÿ³
(cÚ¡ *
¤c
, 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
) {

1362 cÚ¡ *
£gm’t
 = 
¤c
;

1363 
št32_t
 
i
 = 0;

1364 
c
;

1366 (
c
=*
¤c
) != 0) {

1370 ià(
c
 == '\\') {

1371 
št32_t
 
ËnP¬£d
 = 0;

1372 
UCh¬32
 
c32
;

1373 ià(
¤c
 !ğ
£gm’t
) {

1374 ià(
de¡
 !ğ
NULL
) {

1375 
	`_­³ndUCh¬s
(
de¡
 + 
i
, 
de¡C­ac™y
 - i,

1376 
£gm’t
, (
št32_t
)(
¤c
 - segment));

1378 
i
 +ğ(
št32_t
)(
¤c
 - 
£gm’t
);

1380 ++
¤c
;

1381 
c32
 = (
UCh¬32
)
	`u_uÃsÿ³At
(
_ch¬PŒ_ch¬At
, &
ËnP¬£d
, (
št32_t
)
	`u´v_¡¾’
(
¤c
), (*)src);

1382 ià(
ËnP¬£d
 == 0) {

1383 
”r
;

1385 
¤c
 +ğ
ËnP¬£d
;

1386 ià(
de¡
 !ğ
NULL
 && 
	`UTF_CHAR_LENGTH
(
c32
è<ğ(
de¡C­ac™y
 - 
i
)) {

1387 
	`UTF_APPEND_CHAR_UNSAFE
(
de¡
, 
i
, 
c32
);

1389 
i
 +ğ
	`UTF_CHAR_LENGTH
(
c32
);

1391 
£gm’t
 = 
¤c
;

1393 ++
¤c
;

1396 ià(
¤c
 !ğ
£gm’t
) {

1397 ià(
de¡
 !ğ
NULL
) {

1398 
	`_­³ndUCh¬s
(
de¡
 + 
i
, 
de¡C­ac™y
 - i,

1399 
£gm’t
, (
št32_t
)(
¤c
 - segment));

1401 
i
 +ğ(
št32_t
)(
¤c
 - 
£gm’t
);

1403 ià(
de¡
 !ğ
NULL
 && 
i
 < 
de¡C­ac™y
) {

1404 
de¡
[
i
] = 0;

1406  
i
;

1408 
”r
:

1409 ià(
de¡
 !ğ
NULL
 && 
de¡C­ac™y
 > 0) {

1410 *
de¡
 = 0;

1413 
	}
}

1421 
	#__TERMINATE_STRING
(
de¡
, 
de¡C­ac™y
, 
Ëngth
, 
pE¼ÜCode
) \

1422 if(
pE¼ÜCode
!=
NULL
 && 
	`U_SUCCESS
(*pErrorCode)) { \

1425 if(
Ëngth
<0) { \

1427 } if(
Ëngth
<
de¡C­ac™y
) { \

1429 
de¡
[
Ëngth
]=0; \

1431 if(*
pE¼ÜCode
==
U_STRING_NOT_TERMINATED_WARNING
) { \

1432 *
pE¼ÜCode
=
U_ZERO_ERROR
; \

1434 } if(
Ëngth
==
de¡C­ac™y
) { \

1436 *
pE¼ÜCode
=
U_STRING_NOT_TERMINATED_WARNING
; \

1439 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
; \

1441 }

	)

1443 
U_CAPI
 
št32_t
 
U_EXPORT2


1444 
	$u_‹rmš©eUCh¬s
(
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
, iÁ32_ˆ
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1445 
	`__TERMINATE_STRING
(
de¡
, 
de¡C­ac™y
, 
Ëngth
, 
pE¼ÜCode
);

1446  
Ëngth
;

1447 
	}
}

1449 
U_CAPI
 
št32_t
 
U_EXPORT2


1450 
	$u_‹rmš©eCh¬s
(*
de¡
, 
št32_t
 
de¡C­ac™y
, iÁ32_ˆ
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1451 
	`__TERMINATE_STRING
(
de¡
, 
de¡C­ac™y
, 
Ëngth
, 
pE¼ÜCode
);

1452  
Ëngth
;

1453 
	}
}

1455 
U_CAPI
 
št32_t
 
U_EXPORT2


1456 
	$u_‹rmš©eUCh¬32s
(
UCh¬32
 *
de¡
, 
št32_t
 
de¡C­ac™y
, iÁ32_ˆ
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1457 
	`__TERMINATE_STRING
(
de¡
, 
de¡C­ac™y
, 
Ëngth
, 
pE¼ÜCode
);

1458  
Ëngth
;

1459 
	}
}

1461 
U_CAPI
 
št32_t
 
U_EXPORT2


1462 
	$u_‹rmš©eWCh¬s
(
wch¬_t
 *
de¡
, 
št32_t
 
de¡C­ac™y
, iÁ32_ˆ
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1463 
	`__TERMINATE_STRING
(
de¡
, 
de¡C­ac™y
, 
Ëngth
, 
pE¼ÜCode
);

1464  
Ëngth
;

1465 
	}
}

	@ustrtrns.c

27 
	~"unicode/put.h
"

28 
	~"unicode/u¡ršg.h
"

29 
	~"c¡ršg.h
"

30 
	~"cmemÜy.h
"

31 
	~"u¡r_imp.h
"

33 
U_CAPI
 
UCh¬
* 
U_EXPORT2


34 
	$u_¡rFromUTF32W™hSub
(
UCh¬
 *
de¡
,

35 
št32_t
 
de¡C­ac™y
,

36 
št32_t
 *
pDe¡L’gth
,

37 cÚ¡ 
UCh¬32
 *
¤c
,

38 
št32_t
 
¤cL’gth
,

39 
UCh¬32
 
subch¬
, 
št32_t
 *
pNumSub¡™utiÚs
,

40 
UE¼ÜCode
 *
pE¼ÜCode
) {

41 cÚ¡ 
UCh¬32
 *
¤cLim™
;

42 
UCh¬32
 
ch
;

43 
UCh¬
 *
de¡Lim™
;

44 
UCh¬
 *
pDe¡
;

45 
št32_t
 
»qL’gth
;

46 
št32_t
 
numSub¡™utiÚs
;

49 if(
	`U_FAILURE
(*
pE¼ÜCode
)){

50  
NULL
;

52 ifĞ(
¤c
==
NULL
 && 
¤cL’gth
!=0) || srcLength < -1 ||

53 (
de¡C­ac™y
<0è|| (
de¡
 =ğ
NULL
 && destCapacity > 0) ||

54 
subch¬
 > 0x10fffà|| 
	`U_IS_SURROGATE
(subchar)

56 *
pE¼ÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

57  
NULL
;

60 if(
pNumSub¡™utiÚs
 !ğ
NULL
) {

61 *
pNumSub¡™utiÚs
 = 0;

64 
pDe¡
 = 
de¡
;

65 
de¡Lim™
 = 
de¡
 + 
de¡C­ac™y
;

66 
»qL’gth
 = 0;

67 
numSub¡™utiÚs
 = 0;

69 if(
¤cL’gth
 < 0) {

71 (
ch
=*
¤c
) != 0 &&

72 ((
ušt32_t
)
ch
 < 0xd800 || (0xe000 <= ch && ch <= 0xffff))) {

73 ++
¤c
;

74 if(
pDe¡
 < 
de¡Lim™
) {

75 *
pDe¡
++ = (
UCh¬
)
ch
;

77 ++
»qL’gth
;

80 
¤cLim™
 = 
¤c
;

81 if(
ch
 != 0) {

83 *++
¤cLim™
 != 0) {}

86 
¤cLim™
 = 
¤c
 + 
¤cL’gth
;

90 
¤c
 < 
¤cLim™
) {

91 
ch
 = *
¤c
++;

94 if((
ušt32_t
)
ch
 < 0xd800 || (0xe000 <= ch && ch <= 0xffff)) {

95 if(
pDe¡
 < 
de¡Lim™
) {

96 *
pDe¡
++ = (
UCh¬
)
ch
;

98 ++
»qL’gth
;

101 } if(0x10000 <ğ
ch
 && ch <= 0x10ffff) {

102 if((
pDe¡
 + 2è<ğ
de¡Lim™
) {

103 *
pDe¡
++ = 
	`U16_LEAD
(
ch
);

104 *
pDe¡
++ = 
	`U16_TRAIL
(
ch
);

106 
»qL’gth
 += 2;

109 } if((
ch
 = 
subch¬
) < 0) {

111 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

112  
NULL
;

114 ++
numSub¡™utiÚs
;

116 } 
TRUE
);

119 
»qL’gth
 +ğ(
št32_t
)(
pDe¡
 - 
de¡
);

120 if(
pDe¡L’gth
) {

121 *
pDe¡L’gth
 = 
»qL’gth
;

123 if(
pNumSub¡™utiÚs
 !ğ
NULL
) {

124 *
pNumSub¡™utiÚs
 = 
numSub¡™utiÚs
;

128 
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
»qL’gth
, 
pE¼ÜCode
);

130  
de¡
;

131 
	}
}

133 
U_CAPI
 
UCh¬
* 
U_EXPORT2


134 
	$u_¡rFromUTF32
(
UCh¬
 *
de¡
,

135 
št32_t
 
de¡C­ac™y
,

136 
št32_t
 *
pDe¡L’gth
,

137 cÚ¡ 
UCh¬32
 *
¤c
,

138 
št32_t
 
¤cL’gth
,

139 
UE¼ÜCode
 *
pE¼ÜCode
) {

140  
	`u_¡rFromUTF32W™hSub
(

141 
de¡
, 
de¡C­ac™y
, 
pDe¡L’gth
,

142 
¤c
, 
¤cL’gth
,

143 
U_SENTINEL
, 
NULL
,

144 
pE¼ÜCode
);

145 
	}
}

147 
U_CAPI
 
UCh¬32
* 
U_EXPORT2


148 
	$u_¡rToUTF32W™hSub
(
UCh¬32
 *
de¡
,

149 
št32_t
 
de¡C­ac™y
,

150 
št32_t
 *
pDe¡L’gth
,

151 cÚ¡ 
UCh¬
 *
¤c
,

152 
št32_t
 
¤cL’gth
,

153 
UCh¬32
 
subch¬
, 
št32_t
 *
pNumSub¡™utiÚs
,

154 
UE¼ÜCode
 *
pE¼ÜCode
) {

155 cÚ¡ 
UCh¬
 *
¤cLim™
;

156 
UCh¬32
 
ch
;

157 
UCh¬
 
ch2
;

158 
UCh¬32
 *
de¡Lim™
;

159 
UCh¬32
 *
pDe¡
;

160 
št32_t
 
»qL’gth
;

161 
št32_t
 
numSub¡™utiÚs
;

164 if(
	`U_FAILURE
(*
pE¼ÜCode
)){

165  
NULL
;

167 ifĞ(
¤c
==
NULL
 && 
¤cL’gth
!=0) || srcLength < -1 ||

168 (
de¡C­ac™y
<0è|| (
de¡
 =ğ
NULL
 && destCapacity > 0) ||

169 
subch¬
 > 0x10fffà|| 
	`U_IS_SURROGATE
(subchar)

171 *
pE¼ÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

172  
NULL
;

175 if(
pNumSub¡™utiÚs
 !ğ
NULL
) {

176 *
pNumSub¡™utiÚs
 = 0;

179 
pDe¡
 = 
de¡
;

180 
de¡Lim™
 = 
de¡
 + 
de¡C­ac™y
;

181 
»qL’gth
 = 0;

182 
numSub¡™utiÚs
 = 0;

184 if(
¤cL’gth
 < 0) {

186 (
ch
=*
¤c
è!ğ0 && !
	`U16_IS_SURROGATE
(ch)) {

187 ++
¤c
;

188 if(
pDe¡
 < 
de¡Lim™
) {

189 *
pDe¡
++ = 
ch
;

191 ++
»qL’gth
;

194 
¤cLim™
 = 
¤c
;

195 if(
ch
 != 0) {

197 *++
¤cLim™
 != 0) {}

200 
¤cLim™
 = 
¤c
 + 
¤cL’gth
;

204 
¤c
 < 
¤cLim™
) {

205 
ch
 = *
¤c
++;

206 if(!
	`U16_IS_SURROGATE
(
ch
)) {

208 } if(
	`U16_IS_SURROGATE_LEAD
(
ch
è&& 
¤c
 < 
¤cLim™
 && 
	`U16_IS_TRAIL
(
ch2
 = *src)) {

209 ++
¤c
;

210 
ch
 = 
	`U16_GET_SUPPLEMENTARY
(ch, 
ch2
);

211 } if((
ch
 = 
subch¬
) < 0) {

213 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

214  
NULL
;

216 ++
numSub¡™utiÚs
;

218 if(
pDe¡
 < 
de¡Lim™
) {

219 *
pDe¡
++ = 
ch
;

221 ++
»qL’gth
;

225 
»qL’gth
 +ğ(
št32_t
)(
pDe¡
 - 
de¡
);

226 if(
pDe¡L’gth
) {

227 *
pDe¡L’gth
 = 
»qL’gth
;

229 if(
pNumSub¡™utiÚs
 !ğ
NULL
) {

230 *
pNumSub¡™utiÚs
 = 
numSub¡™utiÚs
;

234 
	`u_‹rmš©eUCh¬32s
(
de¡
, 
de¡C­ac™y
, 
»qL’gth
, 
pE¼ÜCode
);

236  
de¡
;

237 
	}
}

239 
U_CAPI
 
UCh¬32
* 
U_EXPORT2


240 
	$u_¡rToUTF32
(
UCh¬32
 *
de¡
,

241 
št32_t
 
de¡C­ac™y
,

242 
št32_t
 *
pDe¡L’gth
,

243 cÚ¡ 
UCh¬
 *
¤c
,

244 
št32_t
 
¤cL’gth
,

245 
UE¼ÜCode
 *
pE¼ÜCode
) {

246  
	`u_¡rToUTF32W™hSub
(

247 
de¡
, 
de¡C­ac™y
, 
pDe¡L’gth
,

248 
¤c
, 
¤cL’gth
,

249 
U_SENTINEL
, 
NULL
,

250 
pE¼ÜCode
);

251 
	}
}

254 cÚ¡ 
UCh¬32


255 
	gutf8_mšLeg®
[4]={ 0, 0x80, 0x800, 0x10000 };

267 
UCh¬32


268 
	$utf8_ÃxtCh¬SaãBodyT”mš©ed
(cÚ¡ 
ušt8_t
 **
ps
, 
UCh¬32
 
c
) {

269 cÚ¡ 
ušt8_t
 *
s
=*
ps
;

270 
ušt8_t
 
Œa
, 
Ëg®
=0;

271 
ušt8_t
 
couÁ
=
	`UTF8_COUNT_TRAIL_BYTES
(
c
);

272 
	`UTF8_MASK_LEAD_BYTE
((
c
), 
couÁ
);

274 
couÁ
) {

279 
Ëg®
=1;

282 
Œa
=(
ušt8_t
)(*
s
++ - 0x80);

283 
c
=(c<<6)|
Œa
;

284 if(
Œa
>0x3à|| 
c
>=0x110) {

286 
Ëg®
=1;

290 
Œa
=(
ušt8_t
)(*
s
++ - 0x80);

291 if(
Œa
>0x3f) {

293 
Ëg®
=1;

296 
c
=(c<<6)|
Œa
;

298 
Œa
=(
ušt8_t
)(*
s
++ - 0x80);

299 if(
Œa
>0x3f) {

301 
Ëg®
=1;

303 
c
=(c<<6)|
Œa
;

306  
U_SENTINEL
;

312 if(
Ëg®
 || 
c
<
utf8_mšLeg®
[
couÁ
] || 
	`UTF_IS_SURROGATE
(c)) {

315 
s
=*
ps
;

316 
couÁ
>0 && 
	`UTF8_IS_TRAIL
(*
s
)) {

317 ++
s
;

318 --
couÁ
;

320 
c
=
U_SENTINEL
;

322 *
ps
=
s
;

323  
c
;

324 
	}
}

335 
UCh¬32


336 
	$utf8_ÃxtCh¬SaãBodyPoš‹r
(cÚ¡ 
ušt8_t
 **
ps
, cÚ¡ ušt8_ˆ*
lim™
, 
UCh¬32
 
c
) {

337 cÚ¡ 
ušt8_t
 *
s
=*
ps
;

338 
ušt8_t
 
Œa
, 
Ëg®
=0;

339 
ušt8_t
 
couÁ
=
	`UTF8_COUNT_TRAIL_BYTES
(
c
);

340 if((
lim™
-
s
)>=
couÁ
) {

341 
	`UTF8_MASK_LEAD_BYTE
((
c
), 
couÁ
);

343 
couÁ
) {

348 
Ëg®
=1;

351 
Œa
=*
s
++;

352 
c
=(c<<6)|(
Œa
&0x3f);

353 if(
c
<0x110) {

354 
Ëg®
|=(
Œa
&0xc0)^0x80;

357 
Ëg®
=1;

361 
Œa
=*
s
++;

362 
c
=(c<<6)|(
Œa
&0x3f);

363 
Ëg®
|=(
Œa
&0xc0)^0x80;

365 
Œa
=*
s
++;

366 
c
=(c<<6)|(
Œa
&0x3f);

367 
Ëg®
|=(
Œa
&0xc0)^0x80;

370  
U_SENTINEL
;

374 
Ëg®
=1;

379 if(
Ëg®
 || 
c
<
utf8_mšLeg®
[
couÁ
] || 
	`UTF_IS_SURROGATE
(c)) {

382 
s
=*
ps
;

383 
couÁ
>0 && 
s
<
lim™
 && 
	`UTF8_IS_TRAIL
(*s)) {

384 ++
s
;

385 --
couÁ
;

387 
c
=
U_SENTINEL
;

389 *
ps
=
s
;

390  
c
;

391 
	}
}

393 
U_CAPI
 
UCh¬
* 
U_EXPORT2


394 
	$u_¡rFromUTF8W™hSub
(
UCh¬
 *
de¡
,

395 
št32_t
 
de¡C­ac™y
,

396 
št32_t
 *
pDe¡L’gth
,

397 cÚ¡ * 
¤c
,

398 
št32_t
 
¤cL’gth
,

399 
UCh¬32
 
subch¬
, 
št32_t
 *
pNumSub¡™utiÚs
,

400 
UE¼ÜCode
 *
pE¼ÜCode
){

401 
UCh¬
 *
pDe¡
 = 
de¡
;

402 
UCh¬
 *
pDe¡Lim™
 = 
de¡
+
de¡C­ac™y
;

403 
UCh¬32
 
ch
;

404 
št32_t
 
»qL’gth
 = 0;

405 cÚ¡ 
ušt8_t
* 
pSrc
 = (cÚ¡ ušt8_t*è
¤c
;

406 
ušt8_t
 
t1
, 
t2
;

407 
št32_t
 
numSub¡™utiÚs
;

410 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)){

411  
NULL
;

414 ifĞ(
¤c
==
NULL
 && 
¤cL’gth
!=0) || srcLength < -1 ||

415 (
de¡C­ac™y
<0è|| (
de¡
 =ğ
NULL
 && destCapacity > 0) ||

416 
subch¬
 > 0x10fffà|| 
	`U_IS_SURROGATE
(subchar)

418 *
pE¼ÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

419  
NULL
;

422 if(
pNumSub¡™utiÚs
!=
NULL
) {

423 *
pNumSub¡™utiÚs
=0;

425 
numSub¡™utiÚs
=0;

440 if(
¤cL’gth
 < 0){

446 ((
ch
 = *
pSrc
è!ğ0è&& (
pDe¡
 < 
pDe¡Lim™
)) {

447 if(
ch
 <= 0x7f){

448 *
pDe¡
++=(
UCh¬
)
ch
;

449 ++
pSrc
;

451 if(
ch
 > 0xe0) {

453 
ch
 <= 0xec &&

454 (
t1
 = (
ušt8_t
)(
pSrc
[1] - 0x80)) <= 0x3f &&

455 (
t2
 = (
ušt8_t
)(
pSrc
[2] - 0x80)) <= 0x3f

458 *
pDe¡
++ = (
UCh¬
)((
ch
 << 12è| (
t1
 << 6è| 
t2
);

459 
pSrc
 += 3;

462 } if(
ch
 < 0xe0) {

464 
ch
 >= 0xc2 &&

465 (
t1
 = (
ušt8_t
)(
pSrc
[1] - 0x80)) <= 0x3f

467 *
pDe¡
++ = (
UCh¬
)(((
ch
 & 0x1fè<< 6è| 
t1
);

468 
pSrc
 += 2;

474 ++
pSrc
;

475 
ch
=
	`utf8_ÃxtCh¬SaãBodyT”mš©ed
(&
pSrc
, ch);

476 if(
ch
<0 && (++
numSub¡™utiÚs
, ch = 
subch¬
) < 0) {

477 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

478  
NULL
;

479 } if(
ch
<=0xFFFF) {

480 *(
pDe¡
++)=(
UCh¬
)
ch
;

482 *(
pDe¡
++)=
	`UTF16_LEAD
(
ch
);

483 if(
pDe¡
<
pDe¡Lim™
) {

484 *(
pDe¡
++)=
	`UTF16_TRAIL
(
ch
);

486 
»qL’gth
++;

494 (
ch
 = *
pSrc
) != 0) {

495 if(
ch
 <= 0x7f){

496 ++
»qL’gth
;

497 ++
pSrc
;

499 if(
ch
 > 0xe0) {

501 
ch
 <= 0xec &&

502 (
ušt8_t
)(
pSrc
[1] - 0x80) <= 0x3f &&

503 (
ušt8_t
)(
pSrc
[2] - 0x80) <= 0x3f

505 ++
»qL’gth
;

506 
pSrc
 += 3;

509 } if(
ch
 < 0xe0) {

511 
ch
 >= 0xc2 &&

512 (
ušt8_t
)(
pSrc
[1] - 0x80) <= 0x3f

514 ++
»qL’gth
;

515 
pSrc
 += 2;

521 ++
pSrc
;

522 
ch
=
	`utf8_ÃxtCh¬SaãBodyT”mš©ed
(&
pSrc
, ch);

523 if(
ch
<0 && (++
numSub¡™utiÚs
, ch = 
subch¬
) < 0) {

524 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

525  
NULL
;

527 
»qL’gth
 +ğ
	`U16_LENGTH
(
ch
);

531 cÚ¡ 
ušt8_t
 *
pSrcLim™
 = 
pSrc
 + 
¤cL’gth
;

532 
št32_t
 
couÁ
;

542 
couÁ
 = (
št32_t
)(
pDe¡Lim™
 - 
pDe¡
);

543 
¤cL’gth
 = (
št32_t
)((
pSrcLim™
 - 
pSrc
) / 3);

544 if(
couÁ
 > 
¤cL’gth
) {

545 
couÁ
 = 
¤cL’gth
;

547 if(
couÁ
 < 3) {

556 
ch
 = *
pSrc
;

557 if(
ch
 <= 0x7f){

558 *
pDe¡
++=(
UCh¬
)
ch
;

559 ++
pSrc
;

561 if(
ch
 > 0xe0) {

563 
ch
 <= 0xec &&

564 (
t1
 = (
ušt8_t
)(
pSrc
[1] - 0x80)) <= 0x3f &&

565 (
t2
 = (
ušt8_t
)(
pSrc
[2] - 0x80)) <= 0x3f

568 *
pDe¡
++ = (
UCh¬
)((
ch
 << 12è| (
t1
 << 6è| 
t2
);

569 
pSrc
 += 3;

572 } if(
ch
 < 0xe0) {

574 
ch
 >= 0xc2 &&

575 (
t1
 = (
ušt8_t
)(
pSrc
[1] - 0x80)) <= 0x3f

577 *
pDe¡
++ = (
UCh¬
)(((
ch
 & 0x1fè<< 6è| 
t1
);

578 
pSrc
 += 2;

583 if(
ch
 >ğ0xf0 || 
subch¬
 > 0xffff) {

589 if(--
couÁ
 == 0) {

595 ++
pSrc
;

596 
ch
=
	`utf8_ÃxtCh¬SaãBodyPoš‹r
(&
pSrc
, 
pSrcLim™
, ch);

597 if(
ch
<0 && (++
numSub¡™utiÚs
, ch = 
subch¬
) < 0){

598 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

599  
NULL
;

600 }if(
ch
<=0xFFFF){

601 *(
pDe¡
++)=(
UCh¬
)
ch
;

603 *(
pDe¡
++)=
	`UTF16_LEAD
(
ch
);

604 *(
pDe¡
++)=
	`UTF16_TRAIL
(
ch
);

607 } --
couÁ
 > 0);

610 (
pSrc
<
pSrcLim™
è&& (
pDe¡
<
pDe¡Lim™
)) {

611 
ch
 = *
pSrc
;

612 if(
ch
 <= 0x7f){

613 *
pDe¡
++=(
UCh¬
)
ch
;

614 ++
pSrc
;

616 if(
ch
 > 0xe0) {

618 
ch
 <= 0xec &&

619 ((
pSrcLim™
 - 
pSrc
) >= 3) &&

620 (
t1
 = (
ušt8_t
)(
pSrc
[1] - 0x80)) <= 0x3f &&

621 (
t2
 = (
ušt8_t
)(
pSrc
[2] - 0x80)) <= 0x3f

624 *
pDe¡
++ = (
UCh¬
)((
ch
 << 12è| (
t1
 << 6è| 
t2
);

625 
pSrc
 += 3;

628 } if(
ch
 < 0xe0) {

630 
ch
 >= 0xc2 &&

631 ((
pSrcLim™
 - 
pSrc
) >= 2) &&

632 (
t1
 = (
ušt8_t
)(
pSrc
[1] - 0x80)) <= 0x3f

634 *
pDe¡
++ = (
UCh¬
)(((
ch
 & 0x1fè<< 6è| 
t1
);

635 
pSrc
 += 2;

641 ++
pSrc
;

642 
ch
=
	`utf8_ÃxtCh¬SaãBodyPoš‹r
(&
pSrc
, 
pSrcLim™
, ch);

643 if(
ch
<0 && (++
numSub¡™utiÚs
, ch = 
subch¬
) < 0){

644 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

645  
NULL
;

646 }if(
ch
<=0xFFFF){

647 *(
pDe¡
++)=(
UCh¬
)
ch
;

649 *(
pDe¡
++)=
	`UTF16_LEAD
(
ch
);

650 if(
pDe¡
<
pDe¡Lim™
){

651 *(
pDe¡
++)=
	`UTF16_TRAIL
(
ch
);

653 
»qL’gth
++;

660 
pSrc
 < 
pSrcLim™
){

661 
ch
 = *
pSrc
;

662 if(
ch
 <= 0x7f){

663 
»qL’gth
++;

664 ++
pSrc
;

666 if(
ch
 > 0xe0) {

668 
ch
 <= 0xec &&

669 ((
pSrcLim™
 - 
pSrc
) >= 3) &&

670 (
ušt8_t
)(
pSrc
[1] - 0x80) <= 0x3f &&

671 (
ušt8_t
)(
pSrc
[2] - 0x80) <= 0x3f

673 
»qL’gth
++;

674 
pSrc
 += 3;

677 } if(
ch
 < 0xe0) {

679 
ch
 >= 0xc2 &&

680 ((
pSrcLim™
 - 
pSrc
) >= 2) &&

681 (
ušt8_t
)(
pSrc
[1] - 0x80) <= 0x3f

683 
»qL’gth
++;

684 
pSrc
 += 2;

690 ++
pSrc
;

691 
ch
=
	`utf8_ÃxtCh¬SaãBodyPoš‹r
(&
pSrc
, 
pSrcLim™
, ch);

692 if(
ch
<0 && (++
numSub¡™utiÚs
, ch = 
subch¬
) < 0){

693 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

694  
NULL
;

696 
»qL’gth
+=
	`UTF_CHAR_LENGTH
(
ch
);

701 
»qL’gth
+=(
št32_t
)(
pDe¡
 - 
de¡
);

703 if(
pNumSub¡™utiÚs
!=
NULL
) {

704 *
pNumSub¡™utiÚs
=
numSub¡™utiÚs
;

707 if(
pDe¡L’gth
){

708 *
pDe¡L’gth
 = 
»qL’gth
;

712 
	`u_‹rmš©eUCh¬s
(
de¡
,
de¡C­ac™y
,
»qL’gth
,
pE¼ÜCode
);

714  
de¡
;

715 
	}
}

717 
U_CAPI
 
UCh¬
* 
U_EXPORT2


718 
	$u_¡rFromUTF8
(
UCh¬
 *
de¡
,

719 
št32_t
 
de¡C­ac™y
,

720 
št32_t
 *
pDe¡L’gth
,

721 cÚ¡ * 
¤c
,

722 
št32_t
 
¤cL’gth
,

723 
UE¼ÜCode
 *
pE¼ÜCode
){

724  
	`u_¡rFromUTF8W™hSub
(

725 
de¡
, 
de¡C­ac™y
, 
pDe¡L’gth
,

726 
¤c
, 
¤cL’gth
,

727 
U_SENTINEL
, 
NULL
,

728 
pE¼ÜCode
);

729 
	}
}

731 
U_CAPI
 
UCh¬
 * 
U_EXPORT2


732 
	$u_¡rFromUTF8L’›Á
(
UCh¬
 *
de¡
,

733 
št32_t
 
de¡C­ac™y
,

734 
št32_t
 *
pDe¡L’gth
,

735 cÚ¡ *
¤c
,

736 
št32_t
 
¤cL’gth
,

737 
UE¼ÜCode
 *
pE¼ÜCode
) {

738 
UCh¬
 *
pDe¡
 = 
de¡
;

739 
UCh¬32
 
ch
;

740 
št32_t
 
»qL’gth
 = 0;

741 
ušt8_t
* 
pSrc
 = (ušt8_t*è
¤c
;

744 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)){

745  
NULL
;

748 ifĞ(
¤c
==
NULL
 && 
¤cL’gth
!=0) || srcLength < -1 ||

749 (
de¡C­ac™y
<0è|| (
de¡
 =ğ
NULL
 && destCapacity > 0)

751 *
pE¼ÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

752  
NULL
;

755 if(
¤cL’gth
 < 0) {

757 
UCh¬
 *
pDe¡Lim™
 = 
de¡
+
de¡C­ac™y
;

758 
ušt8_t
 
t1
, 
t2
, 
t3
;

760 ((
ch
 = *
pSrc
è!ğ0è&& (
pDe¡
 < 
pDe¡Lim™
)) {

761 if(
ch
 < 0xc0) {

767 *
pDe¡
++=(
UCh¬
)
ch
;

768 ++
pSrc
;

770 } if(
ch
 < 0xe0) {

771 if((
t1
 = 
pSrc
[1]) != 0) {

773 *
pDe¡
++ = (
UCh¬
)((
ch
 << 6è+ 
t1
 - 0x3080);

774 
pSrc
 += 2;

777 } if(
ch
 < 0xf0) {

778 if((
t1
 = 
pSrc
[1]è!ğ0 && (
t2
 =…Src[2]) != 0) {

781 *
pDe¡
++ = (
UCh¬
)((
ch
 << 12è+ (
t1
 << 6è+ 
t2
 - 0x2080);

782 
pSrc
 += 3;

786 if((
t1
 = 
pSrc
[1]è!ğ0 && (
t2
 =…Src[2]è!ğ0 && (
t3
 =…Src[3]) != 0) {

787 
pSrc
 += 4;

789 
ch
 = (ch << 18è+ (
t1
 << 12è+ (
t2
 << 6è+ 
t3
 - 0x3c82080;

790 *(
pDe¡
++èğ
	`U16_LEAD
(
ch
);

791 if(
pDe¡
 < 
pDe¡Lim™
) {

792 *(
pDe¡
++èğ
	`U16_TRAIL
(
ch
);

794 
»qL’gth
 = 1;

802 *
pDe¡
++ = 0xfffd;

803 *++
pSrc
 != 0) {}

808 (
ch
 = *
pSrc
) != 0) {

809 if(
ch
 < 0xc0) {

815 ++
»qL’gth
;

816 ++
pSrc
;

818 } if(
ch
 < 0xe0) {

819 if(
pSrc
[1] != 0) {

820 ++
»qL’gth
;

821 
pSrc
 += 2;

824 } if(
ch
 < 0xf0) {

825 if(
pSrc
[1] != 0 &&…Src[2] != 0) {

826 ++
»qL’gth
;

827 
pSrc
 += 3;

831 if(
pSrc
[1] != 0 &&…Src[2] != 0 &&…Src[3] != 0) {

832 
»qL’gth
 += 2;

833 
pSrc
 += 4;

839 ++
»qL’gth
;

843 cÚ¡ 
ušt8_t
 *
pSrcLim™
 = 
pSrc
 + 
¤cL’gth
;

850 if(
de¡C­ac™y
 < 
¤cL’gth
) {

851 if(
pDe¡L’gth
 !ğ
NULL
) {

852 *
pDe¡L’gth
 = 
¤cL’gth
;

854 *
pE¼ÜCode
 = 
U_BUFFER_OVERFLOW_ERROR
;

855  
NULL
;

858 if((
pSrcLim™
 - 
pSrc
) >= 4) {

859 
pSrcLim™
 -= 3;

863 
ch
 = *
pSrc
++;

864 if(
ch
 < 0xc0) {

870 *
pDe¡
++=(
UCh¬
)
ch
;

871 } if(
ch
 < 0xe0) {

873 *
pDe¡
++ = (
UCh¬
)((
ch
 << 6è+ *
pSrc
++ - 0x3080);

874 } if(
ch
 < 0xf0) {

877 
ch
 = (ch << 12è+ (*
pSrc
++ << 6);

878 *
pDe¡
++ = (
UCh¬
)(
ch
 + *
pSrc
++ - 0x2080);

881 
ch
 = (ch << 18è+ (*
pSrc
++ << 12);

882 
ch
 +ğ*
pSrc
++ << 6;

883 
ch
 +ğ*
pSrc
++ - 0x3c82080;

884 *(
pDe¡
++èğ
	`U16_LEAD
(
ch
);

885 *(
pDe¡
++èğ
	`U16_TRAIL
(
ch
);

887 } 
pSrc
 < 
pSrcLim™
);

889 
pSrcLim™
 += 3;

892 
pSrc
 < 
pSrcLim™
) {

893 
ch
 = *
pSrc
++;

894 if(
ch
 < 0xc0) {

900 *
pDe¡
++=(
UCh¬
)
ch
;

902 } if(
ch
 < 0xe0) {

903 if(
pSrc
 < 
pSrcLim™
) {

905 *
pDe¡
++ = (
UCh¬
)((
ch
 << 6è+ *
pSrc
++ - 0x3080);

908 } if(
ch
 < 0xf0) {

909 if((
pSrcLim™
 - 
pSrc
) >= 2) {

912 
ch
 = (ch << 12è+ (*
pSrc
++ << 6);

913 *
pDe¡
++ = (
UCh¬
)(
ch
 + *
pSrc
++ - 0x2080);

914 
pSrc
 += 3;

918 if((
pSrcLim™
 - 
pSrc
) >= 3) {

920 
ch
 = (ch << 18è+ (*
pSrc
++ << 12);

921 
ch
 +ğ*
pSrc
++ << 6;

922 
ch
 +ğ*
pSrc
++ - 0x3c82080;

923 *(
pDe¡
++èğ
	`U16_LEAD
(
ch
);

924 *(
pDe¡
++èğ
	`U16_TRAIL
(
ch
);

925 
pSrc
 += 4;

931 *
pDe¡
++ = 0xfffd;

936 
»qL’gth
+=(
št32_t
)(
pDe¡
 - 
de¡
);

938 if(
pDe¡L’gth
){

939 *
pDe¡L’gth
 = 
»qL’gth
;

943 
	`u_‹rmš©eUCh¬s
(
de¡
,
de¡C­ac™y
,
»qL’gth
,
pE¼ÜCode
);

945  
de¡
;

946 
	}
}

948 
U_INLINE
 
ušt8_t
 *

949 
	$_­³ndUTF8
(
ušt8_t
 *
pDe¡
, 
UCh¬32
 
c
) {

951 if((
c
)<=0x7f) {

952 *
pDe¡
++=(
ušt8_t
)
c
;

953 } if(
c
<=0x7ff) {

954 *
pDe¡
++=(
ušt8_t
)((
c
>>6)|0xc0);

955 *
pDe¡
++=(
ušt8_t
)((
c
&0x3f)|0x80);

956 } if(
c
<=0xffff) {

957 *
pDe¡
++=(
ušt8_t
)((
c
>>12)|0xe0);

958 *
pDe¡
++=(
ušt8_t
)(((
c
>>6)&0x3f)|0x80);

959 *
pDe¡
++=(
ušt8_t
)(((
c
)&0x3f)|0x80);

961 *
pDe¡
++=(
ušt8_t
)(((
c
)>>18)|0xf0);

962 *
pDe¡
++=(
ušt8_t
)((((
c
)>>12)&0x3f)|0x80);

963 *
pDe¡
++=(
ušt8_t
)((((
c
)>>6)&0x3f)|0x80);

964 *
pDe¡
++=(
ušt8_t
)(((
c
)&0x3f)|0x80);

966  
pDe¡
;

967 
	}
}

970 
U_CAPI
 * 
U_EXPORT2


971 
	$u_¡rToUTF8W™hSub
(*
de¡
,

972 
št32_t
 
de¡C­ac™y
,

973 
št32_t
 *
pDe¡L’gth
,

974 cÚ¡ 
UCh¬
 *
pSrc
,

975 
št32_t
 
¤cL’gth
,

976 
UCh¬32
 
subch¬
, 
št32_t
 *
pNumSub¡™utiÚs
,

977 
UE¼ÜCode
 *
pE¼ÜCode
){

978 
št32_t
 
»qL’gth
=0;

979 
ušt32_t
 
ch
=0,
ch2
=0;

980 
ušt8_t
 *
pDe¡
 = (ušt8_ˆ*)
de¡
;

981 
ušt8_t
 *
pDe¡Lim™
 = 
pDe¡
 + 
de¡C­ac™y
;

982 
št32_t
 
numSub¡™utiÚs
;

985 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)){

986  
NULL
;

989 ifĞ(
pSrc
==
NULL
 && 
¤cL’gth
!=0) || srcLength < -1 ||

990 (
de¡C­ac™y
<0è|| (
de¡
 =ğ
NULL
 && destCapacity > 0) ||

991 
subch¬
 > 0x10fffà|| 
	`U_IS_SURROGATE
(subchar)

993 *
pE¼ÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

994  
NULL
;

997 if(
pNumSub¡™utiÚs
!=
NULL
) {

998 *
pNumSub¡™utiÚs
=0;

1000 
numSub¡™utiÚs
=0;

1002 if(
¤cL’gth
==-1) {

1003 (
ch
=*
pSrc
)!=0) {

1004 ++
pSrc
;

1005 if(
ch
 <= 0x7f) {

1006 if(
pDe¡
<
pDe¡Lim™
) {

1007 *
pDe¡
++ = (
ušt8_t
)
ch
;

1009 
»qL’gth
 = 1;

1012 } if(
ch
 <= 0x7ff) {

1013 if((
pDe¡Lim™
 - 
pDe¡
) >= 2) {

1014 *
pDe¡
++=(
ušt8_t
)((
ch
>>6)|0xc0);

1015 *
pDe¡
++=(
ušt8_t
)((
ch
&0x3f)|0x80);

1017 
»qL’gth
 = 2;

1020 } if(
ch
 <= 0xd7ff || ch >= 0xe000) {

1021 if((
pDe¡Lim™
 - 
pDe¡
) >= 3) {

1022 *
pDe¡
++=(
ušt8_t
)((
ch
>>12)|0xe0);

1023 *
pDe¡
++=(
ušt8_t
)(((
ch
>>6)&0x3f)|0x80);

1024 *
pDe¡
++=(
ušt8_t
)((
ch
&0x3f)|0x80);

1026 
»qL’gth
 = 3;

1030 
št32_t
 
Ëngth
;

1033 if(
	`UTF_IS_SURROGATE_FIRST
(
ch
è&& 
	`UTF_IS_TRAIL
(
ch2
=*
pSrc
)) {

1034 ++
pSrc
;

1035 
ch
=
	`UTF16_GET_PAIR_VALUE
(ch, 
ch2
);

1036 } if(
subch¬
>=0) {

1037 
ch
=
subch¬
;

1038 ++
numSub¡™utiÚs
;

1041 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

1042  
NULL
;

1045 
Ëngth
 = 
	`U8_LENGTH
(
ch
);

1046 if((
pDe¡Lim™
 - 
pDe¡
è>ğ
Ëngth
) {

1048 
pDe¡
=
	`_­³ndUTF8
ÕDe¡, 
ch
);

1050 
»qL’gth
 = 
Ëngth
;

1055 (
ch
=*
pSrc
++)!=0) {

1056 if(
ch
<=0x7f) {

1057 ++
»qL’gth
;

1058 } if(
ch
<=0x7ff) {

1059 
»qL’gth
+=2;

1060 } if(!
	`UTF_IS_SURROGATE
(
ch
)) {

1061 
»qL’gth
+=3;

1062 } if(
	`UTF_IS_SURROGATE_FIRST
(
ch
è&& 
	`UTF_IS_TRAIL
(
ch2
=*
pSrc
)) {

1063 ++
pSrc
;

1064 
»qL’gth
+=4;

1065 } if(
subch¬
>=0) {

1066 
»qL’gth
+=
	`U8_LENGTH
(
subch¬
);

1067 ++
numSub¡™utiÚs
;

1070 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

1071  
NULL
;

1075 cÚ¡ 
UCh¬
 *
pSrcLim™
 = 
pSrc
+
¤cL’gth
;

1076 
št32_t
 
couÁ
;

1086 
couÁ
 = (
št32_t
)((
pDe¡Lim™
 - 
pDe¡
) / 3);

1087 
¤cL’gth
 = (
št32_t
)(
pSrcLim™
 - 
pSrc
);

1088 if(
couÁ
 > 
¤cL’gth
) {

1089 
couÁ
 = 
¤cL’gth
;

1091 if(
couÁ
 < 3) {

1099 
ch
=*
pSrc
++;

1100 if(
ch
 <= 0x7f) {

1101 *
pDe¡
++ = (
ušt8_t
)
ch
;

1102 } if(
ch
 <= 0x7ff) {

1103 *
pDe¡
++=(
ušt8_t
)((
ch
>>6)|0xc0);

1104 *
pDe¡
++=(
ušt8_t
)((
ch
&0x3f)|0x80);

1105 } if(
ch
 <= 0xd7ff || ch >= 0xe000) {

1106 *
pDe¡
++=(
ušt8_t
)((
ch
>>12)|0xe0);

1107 *
pDe¡
++=(
ušt8_t
)(((
ch
>>6)&0x3f)|0x80);

1108 *
pDe¡
++=(
ušt8_t
)((
ch
&0x3f)|0x80);

1115 if(--
couÁ
 == 0) {

1116 --
pSrc
;

1120 if(
	`UTF_IS_SURROGATE_FIRST
(
ch
è&& 
	`UTF_IS_TRAIL
(
ch2
=*
pSrc
)) {

1121 ++
pSrc
;

1122 
ch
=
	`UTF16_GET_PAIR_VALUE
(ch, 
ch2
);

1125 *
pDe¡
++=(
ušt8_t
)((
ch
>>18)|0xf0);

1126 *
pDe¡
++=(
ušt8_t
)(((
ch
>>12)&0x3f)|0x80);

1127 *
pDe¡
++=(
ušt8_t
)(((
ch
>>6)&0x3f)|0x80);

1128 *
pDe¡
++=(
ušt8_t
)((
ch
&0x3f)|0x80);

1131 if(
subch¬
>=0) {

1132 
ch
=
subch¬
;

1133 ++
numSub¡™utiÚs
;

1135 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

1136  
NULL
;

1140 
pDe¡
=
	`_­³ndUTF8
ÕDe¡, 
ch
);

1143 } --
couÁ
 > 0);

1146 
pSrc
<
pSrcLim™
) {

1147 
ch
=*
pSrc
++;

1148 if(
ch
 <= 0x7f) {

1149 if(
pDe¡
<
pDe¡Lim™
) {

1150 *
pDe¡
++ = (
ušt8_t
)
ch
;

1152 
»qL’gth
 = 1;

1155 } if(
ch
 <= 0x7ff) {

1156 if((
pDe¡Lim™
 - 
pDe¡
) >= 2) {

1157 *
pDe¡
++=(
ušt8_t
)((
ch
>>6)|0xc0);

1158 *
pDe¡
++=(
ušt8_t
)((
ch
&0x3f)|0x80);

1160 
»qL’gth
 = 2;

1163 } if(
ch
 <= 0xd7ff || ch >= 0xe000) {

1164 if((
pDe¡Lim™
 - 
pDe¡
) >= 3) {

1165 *
pDe¡
++=(
ušt8_t
)((
ch
>>12)|0xe0);

1166 *
pDe¡
++=(
ušt8_t
)(((
ch
>>6)&0x3f)|0x80);

1167 *
pDe¡
++=(
ušt8_t
)((
ch
&0x3f)|0x80);

1169 
»qL’gth
 = 3;

1173 
št32_t
 
Ëngth
;

1175 if(
	`UTF_IS_SURROGATE_FIRST
(
ch
è&& 
pSrc
<
pSrcLim™
 && 
	`UTF_IS_TRAIL
(
ch2
=*pSrc)) {

1176 ++
pSrc
;

1177 
ch
=
	`UTF16_GET_PAIR_VALUE
(ch, 
ch2
);

1178 } if(
subch¬
>=0) {

1179 
ch
=
subch¬
;

1180 ++
numSub¡™utiÚs
;

1183 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

1184  
NULL
;

1187 
Ëngth
 = 
	`U8_LENGTH
(
ch
);

1188 if((
pDe¡Lim™
 - 
pDe¡
è>ğ
Ëngth
) {

1190 
pDe¡
=
	`_­³ndUTF8
ÕDe¡, 
ch
);

1192 
»qL’gth
 = 
Ëngth
;

1197 
pSrc
<
pSrcLim™
) {

1198 
ch
=*
pSrc
++;

1199 if(
ch
<=0x7f) {

1200 ++
»qL’gth
;

1201 } if(
ch
<=0x7ff) {

1202 
»qL’gth
+=2;

1203 } if(!
	`UTF_IS_SURROGATE
(
ch
)) {

1204 
»qL’gth
+=3;

1205 } if(
	`UTF_IS_SURROGATE_FIRST
(
ch
è&& 
pSrc
<
pSrcLim™
 && 
	`UTF_IS_TRAIL
(
ch2
=*pSrc)) {

1206 ++
pSrc
;

1207 
»qL’gth
+=4;

1208 } if(
subch¬
>=0) {

1209 
»qL’gth
+=
	`U8_LENGTH
(
subch¬
);

1210 ++
numSub¡™utiÚs
;

1213 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

1214  
NULL
;

1219 
»qL’gth
+=(
št32_t
)(
pDe¡
 - (
ušt8_t
 *)
de¡
);

1221 if(
pNumSub¡™utiÚs
!=
NULL
) {

1222 *
pNumSub¡™utiÚs
=
numSub¡™utiÚs
;

1225 if(
pDe¡L’gth
){

1226 *
pDe¡L’gth
 = 
»qL’gth
;

1230 
	`u_‹rmš©eCh¬s
(
de¡
, 
de¡C­ac™y
, 
»qL’gth
, 
pE¼ÜCode
);

1231  
de¡
;

1232 
	}
}

1234 
U_CAPI
 * 
U_EXPORT2


1235 
	$u_¡rToUTF8
(*
de¡
,

1236 
št32_t
 
de¡C­ac™y
,

1237 
št32_t
 *
pDe¡L’gth
,

1238 cÚ¡ 
UCh¬
 *
pSrc
,

1239 
št32_t
 
¤cL’gth
,

1240 
UE¼ÜCode
 *
pE¼ÜCode
){

1241  
	`u_¡rToUTF8W™hSub
(

1242 
de¡
, 
de¡C­ac™y
, 
pDe¡L’gth
,

1243 
pSrc
, 
¤cL’gth
,

1244 
U_SENTINEL
, 
NULL
,

1245 
pE¼ÜCode
);

1246 
	}
}

1248 
U_CAPI
 
UCh¬
* 
U_EXPORT2


1249 
	$u_¡rFromJavaModif›dUTF8W™hSub
(

1250 
UCh¬
 *
de¡
,

1251 
št32_t
 
de¡C­ac™y
,

1252 
št32_t
 *
pDe¡L’gth
,

1253 cÚ¡ *
¤c
,

1254 
št32_t
 
¤cL’gth
,

1255 
UCh¬32
 
subch¬
, 
št32_t
 *
pNumSub¡™utiÚs
,

1256 
UE¼ÜCode
 *
pE¼ÜCode
) {

1257 
UCh¬
 *
pDe¡
 = 
de¡
;

1258 
UCh¬
 *
pDe¡Lim™
 = 
de¡
+
de¡C­ac™y
;

1259 
UCh¬32
 
ch
;

1260 
št32_t
 
»qL’gth
 = 0;

1261 cÚ¡ 
ušt8_t
* 
pSrc
 = (cÚ¡ ušt8_t*è
¤c
;

1262 cÚ¡ 
ušt8_t
 *
pSrcLim™
;

1263 
št32_t
 
couÁ
;

1264 
ušt8_t
 
t1
, 
t2
;

1265 
št32_t
 
numSub¡™utiÚs
;

1268 if(
	`U_FAILURE
(*
pE¼ÜCode
)){

1269  
NULL
;

1271 ifĞ(
¤c
==
NULL
 && 
¤cL’gth
!=0) || srcLength < -1 ||

1272 (
de¡
==
NULL
 && 
de¡C­ac™y
!=0) || destCapacity<0 ||

1273 
subch¬
 > 0x10fffà|| 
	`U_IS_SURROGATE
(subchar)

1275 *
pE¼ÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1276  
NULL
;

1279 if(
pNumSub¡™utiÚs
!=
NULL
) {

1280 *
pNumSub¡™utiÚs
=0;

1282 
numSub¡™utiÚs
=0;

1284 if(
¤cL’gth
 < 0) {

1289 ((
ch
 = *
pSrc
è!ğ0è&& ch <ğ0x7à&& (
pDe¡
 < 
pDe¡Lim™
)) {

1290 *
pDe¡
++=(
UCh¬
)
ch
;

1291 ++
pSrc
;

1293 if(
ch
 == 0) {

1294 
»qL’gth
=(
št32_t
)(
pDe¡
 - 
de¡
);

1295 if(
pDe¡L’gth
) {

1296 *
pDe¡L’gth
 = 
»qL’gth
;

1300 
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
»qL’gth
, 
pE¼ÜCode
);

1301  
de¡
;

1303 
¤cL’gth
 = 
	`u´v_¡¾’
((cÚ¡ *)
pSrc
);

1307 
pSrcLim™
 = 
pSrc
 + 
¤cL’gth
;

1309 
couÁ
 = (
št32_t
)(
pDe¡Lim™
 - 
pDe¡
);

1310 
¤cL’gth
 = (
št32_t
)(
pSrcLim™
 - 
pSrc
);

1311 if(
couÁ
 >ğ
¤cL’gth
 && srcL’gth > 0 && *
pSrc
 <= 0x7f) {

1313 cÚ¡ 
ušt8_t
 *
´evSrc
 = 
pSrc
;

1314 
št32_t
 
d–
;

1315 
pSrc
 < 
pSrcLim™
 && (
ch
 = *pSrc) <= 0x7f) {

1316 *
pDe¡
++=(
UCh¬
)
ch
;

1317 ++
pSrc
;

1319 
d–
 = (
št32_t
)(
pSrc
 - 
´evSrc
);

1320 
couÁ
 -ğ
d–
;

1321 
¤cL’gth
 -ğ
d–
;

1327 
¤cL’gth
 /= 3;

1328 if(
couÁ
 > 
¤cL’gth
) {

1329 
couÁ
 = 
¤cL’gth
;

1331 if(
couÁ
 < 3) {

1339 
ch
 = *
pSrc
;

1340 if(
ch
 <= 0x7f){

1341 *
pDe¡
++=(
UCh¬
)
ch
;

1342 ++
pSrc
;

1344 if(
ch
 >= 0xe0) {

1346 
ch
 <= 0xef &&

1347 (
t1
 = (
ušt8_t
)(
pSrc
[1] - 0x80)) <= 0x3f &&

1348 (
t2
 = (
ušt8_t
)(
pSrc
[2] - 0x80)) <= 0x3f

1351 *
pDe¡
++ = (
UCh¬
)((
ch
 << 12è| (
t1
 << 6è| 
t2
);

1352 
pSrc
 += 3;

1357 
ch
 >= 0xc0 &&

1358 (
t1
 = (
ušt8_t
)(
pSrc
[1] - 0x80)) <= 0x3f

1360 *
pDe¡
++ = (
UCh¬
)(((
ch
 & 0x1fè<< 6è| 
t1
);

1361 
pSrc
 += 2;

1366 if(
subch¬
 < 0) {

1367 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

1368  
NULL
;

1369 } if(
subch¬
 > 0xfffà&& --
couÁ
 == 0) {

1377 ++
pSrc
;

1378 
	`utf8_ÃxtCh¬SaãBodyPoš‹r
(&
pSrc
, 
pSrcLim™
, 
ch
);

1379 ++
numSub¡™utiÚs
;

1380 if(
subch¬
<=0xFFFF) {

1381 *(
pDe¡
++)=(
UCh¬
)
subch¬
;

1383 *(
pDe¡
++)=
	`U16_LEAD
(
subch¬
);

1384 *(
pDe¡
++)=
	`U16_TRAIL
(
subch¬
);

1388 } --
couÁ
 > 0);

1391 (
pSrc
<
pSrcLim™
è&& (
pDe¡
<
pDe¡Lim™
)) {

1392 
ch
 = *
pSrc
;

1393 if(
ch
 <= 0x7f){

1394 *
pDe¡
++=(
UCh¬
)
ch
;

1395 ++
pSrc
;

1397 if(
ch
 >= 0xe0) {

1399 
ch
 <= 0xef &&

1400 ((
pSrcLim™
 - 
pSrc
) >= 3) &&

1401 (
t1
 = (
ušt8_t
)(
pSrc
[1] - 0x80)) <= 0x3f &&

1402 (
t2
 = (
ušt8_t
)(
pSrc
[2] - 0x80)) <= 0x3f

1405 *
pDe¡
++ = (
UCh¬
)((
ch
 << 12è| (
t1
 << 6è| 
t2
);

1406 
pSrc
 += 3;

1411 
ch
 >= 0xc0 &&

1412 ((
pSrcLim™
 - 
pSrc
) >= 2) &&

1413 (
t1
 = (
ušt8_t
)(
pSrc
[1] - 0x80)) <= 0x3f

1415 *
pDe¡
++ = (
UCh¬
)(((
ch
 & 0x1fè<< 6è| 
t1
);

1416 
pSrc
 += 2;

1421 if(
subch¬
 < 0) {

1422 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

1423  
NULL
;

1426 ++
pSrc
;

1427 
	`utf8_ÃxtCh¬SaãBodyPoš‹r
(&
pSrc
, 
pSrcLim™
, 
ch
);

1428 ++
numSub¡™utiÚs
;

1429 if(
subch¬
<=0xFFFF) {

1430 *(
pDe¡
++)=(
UCh¬
)
subch¬
;

1432 *(
pDe¡
++)=
	`U16_LEAD
(
subch¬
);

1433 if(
pDe¡
<
pDe¡Lim™
) {

1434 *(
pDe¡
++)=
	`U16_TRAIL
(
subch¬
);

1436 
»qL’gth
++;

1445 
pSrc
 < 
pSrcLim™
){

1446 
ch
 = *
pSrc
;

1447 if(
ch
 <= 0x7f) {

1448 
»qL’gth
++;

1449 ++
pSrc
;

1451 if(
ch
 >= 0xe0) {

1453 
ch
 <= 0xef &&

1454 ((
pSrcLim™
 - 
pSrc
) >= 3) &&

1455 (
ušt8_t
)(
pSrc
[1] - 0x80) <= 0x3f &&

1456 (
ušt8_t
)(
pSrc
[2] - 0x80) <= 0x3f

1458 
»qL’gth
++;

1459 
pSrc
 += 3;

1464 
ch
 >= 0xc0 &&

1465 ((
pSrcLim™
 - 
pSrc
) >= 2) &&

1466 (
ušt8_t
)(
pSrc
[1] - 0x80) <= 0x3f

1468 
»qL’gth
++;

1469 
pSrc
 += 2;

1474 if(
subch¬
 < 0) {

1475 *
pE¼ÜCode
 = 
U_INVALID_CHAR_FOUND
;

1476  
NULL
;

1479 ++
pSrc
;

1480 
	`utf8_ÃxtCh¬SaãBodyPoš‹r
(&
pSrc
, 
pSrcLim™
, 
ch
);

1481 ++
numSub¡™utiÚs
;

1482 
»qL’gth
+=
	`U16_LENGTH
(
ch
);

1487 if(
pNumSub¡™utiÚs
!=
NULL
) {

1488 *
pNumSub¡™utiÚs
=
numSub¡™utiÚs
;

1491 
»qL’gth
+=(
št32_t
)(
pDe¡
 - 
de¡
);

1492 if(
pDe¡L’gth
) {

1493 *
pDe¡L’gth
 = 
»qL’gth
;

1497 
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
»qL’gth
, 
pE¼ÜCode
);

1498  
de¡
;

1499 
	}
}

1501 
U_CAPI
 * 
U_EXPORT2


1502 
	$u_¡rToJavaModif›dUTF8
(

1503 *
de¡
,

1504 
št32_t
 
de¡C­ac™y
,

1505 
št32_t
 *
pDe¡L’gth
,

1506 cÚ¡ 
UCh¬
 *
¤c
,

1507 
št32_t
 
¤cL’gth
,

1508 
UE¼ÜCode
 *
pE¼ÜCode
) {

1509 
št32_t
 
»qL’gth
=0;

1510 
ušt32_t
 
ch
=0;

1511 
ušt8_t
 *
pDe¡
 = (ušt8_ˆ*)
de¡
;

1512 
ušt8_t
 *
pDe¡Lim™
 = 
pDe¡
 + 
de¡C­ac™y
;

1513 cÚ¡ 
UCh¬
 *
pSrcLim™
;

1514 
št32_t
 
couÁ
;

1517 if(
	`U_FAILURE
(*
pE¼ÜCode
)){

1518  
NULL
;

1520 ifĞ(
¤c
==
NULL
 && 
¤cL’gth
!=0) || srcLength < -1 ||

1521 (
de¡
==
NULL
 && 
de¡C­ac™y
!=0) || destCapacity<0

1523 *
pE¼ÜCode
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

1524  
NULL
;

1527 if(
¤cL’gth
==-1) {

1529 (
ch
=*
¤c
)<=0x7à&& ch !ğ0 && 
pDe¡
<
pDe¡Lim™
) {

1530 *
pDe¡
++ = (
ušt8_t
)
ch
;

1531 ++
¤c
;

1533 if(
ch
 == 0) {

1534 
»qL’gth
=(
št32_t
)(
pDe¡
 - (
ušt8_t
 *)
de¡
);

1535 if(
pDe¡L’gth
) {

1536 *
pDe¡L’gth
 = 
»qL’gth
;

1540 
	`u_‹rmš©eCh¬s
(
de¡
, 
de¡C­ac™y
, 
»qL’gth
, 
pE¼ÜCode
);

1541  
de¡
;

1543 
¤cL’gth
 = 
	`u_¡¾’
(
¤c
);

1547 
pSrcLim™
 = 
¤c
+
¤cL’gth
;

1549 
couÁ
 = (
št32_t
)(
pDe¡Lim™
 - 
pDe¡
);

1550 
¤cL’gth
 = (
št32_t
)(
pSrcLim™
 - 
¤c
);

1551 if(
couÁ
 >ğ
¤cL’gth
 && srcL’gth > 0 && *
¤c
 <= 0x7f) {

1553 cÚ¡ 
UCh¬
 *
´evSrc
 = 
¤c
;

1554 
št32_t
 
d–
;

1555 
¤c
 < 
pSrcLim™
 && (
ch
 = *src) <= 0x7f && ch != 0) {

1556 *
pDe¡
++=(
ušt8_t
)
ch
;

1557 ++
¤c
;

1559 
d–
 = (
št32_t
)(
¤c
 - 
´evSrc
);

1560 
couÁ
 -ğ
d–
;

1561 
¤cL’gth
 -ğ
d–
;

1567 
couÁ
 /= 3;

1568 if(
couÁ
 > 
¤cL’gth
) {

1569 
couÁ
 = 
¤cL’gth
;

1571 if(
couÁ
 < 3) {

1579 
ch
=*
¤c
++;

1580 if(
ch
 <= 0x7f && ch != 0) {

1581 *
pDe¡
++ = (
ušt8_t
)
ch
;

1582 } if(
ch
 <= 0x7ff) {

1583 *
pDe¡
++=(
ušt8_t
)((
ch
>>6)|0xc0);

1584 *
pDe¡
++=(
ušt8_t
)((
ch
&0x3f)|0x80);

1586 *
pDe¡
++=(
ušt8_t
)((
ch
>>12)|0xe0);

1587 *
pDe¡
++=(
ušt8_t
)(((
ch
>>6)&0x3f)|0x80);

1588 *
pDe¡
++=(
ušt8_t
)((
ch
&0x3f)|0x80);

1590 } --
couÁ
 > 0);

1593 
¤c
<
pSrcLim™
) {

1594 
ch
=*
¤c
++;

1595 if(
ch
 <= 0x7f && ch != 0) {

1596 if(
pDe¡
<
pDe¡Lim™
) {

1597 *
pDe¡
++ = (
ušt8_t
)
ch
;

1599 
»qL’gth
 = 1;

1602 } if(
ch
 <= 0x7ff) {

1603 if((
pDe¡Lim™
 - 
pDe¡
) >= 2) {

1604 *
pDe¡
++=(
ušt8_t
)((
ch
>>6)|0xc0);

1605 *
pDe¡
++=(
ušt8_t
)((
ch
&0x3f)|0x80);

1607 
»qL’gth
 = 2;

1611 if((
pDe¡Lim™
 - 
pDe¡
) >= 3) {

1612 *
pDe¡
++=(
ušt8_t
)((
ch
>>12)|0xe0);

1613 *
pDe¡
++=(
ušt8_t
)(((
ch
>>6)&0x3f)|0x80);

1614 *
pDe¡
++=(
ušt8_t
)((
ch
&0x3f)|0x80);

1616 
»qL’gth
 = 3;

1621 
¤c
<
pSrcLim™
) {

1622 
ch
=*
¤c
++;

1623 if(
ch
 <= 0x7f && ch != 0) {

1624 ++
»qL’gth
;

1625 } if(
ch
<=0x7ff) {

1626 
»qL’gth
+=2;

1628 
»qL’gth
+=3;

1632 
»qL’gth
+=(
št32_t
)(
pDe¡
 - (
ušt8_t
 *)
de¡
);

1633 if(
pDe¡L’gth
){

1634 *
pDe¡L’gth
 = 
»qL’gth
;

1638 
	`u_‹rmš©eCh¬s
(
de¡
, 
de¡C­ac™y
, 
»qL’gth
, 
pE¼ÜCode
);

1639  
de¡
;

1640 
	}
}

	@utext.cpp

17 
	~"unicode/uty³s.h
"

18 
	~"unicode/u¡ršg.h
"

19 
	~"unicode/uni¡r.h
"

20 
	~"unicode/ch¬™”.h
"

21 
	~"unicode/u‹xt.h
"

22 
	~"u¡r_imp.h
"

23 
	~"cmemÜy.h
"

24 
	~"c¡ršg.h
"

25 
	~"uas£¹.h
"

26 
	~"putimp.h
"

28 
	gU_NAMESPACE_USE


30 
	#I32_FLAG
(
b™Index
è((
št32_t
)1<<(b™Index))

	)

33 
UBoŞ


34 
	$u‹xt_acûss
(
UText
 *
ut
, 
št64_t
 
šdex
, 
UBoŞ
 
fÜw¬d
) {

35  
ut
->
pFuncs
->
	`acûss
(ut, 
šdex
, 
fÜw¬d
);

36 
	}
}

40 
U_CAPI
 
UBoŞ
 
U_EXPORT2


41 
	$u‹xt_moveIndex32
(
UText
 *
ut
, 
št32_t
 
d–
) {

42 
UCh¬32
 
c
;

43 ià(
d–
 > 0) {

45 if(
ut
->
chunkOff£t
>=ut->
chunkL’gth
 && !
	`u‹xt_acûss
(ut, ut->
chunkN©iveLim™
, 
TRUE
)) {

46  
FALSE
;

48 
c
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
];

49 ià(
	`U16_IS_SURROGATE
(
c
)) {

50 
c
 = 
	`u‹xt_Ãxt32
(
ut
);

51 ià(
c
 =ğ
U_SENTINEL
) {

52  
FALSE
;

55 
ut
->
chunkOff£t
++;

57 } --
d–
>0);

59 } ià(
d–
<0) {

61 if(
ut
->
chunkOff£t
<=0 && !
	`u‹xt_acûss
(ut, ut->
chunkN©iveS¹
, 
FALSE
)) {

62  
FALSE
;

64 
c
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
-1];

65 ià(
	`U16_IS_SURROGATE
(
c
)) {

66 
c
 = 
	`u‹xt_´evious32
(
ut
);

67 ià(
c
 =ğ
U_SENTINEL
) {

68  
FALSE
;

71 
ut
->
chunkOff£t
--;

73 } ++
d–
<0);

76  
TRUE
;

77 
	}
}

80 
U_CAPI
 
št64_t
 
U_EXPORT2


81 
	$u‹xt_ÇtiveL’gth
(
UText
 *
ut
) {

82  
ut
->
pFuncs
->
	`ÇtiveL’gth
(ut);

83 
	}
}

86 
U_CAPI
 
UBoŞ
 
U_EXPORT2


87 
	$u‹xt_isL’gthEx³nsive
(cÚ¡ 
UText
 *
ut
) {

88 
UBoŞ
 
r
 = (
ut
->
´ovid”Prİ”t›s
 & 
	`I32_FLAG
(
UTEXT_PROVIDER_LENGTH_IS_EXPENSIVE
)) != 0;

89  
r
;

90 
	}
}

93 
U_CAPI
 
št64_t
 
U_EXPORT2


94 
	$u‹xt_g‘N©iveIndex
(cÚ¡ 
UText
 *
ut
) {

95 if(
ut
->
chunkOff£t
 <ğut->
ÇtiveIndexšgLim™
) {

96  
ut
->
chunkN©iveS¹
+ut->
chunkOff£t
;

98  
ut
->
pFuncs
->
	`m­Off£tToN©ive
(ut);

100 
	}
}

103 
U_CAPI
 
U_EXPORT2


104 
	$u‹xt_£tN©iveIndex
(
UText
 *
ut
, 
št64_t
 
šdex
) {

105 if(
šdex
<
ut
->
chunkN©iveS¹
 || index>=ut->
chunkN©iveLim™
) {

110 
ut
->
pFuncs
->
	`acûss
(ut, 
šdex
, 
TRUE
);

111 } if((
št32_t
)(
šdex
 - 
ut
->
chunkN©iveS¹
è<ğut->
ÇtiveIndexšgLim™
) {

113 
ut
->
chunkOff£t
=(
št32_t
)(
šdex
-ut->
chunkN©iveS¹
);

115 
ut
->
chunkOff£t
=ut->
pFuncs
->
	`m­N©iveIndexToUTF16
(ut, 
šdex
);

119 ià(
ut
->
chunkOff£t
<ut->
chunkL’gth
) {

120 
UCh¬
 
c
ğ
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
];

121 ià(
	`UTF16_IS_TRAIL
(
c
)) {

122 ià(
ut
->
chunkOff£t
==0) {

123 
ut
->
pFuncs
->
	`acûss
(ut, ut->
chunkN©iveS¹
, 
FALSE
);

125 ià(
ut
->
chunkOff£t
>0) {

126 
UCh¬
 
Ëad
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
-1];

127 ià(
	`UTF16_IS_LEAD
(
Ëad
)) {

128 
ut
->
chunkOff£t
--;

133 
	}
}

137 
U_CAPI
 
št64_t
 
U_EXPORT2


138 
	$u‹xt_g‘P»viousN©iveIndex
(
UText
 *
ut
) {

144 
št32_t
 
i
 = 
ut
->
chunkOff£t
 - 1;

145 
št64_t
 
»suÉ
;

146 ià(
i
 >= 0) {

147 
UCh¬
 
c
 = 
ut
->
chunkCÚ‹Ás
[
i
];

148 ià(
	`U16_IS_TRAIL
(
c
è=ğ
FALSE
) {

149 ià(
i
 <ğ
ut
->
ÇtiveIndexšgLim™
) {

150 
»suÉ
 = 
ut
->
chunkN©iveS¹
 + 
i
;

152 
ut
->
chunkOff£t
 = 
i
;

153 
»suÉ
 = 
ut
->
pFuncs
->
	`m­Off£tToN©ive
(ut);

154 
ut
->
chunkOff£t
++;

156  
»suÉ
;

161 ià(
ut
->
chunkOff£t
==0 && ut->
chunkN©iveS¹
==0) {

168 
	`u‹xt_´evious32
(
ut
);

169 
»suÉ
 = 
	`UTEXT_GETNATIVEINDEX
(
ut
);

170 
	`u‹xt_Ãxt32
(
ut
);

171  
»suÉ
;

172 
	}
}

180 
U_CAPI
 
UCh¬32
 
U_EXPORT2


181 
	$u‹xt_cu¼’t32
(
UText
 *
ut
) {

182 
UCh¬32
 
c
;

183 ià(
ut
->
chunkOff£t
==ut->
chunkL’gth
) {

185 ià(
ut
->
pFuncs
->
	`acûss
(ut, ut->
chunkN©iveLim™
, 
TRUE
è=ğ
FALSE
) {

187  
U_SENTINEL
;

191 
c
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
];

192 ià(
	`U16_IS_LEAD
(
c
è=ğ
FALSE
) {

194  
c
;

200 
UCh¬32
 
Œa
 = 0;

201 
UCh¬32
 
suµËm’ryC
 = 
c
;

202 ià((
ut
->
chunkOff£t
+1è< ut->
chunkL’gth
) {

204 
Œa
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
+1];

213 
št64_t
 
ÇtivePos™iÚ
 = 
ut
->
chunkN©iveLim™
;

214 
št32_t
 
Üigš®Off£t
 = 
ut
->
chunkOff£t
;

215 ià(
ut
->
pFuncs
->
	`acûss
(ut, 
ÇtivePos™iÚ
, 
TRUE
)) {

216 
Œa
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
];

218 
UBoŞ
 
r
 = 
ut
->
pFuncs
->
	`acûss
(ut, 
ÇtivePos™iÚ
, 
FALSE
);

219 
	`U_ASSERT
(
r
==
TRUE
);

220 
ut
->
chunkOff£t
 = 
Üigš®Off£t
;

221 if(!
r
) {

222  
U_SENTINEL
;

226 ià(
	`U16_IS_TRAIL
(
Œa
)) {

227 
suµËm’ryC
 = 
	`U16_GET_SUPPLEMENTARY
(
c
, 
Œa
);

229  
suµËm’ryC
;

231 
	}
}

234 
U_CAPI
 
UCh¬32
 
U_EXPORT2


235 
	$u‹xt_ch¬32At
(
UText
 *
ut
, 
št64_t
 
ÇtiveIndex
) {

236 
UCh¬32
 
c
 = 
U_SENTINEL
;

239 ià(
ÇtiveIndex
>=
ut
->
chunkN©iveS¹
 &&‚©iveIndex < ut->chunkN©iveS¹ + ut->
ÇtiveIndexšgLim™
) {

240 
ut
->
chunkOff£t
 = (
št32_t
)(
ÇtiveIndex
 - ut->
chunkN©iveS¹
);

241 
c
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
];

242 ià(
	`U16_IS_SURROGATE
(
c
è=ğ
FALSE
) {

243  
c
;

248 
	`u‹xt_£tN©iveIndex
(
ut
, 
ÇtiveIndex
);

249 ià(
ÇtiveIndex
>=
ut
->
chunkN©iveS¹
 && ut->
chunkOff£t
<ut->
chunkL’gth
) {

250 
c
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
];

251 ià(
	`U16_IS_SURROGATE
(
c
)) {

254 
c
 = 
	`u‹xt_cu¼’t32
(
ut
);

257  
c
;

258 
	}
}

261 
U_CAPI
 
UCh¬32
 
U_EXPORT2


262 
	$u‹xt_Ãxt32
(
UText
 *
ut
) {

263 
UCh¬32
 
c
;

265 ià(
ut
->
chunkOff£t
 >ğut->
chunkL’gth
) {

266 ià(
ut
->
pFuncs
->
	`acûss
(ut, ut->
chunkN©iveLim™
, 
TRUE
è=ğ
FALSE
) {

267  
U_SENTINEL
;

271 
c
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
++];

272 ià(
	`U16_IS_LEAD
(
c
è=ğ
FALSE
) {

276  
c
;

279 ià(
ut
->
chunkOff£t
 >ğut->
chunkL’gth
) {

280 ià(
ut
->
pFuncs
->
	`acûss
(ut, ut->
chunkN©iveLim™
, 
TRUE
è=ğ
FALSE
) {

283  
c
;

286 
UCh¬32
 
Œa
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
];

287 ià(
	`U16_IS_TRAIL
(
Œa
è=ğ
FALSE
) {

292  
c
;

295 
UCh¬32
 
suµËm’ry
 = 
	`U16_GET_SUPPLEMENTARY
(
c
, 
Œa
);

296 
ut
->
chunkOff£t
++;

297  
suµËm’ry
;

298 
	}
}

301 
U_CAPI
 
UCh¬32
 
U_EXPORT2


302 
	$u‹xt_´evious32
(
UText
 *
ut
) {

303 
UCh¬32
 
c
;

305 ià(
ut
->
chunkOff£t
 <= 0) {

306 ià(
ut
->
pFuncs
->
	`acûss
(ut, ut->
chunkN©iveS¹
, 
FALSE
) == FALSE) {

307  
U_SENTINEL
;

310 
ut
->
chunkOff£t
--;

311 
c
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
];

312 ià(
	`U16_IS_TRAIL
(
c
è=ğ
FALSE
) {

316  
c
;

319 ià(
ut
->
chunkOff£t
 <= 0) {

320 ià(
ut
->
pFuncs
->
	`acûss
(ut, ut->
chunkN©iveS¹
, 
FALSE
) == FALSE) {

323  
c
;

327 
UCh¬32
 
Ëad
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
-1];

328 ià(
	`U16_IS_LEAD
(
Ëad
è=ğ
FALSE
) {

331  
c
;

334 
UCh¬32
 
suµËm’ry
 = 
	`U16_GET_SUPPLEMENTARY
(
Ëad
, 
c
);

335 
ut
->
chunkOff£t
--;

336  
suµËm’ry
;

337 
	}
}

341 
U_CAPI
 
UCh¬32
 
U_EXPORT2


342 
	$u‹xt_Ãxt32From
(
UText
 *
ut
, 
št64_t
 
šdex
) {

343 
UCh¬32
 
c
 = 
U_SENTINEL
;

345 if(
šdex
<
ut
->
chunkN©iveS¹
 || index>=ut->
chunkN©iveLim™
) {

347 if(!
ut
->
pFuncs
->
	`acûss
(ut, 
šdex
, 
TRUE
)) {

349  
U_SENTINEL
;

351 } ià(
šdex
 - 
ut
->
chunkN©iveS¹
 <ğ(
št64_t
)ut->
ÇtiveIndexšgLim™
) {

353 
ut
->
chunkOff£t
 = (
št32_t
)(
šdex
 - ut->
chunkN©iveS¹
);

356 
ut
->
chunkOff£t
 = ut->
pFuncs
->
	`m­N©iveIndexToUTF16
(ut, 
šdex
);

359 
c
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
++];

360 ià(
	`U16_IS_SURROGATE
(
c
)) {

363 
	`u‹xt_£tN©iveIndex
(
ut
, 
šdex
);

364 
c
 = 
	`u‹xt_Ãxt32
(
ut
);

366  
c
;

367 
	}
}

370 
U_CAPI
 
UCh¬32
 
U_EXPORT2


371 
	$u‹xt_´evious32From
(
UText
 *
ut
, 
št64_t
 
šdex
) {

376 
UCh¬32
 
cP»v
;

385 if(
šdex
<=
ut
->
chunkN©iveS¹
 || index>ut->
chunkN©iveLim™
) {

387 if(!
ut
->
pFuncs
->
	`acûss
(ut, 
šdex
, 
FALSE
)) {

389  
U_SENTINEL
;

391 } if(
šdex
 - 
ut
->
chunkN©iveS¹
 <ğ(
št64_t
)ut->
ÇtiveIndexšgLim™
) {

393 
ut
->
chunkOff£t
 = (
št32_t
)(
šdex
 - ut->
chunkN©iveS¹
);

395 
ut
->
chunkOff£t
=ut->
pFuncs
->
	`m­N©iveIndexToUTF16
(ut, 
šdex
);

396 ià(
ut
->
chunkOff£t
==0 && !ut->
pFuncs
->
	`acûss
(ut, 
šdex
, 
FALSE
)) {

398  
U_SENTINEL
;

405 
ut
->
chunkOff£t
--;

406 
cP»v
 = 
ut
->
chunkCÚ‹Ás
[ut->
chunkOff£t
];

408 ià(
	`U16_IS_SURROGATE
(
cP»v
)) {

411 
	`u‹xt_£tN©iveIndex
(
ut
, 
šdex
);

412 
cP»v
 = 
	`u‹xt_´evious32
(
ut
);

414  
cP»v
;

415 
	}
}

418 
U_CAPI
 
št32_t
 
U_EXPORT2


419 
	$u‹xt_exŒaù
(
UText
 *
ut
,

420 
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
,

421 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

422 
UE¼ÜCode
 *
¡©us
) {

423  
ut
->
pFuncs
->
	`exŒaù
(ut, 
¡¬t
, 
lim™
, 
de¡
, 
de¡C­ac™y
, 
¡©us
);

424 
	}
}

428 
U_CAPI
 
UBoŞ
 
U_EXPORT2


429 
	$u‹xt_equ®s
(cÚ¡ 
UText
 *
a
, cÚ¡ UTexˆ*
b
) {

430 ià(
a
==
NULL
 || 
b
==NULL ||

431 
a
->
magic
 !ğ
UTEXT_MAGIC
 ||

432 
b
->
magic
 !ğ
UTEXT_MAGIC
) {

434  
FALSE
;

437 ià(
a
->
pFuncs
 !ğ
b
->pFuncs) {

439  
FALSE
;

442 ià(
a
->
cÚ‹xt
 !ğ
b
->context) {

444  
FALSE
;

446 ià(
	`u‹xt_g‘N©iveIndex
(
a
è!ğu‹xt_g‘N©iveIndex(
b
)) {

448  
FALSE
;

451  
TRUE
;

452 
	}
}

454 
U_CAPI
 
št32_t
 
U_EXPORT2


455 
	$u‹xt_com·»
(
UText
 *
s1
, 
št32_t
 
Ëngth1
,

456 
UText
 *
s2
, 
št32_t
 
Ëngth2
) {

457 
UCh¬32
 
c1
 = 0, 
c2
 = 0;

459 if(
Ëngth1
<0 && 
Ëngth2
<0) {

462 
c1
 = 
	`UTEXT_NEXT32
(
s1
);

463 
c2
 = 
	`UTEXT_NEXT32
(
s2
);

464 if(
c1
 !ğ
c2
) {

466 } if(
c1
 =ğ
U_SENTINEL
) {

471 if(
Ëngth1
 < 0) {

472 
Ëngth1
 = 
INT32_MIN
;

473 } ià(
Ëngth2
 < 0) {

474 
Ëngth2
 = 
INT32_MIN
;

478 (
Ëngth1
 > 0 ||†’gth1 =ğ
INT32_MIN
è&& (
Ëngth2
 > 0 ||†ength2 == INT32_MIN)) {

479 
c1
 = 
	`UTEXT_NEXT32
(
s1
);

480 
c2
 = 
	`UTEXT_NEXT32
(
s2
);

482 if(
c1
 !ğ
c2
) {

484 } if(
c1
 =ğ
U_SENTINEL
) {

488 ià(
Ëngth1
 !ğ
INT32_MIN
) {

489 
Ëngth1
 -= 1;

491 ià(
Ëngth2
 !ğ
INT32_MIN
) {

492 
Ëngth2
 -= 1;

496 if(
Ëngth1
 <ğ0 &&†’gth1 !ğ
INT32_MIN
) {

497 if(
Ëngth2
 <= 0) {

502 } if(
Ëngth2
 <ğ0 &&†’gth2 !ğ
INT32_MIN
) {

503 ià(
Ëngth1
 <= 0) {

511  (
št32_t
)
c1
-(št32_t)
c2
;

512 
	}
}

514 
U_CAPI
 
št32_t
 
U_EXPORT2


515 
	$u‹xt_com·»N©iveLim™
(
UText
 *
s1
, 
št64_t
 
lim™1
,

516 
UText
 *
s2
, 
št64_t
 
lim™2
) {

517 
UCh¬32
 
c1
, 
c2
;

519 if(
lim™1
<0 && 
lim™2
<0) {

522 
c1
 = 
	`UTEXT_NEXT32
(
s1
);

523 
c2
 = 
	`UTEXT_NEXT32
(
s2
);

524 if(
c1
 !ğ
c2
) {

525  (
št32_t
)
c1
-(št32_t)
c2
;

526 } if(
c1
 =ğ
U_SENTINEL
) {

532 
št64_t
 
šdex1
 = (
lim™1
 >ğ0 ? 
	`UTEXT_GETNATIVEINDEX
(
s1
) : 0);

533 
št64_t
 
šdex2
 = (
lim™2
 >ğ0 ? 
	`UTEXT_GETNATIVEINDEX
(
s2
) : 0);

535 (
lim™1
 < 0 || 
šdex1
 <†im™1è&& (
lim™2
 < 0 || 
šdex2
 <†imit2)) {

536 
c1
 = 
	`UTEXT_NEXT32
(
s1
);

537 
c2
 = 
	`UTEXT_NEXT32
(
s2
);

539 if(
c1
 !ğ
c2
) {

540  (
št32_t
)
c1
-(št32_t)
c2
;

541 } if(
c1
 =ğ
U_SENTINEL
) {

545 ià(
lim™1
 >= 0) {

546 
šdex1
 = 
	`UTEXT_GETNATIVEINDEX
(
s1
);

548 ià(
lim™2
 >= 0) {

549 
šdex2
 = 
	`UTEXT_GETNATIVEINDEX
(
s2
);

553 if(
lim™1
 >ğ0 && 
šdex1
 >=†imit1) {

554 if(
šdex2
 >ğ
lim™2
) {

560 if(
šdex1
 >ğ
lim™1
) {

567 
	}
}

569 
U_CAPI
 
št32_t
 
U_EXPORT2


570 
	$u‹xt_ÿ£Com·»
(
UText
 *
s1
, 
št32_t
 
Ëngth1
,

571 
UText
 *
s2
, 
št32_t
 
Ëngth2
,

572 
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

573 cÚ¡ 
UCa£Prİs
 *
c¥
;

576 cÚ¡ 
UCh¬
 *
p
;

577 
št32_t
 
Ëngth
;

580 
UCh¬
 
fŞd1
[
UCASE_MAX_STRING_LENGTH
+1], 
fŞd2
[UCASE_MAX_STRING_LENGTH+1];

581 
št32_t
 
fŞdOff£t1
, 
fŞdOff£t2
, 
fŞdL’gth1
, 
fŞdL’gth2
;

584 
UCh¬32
 
c1
, 
c2
;

585 
ušt8_t
 
cL’gth1
, 
cL’gth2
;

588 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

591 if(
s1
==
NULL
 || 
s2
==NULL) {

592 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

596 
c¥
=
	`uÿ£_g‘SšgËtÚ
();

599 if(
Ëngth1
 < 0) {

600 
Ëngth1
 = 
INT32_MIN
;

602 ià(
Ëngth2
 < 0) {

603 
Ëngth2
 = 
INT32_MIN
;

607 
fŞdOff£t1
 = 
fŞdOff£t2
 = 
fŞdL’gth1
 = 
fŞdL’gth2
 = 0;

610 (
fŞdOff£t1
 < 
fŞdL’gth1
 || 
Ëngth1
 > 0 ||†’gth1 =ğ
INT32_MIN
) &&

611 (
fŞdOff£t2
 < 
fŞdL’gth2
 || 
Ëngth2
 > 0 ||†’gth2 =ğ
INT32_MIN
)) {

612 if(
fŞdOff£t1
 < 
fŞdL’gth1
) {

613 
	`U16_NEXT_UNSAFE
(
fŞd1
, 
fŞdOff£t1
, 
c1
);

614 
cL’gth1
 = 0;

616 
c1
 = 
	`UTEXT_NEXT32
(
s1
);

617 ià(
c1
 !ğ
U_SENTINEL
) {

618 
cL’gth1
 = 
	`U16_LENGTH
(
c1
);

620 
Ëngth
 = 
	`uÿ£_toFuÎFŞdšg
(
c¥
, 
c1
, &
p
, 
İtiÚs
);

621 if(
Ëngth
 >= 0) {

622 if(
Ëngth
 <ğ
UCASE_MAX_STRING_LENGTH
) {

623 
	`u_memıy
(
fŞd1
, 
p
, 
Ëngth
);

624 
fŞdOff£t1
 = 0;

625 
fŞdL’gth1
 = 
Ëngth
;

626 
	`U16_NEXT_UNSAFE
(
fŞd1
, 
fŞdOff£t1
, 
c1
);

628 
c1
 = 
Ëngth
;

633 if(
Ëngth1
 !ğ
INT32_MIN
) {

634 
Ëngth1
 -= 1;

638 if(
fŞdOff£t2
 < 
fŞdL’gth2
) {

639 
	`U16_NEXT_UNSAFE
(
fŞd2
, 
fŞdOff£t2
, 
c2
);

640 
cL’gth2
 = 0;

642 
c2
 = 
	`UTEXT_NEXT32
(
s2
);

643 ià(
c2
 !ğ
U_SENTINEL
) {

644 
cL’gth2
 = 
	`U16_LENGTH
(
c2
);

646 
Ëngth
 = 
	`uÿ£_toFuÎFŞdšg
(
c¥
, 
c2
, &
p
, 
İtiÚs
);

647 if(
Ëngth
 >= 0) {

648 if(
Ëngth
 <ğ
UCASE_MAX_STRING_LENGTH
) {

649 
	`u_memıy
(
fŞd2
, 
p
, 
Ëngth
);

650 
fŞdOff£t2
 = 0;

651 
fŞdL’gth2
 = 
Ëngth
;

652 
	`U16_NEXT_UNSAFE
(
fŞd2
, 
fŞdOff£t2
, 
c2
);

654 
c2
 = 
Ëngth
;

657 } if(
c1
 =ğ
U_SENTINEL
) {

661 if(
Ëngth2
 !ğ
INT32_MIN
) {

662 
Ëngth2
 -= 1;

666 if(
c1
 !ğ
c2
) {

667  (
št32_t
)
c1
-(št32_t)
c2
;

672 
Ëngth1
 +ğ
fŞdL’gth1
 - 
fŞdOff£t1
;

673 
Ëngth2
 +ğ
fŞdL’gth2
 - 
fŞdOff£t2
;

675 if(
Ëngth1
 <ğ0 &&†’gth1 !ğ
INT32_MIN
) {

676 if(
Ëngth2
 <= 0) {

682 ià(
Ëngth1
 <= 0) {

688 
	}
}

690 
U_CAPI
 
št32_t
 
U_EXPORT2


691 
	$u‹xt_ÿ£Com·»N©iveLim™
(
UText
 *
s1
, 
št64_t
 
lim™1
,

692 
UText
 *
s2
, 
št64_t
 
lim™2
,

693 
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

694 cÚ¡ 
UCa£Prİs
 *
c¥
;

697 cÚ¡ 
UCh¬
 *
p
;

698 
št32_t
 
Ëngth
;

701 
UCh¬
 
fŞd1
[
UCASE_MAX_STRING_LENGTH
+1], 
fŞd2
[UCASE_MAX_STRING_LENGTH+1];

702 
št32_t
 
fŞdOff£t1
, 
fŞdOff£t2
, 
fŞdL’gth1
, 
fŞdL’gth2
;

705 
UCh¬32
 
c1
, 
c2
;

708 
št64_t
 
šdex1
, 
šdex2
;

711 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

714 if(
s1
==
NULL
 || 
s2
==NULL) {

715 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

719 
c¥
=
	`uÿ£_g‘SšgËtÚ
();

722 
šdex1
 = (
lim™1
 >ğ0 ? 
	`UTEXT_GETNATIVEINDEX
(
s1
) : 0);

723 
šdex2
 = (
lim™2
 >ğ0 ? 
	`UTEXT_GETNATIVEINDEX
(
s2
) : 0);

725 
fŞdOff£t1
 = 
fŞdOff£t2
 = 
fŞdL’gth1
 = 
fŞdL’gth2
 = 0;

728 (
fŞdOff£t1
 < 
fŞdL’gth1
 || 
lim™1
 < 0 || 
šdex1
 <†imit1) &&

729 (
fŞdOff£t2
 < 
fŞdL’gth2
 || 
lim™2
 < 0 || 
šdex2
 <†imit2)) {

730 if(
fŞdOff£t1
 < 
fŞdL’gth1
) {

731 
	`U16_NEXT_UNSAFE
(
fŞd1
, 
fŞdOff£t1
, 
c1
);

733 
c1
 = 
	`UTEXT_NEXT32
(
s1
);

734 ià(
c1
 !ğ
U_SENTINEL
) {

735 
Ëngth
 = 
	`uÿ£_toFuÎFŞdšg
(
c¥
, 
c1
, &
p
, 
İtiÚs
);

736 if(
Ëngth
 >= 0) {

737 if(
Ëngth
 <ğ
UCASE_MAX_STRING_LENGTH
) {

738 
	`u_memıy
(
fŞd1
, 
p
, 
Ëngth
);

739 
fŞdOff£t1
 = 0;

740 
fŞdL’gth1
 = 
Ëngth
;

741 
	`U16_NEXT_UNSAFE
(
fŞd1
, 
fŞdOff£t1
, 
c1
);

743 
c1
 = 
Ëngth
;

748 ià(
lim™1
 >= 0) {

749 
šdex1
 = 
	`UTEXT_GETNATIVEINDEX
(
s1
);

753 if(
fŞdOff£t2
 < 
fŞdL’gth2
) {

754 
	`U16_NEXT_UNSAFE
(
fŞd2
, 
fŞdOff£t2
, 
c2
);

756 
c2
 = 
	`UTEXT_NEXT32
(
s2
);

757 ià(
c2
 !ğ
U_SENTINEL
) {

758 
Ëngth
 = 
	`uÿ£_toFuÎFŞdšg
(
c¥
, 
c2
, &
p
, 
İtiÚs
);

759 if(
Ëngth
 >= 0) {

760 if(
Ëngth
 <ğ
UCASE_MAX_STRING_LENGTH
) {

761 
	`u_memıy
(
fŞd2
, 
p
, 
Ëngth
);

762 
fŞdOff£t2
 = 0;

763 
fŞdL’gth2
 = 
Ëngth
;

764 
	`U16_NEXT_UNSAFE
(
fŞd2
, 
fŞdOff£t2
, 
c2
);

766 
c2
 = 
Ëngth
;

769 } if(
c1
 =ğ
U_SENTINEL
) {

773 ià(
lim™2
 >= 0) {

774 
šdex2
 = 
	`UTEXT_GETNATIVEINDEX
(
s2
);

778 if(
c1
 !ğ
c2
) {

779  (
št32_t
)
c1
-(št32_t)
c2
;

784 
šdex1
 -ğ
fŞdL’gth1
 - 
fŞdOff£t1
;

785 
šdex2
 -ğ
fŞdL’gth2
 - 
fŞdOff£t2
;

787 if(
lim™1
 >ğ0 && 
šdex1
 >=†imit1) {

788 if(
šdex2
 >ğ
lim™2
) {

794 if(
šdex1
 >ğ
lim™1
) {

800 
	}
}

803 
U_CAPI
 
UBoŞ
 
U_EXPORT2


804 
	$u‹xt_isWr™abË
(cÚ¡ 
UText
 *
ut
)

806 
UBoŞ
 
b
 = (
ut
->
´ovid”Prİ”t›s
 & 
	`I32_FLAG
(
UTEXT_PROVIDER_WRITABLE
)) != 0;

807  
b
;

808 
	}
}

811 
U_CAPI
 
U_EXPORT2


812 
	$u‹xt_ä“ze
(
UText
 *
ut
) {

814 
ut
->
´ovid”Prİ”t›s
 &ğ~(
	`I32_FLAG
(
UTEXT_PROVIDER_WRITABLE
));

815 
	}
}

818 
U_CAPI
 
UBoŞ
 
U_EXPORT2


819 
	$u‹xt_hasM‘aD©a
(cÚ¡ 
UText
 *
ut
)

821 
UBoŞ
 
b
 = (
ut
->
´ovid”Prİ”t›s
 & 
	`I32_FLAG
(
UTEXT_PROVIDER_HAS_META_DATA
)) != 0;

822  
b
;

823 
	}
}

827 
U_CAPI
 
št32_t
 
U_EXPORT2


828 
	$u‹xt_»¶aû
(
UText
 *
ut
,

829 
št64_t
 
ÇtiveS¹
, iÁ64_ˆ
ÇtiveLim™
,

830 cÚ¡ 
UCh¬
 *
»¶aûm’tText
, 
št32_t
 
»¶aûm’tL’gth
,

831 
UE¼ÜCode
 *
¡©us
)

833 ià(
	`U_FAILURE
(*
¡©us
)) {

836 ià((
ut
->
´ovid”Prİ”t›s
 & 
	`I32_FLAG
(
UTEXT_PROVIDER_WRITABLE
)) == 0) {

837 *
¡©us
 = 
U_NO_WRITE_PERMISSION
;

840 
št32_t
 
i
 = 
ut
->
pFuncs
->
	`»¶aû
(ut, 
ÇtiveS¹
, 
ÇtiveLim™
, 
»¶aûm’tText
, 
»¶aûm’tL’gth
, 
¡©us
);

841  
i
;

842 
	}
}

844 
U_CAPI
 
U_EXPORT2


845 
	$u‹xt_cİy
(
UText
 *
ut
,

846 
št64_t
 
ÇtiveS¹
, iÁ64_ˆ
ÇtiveLim™
,

847 
št64_t
 
de¡Index
,

848 
UBoŞ
 
move
,

849 
UE¼ÜCode
 *
¡©us
)

851 ià(
	`U_FAILURE
(*
¡©us
)) {

854 ià((
ut
->
´ovid”Prİ”t›s
 & 
	`I32_FLAG
(
UTEXT_PROVIDER_WRITABLE
)) == 0) {

855 *
¡©us
 = 
U_NO_WRITE_PERMISSION
;

858 
ut
->
pFuncs
->
	`cİy
(ut, 
ÇtiveS¹
, 
ÇtiveLim™
, 
de¡Index
, 
move
, 
¡©us
);

859 
	}
}

863 
U_CAPI
 
UText
 * 
U_EXPORT2


864 
	$u‹xt_şÚe
(
UText
 *
de¡
, cÚ¡ UTexˆ*
¤c
, 
UBoŞ
 
d“p
, UBoŞ 
»adOÆy
, 
UE¼ÜCode
 *
¡©us
) {

865 
UText
 *
»suÉ
;

866 
»suÉ
 = 
¤c
->
pFuncs
->
	`şÚe
(
de¡
, src, 
d“p
, 
¡©us
);

867 ià(
»adOÆy
) {

868 
	`u‹xt_ä“ze
(
»suÉ
);

870  
»suÉ
;

871 
	}
}

885 
	mUTEXT_HEAP_ALLOCATED
 = 1,

888 
	mUTEXT_EXTRA_HEAP_ALLOCATED
 = 2,

894 
	mUTEXT_OPEN
 = 4

903 
	sEx‹ndedUText
 {

904 
UText
 
	mut
;

905 
UAligÃdMemÜy
 
	mex‹nsiÚ
;

908 cÚ¡ 
UText
 
	gem±yText
 = 
UTEXT_INITIALIZER
;

910 
U_CAPI
 
UText
 * 
U_EXPORT2


911 
	$u‹xt_£tup
(
UText
 *
ut
, 
št32_t
 
exŒaS·û
, 
UE¼ÜCode
 *
¡©us
) {

912 ià(
	`U_FAILURE
(*
¡©us
)) {

913  
ut
;

916 ià(
ut
 =ğ
NULL
) {

918 
št32_t
 
¥aûRequœed
 = (
UText
);

919 ià(
exŒaS·û
 > 0) {

920 
¥aûRequœed
 = (
Ex‹ndedUText
è+ 
exŒaS·û
 - (
UAligÃdMemÜy
);

922 
ut
 = (
UText
 *)
	`u´v_m®loc
(
¥aûRequœed
);

923 ià(
ut
 =ğ
NULL
) {

924 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

925  
NULL
;

927 *
ut
 = 
em±yText
;

928 
ut
->
æags
 |ğ
UTEXT_HEAP_ALLOCATED
;

929 ià(
¥aûRequœed
>0) {

930 
ut
->
exŒaSize
 = 
exŒaS·û
;

931 
ut
->
pExŒa
 = &((
Ex‹ndedUText
 *)ut)->
ex‹nsiÚ
;

937 ià(
ut
->
magic
 !ğ
UTEXT_MAGIC
) {

938 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

939  
ut
;

943 ià((
ut
->
æags
 & 
UTEXT_OPEN
è&& ut->
pFuncs
->
şo£
 !ğ
NULL
) {

944 
ut
->
pFuncs
->
	`şo£
(ut);

946 
ut
->
æags
 &ğ~
UTEXT_OPEN
;

950 ià(
exŒaS·û
 > 
ut
->
exŒaSize
) {

953 ià(
ut
->
æags
 & 
UTEXT_EXTRA_HEAP_ALLOCATED
) {

954 
	`u´v_ä“
(
ut
->
pExŒa
);

955 
ut
->
exŒaSize
 = 0;

957 
ut
->
pExŒa
 = 
	`u´v_m®loc
(
exŒaS·û
);

958 ià(
ut
->
pExŒa
 =ğ
NULL
) {

959 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

961 
ut
->
exŒaSize
 = 
exŒaS·û
;

962 
ut
->
æags
 |ğ
UTEXT_EXTRA_HEAP_ALLOCATED
;

966 ià(
	`U_SUCCESS
(*
¡©us
)) {

967 
ut
->
æags
 |ğ
UTEXT_OPEN
;

971 
ut
->
cÚ‹xt
 = 
NULL
;

972 
ut
->
chunkCÚ‹Ás
 = 
NULL
;

973 
ut
->
p
 = 
NULL
;

974 
ut
->
q
 = 
NULL
;

975 
ut
->
r
 = 
NULL
;

976 
ut
->
a
 = 0;

977 
ut
->
b
 = 0;

978 
ut
->
c
 = 0;

979 
ut
->
chunkOff£t
 = 0;

980 
ut
->
chunkL’gth
 = 0;

981 
ut
->
chunkN©iveS¹
 = 0;

982 
ut
->
chunkN©iveLim™
 = 0;

983 
ut
->
ÇtiveIndexšgLim™
 = 0;

984 
ut
->
´ovid”Prİ”t›s
 = 0;

985 
ut
->
´ivA
 = 0;

986 
ut
->
´ivB
 = 0;

987 
ut
->
´ivC
 = 0;

988 
ut
->
´ivP
 = 
NULL
;

989 ià(
ut
->
pExŒa
!=
NULL
 && ut->
exŒaSize
>0)

990 
	`u´v_mem£t
(
ut
->
pExŒa
, 0, ut->
exŒaSize
);

993  
ut
;

994 
	}
}

997 
U_CAPI
 
UText
 * 
U_EXPORT2


998 
	$u‹xt_şo£
(
UText
 *
ut
) {

999 ià(
ut
==
NULL
 ||

1000 
ut
->
magic
 !ğ
UTEXT_MAGIC
 ||

1001 (
ut
->
æags
 & 
UTEXT_OPEN
) == 0)

1005  
ut
;

1010 ià(
ut
->
pFuncs
->
şo£
 !ğ
NULL
) {

1011 
ut
->
pFuncs
->
	`şo£
(ut);

1013 
ut
->
æags
 &ğ~
UTEXT_OPEN
;

1017 ià(
ut
->
æags
 & 
UTEXT_EXTRA_HEAP_ALLOCATED
) {

1018 
	`u´v_ä“
(
ut
->
pExŒa
);

1019 
ut
->
pExŒa
 = 
NULL
;

1020 
ut
->
æags
 &ğ~
UTEXT_EXTRA_HEAP_ALLOCATED
;

1021 
ut
->
exŒaSize
 = 0;

1027 
ut
->
pFuncs
 = 
NULL
;

1029 ià(
ut
->
æags
 & 
UTEXT_HEAP_ALLOCATED
) {

1033 
ut
->
magic
 = 0;

1034 
	`u´v_ä“
(
ut
);

1035 
ut
 = 
NULL
;

1037  
ut
;

1038 
	}
}

1051 
	$šv®id©eChunk
(
UText
 *
ut
) {

1052 
ut
->
chunkL’gth
 = 0;

1053 
ut
->
chunkN©iveLim™
 = 0;

1054 
ut
->
chunkN©iveS¹
 = 0;

1055 
ut
->
chunkOff£t
 = 0;

1056 
ut
->
ÇtiveIndexšgLim™
 = 0;

1057 
	}
}

1064 
št32_t


1065 
	$pšIndex
(
št64_t
 &
šdex
, iÁ64_ˆ
lim™
) {

1066 ià(
šdex
<0) {

1067 
šdex
 = 0;

1068 } ià(
šdex
 > 
lim™
) {

1069 
šdex
 = 
lim™
;

1071  (
št32_t
)
šdex
;

1072 
	}
}

1075 
U_CDECL_BEGIN


1083 
	$adju¡Poš‹r
(
UText
 *
de¡
, cÚ¡ **
de¡PŒ
, cÚ¡ UTexˆ*
¤c
) {

1085 *
d±r
 = (*)*
de¡PŒ
;

1086 *
dUText
 = (*)
de¡
;

1087 *
sUText
 = (*)
¤c
;

1089 ià(
d±r
 >ğ(*)
¤c
->
pExŒa
 && d±¸< ((*)¤c->pExŒa)+¤c->
exŒaSize
) {

1092 *
de¡PŒ
 = ((*)
de¡
->
pExŒa
è+ (
d±r
 - (*)
¤c
->pExtra);

1093 } ià(
d±r
>=
sUText
 && d±¸< sUText+
¤c
->
sizeOfSŒuù
) {

1096 *
de¡PŒ
 = 
dUText
 + (
d±r
-
sUText
);

1098 
	}
}

1105 
UText
 * 
U_CALLCONV


1106 
	$sh®lowTextClÚe
(
UText
 * 
de¡
, cÚ¡ UTexˆ* 
¤c
, 
UE¼ÜCode
 * 
¡©us
) {

1107 ià(
	`U_FAILURE
(*
¡©us
)) {

1108  
NULL
;

1110 
št32_t
 
¤cExŒaSize
 = 
¤c
->
exŒaSize
;

1115 
de¡
 = 
	`u‹xt_£tup
(de¡, 
¤cExŒaSize
, 
¡©us
);

1116 ià(
	`U_FAILURE
(*
¡©us
)) {

1117  
de¡
;

1126 *
de¡ExŒa
 = 
de¡
->
pExŒa
;

1127 
št32_t
 
æags
 = 
de¡
->flags;

1134 
sizeToCİy
 = 
¤c
->
sizeOfSŒuù
;

1135 ià(
sizeToCİy
 > 
de¡
->
sizeOfSŒuù
) {

1136 
sizeToCİy
 = 
de¡
->
sizeOfSŒuù
;

1138 
	`u´v_memıy
(
de¡
, 
¤c
, 
sizeToCİy
);

1139 
de¡
->
pExŒa
 = 
de¡ExŒa
;

1140 
de¡
->
æags
 = flags;

1141 ià(
¤cExŒaSize
 > 0) {

1142 
	`u´v_memıy
(
de¡
->
pExŒa
, 
¤c
->pExŒa, 
¤cExŒaSize
);

1149 
	`adju¡Poš‹r
(
de¡
, &de¡->
cÚ‹xt
, 
¤c
);

1150 
	`adju¡Poš‹r
(
de¡
, &de¡->
p
, 
¤c
);

1151 
	`adju¡Poš‹r
(
de¡
, &de¡->
q
, 
¤c
);

1152 
	`adju¡Poš‹r
(
de¡
, &de¡->
r
, 
¤c
);

1153 
	`adju¡Poš‹r
(
de¡
, (cÚ¡ **)&de¡->
chunkCÚ‹Ás
, 
¤c
);

1155  
de¡
;

1156 
	}
}

1159 
U_CDECL_END


1184 ’um { 
	mUTF8_TEXT_CHUNK_SIZE
=32 };

1200 
	sUTF8Buf
 {

1201 
št32_t
 
	mbufN©iveS¹
;

1202 
št32_t
 
	mbufN©iveLim™
;

1203 
št32_t
 
	mbufS¹Idx
;

1204 
št32_t
 
	mbufLim™Idx
;

1205 
št32_t
 
	mbufNILim™
;

1206 
št32_t
 
	mtoUCh¬sM­S¹
;

1211 
UCh¬
 
	mbuf
[
UTF8_TEXT_CHUNK_SIZE
+4];

1217 
ušt8_t
 
	mm­ToN©ive
[
UTF8_TEXT_CHUNK_SIZE
+4];

1222 
ušt8_t
 
	mm­ToUCh¬s
[
UTF8_TEXT_CHUNK_SIZE
*3+6];

1224 
št32_t
 
	m®ign
;

1227 
U_CDECL_BEGIN


1235 
št64_t
 
U_CALLCONV


1236 
	$utf8TextL’gth
(
UText
 *
ut
) {

1237 ià(
ut
->
b
 < 0) {

1240 cÚ¡ *
r
 = (cÚ¡ *)
ut
->
cÚ‹xt
 + ut->
c
;

1241 *
r
 != 0) {

1242 
r
++;

1244 ià((
r
 - (cÚ¡ *)
ut
->
cÚ‹xt
) < 0x7fffffff) {

1245 
ut
->
b
 = (
št32_t
)(
r
 - (cÚ¡ *)ut->
cÚ‹xt
);

1249 
ut
->
b
 = 0x7fffffff;

1251 
ut
->
´ovid”Prİ”t›s
 &ğ~
	`I32_FLAG
(
UTEXT_PROVIDER_LENGTH_IS_EXPENSIVE
);

1253  
ut
->
b
;

1254 
	}
}

1261 
UBoŞ
 
U_CALLCONV


1262 
	$utf8TextAcûss
(
UText
 *
ut
, 
št64_t
 
šdex
, 
UBoŞ
 
fÜw¬d
) {

1269 cÚ¡ 
ušt8_t
 *
s8
=(cÚ¡ ušt8_ˆ*)
ut
->
cÚ‹xt
;

1270 
UTF8Buf
 *
u8b
 = 
NULL
;

1271 
št32_t
 
Ëngth
 = 
ut
->
b
;

1272 
št32_t
 
ix
ğ(št32_t)
šdex
;

1273 
št32_t
 
m­Index
 = 0;

1274 ià(
šdex
<0) {

1275 
ix
=0;

1276 } ià(
šdex
 > 0x7fffffff) {

1278 
ix
 = 0x7fffffff;

1282 ià(
ix
>
Ëngth
) {

1283 ià(
Ëngth
>=0) {

1284 
ix
=
Ëngth
;

1285 } ià(
ix
>=
ut
->
c
) {

1290 
ut
->
c
<
ix
 && 
s8
[ut->c]!=0) {

1291 
ut
->
c
++;

1294 ià(
s8
[
ut
->
c
] == 0) {

1297 
ix
 = 
ut
->
c
;

1298 
ut
->
b
 = ut->
c
;

1299 
Ëngth
 = 
ut
->
c
;

1300 
ut
->
´ovid”Prİ”t›s
 &ğ~
	`I32_FLAG
(
UTEXT_PROVIDER_LENGTH_IS_EXPENSIVE
);

1308 ià(
fÜw¬d
) {

1309 ià(
ix
==
ut
->
chunkN©iveLim™
) {

1311 ià(
ix
==
Ëngth
) {

1315 
ut
->
chunkOff£t
 = ut->
chunkL’gth
;

1316  
FALSE
;

1320 
UTF8Buf
 *
®tB
 = (UTF8Buà*)
ut
->
q
;

1321 ià(
ix
>=
®tB
->
bufN©iveS¹
 && ix<®tB->
bufN©iveLim™
) {

1322 
sw­Bufãrs
;

1332 
u8b
 = (
UTF8Buf
 *)
ut
->
q
;

1333 ià(
ix
>=
u8b
->
bufN©iveS¹
 && ix<u8b->
bufN©iveLim™
) {

1335 
sw­Bufãrs
;

1337 ià(
ix
 =ğ
Ëngth
) {

1341 ià(
ix
 =ğ
ut
->
chunkN©iveLim™
) {

1344 
ut
->
chunkOff£t
 = ut->
chunkL’gth
;

1345  
FALSE
;

1347 ià(
ix
 =ğ
u8b
->
bufN©iveLim™
) {

1350 
sw­BufãrsAndFa
;

1354 
makeStubBufãr
;

1357 ià(
ix
<
ut
->
chunkN©iveS¹
 || ix>=ut->
chunkN©iveLim™
) {

1359 
flFÜw¬d
;

1363 
u8b
 = (
UTF8Buf
 *)
ut
->
p
;

1364 
m­Index
 = 
ix
 - 
u8b
->
toUCh¬sM­S¹
;

1365 
ut
->
chunkOff£t
 = 
u8b
->
m­ToUCh¬s
[
m­Index
] - u8b->
bufS¹Idx
;

1366  
TRUE
;

1376 ià(
ix
==
ut
->
chunkN©iveS¹
) {

1378 ià(
ix
==0) {

1382 
ut
->
chunkOff£t
 = 0;

1383  
FALSE
;

1387 
UTF8Buf
 *
®tB
 = (UTF8Buà*)
ut
->
q
;

1388 ià(
ix
>
®tB
->
bufN©iveS¹
 && ix<÷ÉB->
bufN©iveLim™
) {

1389 
sw­Bufãrs
;

1399 
u8b
 = (
UTF8Buf
 *)
ut
->
q
;

1400 ià(
ix
>
u8b
->
bufN©iveS¹
 && ix<=u8b->
bufN©iveLim™
) {

1402 
sw­Bufãrs
;

1407 ià(
ix
==0) {

1408 ià(
u8b
->
bufN©iveS¹
==0) {

1411 
sw­BufãrsAndFa
;

1416 
makeStubBufãr
;

1420 ià(
ix
<=
ut
->
chunkN©iveS¹
 || ix>ut->
chunkN©iveLim™
) {

1422 
flRev”£
;

1427 
u8b
 = (
UTF8Buf
 *)
ut
->
p
;

1428 
m­Index
 = 
ix
 - 
u8b
->
toUCh¬sM­S¹
;

1429 
ut
->
chunkOff£t
 = 
u8b
->
m­ToUCh¬s
[
m­Index
] - u8b->
bufS¹Idx
;

1430 ià(
ut
->
chunkOff£t
==0) {

1436  
FALSE
;

1438  
TRUE
;

1443 
sw­Bufãrs
:

1448 
u8b
 = (
UTF8Buf
 *)
ut
->
q
;

1449 
ut
->
q
 = ut->
p
;

1450 
ut
->
p
 = 
u8b
;

1451 
ut
->
chunkCÚ‹Ás
 = &
u8b
->
buf
[u8b->
bufS¹Idx
];

1452 
ut
->
chunkL’gth
 = 
u8b
->
bufLim™Idx
 - u8b->
bufS¹Idx
;

1453 
ut
->
chunkN©iveS¹
 = 
u8b
->
bufN©iveS¹
;

1454 
ut
->
chunkN©iveLim™
 = 
u8b
->
bufN©iveLim™
;

1455 
ut
->
ÇtiveIndexšgLim™
 = 
u8b
->
bufNILim™
;

1460 
	`U_ASSERT
(
ix
>=
u8b
->
bufN©iveS¹
);

1461 
	`U_ASSERT
(
ix
<=
u8b
->
bufN©iveLim™
);

1462 
m­Index
 = 
ix
 - 
u8b
->
toUCh¬sM­S¹
;

1463 
	`U_ASSERT
(
m­Index
>=0);

1464 
	`U_ASSERT
(
m­Index
<(
št32_t
)(
u8b
->
m­ToUCh¬s
));

1465 
ut
->
chunkOff£t
 = 
u8b
->
m­ToUCh¬s
[
m­Index
] - u8b->
bufS¹Idx
;

1467  
TRUE
;

1471 
sw­BufãrsAndFa
:

1480 
u8b
 = (
UTF8Buf
 *)
ut
->
q
;

1481 
ut
->
q
 = ut->
p
;

1482 
ut
->
p
 = 
u8b
;

1483 
ut
->
chunkCÚ‹Ás
 = &
u8b
->
buf
[u8b->
bufS¹Idx
];

1484 
ut
->
chunkL’gth
 = 
u8b
->
bufLim™Idx
 - u8b->
bufS¹Idx
;

1485 
ut
->
chunkN©iveS¹
 = 
u8b
->
bufN©iveS¹
;

1486 
ut
->
chunkN©iveLim™
 = 
u8b
->
bufN©iveLim™
;

1487 
ut
->
ÇtiveIndexšgLim™
 = 
u8b
->
bufNILim™
;

1492 ià(
ix
==
u8b
->
bufN©iveLim™
) {

1493 
ut
->
chunkOff£t
 = ut->
chunkL’gth
;

1495 
ut
->
chunkOff£t
 = 0;

1496 
	`U_ASSERT
(
ix
 =ğ
u8b
->
bufN©iveS¹
);

1498  
FALSE
;

1500 
makeStubBufãr
:

1505 
u8b
 = (
UTF8Buf
 *)
ut
->
q
;

1506 
u8b
->
bufN©iveS¹
 = 
ix
;

1507 
u8b
->
bufN©iveLim™
 = 
ix
;

1508 
u8b
->
bufS¹Idx
 = 0;

1509 
u8b
->
bufLim™Idx
 = 0;

1510 
u8b
->
bufNILim™
 = 0;

1511 
u8b
->
toUCh¬sM­S¹
 = 
ix
;

1512 
u8b
->
m­ToN©ive
[0] = 0;

1513 
u8b
->
m­ToUCh¬s
[0] = 0;

1514 
sw­BufãrsAndFa
;

1518 
flFÜw¬d
:

1521 
	`U8_SET_CP_START
(
s8
, 0, 
ix
);

1526 
UTF8Buf
 *
u8b
 = (UTF8Buà*)
ut
->
q
;

1527 
ut
->
q
 = ut->
p
;

1528 
ut
->
p
 = 
u8b
;

1530 
št32_t
 
¡rL’
 = 
ut
->
b
;

1531 
UBoŞ
 
nulT”mš©ed
 = 
FALSE
;

1532 ià(
¡rL’
 < 0) {

1533 
¡rL’
 = 0x7fffffff;

1534 
nulT”mš©ed
 = 
TRUE
;

1537 
UCh¬
 *
buf
 = 
u8b
->buf;

1538 
ušt8_t
 *
m­ToN©ive
 = 
u8b
->mapToNative;

1539 
ušt8_t
 *
m­ToUCh¬s
 = 
u8b
->mapToUChars;

1540 
št32_t
 
de¡Ix
 = 0;

1541 
št32_t
 
¤cIx
 = 
ix
;

1542 
UBoŞ
 
£’NÚAscii
 = 
FALSE
;

1543 
UCh¬32
 
c
 = 0;

1546 
de¡Ix
<
UTF8_TEXT_CHUNK_SIZE
) {

1547 
c
 = 
s8
[
¤cIx
];

1548 ià(
c
>0 && c<0x80) {

1551 
buf
[
de¡Ix
] = (
UCh¬
)
c
;

1552 
m­ToN©ive
[
de¡Ix
] = (
ušt8_t
)(
¤cIx
 - 
ix
);

1553 
m­ToUCh¬s
[
¤cIx
-
ix
] = (
ušt8_t
)
de¡Ix
;

1554 
¤cIx
++;

1555 
de¡Ix
++;

1558 ià(
£’NÚAscii
 =ğ
FALSE
) {

1559 
£’NÚAscii
 = 
TRUE
;

1560 
u8b
->
bufNILim™
 = 
de¡Ix
;

1563 
št32_t
 
cIx
 = 
¤cIx
;

1564 
št32_t
 
dIx
 = 
de¡Ix
;

1565 
št32_t
 
dIxSaved
 = 
de¡Ix
;

1566 
	`U8_NEXT
(
s8
, 
¤cIx
, 
¡rL’
, 
c
);

1567 ià(
c
==0 && 
nulT”mš©ed
) {

1568 
¤cIx
--;

1571 ià(
c
<0) {

1573 
c
 = 0x0fffd;

1576 
	`U16_APPEND_UNSAFE
(
buf
, 
de¡Ix
, 
c
);

1578 
m­ToN©ive
[
dIx
++] = (
ušt8_t
)(
cIx
 - 
ix
);

1579 } 
dIx
 < 
de¡Ix
);

1582 
m­ToUCh¬s
[
cIx
++ - 
ix
] = (
ušt8_t
)
dIxSaved
;

1583 } 
cIx
 < 
¤cIx
);

1585 ià(
¤cIx
>=
¡rL’
) {

1593 
m­ToN©ive
[
de¡Ix
] = (
ušt8_t
)(
¤cIx
 - 
ix
);

1594 
m­ToUCh¬s
[
¤cIx
 - 
ix
] = (
ušt8_t
)
de¡Ix
;

1597 
u8b
->
bufN©iveS¹
 = 
ix
;

1598 
u8b
->
bufN©iveLim™
 = 
¤cIx
;

1599 
u8b
->
bufS¹Idx
 = 0;

1600 
u8b
->
bufLim™Idx
 = 
de¡Ix
;

1601 ià(
£’NÚAscii
 =ğ
FALSE
) {

1602 
u8b
->
bufNILim™
 = 
de¡Ix
;

1604 
u8b
->
toUCh¬sM­S¹
 = u8b->
bufN©iveS¹
;

1607 
ut
->
chunkCÚ‹Ás
 = 
buf
;

1608 
ut
->
chunkOff£t
 = 0;

1609 
ut
->
chunkL’gth
 = 
u8b
->
bufLim™Idx
;

1610 
ut
->
chunkN©iveS¹
 = 
u8b
->
bufN©iveS¹
;

1611 
ut
->
chunkN©iveLim™
 = 
u8b
->
bufN©iveLim™
;

1612 
ut
->
ÇtiveIndexšgLim™
 = 
u8b
->
bufNILim™
;

1616 ià(
nulT”mš©ed
 && 
¤cIx
>
ut
->
c
) {

1617 
ut
->
c
 = 
¤cIx
;

1618 ià(
c
==0) {

1621 
ut
->
b
 = 
¤cIx
;

1622 
ut
->
´ovid”Prİ”t›s
 &ğ~
	`I32_FLAG
(
UTEXT_PROVIDER_LENGTH_IS_EXPENSIVE
);

1625  
TRUE
;

1629 
flRev”£
:

1634 ià(
ix
 !ğ
ut
->
b
) {

1635 
	`U8_SET_CP_START
(
s8
, 0, 
ix
);

1641 
UTF8Buf
 *
u8b
 = (UTF8Buà*)
ut
->
q
;

1642 
ut
->
q
 = ut->
p
;

1643 
ut
->
p
 = 
u8b
;

1645 
UCh¬
 *
buf
 = 
u8b
->buf;

1646 
ušt8_t
 *
m­ToN©ive
 = 
u8b
->mapToNative;

1647 
ušt8_t
 *
m­ToUCh¬s
 = 
u8b
->mapToUChars;

1648 
št32_t
 
toUCh¬sM­S¹
 = 
ix
 - (
UTF8_TEXT_CHUNK_SIZE
*3 + 1);

1649 
št32_t
 
de¡Ix
 = 
UTF8_TEXT_CHUNK_SIZE
+2;

1653 
št32_t
 
¤cIx
 = 
ix
;

1654 
št32_t
 
bufNILim™
 = 
de¡Ix
;

1655 
UCh¬32
 
c
;

1660 
m­ToN©ive
[
de¡Ix
] = (
ušt8_t
)(
¤cIx
 - 
toUCh¬sM­S¹
);

1661 
m­ToUCh¬s
[
¤cIx
 - 
toUCh¬sM­S¹
] = (
ušt8_t
)
de¡Ix
;

1666 
de¡Ix
>2 && (
¤cIx
 - 
toUCh¬sM­S¹
 > 5) && (srcIx > 0)) {

1667 
¤cIx
--;

1668 
de¡Ix
--;

1671 
c
 = 
s8
[
¤cIx
];

1672 ià(
c
<0x80) {

1674 
buf
[
de¡Ix
] = (
UCh¬
)
c
;

1675 
m­ToUCh¬s
[
¤cIx
 - 
toUCh¬sM­S¹
] = (
ušt8_t
)
de¡Ix
;

1676 
m­ToN©ive
[
de¡Ix
] = (
ušt8_t
)(
¤cIx
 - 
toUCh¬sM­S¹
);

1680 
št32_t
 
sIx
 = 
¤cIx
;

1686 ià(
c
<=0xbf) {

1687 
c
=
	`utf8_´evCh¬SaãBody
(
s8
, 0, &
¤cIx
, c, -1);

1690 
c
=0x0fffd;

1694 ià(
c
<0x10000) {

1695 
buf
[
de¡Ix
] = (
UCh¬
)
c
;

1696 
m­ToN©ive
[
de¡Ix
] = (
ušt8_t
)(
¤cIx
 - 
toUCh¬sM­S¹
);

1698 
buf
[
de¡Ix
] = 
	`U16_TRAIL
(
c
);

1699 
m­ToN©ive
[
de¡Ix
] = (
ušt8_t
)(
¤cIx
 - 
toUCh¬sM­S¹
);

1700 
buf
[--
de¡Ix
] = 
	`U16_LEAD
(
c
);

1701 
m­ToN©ive
[
de¡Ix
] = (
ušt8_t
)(
¤cIx
 - 
toUCh¬sM­S¹
);

1706 
m­ToUCh¬s
[
sIx
-- - 
toUCh¬sM­S¹
] = (
ušt8_t
)
de¡Ix
;

1707 } 
sIx
 >ğ
¤cIx
);

1713 
bufNILim™
 = 
de¡Ix
;

1716 
u8b
->
bufN©iveS¹
 = 
¤cIx
;

1717 
u8b
->
bufN©iveLim™
 = 
ix
;

1718 
u8b
->
bufS¹Idx
 = 
de¡Ix
;

1719 
u8b
->
bufLim™Idx
 = 
UTF8_TEXT_CHUNK_SIZE
+2;

1720 
u8b
->
bufNILim™
 = bufNILim™ - u8b->
bufS¹Idx
;

1721 
u8b
->
toUCh¬sM­S¹
 =oUCharsMapStart;

1723 
ut
->
chunkCÚ‹Ás
 = &
buf
[
u8b
->
bufS¹Idx
];

1724 
ut
->
chunkL’gth
 = 
u8b
->
bufLim™Idx
 - u8b->
bufS¹Idx
;

1725 
ut
->
chunkOff£t
 = ut->
chunkL’gth
;

1726 
ut
->
chunkN©iveS¹
 = 
u8b
->
bufN©iveS¹
;

1727 
ut
->
chunkN©iveLim™
 = 
u8b
->
bufN©iveLim™
;

1728 
ut
->
ÇtiveIndexšgLim™
 = 
u8b
->
bufNILim™
;

1729  
TRUE
;

1732 
	}
}

1741 
UCh¬
*

1742 
	$u‹xt_¡rFromUTF8
(
UCh¬
 *
de¡
,

1743 
št32_t
 
de¡C­ac™y
,

1744 
št32_t
 *
pDe¡L’gth
,

1745 cÚ¡ * 
¤c
,

1746 
št32_t
 
¤cL’gth
,

1747 
UE¼ÜCode
 *
pE¼ÜCode


1751 
UCh¬
 *
pDe¡
 = 
de¡
;

1752 
UCh¬
 *
pDe¡Lim™
 = 
de¡
+
de¡C­ac™y
;

1753 
UCh¬32
 
ch
=0;

1754 
št32_t
 
šdex
 = 0;

1755 
št32_t
 
»qL’gth
 = 0;

1756 
ušt8_t
* 
pSrc
 = (ušt8_t*è
¤c
;

1759 (
šdex
 < 
¤cL’gth
)&&(
pDe¡
<
pDe¡Lim™
)){

1760 
ch
 = 
pSrc
[
šdex
++];

1761 if(
ch
 <=0x7f){

1762 *
pDe¡
++=(
UCh¬
)
ch
;

1764 
ch
=
	`utf8_ÃxtCh¬SaãBody
(
pSrc
, &
šdex
, 
¤cL’gth
, ch, -1);

1765 if(
ch
<0){

1766 
ch
 = 0xfffd;

1768 if(
	`U_IS_BMP
(
ch
)){

1769 *(
pDe¡
++)=(
UCh¬
)
ch
;

1771 *(
pDe¡
++)=
	`UTF16_LEAD
(
ch
);

1772 if(
pDe¡
<
pDe¡Lim™
){

1773 *(
pDe¡
++)=
	`UTF16_TRAIL
(
ch
);

1775 
»qL’gth
++;

1782 
šdex
 < 
¤cL’gth
){

1783 
ch
 = 
pSrc
[
šdex
++];

1784 if(
ch
 <= 0x7f){

1785 
»qL’gth
++;

1787 
ch
=
	`utf8_ÃxtCh¬SaãBody
(
pSrc
, &
šdex
, 
¤cL’gth
, ch, -1);

1788 if(
ch
<0){

1789 
ch
 = 0xfffd;

1791 
»qL’gth
+=
	`U16_LENGTH
(
ch
);

1795 
»qL’gth
+=(
št32_t
)(
pDe¡
 - 
de¡
);

1797 if(
pDe¡L’gth
){

1798 *
pDe¡L’gth
 = 
»qL’gth
;

1802 
	`u_‹rmš©eUCh¬s
(
de¡
,
de¡C­ac™y
,
»qL’gth
,
pE¼ÜCode
);

1804  
de¡
;

1805 
	}
}

1809 
št32_t
 
U_CALLCONV


1810 
	$utf8TextExŒaù
(
UText
 *
ut
,

1811 
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
,

1812 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

1813 
UE¼ÜCode
 *
pE¼ÜCode
) {

1814 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1817 if(
de¡C­ac™y
<0 || (
de¡
==
NULL
 && destCapacity>0)) {

1818 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1821 
št32_t
 
Ëngth
 = 
ut
->
b
;

1822 
št32_t
 
¡¬t32
 = 
	`pšIndex
(
¡¬t
, 
Ëngth
);

1823 
št32_t
 
lim™32
 = 
	`pšIndex
(
lim™
, 
Ëngth
);

1825 if(
¡¬t32
>
lim™32
) {

1826 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1834 cÚ¡ 
ušt8_t
 *
buf
 = (cÚ¡ ušt8_ˆ*)
ut
->
cÚ‹xt
;

1835 
i
;

1836 ià(
¡¬t32
 < 
ut
->
chunkN©iveLim™
) {

1837 
i
=0; i<3; i++) {

1838 ià(
	`U8_IS_SINGLE
(
buf
[
¡¬t32
]è|| 
	`U8_IS_LEAD
(buf[start32]) || start32==0) {

1841 
¡¬t32
--;

1845 ià(
lim™32
 < 
ut
->
chunkN©iveLim™
) {

1846 
i
=0; i<3; i++) {

1847 ià(
	`U8_IS_SINGLE
(
buf
[
lim™32
]è|| 
	`U8_IS_LEAD
(buf[limit32]) ||†imit32==0) {

1850 
lim™32
--;

1855 
št32_t
 
de¡L’gth
=0;

1856 
	`u‹xt_¡rFromUTF8
(
de¡
, 
de¡C­ac™y
, &
de¡L’gth
,

1857 (cÚ¡ *)
ut
->
cÚ‹xt
+
¡¬t32
, 
lim™32
-start32,

1858 
pE¼ÜCode
);

1859 
	`utf8TextAcûss
(
ut
, 
lim™32
, 
TRUE
);

1860  
de¡L’gth
;

1861 
	}
}

1867 
št64_t
 
U_CALLCONV


1868 
	$utf8TextM­Off£tToN©ive
(cÚ¡ 
UText
 *
ut
) {

1870 
UTF8Buf
 *
u8b
 = (UTF8Buà*)
ut
->
p
;

1871 
	`U_ASSERT
(
ut
->
chunkOff£t
>ut->
ÇtiveIndexšgLim™
 && ut->chunkOff£t<=ut->
chunkL’gth
);

1872 
št32_t
 
ÇtiveOff£t
 = 
u8b
->
m­ToN©ive
[
ut
->
chunkOff£t
 + u8b->
bufS¹Idx
] + u8b->
toUCh¬sM­S¹
;

1873 
	`U_ASSERT
(
ÇtiveOff£t
 >ğ
ut
->
chunkN©iveS¹
 &&‚©iveOff£ˆ<ğut->
chunkN©iveLim™
);

1874  
ÇtiveOff£t
;

1875 
	}
}

1880 
št32_t
 
U_CALLCONV


1881 
	$utf8TextM­IndexToUTF16
(cÚ¡ 
UText
 *
ut
, 
št64_t
 
šdex64
) {

1882 
	`U_ASSERT
(
šdex64
 <= 0x7fffffff);

1883 
št32_t
 
šdex
 = (št32_t)
šdex64
;

1884 
UTF8Buf
 *
u8b
 = (UTF8Buà*)
ut
->
p
;

1885 
	`U_ASSERT
(
šdex
>=
ut
->
chunkN©iveS¹
+ut->
ÇtiveIndexšgLim™
);

1886 
	`U_ASSERT
(
šdex
<=
ut
->
chunkN©iveLim™
);

1887 
št32_t
 
m­Index
 = 
šdex
 - 
u8b
->
toUCh¬sM­S¹
;

1888 
št32_t
 
off£t
 = 
u8b
->
m­ToUCh¬s
[
m­Index
] - u8b->
bufS¹Idx
;

1889 
	`U_ASSERT
(
off£t
>=0 && off£t<=
ut
->
chunkL’gth
);

1890  
off£t
;

1891 
	}
}

1893 
UText
 * 
U_CALLCONV


1894 
	$utf8TextClÚe
(
UText
 *
de¡
, cÚ¡ UTexˆ*
¤c
, 
UBoŞ
 
d“p
, 
UE¼ÜCode
 *
¡©us
)

1897 
de¡
 = 
	`sh®lowTextClÚe
(de¡, 
¤c
, 
¡©us
);

1908 ià(
d“p
 && 
	`U_SUCCESS
(*
¡©us
)) {

1909 
št32_t
 
Ën
 = (št32_t)
	`u‹xt_ÇtiveL’gth
((
UText
 *)
¤c
);

1910 *
cİySŒ
 = (*)
	`u´v_m®loc
(
Ën
+1);

1911 ià(
cİySŒ
 =ğ
NULL
) {

1912 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

1914 
	`u´v_memıy
(
cİySŒ
, 
¤c
->
cÚ‹xt
, 
Ën
+1);

1915 
de¡
->
cÚ‹xt
 = 
cİySŒ
;

1916 
de¡
->
´ovid”Prİ”t›s
 |ğ
	`I32_FLAG
(
UTEXT_PROVIDER_OWNS_TEXT
);

1919  
de¡
;

1920 
	}
}

1923 
U_CALLCONV


1924 
	$utf8TextClo£
(
UText
 *
ut
) {

1928 ià(
ut
->
´ovid”Prİ”t›s
 & 
	`I32_FLAG
(
UTEXT_PROVIDER_OWNS_TEXT
)) {

1929 *
s
 = (*)
ut
->
cÚ‹xt
;

1930 
	`u´v_ä“
(
s
);

1931 
ut
->
cÚ‹xt
 = 
NULL
;

1933 
	}
}

1935 
U_CDECL_END


1938 cÚ¡ 
UTextFuncs
 
	gutf8Funcs
 =

1940 (
UTextFuncs
),

1942 
utf8TextClÚe
,

1943 
utf8TextL’gth
,

1944 
utf8TextAcûss
,

1945 
utf8TextExŒaù
,

1946 
NULL
,

1947 
NULL
,

1948 
utf8TextM­Off£tToN©ive
,

1949 
utf8TextM­IndexToUTF16
,

1950 
utf8TextClo£
,

1951 
NULL
,

1952 
NULL
,

1953 
NULL


1957 cÚ¡ 
	ggEm±ySŒšg
[] = {0};

1959 
U_CAPI
 
UText
 * 
U_EXPORT2


1960 
	$u‹xt_İ’UTF8
(
UText
 *
ut
, cÚ¡ *
s
, 
št64_t
 
Ëngth
, 
UE¼ÜCode
 *
¡©us
) {

1961 if(
	`U_FAILURE
(*
¡©us
)) {

1962  
NULL
;

1964 if(
s
==
NULL
 && 
Ëngth
==0) {

1965 
s
 = 
gEm±ySŒšg
;

1968 if(
s
==
NULL
 || 
Ëngth
<-1 ||†’gth>
INT32_MAX
) {

1969 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

1970  
NULL
;

1973 
ut
 = 
	`u‹xt_£tup
(ut, (
UTF8Buf
è* 2, 
¡©us
);

1974 ià(
	`U_FAILURE
(*
¡©us
)) {

1975  
ut
;

1978 
ut
->
pFuncs
 = &
utf8Funcs
;

1979 
ut
->
cÚ‹xt
 = 
s
;

1980 
ut
->
b
 = (
št32_t
)
Ëngth
;

1981 
ut
->
c
 = (
št32_t
)
Ëngth
;

1982 ià(
ut
->
c
 < 0) {

1983 
ut
->
c
 = 0;

1984 
ut
->
´ovid”Prİ”t›s
 |ğ
	`I32_FLAG
(
UTEXT_PROVIDER_LENGTH_IS_EXPENSIVE
);

1986 
ut
->
p
 = ut->
pExŒa
;

1987 
ut
->
q
 = (*)ut->
pExŒa
 + (
UTF8Buf
);

1988  
ut
;

1990 
	}
}

2013 ’um { 
	mREP_TEXT_CHUNK_SIZE
=10 };

2015 
	sR•lExŒa
 {

2020 
UCh¬
 
	ms
[
REP_TEXT_CHUNK_SIZE
+1];

2024 
U_CDECL_BEGIN


2026 
UText
 * 
U_CALLCONV


2027 
	$»pTextClÚe
(
UText
 *
de¡
, cÚ¡ UTexˆ*
¤c
, 
UBoŞ
 
d“p
, 
UE¼ÜCode
 *
¡©us
) {

2029 
de¡
 = 
	`sh®lowTextClÚe
(de¡, 
¤c
, 
¡©us
);

2036 ià(
d“p
 && 
	`U_SUCCESS
(*
¡©us
)) {

2037 cÚ¡ 
R•ÏûabË
 *
»¶Src
 = (cÚ¡ R•ÏûabË *)
¤c
->
cÚ‹xt
;

2038 
de¡
->
cÚ‹xt
 = 
»¶Src
->
	`şÚe
();

2039 
de¡
->
´ovid”Prİ”t›s
 |ğ
	`I32_FLAG
(
UTEXT_PROVIDER_OWNS_TEXT
);

2042 
de¡
->
´ovid”Prİ”t›s
 |ğ
	`I32_FLAG
(
UTEXT_PROVIDER_WRITABLE
);

2044  
de¡
;

2045 
	}
}

2048 
U_CALLCONV


2049 
	$»pTextClo£
(
UText
 *
ut
) {

2053 ià(
ut
->
´ovid”Prİ”t›s
 & 
	`I32_FLAG
(
UTEXT_PROVIDER_OWNS_TEXT
)) {

2054 
R•ÏûabË
 *
»p
 = (R•ÏûabË *)
ut
->
cÚ‹xt
;

2055 
d–‘e
 
»p
;

2056 
ut
->
cÚ‹xt
 = 
NULL
;

2058 
	}
}

2061 
št64_t
 
U_CALLCONV


2062 
	$»pTextL’gth
(
UText
 *
ut
) {

2063 cÚ¡ 
R•ÏûabË
 *
»¶Src
 = (cÚ¡ R•ÏûabË *)
ut
->
cÚ‹xt
;

2064 
št32_t
 
Ën
 = 
»¶Src
->
	`Ëngth
();

2065  
Ën
;

2066 
	}
}

2069 
UBoŞ
 
U_CALLCONV


2070 
	$»pTextAcûss
(
UText
 *
ut
, 
št64_t
 
šdex
, 
UBoŞ
 
fÜw¬d
) {

2071 cÚ¡ 
R•ÏûabË
 *
»p
=(cÚ¡ R•ÏûabË *)
ut
->
cÚ‹xt
;

2072 
št32_t
 
Ëngth
=
»p
->
	`Ëngth
();

2075 
št32_t
 
šdex32
 = 
	`pšIndex
(
šdex
, 
Ëngth
);

2076 
	`U_ASSERT
(
šdex
<=
INT32_MAX
);

2087 if(
fÜw¬d
) {

2089 ià(
šdex32
>=
ut
->
chunkN©iveS¹
 && index32<ut->
chunkN©iveLim™
) {

2091 
ut
->
chunkOff£t
 = (
št32_t
)(
šdex
 - ut->
chunkN©iveS¹
);

2092  
TRUE
;

2094 ià(
šdex32
>=
Ëngth
 && 
ut
->
chunkN©iveLim™
==length) {

2097 
ut
->
chunkOff£t
 = 
Ëngth
 - (
št32_t
)ut->
chunkN©iveS¹
;

2098  
FALSE
;

2101 
ut
->
chunkN©iveLim™
 = 
šdex
 + 
REP_TEXT_CHUNK_SIZE
 - 1;

2106 if(
ut
->
chunkN©iveLim™
 > 
Ëngth
) {

2107 
ut
->
chunkN©iveLim™
 = 
Ëngth
;

2110 
ut
->
chunkN©iveS¹
 = ut->
chunkN©iveLim™
 - 
REP_TEXT_CHUNK_SIZE
;

2111 if(
ut
->
chunkN©iveS¹
 < 0) {

2112 
ut
->
chunkN©iveS¹
 = 0;

2116 ià(
šdex32
>
ut
->
chunkN©iveS¹
 && index32<=ut->
chunkN©iveLim™
) {

2118 
ut
->
chunkOff£t
 = 
šdex32
 - (
št32_t
)ut->
chunkN©iveS¹
;

2119  
TRUE
;

2121 ià(
šdex32
==0 && 
ut
->
chunkN©iveS¹
==0) {

2124 
ut
->
chunkOff£t
 = 0;

2125  
FALSE
;

2134 
ut
->
chunkN©iveS¹
 = 
šdex32
 + 1 - 
REP_TEXT_CHUNK_SIZE
;

2135 ià(
ut
->
chunkN©iveS¹
 < 0) {

2136 
ut
->
chunkN©iveS¹
 = 0;

2139 
ut
->
chunkN©iveLim™
 = 
šdex32
 + 1;

2140 ià(
ut
->
chunkN©iveLim™
 > 
Ëngth
) {

2141 
ut
->
chunkN©iveLim™
 = 
Ëngth
;

2146 
R•lExŒa
 *
ex
 = (R•lExŒ¨*)
ut
->
pExŒa
;

2148 
UnicodeSŒšg
 
	`bufãr
(
ex
->
s
, 0 , 
REP_TEXT_CHUNK_SIZE
 );

2149 
»p
->
	`exŒaùB‘w“n
((
št32_t
)
ut
->
chunkN©iveS¹
, (št32_t)ut->
chunkN©iveLim™
, 
bufãr
);

2151 
ut
->
chunkCÚ‹Ás
 = 
ex
->
s
;

2152 
ut
->
chunkL’gth
 = (
št32_t
)(ut->
chunkN©iveLim™
 - ut->
chunkN©iveS¹
);

2153 
ut
->
chunkOff£t
 = (
št32_t
)(
šdex32
 - ut->
chunkN©iveS¹
);

2157 ià(
ut
->
chunkN©iveLim™
 < 
Ëngth
 &&

2158 
	`U16_IS_LEAD
(
ex
->
s
[
ut
->
chunkL’gth
-1])) {

2159 
ut
->
chunkL’gth
--;

2160 
ut
->
chunkN©iveLim™
--;

2161 ià(
ut
->
chunkOff£t
 > ut->
chunkL’gth
) {

2162 
ut
->
chunkOff£t
 = ut->
chunkL’gth
;

2168 if(
ut
->
chunkN©iveS¹
>0 && 
	`U16_IS_TRAIL
(
ex
->
s
[0])) {

2169 ++(
ut
->
chunkCÚ‹Ás
);

2170 ++(
ut
->
chunkN©iveS¹
);

2171 --(
ut
->
chunkL’gth
);

2172 --(
ut
->
chunkOff£t
);

2176 
	`U16_SET_CP_START
(
ut
->
chunkCÚ‹Ás
, 0, ut->
chunkOff£t
);

2179 
ut
->
ÇtiveIndexšgLim™
 = ut->
chunkL’gth
;

2181  
TRUE
;

2182 
	}
}

2186 
št32_t
 
U_CALLCONV


2187 
	$»pTextExŒaù
(
UText
 *
ut
,

2188 
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
,

2189 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

2190 
UE¼ÜCode
 *
¡©us
) {

2191 cÚ¡ 
R•ÏûabË
 *
»p
=(cÚ¡ R•ÏûabË *)
ut
->
cÚ‹xt
;

2192 
št32_t
 
Ëngth
=
»p
->
	`Ëngth
();

2194 if(
	`U_FAILURE
(*
¡©us
)) {

2197 if(
de¡C­ac™y
<0 || (
de¡
==
NULL
 && destCapacity>0)) {

2198 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

2200 if(
¡¬t
>
lim™
) {

2201 *
¡©us
=
U_INDEX_OUTOFBOUNDS_ERROR
;

2205 
št32_t
 
¡¬t32
 = 
	`pšIndex
(
¡¬t
, 
Ëngth
);

2206 
št32_t
 
lim™32
 = 
	`pšIndex
(
lim™
, 
Ëngth
);

2209 ià(
¡¬t32
<
Ëngth
 && 
	`U16_IS_TRAIL
(
»p
->
	`ch¬At
(start32)) &&

2210 
	`U_IS_SUPPLEMENTARY
(
»p
->
	`ch¬32At
(
¡¬t32
))){

2211 
¡¬t32
--;

2213 ià(
lim™32
<
Ëngth
 && 
	`U16_IS_TRAIL
(
»p
->
	`ch¬At
(limit32)) &&

2214 
	`U_IS_SUPPLEMENTARY
(
»p
->
	`ch¬32At
(
lim™32
))){

2215 
lim™32
--;

2218 
Ëngth
=
lim™32
-
¡¬t32
;

2219 if(
Ëngth
>
de¡C­ac™y
) {

2220 
lim™32
 = 
¡¬t32
 + 
de¡C­ac™y
;

2222 
UnicodeSŒšg
 
	`bufãr
(
de¡
, 0, 
de¡C­ac™y
);

2223 
»p
->
	`exŒaùB‘w“n
(
¡¬t32
, 
lim™32
, 
bufãr
);

2224 
	`»pTextAcûss
(
ut
, 
lim™32
, 
TRUE
);

2226  
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
Ëngth
, 
¡©us
);

2227 
	}
}

2229 
št32_t
 
U_CALLCONV


2230 
	$»pTextR•Ïû
(
UText
 *
ut
,

2231 
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
,

2232 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
Ëngth
,

2233 
UE¼ÜCode
 *
¡©us
) {

2234 
R•ÏûabË
 *
»p
=(R•ÏûabË *)
ut
->
cÚ‹xt
;

2235 
št32_t
 
ŞdL’gth
;

2237 if(
	`U_FAILURE
(*
¡©us
)) {

2240 if(
¤c
==
NULL
 && 
Ëngth
!=0) {

2241 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

2244 
ŞdL’gth
=
»p
->
	`Ëngth
();

2245 if(
¡¬t
>
lim™
 ) {

2246 *
¡©us
=
U_INDEX_OUTOFBOUNDS_ERROR
;

2250 
št32_t
 
¡¬t32
 = 
	`pšIndex
(
¡¬t
, 
ŞdL’gth
);

2251 
št32_t
 
lim™32
 = 
	`pšIndex
(
lim™
, 
ŞdL’gth
);

2254 ià(
¡¬t32
<
ŞdL’gth
 && 
	`U16_IS_TRAIL
(
»p
->
	`ch¬At
(start32)) &&

2255 
¡¬t32
>0 && 
	`U16_IS_LEAD
(
»p
->
	`ch¬At
(start32-1)))

2257 
¡¬t32
--;

2259 ià(
lim™32
<
ŞdL’gth
 && 
	`U16_IS_LEAD
(
»p
->
	`ch¬At
(limit32-1)) &&

2260 
	`U16_IS_TRAIL
(
»p
->
	`ch¬At
(
lim™32
)))

2262 
lim™32
++;

2266 
UnicodeSŒšg
 
	`»¶SŒ
((
UBoŞ
)(
Ëngth
<0), 
¤c
,†ength);

2267 
»p
->
	`hªdËR•ÏûB‘w“n
(
¡¬t32
, 
lim™32
, 
»¶SŒ
);

2268 
št32_t
 
ÃwL’gth
 = 
»p
->
	`Ëngth
();

2269 
št32_t
 
ËngthD–
 = 
ÃwL’gth
 - 
ŞdL’gth
;

2272 ià(
ut
->
chunkN©iveLim™
 > 
¡¬t32
) {

2275 
	`šv®id©eChunk
(
ut
);

2279 
št32_t
 
ÃwIndexPos
 = 
lim™32
 + 
ËngthD–
;

2280 
	`»pTextAcûss
(
ut
, 
ÃwIndexPos
, 
TRUE
);

2282  
ËngthD–
;

2283 
	}
}

2286 
U_CALLCONV


2287 
	$»pTextCİy
(
UText
 *
ut
,

2288 
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
,

2289 
št64_t
 
de¡Index
,

2290 
UBoŞ
 
move
,

2291 
UE¼ÜCode
 *
¡©us
)

2293 
R•ÏûabË
 *
»p
=(R•ÏûabË *)
ut
->
cÚ‹xt
;

2294 
št32_t
 
Ëngth
=
»p
->
	`Ëngth
();

2296 if(
	`U_FAILURE
(*
¡©us
)) {

2299 ià(
¡¬t
>
lim™
 || (¡¬t<
de¡Index
 && destIndex<limit))

2301 *
¡©us
=
U_INDEX_OUTOFBOUNDS_ERROR
;

2305 
št32_t
 
¡¬t32
 = 
	`pšIndex
(
¡¬t
, 
Ëngth
);

2306 
št32_t
 
lim™32
 = 
	`pšIndex
(
lim™
, 
Ëngth
);

2307 
št32_t
 
de¡Index32
 = 
	`pšIndex
(
de¡Index
, 
Ëngth
);

2311 if(
move
) {

2313 
št32_t
 
£gL’gth
=
lim™32
-
¡¬t32
;

2314 
»p
->
	`cİy
(
¡¬t32
, 
lim™32
, 
de¡Index32
);

2315 if(
de¡Index32
<
¡¬t32
) {

2316 
¡¬t32
+=
£gL’gth
;

2317 
lim™32
+=
£gL’gth
;

2319 
»p
->
	`hªdËR•ÏûB‘w“n
(
¡¬t32
, 
lim™32
, 
	`UnicodeSŒšg
());

2322 
»p
->
	`cİy
(
¡¬t32
, 
lim™32
, 
de¡Index32
);

2327 
št32_t
 
fœ¡AfãùedIndex
 = 
de¡Index32
;

2328 ià(
move
 && 
¡¬t32
<
fœ¡AfãùedIndex
) {

2329 
fœ¡AfãùedIndex
 = 
¡¬t32
;

2331 ià(
fœ¡AfãùedIndex
 < 
ut
->
chunkN©iveLim™
) {

2333 
	`šv®id©eChunk
(
ut
);

2337 
št32_t
 
ÇtiveI‹rIndex
 = 
de¡Index32
 + 
lim™32
 - 
¡¬t32
;

2338 ià(
move
 && 
de¡Index32
>
¡¬t32
) {

2340 
ÇtiveI‹rIndex
 = 
de¡Index32
;

2344 
	`»pTextAcûss
(
ut
, 
ÇtiveI‹rIndex
, 
TRUE
);

2345 
	}
}

2347 cÚ¡ 
UTextFuncs
 
	g»pFuncs
 =

2349 (
UTextFuncs
),

2351 
»pTextClÚe
,

2352 
»pTextL’gth
,

2353 
»pTextAcûss
,

2354 
»pTextExŒaù
,

2355 
»pTextR•Ïû
,

2356 
»pTextCİy
,

2357 
NULL
,

2358 
NULL
,

2359 
»pTextClo£
,

2360 
NULL
,

2361 
NULL
,

2362 
NULL


2366 
U_CAPI
 
UText
 * 
U_EXPORT2


2367 
	$u‹xt_İ’R•ÏûabË
(
UText
 *
ut
, 
R•ÏûabË
 *
»p
, 
UE¼ÜCode
 *
¡©us
)

2369 if(
	`U_FAILURE
(*
¡©us
)) {

2370  
NULL
;

2372 if(
»p
==
NULL
) {

2373 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

2374  
NULL
;

2376 
ut
 = 
	`u‹xt_£tup
(ut, (
R•lExŒa
), 
¡©us
);

2378 
ut
->
´ovid”Prİ”t›s
 = 
	`I32_FLAG
(
UTEXT_PROVIDER_WRITABLE
);

2379 if(
»p
->
	`hasM‘aD©a
()) {

2380 
ut
->
´ovid”Prİ”t›s
 |=
	`I32_FLAG
(
UTEXT_PROVIDER_HAS_META_DATA
);

2383 
ut
->
pFuncs
 = &
»pFuncs
;

2384 
ut
->
cÚ‹xt
 = 
»p
;

2385  
ut
;

2386 
	}
}

2388 
U_CDECL_END


2410 
U_CDECL_BEGIN


2413 
UText
 * 
U_CALLCONV


2414 
	$uni¡rTextClÚe
(
UText
 *
de¡
, cÚ¡ UTexˆ*
¤c
, 
UBoŞ
 
d“p
, 
UE¼ÜCode
 *
¡©us
) {

2416 
de¡
 = 
	`sh®lowTextClÚe
(de¡, 
¤c
, 
¡©us
);

2423 ià(
d“p
 && 
	`U_SUCCESS
(*
¡©us
)) {

2424 cÚ¡ 
UnicodeSŒšg
 *
¤cSŒšg
 = (cÚ¡ UnicodeSŒšg *)
¤c
->
cÚ‹xt
;

2425 
de¡
->
cÚ‹xt
 = 
Ãw
 
	`UnicodeSŒšg
(*
¤cSŒšg
);

2426 
de¡
->
´ovid”Prİ”t›s
 |ğ
	`I32_FLAG
(
UTEXT_PROVIDER_OWNS_TEXT
);

2429 
de¡
->
´ovid”Prİ”t›s
 |ğ
	`I32_FLAG
(
UTEXT_PROVIDER_WRITABLE
);

2431  
de¡
;

2432 
	}
}

2434 
U_CALLCONV


2435 
	$uni¡rTextClo£
(
UText
 *
ut
) {

2439 ià(
ut
->
´ovid”Prİ”t›s
 & 
	`I32_FLAG
(
UTEXT_PROVIDER_OWNS_TEXT
)) {

2440 
UnicodeSŒšg
 *
¡r
 = (UnicodeSŒšg *)
ut
->
cÚ‹xt
;

2441 
d–‘e
 
¡r
;

2442 
ut
->
cÚ‹xt
 = 
NULL
;

2444 
	}
}

2447 
št64_t
 
U_CALLCONV


2448 
	$uni¡rTextL’gth
(
UText
 *
t
) {

2449  ((cÚ¡ 
UnicodeSŒšg
 *)
t
->
cÚ‹xt
)->
	`Ëngth
();

2450 
	}
}

2453 
UBoŞ
 
U_CALLCONV


2454 
	$uni¡rTextAcûss
(
UText
 *
ut
, 
št64_t
 
šdex
, 
UBoŞ
 
fÜw¬d
) {

2455 
št32_t
 
Ëngth
 = 
ut
->
chunkL’gth
;

2456 
ut
->
chunkOff£t
 = 
	`pšIndex
(
šdex
, 
Ëngth
);

2459 
UBoŞ
 
»tV®
 = (
fÜw¬d
 && 
šdex
<
Ëngth
) || (!forward && index>0);

2460  
»tV®
;

2461 
	}
}

2465 
št32_t
 
U_CALLCONV


2466 
	$uni¡rTextExŒaù
(
UText
 *
t
,

2467 
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
,

2468 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

2469 
UE¼ÜCode
 *
pE¼ÜCode
) {

2470 cÚ¡ 
UnicodeSŒšg
 *
us
=(cÚ¡ UnicodeSŒšg *)
t
->
cÚ‹xt
;

2471 
št32_t
 
Ëngth
=
us
->
	`Ëngth
();

2473 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2476 if(
de¡C­ac™y
<0 || (
de¡
==
NULL
 && destCapacity>0)) {

2477 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

2479 if(
¡¬t
<0 || s¹>
lim™
) {

2480 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

2484 
št32_t
 
¡¬t32
 = 
¡¬t
<
Ëngth
 ? 
us
->
	`g‘Ch¬32S¹
((int32_t)start) :†ength;

2485 
št32_t
 
lim™32
 = 
lim™
<
Ëngth
 ? 
us
->
	`g‘Ch¬32S¹
((int32_t)limit) :†ength;

2487 
Ëngth
=
lim™32
-
¡¬t32
;

2488 ià(
de¡C­ac™y
>0 && 
de¡
!=
NULL
) {

2489 
št32_t
 
ŒimmedL’gth
 = 
Ëngth
;

2490 if(
ŒimmedL’gth
>
de¡C­ac™y
) {

2491 
ŒimmedL’gth
=
de¡C­ac™y
;

2493 
us
->
	`exŒaù
(
¡¬t32
, 
ŒimmedL’gth
, 
de¡
);

2494 
t
->
chunkOff£t
 = 
¡¬t32
+
ŒimmedL’gth
;

2496 
t
->
chunkOff£t
 = 
¡¬t32
;

2498 
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
Ëngth
, 
pE¼ÜCode
);

2499  
Ëngth
;

2500 
	}
}

2502 
št32_t
 
U_CALLCONV


2503 
	$uni¡rTextR•Ïû
(
UText
 *
ut
,

2504 
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
,

2505 cÚ¡ 
UCh¬
 *
¤c
, 
št32_t
 
Ëngth
,

2506 
UE¼ÜCode
 *
pE¼ÜCode
) {

2507 
UnicodeSŒšg
 *
us
=(UnicodeSŒšg *)
ut
->
cÚ‹xt
;

2508 
št32_t
 
ŞdL’gth
;

2510 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2513 if(
¤c
==
NULL
 && 
Ëngth
!=0) {

2514 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

2516 if(
¡¬t
>
lim™
) {

2517 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

2520 
ŞdL’gth
=
us
->
	`Ëngth
();

2521 
št32_t
 
¡¬t32
 = 
	`pšIndex
(
¡¬t
, 
ŞdL’gth
);

2522 
št32_t
 
lim™32
 = 
	`pšIndex
(
lim™
, 
ŞdL’gth
);

2523 ià(
¡¬t32
 < 
ŞdL’gth
) {

2524 
¡¬t32
 = 
us
->
	`g‘Ch¬32S¹
(start32);

2526 ià(
lim™32
 < 
ŞdL’gth
) {

2527 
lim™32
 = 
us
->
	`g‘Ch¬32S¹
(limit32);

2531 
us
->
	`»¶aû
(
¡¬t32
, 
lim™32
-¡¬t32, 
¤c
, 
Ëngth
);

2532 
št32_t
 
ÃwL’gth
 = 
us
->
	`Ëngth
();

2535 
ut
->
chunkCÚ‹Ás
 = 
us
->
	`g‘Bufãr
();

2536 
ut
->
chunkL’gth
 = 
ÃwL’gth
;

2537 
ut
->
chunkN©iveLim™
 = 
ÃwL’gth
;

2538 
ut
->
ÇtiveIndexšgLim™
 = 
ÃwL’gth
;

2541 
št32_t
 
ËngthD–
 = 
ÃwL’gth
 - 
ŞdL’gth
;

2542 
ut
->
chunkOff£t
 = 
lim™32
 + 
ËngthD–
;

2544  
ËngthD–
;

2545 
	}
}

2547 
U_CALLCONV


2548 
	$uni¡rTextCİy
(
UText
 *
ut
,

2549 
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
,

2550 
št64_t
 
de¡Index
,

2551 
UBoŞ
 
move
,

2552 
UE¼ÜCode
 *
pE¼ÜCode
) {

2553 
UnicodeSŒšg
 *
us
=(UnicodeSŒšg *)
ut
->
cÚ‹xt
;

2554 
št32_t
 
Ëngth
=
us
->
	`Ëngth
();

2556 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2559 
št32_t
 
¡¬t32
 = 
	`pšIndex
(
¡¬t
, 
Ëngth
);

2560 
št32_t
 
lim™32
 = 
	`pšIndex
(
lim™
, 
Ëngth
);

2561 
št32_t
 
de¡Index32
 = 
	`pšIndex
(
de¡Index
, 
Ëngth
);

2563 ifĞ
¡¬t32
>
lim™32
 || (¡¬t32<
de¡Index32
 && destIndex32<limit32)) {

2564 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

2568 if(
move
) {

2570 
št32_t
 
£gL’gth
=
lim™32
-
¡¬t32
;

2571 
us
->
	`cİy
(
¡¬t32
, 
lim™32
, 
de¡Index32
);

2572 if(
de¡Index32
<
¡¬t32
) {

2573 
¡¬t32
+=
£gL’gth
;

2575 
us
->
	`»¶aû
(
¡¬t32
, 
£gL’gth
, 
NULL
, 0);

2578 
us
->
	`cİy
(
¡¬t32
, 
lim™32
, 
de¡Index32
);

2582 
ut
->
chunkCÚ‹Ás
 = 
us
->
	`g‘Bufãr
();

2583 ià(
move
==
FALSE
) {

2585 
ut
->
chunkL’gth
 +ğ
lim™32
-
¡¬t32
;

2586 
ut
->
chunkN©iveLim™
 = ut->
chunkL’gth
;

2587 
ut
->
ÇtiveIndexšgLim™
 = ut->
chunkL’gth
;

2591 
ut
->
chunkOff£t
 = 
de¡Index32
+
lim™32
-
¡¬t32
;

2592 ià(
move
 && 
de¡Index32
>
¡¬t32
) {

2593 
ut
->
chunkOff£t
 = 
de¡Index32
;

2596 
	}
}

2598 cÚ¡ 
UTextFuncs
 
	guni¡rFuncs
 =

2600 (
UTextFuncs
),

2602 
uni¡rTextClÚe
,

2603 
uni¡rTextL’gth
,

2604 
uni¡rTextAcûss
,

2605 
uni¡rTextExŒaù
,

2606 
uni¡rTextR•Ïû
,

2607 
uni¡rTextCİy
,

2608 
NULL
,

2609 
NULL
,

2610 
uni¡rTextClo£
,

2611 
NULL
,

2612 
NULL
,

2613 
NULL


2618 
U_CDECL_END


2621 
U_CAPI
 
UText
 * 
U_EXPORT2


2622 
	$u‹xt_İ’UnicodeSŒšg
(
UText
 *
ut
, 
UnicodeSŒšg
 *
s
, 
UE¼ÜCode
 *
¡©us
) {

2625 
ut
 = 
	`u‹xt_£tup
(ut, 0, 
¡©us
);

2626 ià(
	`U_SUCCESS
(*
¡©us
)) {

2627 
ut
->
pFuncs
 = &
uni¡rFuncs
;

2628 
ut
->
cÚ‹xt
 = 
s
;

2629 
ut
->
´ovid”Prİ”t›s
 = 
	`I32_FLAG
(
UTEXT_PROVIDER_STABLE_CHUNKS
)|

2630 
	`I32_FLAG
(
UTEXT_PROVIDER_WRITABLE
);

2632 
ut
->
chunkCÚ‹Ás
 = 
s
->
	`g‘Bufãr
();

2633 
ut
->
chunkL’gth
 = 
s
->
	`Ëngth
();

2634 
ut
->
chunkN©iveS¹
 = 0;

2635 
ut
->
chunkN©iveLim™
 = ut->
chunkL’gth
;

2636 
ut
->
ÇtiveIndexšgLim™
 = ut->
chunkL’gth
;

2638  
ut
;

2639 
	}
}

2643 
U_CAPI
 
UText
 * 
U_EXPORT2


2644 
	$u‹xt_İ’CÚ¡UnicodeSŒšg
(
UText
 *
ut
, cÚ¡ 
UnicodeSŒšg
 *
s
, 
UE¼ÜCode
 *
¡©us
) {

2645 
ut
 = 
	`u‹xt_£tup
(ut, 0, 
¡©us
);

2649 ià(
	`U_SUCCESS
(*
¡©us
)) {

2650 
ut
->
pFuncs
 = &
uni¡rFuncs
;

2651 
ut
->
cÚ‹xt
 = 
s
;

2652 
ut
->
´ovid”Prİ”t›s
 = 
	`I32_FLAG
(
UTEXT_PROVIDER_STABLE_CHUNKS
);

2653 
ut
->
chunkCÚ‹Ás
 = 
s
->
	`g‘Bufãr
();

2654 
ut
->
chunkL’gth
 = 
s
->
	`Ëngth
();

2655 
ut
->
chunkN©iveS¹
 = 0;

2656 
ut
->
chunkN©iveLim™
 = ut->
chunkL’gth
;

2657 
ut
->
ÇtiveIndexšgLim™
 = ut->
chunkL’gth
;

2659  
ut
;

2660 
	}
}

2674 
U_CDECL_BEGIN


2677 
UText
 * 
U_CALLCONV


2678 
	$uc¡rTextClÚe
(
UText
 *
de¡
, cÚ¡ UTexˆ* 
¤c
, 
UBoŞ
 
d“p
, 
UE¼ÜCode
 * 
¡©us
) {

2680 
de¡
 = 
	`sh®lowTextClÚe
(de¡, 
¤c
, 
¡©us
);

2687 ià(
d“p
 && 
	`U_SUCCESS
(*
¡©us
)) {

2688 
	`U_ASSERT
(
	`u‹xt_ÇtiveL’gth
(
de¡
è< 
INT32_MAX
);

2689 
št32_t
 
Ën
 = (št32_t)
	`u‹xt_ÇtiveL’gth
(
de¡
);

2692 cÚ¡ 
UCh¬
 *
¤cSŒ
 = (cÚ¡ UCh¬ *)
¤c
->
cÚ‹xt
;

2693 
UCh¬
 *
cİySŒ
 = (UCh¬ *)
	`u´v_m®loc
((
Ën
+1) * (UChar));

2694 ià(
cİySŒ
 =ğ
NULL
) {

2695 *
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

2697 
št64_t
 
i
;

2698 
i
=0; i<
Ën
; i++) {

2699 
cİySŒ
[
i
] = 
¤cSŒ
[i];

2701 
cİySŒ
[
Ën
] = 0;

2702 
de¡
->
cÚ‹xt
 = 
cİySŒ
;

2703 
de¡
->
´ovid”Prİ”t›s
 |ğ
	`I32_FLAG
(
UTEXT_PROVIDER_OWNS_TEXT
);

2706  
de¡
;

2707 
	}
}

2710 
U_CALLCONV


2711 
	$uc¡rTextClo£
(
UText
 *
ut
) {

2715 ià(
ut
->
´ovid”Prİ”t›s
 & 
	`I32_FLAG
(
UTEXT_PROVIDER_OWNS_TEXT
)) {

2716 
UCh¬
 *
s
 = (UCh¬ *)
ut
->
cÚ‹xt
;

2717 
	`u´v_ä“
(
s
);

2718 
ut
->
cÚ‹xt
 = 
NULL
;

2720 
	}
}

2724 
št64_t
 
U_CALLCONV


2725 
	$uc¡rTextL’gth
(
UText
 *
ut
) {

2726 ià(
ut
->
a
 < 0) {

2730 cÚ¡ 
UCh¬
 *
¡r
 = (cÚ¡ UCh¬ *)
ut
->
cÚ‹xt
;

2732 ià(
¡r
[
ut
->
chunkN©iveLim™
] == 0) {

2735 
ut
->
chunkN©iveLim™
++;

2737 
ut
->
a
 = ut->
chunkN©iveLim™
;

2738 
ut
->
chunkL’gth
 = (
št32_t
)ut->
chunkN©iveLim™
;

2739 
ut
->
ÇtiveIndexšgLim™
 = ut->
chunkL’gth
;

2740 
ut
->
´ovid”Prİ”t›s
 &ğ~
	`I32_FLAG
(
UTEXT_PROVIDER_LENGTH_IS_EXPENSIVE
);

2742  
ut
->
a
;

2743 
	}
}

2746 
UBoŞ
 
U_CALLCONV


2747 
	$uc¡rTextAcûss
(
UText
 *
ut
, 
št64_t
 
šdex
, 
UBoŞ
 
fÜw¬d
) {

2748 cÚ¡ 
UCh¬
 *
¡r
 = (cÚ¡ UCh¬ *)
ut
->
cÚ‹xt
;

2752 ià(
šdex
<0) {

2753 
šdex
 = 0;

2754 } ià(
šdex
 < 
ut
->
chunkN©iveLim™
) {

2757 
	`U16_SET_CP_START
(
¡r
, 0, 
šdex
);

2758 } ià(
ut
->
a
 >= 0) {

2761 
šdex
 = 
ut
->
a
;

2768 
št32_t
 
sÿnLim™
 = (št32_t)
šdex
 + 32;

2769 ià((
šdex
 + 32)>
INT32_MAX
 || (index + 32)<0 ) {

2770 
sÿnLim™
 = 
INT32_MAX
;

2773 
št32_t
 
chunkLim™
 = (št32_t)
ut
->
chunkN©iveLim™
;

2774 ; 
chunkLim™
<
sÿnLim™
; chunkLimit++) {

2775 ià(
¡r
[
chunkLim™
] == 0) {

2778 
ut
->
a
 = 
chunkLim™
;

2779 
ut
->
chunkL’gth
 = 
chunkLim™
;

2780 
ut
->
ÇtiveIndexšgLim™
 = 
chunkLim™
;

2781 ià(
šdex
 >ğ
chunkLim™
) {

2782 
šdex
 = 
chunkLim™
;

2784 
	`U16_SET_CP_START
(
¡r
, 0, 
šdex
);

2787 
ut
->
chunkN©iveLim™
 = 
chunkLim™
;

2788 
ut
->
´ovid”Prİ”t›s
 &ğ~
	`I32_FLAG
(
UTEXT_PROVIDER_LENGTH_IS_EXPENSIVE
);

2789 
b»akout
;

2793 
	`U16_SET_CP_START
(
¡r
, 0, 
šdex
);

2794 ià(
chunkLim™
 =ğ
INT32_MAX
) {

2798 
ut
->
a
 = 
chunkLim™
;

2799 
ut
->
chunkL’gth
 = 
chunkLim™
;

2800 
ut
->
ÇtiveIndexšgLim™
 = 
chunkLim™
;

2801 ià(
šdex
 > 
chunkLim™
) {

2802 
šdex
 = 
chunkLim™
;

2804 
ut
->
chunkN©iveLim™
 = 
chunkLim™
;

2805 
ut
->
´ovid”Prİ”t›s
 &ğ~
	`I32_FLAG
(
UTEXT_PROVIDER_LENGTH_IS_EXPENSIVE
);

2811 ià(
	`U16_IS_LEAD
(
¡r
[
chunkLim™
-1])) {

2812 --
chunkLim™
;

2818 
ut
->
chunkN©iveLim™
 = 
chunkLim™
;

2819 
ut
->
ÇtiveIndexšgLim™
 = 
chunkLim™
;

2820 
ut
->
chunkL’gth
 = 
chunkLim™
;

2824 
b»akout
:

2825 
	`U_ASSERT
(
šdex
<=
INT32_MAX
);

2826 
ut
->
chunkOff£t
 = (
št32_t
)
šdex
;

2829 
UBoŞ
 
»tV®
 = (
fÜw¬d
 && 
šdex
<
ut
->
chunkN©iveLim™
) || (!forward && index>0);

2830  
»tV®
;

2831 
	}
}

2835 
št32_t
 
U_CALLCONV


2836 
	$uc¡rTextExŒaù
(
UText
 *
ut
,

2837 
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
,

2838 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

2839 
UE¼ÜCode
 *
pE¼ÜCode
)

2841 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

2844 if(
de¡C­ac™y
<0 || (
de¡
==
NULL
 && de¡C­ac™y>0è|| 
¡¬t
>
lim™
) {

2845 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

2849 cÚ¡ 
UCh¬
 *
s
=(cÚ¡ UCh¬ *)
ut
->
cÚ‹xt
;

2850 
št32_t
 
si
, 
di
;

2852 
št32_t
 
¡¬t32
;

2853 
št32_t
 
lim™32
;

2858 
	`uc¡rTextAcûss
(
ut
, 
¡¬t
, 
TRUE
);

2859 
	`U_ASSERT
(
¡¬t
 <ğ
INT32_MAX
);

2860 
¡¬t32
 = (
št32_t
)
¡¬t
;

2862 
št32_t
 
¡rL’gth
=(št32_t)
ut
->
a
;

2863 ià(
¡rL’gth
 >= 0) {

2864 
lim™32
 = 
	`pšIndex
(
lim™
, 
¡rL’gth
);

2866 
lim™32
 = 
	`pšIndex
(
lim™
, 
INT32_MAX
);

2869 
di
 = 0;

2870 
si
=
¡¬t32
; si<
lim™32
; si++) {

2871 ià(
¡rL’gth
<0 && 
s
[
si
]==0) {

2873 
ut
->
a
 = 
si
;

2874 
ut
->
chunkN©iveLim™
 = 
si
;

2875 
ut
->
chunkL’gth
 = 
si
;

2876 
ut
->
ÇtiveIndexšgLim™
 = 
si
;

2877 
¡rL’gth
 = 
si
;

2880 ià(
di
<
de¡C­ac™y
) {

2882 
de¡
[
di
] = 
s
[
si
];

2884 ià(
¡rL’gth
>=0) {

2887 
di
 = 
lim™32
 - 
¡¬t32
;

2888 
si
 = 
lim™32
;

2892 
di
++;

2897 ià(
si
>0 && 
	`U16_IS_LEAD
(
s
[si-1]) &&

2898 ((
si
<
¡rL’gth
 || sŒL’gth<0è&& 
	`U16_IS_TRAIL
(
s
[si])))

2900 ià(
di
<
de¡C­ac™y
) {

2902 
de¡
[
di
++] = 
s
[
si
++];

2907 
ut
->
chunkOff£t
 = 
	`u´v_mš
(
¡rL’gth
, 
¡¬t32
 + 
de¡C­ac™y
);

2911 
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
di
, 
pE¼ÜCode
);

2912  
di
;

2913 
	}
}

2915 cÚ¡ 
UTextFuncs
 
	guc¡rFuncs
 =

2917 (
UTextFuncs
),

2919 
uc¡rTextClÚe
,

2920 
uc¡rTextL’gth
,

2921 
uc¡rTextAcûss
,

2922 
uc¡rTextExŒaù
,

2923 
NULL
,

2924 
NULL
,

2925 
NULL
,

2926 
NULL
,

2927 
uc¡rTextClo£
,

2928 
NULL
,

2929 
NULL
,

2930 
NULL
,

2933 
U_CDECL_END


2935 cÚ¡ 
UCh¬
 
	ggEm±yUSŒšg
[] = {0};

2937 
U_CAPI
 
UText
 * 
U_EXPORT2


2938 
	$u‹xt_İ’UCh¬s
(
UText
 *
ut
, cÚ¡ 
UCh¬
 *
s
, 
št64_t
 
Ëngth
, 
UE¼ÜCode
 *
¡©us
) {

2939 ià(
	`U_FAILURE
(*
¡©us
)) {

2940  
NULL
;

2942 if(
s
==
NULL
 && 
Ëngth
==0) {

2943 
s
 = 
gEm±yUSŒšg
;

2945 ià(
s
==
NULL
 || 
Ëngth
 < -1 ||†’gth>
INT32_MAX
) {

2946 *
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

2947  
NULL
;

2949 
ut
 = 
	`u‹xt_£tup
(ut, 0, 
¡©us
);

2950 ià(
	`U_SUCCESS
(*
¡©us
)) {

2951 
ut
->
pFuncs
 = &
uc¡rFuncs
;

2952 
ut
->
cÚ‹xt
 = 
s
;

2953 
ut
->
´ovid”Prİ”t›s
 = 
	`I32_FLAG
(
UTEXT_PROVIDER_STABLE_CHUNKS
);

2954 ià(
Ëngth
==-1) {

2955 
ut
->
´ovid”Prİ”t›s
 |ğ
	`I32_FLAG
(
UTEXT_PROVIDER_LENGTH_IS_EXPENSIVE
);

2957 
ut
->
a
 = 
Ëngth
;

2958 
ut
->
chunkCÚ‹Ás
 = 
s
;

2959 
ut
->
chunkN©iveS¹
 = 0;

2960 
ut
->
chunkN©iveLim™
 = 
Ëngth
>=0?†ength : 0;

2961 
ut
->
chunkL’gth
 = (
št32_t
)ut->
chunkN©iveLim™
;

2962 
ut
->
chunkOff£t
 = 0;

2963 
ut
->
ÇtiveIndexšgLim™
 = ut->
chunkL’gth
;

2965  
ut
;

2966 
	}
}

2984 
	#CIBufSize
 16

	)

2986 
U_CDECL_BEGIN


2987 
U_CALLCONV


2988 
	$ch¬I‹rTextClo£
(
UText
 *
ut
) {

2992 
Ch¬aù”I‹¿tÜ
 *
ci
 = (Ch¬aù”I‹¿tÜ *)
ut
->
r
;

2993 
d–‘e
 
ci
;

2994 
ut
->
r
 = 
NULL
;

2995 
	}
}

2997 
št64_t
 
U_CALLCONV


2998 
	$ch¬I‹rTextL’gth
(
UText
 *
ut
) {

2999  (
št32_t
)
ut
->
a
;

3000 
	}
}

3002 
UBoŞ
 
U_CALLCONV


3003 
	$ch¬I‹rTextAcûss
(
UText
 *
ut
, 
št64_t
 
šdex
, 
UBoŞ
 
fÜw¬d
) {

3004 
Ch¬aù”I‹¿tÜ
 *
ci
 = (Ch¬aù”I‹¿tÜ *)
ut
->
cÚ‹xt
;

3006 
št32_t
 
ş³dIndex
 = (št32_t)
šdex
;

3007 ià(
ş³dIndex
<0) {

3008 
ş³dIndex
=0;

3009 } ià(
ş³dIndex
>=
ut
->
a
) {

3010 
ş³dIndex
=(
št32_t
)
ut
->
a
;

3012 
št32_t
 
ÃededIndex
 = 
ş³dIndex
;

3013 ià(!
fÜw¬d
 && 
ÃededIndex
>0) {

3015 
ÃededIndex
--;

3016 } ià(
fÜw¬d
 && 
ÃededIndex
==
ut
->
a
 &&‚eededIndex>0) {

3018 
ÃededIndex
--;

3022 
ÃededIndex
 -ğÃededIndex % 
CIBufSize
;

3024 
UCh¬
 *
buf
 = 
NULL
;

3025 
UBoŞ
 
ÃedChunkS‘up
 = 
TRUE
;

3026 
i
;

3027 ià(
ut
->
chunkN©iveS¹
 =ğ
ÃededIndex
) {

3029 
ÃedChunkS‘up
 = 
FALSE
;

3030 } ià(
ut
->
b
 =ğ
ÃededIndex
) {

3032 
buf
 = (
UCh¬
 *)
ut
->
p
;

3033 } ià(
ut
->
c
 =ğ
ÃededIndex
) {

3035 
buf
 = (
UCh¬
 *)
ut
->
q
;

3040 
buf
 = (
UCh¬
 *)
ut
->
p
;

3041 ià(
ut
->
p
 =ğut->
chunkCÚ‹Ás
) {

3042 
buf
 = (
UCh¬
 *)
ut
->
q
;

3044 
ci
->
	`£tIndex
(
ÃededIndex
);

3045 
i
=0; i<
CIBufSize
; i++) {

3046 
buf
[
i
] = 
ci
->
	`ÃxtPo¡Inc
();

3047 ià(
i
+
ÃededIndex
 > 
ut
->
a
) {

3055 ià(
ÃedChunkS‘up
) {

3056 
ut
->
chunkCÚ‹Ás
 = 
buf
;

3057 
ut
->
chunkL’gth
 = 
CIBufSize
;

3058 
ut
->
chunkN©iveS¹
 = 
ÃededIndex
;

3059 
ut
->
chunkN©iveLim™
 = 
ÃededIndex
 + 
CIBufSize
;

3060 ià(
ut
->
chunkN©iveLim™
 > ut->
a
) {

3061 
ut
->
chunkN©iveLim™
 = ut->
a
;

3062 
ut
->
chunkL’gth
 = (
št32_t
)(ut->
chunkN©iveLim™
)-(št32_t)(ut->
chunkN©iveS¹
);

3064 
ut
->
ÇtiveIndexšgLim™
 = ut->
chunkL’gth
;

3065 
	`U_ASSERT
(
ut
->
chunkOff£t
>=0 && ut->chunkOff£t<=
CIBufSize
);

3067 
ut
->
chunkOff£t
 = 
ş³dIndex
 - (
št32_t
)ut->
chunkN©iveS¹
;

3068 
UBoŞ
 
sucûss
 = (
fÜw¬d
? 
ut
->
chunkOff£t
<ut->
chunkL’gth
 : ut->chunkOffset>0);

3069  
sucûss
;

3070 
	}
}

3072 
UText
 * 
U_CALLCONV


3073 
	$ch¬I‹rTextClÚe
(
UText
 *
de¡
, cÚ¡ UTexˆ*
¤c
, 
UBoŞ
 
d“p
, 
UE¼ÜCode
 * 
¡©us
) {

3074 ià(
	`U_FAILURE
(*
¡©us
)) {

3075  
NULL
;

3078 ià(
d“p
) {

3080 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

3081  
NULL
;

3083 
Ch¬aù”I‹¿tÜ
 *
¤cCI
 =(Ch¬aù”I‹¿tÜ *)
¤c
->
cÚ‹xt
;

3084 
¤cCI
 = srcCI->
	`şÚe
();

3085 
de¡
 = 
	`u‹xt_İ’Ch¬aù”I‹¿tÜ
(de¡, 
¤cCI
, 
¡©us
);

3088 
št64_t
 
ix
 = 
	`u‹xt_g‘N©iveIndex
((
UText
 *)
¤c
);

3089 
	`u‹xt_£tN©iveIndex
(
de¡
, 
ix
);

3090 
de¡
->
r
 = 
¤cCI
;

3092  
de¡
;

3093 
	}
}

3095 
št32_t
 
U_CALLCONV


3096 
	$ch¬I‹rTextExŒaù
(
UText
 *
ut
,

3097 
št64_t
 
¡¬t
, iÁ64_ˆ
lim™
,

3098 
UCh¬
 *
de¡
, 
št32_t
 
de¡C­ac™y
,

3099 
UE¼ÜCode
 *
¡©us
)

3101 if(
	`U_FAILURE
(*
¡©us
)) {

3104 if(
de¡C­ac™y
<0 || (
de¡
==
NULL
 && de¡C­ac™y>0è|| 
¡¬t
>
lim™
) {

3105 *
¡©us
=
U_ILLEGAL_ARGUMENT_ERROR
;

3108 
št32_t
 
Ëngth
 = (št32_t)
ut
->
a
;

3109 
št32_t
 
¡¬t32
 = 
	`pšIndex
(
¡¬t
, 
Ëngth
);

3110 
št32_t
 
lim™32
 = 
	`pšIndex
(
lim™
, 
Ëngth
);

3111 
št32_t
 
de¡i
 = 0;

3112 
št32_t
 
¤ci
;

3113 
št32_t
 
cİyLim™
;

3115 
Ch¬aù”I‹¿tÜ
 *
ci
 = (Ch¬aù”I‹¿tÜ *)
ut
->
cÚ‹xt
;

3116 
ci
->
	`£tIndex32
(
¡¬t32
);

3117 
¤ci
 = 
ci
->
	`g‘Index
();

3118 
cİyLim™
 = 
¤ci
;

3119 
¤ci
<
lim™32
) {

3120 
UCh¬32
 
c
 = 
ci
->
	`Ãxt32Po¡Inc
();

3121 
št32_t
 
Ën
 = 
	`U16_LENGTH
(
c
);

3122 ià(
de¡i
+
Ën
 <ğ
de¡C­ac™y
) {

3123 
	`U16_APPEND_UNSAFE
(
de¡
, 
de¡i
, 
c
);

3124 
cİyLim™
 = 
¤ci
+
Ën
;

3126 
de¡i
 +ğ
Ën
;

3127 *
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

3129 
¤ci
 +ğ
Ën
;

3132 
	`ch¬I‹rTextAcûss
(
ut
, 
cİyLim™
, 
TRUE
);

3134 
	`u_‹rmš©eUCh¬s
(
de¡
, 
de¡C­ac™y
, 
de¡i
, 
¡©us
);

3135  
de¡i
;

3136 
	}
}

3138 cÚ¡ 
UTextFuncs
 
	gch¬I‹rFuncs
 =

3140 (
UTextFuncs
),

3142 
ch¬I‹rTextClÚe
,

3143 
ch¬I‹rTextL’gth
,

3144 
ch¬I‹rTextAcûss
,

3145 
ch¬I‹rTextExŒaù
,

3146 
NULL
,

3147 
NULL
,

3148 
NULL
,

3149 
NULL
,

3150 
ch¬I‹rTextClo£
,

3151 
NULL
,

3152 
NULL
,

3153 
NULL


3155 
U_CDECL_END


3158 
U_CAPI
 
UText
 * 
U_EXPORT2


3159 
	$u‹xt_İ’Ch¬aù”I‹¿tÜ
(
UText
 *
ut
, 
Ch¬aù”I‹¿tÜ
 *
ci
, 
UE¼ÜCode
 *
¡©us
) {

3160 ià(
	`U_FAILURE
(*
¡©us
)) {

3161  
NULL
;

3164 ià(
ci
->
	`¡¬tIndex
() > 0) {

3166 *
¡©us
 = 
U_UNSUPPORTED_ERROR
;

3167  
NULL
;

3171 
št32_t
 
exŒaS·û
 = 2 * 
CIBufSize
 * (
UCh¬
);

3172 
ut
 = 
	`u‹xt_£tup
(ut, 
exŒaS·û
, 
¡©us
);

3173 ià(
	`U_SUCCESS
(*
¡©us
)) {

3174 
ut
->
pFuncs
 = &
ch¬I‹rFuncs
;

3175 
ut
->
cÚ‹xt
 = 
ci
;

3176 
ut
->
´ovid”Prİ”t›s
 = 0;

3177 
ut
->
a
 = 
ci
->
	`’dIndex
();

3178 
ut
->
p
 = ut->
pExŒa
;

3179 
ut
->
b
 = -1;

3180 
ut
->
q
 = (
UCh¬
*)ut->
pExŒa
+
CIBufSize
;

3181 
ut
->
c
 = -1;

3189 
ut
->
chunkCÚ‹Ás
 = (
UCh¬
 *)ut->
p
;

3190 
ut
->
chunkN©iveS¹
 = -1;

3191 
ut
->
chunkOff£t
 = 1;

3192 
ut
->
chunkN©iveLim™
 = 0;

3193 
ut
->
chunkL’gth
 = 0;

3194 
ut
->
ÇtiveIndexšgLim™
 = ut->
chunkOff£t
;

3196  
ut
;

3197 
	}
}

	@utf_impl.c

21 #iâdeà
U_UTF8_IMPL


22 
	#U_UTF8_IMPL


	)

25 
	~"unicode/uty³s.h
"

48 
U_EXPORT
 cÚ¡ 
ušt8_t


49 
	gutf8_couÁT¿By‹s
[256]={

76 cÚ¡ 
UCh¬32


77 
	gutf8_mšLeg®
[4]={ 0, 0x80, 0x800, 0x10000 };

79 cÚ¡ 
UCh¬32


80 
	gutf8_”rÜV®ue
[6]={

81 
UTF8_ERROR_VALUE_1
, 
UTF8_ERROR_VALUE_2
, 
UTF_ERROR_VALUE
, 0x10ffff,

107 
U_CAPI
 
UCh¬32
 
U_EXPORT2


108 
	$utf8_ÃxtCh¬SaãBody
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 *
pi
, iÁ32_ˆ
Ëngth
, 
UCh¬32
 
c
, 
UBoŞ
 
¡riù
) {

109 
št32_t
 
i
=*
pi
;

110 
ušt8_t
 
couÁ
=
	`UTF8_COUNT_TRAIL_BYTES
(
c
);

111 if((
i
)+
couÁ
<=(
Ëngth
)) {

112 
ušt8_t
 
Œa
, 
Ëg®
=0;

114 
	`UTF8_MASK_LEAD_BYTE
((
c
), 
couÁ
);

116 
couÁ
) {

121 
Ëg®
=1;

124 
Œa
=
s
[(
i
)++];

125 (
c
)=((c)<<6)|(
Œa
&0x3f);

126 if(
c
<0x110) {

127 
Ëg®
|=(
Œa
&0xc0)^0x80;

130 
Ëg®
=1;

134 
Œa
=
s
[(
i
)++];

135 (
c
)=((c)<<6)|(
Œa
&0x3f);

136 
Ëg®
|=(
Œa
&0xc0)^0x80;

138 
Œa
=
s
[(
i
)++];

139 (
c
)=((c)<<6)|(
Œa
&0x3f);

140 
Ëg®
|=(
Œa
&0xc0)^0x80;

143 if(
¡riù
>=0) {

144  
UTF8_ERROR_VALUE_1
;

146  
U_SENTINEL
;

164 if(
Ëg®
 || (
c
)<
utf8_mšLeg®
[
couÁ
] || (
	`UTF_IS_SURROGATE
(cè&& 
¡riù
!=-2)) {

166 
ušt8_t
 
”rÜCouÁ
=
couÁ
;

168 
i
=*
pi
;

169 
couÁ
>0 && 
	`UTF8_IS_TRAIL
(
s
[
i
])) {

170 ++(
i
);

171 --
couÁ
;

173 if(
¡riù
>=0) {

174 
c
=
utf8_”rÜV®ue
[
”rÜCouÁ
-
couÁ
];

176 
c
=
U_SENTINEL
;

178 } if((
¡riù
)>0 && 
	`UTF_IS_UNICODE_NONCHAR
(
c
)) {

180 
c
=
utf8_”rÜV®ue
[
couÁ
];

184 
št32_t
 
i0
=
i
;

186 (
i
)<(
Ëngth
è&& 
	`UTF8_IS_TRAIL
(
s
[i])) {

187 ++(
i
);

189 if(
¡riù
>=0) {

190 
c
=
utf8_”rÜV®ue
[
i
-
i0
];

192 
c
=
U_SENTINEL
;

195 *
pi
=
i
;

196  
c
;

197 
	}
}

199 
U_CAPI
 
št32_t
 
U_EXPORT2


200 
	$utf8_­³ndCh¬SaãBody
(
ušt8_t
 *
s
, 
št32_t
 
i
, iÁ32_ˆ
Ëngth
, 
UCh¬32
 
c
, 
UBoŞ
 *
pIsE¼Ü
) {

201 if((
ušt32_t
)(
c
)<=0x7ff) {

202 if((
i
)+1<(
Ëngth
)) {

203 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)>>6)|0xc0);

204 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)&0x3f)|0x80);

205  
i
;

207 } if((
ušt32_t
)(
c
)<=0xffff) {

209 if((
i
)+2<(
Ëngth
è&& !
	`U_IS_SURROGATE
(
c
)) {

210 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)>>12)|0xe0);

211 (
s
)[(
i
)++]=(
ušt8_t
)((((
c
)>>6)&0x3f)|0x80);

212 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)&0x3f)|0x80);

213  
i
;

215 } if((
ušt32_t
)(
c
)<=0x10ffff) {

216 if((
i
)+3<(
Ëngth
)) {

217 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)>>18)|0xf0);

218 (
s
)[(
i
)++]=(
ušt8_t
)((((
c
)>>12)&0x3f)|0x80);

219 (
s
)[(
i
)++]=(
ušt8_t
)((((
c
)>>6)&0x3f)|0x80);

220 (
s
)[(
i
)++]=(
ušt8_t
)(((
c
)&0x3f)|0x80);

221  
i
;

225 if(
pIsE¼Ü
!=
NULL
) {

226 *
pIsE¼Ü
=
TRUE
;

228 
Ëngth
-=
i
;

229 if(
Ëngth
>0) {

230 
št32_t
 
off£t
;

231 if(
Ëngth
>3) {

232 
Ëngth
=3;

234 
s
+=
i
;

235 
off£t
=0;

236 
c
=
utf8_”rÜV®ue
[
Ëngth
-1];

237 
	`UTF8_APPEND_CHAR_UNSAFE
(
s
, 
off£t
, 
c
);

238 
i
=i+
off£t
;

241  
i
;

242 
	}
}

244 
U_CAPI
 
UCh¬32
 
U_EXPORT2


245 
	$utf8_´evCh¬SaãBody
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
¡¬t
, iÁ32_ˆ*
pi
, 
UCh¬32
 
c
, 
UBoŞ
 
¡riù
) {

246 
št32_t
 
i
=*
pi
;

247 
ušt8_t
 
b
, 
couÁ
=1, 
shiá
=6;

250 
c
&=0x3f;

253 if(
i
<=
¡¬t
) {

255 if(
¡riù
>=0) {

256  
UTF8_ERROR_VALUE_1
;

258  
U_SENTINEL
;

264 
b
=
s
[--
i
];

265 if((
ušt8_t
)(
b
-0x80)<0x7e) {

266 if(
b
&0x40) {

268 
ušt8_t
 
shouldCouÁ
=
	`UTF8_COUNT_TRAIL_BYTES
(
b
);

270 if(
couÁ
==
shouldCouÁ
) {

272 *
pi
=
i
;

273 
	`UTF8_MASK_LEAD_BYTE
(
b
, 
couÁ
);

274 
c
|=(
UCh¬32
)
b
<<
shiá
;

275 if(
couÁ
>=4 || 
c
>0x10fffà|| c<
utf8_mšLeg®
[couÁ] || (
	`UTF_IS_SURROGATE
(cè&& 
¡riù
!=-2è|| (¡riù>0 && 
	`UTF_IS_UNICODE_NONCHAR
(c))) {

277 if(
couÁ
>=4) {

278 
couÁ
=3;

280 if(
¡riù
>=0) {

281 
c
=
utf8_”rÜV®ue
[
couÁ
];

283 
c
=
U_SENTINEL
;

292 if(
couÁ
<
shouldCouÁ
) {

293 *
pi
=
i
;

294 if(
¡riù
>=0) {

295 
c
=
utf8_”rÜV®ue
[
couÁ
];

297 
c
=
U_SENTINEL
;

300 if(
¡riù
>=0) {

301 
c
=
UTF8_ERROR_VALUE_1
;

303 
c
=
U_SENTINEL
;

308 } if(
couÁ
<5) {

310 
c
|=(
UCh¬32
)(
b
&0x3f)<<
shiá
;

311 ++
couÁ
;

312 
shiá
+=6;

315 if(
¡riù
>=0) {

316 
c
=
UTF8_ERROR_VALUE_1
;

318 
c
=
U_SENTINEL
;

324 if(
¡riù
>=0) {

325 
c
=
UTF8_ERROR_VALUE_1
;

327 
c
=
U_SENTINEL
;

332  
c
;

333 
	}
}

335 
U_CAPI
 
št32_t
 
U_EXPORT2


336 
	$utf8_back1SaãBody
(cÚ¡ 
ušt8_t
 *
s
, 
št32_t
 
¡¬t
, iÁ32_ˆ
i
) {

338 
št32_t
 
I
=
i
, 
Z
;

339 
ušt8_t
 
b
;

342 if(
I
-5>
¡¬t
) {

343 
Z
=
I
-5;

345 
Z
=
¡¬t
;

350 
b
=
s
[
I
];

351 if((
ušt8_t
)(
b
-0x80)>=0x7e) {

353 } if(
b
>=0xc0) {

354 if(
	`UTF8_COUNT_TRAIL_BYTES
(
b
)>=(
i
-
I
)) {

355  
I
;

360 } 
Z
<=--
I
);

363  
i
;

364 
	}
}

	@util.cpp

11 
	~"ut.h
"

12 
	~"unicode/unim©ch.h
"

13 
	~"unicode/uni£t.h
"

17 cÚ¡ 
UCh¬
 
	gBACKSLASH
 = 0x005C;

18 cÚ¡ 
UCh¬
 
	gUPPER_U
 = 0x0055;

19 cÚ¡ 
UCh¬
 
	gLOWER_U
 = 0x0075;

20 cÚ¡ 
UCh¬
 
	gAPOSTROPHE
 = 0x0027;

21 cÚ¡ 
UCh¬
 
	gSPACE
 = 0x0020;

24 cÚ¡ 
UCh¬
 
	gDIGITS
[] = {

31 
U_NAMESPACE_BEGIN


33 
	gUnicodeSŒšg
& 
	gICU_Ut™y
::
	$­³ndNumb”
(
UnicodeSŒšg
& 
»suÉ
, 
št32_t
 
n
,

34 
št32_t
 
¿dix
, iÁ32_ˆ
mšDig™s
) {

35 ià(
¿dix
 < 2 ||„adix > 36) {

37  
»suÉ
.
	`­³nd
((
UCh¬
)63 );

40 ià(
n
 < 0) {

41 
n
 = -n;

42 
»suÉ
.
	`­³nd
((
UCh¬
)45 );

45 
št32_t
 
Â
 = 
n
;

46 
št32_t
 
r
 = 1;

47 
Â
 >ğ
¿dix
) {

48 
Â
 /ğ
¿dix
;

49 
r
 *ğ
¿dix
;

50 --
mšDig™s
;

53 --
mšDig™s
 > 0) {

54 
»suÉ
.
	`­³nd
(
DIGITS
[0]);

56 
r
 > 0) {

57 
št32_t
 
dig™
 = 
n
 / 
r
;

58 
»suÉ
.
	`­³nd
(
DIGITS
[
dig™
]);

59 
n
 -ğ
dig™
 * 
r
;

60 
r
 /ğ
¿dix
;

62  
»suÉ
;

63 
	}
}

68 
UBoŞ
 
	gICU_Ut™y
::
	$isUÅršbË
(
UCh¬32
 
c
) {

69  !(
c
 >= 0x20 && c <= 0x7E);

70 
	}
}

78 
UBoŞ
 
	gICU_Ut™y
::
	$esÿ³UÅršbË
(
UnicodeSŒšg
& 
»suÉ
, 
UCh¬32
 
c
) {

79 ià(
	`isUÅršbË
(
c
)) {

80 
»suÉ
.
	`­³nd
(
BACKSLASH
);

81 ià(
c
 & ~0xFFFF) {

82 
»suÉ
.
	`­³nd
(
UPPER_U
);

83 
»suÉ
.
	`­³nd
(
DIGITS
[0xF&(
c
>>28)]);

84 
»suÉ
.
	`­³nd
(
DIGITS
[0xF&(
c
>>24)]);

85 
»suÉ
.
	`­³nd
(
DIGITS
[0xF&(
c
>>20)]);

86 
»suÉ
.
	`­³nd
(
DIGITS
[0xF&(
c
>>16)]);

88 
»suÉ
.
	`­³nd
(
LOWER_U
);

90 
»suÉ
.
	`­³nd
(
DIGITS
[0xF&(
c
>>12)]);

91 
»suÉ
.
	`­³nd
(
DIGITS
[0xF&(
c
>>8)]);

92 
»suÉ
.
	`­³nd
(
DIGITS
[0xF&(
c
>>4)]);

93 
»suÉ
.
	`­³nd
(
DIGITS
[0xF&
c
]);

94  
TRUE
;

96  
FALSE
;

97 
	}
}

132 
št32_t
 
	gICU_Ut™y
::
	$skWh™e¥aû
(cÚ¡ 
UnicodeSŒšg
& 
¡r
, 
št32_t
& 
pos
,

133 
UBoŞ
 
advªû
) {

134 
št32_t
 
p
 = 
pos
;

135 
p
 < 
¡r
.
	`Ëngth
()) {

136 
UCh¬32
 
c
 = 
¡r
.
	`ch¬32At
(
p
);

137 ià(!
	`u´v_isRuËWh™eS·û
(
c
)) {

140 
p
 +ğ
	`UTF_CHAR_LENGTH
(
c
);

142 ià(
advªû
) {

143 
pos
 = 
p
;

145  
p
;

146 
	}
}

203 
UBoŞ
 
	gICU_Ut™y
::
	$·r£Ch¬
(cÚ¡ 
UnicodeSŒšg
& 
id
, 
št32_t
& 
pos
, 
UCh¬
 
ch
) {

204 
št32_t
 
¡¬t
 = 
pos
;

205 
	`skWh™e¥aû
(
id
, 
pos
, 
TRUE
);

206 ià(
pos
 =ğ
id
.
	`Ëngth
() ||

207 
id
.
	`ch¬At
(
pos
è!ğ
ch
) {

208 
pos
 = 
¡¬t
;

209  
FALSE
;

211 ++
pos
;

212  
TRUE
;

213 
	}
}

231 
št32_t
 
	gICU_Ut™y
::
	$·r£P©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·t
,

232 cÚ¡ 
R•ÏûabË
& 
‹xt
,

233 
št32_t
 
šdex
,

234 
št32_t
 
lim™
) {

235 
št32_t
 
©
 = 0;

238 ià(
©
 =ğ
·t
.
	`Ëngth
()) {

239  
šdex
;

242 
UCh¬32
 
ı©
 = 
·t
.
	`ch¬32At
(
©
);

244 
šdex
 < 
lim™
) {

245 
UCh¬32
 
c
 = 
‹xt
.
	`ch¬32At
(
šdex
);

248 ià(
ı©
 == 126 ) {

249 ià(
	`u´v_isRuËWh™eS·û
(
c
)) {

250 
šdex
 +ğ
	`UTF_CHAR_LENGTH
(
c
);

253 ià(++
©
 =ğ
·t
.
	`Ëngth
()) {

254  
šdex
;

261 ià(
c
 =ğ
ı©
) {

262 
šdex
 +ğ
	`UTF_CHAR_LENGTH
(
c
);

263 
©
 +ğ
	`UTF_CHAR_LENGTH
(
ı©
);

264 ià(
©
 =ğ
·t
.
	`Ëngth
()) {

265  
šdex
;

275 
ı©
 = 
·t
.
	`ch¬32At
(
©
);

279 
	}
}

299 
	gICU_Ut™y
::
	$­³ndToRuË
(
UnicodeSŒšg
& 
ruË
,

300 
UCh¬32
 
c
,

301 
UBoŞ
 
isL™”®
,

302 
UBoŞ
 
esÿ³UÅršbË
,

303 
UnicodeSŒšg
& 
quÙeBuf
) {

307 ià(
isL™”®
 ||

308 (
esÿ³UÅršbË
 && 
ICU_Ut™y
::
	`isUÅršbË
(
c
))) {

309 ià(
quÙeBuf
.
	`Ëngth
() > 0) {

317 
quÙeBuf
.
	`Ëngth
() >= 2 &&

318 
quÙeBuf
.
	`ch¬At
(0è=ğ
APOSTROPHE
 &&

319 
quÙeBuf
.
	`ch¬At
(1è=ğ
APOSTROPHE
) {

320 
ruË
.
	`­³nd
(
BACKSLASH
).­³nd(
APOSTROPHE
);

321 
quÙeBuf
.
	`»move
(0, 2);

325 
št32_t
 
ŒašgCouÁ
 = 0;

326 
quÙeBuf
.
	`Ëngth
() >= 2 &&

327 
quÙeBuf
.
	`ch¬At
(quÙeBuf.
	`Ëngth
()-2è=ğ
APOSTROPHE
 &&

328 
quÙeBuf
.
	`ch¬At
(quÙeBuf.
	`Ëngth
()-1è=ğ
APOSTROPHE
) {

329 
quÙeBuf
.
	`Œunÿ‹
(quÙeBuf.
	`Ëngth
()-2);

330 ++
ŒašgCouÁ
;

332 ià(
quÙeBuf
.
	`Ëngth
() > 0) {

333 
ruË
.
	`­³nd
(
APOSTROPHE
);

334 
ruË
.
	`­³nd
(
quÙeBuf
);

335 
ruË
.
	`­³nd
(
APOSTROPHE
);

336 
quÙeBuf
.
	`Œunÿ‹
(0);

338 
ŒašgCouÁ
-- > 0) {

339 
ruË
.
	`­³nd
(
BACKSLASH
).­³nd(
APOSTROPHE
);

342 ià(
c
 !ğ(
UCh¬32
)-1) {

348 ià(
c
 =ğ
SPACE
) {

349 
št32_t
 
Ën
 = 
ruË
.
	`Ëngth
();

350 ià(
Ën
 > 0 && 
ruË
.
	`ch¬At
Ö’-1è!ğ
c
) {

351 
ruË
.
	`­³nd
(
c
);

353 } ià(!
esÿ³UÅršbË
 || !
ICU_Ut™y
::
	`esÿ³UÅršbË
(
ruË
, 
c
)) {

354 
ruË
.
	`­³nd
(
c
);

360 ià(
quÙeBuf
.
	`Ëngth
() == 0 &&

361 (
c
 =ğ
APOSTROPHE
 || c =ğ
BACKSLASH
)) {

362 
ruË
.
	`­³nd
(
BACKSLASH
);

363 
ruË
.
	`­³nd
(
c
);

369 ià(
quÙeBuf
.
	`Ëngth
() > 0 ||

370 (
c
 >= 0x0021 && c <= 0x007E &&

371 !((
c
 >= 0x0030 && c <= 0x0039 ) ||

372 (
c
 >= 0x0041 && c <= 0x005A ) ||

373 (
c
 >= 0x0061 && c <= 0x007A ))) ||

374 
	`u´v_isRuËWh™eS·û
(
c
)) {

375 
quÙeBuf
.
	`­³nd
(
c
);

377 ià(
c
 =ğ
APOSTROPHE
) {

378 
quÙeBuf
.
	`­³nd
(
c
);

384 
ruË
.
	`­³nd
(
c
);

386 
	}
}

388 
	gICU_Ut™y
::
	$­³ndToRuË
(
UnicodeSŒšg
& 
ruË
,

389 cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

390 
UBoŞ
 
isL™”®
,

391 
UBoŞ
 
esÿ³UÅršbË
,

392 
UnicodeSŒšg
& 
quÙeBuf
) {

393 
št32_t
 
i
=0; i<
‹xt
.
	`Ëngth
(); ++i) {

394 
	`­³ndToRuË
(
ruË
, 
‹xt
[
i
], 
isL™”®
, 
esÿ³UÅršbË
, 
quÙeBuf
);

396 
	}
}

402 
	gICU_Ut™y
::
	$­³ndToRuË
(
UnicodeSŒšg
& 
ruË
,

403 cÚ¡ 
UnicodeM©ch”
* 
m©ch”
,

404 
UBoŞ
 
esÿ³UÅršbË
,

405 
UnicodeSŒšg
& 
quÙeBuf
) {

406 ià(
m©ch”
 !ğ
NULL
) {

407 
UnicodeSŒšg
 
·t
;

408 
	`­³ndToRuË
(
ruË
, 
m©ch”
->
	`toP©‹º
(
·t
, 
esÿ³UÅršbË
),

409 
TRUE
, 
esÿ³UÅršbË
, 
quÙeBuf
);

411 
	}
}

413 
U_NAMESPACE_END


415 
U_CAPI
 
UBoŞ
 
U_EXPORT2


416 
	$u´v_isRuËWh™eS·û
(
UCh¬32
 
c
) {

423  (
c
 >= 0x0009 && c <= 0x2029 &&

424 (
c
 <= 0x000D || c == 0x0020 || c == 0x0085 ||

425 
c
 == 0x200E || c == 0x200F || c >= 0x2028));

426 
	}
}

428 
U_CAPI
 
U_NAMESPACE_QUALIFIER
 
UnicodeS‘
* 
U_EXPORT2


429 
	$u´v_İ’RuËWh™eS·ûS‘
(
UE¼ÜCode
* 
ec
) {

430 if(
	`U_FAILURE
(*
ec
)) {

431  
NULL
;

435 
U_NAMESPACE_QUALIFIER
 
UnicodeS‘
 *
£t
=
Ãw
 U_NAMESPACE_QUALIFIER 
	`UnicodeS‘
(9, 0xd);

437 ià(
£t
 =ğ
NULL
) {

438 *
ec
 = 
U_MEMORY_ALLOCATION_ERROR
;

439  
NULL
;

441 
£t
->
UnicodeS‘
::
	`add
(0x20).add(0x85).add(0x200e, 0x200f).add(0x2028, 0x2029);

442  
£t
;

443 
	}
}

	@util.h

11 #iâdeà
ICU_UTIL_H


12 
	#ICU_UTIL_H


	)

14 
	~"unicode/uty³s.h
"

15 
	~"unicode/uobjeù.h
"

16 
	~"unicode/uni¡r.h
"

23 
U_NAMESPACE_BEGIN


25 
şass
 
	gUnicodeM©ch”
;

26 
şass
 
	gUnicodeS‘
;

28 şas 
	cU_COMMON_API
 
	mICU_Ut™y
 {

29 
	mpublic
:

44 
UnicodeSŒšg
& 
­³ndNumb”
(UnicodeSŒšg& 
»suÉ
, 
št32_t
 
n
,

45 
št32_t
 
¿dix
 = 10,

46 
št32_t
 
mšDig™s
 = 1);

54 
UBoŞ
 
isUÅršbË
(
UCh¬32
 
c
);

62 
UBoŞ
 
esÿ³UÅršbË
(
UnicodeSŒšg
& 
»suÉ
, 
UCh¬32
 
c
);

89 
št32_t
 
skWh™e¥aû
(cÚ¡ 
UnicodeSŒšg
& 
¡r
, iÁ32_t& 
pos
,

90 
UBoŞ
 
advªû
 = 
FALSE
);

125 
UBoŞ
 
·r£Ch¬
(cÚ¡ 
UnicodeSŒšg
& 
id
, 
št32_t
& 
pos
, 
UCh¬
 
ch
);

146 
št32_t
 
·r£P©‹º
(cÚ¡ 
UnicodeSŒšg
& 
ruË
, iÁ32_ˆ
pos
, iÁ32_ˆ
lim™
,

147 cÚ¡ 
UnicodeSŒšg
& 
·‰”n
, 
št32_t
* 
·r£dIÁs
);

165 
št32_t
 
·r£P©‹º
(cÚ¡ 
UnicodeSŒšg
& 
·t
,

166 cÚ¡ 
R•ÏûabË
& 
‹xt
,

167 
št32_t
 
šdex
,

168 
št32_t
 
lim™
);

178 
št32_t
 
·r£IÁeg”
(cÚ¡ 
UnicodeSŒšg
& 
ruË
, iÁ32_t& 
pos
, iÁ32_ˆ
lim™
);

194 
UnicodeSŒšg
 
·r£UnicodeId’tif›r
(cÚ¡ UnicodeSŒšg& 
¡r
, 
št32_t
& 
pos
);

212 
št32_t
 
·r£Numb”
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

213 
št32_t
& 
pos
, 
št8_t
 
¿dix
);

215 
­³ndToRuË
(
UnicodeSŒšg
& 
ruË
,

216 
UCh¬32
 
c
,

217 
UBoŞ
 
isL™”®
,

218 
UBoŞ
 
esÿ³UÅršbË
,

219 
UnicodeSŒšg
& 
quÙeBuf
);

221 
­³ndToRuË
(
UnicodeSŒšg
& 
ruË
,

222 cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

223 
UBoŞ
 
isL™”®
,

224 
UBoŞ
 
esÿ³UÅršbË
,

225 
UnicodeSŒšg
& 
quÙeBuf
);

227 
­³ndToRuË
(
UnicodeSŒšg
& 
ruË
,

228 cÚ¡ 
UnicodeM©ch”
* 
m©ch”
,

229 
UBoŞ
 
esÿ³UÅršbË
,

230 
UnicodeSŒšg
& 
quÙeBuf
);

232 
	m´iv©e
:

234 
ICU_Ut™y
();

237 
U_NAMESPACE_END


247 
U_CAPI
 
U_NAMESPACE_QUALIFIER
 
UnicodeS‘
* 
U_EXPORT2


248 
u´v_İ’RuËWh™eS·ûS‘
(
UE¼ÜCode
* 
ec
);

257 
U_CAPI
 
UBoŞ
 
U_EXPORT2


258 
u´v_isRuËWh™eS·û
(
UCh¬32
 
c
);

	@util_props.cpp

11 
	~"ut.h
"

12 
	~"unicode/uch¬.h
"

14 
U_NAMESPACE_BEGIN


24 
št32_t
 
	gICU_Ut™y
::
	$·r£IÁeg”
(cÚ¡ 
UnicodeSŒšg
& 
ruË
, 
št32_t
& 
pos
, iÁ32_ˆ
lim™
) {

25 
št32_t
 
couÁ
 = 0;

26 
št32_t
 
v®ue
 = 0;

27 
št32_t
 
p
 = 
pos
;

28 
št8_t
 
¿dix
 = 10;

30 ià(
p
 < 
lim™
 && 
ruË
.
	`ch¬At
(p) == 48 ) {

31 ià(
p
+1 < 
lim™
 && (
ruË
.
	`ch¬At
(p+1) == 0x78 ||„ule.charAt(p+1) == 0x58 )) {

32 
p
 += 2;

33 
¿dix
 = 16;

36 
p
++;

37 
couÁ
 = 1;

38 
¿dix
 = 8;

42 
p
 < 
lim™
) {

43 
št32_t
 
d
 = 
	`u_dig™
(
ruË
.
	`ch¬At
(
p
++), 
¿dix
);

44 ià(
d
 < 0) {

45 --
p
;

48 ++
couÁ
;

49 
št32_t
 
v
 = (
v®ue
 * 
¿dix
è+ 
d
;

50 ià(
v
 <ğ
v®ue
) {

57 
v®ue
 = 
v
;

59 ià(
couÁ
 > 0) {

60 
pos
 = 
p
;

62  
v®ue
;

63 
	}
}

84 
št32_t
 
	gICU_Ut™y
::
	$·r£P©‹º
(cÚ¡ 
UnicodeSŒšg
& 
ruË
, 
št32_t
 
pos
, iÁ32_ˆ
lim™
,

85 cÚ¡ 
UnicodeSŒšg
& 
·‰”n
, 
št32_t
* 
·r£dIÁs
) {

87 
št32_t
 
p
;

88 
št32_t
 
štCouÁ
 = 0;

89 
št32_t
 
i
=0; i<
·‰”n
.
	`Ëngth
(); ++i) {

90 
UCh¬
 
ı©
 = 
·‰”n
.
	`ch¬At
(
i
);

91 
UCh¬
 
c
;

92 
ı©
) {

94 ià(
pos
 >ğ
lim™
) {

97 
c
 = 
ruË
.
	`ch¬At
(
pos
++);

98 ià(!
	`u´v_isRuËWh™eS·û
(
c
)) {

103 
pos
 = 
	`skWh™e¥aû
(
ruË
,…os);

106 
p
 = 
pos
;

107 
·r£dIÁs
[
štCouÁ
++] = 
	`·r£IÁeg”
(
ruË
, 
p
, 
lim™
);

108 ià(
p
 =ğ
pos
) {

112 
pos
 = 
p
;

115 ià(
pos
 >ğ
lim™
) {

118 
c
 = (
UCh¬
è
	`u_tŞow”
(
ruË
.
	`ch¬At
(
pos
++));

119 ià(
c
 !ğ
ı©
) {

125  
pos
;

126 
	}
}

142 
UnicodeSŒšg
 
	gICU_Ut™y
::
	$·r£UnicodeId’tif›r
(cÚ¡ 
UnicodeSŒšg
& 
¡r
, 
št32_t
& 
pos
) {

145 
UnicodeSŒšg
 
buf
;

146 
p
 = 
pos
;

147 
p
 < 
¡r
.
	`Ëngth
()) {

148 
UCh¬32
 
ch
 = 
¡r
.
	`ch¬32At
(
p
);

149 ià(
buf
.
	`Ëngth
() == 0) {

150 ià(
	`u_isIDS¹
(
ch
)) {

151 
buf
.
	`­³nd
(
ch
);

153 
buf
.
	`Œunÿ‹
(0);

154  
buf
;

157 ià(
	`u_isIDP¬t
(
ch
)) {

158 
buf
.
	`­³nd
(
ch
);

163 
p
 +ğ
	`UTF_CHAR_LENGTH
(
ch
);

165 
pos
 = 
p
;

166  
buf
;

167 
	}
}

185 
št32_t
 
	gICU_Ut™y
::
	$·r£Numb”
(cÚ¡ 
UnicodeSŒšg
& 
‹xt
,

186 
št32_t
& 
pos
, 
št8_t
 
¿dix
) {

190 
št32_t
 
n
 = 0;

191 
št32_t
 
p
 = 
pos
;

192 
p
 < 
‹xt
.
	`Ëngth
()) {

193 
UCh¬32
 
ch
 = 
‹xt
.
	`ch¬32At
(
p
);

194 
št32_t
 
d
 = 
	`u_dig™
(
ch
, 
¿dix
);

195 ià(
d
 < 0) {

198 
n
 = 
¿dix
*À+ 
d
;

201 ià(
n
 < 0) {

204 ++
p
;

206 ià(
p
 =ğ
pos
) {

209 
pos
 = 
p
;

210  
n
;

211 
	}
}

213 
	gU_NAMESPACE_END


	@utrace.c

12 
	#UTRACE_IMPL


	)

13 
	~"unicode/uŒaû.h
"

14 
	~"uŒacimp.h
"

15 
	~"c¡ršg.h
"

16 
	~"uas£¹.h
"

17 
	~"uşn_cmn.h
"

20 
UT¿ûEÁry
 *
	gpT¿ûEÁryFunc
 = 
NULL
;

21 
UT¿ûEx™
 *
	gpT¿ûEx™Func
 = 
NULL
;

22 
UT¿ûD©a
 *
	gpT¿ûD©aFunc
 = 
NULL
;

23 cÚ¡ *
	ggT¿ûCÚ‹xt
 = 
NULL
;

25 
U_EXPORT
 
št32_t


26 
	guŒaû_Ëv–
 = 
UTRACE_ERROR
;

28 
U_CAPI
 
U_EXPORT2


29 
	$uŒaû_’Œy
(
št32_t
 
âNumb”
) {

30 ià(
pT¿ûEÁryFunc
 !ğ
NULL
) {

31 (*
pT¿ûEÁryFunc
)(
gT¿ûCÚ‹xt
, 
âNumb”
);

33 
	}
}

36 cÚ¡ 
	ggEx™Fmt
[] = "Returns.";

37 cÚ¡ 
	ggEx™FmtV®ue
[] = "Returns %d.";

38 cÚ¡ 
	ggEx™FmtStus
[] = "Returns. Status = %d.";

39 cÚ¡ 
	ggEx™FmtV®ueStus
[] = "Returns %d. Status = %d.";

40 cÚ¡ 
	ggEx™FmtPŒStus
[] = "Returns %d. Status = %p.";

42 
U_CAPI
 
U_EXPORT2


43 
	$uŒaû_ex™
(
št32_t
 
âNumb”
, iÁ32_ˆ
»tuºTy³
, ...) {

44 ià(
pT¿ûEx™Func
 !ğ
NULL
) {

45 
va_li¡
 
¬gs
;

46 cÚ¡ *
fmt
;

48 
»tuºTy³
) {

50 
fmt
 = 
gEx™Fmt
;

52 
UTRACE_EXITV_I32
:

53 
fmt
 = 
gEx™FmtV®ue
;

55 
UTRACE_EXITV_STATUS
:

56 
fmt
 = 
gEx™FmtStus
;

58 
UTRACE_EXITV_I32
 | 
UTRACE_EXITV_STATUS
:

59 
fmt
 = 
gEx™FmtV®ueStus
;

61 
UTRACE_EXITV_PTR
 | 
UTRACE_EXITV_STATUS
:

62 
fmt
 = 
gEx™FmtPŒStus
;

65 
	`U_ASSERT
(
FALSE
);

66 
fmt
 = 
gEx™Fmt
;

69 
	`va_¡¬t
(
¬gs
, 
»tuºTy³
);

70 (*
pT¿ûEx™Func
)(
gT¿ûCÚ‹xt
, 
âNumb”
, 
fmt
, 
¬gs
);

71 
	`va_’d
(
¬gs
);

73 
	}
}

77 
U_CAPI
 
U_EXPORT2


78 
	$uŒaû_d©a
(
št32_t
 
âNumb”
, iÁ32_ˆ
Ëv–
, cÚ¡ *
fmt
, ...) {

79 ià(
pT¿ûD©aFunc
 !ğ
NULL
) {

80 
va_li¡
 
¬gs
;

81 
	`va_¡¬t
(
¬gs
, 
fmt
 );

82 (*
pT¿ûD©aFunc
)(
gT¿ûCÚ‹xt
, 
âNumb”
, 
Ëv–
, 
fmt
, 
¬gs
);

83 
	`va_’d
(
¬gs
);

85 
	}
}

88 
	$ouutCh¬
(
c
, *
outBuf
, 
št32_t
 *
outIx
, iÁ32_ˆ
ÿ·c™y
, iÁ32_ˆ
šd’t
) {

89 
št32_t
 
i
;

99 ià(*
outIx
==0 ||

100 (
c
!='\n' && c!=0 && *
outIx
 < 
ÿ·c™y
 && 
outBuf
[(*outIx)-1]=='\n') ||

101 (
c
=='\n' && *
outIx
>=
ÿ·c™y
))

104 
i
=0; i<
šd’t
; i++) {

105 ià(*
outIx
 < 
ÿ·c™y
) {

106 
outBuf
[*
outIx
] = ' ';

108 (*
outIx
)++;

112 ià(*
outIx
 < 
ÿ·c™y
) {

113 
outBuf
[*
outIx
] = 
c
;

115 ià(
c
 != 0) {

119 (*
outIx
)++;

121 
	}
}

123 
	$ouutHexBy‹s
(
št64_t
 
v®
, 
št32_t
 
ch¬sToOuut
,

124 *
outBuf
, 
št32_t
 *
outIx
, iÁ32_ˆ
ÿ·c™y
) {

125 cÚ¡ 
gHexCh¬s
[] = "0123456789abcdef";

126 
št32_t
 
shiáCouÁ
;

127 
shiáCouÁ
=(
ch¬sToOuut
-1)*4; shiftCount >= 0; shiftCount-=4) {

128 
c
 = 
gHexCh¬s
[(
v®
 >> 
shiáCouÁ
) & 0xf];

129 
	`ouutCh¬
(
c
, 
outBuf
, 
outIx
, 
ÿ·c™y
, 0);

131 
	}
}

134 
	$ouutPŒBy‹s
(*
v®
, *
outBuf
, 
št32_t
 *
outIx
, iÁ32_ˆ
ÿ·c™y
) {

135 
št32_t
 
i
;

136 
št32_t
 
šcV®
 = 1;

137 *
p
 = (*)&
v®
;

139 #ià!
U_IS_BIG_ENDIAN


141 
šcV®
 = -1;

142 
p
 += (*) - 1;

147 
i
=0; i<(*); i++) {

148 
	`ouutHexBy‹s
(*
p
, 2, 
outBuf
, 
outIx
, 
ÿ·c™y
);

149 
p
 +ğ
šcV®
;

151 
	}
}

153 
	$ouutSŒšg
(cÚ¡ *
s
, *
outBuf
, 
št32_t
 *
outIx
, iÁ32_ˆ
ÿ·c™y
, iÁ32_ˆ
šd’t
) {

154 
št32_t
 
i
 = 0;

155 
c
;

156 ià(
s
==
NULL
) {

157 
s
 = "*NULL*";

160 
c
 = 
s
[
i
++];

161 
	`ouutCh¬
(
c
, 
outBuf
, 
outIx
, 
ÿ·c™y
, 
šd’t
);

162 } 
c
 != 0);

163 
	}
}

167 
	$ouutUSŒšg
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ën
,

168 *
outBuf
, 
št32_t
 *
outIx
, iÁ32_ˆ
ÿ·c™y
, iÁ32_ˆ
šd’t
) {

169 
št32_t
 
i
 = 0;

170 
UCh¬
 
c
;

171 ià(
s
==
NULL
) {

172 
	`ouutSŒšg
(
NULL
, 
outBuf
, 
outIx
, 
ÿ·c™y
, 
šd’t
);

176 
i
=0; i<
Ën
 ||†en==-1; i++) {

177 
c
 = 
s
[
i
];

178 
	`ouutHexBy‹s
(
c
, 4, 
outBuf
, 
outIx
, 
ÿ·c™y
);

179 
	`ouutCh¬
(' ', 
outBuf
, 
outIx
, 
ÿ·c™y
, 
šd’t
);

180 ià(
Ën
 =ğ-1 && 
c
==0) {

184 
	}
}

186 
U_CAPI
 
št32_t
 
U_EXPORT2


187 
	$uŒaû_vfÜm©
(*
outBuf
, 
št32_t
 
ÿ·c™y
, iÁ32_ˆ
šd’t
, cÚ¡ *
fmt
, 
va_li¡
 
¬gs
) {

188 
št32_t
 
outIx
 = 0;

189 
št32_t
 
fmtIx
 = 0;

190 
fmtC
;

191 
c
;

192 
št32_t
 
štArg
;

193 
št64_t
 
lÚgArg
 = 0;

194 *
±rArg
;

199 
fmtC
 = 
fmt
[
fmtIx
++];

200 ià(
fmtC
 != '%') {

202 
	`ouutCh¬
(
fmtC
, 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

203 ià(
fmtC
 == 0) {

214 
fmtC
 = 
fmt
[
fmtIx
++];

216 
fmtC
) {

219 
c
 = ()
	`va_¬g
(
¬gs
, 
št32_t
);

220 
	`ouutCh¬
(
c
, 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

225 
±rArg
 = 
	`va_¬g
(
¬gs
, *);

226 
	`ouutSŒšg
((cÚ¡ *)
±rArg
, 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

231 
±rArg
 = 
	`va_¬g
(
¬gs
, *);

232 
štArg
 =(
št32_t
)
	`va_¬g
(
¬gs
, int32_t);

233 
	`ouutUSŒšg
((cÚ¡ 
UCh¬
 *)
±rArg
, 
štArg
, 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

238 
štArg
 = 
	`va_¬g
(
¬gs
, );

239 
	`ouutHexBy‹s
(
štArg
, 2, 
outBuf
, &
outIx
, 
ÿ·c™y
);

244 
štArg
 = 
	`va_¬g
(
¬gs
, );

245 
	`ouutHexBy‹s
(
štArg
, 4, 
outBuf
, &
outIx
, 
ÿ·c™y
);

250 
štArg
 = 
	`va_¬g
(
¬gs
, );

251 
	`ouutHexBy‹s
(
štArg
, 8, 
outBuf
, &
outIx
, 
ÿ·c™y
);

256 
lÚgArg
 = 
	`va_¬g
(
¬gs
, 
št64_t
);

257 
	`ouutHexBy‹s
(
lÚgArg
, 16, 
outBuf
, &
outIx
, 
ÿ·c™y
);

262 
±rArg
 = 
	`va_¬g
(
¬gs
, *);

263 
	`ouutPŒBy‹s
(
±rArg
, 
outBuf
, &
outIx
, 
ÿ·c™y
);

271 
	`ouutCh¬
('%', 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

272 
fmtIx
--;

278 
veùÜTy³
;

279 
št32_t
 
veùÜL’
;

280 cÚ¡ *
i8PŒ
;

281 
št16_t
 *
i16PŒ
;

282 
št32_t
 *
i32PŒ
;

283 
št64_t
 *
i64PŒ
;

284 **
±rPŒ
;

285 
št32_t
 
ch¬sToOuut
 = 0;

286 
št32_t
 
i
;

288 
veùÜTy³
 = 
fmt
[
fmtIx
];

289 ià(
veùÜTy³
 != 0) {

290 
fmtIx
++;

292 
i8PŒ
 = (cÚ¡ *)
	`va_¬g
(
¬gs
, *);

293 
i16PŒ
 = (
št16_t
 *)
i8PŒ
;

294 
i32PŒ
 = (
št32_t
 *)
i8PŒ
;

295 
i64PŒ
 = (
št64_t
 *)
i8PŒ
;

296 
±rPŒ
 = (**)
i8PŒ
;

297 
veùÜL’
 =(
št32_t
)
	`va_¬g
(
¬gs
, int32_t);

298 ià(
±rPŒ
 =ğ
NULL
) {

299 
	`ouutSŒšg
("*NULL* ", 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

301 
i
=0; i<
veùÜL’
 || vectorLen==-1; i++) {

302 
veùÜTy³
) {

304 
ch¬sToOuut
 = 2;

305 
lÚgArg
 = *
i8PŒ
++;

308 
ch¬sToOuut
 = 4;

309 
lÚgArg
 = *
i16PŒ
++;

312 
ch¬sToOuut
 = 8;

313 
lÚgArg
 = *
i32PŒ
++;

316 
ch¬sToOuut
 = 16;

317 
lÚgArg
 = *
i64PŒ
++;

320 
ch¬sToOuut
 = 0;

321 
	`ouutPŒBy‹s
(*
±rPŒ
, 
outBuf
, &
outIx
, 
ÿ·c™y
);

322 
lÚgArg
 = *
±rPŒ
==
NULL
? 0: 1;

323 
±rPŒ
++;

326 
ch¬sToOuut
 = 0;

327 
	`ouutCh¬
(*
i8PŒ
, 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

328 
lÚgArg
 = *
i8PŒ
;

329 
i8PŒ
++;

332 
ch¬sToOuut
 = 0;

333 
	`ouutSŒšg
(*
±rPŒ
, 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

334 
	`ouutCh¬
('\n', 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

335 
lÚgArg
 = *
±rPŒ
==
NULL
? 0: 1;

336 
±rPŒ
++;

340 
ch¬sToOuut
 = 0;

341 
	`ouutUSŒšg
((cÚ¡ 
UCh¬
 *)*
±rPŒ
, -1, 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

342 
	`ouutCh¬
('\n', 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

343 
lÚgArg
 = *
±rPŒ
==
NULL
? 0: 1;

344 
±rPŒ
++;

349 ià(
ch¬sToOuut
 > 0) {

350 
	`ouutHexBy‹s
(
lÚgArg
, 
ch¬sToOuut
, 
outBuf
, &
outIx
, 
ÿ·c™y
);

351 
	`ouutCh¬
(' ', 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

353 ià(
veùÜL’
 =ğ-1 && 
lÚgArg
 == 0) {

358 
	`ouutCh¬
('[', 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

359 
	`ouutHexBy‹s
(
veùÜL’
, 8, 
outBuf
, &
outIx
, 
ÿ·c™y
);

360 
	`ouutCh¬
(']', 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

370 
	`ouutCh¬
(
fmtC
, 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

373 
	`ouutCh¬
(0, 
outBuf
, &
outIx
, 
ÿ·c™y
, 
šd’t
);

374  
outIx
 + 1;

375 
	}
}

380 
U_CAPI
 
št32_t
 
U_EXPORT2


381 
	$uŒaû_fÜm©
(*
outBuf
, 
št32_t
 
ÿ·c™y
,

382 
št32_t
 
šd’t
, cÚ¡ *
fmt
, ...) {

383 
št32_t
 
»tV®
;

384 
va_li¡
 
¬gs
;

385 
	`va_¡¬t
(
¬gs
, 
fmt
 );

386 
»tV®
 = 
	`uŒaû_vfÜm©
(
outBuf
, 
ÿ·c™y
, 
šd’t
, 
fmt
, 
¬gs
);

387 
	`va_’d
(
¬gs
);

388  
»tV®
;

389 
	}
}

392 
U_CAPI
 
U_EXPORT2


393 
	$uŒaû_£tFunùiÚs
(cÚ¡ *
cÚ‹xt
,

394 
UT¿ûEÁry
 *
e
, 
UT¿ûEx™
 *
x
, 
UT¿ûD©a
 *
d
) {

395 
pT¿ûEÁryFunc
 = 
e
;

396 
pT¿ûEx™Func
 = 
x
;

397 
pT¿ûD©aFunc
 = 
d
;

398 
gT¿ûCÚ‹xt
 = 
cÚ‹xt
;

399 
	}
}

402 
U_CAPI
 
U_EXPORT2


403 
	$uŒaû_g‘FunùiÚs
(cÚ¡ **
cÚ‹xt
,

404 
UT¿ûEÁry
 **
e
, 
UT¿ûEx™
 **
x
, 
UT¿ûD©a
 **
d
) {

405 *
e
 = 
pT¿ûEÁryFunc
;

406 *
x
 = 
pT¿ûEx™Func
;

407 *
d
 = 
pT¿ûD©aFunc
;

408 *
cÚ‹xt
 = 
gT¿ûCÚ‹xt
;

409 
	}
}

411 
U_CAPI
 
U_EXPORT2


412 
	$uŒaû_£tLev–
(
št32_t
 
Ëv–
) {

413 ià(
Ëv–
 < 
UTRACE_OFF
) {

414 
Ëv–
 = 
UTRACE_OFF
;

416 ià(
Ëv–
 > 
UTRACE_VERBOSE
) {

417 
Ëv–
 = 
UTRACE_VERBOSE
;

419 
uŒaû_Ëv–
 = 
Ëv–
;

420 
	}
}

422 
U_CAPI
 
št32_t
 
U_EXPORT2


423 
	$uŒaû_g‘Lev–
() {

424  
uŒaû_Ëv–
;

425 
	}
}

428 
U_CFUNC
 
UBoŞ


429 
	$uŒaû_ş—nup
() {

430 
pT¿ûEÁryFunc
 = 
NULL
;

431 
pT¿ûEx™Func
 = 
NULL
;

432 
pT¿ûD©aFunc
 = 
NULL
;

433 
uŒaû_Ëv–
 = 
UTRACE_OFF
;

434 
gT¿ûCÚ‹xt
 = 
NULL
;

435  
TRUE
;

436 
	}
}

440 
	gŒFnName
[] = {

443 
NULL


448 
	gŒCÚvNames
[] = {

457 
NULL


462 
	gŒCŞlNames
[] = {

470 
NULL


474 
U_CAPI
 cÚ¡ * 
U_EXPORT2


475 
	$uŒaû_funùiÚName
(
št32_t
 
âNumb”
) {

476 if(
UTRACE_FUNCTION_START
 <ğ
âNumb”
 && fnNumb” < 
UTRACE_FUNCTION_LIMIT
) {

477  
ŒFnName
[
âNumb”
];

478 } if(
UTRACE_CONVERSION_START
 <ğ
âNumb”
 && fnNumb” < 
UTRACE_CONVERSION_LIMIT
) {

479  
ŒCÚvNames
[
âNumb”
 - 
UTRACE_CONVERSION_START
];

480 } if(
UTRACE_COLLATION_START
 <ğ
âNumb”
 && fnNumb” < 
UTRACE_COLLATION_LIMIT
){

481  
ŒCŞlNames
[
âNumb”
 - 
UTRACE_COLLATION_START
];

485 
	}
}

	@utracimp.h

40 #iâdeà
__UTRACIMP_H__


41 
	#__UTRACIMP_H__


	)

43 
	~"unicode/uŒaû.h
"

44 
	~<¡d¬g.h
>

46 
	gU_CDECL_BEGIN


54 #ifdeà
UTRACE_IMPL


55 
U_EXPORT
 
	gšt32_t


57 
U_CFUNC
 
U_COMMON_API
 
	gšt32_t


59 
	guŒaû_Ëv–
;

70 
	eUT¿ûEx™V®
 {

72 
	mUTRACE_EXITV_NONE
 = 0,

74 
	mUTRACE_EXITV_I32
 = 1,

76 
	mUTRACE_EXITV_PTR
 = 2,

78 
	mUTRACE_EXITV_BOOL
 = 3,

80 
	mUTRACE_EXITV_MASK
 = 0xf,

82 
	mUTRACE_EXITV_STATUS
 = 0x10

83 } 
	tUT¿ûEx™V®
;

91 
U_CAPI
 
U_EXPORT2


92 
uŒaû_’Œy
(
št32_t
 
âNumb”
);

102 
U_CAPI
 
U_EXPORT2


103 
uŒaû_ex™
(
št32_t
 
âNumb”
, iÁ32_ˆ
»tuºTy³
, ...);

117 
U_CAPI
 
U_EXPORT2


118 
uŒaû_d©a
(
št32_t
 
uŒaûFnNumb”
, iÁ32_ˆ
Ëv–
, cÚ¡ *
fmt
, ...);

120 
	gU_CDECL_END


122 #ià
U_ENABLE_TRACING


129 
	#UTRACE_LEVEL
(
Ëv–
è(
	`uŒaû_g‘Lev–
()>=Öev–))

	)

141 
	#UTRACE_TRACED_ENTRY
 0x80000000

	)

157 
	#UTRACE_ENTRY
(
âNumb”
) \

158 
št32_t
 
uŒaûFnNumb”
=(
âNumb”
); \

159 if(
	`uŒaû_g‘Lev–
()>=
UTRACE_INFO
) { \

160 
	`uŒaû_’Œy
(
âNumb”
); \

161 
uŒaûFnNumb”
 |ğ
UTRACE_TRACED_ENTRY
; \

162 }

	)

175 
	#UTRACE_ENTRY_OC
(
âNumb”
) \

176 
št32_t
 
uŒaûFnNumb”
=(
âNumb”
); \

177 if(
	`uŒaû_g‘Lev–
()>=
UTRACE_OPEN_CLOSE
) { \

178 
	`uŒaû_’Œy
(
âNumb”
); \

179 
uŒaûFnNumb”
 |ğ
UTRACE_TRACED_ENTRY
; \

180 }

	)

194 
	#UTRACE_EXIT
() \

195 {if(
uŒaûFnNumb”
 & 
UTRACE_TRACED_ENTRY
) { \

196 
	`uŒaû_ex™
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, 
UTRACE_EXITV_NONE
); \

197 }}

	)

207 
	#UTRACE_EXIT_VALUE
(
v®
) \

208 {if(
uŒaûFnNumb”
 & 
UTRACE_TRACED_ENTRY
) { \

209 
	`uŒaû_ex™
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, 
UTRACE_EXITV_I32
, 
v®
); \

210 }}

	)

212 
	#UTRACE_EXIT_STATUS
(
¡©us
) \

213 {if(
uŒaûFnNumb”
 & 
UTRACE_TRACED_ENTRY
) { \

214 
	`uŒaû_ex™
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, 
UTRACE_EXITV_STATUS
, 
¡©us
); \

215 }}

	)

217 
	#UTRACE_EXIT_VALUE_STATUS
(
v®
, 
¡©us
) \

218 {if(
uŒaûFnNumb”
 & 
UTRACE_TRACED_ENTRY
) { \

219 
	`uŒaû_ex™
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, (
UTRACE_EXITV_I32
 | 
UTRACE_EXITV_STATUS
), 
v®
, 
¡©us
); \

220 }}

	)

222 
	#UTRACE_EXIT_PTR_STATUS
(
±r
, 
¡©us
) \

223 {if(
uŒaûFnNumb”
 & 
UTRACE_TRACED_ENTRY
) { \

224 
	`uŒaû_ex™
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, (
UTRACE_EXITV_PTR
 | 
UTRACE_EXITV_STATUS
), 
±r
, 
¡©us
); \

225 }}

	)

235 
	#UTRACE_DATA0
(
Ëv–
, 
fmt
) \

236 if(
	`UTRACE_LEVEL
(
Ëv–
)) { \

237 
	`uŒaû_d©a
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, (
Ëv–
), (
fmt
)); \

238 }

	)

248 
	#UTRACE_DATA1
(
Ëv–
, 
fmt
, 
a
) \

249 if(
	`UTRACE_LEVEL
(
Ëv–
)) { \

250 
	`uŒaû_d©a
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
 , (
Ëv–
), (
fmt
), (
a
)); \

251 }

	)

261 
	#UTRACE_DATA2
(
Ëv–
, 
fmt
, 
a
, 
b
) \

262 if(
	`UTRACE_LEVEL
(
Ëv–
)) { \

263 
	`uŒaû_d©a
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
 , (
Ëv–
), (
fmt
), (
a
), (
b
)); \

264 }

	)

274 
	#UTRACE_DATA3
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
) \

275 if(
	`UTRACE_LEVEL
(
Ëv–
)) { \

276 
	`uŒaû_d©a
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, (
Ëv–
), (
fmt
), (
a
), (
b
), (
c
)); \

277 }

	)

287 
	#UTRACE_DATA4
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
) \

288 if(
	`UTRACE_LEVEL
(
Ëv–
)) { \

289 
	`uŒaû_d©a
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, (
Ëv–
), (
fmt
), (
a
), (
b
), (
c
), (
d
)); \

290 }

	)

300 
	#UTRACE_DATA5
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
, 
e
) \

301 if(
	`UTRACE_LEVEL
(
Ëv–
)) { \

302 
	`uŒaû_d©a
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, (
Ëv–
), (
fmt
), (
a
), (
b
), (
c
), (
d
), (
e
)); \

303 }

	)

313 
	#UTRACE_DATA6
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
) \

314 if(
	`UTRACE_LEVEL
(
Ëv–
)) { \

315 
	`uŒaû_d©a
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, (
Ëv–
), (
fmt
), (
a
), (
b
), (
c
), (
d
), (
e
), (
f
)); \

316 }

	)

326 
	#UTRACE_DATA7
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
) \

327 if(
	`UTRACE_LEVEL
(
Ëv–
)) { \

328 
	`uŒaû_d©a
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, (
Ëv–
), (
fmt
), (
a
), (
b
), (
c
), (
d
), (
e
), (
f
), (
g
)); \

329 }

	)

339 
	#UTRACE_DATA8
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
) \

340 if(
	`UTRACE_LEVEL
(
Ëv–
)) { \

341 
	`uŒaû_d©a
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, (
Ëv–
), (
fmt
), (
a
), (
b
), (
c
), (
d
), (
e
), (
f
), (
g
), (
h
)); \

342 }

	)

352 
	#UTRACE_DATA9
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
) \

353 if(
	`UTRACE_LEVEL
(
Ëv–
)) { \

354 
	`uŒaû_d©a
(
uŒaûFnNumb”
 & ~
UTRACE_TRACED_ENTRY
, (
Ëv–
), (
fmt
), (
a
), (
b
), (
c
), (
d
), (
e
), (
f
), (
g
), (
h
), (
i
)); \

355 }

	)

363 
	#UTRACE_LEVEL
(
Ëv–
è0

	)

364 
	#UTRACE_ENTRY
(
âNumb”
)

	)

365 
	#UTRACE_ENTRY_OC
(
âNumb”
)

	)

366 
	#UTRACE_EXIT
()

	)

367 
	#UTRACE_EXIT_VALUE
(
v®
)

	)

368 
	#UTRACE_EXIT_STATUS
(
¡©us
)

	)

369 
	#UTRACE_EXIT_VALUE_STATUS
(
v®
, 
¡©us
)

	)

370 
	#UTRACE_EXIT_PTR_STATUS
(
±r
, 
¡©us
)

	)

371 
	#UTRACE_DATA0
(
Ëv–
, 
fmt
)

	)

372 
	#UTRACE_DATA1
(
Ëv–
, 
fmt
, 
a
)

	)

373 
	#UTRACE_DATA2
(
Ëv–
, 
fmt
, 
a
, 
b
)

	)

374 
	#UTRACE_DATA3
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
)

	)

375 
	#UTRACE_DATA4
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
)

	)

376 
	#UTRACE_DATA5
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
, 
e
)

	)

377 
	#UTRACE_DATA6
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
)

	)

378 
	#UTRACE_DATA7
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
)

	)

379 
	#UTRACE_DATA8
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
)

	)

380 
	#UTRACE_DATA9
(
Ëv–
, 
fmt
, 
a
, 
b
, 
c
, 
d
, 
e
, 
f
, 
g
, 
h
, 
i
)

	)

	@utrie.c

21 #ifdeà
UTRIE_DEBUG


22 
	~<¡dio.h
>

25 
	~"unicode/uty³s.h
"

26 
	~"cmemÜy.h
"

27 
	~"uŒ›.h
"

31 #undeà
ABS


32 
	#ABS
(
x
è((x)>=0 ? (xè: -(x))

	)

34 
U_INLINE
 
UBoŞ


35 
	$equ®_ušt32
(cÚ¡ 
ušt32_t
 *
s
, cÚ¡ ušt32_ˆ*
t
, 
št32_t
 
Ëngth
) {

36 
Ëngth
>0 && *
s
==*
t
) {

37 ++
s
;

38 ++
t
;

39 --
Ëngth
;

41  (
UBoŞ
)(
Ëngth
==0);

42 
	}
}

46 
U_CAPI
 
UNewTr›
 * 
U_EXPORT2


47 
	$uŒ›_İ’
(
UNewTr›
 *
flIn
,

48 
ušt32_t
 *
®ŸsD©a
, 
št32_t
 
maxD©aL’gth
,

49 
ušt32_t
 
š™ŸlV®ue
, ušt32_ˆ
ËadUn™V®ue
,

50 
UBoŞ
 
Ïtš1Lš—r
) {

51 
UNewTr›
 *
Œ›
;

52 
št32_t
 
i
, 
j
;

54 ifĞ
maxD©aL’gth
<
UTRIE_DATA_BLOCK_LENGTH
 ||

55 (
Ïtš1Lš—r
 && 
maxD©aL’gth
<1024)

57  
NULL
;

60 if(
flIn
!=
NULL
) {

61 
Œ›
=
flIn
;

63 
Œ›
=(
UNewTr›
 *)
	`u´v_m®loc
((UNewTrie));

64 if(
Œ›
==
NULL
) {

65  
NULL
;

68 
	`u´v_mem£t
(
Œ›
, 0, (
UNewTr›
));

69 
Œ›
->
isAÎoÿ‹d
ğ(
UBoŞ
)(
flIn
==
NULL
);

71 if(
®ŸsD©a
!=
NULL
) {

72 
Œ›
->
d©a
=
®ŸsD©a
;

73 
Œ›
->
isD©aAÎoÿ‹d
=
FALSE
;

75 
Œ›
->
d©a
=(
ušt32_t
 *)
	`u´v_m®loc
(
maxD©aL’gth
*4);

76 if(
Œ›
->
d©a
==
NULL
) {

77 
	`u´v_ä“
(
Œ›
);

78  
NULL
;

80 
Œ›
->
isD©aAÎoÿ‹d
=
TRUE
;

84 
j
=
UTRIE_DATA_BLOCK_LENGTH
;

86 if(
Ïtš1Lš—r
) {

91 
i
=0;

94 
Œ›
->
šdex
[
i
++]=
j
;

95 
j
+=
UTRIE_DATA_BLOCK_LENGTH
;

96 } 
i
<(256>>
UTRIE_SHIFT
));

100 
Œ›
->
d©aL’gth
=
j
;

101 
j
>0) {

102 
Œ›
->
d©a
[--
j
]=
š™ŸlV®ue
;

105 
Œ›
->
ËadUn™V®ue
=leadUnitValue;

106 
Œ›
->
šdexL’gth
=
UTRIE_MAX_INDEX_LENGTH
;

107 
Œ›
->
d©aC­ac™y
=
maxD©aL’gth
;

108 
Œ›
->
isL©š1Lš—r
=
Ïtš1Lš—r
;

109 
Œ›
->
isCom·ùed
=
FALSE
;

110  
Œ›
;

111 
	}
}

113 
U_CAPI
 
UNewTr›
 * 
U_EXPORT2


114 
	$uŒ›_şÚe
(
UNewTr›
 *
flIn
, cÚ¡ UNewTr› *
Ùh”
, 
ušt32_t
 *
®ŸsD©a
, 
št32_t
 
®ŸsD©aC­ac™y
) {

115 
UNewTr›
 *
Œ›
;

116 
UBoŞ
 
isD©aAÎoÿ‹d
;

119 if(
Ùh”
==
NULL
 || oth”->
d©a
==NULL || oth”->
isCom·ùed
) {

120  
NULL
;

124 if(
®ŸsD©a
!=
NULL
 && 
®ŸsD©aC­ac™y
>=
Ùh”
->
d©aC­ac™y
) {

125 
isD©aAÎoÿ‹d
=
FALSE
;

127 
®ŸsD©aC­ac™y
=
Ùh”
->
d©aC­ac™y
;

128 
®ŸsD©a
=(
ušt32_t
 *)
	`u´v_m®loc
(
Ùh”
->
d©aC­ac™y
*4);

129 if(
®ŸsD©a
==
NULL
) {

130  
NULL
;

132 
isD©aAÎoÿ‹d
=
TRUE
;

135 
Œ›
=
	`uŒ›_İ’
(
flIn
, 
®ŸsD©a
, 
®ŸsD©aC­ac™y
,

136 
Ùh”
->
d©a
[0], oth”->
ËadUn™V®ue
,

137 
Ùh”
->
isL©š1Lš—r
);

138 if(
Œ›
==
NULL
) {

139 
	`u´v_ä“
(
®ŸsD©a
);

141 
	`u´v_memıy
(
Œ›
->
šdex
, 
Ùh”
->index, (trie->index));

142 
	`u´v_memıy
(
Œ›
->
d©a
, 
Ùh”
->d©a, oth”->
d©aL’gth
*4);

143 
Œ›
->
d©aL’gth
=
Ùh”
->dataLength;

144 
Œ›
->
isD©aAÎoÿ‹d
=isDataAllocated;

147  
Œ›
;

148 
	}
}

150 
U_CAPI
 
U_EXPORT2


151 
	$uŒ›_şo£
(
UNewTr›
 *
Œ›
) {

152 if(
Œ›
!=
NULL
) {

153 if(
Œ›
->
isD©aAÎoÿ‹d
) {

154 
	`u´v_ä“
(
Œ›
->
d©a
);

155 
Œ›
->
d©a
=
NULL
;

157 if(
Œ›
->
isAÎoÿ‹d
) {

158 
	`u´v_ä“
(
Œ›
);

161 
	}
}

163 
U_CAPI
 
ušt32_t
 * 
U_EXPORT2


164 
	$uŒ›_g‘D©a
(
UNewTr›
 *
Œ›
, 
št32_t
 *
pL’gth
) {

165 if(
Œ›
==
NULL
 || 
pL’gth
==NULL) {

166  
NULL
;

169 *
pL’gth
=
Œ›
->
d©aL’gth
;

170  
Œ›
->
d©a
;

171 
	}
}

173 
št32_t


174 
	$uŒ›_®locD©aBlock
(
UNewTr›
 *
Œ›
) {

175 
št32_t
 
ÃwBlock
, 
ÃwTİ
;

177 
ÃwBlock
=
Œ›
->
d©aL’gth
;

178 
ÃwTİ
=
ÃwBlock
+
UTRIE_DATA_BLOCK_LENGTH
;

179 if(
ÃwTİ
>
Œ›
->
d©aC­ac™y
) {

183 
Œ›
->
d©aL’gth
=
ÃwTİ
;

184  
ÃwBlock
;

185 
	}
}

193 
št32_t


194 
	$uŒ›_g‘D©aBlock
(
UNewTr›
 *
Œ›
, 
UCh¬32
 
c
) {

195 
št32_t
 
šdexV®ue
, 
ÃwBlock
;

197 
c
>>=
UTRIE_SHIFT
;

198 
šdexV®ue
=
Œ›
->
šdex
[
c
];

199 if(
šdexV®ue
>0) {

200  
šdexV®ue
;

204 
ÃwBlock
=
	`uŒ›_®locD©aBlock
(
Œ›
);

205 if(
ÃwBlock
<0) {

209 
Œ›
->
šdex
[
c
]=
ÃwBlock
;

212 
	`u´v_memıy
(
Œ›
->
d©a
+
ÃwBlock
,r›->d©a-
šdexV®ue
, 4*
UTRIE_DATA_BLOCK_LENGTH
);

213  
ÃwBlock
;

214 
	}
}

219 
U_CAPI
 
UBoŞ
 
U_EXPORT2


220 
	$uŒ›_£t32
(
UNewTr›
 *
Œ›
, 
UCh¬32
 
c
, 
ušt32_t
 
v®ue
) {

221 
št32_t
 
block
;

224 if(
Œ›
==
NULL
 ||r›->
isCom·ùed
 || (
ušt32_t
)
c
>0x10ffff) {

225  
FALSE
;

228 
block
=
	`uŒ›_g‘D©aBlock
(
Œ›
, 
c
);

229 if(
block
<0) {

230  
FALSE
;

233 
Œ›
->
d©a
[
block
+(
c
&
UTRIE_MASK
)]=
v®ue
;

234  
TRUE
;

235 
	}
}

237 
U_CAPI
 
ušt32_t
 
U_EXPORT2


238 
	$uŒ›_g‘32
(
UNewTr›
 *
Œ›
, 
UCh¬32
 
c
, 
UBoŞ
 *
pInBlockZ”o
) {

239 
št32_t
 
block
;

242 if(
Œ›
==
NULL
 ||r›->
isCom·ùed
 || (
ušt32_t
)
c
>0x10ffff) {

243 if(
pInBlockZ”o
!=
NULL
) {

244 *
pInBlockZ”o
=
TRUE
;

249 
block
=
Œ›
->
šdex
[
c
>>
UTRIE_SHIFT
];

250 if(
pInBlockZ”o
!=
NULL
) {

251 *
pInBlockZ”o
ğ(
UBoŞ
)(
block
==0);

254  
Œ›
->
d©a
[
	`ABS
(
block
)+(
c
&
UTRIE_MASK
)];

255 
	}
}

261 
	$uŒ›_flBlock
(
ušt32_t
 *
block
, 
UCh¬32
 
¡¬t
, UCh¬32 
lim™
,

262 
ušt32_t
 
v®ue
, ušt32_ˆ
š™ŸlV®ue
, 
UBoŞ
 
ov”wr™e
) {

263 
ušt32_t
 *
pLim™
;

265 
pLim™
=
block
+
lim™
;

266 
block
+=
¡¬t
;

267 if(
ov”wr™e
) {

268 
block
<
pLim™
) {

269 *
block
++=
v®ue
;

272 
block
<
pLim™
) {

273 if(*
block
==
š™ŸlV®ue
) {

274 *
block
=
v®ue
;

276 ++
block
;

279 
	}
}

281 
U_CAPI
 
UBoŞ
 
U_EXPORT2


282 
	$uŒ›_£tRªge32
(
UNewTr›
 *
Œ›
, 
UCh¬32
 
¡¬t
, UCh¬32 
lim™
, 
ušt32_t
 
v®ue
, 
UBoŞ
 
ov”wr™e
) {

288 
ušt32_t
 
š™ŸlV®ue
;

289 
št32_t
 
block
, 
»¡
, 
»³©Block
;

292 ifĞ
Œ›
==
NULL
 ||r›->
isCom·ùed
 ||

293 (
ušt32_t
)
¡¬t
>0x10fffà|| (ušt32_t)
lim™
>0x110000 || start>limit

295  
FALSE
;

297 if(
¡¬t
==
lim™
) {

298  
TRUE
;

301 
š™ŸlV®ue
=
Œ›
->
d©a
[0];

302 if(
¡¬t
&
UTRIE_MASK
) {

303 
UCh¬32
 
ÃxtS¹
;

306 
block
=
	`uŒ›_g‘D©aBlock
(
Œ›
, 
¡¬t
);

307 if(
block
<0) {

308  
FALSE
;

311 
ÃxtS¹
=(
¡¬t
+
UTRIE_DATA_BLOCK_LENGTH
)&~
UTRIE_MASK
;

312 if(
ÃxtS¹
<=
lim™
) {

313 
	`uŒ›_flBlock
(
Œ›
->
d©a
+
block
, 
¡¬t
&
UTRIE_MASK
, 
UTRIE_DATA_BLOCK_LENGTH
,

314 
v®ue
, 
š™ŸlV®ue
, 
ov”wr™e
);

315 
¡¬t
=
ÃxtS¹
;

317 
	`uŒ›_flBlock
(
Œ›
->
d©a
+
block
, 
¡¬t
&
UTRIE_MASK
, 
lim™
&UTRIE_MASK,

318 
v®ue
, 
š™ŸlV®ue
, 
ov”wr™e
);

319  
TRUE
;

324 
»¡
=
lim™
&
UTRIE_MASK
;

327 
lim™
&=~
UTRIE_MASK
;

330 if(
v®ue
==
š™ŸlV®ue
) {

331 
»³©Block
=0;

333 
»³©Block
=-1;

335 
¡¬t
<
lim™
) {

337 
block
=
Œ›
->
šdex
[
¡¬t
>>
UTRIE_SHIFT
];

338 if(
block
>0) {

340 
	`uŒ›_flBlock
(
Œ›
->
d©a
+
block
, 0, 
UTRIE_DATA_BLOCK_LENGTH
, 
v®ue
, 
š™ŸlV®ue
, 
ov”wr™e
);

341 } if(
Œ›
->
d©a
[-
block
]!=
v®ue
 && (block==0 || 
ov”wr™e
)) {

343 if(
»³©Block
>=0) {

344 
Œ›
->
šdex
[
¡¬t
>>
UTRIE_SHIFT
]=-
»³©Block
;

347 
»³©Block
=
	`uŒ›_g‘D©aBlock
(
Œ›
, 
¡¬t
);

348 if(
»³©Block
<0) {

349  
FALSE
;

353 
Œ›
->
šdex
[
¡¬t
>>
UTRIE_SHIFT
]=-
»³©Block
;

354 
	`uŒ›_flBlock
(
Œ›
->
d©a
+
»³©Block
, 0, 
UTRIE_DATA_BLOCK_LENGTH
, 
v®ue
, 
š™ŸlV®ue
, 
TRUE
);

358 
¡¬t
+=
UTRIE_DATA_BLOCK_LENGTH
;

361 if(
»¡
>0) {

363 
block
=
	`uŒ›_g‘D©aBlock
(
Œ›
, 
¡¬t
);

364 if(
block
<0) {

365  
FALSE
;

368 
	`uŒ›_flBlock
(
Œ›
->
d©a
+
block
, 0, 
»¡
, 
v®ue
, 
š™ŸlV®ue
, 
ov”wr™e
);

371  
TRUE
;

372 
	}
}

374 
št32_t


375 
	$_fšdSameIndexBlock
(cÚ¡ 
št32_t
 *
idx
, iÁ32_ˆ
šdexL’gth
,

376 
št32_t
 
Ùh”Block
) {

377 
št32_t
 
block
, 
i
;

379 
block
=
UTRIE_BMP_INDEX_LENGTH
; block<
šdexL’gth
; block+=
UTRIE_SURROGATE_BLOCK_COUNT
) {

380 
i
=0; i<
UTRIE_SURROGATE_BLOCK_COUNT
; ++i) {

381 if(
idx
[
block
+
i
]!=idx[
Ùh”Block
+i]) {

385 if(
i
==
UTRIE_SURROGATE_BLOCK_COUNT
) {

386  
block
;

389  
šdexL’gth
;

390 
	}
}

403 
	$uŒ›_fŞd
(
UNewTr›
 *
Œ›
, 
UNewTr›G‘FŞdedV®ue
 *
g‘FŞdedV®ue
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

404 
št32_t
 
ËadIndexes
[
UTRIE_SURROGATE_BLOCK_COUNT
];

405 
št32_t
 *
idx
;

406 
ušt32_t
 
v®ue
;

407 
UCh¬32
 
c
;

408 
št32_t
 
šdexL’gth
, 
block
;

409 #ifdeà
UTRIE_DEBUG


410 
couÁL—dCUW™hD©a
=0;

413 
idx
=
Œ›
->
šdex
;

416 
	`u´v_memıy
(
ËadIndexes
, 
idx
+(0xd800>>
UTRIE_SHIFT
), 4*
UTRIE_SURROGATE_BLOCK_COUNT
);

428 if(
Œ›
->
ËadUn™V®ue
=ñr›->
d©a
[0]) {

429 
block
=0;

432 
block
=
	`uŒ›_®locD©aBlock
(
Œ›
);

433 if(
block
<0) {

435 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

438 
	`uŒ›_flBlock
(
Œ›
->
d©a
+
block
, 0, 
UTRIE_DATA_BLOCK_LENGTH
,r›->
ËadUn™V®ue
,r›->d©a[0], 
TRUE
);

439 
block
=-block;

441 
c
=(0xd800>>
UTRIE_SHIFT
); c<(0xdc00>>UTRIE_SHIFT); ++c) {

442 
Œ›
->
šdex
[
c
]=
block
;

452 
šdexL’gth
=
UTRIE_BMP_INDEX_LENGTH
;

455 
c
=0x10000; c<0x110000;) {

456 if(
idx
[
c
>>
UTRIE_SHIFT
]!=0) {

458 
c
&=~0x3ff;

460 #ifdeà
UTRIE_DEBUG


461 ++
couÁL—dCUW™hD©a
;

466 
block
=
	`_fšdSameIndexBlock
(
idx
, 
šdexL’gth
, 
c
>>
UTRIE_SHIFT
);

473 
v®ue
=
	`g‘FŞdedV®ue
(
Œ›
, 
c
, 
block
+
UTRIE_SURROGATE_BLOCK_COUNT
);

474 if(
v®ue
!=
	`uŒ›_g‘32
(
Œ›
, 
	`U16_LEAD
(
c
), 
NULL
)) {

475 if(!
	`uŒ›_£t32
(
Œ›
, 
	`U16_LEAD
(
c
), 
v®ue
)) {

477 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

482 if(
block
==
šdexL’gth
) {

484 
	`u´v_memmove
(
idx
+
šdexL’gth
,

485 
idx
+(
c
>>
UTRIE_SHIFT
),

486 4*
UTRIE_SURROGATE_BLOCK_COUNT
);

487 
šdexL’gth
+=
UTRIE_SURROGATE_BLOCK_COUNT
;

490 
c
+=0x400;

492 
c
+=
UTRIE_DATA_BLOCK_LENGTH
;

495 #ifdeà
UTRIE_DEBUG


496 if(
couÁL—dCUW™hD©a
>0) {

497 
	`´štf
("suµËm’ry d©¨fÜ %d†—d su¼og©es\n", 
couÁL—dCUW™hD©a
);

510 if(
šdexL’gth
>=
UTRIE_MAX_INDEX_LENGTH
) {

511 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

519 
	`u´v_memmove
(
idx
+
UTRIE_BMP_INDEX_LENGTH
+
UTRIE_SURROGATE_BLOCK_COUNT
,

520 
idx
+
UTRIE_BMP_INDEX_LENGTH
,

521 4*(
šdexL’gth
-
UTRIE_BMP_INDEX_LENGTH
));

522 
	`u´v_memıy
(
idx
+
UTRIE_BMP_INDEX_LENGTH
,

523 
ËadIndexes
,

524 4*
UTRIE_SURROGATE_BLOCK_COUNT
);

525 
šdexL’gth
+=
UTRIE_SURROGATE_BLOCK_COUNT
;

527 #ifdeà
UTRIE_DEBUG


528 
	`´štf
("trie index count: BMP %ld‡ll Unicode %ld folded %ld\n",

529 
UTRIE_BMP_INDEX_LENGTH
, ()
UTRIE_MAX_INDEX_LENGTH
, 
šdexL’gth
);

532 
Œ›
->
šdexL’gth
=indexLength;

533 
	}
}

544 
	$_fšdUnu£dBlocks
(
UNewTr›
 *
Œ›
) {

545 
št32_t
 
i
;

548 
	`u´v_mem£t
(
Œ›
->
m­
, 0xff, (
UTRIE_MAX_BUILD_TIME_DATA_LENGTH
>>
UTRIE_SHIFT
)*4);

551 
i
=0; i<
Œ›
->
šdexL’gth
; ++i) {

552 
Œ›
->
m­
[
	`ABS
Ñr›->
šdex
[
i
])>>
UTRIE_SHIFT
]=0;

556 
Œ›
->
m­
[0]=0;

557 
	}
}

559 
št32_t


560 
	$_fšdSameD©aBlock
(cÚ¡ 
ušt32_t
 *
d©a
, 
št32_t
 
d©aL’gth
,

561 
št32_t
 
Ùh”Block
, iÁ32_ˆ
¡•
) {

562 
št32_t
 
block
;

565 
d©aL’gth
-=
UTRIE_DATA_BLOCK_LENGTH
;

567 
block
=0; block<=
d©aL’gth
; block+=
¡•
) {

568 if(
	`equ®_ušt32
(
d©a
+
block
, d©a+
Ùh”Block
, 
UTRIE_DATA_BLOCK_LENGTH
)) {

569  
block
;

573 
	}
}

588 
	$uŒ›_com·ù
(
UNewTr›
 *
Œ›
, 
UBoŞ
 
ov”Ïp
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

589 
št32_t
 
i
, 
¡¬t
, 
ÃwS¹
, 
ov”ÏpS¹
;

591 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

596 if(
Œ›
==
NULL
) {

597 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

600 if(
Œ›
->
isCom·ùed
) {

607 
	`_fšdUnu£dBlocks
(
Œ›
);

610 if(
Œ›
->
isL©š1Lš—r
 && 
UTRIE_SHIFT
<=8) {

611 
ov”ÏpS¹
=
UTRIE_DATA_BLOCK_LENGTH
+256;

613 
ov”ÏpS¹
=
UTRIE_DATA_BLOCK_LENGTH
;

616 
ÃwS¹
=
UTRIE_DATA_BLOCK_LENGTH
;

617 
¡¬t
=
ÃwS¹
; s¹<
Œ›
->
d©aL’gth
;) {

625 if(
Œ›
->
m­
[
¡¬t
>>
UTRIE_SHIFT
]<0) {

627 
¡¬t
+=
UTRIE_DATA_BLOCK_LENGTH
;

634 ifĞ
¡¬t
>=
ov”ÏpS¹
 &&

635 (
i
=
	`_fšdSameD©aBlock
(
Œ›
->
d©a
, 
ÃwS¹
, 
¡¬t
,

636 
ov”Ïp
 ? 
UTRIE_DATA_GRANULARITY
 : 
UTRIE_DATA_BLOCK_LENGTH
))

640 
Œ›
->
m­
[
¡¬t
>>
UTRIE_SHIFT
]=
i
;

643 
¡¬t
+=
UTRIE_DATA_BLOCK_LENGTH
;

650 if(
ov”Ïp
 && 
¡¬t
>=
ov”ÏpS¹
) {

652 
i
=
UTRIE_DATA_BLOCK_LENGTH
-
UTRIE_DATA_GRANULARITY
;

653 
i
>0 && !
	`equ®_ušt32
(
Œ›
->
d©a
+(
ÃwS¹
-i),r›->d©a+
¡¬t
, i);

654 
i
-=
UTRIE_DATA_GRANULARITY
) {}

656 
i
=0;

659 if(
i
>0) {

661 
Œ›
->
m­
[
¡¬t
>>
UTRIE_SHIFT
]=
ÃwS¹
-
i
;

664 
¡¬t
+=
i
;

665 
i
=
UTRIE_DATA_BLOCK_LENGTH
-i; i>0; --i) {

666 
Œ›
->
d©a
[
ÃwS¹
++]ñr›->d©a[
¡¬t
++];

668 } if(
ÃwS¹
<
¡¬t
) {

670 
Œ›
->
m­
[
¡¬t
>>
UTRIE_SHIFT
]=
ÃwS¹
;

671 
i
=
UTRIE_DATA_BLOCK_LENGTH
; i>0; --i) {

672 
Œ›
->
d©a
[
ÃwS¹
++]ñr›->d©a[
¡¬t
++];

675 
Œ›
->
m­
[
¡¬t
>>
UTRIE_SHIFT
]=start;

676 
ÃwS¹
+=
UTRIE_DATA_BLOCK_LENGTH
;

677 
¡¬t
=
ÃwS¹
;

682 
i
=0; i<
Œ›
->
šdexL’gth
; ++i) {

683 
Œ›
->
šdex
[
i
]ñr›->
m­
[
	`ABS
Ñr›->šdex[i])>>
UTRIE_SHIFT
];

686 #ifdeà
UTRIE_DEBUG


688 
	`´štf
("compactingrie: count of 32-bit words %lu->%lu\n",

689 ()
Œ›
->
d©aL’gth
, ()
ÃwS¹
);

692 
Œ›
->
d©aL’gth
=
ÃwS¹
;

693 
	}
}

718 
ušt32_t
 
U_CALLCONV


719 
	$deçuÉG‘FŞdedV®ue
(
UNewTr›
 *
Œ›
, 
UCh¬32
 
¡¬t
, 
št32_t
 
off£t
) {

720 
ušt32_t
 
v®ue
, 
š™ŸlV®ue
;

721 
UCh¬32
 
lim™
;

722 
UBoŞ
 
šBlockZ”o
;

724 
š™ŸlV®ue
=
Œ›
->
d©a
[0];

725 
lim™
=
¡¬t
+0x400;

726 
¡¬t
<
lim™
) {

727 
v®ue
=
	`uŒ›_g‘32
(
Œ›
, 
¡¬t
, &
šBlockZ”o
);

728 if(
šBlockZ”o
) {

729 
¡¬t
+=
UTRIE_DATA_BLOCK_LENGTH
;

730 } if(
v®ue
!=
š™ŸlV®ue
) {

731  (
ušt32_t
)
off£t
;

733 ++
¡¬t
;

737 
	}
}

739 
U_CAPI
 
št32_t
 
U_EXPORT2


740 
	$uŒ›_£rŸlize
(
UNewTr›
 *
Œ›
, *
dt
, 
št32_t
 
ÿ·c™y
,

741 
UNewTr›G‘FŞdedV®ue
 *
g‘FŞdedV®ue
,

742 
UBoŞ
 
»duûTo16B™s
,

743 
UE¼ÜCode
 *
pE¼ÜCode
) {

744 
UTr›H—d”
 *
h—d”
;

745 
ušt32_t
 *
p
;

746 
ušt16_t
 *
de¡16
;

747 
št32_t
 
i
, 
Ëngth
;

748 
ušt8_t
* 
d©a
 = 
NULL
;

751 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

755 if(
Œ›
==
NULL
 || 
ÿ·c™y
<0 || (ÿ·c™y>0 && 
dt
==NULL)) {

756 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

759 if(
g‘FŞdedV®ue
==
NULL
) {

760 
g‘FŞdedV®ue
=
deçuÉG‘FŞdedV®ue
;

763 
d©a
 = (
ušt8_t
*)
dt
;

765 if(!
Œ›
->
isCom·ùed
) {

767 
	`uŒ›_com·ù
(
Œ›
, 
FALSE
, 
pE¼ÜCode
);

770 
	`uŒ›_fŞd
(
Œ›
, 
g‘FŞdedV®ue
, 
pE¼ÜCode
);

773 
	`uŒ›_com·ù
(
Œ›
, 
TRUE
, 
pE¼ÜCode
);

775 
Œ›
->
isCom·ùed
=
TRUE
;

776 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

782 ifĞ(
»duûTo16B™s
 ? (
Œ›
->
d©aL’gth
+Œ›->
šdexL’gth
è:r›->d©aL’gthè>ğ
UTRIE_MAX_DATA_LENGTH
) {

783 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

786 
Ëngth
=(
UTr›H—d”
)+2*
Œ›
->
šdexL’gth
;

787 if(
»duûTo16B™s
) {

788 
Ëngth
+=2*
Œ›
->
d©aL’gth
;

790 
Ëngth
+=4*
Œ›
->
d©aL’gth
;

793 if(
Ëngth
>
ÿ·c™y
) {

794  
Ëngth
;

797 #ifdeà
UTRIE_DEBUG


798 
	`´štf
("**UTrieLengths(serialize)** index:%6ld data:%6ld serialized:%6ld\n",

799 ()
Œ›
->
šdexL’gth
, (ér›->
d©aL’gth
, ()
Ëngth
);

803 
h—d”
=(
UTr›H—d”
 *)
d©a
;

804 
d©a
+=(
UTr›H—d”
);

806 
h—d”
->
sigÇtu»
=0x54726965;

807 
h—d”
->
İtiÚs
=
UTRIE_SHIFT
 | (
UTRIE_INDEX_SHIFT
<<
UTRIE_OPTIONS_INDEX_SHIFT
);

809 if(!
»duûTo16B™s
) {

810 
h—d”
->
İtiÚs
|=
UTRIE_OPTIONS_DATA_IS_32_BIT
;

812 if(
Œ›
->
isL©š1Lš—r
) {

813 
h—d”
->
İtiÚs
|=
UTRIE_OPTIONS_LATIN1_IS_LINEAR
;

816 
h—d”
->
šdexL’gth
=
Œ›
->indexLength;

817 
h—d”
->
d©aL’gth
=
Œ›
->dataLength;

820 if(
»duûTo16B™s
) {

822 
p
=(
ušt32_t
 *)
Œ›
->
šdex
;

823 
de¡16
=(
ušt16_t
 *)
d©a
;

824 
i
=
Œ›
->
šdexL’gth
; i>0; --i) {

825 *
de¡16
++=(
ušt16_t
)((*
p
++ + 
Œ›
->
šdexL’gth
)>>
UTRIE_INDEX_SHIFT
);

829 
p
=
Œ›
->
d©a
;

830 
i
=
Œ›
->
d©aL’gth
; i>0; --i) {

831 *
de¡16
++=(
ušt16_t
)*
p
++;

835 
p
=(
ušt32_t
 *)
Œ›
->
šdex
;

836 
de¡16
=(
ušt16_t
 *)
d©a
;

837 
i
=
Œ›
->
šdexL’gth
; i>0; --i) {

838 *
de¡16
++=(
ušt16_t
)(*
p
++ >> 
UTRIE_INDEX_SHIFT
);

842 
	`u´v_memıy
(
de¡16
, 
Œ›
->
d©a
, 4*Œ›->
d©aL’gth
);

845  
Ëngth
;

846 
	}
}

849 
U_CAPI
 
št32_t
 
U_EXPORT2


850 
	$uŒ›_deçuÉG‘FŞdšgOff£t
(
ušt32_t
 
d©a
) {

851  (
št32_t
)
d©a
;

852 
	}
}

854 
U_CAPI
 
št32_t
 
U_EXPORT2


855 
	$uŒ›_un£rŸlize
(
UTr›
 *
Œ›
, cÚ¡ *
d©a
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

856 cÚ¡ 
UTr›H—d”
 *
h—d”
;

857 cÚ¡ 
ušt16_t
 *
p16
;

858 
ušt32_t
 
İtiÚs
;

860 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

865 if(
Ëngth
<(
UTr›H—d”
)) {

866 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

871 
h—d”
=(cÚ¡ 
UTr›H—d”
 *)
d©a
;

872 if(
h—d”
->
sigÇtu»
!=0x54726965) {

873 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

878 
İtiÚs
=
h—d”
->options;

879 ifĞ(
İtiÚs
&
UTRIE_OPTIONS_SHIFT_MASK
)!=
UTRIE_SHIFT
 ||

880 ((
İtiÚs
>>
UTRIE_OPTIONS_INDEX_SHIFT
)&
UTRIE_OPTIONS_SHIFT_MASK
)!=
UTRIE_INDEX_SHIFT


882 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

885 
Œ›
->
isL©š1Lš—r
ğ(
UBoŞ
)((
İtiÚs
&
UTRIE_OPTIONS_LATIN1_IS_LINEAR
)!=0);

888 
Œ›
->
šdexL’gth
=
h—d”
->indexLength;

889 
Œ›
->
d©aL’gth
=
h—d”
->dataLength;

891 
Ëngth
-=(
št32_t
)(
UTr›H—d”
);

894 if(
Ëngth
<2*
Œ›
->
šdexL’gth
) {

895 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

898 
p16
=(cÚ¡ 
ušt16_t
 *)(
h—d”
+1);

899 
Œ›
->
šdex
=
p16
;

900 
p16
+=
Œ›
->
šdexL’gth
;

901 
Ëngth
-=2*
Œ›
->
šdexL’gth
;

904 if(
İtiÚs
&
UTRIE_OPTIONS_DATA_IS_32_BIT
) {

905 if(
Ëngth
<4*
Œ›
->
d©aL’gth
) {

906 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

909 
Œ›
->
d©a32
=(cÚ¡ 
ušt32_t
 *)
p16
;

910 
Œ›
->
š™ŸlV®ue
ñr›->
d©a32
[0];

911 
Ëngth
=(
št32_t
)(
UTr›H—d”
)+2*
Œ›
->
šdexL’gth
+4*Œ›->
d©aL’gth
;

913 if(
Ëngth
<2*
Œ›
->
d©aL’gth
) {

914 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

919 
Œ›
->
d©a32
=
NULL
;

920 
Œ›
->
š™ŸlV®ue
ñr›->
šdex
[Œ›->
šdexL’gth
];

921 
Ëngth
=(
št32_t
)(
UTr›H—d”
)+2*
Œ›
->
šdexL’gth
+2*Œ›->
d©aL’gth
;

924 
Œ›
->
g‘FŞdšgOff£t
=
uŒ›_deçuÉG‘FŞdšgOff£t
;

926  
Ëngth
;

927 
	}
}

929 
U_CAPI
 
št32_t
 
U_EXPORT2


930 
	$uŒ›_un£rŸlizeDummy
(
UTr›
 *
Œ›
,

931 *
d©a
, 
št32_t
 
Ëngth
,

932 
ušt32_t
 
š™ŸlV®ue
, ušt32_ˆ
ËadUn™V®ue
,

933 
UBoŞ
 
make16B™Tr›
,

934 
UE¼ÜCode
 *
pE¼ÜCode
) {

935 
ušt16_t
 *
p16
;

936 
št32_t
 
aùu®L’gth
, 
Ïtš1L’gth
, 
i
, 
lim™
;

937 
ušt16_t
 
block
;

939 if(
pE¼ÜCode
==
NULL
 || 
	`U_FAILURE
(*pErrorCode)) {

946 
Ïtš1L’gth
ğ
UTRIE_SHIFT
<=8 ? 256 : 
UTRIE_DATA_BLOCK_LENGTH
;

948 
Œ›
->
šdexL’gth
=
UTRIE_BMP_INDEX_LENGTH
+
UTRIE_SURROGATE_BLOCK_COUNT
;

949 
Œ›
->
d©aL’gth
=
Ïtš1L’gth
;

950 if(
ËadUn™V®ue
!=
š™ŸlV®ue
) {

951 
Œ›
->
d©aL’gth
+=
UTRIE_DATA_BLOCK_LENGTH
;

954 
aùu®L’gth
=
Œ›
->
šdexL’gth
*2;

955 if(
make16B™Tr›
) {

956 
aùu®L’gth
+=
Œ›
->
d©aL’gth
*2;

958 
aùu®L’gth
+=
Œ›
->
d©aL’gth
*4;

962 if(
Ëngth
<
aùu®L’gth
) {

963 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

964  
aùu®L’gth
;

967 
Œ›
->
isL©š1Lš—r
=
TRUE
;

968 
Œ›
->
š™ŸlV®ue
=initialValue;

971 
p16
=(
ušt16_t
 *)
d©a
;

972 
Œ›
->
šdex
=
p16
;

974 if(
make16B™Tr›
) {

976 
block
=(
ušt16_t
)(
Œ›
->
šdexL’gth
>>
UTRIE_INDEX_SHIFT
);

977 
lim™
=
Œ›
->
šdexL’gth
;

978 
i
=0; i<
lim™
; ++i) {

979 
p16
[
i
]=
block
;

982 if(
ËadUn™V®ue
!=
š™ŸlV®ue
) {

984 
block
+=(
ušt16_t
)(
Ïtš1L’gth
>>
UTRIE_INDEX_SHIFT
);

985 
i
=0xd800>>
UTRIE_SHIFT
;

986 
lim™
=0xdc00>>
UTRIE_SHIFT
;

987 ; 
i
<
lim™
; ++i) {

988 
p16
[
i
]=
block
;

992 
Œ›
->
d©a32
=
NULL
;

995 
p16
+=
Œ›
->
šdexL’gth
;

996 
i
=0; i<
Ïtš1L’gth
; ++i) {

997 
p16
[
i
]=(
ušt16_t
)
š™ŸlV®ue
;

1001 if(
ËadUn™V®ue
!=
š™ŸlV®ue
) {

1002 
lim™
=
Ïtš1L’gth
+
UTRIE_DATA_BLOCK_LENGTH
;

1003  ; 
i
<
lim™
; ++i) {

1004 
p16
[
i
]=(
ušt16_t
)
ËadUn™V®ue
;

1008 
ušt32_t
 *
p32
;

1011 
	`u´v_mem£t
(
p16
, 0, 
Œ›
->
šdexL’gth
*2);

1013 if(
ËadUn™V®ue
!=
š™ŸlV®ue
) {

1015 
block
=(
ušt16_t
)(
Ïtš1L’gth
>>
UTRIE_INDEX_SHIFT
);

1016 
i
=0xd800>>
UTRIE_SHIFT
;

1017 
lim™
=0xdc00>>
UTRIE_SHIFT
;

1018 ; 
i
<
lim™
; ++i) {

1019 
p16
[
i
]=
block
;

1023 
Œ›
->
d©a32
=
p32
=(
ušt32_t
 *)(
p16
+Œ›->
šdexL’gth
);

1026 
i
=0; i<
Ïtš1L’gth
; ++i) {

1027 
p32
[
i
]=
š™ŸlV®ue
;

1031 if(
ËadUn™V®ue
!=
š™ŸlV®ue
) {

1032 
lim™
=
Ïtš1L’gth
+
UTRIE_DATA_BLOCK_LENGTH
;

1033  ; 
i
<
lim™
; ++i) {

1034 
p32
[
i
]=
ËadUn™V®ue
;

1039 
Œ›
->
g‘FŞdšgOff£t
=
uŒ›_deçuÉG‘FŞdšgOff£t
;

1041  
aùu®L’gth
;

1042 
	}
}

1047 
ušt32_t
 
U_CALLCONV


1048 
	$’umSameV®ue
(cÚ¡ *
cÚ‹xt
, 
ušt32_t
 
v®ue
) {

1049  
v®ue
;

1050 
	}
}

1056 
U_CAPI
 
U_EXPORT2


1057 
	$uŒ›_’um
(cÚ¡ 
UTr›
 *
Œ›
,

1058 
UTr›EnumV®ue
 *
’umV®ue
, 
UTr›EnumRªge
 *
’umRªge
, cÚ¡ *
cÚ‹xt
) {

1059 cÚ¡ 
ušt32_t
 *
d©a32
;

1060 cÚ¡ 
ušt16_t
 *
idx
;

1062 
ušt32_t
 
v®ue
, 
´evV®ue
, 
š™ŸlV®ue
;

1063 
UCh¬32
 
c
, 
´ev
;

1064 
št32_t
 
l
, 
i
, 
j
, 
block
, 
´evBlock
, 
nuÎBlock
, 
off£t
;

1067 if(
Œ›
==
NULL
 ||r›->
šdex
==NULL || 
’umRªge
==NULL) {

1070 if(
’umV®ue
==
NULL
) {

1071 
’umV®ue
=
’umSameV®ue
;

1074 
idx
=
Œ›
->
šdex
;

1075 
d©a32
=
Œ›
->data32;

1078 
š™ŸlV®ue
=
	`’umV®ue
(
cÚ‹xt
, 
Œ›
->initialValue);

1080 if(
d©a32
==
NULL
) {

1081 
nuÎBlock
=
Œ›
->
šdexL’gth
;

1083 
nuÎBlock
=0;

1087 
´evBlock
=
nuÎBlock
;

1088 
´ev
=0;

1089 
´evV®ue
=
š™ŸlV®ue
;

1092 
i
=0, 
c
=0; c<=0xffff; ++i) {

1093 if(
c
==0xd800) {

1095 
i
=
UTRIE_BMP_INDEX_LENGTH
;

1096 } if(
c
==0xdc00) {

1098 
i
=
c
>>
UTRIE_SHIFT
;

1101 
block
=
idx
[
i
]<<
UTRIE_INDEX_SHIFT
;

1102 if(
block
==
´evBlock
) {

1104 
c
+=
UTRIE_DATA_BLOCK_LENGTH
;

1105 } if(
block
==
nuÎBlock
) {

1107 if(
´evV®ue
!=
š™ŸlV®ue
) {

1108 if(
´ev
<
c
) {

1109 if(!
	`’umRªge
(
cÚ‹xt
, 
´ev
, 
c
, 
´evV®ue
)) {

1113 
´evBlock
=
nuÎBlock
;

1114 
´ev
=
c
;

1115 
´evV®ue
=
š™ŸlV®ue
;

1117 
c
+=
UTRIE_DATA_BLOCK_LENGTH
;

1119 
´evBlock
=
block
;

1120 
j
=0; j<
UTRIE_DATA_BLOCK_LENGTH
; ++j) {

1121 
v®ue
=
	`’umV®ue
(
cÚ‹xt
, 
d©a32
!=
NULL
 ? d©a32[
block
+
j
] : 
idx
[block+j]);

1122 if(
v®ue
!=
´evV®ue
) {

1123 if(
´ev
<
c
) {

1124 if(!
	`’umRªge
(
cÚ‹xt
, 
´ev
, 
c
, 
´evV®ue
)) {

1128 if(
j
>0) {

1130 
´evBlock
=-1;

1132 
´ev
=
c
;

1133 
´evV®ue
=
v®ue
;

1135 ++
c
;

1141 
l
=0xd800;†<0xdc00;) {

1143 
off£t
=
idx
[
l
>>
UTRIE_SHIFT
]<<
UTRIE_INDEX_SHIFT
;

1144 if(
off£t
==
nuÎBlock
) {

1146 if(
´evV®ue
!=
š™ŸlV®ue
) {

1147 if(
´ev
<
c
) {

1148 if(!
	`’umRªge
(
cÚ‹xt
, 
´ev
, 
c
, 
´evV®ue
)) {

1152 
´evBlock
=
nuÎBlock
;

1153 
´ev
=
c
;

1154 
´evV®ue
=
š™ŸlV®ue
;

1157 
l
+=
UTRIE_DATA_BLOCK_LENGTH
;

1158 
c
+=
UTRIE_DATA_BLOCK_LENGTH
<<10;

1162 
v®ue
ğ
d©a32
!=
NULL
 ? d©a32[
off£t
+(
l
&
UTRIE_MASK
)] : 
idx
[offset+(l&UTRIE_MASK)];

1165 
off£t
=
Œ›
->
	`g‘FŞdšgOff£t
(
v®ue
);

1166 if(
off£t
<=0) {

1168 if(
´evV®ue
!=
š™ŸlV®ue
) {

1169 if(
´ev
<
c
) {

1170 if(!
	`’umRªge
(
cÚ‹xt
, 
´ev
, 
c
, 
´evV®ue
)) {

1174 
´evBlock
=
nuÎBlock
;

1175 
´ev
=
c
;

1176 
´evV®ue
=
š™ŸlV®ue
;

1180 
c
+=0x400;

1183 
i
=
off£t
;

1184 
off£t
+=
UTRIE_SURROGATE_BLOCK_COUNT
;

1187 
block
=
idx
[
i
]<<
UTRIE_INDEX_SHIFT
;

1188 if(
block
==
´evBlock
) {

1190 
c
+=
UTRIE_DATA_BLOCK_LENGTH
;

1191 } if(
block
==
nuÎBlock
) {

1193 if(
´evV®ue
!=
š™ŸlV®ue
) {

1194 if(
´ev
<
c
) {

1195 if(!
	`’umRªge
(
cÚ‹xt
, 
´ev
, 
c
, 
´evV®ue
)) {

1199 
´evBlock
=
nuÎBlock
;

1200 
´ev
=
c
;

1201 
´evV®ue
=
š™ŸlV®ue
;

1203 
c
+=
UTRIE_DATA_BLOCK_LENGTH
;

1205 
´evBlock
=
block
;

1206 
j
=0; j<
UTRIE_DATA_BLOCK_LENGTH
; ++j) {

1207 
v®ue
=
	`’umV®ue
(
cÚ‹xt
, 
d©a32
!=
NULL
 ? d©a32[
block
+
j
] : 
idx
[block+j]);

1208 if(
v®ue
!=
´evV®ue
) {

1209 if(
´ev
<
c
) {

1210 if(!
	`’umRªge
(
cÚ‹xt
, 
´ev
, 
c
, 
´evV®ue
)) {

1214 if(
j
>0) {

1216 
´evBlock
=-1;

1218 
´ev
=
c
;

1219 
´evV®ue
=
v®ue
;

1221 ++
c
;

1224 } ++
i
<
off£t
);

1227 ++
l
;

1231 
	`’umRªge
(
cÚ‹xt
, 
´ev
, 
c
, 
´evV®ue
);

1232 
	}
}

	@utrie.h

17 #iâdeà
__UTRIE_H__


18 
	#__UTRIE_H__


	)

20 
	~"unicode/uty³s.h
"

21 
	~"ud©aswp.h
"

23 
U_CDECL_BEGIN


53 
	mUTRIE_SHIFT
=5,

56 
	mUTRIE_DATA_BLOCK_LENGTH
=1<<
UTRIE_SHIFT
,

59 
	mUTRIE_MASK
=
UTRIE_DATA_BLOCK_LENGTH
-1,

65 
	mUTRIE_LEAD_INDEX_DISP
=0x2800>>
UTRIE_SHIFT
,

74 
	mUTRIE_INDEX_SHIFT
=2,

77 
	mUTRIE_DATA_GRANULARITY
=1<<
UTRIE_INDEX_SHIFT
,

80 
	mUTRIE_SURROGATE_BLOCK_BITS
=10-
UTRIE_SHIFT
,

87 
	mUTRIE_SURROGATE_BLOCK_COUNT
=(1<<
UTRIE_SURROGATE_BLOCK_BITS
),

90 
	mUTRIE_BMP_INDEX_LENGTH
=0x10000>>
UTRIE_SHIFT


97 
	#UTRIE_MAX_INDEX_LENGTH
 (0x110000>>
UTRIE_SHIFT
)

	)

103 
	#UTRIE_MAX_DATA_LENGTH
 (0x10000<<
UTRIE_INDEX_SHIFT
)

	)

111 
	#UTRIE_MAX_BUILD_TIME_DATA_LENGTH
 (0x110000+
UTRIE_DATA_BLOCK_LENGTH
+0x400)

	)

128 
	#UTRIE_DUMMY_SIZE
 ((
UTRIE_BMP_INDEX_LENGTH
+
UTRIE_SURROGATE_BLOCK_COUNT
)*2+(
UTRIE_SHIFT
<=8?256:
UTRIE_DATA_BLOCK_LENGTH
)*4+UTRIE_DATA_BLOCK_LENGTH*4)

	)

138 
št32_t
 
	tU_CALLCONV


139 
	tUTr›G‘FŞdšgOff£t
(
	tušt32_t
 
	td©a
);

150 
	sUTr›
 {

151 cÚ¡ 
ušt16_t
 *
	mšdex
;

152 cÚ¡ 
ušt32_t
 *
	md©a32
;

164 
UTr›G‘FŞdšgOff£t
 *
	mg‘FŞdšgOff£t
;

166 
št32_t
 
	mšdexL’gth
, 
	md©aL’gth
;

167 
ušt32_t
 
	mš™ŸlV®ue
;

168 
UBoŞ
 
	misL©š1Lš—r
;

171 #iâdeà
__UTRIE2_H__


172 
UTr›
 
	tUTr›
;

176 
	#_UTRIE_GET_RAW
(
Œ›
, 
d©a
, 
off£t
, 
c16
) \

177 (
Œ›
)->
d©a
[ \

178 ((
št32_t
)((
Œ›
)->
šdex
[(
off£t
)+((
c16
)>>
UTRIE_SHIFT
)])<<
UTRIE_INDEX_SHIFT
)+ \

179 ((
c16
)&
UTRIE_MASK
) \

180 ]

	)

183 
	#_UTRIE_GET_FROM_PAIR
(
Œ›
, 
d©a
, 
c
, 
c2
, 
»suÉ
, 
»suÉTy³
) { \

184 
št32_t
 
__off£t
; \

187 (
»suÉ
)=
	`_UTRIE_GET_RAW
((
Œ›
), 
d©a
, 0, (
c
)); \

188 
__off£t
=(
Œ›
)->
	`g‘FŞdšgOff£t
(
»suÉ
); \

191 if(
__off£t
>0) { \

192 (
»suÉ
)=
	`_UTRIE_GET_RAW
((
Œ›
), 
d©a
, 
__off£t
, (
c2
)&0x3ff); \

194 (
»suÉ
)=(
»suÉTy³
)((
Œ›
)->
š™ŸlV®ue
); \

196 }

	)

199 
	#_UTRIE_GET_FROM_BMP
(
Œ›
, 
d©a
, 
c16
) \

200 
	`_UTRIE_GET_RAW
(
Œ›
, 
d©a
, 0xd800<=(
c16
è&& (c16)<=0xdbfà? 
UTRIE_LEAD_INDEX_DISP
 : 0, c16);

	)

207 
	#_UTRIE_GET
(
Œ›
, 
d©a
, 
c32
, 
»suÉ
, 
»suÉTy³
) \

208 if((
ušt32_t
)(
c32
)<=0xffff) { \

210 (
»suÉ
)=
	`_UTRIE_GET_FROM_BMP
(
Œ›
, 
d©a
, 
c32
); \

211 } if((
ušt32_t
)(
c32
)<=0x10ffff) { \

213 
UCh¬
 
__Ëad16
=
	`UTF16_LEAD
(
c32
); \

214 
	`_UTRIE_GET_FROM_PAIR
(
Œ›
, 
d©a
, 
__Ëad16
, 
c32
, 
»suÉ
, 
»suÉTy³
); \

217 (
»suÉ
)=(
»suÉTy³
)((
Œ›
)->
š™ŸlV®ue
); \

218 }

	)

221 
	#_UTRIE_NEXT
(
Œ›
, 
d©a
, 
¤c
, 
lim™
, 
c
, 
c2
, 
»suÉ
, 
»suÉTy³
) { \

222 (
c
)=*(
¤c
)++; \

223 if(!
	`UTF_IS_LEAD
(
c
)) { \

224 (
c2
)=0; \

225 (
»suÉ
)=
	`_UTRIE_GET_RAW
((
Œ›
), 
d©a
, 0, (
c
)); \

226 } if((
¤c
)!=(
lim™
è&& 
	`UTF_IS_TRAIL
((
c2
)=*(src))) { \

227 ++(
¤c
); \

228 
	`_UTRIE_GET_FROM_PAIR
((
Œ›
), 
d©a
, (
c
), (
c2
), (
»suÉ
), 
»suÉTy³
); \

231 (
c2
)=0; \

232 (
»suÉ
)=
	`_UTRIE_GET_RAW
((
Œ›
), 
d©a
, 
UTRIE_LEAD_INDEX_DISP
, (
c
)); \

234 }

	)

237 
	#_UTRIE_PREVIOUS
(
Œ›
, 
d©a
, 
¡¬t
, 
¤c
, 
c
, 
c2
, 
»suÉ
, 
»suÉTy³
) { \

238 (
c
)=*--(
¤c
); \

239 if(!
	`UTF_IS_SURROGATE
(
c
)) { \

240 (
c2
)=0; \

241 (
»suÉ
)=
	`_UTRIE_GET_RAW
((
Œ›
), 
d©a
, 0, (
c
)); \

242 } if(!
	`UTF_IS_SURROGATE_FIRST
(
c
)) { \

244 if((
¡¬t
)!=(
¤c
è&& 
	`UTF_IS_LEAD
((
c2
)=*((src)-1))) { \

245 --(
¤c
); \

246 (
»suÉ
)=(
c
); (c)=(
c2
); (c2)=(
UCh¬
)(result); \

247 
	`_UTRIE_GET_FROM_PAIR
((
Œ›
), 
d©a
, (
c
), (
c2
), (
»suÉ
), 
»suÉTy³
); \

250 (
c2
)=0; \

251 (
»suÉ
)=
	`_UTRIE_GET_RAW
((
Œ›
), 
d©a
, 0, (
c
)); \

255 (
c2
)=0; \

256 (
»suÉ
)=
	`_UTRIE_GET_RAW
((
Œ›
), 
d©a
, 
UTRIE_LEAD_INDEX_DISP
, (
c
)); \

258 }

	)

271 
	#UTRIE_GET16_LATIN1
(
Œ›
è(Ñr›)->
šdex
+Ñr›)->
šdexL’gth
+
UTRIE_DATA_BLOCK_LENGTH
)

	)

282 
	#UTRIE_GET32_LATIN1
(
Œ›
è(Ñr›)->
d©a32
+
UTRIE_DATA_BLOCK_LENGTH
)

	)

292 
	#UTRIE_GET16_FROM_LEAD
(
Œ›
, 
c16
è
	`_UTRIE_GET_RAW
Ñr›, 
šdex
, 0, c16)

	)

302 
	#UTRIE_GET32_FROM_LEAD
(
Œ›
, 
c16
è
	`_UTRIE_GET_RAW
Ñr›, 
d©a32
, 0, c16)

	)

313 
	#UTRIE_GET16_FROM_BMP
(
Œ›
, 
c16
è
	`_UTRIE_GET_FROM_BMP
Ñr›, 
šdex
, c16)

	)

324 
	#UTRIE_GET32_FROM_BMP
(
Œ›
, 
c16
è
	`_UTRIE_GET_FROM_BMP
Ñr›, 
d©a32
, c16)

	)

335 
	#UTRIE_GET16
(
Œ›
, 
c32
, 
»suÉ
è
	`_UTRIE_GET
Ñr›, 
šdex
, c32,„esuÉ, 
ušt16_t
)

	)

346 
	#UTRIE_GET32
(
Œ›
, 
c32
, 
»suÉ
è
	`_UTRIE_GET
Ñr›, 
d©a32
, c32,„esuÉ, 
ušt32_t
)

	)

359 
	#UTRIE_NEXT16
(
Œ›
, 
¤c
, 
lim™
, 
c
, 
c2
, 
»suÉ
è
	`_UTRIE_NEXT
Ñr›, 
šdex
, src,†im™, c, c2,„esuÉ, 
ušt16_t
)

	)

372 
	#UTRIE_NEXT32
(
Œ›
, 
¤c
, 
lim™
, 
c
, 
c2
, 
»suÉ
è
	`_UTRIE_NEXT
Ñr›, 
d©a32
, src,†im™, c, c2,„esuÉ, 
ušt32_t
)

	)

385 
	#UTRIE_PREVIOUS16
(
Œ›
, 
¡¬t
, 
¤c
, 
c
, 
c2
, 
»suÉ
è
	`_UTRIE_PREVIOUS
Ñr›, 
šdex
, s¹, src, c, c2,„esuÉ, 
ušt16_t
)

	)

398 
	#UTRIE_PREVIOUS32
(
Œ›
, 
¡¬t
, 
¤c
, 
c
, 
c2
, 
»suÉ
è
	`_UTRIE_PREVIOUS
Ñr›, 
d©a32
, s¹, src, c, c2,„esuÉ, 
ušt32_t
)

	)

408 
	#UTRIE_GET16_FROM_PAIR
(
Œ›
, 
c
, 
c2
, 
»suÉ
è
	`_UTRIE_GET_FROM_PAIR
Ñr›, 
šdex
, c, c2,„esuÉ, 
ušt16_t
)

	)

418 
	#UTRIE_GET32_FROM_PAIR
(
Œ›
, 
c
, 
c2
, 
»suÉ
è
	`_UTRIE_GET_FROM_PAIR
Ñr›, 
d©a32
, c, c2,„esuÉ, 
ušt32_t
)

	)

429 
	#UTRIE_GET16_FROM_OFFSET_TRAIL
(
Œ›
, 
off£t
, 
c2
è
	`_UTRIE_GET_RAW
Ñr›, 
šdex
, off£t, (c2)&0x3ff)

	)

440 
	#UTRIE_GET32_FROM_OFFSET_TRAIL
(
Œ›
, 
off£t
, 
c2
è
	`_UTRIE_GET_RAW
Ñr›, 
d©a32
, off£t, (c2)&0x3ff)

	)

452 
ušt32_t
 
	tU_CALLCONV


453 
	tUTr›EnumV®ue
(cÚ¡ *
	tcÚ‹xt
, 
	tušt32_t
 
	tv®ue
);

468 
UBoŞ
 
	tU_CALLCONV


469 
	tUTr›EnumRªge
(cÚ¡ *
	tcÚ‹xt
, 
	tUCh¬32
 
	t¡¬t
, UCh¬32 
	tlim™
, 
	tušt32_t
 
	tv®ue
);

487 
U_CAPI
 
U_EXPORT2


488 
uŒ›_’um
(cÚ¡ 
UTr›
 *
Œ›
,

489 
UTr›EnumV®ue
 *
’umV®ue
, 
UTr›EnumRªge
 *
’umRªge
, cÚ¡ *
cÚ‹xt
);

502 
U_CAPI
 
št32_t
 
U_EXPORT2


503 
uŒ›_un£rŸlize
(
UTr›
 *
Œ›
, cÚ¡ *
d©a
, 
št32_t
 
Ëngth
, 
UE¼ÜCode
 *
pE¼ÜCode
);

525 
U_CAPI
 
št32_t
 
U_EXPORT2


526 
uŒ›_un£rŸlizeDummy
(
UTr›
 *
Œ›
,

527 *
d©a
, 
št32_t
 
Ëngth
,

528 
ušt32_t
 
š™ŸlV®ue
, ušt32_ˆ
ËadUn™V®ue
,

529 
UBoŞ
 
make16B™Tr›
,

530 
UE¼ÜCode
 *
pE¼ÜCode
);

541 
U_CAPI
 
št32_t
 
U_EXPORT2


542 
uŒ›_deçuÉG‘FŞdšgOff£t
(
ušt32_t
 
d©a
);

551 
	sUNewTr›
 {

556 
št32_t
 
	mšdex
[
UTRIE_MAX_INDEX_LENGTH
];

557 
ušt32_t
 *
	md©a
;

559 
ušt32_t
 
	mËadUn™V®ue
;

560 
št32_t
 
	mšdexL’gth
, 
	md©aC­ac™y
, 
	md©aL’gth
;

561 
UBoŞ
 
	misAÎoÿ‹d
, 
	misD©aAÎoÿ‹d
;

562 
UBoŞ
 
	misL©š1Lš—r
, 
	misCom·ùed
;

568 
št32_t
 
	mm­
[
UTRIE_MAX_BUILD_TIME_DATA_LENGTH
>>
UTRIE_SHIFT
];

571 
UNewTr›
 
	tUNewTr›
;

591 
ušt32_t
 
	tU_CALLCONV


592 
	tUNewTr›G‘FŞdedV®ue
(
	tUNewTr›
 *
	tŒ›
, 
	tUCh¬32
 
	t¡¬t
, 
	tšt32_t
 
	toff£t
);

620 
U_CAPI
 
UNewTr›
 * 
U_EXPORT2


621 
uŒ›_İ’
(
UNewTr›
 *
flIn
,

622 
ušt32_t
 *
®ŸsD©a
, 
št32_t
 
maxD©aL’gth
,

623 
ušt32_t
 
š™ŸlV®ue
, ušt32_ˆ
ËadUn™V®ue
,

624 
UBoŞ
 
Ïtš1Lš—r
);

636 
U_CAPI
 
UNewTr›
 * 
U_EXPORT2


637 
uŒ›_şÚe
(
UNewTr›
 *
flIn
, cÚ¡ UNewTr› *
Ùh”
, 
ušt32_t
 *
®ŸsD©a
, 
št32_t
 
®ŸsD©aL’gth
);

645 
U_CAPI
 
U_EXPORT2


646 
uŒ›_şo£
(
UNewTr›
 *
Œ›
);

658 
U_CAPI
 
ušt32_t
 * 
U_EXPORT2


659 
uŒ›_g‘D©a
(
UNewTr›
 *
Œ›
, 
št32_t
 *
pL’gth
);

669 
U_CAPI
 
UBoŞ
 
U_EXPORT2


670 
uŒ›_£t32
(
UNewTr›
 *
Œ›
, 
UCh¬32
 
c
, 
ušt32_t
 
v®ue
);

682 
U_CAPI
 
ušt32_t
 
U_EXPORT2


683 
uŒ›_g‘32
(
UNewTr›
 *
Œ›
, 
UCh¬32
 
c
, 
UBoŞ
 *
pInBlockZ”o
);

697 
U_CAPI
 
UBoŞ
 
U_EXPORT2


698 
uŒ›_£tRªge32
(
UNewTr›
 *
Œ›
, 
UCh¬32
 
¡¬t
, UCh¬32 
lim™
, 
ušt32_t
 
v®ue
, 
UBoŞ
 
ov”wr™e
);

726 
U_CAPI
 
št32_t
 
U_EXPORT2


727 
uŒ›_£rŸlize
(
UNewTr›
 *
Œ›
, *
d©a
, 
št32_t
 
ÿ·c™y
,

728 
UNewTr›G‘FŞdedV®ue
 *
g‘FŞdedV®ue
,

729 
UBoŞ
 
»duûTo16B™s
,

730 
UE¼ÜCode
 *
pE¼ÜCode
);

736 
U_CAPI
 
št32_t
 
U_EXPORT2


737 
uŒ›_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

738 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

739 
UE¼ÜCode
 *
pE¼ÜCode
);

751 
	sUTr›H—d”
 {

753 
ušt32_t
 
	msigÇtu»
;

762 
ušt32_t
 
	mİtiÚs
;

765 
št32_t
 
	mšdexL’gth
;

768 
št32_t
 
	md©aL’gth
;

769 } 
	tUTr›H—d”
;

777 
	mUTRIE_OPTIONS_SHIFT_MASK
=0xf,

780 
	mUTRIE_OPTIONS_INDEX_SHIFT
=4,

783 
	mUTRIE_OPTIONS_DATA_IS_32_BIT
=0x100,

789 
	mUTRIE_OPTIONS_LATIN1_IS_LINEAR
=0x200

792 
	gU_CDECL_END


	@utrie2.cpp

25 #ifdeà
UTRIE2_DEBUG


26 
	~<¡dio.h
>

29 
	~"unicode/uty³s.h
"

30 
	~"cmemÜy.h
"

31 
	~"uŒ›2.h
"

32 
	~"uŒ›2_im¶.h
"

36 
ušt32_t


37 
	$g‘32
(cÚ¡ 
UNewTr›2
 *
Œ›
, 
UCh¬32
 
c
, 
UBoŞ
 
äomLSCP
) {

38 
št32_t
 
i2
, 
block
;

40 if(
c
>=
Œ›
->
highS¹
 && (!
	`U_IS_LEAD
(cè|| 
äomLSCP
)) {

41  
Œ›
->
d©a
[Œ›->
d©aL’gth
-
UTRIE2_DATA_GRANULARITY
];

44 if(
	`U_IS_LEAD
(
c
è&& 
äomLSCP
) {

45 
i2
=(
UTRIE2_LSCP_INDEX_2_OFFSET
-(0xd800>>
UTRIE2_SHIFT_2
))+

46 (
c
>>
UTRIE2_SHIFT_2
);

48 
i2
=
Œ›
->
šdex1
[
c
>>
UTRIE2_SHIFT_1
]+

49 ((
c
>>
UTRIE2_SHIFT_2
)&
UTRIE2_INDEX_2_MASK
);

51 
block
=
Œ›
->
šdex2
[
i2
];

52  
Œ›
->
d©a
[
block
+(
c
&
UTRIE2_DATA_MASK
)];

53 
	}
}

55 
U_CAPI
 
ušt32_t
 
U_EXPORT2


56 
	$uŒ›2_g‘32
(cÚ¡ 
UTr›2
 *
Œ›
, 
UCh¬32
 
c
) {

57 if(
Œ›
->
d©a16
!=
NULL
) {

58  
	`UTRIE2_GET16
(
Œ›
, 
c
);

59 } if(
Œ›
->
d©a32
!=
NULL
) {

60  
	`UTRIE2_GET32
(
Œ›
, 
c
);

61 } if((
ušt32_t
)
c
>0x10ffff) {

62  
Œ›
->
”rÜV®ue
;

64  
	`g‘32
(
Œ›
->
ÃwTr›
, 
c
, 
TRUE
);

66 
	}
}

68 
U_CAPI
 
ušt32_t
 
U_EXPORT2


69 
	$uŒ›2_g‘32FromL—dSu¼og©eCodeUn™
(cÚ¡ 
UTr›2
 *
Œ›
, 
UCh¬32
 
c
) {

70 if(!
	`U_IS_LEAD
(
c
)) {

71  
Œ›
->
”rÜV®ue
;

73 if(
Œ›
->
d©a16
!=
NULL
) {

74  
	`UTRIE2_GET16_FROM_U16_SINGLE_LEAD
(
Œ›
, 
c
);

75 } if(
Œ›
->
d©a32
!=
NULL
) {

76  
	`UTRIE2_GET32_FROM_U16_SINGLE_LEAD
(
Œ›
, 
c
);

78  
	`g‘32
(
Œ›
->
ÃwTr›
, 
c
, 
FALSE
);

80 
	}
}

82 
U_INLINE
 
št32_t


83 
	$u8Index
(cÚ¡ 
UTr›2
 *
Œ›
, 
UCh¬32
 
c
, 
št32_t
 
i
) {

84 
št32_t
 
idx
=

85 
	`_UTRIE2_INDEX_FROM_CP
(

86 
Œ›
,

87 
Œ›
->
d©a32
==
NULL
 ?r›->
šdexL’gth
 : 0,

88 
c
);

89  (
idx
<<3)|
i
;

90 
	}
}

92 
U_CAPI
 
št32_t
 
U_EXPORT2


93 
	$uŒ›2_š‹º®U8NextIndex
(cÚ¡ 
UTr›2
 *
Œ›
, 
UCh¬32
 
c
,

94 cÚ¡ 
ušt8_t
 *
¤c
, cÚ¡ ušt8_ˆ*
lim™
) {

95 
št32_t
 
i
, 
Ëngth
;

96 
i
=0;

98 if((
lim™
-
¤c
)<=7) {

99 
Ëngth
=(
št32_t
)(
lim™
-
¤c
);

101 
Ëngth
=7;

103 
c
=
	`utf8_ÃxtCh¬SaãBody
(
¤c
, &
i
, 
Ëngth
, c, -1);

104  
	`u8Index
(
Œ›
, 
c
, 
i
);

105 
	}
}

107 
U_CAPI
 
št32_t
 
U_EXPORT2


108 
	$uŒ›2_š‹º®U8P»vIndex
(cÚ¡ 
UTr›2
 *
Œ›
, 
UCh¬32
 
c
,

109 cÚ¡ 
ušt8_t
 *
¡¬t
, cÚ¡ ušt8_ˆ*
¤c
) {

110 
št32_t
 
i
, 
Ëngth
;

112 if((
¤c
-
¡¬t
)<=7) {

113 
i
=
Ëngth
=(
št32_t
)(
¤c
-
¡¬t
);

115 
i
=
Ëngth
=7;

116 
¡¬t
=
¤c
-7;

118 
c
=
	`utf8_´evCh¬SaãBody
(
¡¬t
, 0, &
i
, c, -1);

119 
i
=
Ëngth
-i;

120  
	`u8Index
(
Œ›
, 
c
, 
i
);

121 
	}
}

123 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


124 
	$uŒ›2_İ’FromS”Ÿlized
(
UTr›2V®ueB™s
 
v®ueB™s
,

125 cÚ¡ *
d©a
, 
št32_t
 
Ëngth
, iÁ32_ˆ*
pAùu®L’gth
,

126 
UE¼ÜCode
 *
pE¼ÜCode
) {

127 cÚ¡ 
UTr›2H—d”
 *
h—d”
;

128 cÚ¡ 
ušt16_t
 *
p16
;

129 
št32_t
 
aùu®L’gth
;

131 
UTr›2
 
‹mpTr›
;

132 
UTr›2
 *
Œ›
;

134 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

138 ifĞ
Ëngth
<=0 || (
	`U_POINTER_MASK_LSB
(
d©a
, 3)!=0) ||

139 
v®ueB™s
<0 || 
UTRIE2_COUNT_VALUE_BITS
<=valueBits

141 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

146 if(
Ëngth
<(
št32_t
)(
UTr›2H—d”
)) {

147 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

152 
h—d”
=(cÚ¡ 
UTr›2H—d”
 *)
d©a
;

153 if(
h—d”
->
sigÇtu»
!=
UTRIE2_SIG
) {

154 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

159 if(
v®ueB™s
!=(
UTr›2V®ueB™s
)(
h—d”
->
İtiÚs
&
UTRIE2_OPTIONS_VALUE_BITS_MASK
)) {

160 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

165 
	`u´v_mem£t
(&
‹mpTr›
, 0, (tempTrie));

166 
‹mpTr›
.
šdexL’gth
=
h—d”
->indexLength;

167 
‹mpTr›
.
d©aL’gth
=
h—d”
->
shiáedD©aL’gth
<<
UTRIE2_INDEX_SHIFT
;

168 
‹mpTr›
.
šdex2NuÎOff£t
=
h—d”
->index2NullOffset;

169 
‹mpTr›
.
d©aNuÎOff£t
=
h—d”
->dataNullOffset;

171 
‹mpTr›
.
highS¹
=
h—d”
->
shiáedHighS¹
<<
UTRIE2_SHIFT_1
;

172 
‹mpTr›
.
highV®ueIndex
ñempTr›.
d©aL’gth
-
UTRIE2_DATA_GRANULARITY
;

173 if(
v®ueB™s
==
UTRIE2_16_VALUE_BITS
) {

174 
‹mpTr›
.
highV®ueIndex
+ñempTr›.
šdexL’gth
;

178 
aùu®L’gth
=(
št32_t
)(
UTr›2H—d”
)+
‹mpTr›
.
šdexL’gth
*2;

179 if(
v®ueB™s
==
UTRIE2_16_VALUE_BITS
) {

180 
aùu®L’gth
+=
‹mpTr›
.
d©aL’gth
*2;

182 
aùu®L’gth
+=
‹mpTr›
.
d©aL’gth
*4;

184 if(
Ëngth
<
aùu®L’gth
) {

185 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

190 
Œ›
=(
UTr›2
 *)
	`u´v_m®loc
((UTrie2));

191 if(
Œ›
==
NULL
) {

192 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

195 
	`u´v_memıy
(
Œ›
, &
‹mpTr›
, (tempTrie));

196 
Œ›
->
memÜy
=(
ušt32_t
 *)
d©a
;

197 
Œ›
->
Ëngth
=
aùu®L’gth
;

198 
Œ›
->
isMemÜyOwÃd
=
FALSE
;

201 
p16
=(cÚ¡ 
ušt16_t
 *)(
h—d”
+1);

202 
Œ›
->
šdex
=
p16
;

203 
p16
+=
Œ›
->
šdexL’gth
;

206 
v®ueB™s
) {

207 
UTRIE2_16_VALUE_BITS
:

208 
Œ›
->
d©a16
=
p16
;

209 
Œ›
->
d©a32
=
NULL
;

210 
Œ›
->
š™ŸlV®ue
ñr›->
šdex
[Œ›->
d©aNuÎOff£t
];

211 
Œ›
->
”rÜV®ue
ñr›->
d©a16
[
UTRIE2_BAD_UTF8_DATA_OFFSET
];

213 
UTRIE2_32_VALUE_BITS
:

214 
Œ›
->
d©a16
=
NULL
;

215 
Œ›
->
d©a32
=(cÚ¡ 
ušt32_t
 *)
p16
;

216 
Œ›
->
š™ŸlV®ue
ñr›->
d©a32
[Œ›->
d©aNuÎOff£t
];

217 
Œ›
->
”rÜV®ue
ñr›->
d©a32
[
UTRIE2_BAD_UTF8_DATA_OFFSET
];

220 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

224 if(
pAùu®L’gth
!=
NULL
) {

225 *
pAùu®L’gth
=
aùu®L’gth
;

227  
Œ›
;

228 
	}
}

230 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


231 
	$uŒ›2_İ’Dummy
(
UTr›2V®ueB™s
 
v®ueB™s
,

232 
ušt32_t
 
š™ŸlV®ue
, ušt32_ˆ
”rÜV®ue
,

233 
UE¼ÜCode
 *
pE¼ÜCode
) {

234 
UTr›2
 *
Œ›
;

235 
UTr›2H—d”
 *
h—d”
;

236 
ušt32_t
 *
p
;

237 
ušt16_t
 *
de¡16
;

238 
št32_t
 
šdexL’gth
, 
d©aL’gth
, 
Ëngth
, 
i
;

239 
št32_t
 
d©aMove
;

241 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

245 if(
v®ueB™s
<0 || 
UTRIE2_COUNT_VALUE_BITS
<=valueBits) {

246 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

251 
šdexL’gth
=
UTRIE2_INDEX_1_OFFSET
;

252 
d©aL’gth
=
UTRIE2_DATA_START_OFFSET
+
UTRIE2_DATA_GRANULARITY
;

253 
Ëngth
=(
št32_t
)(
UTr›2H—d”
)+
šdexL’gth
*2;

254 if(
v®ueB™s
==
UTRIE2_16_VALUE_BITS
) {

255 
Ëngth
+=
d©aL’gth
*2;

257 
Ëngth
+=
d©aL’gth
*4;

261 
Œ›
=(
UTr›2
 *)
	`u´v_m®loc
((UTrie2));

262 if(
Œ›
==
NULL
) {

263 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

266 
	`u´v_mem£t
(
Œ›
, 0, (
UTr›2
));

267 
Œ›
->
memÜy
=
	`u´v_m®loc
(
Ëngth
);

268 if(
Œ›
->
memÜy
==
NULL
) {

269 
	`u´v_ä“
(
Œ›
);

270 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

273 
Œ›
->
Ëngth
=length;

274 
Œ›
->
isMemÜyOwÃd
=
TRUE
;

277 if(
v®ueB™s
==
UTRIE2_16_VALUE_BITS
) {

278 
d©aMove
=
šdexL’gth
;

280 
d©aMove
=0;

283 
Œ›
->
šdexL’gth
=indexLength;

284 
Œ›
->
d©aL’gth
=dataLength;

285 
Œ›
->
šdex2NuÎOff£t
=
UTRIE2_INDEX_2_OFFSET
;

286 
Œ›
->
d©aNuÎOff£t
=(
ušt16_t
)
d©aMove
;

287 
Œ›
->
š™ŸlV®ue
=initialValue;

288 
Œ›
->
”rÜV®ue
=errorValue;

289 
Œ›
->
highS¹
=0;

290 
Œ›
->
highV®ueIndex
=
d©aMove
+
UTRIE2_DATA_START_OFFSET
;

293 
h—d”
=(
UTr›2H—d”
 *)
Œ›
->
memÜy
;

295 
h—d”
->
sigÇtu»
=
UTRIE2_SIG
;

296 
h—d”
->
İtiÚs
=(
ušt16_t
)
v®ueB™s
;

298 
h—d”
->
šdexL’gth
=(
ušt16_t
)indexLength;

299 
h—d”
->
shiáedD©aL’gth
=(
ušt16_t
)(
d©aL’gth
>>
UTRIE2_INDEX_SHIFT
);

300 
h—d”
->
šdex2NuÎOff£t
=(
ušt16_t
)
UTRIE2_INDEX_2_OFFSET
;

301 
h—d”
->
d©aNuÎOff£t
=(
ušt16_t
)
d©aMove
;

302 
h—d”
->
shiáedHighS¹
=0;

305 
de¡16
=(
ušt16_t
 *)(
h—d”
+1);

306 
Œ›
->
šdex
=
de¡16
;

309 
i
=0; i<
UTRIE2_INDEX_2_BMP_LENGTH
; ++i) {

310 *
de¡16
++=(
ušt16_t
)(
d©aMove
>>
UTRIE2_INDEX_SHIFT
);

314 
i
=0; i<(0xc2-0xc0); ++i) {

315 *
de¡16
++=(
ušt16_t
)(
d©aMove
+
UTRIE2_BAD_UTF8_DATA_OFFSET
);

317 ; 
i
<(0xe0-0xc0); ++i) {

318 *
de¡16
++=(
ušt16_t
)
d©aMove
;

322 
v®ueB™s
) {

323 
UTRIE2_16_VALUE_BITS
:

325 
Œ›
->
d©a16
=
de¡16
;

326 
Œ›
->
d©a32
=
NULL
;

327 
i
=0; i<0x80; ++i) {

328 *
de¡16
++=(
ušt16_t
)
š™ŸlV®ue
;

330 ; 
i
<0xc0; ++i) {

331 *
de¡16
++=(
ušt16_t
)
”rÜV®ue
;

334 
i
=0; i<
UTRIE2_DATA_GRANULARITY
; ++i) {

335 *
de¡16
++=(
ušt16_t
)
š™ŸlV®ue
;

338 
UTRIE2_32_VALUE_BITS
:

340 
p
=(
ušt32_t
 *)
de¡16
;

341 
Œ›
->
d©a16
=
NULL
;

342 
Œ›
->
d©a32
=
p
;

343 
i
=0; i<0x80; ++i) {

344 *
p
++=
š™ŸlV®ue
;

346 ; 
i
<0xc0; ++i) {

347 *
p
++=
”rÜV®ue
;

350 
i
=0; i<
UTRIE2_DATA_GRANULARITY
; ++i) {

351 *
p
++=
š™ŸlV®ue
;

355 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

359  
Œ›
;

360 
	}
}

362 
U_CAPI
 
U_EXPORT2


363 
	$uŒ›2_şo£
(
UTr›2
 *
Œ›
) {

364 if(
Œ›
!=
NULL
) {

365 if(
Œ›
->
isMemÜyOwÃd
) {

366 
	`u´v_ä“
(
Œ›
->
memÜy
);

368 if(
Œ›
->
ÃwTr›
!=
NULL
) {

369 
	`u´v_ä“
(
Œ›
->
ÃwTr›
->
d©a
);

370 
	`u´v_ä“
(
Œ›
->
ÃwTr›
);

372 
	`u´v_ä“
(
Œ›
);

374 
	}
}

376 
U_CAPI
 
št32_t
 
U_EXPORT2


377 
	$uŒ›2_g‘V”siÚ
(cÚ¡ *
d©a
, 
št32_t
 
Ëngth
, 
UBoŞ
 
ªyEndŸnOk
) {

378 
ušt32_t
 
sigÇtu»
;

379 if(
Ëngth
<16 || 
d©a
==
NULL
 || (
	`U_POINTER_MASK_LSB
(data, 3)!=0)) {

382 
sigÇtu»
=*(cÚ¡ 
ušt32_t
 *)
d©a
;

383 if(
sigÇtu»
==
UTRIE2_SIG
) {

386 if(
ªyEndŸnOk
 && 
sigÇtu»
==
UTRIE2_OE_SIG
) {

389 if(
sigÇtu»
==
UTRIE_SIG
) {

392 if(
ªyEndŸnOk
 && 
sigÇtu»
==
UTRIE_OE_SIG
) {

396 
	}
}

398 
U_CAPI
 
št32_t
 
U_EXPORT2


399 
	$uŒ›2_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

400 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

401 
UE¼ÜCode
 *
pE¼ÜCode
) {

402 cÚ¡ 
UTr›2H—d”
 *
šTr›
;

403 
UTr›2H—d”
 
Œ›
;

404 
št32_t
 
d©aL’gth
, 
size
;

405 
UTr›2V®ueB™s
 
v®ueB™s
;

407 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

410 if(
ds
==
NULL
 || 
šD©a
==NULL || (
Ëngth
>=0 && 
outD©a
==NULL)) {

411 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

416 if(
Ëngth
>=0 &&†’gth<(
št32_t
)(
UTr›2H—d”
)) {

417 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

421 
šTr›
=(cÚ¡ 
UTr›2H—d”
 *)
šD©a
;

422 
Œ›
.
sigÇtu»
=
ds
->
	`»adUIÁ32
(
šTr›
->signature);

423 
Œ›
.
İtiÚs
=
ds
->
	`»adUIÁ16
(
šTr›
->options);

424 
Œ›
.
šdexL’gth
=
ds
->
	`»adUIÁ16
(
šTr›
->indexLength);

425 
Œ›
.
shiáedD©aL’gth
=
ds
->
	`»adUIÁ16
(
šTr›
->shiftedDataLength);

427 
v®ueB™s
=(
UTr›2V®ueB™s
)(
Œ›
.
İtiÚs
&
UTRIE2_OPTIONS_VALUE_BITS_MASK
);

428 
d©aL’gth
=(
št32_t
)
Œ›
.
shiáedD©aL’gth
<<
UTRIE2_INDEX_SHIFT
;

430 ifĞ
Œ›
.
sigÇtu»
!=
UTRIE2_SIG
 ||

431 
v®ueB™s
<0 || 
UTRIE2_COUNT_VALUE_BITS
<=valueBits ||

432 
Œ›
.
šdexL’gth
<
UTRIE2_INDEX_1_OFFSET
 ||

433 
d©aL’gth
<
UTRIE2_DATA_START_OFFSET


435 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

439 
size
=(
UTr›2H—d”
)+
Œ›
.
šdexL’gth
*2;

440 
v®ueB™s
) {

441 
UTRIE2_16_VALUE_BITS
:

442 
size
+=
d©aL’gth
*2;

444 
UTRIE2_32_VALUE_BITS
:

445 
size
+=
d©aL’gth
*4;

448 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

452 if(
Ëngth
>=0) {

453 
UTr›2H—d”
 *
outTr›
;

455 if(
Ëngth
<
size
) {

456 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

460 
outTr›
=(
UTr›2H—d”
 *)
outD©a
;

463 
ds
->
	`sw­A¼ay32
(ds, &
šTr›
->
sigÇtu»
, 4, &
outTr›
->sigÇtu», 
pE¼ÜCode
);

464 
ds
->
	`sw­A¼ay16
(ds, &
šTr›
->
İtiÚs
, 12, &
outTr›
->İtiÚs, 
pE¼ÜCode
);

467 
v®ueB™s
) {

468 
UTRIE2_16_VALUE_BITS
:

469 
ds
->
	`sw­A¼ay16
(ds, 
šTr›
+1, (
Œ›
.
šdexL’gth
+
d©aL’gth
)*2, 
outTr›
+1, 
pE¼ÜCode
);

471 
UTRIE2_32_VALUE_BITS
:

472 
ds
->
	`sw­A¼ay16
(ds, 
šTr›
+1, 
Œ›
.
šdexL’gth
*2, 
outTr›
+1, 
pE¼ÜCode
);

473 
ds
->
	`sw­A¼ay32
(ds, (cÚ¡ 
ušt16_t
 *)(
šTr›
+1)+
Œ›
.
šdexL’gth
, 
d©aL’gth
*4,

474 (
ušt16_t
 *)(
outTr›
+1)+
Œ›
.
šdexL’gth
, 
pE¼ÜCode
);

477 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

482  
size
;

483 
	}
}

490 
	#MIN_VALUE
(
a
, 
b
è(×)<(bè? (aè: (b))

	)

493 
ušt32_t
 
U_CALLCONV


494 
	$’umSameV®ue
(cÚ¡ * , 
ušt32_t
 
v®ue
) {

495  
v®ue
;

496 
	}
}

512 
	$’umE™h”Tr›
(cÚ¡ 
UTr›2
 *
Œ›
,

513 
UCh¬32
 
¡¬t
, UCh¬32 
lim™
,

514 
UTr›2EnumV®ue
 *
’umV®ue
, 
UTr›2EnumRªge
 *
’umRªge
, cÚ¡ *
cÚ‹xt
) {

515 cÚ¡ 
ušt32_t
 *
d©a32
;

516 cÚ¡ 
ušt16_t
 *
idx
;

518 
ušt32_t
 
v®ue
, 
´evV®ue
, 
š™ŸlV®ue
;

519 
UCh¬32
 
c
, 
´ev
, 
highS¹
;

520 
št32_t
 
j
, 
i2Block
, 
´evI2Block
, 
šdex2NuÎOff£t
, 
block
, 
´evBlock
, 
nuÎBlock
;

522 if(
’umRªge
==
NULL
) {

525 if(
’umV®ue
==
NULL
) {

526 
’umV®ue
=
’umSameV®ue
;

529 if(
Œ›
->
ÃwTr›
==
NULL
) {

531 
idx
=
Œ›
->
šdex
;

532 
d©a32
=
Œ›
->data32;

534 
šdex2NuÎOff£t
=
Œ›
->index2NullOffset;

535 
nuÎBlock
=
Œ›
->
d©aNuÎOff£t
;

538 
idx
=
NULL
;

539 
d©a32
=
Œ›
->
ÃwTr›
->
d©a
;

541 
šdex2NuÎOff£t
=
Œ›
->
ÃwTr›
->index2NullOffset;

542 
nuÎBlock
=
Œ›
->
ÃwTr›
->
d©aNuÎOff£t
;

545 
highS¹
=
Œ›
->highStart;

548 
š™ŸlV®ue
=
	`’umV®ue
(
cÚ‹xt
, 
Œ›
->initialValue);

551 
´evI2Block
=-1;

552 
´evBlock
=-1;

553 
´ev
=
¡¬t
;

554 
´evV®ue
=0;

557 
c
=
¡¬t
; c<
lim™
 && c<
highS¹
;) {

559 
UCh¬32
 
‹mpLim™
=
c
+
UTRIE2_CP_PER_INDEX_1_ENTRY
;

560 if(
lim™
<
‹mpLim™
) {

561 
‹mpLim™
=
lim™
;

563 if(
c
<=0xffff) {

564 if(!
	`U_IS_SURROGATE
(
c
)) {

565 
i2Block
=
c
>>
UTRIE2_SHIFT_2
;

566 } if(
	`U_IS_SURROGATE_LEAD
(
c
)) {

571 
i2Block
=
UTRIE2_LSCP_INDEX_2_OFFSET
;

572 
‹mpLim™
=
	`MIN_VALUE
(0xdc00, 
lim™
);

578 
i2Block
=0xd800>>
UTRIE2_SHIFT_2
;

579 
‹mpLim™
=
	`MIN_VALUE
(0xe000, 
lim™
);

583 if(
idx
!=
NULL
) {

584 
i2Block
=
idx
[(
UTRIE2_INDEX_1_OFFSET
-
UTRIE2_OMITTED_BMP_INDEX_1_LENGTH
)+

585 (
c
>>
UTRIE2_SHIFT_1
)];

587 
i2Block
=
Œ›
->
ÃwTr›
->
šdex1
[
c
>>
UTRIE2_SHIFT_1
];

589 if(
i2Block
==
´evI2Block
 && (
c
-
´ev
)>=
UTRIE2_CP_PER_INDEX_1_ENTRY
) {

595 
c
+=
UTRIE2_CP_PER_INDEX_1_ENTRY
;

599 
´evI2Block
=
i2Block
;

600 if(
i2Block
==
šdex2NuÎOff£t
) {

602 if(
´evV®ue
!=
š™ŸlV®ue
) {

603 if(
´ev
<
c
 && !
	`’umRªge
(
cÚ‹xt
,…»v, c-1, 
´evV®ue
)) {

606 
´evBlock
=
nuÎBlock
;

607 
´ev
=
c
;

608 
´evV®ue
=
š™ŸlV®ue
;

610 
c
+=
UTRIE2_CP_PER_INDEX_1_ENTRY
;

613 
št32_t
 
i2
, 
i2Lim™
;

614 
i2
=(
c
>>
UTRIE2_SHIFT_2
)&
UTRIE2_INDEX_2_MASK
;

615 if((
c
>>
UTRIE2_SHIFT_1
)==(
‹mpLim™
>>UTRIE2_SHIFT_1)) {

616 
i2Lim™
=(
‹mpLim™
>>
UTRIE2_SHIFT_2
)&
UTRIE2_INDEX_2_MASK
;

618 
i2Lim™
=
UTRIE2_INDEX_2_BLOCK_LENGTH
;

620 ; 
i2
<
i2Lim™
; ++i2) {

621 if(
idx
!=
NULL
) {

622 
block
=(
št32_t
)
idx
[
i2Block
+
i2
]<<
UTRIE2_INDEX_SHIFT
;

624 
block
=
Œ›
->
ÃwTr›
->
šdex2
[
i2Block
+
i2
];

626 if(
block
==
´evBlock
 && (
c
-
´ev
)>=
UTRIE2_DATA_BLOCK_LENGTH
) {

628 
c
+=
UTRIE2_DATA_BLOCK_LENGTH
;

631 
´evBlock
=
block
;

632 if(
block
==
nuÎBlock
) {

634 if(
´evV®ue
!=
š™ŸlV®ue
) {

635 if(
´ev
<
c
 && !
	`’umRªge
(
cÚ‹xt
,…»v, c-1, 
´evV®ue
)) {

638 
´ev
=
c
;

639 
´evV®ue
=
š™ŸlV®ue
;

641 
c
+=
UTRIE2_DATA_BLOCK_LENGTH
;

643 
j
=0; j<
UTRIE2_DATA_BLOCK_LENGTH
; ++j) {

644 
v®ue
=
	`’umV®ue
(
cÚ‹xt
, 
d©a32
!=
NULL
 ? d©a32[
block
+
j
] : 
idx
[block+j]);

645 if(
v®ue
!=
´evV®ue
) {

646 if(
´ev
<
c
 && !
	`’umRªge
(
cÚ‹xt
,…»v, c-1, 
´evV®ue
)) {

649 
´ev
=
c
;

650 
´evV®ue
=
v®ue
;

652 ++
c
;

659 if(
c
>
lim™
) {

660 
c
=
lim™
;

661 } if(
c
<
lim™
) {

663 
ušt32_t
 
highV®ue
;

664 if(
idx
!=
NULL
) {

665 
highV®ue
=

666 
d©a32
!=
NULL
 ?

667 
d©a32
[
Œ›
->
highV®ueIndex
] :

668 
idx
[
Œ›
->
highV®ueIndex
];

670 
highV®ue
=
Œ›
->
ÃwTr›
->
d©a
[Œ›->ÃwTr›->
d©aL’gth
-
UTRIE2_DATA_GRANULARITY
];

672 
v®ue
=
	`’umV®ue
(
cÚ‹xt
, 
highV®ue
);

673 if(
v®ue
!=
´evV®ue
) {

674 if(
´ev
<
c
 && !
	`’umRªge
(
cÚ‹xt
,…»v, c-1, 
´evV®ue
)) {

677 
´ev
=
c
;

678 
´evV®ue
=
v®ue
;

680 
c
=
lim™
;

684 
	`’umRªge
(
cÚ‹xt
, 
´ev
, 
c
-1, 
´evV®ue
);

685 
	}
}

687 
U_CAPI
 
U_EXPORT2


688 
	$uŒ›2_’um
(cÚ¡ 
UTr›2
 *
Œ›
,

689 
UTr›2EnumV®ue
 *
’umV®ue
, 
UTr›2EnumRªge
 *
’umRªge
, cÚ¡ *
cÚ‹xt
) {

690 
	`’umE™h”Tr›
(
Œ›
, 0, 0x110000, 
’umV®ue
, 
’umRªge
, 
cÚ‹xt
);

691 
	}
}

693 
U_CAPI
 
U_EXPORT2


694 
	$uŒ›2_’umFÜL—dSu¼og©e
(cÚ¡ 
UTr›2
 *
Œ›
, 
UCh¬32
 
Ëad
,

695 
UTr›2EnumV®ue
 *
’umV®ue
, 
UTr›2EnumRªge
 *
’umRªge
,

696 cÚ¡ *
cÚ‹xt
) {

697 if(!
	`U16_IS_LEAD
(
Ëad
)) {

700 
Ëad
=(lead-0xd7c0)<<10;

701 
	`’umE™h”Tr›
(
Œ›
, 
Ëad
,†—d+0x400, 
’umV®ue
, 
’umRªge
, 
cÚ‹xt
);

702 
	}
}

706 
U_NAMESPACE_BEGIN


708 
ušt16_t
 
	gBackw¬dUTr›2SŒšgI‹¿tÜ
::
	$´evious16
() {

709 
codePoštLim™
=
codePoštS¹
;

710 if(
¡¬t
>=
codePoštS¹
) {

711 
codePošt
=
U_SENTINEL
;

714 
ušt16_t
 
»suÉ
;

715 
	`UTRIE2_U16_PREV16
(
Œ›
, 
¡¬t
, 
codePoštS¹
, 
codePošt
, 
»suÉ
);

716  
»suÉ
;

717 
	}
}

719 
ušt16_t
 
	gFÜw¬dUTr›2SŒšgI‹¿tÜ
::
	$Ãxt16
() {

720 
codePoštS¹
=
codePoštLim™
;

721 if(
codePoštLim™
==
lim™
) {

722 
codePošt
=
U_SENTINEL
;

725 
ušt16_t
 
»suÉ
;

726 
	`UTRIE2_U16_NEXT16
(
Œ›
, 
codePoštLim™
, 
lim™
, 
codePošt
, 
»suÉ
);

727  
»suÉ
;

728 
	}
}

730 
UTr›2
 *
	gUTr›2SšgËtÚ
::
	$g‘In¡ªû
(
In¡ªtŸtÜFn
 *
š¡ªtŸtÜ
, cÚ¡ *
cÚ‹xt
,

731 
UE¼ÜCode
 &
”rÜCode
) {

732 *
du¶iÿ‹
;

733 
UTr›2
 *
š¡ªû
=(UTr›2 *)
sšgËtÚ
.
	`g‘In¡ªû
(
š¡ªtŸtÜ
, 
cÚ‹xt
, 
du¶iÿ‹
, 
”rÜCode
);

734 
	`uŒ›2_şo£
((
UTr›2
 *)
du¶iÿ‹
);

735  
š¡ªû
;

736 
	}
}

738 
	gU_NAMESPACE_END


	@utrie2.h

17 #iâdeà
__UTRIE2_H__


18 
	#__UTRIE2_H__


	)

20 
	~"unicode/uty³s.h
"

21 
	~"ud©aswp.h
"

23 
U_CDECL_BEGIN


25 
	gUTr›
;

26 #iâdeà
__UTRIE_H__


27 
UTr›
 
	tUTr›
;

60 
	gUTr›2
;

61 
UTr›2
 
	tUTr›2
;

68 
	eUTr›2V®ueB™s
 {

70 
	mUTRIE2_16_VALUE_BITS
,

72 
	mUTRIE2_32_VALUE_BITS
,

74 
	mUTRIE2_COUNT_VALUE_BITS


76 
UTr›2V®ueB™s
 
	tUTr›2V®ueB™s
;

97 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


98 
uŒ›2_İ’FromS”Ÿlized
(
UTr›2V®ueB™s
 
v®ueB™s
,

99 cÚ¡ *
d©a
, 
št32_t
 
Ëngth
, iÁ32_ˆ*
pAùu®L’gth
,

100 
UE¼ÜCode
 *
pE¼ÜCode
);

123 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


124 
uŒ›2_İ’Dummy
(
UTr›2V®ueB™s
 
v®ueB™s
,

125 
ušt32_t
 
š™ŸlV®ue
, ušt32_ˆ
”rÜV®ue
,

126 
UE¼ÜCode
 *
pE¼ÜCode
);

138 
U_CAPI
 
ušt32_t
 
U_EXPORT2


139 
uŒ›2_g‘32
(cÚ¡ 
UTr›2
 *
Œ›
, 
UCh¬32
 
c
);

151 
ušt32_t
 
	tU_CALLCONV


152 
	tUTr›2EnumV®ue
(cÚ¡ *
	tcÚ‹xt
, 
	tušt32_t
 
	tv®ue
);

167 
UBoŞ
 
	tU_CALLCONV


168 
	tUTr›2EnumRªge
(cÚ¡ *
	tcÚ‹xt
, 
	tUCh¬32
 
	t¡¬t
, UCh¬32 
	t’d
, 
	tušt32_t
 
	tv®ue
);

188 
U_CAPI
 
U_EXPORT2


189 
uŒ›2_’um
(cÚ¡ 
UTr›2
 *
Œ›
,

190 
UTr›2EnumV®ue
 *
’umV®ue
, 
UTr›2EnumRªge
 *
’umRªge
, cÚ¡ *
cÚ‹xt
);

205 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


206 
uŒ›2_İ’
(
ušt32_t
 
š™ŸlV®ue
, ušt32_ˆ
”rÜV®ue
, 
UE¼ÜCode
 *
pE¼ÜCode
);

216 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


217 
uŒ›2_şÚe
(cÚ¡ 
UTr›2
 *
Ùh”
, 
UE¼ÜCode
 *
pE¼ÜCode
);

228 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


229 
uŒ›2_şÚeAsThawed
(cÚ¡ 
UTr›2
 *
Ùh”
, 
UE¼ÜCode
 *
pE¼ÜCode
);

236 
U_CAPI
 
U_EXPORT2


237 
uŒ›2_şo£
(
UTr›2
 *
Œ›
);

248 
U_CAPI
 
U_EXPORT2


249 
uŒ›2_£t32
(
UTr›2
 *
Œ›
, 
UCh¬32
 
c
, 
ušt32_t
 
v®ue
, 
UE¼ÜCode
 *
pE¼ÜCode
);

264 
U_CAPI
 
U_EXPORT2


265 
uŒ›2_£tRªge32
(
UTr›2
 *
Œ›
,

266 
UCh¬32
 
¡¬t
, UCh¬32 
’d
,

267 
ušt32_t
 
v®ue
, 
UBoŞ
 
ov”wr™e
,

268 
UE¼ÜCode
 *
pE¼ÜCode
);

289 
U_CAPI
 
U_EXPORT2


290 
uŒ›2_ä“ze
(
UTr›2
 *
Œ›
, 
UTr›2V®ueB™s
 
v®ueB™s
, 
UE¼ÜCode
 *
pE¼ÜCode
);

299 
U_CAPI
 
UBoŞ
 
U_EXPORT2


300 
uŒ›2_isFroz’
(cÚ¡ 
UTr›2
 *
Œ›
);

320 
U_CAPI
 
št32_t
 
U_EXPORT2


321 
uŒ›2_£rŸlize
(
UTr›2
 *
Œ›
,

322 *
d©a
, 
št32_t
 
ÿ·c™y
,

323 
UE¼ÜCode
 *
pE¼ÜCode
);

340 
U_CAPI
 
št32_t
 
U_EXPORT2


341 
uŒ›2_g‘V”siÚ
(cÚ¡ *
d©a
, 
št32_t
 
Ëngth
, 
UBoŞ
 
ªyEndŸnOk
);

347 
U_CAPI
 
št32_t
 
U_EXPORT2


348 
uŒ›2_sw­
(cÚ¡ 
UD©aSw­³r
 *
ds
,

349 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

350 
UE¼ÜCode
 *
pE¼ÜCode
);

356 
U_CAPI
 
št32_t
 
U_EXPORT2


357 
uŒ›2_sw­AnyV”siÚ
(cÚ¡ 
UD©aSw­³r
 *
ds
,

358 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

359 
UE¼ÜCode
 *
pE¼ÜCode
);

371 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


372 
uŒ›2_äomUTr›
(cÚ¡ 
UTr›
 *
Œ›1
, 
ušt32_t
 
”rÜV®ue
, 
UE¼ÜCode
 *
pE¼ÜCode
);

389 
	#UTRIE2_GET16
(
Œ›
, 
c
è
	`_UTRIE2_GET
(Ñr›), 
šdex
, (Œ›)->
šdexL’gth
, (c))

	)

399 
	#UTRIE2_GET32
(
Œ›
, 
c
è
	`_UTRIE2_GET
(Ñr›), 
d©a32
, 0, (c))

	)

411 
	#UTRIE2_U16_NEXT16
(
Œ›
, 
¤c
, 
lim™
, 
c
, 
»suÉ
è
	`_UTRIE2_U16_NEXT
Ñr›, 
šdex
, src,†im™, c,„esuÉ)

	)

423 
	#UTRIE2_U16_NEXT32
(
Œ›
, 
¤c
, 
lim™
, 
c
, 
»suÉ
è
	`_UTRIE2_U16_NEXT
Ñr›, 
d©a32
, src,†im™, c,„esuÉ)

	)

435 
	#UTRIE2_U16_PREV16
(
Œ›
, 
¡¬t
, 
¤c
, 
c
, 
»suÉ
è
	`_UTRIE2_U16_PREV
Ñr›, 
šdex
, s¹, src, c,„esuÉ)

	)

447 
	#UTRIE2_U16_PREV32
(
Œ›
, 
¡¬t
, 
¤c
, 
c
, 
»suÉ
è
	`_UTRIE2_U16_PREV
Ñr›, 
d©a32
, s¹, src, c,„esuÉ)

	)

457 
	#UTRIE2_U8_NEXT16
(
Œ›
, 
¤c
, 
lim™
, 
»suÉ
)\

458 
	`_UTRIE2_U8_NEXT
(
Œ›
, 
d©a16
, 
šdex
, 
¤c
, 
lim™
, 
»suÉ
)

	)

468 
	#UTRIE2_U8_NEXT32
(
Œ›
, 
¤c
, 
lim™
, 
»suÉ
) \

469 
	`_UTRIE2_U8_NEXT
(
Œ›
, 
d©a32
, d©a32, 
¤c
, 
lim™
, 
»suÉ
)

	)

479 
	#UTRIE2_U8_PREV16
(
Œ›
, 
¡¬t
, 
¤c
, 
»suÉ
) \

480 
	`_UTRIE2_U8_PREV
(
Œ›
, 
d©a16
, 
šdex
, 
¡¬t
, 
¤c
, 
»suÉ
)

	)

490 
	#UTRIE2_U8_PREV32
(
Œ›
, 
¡¬t
, 
¤c
, 
»suÉ
) \

491 
	`_UTRIE2_U8_PREV
(
Œ›
, 
d©a32
, d©a32, 
¡¬t
, 
¤c
, 
»suÉ
)

	)

530 
U_CAPI
 
ušt32_t
 
U_EXPORT2


531 
uŒ›2_g‘32FromL—dSu¼og©eCodeUn™
(cÚ¡ 
UTr›2
 *
Œ›
, 
UCh¬32
 
c
);

558 
U_CAPI
 
U_EXPORT2


559 
uŒ›2_’umFÜL—dSu¼og©e
(cÚ¡ 
UTr›2
 *
Œ›
, 
UCh¬32
 
Ëad
,

560 
UTr›2EnumV®ue
 *
’umV®ue
, 
UTr›2EnumRªge
 *
’umRªge
,

561 cÚ¡ *
cÚ‹xt
);

572 
U_CAPI
 
U_EXPORT2


573 
uŒ›2_£t32FÜL—dSu¼og©eCodeUn™
(
UTr›2
 *
Œ›
,

574 
UCh¬32
 
Ëad
, 
ušt32_t
 
v®ue
,

575 
UE¼ÜCode
 *
pE¼ÜCode
);

586 
	#UTRIE2_GET16_FROM_U16_SINGLE_LEAD
(
Œ›
, 
c
è
	`_UTRIE2_GET_FROM_U16_SINGLE_LEAD
(Ñr›), 
šdex
, c)

	)

597 
	#UTRIE2_GET32_FROM_U16_SINGLE_LEAD
(
Œ›
, 
c
è
	`_UTRIE2_GET_FROM_U16_SINGLE_LEAD
(Ñr›), 
d©a32
, c)

	)

606 
	#UTRIE2_GET16_FROM_SUPP
(
Œ›
, 
c
è
	`_UTRIE2_GET_FROM_SUPP
(Ñr›), 
šdex
, c)

	)

615 
	#UTRIE2_GET32_FROM_SUPP
(
Œ›
, 
c
è
	`_UTRIE2_GET_FROM_SUPP
(Ñr›), 
d©a32
, c)

	)

617 
	gU_CDECL_END


621 #ifdeà
XP_CPLUSPLUS


623 
	~"mu‹x.h
"

625 
U_NAMESPACE_BEGIN


628 şas 
	cUTr›2SŒšgI‹¿tÜ
 : 
public
 
UMemÜy
 {

629 
public
:

630 
	$UTr›2SŒšgI‹¿tÜ
(cÚ¡ 
UTr›2
 *
t
, cÚ¡ 
UCh¬
 *
p
) :

631 
	`Œ›
(
t
), 
	`codePoštS¹
(
p
), 
	`codePoštLim™
Õ), 
	$codePošt
(
U_SENTINEL
) {}

633 cÚ¡ 
UTr›2
 *
Œ›
;

634 cÚ¡ 
UCh¬
 *
codePoštS¹
, *
codePoštLim™
;

635 
UCh¬32
 
codePošt
;

636 
	}
};

638 şas 
	cBackw¬dUTr›2SŒšgI‹¿tÜ
 : 
public
 
UTr›2SŒšgI‹¿tÜ
 {

639 
public
:

640 
	$Backw¬dUTr›2SŒšgI‹¿tÜ
(cÚ¡ 
UTr›2
 *
t
, cÚ¡ 
UCh¬
 *
s
, cÚ¡ UCh¬ *
p
) :

641 
	`UTr›2SŒšgI‹¿tÜ
(
t
, 
p
), 
	$¡¬t
(
s
) {}

643 
ušt16_t
 
	`´evious16
();

645 cÚ¡ 
UCh¬
 *
¡¬t
;

646 
	}
};

648 şas 
	cFÜw¬dUTr›2SŒšgI‹¿tÜ
 : 
public
 
UTr›2SŒšgI‹¿tÜ
 {

649 
public
:

652 
	$FÜw¬dUTr›2SŒšgI‹¿tÜ
(cÚ¡ 
UTr›2
 *
t
, cÚ¡ 
UCh¬
 *
p
, cÚ¡ UCh¬ *
l
) :

653 
	`UTr›2SŒšgI‹¿tÜ
(
t
, 
p
), 
	$lim™
(
l
) {}

655 
ušt16_t
 
	`Ãxt16
();

657 cÚ¡ 
UCh¬
 *
lim™
;

658 
	}
};

660 şas 
	cUTr›2SšgËtÚ
 {

661 
	mpublic
:

662 
	$UTr›2SšgËtÚ
(
Sim¶eSšgËtÚ
 &
s
è: 
	$sšgËtÚ
(
s
) {}

663 
	$d–‘eIn¡ªû
() {

664 
	`uŒ›2_şo£
((
UTr›2
 *)
sšgËtÚ
.
fIn¡ªû
);

665 
sšgËtÚ
.
	`»£t
();

666 
	}
}

667 
UTr›2
 *
g‘In¡ªû
(
In¡ªtŸtÜFn
 *
š¡ªtŸtÜ
, cÚ¡ *
cÚ‹xt
,

668 
UE¼ÜCode
 &
”rÜCode
);

669 
	g´iv©e
:

670 
Sim¶eSšgËtÚ
 &
sšgËtÚ
;

673 
	gU_NAMESPACE_END


679 
U_CDECL_BEGIN


682 
	gUNewTr›2
;

683 
UNewTr›2
 
	tUNewTr›2
;

694 
	sUTr›2
 {

696 cÚ¡ 
ušt16_t
 *
	mšdex
;

697 cÚ¡ 
ušt16_t
 *
	md©a16
;

698 cÚ¡ 
ušt32_t
 *
	md©a32
;

700 
št32_t
 
	mšdexL’gth
, 
	md©aL’gth
;

701 
ušt16_t
 
	mšdex2NuÎOff£t
;

702 
ušt16_t
 
	md©aNuÎOff£t
;

703 
ušt32_t
 
	mš™ŸlV®ue
;

705 
ušt32_t
 
	m”rÜV®ue
;

708 
UCh¬32
 
	mhighS¹
;

709 
št32_t
 
	mhighV®ueIndex
;

712 *
	mmemÜy
;

713 
št32_t
 
	mËngth
;

714 
UBoŞ
 
	misMemÜyOwÃd
;

715 
UBoŞ
 
	m·ddšg1
;

716 
št16_t
 
	m·ddšg2
;

717 
UNewTr›2
 *
	mÃwTr›
;

728 
	mUTRIE2_SHIFT_1
=6+5,

731 
	mUTRIE2_SHIFT_2
=5,

737 
	mUTRIE2_SHIFT_1_2
=
UTRIE2_SHIFT_1
-
UTRIE2_SHIFT_2
,

743 
	mUTRIE2_OMITTED_BMP_INDEX_1_LENGTH
=0x10000>>
UTRIE2_SHIFT_1
,

746 
	mUTRIE2_CP_PER_INDEX_1_ENTRY
=1<<
UTRIE2_SHIFT_1
,

749 
	mUTRIE2_INDEX_2_BLOCK_LENGTH
=1<<
UTRIE2_SHIFT_1_2
,

752 
	mUTRIE2_INDEX_2_MASK
=
UTRIE2_INDEX_2_BLOCK_LENGTH
-1,

755 
	mUTRIE2_DATA_BLOCK_LENGTH
=1<<
UTRIE2_SHIFT_2
,

758 
	mUTRIE2_DATA_MASK
=
UTRIE2_DATA_BLOCK_LENGTH
-1,

766 
	mUTRIE2_INDEX_SHIFT
=2,

769 
	mUTRIE2_DATA_GRANULARITY
=1<<
UTRIE2_INDEX_SHIFT
,

777 
	mUTRIE2_INDEX_2_OFFSET
=0,

785 
	mUTRIE2_LSCP_INDEX_2_OFFSET
=0x10000>>
UTRIE2_SHIFT_2
,

786 
	mUTRIE2_LSCP_INDEX_2_LENGTH
=0x400>>
UTRIE2_SHIFT_2
,

789 
	mUTRIE2_INDEX_2_BMP_LENGTH
=
UTRIE2_LSCP_INDEX_2_OFFSET
+
UTRIE2_LSCP_INDEX_2_LENGTH
,

795 
	mUTRIE2_UTF8_2B_INDEX_2_OFFSET
=
UTRIE2_INDEX_2_BMP_LENGTH
,

796 
	mUTRIE2_UTF8_2B_INDEX_2_LENGTH
=0x800>>6,

810 
	mUTRIE2_INDEX_1_OFFSET
=
UTRIE2_UTF8_2B_INDEX_2_OFFSET
+
UTRIE2_UTF8_2B_INDEX_2_LENGTH
,

811 
	mUTRIE2_MAX_INDEX_1_LENGTH
=0x100000>>
UTRIE2_SHIFT_1
,

823 
	mUTRIE2_BAD_UTF8_DATA_OFFSET
=0x80,

826 
	mUTRIE2_DATA_START_OFFSET
=0xc0

836 
U_INTERNAL
 
št32_t
 
U_EXPORT2


837 
uŒ›2_š‹º®U8NextIndex
(cÚ¡ 
UTr›2
 *
Œ›
, 
UCh¬32
 
c
,

838 cÚ¡ 
ušt8_t
 *
¤c
, cÚ¡ ušt8_ˆ*
lim™
);

845 
U_INTERNAL
 
št32_t
 
U_EXPORT2


846 
uŒ›2_š‹º®U8P»vIndex
(cÚ¡ 
UTr›2
 *
Œ›
, 
UCh¬32
 
c
,

847 cÚ¡ 
ušt8_t
 *
¡¬t
, cÚ¡ ušt8_ˆ*
¤c
);

851 
	#_UTRIE2_INDEX_RAW
(
off£t
, 
Œ›Index
, 
c
) \

852 (((
št32_t
)((
Œ›Index
)[(
off£t
)+((
c
)>>
UTRIE2_SHIFT_2
)]) \

853 <<
UTRIE2_INDEX_SHIFT
)+ \

854 ((
c
)&
UTRIE2_DATA_MASK
))

	)

857 
	#_UTRIE2_INDEX_FROM_U16_SINGLE_LEAD
(
Œ›Index
, 
c
è
	`_UTRIE2_INDEX_RAW
(0,r›Index, c)

	)

860 
	#_UTRIE2_INDEX_FROM_LSCP
(
Œ›Index
, 
c
) \

861 
	`_UTRIE2_INDEX_RAW
(
UTRIE2_LSCP_INDEX_2_OFFSET
-(0xd800>>
UTRIE2_SHIFT_2
), 
Œ›Index
, 
c
)

	)

864 
	#_UTRIE2_INDEX_FROM_BMP
(
Œ›Index
, 
c
) \

865 
	`_UTRIE2_INDEX_RAW
(
	`U_IS_LEAD
(
c
è? 
UTRIE2_LSCP_INDEX_2_OFFSET
-(0xd800>>
UTRIE2_SHIFT_2
) : 0, \

866 
Œ›Index
, 
c
)

	)

869 
	#_UTRIE2_INDEX_FROM_SUPP
(
Œ›Index
, 
c
) \

870 (((
št32_t
)((
Œ›Index
)[ \

871 (
Œ›Index
)[(
UTRIE2_INDEX_1_OFFSET
-
UTRIE2_OMITTED_BMP_INDEX_1_LENGTH
)+ \

872 ((
c
)>>
UTRIE2_SHIFT_1
)]+ \

873 (((
c
)>>
UTRIE2_SHIFT_2
)&
UTRIE2_INDEX_2_MASK
)]) \

874 <<
UTRIE2_INDEX_SHIFT
)+ \

875 ((
c
)&
UTRIE2_DATA_MASK
))

	)

881 
	#_UTRIE2_INDEX_FROM_CP
(
Œ›
, 
asciiOff£t
, 
c
) \

882 ((
ušt32_t
)(
c
)<0xd800 ? \

883 
	`_UTRIE2_INDEX_RAW
(0, (
Œ›
)->
šdex
, 
c
) : \

884 (
ušt32_t
)(
c
)<=0xffff ? \

885 
	`_UTRIE2_INDEX_RAW
( \

886 (
c
)<=0xdbfà? 
UTRIE2_LSCP_INDEX_2_OFFSET
-(0xd800>>
UTRIE2_SHIFT_2
) : 0, \

887 (
Œ›
)->
šdex
, 
c
) : \

888 (
ušt32_t
)(
c
)>0x10ffff ? \

889 (
asciiOff£t
)+
UTRIE2_BAD_UTF8_DATA_OFFSET
 : \

890 (
c
)>=(
Œ›
)->
highS¹
 ? \

891 (
Œ›
)->
highV®ueIndex
 : \

892 
	`_UTRIE2_INDEX_FROM_SUPP
((
Œ›
)->
šdex
, 
c
))

	)

895 
	#_UTRIE2_GET_FROM_U16_SINGLE_LEAD
(
Œ›
, 
d©a
, 
c
) \

896 (
Œ›
)->
d©a
[
	`_UTRIE2_INDEX_FROM_U16_SINGLE_LEAD
(Ñr›)->
šdex
, 
c
)]

	)

899 
	#_UTRIE2_GET_FROM_SUPP
(
Œ›
, 
d©a
, 
c
) \

900 (
Œ›
)->
d©a
[(
c
)>=Ñr›)->
highS¹
 ? (Œ›)->
highV®ueIndex
 : \

901 
	`_UTRIE2_INDEX_FROM_SUPP
((
Œ›
)->
šdex
, 
c
)]

	)

907 
	#_UTRIE2_GET
(
Œ›
, 
d©a
, 
asciiOff£t
, 
c
) \

908 (
Œ›
)->
d©a
[
	`_UTRIE2_INDEX_FROM_CP
Ñr›, 
asciiOff£t
, 
c
)]

	)

911 
	#_UTRIE2_U16_NEXT
(
Œ›
, 
d©a
, 
¤c
, 
lim™
, 
c
, 
»suÉ
) { \

913 
ušt16_t
 
__c2
; \

914 (
c
)=*(
¤c
)++; \

915 if(!
	`U16_IS_LEAD
(
c
)) { \

916 (
»suÉ
)=
	`_UTRIE2_GET_FROM_U16_SINGLE_LEAD
(
Œ›
, 
d©a
, 
c
); \

917 } if((
¤c
)==(
lim™
è|| !
	`U16_IS_TRAIL
(
__c2
=*(src))) { \

918 (
»suÉ
)=(
Œ›
)->
d©a
[
	`_UTRIE2_INDEX_FROM_LSCP
(Ñr›)->
šdex
, 
c
)]; \

920 ++(
¤c
); \

921 (
c
)=
	`U16_GET_SUPPLEMENTARY
((c), 
__c2
); \

922 (
»suÉ
)=
	`_UTRIE2_GET_FROM_SUPP
((
Œ›
), 
d©a
, (
c
)); \

925 }

	)

928 
	#_UTRIE2_U16_PREV
(
Œ›
, 
d©a
, 
¡¬t
, 
¤c
, 
c
, 
»suÉ
) { \

930 
ušt16_t
 
__c2
; \

931 (
c
)=*--(
¤c
); \

932 if(!
	`U16_IS_TRAIL
(
c
è|| (
¤c
)==(
¡¬t
è|| !
	`U16_IS_LEAD
(
__c2
=*((src)-1))) { \

933 (
»suÉ
)=(
Œ›
)->
d©a
[
	`_UTRIE2_INDEX_FROM_BMP
(Ñr›)->
šdex
, 
c
)]; \

935 --(
¤c
); \

936 (
c
)=
	`U16_GET_SUPPLEMENTARY
(
__c2
, (c)); \

937 (
»suÉ
)=
	`_UTRIE2_GET_FROM_SUPP
((
Œ›
), 
d©a
, (
c
)); \

940 }

	)

943 
	#_UTRIE2_U8_NEXT
(
Œ›
, 
ascii
, 
d©a
, 
¤c
, 
lim™
, 
»suÉ
) { \

944 
ušt8_t
 
__Ëad
=(ušt8_t)*(
¤c
)++; \

945 if(
__Ëad
<0xc0) { \

946 (
»suÉ
)=(
Œ›
)->
ascii
[
__Ëad
]; \

948 
ušt8_t
 
__t1
, 
__t2
; \

950 
__Ëad
<0xe0 && (
¤c
)<(
lim™
) && \

951 (
__t1
=(
ušt8_t
)(*(
¤c
)-0x80))<=0x3f \

953 ++(
¤c
); \

954 (
»suÉ
)=(
Œ›
)->
d©a
[ \

955 (
Œ›
)->
šdex
[(
UTRIE2_UTF8_2B_INDEX_2_OFFSET
-0xc0)+
__Ëad
]+ \

956 
__t1
]; \

958 
__Ëad
<0xed && ((
¤c
)+1)<(
lim™
) && \

959 (
__t1
=(
ušt8_t
)(*(
¤c
)-0x80))<=0x3à&& (
__Ëad
>0xe0 || __t1>=0x20) && \

960 (
__t2
=(
ušt8_t
)(*((
¤c
)+1)-0x80))<= 0x3f \

962 (
¤c
)+=2; \

963 (
»suÉ
)=(
Œ›
)->
d©a
[ \

964 ((
št32_t
)((
Œ›
)->
šdex
[((
__Ëad
-0xe0)<<(12-
UTRIE2_SHIFT_2
))+ \

965 (
__t1
<<(6-
UTRIE2_SHIFT_2
))+(
__t2
>>UTRIE2_SHIFT_2)]) \

966 <<
UTRIE2_INDEX_SHIFT
)+ \

967 (
__t2
&
UTRIE2_DATA_MASK
)]; \

969 
št32_t
 
__šdex
=
	`uŒ›2_š‹º®U8NextIndex
((
Œ›
), 
__Ëad
, (cÚ¡ 
ušt8_t
 *)(
¤c
), \

970 (cÚ¡ 
ušt8_t
 *)(
lim™
)); \

971 (
¤c
)+=
__šdex
&7; \

972 (
»suÉ
)=(
Œ›
)->
d©a
[
__šdex
>>3]; \

975 }

	)

978 
	#_UTRIE2_U8_PREV
(
Œ›
, 
ascii
, 
d©a
, 
¡¬t
, 
¤c
, 
»suÉ
) { \

979 
ušt8_t
 
__b
=(ušt8_t)*--(
¤c
); \

980 if(
__b
<0x80) { \

981 (
»suÉ
)=(
Œ›
)->
ascii
[
__b
]; \

983 
št32_t
 
__šdex
=
	`uŒ›2_š‹º®U8P»vIndex
((
Œ›
), 
__b
, (cÚ¡ 
ušt8_t
 *)(
¡¬t
), \

984 (cÚ¡ 
ušt8_t
 *)(
¤c
)); \

985 (
¤c
)-=
__šdex
&7; \

986 (
»suÉ
)=(
Œ›
)->
d©a
[
__šdex
>>3]; \

988 }

	)

990 
	gU_CDECL_END


995 #ià
defšed
 (
U_HAVE_MSVC_2003_OR_EARLIER
)

996 #´agm¨
İtimize
("", 
off
)

	@utrie2_builder.c

25 #ifdeà
UTRIE2_DEBUG


26 
	~<¡dio.h
>

29 
	~"unicode/uty³s.h
"

30 
	~"cmemÜy.h
"

31 
	~"uŒ›2.h
"

32 
	~"uŒ›2_im¶.h
"

34 
	~"uŒ›.h
"

36 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

75 
	mUNEWTRIE2_INDEX_2_NULL_OFFSET
=
UNEWTRIE2_INDEX_GAP_OFFSET
+
UNEWTRIE2_INDEX_GAP_LENGTH
,

78 
	mUNEWTRIE2_INDEX_2_START_OFFSET
=
UNEWTRIE2_INDEX_2_NULL_OFFSET
+
UTRIE2_INDEX_2_BLOCK_LENGTH
,

85 
	mUNEWTRIE2_DATA_NULL_OFFSET
=
UTRIE2_DATA_START_OFFSET
,

88 
	mUNEWTRIE2_DATA_START_OFFSET
=
UNEWTRIE2_DATA_NULL_OFFSET
+0x40,

96 
	mUNEWTRIE2_DATA_0800_OFFSET
=
UNEWTRIE2_DATA_START_OFFSET
+0x780

100 
	#UNEWTRIE2_INITIAL_DATA_LENGTH
 ((
št32_t
)1<<14)

	)

103 
	#UNEWTRIE2_MEDIUM_DATA_LENGTH
 ((
št32_t
)1<<17)

	)

105 
št32_t


106 
®locIndex2Block
(
UNewTr›2
 *
Œ›
);

108 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


109 
	$uŒ›2_İ’
(
ušt32_t
 
š™ŸlV®ue
, ušt32_ˆ
”rÜV®ue
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

110 
UTr›2
 *
Œ›
;

111 
UNewTr›2
 *
ÃwTr›
;

112 
ušt32_t
 *
d©a
;

113 
št32_t
 
i
, 
j
;

115 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

116  
NULL
;

119 
Œ›
=(
UTr›2
 *)
	`u´v_m®loc
((UTrie2));

120 
ÃwTr›
=(
UNewTr›2
 *)
	`u´v_m®loc
((UNewTrie2));

121 
d©a
=(
ušt32_t
 *)
	`u´v_m®loc
(
UNEWTRIE2_INITIAL_DATA_LENGTH
*4);

122 if(
Œ›
==
NULL
 || 
ÃwTr›
==NULL || 
d©a
==NULL) {

123 
	`u´v_ä“
(
Œ›
);

124 
	`u´v_ä“
(
ÃwTr›
);

125 
	`u´v_ä“
(
d©a
);

126 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

130 
	`u´v_mem£t
(
Œ›
, 0, (
UTr›2
));

131 
Œ›
->
š™ŸlV®ue
=initialValue;

132 
Œ›
->
”rÜV®ue
=errorValue;

133 
Œ›
->
highS¹
=0x110000;

134 
Œ›
->
ÃwTr›
=newTrie;

136 
ÃwTr›
->
d©a
=data;

137 
ÃwTr›
->
d©aC­ac™y
=
UNEWTRIE2_INITIAL_DATA_LENGTH
;

138 
ÃwTr›
->
š™ŸlV®ue
=initialValue;

139 
ÃwTr›
->
”rÜV®ue
=errorValue;

140 
ÃwTr›
->
highS¹
=0x110000;

141 
ÃwTr›
->
fœ¡F»eBlock
=0;

142 
ÃwTr›
->
isCom·ùed
=
FALSE
;

150 
i
=0; i<0x80; ++i) {

151 
ÃwTr›
->
d©a
[
i
]=
š™ŸlV®ue
;

153 ; 
i
<0xc0; ++i) {

154 
ÃwTr›
->
d©a
[
i
]=
”rÜV®ue
;

156 
i
=
UNEWTRIE2_DATA_NULL_OFFSET
; i<
UNEWTRIE2_DATA_START_OFFSET
; ++i) {

157 
ÃwTr›
->
d©a
[
i
]=
š™ŸlV®ue
;

159 
ÃwTr›
->
d©aNuÎOff£t
=
UNEWTRIE2_DATA_NULL_OFFSET
;

160 
ÃwTr›
->
d©aL’gth
=
UNEWTRIE2_DATA_START_OFFSET
;

163 
i
=0, 
j
=0; j<0x80; ++i, j+=
UTRIE2_DATA_BLOCK_LENGTH
) {

164 
ÃwTr›
->
šdex2
[
i
]=
j
;

165 
ÃwTr›
->
m­
[
i
]=1;

168 ; 
j
<0xc0; ++
i
, j+=
UTRIE2_DATA_BLOCK_LENGTH
) {

169 
ÃwTr›
->
m­
[
i
]=0;

177 
ÃwTr›
->
m­
[
i
++]=

178 (0x110000>>
UTRIE2_SHIFT_2
)-

179 (0x80>>
UTRIE2_SHIFT_2
)+

181 
UTRIE2_LSCP_INDEX_2_LENGTH
;

182 
j
+=
UTRIE2_DATA_BLOCK_LENGTH
;

183 ; 
j
<
UNEWTRIE2_DATA_START_OFFSET
; ++
i
, j+=
UTRIE2_DATA_BLOCK_LENGTH
) {

184 
ÃwTr›
->
m­
[
i
]=0;

191 
i
=0x80>>
UTRIE2_SHIFT_2
; i<
UTRIE2_INDEX_2_BMP_LENGTH
; ++i) {

192 
ÃwTr›
->
šdex2
[
i
]=
UNEWTRIE2_DATA_NULL_OFFSET
;

199 
i
=0; i<
UNEWTRIE2_INDEX_GAP_LENGTH
; ++i) {

200 
ÃwTr›
->
šdex2
[
UNEWTRIE2_INDEX_GAP_OFFSET
+
i
]=-1;

204 
i
=0; i<
UTRIE2_INDEX_2_BLOCK_LENGTH
; ++i) {

205 
ÃwTr›
->
šdex2
[
UNEWTRIE2_INDEX_2_NULL_OFFSET
+
i
]=
UNEWTRIE2_DATA_NULL_OFFSET
;

207 
ÃwTr›
->
šdex2NuÎOff£t
=
UNEWTRIE2_INDEX_2_NULL_OFFSET
;

208 
ÃwTr›
->
šdex2L’gth
=
UNEWTRIE2_INDEX_2_START_OFFSET
;

211 
i
=0, 
j
=0;

212 
i
<
UTRIE2_OMITTED_BMP_INDEX_1_LENGTH
;

213 ++
i
, 
j
+=
UTRIE2_INDEX_2_BLOCK_LENGTH


215 
ÃwTr›
->
šdex1
[
i
]=
j
;

219 ; 
i
<
UNEWTRIE2_INDEX_1_LENGTH
; ++i) {

220 
ÃwTr›
->
šdex1
[
i
]=
UNEWTRIE2_INDEX_2_NULL_OFFSET
;

228 
i
=0x80; i<0x800; i+=
UTRIE2_DATA_BLOCK_LENGTH
) {

229 
	`uŒ›2_£t32
(
Œ›
, 
i
, 
š™ŸlV®ue
, 
pE¼ÜCode
);

232  
Œ›
;

233 
	}
}

235 
UNewTr›2
 *

236 
	$şÚeBud”
(cÚ¡ 
UNewTr›2
 *
Ùh”
) {

237 
UNewTr›2
 *
Œ›
;

239 
Œ›
=(
UNewTr›2
 *)
	`u´v_m®loc
((UNewTrie2));

240 if(
Œ›
==
NULL
) {

241  
NULL
;

244 
Œ›
->
d©a
=(
ušt32_t
 *)
	`u´v_m®loc
(
Ùh”
->
d©aC­ac™y
*4);

245 if(
Œ›
->
d©a
==
NULL
) {

246 
	`u´v_ä“
(
Œ›
);

247  
NULL
;

249 
Œ›
->
d©aC­ac™y
=
Ùh”
->dataCapacity;

252 
	`u´v_memıy
(
Œ›
->
šdex1
, 
Ùh”
->index1, (trie->index1));

253 
	`u´v_memıy
(
Œ›
->
šdex2
, 
Ùh”
->šdex2, oth”->
šdex2L’gth
*4);

254 
Œ›
->
šdex2NuÎOff£t
=
Ùh”
->index2NullOffset;

255 
Œ›
->
šdex2L’gth
=
Ùh”
->index2Length;

257 
	`u´v_memıy
(
Œ›
->
d©a
, 
Ùh”
->d©a, oth”->
d©aL’gth
*4);

258 
Œ›
->
d©aNuÎOff£t
=
Ùh”
->dataNullOffset;

259 
Œ›
->
d©aL’gth
=
Ùh”
->dataLength;

262 if(
Ùh”
->
isCom·ùed
) {

263 
Œ›
->
fœ¡F»eBlock
=0;

265 
	`u´v_memıy
(
Œ›
->
m­
, 
Ùh”
->m­, (Ùh”->
d©aL’gth
>>
UTRIE2_SHIFT_2
)*4);

266 
Œ›
->
fœ¡F»eBlock
=
Ùh”
->firstFreeBlock;

269 
Œ›
->
š™ŸlV®ue
=
Ùh”
->initialValue;

270 
Œ›
->
”rÜV®ue
=
Ùh”
->errorValue;

271 
Œ›
->
highS¹
=
Ùh”
->highStart;

272 
Œ›
->
isCom·ùed
=
Ùh”
->isCompacted;

274  
Œ›
;

275 
	}
}

277 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


278 
	$uŒ›2_şÚe
(cÚ¡ 
UTr›2
 *
Ùh”
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

279 
UTr›2
 *
Œ›
;

281 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

282  
NULL
;

284 if(
Ùh”
==
NULL
 || (Ùh”->
memÜy
==NULL && oth”->
ÃwTr›
==NULL)) {

285 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

286  
NULL
;

289 
Œ›
=(
UTr›2
 *)
	`u´v_m®loc
((UTrie2));

290 if(
Œ›
==
NULL
) {

291  
NULL
;

293 
	`u´v_memıy
(
Œ›
, 
Ùh”
, (
UTr›2
));

295 if(
Ùh”
->
memÜy
!=
NULL
) {

296 
Œ›
->
memÜy
=
	`u´v_m®loc
(
Ùh”
->
Ëngth
);

297 if(
Œ›
->
memÜy
!=
NULL
) {

298 
Œ›
->
isMemÜyOwÃd
=
TRUE
;

299 
	`u´v_memıy
(
Œ›
->
memÜy
, 
Ùh”
->memÜy, oth”->
Ëngth
);

302 
Œ›
->
šdex
=(
ušt16_t
 *ér›->
memÜy
+(
Ùh”
->index-(uint16_t *)other->memory);

303 if(
Ùh”
->
d©a16
!=
NULL
) {

304 
Œ›
->
d©a16
=(
ušt16_t
 *ér›->
memÜy
+(
Ùh”
->data16-(uint16_t *)other->memory);

306 if(
Ùh”
->
d©a32
!=
NULL
) {

307 
Œ›
->
d©a32
=(
ušt32_t
 *ér›->
memÜy
+(
Ùh”
->data32-(uint32_t *)other->memory);

311 
Œ›
->
ÃwTr›
=
	`şÚeBud”
(
Ùh”
->newTrie);

314 if(
Œ›
->
memÜy
==
NULL
 &&r›->
ÃwTr›
==NULL) {

315 
	`u´v_ä“
(
Œ›
);

316 
Œ›
=
NULL
;

318  
Œ›
;

319 
	}
}

321 
	sNewTr›AndStus
 {

322 
UTr›2
 *
	mŒ›
;

323 
UE¼ÜCode
 
	m”rÜCode
;

324 
UBoŞ
 
	mexşusiveLim™
;

325 } 
	tNewTr›AndStus
;

327 
UBoŞ
 
U_CALLCONV


328 
	$cİyEnumRªge
(cÚ¡ *
cÚ‹xt
, 
UCh¬32
 
¡¬t
, UCh¬32 
’d
, 
ušt32_t
 
v®ue
) {

329 
NewTr›AndStus
 *
Á
=(NewTr›AndStu *)
cÚ‹xt
;

330 if(
v®ue
!=
Á
->
Œ›
->
š™ŸlV®ue
) {

331 if(
Á
->
exşusiveLim™
) {

332 --
’d
;

334 if(
¡¬t
==
’d
) {

335 
	`uŒ›2_£t32
(
Á
->
Œ›
, 
¡¬t
, 
v®ue
, &Á->
”rÜCode
);

337 
	`uŒ›2_£tRªge32
(
Á
->
Œ›
, 
¡¬t
, 
’d
, 
v®ue
, 
TRUE
, &Á->
”rÜCode
);

339  
	`U_SUCCESS
(
Á
->
”rÜCode
);

341  
TRUE
;

343 
	}
}

345 #ifdeà
UTRIE2_DEBUG


347 
	$uŒ›_´štL’gths
(cÚ¡ 
UTr›
 *
Œ›
) {

348 
šdexL’gth
=
Œ›
->indexLength;

349 
d©aL’gth
=()
Œ›
->dataLength;

350 
tÙ®L’gth
=()(
UTr›H—d”
)+
šdexL’gth
*2+
d©aL’gth
*(
Œ›
->
d©a32
!=
NULL
 ? 4 : 2);

351 
	`´štf
("**UTrieLengths** index:%6ld data:%6ld serialized:%6ld\n",

352 
šdexL’gth
, 
d©aL’gth
, 
tÙ®L’gth
);

353 
	}
}

356 
	$uŒ›2_´štL’gths
(cÚ¡ 
UTr›2
 *
Œ›
, cÚ¡ *
which
) {

357 
šdexL’gth
=
Œ›
->indexLength;

358 
d©aL’gth
=()
Œ›
->dataLength;

359 
tÙ®L’gth
=()(
UTr›2H—d”
)+
šdexL’gth
*2+
d©aL’gth
*(
Œ›
->
d©a32
!=
NULL
 ? 4 : 2);

360 
	`´štf
("**UTrie2Lengths(%s)** index:%6ld data:%6ld serialized:%6ld\n",

361 
which
, 
šdexL’gth
, 
d©aL’gth
, 
tÙ®L’gth
);

362 
	}
}

365 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


366 
	$uŒ›2_şÚeAsThawed
(cÚ¡ 
UTr›2
 *
Ùh”
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

367 
NewTr›AndStus
 
cÚ‹xt
;

368 
UCh¬
 
Ëad
;

370 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

371  
NULL
;

373 if(
Ùh”
==
NULL
 || (Ùh”->
memÜy
==NULL && oth”->
ÃwTr›
==NULL)) {

374 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

375  
NULL
;

377 if(
Ùh”
->
ÃwTr›
!=
NULL
 && !Ùh”->ÃwTr›->
isCom·ùed
) {

378  
	`uŒ›2_şÚe
(
Ùh”
, 
pE¼ÜCode
);

382 
cÚ‹xt
.
Œ›
=
	`uŒ›2_İ’
(
Ùh”
->
š™ŸlV®ue
, oth”->
”rÜV®ue
, 
pE¼ÜCode
);

383 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

384  
NULL
;

386 
cÚ‹xt
.
exşusiveLim™
=
FALSE
;

387 
cÚ‹xt
.
”rÜCode
=*
pE¼ÜCode
;

388 
	`uŒ›2_’um
(
Ùh”
, 
NULL
, 
cİyEnumRªge
, &
cÚ‹xt
);

389 *
pE¼ÜCode
=
cÚ‹xt
.
”rÜCode
;

390 
Ëad
=0xd800;†ead<0xdc00; ++lead) {

391 
ušt32_t
 
v®ue
;

392 if(
Ùh”
->
d©a32
==
NULL
) {

393 
v®ue
=
	`UTRIE2_GET16_FROM_U16_SINGLE_LEAD
(
Ùh”
, 
Ëad
);

395 
v®ue
=
	`UTRIE2_GET32_FROM_U16_SINGLE_LEAD
(
Ùh”
, 
Ëad
);

397 if(
v®ue
!=
Ùh”
->
š™ŸlV®ue
) {

398 
	`uŒ›2_£t32FÜL—dSu¼og©eCodeUn™
(
cÚ‹xt
.
Œ›
, 
Ëad
, 
v®ue
, 
pE¼ÜCode
);

401 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

402 
	`uŒ›2_şo£
(
cÚ‹xt
.
Œ›
);

403 
cÚ‹xt
.
Œ›
=
NULL
;

405  
cÚ‹xt
.
Œ›
;

406 
	}
}

409 
U_CAPI
 
UTr›2
 * 
U_EXPORT2


410 
	$uŒ›2_äomUTr›
(cÚ¡ 
UTr›
 *
Œ›1
, 
ušt32_t
 
”rÜV®ue
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

411 
NewTr›AndStus
 
cÚ‹xt
;

412 
UCh¬
 
Ëad
;

414 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

415  
NULL
;

417 if(
Œ›1
==
NULL
) {

418 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

419  
NULL
;

421 
cÚ‹xt
.
Œ›
=
	`uŒ›2_İ’
(
Œ›1
->
š™ŸlV®ue
, 
”rÜV®ue
, 
pE¼ÜCode
);

422 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

423  
NULL
;

425 
cÚ‹xt
.
exşusiveLim™
=
TRUE
;

426 
cÚ‹xt
.
”rÜCode
=*
pE¼ÜCode
;

427 
	`uŒ›_’um
(
Œ›1
, 
NULL
, 
cİyEnumRªge
, &
cÚ‹xt
);

428 *
pE¼ÜCode
=
cÚ‹xt
.
”rÜCode
;

429 
Ëad
=0xd800;†ead<0xdc00; ++lead) {

430 
ušt32_t
 
v®ue
;

431 if(
Œ›1
->
d©a32
==
NULL
) {

432 
v®ue
=
	`UTRIE_GET16_FROM_LEAD
(
Œ›1
, 
Ëad
);

434 
v®ue
=
	`UTRIE_GET32_FROM_LEAD
(
Œ›1
, 
Ëad
);

436 if(
v®ue
!=
Œ›1
->
š™ŸlV®ue
) {

437 
	`uŒ›2_£t32FÜL—dSu¼og©eCodeUn™
(
cÚ‹xt
.
Œ›
, 
Ëad
, 
v®ue
, 
pE¼ÜCode
);

440 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

441 
	`uŒ›2_ä“ze
(
cÚ‹xt
.
Œ›
,

442 
Œ›1
->
d©a32
!=
NULL
 ? 
UTRIE2_32_VALUE_BITS
 : 
UTRIE2_16_VALUE_BITS
,

443 
pE¼ÜCode
);

445 #ifdeà
UTRIE2_DEBUG


446 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

447 
	`uŒ›_´štL’gths
(
Œ›1
);

448 
	`uŒ›2_´štL’gths
(
cÚ‹xt
.
Œ›
, "fromUTrie");

451 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

452 
	`uŒ›2_şo£
(
cÚ‹xt
.
Œ›
);

453 
cÚ‹xt
.
Œ›
=
NULL
;

455  
cÚ‹xt
.
Œ›
;

456 
	}
}

458 
U_INLINE
 
UBoŞ


459 
	$isInNuÎBlock
(
UNewTr›2
 *
Œ›
, 
UCh¬32
 
c
, 
UBoŞ
 
fÜLSCP
) {

460 
št32_t
 
i2
, 
block
;

462 if(
	`U_IS_LEAD
(
c
è&& 
fÜLSCP
) {

463 
i2
=(
UTRIE2_LSCP_INDEX_2_OFFSET
-(0xd800>>
UTRIE2_SHIFT_2
))+

464 (
c
>>
UTRIE2_SHIFT_2
);

466 
i2
=
Œ›
->
šdex1
[
c
>>
UTRIE2_SHIFT_1
]+

467 ((
c
>>
UTRIE2_SHIFT_2
)&
UTRIE2_INDEX_2_MASK
);

469 
block
=
Œ›
->
šdex2
[
i2
];

470  (
UBoŞ
)(
block
==
Œ›
->
d©aNuÎOff£t
);

471 
	}
}

473 
št32_t


474 
	$®locIndex2Block
(
UNewTr›2
 *
Œ›
) {

475 
št32_t
 
ÃwBlock
, 
ÃwTİ
;

477 
ÃwBlock
=
Œ›
->
šdex2L’gth
;

478 
ÃwTİ
=
ÃwBlock
+
UTRIE2_INDEX_2_BLOCK_LENGTH
;

479 if(
ÃwTİ
>
	`LENGTHOF
(
Œ›
->
šdex2
)) {

487 
Œ›
->
šdex2L’gth
=
ÃwTİ
;

488 
	`u´v_memıy
(
Œ›
->
šdex2
+
ÃwBlock
,r›->šdex2+Œ›->
šdex2NuÎOff£t
, 
UTRIE2_INDEX_2_BLOCK_LENGTH
*4);

489  
ÃwBlock
;

490 
	}
}

492 
št32_t


493 
	$g‘Index2Block
(
UNewTr›2
 *
Œ›
, 
UCh¬32
 
c
, 
UBoŞ
 
fÜLSCP
) {

494 
št32_t
 
i1
, 
i2
;

496 if(
	`U_IS_LEAD
(
c
è&& 
fÜLSCP
) {

497  
UTRIE2_LSCP_INDEX_2_OFFSET
;

500 
i1
=
c
>>
UTRIE2_SHIFT_1
;

501 
i2
=
Œ›
->
šdex1
[
i1
];

502 if(
i2
==
Œ›
->
šdex2NuÎOff£t
) {

503 
i2
=
	`®locIndex2Block
(
Œ›
);

504 if(
i2
<0) {

507 
Œ›
->
šdex1
[
i1
]=
i2
;

509  
i2
;

510 
	}
}

512 
št32_t


513 
	$®locD©aBlock
(
UNewTr›2
 *
Œ›
, 
št32_t
 
cİyBlock
) {

514 
št32_t
 
ÃwBlock
, 
ÃwTİ
;

516 if(
Œ›
->
fœ¡F»eBlock
!=0) {

518 
ÃwBlock
=
Œ›
->
fœ¡F»eBlock
;

519 
Œ›
->
fœ¡F»eBlock
=-Œ›->
m­
[
ÃwBlock
>>
UTRIE2_SHIFT_2
];

522 
ÃwBlock
=
Œ›
->
d©aL’gth
;

523 
ÃwTİ
=
ÃwBlock
+
UTRIE2_DATA_BLOCK_LENGTH
;

524 if(
ÃwTİ
>
Œ›
->
d©aC­ac™y
) {

526 
št32_t
 
ÿ·c™y
;

527 
ušt32_t
 *
d©a
;

529 if(
Œ›
->
d©aC­ac™y
<
UNEWTRIE2_MEDIUM_DATA_LENGTH
) {

530 
ÿ·c™y
=
UNEWTRIE2_MEDIUM_DATA_LENGTH
;

531 } if(
Œ›
->
d©aC­ac™y
<
UNEWTRIE2_MAX_DATA_LENGTH
) {

532 
ÿ·c™y
=
UNEWTRIE2_MAX_DATA_LENGTH
;

541 
d©a
=(
ušt32_t
 *)
	`u´v_m®loc
(
ÿ·c™y
*4);

542 if(
d©a
==
NULL
) {

545 
	`u´v_memıy
(
d©a
, 
Œ›
->d©a,r›->
d©aL’gth
*4);

546 
	`u´v_ä“
(
Œ›
->
d©a
);

547 
Œ›
->
d©a
=data;

548 
Œ›
->
d©aC­ac™y
=
ÿ·c™y
;

550 
Œ›
->
d©aL’gth
=
ÃwTİ
;

552 
	`u´v_memıy
(
Œ›
->
d©a
+
ÃwBlock
,r›->d©a+
cİyBlock
, 
UTRIE2_DATA_BLOCK_LENGTH
*4);

553 
Œ›
->
m­
[
ÃwBlock
>>
UTRIE2_SHIFT_2
]=0;

554  
ÃwBlock
;

555 
	}
}

559 
	$»Ëa£D©aBlock
(
UNewTr›2
 *
Œ›
, 
št32_t
 
block
) {

561 
Œ›
->
m­
[
block
>>
UTRIE2_SHIFT_2
]=-Œ›->
fœ¡F»eBlock
;

562 
Œ›
->
fœ¡F»eBlock
=
block
;

563 
	}
}

565 
U_INLINE
 
UBoŞ


566 
	$isWr™abËBlock
(
UNewTr›2
 *
Œ›
, 
št32_t
 
block
) {

567  (
UBoŞ
)(
block
!=
Œ›
->
d©aNuÎOff£t
 && 1=ñr›->
m­
[block>>
UTRIE2_SHIFT_2
]);

568 
	}
}

570 
U_INLINE
 

571 
	$£tIndex2EÁry
(
UNewTr›2
 *
Œ›
, 
št32_t
 
i2
, iÁ32_ˆ
block
) {

572 
št32_t
 
ŞdBlock
;

573 ++
Œ›
->
m­
[
block
>>
UTRIE2_SHIFT_2
];

574 
ŞdBlock
=
Œ›
->
šdex2
[
i2
];

575 if(0 =ğ--
Œ›
->
m­
[
ŞdBlock
>>
UTRIE2_SHIFT_2
]) {

576 
	`»Ëa£D©aBlock
(
Œ›
, 
ŞdBlock
);

578 
Œ›
->
šdex2
[
i2
]=
block
;

579 
	}
}

587 
št32_t


588 
	$g‘D©aBlock
(
UNewTr›2
 *
Œ›
, 
UCh¬32
 
c
, 
UBoŞ
 
fÜLSCP
) {

589 
št32_t
 
i2
, 
ŞdBlock
, 
ÃwBlock
;

591 
i2
=
	`g‘Index2Block
(
Œ›
, 
c
, 
fÜLSCP
);

592 if(
i2
<0) {

596 
i2
+=(
c
>>
UTRIE2_SHIFT_2
)&
UTRIE2_INDEX_2_MASK
;

597 
ŞdBlock
=
Œ›
->
šdex2
[
i2
];

598 if(
	`isWr™abËBlock
(
Œ›
, 
ŞdBlock
)) {

599  
ŞdBlock
;

603 
ÃwBlock
=
	`®locD©aBlock
(
Œ›
, 
ŞdBlock
);

604 if(
ÃwBlock
<0) {

608 
	`£tIndex2EÁry
(
Œ›
, 
i2
, 
ÃwBlock
);

609  
ÃwBlock
;

610 
	}
}

616 
	$£t32
(
UNewTr›2
 *
Œ›
,

617 
UCh¬32
 
c
, 
UBoŞ
 
fÜLSCP
, 
ušt32_t
 
v®ue
,

618 
UE¼ÜCode
 *
pE¼ÜCode
) {

619 
št32_t
 
block
;

621 if(
Œ›
==
NULL
 ||r›->
isCom·ùed
) {

622 *
pE¼ÜCode
=
U_NO_WRITE_PERMISSION
;

626 
block
=
	`g‘D©aBlock
(
Œ›
, 
c
, 
fÜLSCP
);

627 if(
block
<0) {

628 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

632 
Œ›
->
d©a
[
block
+(
c
&
UTRIE2_DATA_MASK
)]=
v®ue
;

633 
	}
}

635 
U_CAPI
 
U_EXPORT2


636 
	$uŒ›2_£t32
(
UTr›2
 *
Œ›
, 
UCh¬32
 
c
, 
ušt32_t
 
v®ue
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

637 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

640 if((
ušt32_t
)
c
>0x10ffff) {

641 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

644 
	`£t32
(
Œ›
->
ÃwTr›
, 
c
, 
TRUE
, 
v®ue
, 
pE¼ÜCode
);

645 
	}
}

647 
U_CAPI
 
U_EXPORT2


648 
	$uŒ›2_£t32FÜL—dSu¼og©eCodeUn™
(
UTr›2
 *
Œ›
,

649 
UCh¬32
 
c
, 
ušt32_t
 
v®ue
,

650 
UE¼ÜCode
 *
pE¼ÜCode
) {

651 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

654 if(!
	`U_IS_LEAD
(
c
)) {

655 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

658 
	`£t32
(
Œ›
->
ÃwTr›
, 
c
, 
FALSE
, 
v®ue
, 
pE¼ÜCode
);

659 
	}
}

662 
	$wr™eBlock
(
ušt32_t
 *
block
, ušt32_ˆ
v®ue
) {

663 
ušt32_t
 *
lim™
=
block
+
UTRIE2_DATA_BLOCK_LENGTH
;

664 
block
<
lim™
) {

665 *
block
++=
v®ue
;

667 
	}
}

674 
	$flBlock
(
ušt32_t
 *
block
, 
UCh¬32
 
¡¬t
, UCh¬32 
lim™
,

675 
ušt32_t
 
v®ue
, ušt32_ˆ
š™ŸlV®ue
, 
UBoŞ
 
ov”wr™e
) {

676 
ušt32_t
 *
pLim™
;

678 
pLim™
=
block
+
lim™
;

679 
block
+=
¡¬t
;

680 if(
ov”wr™e
) {

681 
block
<
pLim™
) {

682 *
block
++=
v®ue
;

685 
block
<
pLim™
) {

686 if(*
block
==
š™ŸlV®ue
) {

687 *
block
=
v®ue
;

689 ++
block
;

692 
	}
}

694 
U_CAPI
 
U_EXPORT2


695 
	$uŒ›2_£tRªge32
(
UTr›2
 *
Œ›
,

696 
UCh¬32
 
¡¬t
, UCh¬32 
’d
,

697 
ušt32_t
 
v®ue
, 
UBoŞ
 
ov”wr™e
,

698 
UE¼ÜCode
 *
pE¼ÜCode
) {

704 
UNewTr›2
 *
ÃwTr›
;

705 
št32_t
 
block
, 
»¡
, 
»³©Block
;

706 
UCh¬32
 
lim™
;

708 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

711 if((
ušt32_t
)
¡¬t
>0x10fffà|| (ušt32_t)
’d
>0x10ffff || start>end) {

712 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

715 
ÃwTr›
=
Œ›
->newTrie;

716 if(
ÃwTr›
==
NULL
 ||‚ewTr›->
isCom·ùed
) {

717 *
pE¼ÜCode
=
U_NO_WRITE_PERMISSION
;

720 if(!
ov”wr™e
 && 
v®ue
==
ÃwTr›
->
š™ŸlV®ue
) {

724 
lim™
=
’d
+1;

725 if(
¡¬t
&
UTRIE2_DATA_MASK
) {

726 
UCh¬32
 
ÃxtS¹
;

729 
block
=
	`g‘D©aBlock
(
ÃwTr›
, 
¡¬t
, 
TRUE
);

730 if(
block
<0) {

731 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

735 
ÃxtS¹
=(
¡¬t
+
UTRIE2_DATA_BLOCK_LENGTH
)&~
UTRIE2_DATA_MASK
;

736 if(
ÃxtS¹
<=
lim™
) {

737 
	`flBlock
(
ÃwTr›
->
d©a
+
block
, 
¡¬t
&
UTRIE2_DATA_MASK
, 
UTRIE2_DATA_BLOCK_LENGTH
,

738 
v®ue
, 
ÃwTr›
->
š™ŸlV®ue
, 
ov”wr™e
);

739 
¡¬t
=
ÃxtS¹
;

741 
	`flBlock
(
ÃwTr›
->
d©a
+
block
, 
¡¬t
&
UTRIE2_DATA_MASK
, 
lim™
&UTRIE2_DATA_MASK,

742 
v®ue
, 
ÃwTr›
->
š™ŸlV®ue
, 
ov”wr™e
);

748 
»¡
=
lim™
&
UTRIE2_DATA_MASK
;

751 
lim™
&=~
UTRIE2_DATA_MASK
;

754 if(
v®ue
==
ÃwTr›
->
š™ŸlV®ue
) {

755 
»³©Block
=
ÃwTr›
->
d©aNuÎOff£t
;

757 
»³©Block
=-1;

760 
¡¬t
<
lim™
) {

761 
št32_t
 
i2
;

762 
UBoŞ
 
£tR•—tBlock
=
FALSE
;

764 if(
v®ue
==
ÃwTr›
->
š™ŸlV®ue
 && 
	`isInNuÎBlock
ÒewTr›, 
¡¬t
, 
TRUE
)) {

765 
¡¬t
+=
UTRIE2_DATA_BLOCK_LENGTH
;

770 
i2
=
	`g‘Index2Block
(
ÃwTr›
, 
¡¬t
, 
TRUE
);

771 if(
i2
<0) {

772 *
pE¼ÜCode
=
U_INTERNAL_PROGRAM_ERROR
;

775 
i2
+=(
¡¬t
>>
UTRIE2_SHIFT_2
)&
UTRIE2_INDEX_2_MASK
;

776 
block
=
ÃwTr›
->
šdex2
[
i2
];

777 if(
	`isWr™abËBlock
(
ÃwTr›
, 
block
)) {

779 if(
ov”wr™e
 && 
block
>=
UNEWTRIE2_DATA_0800_OFFSET
) {

785 
£tR•—tBlock
=
TRUE
;

788 
	`flBlock
(
ÃwTr›
->
d©a
+
block
,

789 0, 
UTRIE2_DATA_BLOCK_LENGTH
,

790 
v®ue
, 
ÃwTr›
->
š™ŸlV®ue
, 
ov”wr™e
);

792 } if(
ÃwTr›
->
d©a
[
block
]!=
v®ue
 && (
ov”wr™e
 || block=òewTr›->
d©aNuÎOff£t
)) {

809 
£tR•—tBlock
=
TRUE
;

811 if(
£tR•—tBlock
) {

812 if(
»³©Block
>=0) {

813 
	`£tIndex2EÁry
(
ÃwTr›
, 
i2
, 
»³©Block
);

816 
»³©Block
=
	`g‘D©aBlock
(
ÃwTr›
, 
¡¬t
, 
TRUE
);

817 if(
»³©Block
<0) {

818 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

821 
	`wr™eBlock
(
ÃwTr›
->
d©a
+
»³©Block
, 
v®ue
);

825 
¡¬t
+=
UTRIE2_DATA_BLOCK_LENGTH
;

828 if(
»¡
>0) {

830 
block
=
	`g‘D©aBlock
(
ÃwTr›
, 
¡¬t
, 
TRUE
);

831 if(
block
<0) {

832 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

836 
	`flBlock
(
ÃwTr›
->
d©a
+
block
, 0, 
»¡
, 
v®ue
,‚ewTr›->
š™ŸlV®ue
, 
ov”wr™e
);

840 
	}
}

844 
U_INLINE
 
UBoŞ


845 
	$equ®_št32
(cÚ¡ 
št32_t
 *
s
, cÚ¡ iÁ32_ˆ*
t
, iÁ32_ˆ
Ëngth
) {

846 
Ëngth
>0 && *
s
==*
t
) {

847 ++
s
;

848 ++
t
;

849 --
Ëngth
;

851  (
UBoŞ
)(
Ëngth
==0);

852 
	}
}

854 
U_INLINE
 
UBoŞ


855 
	$equ®_ušt32
(cÚ¡ 
ušt32_t
 *
s
, cÚ¡ ušt32_ˆ*
t
, 
št32_t
 
Ëngth
) {

856 
Ëngth
>0 && *
s
==*
t
) {

857 ++
s
;

858 ++
t
;

859 --
Ëngth
;

861  (
UBoŞ
)(
Ëngth
==0);

862 
	}
}

864 
št32_t


865 
	$fšdSameIndex2Block
(cÚ¡ 
št32_t
 *
idx
, iÁ32_ˆ
šdex2L’gth
, iÁ32_ˆ
Ùh”Block
) {

866 
št32_t
 
block
;

869 
šdex2L’gth
-=
UTRIE2_INDEX_2_BLOCK_LENGTH
;

871 
block
=0; block<=
šdex2L’gth
; ++block) {

872 if(
	`equ®_št32
(
idx
+
block
, idx+
Ùh”Block
, 
UTRIE2_INDEX_2_BLOCK_LENGTH
)) {

873  
block
;

877 
	}
}

879 
št32_t


880 
	$fšdSameD©aBlock
(cÚ¡ 
ušt32_t
 *
d©a
, 
št32_t
 
d©aL’gth
, iÁ32_ˆ
Ùh”Block
, iÁ32_ˆ
blockL’gth
) {

881 
št32_t
 
block
;

884 
d©aL’gth
-=
blockL’gth
;

886 
block
=0; block<=
d©aL’gth
; block+=
UTRIE2_DATA_GRANULARITY
) {

887 if(
	`equ®_ušt32
(
d©a
+
block
, d©a+
Ùh”Block
, 
blockL’gth
)) {

888  
block
;

892 
	}
}

898 
UCh¬32


899 
	$fšdHighS¹
(
UNewTr›2
 *
Œ›
, 
ušt32_t
 
highV®ue
) {

900 cÚ¡ 
ušt32_t
 *
d©a32
;

902 
ušt32_t
 
v®ue
, 
š™ŸlV®ue
;

903 
UCh¬32
 
c
, 
´ev
;

904 
št32_t
 
i1
, 
i2
, 
j
, 
i2Block
, 
´evI2Block
, 
šdex2NuÎOff£t
, 
block
, 
´evBlock
, 
nuÎBlock
;

906 
d©a32
=
Œ›
->
d©a
;

907 
š™ŸlV®ue
=
Œ›
->initialValue;

909 
šdex2NuÎOff£t
=
Œ›
->index2NullOffset;

910 
nuÎBlock
=
Œ›
->
d©aNuÎOff£t
;

913 if(
highV®ue
==
š™ŸlV®ue
) {

914 
´evI2Block
=
šdex2NuÎOff£t
;

915 
´evBlock
=
nuÎBlock
;

917 
´evI2Block
=-1;

918 
´evBlock
=-1;

920 
´ev
=0x110000;

923 
i1
=
UNEWTRIE2_INDEX_1_LENGTH
;

924 
c
=
´ev
;

925 
c
>0) {

926 
i2Block
=
Œ›
->
šdex1
[--
i1
];

927 if(
i2Block
==
´evI2Block
) {

929 
c
-=
UTRIE2_CP_PER_INDEX_1_ENTRY
;

932 
´evI2Block
=
i2Block
;

933 if(
i2Block
==
šdex2NuÎOff£t
) {

935 if(
highV®ue
!=
š™ŸlV®ue
) {

936  
c
;

938 
c
-=
UTRIE2_CP_PER_INDEX_1_ENTRY
;

941 
i2
=
UTRIE2_INDEX_2_BLOCK_LENGTH
; i2>0;) {

942 
block
=
Œ›
->
šdex2
[
i2Block
+ --
i2
];

943 if(
block
==
´evBlock
) {

945 
c
-=
UTRIE2_DATA_BLOCK_LENGTH
;

948 
´evBlock
=
block
;

949 if(
block
==
nuÎBlock
) {

951 if(
highV®ue
!=
š™ŸlV®ue
) {

952  
c
;

954 
c
-=
UTRIE2_DATA_BLOCK_LENGTH
;

956 
j
=
UTRIE2_DATA_BLOCK_LENGTH
; j>0;) {

957 
v®ue
=
d©a32
[
block
+ --
j
];

958 if(
v®ue
!=
highV®ue
) {

959  
c
;

961 --
c
;

970 
	}
}

985 
	$com·ùD©a
(
UNewTr›2
 *
Œ›
) {

986 
št32_t
 
¡¬t
, 
ÃwS¹
, 
movedS¹
;

987 
št32_t
 
blockL’gth
, 
ov”Ïp
;

988 
št32_t
 
i
, 
m­Index
, 
blockCouÁ
;

991 
ÃwS¹
=
UTRIE2_DATA_START_OFFSET
;

992 
¡¬t
=0, 
i
=0; s¹<
ÃwS¹
; s¹+=
UTRIE2_DATA_BLOCK_LENGTH
, ++i) {

993 
Œ›
->
m­
[
i
]=
¡¬t
;

1000 
blockL’gth
=64;

1001 
blockCouÁ
=
blockL’gth
>>
UTRIE2_SHIFT_2
;

1002 
¡¬t
=
ÃwS¹
; s¹<
Œ›
->
d©aL’gth
;) {

1008 if(
¡¬t
==
UNEWTRIE2_DATA_0800_OFFSET
) {

1009 
blockL’gth
=
UTRIE2_DATA_BLOCK_LENGTH
;

1010 
blockCouÁ
=1;

1014 if(
Œ›
->
m­
[
¡¬t
>>
UTRIE2_SHIFT_2
]<=0) {

1016 
¡¬t
+=
blockL’gth
;

1023 ifĞ(
movedS¹
=
	`fšdSameD©aBlock
(
Œ›
->
d©a
, 
ÃwS¹
, 
¡¬t
, 
blockL’gth
))

1027 
i
=
blockCouÁ
, 
m­Index
=
¡¬t
>>
UTRIE2_SHIFT_2
; i>0; --i) {

1028 
Œ›
->
m­
[
m­Index
++]=
movedS¹
;

1029 
movedS¹
+=
UTRIE2_DATA_BLOCK_LENGTH
;

1033 
¡¬t
+=
blockL’gth
;

1041 
ov”Ïp
=
blockL’gth
-
UTRIE2_DATA_GRANULARITY
;

1042 
ov”Ïp
>0 && !
	`equ®_ušt32
(
Œ›
->
d©a
+(
ÃwS¹
-ov”Ïp),r›->d©a+
¡¬t
, overlap);

1043 
ov”Ïp
-=
UTRIE2_DATA_GRANULARITY
) {}

1045 if(
ov”Ïp
>0 || 
ÃwS¹
<
¡¬t
) {

1047 
movedS¹
=
ÃwS¹
-
ov”Ïp
;

1048 
i
=
blockCouÁ
, 
m­Index
=
¡¬t
>>
UTRIE2_SHIFT_2
; i>0; --i) {

1049 
Œ›
->
m­
[
m­Index
++]=
movedS¹
;

1050 
movedS¹
+=
UTRIE2_DATA_BLOCK_LENGTH
;

1054 
¡¬t
+=
ov”Ïp
;

1055 
i
=
blockL’gth
-
ov”Ïp
; i>0; --i) {

1056 
Œ›
->
d©a
[
ÃwS¹
++]ñr›->d©a[
¡¬t
++];

1059 
i
=
blockCouÁ
, 
m­Index
=
¡¬t
>>
UTRIE2_SHIFT_2
; i>0; --i) {

1060 
Œ›
->
m­
[
m­Index
++]=
¡¬t
;

1061 
¡¬t
+=
UTRIE2_DATA_BLOCK_LENGTH
;

1063 
ÃwS¹
=
¡¬t
;

1068 
i
=0; i<
Œ›
->
šdex2L’gth
; ++i) {

1069 if(
i
==
UNEWTRIE2_INDEX_GAP_OFFSET
) {

1071 
i
+=
UNEWTRIE2_INDEX_GAP_LENGTH
;

1073 
Œ›
->
šdex2
[
i
]ñr›->
m­
[Œ›->šdex2[i]>>
UTRIE2_SHIFT_2
];

1075 
Œ›
->
d©aNuÎOff£t
ñr›->
m­
[Œ›->d©aNuÎOff£t>>
UTRIE2_SHIFT_2
];

1078 (
ÃwS¹
&(
UTRIE2_DATA_GRANULARITY
-1))!=0) {

1079 
Œ›
->
d©a
[
ÃwS¹
++]ñr›->
š™ŸlV®ue
;

1082 #ifdeà
UTRIE2_DEBUG


1084 
	`´štf
("compacting UTrie2: count of 32-bit data words %lu->%lu\n",

1085 ()
Œ›
->
d©aL’gth
, ()
ÃwS¹
);

1088 
Œ›
->
d©aL’gth
=
ÃwS¹
;

1089 
	}
}

1092 
	$com·ùIndex2
(
UNewTr›2
 *
Œ›
) {

1093 
št32_t
 
i
, 
¡¬t
, 
ÃwS¹
, 
movedS¹
, 
ov”Ïp
;

1096 
ÃwS¹
=
UTRIE2_INDEX_2_BMP_LENGTH
;

1097 
¡¬t
=0, 
i
=0; s¹<
ÃwS¹
; s¹+=
UTRIE2_INDEX_2_BLOCK_LENGTH
, ++i) {

1098 
Œ›
->
m­
[
i
]=
¡¬t
;

1102 
ÃwS¹
+=
UTRIE2_UTF8_2B_INDEX_2_LENGTH
+((
Œ›
->
highS¹
-0x10000)>>
UTRIE2_SHIFT_1
);

1104 
¡¬t
=
UNEWTRIE2_INDEX_2_NULL_OFFSET
; s¹<
Œ›
->
šdex2L’gth
;) {

1112 ifĞ(
movedS¹
=
	`fšdSameIndex2Block
(
Œ›
->
šdex2
, 
ÃwS¹
, 
¡¬t
))

1116 
Œ›
->
m­
[
¡¬t
>>
UTRIE2_SHIFT_1_2
]=
movedS¹
;

1119 
¡¬t
+=
UTRIE2_INDEX_2_BLOCK_LENGTH
;

1127 
ov”Ïp
=
UTRIE2_INDEX_2_BLOCK_LENGTH
-1;

1128 
ov”Ïp
>0 && !
	`equ®_št32
(
Œ›
->
šdex2
+(
ÃwS¹
-ov”Ïp),r›->šdex2+
¡¬t
, overlap);

1129 --
ov”Ïp
) {}

1131 if(
ov”Ïp
>0 || 
ÃwS¹
<
¡¬t
) {

1133 
Œ›
->
m­
[
¡¬t
>>
UTRIE2_SHIFT_1_2
]=
ÃwS¹
-
ov”Ïp
;

1136 
¡¬t
+=
ov”Ïp
;

1137 
i
=
UTRIE2_INDEX_2_BLOCK_LENGTH
-
ov”Ïp
; i>0; --i) {

1138 
Œ›
->
šdex2
[
ÃwS¹
++]ñr›->šdex2[
¡¬t
++];

1141 
Œ›
->
m­
[
¡¬t
>>
UTRIE2_SHIFT_1_2
]=start;

1142 
¡¬t
+=
UTRIE2_INDEX_2_BLOCK_LENGTH
;

1143 
ÃwS¹
=
¡¬t
;

1148 
i
=0; i<
UNEWTRIE2_INDEX_1_LENGTH
; ++i) {

1149 
Œ›
->
šdex1
[
i
]ñr›->
m­
[Œ›->šdex1[i]>>
UTRIE2_SHIFT_1_2
];

1151 
Œ›
->
šdex2NuÎOff£t
ñr›->
m­
[Œ›->šdex2NuÎOff£t>>
UTRIE2_SHIFT_1_2
];

1159 (
ÃwS¹
&((
UTRIE2_DATA_GRANULARITY
-1)|1))!=0) {

1161 
Œ›
->
šdex2
[
ÃwS¹
++]=(
št32_t
)0xffff<<
UTRIE2_INDEX_SHIFT
;

1164 #ifdeà
UTRIE2_DEBUG


1166 
	`´štf
("compacting UTrie2: count of 16-bit index-2 words %lu->%lu\n",

1167 ()
Œ›
->
šdex2L’gth
, ()
ÃwS¹
);

1170 
Œ›
->
šdex2L’gth
=
ÃwS¹
;

1171 
	}
}

1174 
	$com·ùTr›
(
UTr›2
 *
Œ›
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1175 
UNewTr›2
 *
ÃwTr›
;

1176 
UCh¬32
 
highS¹
, 
suµHighS¹
;

1177 
ušt32_t
 
highV®ue
;

1179 
ÃwTr›
=
Œ›
->newTrie;

1182 
highV®ue
=
	`uŒ›2_g‘32
(
Œ›
, 0x10ffff);

1183 
highS¹
=
	`fšdHighS¹
(
ÃwTr›
, 
highV®ue
);

1184 
highS¹
=(highS¹+(
UTRIE2_CP_PER_INDEX_1_ENTRY
-1))&~(UTRIE2_CP_PER_INDEX_1_ENTRY-1);

1185 if(
highS¹
==0x110000) {

1186 
highV®ue
=
Œ›
->
”rÜV®ue
;

1193 
Œ›
->
highS¹
=
ÃwTr›
->highStart=highStart;

1195 #ifdeà
UTRIE2_DEBUG


1196 
	`´štf
("UTrie2: highStart U+%04lx highValue 0x%lx initialValue 0x%lx\n",

1197 ()
highS¹
, ()
highV®ue
, ()
Œ›
->
š™ŸlV®ue
);

1200 if(
highS¹
<0x110000) {

1202 
suµHighS¹
ğ
highS¹
<=0x10000 ? 0x10000 : highStart;

1203 
	`uŒ›2_£tRªge32
(
Œ›
, 
suµHighS¹
, 0x10ffff,r›->
š™ŸlV®ue
, 
TRUE
, 
pE¼ÜCode
);

1204 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1209 
	`com·ùD©a
(
ÃwTr›
);

1210 if(
highS¹
>0x10000) {

1211 
	`com·ùIndex2
(
ÃwTr›
);

1212 #ifdeà
UTRIE2_DEBUG


1214 
	`´štf
("UTrie2: highStart U+%04lx count of 16-bit index-2 words %lu->%lu\n",

1215 ()
highS¹
, ()
Œ›
->
ÃwTr›
->
šdex2L’gth
, ()
UTRIE2_INDEX_1_OFFSET
);

1224 
ÃwTr›
->
d©a
[ÃwTr›->
d©aL’gth
++]=
highV®ue
;

1225 (
ÃwTr›
->
d©aL’gth
&(
UTRIE2_DATA_GRANULARITY
-1))!=0) {

1226 
ÃwTr›
->
d©a
[ÃwTr›->
d©aL’gth
++]=
Œ›
->
š™ŸlV®ue
;

1229 
ÃwTr›
->
isCom·ùed
=
TRUE
;

1230 
	}
}

1240 
	#UTRIE2_MAX_INDEX_LENGTH
 0xffff

	)

1247 
	#UTRIE2_MAX_DATA_LENGTH
 (0xffff<<
UTRIE2_INDEX_SHIFT
)

	)

1250 
U_CAPI
 
U_EXPORT2


1251 
	$uŒ›2_ä“ze
(
UTr›2
 *
Œ›
, 
UTr›2V®ueB™s
 
v®ueB™s
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1252 
UNewTr›2
 *
ÃwTr›
;

1253 
UTr›2H—d”
 *
h—d”
;

1254 
ušt32_t
 *
p
;

1255 
ušt16_t
 *
de¡16
;

1256 
št32_t
 
i
, 
Ëngth
;

1257 
št32_t
 
®lIndexesL’gth
;

1258 
št32_t
 
d©aMove
;

1259 
UCh¬32
 
highS¹
;

1262 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1265 ifĞ
Œ›
==
NULL
 ||

1266 
v®ueB™s
<0 || 
UTRIE2_COUNT_VALUE_BITS
<=valueBits

1268 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1271 
ÃwTr›
=
Œ›
->newTrie;

1272 if(
ÃwTr›
==
NULL
) {

1274 
UTr›2V®ueB™s
 
äoz’V®ueB™s
=

1275 
Œ›
->
d©a16
!=
NULL
 ? 
UTRIE2_16_VALUE_BITS
 : 
UTRIE2_32_VALUE_BITS
;

1276 if(
v®ueB™s
!=
äoz’V®ueB™s
) {

1277 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1283 if(!
ÃwTr›
->
isCom·ùed
) {

1284 
	`com·ùTr›
(
Œ›
, 
pE¼ÜCode
);

1285 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1289 
highS¹
=
Œ›
->highStart;

1291 if(
highS¹
<=0x10000) {

1292 
®lIndexesL’gth
=
UTRIE2_INDEX_1_OFFSET
;

1294 
®lIndexesL’gth
=
ÃwTr›
->
šdex2L’gth
;

1296 if(
v®ueB™s
==
UTRIE2_16_VALUE_BITS
) {

1297 
d©aMove
=
®lIndexesL’gth
;

1299 
d©aMove
=0;

1304 
®lIndexesL’gth
>
UTRIE2_MAX_INDEX_LENGTH
 ||

1306 (
d©aMove
+
ÃwTr›
->
d©aNuÎOff£t
)>0xffff ||

1308 (
d©aMove
+
UNEWTRIE2_DATA_0800_OFFSET
)>0xffff ||

1310 (
d©aMove
+
ÃwTr›
->
d©aL’gth
)>
UTRIE2_MAX_DATA_LENGTH


1312 *
pE¼ÜCode
=
U_INDEX_OUTOFBOUNDS_ERROR
;

1317 
Ëngth
=(
UTr›2H—d”
)+
®lIndexesL’gth
*2;

1318 if(
v®ueB™s
==
UTRIE2_16_VALUE_BITS
) {

1319 
Ëngth
+=
ÃwTr›
->
d©aL’gth
*2;

1321 
Ëngth
+=
ÃwTr›
->
d©aL’gth
*4;

1324 
Œ›
->
memÜy
=
	`u´v_m®loc
(
Ëngth
);

1325 if(
Œ›
->
memÜy
==
NULL
) {

1326 *
pE¼ÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

1329 
Œ›
->
Ëngth
=length;

1330 
Œ›
->
isMemÜyOwÃd
=
TRUE
;

1332 
Œ›
->
šdexL’gth
=
®lIndexesL’gth
;

1333 
Œ›
->
d©aL’gth
=
ÃwTr›
->dataLength;

1334 if(
highS¹
<=0x10000) {

1335 
Œ›
->
šdex2NuÎOff£t
=0xffff;

1337 
Œ›
->
šdex2NuÎOff£t
=
UTRIE2_INDEX_2_OFFSET
+
ÃwTr›
->index2NullOffset;

1339 
Œ›
->
d©aNuÎOff£t
=(
ušt16_t
)(
d©aMove
+
ÃwTr›
->dataNullOffset);

1340 
Œ›
->
highV®ueIndex
=
d©aMove
+Œ›->
d©aL’gth
-
UTRIE2_DATA_GRANULARITY
;

1343 
h—d”
=(
UTr›2H—d”
 *)
Œ›
->
memÜy
;

1345 
h—d”
->
sigÇtu»
=
UTRIE2_SIG
;

1346 
h—d”
->
İtiÚs
=(
ušt16_t
)
v®ueB™s
;

1348 
h—d”
->
šdexL’gth
=(
ušt16_t
)
Œ›
->indexLength;

1349 
h—d”
->
shiáedD©aL’gth
=(
ušt16_t
)(
Œ›
->
d©aL’gth
>>
UTRIE2_INDEX_SHIFT
);

1350 
h—d”
->
šdex2NuÎOff£t
=
Œ›
->index2NullOffset;

1351 
h—d”
->
d©aNuÎOff£t
=
Œ›
->dataNullOffset;

1352 
h—d”
->
shiáedHighS¹
=(
ušt16_t
)(
highS¹
>>
UTRIE2_SHIFT_1
);

1355 
de¡16
=(
ušt16_t
 *)(
h—d”
+1);

1356 
Œ›
->
šdex
=
de¡16
;

1359 
p
=(
ušt32_t
 *)
ÃwTr›
->
šdex2
;

1360 
i
=
UTRIE2_INDEX_2_BMP_LENGTH
; i>0; --i) {

1361 *
de¡16
++=(
ušt16_t
)((
d©aMove
 + *
p
++)>>
UTRIE2_INDEX_SHIFT
);

1365 
i
=0; i<(0xc2-0xc0); ++i) {

1366 *
de¡16
++=(
ušt16_t
)(
d©aMove
+
UTRIE2_BAD_UTF8_DATA_OFFSET
);

1368 ; 
i
<(0xe0-0xc0); ++i) {

1369 *
de¡16
++=(
ušt16_t
)(
d©aMove
+
ÃwTr›
->
šdex2
[
i
<<(6-
UTRIE2_SHIFT_2
)]);

1372 if(
highS¹
>0x10000) {

1373 
št32_t
 
šdex1L’gth
=(
highS¹
-0x10000)>>
UTRIE2_SHIFT_1
;

1374 
št32_t
 
šdex2Off£t
=
UTRIE2_INDEX_2_BMP_LENGTH
+
UTRIE2_UTF8_2B_INDEX_2_LENGTH
+
šdex1L’gth
;

1377 
p
=(
ušt32_t
 *)
ÃwTr›
->
šdex1
+
UTRIE2_OMITTED_BMP_INDEX_1_LENGTH
;

1378 
i
=
šdex1L’gth
; i>0; --i) {

1379 *
de¡16
++=(
ušt16_t
)(
UTRIE2_INDEX_2_OFFSET
 + *
p
++);

1386 
p
=(
ušt32_t
 *)
ÃwTr›
->
šdex2
+
šdex2Off£t
;

1387 
i
=
ÃwTr›
->
šdex2L’gth
-
šdex2Off£t
; i>0; --i) {

1388 *
de¡16
++=(
ušt16_t
)((
d©aMove
 + *
p
++)>>
UTRIE2_INDEX_SHIFT
);

1393 
v®ueB™s
) {

1394 
UTRIE2_16_VALUE_BITS
:

1396 
Œ›
->
d©a16
=
de¡16
;

1397 
Œ›
->
d©a32
=
NULL
;

1398 
p
=
ÃwTr›
->
d©a
;

1399 
i
=
ÃwTr›
->
d©aL’gth
; i>0; --i) {

1400 *
de¡16
++=(
ušt16_t
)*
p
++;

1403 
UTRIE2_32_VALUE_BITS
:

1405 
Œ›
->
d©a16
=
NULL
;

1406 
Œ›
->
d©a32
=(
ušt32_t
 *)
de¡16
;

1407 
	`u´v_memıy
(
de¡16
, 
ÃwTr›
->
d©a
,‚ewTr›->
d©aL’gth
*4);

1410 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1415 
	`u´v_ä“
(
ÃwTr›
->
d©a
);

1416 
	`u´v_ä“
(
ÃwTr›
);

1417 
Œ›
->
ÃwTr›
=
NULL
;

1418 
	}
}

1420 
U_CAPI
 
UBoŞ
 
U_EXPORT2


1421 
	$uŒ›2_isFroz’
(cÚ¡ 
UTr›2
 *
Œ›
) {

1422  (
UBoŞ
)(
Œ›
->
ÃwTr›
==
NULL
);

1423 
	}
}

1425 
U_CAPI
 
št32_t
 
U_EXPORT2


1426 
	$uŒ›2_£rŸlize
(
UTr›2
 *
Œ›
,

1427 *
d©a
, 
št32_t
 
ÿ·c™y
,

1428 
UE¼ÜCode
 *
pE¼ÜCode
) {

1430 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1434 ifĞ
Œ›
==
NULL
 ||r›->
memÜy
==NULL ||r›->
ÃwTr›
!=NULL ||

1435 
ÿ·c™y
<0 || (ÿ·c™y>0 && (
d©a
==
NULL
 || (
	`U_POINTER_MASK_LSB
(data, 3)!=0)))

1437 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1441 if(
ÿ·c™y
>=
Œ›
->
Ëngth
) {

1442 
	`u´v_memıy
(
d©a
, 
Œ›
->
memÜy
,r›->
Ëngth
);

1444 *
pE¼ÜCode
=
U_BUFFER_OVERFLOW_ERROR
;

1446  
Œ›
->
Ëngth
;

1447 
	}
}

1454 
U_CAPI
 
št32_t
 
U_EXPORT2


1455 
	$uŒ›2_sw­AnyV”siÚ
(cÚ¡ 
UD©aSw­³r
 *
ds
,

1456 cÚ¡ *
šD©a
, 
št32_t
 
Ëngth
, *
outD©a
,

1457 
UE¼ÜCode
 *
pE¼ÜCode
) {

1458 if(
	`U_SUCCESS
(*
pE¼ÜCode
)) {

1459 
	`uŒ›2_g‘V”siÚ
(
šD©a
, 
Ëngth
, 
TRUE
)) {

1461  
	`uŒ›_sw­
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
pE¼ÜCode
);

1463  
	`uŒ›2_sw­
(
ds
, 
šD©a
, 
Ëngth
, 
outD©a
, 
pE¼ÜCode
);

1465 *
pE¼ÜCode
=
U_INVALID_FORMAT_ERROR
;

1470 
	}
}

	@utrie2_impl.h

20 #iâdeà
__UTRIE2_IMPL_H__


21 
	#__UTRIE2_IMPL_H__


	)

23 
	~"uŒ›2.h
"

36 
	#UTRIE_SIG
 0x54726965

	)

37 
	#UTRIE_OE_SIG
 0x65697254

	)

39 
	#UTRIE2_SIG
 0x54726932

	)

40 
	#UTRIE2_OE_SIG
 0x32697254

	)

50 
	sUTr›2H—d”
 {

52 
ušt32_t
 
	msigÇtu»
;

59 
ušt16_t
 
	mİtiÚs
;

62 
ušt16_t
 
	mšdexL’gth
;

65 
ušt16_t
 
	mshiáedD©aL’gth
;

68 
ušt16_t
 
	mšdex2NuÎOff£t
, 
	md©aNuÎOff£t
;

74 
ušt16_t
 
	mshiáedHighS¹
;

75 } 
	tUTr›2H—d”
;

83 
	mUTRIE2_OPTIONS_VALUE_BITS_MASK
=0xf

100 
	mUNEWTRIE2_INDEX_GAP_OFFSET
=
UTRIE2_INDEX_2_BMP_LENGTH
,

101 
	mUNEWTRIE2_INDEX_GAP_LENGTH
=

102 ((
UTRIE2_UTF8_2B_INDEX_2_LENGTH
+
UTRIE2_MAX_INDEX_1_LENGTH
)+
UTRIE2_INDEX_2_MASK
)&

103 ~
UTRIE2_INDEX_2_MASK
,

112 
	mUNEWTRIE2_MAX_INDEX_2_LENGTH
=

113 (0x110000>>
UTRIE2_SHIFT_2
)+

114 
UTRIE2_LSCP_INDEX_2_LENGTH
+

115 
UNEWTRIE2_INDEX_GAP_LENGTH
+

116 
UTRIE2_INDEX_2_BLOCK_LENGTH
,

118 
	mUNEWTRIE2_INDEX_1_LENGTH
=0x110000>>
UTRIE2_SHIFT_1


126 
	#UNEWTRIE2_MAX_DATA_LENGTH
 (0x110000+0x40+0x40+0x400)

	)

142 
	sUNewTr›2
 {

143 
št32_t
 
	mšdex1
[
UNEWTRIE2_INDEX_1_LENGTH
];

144 
št32_t
 
	mšdex2
[
UNEWTRIE2_MAX_INDEX_2_LENGTH
];

145 
ušt32_t
 *
	md©a
;

147 
ušt32_t
 
	mš™ŸlV®ue
, 
	m”rÜV®ue
;

148 
št32_t
 
	mšdex2L’gth
, 
	md©aC­ac™y
, 
	md©aL’gth
;

149 
št32_t
 
	mfœ¡F»eBlock
;

150 
št32_t
 
	mšdex2NuÎOff£t
, 
	md©aNuÎOff£t
;

151 
UCh¬32
 
	mhighS¹
;

152 
UBoŞ
 
	misCom·ùed
;

169 
št32_t
 
	mm­
[
UNEWTRIE2_MAX_DATA_LENGTH
>>
UTRIE2_SHIFT_2
];

	@uts46.cpp

15 
	~"unicode/uty³s.h
"

17 #ià!
UCONFIG_NO_IDNA


19 
	~"unicode/idÇ.h
"

20 
	~"unicode/nÜm®iz”2.h
"

21 
	~"unicode/u¡ršg.h
"

22 
	~"cmemÜy.h
"

23 
	~"c¡ršg.h
"

24 
	~"punycode.h
"

25 
	~"u¡r_imp.h
"

27 
	#LENGTHOF
(
¬¿y
è(
št32_t
)(×¼ay)/(×¼ay)[0]))

	)

37 
U_NAMESPACE_BEGIN


40 cÚ¡ 
ušt32_t
 
	g£v”eE¼Üs
=

41 
UIDNA_ERROR_LEADING_COMBINING_MARK
|

42 
UIDNA_ERROR_DISALLOWED
|

43 
UIDNA_ERROR_PUNYCODE
|

44 
UIDNA_ERROR_LABEL_HAS_DOT
|

45 
UIDNA_ERROR_INVALID_ACE_LABEL
;

47 
šlše
 
UBoŞ


48 
	$isASCIISŒšg
(cÚ¡ 
UnicodeSŒšg
 &
de¡
) {

49 cÚ¡ 
UCh¬
 *
s
=
de¡
.
	`g‘Bufãr
();

50 cÚ¡ 
UCh¬
 *
lim™
=
s
+
de¡
.
	`Ëngth
();

51 
s
<
lim™
) {

52 if(*
s
++>0x7f) {

53  
FALSE
;

56  
TRUE
;

57 
	}
}

59 
UBoŞ


60 
isASCIIOkBiDi
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
);

62 
UBoŞ


63 
isASCIIOkBiDi
(cÚ¡ *
s
, 
št32_t
 
Ëngth
);

68 
	gIDNA
::
	$Ïb–ToASCII_UTF8
(cÚ¡ 
SŒšgP›û
 &
Ïb–
, 
By‹Sšk
 &
de¡
,

69 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

70 if(
	`U_SUCCESS
(
”rÜCode
)) {

71 
UnicodeSŒšg
 
de¡SŒšg
;

72 
	`Ïb–ToASCII
(
UnicodeSŒšg
::
	`äomUTF8
(
Ïb–
), 
de¡SŒšg
,

73 
šfo
, 
”rÜCode
).
	`toUTF8
(
de¡
);

75 
	}
}

78 
	gIDNA
::
	$Ïb–ToUnicodeUTF8
(cÚ¡ 
SŒšgP›û
 &
Ïb–
, 
By‹Sšk
 &
de¡
,

79 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

80 if(
	`U_SUCCESS
(
”rÜCode
)) {

81 
UnicodeSŒšg
 
de¡SŒšg
;

82 
	`Ïb–ToUnicode
(
UnicodeSŒšg
::
	`äomUTF8
(
Ïb–
), 
de¡SŒšg
,

83 
šfo
, 
”rÜCode
).
	`toUTF8
(
de¡
);

85 
	}
}

88 
	gIDNA
::
	$ÇmeToASCII_UTF8
(cÚ¡ 
SŒšgP›û
 &
Çme
, 
By‹Sšk
 &
de¡
,

89 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

90 if(
	`U_SUCCESS
(
”rÜCode
)) {

91 
UnicodeSŒšg
 
de¡SŒšg
;

92 
	`ÇmeToASCII
(
UnicodeSŒšg
::
	`äomUTF8
(
Çme
), 
de¡SŒšg
,

93 
šfo
, 
”rÜCode
).
	`toUTF8
(
de¡
);

95 
	}
}

98 
	gIDNA
::
	$ÇmeToUnicodeUTF8
(cÚ¡ 
SŒšgP›û
 &
Çme
, 
By‹Sšk
 &
de¡
,

99 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

100 if(
	`U_SUCCESS
(
”rÜCode
)) {

101 
UnicodeSŒšg
 
de¡SŒšg
;

102 
	`ÇmeToUnicode
(
UnicodeSŒšg
::
	`äomUTF8
(
Çme
), 
de¡SŒšg
,

103 
šfo
, 
”rÜCode
).
	`toUTF8
(
de¡
);

105 
	}
}

107 
	$UOBJECT_DEFINE_NO_RTTI_IMPLEMENTATION
(
IDNA
)

111 şas 
	cUTS46
 : 
public
 
IDNA
 {

112 
public
:

113 
	`UTS46
(
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 &
”rÜCode
);

114 
vœtu®
 ~
	`UTS46
();

116 
vœtu®
 
UnicodeSŒšg
 &

117 
	$Ïb–ToASCII
(cÚ¡ 
UnicodeSŒšg
 &
Ïb–
, UnicodeSŒšg &
de¡
,

118 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

120 
vœtu®
 
UnicodeSŒšg
 &

121 
	$Ïb–ToUnicode
(cÚ¡ 
UnicodeSŒšg
 &
Ïb–
, UnicodeSŒšg &
de¡
,

122 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

124 
vœtu®
 
UnicodeSŒšg
 &

125 
	$ÇmeToASCII
(cÚ¡ 
UnicodeSŒšg
 &
Çme
, UnicodeSŒšg &
de¡
,

126 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

128 
vœtu®
 
UnicodeSŒšg
 &

129 
	$ÇmeToUnicode
(cÚ¡ 
UnicodeSŒšg
 &
Çme
, UnicodeSŒšg &
de¡
,

130 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

132 
vœtu®
 

133 
	$Ïb–ToASCII_UTF8
(cÚ¡ 
SŒšgP›û
 &
Ïb–
, 
By‹Sšk
 &
de¡
,

134 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

136 
vœtu®
 

137 
	$Ïb–ToUnicodeUTF8
(cÚ¡ 
SŒšgP›û
 &
Ïb–
, 
By‹Sšk
 &
de¡
,

138 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

140 
vœtu®
 

141 
	$ÇmeToASCII_UTF8
(cÚ¡ 
SŒšgP›û
 &
Çme
, 
By‹Sšk
 &
de¡
,

142 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

144 
vœtu®
 

145 
	$ÇmeToUnicodeUTF8
(cÚ¡ 
SŒšgP›û
 &
Çme
, 
By‹Sšk
 &
de¡
,

146 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

148 
´iv©e
:

149 
UnicodeSŒšg
 &

150 
	$´oûss
(cÚ¡ 
UnicodeSŒšg
 &
¤c
,

151 
UBoŞ
 
isLab–
, UBoŞ 
toASCII
,

152 
UnicodeSŒšg
 &
de¡
,

153 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

156 
	$´oûssUTF8
(cÚ¡ 
SŒšgP›û
 &
¤c
,

157 
UBoŞ
 
isLab–
, UBoŞ 
toASCII
,

158 
By‹Sšk
 &
de¡
,

159 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

161 
UnicodeSŒšg
 &

162 
	$´oûssUnicode
(cÚ¡ 
UnicodeSŒšg
 &
¤c
,

163 
št32_t
 
Ïb–S¹
, iÁ32_ˆ
m­pšgS¹
,

164 
UBoŞ
 
isLab–
, UBoŞ 
toASCII
,

165 
UnicodeSŒšg
 &
de¡
,

166 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

169 
št32_t


170 
	$m­DevCh¬s
(
UnicodeSŒšg
 &
de¡
, 
št32_t
 
Ïb–S¹
, iÁ32_ˆ
m­pšgS¹
,

171 
UE¼ÜCode
 &
”rÜCode
) const;

174 
št32_t


175 
	$´oûssLab–
(
UnicodeSŒšg
 &
de¡
,

176 
št32_t
 
Ïb–S¹
, iÁ32_ˆ
Ïb–L’gth
,

177 
UBoŞ
 
toASCII
,

178 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const;

179 
št32_t


180 
	$m¬kBadACELab–
(
UnicodeSŒšg
 &
de¡
,

181 
št32_t
 
Ïb–S¹
, iÁ32_ˆ
Ïb–L’gth
,

182 
UBoŞ
 
toASCII
, 
IDNAInfo
 &
šfo
) const;

185 
	$checkLab–BiDi
(cÚ¡ 
UCh¬
 *
Ïb–
, 
št32_t
 
Ïb–L’gth
, 
IDNAInfo
 &
šfo
) const;

187 
UBoŞ


188 
	$isLab–OkCÚ‹xtJ
(cÚ¡ 
UCh¬
 *
Ïb–
, 
št32_t
 
Ïb–L’gth
) const;

190 cÚ¡ 
NÜm®iz”2
 &
uts46NÜm2
;

191 
ušt32_t
 
İtiÚs
;

194 
IDNA
 *

195 
IDNA
::
	$ü—‹UTS46In¡ªû
(
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 &
”rÜCode
) {

196 if(
	`U_SUCCESS
(
”rÜCode
)) {

197 
IDNA
 *
idÇ
=
Ãw
 
	`UTS46
(
İtiÚs
, 
”rÜCode
);

198 if(
idÇ
==
NULL
) {

199 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

200 } if(
	`U_FAILURE
(
”rÜCode
)) {

201 
d–‘e
 
idÇ
;

202 
idÇ
=
NULL
;

204  
idÇ
;

206  
NULL
;

208 
	}
}

212 
	gUTS46
::
	$UTS46
(
ušt32_t
 
İt
, 
UE¼ÜCode
 &
”rÜCode
)

213 : 
	`uts46NÜm2
(*
NÜm®iz”2
::
	`g‘In¡ªû
(
NULL
, "uts46", 
UNORM2_COMPOSE
, 
”rÜCode
)),

214 
	$İtiÚs
(
İt
è{
	}
}

216 
	gUTS46
::~
	$UTS46
(è{
	}
}

218 
UnicodeSŒšg
 &

219 
UTS46
::
	$Ïb–ToASCII
(cÚ¡ 
UnicodeSŒšg
 &
Ïb–
, UnicodeSŒšg &
de¡
,

220 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

221  
	`´oûss
(
Ïb–
, 
TRUE
, TRUE, 
de¡
, 
šfo
, 
”rÜCode
);

222 
	}
}

224 
	gUnicodeSŒšg
 &

225 
	gUTS46
::
	$Ïb–ToUnicode
(cÚ¡ 
UnicodeSŒšg
 &
Ïb–
, UnicodeSŒšg &
de¡
,

226 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

227  
	`´oûss
(
Ïb–
, 
TRUE
, 
FALSE
, 
de¡
, 
šfo
, 
”rÜCode
);

228 
	}
}

230 
	gUnicodeSŒšg
 &

231 
	gUTS46
::
	$ÇmeToASCII
(cÚ¡ 
UnicodeSŒšg
 &
Çme
, UnicodeSŒšg &
de¡
,

232 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

233 
	`´oûss
(
Çme
, 
FALSE
, 
TRUE
, 
de¡
, 
šfo
, 
”rÜCode
);

234 ifĞ
de¡
.
	`Ëngth
()>=254 && (
šfo
.
”rÜs
&
UIDNA_ERROR_DOMAIN_NAME_TOO_LONG
)==0 &&

235 
	`isASCIISŒšg
(
de¡
) &&

236 (
de¡
.
	`Ëngth
()>254 || dest[253]!=0x2e)

238 
šfo
.
”rÜs
|=
UIDNA_ERROR_DOMAIN_NAME_TOO_LONG
;

240  
de¡
;

241 
	}
}

243 
	gUnicodeSŒšg
 &

244 
	gUTS46
::
	$ÇmeToUnicode
(cÚ¡ 
UnicodeSŒšg
 &
Çme
, UnicodeSŒšg &
de¡
,

245 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

246  
	`´oûss
(
Çme
, 
FALSE
, FALSE, 
de¡
, 
šfo
, 
”rÜCode
);

247 
	}
}

250 
	gUTS46
::
	$Ïb–ToASCII_UTF8
(cÚ¡ 
SŒšgP›û
 &
Ïb–
, 
By‹Sšk
 &
de¡
,

251 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

252 
	`´oûssUTF8
(
Ïb–
, 
TRUE
, TRUE, 
de¡
, 
šfo
, 
”rÜCode
);

253 
	}
}

256 
	gUTS46
::
	$Ïb–ToUnicodeUTF8
(cÚ¡ 
SŒšgP›û
 &
Ïb–
, 
By‹Sšk
 &
de¡
,

257 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

258 
	`´oûssUTF8
(
Ïb–
, 
TRUE
, 
FALSE
, 
de¡
, 
šfo
, 
”rÜCode
);

259 
	}
}

262 
	gUTS46
::
	$ÇmeToASCII_UTF8
(cÚ¡ 
SŒšgP›û
 &
Çme
, 
By‹Sšk
 &
de¡
,

263 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

264 
	`´oûssUTF8
(
Çme
, 
FALSE
, 
TRUE
, 
de¡
, 
šfo
, 
”rÜCode
);

265 
	}
}

268 
	gUTS46
::
	$ÇmeToUnicodeUTF8
(cÚ¡ 
SŒšgP›û
 &
Çme
, 
By‹Sšk
 &
de¡
,

269 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

270 
	`´oûssUTF8
(
Çme
, 
FALSE
, FALSE, 
de¡
, 
šfo
, 
”rÜCode
);

271 
	}
}

280 cÚ¡ 
št8_t
 
	gasciiD©a
[128]={

295 
	gUnicodeSŒšg
 &

296 
	gUTS46
::
	$´oûss
(cÚ¡ 
UnicodeSŒšg
 &
¤c
,

297 
UBoŞ
 
isLab–
, UBoŞ 
toASCII
,

298 
UnicodeSŒšg
 &
de¡
,

299 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

303 if(
	`U_FAILURE
(
”rÜCode
)) {

304 
de¡
.
	`£tToBogus
();

305  
de¡
;

307 cÚ¡ 
UCh¬
 *
¤cA¼ay
=
¤c
.
	`g‘Bufãr
();

308 if(&
de¡
==&
¤c
 || 
¤cA¼ay
==
NULL
) {

309 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

310 
de¡
.
	`£tToBogus
();

311  
de¡
;

314 
de¡
.
	`»move
();

315 
šfo
.
	`»£t
();

316 
št32_t
 
¤cL’gth
=
¤c
.
	`Ëngth
();

317 if(
¤cL’gth
==0) {

318 if(
toASCII
) {

319 
šfo
.
”rÜs
|=
UIDNA_ERROR_EMPTY_LABEL
;

321  
de¡
;

323 
UCh¬
 *
de¡A¼ay
=
de¡
.
	`g‘Bufãr
(
¤cL’gth
);

324 if(
de¡A¼ay
==
NULL
) {

325 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

326  
de¡
;

329 
UBoŞ
 
di§ÎowNÚLDHDÙ
=(
İtiÚs
&
UIDNA_USE_STD3_RULES
)!=0;

330 
št32_t
 
Ïb–S¹
=0;

331 
št32_t
 
i
;

332 
i
=0;; ++i) {

333 if(
i
==
¤cL’gth
) {

334 if(
toASCII
) {

335 if((
i
-
Ïb–S¹
)>63) {

336 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LABEL_TOO_LONG
;

339 if(!
isLab–
 && 
i
>=254 && (i>254 || 
Ïb–S¹
<i)) {

340 
šfo
.
”rÜs
|=
UIDNA_ERROR_DOMAIN_NAME_TOO_LONG
;

343 
šfo
.
”rÜs
|=šfo.
Ïb–E¼Üs
;

344 
de¡
.
	`»Ëa£Bufãr
(
i
);

345  
de¡
;

347 
UCh¬
 
c
=
¤cA¼ay
[
i
];

348 if(
c
>0x7f) {

351 
cD©a
=
asciiD©a
[
c
];

352 if(
cD©a
>0) {

353 
de¡A¼ay
[
i
]=
c
+0x20;

354 } if(
cD©a
<0 && 
di§ÎowNÚLDHDÙ
) {

357 
de¡A¼ay
[
i
]=
c
;

358 if(
c
==0x2d) {

359 if(
i
==(
Ïb–S¹
+3è&& 
¤cA¼ay
[i-1]==0x2d) {

361 ++
i
;

364 if(
i
==
Ïb–S¹
) {

366 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LEADING_HYPHEN
;

368 if((
i
+1)==
¤cL’gth
 || 
¤cA¼ay
[i+1]==0x2e) {

370 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_TRAILING_HYPHEN
;

372 } if(
c
==0x2e) {

373 if(
isLab–
) {

375 ++
i
;

378 if(
toASCII
) {

380 if(
i
==
Ïb–S¹
 && i<(
¤cL’gth
-1)) {

381 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_EMPTY_LABEL
;

382 } if((
i
-
Ïb–S¹
)>63) {

383 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LABEL_TOO_LONG
;

386 
šfo
.
”rÜs
|=šfo.
Ïb–E¼Üs
;

387 
šfo
.
Ïb–E¼Üs
=0;

388 
Ïb–S¹
=
i
+1;

392 
šfo
.
”rÜs
|=šfo.
Ïb–E¼Üs
;

393 
de¡
.
	`»Ëa£Bufãr
(
i
);

394 
	`´oûssUnicode
(
¤c
, 
Ïb–S¹
, 
i
, 
isLab–
, 
toASCII
, 
de¡
, 
šfo
, 
”rÜCode
);

395 ifĞ
šfo
.
isBiDi
 && 
	`U_SUCCESS
(
”rÜCode
è&& (šfo.
”rÜs
&
£v”eE¼Üs
)==0 &&

396 (!
šfo
.
isOkBiDi
 || (
Ïb–S¹
>0 && !
	`isASCIIOkBiDi
(
de¡
.
	`g‘Bufãr
(),†abelStart)))

398 
šfo
.
”rÜs
|=
UIDNA_ERROR_BIDI
;

400  
de¡
;

401 
	}
}

404 
	gUTS46
::
	$´oûssUTF8
(cÚ¡ 
SŒšgP›û
 &
¤c
,

405 
UBoŞ
 
isLab–
, UBoŞ 
toASCII
,

406 
By‹Sšk
 &
de¡
,

407 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

408 if(
	`U_FAILURE
(
”rÜCode
)) {

411 cÚ¡ *
¤cA¼ay
=
¤c
.
	`d©a
();

412 
št32_t
 
¤cL’gth
=
¤c
.
	`Ëngth
();

413 if(
¤cA¼ay
==
NULL
 && 
¤cL’gth
!=0) {

414 
”rÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

418 
šfo
.
	`»£t
();

419 if(
¤cL’gth
==0) {

420 if(
toASCII
) {

421 
šfo
.
”rÜs
|=
UIDNA_ERROR_EMPTY_LABEL
;

423 
de¡
.
	`Flush
();

426 
UnicodeSŒšg
 
de¡SŒšg
;

427 
št32_t
 
Ïb–S¹
=0;

428 if(
¤cL’gth
<=256) {

430 
¡ackA¼ay
[256];

431 
št32_t
 
de¡C­ac™y
;

432 *
de¡A¼ay
=
de¡
.
	`G‘Aµ’dBufãr
(
¤cL’gth
, srcLength+20,

433 
¡ackA¼ay
, 
	`LENGTHOF
(¡ackA¼ay), &
de¡C­ac™y
);

434 
UBoŞ
 
di§ÎowNÚLDHDÙ
=(
İtiÚs
&
UIDNA_USE_STD3_RULES
)!=0;

435 
št32_t
 
i
;

436 
i
=0;; ++i) {

437 if(
i
==
¤cL’gth
) {

438 if(
toASCII
) {

439 if((
i
-
Ïb–S¹
)>63) {

440 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LABEL_TOO_LONG
;

443 if(!
isLab–
 && 
i
>=254 && (i>254 || 
Ïb–S¹
<i)) {

444 
šfo
.
”rÜs
|=
UIDNA_ERROR_DOMAIN_NAME_TOO_LONG
;

447 
šfo
.
”rÜs
|=šfo.
Ïb–E¼Üs
;

448 
de¡
.
	`Aµ’d
(
de¡A¼ay
, 
i
);

449 
de¡
.
	`Flush
();

452 
c
=
¤cA¼ay
[
i
];

453 if((
št8_t
)
c
<0) {

456 
cD©a
=
asciiD©a
[()
c
];

457 if(
cD©a
>0) {

458 
de¡A¼ay
[
i
]=
c
+0x20;

459 } if(
cD©a
<0 && 
di§ÎowNÚLDHDÙ
) {

462 
de¡A¼ay
[
i
]=
c
;

463 if(
c
==0x2d) {

464 if(
i
==(
Ïb–S¹
+3è&& 
¤cA¼ay
[i-1]==0x2d) {

468 if(
i
==
Ïb–S¹
) {

470 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LEADING_HYPHEN
;

472 if((
i
+1)==
¤cL’gth
 || 
¤cA¼ay
[i+1]==0x2e) {

474 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_TRAILING_HYPHEN
;

476 } if(
c
==0x2e) {

477 if(
isLab–
) {

480 if(
toASCII
) {

482 if(
i
==
Ïb–S¹
 && i<(
¤cL’gth
-1)) {

483 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_EMPTY_LABEL
;

484 } if((
i
-
Ïb–S¹
)>63) {

485 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LABEL_TOO_LONG
;

488 
šfo
.
”rÜs
|=šfo.
Ïb–E¼Üs
;

489 
šfo
.
Ïb–E¼Üs
=0;

490 
Ïb–S¹
=
i
+1;

494 
šfo
.
”rÜs
|=šfo.
Ïb–E¼Üs
;

496 
št32_t
 
m­pšgS¹
=
i
-
Ïb–S¹
;

497 
de¡SŒšg
=
UnicodeSŒšg
::
	`äomUTF8
(
	`SŒšgP›û
(
de¡A¼ay
+
Ïb–S¹
, 
m­pšgS¹
));

499 
de¡
.
	`Aµ’d
(
de¡A¼ay
, 
Ïb–S¹
);

500 
	`´oûssUnicode
(
UnicodeSŒšg
::
	`äomUTF8
(
	`SŒšgP›û
(
¤c
, 
Ïb–S¹
)), 0, 
m­pšgS¹
,

501 
isLab–
, 
toASCII
,

502 
de¡SŒšg
, 
šfo
, 
”rÜCode
);

505 
	`´oûssUnicode
(
UnicodeSŒšg
::
	`äomUTF8
(
¤c
), 0, 0,

506 
isLab–
, 
toASCII
,

507 
de¡SŒšg
, 
šfo
, 
”rÜCode
);

509 
de¡SŒšg
.
	`toUTF8
(
de¡
);

510 if(
toASCII
 && !
isLab–
) {

513 
št32_t
 
Ëngth
=
Ïb–S¹
+
de¡SŒšg
.
	`Ëngth
();

514 ifĞ
Ëngth
>=254 && 
	`isASCIISŒšg
(
de¡SŒšg
) &&

515 (
Ëngth
>254 ||

516 (
Ïb–S¹
<254 && 
de¡SŒšg
[253-labelStart]!=0x2e))

518 
šfo
.
”rÜs
|=
UIDNA_ERROR_DOMAIN_NAME_TOO_LONG
;

521 ifĞ
šfo
.
isBiDi
 && 
	`U_SUCCESS
(
”rÜCode
è&& (šfo.
”rÜs
&
£v”eE¼Üs
)==0 &&

522 (!
šfo
.
isOkBiDi
 || (
Ïb–S¹
>0 && !
	`isASCIIOkBiDi
(
¤cA¼ay
,†abelStart)))

524 
šfo
.
”rÜs
|=
UIDNA_ERROR_BIDI
;

526 
	}
}

528 
	gUnicodeSŒšg
 &

529 
	gUTS46
::
	$´oûssUnicode
(cÚ¡ 
UnicodeSŒšg
 &
¤c
,

530 
št32_t
 
Ïb–S¹
, iÁ32_ˆ
m­pšgS¹
,

531 
UBoŞ
 
isLab–
, UBoŞ 
toASCII
,

532 
UnicodeSŒšg
 &
de¡
,

533 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

534 if(
m­pšgS¹
==0) {

535 
uts46NÜm2
.
	`nÜm®ize
(
¤c
, 
de¡
, 
”rÜCode
);

537 
uts46NÜm2
.
	`nÜm®izeSecÚdAndAµ’d
(
de¡
, 
¤c
.
	`‹mpSubSŒšg
(
m­pšgS¹
), 
”rÜCode
);

539 if(
	`U_FAILURE
(
”rÜCode
)) {

540  
de¡
;

542 
UBoŞ
 
doM­DevCh¬s
=

543 
toASCII
 ? (
İtiÚs
&
UIDNA_NONTRANSITIONAL_TO_ASCII
)==0 :

544 (
İtiÚs
&
UIDNA_NONTRANSITIONAL_TO_UNICODE
)==0;

545 cÚ¡ 
UCh¬
 *
de¡A¼ay
=
de¡
.
	`g‘Bufãr
();

546 
št32_t
 
de¡L’gth
=
de¡
.
	`Ëngth
();

547 
št32_t
 
Ïb–Lim™
=
Ïb–S¹
;

548 
Ïb–Lim™
<
de¡L’gth
) {

549 
UCh¬
 
c
=
de¡A¼ay
[
Ïb–Lim™
];

550 if(
c
==0x2&& !
isLab–
) {

551 
št32_t
 
Ïb–L’gth
=
Ïb–Lim™
-
Ïb–S¹
;

552 
št32_t
 
ÃwL’gth
=
	`´oûssLab–
(
de¡
, 
Ïb–S¹
, 
Ïb–L’gth
,

553 
toASCII
, 
šfo
, 
”rÜCode
);

554 
šfo
.
”rÜs
|=šfo.
Ïb–E¼Üs
;

555 
šfo
.
Ïb–E¼Üs
=0;

556 if(
	`U_FAILURE
(
”rÜCode
)) {

557  
de¡
;

559 
de¡A¼ay
=
de¡
.
	`g‘Bufãr
();

560 
de¡L’gth
+=
ÃwL’gth
-
Ïb–L’gth
;

561 
Ïb–Lim™
=
Ïb–S¹
+=
ÃwL’gth
+1;

562 } if(0xdf<=
c
 && c<=0x200d && (c==0xdf || c==0x3c2 || c>=0x200c)) {

563 
šfo
.
isT¿nsDiff
=
TRUE
;

564 if(
doM­DevCh¬s
) {

565 
de¡L’gth
=
	`m­DevCh¬s
(
de¡
, 
Ïb–S¹
, 
Ïb–Lim™
, 
”rÜCode
);

566 if(
	`U_FAILURE
(
”rÜCode
)) {

567  
de¡
;

569 
de¡A¼ay
=
de¡
.
	`g‘Bufãr
();

572 
doM­DevCh¬s
=
FALSE
;

574 ++
Ïb–Lim™
;

577 ++
Ïb–Lim™
;

583 if(0==
Ïb–S¹
 ||†ab–S¹<
Ïb–Lim™
) {

584 
	`´oûssLab–
(
de¡
, 
Ïb–S¹
, 
Ïb–Lim™
-labelStart,

585 
toASCII
, 
šfo
, 
”rÜCode
);

586 
šfo
.
”rÜs
|=šfo.
Ïb–E¼Üs
;

588  
de¡
;

589 
	}
}

591 
št32_t


592 
	gUTS46
::
	$m­DevCh¬s
(
UnicodeSŒšg
 &
de¡
, 
št32_t
 
Ïb–S¹
, iÁ32_ˆ
m­pšgS¹
,

593 
UE¼ÜCode
 &
”rÜCode
) const {

594 
št32_t
 
Ëngth
=
de¡
.
	`Ëngth
();

595 
UCh¬
 *
s
=
de¡
.
	`g‘Bufãr
(de¡[
m­pšgS¹
]==0xdà? 
Ëngth
+1 :†ength);

596 if(
s
==
NULL
) {

597 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

598  
Ëngth
;

600 
št32_t
 
ÿ·c™y
=
de¡
.
	`g‘C­ac™y
();

601 
UBoŞ
 
didM­DevCh¬s
=
FALSE
;

602 
št32_t
 
»adIndex
=
m­pšgS¹
, 
wr™eIndex
=mappingStart;

604 
UCh¬
 
c
=
s
[
»adIndex
++];

605 
c
) {

608 
didM­DevCh¬s
=
TRUE
;

609 
s
[
wr™eIndex
++]=0x73;

611 if(
wr™eIndex
==
»adIndex
) {

612 if(
Ëngth
==
ÿ·c™y
) {

613 
de¡
.
	`»Ëa£Bufãr
(
Ëngth
);

614 
s
=
de¡
.
	`g‘Bufãr
(
Ëngth
+1);

615 if(
s
==
NULL
) {

616 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

617  
Ëngth
;

619 
ÿ·c™y
=
de¡
.
	`g‘C­ac™y
();

621 
	`u_memmove
(
s
+
wr™eIndex
+1, s+wr™eIndex, 
Ëngth
-writeIndex);

622 ++
»adIndex
;

624 
s
[
wr™eIndex
++]=0x73;

625 ++
Ëngth
;

628 
didM­DevCh¬s
=
TRUE
;

629 
s
[
wr™eIndex
++]=0x3c3;

633 
didM­DevCh¬s
=
TRUE
;

634 --
Ëngth
;

638 
s
[
wr™eIndex
++]=
c
;

641 } 
wr™eIndex
<
Ëngth
);

642 
de¡
.
	`»Ëa£Bufãr
(
Ëngth
);

643 if(
didM­DevCh¬s
) {

647 
UnicodeSŒšg
 
nÜm®ized
;

648 
uts46NÜm2
.
	`nÜm®ize
(
de¡
.
	`‹mpSubSŒšg
(
Ïb–S¹
), 
nÜm®ized
, 
”rÜCode
);

649 if(
	`U_SUCCESS
(
”rÜCode
)) {

650 
de¡
.
	`»¶aû
(
Ïb–S¹
, 0x7fffffff, 
nÜm®ized
);

651  
de¡
.
	`Ëngth
();

654  
Ëngth
;

655 
	}
}

660 
šlše
 
UBoŞ


661 
	$isNÚASCIIDi§ÎowedSTD3V®id
(
UCh¬32
 
c
) {

662  
c
==0x2260 || c==0x226E || c==0x226F;

663 
	}
}

670 
št32_t


671 
	$»¶aûLab–
(
UnicodeSŒšg
 &
de¡
, 
št32_t
 
de¡Lab–S¹
, iÁ32_ˆ
de¡Lab–L’gth
,

672 cÚ¡ 
UnicodeSŒšg
 &
Ïb–
, 
št32_t
 
Ïb–L’gth
) {

673 if(&
Ïb–
!=&
de¡
) {

674 
de¡
.
	`»¶aû
(
de¡Lab–S¹
, 
de¡Lab–L’gth
, 
Ïb–
);

676  
Ïb–L’gth
;

677 
	}
}

679 
št32_t


680 
	gUTS46
::
	$´oûssLab–
(
UnicodeSŒšg
 &
de¡
,

681 
št32_t
 
Ïb–S¹
, iÁ32_ˆ
Ïb–L’gth
,

682 
UBoŞ
 
toASCII
,

683 
IDNAInfo
 &
šfo
, 
UE¼ÜCode
 &
”rÜCode
) const {

684 
UnicodeSŒšg
 
äomPunycode
;

685 
UnicodeSŒšg
 *
Ïb–SŒšg
;

686 cÚ¡ 
UCh¬
 *
Ïb–
=
de¡
.
	`g‘Bufãr
()+
Ïb–S¹
;

687 
št32_t
 
de¡Lab–S¹
=
Ïb–S¹
;

688 
št32_t
 
de¡Lab–L’gth
=
Ïb–L’gth
;

689 
UBoŞ
 
wasPunycode
;

690 if(
Ïb–L’gth
>=4 && 
Ïb–
[0]==0x78 &&†abel[1]==0x6e &&†abel[2]==0x2d &&†abel[3]==0x2d) {

692 
wasPunycode
=
TRUE
;

693 
UCh¬
 *
unicodeBufãr
=
äomPunycode
.
	`g‘Bufãr
(-1);

694 if(
unicodeBufãr
==
NULL
) {

696 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

697  
Ïb–L’gth
;

699 
UE¼ÜCode
 
punycodeE¼ÜCode
=
U_ZERO_ERROR
;

700 
št32_t
 
unicodeL’gth
=
	`u_¡rFromPunycode
(
Ïb–
+4, 
Ïb–L’gth
-4,

701 
unicodeBufãr
, 
äomPunycode
.
	`g‘C­ac™y
(),

702 
NULL
, &
punycodeE¼ÜCode
);

703 if(
punycodeE¼ÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

704 
äomPunycode
.
	`»Ëa£Bufãr
(0);

705 
unicodeBufãr
=
äomPunycode
.
	`g‘Bufãr
(
unicodeL’gth
);

706 if(
unicodeBufãr
==
NULL
) {

707 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

708  
Ïb–L’gth
;

710 
punycodeE¼ÜCode
=
U_ZERO_ERROR
;

711 
unicodeL’gth
=
	`u_¡rFromPunycode
(
Ïb–
+4, 
Ïb–L’gth
-4,

712 
unicodeBufãr
, 
äomPunycode
.
	`g‘C­ac™y
(),

713 
NULL
, &
punycodeE¼ÜCode
);

715 
äomPunycode
.
	`»Ëa£Bufãr
(
unicodeL’gth
);

716 if(
	`U_FAILURE
(
punycodeE¼ÜCode
)) {

717 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_PUNYCODE
;

718  
	`m¬kBadACELab–
(
de¡
, 
Ïb–S¹
, 
Ïb–L’gth
, 
toASCII
, 
šfo
);

727 
UBoŞ
 
isV®id
=
uts46NÜm2
.
	`isNÜm®ized
(
äomPunycode
, 
”rÜCode
);

728 if(
	`U_FAILURE
(
”rÜCode
)) {

729  
Ïb–L’gth
;

731 if(!
isV®id
) {

732 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_INVALID_ACE_LABEL
;

733  
	`m¬kBadACELab–
(
de¡
, 
Ïb–S¹
, 
Ïb–L’gth
, 
toASCII
, 
šfo
);

735 
Ïb–SŒšg
=&
äomPunycode
;

736 
Ïb–
=
äomPunycode
.
	`g‘Bufãr
();

737 
Ïb–S¹
=0;

738 
Ïb–L’gth
=
äomPunycode
.
	`Ëngth
();

740 
wasPunycode
=
FALSE
;

741 
Ïb–SŒšg
=&
de¡
;

744 if(
Ïb–L’gth
==0) {

745 if(
toASCII
) {

746 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_EMPTY_LABEL
;

748  
	`»¶aûLab–
(
de¡
, 
de¡Lab–S¹
, 
de¡Lab–L’gth
, *
Ïb–SŒšg
, 
Ïb–L’gth
);

751 if(
Ïb–L’gth
>=4 && 
Ïb–
[2]==0x2d &&†abel[3]==0x2d) {

753 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_HYPHEN_3_4
;

755 if(
Ïb–
[0]==0x2d) {

757 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LEADING_HYPHEN
;

759 if(
Ïb–
[
Ïb–L’gth
-1]==0x2d) {

761 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_TRAILING_HYPHEN
;

772 
UCh¬
 *
s
=(UCh¬ *)
Ïb–
;

773 cÚ¡ 
UCh¬
 *
lim™
=
Ïb–
+
Ïb–L’gth
;

774 
UCh¬
 
ÜedCh¬s
=0;

776 
UBoŞ
 
di§ÎowNÚLDHDÙ
=(
İtiÚs
&
UIDNA_USE_STD3_RULES
)!=0;

778 
UCh¬
 
c
=*
s
;

779 if(
c
<=0x7f) {

780 if(
c
==0x2e) {

781 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LABEL_HAS_DOT
;

782 *
s
=0xfffd;

783 } if(
di§ÎowNÚLDHDÙ
 && 
asciiD©a
[
c
]<0) {

784 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_DISALLOWED
;

785 *
s
=0xfffd;

788 
ÜedCh¬s
|=
c
;

789 if(
di§ÎowNÚLDHDÙ
 && 
	`isNÚASCIIDi§ÎowedSTD3V®id
(
c
)) {

790 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_DISALLOWED
;

791 *
s
=0xfffd;

792 } if(
c
==0xfffd) {

793 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_DISALLOWED
;

796 ++
s
;

797 } 
s
<
lim™
);

800 
UCh¬32
 
c
;

801 
št32_t
 
ıL’gth
=0;

803 
	`U16_NEXT_UNSAFE
(
Ïb–
, 
ıL’gth
, 
c
);

804 if((
	`U_GET_GC_MASK
(
c
)&
U_GC_M_MASK
)!=0) {

805 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LEADING_COMBINING_MARK
;

806 
Ïb–SŒšg
->
	`»¶aû
(
Ïb–S¹
, 
ıL’gth
, (
UCh¬
)0xfffd);

807 
Ïb–
=
Ïb–SŒšg
->
	`g‘Bufãr
()+
Ïb–S¹
;

808 
Ïb–L’gth
+=1-
ıL’gth
;

809 if(
Ïb–SŒšg
==&
de¡
) {

810 
de¡Lab–L’gth
=
Ïb–L’gth
;

813 if((
šfo
.
Ïb–E¼Üs
&
£v”eE¼Üs
)==0) {

816 if((
İtiÚs
&
UIDNA_CHECK_BIDI
)!=0 && (!
šfo
.
isBiDi
 || info.
isOkBiDi
)) {

817 
	`checkLab–BiDi
(
Ïb–
, 
Ïb–L’gth
, 
šfo
);

819 ifĞ(
İtiÚs
&
UIDNA_CHECK_CONTEXTJ
)!=0 && (
ÜedCh¬s
&0x200c)==0x200c &&

820 !
	`isLab–OkCÚ‹xtJ
(
Ïb–
, 
Ïb–L’gth
)

822 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_CONTEXTJ
;

824 if(
toASCII
) {

825 if(
wasPunycode
) {

827 if(
de¡Lab–L’gth
>63) {

828 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LABEL_TOO_LONG
;

830  
de¡Lab–L’gth
;

831 } if(
ÜedCh¬s
>=0x80) {

833 
UnicodeSŒšg
 
punycode
;

834 
UCh¬
 *
bufãr
=
punycode
.
	`g‘Bufãr
(63);

835 if(
bufãr
==
NULL
) {

836 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

837  
de¡Lab–L’gth
;

839 
bufãr
[0]=0x78;

840 
bufãr
[1]=0x6e;

841 
bufãr
[2]=0x2d;

842 
bufãr
[3]=0x2d;

843 
št32_t
 
punycodeL’gth
=
	`u_¡rToPunycode
(
Ïb–
, 
Ïb–L’gth
,

844 
bufãr
+4, 
punycode
.
	`g‘C­ac™y
()-4,

845 
NULL
, &
”rÜCode
);

846 if(
”rÜCode
==
U_BUFFER_OVERFLOW_ERROR
) {

847 
”rÜCode
=
U_ZERO_ERROR
;

848 
punycode
.
	`»Ëa£Bufãr
(4);

849 
bufãr
=
punycode
.
	`g‘Bufãr
(4+
punycodeL’gth
);

850 if(
bufãr
==
NULL
) {

851 
”rÜCode
=
U_MEMORY_ALLOCATION_ERROR
;

852  
de¡Lab–L’gth
;

854 
punycodeL’gth
=
	`u_¡rToPunycode
(
Ïb–
, 
Ïb–L’gth
,

855 
bufãr
+4, 
punycode
.
	`g‘C­ac™y
()-4,

856 
NULL
, &
”rÜCode
);

858 
punycodeL’gth
+=4;

859 
punycode
.
	`»Ëa£Bufãr
(
punycodeL’gth
);

860 if(
	`U_FAILURE
(
”rÜCode
)) {

861  
de¡Lab–L’gth
;

863 if(
punycodeL’gth
>63) {

864 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LABEL_TOO_LONG
;

866  
	`»¶aûLab–
(
de¡
, 
de¡Lab–S¹
, 
de¡Lab–L’gth
,

867 
punycode
, 
punycodeL’gth
);

870 if(
Ïb–L’gth
>63) {

871 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LABEL_TOO_LONG
;

878 if(
wasPunycode
) {

879 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_INVALID_ACE_LABEL
;

880  
	`m¬kBadACELab–
(
de¡
, 
de¡Lab–S¹
, 
de¡Lab–L’gth
, 
toASCII
, 
šfo
);

883  
	`»¶aûLab–
(
de¡
, 
de¡Lab–S¹
, 
de¡Lab–L’gth
, *
Ïb–SŒšg
, 
Ïb–L’gth
);

884 
	}
}

889 
št32_t


890 
	gUTS46
::
	$m¬kBadACELab–
(
UnicodeSŒšg
 &
de¡
,

891 
št32_t
 
Ïb–S¹
, iÁ32_ˆ
Ïb–L’gth
,

892 
UBoŞ
 
toASCII
, 
IDNAInfo
 &
šfo
) const {

893 
UBoŞ
 
di§ÎowNÚLDHDÙ
=(
İtiÚs
&
UIDNA_USE_STD3_RULES
)!=0;

894 
UBoŞ
 
isASCII
=
TRUE
;

895 
UBoŞ
 
ÚlyLDH
=
TRUE
;

896 cÚ¡ 
UCh¬
 *
Ïb–
=
de¡
.
	`g‘Bufãr
()+
Ïb–S¹
;

898 
UCh¬
 *
s
=(UCh¬ *)
Ïb–
+4;

899 cÚ¡ 
UCh¬
 *
lim™
=
Ïb–
+
Ïb–L’gth
;

901 
UCh¬
 
c
=*
s
;

902 if(
c
<=0x7f) {

903 if(
c
==0x2e) {

904 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LABEL_HAS_DOT
;

905 *
s
=0xfffd;

906 
isASCII
=
ÚlyLDH
=
FALSE
;

907 } if(
asciiD©a
[
c
]<0) {

908 
ÚlyLDH
=
FALSE
;

909 if(
di§ÎowNÚLDHDÙ
) {

910 *
s
=0xfffd;

911 
isASCII
=
FALSE
;

915 
isASCII
=
ÚlyLDH
=
FALSE
;

917 } ++
s
<
lim™
);

918 if(
ÚlyLDH
) {

919 
de¡
.
	`š£¹
(
Ïb–S¹
+
Ïb–L’gth
, (
UCh¬
)0xfffd);

920 ++
Ïb–L’gth
;

922 if(
toASCII
 && 
isASCII
 && 
Ïb–L’gth
>63) {

923 
šfo
.
Ïb–E¼Üs
|=
UIDNA_ERROR_LABEL_TOO_LONG
;

926  
Ïb–L’gth
;

927 
	}
}

929 cÚ¡ 
ušt32_t
 
	gL_MASK
=
U_MASK
(
U_LEFT_TO_RIGHT
);

930 cÚ¡ 
ušt32_t
 
	gR_AL_MASK
=
U_MASK
(
U_RIGHT_TO_LEFT
)|U_MASK(
U_RIGHT_TO_LEFT_ARABIC
);

931 cÚ¡ 
ušt32_t
 
	gL_R_AL_MASK
=
L_MASK
|
R_AL_MASK
;

933 cÚ¡ 
ušt32_t
 
	gR_AL_AN_MASK
=
R_AL_MASK
|
U_MASK
(
U_ARABIC_NUMBER
);

935 cÚ¡ 
ušt32_t
 
	gEN_AN_MASK
=
U_MASK
(
U_EUROPEAN_NUMBER
)|U_MASK(
U_ARABIC_NUMBER
);

936 cÚ¡ 
ušt32_t
 
	gR_AL_EN_AN_MASK
=
R_AL_MASK
|
EN_AN_MASK
;

937 cÚ¡ 
ušt32_t
 
	gL_EN_MASK
=
L_MASK
|
U_MASK
(
U_EUROPEAN_NUMBER
);

939 cÚ¡ 
ušt32_t
 
	gES_CS_ET_ON_BN_NSM_MASK
=

940 
U_MASK
(
U_EUROPEAN_NUMBER_SEPARATOR
)|

941 
U_MASK
(
U_COMMON_NUMBER_SEPARATOR
)|

942 
U_MASK
(
U_EUROPEAN_NUMBER_TERMINATOR
)|

943 
U_MASK
(
U_OTHER_NEUTRAL
)|

944 
U_MASK
(
U_BOUNDARY_NEUTRAL
)|

945 
U_MASK
(
U_DIR_NON_SPACING_MARK
);

946 cÚ¡ 
ušt32_t
 
	gL_EN_ES_CS_ET_ON_BN_NSM_MASK
=
L_EN_MASK
|
ES_CS_ET_ON_BN_NSM_MASK
;

947 cÚ¡ 
ušt32_t
 
	gR_AL_AN_EN_ES_CS_ET_ON_BN_NSM_MASK
=
R_AL_MASK
|
EN_AN_MASK
|
ES_CS_ET_ON_BN_NSM_MASK
;

955 
	gUTS46
::
	$checkLab–BiDi
(cÚ¡ 
UCh¬
 *
Ïb–
, 
št32_t
 
Ïb–L’gth
, 
IDNAInfo
 &
šfo
) const {

958 
UCh¬32
 
c
;

959 
št32_t
 
i
=0;

960 
	`U16_NEXT_UNSAFE
(
Ïb–
, 
i
, 
c
);

961 
ušt32_t
 
fœ¡Mask
=
	`U_MASK
(
	`u_ch¬DœeùiÚ
(
c
));

965 if((
fœ¡Mask
&~
L_R_AL_MASK
)!=0) {

966 
šfo
.
isOkBiDi
=
FALSE
;

969 
ušt32_t
 
Ï¡Mask
;

971 if(
i
>=
Ïb–L’gth
) {

972 
Ï¡Mask
=
fœ¡Mask
;

975 
	`U16_PREV_UNSAFE
(
Ïb–
, 
Ïb–L’gth
, 
c
);

976 
UCh¬DœeùiÚ
 
dœ
=
	`u_ch¬DœeùiÚ
(
c
);

977 if(
dœ
!=
U_DIR_NON_SPACING_MARK
) {

978 
Ï¡Mask
=
	`U_MASK
(
dœ
);

988 ifĞ(
fœ¡Mask
&
L_MASK
)!=0 ?

989 (
Ï¡Mask
&~
L_EN_MASK
)!=0 :

990 (
Ï¡Mask
&~
R_AL_EN_AN_MASK
)!=0

992 
šfo
.
isOkBiDi
=
FALSE
;

995 
ušt32_t
 
mask
=0;

996 
i
<
Ïb–L’gth
) {

997 
	`U16_NEXT_UNSAFE
(
Ïb–
, 
i
, 
c
);

998 
mask
|=
	`U_MASK
(
	`u_ch¬DœeùiÚ
(
c
));

1000 if(
fœ¡Mask
&
L_MASK
) {

1003 if((
mask
&~
L_EN_ES_CS_ET_ON_BN_NSM_MASK
)!=0) {

1004 
šfo
.
isOkBiDi
=
FALSE
;

1009 if((
mask
&~
R_AL_AN_EN_ES_CS_ET_ON_BN_NSM_MASK
)!=0) {

1010 
šfo
.
isOkBiDi
=
FALSE
;

1014 if((
mask
&
EN_AN_MASK
)==EN_AN_MASK) {

1015 
šfo
.
isOkBiDi
=
FALSE
;

1024 if(((
fœ¡Mask
|
mask
|
Ï¡Mask
)&
R_AL_AN_MASK
)!=0) {

1025 
šfo
.
isBiDi
=
TRUE
;

1027 
	}
}

1042 
UBoŞ


1043 
	$isASCIIOkBiDi
(cÚ¡ 
UCh¬
 *
s
, 
št32_t
 
Ëngth
) {

1044 
št32_t
 
Ïb–S¹
=0;

1045 
št32_t
 
i
=0; i<
Ëngth
; ++i) {

1046 
UCh¬
 
c
=
s
[
i
];

1047 if(
c
==0x2e) {

1048 if(
i
>
Ïb–S¹
) {

1049 
c
=
s
[
i
-1];

1050 if(!(0x61<=
c
 && c<=0x7a) && !(0x30<=c && c<=0x39)) {

1052  
FALSE
;

1055 
Ïb–S¹
=
i
+1;

1056 } if(
i
==
Ïb–S¹
) {

1057 if(!(0x61<=
c
 && c<=0x7a)) {

1059  
FALSE
;

1062 if(
c
<=0x20 && (c>=0x1c || (9<=c && c<=0xd))) {

1064  
FALSE
;

1068  
TRUE
;

1069 
	}
}

1074 
UBoŞ


1075 
	$isASCIIOkBiDi
(cÚ¡ *
s
, 
št32_t
 
Ëngth
) {

1076 
št32_t
 
Ïb–S¹
=0;

1077 
št32_t
 
i
=0; i<
Ëngth
; ++i) {

1078 
c
=
s
[
i
];

1079 if(
c
==0x2e) {

1080 if(
i
>
Ïb–S¹
) {

1081 
c
=
s
[
i
-1];

1082 if(!(0x61<=
c
 && c<=0x7a) && !(0x41<=c && c<=0x5a) && !(0x30<=c && c<=0x39)) {

1084  
FALSE
;

1087 
Ïb–S¹
=
i
+1;

1088 } if(
i
==
Ïb–S¹
) {

1089 if(!(0x61<=
c
 && c<=0x7a) && !(0x41<=c && c<=0x5a)) {

1091  
FALSE
;

1094 if(
c
<=0x20 && (c>=0x1c || (9<=c && c<=0xd))) {

1096  
FALSE
;

1100  
TRUE
;

1101 
	}
}

1103 
UBoŞ


1104 
	gUTS46
::
	$isLab–OkCÚ‹xtJ
(cÚ¡ 
UCh¬
 *
Ïb–
, 
št32_t
 
Ïb–L’gth
) const {

1107 
št32_t
 
i
=0; i<
Ïb–L’gth
; ++i) {

1108 if(
Ïb–
[
i
]==0x200c) {

1115 if(
i
==0) {

1116  
FALSE
;

1118 
UCh¬32
 
c
;

1119 
št32_t
 
j
=
i
;

1120 
	`U16_PREV_UNSAFE
(
Ïb–
, 
j
, 
c
);

1121 if(
	`u_g‘CombššgCÏss
(
c
)==9) {

1126 
UJoššgTy³
 
ty³
=(UJoššgTy³)
	`u_g‘IÁPrİ”tyV®ue
(
c
, 
UCHAR_JOINING_TYPE
);

1127 if(
ty³
==
U_JT_TRANSPARENT
) {

1128 if(
j
==0) {

1129  
FALSE
;

1131 
	`U16_PREV_UNSAFE
(
Ïb–
, 
j
, 
c
);

1132 } if(
ty³
==
U_JT_LEFT_JOINING
 ||y³==
U_JT_DUAL_JOINING
) {

1135  
FALSE
;

1139 
j
=
i
+1;;) {

1140 if(
j
==
Ïb–L’gth
) {

1141  
FALSE
;

1143 
	`U16_NEXT_UNSAFE
(
Ïb–
, 
j
, 
c
);

1144 
UJoššgTy³
 
ty³
=(UJoššgTy³)
	`u_g‘IÁPrİ”tyV®ue
(
c
, 
UCHAR_JOINING_TYPE
);

1145 if(
ty³
==
U_JT_TRANSPARENT
) {

1147 } if(
ty³
==
U_JT_RIGHT_JOINING
 ||y³==
U_JT_DUAL_JOINING
) {

1150  
FALSE
;

1153 } if(
Ïb–
[
i
]==0x200d) {

1158 if(
i
==0) {

1159  
FALSE
;

1161 
UCh¬32
 
c
;

1162 
št32_t
 
j
=
i
;

1163 
	`U16_PREV_UNSAFE
(
Ïb–
, 
j
, 
c
);

1164 if(
	`u_g‘CombššgCÏss
(
c
)!=9) {

1165  
FALSE
;

1169  
TRUE
;

1170 
	}
}

1172 
U_NAMESPACE_END


1176 
U_NAMESPACE_USE


1178 
U_DRAFT
 
UIDNA
 * 
U_EXPORT2


1179 
	$uidÇ_İ’UTS46
(
ušt32_t
 
İtiÚs
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1180  
»š‹½»t_ÿ¡
<
UIDNA
 *>(
IDNA
::
	`ü—‹UTS46In¡ªû
(
İtiÚs
, *
pE¼ÜCode
));

1181 
	}
}

1183 
U_DRAFT
 
U_EXPORT2


1184 
	$uidÇ_şo£
(
UIDNA
 *
idÇ
) {

1185 
d–‘e
 
»š‹½»t_ÿ¡
<
IDNA
 *>(
idÇ
);

1186 
	}
}

1188 
UBoŞ


1189 
	$checkArgs
(cÚ¡ *
Ïb–
, 
št32_t
 
Ëngth
,

1190 *
de¡
, 
št32_t
 
ÿ·c™y
,

1191 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1192 if(
	`U_FAILURE
(*
pE¼ÜCode
)) {

1193  
FALSE
;

1196 if(
pInfo
==
NULL
 ||…Info->
size
<16) {

1197 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1198  
FALSE
;

1200 ifĞ(
Ïb–
==
NULL
 ? 
Ëngth
!=0 :†ength<-1) ||

1201 (
de¡
==
NULL
 ? 
ÿ·c™y
!=0 : capacity<0) ||

1202 (
de¡
==
Ïb–
 &&†ab–!=
NULL
)

1204 *
pE¼ÜCode
=
U_ILLEGAL_ARGUMENT_ERROR
;

1205  
FALSE
;

1208 
	`u´v_mem£t
(&
pInfo
->
size
+1, 0,…Info->size-(pInfo->size));

1209  
TRUE
;

1210 
	}
}

1213 
	$idÇInfoToSŒuù
(
IDNAInfo
 &
šfo
, 
UIDNAInfo
 *
pInfo
) {

1214 
pInfo
->
isT¿ns™iÚ®Difã»Á
=
šfo
.
	`isT¿ns™iÚ®Difã»Á
();

1215 
pInfo
->
”rÜs
=
šfo
.
	`g‘E¼Üs
();

1216 
	}
}

1218 
U_DRAFT
 
št32_t
 
U_EXPORT2


1219 
	$uidÇ_Ïb–ToASCII
(cÚ¡ 
UIDNA
 *
idÇ
,

1220 cÚ¡ 
UCh¬
 *
Ïb–
, 
št32_t
 
Ëngth
,

1221 
UCh¬
 *
de¡
, 
št32_t
 
ÿ·c™y
,

1222 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1223 if(!
	`checkArgs
(
Ïb–
, 
Ëngth
, 
de¡
, 
ÿ·c™y
, 
pInfo
, 
pE¼ÜCode
)) {

1226 
UnicodeSŒšg
 
	`¤c
((
UBoŞ
)(
Ëngth
<0), 
Ïb–
,†ength);

1227 
UnicodeSŒšg
 
	`de¡SŒšg
(
de¡
, 0, 
ÿ·c™y
);

1228 
IDNAInfo
 
šfo
;

1229 
»š‹½»t_ÿ¡
<cÚ¡ 
IDNA
 *>(
idÇ
)->
	`Ïb–ToASCII
(
¤c
, 
de¡SŒšg
, 
šfo
, *
pE¼ÜCode
);

1230 
	`idÇInfoToSŒuù
(
šfo
, 
pInfo
);

1231  
de¡SŒšg
.
	`exŒaù
(
de¡
, 
ÿ·c™y
, *
pE¼ÜCode
);

1232 
	}
}

1234 
U_DRAFT
 
št32_t
 
U_EXPORT2


1235 
	$uidÇ_Ïb–ToUnicode
(cÚ¡ 
UIDNA
 *
idÇ
,

1236 cÚ¡ 
UCh¬
 *
Ïb–
, 
št32_t
 
Ëngth
,

1237 
UCh¬
 *
de¡
, 
št32_t
 
ÿ·c™y
,

1238 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1239 if(!
	`checkArgs
(
Ïb–
, 
Ëngth
, 
de¡
, 
ÿ·c™y
, 
pInfo
, 
pE¼ÜCode
)) {

1242 
UnicodeSŒšg
 
	`¤c
((
UBoŞ
)(
Ëngth
<0), 
Ïb–
,†ength);

1243 
UnicodeSŒšg
 
	`de¡SŒšg
(
de¡
, 0, 
ÿ·c™y
);

1244 
IDNAInfo
 
šfo
;

1245 
»š‹½»t_ÿ¡
<cÚ¡ 
IDNA
 *>(
idÇ
)->
	`Ïb–ToUnicode
(
¤c
, 
de¡SŒšg
, 
šfo
, *
pE¼ÜCode
);

1246 
	`idÇInfoToSŒuù
(
šfo
, 
pInfo
);

1247  
de¡SŒšg
.
	`exŒaù
(
de¡
, 
ÿ·c™y
, *
pE¼ÜCode
);

1248 
	}
}

1250 
U_DRAFT
 
št32_t
 
U_EXPORT2


1251 
	$uidÇ_ÇmeToASCII
(cÚ¡ 
UIDNA
 *
idÇ
,

1252 cÚ¡ 
UCh¬
 *
Çme
, 
št32_t
 
Ëngth
,

1253 
UCh¬
 *
de¡
, 
št32_t
 
ÿ·c™y
,

1254 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1255 if(!
	`checkArgs
(
Çme
, 
Ëngth
, 
de¡
, 
ÿ·c™y
, 
pInfo
, 
pE¼ÜCode
)) {

1258 
UnicodeSŒšg
 
	`¤c
((
UBoŞ
)(
Ëngth
<0), 
Çme
,†ength);

1259 
UnicodeSŒšg
 
	`de¡SŒšg
(
de¡
, 0, 
ÿ·c™y
);

1260 
IDNAInfo
 
šfo
;

1261 
»š‹½»t_ÿ¡
<cÚ¡ 
IDNA
 *>(
idÇ
)->
	`ÇmeToASCII
(
¤c
, 
de¡SŒšg
, 
šfo
, *
pE¼ÜCode
);

1262 
	`idÇInfoToSŒuù
(
šfo
, 
pInfo
);

1263  
de¡SŒšg
.
	`exŒaù
(
de¡
, 
ÿ·c™y
, *
pE¼ÜCode
);

1264 
	}
}

1266 
U_DRAFT
 
št32_t
 
U_EXPORT2


1267 
	$uidÇ_ÇmeToUnicode
(cÚ¡ 
UIDNA
 *
idÇ
,

1268 cÚ¡ 
UCh¬
 *
Çme
, 
št32_t
 
Ëngth
,

1269 
UCh¬
 *
de¡
, 
št32_t
 
ÿ·c™y
,

1270 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1271 if(!
	`checkArgs
(
Çme
, 
Ëngth
, 
de¡
, 
ÿ·c™y
, 
pInfo
, 
pE¼ÜCode
)) {

1274 
UnicodeSŒšg
 
	`¤c
((
UBoŞ
)(
Ëngth
<0), 
Çme
,†ength);

1275 
UnicodeSŒšg
 
	`de¡SŒšg
(
de¡
, 0, 
ÿ·c™y
);

1276 
IDNAInfo
 
šfo
;

1277 
»š‹½»t_ÿ¡
<cÚ¡ 
IDNA
 *>(
idÇ
)->
	`ÇmeToUnicode
(
¤c
, 
de¡SŒšg
, 
šfo
, *
pE¼ÜCode
);

1278 
	`idÇInfoToSŒuù
(
šfo
, 
pInfo
);

1279  
de¡SŒšg
.
	`exŒaù
(
de¡
, 
ÿ·c™y
, *
pE¼ÜCode
);

1280 
	}
}

1282 
U_DRAFT
 
št32_t
 
U_EXPORT2


1283 
	$uidÇ_Ïb–ToASCII_UTF8
(cÚ¡ 
UIDNA
 *
idÇ
,

1284 cÚ¡ *
Ïb–
, 
št32_t
 
Ëngth
,

1285 *
de¡
, 
št32_t
 
ÿ·c™y
,

1286 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1287 if(!
	`checkArgs
(
Ïb–
, 
Ëngth
, 
de¡
, 
ÿ·c™y
, 
pInfo
, 
pE¼ÜCode
)) {

1290 
SŒšgP›û
 
	`¤c
(
Ïb–
, 
Ëngth
<0 ? 
	`u´v_¡¾’
(label) :†ength);

1291 
CheckedA¼ayBy‹Sšk
 
	`sšk
(
de¡
, 
ÿ·c™y
);

1292 
IDNAInfo
 
šfo
;

1293 
»š‹½»t_ÿ¡
<cÚ¡ 
IDNA
 *>(
idÇ
)->
	`Ïb–ToASCII_UTF8
(
¤c
, 
sšk
, 
šfo
, *
pE¼ÜCode
);

1294 
	`idÇInfoToSŒuù
(
šfo
, 
pInfo
);

1295  
	`u_‹rmš©eCh¬s
(
de¡
, 
ÿ·c™y
, 
sšk
.
	`Numb”OfBy‹sAµ’ded
(), 
pE¼ÜCode
);

1296 
	}
}

1298 
U_DRAFT
 
št32_t
 
U_EXPORT2


1299 
	$uidÇ_Ïb–ToUnicodeUTF8
(cÚ¡ 
UIDNA
 *
idÇ
,

1300 cÚ¡ *
Ïb–
, 
št32_t
 
Ëngth
,

1301 *
de¡
, 
št32_t
 
ÿ·c™y
,

1302 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1303 if(!
	`checkArgs
(
Ïb–
, 
Ëngth
, 
de¡
, 
ÿ·c™y
, 
pInfo
, 
pE¼ÜCode
)) {

1306 
SŒšgP›û
 
	`¤c
(
Ïb–
, 
Ëngth
<0 ? 
	`u´v_¡¾’
(label) :†ength);

1307 
CheckedA¼ayBy‹Sšk
 
	`sšk
(
de¡
, 
ÿ·c™y
);

1308 
IDNAInfo
 
šfo
;

1309 
»š‹½»t_ÿ¡
<cÚ¡ 
IDNA
 *>(
idÇ
)->
	`Ïb–ToUnicodeUTF8
(
¤c
, 
sšk
, 
šfo
, *
pE¼ÜCode
);

1310 
	`idÇInfoToSŒuù
(
šfo
, 
pInfo
);

1311  
	`u_‹rmš©eCh¬s
(
de¡
, 
ÿ·c™y
, 
sšk
.
	`Numb”OfBy‹sAµ’ded
(), 
pE¼ÜCode
);

1312 
	}
}

1314 
U_DRAFT
 
št32_t
 
U_EXPORT2


1315 
	$uidÇ_ÇmeToASCII_UTF8
(cÚ¡ 
UIDNA
 *
idÇ
,

1316 cÚ¡ *
Çme
, 
št32_t
 
Ëngth
,

1317 *
de¡
, 
št32_t
 
ÿ·c™y
,

1318 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1319 if(!
	`checkArgs
(
Çme
, 
Ëngth
, 
de¡
, 
ÿ·c™y
, 
pInfo
, 
pE¼ÜCode
)) {

1322 
SŒšgP›û
 
	`¤c
(
Çme
, 
Ëngth
<0 ? 
	`u´v_¡¾’
(name) :†ength);

1323 
CheckedA¼ayBy‹Sšk
 
	`sšk
(
de¡
, 
ÿ·c™y
);

1324 
IDNAInfo
 
šfo
;

1325 
»š‹½»t_ÿ¡
<cÚ¡ 
IDNA
 *>(
idÇ
)->
	`ÇmeToASCII_UTF8
(
¤c
, 
sšk
, 
šfo
, *
pE¼ÜCode
);

1326 
	`idÇInfoToSŒuù
(
šfo
, 
pInfo
);

1327  
	`u_‹rmš©eCh¬s
(
de¡
, 
ÿ·c™y
, 
sšk
.
	`Numb”OfBy‹sAµ’ded
(), 
pE¼ÜCode
);

1328 
	}
}

1330 
U_DRAFT
 
št32_t
 
U_EXPORT2


1331 
	$uidÇ_ÇmeToUnicodeUTF8
(cÚ¡ 
UIDNA
 *
idÇ
,

1332 cÚ¡ *
Çme
, 
št32_t
 
Ëngth
,

1333 *
de¡
, 
št32_t
 
ÿ·c™y
,

1334 
UIDNAInfo
 *
pInfo
, 
UE¼ÜCode
 *
pE¼ÜCode
) {

1335 if(!
	`checkArgs
(
Çme
, 
Ëngth
, 
de¡
, 
ÿ·c™y
, 
pInfo
, 
pE¼ÜCode
)) {

1338 
SŒšgP›û
 
	`¤c
(
Çme
, 
Ëngth
<0 ? 
	`u´v_¡¾’
(name) :†ength);

1339 
CheckedA¼ayBy‹Sšk
 
	`sšk
(
de¡
, 
ÿ·c™y
);

1340 
IDNAInfo
 
šfo
;

1341 
»š‹½»t_ÿ¡
<cÚ¡ 
IDNA
 *>(
idÇ
)->
	`ÇmeToUnicodeUTF8
(
¤c
, 
sšk
, 
šfo
, *
pE¼ÜCode
);

1342 
	`idÇInfoToSŒuù
(
šfo
, 
pInfo
);

1343  
	`u_‹rmš©eCh¬s
(
de¡
, 
ÿ·c™y
, 
sšk
.
	`Numb”OfBy‹sAµ’ded
(), 
pE¼ÜCode
);

1344 
	}
}

	@utypes.c

16 
	~"unicode/uty³s.h
"

21 
	g_uE¼ÜInfoName
[
U_ERROR_WARNING_LIMIT
-
U_ERROR_WARNING_START
]={

34 
	g_uT¿nsE¼ÜName
[
U_PARSE_ERROR_LIMIT
 - 
U_PARSE_ERROR_START
]={

73 
	g_uE¼ÜName
[
U_STANDARD_ERROR_LIMIT
]={

108 
	g_uFmtE¼ÜName
[
U_FMT_PARSE_ERROR_LIMIT
 - 
U_FMT_PARSE_ERROR_START
] = {

129 
	g_uBrkE¼ÜName
[
U_BRK_ERROR_LIMIT
 - 
U_BRK_ERROR_START
] = {

147 
	g_uRegexE¼ÜName
[
U_REGEX_ERROR_LIMIT
 - 
U_REGEX_ERROR_START
] = {

171 
	g_uIDNAE¼ÜName
[
U_IDNA_ERROR_LIMIT
 - 
U_IDNA_ERROR_START
] = {

184 
	g_uPlugšE¼ÜName
[
U_PLUGIN_ERROR_LIMIT
 - 
U_PLUGIN_ERROR_START
] = {

189 
U_CAPI
 cÚ¡ * 
U_EXPORT2


190 
	$u_”rÜName
(
UE¼ÜCode
 
code
) {

191 if(
U_ZERO_ERROR
 <ğ
code
 && cod< 
U_STANDARD_ERROR_LIMIT
) {

192  
_uE¼ÜName
[
code
];

193 } if(
U_ERROR_WARNING_START
 <ğ
code
 && cod< 
U_ERROR_WARNING_LIMIT
) {

194  
_uE¼ÜInfoName
[
code
 - 
U_ERROR_WARNING_START
];

195 } if(
U_PARSE_ERROR_START
 <ğ
code
 && cod< 
U_PARSE_ERROR_LIMIT
){

196  
_uT¿nsE¼ÜName
[
code
 - 
U_PARSE_ERROR_START
];

197 } if(
U_FMT_PARSE_ERROR_START
 <ğ
code
 && cod< 
U_FMT_PARSE_ERROR_LIMIT
){

198  
_uFmtE¼ÜName
[
code
 - 
U_FMT_PARSE_ERROR_START
];

199 } ià(
U_BRK_ERROR_START
 <ğ
code
 && cod< 
U_BRK_ERROR_LIMIT
){

200  
_uBrkE¼ÜName
[
code
 - 
U_BRK_ERROR_START
];

201 } ià(
U_REGEX_ERROR_START
 <ğ
code
 && cod< 
U_REGEX_ERROR_LIMIT
) {

202  
_uRegexE¼ÜName
[
code
 - 
U_REGEX_ERROR_START
];

203 } if(
U_IDNA_ERROR_START
 <ğ
code
 && cod< 
U_IDNA_ERROR_LIMIT
) {

204  
_uIDNAE¼ÜName
[
code
 - 
U_IDNA_ERROR_START
];

205 } if(
U_PLUGIN_ERROR_START
 <ğ
code
 && cod< 
U_PLUGIN_ERROR_LIMIT
) {

206  
_uPlugšE¼ÜName
[
code
 - 
U_PLUGIN_ERROR_START
];

210 
	}
}

	@uvector.cpp

11 
	~"uveùÜ.h
"

12 
	~"cmemÜy.h
"

13 
	~"u¬rsÜt.h
"

15 
	gU_NAMESPACE_BEGIN


17 
	#DEFAULT_CAPACITY
 8

	)

24 
	#HINT_KEY_POINTER
 (1)

	)

25 
	#HINT_KEY_INTEGER
 (0)

	)

27 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
UVeùÜ
)

29 
UVeùÜ
::
	$UVeùÜ
(
UE¼ÜCode
 &
¡©us
) :

30 
	`couÁ
(0),

31 
	`ÿ·c™y
(0),

32 
	`–em’ts
(0),

33 
	`d–‘”
(0),

34 
	$com·»r
(0)

36 
	`_š™
(
DEFAULT_CAPACITY
, 
¡©us
);

37 
	}
}

39 
	gUVeùÜ
::
	$UVeùÜ
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
) :

40 
	`couÁ
(0),

41 
	`ÿ·c™y
(0),

42 
	`–em’ts
(0),

43 
	`d–‘”
(0),

44 
	$com·»r
(0)

46 
	`_š™
(
š™ŸlC­ac™y
, 
¡©us
);

47 
	}
}

49 
	gUVeùÜ
::
	$UVeùÜ
(
UObjeùD–‘”
 *
d
, 
UKeyCom·¿tÜ
 *
c
, 
UE¼ÜCode
 &
¡©us
) :

50 
	`couÁ
(0),

51 
	`ÿ·c™y
(0),

52 
	`–em’ts
(0),

53 
	`d–‘”
(
d
),

54 
	$com·»r
(
c
)

56 
	`_š™
(
DEFAULT_CAPACITY
, 
¡©us
);

57 
	}
}

59 
	gUVeùÜ
::
	$UVeùÜ
(
UObjeùD–‘”
 *
d
, 
UKeyCom·¿tÜ
 *
c
, 
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
) :

60 
	`couÁ
(0),

61 
	`ÿ·c™y
(0),

62 
	`–em’ts
(0),

63 
	`d–‘”
(
d
),

64 
	$com·»r
(
c
)

66 
	`_š™
(
š™ŸlC­ac™y
, 
¡©us
);

67 
	}
}

69 
	gUVeùÜ
::
	$_š™
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
) {

70 ià(
	`U_FAILURE
(
¡©us
)) {

74 ià((
š™ŸlC­ac™y
 < 1è|| (š™ŸlC­ac™y > (
št32_t
)(
INT32_MAX
 / (
UHashTok
)))) {

75 
š™ŸlC­ac™y
 = 
DEFAULT_CAPACITY
;

77 
–em’ts
 = (
UHashTok
 *)
	`u´v_m®loc
((UHashTok)*
š™ŸlC­ac™y
);

78 ià(
–em’ts
 == 0) {

79 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

81 
ÿ·c™y
 = 
š™ŸlC­ac™y
;

83 
	}
}

85 
	gUVeùÜ
::~
	$UVeùÜ
() {

86 
	`»moveAÎEËm’ts
();

87 
	`u´v_ä“
(
–em’ts
);

88 
–em’ts
 = 0;

89 
	}
}

95 
	gUVeùÜ
::
	$assign
(cÚ¡ 
UVeùÜ
& 
Ùh”
, 
UTok’AssigÃr
 *
assign
, 
UE¼ÜCode
 &
ec
) {

96 ià(
	`’su»C­ac™y
(
Ùh”
.
couÁ
, 
ec
)) {

97 
	`£tSize
(
Ùh”
.
couÁ
, 
ec
);

98 ià(
	`U_SUCCESS
(
ec
)) {

99 
št32_t
 
i
=0; i<
Ùh”
.
couÁ
; ++i) {

100 ià(
–em’ts
[
i
].
poš‹r
 !ğ0 && 
d–‘”
 != 0) {

101 (*
d–‘”
)(
–em’ts
[
i
].
poš‹r
);

103 (*
assign
)(&
–em’ts
[
i
], &
Ùh”
.elements[i]);

107 
	}
}

110 
UBoŞ
 
	gUVeùÜ
::
İ”©Ü
==(cÚ¡ 
UVeùÜ
& 
Ùh”
) {

111 
št32_t
 
i
;

112 ià(
	gcouÁ
 !ğ
Ùh”
.
couÁ
è 
FALSE
;

113 ià(
	gcom·»r
 !ğ
NULL
) {

115 
i
=0; 
	gi
<
	gcouÁ
; ++i) {

116 ià(!(*
	gcom·»r
)(
	g–em’ts
[
i
], 
	gÙh”
.elements[i])) {

117  
	gFALSE
;

121  
	gTRUE
;

124 
	gUVeùÜ
::
	$addEËm’t
(* 
obj
, 
UE¼ÜCode
 &
¡©us
) {

125 ià(
	`’su»C­ac™y
(
couÁ
 + 1, 
¡©us
)) {

126 
–em’ts
[
couÁ
++].
poš‹r
 = 
obj
;

128 
	}
}

130 
	gUVeùÜ
::
	$addEËm’t
(
št32_t
 
–em
, 
UE¼ÜCode
 &
¡©us
) {

131 ià(
	`’su»C­ac™y
(
couÁ
 + 1, 
¡©us
)) {

132 
–em’ts
[
couÁ
].
poš‹r
 = 
NULL
;

133 
–em’ts
[
couÁ
].
š‹g”
 = 
–em
;

134 
couÁ
++;

136 
	}
}

138 
	gUVeùÜ
::
	$£tEËm’tAt
(* 
obj
, 
št32_t
 
šdex
) {

139 ià(0 <ğ
šdex
 && index < 
couÁ
) {

140 ià(
–em’ts
[
šdex
].
poš‹r
 !ğ0 && 
d–‘”
 != 0) {

141 (*
d–‘”
)(
–em’ts
[
šdex
].
poš‹r
);

143 
–em’ts
[
šdex
].
poš‹r
 = 
obj
;

146 
	}
}

148 
	gUVeùÜ
::
	$£tEËm’tAt
(
št32_t
 
–em
, iÁ32_ˆ
šdex
) {

149 ià(0 <ğ
šdex
 && index < 
couÁ
) {

150 ià(
–em’ts
[
šdex
].
poš‹r
 !ğ0 && 
d–‘”
 != 0) {

152 (*
d–‘”
)(
–em’ts
[
šdex
].
poš‹r
);

154 
–em’ts
[
šdex
].
poš‹r
 = 
NULL
;

155 
–em’ts
[
šdex
].
š‹g”
 = 
–em
;

158 
	}
}

160 
	gUVeùÜ
::
	$š£¹EËm’tAt
(* 
obj
, 
št32_t
 
šdex
, 
UE¼ÜCode
 &
¡©us
) {

162 ià(0 <ğ
šdex
 && index <ğ
couÁ
 && 
	`’su»C­ac™y
(couÁ + 1, 
¡©us
)) {

163 
št32_t
 
i
=
couÁ
; i>
šdex
; --i) {

164 
–em’ts
[
i
] =ƒlements[i-1];

166 
–em’ts
[
šdex
].
poš‹r
 = 
obj
;

167 ++
couÁ
;

170 
	}
}

172 
	gUVeùÜ
::
	$š£¹EËm’tAt
(
št32_t
 
–em
, iÁ32_ˆ
šdex
, 
UE¼ÜCode
 &
¡©us
) {

174 ià(0 <ğ
šdex
 && index <ğ
couÁ
 && 
	`’su»C­ac™y
(couÁ + 1, 
¡©us
)) {

175 
št32_t
 
i
=
couÁ
; i>
šdex
; --i) {

176 
–em’ts
[
i
] =ƒlements[i-1];

178 
–em’ts
[
šdex
].
poš‹r
 = 
NULL
;

179 
–em’ts
[
šdex
].
š‹g”
 = 
–em
;

180 ++
couÁ
;

183 
	}
}

185 * 
	gUVeùÜ
::
	$–em’tAt
(
št32_t
 
šdex
) const {

186  (0 <ğ
šdex
 && index < 
couÁ
è? 
–em’ts
[šdex].
poš‹r
 : 0;

187 
	}
}

189 
št32_t
 
	gUVeùÜ
::
	$–em’tAti
(
št32_t
 
šdex
) const {

190  (0 <ğ
šdex
 && index < 
couÁ
è? 
–em’ts
[šdex].
š‹g”
 : 0;

191 
	}
}

193 
UBoŞ
 
	gUVeùÜ
::
	$cÚšsAÎ
(cÚ¡ 
UVeùÜ
& 
Ùh”
) const {

194 
št32_t
 
i
=0; i<
Ùh”
.
	`size
(); ++i) {

195 ià(
	`šdexOf
(
Ùh”
.
–em’ts
[
i
]) < 0) {

196  
FALSE
;

199  
TRUE
;

200 
	}
}

202 
UBoŞ
 
	gUVeùÜ
::
	$cÚšsNÚe
(cÚ¡ 
UVeùÜ
& 
Ùh”
) const {

203 
št32_t
 
i
=0; i<
Ùh”
.
	`size
(); ++i) {

204 ià(
	`šdexOf
(
Ùh”
.
–em’ts
[
i
]) >= 0) {

205  
FALSE
;

208  
TRUE
;

209 
	}
}

211 
UBoŞ
 
	gUVeùÜ
::
	$»moveAÎ
(cÚ¡ 
UVeùÜ
& 
Ùh”
) {

212 
UBoŞ
 
chªged
 = 
FALSE
;

213 
št32_t
 
i
=0; i<
Ùh”
.
	`size
(); ++i) {

214 
št32_t
 
j
 = 
	`šdexOf
(
Ùh”
.
–em’ts
[
i
]);

215 ià(
j
 >= 0) {

216 
	`»moveEËm’tAt
(
j
);

217 
chªged
 = 
TRUE
;

220  
chªged
;

221 
	}
}

223 
UBoŞ
 
	gUVeùÜ
::
	$»šAÎ
(cÚ¡ 
UVeùÜ
& 
Ùh”
) {

224 
UBoŞ
 
chªged
 = 
FALSE
;

225 
št32_t
 
j
=
	`size
()-1; j>=0; --j) {

226 
št32_t
 
i
 = 
Ùh”
.
	`šdexOf
(
–em’ts
[
j
]);

227 ià(
i
 < 0) {

228 
	`»moveEËm’tAt
(
j
);

229 
chªged
 = 
TRUE
;

232  
chªged
;

233 
	}
}

235 
	gUVeùÜ
::
	$»moveEËm’tAt
(
št32_t
 
šdex
) {

236 * 
e
 = 
	`ÜphªEËm’tAt
(
šdex
);

237 ià(
e
 !ğ0 && 
d–‘”
 != 0) {

238 (*
d–‘”
)(
e
);

240 
	}
}

242 
UBoŞ
 
	gUVeùÜ
::
	$»moveEËm’t
(* 
obj
) {

243 
št32_t
 
i
 = 
	`šdexOf
(
obj
);

244 ià(
i
 >= 0) {

245 
	`»moveEËm’tAt
(
i
);

246  
TRUE
;

248  
FALSE
;

249 
	}
}

251 
	gUVeùÜ
::
	$»moveAÎEËm’ts
() {

252 ià(
d–‘”
 != 0) {

253 
št32_t
 
i
=0; i<
couÁ
; ++i) {

254 ià(
–em’ts
[
i
].
poš‹r
 != 0) {

255 (*
d–‘”
)(
–em’ts
[
i
].
poš‹r
);

259 
couÁ
 = 0;

260 
	}
}

262 
UBoŞ
 
	gUVeùÜ
::
	$equ®s
(cÚ¡ 
UVeùÜ
 &
Ùh”
) const {

263 
i
;

265 ià(
this
->
couÁ
 !ğ
Ùh”
.count) {

266  
FALSE
;

268 ià(
com·»r
 == 0) {

269 
i
=0; i<
couÁ
; i++) {

270 ià(
–em’ts
[
i
].
poš‹r
 !ğ
Ùh”
.elements[i].pointer) {

271  
FALSE
;

275 
UHashTok
 
key
;

276 
i
=0; i<
couÁ
; i++) {

277 
key
.
poš‹r
 = &
Ùh”
.
–em’ts
[
i
];

278 ià(!(*
com·»r
)(
key
, 
–em’ts
[
i
])) {

279  
FALSE
;

283  
TRUE
;

284 
	}
}

288 
št32_t
 
	gUVeùÜ
::
	$šdexOf
(* 
obj
, 
št32_t
 
¡¬tIndex
) const {

289 
UHashTok
 
key
;

290 
key
.
poš‹r
 = 
obj
;

291  
	`šdexOf
(
key
, 
¡¬tIndex
, 
HINT_KEY_POINTER
);

292 
	}
}

294 
št32_t
 
	gUVeùÜ
::
	$šdexOf
(
št32_t
 
obj
, iÁ32_ˆ
¡¬tIndex
) const {

295 
UHashTok
 
key
;

296 
key
.
š‹g”
 = 
obj
;

297  
	`šdexOf
(
key
, 
¡¬tIndex
, 
HINT_KEY_INTEGER
);

298 
	}
}

301 
št32_t
 
	gUVeùÜ
::
	$šdexOf
(
UHashTok
 
key
, 
št32_t
 
¡¬tIndex
, 
št8_t
 
hšt
) const {

302 
št32_t
 
i
;

303 ià(
com·»r
 != 0) {

304 
i
=
¡¬tIndex
; i<
couÁ
; ++i) {

305 ià((*
com·»r
)(
key
, 
–em’ts
[
i
])) {

306  
i
;

310 
i
=
¡¬tIndex
; i<
couÁ
; ++i) {

314 ià(
hšt
 & 
HINT_KEY_POINTER
) {

315 ià(
key
.
poš‹r
 =ğ
–em’ts
[
i
].pointer) {

316  
i
;

319 ià(
key
.
š‹g”
 =ğ
–em’ts
[
i
].integer) {

320  
i
;

326 
	}
}

328 
UBoŞ
 
	gUVeùÜ
::
	$’su»C­ac™y
(
št32_t
 
mšimumC­ac™y
, 
UE¼ÜCode
 &
¡©us
) {

329 ià(
mšimumC­ac™y
 < 0) {

330 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

331  
FALSE
;

333 ià(
ÿ·c™y
 < 
mšimumC­ac™y
) {

334 ià(
ÿ·c™y
 > (
INT32_MAX
 - 1) / 2) {

335 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

336  
FALSE
;

338 
št32_t
 
ÃwC­
 = 
ÿ·c™y
 * 2;

339 ià(
ÃwC­
 < 
mšimumC­ac™y
) {

340 
ÃwC­
 = 
mšimumC­ac™y
;

342 ià(
ÃwC­
 > (
št32_t
)(
INT32_MAX
 / (
UHashTok
))) {

344 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

345  
FALSE
;

347 
UHashTok
* 
ÃwEËms
 = (UHashTok *)
	`u´v_»®loc
(
–em’ts
, (UHashTok)*
ÃwC­
);

348 ià(
ÃwEËms
 =ğ
NULL
) {

350 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

351  
FALSE
;

353 
–em’ts
 = 
ÃwEËms
;

354 
ÿ·c™y
 = 
ÃwC­
;

356  
TRUE
;

357 
	}
}

365 
	gUVeùÜ
::
	$£tSize
(
št32_t
 
ÃwSize
, 
UE¼ÜCode
 &
¡©us
) {

366 
št32_t
 
i
;

367 ià(
ÃwSize
 < 0) {

370 ià(
ÃwSize
 > 
couÁ
) {

371 ià(!
	`’su»C­ac™y
(
ÃwSize
, 
¡©us
)) {

374 
UHashTok
 
em±y
;

375 
em±y
.
poš‹r
 = 
NULL
;

376 
em±y
.
š‹g”
 = 0;

377 
i
=
couÁ
; i<
ÃwSize
; ++i) {

378 
–em’ts
[
i
] = 
em±y
;

382 
i
=
couÁ
-1; i>=
ÃwSize
; --i) {

383 
	`»moveEËm’tAt
(
i
);

386 
couÁ
 = 
ÃwSize
;

387 
	}
}

392 ** 
	gUVeùÜ
::
	$toA¼ay
(** 
»suÉ
) const {

393 ** 
a
 = 
»suÉ
;

394 
i
=0; i<
couÁ
; ++i) {

395 *
a
++ = 
–em’ts
[
i
].
poš‹r
;

397  
»suÉ
;

398 
	}
}

400 
UObjeùD–‘”
 *
	gUVeùÜ
::
	$£tD–‘”
(
UObjeùD–‘”
 *
d
) {

401 
UObjeùD–‘”
 *
Şd
 = 
d–‘”
;

402 
d–‘”
 = 
d
;

403  
Şd
;

404 
	}
}

406 
UKeyCom·¿tÜ
 *
	gUVeùÜ
::
	$£tCom·»r
(
UKeyCom·¿tÜ
 *
d
) {

407 
UKeyCom·¿tÜ
 *
Şd
 = 
com·»r
;

408 
com·»r
 = 
d
;

409  
Şd
;

410 
	}
}

421 * 
	gUVeùÜ
::
	$ÜphªEËm’tAt
(
št32_t
 
šdex
) {

422 * 
e
 = 0;

423 ià(0 <ğ
šdex
 && index < 
couÁ
) {

424 
e
 = 
–em’ts
[
šdex
].
poš‹r
;

425 
št32_t
 
i
=
šdex
; i<
couÁ
-1; ++i) {

426 
–em’ts
[
i
] =ƒlements[i+1];

428 --
couÁ
;

431  
e
;

432 
	}
}

439 
	gUVeùÜ
::
	$sÜ‹dIn£¹
(* 
obj
, 
USÜtCom·¿tÜ
 *
com·»
, 
UE¼ÜCode
& 
ec
) {

440 
UHashTok
 
tok
;

441 
tok
.
poš‹r
 = 
obj
;

442 
	`sÜ‹dIn£¹
(
tok
, 
com·»
, 
ec
);

443 
	}
}

450 
	gUVeùÜ
::
	$sÜ‹dIn£¹
(
št32_t
 
obj
, 
USÜtCom·¿tÜ
 *
com·»
, 
UE¼ÜCode
& 
ec
) {

451 
UHashTok
 
tok
;

452 
tok
.
š‹g”
 = 
obj
;

453 
	`sÜ‹dIn£¹
(
tok
, 
com·»
, 
ec
);

454 
	}
}

457 
	gUVeùÜ
::
	$sÜ‹dIn£¹
(
UHashTok
 
tok
, 
USÜtCom·¿tÜ
 *
com·»
, 
UE¼ÜCode
& 
ec
) {

463 
št32_t
 
mš
 = 0, 
max
 = 
couÁ
;

464 
mš
 !ğ
max
) {

465 
št32_t
 
´obe
 = (
mš
 + 
max
) / 2;

466 
št8_t
 
c
 = (*
com·»
)(
–em’ts
[
´obe
], 
tok
);

467 ià(
c
 > 0) {

468 
max
 = 
´obe
;

471 
mš
 = 
´obe
 + 1;

474 ià(
	`’su»C­ac™y
(
couÁ
 + 1, 
ec
)) {

475 
št32_t
 
i
=
couÁ
; i>
mš
; --i) {

476 
–em’ts
[
i
] =ƒlements[i-1];

478 
–em’ts
[
mš
] = 
tok
;

479 ++
couÁ
;

481 
	}
}

494 
št32_t
 
U_CALLCONV


495 
	$sÜtCom·¿tÜ
(cÚ¡ *
cÚ‹xt
, cÚ¡ *
Ëá
, cÚ¡ *
right
) {

496 
USÜtCom·¿tÜ
 *
com·»
 = *
¡©ic_ÿ¡
<USÜtCom·¿tÜ * cÚ¡ *>(
cÚ‹xt
);

497 
UHashTok
 
tok1
 = *
¡©ic_ÿ¡
<cÚ¡ UHashTok *>(
Ëá
);

498 
UHashTok
 
tok2
 = *
¡©ic_ÿ¡
<cÚ¡ UHashTok *>(
right
);

499 
št32_t
 
»suÉ
 = (*
com·»
)(
tok1
, 
tok2
);

500  
»suÉ
;

501 
	}
}

508 
št32_t
 
U_CALLCONV


509 
	$sÜtiCom·¿tÜ
(cÚ¡ * , cÚ¡ *
Ëá
, cÚ¡ *
right
) {

510 cÚ¡ 
UHashTok
 *
tok1
 = 
¡©ic_ÿ¡
<cÚ¡ UHashTok *>(
Ëá
);

511 cÚ¡ 
UHashTok
 *
tok2
 = 
¡©ic_ÿ¡
<cÚ¡ UHashTok *>(
right
);

512 
št32_t
 
»suÉ
 = 
tok1
->
š‹g”
 < 
tok2
->integer? -1 :

513 
tok1
->
š‹g”
 =ğ
tok2
->integer? 0 : 1;

514  
»suÉ
;

515 
	}
}

523 
	gUVeùÜ
::
	$sÜti
(
UE¼ÜCode
 &
ec
) {

524 ià(
	`U_SUCCESS
(
ec
)) {

525 
	`u´v_sÜtA¼ay
(
–em’ts
, 
couÁ
, (
UHashTok
),

526 
sÜtiCom·¿tÜ
, 
NULL
, 
FALSE
, &
ec
);

528 
	}
}

545 
	gUVeùÜ
::
	$sÜt
(
USÜtCom·¿tÜ
 *
com·»
, 
UE¼ÜCode
 &
ec
) {

546 ià(
	`U_SUCCESS
(
ec
)) {

547 
	`u´v_sÜtA¼ay
(
–em’ts
, 
couÁ
, (
UHashTok
),

548 
sÜtCom·¿tÜ
, &
com·»
, 
FALSE
, &
ec
);

550 
	}
}

552 
	gU_NAMESPACE_END


	@uvector.h

12 #iâdeà
UVECTOR_H


13 
	#UVECTOR_H


	)

15 
	~"unicode/uty³s.h
"

16 
	~"unicode/uobjeù.h
"

17 
	~"uhash.h
"

19 
U_NAMESPACE_BEGIN


28 
št8_t
 
	tU_CALLCONV
 
	tUSÜtCom·¿tÜ
(
	tUHashTok
 
	ttok1
,

29 
	tUHashTok
 
	ttok2
);

37 
	tU_CALLCONV
 
	tUTok’AssigÃr
(
	tUHashTok
 *
	td¡
,

38 
	tUHashTok
 *
	t¤c
);

90 şas 
	cU_COMMON_API
 
	mUVeùÜ
 : 
public
 
UObjeù
 {

98 
´iv©e
:

99 
št32_t
 
couÁ
;

101 
št32_t
 
	mÿ·c™y
;

103 
UHashTok
* 
	m–em’ts
;

105 
UObjeùD–‘”
 *
	md–‘”
;

107 
UKeyCom·¿tÜ
 *
	mcom·»r
;

109 
	mpublic
:

110 
UVeùÜ
(
UE¼ÜCode
 &
¡©us
);

112 
UVeùÜ
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

114 
UVeùÜ
(
UObjeùD–‘”
 *
d
, 
UKeyCom·¿tÜ
 *
c
, 
UE¼ÜCode
 &
¡©us
);

116 
UVeùÜ
(
UObjeùD–‘”
 *
d
, 
UKeyCom·¿tÜ
 *
c
, 
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

118 
	mvœtu®
 ~
UVeùÜ
();

124 
assign
(cÚ¡ 
UVeùÜ
& 
Ùh”
, 
UTok’AssigÃr
 *assign, 
UE¼ÜCode
 &
ec
);

131 
UBoŞ
 
	mİ”©Ü
==(cÚ¡ 
UVeùÜ
& 
Ùh”
);

136 
šlše
 
UBoŞ
 
	mİ”©Ü
!=(cÚ¡ 
UVeùÜ
& 
Ùh”
);

142 
addEËm’t
(* 
obj
, 
UE¼ÜCode
 &
¡©us
);

144 
addEËm’t
(
št32_t
 
–em
, 
UE¼ÜCode
 &
¡©us
);

146 
£tEËm’tAt
(* 
obj
, 
št32_t
 
šdex
);

148 
£tEËm’tAt
(
št32_t
 
–em
, iÁ32_ˆ
šdex
);

150 
š£¹EËm’tAt
(* 
obj
, 
št32_t
 
šdex
, 
UE¼ÜCode
 &
¡©us
);

152 
š£¹EËm’tAt
(
št32_t
 
–em
, iÁ32_ˆ
šdex
, 
UE¼ÜCode
 &
¡©us
);

154 * 
	$–em’tAt
(
št32_t
 
šdex
) const;

156 
št32_t
 
	$–em’tAti
(
št32_t
 
šdex
) const;

158 
UBoŞ
 
	$equ®s
(cÚ¡ 
UVeùÜ
 &
Ùh”
) const;

160 * 
	$fœ¡EËm’t
() const;

162 * 
	$Ï¡EËm’t
() const;

164 
št32_t
 
	$Ï¡EËm’ti
() const;

166 
št32_t
 
	$šdexOf
(* 
obj
, 
št32_t
 
¡¬tIndex
 = 0) const;

168 
št32_t
 
	$šdexOf
(
št32_t
 
obj
, iÁ32_ˆ
¡¬tIndex
 = 0) const;

170 
UBoŞ
 
	$cÚšs
(* 
obj
) const;

172 
UBoŞ
 
	$cÚšs
(
št32_t
 
obj
) const;

174 
UBoŞ
 
	$cÚšsAÎ
(cÚ¡ 
UVeùÜ
& 
Ùh”
) const;

176 
UBoŞ
 
	`»moveAÎ
(cÚ¡ 
UVeùÜ
& 
Ùh”
);

178 
UBoŞ
 
	`»šAÎ
(cÚ¡ 
UVeùÜ
& 
Ùh”
);

180 
	`»moveEËm’tAt
(
št32_t
 
šdex
);

182 
UBoŞ
 
	`»moveEËm’t
(* 
obj
);

184 
	`»moveAÎEËm’ts
();

186 
št32_t
 
	$size
() const;

188 
UBoŞ
 
	$isEm±y
() const;

190 
UBoŞ
 
	`’su»C­ac™y
(
št32_t
 
mšimumC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

198 
	`£tSize
(
št32_t
 
ÃwSize
, 
UE¼ÜCode
 &
¡©us
);

203 ** 
	$toA¼ay
(** 
»suÉ
) const;

209 
UObjeùD–‘”
 *
	`£tD–‘”
(UObjeùD–‘” *
d
);

211 
UKeyCom·¿tÜ
 *
	`£tCom·»r
(UKeyCom·¿tÜ *
c
);

213 * 
İ”©Ü
[](
št32_t
 
šdex
) const;

224 * 
	`ÜphªEËm’tAt
(
št32_t
 
šdex
);

232 
UBoŞ
 
	$cÚšsNÚe
(cÚ¡ 
UVeùÜ
& 
Ùh”
) const;

239 
	`sÜ‹dIn£¹
(* 
obj
, 
USÜtCom·¿tÜ
 *
com·»
, 
UE¼ÜCode
& 
ec
);

246 
	`sÜ‹dIn£¹
(
št32_t
 
obj
, 
USÜtCom·¿tÜ
 *
com·»
, 
UE¼ÜCode
& 
ec
);

252 
	`sÜti
(
UE¼ÜCode
 &
ec
);

260 
	`sÜt
(
USÜtCom·¿tÜ
 *
com·»
, 
UE¼ÜCode
 &
ec
);

265 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

270 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

272 
´iv©e
:

273 
	`_š™
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

275 
št32_t
 
	$šdexOf
(
UHashTok
 
key
, 
št32_t
 
¡¬tIndex
 = 0, 
št8_t
 
hšt
 = 0) const;

277 
	`sÜ‹dIn£¹
(
UHashTok
 
tok
, 
USÜtCom·¿tÜ
 *
com·»
, 
UE¼ÜCode
& 
ec
);

280 
	`UVeùÜ
(cÚ¡ 
UVeùÜ
&);

283 
UVeùÜ
& 
İ”©Ü
=(const UVector&);

304 şas 
	cU_COMMON_API
 
USck
 : 
public
 
UVeùÜ
 {

305 
public
:

306 
	`USck
(
UE¼ÜCode
 &
¡©us
);

308 
	`USck
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

310 
	`USck
(
UObjeùD–‘”
 *
d
, 
UKeyCom·¿tÜ
 *
c
, 
UE¼ÜCode
 &
¡©us
);

312 
	`USck
(
UObjeùD–‘”
 *
d
, 
UKeyCom·¿tÜ
 *
c
, 
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

314 
vœtu®
 ~
	`USck
();

319 
UBoŞ
 
	$em±y
() const;

321 * 
	$³ek
() const;

323 
št32_t
 
	$³eki
() const;

325 * 
	`pİ
();

327 
št32_t
 
	`pİi
();

329 * 
	`push
(* 
obj
, 
UE¼ÜCode
 &
¡©us
);

331 
št32_t
 
	`push
(št32_ˆ
i
, 
UE¼ÜCode
 &
¡©us
);

337 
št32_t
 
	$£¬ch
(* 
obj
) const;

342 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

347 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

349 
´iv©e
:

351 
	`USck
(cÚ¡ 
USck
&);

354 
USck
& 
İ”©Ü
=(const UStack&);

360 
šlše
 
št32_t
 
UVeùÜ
::
	$size
() const {

361  
couÁ
;

362 
	}
}

364 
šlše
 
UBoŞ
 
	gUVeùÜ
::
	$isEm±y
() const {

365  
couÁ
 == 0;

366 
	}
}

368 
šlše
 
UBoŞ
 
	gUVeùÜ
::
	$cÚšs
(* 
obj
) const {

369  
	`šdexOf
(
obj
) >= 0;

370 
	}
}

372 
šlše
 
UBoŞ
 
	gUVeùÜ
::
	$cÚšs
(
št32_t
 
obj
) const {

373  
	`šdexOf
(
obj
) >= 0;

374 
	}
}

376 
šlše
 * 
	gUVeùÜ
::
	$fœ¡EËm’t
() const {

377  
	`–em’tAt
(0);

378 
	}
}

380 
šlše
 * 
	gUVeùÜ
::
	$Ï¡EËm’t
() const {

381  
	`–em’tAt
(
couÁ
-1);

382 
	}
}

384 
šlše
 
št32_t
 
	gUVeùÜ
::
	$Ï¡EËm’ti
() const {

385  
	`–em’tAti
(
couÁ
-1);

386 
	}
}

388 
šlše
 * 
	gUVeùÜ
::
İ”©Ü
[](
št32_t
 
šdex
) const {

389  
–em’tAt
(
šdex
);

392 
šlše
 
UBoŞ
 
	gUVeùÜ
::
İ”©Ü
!=(cÚ¡ 
UVeùÜ
& 
Ùh”
) {

393  !
İ”©Ü
==(
Ùh”
);

398 
šlše
 
UBoŞ
 
	gUSck
::
	$em±y
() const {

399  
	`isEm±y
();

400 
	}
}

402 
šlše
 * 
	gUSck
::
	$³ek
() const {

403  
	`Ï¡EËm’t
();

404 
	}
}

406 
šlše
 
št32_t
 
	gUSck
::
	$³eki
() const {

407  
	`Ï¡EËm’ti
();

408 
	}
}

410 
šlše
 * 
	gUSck
::
	$push
(* 
obj
, 
UE¼ÜCode
 &
¡©us
) {

411 
	`addEËm’t
(
obj
, 
¡©us
);

412  
obj
;

413 
	}
}

415 
šlše
 
št32_t
 
	gUSck
::
	$push
(
št32_t
 
i
, 
UE¼ÜCode
 &
¡©us
) {

416 
	`addEËm’t
(
i
, 
¡©us
);

417  
i
;

418 
	}
}

420 
	gU_NAMESPACE_END


	@uvectr32.cpp

11 
	~"uveùr32.h
"

12 
	~"cmemÜy.h
"

13 
	~"putimp.h
"

15 
	gU_NAMESPACE_BEGIN


17 
	#DEFAULT_CAPACITY
 8

	)

25 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
UVeùÜ32
)

27 
UVeùÜ32
::
	$UVeùÜ32
(
UE¼ÜCode
 &
¡©us
) :

28 
	`couÁ
(0),

29 
	`ÿ·c™y
(0),

30 
	`maxC­ac™y
(0),

31 
	$–em’ts
(
NULL
)

33 
	`_š™
(
DEFAULT_CAPACITY
, 
¡©us
);

34 
	}
}

36 
	gUVeùÜ32
::
	$UVeùÜ32
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
) :

37 
	`couÁ
(0),

38 
	`ÿ·c™y
(0),

39 
	`maxC­ac™y
(0),

40 
	$–em’ts
(0)

42 
	`_š™
(
š™ŸlC­ac™y
, 
¡©us
);

43 
	}
}

47 
	gUVeùÜ32
::
	$_š™
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
) {

49 ià(
š™ŸlC­ac™y
 < 1) {

50 
š™ŸlC­ac™y
 = 
DEFAULT_CAPACITY
;

52 ià(
maxC­ac™y
>0 && maxC­ac™y<
š™ŸlC­ac™y
) {

53 
š™ŸlC­ac™y
 = 
maxC­ac™y
;

55 ià(
š™ŸlC­ac™y
 > (
št32_t
)(
INT32_MAX
 / (int32_t))) {

56 
š™ŸlC­ac™y
 = 
	`u´v_mš
(
DEFAULT_CAPACITY
, 
maxC­ac™y
);

58 
–em’ts
 = (
št32_t
 *)
	`u´v_m®loc
((št32_t)*
š™ŸlC­ac™y
);

59 ià(
–em’ts
 == 0) {

60 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

62 
ÿ·c™y
 = 
š™ŸlC­ac™y
;

64 
	}
}

66 
	gUVeùÜ32
::~
	$UVeùÜ32
() {

67 
	`u´v_ä“
(
–em’ts
);

68 
–em’ts
 = 0;

69 
	}
}

74 
	gUVeùÜ32
::
	$assign
(cÚ¡ 
UVeùÜ32
& 
Ùh”
, 
UE¼ÜCode
 &
ec
) {

75 ià(
	`’su»C­ac™y
(
Ùh”
.
couÁ
, 
ec
)) {

76 
	`£tSize
(
Ùh”
.
couÁ
);

77 
št32_t
 
i
=0; i<
Ùh”
.
couÁ
; ++i) {

78 
–em’ts
[
i
] = 
Ùh”
.elements[i];

81 
	}
}

84 
UBoŞ
 
	gUVeùÜ32
::
İ”©Ü
==(cÚ¡ 
UVeùÜ32
& 
Ùh”
) {

85 
št32_t
 
i
;

86 ià(
	gcouÁ
 !ğ
Ùh”
.
couÁ
è 
FALSE
;

87 
	gi
=0; i<
	gcouÁ
; ++i) {

88 ià(
	g–em’ts
[
i
] !ğ
Ùh”
.
–em’ts
[i]) {

89  
FALSE
;

92  
	gTRUE
;

96 
	gUVeùÜ32
::
	$£tEËm’tAt
(
št32_t
 
–em
, iÁ32_ˆ
šdex
) {

97 ià(0 <ğ
šdex
 && index < 
couÁ
) {

98 
–em’ts
[
šdex
] = 
–em
;

101 
	}
}

103 
	gUVeùÜ32
::
	$š£¹EËm’tAt
(
št32_t
 
–em
, iÁ32_ˆ
šdex
, 
UE¼ÜCode
 &
¡©us
) {

105 ià(0 <ğ
šdex
 && index <ğ
couÁ
 && 
	`’su»C­ac™y
(couÁ + 1, 
¡©us
)) {

106 
št32_t
 
i
=
couÁ
; i>
šdex
; --i) {

107 
–em’ts
[
i
] =ƒlements[i-1];

109 
–em’ts
[
šdex
] = 
–em
;

110 ++
couÁ
;

113 
	}
}

115 
UBoŞ
 
	gUVeùÜ32
::
	$cÚšsAÎ
(cÚ¡ 
UVeùÜ32
& 
Ùh”
) const {

116 
št32_t
 
i
=0; i<
Ùh”
.
	`size
(); ++i) {

117 ià(
	`šdexOf
(
Ùh”
.
–em’ts
[
i
]) < 0) {

118  
FALSE
;

121  
TRUE
;

122 
	}
}

124 
UBoŞ
 
	gUVeùÜ32
::
	$cÚšsNÚe
(cÚ¡ 
UVeùÜ32
& 
Ùh”
) const {

125 
št32_t
 
i
=0; i<
Ùh”
.
	`size
(); ++i) {

126 ià(
	`šdexOf
(
Ùh”
.
–em’ts
[
i
]) >= 0) {

127  
FALSE
;

130  
TRUE
;

131 
	}
}

133 
UBoŞ
 
	gUVeùÜ32
::
	$»moveAÎ
(cÚ¡ 
UVeùÜ32
& 
Ùh”
) {

134 
UBoŞ
 
chªged
 = 
FALSE
;

135 
št32_t
 
i
=0; i<
Ùh”
.
	`size
(); ++i) {

136 
št32_t
 
j
 = 
	`šdexOf
(
Ùh”
.
–em’ts
[
i
]);

137 ià(
j
 >= 0) {

138 
	`»moveEËm’tAt
(
j
);

139 
chªged
 = 
TRUE
;

142  
chªged
;

143 
	}
}

145 
UBoŞ
 
	gUVeùÜ32
::
	$»šAÎ
(cÚ¡ 
UVeùÜ32
& 
Ùh”
) {

146 
UBoŞ
 
chªged
 = 
FALSE
;

147 
št32_t
 
j
=
	`size
()-1; j>=0; --j) {

148 
št32_t
 
i
 = 
Ùh”
.
	`šdexOf
(
–em’ts
[
j
]);

149 ià(
i
 < 0) {

150 
	`»moveEËm’tAt
(
j
);

151 
chªged
 = 
TRUE
;

154  
chªged
;

155 
	}
}

157 
	gUVeùÜ32
::
	$»moveEËm’tAt
(
št32_t
 
šdex
) {

158 ià(
šdex
 >= 0) {

159 
št32_t
 
i
=
šdex
; i<
couÁ
-1; ++i) {

160 
–em’ts
[
i
] =ƒlements[i+1];

162 --
couÁ
;

164 
	}
}

166 
	gUVeùÜ32
::
	$»moveAÎEËm’ts
() {

167 
couÁ
 = 0;

168 
	}
}

170 
UBoŞ
 
	gUVeùÜ32
::
	$equ®s
(cÚ¡ 
UVeùÜ32
 &
Ùh”
) const {

171 
i
;

173 ià(
this
->
couÁ
 !ğ
Ùh”
.count) {

174  
FALSE
;

176 
i
=0; i<
couÁ
; i++) {

177 ià(
–em’ts
[
i
] !ğ
Ùh”
.elements[i]) {

178  
FALSE
;

181  
TRUE
;

182 
	}
}

187 
št32_t
 
	gUVeùÜ32
::
	$šdexOf
(
št32_t
 
key
, iÁ32_ˆ
¡¬tIndex
) const {

188 
št32_t
 
i
;

189 
i
=
¡¬tIndex
; i<
couÁ
; ++i) {

190 ià(
key
 =ğ
–em’ts
[
i
]) {

191  
i
;

195 
	}
}

198 
UBoŞ
 
	gUVeùÜ32
::
	$ex·ndC­ac™y
(
št32_t
 
mšimumC­ac™y
, 
UE¼ÜCode
 &
¡©us
) {

199 ià(
mšimumC­ac™y
 < 0) {

200 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

201  
FALSE
;

203 ià(
ÿ·c™y
 >ğ
mšimumC­ac™y
) {

204  
TRUE
;

206 ià(
maxC­ac™y
>0 && 
mšimumC­ac™y
>maxCapacity) {

207 
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

208  
FALSE
;

210 ià(
ÿ·c™y
 > (
INT32_MAX
 - 1) / 2) {

211 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

212  
FALSE
;

214 
št32_t
 
ÃwC­
 = 
ÿ·c™y
 * 2;

215 ià(
ÃwC­
 < 
mšimumC­ac™y
) {

216 
ÃwC­
 = 
mšimumC­ac™y
;

218 ià(
maxC­ac™y
 > 0 && 
ÃwC­
 > maxCapacity) {

219 
ÃwC­
 = 
maxC­ac™y
;

221 ià(
ÃwC­
 > (
št32_t
)(
INT32_MAX
 / (int32_t))) {

223 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

224  
FALSE
;

226 
št32_t
* 
ÃwEËms
 = (št32_ˆ*)
	`u´v_»®loc
(
–em’ts
, (št32_t)*
ÃwC­
);

227 ià(
ÃwEËms
 =ğ
NULL
) {

229 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

230  
FALSE
;

232 
–em’ts
 = 
ÃwEËms
;

233 
ÿ·c™y
 = 
ÃwC­
;

234  
TRUE
;

235 
	}
}

237 
	gUVeùÜ32
::
	$£tMaxC­ac™y
(
št32_t
 
lim™
) {

238 
	`U_ASSERT
(
lim™
 >= 0);

239 ià(
lim™
 < 0) {

240 
lim™
 = 0;

242 ià(
lim™
 > (
št32_t
)(
INT32_MAX
 / (int32_t))) {

246 
maxC­ac™y
 = 
lim™
;

247 ià(
ÿ·c™y
 <ğ
maxC­ac™y
 || maxCapacity == 0) {

254 
št32_t
* 
ÃwEËms
 = (št32_ˆ*)
	`u´v_»®loc
(
–em’ts
, (št32_t)*
maxC­ac™y
);

255 ià(
ÃwEËms
 =ğ
NULL
) {

260 
–em’ts
 = 
ÃwEËms
;

261 
ÿ·c™y
 = 
maxC­ac™y
;

262 ià(
couÁ
 > 
ÿ·c™y
) {

263 
couÁ
 = 
ÿ·c™y
;

265 
	}
}

273 
	gUVeùÜ32
::
	$£tSize
(
št32_t
 
ÃwSize
) {

274 
št32_t
 
i
;

275 ià(
ÃwSize
 < 0) {

278 ià(
ÃwSize
 > 
couÁ
) {

279 
UE¼ÜCode
 
ec
 = 
U_ZERO_ERROR
;

280 ià(!
	`’su»C­ac™y
(
ÃwSize
, 
ec
)) {

283 
i
=
couÁ
; i<
ÃwSize
; ++i) {

284 
–em’ts
[
i
] = 0;

287 
couÁ
 = 
ÃwSize
;

288 
	}
}

298 
	gUVeùÜ32
::
	$sÜ‹dIn£¹
(
št32_t
 
tok
, 
UE¼ÜCode
& 
ec
) {

304 
št32_t
 
mš
 = 0, 
max
 = 
couÁ
;

305 
mš
 !ğ
max
) {

306 
št32_t
 
´obe
 = (
mš
 + 
max
) / 2;

309 ià(
–em’ts
[
´obe
] > 
tok
) {

310 
max
 = 
´obe
;

313 
mš
 = 
´obe
 + 1;

316 ià(
	`’su»C­ac™y
(
couÁ
 + 1, 
ec
)) {

317 
št32_t
 
i
=
couÁ
; i>
mš
; --i) {

318 
–em’ts
[
i
] =ƒlements[i-1];

320 
–em’ts
[
mš
] = 
tok
;

321 ++
couÁ
;

323 
	}
}

329 
	gU_NAMESPACE_END


	@uvectr32.h

14 #iâdeà
UVECTOR32_H


15 
	#UVECTOR32_H


	)

17 
	~"unicode/uty³s.h
"

18 
	~"unicode/uobjeù.h
"

19 
	~"uhash.h
"

20 
	~"uas£¹.h
"

22 
U_NAMESPACE_BEGIN


59 şas 
	cU_COMMON_API
 
	mUVeùÜ32
 : 
public
 
UObjeù
 {

60 
´iv©e
:

61 
št32_t
 
couÁ
;

63 
št32_t
 
	mÿ·c™y
;

65 
št32_t
 
	mmaxC­ac™y
;

67 
št32_t
* 
	m–em’ts
;

69 
	mpublic
:

70 
UVeùÜ32
(
UE¼ÜCode
 &
¡©us
);

72 
UVeùÜ32
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

74 
	mvœtu®
 ~
UVeùÜ32
();

80 
assign
(cÚ¡ 
UVeùÜ32
& 
Ùh”
, 
UE¼ÜCode
 &
ec
);

87 
UBoŞ
 
	mİ”©Ü
==(cÚ¡ 
UVeùÜ32
& 
Ùh”
);

92 
šlše
 
UBoŞ
 
	mİ”©Ü
!=(cÚ¡ 
UVeùÜ32
& 
Ùh”
);

98 
addEËm’t
(
št32_t
 
–em
, 
UE¼ÜCode
 &
¡©us
);

100 
£tEËm’tAt
(
št32_t
 
–em
, iÁ32_ˆ
šdex
);

102 
š£¹EËm’tAt
(
št32_t
 
–em
, iÁ32_ˆ
šdex
, 
UE¼ÜCode
 &
¡©us
);

104 
št32_t
 
	$–em’tAti
(
št32_t
 
šdex
) const;

106 
UBoŞ
 
	$equ®s
(cÚ¡ 
UVeùÜ32
 &
Ùh”
) const;

108 
št32_t
 
	$Ï¡EËm’ti
() const;

110 
št32_t
 
	$šdexOf
(
št32_t
 
–em
, iÁ32_ˆ
¡¬tIndex
 = 0) const;

112 
UBoŞ
 
	$cÚšs
(
št32_t
 
–em
) const;

114 
UBoŞ
 
	$cÚšsAÎ
(cÚ¡ 
UVeùÜ32
& 
Ùh”
) const;

116 
UBoŞ
 
	`»moveAÎ
(cÚ¡ 
UVeùÜ32
& 
Ùh”
);

118 
UBoŞ
 
	`»šAÎ
(cÚ¡ 
UVeùÜ32
& 
Ùh”
);

120 
	`»moveEËm’tAt
(
št32_t
 
šdex
);

122 
	`»moveAÎEËm’ts
();

124 
št32_t
 
	$size
() const;

126 
UBoŞ
 
	$isEm±y
() const;

129 
šlše
 
UBoŞ
 
	`’su»C­ac™y
(
št32_t
 
mšimumC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

132 
UBoŞ
 
	`ex·ndC­ac™y
(
št32_t
 
mšimumC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

140 
	`£tSize
(
št32_t
 
ÃwSize
);

152 
UBoŞ
 
	$cÚšsNÚe
(cÚ¡ 
UVeùÜ32
& 
Ùh”
) const;

159 
	`sÜ‹dIn£¹
(
št32_t
 
–em
, 
UE¼ÜCode
& 
ec
);

164 
št32_t
 *
	$g‘Bufãr
() const;

172 
	`£tMaxC­ac™y
(
št32_t
 
lim™
);

177 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

182 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

184 
´iv©e
:

185 
	`_š™
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

188 
	`UVeùÜ32
(cÚ¡ 
UVeùÜ32
&);

191 
UVeùÜ32
& 
İ”©Ü
=(const UVector32&);

197 
public
:

198 
UBoŞ
 
	$em±y
() const;

200 
št32_t
 
	$³eki
() const;

202 
št32_t
 
	`pİi
();

204 
št32_t
 
	`push
(št32_ˆ
i
, 
UE¼ÜCode
 &
¡©us
);

206 
št32_t
 *
	`»£rveBlock
(št32_ˆ
size
, 
UE¼ÜCode
 &
¡©us
);

207 
št32_t
 *
	`pİF¿me
(št32_ˆ
size
);

213 
šlše
 
UBoŞ
 
UVeùÜ32
::
	$’su»C­ac™y
(
št32_t
 
mšimumC­ac™y
, 
UE¼ÜCode
 &
¡©us
) {

214 ià((
mšimumC­ac™y
 >ğ0è&& (
ÿ·c™y
 >= minimumCapacity)) {

215  
TRUE
;

217  
	`ex·ndC­ac™y
(
mšimumC­ac™y
, 
¡©us
);

219 
	}
}

221 
šlše
 
št32_t
 
	gUVeùÜ32
::
	$–em’tAti
(
št32_t
 
šdex
) const {

222  (0 <ğ
šdex
 && index < 
couÁ
è? 
–em’ts
[index] : 0;

223 
	}
}

226 
šlše
 
	gUVeùÜ32
::
	$addEËm’t
(
št32_t
 
–em
, 
UE¼ÜCode
 &
¡©us
) {

227 ià(
	`’su»C­ac™y
(
couÁ
 + 1, 
¡©us
)) {

228 
–em’ts
[
couÁ
] = 
–em
;

229 
couÁ
++;

231 
	}
}

233 
šlše
 
št32_t
 *
	gUVeùÜ32
::
	$»£rveBlock
(
št32_t
 
size
, 
UE¼ÜCode
 &
¡©us
) {

234 ià(
	`’su»C­ac™y
(
couÁ
+
size
, 
¡©us
è=ğ
FALSE
) {

235  
NULL
;

237 
št32_t
 *
½
 = 
–em’ts
+
couÁ
;

238 
couÁ
 +ğ
size
;

239  
½
;

240 
	}
}

242 
šlše
 
št32_t
 *
	gUVeùÜ32
::
	$pİF¿me
(
št32_t
 
size
) {

243 
	`U_ASSERT
(
couÁ
 >ğ
size
);

244 
couÁ
 -ğ
size
;

245 ià(
couÁ
 < 0) {

246 
couÁ
 = 0;

248  
–em’ts
+
couÁ
-
size
;

249 
	}
}

253 
šlše
 
št32_t
 
	gUVeùÜ32
::
	$size
() const {

254  
couÁ
;

255 
	}
}

257 
šlše
 
UBoŞ
 
	gUVeùÜ32
::
	$isEm±y
() const {

258  
couÁ
 == 0;

259 
	}
}

261 
šlše
 
UBoŞ
 
	gUVeùÜ32
::
	$cÚšs
(
št32_t
 
obj
) const {

262  
	`šdexOf
(
obj
) >= 0;

263 
	}
}

265 
šlše
 
št32_t
 
	gUVeùÜ32
::
	$Ï¡EËm’ti
() const {

266  
	`–em’tAti
(
couÁ
-1);

267 
	}
}

269 
šlše
 
UBoŞ
 
	gUVeùÜ32
::
İ”©Ü
!=(cÚ¡ 
UVeùÜ32
& 
Ùh”
) {

270  !
İ”©Ü
==(
Ùh”
);

273 
šlše
 
št32_t
 *
	gUVeùÜ32
::
	$g‘Bufãr
() const {

274  
–em’ts
;

275 
	}
}

280 
šlše
 
UBoŞ
 
	gUVeùÜ32
::
	$em±y
() const {

281  
	`isEm±y
();

282 
	}
}

284 
šlše
 
št32_t
 
	gUVeùÜ32
::
	$³eki
() const {

285  
	`Ï¡EËm’ti
();

286 
	}
}

288 
šlše
 
št32_t
 
	gUVeùÜ32
::
	$push
(
št32_t
 
i
, 
UE¼ÜCode
 &
¡©us
) {

289 
	`addEËm’t
(
i
, 
¡©us
);

290  
i
;

291 
	}
}

293 
šlše
 
št32_t
 
	gUVeùÜ32
::
	$pİi
() {

294 
št32_t
 
»suÉ
 = 0;

295 ià(
couÁ
 > 0) {

296 
couÁ
--;

297 
»suÉ
 = 
–em’ts
[
couÁ
];

299  
»suÉ
;

300 
	}
}

302 
	gU_NAMESPACE_END


	@uvectr64.cpp

8 
	~"uveùr64.h
"

9 
	~"cmemÜy.h
"

10 
	~"putimp.h
"

12 
	gU_NAMESPACE_BEGIN


14 
	#DEFAULT_CAPACITY
 8

	)

22 
	$UOBJECT_DEFINE_RTTI_IMPLEMENTATION
(
UVeùÜ64
)

24 
UVeùÜ64
::
	$UVeùÜ64
(
UE¼ÜCode
 &
¡©us
) :

25 
	`couÁ
(0),

26 
	`ÿ·c™y
(0),

27 
	`maxC­ac™y
(0),

28 
	$–em’ts
(
NULL
)

30 
	`_š™
(
DEFAULT_CAPACITY
, 
¡©us
);

31 
	}
}

33 
	gUVeùÜ64
::
	$UVeùÜ64
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
) :

34 
	`couÁ
(0),

35 
	`ÿ·c™y
(0),

36 
	`maxC­ac™y
(0),

37 
	$–em’ts
(0)

39 
	`_š™
(
š™ŸlC­ac™y
, 
¡©us
);

40 
	}
}

44 
	gUVeùÜ64
::
	$_š™
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
) {

46 ià(
š™ŸlC­ac™y
 < 1) {

47 
š™ŸlC­ac™y
 = 
DEFAULT_CAPACITY
;

49 ià(
maxC­ac™y
>0 && maxC­ac™y<
š™ŸlC­ac™y
) {

50 
š™ŸlC­ac™y
 = 
maxC­ac™y
;

52 ià(
š™ŸlC­ac™y
 > (
št32_t
)(
INT32_MAX
 / (
št64_t
))) {

53 
š™ŸlC­ac™y
 = 
	`u´v_mš
(
DEFAULT_CAPACITY
, 
maxC­ac™y
);

55 
–em’ts
 = (
št64_t
 *)
	`u´v_m®loc
((št64_t)*
š™ŸlC­ac™y
);

56 ià(
–em’ts
 == 0) {

57 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

59 
ÿ·c™y
 = 
š™ŸlC­ac™y
;

61 
	}
}

63 
	gUVeùÜ64
::~
	$UVeùÜ64
() {

64 
	`u´v_ä“
(
–em’ts
);

65 
–em’ts
 = 0;

66 
	}
}

71 
	gUVeùÜ64
::
	$assign
(cÚ¡ 
UVeùÜ64
& 
Ùh”
, 
UE¼ÜCode
 &
ec
) {

72 ià(
	`’su»C­ac™y
(
Ùh”
.
couÁ
, 
ec
)) {

73 
	`£tSize
(
Ùh”
.
couÁ
);

74 
št32_t
 
i
=0; i<
Ùh”
.
couÁ
; ++i) {

75 
–em’ts
[
i
] = 
Ùh”
.elements[i];

78 
	}
}

81 
UBoŞ
 
	gUVeùÜ64
::
İ”©Ü
==(cÚ¡ 
UVeùÜ64
& 
Ùh”
) {

82 
št32_t
 
i
;

83 ià(
	gcouÁ
 !ğ
Ùh”
.
couÁ
è 
FALSE
;

84 
	gi
=0; i<
	gcouÁ
; ++i) {

85 ià(
	g–em’ts
[
i
] !ğ
Ùh”
.
–em’ts
[i]) {

86  
FALSE
;

89  
	gTRUE
;

93 
	gUVeùÜ64
::
	$£tEËm’tAt
(
št64_t
 
–em
, 
št32_t
 
šdex
) {

94 ià(0 <ğ
šdex
 && index < 
couÁ
) {

95 
–em’ts
[
šdex
] = 
–em
;

98 
	}
}

100 
	gUVeùÜ64
::
	$š£¹EËm’tAt
(
št64_t
 
–em
, 
št32_t
 
šdex
, 
UE¼ÜCode
 &
¡©us
) {

102 ià(0 <ğ
šdex
 && index <ğ
couÁ
 && 
	`’su»C­ac™y
(couÁ + 1, 
¡©us
)) {

103 
št32_t
 
i
=
couÁ
; i>
šdex
; --i) {

104 
–em’ts
[
i
] =ƒlements[i-1];

106 
–em’ts
[
šdex
] = 
–em
;

107 ++
couÁ
;

110 
	}
}

112 
	gUVeùÜ64
::
	$»moveAÎEËm’ts
() {

113 
couÁ
 = 0;

114 
	}
}

116 
UBoŞ
 
	gUVeùÜ64
::
	$ex·ndC­ac™y
(
št32_t
 
mšimumC­ac™y
, 
UE¼ÜCode
 &
¡©us
) {

117 ià(
mšimumC­ac™y
 < 0) {

118 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

119  
FALSE
;

121 ià(
ÿ·c™y
 >ğ
mšimumC­ac™y
) {

122  
TRUE
;

124 ià(
maxC­ac™y
>0 && 
mšimumC­ac™y
>maxCapacity) {

125 
¡©us
 = 
U_BUFFER_OVERFLOW_ERROR
;

126  
FALSE
;

128 ià(
ÿ·c™y
 > (
INT32_MAX
 - 1) / 2) {

129 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

130  
FALSE
;

132 
št32_t
 
ÃwC­
 = 
ÿ·c™y
 * 2;

133 ià(
ÃwC­
 < 
mšimumC­ac™y
) {

134 
ÃwC­
 = 
mšimumC­ac™y
;

136 ià(
maxC­ac™y
 > 0 && 
ÃwC­
 > maxCapacity) {

137 
ÃwC­
 = 
maxC­ac™y
;

139 ià(
ÃwC­
 > (
št32_t
)(
INT32_MAX
 / (
št64_t
))) {

141 
¡©us
 = 
U_ILLEGAL_ARGUMENT_ERROR
;

142  
FALSE
;

144 
št64_t
* 
ÃwEËms
 = (št64_ˆ*)
	`u´v_»®loc
(
–em’ts
, (št64_t)*
ÃwC­
);

145 ià(
ÃwEËms
 =ğ
NULL
) {

147 
¡©us
 = 
U_MEMORY_ALLOCATION_ERROR
;

148  
FALSE
;

150 
–em’ts
 = 
ÃwEËms
;

151 
ÿ·c™y
 = 
ÃwC­
;

152  
TRUE
;

153 
	}
}

155 
	gUVeùÜ64
::
	$£tMaxC­ac™y
(
št32_t
 
lim™
) {

156 
	`U_ASSERT
(
lim™
 >= 0);

157 ià(
lim™
 < 0) {

158 
lim™
 = 0;

160 ià(
lim™
 > (
št32_t
)(
INT32_MAX
 / (
št64_t
))) {

164 
maxC­ac™y
 = 
lim™
;

165 ià(
ÿ·c™y
 <ğ
maxC­ac™y
 || maxCapacity == 0) {

172 
št64_t
* 
ÃwEËms
 = (št64_ˆ*)
	`u´v_»®loc
(
–em’ts
, (št64_t)*
maxC­ac™y
);

173 ià(
ÃwEËms
 =ğ
NULL
) {

178 
–em’ts
 = 
ÃwEËms
;

179 
ÿ·c™y
 = 
maxC­ac™y
;

180 ià(
couÁ
 > 
ÿ·c™y
) {

181 
couÁ
 = 
ÿ·c™y
;

183 
	}
}

191 
	gUVeùÜ64
::
	$£tSize
(
št32_t
 
ÃwSize
) {

192 
št32_t
 
i
;

193 ià(
ÃwSize
 < 0) {

196 ià(
ÃwSize
 > 
couÁ
) {

197 
UE¼ÜCode
 
ec
 = 
U_ZERO_ERROR
;

198 ià(!
	`’su»C­ac™y
(
ÃwSize
, 
ec
)) {

201 
i
=
couÁ
; i<
ÃwSize
; ++i) {

202 
–em’ts
[
i
] = 0;

205 
couÁ
 = 
ÃwSize
;

206 
	}
}

208 
	gU_NAMESPACE_END


	@uvectr64.h

14 #iâdeà
UVECTOR64_H


15 
	#UVECTOR64_H


	)

17 
	~"unicode/uty³s.h
"

18 
	~"unicode/uobjeù.h
"

19 
	~"uhash.h
"

20 
	~"uas£¹.h
"

22 
U_NAMESPACE_BEGIN


58 şas 
	cU_COMMON_API
 
	mUVeùÜ64
 : 
public
 
UObjeù
 {

59 
´iv©e
:

60 
št32_t
 
couÁ
;

62 
št32_t
 
	mÿ·c™y
;

64 
št32_t
 
	mmaxC­ac™y
;

66 
št64_t
* 
	m–em’ts
;

68 
	mpublic
:

69 
UVeùÜ64
(
UE¼ÜCode
 &
¡©us
);

71 
UVeùÜ64
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

73 
	mvœtu®
 ~
UVeùÜ64
();

79 
assign
(cÚ¡ 
UVeùÜ64
& 
Ùh”
, 
UE¼ÜCode
 &
ec
);

86 
UBoŞ
 
	mİ”©Ü
==(cÚ¡ 
UVeùÜ64
& 
Ùh”
);

91 
šlše
 
UBoŞ
 
	mİ”©Ü
!=(cÚ¡ 
UVeùÜ64
& 
Ùh”
);

97 
addEËm’t
(
št64_t
 
–em
, 
UE¼ÜCode
 &
¡©us
);

99 
£tEËm’tAt
(
št64_t
 
–em
, 
št32_t
 
šdex
);

101 
š£¹EËm’tAt
(
št64_t
 
–em
, 
št32_t
 
šdex
, 
UE¼ÜCode
 &
¡©us
);

103 
št64_t
 
	$–em’tAti
(
št32_t
 
šdex
) const;

107 
št64_t
 
	$Ï¡EËm’ti
() const;

121 
	`»moveAÎEËm’ts
();

123 
št32_t
 
	$size
() const;

128 
šlše
 
UBoŞ
 
	`’su»C­ac™y
(
št32_t
 
mšimumC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

131 
UBoŞ
 
	`ex·ndC­ac™y
(
št32_t
 
mšimumC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

139 
	`£tSize
(
št32_t
 
ÃwSize
);

153 
št64_t
 *
	$g‘Bufãr
() const;

161 
	`£tMaxC­ac™y
(
št32_t
 
lim™
);

166 
UCÏssID
 
U_EXPORT2
 
	`g‘SticCÏssID
();

171 
vœtu®
 
UCÏssID
 
	$g‘DyÇmicCÏssID
() const;

173 
´iv©e
:

174 
	`_š™
(
št32_t
 
š™ŸlC­ac™y
, 
UE¼ÜCode
 &
¡©us
);

177 
	`UVeùÜ64
(cÚ¡ 
UVeùÜ64
&);

180 
UVeùÜ64
& 
İ”©Ü
=(const UVector64&);

186 
public
:

191 
št64_t
 
	`pİi
();

193 
št64_t
 
	`push
(št64_ˆ
i
, 
UE¼ÜCode
 &
¡©us
);

195 
št64_t
 *
	`»£rveBlock
(
št32_t
 
size
, 
UE¼ÜCode
 &
¡©us
);

196 
št64_t
 *
	`pİF¿me
(
št32_t
 
size
);

202 
šlše
 
UBoŞ
 
UVeùÜ64
::
	$’su»C­ac™y
(
št32_t
 
mšimumC­ac™y
, 
UE¼ÜCode
 &
¡©us
) {

203 ià((
mšimumC­ac™y
 >ğ0è&& (
ÿ·c™y
 >= minimumCapacity)) {

204  
TRUE
;

206  
	`ex·ndC­ac™y
(
mšimumC­ac™y
, 
¡©us
);

208 
	}
}

210 
šlše
 
št64_t
 
	gUVeùÜ64
::
	$–em’tAti
(
št32_t
 
šdex
) const {

211  (0 <ğ
šdex
 && index < 
couÁ
è? 
–em’ts
[index] : 0;

212 
	}
}

215 
šlše
 
	gUVeùÜ64
::
	$addEËm’t
(
št64_t
 
–em
, 
UE¼ÜCode
 &
¡©us
) {

216 ià(
	`’su»C­ac™y
(
couÁ
 + 1, 
¡©us
)) {

217 
–em’ts
[
couÁ
] = 
–em
;

218 
couÁ
++;

220 
	}
}

222 
šlše
 
št64_t
 *
	gUVeùÜ64
::
	$»£rveBlock
(
št32_t
 
size
, 
UE¼ÜCode
 &
¡©us
) {

223 ià(
	`’su»C­ac™y
(
couÁ
+
size
, 
¡©us
è=ğ
FALSE
) {

224  
NULL
;

226 
št64_t
 *
½
 = 
–em’ts
+
couÁ
;

227 
couÁ
 +ğ
size
;

228  
½
;

229 
	}
}

231 
šlše
 
št64_t
 *
	gUVeùÜ64
::
	$pİF¿me
(
št32_t
 
size
) {

232 
	`U_ASSERT
(
couÁ
 >ğ
size
);

233 
couÁ
 -ğ
size
;

234 ià(
couÁ
 < 0) {

235 
couÁ
 = 0;

237  
–em’ts
+
couÁ
-
size
;

238 
	}
}

242 
šlše
 
št32_t
 
	gUVeùÜ64
::
	$size
() const {

243  
couÁ
;

244 
	}
}

246 
šlše
 
št64_t
 
	gUVeùÜ64
::
	$Ï¡EËm’ti
() const {

247  
	`–em’tAti
(
couÁ
-1);

248 
	}
}

250 
šlše
 
UBoŞ
 
	gUVeùÜ64
::
İ”©Ü
!=(cÚ¡ 
UVeùÜ64
& 
Ùh”
) {

251  !
İ”©Ü
==(
Ùh”
);

254 
šlše
 
št64_t
 *
	gUVeùÜ64
::
	$g‘Bufãr
() const {

255  
–em’ts
;

256 
	}
}

261 
šlše
 
št64_t
 
	gUVeùÜ64
::
	$push
(
št64_t
 
i
, 
UE¼ÜCode
 &
¡©us
) {

262 
	`addEËm’t
(
i
, 
¡©us
);

263  
i
;

264 
	}
}

266 
šlše
 
št64_t
 
	gUVeùÜ64
::
	$pİi
() {

267 
št64_t
 
»suÉ
 = 0;

268 ià(
couÁ
 > 0) {

269 
couÁ
--;

270 
»suÉ
 = 
–em’ts
[
couÁ
];

272  
»suÉ
;

273 
	}
}

275 
	gU_NAMESPACE_END


	@wintz.c

12 
	~"unicode/uty³s.h
"

14 #ifdeà
U_WINDOWS


16 
	~"wštz.h
"

18 
	~"cmemÜy.h
"

19 
	~"c¡ršg.h
"

21 
	~"unicode/u¡ršg.h
"

22 
	~"unicode/u»s.h
"

24 
	#WIN32_LEAN_AND_MEAN


	)

25 
	#VC_EXTRALEAN


	)

26 
	#NOUSER


	)

27 
	#NOSERVICE


	)

28 
	#NOIME


	)

29 
	#NOMCX


	)

30 
	~<wšdows.h
>

35 
št32_t
 
	mbŸs
;

36 
št32_t
 
	m¡ªd¬dBŸs
;

37 
št32_t
 
	mdaylightBŸs
;

38 
SYSTEMTIME
 
	m¡ªd¬dD©e
;

39 
SYSTEMTIME
 
	mdaylightD©e
;

40 } 
	tTZI
;

45 cÚ¡ 
	gCURRENT_ZONE_REGKEY
[] = "SYSTEM\\CurrentControlSet\\Control\\TimeZoneInformation\\";

46 cÚ¡ 
	gSTANDARD_NAME_REGKEY
[] = "StandardName";

47 cÚ¡ 
	gSTANDARD_TIME_REGKEY
[] = " Standard Time";

48 cÚ¡ 
	gTZI_REGKEY
[] = "TZI";

49 cÚ¡ 
	gSTD_REGKEY
[] = "Std";

57 cÚ¡ * cÚ¡ 
	gWIN_TYPE_PROBE_REGKEY
[] = {

71 cÚ¡ * cÚ¡ 
	gTZ_REGKEY
[] = {

85 
	mWIN_9X_ME_TYPE
 = 1,

86 
	mWIN_NT_TYPE
 = 2,

87 
	mWIN_2K_XP_TYPE
 = 3

90 
št32_t
 
	ggWšTy³
 = 0;

92 
št32_t
 
	$d‘eùWšdowsTy³
()

94 
št32_t
 
wšTy³
;

95 
LONG
 
»suÉ
;

96 
HKEY
 
hkey
;

103 
wšTy³
 = 0; winType < 2; winType++) {

104 
»suÉ
 = 
	`RegO³nKeyExA
(
HKEY_LOCAL_MACHINE
,

105 
WIN_TYPE_PROBE_REGKEY
[
wšTy³
],

107 
KEY_QUERY_VALUE
,

108 &
hkey
);

109 
	`RegClo£Key
(
hkey
);

111 ià(
»suÉ
 =ğ
ERROR_SUCCESS
) {

116  
wšTy³
+1;

117 
	}
}

119 
LONG
 
	$İ’TZRegKey
(
HKEY
 *
hkey
, cÚ¡ *
wšid
)

121 
subKeyName
[110];

122 *
Çme
;

123 
LONG
 
»suÉ
;

126 ià(
gWšTy³
 <= 0) {

127 
gWšTy³
 = 
	`d‘eùWšdowsTy³
();

130 
	`u´v_¡rıy
(
subKeyName
, 
TZ_REGKEY
[(
gWšTy³
 !ğ
WIN_9X_ME_TYPE
)]);

131 
Çme
 = &
subKeyName
[
	`¡¾’
(subKeyName)];

132 
	`u´v_¡rÿt
(
subKeyName
, 
wšid
);

134 ià(
gWšTy³
 =ğ
WIN_9X_ME_TYPE
) {

136 *
pStd
 = 
	`u´v_¡r¡r
(
subKeyName
, 
STANDARD_TIME_REGKEY
);

137 ià(
pStd
) {

138 *
pStd
 = 0;

142 
»suÉ
 = 
	`RegO³nKeyExA
(
HKEY_LOCAL_MACHINE
,

143 
subKeyName
,

145 
KEY_QUERY_VALUE
,

146 
hkey
);

147  
»suÉ
;

148 
	}
}

150 
LONG
 
	$g‘TZI
(cÚ¡ *
wšid
, 
TZI
 *
tzi
)

152 
DWORD
 
cbD©a
 = (
TZI
);

153 
LONG
 
»suÉ
;

154 
HKEY
 
hkey
;

156 
»suÉ
 = 
	`İ’TZRegKey
(&
hkey
, 
wšid
);

158 ià(
»suÉ
 =ğ
ERROR_SUCCESS
) {

159 
»suÉ
 = 
	`RegQu”yV®ueExA
(
hkey
,

160 
TZI_REGKEY
,

161 
NULL
,

162 
NULL
,

163 (
LPBYTE
)
tzi
,

164 &
cbD©a
);

168 
	`RegClo£Key
(
hkey
);

170  
»suÉ
;

171 
	}
}

225 
U_CFUNC
 cÚ¡ * 
U_EXPORT2


226 
	$u´v_d‘eùWšdowsTimeZÚe
() {

227 
UE¼ÜCode
 
¡©us
 = 
U_ZERO_ERROR
;

228 
UResourûBundË
* 
bundË
 = 
NULL
;

229 * 
icuid
 = 
NULL
;

231 
LONG
 
»suÉ
;

232 
TZI
 
tziKey
;

233 
TZI
 
tziReg
;

234 
TIME_ZONE_INFORMATION
 
­iTZI
;

239 
	`u´v_mem£t
(&
­iTZI
, 0, (apiTZI));

240 
	`u´v_mem£t
(&
tziKey
, 0, (tziKey));

241 
	`u´v_mem£t
(&
tziReg
, 0, (tziReg));

242 
	`G‘TimeZÚeInfÜm©iÚ
(&
­iTZI
);

243 
tziKey
.
bŸs
 = 
­iTZI
.
BŸs
;

244 
	`u´v_memıy
((*)&
tziKey
.
¡ªd¬dD©e
, (*)&
­iTZI
.
Snd¬dD©e
,

245 (
­iTZI
.
Snd¬dD©e
));

246 
	`u´v_memıy
((*)&
tziKey
.
daylightD©e
, (*)&
­iTZI
.
DaylightD©e
,

247 (
­iTZI
.
DaylightD©e
));

249 
bundË
 = 
	`u»s_İ’Dœeù
(
NULL
, "wšdowsZÚes", &
¡©us
);

250 
	`u»s_g‘ByKey
(
bundË
, "m­TimezÚes", bundË, &
¡©us
);

253 
	`U_SUCCESS
(
¡©us
è&& 
	`u»s_hasNext
(
bundË
)) {

254 cÚ¡ * 
wšid
;

255 
št32_t
 
Ën
;

256 
UResourûBundË
* 
wšTZ
 = 
	`u»s_g‘NextResourû
(
bundË
, 
NULL
, &
¡©us
);

257 ià(
	`U_FAILURE
(
¡©us
)) {

260 
wšid
 = 
	`u»s_g‘Key
(
wšTZ
);

261 
»suÉ
 = 
	`g‘TZI
(
wšid
, &
tziReg
);

263 ià(
»suÉ
 =ğ
ERROR_SUCCESS
) {

267 
tziKey
.
¡ªd¬dBŸs
 = 
tziReg
.standardBias;

268 
tziKey
.
daylightBŸs
 = 
tziReg
.daylightBias;

270 ià(
	`u´v_memcmp
((*)&
tziKey
, (*)&
tziReg
, (tziKey)) == 0) {

271 cÚ¡ 
UCh¬
* 
icuTZ
 = 
	`u»s_g‘SŒšgByKey
(
wšTZ
, "001", &
Ën
, &
¡©us
);

272 ià(
	`U_SUCCESS
(
¡©us
)) {

273 
icuid
 = (*)
	`u´v_m®loc
((è* (
Ën
 + 1));

274 
	`u´v_mem£t
(
icuid
, 0, 
Ën
 + 1);

275 
	`u_au¡ºıy
(
icuid
, 
icuTZ
, 
Ën
);

279 
	`u»s_şo£
(
wšTZ
);

280 ià(
icuid
 !ğ
NULL
) {

285 
	`u»s_şo£
(
bundË
);

287  
icuid
;

288 
	}
}

	@wintz.h

12 #iâdeà
__WINTZ


13 
	#__WINTZ


	)

15 
	~"unicode/uty³s.h
"

17 #ifdeà
U_WINDOWS


24 
U_CDECL_BEGIN


26 
_TIME_ZONE_INFORMATION
 
	tTIME_ZONE_INFORMATION
;

27 
U_CDECL_END


29 
U_CFUNC
 cÚ¡ * 
U_EXPORT2


30 
u´v_d‘eùWšdowsTimeZÚe
();

	@
1
.
0
321
4121
bmpset.cpp
bmpset.h
brkeng.cpp
brkeng.h
brkiter.cpp
bytestream.cpp
caniter.cpp
chariter.cpp
charstr.cpp
charstr.h
cmemory.c
cmemory.h
cpputils.h
cstring.c
cstring.h
cwchar.c
cwchar.h
dictbe.cpp
dictbe.h
dtintrv.cpp
errorcode.cpp
filterednormalizer2.cpp
hash.h
icucfg.h
icudataver.c
icuplug.c
icuplugimp.h
localsvc.h
locavailable.cpp
locbased.cpp
locbased.h
locdispnames.cpp
locid.cpp
loclikely.cpp
locmap.c
locmap.h
locresdata.cpp
locutil.cpp
locutil.h
msvcres.h
mutex.cpp
mutex.h
normalizer2.cpp
normalizer2impl.cpp
normalizer2impl.h
normlzr.cpp
parsepos.cpp
propname.cpp
propname.h
propsvec.c
propsvec.h
punycode.c
punycode.h
putil.c
putilimp.h
rbbi.cpp
rbbidata.cpp
rbbidata.h
rbbinode.cpp
rbbinode.h
rbbirb.cpp
rbbirb.h
rbbirpt.h
rbbiscan.cpp
rbbiscan.h
rbbisetb.cpp
rbbisetb.h
rbbistbl.cpp
rbbitblb.cpp
rbbitblb.h
resbund.cpp
resbund_cnv.cpp
ruleiter.cpp
ruleiter.h
schriter.cpp
serv.cpp
serv.h
servlk.cpp
servlkf.cpp
servloc.h
servls.cpp
servnotf.cpp
servnotf.h
servrbf.cpp
servslkf.cpp
sprpimpl.h
stringpiece.cpp
triedict.cpp
triedict.h
uarrsort.c
uarrsort.h
uassert.h
ubidi.c
ubidi_props.c
ubidi_props.h
ubidi_props_data.c
ubidiimp.h
ubidiln.c
ubidiwrt.c
ubrk.cpp
ubrkimpl.h
ucase.c
ucase.h
ucase_props_data.c
ucasemap.c
ucat.c
uchar.c
uchar_props_data.c
uchriter.cpp
ucln.h
ucln_cmn.c
ucln_cmn.h
ucln_imp.h
ucmndata.c
ucmndata.h
ucnv.c
ucnv2022.c
ucnv_bld.c
ucnv_bld.h
ucnv_cb.c
ucnv_cnv.c
ucnv_cnv.h
ucnv_err.c
ucnv_ext.c
ucnv_ext.h
ucnv_imp.h
ucnv_io.c
ucnv_io.h
ucnv_lmb.c
ucnv_set.c
ucnv_u16.c
ucnv_u32.c
ucnv_u7.c
ucnv_u8.c
ucnvbocu.c
ucnvdisp.c
ucnvhz.c
ucnvisci.c
ucnvlat1.c
ucnvmbcs.c
ucnvmbcs.h
ucnvscsu.c
ucnvsel.cpp
ucol_swp.cpp
ucol_swp.h
udata.cpp
udatamem.c
udatamem.h
udataswp.c
udataswp.h
uenum.c
uenumimp.h
uhash.c
uhash.h
uhash_us.cpp
uidna.cpp
uinit.c
uinvchar.c
uinvchar.h
uiter.cpp
ulist.c
ulist.h
uloc.c
uloc_tag.c
ulocimp.h
umapfile.c
umapfile.h
umath.c
umutex.c
umutex.h
unames.c
unicode/brkiter.h
unicode/bytestream.h
unicode/caniter.h
unicode/chariter.h
unicode/dbbi.h
unicode/docmain.h
unicode/dtintrv.h
unicode/errorcode.h
unicode/icudataver.h
unicode/icuplug.h
unicode/idna.h
unicode/localpointer.h
unicode/locid.h
unicode/normalizer2.h
unicode/normlzr.h
unicode/parseerr.h
unicode/parsepos.h
unicode/platform.h
unicode/ppalmos.h
unicode/ptypes.h
unicode/putil.h
unicode/pwin32.h
unicode/rbbi.h
unicode/rep.h
unicode/resbund.h
unicode/schriter.h
unicode/std_string.h
unicode/strenum.h
unicode/stringpiece.h
unicode/symtable.h
unicode/ubidi.h
unicode/ubrk.h
unicode/ucasemap.h
unicode/ucat.h
unicode/uchar.h
unicode/uchriter.h
unicode/uclean.h
unicode/ucnv.h
unicode/ucnv_cb.h
unicode/ucnv_err.h
unicode/ucnvsel.h
unicode/uconfig.h
unicode/udata.h
unicode/udeprctd.h
unicode/udraft.h
unicode/uenum.h
unicode/uidna.h
unicode/uintrnal.h
unicode/uiter.h
unicode/uloc.h
unicode/umachine.h
unicode/umisc.h
unicode/unifilt.h
unicode/unifunct.h
unicode/unimatch.h
unicode/uniset.h
unicode/unistr.h
unicode/unorm.h
unicode/unorm2.h
unicode/uobject.h
unicode/uobslete.h
unicode/urename.h
unicode/urep.h
unicode/ures.h
unicode/uscript.h
unicode/uset.h
unicode/usetiter.h
unicode/ushape.h
unicode/usprep.h
unicode/ustring.h
unicode/usystem.h
unicode/utext.h
unicode/utf.h
unicode/utf16.h
unicode/utf32.h
unicode/utf8.h
unicode/utf_old.h
unicode/utrace.h
unicode/utypes.h
unicode/uvernum.h
unicode/uversion.h
unifilt.cpp
unifunct.cpp
uniset.cpp
uniset_props.cpp
unisetspan.cpp
unisetspan.h
unistr.cpp
unistr_case.cpp
unistr_cnv.cpp
unistr_props.cpp
unorm.cpp
unorm_it.c
unorm_it.h
unorm_props_data.c
unormcmp.cpp
unormimp.h
uobject.cpp
uprops.cpp
uprops.h
ures_cnv.c
uresbund.c
uresdata.c
uresdata.h
uresimp.h
ureslocs.h
usc_impl.c
usc_impl.h
uscript.c
uset.cpp
uset_imp.h
uset_props.cpp
usetiter.cpp
ushape.c
usprep.cpp
ustack.cpp
ustr_cnv.c
ustr_cnv.h
ustr_imp.h
ustr_wcs.c
ustrcase.c
ustrenum.cpp
ustrenum.h
ustrfmt.c
ustrfmt.h
ustring.c
ustrtrns.c
utext.cpp
utf_impl.c
util.cpp
util.h
util_props.cpp
utrace.c
utracimp.h
utrie.c
utrie.h
utrie2.cpp
utrie2.h
utrie2_builder.c
utrie2_impl.h
uts46.cpp
utypes.c
uvector.cpp
uvector.h
uvectr32.cpp
uvectr32.h
uvectr64.cpp
uvectr64.h
wintz.c
wintz.h
